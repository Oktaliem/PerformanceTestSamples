<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="7">
  <HTTPTask id="458" hostname="192.168.1.66" path="/web/content/434-383b496/web.assets_common_lazy.js" url="http://192.168.1.66/web/content/434-383b496/web.assets_common_lazy.js" ip="192.168.1.66" port="80" connectionId="30" origin="Primary" frame="1" startDateTime="2020-01-19T09:04:34.132+08:00" startTime="257335093" endTime="257335156">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4xLjY2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMTcgU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMS42Ni93ZWIvbG9naW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbl9pZD1iYWUzMWM0Mzg0NWM1ZDhmZTZjMTk2M2RjNGRmNGQzMmNmOWJlN2Yz</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC93ZWIvY29udGVudC80MzQtMzgzYjQ5Ni93ZWIuYXNzZXRzX2NvbW1vbl9sYXp5LmpzIEhUVFAvMS4xDQpIb3N0OiAxOTIuMTY4LjEuNjYNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjM5NDUuMTE3IFNhZmFyaS81MzcuMzYNCkFjY2VwdDogKi8qDQpSZWZlcmVyOiBodHRwOi8vMTkyLjE2OC4xLjY2L3dlYi9sb2dpbg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpDb29raWU6IHNlc3Npb25faWQ9YmFlMzFjNDM4NDVjNWQ4ZmU2YzE5NjNkYzRkZjRkMzJjZjliZTdmMw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="session_id" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFlMzFjNDM4NDVjNWQ4ZmU2YzE5NjNkYzRkZjRkMzJjZjliZTdmMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>1091933</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZDdiYmE5NmY2YzJlMTEyNjg3MjZiMzZjYzI1NzdiNDgzZTZkZTUzOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTA5MTkzMw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbl9pZD1iYWUzMWM0Mzg0NWM1ZDhmZTZjMTk2M2RjNGRmNGQzMmNmOWJlN2YzOyBFeHBpcmVzPVR1ZSwgMTQtQXByLTIwMjAgMjI6NTY6MTkgR01UOyBNYXgtQWdlPTc3NzYwMDA7IEh0dHBPbmx5OyBQYXRoPS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2Vya3pldWcvMC4xNC4xIFB5dGhvbi8zLjYuOQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNSBKYW4gMjAyMCAyMjo1NjoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjAgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNClgtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYNCkVUYWc6IGQ3YmJhOTZmNmMyZTExMjY4NzI2YjM2Y2MyNTc3YjQ4M2U2ZGU1MzgNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MzE1MzYwMDANCkNvbnRlbnQtTGVuZ3RoOiAxMDkxOTMzDQpTZXQtQ29va2llOiBzZXNzaW9uX2lkPWJhZTMxYzQzODQ1YzVkOGZlNmMxOTYzZGM0ZGY0ZDMyY2Y5YmU3ZjM7IEV4cGlyZXM9VHVlLCAxNC1BcHItMjAyMCAyMjo1NjoxOSBHTVQ7IE1heC1BZ2U9Nzc3NjAwMDsgSHR0cE9ubHk7IFBhdGg9Lw0KU2VydmVyOiBXZXJremV1Zy8wLjE0LjEgUHl0aG9uLzMuNi45DQpEYXRlOiBXZWQsIDE1IEphbiAyMDIwIDIyOjU2OjE5IEdNVA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Ci8qIC93ZWIvc3RhdGljL2xpYi91bmRlcnNjb3JlL3VuZGVyc2NvcmUuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbigpe3ZhciByb290PXRoaXM7dmFyIHByZXZpb3VzVW5kZXJzY29yZT1yb290Ll87dmFyIEFycmF5UHJvdG89QXJyYXkucHJvdG90eXBlLE9ialByb3RvPU9iamVjdC5wcm90b3R5cGUsRnVuY1Byb3RvPUZ1bmN0aW9uLnByb3RvdHlwZTt2YXIKcHVzaD1BcnJheVByb3RvLnB1c2gsc2xpY2U9QXJyYXlQcm90by5zbGljZSx0b1N0cmluZz1PYmpQcm90by50b1N0cmluZyxoYXNPd25Qcm9wZXJ0eT1PYmpQcm90by5oYXNPd25Qcm9wZXJ0eTt2YXIKbmF0aXZlSXNBcnJheT1BcnJheS5pc0FycmF5LG5hdGl2ZUtleXM9T2JqZWN0LmtleXMsbmF0aXZlQmluZD1GdW5jUHJvdG8uYmluZCxuYXRpdmVDcmVhdGU9T2JqZWN0LmNyZWF0ZTt2YXIgQ3Rvcj1mdW5jdGlvbigpe307dmFyIF89ZnVuY3Rpb24ob2JqKXtpZihvYmogaW5zdGFuY2VvZiBfKXJldHVybiBvYmo7aWYoISh0aGlzIGluc3RhbmNlb2YgXykpcmV0dXJuIG5ldyBfKG9iaik7dGhpcy5fd3JhcHBlZD1vYmo7fTtpZih0eXBlb2YgZXhwb3J0cyE9PSd1bmRlZmluZWQnKXtpZih0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCcmJm1vZHVsZS5leHBvcnRzKXtleHBvcnRzPW1vZHVsZS5leHBvcnRzPV87fQpleHBvcnRzLl89Xzt9ZWxzZXtyb290Ll89Xzt9Cl8uVkVSU0lPTj0nMS44LjInO3ZhciBvcHRpbWl6ZUNiPWZ1bmN0aW9uKGZ1bmMsY29udGV4dCxhcmdDb3VudCl7aWYoY29udGV4dD09PXZvaWQgMClyZXR1cm4gZnVuYztzd2l0Y2goYXJnQ291bnQ9PW51bGw/MzphcmdDb3VudCl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LHZhbHVlKTt9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24odmFsdWUsb3RoZXIpe3JldHVybiBmdW5jLmNhbGwoY29udGV4dCx2YWx1ZSxvdGhlcik7fTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pe3JldHVybiBmdW5jLmNhbGwoY29udGV4dCx2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTt9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsdmFsdWUsaW5kZXgsY29sbGVjdGlvbil7cmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LGFjY3VtdWxhdG9yLHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pO307fQpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LGFyZ3VtZW50cyk7fTt9O3ZhciBjYj1mdW5jdGlvbih2YWx1ZSxjb250ZXh0LGFyZ0NvdW50KXtpZih2YWx1ZT09bnVsbClyZXR1cm4gXy5pZGVudGl0eTtpZihfLmlzRnVuY3Rpb24odmFsdWUpKXJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLGNvbnRleHQsYXJnQ291bnQpO2lmKF8uaXNPYmplY3QodmFsdWUpKXJldHVybiBfLm1hdGNoZXIodmFsdWUpO3JldHVybiBfLnByb3BlcnR5KHZhbHVlKTt9O18uaXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsY29udGV4dCl7cmV0dXJuIGNiKHZhbHVlLGNvbnRleHQsSW5maW5pdHkpO307dmFyIGNyZWF0ZUFzc2lnbmVyPWZ1bmN0aW9uKGtleXNGdW5jLHVuZGVmaW5lZE9ubHkpe3JldHVybiBmdW5jdGlvbihvYmope3ZhciBsZW5ndGg9YXJndW1lbnRzLmxlbmd0aDtpZihsZW5ndGg8Mnx8b2JqPT1udWxsKXJldHVybiBvYmo7Zm9yKHZhciBpbmRleD0xO2luZGV4PGxlbmd0aDtpbmRleCsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpbmRleF0sa2V5cz1rZXlzRnVuYyhzb3VyY2UpLGw9a2V5cy5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIGtleT1rZXlzW2ldO2lmKCF1bmRlZmluZWRPbmx5fHxvYmpba2V5XT09PXZvaWQgMClvYmpba2V5XT1zb3VyY2Vba2V5XTt9fQpyZXR1cm4gb2JqO307fTt2YXIgYmFzZUNyZWF0ZT1mdW5jdGlvbihwcm90b3R5cGUpe2lmKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpcmV0dXJue307aWYobmF0aXZlQ3JlYXRlKXJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtDdG9yLnByb3RvdHlwZT1wcm90b3R5cGU7dmFyIHJlc3VsdD1uZXcgQ3RvcjtDdG9yLnByb3RvdHlwZT1udWxsO3JldHVybiByZXN1bHQ7fTt2YXIgTUFYX0FSUkFZX0lOREVYPU1hdGgucG93KDIsNTMpLTE7dmFyIGlzQXJyYXlMaWtlPWZ1bmN0aW9uKGNvbGxlY3Rpb24pe3ZhciBsZW5ndGg9Y29sbGVjdGlvbiYmY29sbGVjdGlvbi5sZW5ndGg7cmV0dXJuIHR5cGVvZiBsZW5ndGg9PSdudW1iZXInJiZsZW5ndGg+PTAmJmxlbmd0aDw9TUFYX0FSUkFZX0lOREVYO307Xy5lYWNoPV8uZm9yRWFjaD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aXRlcmF0ZWU9b3B0aW1pemVDYihpdGVyYXRlZSxjb250ZXh0KTt2YXIgaSxsZW5ndGg7aWYoaXNBcnJheUxpa2Uob2JqKSl7Zm9yKGk9MCxsZW5ndGg9b2JqLmxlbmd0aDtpPGxlbmd0aDtpKyspe2l0ZXJhdGVlKG9ialtpXSxpLG9iaik7fX1lbHNle3ZhciBrZXlzPV8ua2V5cyhvYmopO2ZvcihpPTAsbGVuZ3RoPWtleXMubGVuZ3RoO2k8bGVuZ3RoO2krKyl7aXRlcmF0ZWUob2JqW2tleXNbaV1dLGtleXNbaV0sb2JqKTt9fQpyZXR1cm4gb2JqO307Xy5tYXA9Xy5jb2xsZWN0PWZ1bmN0aW9uKG9iaixpdGVyYXRlZSxjb250ZXh0KXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aCxyZXN1bHRzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXt2YXIgY3VycmVudEtleT1rZXlzP2tleXNbaW5kZXhdOmluZGV4O3Jlc3VsdHNbaW5kZXhdPWl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaik7fQpyZXR1cm4gcmVzdWx0czt9O2Z1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpe2Z1bmN0aW9uIGl0ZXJhdG9yKG9iaixpdGVyYXRlZSxtZW1vLGtleXMsaW5kZXgsbGVuZ3RoKXtmb3IoO2luZGV4Pj0wJiZpbmRleDxsZW5ndGg7aW5kZXgrPWRpcil7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDttZW1vPWl0ZXJhdGVlKG1lbW8sb2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKTt9CnJldHVybiBtZW1vO30KcmV0dXJuIGZ1bmN0aW9uKG9iaixpdGVyYXRlZSxtZW1vLGNvbnRleHQpe2l0ZXJhdGVlPW9wdGltaXplQ2IoaXRlcmF0ZWUsY29udGV4dCw0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aCxpbmRleD1kaXI+MD8wOmxlbmd0aC0xO2lmKGFyZ3VtZW50cy5sZW5ndGg8Myl7bWVtbz1vYmpba2V5cz9rZXlzW2luZGV4XTppbmRleF07aW5kZXgrPWRpcjt9CnJldHVybiBpdGVyYXRvcihvYmosaXRlcmF0ZWUsbWVtbyxrZXlzLGluZGV4LGxlbmd0aCk7fTt9Cl8ucmVkdWNlPV8uZm9sZGw9Xy5pbmplY3Q9Y3JlYXRlUmVkdWNlKDEpO18ucmVkdWNlUmlnaHQ9Xy5mb2xkcj1jcmVhdGVSZWR1Y2UoLTEpO18uZmluZD1fLmRldGVjdD1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ZhciBrZXk7aWYoaXNBcnJheUxpa2Uob2JqKSl7a2V5PV8uZmluZEluZGV4KG9iaixwcmVkaWNhdGUsY29udGV4dCk7fWVsc2V7a2V5PV8uZmluZEtleShvYmoscHJlZGljYXRlLGNvbnRleHQpO30KaWYoa2V5IT09dm9pZCAwJiZrZXkhPT0tMSlyZXR1cm4gb2JqW2tleV07fTtfLmZpbHRlcj1fLnNlbGVjdD1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ZhciByZXN1bHRzPVtdO3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsbGlzdCkpcmVzdWx0cy5wdXNoKHZhbHVlKTt9KTtyZXR1cm4gcmVzdWx0czt9O18ucmVqZWN0PWZ1bmN0aW9uKG9iaixwcmVkaWNhdGUsY29udGV4dCl7cmV0dXJuIF8uZmlsdGVyKG9iaixfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSxjb250ZXh0KTt9O18uZXZlcnk9Xy5hbGw9ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBrZXlzPSFpc0FycmF5TGlrZShvYmopJiZfLmtleXMob2JqKSxsZW5ndGg9KGtleXN8fG9iaikubGVuZ3RoO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDtpZighcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaikpcmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fTtfLnNvbWU9Xy5hbnk9ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBrZXlzPSFpc0FycmF5TGlrZShvYmopJiZfLmtleXMob2JqKSxsZW5ndGg9KGtleXN8fG9iaikubGVuZ3RoO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDtpZihwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKSlyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O18uY29udGFpbnM9Xy5pbmNsdWRlcz1fLmluY2x1ZGU9ZnVuY3Rpb24ob2JqLHRhcmdldCxmcm9tSW5kZXgpe2lmKCFpc0FycmF5TGlrZShvYmopKW9iaj1fLnZhbHVlcyhvYmopO3JldHVybiBfLmluZGV4T2Yob2JqLHRhcmdldCx0eXBlb2YgZnJvbUluZGV4PT0nbnVtYmVyJyYmZnJvbUluZGV4KT49MDt9O18uaW52b2tlPWZ1bmN0aW9uKG9iaixtZXRob2Qpe3ZhciBhcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3ZhciBpc0Z1bmM9Xy5pc0Z1bmN0aW9uKG1ldGhvZCk7cmV0dXJuIF8ubWFwKG9iaixmdW5jdGlvbih2YWx1ZSl7dmFyIGZ1bmM9aXNGdW5jP21ldGhvZDp2YWx1ZVttZXRob2RdO3JldHVybiBmdW5jPT1udWxsP2Z1bmM6ZnVuYy5hcHBseSh2YWx1ZSxhcmdzKTt9KTt9O18ucGx1Y2s9ZnVuY3Rpb24ob2JqLGtleSl7cmV0dXJuIF8ubWFwKG9iaixfLnByb3BlcnR5KGtleSkpO307Xy53aGVyZT1mdW5jdGlvbihvYmosYXR0cnMpe3JldHVybiBfLmZpbHRlcihvYmosXy5tYXRjaGVyKGF0dHJzKSk7fTtfLmZpbmRXaGVyZT1mdW5jdGlvbihvYmosYXR0cnMpe3JldHVybiBfLmZpbmQob2JqLF8ubWF0Y2hlcihhdHRycykpO307Xy5tYXg9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9LUluZmluaXR5LGxhc3RDb21wdXRlZD0tSW5maW5pdHksdmFsdWUsY29tcHV0ZWQ7aWYoaXRlcmF0ZWU9PW51bGwmJm9iaiE9bnVsbCl7b2JqPWlzQXJyYXlMaWtlKG9iaik/b2JqOl8udmFsdWVzKG9iaik7Zm9yKHZhciBpPTAsbGVuZ3RoPW9iai5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YWx1ZT1vYmpbaV07aWYodmFsdWU+cmVzdWx0KXtyZXN1bHQ9dmFsdWU7fX19ZWxzZXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTtfLmVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGluZGV4LGxpc3Qpe2NvbXB1dGVkPWl0ZXJhdGVlKHZhbHVlLGluZGV4LGxpc3QpO2lmKGNvbXB1dGVkPmxhc3RDb21wdXRlZHx8Y29tcHV0ZWQ9PT0tSW5maW5pdHkmJnJlc3VsdD09PS1JbmZpbml0eSl7cmVzdWx0PXZhbHVlO2xhc3RDb21wdXRlZD1jb21wdXRlZDt9fSk7fQpyZXR1cm4gcmVzdWx0O307Xy5taW49ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9SW5maW5pdHksbGFzdENvbXB1dGVkPUluZmluaXR5LHZhbHVlLGNvbXB1dGVkO2lmKGl0ZXJhdGVlPT1udWxsJiZvYmohPW51bGwpe29iaj1pc0FycmF5TGlrZShvYmopP29iajpfLnZhbHVlcyhvYmopO2Zvcih2YXIgaT0wLGxlbmd0aD1vYmoubGVuZ3RoO2k8bGVuZ3RoO2krKyl7dmFsdWU9b2JqW2ldO2lmKHZhbHVlPHJlc3VsdCl7cmVzdWx0PXZhbHVlO319fWVsc2V7aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtjb21wdXRlZD1pdGVyYXRlZSh2YWx1ZSxpbmRleCxsaXN0KTtpZihjb21wdXRlZDxsYXN0Q29tcHV0ZWR8fGNvbXB1dGVkPT09SW5maW5pdHkmJnJlc3VsdD09PUluZmluaXR5KXtyZXN1bHQ9dmFsdWU7bGFzdENvbXB1dGVkPWNvbXB1dGVkO319KTt9CnJldHVybiByZXN1bHQ7fTtfLnNodWZmbGU9ZnVuY3Rpb24ob2JqKXt2YXIgc2V0PWlzQXJyYXlMaWtlKG9iaik/b2JqOl8udmFsdWVzKG9iaik7dmFyIGxlbmd0aD1zZXQubGVuZ3RoO3ZhciBzaHVmZmxlZD1BcnJheShsZW5ndGgpO2Zvcih2YXIgaW5kZXg9MCxyYW5kO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyYW5kPV8ucmFuZG9tKDAsaW5kZXgpO2lmKHJhbmQhPT1pbmRleClzaHVmZmxlZFtpbmRleF09c2h1ZmZsZWRbcmFuZF07c2h1ZmZsZWRbcmFuZF09c2V0W2luZGV4XTt9CnJldHVybiBzaHVmZmxlZDt9O18uc2FtcGxlPWZ1bmN0aW9uKG9iaixuLGd1YXJkKXtpZihuPT1udWxsfHxndWFyZCl7aWYoIWlzQXJyYXlMaWtlKG9iaikpb2JqPV8udmFsdWVzKG9iaik7cmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoLTEpXTt9CnJldHVybiBfLnNodWZmbGUob2JqKS5zbGljZSgwLE1hdGgubWF4KDAsbikpO307Xy5zb3J0Qnk9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe2l0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3JldHVybiBfLnBsdWNrKF8ubWFwKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtyZXR1cm57dmFsdWU6dmFsdWUsaW5kZXg6aW5kZXgsY3JpdGVyaWE6aXRlcmF0ZWUodmFsdWUsaW5kZXgsbGlzdCl9O30pLnNvcnQoZnVuY3Rpb24obGVmdCxyaWdodCl7dmFyIGE9bGVmdC5jcml0ZXJpYTt2YXIgYj1yaWdodC5jcml0ZXJpYTtpZihhIT09Yil7aWYoYT5ifHxhPT09dm9pZCAwKXJldHVybiAxO2lmKGE8Ynx8Yj09PXZvaWQgMClyZXR1cm4tMTt9CnJldHVybiBsZWZ0LmluZGV4LXJpZ2h0LmluZGV4O30pLCd2YWx1ZScpO307dmFyIGdyb3VwPWZ1bmN0aW9uKGJlaGF2aW9yKXtyZXR1cm4gZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9e307aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCl7dmFyIGtleT1pdGVyYXRlZSh2YWx1ZSxpbmRleCxvYmopO2JlaGF2aW9yKHJlc3VsdCx2YWx1ZSxrZXkpO30pO3JldHVybiByZXN1bHQ7fTt9O18uZ3JvdXBCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihfLmhhcyhyZXN1bHQsa2V5KSlyZXN1bHRba2V5XS5wdXNoKHZhbHVlKTtlbHNlIHJlc3VsdFtrZXldPVt2YWx1ZV07fSk7Xy5pbmRleEJ5PWdyb3VwKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe3Jlc3VsdFtrZXldPXZhbHVlO30pO18uY291bnRCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihfLmhhcyhyZXN1bHQsa2V5KSlyZXN1bHRba2V5XSsrO2Vsc2UgcmVzdWx0W2tleV09MTt9KTtfLnRvQXJyYXk9ZnVuY3Rpb24ob2JqKXtpZighb2JqKXJldHVybltdO2lmKF8uaXNBcnJheShvYmopKXJldHVybiBzbGljZS5jYWxsKG9iaik7aWYoaXNBcnJheUxpa2Uob2JqKSlyZXR1cm4gXy5tYXAob2JqLF8uaWRlbnRpdHkpO3JldHVybiBfLnZhbHVlcyhvYmopO307Xy5zaXplPWZ1bmN0aW9uKG9iail7aWYob2JqPT1udWxsKXJldHVybiAwO3JldHVybiBpc0FycmF5TGlrZShvYmopP29iai5sZW5ndGg6Xy5rZXlzKG9iaikubGVuZ3RoO307Xy5wYXJ0aXRpb249ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBwYXNzPVtdLGZhaWw9W107Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXksb2JqKXsocHJlZGljYXRlKHZhbHVlLGtleSxvYmopP3Bhc3M6ZmFpbCkucHVzaCh2YWx1ZSk7fSk7cmV0dXJuW3Bhc3MsZmFpbF07fTtfLmZpcnN0PV8uaGVhZD1fLnRha2U9ZnVuY3Rpb24oYXJyYXksbixndWFyZCl7aWYoYXJyYXk9PW51bGwpcmV0dXJuIHZvaWQgMDtpZihuPT1udWxsfHxndWFyZClyZXR1cm4gYXJyYXlbMF07cmV0dXJuIF8uaW5pdGlhbChhcnJheSxhcnJheS5sZW5ndGgtbik7fTtfLmluaXRpYWw9ZnVuY3Rpb24oYXJyYXksbixndWFyZCl7cmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksMCxNYXRoLm1heCgwLGFycmF5Lmxlbmd0aC0obj09bnVsbHx8Z3VhcmQ/MTpuKSkpO307Xy5sYXN0PWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe2lmKGFycmF5PT1udWxsKXJldHVybiB2b2lkIDA7aWYobj09bnVsbHx8Z3VhcmQpcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aC0xXTtyZXR1cm4gXy5yZXN0KGFycmF5LE1hdGgubWF4KDAsYXJyYXkubGVuZ3RoLW4pKTt9O18ucmVzdD1fLnRhaWw9Xy5kcm9wPWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe3JldHVybiBzbGljZS5jYWxsKGFycmF5LG49PW51bGx8fGd1YXJkPzE6bik7fTtfLmNvbXBhY3Q9ZnVuY3Rpb24oYXJyYXkpe3JldHVybiBfLmZpbHRlcihhcnJheSxfLmlkZW50aXR5KTt9O3ZhciBmbGF0dGVuPWZ1bmN0aW9uKGlucHV0LHNoYWxsb3csc3RyaWN0LHN0YXJ0SW5kZXgpe3ZhciBvdXRwdXQ9W10saWR4PTA7Zm9yKHZhciBpPXN0YXJ0SW5kZXh8fDAsbGVuZ3RoPWlucHV0JiZpbnB1dC5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIgdmFsdWU9aW5wdXRbaV07aWYoaXNBcnJheUxpa2UodmFsdWUpJiYoXy5pc0FycmF5KHZhbHVlKXx8Xy5pc0FyZ3VtZW50cyh2YWx1ZSkpKXtpZighc2hhbGxvdyl2YWx1ZT1mbGF0dGVuKHZhbHVlLHNoYWxsb3csc3RyaWN0KTt2YXIgaj0wLGxlbj12YWx1ZS5sZW5ndGg7b3V0cHV0Lmxlbmd0aCs9bGVuO3doaWxlKGo8bGVuKXtvdXRwdXRbaWR4KytdPXZhbHVlW2orK107fX1lbHNlIGlmKCFzdHJpY3Qpe291dHB1dFtpZHgrK109dmFsdWU7fX0KcmV0dXJuIG91dHB1dDt9O18uZmxhdHRlbj1mdW5jdGlvbihhcnJheSxzaGFsbG93KXtyZXR1cm4gZmxhdHRlbihhcnJheSxzaGFsbG93LGZhbHNlKTt9O18ud2l0aG91dD1mdW5jdGlvbihhcnJheSl7cmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSxzbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7fTtfLnVuaXE9Xy51bmlxdWU9ZnVuY3Rpb24oYXJyYXksaXNTb3J0ZWQsaXRlcmF0ZWUsY29udGV4dCl7aWYoYXJyYXk9PW51bGwpcmV0dXJuW107aWYoIV8uaXNCb29sZWFuKGlzU29ydGVkKSl7Y29udGV4dD1pdGVyYXRlZTtpdGVyYXRlZT1pc1NvcnRlZDtpc1NvcnRlZD1mYWxzZTt9CmlmKGl0ZXJhdGVlIT1udWxsKWl0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3ZhciByZXN1bHQ9W107dmFyIHNlZW49W107Zm9yKHZhciBpPTAsbGVuZ3RoPWFycmF5Lmxlbmd0aDtpPGxlbmd0aDtpKyspe3ZhciB2YWx1ZT1hcnJheVtpXSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSxpLGFycmF5KTp2YWx1ZTtpZihpc1NvcnRlZCl7aWYoIWl8fHNlZW4hPT1jb21wdXRlZClyZXN1bHQucHVzaCh2YWx1ZSk7c2Vlbj1jb21wdXRlZDt9ZWxzZSBpZihpdGVyYXRlZSl7aWYoIV8uY29udGFpbnMoc2Vlbixjb21wdXRlZCkpe3NlZW4ucHVzaChjb21wdXRlZCk7cmVzdWx0LnB1c2godmFsdWUpO319ZWxzZSBpZighXy5jb250YWlucyhyZXN1bHQsdmFsdWUpKXtyZXN1bHQucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHJlc3VsdDt9O18udW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLHRydWUsdHJ1ZSkpO307Xy5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oYXJyYXkpe2lmKGFycmF5PT1udWxsKXJldHVybltdO3ZhciByZXN1bHQ9W107dmFyIGFyZ3NMZW5ndGg9YXJndW1lbnRzLmxlbmd0aDtmb3IodmFyIGk9MCxsZW5ndGg9YXJyYXkubGVuZ3RoO2k8bGVuZ3RoO2krKyl7dmFyIGl0ZW09YXJyYXlbaV07aWYoXy5jb250YWlucyhyZXN1bHQsaXRlbSkpY29udGludWU7Zm9yKHZhciBqPTE7ajxhcmdzTGVuZ3RoO2orKyl7aWYoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLGl0ZW0pKWJyZWFrO30KaWYoaj09PWFyZ3NMZW5ndGgpcmVzdWx0LnB1c2goaXRlbSk7fQpyZXR1cm4gcmVzdWx0O307Xy5kaWZmZXJlbmNlPWZ1bmN0aW9uKGFycmF5KXt2YXIgcmVzdD1mbGF0dGVuKGFyZ3VtZW50cyx0cnVlLHRydWUsMSk7cmV0dXJuIF8uZmlsdGVyKGFycmF5LGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hXy5jb250YWlucyhyZXN0LHZhbHVlKTt9KTt9O18uemlwPWZ1bmN0aW9uKCl7cmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTt9O18udW56aXA9ZnVuY3Rpb24oYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXkmJl8ubWF4KGFycmF5LCdsZW5ndGgnKS5sZW5ndGh8fDA7dmFyIHJlc3VsdD1BcnJheShsZW5ndGgpO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cmVzdWx0W2luZGV4XT1fLnBsdWNrKGFycmF5LGluZGV4KTt9CnJldHVybiByZXN1bHQ7fTtfLm9iamVjdD1mdW5jdGlvbihsaXN0LHZhbHVlcyl7dmFyIHJlc3VsdD17fTtmb3IodmFyIGk9MCxsZW5ndGg9bGlzdCYmbGlzdC5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZih2YWx1ZXMpe3Jlc3VsdFtsaXN0W2ldXT12YWx1ZXNbaV07fWVsc2V7cmVzdWx0W2xpc3RbaV1bMF1dPWxpc3RbaV1bMV07fX0KcmV0dXJuIHJlc3VsdDt9O18uaW5kZXhPZj1mdW5jdGlvbihhcnJheSxpdGVtLGlzU29ydGVkKXt2YXIgaT0wLGxlbmd0aD1hcnJheSYmYXJyYXkubGVuZ3RoO2lmKHR5cGVvZiBpc1NvcnRlZD09J251bWJlcicpe2k9aXNTb3J0ZWQ8MD9NYXRoLm1heCgwLGxlbmd0aCtpc1NvcnRlZCk6aXNTb3J0ZWQ7fWVsc2UgaWYoaXNTb3J0ZWQmJmxlbmd0aCl7aT1fLnNvcnRlZEluZGV4KGFycmF5LGl0ZW0pO3JldHVybiBhcnJheVtpXT09PWl0ZW0/aTotMTt9CmlmKGl0ZW0hPT1pdGVtKXtyZXR1cm4gXy5maW5kSW5kZXgoc2xpY2UuY2FsbChhcnJheSxpKSxfLmlzTmFOKTt9CmZvcig7aTxsZW5ndGg7aSsrKWlmKGFycmF5W2ldPT09aXRlbSlyZXR1cm4gaTtyZXR1cm4tMTt9O18ubGFzdEluZGV4T2Y9ZnVuY3Rpb24oYXJyYXksaXRlbSxmcm9tKXt2YXIgaWR4PWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKHR5cGVvZiBmcm9tPT0nbnVtYmVyJyl7aWR4PWZyb208MD9pZHgrZnJvbSsxOk1hdGgubWluKGlkeCxmcm9tKzEpO30KaWYoaXRlbSE9PWl0ZW0pe3JldHVybiBfLmZpbmRMYXN0SW5kZXgoc2xpY2UuY2FsbChhcnJheSwwLGlkeCksXy5pc05hTik7fQp3aGlsZSgtLWlkeD49MClpZihhcnJheVtpZHhdPT09aXRlbSlyZXR1cm4gaWR4O3JldHVybi0xO307ZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyKXtyZXR1cm4gZnVuY3Rpb24oYXJyYXkscHJlZGljYXRlLGNvbnRleHQpe3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7dmFyIGxlbmd0aD1hcnJheSE9bnVsbCYmYXJyYXkubGVuZ3RoO3ZhciBpbmRleD1kaXI+MD8wOmxlbmd0aC0xO2Zvcig7aW5kZXg+PTAmJmluZGV4PGxlbmd0aDtpbmRleCs9ZGlyKXtpZihwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSlyZXR1cm4gaW5kZXg7fQpyZXR1cm4tMTt9O30KXy5maW5kSW5kZXg9Y3JlYXRlSW5kZXhGaW5kZXIoMSk7Xy5maW5kTGFzdEluZGV4PWNyZWF0ZUluZGV4RmluZGVyKC0xKTtfLnNvcnRlZEluZGV4PWZ1bmN0aW9uKGFycmF5LG9iaixpdGVyYXRlZSxjb250ZXh0KXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0LDEpO3ZhciB2YWx1ZT1pdGVyYXRlZShvYmopO3ZhciBsb3c9MCxoaWdoPWFycmF5Lmxlbmd0aDt3aGlsZShsb3c8aGlnaCl7dmFyIG1pZD1NYXRoLmZsb29yKChsb3craGlnaCkvMik7aWYoaXRlcmF0ZWUoYXJyYXlbbWlkXSk8dmFsdWUpbG93PW1pZCsxO2Vsc2UgaGlnaD1taWQ7fQpyZXR1cm4gbG93O307Xy5yYW5nZT1mdW5jdGlvbihzdGFydCxzdG9wLHN0ZXApe2lmKGFyZ3VtZW50cy5sZW5ndGg8PTEpe3N0b3A9c3RhcnR8fDA7c3RhcnQ9MDt9CnN0ZXA9c3RlcHx8MTt2YXIgbGVuZ3RoPU1hdGgubWF4KE1hdGguY2VpbCgoc3RvcC1zdGFydCkvc3RlcCksMCk7dmFyIHJhbmdlPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpZHg9MDtpZHg8bGVuZ3RoO2lkeCsrLHN0YXJ0Kz1zdGVwKXtyYW5nZVtpZHhdPXN0YXJ0O30KcmV0dXJuIHJhbmdlO307dmFyIGV4ZWN1dGVCb3VuZD1mdW5jdGlvbihzb3VyY2VGdW5jLGJvdW5kRnVuYyxjb250ZXh0LGNhbGxpbmdDb250ZXh0LGFyZ3Mpe2lmKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKXJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7dmFyIHNlbGY9YmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7dmFyIHJlc3VsdD1zb3VyY2VGdW5jLmFwcGx5KHNlbGYsYXJncyk7aWYoXy5pc09iamVjdChyZXN1bHQpKXJldHVybiByZXN1bHQ7cmV0dXJuIHNlbGY7fTtfLmJpbmQ9ZnVuY3Rpb24oZnVuYyxjb250ZXh0KXtpZihuYXRpdmVCaW5kJiZmdW5jLmJpbmQ9PT1uYXRpdmVCaW5kKXJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO2lmKCFfLmlzRnVuY3Rpb24oZnVuYykpdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7dmFyIGFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMsMik7dmFyIGJvdW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLGNvbnRleHQsdGhpcyxhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTt9O3JldHVybiBib3VuZDt9O18ucGFydGlhbD1mdW5jdGlvbihmdW5jKXt2YXIgYm91bmRBcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3ZhciBib3VuZD1mdW5jdGlvbigpe3ZhciBwb3NpdGlvbj0wLGxlbmd0aD1ib3VuZEFyZ3MubGVuZ3RoO3ZhciBhcmdzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXthcmdzW2ldPWJvdW5kQXJnc1tpXT09PV8/YXJndW1lbnRzW3Bvc2l0aW9uKytdOmJvdW5kQXJnc1tpXTt9CndoaWxlKHBvc2l0aW9uPGFyZ3VtZW50cy5sZW5ndGgpYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLHRoaXMsdGhpcyxhcmdzKTt9O3JldHVybiBib3VuZDt9O18uYmluZEFsbD1mdW5jdGlvbihvYmope3ZhciBpLGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGtleTtpZihsZW5ndGg8PTEpdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7Zm9yKGk9MTtpPGxlbmd0aDtpKyspe2tleT1hcmd1bWVudHNbaV07b2JqW2tleV09Xy5iaW5kKG9ialtrZXldLG9iaik7fQpyZXR1cm4gb2JqO307Xy5tZW1vaXplPWZ1bmN0aW9uKGZ1bmMsaGFzaGVyKXt2YXIgbWVtb2l6ZT1mdW5jdGlvbihrZXkpe3ZhciBjYWNoZT1tZW1vaXplLmNhY2hlO3ZhciBhZGRyZXNzPScnKyhoYXNoZXI/aGFzaGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTprZXkpO2lmKCFfLmhhcyhjYWNoZSxhZGRyZXNzKSljYWNoZVthZGRyZXNzXT1mdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gY2FjaGVbYWRkcmVzc107fTttZW1vaXplLmNhY2hlPXt9O3JldHVybiBtZW1vaXplO307Xy5kZWxheT1mdW5jdGlvbihmdW5jLHdhaXQpe3ZhciBhcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmMuYXBwbHkobnVsbCxhcmdzKTt9LHdhaXQpO307Xy5kZWZlcj1fLnBhcnRpYWwoXy5kZWxheSxfLDEpO18udGhyb3R0bGU9ZnVuY3Rpb24oZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciBjb250ZXh0LGFyZ3MscmVzdWx0O3ZhciB0aW1lb3V0PW51bGw7dmFyIHByZXZpb3VzPTA7aWYoIW9wdGlvbnMpb3B0aW9ucz17fTt2YXIgbGF0ZXI9ZnVuY3Rpb24oKXtwcmV2aW91cz1vcHRpb25zLmxlYWRpbmc9PT1mYWxzZT8wOl8ubm93KCk7dGltZW91dD1udWxsO3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbm93PV8ubm93KCk7aWYoIXByZXZpb3VzJiZvcHRpb25zLmxlYWRpbmc9PT1mYWxzZSlwcmV2aW91cz1ub3c7dmFyIHJlbWFpbmluZz13YWl0LShub3ctcHJldmlvdXMpO2NvbnRleHQ9dGhpczthcmdzPWFyZ3VtZW50cztpZihyZW1haW5pbmc8PTB8fHJlbWFpbmluZz53YWl0KXtpZih0aW1lb3V0KXtjbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD1udWxsO30KcHJldmlvdXM9bm93O3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fWVsc2UgaWYoIXRpbWVvdXQmJm9wdGlvbnMudHJhaWxpbmchPT1mYWxzZSl7dGltZW91dD1zZXRUaW1lb3V0KGxhdGVyLHJlbWFpbmluZyk7fQpyZXR1cm4gcmVzdWx0O307fTtfLmRlYm91bmNlPWZ1bmN0aW9uKGZ1bmMsd2FpdCxpbW1lZGlhdGUpe3ZhciB0aW1lb3V0LGFyZ3MsY29udGV4dCx0aW1lc3RhbXAscmVzdWx0O3ZhciBsYXRlcj1mdW5jdGlvbigpe3ZhciBsYXN0PV8ubm93KCktdGltZXN0YW1wO2lmKGxhc3Q8d2FpdCYmbGFzdD49MCl7dGltZW91dD1zZXRUaW1lb3V0KGxhdGVyLHdhaXQtbGFzdCk7fWVsc2V7dGltZW91dD1udWxsO2lmKCFpbW1lZGlhdGUpe3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fX19O3JldHVybiBmdW5jdGlvbigpe2NvbnRleHQ9dGhpczthcmdzPWFyZ3VtZW50czt0aW1lc3RhbXA9Xy5ub3coKTt2YXIgY2FsbE5vdz1pbW1lZGlhdGUmJiF0aW1lb3V0O2lmKCF0aW1lb3V0KXRpbWVvdXQ9c2V0VGltZW91dChsYXRlcix3YWl0KTtpZihjYWxsTm93KXtyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO2NvbnRleHQ9YXJncz1udWxsO30KcmV0dXJuIHJlc3VsdDt9O307Xy53cmFwPWZ1bmN0aW9uKGZ1bmMsd3JhcHBlcil7cmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLGZ1bmMpO307Xy5uZWdhdGU9ZnVuY3Rpb24ocHJlZGljYXRlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hcHJlZGljYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O307Xy5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO3ZhciBzdGFydD1hcmdzLmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe3ZhciBpPXN0YXJ0O3ZhciByZXN1bHQ9YXJnc1tzdGFydF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3doaWxlKGktLSlyZXN1bHQ9YXJnc1tpXS5jYWxsKHRoaXMscmVzdWx0KTtyZXR1cm4gcmVzdWx0O307fTtfLmFmdGVyPWZ1bmN0aW9uKHRpbWVzLGZ1bmMpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tdGltZXM8MSl7cmV0dXJuIGZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O307Xy5iZWZvcmU9ZnVuY3Rpb24odGltZXMsZnVuYyl7dmFyIG1lbW87cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10aW1lcz4wKXttZW1vPWZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO30KaWYodGltZXM8PTEpZnVuYz1udWxsO3JldHVybiBtZW1vO307fTtfLm9uY2U9Xy5wYXJ0aWFsKF8uYmVmb3JlLDIpO3ZhciBoYXNFbnVtQnVnPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7dmFyIG5vbkVudW1lcmFibGVQcm9wcz1bJ3ZhbHVlT2YnLCdpc1Byb3RvdHlwZU9mJywndG9TdHJpbmcnLCdwcm9wZXJ0eUlzRW51bWVyYWJsZScsJ2hhc093blByb3BlcnR5JywndG9Mb2NhbGVTdHJpbmcnXTtmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaixrZXlzKXt2YXIgbm9uRW51bUlkeD1ub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO3ZhciBjb25zdHJ1Y3Rvcj1vYmouY29uc3RydWN0b3I7dmFyIHByb3RvPShfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpJiZjb25zdHJ1Y3Rvci5wcm90b3R5cGUpfHxPYmpQcm90bzt2YXIgcHJvcD0nY29uc3RydWN0b3InO2lmKF8uaGFzKG9iaixwcm9wKSYmIV8uY29udGFpbnMoa2V5cyxwcm9wKSlrZXlzLnB1c2gocHJvcCk7d2hpbGUobm9uRW51bUlkeC0tKXtwcm9wPW5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtpZihwcm9wIGluIG9iaiYmb2JqW3Byb3BdIT09cHJvdG9bcHJvcF0mJiFfLmNvbnRhaW5zKGtleXMscHJvcCkpe2tleXMucHVzaChwcm9wKTt9fX0KXy5rZXlzPWZ1bmN0aW9uKG9iail7aWYoIV8uaXNPYmplY3Qob2JqKSlyZXR1cm5bXTtpZihuYXRpdmVLZXlzKXJldHVybiBuYXRpdmVLZXlzKG9iaik7dmFyIGtleXM9W107Zm9yKHZhciBrZXkgaW4gb2JqKWlmKF8uaGFzKG9iaixrZXkpKWtleXMucHVzaChrZXkpO2lmKGhhc0VudW1CdWcpY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosa2V5cyk7cmV0dXJuIGtleXM7fTtfLmFsbEtleXM9ZnVuY3Rpb24ob2JqKXtpZighXy5pc09iamVjdChvYmopKXJldHVybltdO3ZhciBrZXlzPVtdO2Zvcih2YXIga2V5IGluIG9iailrZXlzLnB1c2goa2V5KTtpZihoYXNFbnVtQnVnKWNvbGxlY3ROb25FbnVtUHJvcHMob2JqLGtleXMpO3JldHVybiBrZXlzO307Xy52YWx1ZXM9ZnVuY3Rpb24ob2JqKXt2YXIga2V5cz1fLmtleXMob2JqKTt2YXIgbGVuZ3RoPWtleXMubGVuZ3RoO3ZhciB2YWx1ZXM9QXJyYXkobGVuZ3RoKTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhbHVlc1tpXT1vYmpba2V5c1tpXV07fQpyZXR1cm4gdmFsdWVzO307Xy5tYXBPYmplY3Q9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe2l0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3ZhciBrZXlzPV8ua2V5cyhvYmopLGxlbmd0aD1rZXlzLmxlbmd0aCxyZXN1bHRzPXt9LGN1cnJlbnRLZXk7Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtjdXJyZW50S2V5PWtleXNbaW5kZXhdO3Jlc3VsdHNbY3VycmVudEtleV09aXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKTt9CnJldHVybiByZXN1bHRzO307Xy5wYWlycz1mdW5jdGlvbihvYmope3ZhciBrZXlzPV8ua2V5cyhvYmopO3ZhciBsZW5ndGg9a2V5cy5sZW5ndGg7dmFyIHBhaXJzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXtwYWlyc1tpXT1ba2V5c1tpXSxvYmpba2V5c1tpXV1dO30KcmV0dXJuIHBhaXJzO307Xy5pbnZlcnQ9ZnVuY3Rpb24ob2JqKXt2YXIgcmVzdWx0PXt9O3ZhciBrZXlzPV8ua2V5cyhvYmopO2Zvcih2YXIgaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe3Jlc3VsdFtvYmpba2V5c1tpXV1dPWtleXNbaV07fQpyZXR1cm4gcmVzdWx0O307Xy5mdW5jdGlvbnM9Xy5tZXRob2RzPWZ1bmN0aW9uKG9iail7dmFyIG5hbWVzPVtdO2Zvcih2YXIga2V5IGluIG9iail7aWYoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSluYW1lcy5wdXNoKGtleSk7fQpyZXR1cm4gbmFtZXMuc29ydCgpO307Xy5leHRlbmQ9Y3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtfLmV4dGVuZE93bj1fLmFzc2lnbj1jcmVhdGVBc3NpZ25lcihfLmtleXMpO18uZmluZEtleT1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7dmFyIGtleXM9Xy5rZXlzKG9iaiksa2V5O2Zvcih2YXIgaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe2tleT1rZXlzW2ldO2lmKHByZWRpY2F0ZShvYmpba2V5XSxrZXksb2JqKSlyZXR1cm4ga2V5O319O18ucGljaz1mdW5jdGlvbihvYmplY3Qsb2l0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9e30sb2JqPW9iamVjdCxpdGVyYXRlZSxrZXlzO2lmKG9iaj09bnVsbClyZXR1cm4gcmVzdWx0O2lmKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKXtrZXlzPV8uYWxsS2V5cyhvYmopO2l0ZXJhdGVlPW9wdGltaXplQ2Iob2l0ZXJhdGVlLGNvbnRleHQpO31lbHNle2tleXM9ZmxhdHRlbihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSk7aXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsa2V5LG9iail7cmV0dXJuIGtleSBpbiBvYmo7fTtvYmo9T2JqZWN0KG9iaik7fQpmb3IodmFyIGk9MCxsZW5ndGg9a2V5cy5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIga2V5PWtleXNbaV07dmFyIHZhbHVlPW9ialtrZXldO2lmKGl0ZXJhdGVlKHZhbHVlLGtleSxvYmopKXJlc3VsdFtrZXldPXZhbHVlO30KcmV0dXJuIHJlc3VsdDt9O18ub21pdD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aWYoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSl7aXRlcmF0ZWU9Xy5uZWdhdGUoaXRlcmF0ZWUpO31lbHNle3ZhciBrZXlzPV8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpLFN0cmluZyk7aXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsa2V5KXtyZXR1cm4hXy5jb250YWlucyhrZXlzLGtleSk7fTt9CnJldHVybiBfLnBpY2sob2JqLGl0ZXJhdGVlLGNvbnRleHQpO307Xy5kZWZhdWx0cz1jcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsdHJ1ZSk7Xy5jbG9uZT1mdW5jdGlvbihvYmope2lmKCFfLmlzT2JqZWN0KG9iaikpcmV0dXJuIG9iajtyZXR1cm4gXy5pc0FycmF5KG9iaik/b2JqLnNsaWNlKCk6Xy5leHRlbmQoe30sb2JqKTt9O18udGFwPWZ1bmN0aW9uKG9iaixpbnRlcmNlcHRvcil7aW50ZXJjZXB0b3Iob2JqKTtyZXR1cm4gb2JqO307Xy5pc01hdGNoPWZ1bmN0aW9uKG9iamVjdCxhdHRycyl7dmFyIGtleXM9Xy5rZXlzKGF0dHJzKSxsZW5ndGg9a2V5cy5sZW5ndGg7aWYob2JqZWN0PT1udWxsKXJldHVybiFsZW5ndGg7dmFyIG9iaj1PYmplY3Qob2JqZWN0KTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhciBrZXk9a2V5c1tpXTtpZihhdHRyc1trZXldIT09b2JqW2tleV18fCEoa2V5IGluIG9iaikpcmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fTt2YXIgZXE9ZnVuY3Rpb24oYSxiLGFTdGFjayxiU3RhY2spe2lmKGE9PT1iKXJldHVybiBhIT09MHx8MS9hPT09MS9iO2lmKGE9PW51bGx8fGI9PW51bGwpcmV0dXJuIGE9PT1iO2lmKGEgaW5zdGFuY2VvZiBfKWE9YS5fd3JhcHBlZDtpZihiIGluc3RhbmNlb2YgXyliPWIuX3dyYXBwZWQ7dmFyIGNsYXNzTmFtZT10b1N0cmluZy5jYWxsKGEpO2lmKGNsYXNzTmFtZSE9PXRvU3RyaW5nLmNhbGwoYikpcmV0dXJuIGZhbHNlO3N3aXRjaChjbGFzc05hbWUpe2Nhc2UnW29iamVjdCBSZWdFeHBdJzpjYXNlJ1tvYmplY3QgU3RyaW5nXSc6cmV0dXJuJycrYT09PScnK2I7Y2FzZSdbb2JqZWN0IE51bWJlcl0nOmlmKCthIT09K2EpcmV0dXJuK2IhPT0rYjtyZXR1cm4rYT09PTA/MS8rYT09PTEvYjorYT09PStiO2Nhc2UnW29iamVjdCBEYXRlXSc6Y2FzZSdbb2JqZWN0IEJvb2xlYW5dJzpyZXR1cm4rYT09PStiO30KdmFyIGFyZUFycmF5cz1jbGFzc05hbWU9PT0nW29iamVjdCBBcnJheV0nO2lmKCFhcmVBcnJheXMpe2lmKHR5cGVvZiBhIT0nb2JqZWN0J3x8dHlwZW9mIGIhPSdvYmplY3QnKXJldHVybiBmYWxzZTt2YXIgYUN0b3I9YS5jb25zdHJ1Y3RvcixiQ3Rvcj1iLmNvbnN0cnVjdG9yO2lmKGFDdG9yIT09YkN0b3ImJiEoXy5pc0Z1bmN0aW9uKGFDdG9yKSYmYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciYmXy5pc0Z1bmN0aW9uKGJDdG9yKSYmYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcikmJignY29uc3RydWN0b3InaW4gYSYmJ2NvbnN0cnVjdG9yJ2luIGIpKXtyZXR1cm4gZmFsc2U7fX0KYVN0YWNrPWFTdGFja3x8W107YlN0YWNrPWJTdGFja3x8W107dmFyIGxlbmd0aD1hU3RhY2subGVuZ3RoO3doaWxlKGxlbmd0aC0tKXtpZihhU3RhY2tbbGVuZ3RoXT09PWEpcmV0dXJuIGJTdGFja1tsZW5ndGhdPT09Yjt9CmFTdGFjay5wdXNoKGEpO2JTdGFjay5wdXNoKGIpO2lmKGFyZUFycmF5cyl7bGVuZ3RoPWEubGVuZ3RoO2lmKGxlbmd0aCE9PWIubGVuZ3RoKXJldHVybiBmYWxzZTt3aGlsZShsZW5ndGgtLSl7aWYoIWVxKGFbbGVuZ3RoXSxiW2xlbmd0aF0sYVN0YWNrLGJTdGFjaykpcmV0dXJuIGZhbHNlO319ZWxzZXt2YXIga2V5cz1fLmtleXMoYSksa2V5O2xlbmd0aD1rZXlzLmxlbmd0aDtpZihfLmtleXMoYikubGVuZ3RoIT09bGVuZ3RoKXJldHVybiBmYWxzZTt3aGlsZShsZW5ndGgtLSl7a2V5PWtleXNbbGVuZ3RoXTtpZighKF8uaGFzKGIsa2V5KSYmZXEoYVtrZXldLGJba2V5XSxhU3RhY2ssYlN0YWNrKSkpcmV0dXJuIGZhbHNlO319CmFTdGFjay5wb3AoKTtiU3RhY2sucG9wKCk7cmV0dXJuIHRydWU7fTtfLmlzRXF1YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZXEoYSxiKTt9O18uaXNFbXB0eT1mdW5jdGlvbihvYmope2lmKG9iaj09bnVsbClyZXR1cm4gdHJ1ZTtpZihpc0FycmF5TGlrZShvYmopJiYoXy5pc0FycmF5KG9iail8fF8uaXNTdHJpbmcob2JqKXx8Xy5pc0FyZ3VtZW50cyhvYmopKSlyZXR1cm4gb2JqLmxlbmd0aD09PTA7cmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aD09PTA7fTtfLmlzRWxlbWVudD1mdW5jdGlvbihvYmope3JldHVybiEhKG9iaiYmb2JqLm5vZGVUeXBlPT09MSk7fTtfLmlzQXJyYXk9bmF0aXZlSXNBcnJheXx8ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopPT09J1tvYmplY3QgQXJyYXldJzt9O18uaXNPYmplY3Q9ZnVuY3Rpb24ob2JqKXt2YXIgdHlwZT10eXBlb2Ygb2JqO3JldHVybiB0eXBlPT09J2Z1bmN0aW9uJ3x8dHlwZT09PSdvYmplY3QnJiYhIW9iajt9O18uZWFjaChbJ0FyZ3VtZW50cycsJ0Z1bmN0aW9uJywnU3RyaW5nJywnTnVtYmVyJywnRGF0ZScsJ1JlZ0V4cCcsJ0Vycm9yJ10sZnVuY3Rpb24obmFtZSl7X1snaXMnK25hbWVdPWZ1bmN0aW9uKG9iail7cmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0ICcrbmFtZSsnXSc7fTt9KTtpZighXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKXtfLmlzQXJndW1lbnRzPWZ1bmN0aW9uKG9iail7cmV0dXJuIF8uaGFzKG9iaiwnY2FsbGVlJyk7fTt9CmlmKHR5cGVvZi8uLyE9J2Z1bmN0aW9uJyYmdHlwZW9mIEludDhBcnJheSE9J29iamVjdCcpe18uaXNGdW5jdGlvbj1mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT0nZnVuY3Rpb24nfHxmYWxzZTt9O30KXy5pc0Zpbml0ZT1mdW5jdGlvbihvYmope3JldHVybiBpc0Zpbml0ZShvYmopJiYhaXNOYU4ocGFyc2VGbG9hdChvYmopKTt9O18uaXNOYU49ZnVuY3Rpb24ob2JqKXtyZXR1cm4gXy5pc051bWJlcihvYmopJiZvYmohPT0rb2JqO307Xy5pc0Jvb2xlYW49ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqPT09dHJ1ZXx8b2JqPT09ZmFsc2V8fHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0IEJvb2xlYW5dJzt9O18uaXNOdWxsPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PW51bGw7fTtfLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PXZvaWQgMDt9O18uaGFzPWZ1bmN0aW9uKG9iaixrZXkpe3JldHVybiBvYmohPW51bGwmJmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSk7fTtfLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyb290Ll89cHJldmlvdXNVbmRlcnNjb3JlO3JldHVybiB0aGlzO307Xy5pZGVudGl0eT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlO307Xy5jb25zdGFudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fTtfLm5vb3A9ZnVuY3Rpb24oKXt9O18ucHJvcGVydHk9ZnVuY3Rpb24oa2V5KXtyZXR1cm4gZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqPT1udWxsP3ZvaWQgMDpvYmpba2V5XTt9O307Xy5wcm9wZXJ0eU9mPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09bnVsbD9mdW5jdGlvbigpe306ZnVuY3Rpb24oa2V5KXtyZXR1cm4gb2JqW2tleV07fTt9O18ubWF0Y2hlcj1fLm1hdGNoZXM9ZnVuY3Rpb24oYXR0cnMpe2F0dHJzPV8uZXh0ZW5kT3duKHt9LGF0dHJzKTtyZXR1cm4gZnVuY3Rpb24ob2JqKXtyZXR1cm4gXy5pc01hdGNoKG9iaixhdHRycyk7fTt9O18udGltZXM9ZnVuY3Rpb24obixpdGVyYXRlZSxjb250ZXh0KXt2YXIgYWNjdW09QXJyYXkoTWF0aC5tYXgoMCxuKSk7aXRlcmF0ZWU9b3B0aW1pemVDYihpdGVyYXRlZSxjb250ZXh0LDEpO2Zvcih2YXIgaT0wO2k8bjtpKyspYWNjdW1baV09aXRlcmF0ZWUoaSk7cmV0dXJuIGFjY3VtO307Xy5yYW5kb209ZnVuY3Rpb24obWluLG1heCl7aWYobWF4PT1udWxsKXttYXg9bWluO21pbj0wO30KcmV0dXJuIG1pbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKG1heC1taW4rMSkpO307Xy5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO307dmFyIGVzY2FwZU1hcD17JyYnOicmYW1wOycsJzwnOicmbHQ7JywnPic6JyZndDsnLCciJzonJnF1b3Q7JywiJyI6JyYjeDI3OycsJ2AnOicmI3g2MDsnfTt2YXIgdW5lc2NhcGVNYXA9Xy5pbnZlcnQoZXNjYXBlTWFwKTt2YXIgY3JlYXRlRXNjYXBlcj1mdW5jdGlvbihtYXApe3ZhciBlc2NhcGVyPWZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbWFwW21hdGNoXTt9O3ZhciBzb3VyY2U9Jyg/OicrXy5rZXlzKG1hcCkuam9pbignfCcpKycpJzt2YXIgdGVzdFJlZ2V4cD1SZWdFeHAoc291cmNlKTt2YXIgcmVwbGFjZVJlZ2V4cD1SZWdFeHAoc291cmNlLCdnJyk7cmV0dXJuIGZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nPXN0cmluZz09bnVsbD8nJzonJytzdHJpbmc7cmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpP3N0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsZXNjYXBlcik6c3RyaW5nO307fTtfLmVzY2FwZT1jcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7Xy51bmVzY2FwZT1jcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtfLnJlc3VsdD1mdW5jdGlvbihvYmplY3QscHJvcGVydHksZmFsbGJhY2spe3ZhciB2YWx1ZT1vYmplY3Q9PW51bGw/dm9pZCAwOm9iamVjdFtwcm9wZXJ0eV07aWYodmFsdWU9PT12b2lkIDApe3ZhbHVlPWZhbGxiYWNrO30KcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSk/dmFsdWUuY2FsbChvYmplY3QpOnZhbHVlO307dmFyIGlkQ291bnRlcj0wO18udW5pcXVlSWQ9ZnVuY3Rpb24ocHJlZml4KXt2YXIgaWQ9KytpZENvdW50ZXIrJyc7cmV0dXJuIHByZWZpeD9wcmVmaXgraWQ6aWQ7fTtfLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgbm9NYXRjaD0vKC4pXi87dmFyIGVzY2FwZXM9eyInIjoiJyIsJ1xcJzonXFwnLCdccic6J3InLCdcbic6J24nLCdcdTIwMjgnOid1MjAyOCcsJ1x1MjAyOSc6J3UyMDI5J307dmFyIGVzY2FwZXI9L1xcfCd8XHJ8XG58XHUyMDI4fFx1MjAyOS9nO3ZhciBlc2NhcGVDaGFyPWZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4nXFwnK2VzY2FwZXNbbWF0Y2hdO307Xy50ZW1wbGF0ZT1mdW5jdGlvbih0ZXh0LHNldHRpbmdzLG9sZFNldHRpbmdzKXtpZighc2V0dGluZ3MmJm9sZFNldHRpbmdzKXNldHRpbmdzPW9sZFNldHRpbmdzO3NldHRpbmdzPV8uZGVmYXVsdHMoe30sc2V0dGluZ3MsXy50ZW1wbGF0ZVNldHRpbmdzKTt2YXIgbWF0Y2hlcj1SZWdFeHAoWyhzZXR0aW5ncy5lc2NhcGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuaW50ZXJwb2xhdGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuZXZhbHVhdGV8fG5vTWF0Y2gpLnNvdXJjZV0uam9pbignfCcpKyd8JCcsJ2cnKTt2YXIgaW5kZXg9MDt2YXIgc291cmNlPSJfX3ArPSciO3RleHQucmVwbGFjZShtYXRjaGVyLGZ1bmN0aW9uKG1hdGNoLGVzY2FwZSxpbnRlcnBvbGF0ZSxldmFsdWF0ZSxvZmZzZXQpe3NvdXJjZSs9dGV4dC5zbGljZShpbmRleCxvZmZzZXQpLnJlcGxhY2UoZXNjYXBlcixlc2NhcGVDaGFyKTtpbmRleD1vZmZzZXQrbWF0Y2gubGVuZ3RoO2lmKGVzY2FwZSl7c291cmNlKz0iJytcbigoX190PSgiK2VzY2FwZSsiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIjt9ZWxzZSBpZihpbnRlcnBvbGF0ZSl7c291cmNlKz0iJytcbigoX190PSgiK2ludGVycG9sYXRlKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI7fWVsc2UgaWYoZXZhbHVhdGUpe3NvdXJjZSs9Iic7XG4iK2V2YWx1YXRlKyJcbl9fcCs9JyI7fQpyZXR1cm4gbWF0Y2g7fSk7c291cmNlKz0iJztcbiI7aWYoIXNldHRpbmdzLnZhcmlhYmxlKXNvdXJjZT0nd2l0aChvYmp8fHt9KXtcbicrc291cmNlKyd9XG4nO3NvdXJjZT0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIrInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iKwpzb3VyY2UrJ3JldHVybiBfX3A7XG4nO3RyeXt2YXIgcmVuZGVyPW5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZXx8J29iaicsJ18nLHNvdXJjZSk7fWNhdGNoKGUpe2Uuc291cmNlPXNvdXJjZTt0aHJvdyBlO30KdmFyIHRlbXBsYXRlPWZ1bmN0aW9uKGRhdGEpe3JldHVybiByZW5kZXIuY2FsbCh0aGlzLGRhdGEsXyk7fTt2YXIgYXJndW1lbnQ9c2V0dGluZ3MudmFyaWFibGV8fCdvYmonO3RlbXBsYXRlLnNvdXJjZT0nZnVuY3Rpb24oJythcmd1bWVudCsnKXtcbicrc291cmNlKyd9JztyZXR1cm4gdGVtcGxhdGU7fTtfLmNoYWluPWZ1bmN0aW9uKG9iail7dmFyIGluc3RhbmNlPV8ob2JqKTtpbnN0YW5jZS5fY2hhaW49dHJ1ZTtyZXR1cm4gaW5zdGFuY2U7fTt2YXIgcmVzdWx0PWZ1bmN0aW9uKGluc3RhbmNlLG9iail7cmV0dXJuIGluc3RhbmNlLl9jaGFpbj9fKG9iaikuY2hhaW4oKTpvYmo7fTtfLm1peGluPWZ1bmN0aW9uKG9iail7Xy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksZnVuY3Rpb24obmFtZSl7dmFyIGZ1bmM9X1tuYW1lXT1vYmpbbmFtZV07Xy5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oKXt2YXIgYXJncz1bdGhpcy5fd3JhcHBlZF07cHVzaC5hcHBseShhcmdzLGFyZ3VtZW50cyk7cmV0dXJuIHJlc3VsdCh0aGlzLGZ1bmMuYXBwbHkoXyxhcmdzKSk7fTt9KTt9O18ubWl4aW4oXyk7Xy5lYWNoKFsncG9wJywncHVzaCcsJ3JldmVyc2UnLCdzaGlmdCcsJ3NvcnQnLCdzcGxpY2UnLCd1bnNoaWZ0J10sZnVuY3Rpb24obmFtZSl7dmFyIG1ldGhvZD1BcnJheVByb3RvW25hbWVdO18ucHJvdG90eXBlW25hbWVdPWZ1bmN0aW9uKCl7dmFyIG9iaj10aGlzLl93cmFwcGVkO21ldGhvZC5hcHBseShvYmosYXJndW1lbnRzKTtpZigobmFtZT09PSdzaGlmdCd8fG5hbWU9PT0nc3BsaWNlJykmJm9iai5sZW5ndGg9PT0wKWRlbGV0ZSBvYmpbMF07cmV0dXJuIHJlc3VsdCh0aGlzLG9iaik7fTt9KTtfLmVhY2goWydjb25jYXQnLCdqb2luJywnc2xpY2UnXSxmdW5jdGlvbihuYW1lKXt2YXIgbWV0aG9kPUFycmF5UHJvdG9bbmFtZV07Xy5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oKXtyZXR1cm4gcmVzdWx0KHRoaXMsbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsYXJndW1lbnRzKSk7fTt9KTtfLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkO307Xy5wcm90b3R5cGUudmFsdWVPZj1fLnByb3RvdHlwZS50b0pTT049Xy5wcm90b3R5cGUudmFsdWU7Xy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4nJyt0aGlzLl93cmFwcGVkO307aWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZSgndW5kZXJzY29yZScsW10sZnVuY3Rpb24oKXtyZXR1cm4gXzt9KTt9fS5jYWxsKHRoaXMpKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvdW5kZXJzY29yZS5zdHJpbmcvbGliL3VuZGVyc2NvcmUuc3RyaW5nLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwohZnVuY3Rpb24ocm9vdCxTdHJpbmcpeyd1c2Ugc3RyaWN0Jzt2YXIgbmF0aXZlVHJpbT1TdHJpbmcucHJvdG90eXBlLnRyaW07dmFyIG5hdGl2ZVRyaW1SaWdodD1TdHJpbmcucHJvdG90eXBlLnRyaW1SaWdodDt2YXIgbmF0aXZlVHJpbUxlZnQ9U3RyaW5nLnByb3RvdHlwZS50cmltTGVmdDt2YXIgcGFyc2VOdW1iZXI9ZnVuY3Rpb24oc291cmNlKXtyZXR1cm4gc291cmNlKjF8fDA7fTt2YXIgc3RyUmVwZWF0PWZ1bmN0aW9uKHN0cixxdHkpe2lmKHF0eTwxKXJldHVybicnO3ZhciByZXN1bHQ9Jyc7d2hpbGUocXR5PjApe2lmKHF0eSYxKXJlc3VsdCs9c3RyO3F0eT4+PTEsc3RyKz1zdHI7fQpyZXR1cm4gcmVzdWx0O307dmFyIHNsaWNlPVtdLnNsaWNlO3ZhciBkZWZhdWx0VG9XaGl0ZVNwYWNlPWZ1bmN0aW9uKGNoYXJhY3RlcnMpe2lmKGNoYXJhY3RlcnM9PW51bGwpCnJldHVybidcXHMnO2Vsc2UgaWYoY2hhcmFjdGVycy5zb3VyY2UpCnJldHVybiBjaGFyYWN0ZXJzLnNvdXJjZTtlbHNlCnJldHVybidbJytfcy5lc2NhcGVSZWdFeHAoY2hhcmFjdGVycykrJ10nO307ZnVuY3Rpb24gYm9vbE1hdGNoKHMsbWF0Y2hlcnMpe3ZhciBpLG1hdGNoZXIsZG93bj1zLnRvTG93ZXJDYXNlKCk7bWF0Y2hlcnM9W10uY29uY2F0KG1hdGNoZXJzKTtmb3IoaT0wO2k8bWF0Y2hlcnMubGVuZ3RoO2krPTEpe21hdGNoZXI9bWF0Y2hlcnNbaV07aWYoIW1hdGNoZXIpY29udGludWU7aWYobWF0Y2hlci50ZXN0JiZtYXRjaGVyLnRlc3QocykpcmV0dXJuIHRydWU7aWYobWF0Y2hlci50b0xvd2VyQ2FzZSgpPT09ZG93bilyZXR1cm4gdHJ1ZTt9fQp2YXIgZXNjYXBlQ2hhcnM9e2x0Oic8JyxndDonPicscXVvdDonIicsYW1wOicmJyxhcG9zOiInIn07dmFyIHJldmVyc2VkRXNjYXBlQ2hhcnM9e307Zm9yKHZhciBrZXkgaW4gZXNjYXBlQ2hhcnMpcmV2ZXJzZWRFc2NhcGVDaGFyc1tlc2NhcGVDaGFyc1trZXldXT1rZXk7cmV2ZXJzZWRFc2NhcGVDaGFyc1siJyJdPScjMzknO3ZhciBzcHJpbnRmPShmdW5jdGlvbigpe2Z1bmN0aW9uIGdldF90eXBlKHZhcmlhYmxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKS5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpO30KdmFyIHN0cl9yZXBlYXQ9c3RyUmVwZWF0O3ZhciBzdHJfZm9ybWF0PWZ1bmN0aW9uKCl7aWYoIXN0cl9mb3JtYXQuY2FjaGUuaGFzT3duUHJvcGVydHkoYXJndW1lbnRzWzBdKSl7c3RyX2Zvcm1hdC5jYWNoZVthcmd1bWVudHNbMF1dPXN0cl9mb3JtYXQucGFyc2UoYXJndW1lbnRzWzBdKTt9CnJldHVybiBzdHJfZm9ybWF0LmZvcm1hdC5jYWxsKG51bGwsc3RyX2Zvcm1hdC5jYWNoZVthcmd1bWVudHNbMF1dLGFyZ3VtZW50cyk7fTtzdHJfZm9ybWF0LmZvcm1hdD1mdW5jdGlvbihwYXJzZV90cmVlLGFyZ3Ype3ZhciBjdXJzb3I9MSx0cmVlX2xlbmd0aD1wYXJzZV90cmVlLmxlbmd0aCxub2RlX3R5cGU9JycsYXJnLG91dHB1dD1bXSxpLGssbWF0Y2gscGFkLHBhZF9jaGFyYWN0ZXIscGFkX2xlbmd0aDtmb3IoaT0wO2k8dHJlZV9sZW5ndGg7aSsrKXtub2RlX3R5cGU9Z2V0X3R5cGUocGFyc2VfdHJlZVtpXSk7aWYobm9kZV90eXBlPT09J3N0cmluZycpe291dHB1dC5wdXNoKHBhcnNlX3RyZWVbaV0pO30KZWxzZSBpZihub2RlX3R5cGU9PT0nYXJyYXknKXttYXRjaD1wYXJzZV90cmVlW2ldO2lmKG1hdGNoWzJdKXthcmc9YXJndltjdXJzb3JdO2ZvcihrPTA7azxtYXRjaFsyXS5sZW5ndGg7aysrKXtpZighYXJnLmhhc093blByb3BlcnR5KG1hdGNoWzJdW2tdKSl7dGhyb3cgbmV3IEVycm9yKHNwcmludGYoJ1tfLnNwcmludGZdIHByb3BlcnR5ICIlcyIgZG9lcyBub3QgZXhpc3QnLG1hdGNoWzJdW2tdKSk7fQphcmc9YXJnW21hdGNoWzJdW2tdXTt9fWVsc2UgaWYobWF0Y2hbMV0pe2FyZz1hcmd2W21hdGNoWzFdXTt9CmVsc2V7YXJnPWFyZ3ZbY3Vyc29yKytdO30KaWYoL1tec10vLnRlc3QobWF0Y2hbOF0pJiYoZ2V0X3R5cGUoYXJnKSE9J251bWJlcicpKXt0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZignW18uc3ByaW50Zl0gZXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgJXMnLGdldF90eXBlKGFyZykpKTt9CnN3aXRjaChtYXRjaFs4XSl7Y2FzZSdiJzphcmc9YXJnLnRvU3RyaW5nKDIpO2JyZWFrO2Nhc2UnYyc6YXJnPVN0cmluZy5mcm9tQ2hhckNvZGUoYXJnKTticmVhaztjYXNlJ2QnOmFyZz1wYXJzZUludChhcmcsMTApO2JyZWFrO2Nhc2UnZSc6YXJnPW1hdGNoWzddP2FyZy50b0V4cG9uZW50aWFsKG1hdGNoWzddKTphcmcudG9FeHBvbmVudGlhbCgpO2JyZWFrO2Nhc2UnZic6YXJnPW1hdGNoWzddP3BhcnNlRmxvYXQoYXJnKS50b0ZpeGVkKG1hdGNoWzddKTpwYXJzZUZsb2F0KGFyZyk7YnJlYWs7Y2FzZSdvJzphcmc9YXJnLnRvU3RyaW5nKDgpO2JyZWFrO2Nhc2Uncyc6YXJnPSgoYXJnPVN0cmluZyhhcmcpKSYmbWF0Y2hbN10/YXJnLnN1YnN0cmluZygwLG1hdGNoWzddKTphcmcpO2JyZWFrO2Nhc2UndSc6YXJnPU1hdGguYWJzKGFyZyk7YnJlYWs7Y2FzZSd4Jzphcmc9YXJnLnRvU3RyaW5nKDE2KTticmVhaztjYXNlJ1gnOmFyZz1hcmcudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7YnJlYWs7fQphcmc9KC9bZGVmXS8udGVzdChtYXRjaFs4XSkmJm1hdGNoWzNdJiZhcmc+PTA/JysnK2FyZzphcmcpO3BhZF9jaGFyYWN0ZXI9bWF0Y2hbNF0/bWF0Y2hbNF09PScwJz8nMCc6bWF0Y2hbNF0uY2hhckF0KDEpOicgJztwYWRfbGVuZ3RoPW1hdGNoWzZdLVN0cmluZyhhcmcpLmxlbmd0aDtwYWQ9bWF0Y2hbNl0/c3RyX3JlcGVhdChwYWRfY2hhcmFjdGVyLHBhZF9sZW5ndGgpOicnO291dHB1dC5wdXNoKG1hdGNoWzVdP2FyZytwYWQ6cGFkK2FyZyk7fX0KcmV0dXJuIG91dHB1dC5qb2luKCcnKTt9O3N0cl9mb3JtYXQuY2FjaGU9e307c3RyX2Zvcm1hdC5wYXJzZT1mdW5jdGlvbihmbXQpe3ZhciBfZm10PWZtdCxtYXRjaD1bXSxwYXJzZV90cmVlPVtdLGFyZ19uYW1lcz0wO3doaWxlKF9mbXQpe2lmKChtYXRjaD0vXlteXHgyNV0rLy5leGVjKF9mbXQpKSE9PW51bGwpe3BhcnNlX3RyZWUucHVzaChtYXRjaFswXSk7fQplbHNlIGlmKChtYXRjaD0vXlx4MjV7Mn0vLmV4ZWMoX2ZtdCkpIT09bnVsbCl7cGFyc2VfdHJlZS5wdXNoKCclJyk7fQplbHNlIGlmKChtYXRjaD0vXlx4MjUoPzooWzEtOV1cZCopXCR8XCgoW15cKV0rKVwpKT8oXCspPygwfCdbXiRdKT8oLSk/KFxkKyk/KD86XC4oXGQrKSk/KFtiLWZvc3V4WF0pLy5leGVjKF9mbXQpKSE9PW51bGwpe2lmKG1hdGNoWzJdKXthcmdfbmFtZXN8PTE7dmFyIGZpZWxkX2xpc3Q9W10scmVwbGFjZW1lbnRfZmllbGQ9bWF0Y2hbMl0sZmllbGRfbWF0Y2g9W107aWYoKGZpZWxkX21hdGNoPS9eKFthLXpfXVthLXpfXGRdKikvaS5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkhPT1udWxsKXtmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pO3doaWxlKChyZXBsYWNlbWVudF9maWVsZD1yZXBsYWNlbWVudF9maWVsZC5zdWJzdHJpbmcoZmllbGRfbWF0Y2hbMF0ubGVuZ3RoKSkhPT0nJyl7aWYoKGZpZWxkX21hdGNoPS9eXC4oW2Etel9dW2Etel9cZF0qKS9pLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSE9PW51bGwpe2ZpZWxkX2xpc3QucHVzaChmaWVsZF9tYXRjaFsxXSk7fQplbHNlIGlmKChmaWVsZF9tYXRjaD0vXlxbKFxkKylcXS8uZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpIT09bnVsbCl7ZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKTt9CmVsc2V7dGhyb3cgbmV3IEVycm9yKCdbXy5zcHJpbnRmXSBodWg/Jyk7fX19CmVsc2V7dGhyb3cgbmV3IEVycm9yKCdbXy5zcHJpbnRmXSBodWg/Jyk7fQptYXRjaFsyXT1maWVsZF9saXN0O30KZWxzZXthcmdfbmFtZXN8PTI7fQppZihhcmdfbmFtZXM9PT0zKXt0aHJvdyBuZXcgRXJyb3IoJ1tfLnNwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZCcpO30KcGFyc2VfdHJlZS5wdXNoKG1hdGNoKTt9CmVsc2V7dGhyb3cgbmV3IEVycm9yKCdbXy5zcHJpbnRmXSBodWg/Jyk7fQpfZm10PV9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7fQpyZXR1cm4gcGFyc2VfdHJlZTt9O3JldHVybiBzdHJfZm9ybWF0O30pKCk7dmFyIF9zPXtWRVJTSU9OOicyLjMuMCcsaXNCbGFuazpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClzdHI9Jyc7cmV0dXJuKC9eXHMqJC8pLnRlc3Qoc3RyKTt9LHN0cmlwVGFnczpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClyZXR1cm4nJztyZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvPFwvP1tePl0rPi9nLCcnKTt9LGNhcGl0YWxpemU6ZnVuY3Rpb24oc3RyKXtzdHI9c3RyPT1udWxsPycnOlN0cmluZyhzdHIpO3JldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrc3RyLnNsaWNlKDEpO30sY2hvcDpmdW5jdGlvbihzdHIsc3RlcCl7aWYoc3RyPT1udWxsKXJldHVybltdO3N0cj1TdHJpbmcoc3RyKTtzdGVwPX5+c3RlcDtyZXR1cm4gc3RlcD4wP3N0ci5tYXRjaChuZXcgUmVnRXhwKCcuezEsJytzdGVwKyd9JywnZycpKTpbc3RyXTt9LGNsZWFuOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLnN0cmlwKHN0cikucmVwbGFjZSgvXHMrL2csJyAnKTt9LGNvdW50OmZ1bmN0aW9uKHN0cixzdWJzdHIpe2lmKHN0cj09bnVsbHx8c3Vic3RyPT1udWxsKXJldHVybiAwO3N0cj1TdHJpbmcoc3RyKTtzdWJzdHI9U3RyaW5nKHN1YnN0cik7dmFyIGNvdW50PTAscG9zPTAsbGVuZ3RoPXN1YnN0ci5sZW5ndGg7d2hpbGUodHJ1ZSl7cG9zPXN0ci5pbmRleE9mKHN1YnN0cixwb3MpO2lmKHBvcz09PS0xKWJyZWFrO2NvdW50Kys7cG9zKz1sZW5ndGg7fQpyZXR1cm4gY291bnQ7fSxjaGFyczpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClyZXR1cm5bXTtyZXR1cm4gU3RyaW5nKHN0cikuc3BsaXQoJycpO30sc3dhcENhc2U6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7cmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoL1xTL2csZnVuY3Rpb24oYyl7cmV0dXJuIGM9PT1jLnRvVXBwZXJDYXNlKCk/Yy50b0xvd2VyQ2FzZSgpOmMudG9VcHBlckNhc2UoKTt9KTt9LGVzY2FwZUhUTUw6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7cmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoL1smPD4iJ10vZyxmdW5jdGlvbihtKXtyZXR1cm4nJicrcmV2ZXJzZWRFc2NhcGVDaGFyc1ttXSsnOyc7fSk7fSx1bmVzY2FwZUhUTUw6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7cmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoL1wmKFteO10rKTsvZyxmdW5jdGlvbihlbnRpdHksZW50aXR5Q29kZSl7dmFyIG1hdGNoO2lmKGVudGl0eUNvZGUgaW4gZXNjYXBlQ2hhcnMpe3JldHVybiBlc2NhcGVDaGFyc1tlbnRpdHlDb2RlXTt9ZWxzZSBpZihtYXRjaD1lbnRpdHlDb2RlLm1hdGNoKC9eI3goW1xkYS1mQS1GXSspJC8pKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtYXRjaFsxXSwxNikpO31lbHNlIGlmKG1hdGNoPWVudGl0eUNvZGUubWF0Y2goL14jKFxkKykkLykpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKH5+bWF0Y2hbMV0pO31lbHNle3JldHVybiBlbnRpdHk7fX0pO30sZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xdXC9cXF0pL2csJ1xcJDEnKTt9LHNwbGljZTpmdW5jdGlvbihzdHIsaSxob3dtYW55LHN1YnN0cil7dmFyIGFycj1fcy5jaGFycyhzdHIpO2Fyci5zcGxpY2Uofn5pLH5+aG93bWFueSxzdWJzdHIpO3JldHVybiBhcnIuam9pbignJyk7fSxpbnNlcnQ6ZnVuY3Rpb24oc3RyLGksc3Vic3RyKXtyZXR1cm4gX3Muc3BsaWNlKHN0cixpLDAsc3Vic3RyKTt9LGluY2x1ZGU6ZnVuY3Rpb24oc3RyLG5lZWRsZSl7aWYobmVlZGxlPT09JycpcmV0dXJuIHRydWU7aWYoc3RyPT1udWxsKXJldHVybiBmYWxzZTtyZXR1cm4gU3RyaW5nKHN0cikuaW5kZXhPZihuZWVkbGUpIT09LTE7fSxqb2luOmZ1bmN0aW9uKCl7dmFyIGFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMpLHNlcGFyYXRvcj1hcmdzLnNoaWZ0KCk7aWYoc2VwYXJhdG9yPT1udWxsKXNlcGFyYXRvcj0nJztyZXR1cm4gYXJncy5qb2luKHNlcGFyYXRvcik7fSxsaW5lczpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClyZXR1cm5bXTtyZXR1cm4gU3RyaW5nKHN0cikuc3BsaXQoIlxuIik7fSxyZXZlcnNlOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLmNoYXJzKHN0cikucmV2ZXJzZSgpLmpvaW4oJycpO30sc3RhcnRzV2l0aDpmdW5jdGlvbihzdHIsc3RhcnRzKXtpZihzdGFydHM9PT0nJylyZXR1cm4gdHJ1ZTtpZihzdHI9PW51bGx8fHN0YXJ0cz09bnVsbClyZXR1cm4gZmFsc2U7c3RyPVN0cmluZyhzdHIpO3N0YXJ0cz1TdHJpbmcoc3RhcnRzKTtyZXR1cm4gc3RyLmxlbmd0aD49c3RhcnRzLmxlbmd0aCYmc3RyLnNsaWNlKDAsc3RhcnRzLmxlbmd0aCk9PT1zdGFydHM7fSxlbmRzV2l0aDpmdW5jdGlvbihzdHIsZW5kcyl7aWYoZW5kcz09PScnKXJldHVybiB0cnVlO2lmKHN0cj09bnVsbHx8ZW5kcz09bnVsbClyZXR1cm4gZmFsc2U7c3RyPVN0cmluZyhzdHIpO2VuZHM9U3RyaW5nKGVuZHMpO3JldHVybiBzdHIubGVuZ3RoPj1lbmRzLmxlbmd0aCYmc3RyLnNsaWNlKHN0ci5sZW5ndGgtZW5kcy5sZW5ndGgpPT09ZW5kczt9LHN1Y2M6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7c3RyPVN0cmluZyhzdHIpO3JldHVybiBzdHIuc2xpY2UoMCwtMSkrU3RyaW5nLmZyb21DaGFyQ29kZShzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoLTEpKzEpO30sdGl0bGVpemU6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7c3RyPVN0cmluZyhzdHIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHN0ci5yZXBsYWNlKC8oPzpefFxzfC0pXFMvZyxmdW5jdGlvbihjKXtyZXR1cm4gYy50b1VwcGVyQ2FzZSgpO30pO30sY2FtZWxpemU6ZnVuY3Rpb24oc3RyKXtyZXR1cm4gX3MudHJpbShzdHIpLnJlcGxhY2UoL1stX1xzXSsoLik/L2csZnVuY3Rpb24obWF0Y2gsYyl7cmV0dXJuIGM/Yy50b1VwcGVyQ2FzZSgpOiIiO30pO30sdW5kZXJzY29yZWQ6ZnVuY3Rpb24oc3RyKXtyZXR1cm4gX3MudHJpbShzdHIpLnJlcGxhY2UoLyhbYS16XGRdKShbQS1aXSspL2csJyQxXyQyJykucmVwbGFjZSgvWy1cc10rL2csJ18nKS50b0xvd2VyQ2FzZSgpO30sZGFzaGVyaXplOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLnRyaW0oc3RyKS5yZXBsYWNlKC8oW0EtWl0pL2csJy0kMScpLnJlcGxhY2UoL1stX1xzXSsvZywnLScpLnRvTG93ZXJDYXNlKCk7fSxjbGFzc2lmeTpmdW5jdGlvbihzdHIpe3JldHVybiBfcy50aXRsZWl6ZShTdHJpbmcoc3RyKS5yZXBsYWNlKC9bXFdfXS9nLCcgJykpLnJlcGxhY2UoL1xzL2csJycpO30saHVtYW5pemU6ZnVuY3Rpb24oc3RyKXtyZXR1cm4gX3MuY2FwaXRhbGl6ZShfcy51bmRlcnNjb3JlZChzdHIpLnJlcGxhY2UoL19pZCQvLCcnKS5yZXBsYWNlKC9fL2csJyAnKSk7fSx0cmltOmZ1bmN0aW9uKHN0cixjaGFyYWN0ZXJzKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7aWYoIWNoYXJhY3RlcnMmJm5hdGl2ZVRyaW0pcmV0dXJuIG5hdGl2ZVRyaW0uY2FsbChzdHIpO2NoYXJhY3RlcnM9ZGVmYXVsdFRvV2hpdGVTcGFjZShjaGFyYWN0ZXJzKTtyZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZShuZXcgUmVnRXhwKCdcXicrY2hhcmFjdGVycysnK3wnK2NoYXJhY3RlcnMrJyskJywnZycpLCcnKTt9LGx0cmltOmZ1bmN0aW9uKHN0cixjaGFyYWN0ZXJzKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7aWYoIWNoYXJhY3RlcnMmJm5hdGl2ZVRyaW1MZWZ0KXJldHVybiBuYXRpdmVUcmltTGVmdC5jYWxsKHN0cik7Y2hhcmFjdGVycz1kZWZhdWx0VG9XaGl0ZVNwYWNlKGNoYXJhY3RlcnMpO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKG5ldyBSZWdFeHAoJ14nK2NoYXJhY3RlcnMrJysnKSwnJyk7fSxydHJpbTpmdW5jdGlvbihzdHIsY2hhcmFjdGVycyl7aWYoc3RyPT1udWxsKXJldHVybicnO2lmKCFjaGFyYWN0ZXJzJiZuYXRpdmVUcmltUmlnaHQpcmV0dXJuIG5hdGl2ZVRyaW1SaWdodC5jYWxsKHN0cik7Y2hhcmFjdGVycz1kZWZhdWx0VG9XaGl0ZVNwYWNlKGNoYXJhY3RlcnMpO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKG5ldyBSZWdFeHAoY2hhcmFjdGVycysnKyQnKSwnJyk7fSx0cnVuY2F0ZTpmdW5jdGlvbihzdHIsbGVuZ3RoLHRydW5jYXRlU3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7c3RyPVN0cmluZyhzdHIpO3RydW5jYXRlU3RyPXRydW5jYXRlU3RyfHwnLi4uJztsZW5ndGg9fn5sZW5ndGg7cmV0dXJuIHN0ci5sZW5ndGg+bGVuZ3RoP3N0ci5zbGljZSgwLGxlbmd0aCkrdHJ1bmNhdGVTdHI6c3RyO30scHJ1bmU6ZnVuY3Rpb24oc3RyLGxlbmd0aCxwcnVuZVN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cj1TdHJpbmcoc3RyKTtsZW5ndGg9fn5sZW5ndGg7cHJ1bmVTdHI9cHJ1bmVTdHIhPW51bGw/U3RyaW5nKHBydW5lU3RyKTonLi4uJztpZihzdHIubGVuZ3RoPD1sZW5ndGgpcmV0dXJuIHN0cjt2YXIgdG1wbD1mdW5jdGlvbihjKXtyZXR1cm4gYy50b1VwcGVyQ2FzZSgpIT09Yy50b0xvd2VyQ2FzZSgpPydBJzonICc7fSx0ZW1wbGF0ZT1zdHIuc2xpY2UoMCxsZW5ndGgrMSkucmVwbGFjZSgvLig/PVxXKlx3KiQpL2csdG1wbCk7aWYodGVtcGxhdGUuc2xpY2UodGVtcGxhdGUubGVuZ3RoLTIpLm1hdGNoKC9cd1x3LykpCnRlbXBsYXRlPXRlbXBsYXRlLnJlcGxhY2UoL1xzKlxTKyQvLCcnKTtlbHNlCnRlbXBsYXRlPV9zLnJ0cmltKHRlbXBsYXRlLnNsaWNlKDAsdGVtcGxhdGUubGVuZ3RoLTEpKTtyZXR1cm4odGVtcGxhdGUrcHJ1bmVTdHIpLmxlbmd0aD5zdHIubGVuZ3RoP3N0cjpzdHIuc2xpY2UoMCx0ZW1wbGF0ZS5sZW5ndGgpK3BydW5lU3RyO30sd29yZHM6ZnVuY3Rpb24oc3RyLGRlbGltaXRlcil7aWYoX3MuaXNCbGFuayhzdHIpKXJldHVybltdO3JldHVybiBfcy50cmltKHN0cixkZWxpbWl0ZXIpLnNwbGl0KGRlbGltaXRlcnx8L1xzKy8pO30scGFkOmZ1bmN0aW9uKHN0cixsZW5ndGgscGFkU3RyLHR5cGUpe3N0cj1zdHI9PW51bGw/Jyc6U3RyaW5nKHN0cik7bGVuZ3RoPX5+bGVuZ3RoO3ZhciBwYWRsZW49MDtpZighcGFkU3RyKQpwYWRTdHI9JyAnO2Vsc2UgaWYocGFkU3RyLmxlbmd0aD4xKQpwYWRTdHI9cGFkU3RyLmNoYXJBdCgwKTtzd2l0Y2godHlwZSl7Y2FzZSdyaWdodCc6cGFkbGVuPWxlbmd0aC1zdHIubGVuZ3RoO3JldHVybiBzdHIrc3RyUmVwZWF0KHBhZFN0cixwYWRsZW4pO2Nhc2UnYm90aCc6cGFkbGVuPWxlbmd0aC1zdHIubGVuZ3RoO3JldHVybiBzdHJSZXBlYXQocGFkU3RyLE1hdGguY2VpbChwYWRsZW4vMikpK3N0cgorc3RyUmVwZWF0KHBhZFN0cixNYXRoLmZsb29yKHBhZGxlbi8yKSk7ZGVmYXVsdDpwYWRsZW49bGVuZ3RoLXN0ci5sZW5ndGg7cmV0dXJuIHN0clJlcGVhdChwYWRTdHIscGFkbGVuKStzdHI7fX0sbHBhZDpmdW5jdGlvbihzdHIsbGVuZ3RoLHBhZFN0cil7cmV0dXJuIF9zLnBhZChzdHIsbGVuZ3RoLHBhZFN0cik7fSxycGFkOmZ1bmN0aW9uKHN0cixsZW5ndGgscGFkU3RyKXtyZXR1cm4gX3MucGFkKHN0cixsZW5ndGgscGFkU3RyLCdyaWdodCcpO30sbHJwYWQ6ZnVuY3Rpb24oc3RyLGxlbmd0aCxwYWRTdHIpe3JldHVybiBfcy5wYWQoc3RyLGxlbmd0aCxwYWRTdHIsJ2JvdGgnKTt9LHNwcmludGY6c3ByaW50Zix2c3ByaW50ZjpmdW5jdGlvbihmbXQsYXJndil7YXJndi51bnNoaWZ0KGZtdCk7cmV0dXJuIHNwcmludGYuYXBwbHkobnVsbCxhcmd2KTt9LHRvTnVtYmVyOmZ1bmN0aW9uKHN0cixkZWNpbWFscyl7aWYoIXN0cilyZXR1cm4gMDtzdHI9X3MudHJpbShzdHIpO2lmKCFzdHIubWF0Y2goL14tP1xkKyg/OlwuXGQrKT8kLykpcmV0dXJuIE5hTjtyZXR1cm4gcGFyc2VOdW1iZXIocGFyc2VOdW1iZXIoc3RyKS50b0ZpeGVkKH5+ZGVjaW1hbHMpKTt9LG51bWJlckZvcm1hdDpmdW5jdGlvbihudW1iZXIsZGVjLGRzZXAsdHNlcCl7aWYoaXNOYU4obnVtYmVyKXx8bnVtYmVyPT1udWxsKXJldHVybicnO251bWJlcj1udW1iZXIudG9GaXhlZCh+fmRlYyk7dHNlcD10eXBlb2YgdHNlcD09J3N0cmluZyc/dHNlcDonLCc7dmFyIHBhcnRzPW51bWJlci5zcGxpdCgnLicpLGZudW1zPXBhcnRzWzBdLGRlY2ltYWxzPXBhcnRzWzFdPyhkc2VwfHwnLicpK3BhcnRzWzFdOicnO3JldHVybiBmbnVtcy5yZXBsYWNlKC8oXGQpKD89KD86XGR7M30pKyQpL2csJyQxJyt0c2VwKStkZWNpbWFsczt9LHN0clJpZ2h0OmZ1bmN0aW9uKHN0cixzZXApe2lmKHN0cj09bnVsbClyZXR1cm4nJztzdHI9U3RyaW5nKHN0cik7c2VwPXNlcCE9bnVsbD9TdHJpbmcoc2VwKTpzZXA7dmFyIHBvcz0hc2VwPy0xOnN0ci5pbmRleE9mKHNlcCk7cmV0dXJufnBvcz9zdHIuc2xpY2UocG9zK3NlcC5sZW5ndGgsc3RyLmxlbmd0aCk6c3RyO30sc3RyUmlnaHRCYWNrOmZ1bmN0aW9uKHN0cixzZXApe2lmKHN0cj09bnVsbClyZXR1cm4nJztzdHI9U3RyaW5nKHN0cik7c2VwPXNlcCE9bnVsbD9TdHJpbmcoc2VwKTpzZXA7dmFyIHBvcz0hc2VwPy0xOnN0ci5sYXN0SW5kZXhPZihzZXApO3JldHVybn5wb3M/c3RyLnNsaWNlKHBvcytzZXAubGVuZ3RoLHN0ci5sZW5ndGgpOnN0cjt9LHN0ckxlZnQ6ZnVuY3Rpb24oc3RyLHNlcCl7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cj1TdHJpbmcoc3RyKTtzZXA9c2VwIT1udWxsP1N0cmluZyhzZXApOnNlcDt2YXIgcG9zPSFzZXA/LTE6c3RyLmluZGV4T2Yoc2VwKTtyZXR1cm5+cG9zP3N0ci5zbGljZSgwLHBvcyk6c3RyO30sc3RyTGVmdEJhY2s6ZnVuY3Rpb24oc3RyLHNlcCl7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cis9Jyc7c2VwPXNlcCE9bnVsbD8nJytzZXA6c2VwO3ZhciBwb3M9c3RyLmxhc3RJbmRleE9mKHNlcCk7cmV0dXJufnBvcz9zdHIuc2xpY2UoMCxwb3MpOnN0cjt9LHRvU2VudGVuY2U6ZnVuY3Rpb24oYXJyYXksc2VwYXJhdG9yLGxhc3RTZXBhcmF0b3Isc2VyaWFsKXtzZXBhcmF0b3I9c2VwYXJhdG9yfHwnLCAnO2xhc3RTZXBhcmF0b3I9bGFzdFNlcGFyYXRvcnx8JyBhbmQgJzt2YXIgYT1hcnJheS5zbGljZSgpLGxhc3RNZW1iZXI9YS5wb3AoKTtpZihhcnJheS5sZW5ndGg+MiYmc2VyaWFsKWxhc3RTZXBhcmF0b3I9X3MucnRyaW0oc2VwYXJhdG9yKStsYXN0U2VwYXJhdG9yO3JldHVybiBhLmxlbmd0aD9hLmpvaW4oc2VwYXJhdG9yKStsYXN0U2VwYXJhdG9yK2xhc3RNZW1iZXI6bGFzdE1lbWJlcjt9LHRvU2VudGVuY2VTZXJpYWw6ZnVuY3Rpb24oKXt2YXIgYXJncz1zbGljZS5jYWxsKGFyZ3VtZW50cyk7YXJnc1szXT10cnVlO3JldHVybiBfcy50b1NlbnRlbmNlLmFwcGx5KF9zLGFyZ3MpO30sc2x1Z2lmeTpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClyZXR1cm4nJzt2YXIgZnJvbT0ixIXDoMOhw6TDosOjw6XDpsSDxIfEmcOow6nDq8Oqw6zDrcOvw67FgsWEw7LDs8O2w7TDtcO4xZvImcibw7nDusO8w7vDscOnxbzFuiIsdG89ImFhYWFhYWFhYWNlZWVlZWlpaWlsbm9vb29vb3NzdHV1dXVuY3p6IixyZWdleD1uZXcgUmVnRXhwKGRlZmF1bHRUb1doaXRlU3BhY2UoZnJvbSksJ2cnKTtzdHI9U3RyaW5nKHN0cikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKHJlZ2V4LGZ1bmN0aW9uKGMpe3ZhciBpbmRleD1mcm9tLmluZGV4T2YoYyk7cmV0dXJuIHRvLmNoYXJBdChpbmRleCl8fCctJzt9KTtyZXR1cm4gX3MuZGFzaGVyaXplKHN0ci5yZXBsYWNlKC9bXlx3XHMtXS9nLCcnKSk7fSxzdXJyb3VuZDpmdW5jdGlvbihzdHIsd3JhcHBlcil7cmV0dXJuW3dyYXBwZXIsc3RyLHdyYXBwZXJdLmpvaW4oJycpO30scXVvdGU6ZnVuY3Rpb24oc3RyLHF1b3RlQ2hhcil7cmV0dXJuIF9zLnN1cnJvdW5kKHN0cixxdW90ZUNoYXJ8fCciJyk7fSx1bnF1b3RlOmZ1bmN0aW9uKHN0cixxdW90ZUNoYXIpe3F1b3RlQ2hhcj1xdW90ZUNoYXJ8fCciJztpZihzdHJbMF09PT1xdW90ZUNoYXImJnN0cltzdHIubGVuZ3RoLTFdPT09cXVvdGVDaGFyKQpyZXR1cm4gc3RyLnNsaWNlKDEsc3RyLmxlbmd0aC0xKTtlbHNlIHJldHVybiBzdHI7fSxleHBvcnRzOmZ1bmN0aW9uKCl7dmFyIHJlc3VsdD17fTtmb3IodmFyIHByb3AgaW4gdGhpcyl7aWYoIXRoaXMuaGFzT3duUHJvcGVydHkocHJvcCl8fHByb3AubWF0Y2goL14oPzppbmNsdWRlfGNvbnRhaW5zfHJldmVyc2UpJC8pKWNvbnRpbnVlO3Jlc3VsdFtwcm9wXT10aGlzW3Byb3BdO30KcmV0dXJuIHJlc3VsdDt9LHJlcGVhdDpmdW5jdGlvbihzdHIscXR5LHNlcGFyYXRvcil7aWYoc3RyPT1udWxsKXJldHVybicnO3F0eT1+fnF0eTtpZihzZXBhcmF0b3I9PW51bGwpcmV0dXJuIHN0clJlcGVhdChTdHJpbmcoc3RyKSxxdHkpO2Zvcih2YXIgcmVwZWF0PVtdO3F0eT4wO3JlcGVhdFstLXF0eV09c3RyKXt9CnJldHVybiByZXBlYXQuam9pbihzZXBhcmF0b3IpO30sbmF0dXJhbENtcDpmdW5jdGlvbihzdHIxLHN0cjIpe2lmKHN0cjE9PXN0cjIpcmV0dXJuIDA7aWYoIXN0cjEpcmV0dXJuLTE7aWYoIXN0cjIpcmV0dXJuIDE7dmFyIGNtcFJlZ2V4PS8oXC5cZCspfChcZCspfChcRCspL2csdG9rZW5zMT1TdHJpbmcoc3RyMSkudG9Mb3dlckNhc2UoKS5tYXRjaChjbXBSZWdleCksdG9rZW5zMj1TdHJpbmcoc3RyMikudG9Mb3dlckNhc2UoKS5tYXRjaChjbXBSZWdleCksY291bnQ9TWF0aC5taW4odG9rZW5zMS5sZW5ndGgsdG9rZW5zMi5sZW5ndGgpO2Zvcih2YXIgaT0wO2k8Y291bnQ7aSsrKXt2YXIgYT10b2tlbnMxW2ldLGI9dG9rZW5zMltpXTtpZihhIT09Yil7dmFyIG51bTE9cGFyc2VJbnQoYSwxMCk7aWYoIWlzTmFOKG51bTEpKXt2YXIgbnVtMj1wYXJzZUludChiLDEwKTtpZighaXNOYU4obnVtMikmJm51bTEtbnVtMikKcmV0dXJuIG51bTEtbnVtMjt9CnJldHVybiBhPGI/LTE6MTt9fQppZih0b2tlbnMxLmxlbmd0aD09PXRva2VuczIubGVuZ3RoKQpyZXR1cm4gdG9rZW5zMS5sZW5ndGgtdG9rZW5zMi5sZW5ndGg7cmV0dXJuIHN0cjE8c3RyMj8tMToxO30sbGV2ZW5zaHRlaW46ZnVuY3Rpb24oc3RyMSxzdHIyKXtpZihzdHIxPT1udWxsJiZzdHIyPT1udWxsKXJldHVybiAwO2lmKHN0cjE9PW51bGwpcmV0dXJuIFN0cmluZyhzdHIyKS5sZW5ndGg7aWYoc3RyMj09bnVsbClyZXR1cm4gU3RyaW5nKHN0cjEpLmxlbmd0aDtzdHIxPVN0cmluZyhzdHIxKTtzdHIyPVN0cmluZyhzdHIyKTt2YXIgY3VycmVudD1bXSxwcmV2LHZhbHVlO2Zvcih2YXIgaT0wO2k8PXN0cjIubGVuZ3RoO2krKykKZm9yKHZhciBqPTA7ajw9c3RyMS5sZW5ndGg7aisrKXtpZihpJiZqKQppZihzdHIxLmNoYXJBdChqLTEpPT09c3RyMi5jaGFyQXQoaS0xKSkKdmFsdWU9cHJldjtlbHNlCnZhbHVlPU1hdGgubWluKGN1cnJlbnRbal0sY3VycmVudFtqLTFdLHByZXYpKzE7ZWxzZQp2YWx1ZT1pK2o7cHJldj1jdXJyZW50W2pdO2N1cnJlbnRbal09dmFsdWU7fQpyZXR1cm4gY3VycmVudC5wb3AoKTt9LHRvQm9vbGVhbjpmdW5jdGlvbihzdHIsdHJ1ZVZhbHVlcyxmYWxzZVZhbHVlcyl7aWYodHlwZW9mIHN0cj09PSJudW1iZXIiKXN0cj0iIitzdHI7aWYodHlwZW9mIHN0ciE9PSJzdHJpbmciKXJldHVybiEhc3RyO3N0cj1fcy50cmltKHN0cik7aWYoYm9vbE1hdGNoKHN0cix0cnVlVmFsdWVzfHxbInRydWUiLCIxIl0pKXJldHVybiB0cnVlO2lmKGJvb2xNYXRjaChzdHIsZmFsc2VWYWx1ZXN8fFsiZmFsc2UiLCIwIl0pKXJldHVybiBmYWxzZTt9fTtfcy5zdHJpcD1fcy50cmltO19zLmxzdHJpcD1fcy5sdHJpbTtfcy5yc3RyaXA9X3MucnRyaW07X3MuY2VudGVyPV9zLmxycGFkO19zLnJqdXN0PV9zLmxwYWQ7X3MubGp1c3Q9X3MucnBhZDtfcy5jb250YWlucz1fcy5pbmNsdWRlO19zLnE9X3MucXVvdGU7X3MudG9Cb29sPV9zLnRvQm9vbGVhbjtpZih0eXBlb2YgZXhwb3J0cyE9PSd1bmRlZmluZWQnKXtpZih0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCcmJm1vZHVsZS5leHBvcnRzKQptb2R1bGUuZXhwb3J0cz1fcztleHBvcnRzLl9zPV9zO30KaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpCmRlZmluZSgndW5kZXJzY29yZS5zdHJpbmcnLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIF9zO30pO3Jvb3QuXz1yb290Ll98fHt9O3Jvb3QuXy5zdHJpbmc9cm9vdC5fLnN0cj1fczt9KHRoaXMsU3RyaW5nKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvbW9tZW50L21vbWVudC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KOyhmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkoKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoZmFjdG9yeSk6Z2xvYmFsLm1vbWVudD1mYWN0b3J5KCl9KHRoaXMsKGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnO3ZhciBob29rQ2FsbGJhY2s7ZnVuY3Rpb24gaG9va3MoKXtyZXR1cm4gaG9va0NhbGxiYWNrLmFwcGx5KG51bGwsYXJndW1lbnRzKTt9CmZ1bmN0aW9uIHNldEhvb2tDYWxsYmFjayhjYWxsYmFjayl7aG9va0NhbGxiYWNrPWNhbGxiYWNrO30KZnVuY3Rpb24gaXNBcnJheShpbnB1dCl7cmV0dXJuIGlucHV0IGluc3RhbmNlb2YgQXJyYXl8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCk9PT0nW29iamVjdCBBcnJheV0nO30KZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpe3JldHVybiBpbnB1dCE9bnVsbCYmT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KT09PSdbb2JqZWN0IE9iamVjdF0nO30KZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvYmope3ZhciBrO2ZvcihrIGluIG9iail7cmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fQpmdW5jdGlvbiBpc051bWJlcihpbnB1dCl7cmV0dXJuIHR5cGVvZiBpbnB1dD09PSdudW1iZXInfHxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpPT09J1tvYmplY3QgTnVtYmVyXSc7fQpmdW5jdGlvbiBpc0RhdGUoaW5wdXQpe3JldHVybiBpbnB1dCBpbnN0YW5jZW9mIERhdGV8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCk9PT0nW29iamVjdCBEYXRlXSc7fQpmdW5jdGlvbiBtYXAoYXJyLGZuKXt2YXIgcmVzPVtdLGk7Zm9yKGk9MDtpPGFyci5sZW5ndGg7KytpKXtyZXMucHVzaChmbihhcnJbaV0saSkpO30KcmV0dXJuIHJlczt9CmZ1bmN0aW9uIGhhc093blByb3AoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYik7fQpmdW5jdGlvbiBleHRlbmQoYSxiKXtmb3IodmFyIGkgaW4gYil7aWYoaGFzT3duUHJvcChiLGkpKXthW2ldPWJbaV07fX0KaWYoaGFzT3duUHJvcChiLCd0b1N0cmluZycpKXthLnRvU3RyaW5nPWIudG9TdHJpbmc7fQppZihoYXNPd25Qcm9wKGIsJ3ZhbHVlT2YnKSl7YS52YWx1ZU9mPWIudmFsdWVPZjt9CnJldHVybiBhO30KZnVuY3Rpb24gY3JlYXRlVVRDKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0KXtyZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCxmb3JtYXQsbG9jYWxlLHN0cmljdCx0cnVlKS51dGMoKTt9CmZ1bmN0aW9uIGRlZmF1bHRQYXJzaW5nRmxhZ3MoKXtyZXR1cm57ZW1wdHk6ZmFsc2UsdW51c2VkVG9rZW5zOltdLHVudXNlZElucHV0OltdLG92ZXJmbG93Oi0yLGNoYXJzTGVmdE92ZXI6MCxudWxsSW5wdXQ6ZmFsc2UsaW52YWxpZE1vbnRoOm51bGwsaW52YWxpZEZvcm1hdDpmYWxzZSx1c2VySW52YWxpZGF0ZWQ6ZmFsc2UsaXNvOmZhbHNlLHBhcnNlZERhdGVQYXJ0czpbXSxtZXJpZGllbTpudWxsfTt9CmZ1bmN0aW9uIGdldFBhcnNpbmdGbGFncyhtKXtpZihtLl9wZj09bnVsbCl7bS5fcGY9ZGVmYXVsdFBhcnNpbmdGbGFncygpO30KcmV0dXJuIG0uX3BmO30KdmFyIHNvbWU7aWYoQXJyYXkucHJvdG90eXBlLnNvbWUpe3NvbWU9QXJyYXkucHJvdG90eXBlLnNvbWU7fWVsc2V7c29tZT1mdW5jdGlvbihmdW4pe3ZhciB0PU9iamVjdCh0aGlzKTt2YXIgbGVuPXQubGVuZ3RoPj4+MDtmb3IodmFyIGk9MDtpPGxlbjtpKyspe2lmKGkgaW4gdCYmZnVuLmNhbGwodGhpcyx0W2ldLGksdCkpe3JldHVybiB0cnVlO319CnJldHVybiBmYWxzZTt9O30KdmFyIHNvbWUkMT1zb21lO2Z1bmN0aW9uIGlzVmFsaWQobSl7aWYobS5faXNWYWxpZD09bnVsbCl7dmFyIGZsYWdzPWdldFBhcnNpbmdGbGFncyhtKTt2YXIgcGFyc2VkUGFydHM9c29tZSQxLmNhbGwoZmxhZ3MucGFyc2VkRGF0ZVBhcnRzLGZ1bmN0aW9uKGkpe3JldHVybiBpIT1udWxsO30pO3ZhciBpc05vd1ZhbGlkPSFpc05hTihtLl9kLmdldFRpbWUoKSkmJmZsYWdzLm92ZXJmbG93PDAmJiFmbGFncy5lbXB0eSYmIWZsYWdzLmludmFsaWRNb250aCYmIWZsYWdzLmludmFsaWRXZWVrZGF5JiYhZmxhZ3MubnVsbElucHV0JiYhZmxhZ3MuaW52YWxpZEZvcm1hdCYmIWZsYWdzLnVzZXJJbnZhbGlkYXRlZCYmKCFmbGFncy5tZXJpZGllbXx8KGZsYWdzLm1lcmlkaWVtJiZwYXJzZWRQYXJ0cykpO2lmKG0uX3N0cmljdCl7aXNOb3dWYWxpZD1pc05vd1ZhbGlkJiZmbGFncy5jaGFyc0xlZnRPdmVyPT09MCYmZmxhZ3MudW51c2VkVG9rZW5zLmxlbmd0aD09PTAmJmZsYWdzLmJpZ0hvdXI9PT11bmRlZmluZWQ7fQppZihPYmplY3QuaXNGcm96ZW49PW51bGx8fCFPYmplY3QuaXNGcm96ZW4obSkpe20uX2lzVmFsaWQ9aXNOb3dWYWxpZDt9CmVsc2V7cmV0dXJuIGlzTm93VmFsaWQ7fX0KcmV0dXJuIG0uX2lzVmFsaWQ7fQpmdW5jdGlvbiBjcmVhdGVJbnZhbGlkKGZsYWdzKXt2YXIgbT1jcmVhdGVVVEMoTmFOKTtpZihmbGFncyE9bnVsbCl7ZXh0ZW5kKGdldFBhcnNpbmdGbGFncyhtKSxmbGFncyk7fQplbHNle2dldFBhcnNpbmdGbGFncyhtKS51c2VySW52YWxpZGF0ZWQ9dHJ1ZTt9CnJldHVybiBtO30KZnVuY3Rpb24gaXNVbmRlZmluZWQoaW5wdXQpe3JldHVybiBpbnB1dD09PXZvaWQgMDt9CnZhciBtb21lbnRQcm9wZXJ0aWVzPWhvb2tzLm1vbWVudFByb3BlcnRpZXM9W107ZnVuY3Rpb24gY29weUNvbmZpZyh0byxmcm9tKXt2YXIgaSxwcm9wLHZhbDtpZighaXNVbmRlZmluZWQoZnJvbS5faXNBTW9tZW50T2JqZWN0KSl7dG8uX2lzQU1vbWVudE9iamVjdD1mcm9tLl9pc0FNb21lbnRPYmplY3Q7fQppZighaXNVbmRlZmluZWQoZnJvbS5faSkpe3RvLl9pPWZyb20uX2k7fQppZighaXNVbmRlZmluZWQoZnJvbS5fZikpe3RvLl9mPWZyb20uX2Y7fQppZighaXNVbmRlZmluZWQoZnJvbS5fbCkpe3RvLl9sPWZyb20uX2w7fQppZighaXNVbmRlZmluZWQoZnJvbS5fc3RyaWN0KSl7dG8uX3N0cmljdD1mcm9tLl9zdHJpY3Q7fQppZighaXNVbmRlZmluZWQoZnJvbS5fdHptKSl7dG8uX3R6bT1mcm9tLl90em07fQppZighaXNVbmRlZmluZWQoZnJvbS5faXNVVEMpKXt0by5faXNVVEM9ZnJvbS5faXNVVEM7fQppZighaXNVbmRlZmluZWQoZnJvbS5fb2Zmc2V0KSl7dG8uX29mZnNldD1mcm9tLl9vZmZzZXQ7fQppZighaXNVbmRlZmluZWQoZnJvbS5fcGYpKXt0by5fcGY9Z2V0UGFyc2luZ0ZsYWdzKGZyb20pO30KaWYoIWlzVW5kZWZpbmVkKGZyb20uX2xvY2FsZSkpe3RvLl9sb2NhbGU9ZnJvbS5fbG9jYWxlO30KaWYobW9tZW50UHJvcGVydGllcy5sZW5ndGg+MCl7Zm9yKGkgaW4gbW9tZW50UHJvcGVydGllcyl7cHJvcD1tb21lbnRQcm9wZXJ0aWVzW2ldO3ZhbD1mcm9tW3Byb3BdO2lmKCFpc1VuZGVmaW5lZCh2YWwpKXt0b1twcm9wXT12YWw7fX19CnJldHVybiB0bzt9CnZhciB1cGRhdGVJblByb2dyZXNzPWZhbHNlO2Z1bmN0aW9uIE1vbWVudChjb25maWcpe2NvcHlDb25maWcodGhpcyxjb25maWcpO3RoaXMuX2Q9bmV3IERhdGUoY29uZmlnLl9kIT1udWxsP2NvbmZpZy5fZC5nZXRUaW1lKCk6TmFOKTtpZighdGhpcy5pc1ZhbGlkKCkpe3RoaXMuX2Q9bmV3IERhdGUoTmFOKTt9CmlmKHVwZGF0ZUluUHJvZ3Jlc3M9PT1mYWxzZSl7dXBkYXRlSW5Qcm9ncmVzcz10cnVlO2hvb2tzLnVwZGF0ZU9mZnNldCh0aGlzKTt1cGRhdGVJblByb2dyZXNzPWZhbHNlO319CmZ1bmN0aW9uIGlzTW9tZW50KG9iail7cmV0dXJuIG9iaiBpbnN0YW5jZW9mIE1vbWVudHx8KG9iaiE9bnVsbCYmb2JqLl9pc0FNb21lbnRPYmplY3QhPW51bGwpO30KZnVuY3Rpb24gYWJzRmxvb3IobnVtYmVyKXtpZihudW1iZXI8MCl7cmV0dXJuIE1hdGguY2VpbChudW1iZXIpfHwwO31lbHNle3JldHVybiBNYXRoLmZsb29yKG51bWJlcik7fX0KZnVuY3Rpb24gdG9JbnQoYXJndW1lbnRGb3JDb2VyY2lvbil7dmFyIGNvZXJjZWROdW1iZXI9K2FyZ3VtZW50Rm9yQ29lcmNpb24sdmFsdWU9MDtpZihjb2VyY2VkTnVtYmVyIT09MCYmaXNGaW5pdGUoY29lcmNlZE51bWJlcikpe3ZhbHVlPWFic0Zsb29yKGNvZXJjZWROdW1iZXIpO30KcmV0dXJuIHZhbHVlO30KZnVuY3Rpb24gY29tcGFyZUFycmF5cyhhcnJheTEsYXJyYXkyLGRvbnRDb252ZXJ0KXt2YXIgbGVuPU1hdGgubWluKGFycmF5MS5sZW5ndGgsYXJyYXkyLmxlbmd0aCksbGVuZ3RoRGlmZj1NYXRoLmFicyhhcnJheTEubGVuZ3RoLWFycmF5Mi5sZW5ndGgpLGRpZmZzPTAsaTtmb3IoaT0wO2k8bGVuO2krKyl7aWYoKGRvbnRDb252ZXJ0JiZhcnJheTFbaV0hPT1hcnJheTJbaV0pfHwoIWRvbnRDb252ZXJ0JiZ0b0ludChhcnJheTFbaV0pIT09dG9JbnQoYXJyYXkyW2ldKSkpe2RpZmZzKys7fX0KcmV0dXJuIGRpZmZzK2xlbmd0aERpZmY7fQpmdW5jdGlvbiB3YXJuKG1zZyl7aWYoaG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzPT09ZmFsc2UmJih0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKSYmY29uc29sZS53YXJuKXtjb25zb2xlLndhcm4oJ0RlcHJlY2F0aW9uIHdhcm5pbmc6ICcrbXNnKTt9fQpmdW5jdGlvbiBkZXByZWNhdGUobXNnLGZuKXt2YXIgZmlyc3RUaW1lPXRydWU7cmV0dXJuIGV4dGVuZChmdW5jdGlvbigpe2lmKGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciE9bnVsbCl7aG9va3MuZGVwcmVjYXRpb25IYW5kbGVyKG51bGwsbXNnKTt9CmlmKGZpcnN0VGltZSl7dmFyIGFyZ3M9W107dmFyIGFyZztmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXthcmc9Jyc7aWYodHlwZW9mIGFyZ3VtZW50c1tpXT09PSdvYmplY3QnKXthcmcrPSdcblsnK2krJ10gJztmb3IodmFyIGtleSBpbiBhcmd1bWVudHNbMF0pe2FyZys9a2V5Kyc6ICcrYXJndW1lbnRzWzBdW2tleV0rJywgJzt9CmFyZz1hcmcuc2xpY2UoMCwtMik7fWVsc2V7YXJnPWFyZ3VtZW50c1tpXTt9CmFyZ3MucHVzaChhcmcpO30Kd2Fybihtc2crJ1xuQXJndW1lbnRzOiAnK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpLmpvaW4oJycpKydcbicrKG5ldyBFcnJvcigpKS5zdGFjayk7Zmlyc3RUaW1lPWZhbHNlO30KcmV0dXJuIGZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGZuKTt9CnZhciBkZXByZWNhdGlvbnM9e307ZnVuY3Rpb24gZGVwcmVjYXRlU2ltcGxlKG5hbWUsbXNnKXtpZihob29rcy5kZXByZWNhdGlvbkhhbmRsZXIhPW51bGwpe2hvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcihuYW1lLG1zZyk7fQppZighZGVwcmVjYXRpb25zW25hbWVdKXt3YXJuKG1zZyk7ZGVwcmVjYXRpb25zW25hbWVdPXRydWU7fX0KaG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzPWZhbHNlO2hvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcj1udWxsO2Z1bmN0aW9uIGlzRnVuY3Rpb24oaW5wdXQpe3JldHVybiBpbnB1dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpPT09J1tvYmplY3QgRnVuY3Rpb25dJzt9CmZ1bmN0aW9uIHNldChjb25maWcpe3ZhciBwcm9wLGk7Zm9yKGkgaW4gY29uZmlnKXtwcm9wPWNvbmZpZ1tpXTtpZihpc0Z1bmN0aW9uKHByb3ApKXt0aGlzW2ldPXByb3A7fWVsc2V7dGhpc1snXycraV09cHJvcDt9fQp0aGlzLl9jb25maWc9Y29uZmlnO3RoaXMuX29yZGluYWxQYXJzZUxlbmllbnQ9bmV3IFJlZ0V4cCh0aGlzLl9vcmRpbmFsUGFyc2Uuc291cmNlKyd8JysoL1xkezEsMn0vKS5zb3VyY2UpO30KZnVuY3Rpb24gbWVyZ2VDb25maWdzKHBhcmVudENvbmZpZyxjaGlsZENvbmZpZyl7dmFyIHJlcz1leHRlbmQoe30scGFyZW50Q29uZmlnKSxwcm9wO2Zvcihwcm9wIGluIGNoaWxkQ29uZmlnKXtpZihoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLHByb3ApKXtpZihpc09iamVjdChwYXJlbnRDb25maWdbcHJvcF0pJiZpc09iamVjdChjaGlsZENvbmZpZ1twcm9wXSkpe3Jlc1twcm9wXT17fTtleHRlbmQocmVzW3Byb3BdLHBhcmVudENvbmZpZ1twcm9wXSk7ZXh0ZW5kKHJlc1twcm9wXSxjaGlsZENvbmZpZ1twcm9wXSk7fWVsc2UgaWYoY2hpbGRDb25maWdbcHJvcF0hPW51bGwpe3Jlc1twcm9wXT1jaGlsZENvbmZpZ1twcm9wXTt9ZWxzZXtkZWxldGUgcmVzW3Byb3BdO319fQpmb3IocHJvcCBpbiBwYXJlbnRDb25maWcpe2lmKGhhc093blByb3AocGFyZW50Q29uZmlnLHByb3ApJiYhaGFzT3duUHJvcChjaGlsZENvbmZpZyxwcm9wKSYmaXNPYmplY3QocGFyZW50Q29uZmlnW3Byb3BdKSl7cmVzW3Byb3BdPWV4dGVuZCh7fSxyZXNbcHJvcF0pO319CnJldHVybiByZXM7fQpmdW5jdGlvbiBMb2NhbGUoY29uZmlnKXtpZihjb25maWchPW51bGwpe3RoaXMuc2V0KGNvbmZpZyk7fX0KdmFyIGtleXM7aWYoT2JqZWN0LmtleXMpe2tleXM9T2JqZWN0LmtleXM7fWVsc2V7a2V5cz1mdW5jdGlvbihvYmope3ZhciBpLHJlcz1bXTtmb3IoaSBpbiBvYmope2lmKGhhc093blByb3Aob2JqLGkpKXtyZXMucHVzaChpKTt9fQpyZXR1cm4gcmVzO307fQp2YXIga2V5cyQxPWtleXM7dmFyIGRlZmF1bHRDYWxlbmRhcj17c2FtZURheTonW1RvZGF5IGF0XSBMVCcsbmV4dERheTonW1RvbW9ycm93IGF0XSBMVCcsbmV4dFdlZWs6J2RkZGQgW2F0XSBMVCcsbGFzdERheTonW1llc3RlcmRheSBhdF0gTFQnLGxhc3RXZWVrOidbTGFzdF0gZGRkZCBbYXRdIExUJyxzYW1lRWxzZTonTCd9O2Z1bmN0aW9uIGNhbGVuZGFyKGtleSxtb20sbm93KXt2YXIgb3V0cHV0PXRoaXMuX2NhbGVuZGFyW2tleV18fHRoaXMuX2NhbGVuZGFyWydzYW1lRWxzZSddO3JldHVybiBpc0Z1bmN0aW9uKG91dHB1dCk/b3V0cHV0LmNhbGwobW9tLG5vdyk6b3V0cHV0O30KdmFyIGRlZmF1bHRMb25nRGF0ZUZvcm1hdD17TFRTOidoOm1tOnNzIEEnLExUOidoOm1tIEEnLEw6J01NL0REL1lZWVknLExMOidNTU1NIEQsIFlZWVknLExMTDonTU1NTSBELCBZWVlZIGg6bW0gQScsTExMTDonZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSd9O2Z1bmN0aW9uIGxvbmdEYXRlRm9ybWF0KGtleSl7dmFyIGZvcm1hdD10aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldLGZvcm1hdFVwcGVyPXRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleS50b1VwcGVyQ2FzZSgpXTtpZihmb3JtYXR8fCFmb3JtYXRVcHBlcil7cmV0dXJuIGZvcm1hdDt9CnRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV09Zm9ybWF0VXBwZXIucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csZnVuY3Rpb24odmFsKXtyZXR1cm4gdmFsLnNsaWNlKDEpO30pO3JldHVybiB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldO30KdmFyIGRlZmF1bHRJbnZhbGlkRGF0ZT0nSW52YWxpZCBkYXRlJztmdW5jdGlvbiBpbnZhbGlkRGF0ZSgpe3JldHVybiB0aGlzLl9pbnZhbGlkRGF0ZTt9CnZhciBkZWZhdWx0T3JkaW5hbD0nJWQnO3ZhciBkZWZhdWx0T3JkaW5hbFBhcnNlPS9cZHsxLDJ9LztmdW5jdGlvbiBvcmRpbmFsKG51bWJlcil7cmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZSgnJWQnLG51bWJlcik7fQp2YXIgZGVmYXVsdFJlbGF0aXZlVGltZT17ZnV0dXJlOidpbiAlcycscGFzdDonJXMgYWdvJyxzOidhIGZldyBzZWNvbmRzJyxtOidhIG1pbnV0ZScsbW06JyVkIG1pbnV0ZXMnLGg6J2FuIGhvdXInLGhoOiclZCBob3VycycsZDonYSBkYXknLGRkOiclZCBkYXlzJyxNOidhIG1vbnRoJyxNTTonJWQgbW9udGhzJyx5OidhIHllYXInLHl5OiclZCB5ZWFycyd9O2Z1bmN0aW9uIHJlbGF0aXZlVGltZShudW1iZXIsd2l0aG91dFN1ZmZpeCxzdHJpbmcsaXNGdXR1cmUpe3ZhciBvdXRwdXQ9dGhpcy5fcmVsYXRpdmVUaW1lW3N0cmluZ107cmV0dXJuKGlzRnVuY3Rpb24ob3V0cHV0KSk/b3V0cHV0KG51bWJlcix3aXRob3V0U3VmZml4LHN0cmluZyxpc0Z1dHVyZSk6b3V0cHV0LnJlcGxhY2UoLyVkL2ksbnVtYmVyKTt9CmZ1bmN0aW9uIHBhc3RGdXR1cmUoZGlmZixvdXRwdXQpe3ZhciBmb3JtYXQ9dGhpcy5fcmVsYXRpdmVUaW1lW2RpZmY+MD8nZnV0dXJlJzoncGFzdCddO3JldHVybiBpc0Z1bmN0aW9uKGZvcm1hdCk/Zm9ybWF0KG91dHB1dCk6Zm9ybWF0LnJlcGxhY2UoLyVzL2ksb3V0cHV0KTt9CnZhciBhbGlhc2VzPXt9O2Z1bmN0aW9uIGFkZFVuaXRBbGlhcyh1bml0LHNob3J0aGFuZCl7dmFyIGxvd2VyQ2FzZT11bml0LnRvTG93ZXJDYXNlKCk7YWxpYXNlc1tsb3dlckNhc2VdPWFsaWFzZXNbbG93ZXJDYXNlKydzJ109YWxpYXNlc1tzaG9ydGhhbmRdPXVuaXQ7fQpmdW5jdGlvbiBub3JtYWxpemVVbml0cyh1bml0cyl7cmV0dXJuIHR5cGVvZiB1bml0cz09PSdzdHJpbmcnP2FsaWFzZXNbdW5pdHNdfHxhbGlhc2VzW3VuaXRzLnRvTG93ZXJDYXNlKCldOnVuZGVmaW5lZDt9CmZ1bmN0aW9uIG5vcm1hbGl6ZU9iamVjdFVuaXRzKGlucHV0T2JqZWN0KXt2YXIgbm9ybWFsaXplZElucHV0PXt9LG5vcm1hbGl6ZWRQcm9wLHByb3A7Zm9yKHByb3AgaW4gaW5wdXRPYmplY3Qpe2lmKGhhc093blByb3AoaW5wdXRPYmplY3QscHJvcCkpe25vcm1hbGl6ZWRQcm9wPW5vcm1hbGl6ZVVuaXRzKHByb3ApO2lmKG5vcm1hbGl6ZWRQcm9wKXtub3JtYWxpemVkSW5wdXRbbm9ybWFsaXplZFByb3BdPWlucHV0T2JqZWN0W3Byb3BdO319fQpyZXR1cm4gbm9ybWFsaXplZElucHV0O30KdmFyIHByaW9yaXRpZXM9e307ZnVuY3Rpb24gYWRkVW5pdFByaW9yaXR5KHVuaXQscHJpb3JpdHkpe3ByaW9yaXRpZXNbdW5pdF09cHJpb3JpdHk7fQpmdW5jdGlvbiBnZXRQcmlvcml0aXplZFVuaXRzKHVuaXRzT2JqKXt2YXIgdW5pdHM9W107Zm9yKHZhciB1IGluIHVuaXRzT2JqKXt1bml0cy5wdXNoKHt1bml0OnUscHJpb3JpdHk6cHJpb3JpdGllc1t1XX0pO30KdW5pdHMuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnByaW9yaXR5LWIucHJpb3JpdHk7fSk7cmV0dXJuIHVuaXRzO30KZnVuY3Rpb24gbWFrZUdldFNldCh1bml0LGtlZXBUaW1lKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlIT1udWxsKXtzZXQkMSh0aGlzLHVuaXQsdmFsdWUpO2hvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLGtlZXBUaW1lKTtyZXR1cm4gdGhpczt9ZWxzZXtyZXR1cm4gZ2V0KHRoaXMsdW5pdCk7fX07fQpmdW5jdGlvbiBnZXQobW9tLHVuaXQpe3JldHVybiBtb20uaXNWYWxpZCgpP21vbS5fZFsnZ2V0JysobW9tLl9pc1VUQz8nVVRDJzonJykrdW5pdF0oKTpOYU47fQpmdW5jdGlvbiBzZXQkMShtb20sdW5pdCx2YWx1ZSl7aWYobW9tLmlzVmFsaWQoKSl7bW9tLl9kWydzZXQnKyhtb20uX2lzVVRDPydVVEMnOicnKSt1bml0XSh2YWx1ZSk7fX0KZnVuY3Rpb24gc3RyaW5nR2V0KHVuaXRzKXt1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cyk7aWYoaXNGdW5jdGlvbih0aGlzW3VuaXRzXSkpe3JldHVybiB0aGlzW3VuaXRzXSgpO30KcmV0dXJuIHRoaXM7fQpmdW5jdGlvbiBzdHJpbmdTZXQodW5pdHMsdmFsdWUpe2lmKHR5cGVvZiB1bml0cz09PSdvYmplY3QnKXt1bml0cz1ub3JtYWxpemVPYmplY3RVbml0cyh1bml0cyk7dmFyIHByaW9yaXRpemVkPWdldFByaW9yaXRpemVkVW5pdHModW5pdHMpO2Zvcih2YXIgaT0wO2k8cHJpb3JpdGl6ZWQubGVuZ3RoO2krKyl7dGhpc1twcmlvcml0aXplZFtpXS51bml0XSh1bml0c1twcmlvcml0aXplZFtpXS51bml0XSk7fX1lbHNle3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtpZihpc0Z1bmN0aW9uKHRoaXNbdW5pdHNdKSl7cmV0dXJuIHRoaXNbdW5pdHNdKHZhbHVlKTt9fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIHplcm9GaWxsKG51bWJlcix0YXJnZXRMZW5ndGgsZm9yY2VTaWduKXt2YXIgYWJzTnVtYmVyPScnK01hdGguYWJzKG51bWJlciksemVyb3NUb0ZpbGw9dGFyZ2V0TGVuZ3RoLWFic051bWJlci5sZW5ndGgsc2lnbj1udW1iZXI+PTA7cmV0dXJuKHNpZ24/KGZvcmNlU2lnbj8nKyc6JycpOictJykrCk1hdGgucG93KDEwLE1hdGgubWF4KDAsemVyb3NUb0ZpbGwpKS50b1N0cmluZygpLnN1YnN0cigxKSthYnNOdW1iZXI7fQp2YXIgZm9ybWF0dGluZ1Rva2Vucz0vKFxbW15cW10qXF0pfChcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xraz98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZzt2YXIgbG9jYWxGb3JtYXR0aW5nVG9rZW5zPS8oXFtbXlxbXSpcXSl8KFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nO3ZhciBmb3JtYXRGdW5jdGlvbnM9e307dmFyIGZvcm1hdFRva2VuRnVuY3Rpb25zPXt9O2Z1bmN0aW9uIGFkZEZvcm1hdFRva2VuKHRva2VuLHBhZGRlZCxvcmRpbmFsLGNhbGxiYWNrKXt2YXIgZnVuYz1jYWxsYmFjaztpZih0eXBlb2YgY2FsbGJhY2s9PT0nc3RyaW5nJyl7ZnVuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzW2NhbGxiYWNrXSgpO307fQppZih0b2tlbil7Zm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dPWZ1bmM7fQppZihwYWRkZWQpe2Zvcm1hdFRva2VuRnVuY3Rpb25zW3BhZGRlZFswXV09ZnVuY3Rpb24oKXtyZXR1cm4gemVyb0ZpbGwoZnVuYy5hcHBseSh0aGlzLGFyZ3VtZW50cykscGFkZGVkWzFdLHBhZGRlZFsyXSk7fTt9CmlmKG9yZGluYWwpe2Zvcm1hdFRva2VuRnVuY3Rpb25zW29yZGluYWxdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm9yZGluYWwoZnVuYy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdG9rZW4pO307fX0KZnVuY3Rpb24gcmVtb3ZlRm9ybWF0dGluZ1Rva2VucyhpbnB1dCl7aWYoaW5wdXQubWF0Y2goL1xbW1xzXFNdLykpe3JldHVybiBpbnB1dC5yZXBsYWNlKC9eXFt8XF0kL2csJycpO30KcmV0dXJuIGlucHV0LnJlcGxhY2UoL1xcL2csJycpO30KZnVuY3Rpb24gbWFrZUZvcm1hdEZ1bmN0aW9uKGZvcm1hdCl7dmFyIGFycmF5PWZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSxpLGxlbmd0aDtmb3IoaT0wLGxlbmd0aD1hcnJheS5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZihmb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV0pe2FycmF5W2ldPWZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXTt9ZWxzZXthcnJheVtpXT1yZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGFycmF5W2ldKTt9fQpyZXR1cm4gZnVuY3Rpb24obW9tKXt2YXIgb3V0cHV0PScnLGk7Zm9yKGk9MDtpPGxlbmd0aDtpKyspe291dHB1dCs9YXJyYXlbaV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2FycmF5W2ldLmNhbGwobW9tLGZvcm1hdCk6YXJyYXlbaV07fQpyZXR1cm4gb3V0cHV0O307fQpmdW5jdGlvbiBmb3JtYXRNb21lbnQobSxmb3JtYXQpe2lmKCFtLmlzVmFsaWQoKSl7cmV0dXJuIG0ubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7fQpmb3JtYXQ9ZXhwYW5kRm9ybWF0KGZvcm1hdCxtLmxvY2FsZURhdGEoKSk7Zm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF09Zm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF18fG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpO3JldHVybiBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XShtKTt9CmZ1bmN0aW9uIGV4cGFuZEZvcm1hdChmb3JtYXQsbG9jYWxlKXt2YXIgaT01O2Z1bmN0aW9uIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2VucyhpbnB1dCl7cmV0dXJuIGxvY2FsZS5sb25nRGF0ZUZvcm1hdChpbnB1dCl8fGlucHV0O30KbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleD0wO3doaWxlKGk+PTAmJmxvY2FsRm9ybWF0dGluZ1Rva2Vucy50ZXN0KGZvcm1hdCkpe2Zvcm1hdD1mb3JtYXQucmVwbGFjZShsb2NhbEZvcm1hdHRpbmdUb2tlbnMscmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKTtsb2NhbEZvcm1hdHRpbmdUb2tlbnMubGFzdEluZGV4PTA7aS09MTt9CnJldHVybiBmb3JtYXQ7fQp2YXIgbWF0Y2gxPS9cZC87dmFyIG1hdGNoMj0vXGRcZC87dmFyIG1hdGNoMz0vXGR7M30vO3ZhciBtYXRjaDQ9L1xkezR9Lzt2YXIgbWF0Y2g2PS9bKy1dP1xkezZ9Lzt2YXIgbWF0Y2gxdG8yPS9cZFxkPy87dmFyIG1hdGNoM3RvND0vXGRcZFxkXGQ/Lzt2YXIgbWF0Y2g1dG82PS9cZFxkXGRcZFxkXGQ/Lzt2YXIgbWF0Y2gxdG8zPS9cZHsxLDN9Lzt2YXIgbWF0Y2gxdG80PS9cZHsxLDR9Lzt2YXIgbWF0Y2gxdG82PS9bKy1dP1xkezEsNn0vO3ZhciBtYXRjaFVuc2lnbmVkPS9cZCsvO3ZhciBtYXRjaFNpZ25lZD0vWystXT9cZCsvO3ZhciBtYXRjaE9mZnNldD0vWnxbKy1dXGRcZDo/XGRcZC9naTt2YXIgbWF0Y2hTaG9ydE9mZnNldD0vWnxbKy1dXGRcZCg/Ojo/XGRcZCk/L2dpO3ZhciBtYXRjaFRpbWVzdGFtcD0vWystXT9cZCsoXC5cZHsxLDN9KT8vO3ZhciBtYXRjaFdvcmQ9L1swLTldKlsnYS16XHUwMEEwLVx1MDVGRlx1MDcwMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0rfFtcdTA2MDAtXHUwNkZGXC9dKyhccyo/W1x1MDYwMC1cdTA2RkZdKyl7MSwyfS9pO3ZhciByZWdleGVzPXt9O2Z1bmN0aW9uIGFkZFJlZ2V4VG9rZW4odG9rZW4scmVnZXgsc3RyaWN0UmVnZXgpe3JlZ2V4ZXNbdG9rZW5dPWlzRnVuY3Rpb24ocmVnZXgpP3JlZ2V4OmZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZURhdGEpe3JldHVybihpc1N0cmljdCYmc3RyaWN0UmVnZXgpP3N0cmljdFJlZ2V4OnJlZ2V4O307fQpmdW5jdGlvbiBnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sY29uZmlnKXtpZighaGFzT3duUHJvcChyZWdleGVzLHRva2VuKSl7cmV0dXJuIG5ldyBSZWdFeHAodW5lc2NhcGVGb3JtYXQodG9rZW4pKTt9CnJldHVybiByZWdleGVzW3Rva2VuXShjb25maWcuX3N0cmljdCxjb25maWcuX2xvY2FsZSk7fQpmdW5jdGlvbiB1bmVzY2FwZUZvcm1hdChzKXtyZXR1cm4gcmVnZXhFc2NhcGUocy5yZXBsYWNlKCdcXCcsJycpLnJlcGxhY2UoL1xcKFxbKXxcXChcXSl8XFsoW15cXVxbXSopXF18XFwoLikvZyxmdW5jdGlvbihtYXRjaGVkLHAxLHAyLHAzLHA0KXtyZXR1cm4gcDF8fHAyfHxwM3x8cDQ7fSkpO30KZnVuY3Rpb24gcmVnZXhFc2NhcGUocyl7cmV0dXJuIHMucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csJ1xcJCYnKTt9CnZhciB0b2tlbnM9e307ZnVuY3Rpb24gYWRkUGFyc2VUb2tlbih0b2tlbixjYWxsYmFjayl7dmFyIGksZnVuYz1jYWxsYmFjaztpZih0eXBlb2YgdG9rZW49PT0nc3RyaW5nJyl7dG9rZW49W3Rva2VuXTt9CmlmKGlzTnVtYmVyKGNhbGxiYWNrKSl7ZnVuYz1mdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbY2FsbGJhY2tdPXRvSW50KGlucHV0KTt9O30KZm9yKGk9MDtpPHRva2VuLmxlbmd0aDtpKyspe3Rva2Vuc1t0b2tlbltpXV09ZnVuYzt9fQpmdW5jdGlvbiBhZGRXZWVrUGFyc2VUb2tlbih0b2tlbixjYWxsYmFjayl7YWRkUGFyc2VUb2tlbih0b2tlbixmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcsdG9rZW4pe2NvbmZpZy5fdz1jb25maWcuX3d8fHt9O2NhbGxiYWNrKGlucHV0LGNvbmZpZy5fdyxjb25maWcsdG9rZW4pO30pO30KZnVuY3Rpb24gYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4saW5wdXQsY29uZmlnKXtpZihpbnB1dCE9bnVsbCYmaGFzT3duUHJvcCh0b2tlbnMsdG9rZW4pKXt0b2tlbnNbdG9rZW5dKGlucHV0LGNvbmZpZy5fYSxjb25maWcsdG9rZW4pO319CnZhciBZRUFSPTA7dmFyIE1PTlRIPTE7dmFyIERBVEU9Mjt2YXIgSE9VUj0zO3ZhciBNSU5VVEU9NDt2YXIgU0VDT05EPTU7dmFyIE1JTExJU0VDT05EPTY7dmFyIFdFRUs9Nzt2YXIgV0VFS0RBWT04O3ZhciBpbmRleE9mO2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXtpbmRleE9mPUFycmF5LnByb3RvdHlwZS5pbmRleE9mO31lbHNle2luZGV4T2Y9ZnVuY3Rpb24obyl7dmFyIGk7Zm9yKGk9MDtpPHRoaXMubGVuZ3RoOysraSl7aWYodGhpc1tpXT09PW8pe3JldHVybiBpO319CnJldHVybi0xO307fQp2YXIgaW5kZXhPZiQxPWluZGV4T2Y7ZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhcixtb250aCl7cmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsbW9udGgrMSwwKSkuZ2V0VVRDRGF0ZSgpO30KYWRkRm9ybWF0VG9rZW4oJ00nLFsnTU0nLDJdLCdNbycsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzE7fSk7YWRkRm9ybWF0VG9rZW4oJ01NTScsMCwwLGZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsZm9ybWF0KTt9KTthZGRGb3JtYXRUb2tlbignTU1NTScsMCwwLGZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRocyh0aGlzLGZvcm1hdCk7fSk7YWRkVW5pdEFsaWFzKCdtb250aCcsJ00nKTthZGRVbml0UHJpb3JpdHkoJ21vbnRoJyw4KTthZGRSZWdleFRva2VuKCdNJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ01NJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdNTU0nLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5tb250aHNTaG9ydFJlZ2V4KGlzU3RyaWN0KTt9KTthZGRSZWdleFRva2VuKCdNTU1NJyxmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBsb2NhbGUubW9udGhzUmVnZXgoaXNTdHJpY3QpO30pO2FkZFBhcnNlVG9rZW4oWydNJywnTU0nXSxmdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbTU9OVEhdPXRvSW50KGlucHV0KS0xO30pO2FkZFBhcnNlVG9rZW4oWydNTU0nLCdNTU1NJ10sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnLHRva2VuKXt2YXIgbW9udGg9Y29uZmlnLl9sb2NhbGUubW9udGhzUGFyc2UoaW5wdXQsdG9rZW4sY29uZmlnLl9zdHJpY3QpO2lmKG1vbnRoIT1udWxsKXthcnJheVtNT05USF09bW9udGg7fWVsc2V7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZE1vbnRoPWlucHV0O319KTt2YXIgTU9OVEhTX0lOX0ZPUk1BVD0vRFtvRF0/KFxbW15cW1xdXSpcXXxccykrTU1NTT8vO3ZhciBkZWZhdWx0TG9jYWxlTW9udGhzPSdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpO2Z1bmN0aW9uIGxvY2FsZU1vbnRocyhtLGZvcm1hdCl7aWYoIW0pe3JldHVybiB0aGlzLl9tb250aHM7fQpyZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHMpP3RoaXMuX21vbnRoc1ttLm1vbnRoKCldOnRoaXMuX21vbnRoc1sodGhpcy5fbW9udGhzLmlzRm9ybWF0fHxNT05USFNfSU5fRk9STUFUKS50ZXN0KGZvcm1hdCk/J2Zvcm1hdCc6J3N0YW5kYWxvbmUnXVttLm1vbnRoKCldO30KdmFyIGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydD0nSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyk7ZnVuY3Rpb24gbG9jYWxlTW9udGhzU2hvcnQobSxmb3JtYXQpe2lmKCFtKXtyZXR1cm4gdGhpcy5fbW9udGhzU2hvcnQ7fQpyZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCk/dGhpcy5fbW9udGhzU2hvcnRbbS5tb250aCgpXTp0aGlzLl9tb250aHNTaG9ydFtNT05USFNfSU5fRk9STUFULnRlc3QoZm9ybWF0KT8nZm9ybWF0Jzonc3RhbmRhbG9uZSddW20ubW9udGgoKV07fQpmdW5jdGlvbiBoYW5kbGVTdHJpY3RQYXJzZShtb250aE5hbWUsZm9ybWF0LHN0cmljdCl7dmFyIGksaWksbW9tLGxsYz1tb250aE5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fbW9udGhzUGFyc2Upe3RoaXMuX21vbnRoc1BhcnNlPVtdO3RoaXMuX2xvbmdNb250aHNQYXJzZT1bXTt0aGlzLl9zaG9ydE1vbnRoc1BhcnNlPVtdO2ZvcihpPTA7aTwxMjsrK2kpe21vbT1jcmVhdGVVVEMoWzIwMDAsaV0pO3RoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV09dGhpcy5tb250aHNTaG9ydChtb20sJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7dGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldPXRoaXMubW9udGhzKG1vbSwnJykudG9Mb2NhbGVMb3dlckNhc2UoKTt9fQppZihzdHJpY3Qpe2lmKGZvcm1hdD09PSdNTU0nKXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYyk7cmV0dXJuIGlpIT09LTE/aWk6bnVsbDt9ZWxzZXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO319ZWxzZXtpZihmb3JtYXQ9PT0nTU1NJyl7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxsbGMpO2lmKGlpIT09LTEpe3JldHVybiBpaTt9CmlpPWluZGV4T2YkMS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fWVsc2V7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGxsYyk7aWYoaWkhPT0tMSl7cmV0dXJuIGlpO30KaWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fX19CmZ1bmN0aW9uIGxvY2FsZU1vbnRoc1BhcnNlKG1vbnRoTmFtZSxmb3JtYXQsc3RyaWN0KXt2YXIgaSxtb20scmVnZXg7aWYodGhpcy5fbW9udGhzUGFyc2VFeGFjdCl7cmV0dXJuIGhhbmRsZVN0cmljdFBhcnNlLmNhbGwodGhpcyxtb250aE5hbWUsZm9ybWF0LHN0cmljdCk7fQppZighdGhpcy5fbW9udGhzUGFyc2Upe3RoaXMuX21vbnRoc1BhcnNlPVtdO3RoaXMuX2xvbmdNb250aHNQYXJzZT1bXTt0aGlzLl9zaG9ydE1vbnRoc1BhcnNlPVtdO30KZm9yKGk9MDtpPDEyO2krKyl7bW9tPWNyZWF0ZVVUQyhbMjAwMCxpXSk7aWYoc3RyaWN0JiYhdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldKXt0aGlzLl9sb25nTW9udGhzUGFyc2VbaV09bmV3IFJlZ0V4cCgnXicrdGhpcy5tb250aHMobW9tLCcnKS5yZXBsYWNlKCcuJywnJykrJyQnLCdpJyk7dGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKCdeJyt0aGlzLm1vbnRoc1Nob3J0KG1vbSwnJykucmVwbGFjZSgnLicsJycpKyckJywnaScpO30KaWYoIXN0cmljdCYmIXRoaXMuX21vbnRoc1BhcnNlW2ldKXtyZWdleD0nXicrdGhpcy5tb250aHMobW9tLCcnKSsnfF4nK3RoaXMubW9udGhzU2hvcnQobW9tLCcnKTt0aGlzLl9tb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKHJlZ2V4LnJlcGxhY2UoJy4nLCcnKSwnaScpO30KaWYoc3RyaWN0JiZmb3JtYXQ9PT0nTU1NTScmJnRoaXMuX2xvbmdNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpe3JldHVybiBpO31lbHNlIGlmKHN0cmljdCYmZm9ybWF0PT09J01NTScmJnRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKXtyZXR1cm4gaTt9ZWxzZSBpZighc3RyaWN0JiZ0aGlzLl9tb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpe3JldHVybiBpO319fQpmdW5jdGlvbiBzZXRNb250aChtb20sdmFsdWUpe3ZhciBkYXlPZk1vbnRoO2lmKCFtb20uaXNWYWxpZCgpKXtyZXR1cm4gbW9tO30KaWYodHlwZW9mIHZhbHVlPT09J3N0cmluZycpe2lmKC9eXGQrJC8udGVzdCh2YWx1ZSkpe3ZhbHVlPXRvSW50KHZhbHVlKTt9ZWxzZXt2YWx1ZT1tb20ubG9jYWxlRGF0YSgpLm1vbnRoc1BhcnNlKHZhbHVlKTtpZighaXNOdW1iZXIodmFsdWUpKXtyZXR1cm4gbW9tO319fQpkYXlPZk1vbnRoPU1hdGgubWluKG1vbS5kYXRlKCksZGF5c0luTW9udGgobW9tLnllYXIoKSx2YWx1ZSkpO21vbS5fZFsnc2V0JysobW9tLl9pc1VUQz8nVVRDJzonJykrJ01vbnRoJ10odmFsdWUsZGF5T2ZNb250aCk7cmV0dXJuIG1vbTt9CmZ1bmN0aW9uIGdldFNldE1vbnRoKHZhbHVlKXtpZih2YWx1ZSE9bnVsbCl7c2V0TW9udGgodGhpcyx2YWx1ZSk7aG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsdHJ1ZSk7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIGdldCh0aGlzLCdNb250aCcpO319CmZ1bmN0aW9uIGdldERheXNJbk1vbnRoKCl7cmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSk7fQp2YXIgZGVmYXVsdE1vbnRoc1Nob3J0UmVnZXg9bWF0Y2hXb3JkO2Z1bmN0aW9uIG1vbnRoc1Nob3J0UmVnZXgoaXNTdHJpY3Qpe2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3Qpe2lmKCFoYXNPd25Qcm9wKHRoaXMsJ19tb250aHNSZWdleCcpKXtjb21wdXRlTW9udGhzUGFyc2UuY2FsbCh0aGlzKTt9CmlmKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleDt9ZWxzZXtyZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRSZWdleDt9fWVsc2V7aWYoIWhhc093blByb3AodGhpcywnX21vbnRoc1Nob3J0UmVnZXgnKSl7dGhpcy5fbW9udGhzU2hvcnRSZWdleD1kZWZhdWx0TW9udGhzU2hvcnRSZWdleDt9CnJldHVybiB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4JiZpc1N0cmljdD90aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1Nob3J0UmVnZXg7fX0KdmFyIGRlZmF1bHRNb250aHNSZWdleD1tYXRjaFdvcmQ7ZnVuY3Rpb24gbW9udGhzUmVnZXgoaXNTdHJpY3Qpe2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3Qpe2lmKCFoYXNPd25Qcm9wKHRoaXMsJ19tb250aHNSZWdleCcpKXtjb21wdXRlTW9udGhzUGFyc2UuY2FsbCh0aGlzKTt9CmlmKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fbW9udGhzU3RyaWN0UmVnZXg7fWVsc2V7cmV0dXJuIHRoaXMuX21vbnRoc1JlZ2V4O319ZWxzZXtpZighaGFzT3duUHJvcCh0aGlzLCdfbW9udGhzUmVnZXgnKSl7dGhpcy5fbW9udGhzUmVnZXg9ZGVmYXVsdE1vbnRoc1JlZ2V4O30KcmV0dXJuIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4JiZpc1N0cmljdD90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleDt9fQpmdW5jdGlvbiBjb21wdXRlTW9udGhzUGFyc2UoKXtmdW5jdGlvbiBjbXBMZW5SZXYoYSxiKXtyZXR1cm4gYi5sZW5ndGgtYS5sZW5ndGg7fQp2YXIgc2hvcnRQaWVjZXM9W10sbG9uZ1BpZWNlcz1bXSxtaXhlZFBpZWNlcz1bXSxpLG1vbTtmb3IoaT0wO2k8MTI7aSsrKXttb209Y3JlYXRlVVRDKFsyMDAwLGldKTtzaG9ydFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCcnKSk7bG9uZ1BpZWNlcy5wdXNoKHRoaXMubW9udGhzKG1vbSwnJykpO21peGVkUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCcnKSk7bWl4ZWRQaWVjZXMucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG1vbSwnJykpO30Kc2hvcnRQaWVjZXMuc29ydChjbXBMZW5SZXYpO2xvbmdQaWVjZXMuc29ydChjbXBMZW5SZXYpO21peGVkUGllY2VzLnNvcnQoY21wTGVuUmV2KTtmb3IoaT0wO2k8MTI7aSsrKXtzaG9ydFBpZWNlc1tpXT1yZWdleEVzY2FwZShzaG9ydFBpZWNlc1tpXSk7bG9uZ1BpZWNlc1tpXT1yZWdleEVzY2FwZShsb25nUGllY2VzW2ldKTt9CmZvcihpPTA7aTwyNDtpKyspe21peGVkUGllY2VzW2ldPXJlZ2V4RXNjYXBlKG1peGVkUGllY2VzW2ldKTt9CnRoaXMuX21vbnRoc1JlZ2V4PW5ldyBSZWdFeHAoJ14oJyttaXhlZFBpZWNlcy5qb2luKCd8JykrJyknLCdpJyk7dGhpcy5fbW9udGhzU2hvcnRSZWdleD10aGlzLl9tb250aHNSZWdleDt0aGlzLl9tb250aHNTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCdeKCcrbG9uZ1BpZWNlcy5qb2luKCd8JykrJyknLCdpJyk7dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCdeKCcrc2hvcnRQaWVjZXMuam9pbignfCcpKycpJywnaScpO30KYWRkRm9ybWF0VG9rZW4oJ1knLDAsMCxmdW5jdGlvbigpe3ZhciB5PXRoaXMueWVhcigpO3JldHVybiB5PD05OTk5PycnK3k6JysnK3k7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1lZJywyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueWVhcigpJTEwMDt9KTthZGRGb3JtYXRUb2tlbigwLFsnWVlZWScsNF0sMCwneWVhcicpO2FkZEZvcm1hdFRva2VuKDAsWydZWVlZWScsNV0sMCwneWVhcicpO2FkZEZvcm1hdFRva2VuKDAsWydZWVlZWVknLDYsdHJ1ZV0sMCwneWVhcicpO2FkZFVuaXRBbGlhcygneWVhcicsJ3knKTthZGRVbml0UHJpb3JpdHkoJ3llYXInLDEpO2FkZFJlZ2V4VG9rZW4oJ1knLG1hdGNoU2lnbmVkKTthZGRSZWdleFRva2VuKCdZWScsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUmVnZXhUb2tlbignWVlZWScsbWF0Y2gxdG80LG1hdGNoNCk7YWRkUmVnZXhUb2tlbignWVlZWVknLG1hdGNoMXRvNixtYXRjaDYpO2FkZFJlZ2V4VG9rZW4oJ1lZWVlZWScsbWF0Y2gxdG82LG1hdGNoNik7YWRkUGFyc2VUb2tlbihbJ1lZWVlZJywnWVlZWVlZJ10sWUVBUik7YWRkUGFyc2VUb2tlbignWVlZWScsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W1lFQVJdPWlucHV0Lmxlbmd0aD09PTI/aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpOnRvSW50KGlucHV0KTt9KTthZGRQYXJzZVRva2VuKCdZWScsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W1lFQVJdPWhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTt9KTthZGRQYXJzZVRva2VuKCdZJyxmdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbWUVBUl09cGFyc2VJbnQoaW5wdXQsMTApO30pO2Z1bmN0aW9uIGRheXNJblllYXIoeWVhcil7cmV0dXJuIGlzTGVhcFllYXIoeWVhcik/MzY2OjM2NTt9CmZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcil7cmV0dXJuKHllYXIlND09PTAmJnllYXIlMTAwIT09MCl8fHllYXIlNDAwPT09MDt9Cmhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyPWZ1bmN0aW9uKGlucHV0KXtyZXR1cm4gdG9JbnQoaW5wdXQpKyh0b0ludChpbnB1dCk+Njg/MTkwMDoyMDAwKTt9O3ZhciBnZXRTZXRZZWFyPW1ha2VHZXRTZXQoJ0Z1bGxZZWFyJyx0cnVlKTtmdW5jdGlvbiBnZXRJc0xlYXBZZWFyKCl7cmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKCkpO30KZnVuY3Rpb24gY3JlYXRlRGF0ZSh5LG0sZCxoLE0scyxtcyl7dmFyIGRhdGU9bmV3IERhdGUoeSxtLGQsaCxNLHMsbXMpO2lmKHk8MTAwJiZ5Pj0wJiZpc0Zpbml0ZShkYXRlLmdldEZ1bGxZZWFyKCkpKXtkYXRlLnNldEZ1bGxZZWFyKHkpO30KcmV0dXJuIGRhdGU7fQpmdW5jdGlvbiBjcmVhdGVVVENEYXRlKHkpe3ZhciBkYXRlPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsYXJndW1lbnRzKSk7aWYoeTwxMDAmJnk+PTAmJmlzRmluaXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSkpe2RhdGUuc2V0VVRDRnVsbFllYXIoeSk7fQpyZXR1cm4gZGF0ZTt9CmZ1bmN0aW9uIGZpcnN0V2Vla09mZnNldCh5ZWFyLGRvdyxkb3kpe3Zhcgpmd2Q9Nytkb3ctZG95LGZ3ZGx3PSg3K2NyZWF0ZVVUQ0RhdGUoeWVhciwwLGZ3ZCkuZ2V0VVRDRGF5KCktZG93KSU3O3JldHVybi1md2Rsdytmd2QtMTt9CmZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrcyh5ZWFyLHdlZWssd2Vla2RheSxkb3csZG95KXt2YXIgbG9jYWxXZWVrZGF5PSg3K3dlZWtkYXktZG93KSU3LHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSksZGF5T2ZZZWFyPTErNyood2Vlay0xKStsb2NhbFdlZWtkYXkrd2Vla09mZnNldCxyZXNZZWFyLHJlc0RheU9mWWVhcjtpZihkYXlPZlllYXI8PTApe3Jlc1llYXI9eWVhci0xO3Jlc0RheU9mWWVhcj1kYXlzSW5ZZWFyKHJlc1llYXIpK2RheU9mWWVhcjt9ZWxzZSBpZihkYXlPZlllYXI+ZGF5c0luWWVhcih5ZWFyKSl7cmVzWWVhcj15ZWFyKzE7cmVzRGF5T2ZZZWFyPWRheU9mWWVhci1kYXlzSW5ZZWFyKHllYXIpO31lbHNle3Jlc1llYXI9eWVhcjtyZXNEYXlPZlllYXI9ZGF5T2ZZZWFyO30KcmV0dXJue3llYXI6cmVzWWVhcixkYXlPZlllYXI6cmVzRGF5T2ZZZWFyfTt9CmZ1bmN0aW9uIHdlZWtPZlllYXIobW9tLGRvdyxkb3kpe3ZhciB3ZWVrT2Zmc2V0PWZpcnN0V2Vla09mZnNldChtb20ueWVhcigpLGRvdyxkb3kpLHdlZWs9TWF0aC5mbG9vcigobW9tLmRheU9mWWVhcigpLXdlZWtPZmZzZXQtMSkvNykrMSxyZXNXZWVrLHJlc1llYXI7aWYod2VlazwxKXtyZXNZZWFyPW1vbS55ZWFyKCktMTtyZXNXZWVrPXdlZWsrd2Vla3NJblllYXIocmVzWWVhcixkb3csZG95KTt9ZWxzZSBpZih3ZWVrPndlZWtzSW5ZZWFyKG1vbS55ZWFyKCksZG93LGRveSkpe3Jlc1dlZWs9d2Vlay13ZWVrc0luWWVhcihtb20ueWVhcigpLGRvdyxkb3kpO3Jlc1llYXI9bW9tLnllYXIoKSsxO31lbHNle3Jlc1llYXI9bW9tLnllYXIoKTtyZXNXZWVrPXdlZWs7fQpyZXR1cm57d2VlazpyZXNXZWVrLHllYXI6cmVzWWVhcn07fQpmdW5jdGlvbiB3ZWVrc0luWWVhcih5ZWFyLGRvdyxkb3kpe3ZhciB3ZWVrT2Zmc2V0PWZpcnN0V2Vla09mZnNldCh5ZWFyLGRvdyxkb3kpLHdlZWtPZmZzZXROZXh0PWZpcnN0V2Vla09mZnNldCh5ZWFyKzEsZG93LGRveSk7cmV0dXJuKGRheXNJblllYXIoeWVhciktd2Vla09mZnNldCt3ZWVrT2Zmc2V0TmV4dCkvNzt9CmFkZEZvcm1hdFRva2VuKCd3JyxbJ3d3JywyXSwnd28nLCd3ZWVrJyk7YWRkRm9ybWF0VG9rZW4oJ1cnLFsnV1cnLDJdLCdXbycsJ2lzb1dlZWsnKTthZGRVbml0QWxpYXMoJ3dlZWsnLCd3Jyk7YWRkVW5pdEFsaWFzKCdpc29XZWVrJywnVycpO2FkZFVuaXRQcmlvcml0eSgnd2VlaycsNSk7YWRkVW5pdFByaW9yaXR5KCdpc29XZWVrJyw1KTthZGRSZWdleFRva2VuKCd3JyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ3d3JyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdXJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ1dXJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRXZWVrUGFyc2VUb2tlbihbJ3cnLCd3dycsJ1cnLCdXVyddLGZ1bmN0aW9uKGlucHV0LHdlZWssY29uZmlnLHRva2VuKXt3ZWVrW3Rva2VuLnN1YnN0cigwLDEpXT10b0ludChpbnB1dCk7fSk7ZnVuY3Rpb24gbG9jYWxlV2Vlayhtb20pe3JldHVybiB3ZWVrT2ZZZWFyKG1vbSx0aGlzLl93ZWVrLmRvdyx0aGlzLl93ZWVrLmRveSkud2Vlazt9CnZhciBkZWZhdWx0TG9jYWxlV2Vlaz17ZG93OjAsZG95OjZ9O2Z1bmN0aW9uIGxvY2FsZUZpcnN0RGF5T2ZXZWVrKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG93O30KZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZlllYXIoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3k7fQpmdW5jdGlvbiBnZXRTZXRXZWVrKGlucHV0KXt2YXIgd2Vlaz10aGlzLmxvY2FsZURhdGEoKS53ZWVrKHRoaXMpO3JldHVybiBpbnB1dD09bnVsbD93ZWVrOnRoaXMuYWRkKChpbnB1dC13ZWVrKSo3LCdkJyk7fQpmdW5jdGlvbiBnZXRTZXRJU09XZWVrKGlucHV0KXt2YXIgd2Vlaz13ZWVrT2ZZZWFyKHRoaXMsMSw0KS53ZWVrO3JldHVybiBpbnB1dD09bnVsbD93ZWVrOnRoaXMuYWRkKChpbnB1dC13ZWVrKSo3LCdkJyk7fQphZGRGb3JtYXRUb2tlbignZCcsMCwnZG8nLCdkYXknKTthZGRGb3JtYXRUb2tlbignZGQnLDAsMCxmdW5jdGlvbihmb3JtYXQpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLGZvcm1hdCk7fSk7YWRkRm9ybWF0VG9rZW4oJ2RkZCcsMCwwLGZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzU2hvcnQodGhpcyxmb3JtYXQpO30pO2FkZEZvcm1hdFRva2VuKCdkZGRkJywwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcyxmb3JtYXQpO30pO2FkZEZvcm1hdFRva2VuKCdlJywwLDAsJ3dlZWtkYXknKTthZGRGb3JtYXRUb2tlbignRScsMCwwLCdpc29XZWVrZGF5Jyk7YWRkVW5pdEFsaWFzKCdkYXknLCdkJyk7YWRkVW5pdEFsaWFzKCd3ZWVrZGF5JywnZScpO2FkZFVuaXRBbGlhcygnaXNvV2Vla2RheScsJ0UnKTthZGRVbml0UHJpb3JpdHkoJ2RheScsMTEpO2FkZFVuaXRQcmlvcml0eSgnd2Vla2RheScsMTEpO2FkZFVuaXRQcmlvcml0eSgnaXNvV2Vla2RheScsMTEpO2FkZFJlZ2V4VG9rZW4oJ2QnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignZScsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdFJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ2RkJyxmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBsb2NhbGUud2Vla2RheXNNaW5SZWdleChpc1N0cmljdCk7fSk7YWRkUmVnZXhUb2tlbignZGRkJyxmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBsb2NhbGUud2Vla2RheXNTaG9ydFJlZ2V4KGlzU3RyaWN0KTt9KTthZGRSZWdleFRva2VuKCdkZGRkJyxmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBsb2NhbGUud2Vla2RheXNSZWdleChpc1N0cmljdCk7fSk7YWRkV2Vla1BhcnNlVG9rZW4oWydkZCcsJ2RkZCcsJ2RkZGQnXSxmdW5jdGlvbihpbnB1dCx3ZWVrLGNvbmZpZyx0b2tlbil7dmFyIHdlZWtkYXk9Y29uZmlnLl9sb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCx0b2tlbixjb25maWcuX3N0cmljdCk7aWYod2Vla2RheSE9bnVsbCl7d2Vlay5kPXdlZWtkYXk7fWVsc2V7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZFdlZWtkYXk9aW5wdXQ7fX0pO2FkZFdlZWtQYXJzZVRva2VuKFsnZCcsJ2UnLCdFJ10sZnVuY3Rpb24oaW5wdXQsd2Vlayxjb25maWcsdG9rZW4pe3dlZWtbdG9rZW5dPXRvSW50KGlucHV0KTt9KTtmdW5jdGlvbiBwYXJzZVdlZWtkYXkoaW5wdXQsbG9jYWxlKXtpZih0eXBlb2YgaW5wdXQhPT0nc3RyaW5nJyl7cmV0dXJuIGlucHV0O30KaWYoIWlzTmFOKGlucHV0KSl7cmV0dXJuIHBhcnNlSW50KGlucHV0LDEwKTt9CmlucHV0PWxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KTtpZih0eXBlb2YgaW5wdXQ9PT0nbnVtYmVyJyl7cmV0dXJuIGlucHV0O30KcmV0dXJuIG51bGw7fQpmdW5jdGlvbiBwYXJzZUlzb1dlZWtkYXkoaW5wdXQsbG9jYWxlKXtpZih0eXBlb2YgaW5wdXQ9PT0nc3RyaW5nJyl7cmV0dXJuIGxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KSU3fHw3O30KcmV0dXJuIGlzTmFOKGlucHV0KT9udWxsOmlucHV0O30KdmFyIGRlZmF1bHRMb2NhbGVXZWVrZGF5cz0nU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyk7ZnVuY3Rpb24gbG9jYWxlV2Vla2RheXMobSxmb3JtYXQpe2lmKCFtKXtyZXR1cm4gdGhpcy5fd2Vla2RheXM7fQpyZXR1cm4gaXNBcnJheSh0aGlzLl93ZWVrZGF5cyk/dGhpcy5fd2Vla2RheXNbbS5kYXkoKV06dGhpcy5fd2Vla2RheXNbdGhpcy5fd2Vla2RheXMuaXNGb3JtYXQudGVzdChmb3JtYXQpPydmb3JtYXQnOidzdGFuZGFsb25lJ11bbS5kYXkoKV07fQp2YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQ9J1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKTtmdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1Nob3J0KG0pe3JldHVybihtKT90aGlzLl93ZWVrZGF5c1Nob3J0W20uZGF5KCldOnRoaXMuX3dlZWtkYXlzU2hvcnQ7fQp2YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluPSdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKTtmdW5jdGlvbiBsb2NhbGVXZWVrZGF5c01pbihtKXtyZXR1cm4obSk/dGhpcy5fd2Vla2RheXNNaW5bbS5kYXkoKV06dGhpcy5fd2Vla2RheXNNaW47fQpmdW5jdGlvbiBoYW5kbGVTdHJpY3RQYXJzZSQxKHdlZWtkYXlOYW1lLGZvcm1hdCxzdHJpY3Qpe3ZhciBpLGlpLG1vbSxsbGM9d2Vla2RheU5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fd2Vla2RheXNQYXJzZSl7dGhpcy5fd2Vla2RheXNQYXJzZT1bXTt0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2U9W107dGhpcy5fbWluV2Vla2RheXNQYXJzZT1bXTtmb3IoaT0wO2k8NzsrK2kpe21vbT1jcmVhdGVVVEMoWzIwMDAsMV0pLmRheShpKTt0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldPXRoaXMud2Vla2RheXNNaW4obW9tLCcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO3RoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXT10aGlzLndlZWtkYXlzU2hvcnQobW9tLCcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO3RoaXMuX3dlZWtkYXlzUGFyc2VbaV09dGhpcy53ZWVrZGF5cyhtb20sJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7fX0KaWYoc3RyaWN0KXtpZihmb3JtYXQ9PT0nZGRkZCcpe2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO31lbHNlIGlmKGZvcm1hdD09PSdkZGQnKXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO31lbHNle2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO319ZWxzZXtpZihmb3JtYXQ9PT0nZGRkZCcpe2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLGxsYyk7cmV0dXJuIGlpIT09LTE/aWk6bnVsbDt9ZWxzZSBpZihmb3JtYXQ9PT0nZGRkJyl7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGxsYyk7aWYoaWkhPT0tMSl7cmV0dXJuIGlpO30KaWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxsbGMpO2lmKGlpIT09LTEpe3JldHVybiBpaTt9CmlpPWluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO31lbHNle2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLGxsYyk7aWYoaWkhPT0tMSl7cmV0dXJuIGlpO30KaWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGxsYyk7cmV0dXJuIGlpIT09LTE/aWk6bnVsbDt9fX0KZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNQYXJzZSh3ZWVrZGF5TmFtZSxmb3JtYXQsc3RyaWN0KXt2YXIgaSxtb20scmVnZXg7aWYodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KXtyZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UkMS5jYWxsKHRoaXMsd2Vla2RheU5hbWUsZm9ybWF0LHN0cmljdCk7fQppZighdGhpcy5fd2Vla2RheXNQYXJzZSl7dGhpcy5fd2Vla2RheXNQYXJzZT1bXTt0aGlzLl9taW5XZWVrZGF5c1BhcnNlPVtdO3RoaXMuX3Nob3J0V2Vla2RheXNQYXJzZT1bXTt0aGlzLl9mdWxsV2Vla2RheXNQYXJzZT1bXTt9CmZvcihpPTA7aTw3O2krKyl7bW9tPWNyZWF0ZVVUQyhbMjAwMCwxXSkuZGF5KGkpO2lmKHN0cmljdCYmIXRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldKXt0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXT1uZXcgUmVnRXhwKCdeJyt0aGlzLndlZWtkYXlzKG1vbSwnJykucmVwbGFjZSgnLicsJ1wuPycpKyckJywnaScpO3RoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXT1uZXcgUmVnRXhwKCdeJyt0aGlzLndlZWtkYXlzU2hvcnQobW9tLCcnKS5yZXBsYWNlKCcuJywnXC4/JykrJyQnLCdpJyk7dGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXT1uZXcgUmVnRXhwKCdeJyt0aGlzLndlZWtkYXlzTWluKG1vbSwnJykucmVwbGFjZSgnLicsJ1wuPycpKyckJywnaScpO30KaWYoIXRoaXMuX3dlZWtkYXlzUGFyc2VbaV0pe3JlZ2V4PSdeJyt0aGlzLndlZWtkYXlzKG1vbSwnJykrJ3xeJyt0aGlzLndlZWtkYXlzU2hvcnQobW9tLCcnKSsnfF4nK3RoaXMud2Vla2RheXNNaW4obW9tLCcnKTt0aGlzLl93ZWVrZGF5c1BhcnNlW2ldPW5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsJycpLCdpJyk7fQppZihzdHJpY3QmJmZvcm1hdD09PSdkZGRkJyYmdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpe3JldHVybiBpO31lbHNlIGlmKHN0cmljdCYmZm9ybWF0PT09J2RkZCcmJnRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSl7cmV0dXJuIGk7fWVsc2UgaWYoc3RyaWN0JiZmb3JtYXQ9PT0nZGQnJiZ0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKXtyZXR1cm4gaTt9ZWxzZSBpZighc3RyaWN0JiZ0aGlzLl93ZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKXtyZXR1cm4gaTt9fX0KZnVuY3Rpb24gZ2V0U2V0RGF5T2ZXZWVrKGlucHV0KXtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybiBpbnB1dCE9bnVsbD90aGlzOk5hTjt9CnZhciBkYXk9dGhpcy5faXNVVEM/dGhpcy5fZC5nZXRVVENEYXkoKTp0aGlzLl9kLmdldERheSgpO2lmKGlucHV0IT1udWxsKXtpbnB1dD1wYXJzZVdlZWtkYXkoaW5wdXQsdGhpcy5sb2NhbGVEYXRhKCkpO3JldHVybiB0aGlzLmFkZChpbnB1dC1kYXksJ2QnKTt9ZWxzZXtyZXR1cm4gZGF5O319CmZ1bmN0aW9uIGdldFNldExvY2FsZURheU9mV2VlayhpbnB1dCl7aWYoIXRoaXMuaXNWYWxpZCgpKXtyZXR1cm4gaW5wdXQhPW51bGw/dGhpczpOYU47fQp2YXIgd2Vla2RheT0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gaW5wdXQ9PW51bGw/d2Vla2RheTp0aGlzLmFkZChpbnB1dC13ZWVrZGF5LCdkJyk7fQpmdW5jdGlvbiBnZXRTZXRJU09EYXlPZldlZWsoaW5wdXQpe2lmKCF0aGlzLmlzVmFsaWQoKSl7cmV0dXJuIGlucHV0IT1udWxsP3RoaXM6TmFOO30KaWYoaW5wdXQhPW51bGwpe3ZhciB3ZWVrZGF5PXBhcnNlSXNvV2Vla2RheShpbnB1dCx0aGlzLmxvY2FsZURhdGEoKSk7cmV0dXJuIHRoaXMuZGF5KHRoaXMuZGF5KCklNz93ZWVrZGF5OndlZWtkYXktNyk7fWVsc2V7cmV0dXJuIHRoaXMuZGF5KCl8fDc7fX0KdmFyIGRlZmF1bHRXZWVrZGF5c1JlZ2V4PW1hdGNoV29yZDtmdW5jdGlvbiB3ZWVrZGF5c1JlZ2V4KGlzU3RyaWN0KXtpZih0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Qpe2lmKCFoYXNPd25Qcm9wKHRoaXMsJ193ZWVrZGF5c1JlZ2V4Jykpe2NvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7fQppZihpc1N0cmljdCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg7fWVsc2V7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUmVnZXg7fX1lbHNle2lmKCFoYXNPd25Qcm9wKHRoaXMsJ193ZWVrZGF5c1JlZ2V4Jykpe3RoaXMuX3dlZWtkYXlzUmVnZXg9ZGVmYXVsdFdlZWtkYXlzUmVnZXg7fQpyZXR1cm4gdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleCYmaXNTdHJpY3Q/dGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1JlZ2V4O319CnZhciBkZWZhdWx0V2Vla2RheXNTaG9ydFJlZ2V4PW1hdGNoV29yZDtmdW5jdGlvbiB3ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3Qpe2lmKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCl7aWYoIWhhc093blByb3AodGhpcywnX3dlZWtkYXlzUmVnZXgnKSl7Y29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTt9CmlmKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4O31lbHNle3JldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg7fX1lbHNle2lmKCFoYXNPd25Qcm9wKHRoaXMsJ193ZWVrZGF5c1Nob3J0UmVnZXgnKSl7dGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PWRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXg7fQpyZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4JiZpc1N0cmljdD90aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4O319CnZhciBkZWZhdWx0V2Vla2RheXNNaW5SZWdleD1tYXRjaFdvcmQ7ZnVuY3Rpb24gd2Vla2RheXNNaW5SZWdleChpc1N0cmljdCl7aWYodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KXtpZighaGFzT3duUHJvcCh0aGlzLCdfd2Vla2RheXNSZWdleCcpKXtjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpO30KaWYoaXNTdHJpY3Qpe3JldHVybiB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4O31lbHNle3JldHVybiB0aGlzLl93ZWVrZGF5c01pblJlZ2V4O319ZWxzZXtpZighaGFzT3duUHJvcCh0aGlzLCdfd2Vla2RheXNNaW5SZWdleCcpKXt0aGlzLl93ZWVrZGF5c01pblJlZ2V4PWRlZmF1bHRXZWVrZGF5c01pblJlZ2V4O30KcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNNaW5SZWdleDt9fQpmdW5jdGlvbiBjb21wdXRlV2Vla2RheXNQYXJzZSgpe2Z1bmN0aW9uIGNtcExlblJldihhLGIpe3JldHVybiBiLmxlbmd0aC1hLmxlbmd0aDt9CnZhciBtaW5QaWVjZXM9W10sc2hvcnRQaWVjZXM9W10sbG9uZ1BpZWNlcz1bXSxtaXhlZFBpZWNlcz1bXSxpLG1vbSxtaW5wLHNob3J0cCxsb25ncDtmb3IoaT0wO2k8NztpKyspe21vbT1jcmVhdGVVVEMoWzIwMDAsMV0pLmRheShpKTttaW5wPXRoaXMud2Vla2RheXNNaW4obW9tLCcnKTtzaG9ydHA9dGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwnJyk7bG9uZ3A9dGhpcy53ZWVrZGF5cyhtb20sJycpO21pblBpZWNlcy5wdXNoKG1pbnApO3Nob3J0UGllY2VzLnB1c2goc2hvcnRwKTtsb25nUGllY2VzLnB1c2gobG9uZ3ApO21peGVkUGllY2VzLnB1c2gobWlucCk7bWl4ZWRQaWVjZXMucHVzaChzaG9ydHApO21peGVkUGllY2VzLnB1c2gobG9uZ3ApO30KbWluUGllY2VzLnNvcnQoY21wTGVuUmV2KTtzaG9ydFBpZWNlcy5zb3J0KGNtcExlblJldik7bG9uZ1BpZWNlcy5zb3J0KGNtcExlblJldik7bWl4ZWRQaWVjZXMuc29ydChjbXBMZW5SZXYpO2ZvcihpPTA7aTw3O2krKyl7c2hvcnRQaWVjZXNbaV09cmVnZXhFc2NhcGUoc2hvcnRQaWVjZXNbaV0pO2xvbmdQaWVjZXNbaV09cmVnZXhFc2NhcGUobG9uZ1BpZWNlc1tpXSk7bWl4ZWRQaWVjZXNbaV09cmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO30KdGhpcy5fd2Vla2RheXNSZWdleD1uZXcgUmVnRXhwKCdeKCcrbWl4ZWRQaWVjZXMuam9pbignfCcpKycpJywnaScpO3RoaXMuX3dlZWtkYXlzU2hvcnRSZWdleD10aGlzLl93ZWVrZGF5c1JlZ2V4O3RoaXMuX3dlZWtkYXlzTWluUmVnZXg9dGhpcy5fd2Vla2RheXNSZWdleDt0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4PW5ldyBSZWdFeHAoJ14oJytsb25nUGllY2VzLmpvaW4oJ3wnKSsnKScsJ2knKTt0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cCgnXignK3Nob3J0UGllY2VzLmpvaW4oJ3wnKSsnKScsJ2knKTt0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoJ14oJyttaW5QaWVjZXMuam9pbignfCcpKycpJywnaScpO30KZnVuY3Rpb24gaEZvcm1hdCgpe3JldHVybiB0aGlzLmhvdXJzKCklMTJ8fDEyO30KZnVuY3Rpb24ga0Zvcm1hdCgpe3JldHVybiB0aGlzLmhvdXJzKCl8fDI0O30KYWRkRm9ybWF0VG9rZW4oJ0gnLFsnSEgnLDJdLDAsJ2hvdXInKTthZGRGb3JtYXRUb2tlbignaCcsWydoaCcsMl0sMCxoRm9ybWF0KTthZGRGb3JtYXRUb2tlbignaycsWydraycsMl0sMCxrRm9ybWF0KTthZGRGb3JtYXRUb2tlbignaG1tJywwLDAsZnVuY3Rpb24oKXtyZXR1cm4nJytoRm9ybWF0LmFwcGx5KHRoaXMpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpO30pO2FkZEZvcm1hdFRva2VuKCdobW1zcycsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuJycraEZvcm1hdC5hcHBseSh0aGlzKSt6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwyKSsKemVyb0ZpbGwodGhpcy5zZWNvbmRzKCksMik7fSk7YWRkRm9ybWF0VG9rZW4oJ0htbScsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuJycrdGhpcy5ob3VycygpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpO30pO2FkZEZvcm1hdFRva2VuKCdIbW1zcycsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuJycrdGhpcy5ob3VycygpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpKwp6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwyKTt9KTtmdW5jdGlvbiBtZXJpZGllbSh0b2tlbixsb3dlcmNhc2Upe2FkZEZvcm1hdFRva2VuKHRva2VuLDAsMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksdGhpcy5taW51dGVzKCksbG93ZXJjYXNlKTt9KTt9Cm1lcmlkaWVtKCdhJyx0cnVlKTttZXJpZGllbSgnQScsZmFsc2UpO2FkZFVuaXRBbGlhcygnaG91cicsJ2gnKTthZGRVbml0UHJpb3JpdHkoJ2hvdXInLDEzKTtmdW5jdGlvbiBtYXRjaE1lcmlkaWVtKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5fbWVyaWRpZW1QYXJzZTt9CmFkZFJlZ2V4VG9rZW4oJ2EnLG1hdGNoTWVyaWRpZW0pO2FkZFJlZ2V4VG9rZW4oJ0EnLG1hdGNoTWVyaWRpZW0pO2FkZFJlZ2V4VG9rZW4oJ0gnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignaCcsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdISCcsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUmVnZXhUb2tlbignaGgnLG1hdGNoMXRvMixtYXRjaDIpO2FkZFJlZ2V4VG9rZW4oJ2htbScsbWF0Y2gzdG80KTthZGRSZWdleFRva2VuKCdobW1zcycsbWF0Y2g1dG82KTthZGRSZWdleFRva2VuKCdIbW0nLG1hdGNoM3RvNCk7YWRkUmVnZXhUb2tlbignSG1tc3MnLG1hdGNoNXRvNik7YWRkUGFyc2VUb2tlbihbJ0gnLCdISCddLEhPVVIpO2FkZFBhcnNlVG9rZW4oWydhJywnQSddLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl9pc1BtPWNvbmZpZy5fbG9jYWxlLmlzUE0oaW5wdXQpO2NvbmZpZy5fbWVyaWRpZW09aW5wdXQ7fSk7YWRkUGFyc2VUb2tlbihbJ2gnLCdoaCddLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQpO2dldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXI9dHJ1ZTt9KTthZGRQYXJzZVRva2VuKCdobW0nLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7dmFyIHBvcz1pbnB1dC5sZW5ndGgtMjthcnJheVtIT1VSXT10b0ludChpbnB1dC5zdWJzdHIoMCxwb3MpKTthcnJheVtNSU5VVEVdPXRvSW50KGlucHV0LnN1YnN0cihwb3MpKTtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPXRydWU7fSk7YWRkUGFyc2VUb2tlbignaG1tc3MnLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7dmFyIHBvczE9aW5wdXQubGVuZ3RoLTQ7dmFyIHBvczI9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zMSkpO2FycmF5W01JTlVURV09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczEsMikpO2FycmF5W1NFQ09ORF09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPXRydWU7fSk7YWRkUGFyc2VUb2tlbignSG1tJyxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe3ZhciBwb3M9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zKSk7YXJyYXlbTUlOVVRFXT10b0ludChpbnB1dC5zdWJzdHIocG9zKSk7fSk7YWRkUGFyc2VUb2tlbignSG1tc3MnLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7dmFyIHBvczE9aW5wdXQubGVuZ3RoLTQ7dmFyIHBvczI9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zMSkpO2FycmF5W01JTlVURV09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczEsMikpO2FycmF5W1NFQ09ORF09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTt9KTtmdW5jdGlvbiBsb2NhbGVJc1BNKGlucHV0KXtyZXR1cm4oKGlucHV0KycnKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKT09PSdwJyk7fQp2YXIgZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2U9L1thcF1cLj9tP1wuPy9pO2Z1bmN0aW9uIGxvY2FsZU1lcmlkaWVtKGhvdXJzLG1pbnV0ZXMsaXNMb3dlcil7aWYoaG91cnM+MTEpe3JldHVybiBpc0xvd2VyPydwbSc6J1BNJzt9ZWxzZXtyZXR1cm4gaXNMb3dlcj8nYW0nOidBTSc7fX0KdmFyIGdldFNldEhvdXI9bWFrZUdldFNldCgnSG91cnMnLHRydWUpO3ZhciBiYXNlQ29uZmlnPXtjYWxlbmRhcjpkZWZhdWx0Q2FsZW5kYXIsbG9uZ0RhdGVGb3JtYXQ6ZGVmYXVsdExvbmdEYXRlRm9ybWF0LGludmFsaWREYXRlOmRlZmF1bHRJbnZhbGlkRGF0ZSxvcmRpbmFsOmRlZmF1bHRPcmRpbmFsLG9yZGluYWxQYXJzZTpkZWZhdWx0T3JkaW5hbFBhcnNlLHJlbGF0aXZlVGltZTpkZWZhdWx0UmVsYXRpdmVUaW1lLG1vbnRoczpkZWZhdWx0TG9jYWxlTW9udGhzLG1vbnRoc1Nob3J0OmRlZmF1bHRMb2NhbGVNb250aHNTaG9ydCx3ZWVrOmRlZmF1bHRMb2NhbGVXZWVrLHdlZWtkYXlzOmRlZmF1bHRMb2NhbGVXZWVrZGF5cyx3ZWVrZGF5c01pbjpkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW4sd2Vla2RheXNTaG9ydDpkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCxtZXJpZGllbVBhcnNlOmRlZmF1bHRMb2NhbGVNZXJpZGllbVBhcnNlfTt2YXIgbG9jYWxlcz17fTt2YXIgbG9jYWxlRmFtaWxpZXM9e307dmFyIGdsb2JhbExvY2FsZTtmdW5jdGlvbiBub3JtYWxpemVMb2NhbGUoa2V5KXtyZXR1cm4ga2V5P2tleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCctJyk6a2V5O30KZnVuY3Rpb24gY2hvb3NlTG9jYWxlKG5hbWVzKXt2YXIgaT0wLGosbmV4dCxsb2NhbGUsc3BsaXQ7d2hpbGUoaTxuYW1lcy5sZW5ndGgpe3NwbGl0PW5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpXSkuc3BsaXQoJy0nKTtqPXNwbGl0Lmxlbmd0aDtuZXh0PW5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpKzFdKTtuZXh0PW5leHQ/bmV4dC5zcGxpdCgnLScpOm51bGw7d2hpbGUoaj4wKXtsb2NhbGU9bG9hZExvY2FsZShzcGxpdC5zbGljZSgwLGopLmpvaW4oJy0nKSk7aWYobG9jYWxlKXtyZXR1cm4gbG9jYWxlO30KaWYobmV4dCYmbmV4dC5sZW5ndGg+PWomJmNvbXBhcmVBcnJheXMoc3BsaXQsbmV4dCx0cnVlKT49ai0xKXticmVhazt9CmotLTt9CmkrKzt9CnJldHVybiBudWxsO30KZnVuY3Rpb24gbG9hZExvY2FsZShuYW1lKXt2YXIgb2xkTG9jYWxlPW51bGw7aWYoIWxvY2FsZXNbbmFtZV0mJih0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCcpJiZtb2R1bGUmJm1vZHVsZS5leHBvcnRzKXt0cnl7b2xkTG9jYWxlPWdsb2JhbExvY2FsZS5fYWJicjtyZXF1aXJlKCcuL2xvY2FsZS8nK25hbWUpO2dldFNldEdsb2JhbExvY2FsZShvbGRMb2NhbGUpO31jYXRjaChlKXt9fQpyZXR1cm4gbG9jYWxlc1tuYW1lXTt9CmZ1bmN0aW9uIGdldFNldEdsb2JhbExvY2FsZShrZXksdmFsdWVzKXt2YXIgZGF0YTtpZihrZXkpe2lmKGlzVW5kZWZpbmVkKHZhbHVlcykpe2RhdGE9Z2V0TG9jYWxlKGtleSk7fQplbHNle2RhdGE9ZGVmaW5lTG9jYWxlKGtleSx2YWx1ZXMpO30KaWYoZGF0YSl7Z2xvYmFsTG9jYWxlPWRhdGE7fX0KcmV0dXJuIGdsb2JhbExvY2FsZS5fYWJicjt9CmZ1bmN0aW9uIGRlZmluZUxvY2FsZShuYW1lLGNvbmZpZyl7aWYoY29uZmlnIT09bnVsbCl7dmFyIHBhcmVudENvbmZpZz1iYXNlQ29uZmlnO2NvbmZpZy5hYmJyPW5hbWU7aWYobG9jYWxlc1tuYW1lXSE9bnVsbCl7ZGVwcmVjYXRlU2ltcGxlKCdkZWZpbmVMb2NhbGVPdmVycmlkZScsJ3VzZSBtb21lbnQudXBkYXRlTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgdG8gY2hhbmdlICcrJ2FuIGV4aXN0aW5nIGxvY2FsZS4gbW9tZW50LmRlZmluZUxvY2FsZShsb2NhbGVOYW1lLCAnKydjb25maWcpIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGNyZWF0aW5nIGEgbmV3IGxvY2FsZSAnKydTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9kZWZpbmUtbG9jYWxlLyBmb3IgbW9yZSBpbmZvLicpO3BhcmVudENvbmZpZz1sb2NhbGVzW25hbWVdLl9jb25maWc7fWVsc2UgaWYoY29uZmlnLnBhcmVudExvY2FsZSE9bnVsbCl7aWYobG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXSE9bnVsbCl7cGFyZW50Q29uZmlnPWxvY2FsZXNbY29uZmlnLnBhcmVudExvY2FsZV0uX2NvbmZpZzt9ZWxzZXtpZighbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0pe2xvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdPVtdO30KbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0ucHVzaCh7bmFtZTpuYW1lLGNvbmZpZzpjb25maWd9KTtyZXR1cm4gbnVsbDt9fQpsb2NhbGVzW25hbWVdPW5ldyBMb2NhbGUobWVyZ2VDb25maWdzKHBhcmVudENvbmZpZyxjb25maWcpKTtpZihsb2NhbGVGYW1pbGllc1tuYW1lXSl7bG9jYWxlRmFtaWxpZXNbbmFtZV0uZm9yRWFjaChmdW5jdGlvbih4KXtkZWZpbmVMb2NhbGUoeC5uYW1lLHguY29uZmlnKTt9KTt9CmdldFNldEdsb2JhbExvY2FsZShuYW1lKTtyZXR1cm4gbG9jYWxlc1tuYW1lXTt9ZWxzZXtkZWxldGUgbG9jYWxlc1tuYW1lXTtyZXR1cm4gbnVsbDt9fQpmdW5jdGlvbiB1cGRhdGVMb2NhbGUobmFtZSxjb25maWcpe2lmKGNvbmZpZyE9bnVsbCl7dmFyIGxvY2FsZSxwYXJlbnRDb25maWc9YmFzZUNvbmZpZztpZihsb2NhbGVzW25hbWVdIT1udWxsKXtwYXJlbnRDb25maWc9bG9jYWxlc1tuYW1lXS5fY29uZmlnO30KY29uZmlnPW1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsY29uZmlnKTtsb2NhbGU9bmV3IExvY2FsZShjb25maWcpO2xvY2FsZS5wYXJlbnRMb2NhbGU9bG9jYWxlc1tuYW1lXTtsb2NhbGVzW25hbWVdPWxvY2FsZTtnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSk7fWVsc2V7aWYobG9jYWxlc1tuYW1lXSE9bnVsbCl7aWYobG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGUhPW51bGwpe2xvY2FsZXNbbmFtZV09bG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGU7fWVsc2UgaWYobG9jYWxlc1tuYW1lXSE9bnVsbCl7ZGVsZXRlIGxvY2FsZXNbbmFtZV07fX19CnJldHVybiBsb2NhbGVzW25hbWVdO30KZnVuY3Rpb24gZ2V0TG9jYWxlKGtleSl7dmFyIGxvY2FsZTtpZihrZXkmJmtleS5fbG9jYWxlJiZrZXkuX2xvY2FsZS5fYWJicil7a2V5PWtleS5fbG9jYWxlLl9hYmJyO30KaWYoIWtleSl7cmV0dXJuIGdsb2JhbExvY2FsZTt9CmlmKCFpc0FycmF5KGtleSkpe2xvY2FsZT1sb2FkTG9jYWxlKGtleSk7aWYobG9jYWxlKXtyZXR1cm4gbG9jYWxlO30Ka2V5PVtrZXldO30KcmV0dXJuIGNob29zZUxvY2FsZShrZXkpO30KZnVuY3Rpb24gbGlzdExvY2FsZXMoKXtyZXR1cm4ga2V5cyQxKGxvY2FsZXMpO30KZnVuY3Rpb24gY2hlY2tPdmVyZmxvdyhtKXt2YXIgb3ZlcmZsb3c7dmFyIGE9bS5fYTtpZihhJiZnZXRQYXJzaW5nRmxhZ3MobSkub3ZlcmZsb3c9PT0tMil7b3ZlcmZsb3c9YVtNT05USF08MHx8YVtNT05USF0+MTE/TU9OVEg6YVtEQVRFXTwxfHxhW0RBVEVdPmRheXNJbk1vbnRoKGFbWUVBUl0sYVtNT05USF0pP0RBVEU6YVtIT1VSXTwwfHxhW0hPVVJdPjI0fHwoYVtIT1VSXT09PTI0JiYoYVtNSU5VVEVdIT09MHx8YVtTRUNPTkRdIT09MHx8YVtNSUxMSVNFQ09ORF0hPT0wKSk/SE9VUjphW01JTlVURV08MHx8YVtNSU5VVEVdPjU5P01JTlVURTphW1NFQ09ORF08MHx8YVtTRUNPTkRdPjU5P1NFQ09ORDphW01JTExJU0VDT05EXTwwfHxhW01JTExJU0VDT05EXT45OTk/TUlMTElTRUNPTkQ6LTE7aWYoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd0RheU9mWWVhciYmKG92ZXJmbG93PFlFQVJ8fG92ZXJmbG93PkRBVEUpKXtvdmVyZmxvdz1EQVRFO30KaWYoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtzJiZvdmVyZmxvdz09PS0xKXtvdmVyZmxvdz1XRUVLO30KaWYoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtkYXkmJm92ZXJmbG93PT09LTEpe292ZXJmbG93PVdFRUtEQVk7fQpnZXRQYXJzaW5nRmxhZ3MobSkub3ZlcmZsb3c9b3ZlcmZsb3c7fQpyZXR1cm4gbTt9CnZhciBleHRlbmRlZElzb1JlZ2V4PS9eXHMqKCg/OlsrLV1cZHs2fXxcZHs0fSktKD86XGRcZC1cZFxkfFdcZFxkLVxkfFdcZFxkfFxkXGRcZHxcZFxkKSkoPzooVHwgKShcZFxkKD86OlxkXGQoPzo6XGRcZCg/OlsuLF1cZCspPyk/KT8pKFtcK1wtXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvO3ZhciBiYXNpY0lzb1JlZ2V4PS9eXHMqKCg/OlsrLV1cZHs2fXxcZHs0fSkoPzpcZFxkXGRcZHxXXGRcZFxkfFdcZFxkfFxkXGRcZHxcZFxkKSkoPzooVHwgKShcZFxkKD86XGRcZCg/OlxkXGQoPzpbLixdXGQrKT8pPyk/KShbXCtcLV1cZFxkKD86Oj9cZFxkKT98XHMqWik/KT8kLzt2YXIgdHpSZWdleD0vWnxbKy1dXGRcZCg/Ojo/XGRcZCk/Lzt2YXIgaXNvRGF0ZXM9W1snWVlZWVlZLU1NLUREJywvWystXVxkezZ9LVxkXGQtXGRcZC9dLFsnWVlZWS1NTS1ERCcsL1xkezR9LVxkXGQtXGRcZC9dLFsnR0dHRy1bV11XVy1FJywvXGR7NH0tV1xkXGQtXGQvXSxbJ0dHR0ctW1ddV1cnLC9cZHs0fS1XXGRcZC8sZmFsc2VdLFsnWVlZWS1EREQnLC9cZHs0fS1cZHszfS9dLFsnWVlZWS1NTScsL1xkezR9LVxkXGQvLGZhbHNlXSxbJ1lZWVlZWU1NREQnLC9bKy1dXGR7MTB9L10sWydZWVlZTU1ERCcsL1xkezh9L10sWydHR0dHW1ddV1dFJywvXGR7NH1XXGR7M30vXSxbJ0dHR0dbV11XVycsL1xkezR9V1xkezJ9LyxmYWxzZV0sWydZWVlZREREJywvXGR7N30vXV07dmFyIGlzb1RpbWVzPVtbJ0hIOm1tOnNzLlNTU1MnLC9cZFxkOlxkXGQ6XGRcZFwuXGQrL10sWydISDptbTpzcyxTU1NTJywvXGRcZDpcZFxkOlxkXGQsXGQrL10sWydISDptbTpzcycsL1xkXGQ6XGRcZDpcZFxkL10sWydISDptbScsL1xkXGQ6XGRcZC9dLFsnSEhtbXNzLlNTU1MnLC9cZFxkXGRcZFxkXGRcLlxkKy9dLFsnSEhtbXNzLFNTU1MnLC9cZFxkXGRcZFxkXGQsXGQrL10sWydISG1tc3MnLC9cZFxkXGRcZFxkXGQvXSxbJ0hIbW0nLC9cZFxkXGRcZC9dLFsnSEgnLC9cZFxkL11dO3ZhciBhc3BOZXRKc29uUmVnZXg9L15cLz9EYXRlXCgoXC0/XGQrKS9pO2Z1bmN0aW9uIGNvbmZpZ0Zyb21JU08oY29uZmlnKXt2YXIgaSxsLHN0cmluZz1jb25maWcuX2ksbWF0Y2g9ZXh0ZW5kZWRJc29SZWdleC5leGVjKHN0cmluZyl8fGJhc2ljSXNvUmVnZXguZXhlYyhzdHJpbmcpLGFsbG93VGltZSxkYXRlRm9ybWF0LHRpbWVGb3JtYXQsdHpGb3JtYXQ7aWYobWF0Y2gpe2dldFBhcnNpbmdGbGFncyhjb25maWcpLmlzbz10cnVlO2ZvcihpPTAsbD1pc29EYXRlcy5sZW5ndGg7aTxsO2krKyl7aWYoaXNvRGF0ZXNbaV1bMV0uZXhlYyhtYXRjaFsxXSkpe2RhdGVGb3JtYXQ9aXNvRGF0ZXNbaV1bMF07YWxsb3dUaW1lPWlzb0RhdGVzW2ldWzJdIT09ZmFsc2U7YnJlYWs7fX0KaWYoZGF0ZUZvcm1hdD09bnVsbCl7Y29uZmlnLl9pc1ZhbGlkPWZhbHNlO3JldHVybjt9CmlmKG1hdGNoWzNdKXtmb3IoaT0wLGw9aXNvVGltZXMubGVuZ3RoO2k8bDtpKyspe2lmKGlzb1RpbWVzW2ldWzFdLmV4ZWMobWF0Y2hbM10pKXt0aW1lRm9ybWF0PShtYXRjaFsyXXx8JyAnKStpc29UaW1lc1tpXVswXTticmVhazt9fQppZih0aW1lRm9ybWF0PT1udWxsKXtjb25maWcuX2lzVmFsaWQ9ZmFsc2U7cmV0dXJuO319CmlmKCFhbGxvd1RpbWUmJnRpbWVGb3JtYXQhPW51bGwpe2NvbmZpZy5faXNWYWxpZD1mYWxzZTtyZXR1cm47fQppZihtYXRjaFs0XSl7aWYodHpSZWdleC5leGVjKG1hdGNoWzRdKSl7dHpGb3JtYXQ9J1onO31lbHNle2NvbmZpZy5faXNWYWxpZD1mYWxzZTtyZXR1cm47fX0KY29uZmlnLl9mPWRhdGVGb3JtYXQrKHRpbWVGb3JtYXR8fCcnKSsodHpGb3JtYXR8fCcnKTtjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7fWVsc2V7Y29uZmlnLl9pc1ZhbGlkPWZhbHNlO319CmZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmcoY29uZmlnKXt2YXIgbWF0Y2hlZD1hc3BOZXRKc29uUmVnZXguZXhlYyhjb25maWcuX2kpO2lmKG1hdGNoZWQhPT1udWxsKXtjb25maWcuX2Q9bmV3IERhdGUoK21hdGNoZWRbMV0pO3JldHVybjt9CmNvbmZpZ0Zyb21JU08oY29uZmlnKTtpZihjb25maWcuX2lzVmFsaWQ9PT1mYWxzZSl7ZGVsZXRlIGNvbmZpZy5faXNWYWxpZDtob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO319Cmhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrPWRlcHJlY2F0ZSgndmFsdWUgcHJvdmlkZWQgaXMgbm90IGluIGEgcmVjb2duaXplZCBJU08gZm9ybWF0LiBtb21lbnQgY29uc3RydWN0aW9uIGZhbGxzIGJhY2sgdG8ganMgRGF0ZSgpLCAnKyd3aGljaCBpcyBub3QgcmVsaWFibGUgYWNyb3NzIGFsbCBicm93c2VycyBhbmQgdmVyc2lvbnMuIE5vbiBJU08gZGF0ZSBmb3JtYXRzIGFyZSAnKydkaXNjb3VyYWdlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGFuIHVwY29taW5nIG1ham9yIHJlbGVhc2UuIFBsZWFzZSByZWZlciB0byAnKydodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2pzLWRhdGUvIGZvciBtb3JlIGluZm8uJyxmdW5jdGlvbihjb25maWcpe2NvbmZpZy5fZD1uZXcgRGF0ZShjb25maWcuX2krKGNvbmZpZy5fdXNlVVRDPycgVVRDJzonJykpO30pO2Z1bmN0aW9uIGRlZmF1bHRzKGEsYixjKXtpZihhIT1udWxsKXtyZXR1cm4gYTt9CmlmKGIhPW51bGwpe3JldHVybiBiO30KcmV0dXJuIGM7fQpmdW5jdGlvbiBjdXJyZW50RGF0ZUFycmF5KGNvbmZpZyl7dmFyIG5vd1ZhbHVlPW5ldyBEYXRlKGhvb2tzLm5vdygpKTtpZihjb25maWcuX3VzZVVUQyl7cmV0dXJuW25vd1ZhbHVlLmdldFVUQ0Z1bGxZZWFyKCksbm93VmFsdWUuZ2V0VVRDTW9udGgoKSxub3dWYWx1ZS5nZXRVVENEYXRlKCldO30KcmV0dXJuW25vd1ZhbHVlLmdldEZ1bGxZZWFyKCksbm93VmFsdWUuZ2V0TW9udGgoKSxub3dWYWx1ZS5nZXREYXRlKCldO30KZnVuY3Rpb24gY29uZmlnRnJvbUFycmF5KGNvbmZpZyl7dmFyIGksZGF0ZSxpbnB1dD1bXSxjdXJyZW50RGF0ZSx5ZWFyVG9Vc2U7aWYoY29uZmlnLl9kKXtyZXR1cm47fQpjdXJyZW50RGF0ZT1jdXJyZW50RGF0ZUFycmF5KGNvbmZpZyk7aWYoY29uZmlnLl93JiZjb25maWcuX2FbREFURV09PW51bGwmJmNvbmZpZy5fYVtNT05USF09PW51bGwpe2RheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpO30KaWYoY29uZmlnLl9kYXlPZlllYXIpe3llYXJUb1VzZT1kZWZhdWx0cyhjb25maWcuX2FbWUVBUl0sY3VycmVudERhdGVbWUVBUl0pO2lmKGNvbmZpZy5fZGF5T2ZZZWFyPmRheXNJblllYXIoeWVhclRvVXNlKSl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93RGF5T2ZZZWFyPXRydWU7fQpkYXRlPWNyZWF0ZVVUQ0RhdGUoeWVhclRvVXNlLDAsY29uZmlnLl9kYXlPZlllYXIpO2NvbmZpZy5fYVtNT05USF09ZGF0ZS5nZXRVVENNb250aCgpO2NvbmZpZy5fYVtEQVRFXT1kYXRlLmdldFVUQ0RhdGUoKTt9CmZvcihpPTA7aTwzJiZjb25maWcuX2FbaV09PW51bGw7KytpKXtjb25maWcuX2FbaV09aW5wdXRbaV09Y3VycmVudERhdGVbaV07fQpmb3IoO2k8NztpKyspe2NvbmZpZy5fYVtpXT1pbnB1dFtpXT0oY29uZmlnLl9hW2ldPT1udWxsKT8oaT09PTI/MTowKTpjb25maWcuX2FbaV07fQppZihjb25maWcuX2FbSE9VUl09PT0yNCYmY29uZmlnLl9hW01JTlVURV09PT0wJiZjb25maWcuX2FbU0VDT05EXT09PTAmJmNvbmZpZy5fYVtNSUxMSVNFQ09ORF09PT0wKXtjb25maWcuX25leHREYXk9dHJ1ZTtjb25maWcuX2FbSE9VUl09MDt9CmNvbmZpZy5fZD0oY29uZmlnLl91c2VVVEM/Y3JlYXRlVVRDRGF0ZTpjcmVhdGVEYXRlKS5hcHBseShudWxsLGlucHV0KTtpZihjb25maWcuX3R6bSE9bnVsbCl7Y29uZmlnLl9kLnNldFVUQ01pbnV0ZXMoY29uZmlnLl9kLmdldFVUQ01pbnV0ZXMoKS1jb25maWcuX3R6bSk7fQppZihjb25maWcuX25leHREYXkpe2NvbmZpZy5fYVtIT1VSXT0yNDt9fQpmdW5jdGlvbiBkYXlPZlllYXJGcm9tV2Vla0luZm8oY29uZmlnKXt2YXIgdyx3ZWVrWWVhcix3ZWVrLHdlZWtkYXksZG93LGRveSx0ZW1wLHdlZWtkYXlPdmVyZmxvdzt3PWNvbmZpZy5fdztpZih3LkdHIT1udWxsfHx3LlchPW51bGx8fHcuRSE9bnVsbCl7ZG93PTE7ZG95PTQ7d2Vla1llYXI9ZGVmYXVsdHMody5HRyxjb25maWcuX2FbWUVBUl0sd2Vla09mWWVhcihjcmVhdGVMb2NhbCgpLDEsNCkueWVhcik7d2Vlaz1kZWZhdWx0cyh3LlcsMSk7d2Vla2RheT1kZWZhdWx0cyh3LkUsMSk7aWYod2Vla2RheTwxfHx3ZWVrZGF5Pjcpe3dlZWtkYXlPdmVyZmxvdz10cnVlO319ZWxzZXtkb3c9Y29uZmlnLl9sb2NhbGUuX3dlZWsuZG93O2RveT1jb25maWcuX2xvY2FsZS5fd2Vlay5kb3k7dmFyIGN1cldlZWs9d2Vla09mWWVhcihjcmVhdGVMb2NhbCgpLGRvdyxkb3kpO3dlZWtZZWFyPWRlZmF1bHRzKHcuZ2csY29uZmlnLl9hW1lFQVJdLGN1cldlZWsueWVhcik7d2Vlaz1kZWZhdWx0cyh3LncsY3VyV2Vlay53ZWVrKTtpZih3LmQhPW51bGwpe3dlZWtkYXk9dy5kO2lmKHdlZWtkYXk8MHx8d2Vla2RheT42KXt3ZWVrZGF5T3ZlcmZsb3c9dHJ1ZTt9fWVsc2UgaWYody5lIT1udWxsKXt3ZWVrZGF5PXcuZStkb3c7aWYody5lPDB8fHcuZT42KXt3ZWVrZGF5T3ZlcmZsb3c9dHJ1ZTt9fWVsc2V7d2Vla2RheT1kb3c7fX0KaWYod2VlazwxfHx3ZWVrPndlZWtzSW5ZZWFyKHdlZWtZZWFyLGRvdyxkb3kpKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrcz10cnVlO31lbHNlIGlmKHdlZWtkYXlPdmVyZmxvdyE9bnVsbCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93V2Vla2RheT10cnVlO31lbHNle3RlbXA9ZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLHdlZWssd2Vla2RheSxkb3csZG95KTtjb25maWcuX2FbWUVBUl09dGVtcC55ZWFyO2NvbmZpZy5fZGF5T2ZZZWFyPXRlbXAuZGF5T2ZZZWFyO319Cmhvb2tzLklTT184NjAxPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyl7aWYoY29uZmlnLl9mPT09aG9va3MuSVNPXzg2MDEpe2NvbmZpZ0Zyb21JU08oY29uZmlnKTtyZXR1cm47fQpjb25maWcuX2E9W107Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHk9dHJ1ZTt2YXIgc3RyaW5nPScnK2NvbmZpZy5faSxpLHBhcnNlZElucHV0LHRva2Vucyx0b2tlbixza2lwcGVkLHN0cmluZ0xlbmd0aD1zdHJpbmcubGVuZ3RoLHRvdGFsUGFyc2VkSW5wdXRMZW5ndGg9MDt0b2tlbnM9ZXhwYW5kRm9ybWF0KGNvbmZpZy5fZixjb25maWcuX2xvY2FsZSkubWF0Y2goZm9ybWF0dGluZ1Rva2Vucyl8fFtdO2ZvcihpPTA7aTx0b2tlbnMubGVuZ3RoO2krKyl7dG9rZW49dG9rZW5zW2ldO3BhcnNlZElucHV0PShzdHJpbmcubWF0Y2goZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLGNvbmZpZykpfHxbXSlbMF07aWYocGFyc2VkSW5wdXQpe3NraXBwZWQ9c3RyaW5nLnN1YnN0cigwLHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSk7aWYoc2tpcHBlZC5sZW5ndGg+MCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChza2lwcGVkKTt9CnN0cmluZz1zdHJpbmcuc2xpY2Uoc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpK3BhcnNlZElucHV0Lmxlbmd0aCk7dG90YWxQYXJzZWRJbnB1dExlbmd0aCs9cGFyc2VkSW5wdXQubGVuZ3RoO30KaWYoZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dKXtpZihwYXJzZWRJbnB1dCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHk9ZmFsc2U7fQplbHNle2dldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTt9CmFkZFRpbWVUb0FycmF5RnJvbVRva2VuKHRva2VuLHBhcnNlZElucHV0LGNvbmZpZyk7fQplbHNlIGlmKGNvbmZpZy5fc3RyaWN0JiYhcGFyc2VkSW5wdXQpe2dldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTt9fQpnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5jaGFyc0xlZnRPdmVyPXN0cmluZ0xlbmd0aC10b3RhbFBhcnNlZElucHV0TGVuZ3RoO2lmKHN0cmluZy5sZW5ndGg+MCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChzdHJpbmcpO30KaWYoY29uZmlnLl9hW0hPVVJdPD0xMiYmZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91cj09PXRydWUmJmNvbmZpZy5fYVtIT1VSXT4wKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPXVuZGVmaW5lZDt9CmdldFBhcnNpbmdGbGFncyhjb25maWcpLnBhcnNlZERhdGVQYXJ0cz1jb25maWcuX2Euc2xpY2UoMCk7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykubWVyaWRpZW09Y29uZmlnLl9tZXJpZGllbTtjb25maWcuX2FbSE9VUl09bWVyaWRpZW1GaXhXcmFwKGNvbmZpZy5fbG9jYWxlLGNvbmZpZy5fYVtIT1VSXSxjb25maWcuX21lcmlkaWVtKTtjb25maWdGcm9tQXJyYXkoY29uZmlnKTtjaGVja092ZXJmbG93KGNvbmZpZyk7fQpmdW5jdGlvbiBtZXJpZGllbUZpeFdyYXAobG9jYWxlLGhvdXIsbWVyaWRpZW0pe3ZhciBpc1BtO2lmKG1lcmlkaWVtPT1udWxsKXtyZXR1cm4gaG91cjt9CmlmKGxvY2FsZS5tZXJpZGllbUhvdXIhPW51bGwpe3JldHVybiBsb2NhbGUubWVyaWRpZW1Ib3VyKGhvdXIsbWVyaWRpZW0pO31lbHNlIGlmKGxvY2FsZS5pc1BNIT1udWxsKXtpc1BtPWxvY2FsZS5pc1BNKG1lcmlkaWVtKTtpZihpc1BtJiZob3VyPDEyKXtob3VyKz0xMjt9CmlmKCFpc1BtJiZob3VyPT09MTIpe2hvdXI9MDt9CnJldHVybiBob3VyO31lbHNle3JldHVybiBob3VyO319CmZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRBcnJheShjb25maWcpe3ZhciB0ZW1wQ29uZmlnLGJlc3RNb21lbnQsc2NvcmVUb0JlYXQsaSxjdXJyZW50U2NvcmU7aWYoY29uZmlnLl9mLmxlbmd0aD09PTApe2dldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRGb3JtYXQ9dHJ1ZTtjb25maWcuX2Q9bmV3IERhdGUoTmFOKTtyZXR1cm47fQpmb3IoaT0wO2k8Y29uZmlnLl9mLmxlbmd0aDtpKyspe2N1cnJlbnRTY29yZT0wO3RlbXBDb25maWc9Y29weUNvbmZpZyh7fSxjb25maWcpO2lmKGNvbmZpZy5fdXNlVVRDIT1udWxsKXt0ZW1wQ29uZmlnLl91c2VVVEM9Y29uZmlnLl91c2VVVEM7fQp0ZW1wQ29uZmlnLl9mPWNvbmZpZy5fZltpXTtjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KHRlbXBDb25maWcpO2lmKCFpc1ZhbGlkKHRlbXBDb25maWcpKXtjb250aW51ZTt9CmN1cnJlbnRTY29yZSs9Z2V0UGFyc2luZ0ZsYWdzKHRlbXBDb25maWcpLmNoYXJzTGVmdE92ZXI7Y3VycmVudFNjb3JlKz1nZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykudW51c2VkVG9rZW5zLmxlbmd0aCoxMDtnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuc2NvcmU9Y3VycmVudFNjb3JlO2lmKHNjb3JlVG9CZWF0PT1udWxsfHxjdXJyZW50U2NvcmU8c2NvcmVUb0JlYXQpe3Njb3JlVG9CZWF0PWN1cnJlbnRTY29yZTtiZXN0TW9tZW50PXRlbXBDb25maWc7fX0KZXh0ZW5kKGNvbmZpZyxiZXN0TW9tZW50fHx0ZW1wQ29uZmlnKTt9CmZ1bmN0aW9uIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKXtpZihjb25maWcuX2Qpe3JldHVybjt9CnZhciBpPW5vcm1hbGl6ZU9iamVjdFVuaXRzKGNvbmZpZy5faSk7Y29uZmlnLl9hPW1hcChbaS55ZWFyLGkubW9udGgsaS5kYXl8fGkuZGF0ZSxpLmhvdXIsaS5taW51dGUsaS5zZWNvbmQsaS5taWxsaXNlY29uZF0sZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZwYXJzZUludChvYmosMTApO30pO2NvbmZpZ0Zyb21BcnJheShjb25maWcpO30KZnVuY3Rpb24gY3JlYXRlRnJvbUNvbmZpZyhjb25maWcpe3ZhciByZXM9bmV3IE1vbWVudChjaGVja092ZXJmbG93KHByZXBhcmVDb25maWcoY29uZmlnKSkpO2lmKHJlcy5fbmV4dERheSl7cmVzLmFkZCgxLCdkJyk7cmVzLl9uZXh0RGF5PXVuZGVmaW5lZDt9CnJldHVybiByZXM7fQpmdW5jdGlvbiBwcmVwYXJlQ29uZmlnKGNvbmZpZyl7dmFyIGlucHV0PWNvbmZpZy5faSxmb3JtYXQ9Y29uZmlnLl9mO2NvbmZpZy5fbG9jYWxlPWNvbmZpZy5fbG9jYWxlfHxnZXRMb2NhbGUoY29uZmlnLl9sKTtpZihpbnB1dD09PW51bGx8fChmb3JtYXQ9PT11bmRlZmluZWQmJmlucHV0PT09JycpKXtyZXR1cm4gY3JlYXRlSW52YWxpZCh7bnVsbElucHV0OnRydWV9KTt9CmlmKHR5cGVvZiBpbnB1dD09PSdzdHJpbmcnKXtjb25maWcuX2k9aW5wdXQ9Y29uZmlnLl9sb2NhbGUucHJlcGFyc2UoaW5wdXQpO30KaWYoaXNNb21lbnQoaW5wdXQpKXtyZXR1cm4gbmV3IE1vbWVudChjaGVja092ZXJmbG93KGlucHV0KSk7fWVsc2UgaWYoaXNEYXRlKGlucHV0KSl7Y29uZmlnLl9kPWlucHV0O31lbHNlIGlmKGlzQXJyYXkoZm9ybWF0KSl7Y29uZmlnRnJvbVN0cmluZ0FuZEFycmF5KGNvbmZpZyk7fWVsc2UgaWYoZm9ybWF0KXtjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7fWVsc2V7Y29uZmlnRnJvbUlucHV0KGNvbmZpZyk7fQppZighaXNWYWxpZChjb25maWcpKXtjb25maWcuX2Q9bnVsbDt9CnJldHVybiBjb25maWc7fQpmdW5jdGlvbiBjb25maWdGcm9tSW5wdXQoY29uZmlnKXt2YXIgaW5wdXQ9Y29uZmlnLl9pO2lmKGlucHV0PT09dW5kZWZpbmVkKXtjb25maWcuX2Q9bmV3IERhdGUoaG9va3Mubm93KCkpO31lbHNlIGlmKGlzRGF0ZShpbnB1dCkpe2NvbmZpZy5fZD1uZXcgRGF0ZShpbnB1dC52YWx1ZU9mKCkpO31lbHNlIGlmKHR5cGVvZiBpbnB1dD09PSdzdHJpbmcnKXtjb25maWdGcm9tU3RyaW5nKGNvbmZpZyk7fWVsc2UgaWYoaXNBcnJheShpbnB1dCkpe2NvbmZpZy5fYT1tYXAoaW5wdXQuc2xpY2UoMCksZnVuY3Rpb24ob2JqKXtyZXR1cm4gcGFyc2VJbnQob2JqLDEwKTt9KTtjb25maWdGcm9tQXJyYXkoY29uZmlnKTt9ZWxzZSBpZih0eXBlb2YoaW5wdXQpPT09J29iamVjdCcpe2NvbmZpZ0Zyb21PYmplY3QoY29uZmlnKTt9ZWxzZSBpZihpc051bWJlcihpbnB1dCkpe2NvbmZpZy5fZD1uZXcgRGF0ZShpbnB1dCk7fWVsc2V7aG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKTt9fQpmdW5jdGlvbiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0LGlzVVRDKXt2YXIgYz17fTtpZihsb2NhbGU9PT10cnVlfHxsb2NhbGU9PT1mYWxzZSl7c3RyaWN0PWxvY2FsZTtsb2NhbGU9dW5kZWZpbmVkO30KaWYoKGlzT2JqZWN0KGlucHV0KSYmaXNPYmplY3RFbXB0eShpbnB1dCkpfHwoaXNBcnJheShpbnB1dCkmJmlucHV0Lmxlbmd0aD09PTApKXtpbnB1dD11bmRlZmluZWQ7fQpjLl9pc0FNb21lbnRPYmplY3Q9dHJ1ZTtjLl91c2VVVEM9Yy5faXNVVEM9aXNVVEM7Yy5fbD1sb2NhbGU7Yy5faT1pbnB1dDtjLl9mPWZvcm1hdDtjLl9zdHJpY3Q9c3RyaWN0O3JldHVybiBjcmVhdGVGcm9tQ29uZmlnKGMpO30KZnVuY3Rpb24gY3JlYXRlTG9jYWwoaW5wdXQsZm9ybWF0LGxvY2FsZSxzdHJpY3Qpe3JldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0LGZhbHNlKTt9CnZhciBwcm90b3R5cGVNaW49ZGVwcmVjYXRlKCdtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4LycsZnVuY3Rpb24oKXt2YXIgb3RoZXI9Y3JlYXRlTG9jYWwuYXBwbHkobnVsbCxhcmd1bWVudHMpO2lmKHRoaXMuaXNWYWxpZCgpJiZvdGhlci5pc1ZhbGlkKCkpe3JldHVybiBvdGhlcjx0aGlzP3RoaXM6b3RoZXI7fWVsc2V7cmV0dXJuIGNyZWF0ZUludmFsaWQoKTt9fSk7dmFyIHByb3RvdHlwZU1heD1kZXByZWNhdGUoJ21vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1pbiBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvJyxmdW5jdGlvbigpe3ZhciBvdGhlcj1jcmVhdGVMb2NhbC5hcHBseShudWxsLGFyZ3VtZW50cyk7aWYodGhpcy5pc1ZhbGlkKCkmJm90aGVyLmlzVmFsaWQoKSl7cmV0dXJuIG90aGVyPnRoaXM/dGhpczpvdGhlcjt9ZWxzZXtyZXR1cm4gY3JlYXRlSW52YWxpZCgpO319KTtmdW5jdGlvbiBwaWNrQnkoZm4sbW9tZW50cyl7dmFyIHJlcyxpO2lmKG1vbWVudHMubGVuZ3RoPT09MSYmaXNBcnJheShtb21lbnRzWzBdKSl7bW9tZW50cz1tb21lbnRzWzBdO30KaWYoIW1vbWVudHMubGVuZ3RoKXtyZXR1cm4gY3JlYXRlTG9jYWwoKTt9CnJlcz1tb21lbnRzWzBdO2ZvcihpPTE7aTxtb21lbnRzLmxlbmd0aDsrK2kpe2lmKCFtb21lbnRzW2ldLmlzVmFsaWQoKXx8bW9tZW50c1tpXVtmbl0ocmVzKSl7cmVzPW1vbWVudHNbaV07fX0KcmV0dXJuIHJlczt9CmZ1bmN0aW9uIG1pbigpe3ZhciBhcmdzPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBwaWNrQnkoJ2lzQmVmb3JlJyxhcmdzKTt9CmZ1bmN0aW9uIG1heCgpe3ZhciBhcmdzPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBwaWNrQnkoJ2lzQWZ0ZXInLGFyZ3MpO30KdmFyIG5vdz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdz9EYXRlLm5vdygpOisobmV3IERhdGUoKSk7fTtmdW5jdGlvbiBEdXJhdGlvbihkdXJhdGlvbil7dmFyIG5vcm1hbGl6ZWRJbnB1dD1ub3JtYWxpemVPYmplY3RVbml0cyhkdXJhdGlvbikseWVhcnM9bm9ybWFsaXplZElucHV0LnllYXJ8fDAscXVhcnRlcnM9bm9ybWFsaXplZElucHV0LnF1YXJ0ZXJ8fDAsbW9udGhzPW5vcm1hbGl6ZWRJbnB1dC5tb250aHx8MCx3ZWVrcz1ub3JtYWxpemVkSW5wdXQud2Vla3x8MCxkYXlzPW5vcm1hbGl6ZWRJbnB1dC5kYXl8fDAsaG91cnM9bm9ybWFsaXplZElucHV0LmhvdXJ8fDAsbWludXRlcz1ub3JtYWxpemVkSW5wdXQubWludXRlfHwwLHNlY29uZHM9bm9ybWFsaXplZElucHV0LnNlY29uZHx8MCxtaWxsaXNlY29uZHM9bm9ybWFsaXplZElucHV0Lm1pbGxpc2Vjb25kfHwwO3RoaXMuX21pbGxpc2Vjb25kcz0rbWlsbGlzZWNvbmRzKwpzZWNvbmRzKjFlMysKbWludXRlcyo2ZTQrCmhvdXJzKjEwMDAqNjAqNjA7dGhpcy5fZGF5cz0rZGF5cysKd2Vla3MqNzt0aGlzLl9tb250aHM9K21vbnRocysKcXVhcnRlcnMqMysKeWVhcnMqMTI7dGhpcy5fZGF0YT17fTt0aGlzLl9sb2NhbGU9Z2V0TG9jYWxlKCk7dGhpcy5fYnViYmxlKCk7fQpmdW5jdGlvbiBpc0R1cmF0aW9uKG9iail7cmV0dXJuIG9iaiBpbnN0YW5jZW9mIER1cmF0aW9uO30KZnVuY3Rpb24gYWJzUm91bmQobnVtYmVyKXtpZihudW1iZXI8MCl7cmV0dXJuIE1hdGgucm91bmQoLTEqbnVtYmVyKSotMTt9ZWxzZXtyZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO319CmZ1bmN0aW9uIG9mZnNldCh0b2tlbixzZXBhcmF0b3Ipe2FkZEZvcm1hdFRva2VuKHRva2VuLDAsMCxmdW5jdGlvbigpe3ZhciBvZmZzZXQ9dGhpcy51dGNPZmZzZXQoKTt2YXIgc2lnbj0nKyc7aWYob2Zmc2V0PDApe29mZnNldD0tb2Zmc2V0O3NpZ249Jy0nO30KcmV0dXJuIHNpZ24remVyb0ZpbGwofn4ob2Zmc2V0LzYwKSwyKStzZXBhcmF0b3IremVyb0ZpbGwofn4ob2Zmc2V0KSU2MCwyKTt9KTt9Cm9mZnNldCgnWicsJzonKTtvZmZzZXQoJ1paJywnJyk7YWRkUmVnZXhUb2tlbignWicsbWF0Y2hTaG9ydE9mZnNldCk7YWRkUmVnZXhUb2tlbignWlonLG1hdGNoU2hvcnRPZmZzZXQpO2FkZFBhcnNlVG9rZW4oWydaJywnWlonXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe2NvbmZpZy5fdXNlVVRDPXRydWU7Y29uZmlnLl90em09b2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LGlucHV0KTt9KTt2YXIgY2h1bmtPZmZzZXQ9LyhbXCtcLV18XGRcZCkvZ2k7ZnVuY3Rpb24gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaGVyLHN0cmluZyl7dmFyIG1hdGNoZXM9KHN0cmluZ3x8JycpLm1hdGNoKG1hdGNoZXIpO2lmKG1hdGNoZXM9PT1udWxsKXtyZXR1cm4gbnVsbDt9CnZhciBjaHVuaz1tYXRjaGVzW21hdGNoZXMubGVuZ3RoLTFdfHxbXTt2YXIgcGFydHM9KGNodW5rKycnKS5tYXRjaChjaHVua09mZnNldCl8fFsnLScsMCwwXTt2YXIgbWludXRlcz0rKHBhcnRzWzFdKjYwKSt0b0ludChwYXJ0c1syXSk7cmV0dXJuIG1pbnV0ZXM9PT0wPzA6cGFydHNbMF09PT0nKyc/bWludXRlczotbWludXRlczt9CmZ1bmN0aW9uIGNsb25lV2l0aE9mZnNldChpbnB1dCxtb2RlbCl7dmFyIHJlcyxkaWZmO2lmKG1vZGVsLl9pc1VUQyl7cmVzPW1vZGVsLmNsb25lKCk7ZGlmZj0oaXNNb21lbnQoaW5wdXQpfHxpc0RhdGUoaW5wdXQpP2lucHV0LnZhbHVlT2YoKTpjcmVhdGVMb2NhbChpbnB1dCkudmFsdWVPZigpKS1yZXMudmFsdWVPZigpO3Jlcy5fZC5zZXRUaW1lKHJlcy5fZC52YWx1ZU9mKCkrZGlmZik7aG9va3MudXBkYXRlT2Zmc2V0KHJlcyxmYWxzZSk7cmV0dXJuIHJlczt9ZWxzZXtyZXR1cm4gY3JlYXRlTG9jYWwoaW5wdXQpLmxvY2FsKCk7fX0KZnVuY3Rpb24gZ2V0RGF0ZU9mZnNldChtKXtyZXR1cm4tTWF0aC5yb3VuZChtLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkvMTUpKjE1O30KaG9va3MudXBkYXRlT2Zmc2V0PWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBnZXRTZXRPZmZzZXQoaW5wdXQsa2VlcExvY2FsVGltZSl7dmFyIG9mZnNldD10aGlzLl9vZmZzZXR8fDAsbG9jYWxBZGp1c3Q7aWYoIXRoaXMuaXNWYWxpZCgpKXtyZXR1cm4gaW5wdXQhPW51bGw/dGhpczpOYU47fQppZihpbnB1dCE9bnVsbCl7aWYodHlwZW9mIGlucHV0PT09J3N0cmluZycpe2lucHV0PW9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCxpbnB1dCk7aWYoaW5wdXQ9PT1udWxsKXtyZXR1cm4gdGhpczt9fWVsc2UgaWYoTWF0aC5hYnMoaW5wdXQpPDE2KXtpbnB1dD1pbnB1dCo2MDt9CmlmKCF0aGlzLl9pc1VUQyYma2VlcExvY2FsVGltZSl7bG9jYWxBZGp1c3Q9Z2V0RGF0ZU9mZnNldCh0aGlzKTt9CnRoaXMuX29mZnNldD1pbnB1dDt0aGlzLl9pc1VUQz10cnVlO2lmKGxvY2FsQWRqdXN0IT1udWxsKXt0aGlzLmFkZChsb2NhbEFkanVzdCwnbScpO30KaWYob2Zmc2V0IT09aW5wdXQpe2lmKCFrZWVwTG9jYWxUaW1lfHx0aGlzLl9jaGFuZ2VJblByb2dyZXNzKXthZGRTdWJ0cmFjdCh0aGlzLGNyZWF0ZUR1cmF0aW9uKGlucHV0LW9mZnNldCwnbScpLDEsZmFsc2UpO31lbHNlIGlmKCF0aGlzLl9jaGFuZ2VJblByb2dyZXNzKXt0aGlzLl9jaGFuZ2VJblByb2dyZXNzPXRydWU7aG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsdHJ1ZSk7dGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsO319CnJldHVybiB0aGlzO31lbHNle3JldHVybiB0aGlzLl9pc1VUQz9vZmZzZXQ6Z2V0RGF0ZU9mZnNldCh0aGlzKTt9fQpmdW5jdGlvbiBnZXRTZXRab25lKGlucHV0LGtlZXBMb2NhbFRpbWUpe2lmKGlucHV0IT1udWxsKXtpZih0eXBlb2YgaW5wdXQhPT0nc3RyaW5nJyl7aW5wdXQ9LWlucHV0O30KdGhpcy51dGNPZmZzZXQoaW5wdXQsa2VlcExvY2FsVGltZSk7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuLXRoaXMudXRjT2Zmc2V0KCk7fX0KZnVuY3Rpb24gc2V0T2Zmc2V0VG9VVEMoa2VlcExvY2FsVGltZSl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsa2VlcExvY2FsVGltZSk7fQpmdW5jdGlvbiBzZXRPZmZzZXRUb0xvY2FsKGtlZXBMb2NhbFRpbWUpe2lmKHRoaXMuX2lzVVRDKXt0aGlzLnV0Y09mZnNldCgwLGtlZXBMb2NhbFRpbWUpO3RoaXMuX2lzVVRDPWZhbHNlO2lmKGtlZXBMb2NhbFRpbWUpe3RoaXMuc3VidHJhY3QoZ2V0RGF0ZU9mZnNldCh0aGlzKSwnbScpO319CnJldHVybiB0aGlzO30KZnVuY3Rpb24gc2V0T2Zmc2V0VG9QYXJzZWRPZmZzZXQoKXtpZih0aGlzLl90em0hPW51bGwpe3RoaXMudXRjT2Zmc2V0KHRoaXMuX3R6bSk7fWVsc2UgaWYodHlwZW9mIHRoaXMuX2k9PT0nc3RyaW5nJyl7dmFyIHRab25lPW9mZnNldEZyb21TdHJpbmcobWF0Y2hPZmZzZXQsdGhpcy5faSk7aWYodFpvbmUhPW51bGwpe3RoaXMudXRjT2Zmc2V0KHRab25lKTt9CmVsc2V7dGhpcy51dGNPZmZzZXQoMCx0cnVlKTt9fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGhhc0FsaWduZWRIb3VyT2Zmc2V0KGlucHV0KXtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybiBmYWxzZTt9CmlucHV0PWlucHV0P2NyZWF0ZUxvY2FsKGlucHV0KS51dGNPZmZzZXQoKTowO3JldHVybih0aGlzLnV0Y09mZnNldCgpLWlucHV0KSU2MD09PTA7fQpmdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZSgpe3JldHVybih0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCgwKS51dGNPZmZzZXQoKXx8dGhpcy51dGNPZmZzZXQoKT50aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KCkpO30KZnVuY3Rpb24gaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkKCl7aWYoIWlzVW5kZWZpbmVkKHRoaXMuX2lzRFNUU2hpZnRlZCkpe3JldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7fQp2YXIgYz17fTtjb3B5Q29uZmlnKGMsdGhpcyk7Yz1wcmVwYXJlQ29uZmlnKGMpO2lmKGMuX2Epe3ZhciBvdGhlcj1jLl9pc1VUQz9jcmVhdGVVVEMoYy5fYSk6Y3JlYXRlTG9jYWwoYy5fYSk7dGhpcy5faXNEU1RTaGlmdGVkPXRoaXMuaXNWYWxpZCgpJiZjb21wYXJlQXJyYXlzKGMuX2Esb3RoZXIudG9BcnJheSgpKT4wO31lbHNle3RoaXMuX2lzRFNUU2hpZnRlZD1mYWxzZTt9CnJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7fQpmdW5jdGlvbiBpc0xvY2FsKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpPyF0aGlzLl9pc1VUQzpmYWxzZTt9CmZ1bmN0aW9uIGlzVXRjT2Zmc2V0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2lzVVRDOmZhbHNlO30KZnVuY3Rpb24gaXNVdGMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy5faXNVVEMmJnRoaXMuX29mZnNldD09PTA6ZmFsc2U7fQp2YXIgYXNwTmV0UmVnZXg9L14oXC0pPyg/OihcZCopWy4gXSk/KFxkKylcOihcZCspKD86XDooXGQrKShcLlxkKik/KT8kLzt2YXIgaXNvUmVnZXg9L14oLSk/UCg/OigtP1swLTksLl0qKVkpPyg/OigtP1swLTksLl0qKU0pPyg/OigtP1swLTksLl0qKVcpPyg/OigtP1swLTksLl0qKUQpPyg/OlQoPzooLT9bMC05LC5dKilIKT8oPzooLT9bMC05LC5dKilNKT8oPzooLT9bMC05LC5dKilTKT8pPyQvO2Z1bmN0aW9uIGNyZWF0ZUR1cmF0aW9uKGlucHV0LGtleSl7dmFyIGR1cmF0aW9uPWlucHV0LG1hdGNoPW51bGwsc2lnbixyZXQsZGlmZlJlcztpZihpc0R1cmF0aW9uKGlucHV0KSl7ZHVyYXRpb249e21zOmlucHV0Ll9taWxsaXNlY29uZHMsZDppbnB1dC5fZGF5cyxNOmlucHV0Ll9tb250aHN9O31lbHNlIGlmKGlzTnVtYmVyKGlucHV0KSl7ZHVyYXRpb249e307aWYoa2V5KXtkdXJhdGlvbltrZXldPWlucHV0O31lbHNle2R1cmF0aW9uLm1pbGxpc2Vjb25kcz1pbnB1dDt9fWVsc2UgaWYoISEobWF0Y2g9YXNwTmV0UmVnZXguZXhlYyhpbnB1dCkpKXtzaWduPShtYXRjaFsxXT09PSctJyk/LTE6MTtkdXJhdGlvbj17eTowLGQ6dG9JbnQobWF0Y2hbREFURV0pKnNpZ24saDp0b0ludChtYXRjaFtIT1VSXSkqc2lnbixtOnRvSW50KG1hdGNoW01JTlVURV0pKnNpZ24sczp0b0ludChtYXRjaFtTRUNPTkRdKSpzaWduLG1zOnRvSW50KGFic1JvdW5kKG1hdGNoW01JTExJU0VDT05EXSoxMDAwKSkqc2lnbn07fWVsc2UgaWYoISEobWF0Y2g9aXNvUmVnZXguZXhlYyhpbnB1dCkpKXtzaWduPShtYXRjaFsxXT09PSctJyk/LTE6MTtkdXJhdGlvbj17eTpwYXJzZUlzbyhtYXRjaFsyXSxzaWduKSxNOnBhcnNlSXNvKG1hdGNoWzNdLHNpZ24pLHc6cGFyc2VJc28obWF0Y2hbNF0sc2lnbiksZDpwYXJzZUlzbyhtYXRjaFs1XSxzaWduKSxoOnBhcnNlSXNvKG1hdGNoWzZdLHNpZ24pLG06cGFyc2VJc28obWF0Y2hbN10sc2lnbiksczpwYXJzZUlzbyhtYXRjaFs4XSxzaWduKX07fWVsc2UgaWYoZHVyYXRpb249PW51bGwpe2R1cmF0aW9uPXt9O31lbHNlIGlmKHR5cGVvZiBkdXJhdGlvbj09PSdvYmplY3QnJiYoJ2Zyb20naW4gZHVyYXRpb258fCd0bydpbiBkdXJhdGlvbikpe2RpZmZSZXM9bW9tZW50c0RpZmZlcmVuY2UoY3JlYXRlTG9jYWwoZHVyYXRpb24uZnJvbSksY3JlYXRlTG9jYWwoZHVyYXRpb24udG8pKTtkdXJhdGlvbj17fTtkdXJhdGlvbi5tcz1kaWZmUmVzLm1pbGxpc2Vjb25kcztkdXJhdGlvbi5NPWRpZmZSZXMubW9udGhzO30KcmV0PW5ldyBEdXJhdGlvbihkdXJhdGlvbik7aWYoaXNEdXJhdGlvbihpbnB1dCkmJmhhc093blByb3AoaW5wdXQsJ19sb2NhbGUnKSl7cmV0Ll9sb2NhbGU9aW5wdXQuX2xvY2FsZTt9CnJldHVybiByZXQ7fQpjcmVhdGVEdXJhdGlvbi5mbj1EdXJhdGlvbi5wcm90b3R5cGU7ZnVuY3Rpb24gcGFyc2VJc28oaW5wLHNpZ24pe3ZhciByZXM9aW5wJiZwYXJzZUZsb2F0KGlucC5yZXBsYWNlKCcsJywnLicpKTtyZXR1cm4oaXNOYU4ocmVzKT8wOnJlcykqc2lnbjt9CmZ1bmN0aW9uIHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSxvdGhlcil7dmFyIHJlcz17bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9O3Jlcy5tb250aHM9b3RoZXIubW9udGgoKS1iYXNlLm1vbnRoKCkrCihvdGhlci55ZWFyKCktYmFzZS55ZWFyKCkpKjEyO2lmKGJhc2UuY2xvbmUoKS5hZGQocmVzLm1vbnRocywnTScpLmlzQWZ0ZXIob3RoZXIpKXstLXJlcy5tb250aHM7fQpyZXMubWlsbGlzZWNvbmRzPStvdGhlci0rKGJhc2UuY2xvbmUoKS5hZGQocmVzLm1vbnRocywnTScpKTtyZXR1cm4gcmVzO30KZnVuY3Rpb24gbW9tZW50c0RpZmZlcmVuY2UoYmFzZSxvdGhlcil7dmFyIHJlcztpZighKGJhc2UuaXNWYWxpZCgpJiZvdGhlci5pc1ZhbGlkKCkpKXtyZXR1cm57bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9O30Kb3RoZXI9Y2xvbmVXaXRoT2Zmc2V0KG90aGVyLGJhc2UpO2lmKGJhc2UuaXNCZWZvcmUob3RoZXIpKXtyZXM9cG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLG90aGVyKTt9ZWxzZXtyZXM9cG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShvdGhlcixiYXNlKTtyZXMubWlsbGlzZWNvbmRzPS1yZXMubWlsbGlzZWNvbmRzO3Jlcy5tb250aHM9LXJlcy5tb250aHM7fQpyZXR1cm4gcmVzO30KZnVuY3Rpb24gY3JlYXRlQWRkZXIoZGlyZWN0aW9uLG5hbWUpe3JldHVybiBmdW5jdGlvbih2YWwscGVyaW9kKXt2YXIgZHVyLHRtcDtpZihwZXJpb2QhPT1udWxsJiYhaXNOYU4oK3BlcmlvZCkpe2RlcHJlY2F0ZVNpbXBsZShuYW1lLCdtb21lbnQoKS4nK25hbWUrJyhwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4nK25hbWUrJyhudW1iZXIsIHBlcmlvZCkuICcrJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2FkZC1pbnZlcnRlZC1wYXJhbS8gZm9yIG1vcmUgaW5mby4nKTt0bXA9dmFsO3ZhbD1wZXJpb2Q7cGVyaW9kPXRtcDt9CnZhbD10eXBlb2YgdmFsPT09J3N0cmluZyc/K3ZhbDp2YWw7ZHVyPWNyZWF0ZUR1cmF0aW9uKHZhbCxwZXJpb2QpO2FkZFN1YnRyYWN0KHRoaXMsZHVyLGRpcmVjdGlvbik7cmV0dXJuIHRoaXM7fTt9CmZ1bmN0aW9uIGFkZFN1YnRyYWN0KG1vbSxkdXJhdGlvbixpc0FkZGluZyx1cGRhdGVPZmZzZXQpe3ZhciBtaWxsaXNlY29uZHM9ZHVyYXRpb24uX21pbGxpc2Vjb25kcyxkYXlzPWFic1JvdW5kKGR1cmF0aW9uLl9kYXlzKSxtb250aHM9YWJzUm91bmQoZHVyYXRpb24uX21vbnRocyk7aWYoIW1vbS5pc1ZhbGlkKCkpe3JldHVybjt9CnVwZGF0ZU9mZnNldD11cGRhdGVPZmZzZXQ9PW51bGw/dHJ1ZTp1cGRhdGVPZmZzZXQ7aWYobWlsbGlzZWNvbmRzKXttb20uX2Quc2V0VGltZShtb20uX2QudmFsdWVPZigpK21pbGxpc2Vjb25kcyppc0FkZGluZyk7fQppZihkYXlzKXtzZXQkMShtb20sJ0RhdGUnLGdldChtb20sJ0RhdGUnKStkYXlzKmlzQWRkaW5nKTt9CmlmKG1vbnRocyl7c2V0TW9udGgobW9tLGdldChtb20sJ01vbnRoJykrbW9udGhzKmlzQWRkaW5nKTt9CmlmKHVwZGF0ZU9mZnNldCl7aG9va3MudXBkYXRlT2Zmc2V0KG1vbSxkYXlzfHxtb250aHMpO319CnZhciBhZGQ9Y3JlYXRlQWRkZXIoMSwnYWRkJyk7dmFyIHN1YnRyYWN0PWNyZWF0ZUFkZGVyKC0xLCdzdWJ0cmFjdCcpO2Z1bmN0aW9uIGdldENhbGVuZGFyRm9ybWF0KG15TW9tZW50LG5vdyl7dmFyIGRpZmY9bXlNb21lbnQuZGlmZihub3csJ2RheXMnLHRydWUpO3JldHVybiBkaWZmPC02PydzYW1lRWxzZSc6ZGlmZjwtMT8nbGFzdFdlZWsnOmRpZmY8MD8nbGFzdERheSc6ZGlmZjwxPydzYW1lRGF5JzpkaWZmPDI/J25leHREYXknOmRpZmY8Nz8nbmV4dFdlZWsnOidzYW1lRWxzZSc7fQpmdW5jdGlvbiBjYWxlbmRhciQxKHRpbWUsZm9ybWF0cyl7dmFyIG5vdz10aW1lfHxjcmVhdGVMb2NhbCgpLHNvZD1jbG9uZVdpdGhPZmZzZXQobm93LHRoaXMpLnN0YXJ0T2YoJ2RheScpLGZvcm1hdD1ob29rcy5jYWxlbmRhckZvcm1hdCh0aGlzLHNvZCl8fCdzYW1lRWxzZSc7dmFyIG91dHB1dD1mb3JtYXRzJiYoaXNGdW5jdGlvbihmb3JtYXRzW2Zvcm1hdF0pP2Zvcm1hdHNbZm9ybWF0XS5jYWxsKHRoaXMsbm93KTpmb3JtYXRzW2Zvcm1hdF0pO3JldHVybiB0aGlzLmZvcm1hdChvdXRwdXR8fHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGZvcm1hdCx0aGlzLGNyZWF0ZUxvY2FsKG5vdykpKTt9CmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyBNb21lbnQodGhpcyk7fQpmdW5jdGlvbiBpc0FmdGVyKGlucHV0LHVuaXRzKXt2YXIgbG9jYWxJbnB1dD1pc01vbWVudChpbnB1dCk/aW5wdXQ6Y3JlYXRlTG9jYWwoaW5wdXQpO2lmKCEodGhpcy5pc1ZhbGlkKCkmJmxvY2FsSW5wdXQuaXNWYWxpZCgpKSl7cmV0dXJuIGZhbHNlO30KdW5pdHM9bm9ybWFsaXplVW5pdHMoIWlzVW5kZWZpbmVkKHVuaXRzKT91bml0czonbWlsbGlzZWNvbmQnKTtpZih1bml0cz09PSdtaWxsaXNlY29uZCcpe3JldHVybiB0aGlzLnZhbHVlT2YoKT5sb2NhbElucHV0LnZhbHVlT2YoKTt9ZWxzZXtyZXR1cm4gbG9jYWxJbnB1dC52YWx1ZU9mKCk8dGhpcy5jbG9uZSgpLnN0YXJ0T2YodW5pdHMpLnZhbHVlT2YoKTt9fQpmdW5jdGlvbiBpc0JlZm9yZShpbnB1dCx1bml0cyl7dmFyIGxvY2FsSW5wdXQ9aXNNb21lbnQoaW5wdXQpP2lucHV0OmNyZWF0ZUxvY2FsKGlucHV0KTtpZighKHRoaXMuaXNWYWxpZCgpJiZsb2NhbElucHV0LmlzVmFsaWQoKSkpe3JldHVybiBmYWxzZTt9CnVuaXRzPW5vcm1hbGl6ZVVuaXRzKCFpc1VuZGVmaW5lZCh1bml0cyk/dW5pdHM6J21pbGxpc2Vjb25kJyk7aWYodW5pdHM9PT0nbWlsbGlzZWNvbmQnKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCk8bG9jYWxJbnB1dC52YWx1ZU9mKCk7fWVsc2V7cmV0dXJuIHRoaXMuY2xvbmUoKS5lbmRPZih1bml0cykudmFsdWVPZigpPGxvY2FsSW5wdXQudmFsdWVPZigpO319CmZ1bmN0aW9uIGlzQmV0d2Vlbihmcm9tLHRvLHVuaXRzLGluY2x1c2l2aXR5KXtpbmNsdXNpdml0eT1pbmNsdXNpdml0eXx8JygpJztyZXR1cm4oaW5jbHVzaXZpdHlbMF09PT0nKCc/dGhpcy5pc0FmdGVyKGZyb20sdW5pdHMpOiF0aGlzLmlzQmVmb3JlKGZyb20sdW5pdHMpKSYmKGluY2x1c2l2aXR5WzFdPT09JyknP3RoaXMuaXNCZWZvcmUodG8sdW5pdHMpOiF0aGlzLmlzQWZ0ZXIodG8sdW5pdHMpKTt9CmZ1bmN0aW9uIGlzU2FtZShpbnB1dCx1bml0cyl7dmFyIGxvY2FsSW5wdXQ9aXNNb21lbnQoaW5wdXQpP2lucHV0OmNyZWF0ZUxvY2FsKGlucHV0KSxpbnB1dE1zO2lmKCEodGhpcy5pc1ZhbGlkKCkmJmxvY2FsSW5wdXQuaXNWYWxpZCgpKSl7cmV0dXJuIGZhbHNlO30KdW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHN8fCdtaWxsaXNlY29uZCcpO2lmKHVuaXRzPT09J21pbGxpc2Vjb25kJyl7cmV0dXJuIHRoaXMudmFsdWVPZigpPT09bG9jYWxJbnB1dC52YWx1ZU9mKCk7fWVsc2V7aW5wdXRNcz1sb2NhbElucHV0LnZhbHVlT2YoKTtyZXR1cm4gdGhpcy5jbG9uZSgpLnN0YXJ0T2YodW5pdHMpLnZhbHVlT2YoKTw9aW5wdXRNcyYmaW5wdXRNczw9dGhpcy5jbG9uZSgpLmVuZE9mKHVuaXRzKS52YWx1ZU9mKCk7fX0KZnVuY3Rpb24gaXNTYW1lT3JBZnRlcihpbnB1dCx1bml0cyl7cmV0dXJuIHRoaXMuaXNTYW1lKGlucHV0LHVuaXRzKXx8dGhpcy5pc0FmdGVyKGlucHV0LHVuaXRzKTt9CmZ1bmN0aW9uIGlzU2FtZU9yQmVmb3JlKGlucHV0LHVuaXRzKXtyZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsdW5pdHMpfHx0aGlzLmlzQmVmb3JlKGlucHV0LHVuaXRzKTt9CmZ1bmN0aW9uIGRpZmYoaW5wdXQsdW5pdHMsYXNGbG9hdCl7dmFyIHRoYXQsem9uZURlbHRhLGRlbHRhLG91dHB1dDtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybiBOYU47fQp0aGF0PWNsb25lV2l0aE9mZnNldChpbnB1dCx0aGlzKTtpZighdGhhdC5pc1ZhbGlkKCkpe3JldHVybiBOYU47fQp6b25lRGVsdGE9KHRoYXQudXRjT2Zmc2V0KCktdGhpcy51dGNPZmZzZXQoKSkqNmU0O3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtpZih1bml0cz09PSd5ZWFyJ3x8dW5pdHM9PT0nbW9udGgnfHx1bml0cz09PSdxdWFydGVyJyl7b3V0cHV0PW1vbnRoRGlmZih0aGlzLHRoYXQpO2lmKHVuaXRzPT09J3F1YXJ0ZXInKXtvdXRwdXQ9b3V0cHV0LzM7fWVsc2UgaWYodW5pdHM9PT0neWVhcicpe291dHB1dD1vdXRwdXQvMTI7fX1lbHNle2RlbHRhPXRoaXMtdGhhdDtvdXRwdXQ9dW5pdHM9PT0nc2Vjb25kJz9kZWx0YS8xZTM6dW5pdHM9PT0nbWludXRlJz9kZWx0YS82ZTQ6dW5pdHM9PT0naG91cic/ZGVsdGEvMzZlNTp1bml0cz09PSdkYXknPyhkZWx0YS16b25lRGVsdGEpLzg2NGU1OnVuaXRzPT09J3dlZWsnPyhkZWx0YS16b25lRGVsdGEpLzYwNDhlNTpkZWx0YTt9CnJldHVybiBhc0Zsb2F0P291dHB1dDphYnNGbG9vcihvdXRwdXQpO30KZnVuY3Rpb24gbW9udGhEaWZmKGEsYil7dmFyIHdob2xlTW9udGhEaWZmPSgoYi55ZWFyKCktYS55ZWFyKCkpKjEyKSsoYi5tb250aCgpLWEubW9udGgoKSksYW5jaG9yPWEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYsJ21vbnRocycpLGFuY2hvcjIsYWRqdXN0O2lmKGItYW5jaG9yPDApe2FuY2hvcjI9YS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZi0xLCdtb250aHMnKTthZGp1c3Q9KGItYW5jaG9yKS8oYW5jaG9yLWFuY2hvcjIpO31lbHNle2FuY2hvcjI9YS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZisxLCdtb250aHMnKTthZGp1c3Q9KGItYW5jaG9yKS8oYW5jaG9yMi1hbmNob3IpO30KcmV0dXJuLSh3aG9sZU1vbnRoRGlmZithZGp1c3QpfHwwO30KaG9va3MuZGVmYXVsdEZvcm1hdD0nWVlZWS1NTS1ERFRISDptbTpzc1onO2hvb2tzLmRlZmF1bHRGb3JtYXRVdGM9J1lZWVktTU0tRERUSEg6bW06c3NbWl0nO2Z1bmN0aW9uIHRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoJ2VuJykuZm9ybWF0KCdkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWicpO30KZnVuY3Rpb24gdG9JU09TdHJpbmcoKXt2YXIgbT10aGlzLmNsb25lKCkudXRjKCk7aWYoMDxtLnllYXIoKSYmbS55ZWFyKCk8PTk5OTkpe2lmKGlzRnVuY3Rpb24oRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpKXtyZXR1cm4gdGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpO31lbHNle3JldHVybiBmb3JtYXRNb21lbnQobSwnWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScpO319ZWxzZXtyZXR1cm4gZm9ybWF0TW9tZW50KG0sJ1lZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScpO319CmZ1bmN0aW9uIGluc3BlY3QoKXtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybidtb21lbnQuaW52YWxpZCgvKiAnK3RoaXMuX2krJyAqLyknO30KdmFyIGZ1bmM9J21vbWVudCc7dmFyIHpvbmU9Jyc7aWYoIXRoaXMuaXNMb2NhbCgpKXtmdW5jPXRoaXMudXRjT2Zmc2V0KCk9PT0wPydtb21lbnQudXRjJzonbW9tZW50LnBhcnNlWm9uZSc7em9uZT0nWic7fQp2YXIgcHJlZml4PSdbJytmdW5jKycoIl0nO3ZhciB5ZWFyPSgwPHRoaXMueWVhcigpJiZ0aGlzLnllYXIoKTw9OTk5OSk/J1lZWVknOidZWVlZWVknO3ZhciBkYXRldGltZT0nLU1NLUREW1RdSEg6bW06c3MuU1NTJzt2YXIgc3VmZml4PXpvbmUrJ1siKV0nO3JldHVybiB0aGlzLmZvcm1hdChwcmVmaXgreWVhcitkYXRldGltZStzdWZmaXgpO30KZnVuY3Rpb24gZm9ybWF0KGlucHV0U3RyaW5nKXtpZighaW5wdXRTdHJpbmcpe2lucHV0U3RyaW5nPXRoaXMuaXNVdGMoKT9ob29rcy5kZWZhdWx0Rm9ybWF0VXRjOmhvb2tzLmRlZmF1bHRGb3JtYXQ7fQp2YXIgb3V0cHV0PWZvcm1hdE1vbWVudCh0aGlzLGlucHV0U3RyaW5nKTtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkucG9zdGZvcm1hdChvdXRwdXQpO30KZnVuY3Rpb24gZnJvbSh0aW1lLHdpdGhvdXRTdWZmaXgpe2lmKHRoaXMuaXNWYWxpZCgpJiYoKGlzTW9tZW50KHRpbWUpJiZ0aW1lLmlzVmFsaWQoKSl8fGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpe3JldHVybiBjcmVhdGVEdXJhdGlvbih7dG86dGhpcyxmcm9tOnRpbWV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXdpdGhvdXRTdWZmaXgpO31lbHNle3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO319CmZ1bmN0aW9uIGZyb21Ob3cod2l0aG91dFN1ZmZpeCl7cmV0dXJuIHRoaXMuZnJvbShjcmVhdGVMb2NhbCgpLHdpdGhvdXRTdWZmaXgpO30KZnVuY3Rpb24gdG8odGltZSx3aXRob3V0U3VmZml4KXtpZih0aGlzLmlzVmFsaWQoKSYmKChpc01vbWVudCh0aW1lKSYmdGltZS5pc1ZhbGlkKCkpfHxjcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKXtyZXR1cm4gY3JlYXRlRHVyYXRpb24oe2Zyb206dGhpcyx0bzp0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTt9ZWxzZXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTt9fQpmdW5jdGlvbiB0b05vdyh3aXRob3V0U3VmZml4KXtyZXR1cm4gdGhpcy50byhjcmVhdGVMb2NhbCgpLHdpdGhvdXRTdWZmaXgpO30KZnVuY3Rpb24gbG9jYWxlKGtleSl7dmFyIG5ld0xvY2FsZURhdGE7aWYoa2V5PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fbG9jYWxlLl9hYmJyO31lbHNle25ld0xvY2FsZURhdGE9Z2V0TG9jYWxlKGtleSk7aWYobmV3TG9jYWxlRGF0YSE9bnVsbCl7dGhpcy5fbG9jYWxlPW5ld0xvY2FsZURhdGE7fQpyZXR1cm4gdGhpczt9fQp2YXIgbGFuZz1kZXByZWNhdGUoJ21vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuJyxmdW5jdGlvbihrZXkpe2lmKGtleT09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpO31lbHNle3JldHVybiB0aGlzLmxvY2FsZShrZXkpO319KTtmdW5jdGlvbiBsb2NhbGVEYXRhKCl7cmV0dXJuIHRoaXMuX2xvY2FsZTt9CmZ1bmN0aW9uIHN0YXJ0T2YodW5pdHMpe3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtzd2l0Y2godW5pdHMpe2Nhc2UneWVhcic6dGhpcy5tb250aCgwKTtjYXNlJ3F1YXJ0ZXInOmNhc2UnbW9udGgnOnRoaXMuZGF0ZSgxKTtjYXNlJ3dlZWsnOmNhc2UnaXNvV2Vlayc6Y2FzZSdkYXknOmNhc2UnZGF0ZSc6dGhpcy5ob3VycygwKTtjYXNlJ2hvdXInOnRoaXMubWludXRlcygwKTtjYXNlJ21pbnV0ZSc6dGhpcy5zZWNvbmRzKDApO2Nhc2Unc2Vjb25kJzp0aGlzLm1pbGxpc2Vjb25kcygwKTt9CmlmKHVuaXRzPT09J3dlZWsnKXt0aGlzLndlZWtkYXkoMCk7fQppZih1bml0cz09PSdpc29XZWVrJyl7dGhpcy5pc29XZWVrZGF5KDEpO30KaWYodW5pdHM9PT0ncXVhcnRlcicpe3RoaXMubW9udGgoTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkvMykqMyk7fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGVuZE9mKHVuaXRzKXt1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cyk7aWYodW5pdHM9PT11bmRlZmluZWR8fHVuaXRzPT09J21pbGxpc2Vjb25kJyl7cmV0dXJuIHRoaXM7fQppZih1bml0cz09PSdkYXRlJyl7dW5pdHM9J2RheSc7fQpyZXR1cm4gdGhpcy5zdGFydE9mKHVuaXRzKS5hZGQoMSwodW5pdHM9PT0naXNvV2Vlayc/J3dlZWsnOnVuaXRzKSkuc3VidHJhY3QoMSwnbXMnKTt9CmZ1bmN0aW9uIHZhbHVlT2YoKXtyZXR1cm4gdGhpcy5fZC52YWx1ZU9mKCktKCh0aGlzLl9vZmZzZXR8fDApKjYwMDAwKTt9CmZ1bmN0aW9uIHVuaXgoKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xMDAwKTt9CmZ1bmN0aW9uIHRvRGF0ZSgpe3JldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSk7fQpmdW5jdGlvbiB0b0FycmF5KCl7dmFyIG09dGhpcztyZXR1cm5bbS55ZWFyKCksbS5tb250aCgpLG0uZGF0ZSgpLG0uaG91cigpLG0ubWludXRlKCksbS5zZWNvbmQoKSxtLm1pbGxpc2Vjb25kKCldO30KZnVuY3Rpb24gdG9PYmplY3QoKXt2YXIgbT10aGlzO3JldHVybnt5ZWFyczptLnllYXIoKSxtb250aHM6bS5tb250aCgpLGRhdGU6bS5kYXRlKCksaG91cnM6bS5ob3VycygpLG1pbnV0ZXM6bS5taW51dGVzKCksc2Vjb25kczptLnNlY29uZHMoKSxtaWxsaXNlY29uZHM6bS5taWxsaXNlY29uZHMoKX07fQpmdW5jdGlvbiB0b0pTT04oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy50b0lTT1N0cmluZygpOm51bGw7fQpmdW5jdGlvbiBpc1ZhbGlkJDEoKXtyZXR1cm4gaXNWYWxpZCh0aGlzKTt9CmZ1bmN0aW9uIHBhcnNpbmdGbGFncygpe3JldHVybiBleHRlbmQoe30sZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpKTt9CmZ1bmN0aW9uIGludmFsaWRBdCgpe3JldHVybiBnZXRQYXJzaW5nRmxhZ3ModGhpcykub3ZlcmZsb3c7fQpmdW5jdGlvbiBjcmVhdGlvbkRhdGEoKXtyZXR1cm57aW5wdXQ6dGhpcy5faSxmb3JtYXQ6dGhpcy5fZixsb2NhbGU6dGhpcy5fbG9jYWxlLGlzVVRDOnRoaXMuX2lzVVRDLHN0cmljdDp0aGlzLl9zdHJpY3R9O30KYWRkRm9ybWF0VG9rZW4oMCxbJ2dnJywyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Vla1llYXIoKSUxMDA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ0dHJywyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSUxMDA7fSk7ZnVuY3Rpb24gYWRkV2Vla1llYXJGb3JtYXRUb2tlbih0b2tlbixnZXR0ZXIpe2FkZEZvcm1hdFRva2VuKDAsW3Rva2VuLHRva2VuLmxlbmd0aF0sMCxnZXR0ZXIpO30KYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZycsJ3dlZWtZZWFyJyk7YWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZ2cnLCd3ZWVrWWVhcicpO2FkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0cnLCdpc29XZWVrWWVhcicpO2FkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0dHJywnaXNvV2Vla1llYXInKTthZGRVbml0QWxpYXMoJ3dlZWtZZWFyJywnZ2cnKTthZGRVbml0QWxpYXMoJ2lzb1dlZWtZZWFyJywnR0cnKTthZGRVbml0UHJpb3JpdHkoJ3dlZWtZZWFyJywxKTthZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWtZZWFyJywxKTthZGRSZWdleFRva2VuKCdHJyxtYXRjaFNpZ25lZCk7YWRkUmVnZXhUb2tlbignZycsbWF0Y2hTaWduZWQpO2FkZFJlZ2V4VG9rZW4oJ0dHJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdnZycsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUmVnZXhUb2tlbignR0dHRycsbWF0Y2gxdG80LG1hdGNoNCk7YWRkUmVnZXhUb2tlbignZ2dnZycsbWF0Y2gxdG80LG1hdGNoNCk7YWRkUmVnZXhUb2tlbignR0dHR0cnLG1hdGNoMXRvNixtYXRjaDYpO2FkZFJlZ2V4VG9rZW4oJ2dnZ2dnJyxtYXRjaDF0bzYsbWF0Y2g2KTthZGRXZWVrUGFyc2VUb2tlbihbJ2dnZ2cnLCdnZ2dnZycsJ0dHR0cnLCdHR0dHRyddLGZ1bmN0aW9uKGlucHV0LHdlZWssY29uZmlnLHRva2VuKXt3ZWVrW3Rva2VuLnN1YnN0cigwLDIpXT10b0ludChpbnB1dCk7fSk7YWRkV2Vla1BhcnNlVG9rZW4oWydnZycsJ0dHJ10sZnVuY3Rpb24oaW5wdXQsd2Vlayxjb25maWcsdG9rZW4pe3dlZWtbdG9rZW5dPWhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTt9KTtmdW5jdGlvbiBnZXRTZXRXZWVrWWVhcihpbnB1dCl7cmV0dXJuIGdldFNldFdlZWtZZWFySGVscGVyLmNhbGwodGhpcyxpbnB1dCx0aGlzLndlZWsoKSx0aGlzLndlZWtkYXkoKSx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3csdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KTt9CmZ1bmN0aW9uIGdldFNldElTT1dlZWtZZWFyKGlucHV0KXtyZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLGlucHV0LHRoaXMuaXNvV2VlaygpLHRoaXMuaXNvV2Vla2RheSgpLDEsNCk7fQpmdW5jdGlvbiBnZXRJU09XZWVrc0luWWVhcigpe3JldHVybiB3ZWVrc0luWWVhcih0aGlzLnllYXIoKSwxLDQpO30KZnVuY3Rpb24gZ2V0V2Vla3NJblllYXIoKXt2YXIgd2Vla0luZm89dGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7cmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLHdlZWtJbmZvLmRvdyx3ZWVrSW5mby5kb3kpO30KZnVuY3Rpb24gZ2V0U2V0V2Vla1llYXJIZWxwZXIoaW5wdXQsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpe3ZhciB3ZWVrc1RhcmdldDtpZihpbnB1dD09bnVsbCl7cmV0dXJuIHdlZWtPZlllYXIodGhpcyxkb3csZG95KS55ZWFyO31lbHNle3dlZWtzVGFyZ2V0PXdlZWtzSW5ZZWFyKGlucHV0LGRvdyxkb3kpO2lmKHdlZWs+d2Vla3NUYXJnZXQpe3dlZWs9d2Vla3NUYXJnZXQ7fQpyZXR1cm4gc2V0V2Vla0FsbC5jYWxsKHRoaXMsaW5wdXQsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpO319CmZ1bmN0aW9uIHNldFdlZWtBbGwod2Vla1llYXIsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpe3ZhciBkYXlPZlllYXJEYXRhPWRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhcix3ZWVrLHdlZWtkYXksZG93LGRveSksZGF0ZT1jcmVhdGVVVENEYXRlKGRheU9mWWVhckRhdGEueWVhciwwLGRheU9mWWVhckRhdGEuZGF5T2ZZZWFyKTt0aGlzLnllYXIoZGF0ZS5nZXRVVENGdWxsWWVhcigpKTt0aGlzLm1vbnRoKGRhdGUuZ2V0VVRDTW9udGgoKSk7dGhpcy5kYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpKTtyZXR1cm4gdGhpczt9CmFkZEZvcm1hdFRva2VuKCdRJywwLCdRbycsJ3F1YXJ0ZXInKTthZGRVbml0QWxpYXMoJ3F1YXJ0ZXInLCdRJyk7YWRkVW5pdFByaW9yaXR5KCdxdWFydGVyJyw3KTthZGRSZWdleFRva2VuKCdRJyxtYXRjaDEpO2FkZFBhcnNlVG9rZW4oJ1EnLGZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtNT05USF09KHRvSW50KGlucHV0KS0xKSozO30pO2Z1bmN0aW9uIGdldFNldFF1YXJ0ZXIoaW5wdXQpe3JldHVybiBpbnB1dD09bnVsbD9NYXRoLmNlaWwoKHRoaXMubW9udGgoKSsxKS8zKTp0aGlzLm1vbnRoKChpbnB1dC0xKSozK3RoaXMubW9udGgoKSUzKTt9CmFkZEZvcm1hdFRva2VuKCdEJyxbJ0REJywyXSwnRG8nLCdkYXRlJyk7YWRkVW5pdEFsaWFzKCdkYXRlJywnRCcpO2FkZFVuaXRQcmlvcml0eSgnZGF0ZScsOSk7YWRkUmVnZXhUb2tlbignRCcsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdERCcsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUmVnZXhUb2tlbignRG8nLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGlzU3RyaWN0P2xvY2FsZS5fb3JkaW5hbFBhcnNlOmxvY2FsZS5fb3JkaW5hbFBhcnNlTGVuaWVudDt9KTthZGRQYXJzZVRva2VuKFsnRCcsJ0REJ10sREFURSk7YWRkUGFyc2VUb2tlbignRG8nLGZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtEQVRFXT10b0ludChpbnB1dC5tYXRjaChtYXRjaDF0bzIpWzBdLDEwKTt9KTt2YXIgZ2V0U2V0RGF5T2ZNb250aD1tYWtlR2V0U2V0KCdEYXRlJyx0cnVlKTthZGRGb3JtYXRUb2tlbignREREJyxbJ0REREQnLDNdLCdERERvJywnZGF5T2ZZZWFyJyk7YWRkVW5pdEFsaWFzKCdkYXlPZlllYXInLCdEREQnKTthZGRVbml0UHJpb3JpdHkoJ2RheU9mWWVhcicsNCk7YWRkUmVnZXhUb2tlbignREREJyxtYXRjaDF0bzMpO2FkZFJlZ2V4VG9rZW4oJ0REREQnLG1hdGNoMyk7YWRkUGFyc2VUb2tlbihbJ0RERCcsJ0REREQnXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe2NvbmZpZy5fZGF5T2ZZZWFyPXRvSW50KGlucHV0KTt9KTtmdW5jdGlvbiBnZXRTZXREYXlPZlllYXIoaW5wdXQpe3ZhciBkYXlPZlllYXI9TWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpLXRoaXMuY2xvbmUoKS5zdGFydE9mKCd5ZWFyJykpLzg2NGU1KSsxO3JldHVybiBpbnB1dD09bnVsbD9kYXlPZlllYXI6dGhpcy5hZGQoKGlucHV0LWRheU9mWWVhciksJ2QnKTt9CmFkZEZvcm1hdFRva2VuKCdtJyxbJ21tJywyXSwwLCdtaW51dGUnKTthZGRVbml0QWxpYXMoJ21pbnV0ZScsJ20nKTthZGRVbml0UHJpb3JpdHkoJ21pbnV0ZScsMTQpO2FkZFJlZ2V4VG9rZW4oJ20nLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignbW0nLG1hdGNoMXRvMixtYXRjaDIpO2FkZFBhcnNlVG9rZW4oWydtJywnbW0nXSxNSU5VVEUpO3ZhciBnZXRTZXRNaW51dGU9bWFrZUdldFNldCgnTWludXRlcycsZmFsc2UpO2FkZEZvcm1hdFRva2VuKCdzJyxbJ3NzJywyXSwwLCdzZWNvbmQnKTthZGRVbml0QWxpYXMoJ3NlY29uZCcsJ3MnKTthZGRVbml0UHJpb3JpdHkoJ3NlY29uZCcsMTUpO2FkZFJlZ2V4VG9rZW4oJ3MnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignc3MnLG1hdGNoMXRvMixtYXRjaDIpO2FkZFBhcnNlVG9rZW4oWydzJywnc3MnXSxTRUNPTkQpO3ZhciBnZXRTZXRTZWNvbmQ9bWFrZUdldFNldCgnU2Vjb25kcycsZmFsc2UpO2FkZEZvcm1hdFRva2VuKCdTJywwLDAsZnVuY3Rpb24oKXtyZXR1cm5+fih0aGlzLm1pbGxpc2Vjb25kKCkvMTAwKTt9KTthZGRGb3JtYXRUb2tlbigwLFsnU1MnLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm5+fih0aGlzLm1pbGxpc2Vjb25kKCkvMTApO30pO2FkZEZvcm1hdFRva2VuKDAsWydTU1MnLDNdLDAsJ21pbGxpc2Vjb25kJyk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1MnLDRdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpKjEwO30pO2FkZEZvcm1hdFRva2VuKDAsWydTU1NTUycsNV0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTAwO30pO2FkZEZvcm1hdFRva2VuKDAsWydTU1NTU1MnLDZdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpKjEwMDA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1NTU1MnLDddLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpKjEwMDAwO30pO2FkZEZvcm1hdFRva2VuKDAsWydTU1NTU1NTUycsOF0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTAwMDAwO30pO2FkZEZvcm1hdFRva2VuKDAsWydTU1NTU1NTU1MnLDldLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpKjEwMDAwMDA7fSk7YWRkVW5pdEFsaWFzKCdtaWxsaXNlY29uZCcsJ21zJyk7YWRkVW5pdFByaW9yaXR5KCdtaWxsaXNlY29uZCcsMTYpO2FkZFJlZ2V4VG9rZW4oJ1MnLG1hdGNoMXRvMyxtYXRjaDEpO2FkZFJlZ2V4VG9rZW4oJ1NTJyxtYXRjaDF0bzMsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdTU1MnLG1hdGNoMXRvMyxtYXRjaDMpO3ZhciB0b2tlbjtmb3IodG9rZW49J1NTU1MnO3Rva2VuLmxlbmd0aDw9OTt0b2tlbis9J1MnKXthZGRSZWdleFRva2VuKHRva2VuLG1hdGNoVW5zaWduZWQpO30KZnVuY3Rpb24gcGFyc2VNcyhpbnB1dCxhcnJheSl7YXJyYXlbTUlMTElTRUNPTkRdPXRvSW50KCgnMC4nK2lucHV0KSoxMDAwKTt9CmZvcih0b2tlbj0nUyc7dG9rZW4ubGVuZ3RoPD05O3Rva2VuKz0nUycpe2FkZFBhcnNlVG9rZW4odG9rZW4scGFyc2VNcyk7fQp2YXIgZ2V0U2V0TWlsbGlzZWNvbmQ9bWFrZUdldFNldCgnTWlsbGlzZWNvbmRzJyxmYWxzZSk7YWRkRm9ybWF0VG9rZW4oJ3onLDAsMCwnem9uZUFiYnInKTthZGRGb3JtYXRUb2tlbignenonLDAsMCwnem9uZU5hbWUnKTtmdW5jdGlvbiBnZXRab25lQWJicigpe3JldHVybiB0aGlzLl9pc1VUQz8nVVRDJzonJzt9CmZ1bmN0aW9uIGdldFpvbmVOYW1lKCl7cmV0dXJuIHRoaXMuX2lzVVRDPydDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZSc6Jyc7fQp2YXIgcHJvdG89TW9tZW50LnByb3RvdHlwZTtwcm90by5hZGQ9YWRkO3Byb3RvLmNhbGVuZGFyPWNhbGVuZGFyJDE7cHJvdG8uY2xvbmU9Y2xvbmU7cHJvdG8uZGlmZj1kaWZmO3Byb3RvLmVuZE9mPWVuZE9mO3Byb3RvLmZvcm1hdD1mb3JtYXQ7cHJvdG8uZnJvbT1mcm9tO3Byb3RvLmZyb21Ob3c9ZnJvbU5vdztwcm90by50bz10bztwcm90by50b05vdz10b05vdztwcm90by5nZXQ9c3RyaW5nR2V0O3Byb3RvLmludmFsaWRBdD1pbnZhbGlkQXQ7cHJvdG8uaXNBZnRlcj1pc0FmdGVyO3Byb3RvLmlzQmVmb3JlPWlzQmVmb3JlO3Byb3RvLmlzQmV0d2Vlbj1pc0JldHdlZW47cHJvdG8uaXNTYW1lPWlzU2FtZTtwcm90by5pc1NhbWVPckFmdGVyPWlzU2FtZU9yQWZ0ZXI7cHJvdG8uaXNTYW1lT3JCZWZvcmU9aXNTYW1lT3JCZWZvcmU7cHJvdG8uaXNWYWxpZD1pc1ZhbGlkJDE7cHJvdG8ubGFuZz1sYW5nO3Byb3RvLmxvY2FsZT1sb2NhbGU7cHJvdG8ubG9jYWxlRGF0YT1sb2NhbGVEYXRhO3Byb3RvLm1heD1wcm90b3R5cGVNYXg7cHJvdG8ubWluPXByb3RvdHlwZU1pbjtwcm90by5wYXJzaW5nRmxhZ3M9cGFyc2luZ0ZsYWdzO3Byb3RvLnNldD1zdHJpbmdTZXQ7cHJvdG8uc3RhcnRPZj1zdGFydE9mO3Byb3RvLnN1YnRyYWN0PXN1YnRyYWN0O3Byb3RvLnRvQXJyYXk9dG9BcnJheTtwcm90by50b09iamVjdD10b09iamVjdDtwcm90by50b0RhdGU9dG9EYXRlO3Byb3RvLnRvSVNPU3RyaW5nPXRvSVNPU3RyaW5nO3Byb3RvLmluc3BlY3Q9aW5zcGVjdDtwcm90by50b0pTT049dG9KU09OO3Byb3RvLnRvU3RyaW5nPXRvU3RyaW5nO3Byb3RvLnVuaXg9dW5peDtwcm90by52YWx1ZU9mPXZhbHVlT2Y7cHJvdG8uY3JlYXRpb25EYXRhPWNyZWF0aW9uRGF0YTtwcm90by55ZWFyPWdldFNldFllYXI7cHJvdG8uaXNMZWFwWWVhcj1nZXRJc0xlYXBZZWFyO3Byb3RvLndlZWtZZWFyPWdldFNldFdlZWtZZWFyO3Byb3RvLmlzb1dlZWtZZWFyPWdldFNldElTT1dlZWtZZWFyO3Byb3RvLnF1YXJ0ZXI9cHJvdG8ucXVhcnRlcnM9Z2V0U2V0UXVhcnRlcjtwcm90by5tb250aD1nZXRTZXRNb250aDtwcm90by5kYXlzSW5Nb250aD1nZXREYXlzSW5Nb250aDtwcm90by53ZWVrPXByb3RvLndlZWtzPWdldFNldFdlZWs7cHJvdG8uaXNvV2Vlaz1wcm90by5pc29XZWVrcz1nZXRTZXRJU09XZWVrO3Byb3RvLndlZWtzSW5ZZWFyPWdldFdlZWtzSW5ZZWFyO3Byb3RvLmlzb1dlZWtzSW5ZZWFyPWdldElTT1dlZWtzSW5ZZWFyO3Byb3RvLmRhdGU9Z2V0U2V0RGF5T2ZNb250aDtwcm90by5kYXk9cHJvdG8uZGF5cz1nZXRTZXREYXlPZldlZWs7cHJvdG8ud2Vla2RheT1nZXRTZXRMb2NhbGVEYXlPZldlZWs7cHJvdG8uaXNvV2Vla2RheT1nZXRTZXRJU09EYXlPZldlZWs7cHJvdG8uZGF5T2ZZZWFyPWdldFNldERheU9mWWVhcjtwcm90by5ob3VyPXByb3RvLmhvdXJzPWdldFNldEhvdXI7cHJvdG8ubWludXRlPXByb3RvLm1pbnV0ZXM9Z2V0U2V0TWludXRlO3Byb3RvLnNlY29uZD1wcm90by5zZWNvbmRzPWdldFNldFNlY29uZDtwcm90by5taWxsaXNlY29uZD1wcm90by5taWxsaXNlY29uZHM9Z2V0U2V0TWlsbGlzZWNvbmQ7cHJvdG8udXRjT2Zmc2V0PWdldFNldE9mZnNldDtwcm90by51dGM9c2V0T2Zmc2V0VG9VVEM7cHJvdG8ubG9jYWw9c2V0T2Zmc2V0VG9Mb2NhbDtwcm90by5wYXJzZVpvbmU9c2V0T2Zmc2V0VG9QYXJzZWRPZmZzZXQ7cHJvdG8uaGFzQWxpZ25lZEhvdXJPZmZzZXQ9aGFzQWxpZ25lZEhvdXJPZmZzZXQ7cHJvdG8uaXNEU1Q9aXNEYXlsaWdodFNhdmluZ1RpbWU7cHJvdG8uaXNMb2NhbD1pc0xvY2FsO3Byb3RvLmlzVXRjT2Zmc2V0PWlzVXRjT2Zmc2V0O3Byb3RvLmlzVXRjPWlzVXRjO3Byb3RvLmlzVVRDPWlzVXRjO3Byb3RvLnpvbmVBYmJyPWdldFpvbmVBYmJyO3Byb3RvLnpvbmVOYW1lPWdldFpvbmVOYW1lO3Byb3RvLmRhdGVzPWRlcHJlY2F0ZSgnZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC4nLGdldFNldERheU9mTW9udGgpO3Byb3RvLm1vbnRocz1kZXByZWNhdGUoJ21vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZCcsZ2V0U2V0TW9udGgpO3Byb3RvLnllYXJzPWRlcHJlY2F0ZSgneWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZCcsZ2V0U2V0WWVhcik7cHJvdG8uem9uZT1kZXByZWNhdGUoJ21vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL3pvbmUvJyxnZXRTZXRab25lKTtwcm90by5pc0RTVFNoaWZ0ZWQ9ZGVwcmVjYXRlKCdpc0RTVFNoaWZ0ZWQgaXMgZGVwcmVjYXRlZC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZHN0LXNoaWZ0ZWQvIGZvciBtb3JlIGluZm9ybWF0aW9uJyxpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQpO2Z1bmN0aW9uIGNyZWF0ZVVuaXgoaW5wdXQpe3JldHVybiBjcmVhdGVMb2NhbChpbnB1dCoxMDAwKTt9CmZ1bmN0aW9uIGNyZWF0ZUluWm9uZSgpe3JldHVybiBjcmVhdGVMb2NhbC5hcHBseShudWxsLGFyZ3VtZW50cykucGFyc2Vab25lKCk7fQpmdW5jdGlvbiBwcmVQYXJzZVBvc3RGb3JtYXQoc3RyaW5nKXtyZXR1cm4gc3RyaW5nO30KdmFyIHByb3RvJDE9TG9jYWxlLnByb3RvdHlwZTtwcm90byQxLmNhbGVuZGFyPWNhbGVuZGFyO3Byb3RvJDEubG9uZ0RhdGVGb3JtYXQ9bG9uZ0RhdGVGb3JtYXQ7cHJvdG8kMS5pbnZhbGlkRGF0ZT1pbnZhbGlkRGF0ZTtwcm90byQxLm9yZGluYWw9b3JkaW5hbDtwcm90byQxLnByZXBhcnNlPXByZVBhcnNlUG9zdEZvcm1hdDtwcm90byQxLnBvc3Rmb3JtYXQ9cHJlUGFyc2VQb3N0Rm9ybWF0O3Byb3RvJDEucmVsYXRpdmVUaW1lPXJlbGF0aXZlVGltZTtwcm90byQxLnBhc3RGdXR1cmU9cGFzdEZ1dHVyZTtwcm90byQxLnNldD1zZXQ7cHJvdG8kMS5tb250aHM9bG9jYWxlTW9udGhzO3Byb3RvJDEubW9udGhzU2hvcnQ9bG9jYWxlTW9udGhzU2hvcnQ7cHJvdG8kMS5tb250aHNQYXJzZT1sb2NhbGVNb250aHNQYXJzZTtwcm90byQxLm1vbnRoc1JlZ2V4PW1vbnRoc1JlZ2V4O3Byb3RvJDEubW9udGhzU2hvcnRSZWdleD1tb250aHNTaG9ydFJlZ2V4O3Byb3RvJDEud2Vlaz1sb2NhbGVXZWVrO3Byb3RvJDEuZmlyc3REYXlPZlllYXI9bG9jYWxlRmlyc3REYXlPZlllYXI7cHJvdG8kMS5maXJzdERheU9mV2Vlaz1sb2NhbGVGaXJzdERheU9mV2Vlaztwcm90byQxLndlZWtkYXlzPWxvY2FsZVdlZWtkYXlzO3Byb3RvJDEud2Vla2RheXNNaW49bG9jYWxlV2Vla2RheXNNaW47cHJvdG8kMS53ZWVrZGF5c1Nob3J0PWxvY2FsZVdlZWtkYXlzU2hvcnQ7cHJvdG8kMS53ZWVrZGF5c1BhcnNlPWxvY2FsZVdlZWtkYXlzUGFyc2U7cHJvdG8kMS53ZWVrZGF5c1JlZ2V4PXdlZWtkYXlzUmVnZXg7cHJvdG8kMS53ZWVrZGF5c1Nob3J0UmVnZXg9d2Vla2RheXNTaG9ydFJlZ2V4O3Byb3RvJDEud2Vla2RheXNNaW5SZWdleD13ZWVrZGF5c01pblJlZ2V4O3Byb3RvJDEuaXNQTT1sb2NhbGVJc1BNO3Byb3RvJDEubWVyaWRpZW09bG9jYWxlTWVyaWRpZW07ZnVuY3Rpb24gZ2V0JDEoZm9ybWF0LGluZGV4LGZpZWxkLHNldHRlcil7dmFyIGxvY2FsZT1nZXRMb2NhbGUoKTt2YXIgdXRjPWNyZWF0ZVVUQygpLnNldChzZXR0ZXIsaW5kZXgpO3JldHVybiBsb2NhbGVbZmllbGRdKHV0Yyxmb3JtYXQpO30KZnVuY3Rpb24gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LGluZGV4LGZpZWxkKXtpZihpc051bWJlcihmb3JtYXQpKXtpbmRleD1mb3JtYXQ7Zm9ybWF0PXVuZGVmaW5lZDt9CmZvcm1hdD1mb3JtYXR8fCcnO2lmKGluZGV4IT1udWxsKXtyZXR1cm4gZ2V0JDEoZm9ybWF0LGluZGV4LGZpZWxkLCdtb250aCcpO30KdmFyIGk7dmFyIG91dD1bXTtmb3IoaT0wO2k8MTI7aSsrKXtvdXRbaV09Z2V0JDEoZm9ybWF0LGksZmllbGQsJ21vbnRoJyk7fQpyZXR1cm4gb3V0O30KZnVuY3Rpb24gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LGZpZWxkKXtpZih0eXBlb2YgbG9jYWxlU29ydGVkPT09J2Jvb2xlYW4nKXtpZihpc051bWJlcihmb3JtYXQpKXtpbmRleD1mb3JtYXQ7Zm9ybWF0PXVuZGVmaW5lZDt9CmZvcm1hdD1mb3JtYXR8fCcnO31lbHNle2Zvcm1hdD1sb2NhbGVTb3J0ZWQ7aW5kZXg9Zm9ybWF0O2xvY2FsZVNvcnRlZD1mYWxzZTtpZihpc051bWJlcihmb3JtYXQpKXtpbmRleD1mb3JtYXQ7Zm9ybWF0PXVuZGVmaW5lZDt9CmZvcm1hdD1mb3JtYXR8fCcnO30KdmFyIGxvY2FsZT1nZXRMb2NhbGUoKSxzaGlmdD1sb2NhbGVTb3J0ZWQ/bG9jYWxlLl93ZWVrLmRvdzowO2lmKGluZGV4IT1udWxsKXtyZXR1cm4gZ2V0JDEoZm9ybWF0LChpbmRleCtzaGlmdCklNyxmaWVsZCwnZGF5Jyk7fQp2YXIgaTt2YXIgb3V0PVtdO2ZvcihpPTA7aTw3O2krKyl7b3V0W2ldPWdldCQxKGZvcm1hdCwoaStzaGlmdCklNyxmaWVsZCwnZGF5Jyk7fQpyZXR1cm4gb3V0O30KZnVuY3Rpb24gbGlzdE1vbnRocyhmb3JtYXQsaW5kZXgpe3JldHVybiBsaXN0TW9udGhzSW1wbChmb3JtYXQsaW5kZXgsJ21vbnRocycpO30KZnVuY3Rpb24gbGlzdE1vbnRoc1Nob3J0KGZvcm1hdCxpbmRleCl7cmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCxpbmRleCwnbW9udGhzU2hvcnQnKTt9CmZ1bmN0aW9uIGxpc3RXZWVrZGF5cyhsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LCd3ZWVrZGF5cycpO30KZnVuY3Rpb24gbGlzdFdlZWtkYXlzU2hvcnQobG9jYWxlU29ydGVkLGZvcm1hdCxpbmRleCl7cmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLGZvcm1hdCxpbmRleCwnd2Vla2RheXNTaG9ydCcpO30KZnVuY3Rpb24gbGlzdFdlZWtkYXlzTWluKGxvY2FsZVNvcnRlZCxmb3JtYXQsaW5kZXgpe3JldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCxmb3JtYXQsaW5kZXgsJ3dlZWtkYXlzTWluJyk7fQpnZXRTZXRHbG9iYWxMb2NhbGUoJ2VuJyx7b3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHRofHN0fG5kfHJkKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlciUxMCxvdXRwdXQ9KHRvSW50KG51bWJlciUxMDAvMTApPT09MSk/J3RoJzooYj09PTEpPydzdCc6KGI9PT0yKT8nbmQnOihiPT09Myk/J3JkJzondGgnO3JldHVybiBudW1iZXIrb3V0cHV0O319KTtob29rcy5sYW5nPWRlcHJlY2F0ZSgnbW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4nLGdldFNldEdsb2JhbExvY2FsZSk7aG9va3MubGFuZ0RhdGE9ZGVwcmVjYXRlKCdtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuJyxnZXRMb2NhbGUpO3ZhciBtYXRoQWJzPU1hdGguYWJzO2Z1bmN0aW9uIGFicygpe3ZhciBkYXRhPXRoaXMuX2RhdGE7dGhpcy5fbWlsbGlzZWNvbmRzPW1hdGhBYnModGhpcy5fbWlsbGlzZWNvbmRzKTt0aGlzLl9kYXlzPW1hdGhBYnModGhpcy5fZGF5cyk7dGhpcy5fbW9udGhzPW1hdGhBYnModGhpcy5fbW9udGhzKTtkYXRhLm1pbGxpc2Vjb25kcz1tYXRoQWJzKGRhdGEubWlsbGlzZWNvbmRzKTtkYXRhLnNlY29uZHM9bWF0aEFicyhkYXRhLnNlY29uZHMpO2RhdGEubWludXRlcz1tYXRoQWJzKGRhdGEubWludXRlcyk7ZGF0YS5ob3Vycz1tYXRoQWJzKGRhdGEuaG91cnMpO2RhdGEubW9udGhzPW1hdGhBYnMoZGF0YS5tb250aHMpO2RhdGEueWVhcnM9bWF0aEFicyhkYXRhLnllYXJzKTtyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGFkZFN1YnRyYWN0JDEoZHVyYXRpb24saW5wdXQsdmFsdWUsZGlyZWN0aW9uKXt2YXIgb3RoZXI9Y3JlYXRlRHVyYXRpb24oaW5wdXQsdmFsdWUpO2R1cmF0aW9uLl9taWxsaXNlY29uZHMrPWRpcmVjdGlvbipvdGhlci5fbWlsbGlzZWNvbmRzO2R1cmF0aW9uLl9kYXlzKz1kaXJlY3Rpb24qb3RoZXIuX2RheXM7ZHVyYXRpb24uX21vbnRocys9ZGlyZWN0aW9uKm90aGVyLl9tb250aHM7cmV0dXJuIGR1cmF0aW9uLl9idWJibGUoKTt9CmZ1bmN0aW9uIGFkZCQxKGlucHV0LHZhbHVlKXtyZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLGlucHV0LHZhbHVlLDEpO30KZnVuY3Rpb24gc3VidHJhY3QkMShpbnB1dCx2YWx1ZSl7cmV0dXJuIGFkZFN1YnRyYWN0JDEodGhpcyxpbnB1dCx2YWx1ZSwtMSk7fQpmdW5jdGlvbiBhYnNDZWlsKG51bWJlcil7aWYobnVtYmVyPDApe3JldHVybiBNYXRoLmZsb29yKG51bWJlcik7fWVsc2V7cmV0dXJuIE1hdGguY2VpbChudW1iZXIpO319CmZ1bmN0aW9uIGJ1YmJsZSgpe3ZhciBtaWxsaXNlY29uZHM9dGhpcy5fbWlsbGlzZWNvbmRzO3ZhciBkYXlzPXRoaXMuX2RheXM7dmFyIG1vbnRocz10aGlzLl9tb250aHM7dmFyIGRhdGE9dGhpcy5fZGF0YTt2YXIgc2Vjb25kcyxtaW51dGVzLGhvdXJzLHllYXJzLG1vbnRoc0Zyb21EYXlzO2lmKCEoKG1pbGxpc2Vjb25kcz49MCYmZGF5cz49MCYmbW9udGhzPj0wKXx8KG1pbGxpc2Vjb25kczw9MCYmZGF5czw9MCYmbW9udGhzPD0wKSkpe21pbGxpc2Vjb25kcys9YWJzQ2VpbChtb250aHNUb0RheXMobW9udGhzKStkYXlzKSo4NjRlNTtkYXlzPTA7bW9udGhzPTA7fQpkYXRhLm1pbGxpc2Vjb25kcz1taWxsaXNlY29uZHMlMTAwMDtzZWNvbmRzPWFic0Zsb29yKG1pbGxpc2Vjb25kcy8xMDAwKTtkYXRhLnNlY29uZHM9c2Vjb25kcyU2MDttaW51dGVzPWFic0Zsb29yKHNlY29uZHMvNjApO2RhdGEubWludXRlcz1taW51dGVzJTYwO2hvdXJzPWFic0Zsb29yKG1pbnV0ZXMvNjApO2RhdGEuaG91cnM9aG91cnMlMjQ7ZGF5cys9YWJzRmxvb3IoaG91cnMvMjQpO21vbnRoc0Zyb21EYXlzPWFic0Zsb29yKGRheXNUb01vbnRocyhkYXlzKSk7bW9udGhzKz1tb250aHNGcm9tRGF5cztkYXlzLT1hYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHNGcm9tRGF5cykpO3llYXJzPWFic0Zsb29yKG1vbnRocy8xMik7bW9udGhzJT0xMjtkYXRhLmRheXM9ZGF5cztkYXRhLm1vbnRocz1tb250aHM7ZGF0YS55ZWFycz15ZWFycztyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGRheXNUb01vbnRocyhkYXlzKXtyZXR1cm4gZGF5cyo0ODAwLzE0NjA5Nzt9CmZ1bmN0aW9uIG1vbnRoc1RvRGF5cyhtb250aHMpe3JldHVybiBtb250aHMqMTQ2MDk3LzQ4MDA7fQpmdW5jdGlvbiBhcyh1bml0cyl7dmFyIGRheXM7dmFyIG1vbnRoczt2YXIgbWlsbGlzZWNvbmRzPXRoaXMuX21pbGxpc2Vjb25kczt1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cyk7aWYodW5pdHM9PT0nbW9udGgnfHx1bml0cz09PSd5ZWFyJyl7ZGF5cz10aGlzLl9kYXlzK21pbGxpc2Vjb25kcy84NjRlNTttb250aHM9dGhpcy5fbW9udGhzK2RheXNUb01vbnRocyhkYXlzKTtyZXR1cm4gdW5pdHM9PT0nbW9udGgnP21vbnRoczptb250aHMvMTI7fWVsc2V7ZGF5cz10aGlzLl9kYXlzK01hdGgucm91bmQobW9udGhzVG9EYXlzKHRoaXMuX21vbnRocykpO3N3aXRjaCh1bml0cyl7Y2FzZSd3ZWVrJzpyZXR1cm4gZGF5cy83K21pbGxpc2Vjb25kcy82MDQ4ZTU7Y2FzZSdkYXknOnJldHVybiBkYXlzK21pbGxpc2Vjb25kcy84NjRlNTtjYXNlJ2hvdXInOnJldHVybiBkYXlzKjI0K21pbGxpc2Vjb25kcy8zNmU1O2Nhc2UnbWludXRlJzpyZXR1cm4gZGF5cyoxNDQwK21pbGxpc2Vjb25kcy82ZTQ7Y2FzZSdzZWNvbmQnOnJldHVybiBkYXlzKjg2NDAwK21pbGxpc2Vjb25kcy8xMDAwO2Nhc2UnbWlsbGlzZWNvbmQnOnJldHVybiBNYXRoLmZsb29yKGRheXMqODY0ZTUpK21pbGxpc2Vjb25kcztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVW5rbm93biB1bml0ICcrdW5pdHMpO319fQpmdW5jdGlvbiB2YWx1ZU9mJDEoKXtyZXR1cm4odGhpcy5fbWlsbGlzZWNvbmRzKwp0aGlzLl9kYXlzKjg2NGU1KwoodGhpcy5fbW9udGhzJTEyKSoyNTkyZTYrCnRvSW50KHRoaXMuX21vbnRocy8xMikqMzE1MzZlNik7fQpmdW5jdGlvbiBtYWtlQXMoYWxpYXMpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKGFsaWFzKTt9O30KdmFyIGFzTWlsbGlzZWNvbmRzPW1ha2VBcygnbXMnKTt2YXIgYXNTZWNvbmRzPW1ha2VBcygncycpO3ZhciBhc01pbnV0ZXM9bWFrZUFzKCdtJyk7dmFyIGFzSG91cnM9bWFrZUFzKCdoJyk7dmFyIGFzRGF5cz1tYWtlQXMoJ2QnKTt2YXIgYXNXZWVrcz1tYWtlQXMoJ3cnKTt2YXIgYXNNb250aHM9bWFrZUFzKCdNJyk7dmFyIGFzWWVhcnM9bWFrZUFzKCd5Jyk7ZnVuY3Rpb24gZ2V0JDIodW5pdHMpe3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtyZXR1cm4gdGhpc1t1bml0cysncyddKCk7fQpmdW5jdGlvbiBtYWtlR2V0dGVyKG5hbWUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhW25hbWVdO307fQp2YXIgbWlsbGlzZWNvbmRzPW1ha2VHZXR0ZXIoJ21pbGxpc2Vjb25kcycpO3ZhciBzZWNvbmRzPW1ha2VHZXR0ZXIoJ3NlY29uZHMnKTt2YXIgbWludXRlcz1tYWtlR2V0dGVyKCdtaW51dGVzJyk7dmFyIGhvdXJzPW1ha2VHZXR0ZXIoJ2hvdXJzJyk7dmFyIGRheXM9bWFrZUdldHRlcignZGF5cycpO3ZhciBtb250aHM9bWFrZUdldHRlcignbW9udGhzJyk7dmFyIHllYXJzPW1ha2VHZXR0ZXIoJ3llYXJzJyk7ZnVuY3Rpb24gd2Vla3MoKXtyZXR1cm4gYWJzRmxvb3IodGhpcy5kYXlzKCkvNyk7fQp2YXIgcm91bmQ9TWF0aC5yb3VuZDt2YXIgdGhyZXNob2xkcz17czo0NSxtOjQ1LGg6MjIsZDoyNixNOjExfTtmdW5jdGlvbiBzdWJzdGl0dXRlVGltZUFnbyhzdHJpbmcsbnVtYmVyLHdpdGhvdXRTdWZmaXgsaXNGdXR1cmUsbG9jYWxlKXtyZXR1cm4gbG9jYWxlLnJlbGF0aXZlVGltZShudW1iZXJ8fDEsISF3aXRob3V0U3VmZml4LHN0cmluZyxpc0Z1dHVyZSk7fQpmdW5jdGlvbiByZWxhdGl2ZVRpbWUkMShwb3NOZWdEdXJhdGlvbix3aXRob3V0U3VmZml4LGxvY2FsZSl7dmFyIGR1cmF0aW9uPWNyZWF0ZUR1cmF0aW9uKHBvc05lZ0R1cmF0aW9uKS5hYnMoKTt2YXIgc2Vjb25kcz1yb3VuZChkdXJhdGlvbi5hcygncycpKTt2YXIgbWludXRlcz1yb3VuZChkdXJhdGlvbi5hcygnbScpKTt2YXIgaG91cnM9cm91bmQoZHVyYXRpb24uYXMoJ2gnKSk7dmFyIGRheXM9cm91bmQoZHVyYXRpb24uYXMoJ2QnKSk7dmFyIG1vbnRocz1yb3VuZChkdXJhdGlvbi5hcygnTScpKTt2YXIgeWVhcnM9cm91bmQoZHVyYXRpb24uYXMoJ3knKSk7dmFyIGE9c2Vjb25kczx0aHJlc2hvbGRzLnMmJlsncycsc2Vjb25kc118fG1pbnV0ZXM8PTEmJlsnbSddfHxtaW51dGVzPHRocmVzaG9sZHMubSYmWydtbScsbWludXRlc118fGhvdXJzPD0xJiZbJ2gnXXx8aG91cnM8dGhyZXNob2xkcy5oJiZbJ2hoJyxob3Vyc118fGRheXM8PTEmJlsnZCddfHxkYXlzPHRocmVzaG9sZHMuZCYmWydkZCcsZGF5c118fG1vbnRoczw9MSYmWydNJ118fG1vbnRoczx0aHJlc2hvbGRzLk0mJlsnTU0nLG1vbnRoc118fHllYXJzPD0xJiZbJ3knXXx8Wyd5eScseWVhcnNdO2FbMl09d2l0aG91dFN1ZmZpeDthWzNdPStwb3NOZWdEdXJhdGlvbj4wO2FbNF09bG9jYWxlO3JldHVybiBzdWJzdGl0dXRlVGltZUFnby5hcHBseShudWxsLGEpO30KZnVuY3Rpb24gZ2V0U2V0UmVsYXRpdmVUaW1lUm91bmRpbmcocm91bmRpbmdGdW5jdGlvbil7aWYocm91bmRpbmdGdW5jdGlvbj09PXVuZGVmaW5lZCl7cmV0dXJuIHJvdW5kO30KaWYodHlwZW9mKHJvdW5kaW5nRnVuY3Rpb24pPT09J2Z1bmN0aW9uJyl7cm91bmQ9cm91bmRpbmdGdW5jdGlvbjtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9CmZ1bmN0aW9uIGdldFNldFJlbGF0aXZlVGltZVRocmVzaG9sZCh0aHJlc2hvbGQsbGltaXQpe2lmKHRocmVzaG9sZHNbdGhyZXNob2xkXT09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlO30KaWYobGltaXQ9PT11bmRlZmluZWQpe3JldHVybiB0aHJlc2hvbGRzW3RocmVzaG9sZF07fQp0aHJlc2hvbGRzW3RocmVzaG9sZF09bGltaXQ7cmV0dXJuIHRydWU7fQpmdW5jdGlvbiBodW1hbml6ZSh3aXRoU3VmZml4KXt2YXIgbG9jYWxlPXRoaXMubG9jYWxlRGF0YSgpO3ZhciBvdXRwdXQ9cmVsYXRpdmVUaW1lJDEodGhpcywhd2l0aFN1ZmZpeCxsb2NhbGUpO2lmKHdpdGhTdWZmaXgpe291dHB1dD1sb2NhbGUucGFzdEZ1dHVyZSgrdGhpcyxvdXRwdXQpO30KcmV0dXJuIGxvY2FsZS5wb3N0Zm9ybWF0KG91dHB1dCk7fQp2YXIgYWJzJDE9TWF0aC5hYnM7ZnVuY3Rpb24gdG9JU09TdHJpbmckMSgpe3ZhciBzZWNvbmRzPWFicyQxKHRoaXMuX21pbGxpc2Vjb25kcykvMTAwMDt2YXIgZGF5cz1hYnMkMSh0aGlzLl9kYXlzKTt2YXIgbW9udGhzPWFicyQxKHRoaXMuX21vbnRocyk7dmFyIG1pbnV0ZXMsaG91cnMseWVhcnM7bWludXRlcz1hYnNGbG9vcihzZWNvbmRzLzYwKTtob3Vycz1hYnNGbG9vcihtaW51dGVzLzYwKTtzZWNvbmRzJT02MDttaW51dGVzJT02MDt5ZWFycz1hYnNGbG9vcihtb250aHMvMTIpO21vbnRocyU9MTI7dmFyIFk9eWVhcnM7dmFyIE09bW9udGhzO3ZhciBEPWRheXM7dmFyIGg9aG91cnM7dmFyIG09bWludXRlczt2YXIgcz1zZWNvbmRzO3ZhciB0b3RhbD10aGlzLmFzU2Vjb25kcygpO2lmKCF0b3RhbCl7cmV0dXJuJ1AwRCc7fQpyZXR1cm4odG90YWw8MD8nLSc6JycpKydQJysKKFk/WSsnWSc6JycpKwooTT9NKydNJzonJykrCihEP0QrJ0QnOicnKSsKKChofHxtfHxzKT8nVCc6JycpKwooaD9oKydIJzonJykrCihtP20rJ00nOicnKSsKKHM/cysnUyc6JycpO30KdmFyIHByb3RvJDI9RHVyYXRpb24ucHJvdG90eXBlO3Byb3RvJDIuYWJzPWFicztwcm90byQyLmFkZD1hZGQkMTtwcm90byQyLnN1YnRyYWN0PXN1YnRyYWN0JDE7cHJvdG8kMi5hcz1hcztwcm90byQyLmFzTWlsbGlzZWNvbmRzPWFzTWlsbGlzZWNvbmRzO3Byb3RvJDIuYXNTZWNvbmRzPWFzU2Vjb25kcztwcm90byQyLmFzTWludXRlcz1hc01pbnV0ZXM7cHJvdG8kMi5hc0hvdXJzPWFzSG91cnM7cHJvdG8kMi5hc0RheXM9YXNEYXlzO3Byb3RvJDIuYXNXZWVrcz1hc1dlZWtzO3Byb3RvJDIuYXNNb250aHM9YXNNb250aHM7cHJvdG8kMi5hc1llYXJzPWFzWWVhcnM7cHJvdG8kMi52YWx1ZU9mPXZhbHVlT2YkMTtwcm90byQyLl9idWJibGU9YnViYmxlO3Byb3RvJDIuZ2V0PWdldCQyO3Byb3RvJDIubWlsbGlzZWNvbmRzPW1pbGxpc2Vjb25kcztwcm90byQyLnNlY29uZHM9c2Vjb25kcztwcm90byQyLm1pbnV0ZXM9bWludXRlcztwcm90byQyLmhvdXJzPWhvdXJzO3Byb3RvJDIuZGF5cz1kYXlzO3Byb3RvJDIud2Vla3M9d2Vla3M7cHJvdG8kMi5tb250aHM9bW9udGhzO3Byb3RvJDIueWVhcnM9eWVhcnM7cHJvdG8kMi5odW1hbml6ZT1odW1hbml6ZTtwcm90byQyLnRvSVNPU3RyaW5nPXRvSVNPU3RyaW5nJDE7cHJvdG8kMi50b1N0cmluZz10b0lTT1N0cmluZyQxO3Byb3RvJDIudG9KU09OPXRvSVNPU3RyaW5nJDE7cHJvdG8kMi5sb2NhbGU9bG9jYWxlO3Byb3RvJDIubG9jYWxlRGF0YT1sb2NhbGVEYXRhO3Byb3RvJDIudG9Jc29TdHJpbmc9ZGVwcmVjYXRlKCd0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKScsdG9JU09TdHJpbmckMSk7cHJvdG8kMi5sYW5nPWxhbmc7YWRkRm9ybWF0VG9rZW4oJ1gnLDAsMCwndW5peCcpO2FkZEZvcm1hdFRva2VuKCd4JywwLDAsJ3ZhbHVlT2YnKTthZGRSZWdleFRva2VuKCd4JyxtYXRjaFNpZ25lZCk7YWRkUmVnZXhUb2tlbignWCcsbWF0Y2hUaW1lc3RhbXApO2FkZFBhcnNlVG9rZW4oJ1gnLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl9kPW5ldyBEYXRlKHBhcnNlRmxvYXQoaW5wdXQsMTApKjEwMDApO30pO2FkZFBhcnNlVG9rZW4oJ3gnLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl9kPW5ldyBEYXRlKHRvSW50KGlucHV0KSk7fSk7aG9va3MudmVyc2lvbj0nMi4xNy4xJztzZXRIb29rQ2FsbGJhY2soY3JlYXRlTG9jYWwpO2hvb2tzLmZuPXByb3RvO2hvb2tzLm1pbj1taW47aG9va3MubWF4PW1heDtob29rcy5ub3c9bm93O2hvb2tzLnV0Yz1jcmVhdGVVVEM7aG9va3MudW5peD1jcmVhdGVVbml4O2hvb2tzLm1vbnRocz1saXN0TW9udGhzO2hvb2tzLmlzRGF0ZT1pc0RhdGU7aG9va3MubG9jYWxlPWdldFNldEdsb2JhbExvY2FsZTtob29rcy5pbnZhbGlkPWNyZWF0ZUludmFsaWQ7aG9va3MuZHVyYXRpb249Y3JlYXRlRHVyYXRpb247aG9va3MuaXNNb21lbnQ9aXNNb21lbnQ7aG9va3Mud2Vla2RheXM9bGlzdFdlZWtkYXlzO2hvb2tzLnBhcnNlWm9uZT1jcmVhdGVJblpvbmU7aG9va3MubG9jYWxlRGF0YT1nZXRMb2NhbGU7aG9va3MuaXNEdXJhdGlvbj1pc0R1cmF0aW9uO2hvb2tzLm1vbnRoc1Nob3J0PWxpc3RNb250aHNTaG9ydDtob29rcy53ZWVrZGF5c01pbj1saXN0V2Vla2RheXNNaW47aG9va3MuZGVmaW5lTG9jYWxlPWRlZmluZUxvY2FsZTtob29rcy51cGRhdGVMb2NhbGU9dXBkYXRlTG9jYWxlO2hvb2tzLmxvY2FsZXM9bGlzdExvY2FsZXM7aG9va3Mud2Vla2RheXNTaG9ydD1saXN0V2Vla2RheXNTaG9ydDtob29rcy5ub3JtYWxpemVVbml0cz1ub3JtYWxpemVVbml0cztob29rcy5yZWxhdGl2ZVRpbWVSb3VuZGluZz1nZXRTZXRSZWxhdGl2ZVRpbWVSb3VuZGluZztob29rcy5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQ9Z2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkO2hvb2tzLmNhbGVuZGFyRm9ybWF0PWdldENhbGVuZGFyRm9ybWF0O2hvb2tzLnByb3RvdHlwZT1wcm90bztyZXR1cm4gaG9va3M7fSkpKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5L2pxdWVyeS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXsidXNlIHN0cmljdCI7aWYodHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZ0eXBlb2YgbW9kdWxlLmV4cG9ydHM9PT0ib2JqZWN0Iil7bW9kdWxlLmV4cG9ydHM9Z2xvYmFsLmRvY3VtZW50P2ZhY3RvcnkoZ2xvYmFsLHRydWUpOmZ1bmN0aW9uKHcpe2lmKCF3LmRvY3VtZW50KXt0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTt9CnJldHVybiBmYWN0b3J5KHcpO307fWVsc2V7ZmFjdG9yeShnbG9iYWwpO319KSh0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93OnRoaXMsZnVuY3Rpb24od2luZG93LG5vR2xvYmFsKXsidXNlIHN0cmljdCI7dmFyIGFycj1bXTt2YXIgZG9jdW1lbnQ9d2luZG93LmRvY3VtZW50O3ZhciBnZXRQcm90bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Y7dmFyIHNsaWNlPWFyci5zbGljZTt2YXIgY29uY2F0PWFyci5jb25jYXQ7dmFyIHB1c2g9YXJyLnB1c2g7dmFyIGluZGV4T2Y9YXJyLmluZGV4T2Y7dmFyIGNsYXNzMnR5cGU9e307dmFyIHRvU3RyaW5nPWNsYXNzMnR5cGUudG9TdHJpbmc7dmFyIGhhc093bj1jbGFzczJ0eXBlLmhhc093blByb3BlcnR5O3ZhciBmblRvU3RyaW5nPWhhc093bi50b1N0cmluZzt2YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmc9Zm5Ub1N0cmluZy5jYWxsKE9iamVjdCk7dmFyIHN1cHBvcnQ9e307dmFyIGlzRnVuY3Rpb249ZnVuY3Rpb24gaXNGdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIiYmdHlwZW9mIG9iai5ub2RlVHlwZSE9PSJudW1iZXIiO307dmFyIGlzV2luZG93PWZ1bmN0aW9uIGlzV2luZG93KG9iail7cmV0dXJuIG9iaiE9bnVsbCYmb2JqPT09b2JqLndpbmRvdzt9O3ZhciBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzPXt0eXBlOnRydWUsc3JjOnRydWUsbm9Nb2R1bGU6dHJ1ZX07ZnVuY3Rpb24gRE9NRXZhbChjb2RlLGRvYyxub2RlKXtkb2M9ZG9jfHxkb2N1bWVudDt2YXIgaSxzY3JpcHQ9ZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3NjcmlwdC50ZXh0PWNvZGU7aWYobm9kZSl7Zm9yKGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyl7aWYobm9kZVtpXSl7c2NyaXB0W2ldPW5vZGVbaV07fX19CmRvYy5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO30KZnVuY3Rpb24gdG9UeXBlKG9iail7aWYob2JqPT1udWxsKXtyZXR1cm4gb2JqKyIiO30KcmV0dXJuIHR5cGVvZiBvYmo9PT0ib2JqZWN0Inx8dHlwZW9mIG9iaj09PSJmdW5jdGlvbiI/Y2xhc3MydHlwZVt0b1N0cmluZy5jYWxsKG9iaildfHwib2JqZWN0Ijp0eXBlb2Ygb2JqO30KdmFyCnZlcnNpb249IjMuMy4xIixqUXVlcnk9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdChzZWxlY3Rvcixjb250ZXh0KTt9LHJ0cmltPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztqUXVlcnkuZm49alF1ZXJ5LnByb3RvdHlwZT17anF1ZXJ5OnZlcnNpb24sY29uc3RydWN0b3I6alF1ZXJ5LGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTt9LGdldDpmdW5jdGlvbihudW0pe2lmKG51bT09bnVsbCl7cmV0dXJuIHNsaWNlLmNhbGwodGhpcyk7fQpyZXR1cm4gbnVtPDA/dGhpc1tudW0rdGhpcy5sZW5ndGhdOnRoaXNbbnVtXTt9LHB1c2hTdGFjazpmdW5jdGlvbihlbGVtcyl7dmFyIHJldD1qUXVlcnkubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGVsZW1zKTtyZXQucHJldk9iamVjdD10aGlzO3JldHVybiByZXQ7fSxlYWNoOmZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmVhY2godGhpcyxjYWxsYmFjayk7fSxtYXA6ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkubWFwKHRoaXMsZnVuY3Rpb24oZWxlbSxpKXtyZXR1cm4gY2FsbGJhY2suY2FsbChlbGVtLGksZWxlbSk7fSkpO30sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soc2xpY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKTt9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCk7fSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpO30sZXE6ZnVuY3Rpb24oaSl7dmFyIGxlbj10aGlzLmxlbmd0aCxqPStpKyhpPDA/bGVuOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhqPj0wJiZqPGxlbj9bdGhpc1tqXV06W10pO30sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcigpO30scHVzaDpwdXNoLHNvcnQ6YXJyLnNvcnQsc3BsaWNlOmFyci5zcGxpY2V9O2pRdWVyeS5leHRlbmQ9alF1ZXJ5LmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBvcHRpb25zLG5hbWUsc3JjLGNvcHksY29weUlzQXJyYXksY2xvbmUsdGFyZ2V0PWFyZ3VtZW50c1swXXx8e30saT0xLGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGRlZXA9ZmFsc2U7aWYodHlwZW9mIHRhcmdldD09PSJib29sZWFuIil7ZGVlcD10YXJnZXQ7dGFyZ2V0PWFyZ3VtZW50c1tpXXx8e307aSsrO30KaWYodHlwZW9mIHRhcmdldCE9PSJvYmplY3QiJiYhaXNGdW5jdGlvbih0YXJnZXQpKXt0YXJnZXQ9e307fQppZihpPT09bGVuZ3RoKXt0YXJnZXQ9dGhpcztpLS07fQpmb3IoO2k8bGVuZ3RoO2krKyl7aWYoKG9wdGlvbnM9YXJndW1lbnRzW2ldKSE9bnVsbCl7Zm9yKG5hbWUgaW4gb3B0aW9ucyl7c3JjPXRhcmdldFtuYW1lXTtjb3B5PW9wdGlvbnNbbmFtZV07aWYodGFyZ2V0PT09Y29weSl7Y29udGludWU7fQppZihkZWVwJiZjb3B5JiYoalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29weSl8fChjb3B5SXNBcnJheT1BcnJheS5pc0FycmF5KGNvcHkpKSkpe2lmKGNvcHlJc0FycmF5KXtjb3B5SXNBcnJheT1mYWxzZTtjbG9uZT1zcmMmJkFycmF5LmlzQXJyYXkoc3JjKT9zcmM6W107fWVsc2V7Y2xvbmU9c3JjJiZqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpP3NyYzp7fTt9CnRhcmdldFtuYW1lXT1qUXVlcnkuZXh0ZW5kKGRlZXAsY2xvbmUsY29weSk7fWVsc2UgaWYoY29weSE9PXVuZGVmaW5lZCl7dGFyZ2V0W25hbWVdPWNvcHk7fX19fQpyZXR1cm4gdGFyZ2V0O307alF1ZXJ5LmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisodmVyc2lvbitNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OnRydWUsZXJyb3I6ZnVuY3Rpb24obXNnKXt0aHJvdyBuZXcgRXJyb3IobXNnKTt9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24ob2JqKXt2YXIgcHJvdG8sQ3RvcjtpZighb2JqfHx0b1N0cmluZy5jYWxsKG9iaikhPT0iW29iamVjdCBPYmplY3RdIil7cmV0dXJuIGZhbHNlO30KcHJvdG89Z2V0UHJvdG8ob2JqKTtpZighcHJvdG8pe3JldHVybiB0cnVlO30KQ3Rvcj1oYXNPd24uY2FsbChwcm90bywiY29uc3RydWN0b3IiKSYmcHJvdG8uY29uc3RydWN0b3I7cmV0dXJuIHR5cGVvZiBDdG9yPT09ImZ1bmN0aW9uIiYmZm5Ub1N0cmluZy5jYWxsKEN0b3IpPT09T2JqZWN0RnVuY3Rpb25TdHJpbmc7fSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKG9iail7dmFyIG5hbWU7Zm9yKG5hbWUgaW4gb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oY29kZSl7RE9NRXZhbChjb2RlKTt9LGVhY2g6ZnVuY3Rpb24ob2JqLGNhbGxiYWNrKXt2YXIgbGVuZ3RoLGk9MDtpZihpc0FycmF5TGlrZShvYmopKXtsZW5ndGg9b2JqLmxlbmd0aDtmb3IoO2k8bGVuZ3RoO2krKyl7aWYoY2FsbGJhY2suY2FsbChvYmpbaV0saSxvYmpbaV0pPT09ZmFsc2Upe2JyZWFrO319fWVsc2V7Zm9yKGkgaW4gb2JqKXtpZihjYWxsYmFjay5jYWxsKG9ialtpXSxpLG9ialtpXSk9PT1mYWxzZSl7YnJlYWs7fX19CnJldHVybiBvYmo7fSx0cmltOmZ1bmN0aW9uKHRleHQpe3JldHVybiB0ZXh0PT1udWxsPyIiOih0ZXh0KyIiKS5yZXBsYWNlKHJ0cmltLCIiKTt9LG1ha2VBcnJheTpmdW5jdGlvbihhcnIscmVzdWx0cyl7dmFyIHJldD1yZXN1bHRzfHxbXTtpZihhcnIhPW51bGwpe2lmKGlzQXJyYXlMaWtlKE9iamVjdChhcnIpKSl7alF1ZXJ5Lm1lcmdlKHJldCx0eXBlb2YgYXJyPT09InN0cmluZyI/W2Fycl06YXJyKTt9ZWxzZXtwdXNoLmNhbGwocmV0LGFycik7fX0KcmV0dXJuIHJldDt9LGluQXJyYXk6ZnVuY3Rpb24oZWxlbSxhcnIsaSl7cmV0dXJuIGFycj09bnVsbD8tMTppbmRleE9mLmNhbGwoYXJyLGVsZW0saSk7fSxtZXJnZTpmdW5jdGlvbihmaXJzdCxzZWNvbmQpe3ZhciBsZW49K3NlY29uZC5sZW5ndGgsaj0wLGk9Zmlyc3QubGVuZ3RoO2Zvcig7ajxsZW47aisrKXtmaXJzdFtpKytdPXNlY29uZFtqXTt9CmZpcnN0Lmxlbmd0aD1pO3JldHVybiBmaXJzdDt9LGdyZXA6ZnVuY3Rpb24oZWxlbXMsY2FsbGJhY2ssaW52ZXJ0KXt2YXIgY2FsbGJhY2tJbnZlcnNlLG1hdGNoZXM9W10saT0wLGxlbmd0aD1lbGVtcy5sZW5ndGgsY2FsbGJhY2tFeHBlY3Q9IWludmVydDtmb3IoO2k8bGVuZ3RoO2krKyl7Y2FsbGJhY2tJbnZlcnNlPSFjYWxsYmFjayhlbGVtc1tpXSxpKTtpZihjYWxsYmFja0ludmVyc2UhPT1jYWxsYmFja0V4cGVjdCl7bWF0Y2hlcy5wdXNoKGVsZW1zW2ldKTt9fQpyZXR1cm4gbWF0Y2hlczt9LG1hcDpmdW5jdGlvbihlbGVtcyxjYWxsYmFjayxhcmcpe3ZhciBsZW5ndGgsdmFsdWUsaT0wLHJldD1bXTtpZihpc0FycmF5TGlrZShlbGVtcykpe2xlbmd0aD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe3ZhbHVlPWNhbGxiYWNrKGVsZW1zW2ldLGksYXJnKTtpZih2YWx1ZSE9bnVsbCl7cmV0LnB1c2godmFsdWUpO319fWVsc2V7Zm9yKGkgaW4gZWxlbXMpe3ZhbHVlPWNhbGxiYWNrKGVsZW1zW2ldLGksYXJnKTtpZih2YWx1ZSE9bnVsbCl7cmV0LnB1c2godmFsdWUpO319fQpyZXR1cm4gY29uY2F0LmFwcGx5KFtdLHJldCk7fSxndWlkOjEsc3VwcG9ydDpzdXBwb3J0fSk7aWYodHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiIpe2pRdWVyeS5mbltTeW1ib2wuaXRlcmF0b3JdPWFycltTeW1ib2wuaXRlcmF0b3JdO30KalF1ZXJ5LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGksbmFtZSl7Y2xhc3MydHlwZVsiW29iamVjdCAiK25hbWUrIl0iXT1uYW1lLnRvTG93ZXJDYXNlKCk7fSk7ZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXt2YXIgbGVuZ3RoPSEhb2JqJiYibGVuZ3RoImluIG9iaiYmb2JqLmxlbmd0aCx0eXBlPXRvVHlwZShvYmopO2lmKGlzRnVuY3Rpb24ob2JqKXx8aXNXaW5kb3cob2JqKSl7cmV0dXJuIGZhbHNlO30KcmV0dXJuIHR5cGU9PT0iYXJyYXkifHxsZW5ndGg9PT0wfHx0eXBlb2YgbGVuZ3RoPT09Im51bWJlciImJmxlbmd0aD4wJiYobGVuZ3RoLTEpaW4gb2JqO30KdmFyIFNpenpsZT0oZnVuY3Rpb24od2luZG93KXt2YXIgaSxzdXBwb3J0LEV4cHIsZ2V0VGV4dCxpc1hNTCx0b2tlbml6ZSxjb21waWxlLHNlbGVjdCxvdXRlcm1vc3RDb250ZXh0LHNvcnRJbnB1dCxoYXNEdXBsaWNhdGUsc2V0RG9jdW1lbnQsZG9jdW1lbnQsZG9jRWxlbSxkb2N1bWVudElzSFRNTCxyYnVnZ3lRU0EscmJ1Z2d5TWF0Y2hlcyxtYXRjaGVzLGNvbnRhaW5zLGV4cGFuZG89InNpenpsZSIrMSpuZXcgRGF0ZSgpLHByZWZlcnJlZERvYz13aW5kb3cuZG9jdW1lbnQsZGlycnVucz0wLGRvbmU9MCxjbGFzc0NhY2hlPWNyZWF0ZUNhY2hlKCksdG9rZW5DYWNoZT1jcmVhdGVDYWNoZSgpLGNvbXBpbGVyQ2FjaGU9Y3JlYXRlQ2FjaGUoKSxzb3J0T3JkZXI9ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7fQpyZXR1cm4gMDt9LGhhc093bj0oe30pLmhhc093blByb3BlcnR5LGFycj1bXSxwb3A9YXJyLnBvcCxwdXNoX25hdGl2ZT1hcnIucHVzaCxwdXNoPWFyci5wdXNoLHNsaWNlPWFyci5zbGljZSxpbmRleE9mPWZ1bmN0aW9uKGxpc3QsZWxlbSl7dmFyIGk9MCxsZW49bGlzdC5sZW5ndGg7Zm9yKDtpPGxlbjtpKyspe2lmKGxpc3RbaV09PT1lbGVtKXtyZXR1cm4gaTt9fQpyZXR1cm4tMTt9LGJvb2xlYW5zPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsd2hpdGVzcGFjZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsaWRlbnRpZmllcj0iKD86XFxcXC58W1xcdy1dfFteXDAtXFx4YTBdKSsiLGF0dHJpYnV0ZXM9IlxcWyIrd2hpdGVzcGFjZSsiKigiK2lkZW50aWZpZXIrIikoPzoiK3doaXRlc3BhY2UrIiooWypeJHwhfl0/PSkiK3doaXRlc3BhY2UrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitpZGVudGlmaWVyKyIpKXwpIit3aGl0ZXNwYWNlKyIqXFxdIixwc2V1ZG9zPSI6KCIraWRlbnRpZmllcisiKSg/OlxcKCgiKyIoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCIrIigoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrYXR0cmlidXRlcysiKSopfCIrIi4qIisiKVxcKXwpIixyd2hpdGVzcGFjZT1uZXcgUmVnRXhwKHdoaXRlc3BhY2UrIisiLCJnIikscnRyaW09bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIit3aGl0ZXNwYWNlKyIrJCIsImciKSxyY29tbWE9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKiwiK3doaXRlc3BhY2UrIioiKSxyY29tYmluYXRvcnM9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKihbPit+XXwiK3doaXRlc3BhY2UrIikiK3doaXRlc3BhY2UrIioiKSxyYXR0cmlidXRlUXVvdGVzPW5ldyBSZWdFeHAoIj0iK3doaXRlc3BhY2UrIiooW15cXF0nXCJdKj8pIit3aGl0ZXNwYWNlKyIqXFxdIiwiZyIpLHJwc2V1ZG89bmV3IFJlZ0V4cChwc2V1ZG9zKSxyaWRlbnRpZmllcj1uZXcgUmVnRXhwKCJeIitpZGVudGlmaWVyKyIkIiksbWF0Y2hFeHByPXsiSUQiOm5ldyBSZWdFeHAoIl4jKCIraWRlbnRpZmllcisiKSIpLCJDTEFTUyI6bmV3IFJlZ0V4cCgiXlxcLigiK2lkZW50aWZpZXIrIikiKSwiVEFHIjpuZXcgUmVnRXhwKCJeKCIraWRlbnRpZmllcisifFsqXSkiKSwiQVRUUiI6bmV3IFJlZ0V4cCgiXiIrYXR0cmlidXRlcyksIlBTRVVETyI6bmV3IFJlZ0V4cCgiXiIrcHNldWRvcyksIkNISUxEIjpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK3doaXRlc3BhY2UrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK3doaXRlc3BhY2UrIiooPzooWystXXwpIit3aGl0ZXNwYWNlKyIqKFxcZCspfCkpIit3aGl0ZXNwYWNlKyIqXFwpfCkiLCJpIiksImJvb2wiOm5ldyBSZWdFeHAoIl4oPzoiK2Jvb2xlYW5zKyIpJCIsImkiKSwibmVlZHNDb250ZXh0IjpuZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiKwp3aGl0ZXNwYWNlKyIqKCg/Oi1cXGQpP1xcZCopIit3aGl0ZXNwYWNlKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxyaW5wdXRzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2kscmhlYWRlcj0vXmhcZCQvaSxybmF0aXZlPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxycXVpY2tFeHByPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8scnNpYmxpbmc9L1srfl0vLHJ1bmVzY2FwZT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK3doaXRlc3BhY2UrIj98KCIrd2hpdGVzcGFjZSsiKXwuKSIsImlnIiksZnVuZXNjYXBlPWZ1bmN0aW9uKF8sZXNjYXBlZCxlc2NhcGVkV2hpdGVzcGFjZSl7dmFyIGhpZ2g9IjB4Iitlc2NhcGVkLTB4MTAwMDA7cmV0dXJuIGhpZ2ghPT1oaWdofHxlc2NhcGVkV2hpdGVzcGFjZT9lc2NhcGVkOmhpZ2g8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKGhpZ2grMHgxMDAwMCk6U3RyaW5nLmZyb21DaGFyQ29kZShoaWdoPj4xMHwweEQ4MDAsaGlnaCYweDNGRnwweERDMDApO30scmNzc2VzY2FwZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxmY3NzZXNjYXBlPWZ1bmN0aW9uKGNoLGFzQ29kZVBvaW50KXtpZihhc0NvZGVQb2ludCl7aWYoY2g9PT0iXDAiKXtyZXR1cm4iXHVGRkZEIjt9CnJldHVybiBjaC5zbGljZSgwLC0xKSsiXFwiK2NoLmNoYXJDb2RlQXQoY2gubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI7fQpyZXR1cm4iXFwiK2NoO30sdW5sb2FkSGFuZGxlcj1mdW5jdGlvbigpe3NldERvY3VtZW50KCk7fSxkaXNhYmxlZEFuY2VzdG9yPWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT10cnVlJiYoImZvcm0iaW4gZWxlbXx8ImxhYmVsImluIGVsZW0pO30se2RpcjoicGFyZW50Tm9kZSIsbmV4dDoibGVnZW5kIn0pO3RyeXtwdXNoLmFwcGx5KChhcnI9c2xpY2UuY2FsbChwcmVmZXJyZWREb2MuY2hpbGROb2RlcykpLHByZWZlcnJlZERvYy5jaGlsZE5vZGVzKTthcnJbcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZTt9Y2F0Y2goZSl7cHVzaD17YXBwbHk6YXJyLmxlbmd0aD9mdW5jdGlvbih0YXJnZXQsZWxzKXtwdXNoX25hdGl2ZS5hcHBseSh0YXJnZXQsc2xpY2UuY2FsbChlbHMpKTt9OmZ1bmN0aW9uKHRhcmdldCxlbHMpe3ZhciBqPXRhcmdldC5sZW5ndGgsaT0wO3doaWxlKCh0YXJnZXRbaisrXT1lbHNbaSsrXSkpe30KdGFyZ2V0Lmxlbmd0aD1qLTE7fX07fQpmdW5jdGlvbiBTaXp6bGUoc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3ZhciBtLGksZWxlbSxuaWQsbWF0Y2gsZ3JvdXBzLG5ld1NlbGVjdG9yLG5ld0NvbnRleHQ9Y29udGV4dCYmY29udGV4dC5vd25lckRvY3VtZW50LG5vZGVUeXBlPWNvbnRleHQ/Y29udGV4dC5ub2RlVHlwZTo5O3Jlc3VsdHM9cmVzdWx0c3x8W107aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyJ8fCFzZWxlY3Rvcnx8bm9kZVR5cGUhPT0xJiZub2RlVHlwZSE9PTkmJm5vZGVUeXBlIT09MTEpe3JldHVybiByZXN1bHRzO30KaWYoIXNlZWQpe2lmKChjb250ZXh0P2NvbnRleHQub3duZXJEb2N1bWVudHx8Y29udGV4dDpwcmVmZXJyZWREb2MpIT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGNvbnRleHQpO30KY29udGV4dD1jb250ZXh0fHxkb2N1bWVudDtpZihkb2N1bWVudElzSFRNTCl7aWYobm9kZVR5cGUhPT0xMSYmKG1hdGNoPXJxdWlja0V4cHIuZXhlYyhzZWxlY3RvcikpKXtpZigobT1tYXRjaFsxXSkpe2lmKG5vZGVUeXBlPT09OSl7aWYoKGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChtKSkpe2lmKGVsZW0uaWQ9PT1tKXtyZXN1bHRzLnB1c2goZWxlbSk7cmV0dXJuIHJlc3VsdHM7fX1lbHNle3JldHVybiByZXN1bHRzO319ZWxzZXtpZihuZXdDb250ZXh0JiYoZWxlbT1uZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKG0pKSYmY29udGFpbnMoY29udGV4dCxlbGVtKSYmZWxlbS5pZD09PW0pe3Jlc3VsdHMucHVzaChlbGVtKTtyZXR1cm4gcmVzdWx0czt9fX1lbHNlIGlmKG1hdGNoWzJdKXtwdXNoLmFwcGx5KHJlc3VsdHMsY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3RvcikpO3JldHVybiByZXN1bHRzO31lbHNlIGlmKChtPW1hdGNoWzNdKSYmc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3B1c2guYXBwbHkocmVzdWx0cyxjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobSkpO3JldHVybiByZXN1bHRzO319CmlmKHN1cHBvcnQucXNhJiYhY29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdJiYoIXJidWdneVFTQXx8IXJidWdneVFTQS50ZXN0KHNlbGVjdG9yKSkpe2lmKG5vZGVUeXBlIT09MSl7bmV3Q29udGV4dD1jb250ZXh0O25ld1NlbGVjdG9yPXNlbGVjdG9yO31lbHNlIGlmKGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJvYmplY3QiKXtpZigobmlkPWNvbnRleHQuZ2V0QXR0cmlidXRlKCJpZCIpKSl7bmlkPW5pZC5yZXBsYWNlKHJjc3Nlc2NhcGUsZmNzc2VzY2FwZSk7fWVsc2V7Y29udGV4dC5zZXRBdHRyaWJ1dGUoImlkIiwobmlkPWV4cGFuZG8pKTt9Cmdyb3Vwcz10b2tlbml6ZShzZWxlY3Rvcik7aT1ncm91cHMubGVuZ3RoO3doaWxlKGktLSl7Z3JvdXBzW2ldPSIjIituaWQrIiAiK3RvU2VsZWN0b3IoZ3JvdXBzW2ldKTt9Cm5ld1NlbGVjdG9yPWdyb3Vwcy5qb2luKCIsIik7bmV3Q29udGV4dD1yc2libGluZy50ZXN0KHNlbGVjdG9yKSYmdGVzdENvbnRleHQoY29udGV4dC5wYXJlbnROb2RlKXx8Y29udGV4dDt9CmlmKG5ld1NlbGVjdG9yKXt0cnl7cHVzaC5hcHBseShyZXN1bHRzLG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbChuZXdTZWxlY3RvcikpO3JldHVybiByZXN1bHRzO31jYXRjaChxc2FFcnJvcil7fWZpbmFsbHl7aWYobmlkPT09ZXhwYW5kbyl7Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fX19fX19CnJldHVybiBzZWxlY3Qoc2VsZWN0b3IucmVwbGFjZShydHJpbSwiJDEiKSxjb250ZXh0LHJlc3VsdHMsc2VlZCk7fQpmdW5jdGlvbiBjcmVhdGVDYWNoZSgpe3ZhciBrZXlzPVtdO2Z1bmN0aW9uIGNhY2hlKGtleSx2YWx1ZSl7aWYoa2V5cy5wdXNoKGtleSsiICIpPkV4cHIuY2FjaGVMZW5ndGgpe2RlbGV0ZSBjYWNoZVtrZXlzLnNoaWZ0KCldO30KcmV0dXJuKGNhY2hlW2tleSsiICJdPXZhbHVlKTt9CnJldHVybiBjYWNoZTt9CmZ1bmN0aW9uIG1hcmtGdW5jdGlvbihmbil7Zm5bZXhwYW5kb109dHJ1ZTtyZXR1cm4gZm47fQpmdW5jdGlvbiBhc3NlcnQoZm4pe3ZhciBlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpO3RyeXtyZXR1cm4hIWZuKGVsKTt9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlO31maW5hbGx5e2lmKGVsLnBhcmVudE5vZGUpe2VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO30KZWw9bnVsbDt9fQpmdW5jdGlvbiBhZGRIYW5kbGUoYXR0cnMsaGFuZGxlcil7dmFyIGFycj1hdHRycy5zcGxpdCgifCIpLGk9YXJyLmxlbmd0aDt3aGlsZShpLS0pe0V4cHIuYXR0ckhhbmRsZVthcnJbaV1dPWhhbmRsZXI7fX0KZnVuY3Rpb24gc2libGluZ0NoZWNrKGEsYil7dmFyIGN1cj1iJiZhLGRpZmY9Y3VyJiZhLm5vZGVUeXBlPT09MSYmYi5ub2RlVHlwZT09PTEmJmEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihkaWZmKXtyZXR1cm4gZGlmZjt9CmlmKGN1cil7d2hpbGUoKGN1cj1jdXIubmV4dFNpYmxpbmcpKXtpZihjdXI9PT1iKXtyZXR1cm4tMTt9fX0KcmV0dXJuIGE/MTotMTt9CmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKHR5cGUpe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT10eXBlO307fQpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obmFtZT09PSJpbnB1dCJ8fG5hbWU9PT0iYnV0dG9uIikmJmVsZW0udHlwZT09PXR5cGU7fTt9CmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKGRpc2FibGVkKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7aWYoImZvcm0iaW4gZWxlbSl7aWYoZWxlbS5wYXJlbnROb2RlJiZlbGVtLmRpc2FibGVkPT09ZmFsc2Upe2lmKCJsYWJlbCJpbiBlbGVtKXtpZigibGFiZWwiaW4gZWxlbS5wYXJlbnROb2RlKXtyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkPT09ZGlzYWJsZWQ7fWVsc2V7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9fQpyZXR1cm4gZWxlbS5pc0Rpc2FibGVkPT09ZGlzYWJsZWR8fGVsZW0uaXNEaXNhYmxlZCE9PSFkaXNhYmxlZCYmZGlzYWJsZWRBbmNlc3RvcihlbGVtKT09PWRpc2FibGVkO30KcmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9ZWxzZSBpZigibGFiZWwiaW4gZWxlbSl7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmbil7cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihhcmd1bWVudCl7YXJndW1lbnQ9K2FyZ3VtZW50O3JldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzKXt2YXIgaixtYXRjaEluZGV4ZXM9Zm4oW10sc2VlZC5sZW5ndGgsYXJndW1lbnQpLGk9bWF0Y2hJbmRleGVzLmxlbmd0aDt3aGlsZShpLS0pe2lmKHNlZWRbKGo9bWF0Y2hJbmRleGVzW2ldKV0pe3NlZWRbal09IShtYXRjaGVzW2pdPXNlZWRbal0pO319fSk7fSk7fQpmdW5jdGlvbiB0ZXN0Q29udGV4dChjb250ZXh0KXtyZXR1cm4gY29udGV4dCYmdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT0idW5kZWZpbmVkIiYmY29udGV4dDt9CnN1cHBvcnQ9U2l6emxlLnN1cHBvcnQ9e307aXNYTUw9U2l6emxlLmlzWE1MPWZ1bmN0aW9uKGVsZW0pe3ZhciBkb2N1bWVudEVsZW1lbnQ9ZWxlbSYmKGVsZW0ub3duZXJEb2N1bWVudHx8ZWxlbSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBkb2N1bWVudEVsZW1lbnQ/ZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlO307c2V0RG9jdW1lbnQ9U2l6emxlLnNldERvY3VtZW50PWZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNDb21wYXJlLHN1YldpbmRvdyxkb2M9bm9kZT9ub2RlLm93bmVyRG9jdW1lbnR8fG5vZGU6cHJlZmVycmVkRG9jO2lmKGRvYz09PWRvY3VtZW50fHxkb2Mubm9kZVR5cGUhPT05fHwhZG9jLmRvY3VtZW50RWxlbWVudCl7cmV0dXJuIGRvY3VtZW50O30KZG9jdW1lbnQ9ZG9jO2RvY0VsZW09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2RvY3VtZW50SXNIVE1MPSFpc1hNTChkb2N1bWVudCk7aWYocHJlZmVycmVkRG9jIT09ZG9jdW1lbnQmJihzdWJXaW5kb3c9ZG9jdW1lbnQuZGVmYXVsdFZpZXcpJiZzdWJXaW5kb3cudG9wIT09c3ViV2luZG93KXtpZihzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsdW5sb2FkSGFuZGxlcixmYWxzZSk7fWVsc2UgaWYoc3ViV2luZG93LmF0dGFjaEV2ZW50KXtzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix1bmxvYWRIYW5kbGVyKTt9fQpzdXBwb3J0LmF0dHJpYnV0ZXM9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5jbGFzc05hbWU9ImkiO3JldHVybiFlbC5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7cmV0dXJuIWVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1ybmF0aXZlLnRlc3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSk7c3VwcG9ydC5nZXRCeUlkPWFzc2VydChmdW5jdGlvbihlbCl7ZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuaWQ9ZXhwYW5kbztyZXR1cm4hZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWV8fCFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShleHBhbmRvKS5sZW5ndGg7fSk7aWYoc3VwcG9ydC5nZXRCeUlkKXtFeHByLmZpbHRlclsiSUQiXT1mdW5jdGlvbihpZCl7dmFyIGF0dHJJZD1pZC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIik9PT1hdHRySWQ7fTt9O0V4cHIuZmluZFsiSUQiXT1mdW5jdGlvbihpZCxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudElzSFRNTCl7dmFyIGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChpZCk7cmV0dXJuIGVsZW0/W2VsZW1dOltdO319O31lbHNle0V4cHIuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGlkKXt2YXIgYXR0cklkPWlkLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBub2RlPXR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBub2RlJiZub2RlLnZhbHVlPT09YXR0cklkO307fTtFeHByLmZpbmRbIklEIl09ZnVuY3Rpb24oaWQsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3ZhciBub2RlLGksZWxlbXMsZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKGlkKTtpZihlbGVtKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXTt9CmVsZW1zPWNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoaWQpO2k9MDt3aGlsZSgoZWxlbT1lbGVtc1tpKytdKSl7bm9kZT1lbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7aWYobm9kZSYmbm9kZS52YWx1ZT09PWlkKXtyZXR1cm5bZWxlbV07fX19CnJldHVybltdO319O30KRXhwci5maW5kWyJUQUciXT1zdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKHRhZyxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpO31lbHNlIGlmKHN1cHBvcnQucXNhKXtyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHRhZyk7fX06ZnVuY3Rpb24odGFnLGNvbnRleHQpe3ZhciBlbGVtLHRtcD1bXSxpPTAscmVzdWx0cz1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyk7aWYodGFnPT09IioiKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtLm5vZGVUeXBlPT09MSl7dG1wLnB1c2goZWxlbSk7fX0KcmV0dXJuIHRtcDt9CnJldHVybiByZXN1bHRzO307RXhwci5maW5kWyJDTEFTUyJdPXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oY2xhc3NOYW1lLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTt9fTtyYnVnZ3lNYXRjaGVzPVtdO3JidWdneVFTQT1bXTtpZigoc3VwcG9ydC5xc2E9cm5hdGl2ZS50ZXN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpKSl7YXNzZXJ0KGZ1bmN0aW9uKGVsKXtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5pbm5lckhUTUw9IjxhIGlkPSciK2V4cGFuZG8rIic+PC9hPiIrIjxzZWxlY3QgaWQ9JyIrZXhwYW5kbysiLVxyXFwnIG1zYWxsb3djYXB0dXJlPScnPiIrIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlsqXiRdPSIrd2hpdGVzcGFjZSsiKig/OicnfFwiXCIpIik7fQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlxcWyIrd2hpdGVzcGFjZSsiKig/OnZhbHVlfCIrYm9vbGVhbnMrIikiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrZXhwYW5kbysiLV0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJ+PSIpO30KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrZXhwYW5kbysiKyoiKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCIuIy4rWyt+XSIpO319KTthc3NlcnQoZnVuY3Rpb24oZWwpe2VsLmlubmVySFRNTD0iPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT4iKyI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+Ijt2YXIgaW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKTtlbC5hcHBlbmRDaGlsZChpbnB1dCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpO2lmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgibmFtZSIrd2hpdGVzcGFjZSsiKlsqXiR8IX5dPz0iKTt9CmlmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoIT09Mil7cmJ1Z2d5UVNBLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIik7fQpkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5kaXNhYmxlZD10cnVlO2lmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpkaXNhYmxlZCIpLmxlbmd0aCE9PTIpe3JidWdneVFTQS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpO30KZWwucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpO3JidWdneVFTQS5wdXNoKCIsLio6Iik7fSk7fQppZigoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3I9cm5hdGl2ZS50ZXN0KChtYXRjaGVzPWRvY0VsZW0ubWF0Y2hlc3x8ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3J8fGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpKSkpe2Fzc2VydChmdW5jdGlvbihlbCl7c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaD1tYXRjaGVzLmNhbGwoZWwsIioiKTttYXRjaGVzLmNhbGwoZWwsIltzIT0nJ106eCIpO3JidWdneU1hdGNoZXMucHVzaCgiIT0iLHBzZXVkb3MpO30pO30KcmJ1Z2d5UVNBPXJidWdneVFTQS5sZW5ndGgmJm5ldyBSZWdFeHAocmJ1Z2d5UVNBLmpvaW4oInwiKSk7cmJ1Z2d5TWF0Y2hlcz1yYnVnZ3lNYXRjaGVzLmxlbmd0aCYmbmV3IFJlZ0V4cChyYnVnZ3lNYXRjaGVzLmpvaW4oInwiKSk7aGFzQ29tcGFyZT1ybmF0aXZlLnRlc3QoZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik7Y29udGFpbnM9aGFzQ29tcGFyZXx8cm5hdGl2ZS50ZXN0KGRvY0VsZW0uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGFkb3duPWEubm9kZVR5cGU9PT05P2EuZG9jdW1lbnRFbGVtZW50OmEsYnVwPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWJ1cHx8ISEoYnVwJiZidXAubm9kZVR5cGU9PT0xJiYoYWRvd24uY29udGFpbnM/YWRvd24uY29udGFpbnMoYnVwKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGJ1cCkmMTYpKTt9OmZ1bmN0aW9uKGEsYil7aWYoYil7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSl7aWYoYj09PWEpe3JldHVybiB0cnVlO319fQpyZXR1cm4gZmFsc2U7fTtzb3J0T3JkZXI9aGFzQ29tcGFyZT9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZTtyZXR1cm4gMDt9CnZhciBjb21wYXJlPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO2lmKGNvbXBhcmUpe3JldHVybiBjb21wYXJlO30KY29tcGFyZT0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MTtpZihjb21wYXJlJjF8fCghc3VwcG9ydC5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1jb21wYXJlKSl7aWYoYT09PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQ9PT1wcmVmZXJyZWREb2MmJmNvbnRhaW5zKHByZWZlcnJlZERvYyxhKSl7cmV0dXJuLTE7fQppZihiPT09ZG9jdW1lbnR8fGIub3duZXJEb2N1bWVudD09PXByZWZlcnJlZERvYyYmY29udGFpbnMocHJlZmVycmVkRG9jLGIpKXtyZXR1cm4gMTt9CnJldHVybiBzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO30KcmV0dXJuIGNvbXBhcmUmND8tMToxO306ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7cmV0dXJuIDA7fQp2YXIgY3VyLGk9MCxhdXA9YS5wYXJlbnROb2RlLGJ1cD1iLnBhcmVudE5vZGUsYXA9W2FdLGJwPVtiXTtpZighYXVwfHwhYnVwKXtyZXR1cm4gYT09PWRvY3VtZW50Py0xOmI9PT1kb2N1bWVudD8xOmF1cD8tMTpidXA/MTpzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO31lbHNlIGlmKGF1cD09PWJ1cCl7cmV0dXJuIHNpYmxpbmdDaGVjayhhLGIpO30KY3VyPWE7d2hpbGUoKGN1cj1jdXIucGFyZW50Tm9kZSkpe2FwLnVuc2hpZnQoY3VyKTt9CmN1cj1iO3doaWxlKChjdXI9Y3VyLnBhcmVudE5vZGUpKXticC51bnNoaWZ0KGN1cik7fQp3aGlsZShhcFtpXT09PWJwW2ldKXtpKys7fQpyZXR1cm4gaT9zaWJsaW5nQ2hlY2soYXBbaV0sYnBbaV0pOmFwW2ldPT09cHJlZmVycmVkRG9jPy0xOmJwW2ldPT09cHJlZmVycmVkRG9jPzE6MDt9O3JldHVybiBkb2N1bWVudDt9O1NpenpsZS5tYXRjaGVzPWZ1bmN0aW9uKGV4cHIsZWxlbWVudHMpe3JldHVybiBTaXp6bGUoZXhwcixudWxsLG51bGwsZWxlbWVudHMpO307U2l6emxlLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlbGVtLGV4cHIpe2lmKChlbGVtLm93bmVyRG9jdW1lbnR8fGVsZW0pIT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO30KZXhwcj1leHByLnJlcGxhY2UocmF0dHJpYnV0ZVF1b3RlcywiPSckMSddIik7aWYoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3ImJmRvY3VtZW50SXNIVE1MJiYhY29tcGlsZXJDYWNoZVtleHByKyIgIl0mJighcmJ1Z2d5TWF0Y2hlc3x8IXJidWdneU1hdGNoZXMudGVzdChleHByKSkmJighcmJ1Z2d5UVNBfHwhcmJ1Z2d5UVNBLnRlc3QoZXhwcikpKXt0cnl7dmFyIHJldD1tYXRjaGVzLmNhbGwoZWxlbSxleHByKTtpZihyZXR8fHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2h8fGVsZW0uZG9jdW1lbnQmJmVsZW0uZG9jdW1lbnQubm9kZVR5cGUhPT0xMSl7cmV0dXJuIHJldDt9fWNhdGNoKGUpe319CnJldHVybiBTaXp6bGUoZXhwcixkb2N1bWVudCxudWxsLFtlbGVtXSkubGVuZ3RoPjA7fTtTaXp6bGUuY29udGFpbnM9ZnVuY3Rpb24oY29udGV4dCxlbGVtKXtpZigoY29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0KSE9PWRvY3VtZW50KXtzZXREb2N1bWVudChjb250ZXh0KTt9CnJldHVybiBjb250YWlucyhjb250ZXh0LGVsZW0pO307U2l6emxlLmF0dHI9ZnVuY3Rpb24oZWxlbSxuYW1lKXtpZigoZWxlbS5vd25lckRvY3VtZW50fHxlbGVtKSE9PWRvY3VtZW50KXtzZXREb2N1bWVudChlbGVtKTt9CnZhciBmbj1FeHByLmF0dHJIYW5kbGVbbmFtZS50b0xvd2VyQ2FzZSgpXSx2YWw9Zm4mJmhhc093bi5jYWxsKEV4cHIuYXR0ckhhbmRsZSxuYW1lLnRvTG93ZXJDYXNlKCkpP2ZuKGVsZW0sbmFtZSwhZG9jdW1lbnRJc0hUTUwpOnVuZGVmaW5lZDtyZXR1cm4gdmFsIT09dW5kZWZpbmVkP3ZhbDpzdXBwb3J0LmF0dHJpYnV0ZXN8fCFkb2N1bWVudElzSFRNTD9lbGVtLmdldEF0dHJpYnV0ZShuYW1lKToodmFsPWVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkmJnZhbC5zcGVjaWZpZWQ/dmFsLnZhbHVlOm51bGw7fTtTaXp6bGUuZXNjYXBlPWZ1bmN0aW9uKHNlbCl7cmV0dXJuKHNlbCsiIikucmVwbGFjZShyY3NzZXNjYXBlLGZjc3Nlc2NhcGUpO307U2l6emxlLmVycm9yPWZ1bmN0aW9uKG1zZyl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK21zZyk7fTtTaXp6bGUudW5pcXVlU29ydD1mdW5jdGlvbihyZXN1bHRzKXt2YXIgZWxlbSxkdXBsaWNhdGVzPVtdLGo9MCxpPTA7aGFzRHVwbGljYXRlPSFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7c29ydElucHV0PSFzdXBwb3J0LnNvcnRTdGFibGUmJnJlc3VsdHMuc2xpY2UoMCk7cmVzdWx0cy5zb3J0KHNvcnRPcmRlcik7aWYoaGFzRHVwbGljYXRlKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtPT09cmVzdWx0c1tpXSl7aj1kdXBsaWNhdGVzLnB1c2goaSk7fX0Kd2hpbGUoai0tKXtyZXN1bHRzLnNwbGljZShkdXBsaWNhdGVzW2pdLDEpO319CnNvcnRJbnB1dD1udWxsO3JldHVybiByZXN1bHRzO307Z2V0VGV4dD1TaXp6bGUuZ2V0VGV4dD1mdW5jdGlvbihlbGVtKXt2YXIgbm9kZSxyZXQ9IiIsaT0wLG5vZGVUeXBlPWVsZW0ubm9kZVR5cGU7aWYoIW5vZGVUeXBlKXt3aGlsZSgobm9kZT1lbGVtW2krK10pKXtyZXQrPWdldFRleHQobm9kZSk7fX1lbHNlIGlmKG5vZGVUeXBlPT09MXx8bm9kZVR5cGU9PT05fHxub2RlVHlwZT09PTExKXtpZih0eXBlb2YgZWxlbS50ZXh0Q29udGVudD09PSJzdHJpbmciKXtyZXR1cm4gZWxlbS50ZXh0Q29udGVudDt9ZWxzZXtmb3IoZWxlbT1lbGVtLmZpcnN0Q2hpbGQ7ZWxlbTtlbGVtPWVsZW0ubmV4dFNpYmxpbmcpe3JldCs9Z2V0VGV4dChlbGVtKTt9fX1lbHNlIGlmKG5vZGVUeXBlPT09M3x8bm9kZVR5cGU9PT00KXtyZXR1cm4gZWxlbS5ub2RlVmFsdWU7fQpyZXR1cm4gcmV0O307RXhwcj1TaXp6bGUuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bWFya0Z1bmN0aW9uLG1hdGNoOm1hdGNoRXhwcixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDp0cnVlfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OnRydWV9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOnsiQVRUUiI6ZnVuY3Rpb24obWF0Y2gpe21hdGNoWzFdPW1hdGNoWzFdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7bWF0Y2hbM109KG1hdGNoWzNdfHxtYXRjaFs0XXx8bWF0Y2hbNV18fCIiKS5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO2lmKG1hdGNoWzJdPT09In49Iil7bWF0Y2hbM109IiAiK21hdGNoWzNdKyIgIjt9CnJldHVybiBtYXRjaC5zbGljZSgwLDQpO30sIkNISUxEIjpmdW5jdGlvbihtYXRjaCl7bWF0Y2hbMV09bWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtpZihtYXRjaFsxXS5zbGljZSgwLDMpPT09Im50aCIpe2lmKCFtYXRjaFszXSl7U2l6emxlLmVycm9yKG1hdGNoWzBdKTt9Cm1hdGNoWzRdPSsobWF0Y2hbNF0/bWF0Y2hbNV0rKG1hdGNoWzZdfHwxKToyKihtYXRjaFszXT09PSJldmVuInx8bWF0Y2hbM109PT0ib2RkIikpO21hdGNoWzVdPSsoKG1hdGNoWzddK21hdGNoWzhdKXx8bWF0Y2hbM109PT0ib2RkIik7fWVsc2UgaWYobWF0Y2hbM10pe1NpenpsZS5lcnJvcihtYXRjaFswXSk7fQpyZXR1cm4gbWF0Y2g7fSwiUFNFVURPIjpmdW5jdGlvbihtYXRjaCl7dmFyIGV4Y2Vzcyx1bnF1b3RlZD0hbWF0Y2hbNl0mJm1hdGNoWzJdO2lmKG1hdGNoRXhwclsiQ0hJTEQiXS50ZXN0KG1hdGNoWzBdKSl7cmV0dXJuIG51bGw7fQppZihtYXRjaFszXSl7bWF0Y2hbMl09bWF0Y2hbNF18fG1hdGNoWzVdfHwiIjt9ZWxzZSBpZih1bnF1b3RlZCYmcnBzZXVkby50ZXN0KHVucXVvdGVkKSYmKGV4Y2Vzcz10b2tlbml6ZSh1bnF1b3RlZCx0cnVlKSkmJihleGNlc3M9dW5xdW90ZWQuaW5kZXhPZigiKSIsdW5xdW90ZWQubGVuZ3RoLWV4Y2VzcyktdW5xdW90ZWQubGVuZ3RoKSl7bWF0Y2hbMF09bWF0Y2hbMF0uc2xpY2UoMCxleGNlc3MpO21hdGNoWzJdPXVucXVvdGVkLnNsaWNlKDAsZXhjZXNzKTt9CnJldHVybiBtYXRjaC5zbGljZSgwLDMpO319LGZpbHRlcjp7IlRBRyI6ZnVuY3Rpb24obm9kZU5hbWVTZWxlY3Rvcil7dmFyIG5vZGVOYW1lPW5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKS50b0xvd2VyQ2FzZSgpO3JldHVybiBub2RlTmFtZVNlbGVjdG9yPT09IioiP2Z1bmN0aW9uKCl7cmV0dXJuIHRydWU7fTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5ub2RlTmFtZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bm9kZU5hbWU7fTt9LCJDTEFTUyI6ZnVuY3Rpb24oY2xhc3NOYW1lKXt2YXIgcGF0dGVybj1jbGFzc0NhY2hlW2NsYXNzTmFtZSsiICJdO3JldHVybiBwYXR0ZXJufHwocGF0dGVybj1uZXcgUmVnRXhwKCIoXnwiK3doaXRlc3BhY2UrIikiK2NsYXNzTmFtZSsiKCIrd2hpdGVzcGFjZSsifCQpIikpJiZjbGFzc0NhY2hlKGNsYXNzTmFtZSxmdW5jdGlvbihlbGVtKXtyZXR1cm4gcGF0dGVybi50ZXN0KHR5cGVvZiBlbGVtLmNsYXNzTmFtZT09PSJzdHJpbmciJiZlbGVtLmNsYXNzTmFtZXx8dHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlIT09InVuZGVmaW5lZCImJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIik7fSk7fSwiQVRUUiI6ZnVuY3Rpb24obmFtZSxvcGVyYXRvcixjaGVjayl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciByZXN1bHQ9U2l6emxlLmF0dHIoZWxlbSxuYW1lKTtpZihyZXN1bHQ9PW51bGwpe3JldHVybiBvcGVyYXRvcj09PSIhPSI7fQppZighb3BlcmF0b3Ipe3JldHVybiB0cnVlO30KcmVzdWx0Kz0iIjtyZXR1cm4gb3BlcmF0b3I9PT0iPSI/cmVzdWx0PT09Y2hlY2s6b3BlcmF0b3I9PT0iIT0iP3Jlc3VsdCE9PWNoZWNrOm9wZXJhdG9yPT09Il49Ij9jaGVjayYmcmVzdWx0LmluZGV4T2YoY2hlY2spPT09MDpvcGVyYXRvcj09PSIqPSI/Y2hlY2smJnJlc3VsdC5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSIkPSI/Y2hlY2smJnJlc3VsdC5zbGljZSgtY2hlY2subGVuZ3RoKT09PWNoZWNrOm9wZXJhdG9yPT09In49Ij8oIiAiK3Jlc3VsdC5yZXBsYWNlKHJ3aGl0ZXNwYWNlLCIgIikrIiAiKS5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSJ8PSI/cmVzdWx0PT09Y2hlY2t8fHJlc3VsdC5zbGljZSgwLGNoZWNrLmxlbmd0aCsxKT09PWNoZWNrKyItIjpmYWxzZTt9O30sIkNISUxEIjpmdW5jdGlvbih0eXBlLHdoYXQsYXJndW1lbnQsZmlyc3QsbGFzdCl7dmFyIHNpbXBsZT10eXBlLnNsaWNlKDAsMykhPT0ibnRoIixmb3J3YXJkPXR5cGUuc2xpY2UoLTQpIT09Imxhc3QiLG9mVHlwZT13aGF0PT09Im9mLXR5cGUiO3JldHVybiBmaXJzdD09PTEmJmxhc3Q9PT0wP2Z1bmN0aW9uKGVsZW0pe3JldHVybiEhZWxlbS5wYXJlbnROb2RlO306ZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIGNhY2hlLHVuaXF1ZUNhY2hlLG91dGVyQ2FjaGUsbm9kZSxub2RlSW5kZXgsc3RhcnQsZGlyPXNpbXBsZSE9PWZvcndhcmQ/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlLG5hbWU9b2ZUeXBlJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksdXNlQ2FjaGU9IXhtbCYmIW9mVHlwZSxkaWZmPWZhbHNlO2lmKHBhcmVudCl7aWYoc2ltcGxlKXt3aGlsZShkaXIpe25vZGU9ZWxlbTt3aGlsZSgobm9kZT1ub2RlW2Rpcl0pKXtpZihvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSl7cmV0dXJuIGZhbHNlO319CnN0YXJ0PWRpcj10eXBlPT09Im9ubHkiJiYhc3RhcnQmJiJuZXh0U2libGluZyI7fQpyZXR1cm4gdHJ1ZTt9CnN0YXJ0PVtmb3J3YXJkP3BhcmVudC5maXJzdENoaWxkOnBhcmVudC5sYXN0Q2hpbGRdO2lmKGZvcndhcmQmJnVzZUNhY2hlKXtub2RlPXBhcmVudDtvdXRlckNhY2hlPW5vZGVbZXhwYW5kb118fChub2RlW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW25vZGUudW5pcXVlSURdfHwob3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXT17fSk7Y2FjaGU9dW5pcXVlQ2FjaGVbdHlwZV18fFtdO25vZGVJbmRleD1jYWNoZVswXT09PWRpcnJ1bnMmJmNhY2hlWzFdO2RpZmY9bm9kZUluZGV4JiZjYWNoZVsyXTtub2RlPW5vZGVJbmRleCYmcGFyZW50LmNoaWxkTm9kZXNbbm9kZUluZGV4XTt3aGlsZSgobm9kZT0rK25vZGVJbmRleCYmbm9kZSYmbm9kZVtkaXJdfHwoZGlmZj1ub2RlSW5kZXg9MCl8fHN0YXJ0LnBvcCgpKSl7aWYobm9kZS5ub2RlVHlwZT09PTEmJisrZGlmZiYmbm9kZT09PWVsZW0pe3VuaXF1ZUNhY2hlW3R5cGVdPVtkaXJydW5zLG5vZGVJbmRleCxkaWZmXTticmVhazt9fX1lbHNle2lmKHVzZUNhY2hlKXtub2RlPWVsZW07b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleDt9CmlmKGRpZmY9PT1mYWxzZSl7d2hpbGUoKG5vZGU9Kytub2RlSW5kZXgmJm5vZGUmJm5vZGVbZGlyXXx8KGRpZmY9bm9kZUluZGV4PTApfHxzdGFydC5wb3AoKSkpe2lmKChvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSkmJisrZGlmZil7aWYodXNlQ2FjaGUpe291dGVyQ2FjaGU9bm9kZVtleHBhbmRvXXx8KG5vZGVbZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF18fChvdXRlckNhY2hlW25vZGUudW5pcXVlSURdPXt9KTt1bmlxdWVDYWNoZVt0eXBlXT1bZGlycnVucyxkaWZmXTt9CmlmKG5vZGU9PT1lbGVtKXticmVhazt9fX19fQpkaWZmLT1sYXN0O3JldHVybiBkaWZmPT09Zmlyc3R8fChkaWZmJWZpcnN0PT09MCYmZGlmZi9maXJzdD49MCk7fX07fSwiUFNFVURPIjpmdW5jdGlvbihwc2V1ZG8sYXJndW1lbnQpe3ZhciBhcmdzLGZuPUV4cHIucHNldWRvc1twc2V1ZG9dfHxFeHByLnNldEZpbHRlcnNbcHNldWRvLnRvTG93ZXJDYXNlKCldfHxTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitwc2V1ZG8pO2lmKGZuW2V4cGFuZG9dKXtyZXR1cm4gZm4oYXJndW1lbnQpO30KaWYoZm4ubGVuZ3RoPjEpe2FyZ3M9W3BzZXVkbyxwc2V1ZG8sIiIsYXJndW1lbnRdO3JldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkocHNldWRvLnRvTG93ZXJDYXNlKCkpP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBpZHgsbWF0Y2hlZD1mbihzZWVkLGFyZ3VtZW50KSxpPW1hdGNoZWQubGVuZ3RoO3doaWxlKGktLSl7aWR4PWluZGV4T2Yoc2VlZCxtYXRjaGVkW2ldKTtzZWVkW2lkeF09IShtYXRjaGVzW2lkeF09bWF0Y2hlZFtpXSk7fX0pOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBmbihlbGVtLDAsYXJncyk7fTt9CnJldHVybiBmbjt9fSxwc2V1ZG9zOnsibm90IjptYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBpbnB1dD1bXSxyZXN1bHRzPVtdLG1hdGNoZXI9Y29tcGlsZShzZWxlY3Rvci5yZXBsYWNlKHJ0cmltLCIkMSIpKTtyZXR1cm4gbWF0Y2hlcltleHBhbmRvXT9tYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzLGNvbnRleHQseG1sKXt2YXIgZWxlbSx1bm1hdGNoZWQ9bWF0Y2hlcihzZWVkLG51bGwseG1sLFtdKSxpPXNlZWQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7c2VlZFtpXT0hKG1hdGNoZXNbaV09ZWxlbSk7fX19KTpmdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXtpbnB1dFswXT1lbGVtO21hdGNoZXIoaW5wdXQsbnVsbCx4bWwscmVzdWx0cyk7aW5wdXRbMF09bnVsbDtyZXR1cm4hcmVzdWx0cy5wb3AoKTt9O30pLCJoYXMiOm1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3JldHVybiBTaXp6bGUoc2VsZWN0b3IsZWxlbSkubGVuZ3RoPjA7fTt9KSwiY29udGFpbnMiOm1hcmtGdW5jdGlvbihmdW5jdGlvbih0ZXh0KXt0ZXh0PXRleHQucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGVsZW0udGV4dENvbnRlbnR8fGVsZW0uaW5uZXJUZXh0fHxnZXRUZXh0KGVsZW0pKS5pbmRleE9mKHRleHQpPi0xO307fSksImxhbmciOm1hcmtGdW5jdGlvbihmdW5jdGlvbihsYW5nKXtpZighcmlkZW50aWZpZXIudGVzdChsYW5nfHwiIikpe1NpenpsZS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIitsYW5nKTt9Cmxhbmc9bGFuZy5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBlbGVtTGFuZztkb3tpZigoZWxlbUxhbmc9ZG9jdW1lbnRJc0hUTUw/ZWxlbS5sYW5nOmVsZW0uZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxlbGVtLmdldEF0dHJpYnV0ZSgibGFuZyIpKSl7ZWxlbUxhbmc9ZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtyZXR1cm4gZWxlbUxhbmc9PT1sYW5nfHxlbGVtTGFuZy5pbmRleE9mKGxhbmcrIi0iKT09PTA7fX13aGlsZSgoZWxlbT1lbGVtLnBhcmVudE5vZGUpJiZlbGVtLm5vZGVUeXBlPT09MSk7cmV0dXJuIGZhbHNlO307fSksInRhcmdldCI6ZnVuY3Rpb24oZWxlbSl7dmFyIGhhc2g9d2luZG93LmxvY2F0aW9uJiZ3aW5kb3cubG9jYXRpb24uaGFzaDtyZXR1cm4gaGFzaCYmaGFzaC5zbGljZSgxKT09PWVsZW0uaWQ7fSwicm9vdCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1kb2NFbGVtO30sImZvY3VzIjpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbT09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJighZG9jdW1lbnQuaGFzRm9jdXN8fGRvY3VtZW50Lmhhc0ZvY3VzKCkpJiYhIShlbGVtLnR5cGV8fGVsZW0uaHJlZnx8fmVsZW0udGFiSW5kZXgpO30sImVuYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKGZhbHNlKSwiZGlzYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKHRydWUpLCJjaGVja2VkIjpmdW5jdGlvbihlbGVtKXt2YXIgbm9kZU5hbWU9ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihub2RlTmFtZT09PSJpbnB1dCImJiEhZWxlbS5jaGVja2VkKXx8KG5vZGVOYW1lPT09Im9wdGlvbiImJiEhZWxlbS5zZWxlY3RlZCk7fSwic2VsZWN0ZWQiOmZ1bmN0aW9uKGVsZW0pe2lmKGVsZW0ucGFyZW50Tm9kZSl7ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fQpyZXR1cm4gZWxlbS5zZWxlY3RlZD09PXRydWU7fSwiZW1wdHkiOmZ1bmN0aW9uKGVsZW0pe2ZvcihlbGVtPWVsZW0uZmlyc3RDaGlsZDtlbGVtO2VsZW09ZWxlbS5uZXh0U2libGluZyl7aWYoZWxlbS5ub2RlVHlwZTw2KXtyZXR1cm4gZmFsc2U7fX0KcmV0dXJuIHRydWU7fSwicGFyZW50IjpmdW5jdGlvbihlbGVtKXtyZXR1cm4hRXhwci5wc2V1ZG9zWyJlbXB0eSJdKGVsZW0pO30sImhlYWRlciI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHJoZWFkZXIudGVzdChlbGVtLm5vZGVOYW1lKTt9LCJpbnB1dCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHJpbnB1dHMudGVzdChlbGVtLm5vZGVOYW1lKTt9LCJidXR0b24iOmZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gbmFtZT09PSJpbnB1dCImJmVsZW0udHlwZT09PSJidXR0b24ifHxuYW1lPT09ImJ1dHRvbiI7fSwidGV4dCI6ZnVuY3Rpb24oZWxlbSl7dmFyIGF0dHI7cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJmVsZW0udHlwZT09PSJ0ZXh0IiYmKChhdHRyPWVsZW0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpPT1udWxsfHxhdHRyLnRvTG93ZXJDYXNlKCk9PT0idGV4dCIpO30sImZpcnN0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCl7cmV0dXJuWzBdO30pLCJsYXN0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3JldHVybltsZW5ndGgtMV07fSksImVxIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3JldHVyblthcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudF07fSksImV2ZW4iOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24obWF0Y2hJbmRleGVzLGxlbmd0aCl7dmFyIGk9MDtmb3IoO2k8bGVuZ3RoO2krPTIpe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KSwib2RkIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3ZhciBpPTE7Zm9yKDtpPGxlbmd0aDtpKz0yKXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImx0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50O2Zvcig7LS1pPj0wOyl7bWF0Y2hJbmRleGVzLnB1c2goaSk7fQpyZXR1cm4gbWF0Y2hJbmRleGVzO30pLCJndCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihtYXRjaEluZGV4ZXMsbGVuZ3RoLGFyZ3VtZW50KXt2YXIgaT1hcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudDtmb3IoOysraTxsZW5ndGg7KXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSl9fTtFeHByLnBzZXVkb3NbIm50aCJdPUV4cHIucHNldWRvc1siZXEiXTtmb3IoaSBpbntyYWRpbzp0cnVlLGNoZWNrYm94OnRydWUsZmlsZTp0cnVlLHBhc3N3b3JkOnRydWUsaW1hZ2U6dHJ1ZX0pe0V4cHIucHNldWRvc1tpXT1jcmVhdGVJbnB1dFBzZXVkbyhpKTt9CmZvcihpIGlue3N1Ym1pdDp0cnVlLHJlc2V0OnRydWV9KXtFeHByLnBzZXVkb3NbaV09Y3JlYXRlQnV0dG9uUHNldWRvKGkpO30KZnVuY3Rpb24gc2V0RmlsdGVycygpe30Kc2V0RmlsdGVycy5wcm90b3R5cGU9RXhwci5maWx0ZXJzPUV4cHIucHNldWRvcztFeHByLnNldEZpbHRlcnM9bmV3IHNldEZpbHRlcnMoKTt0b2tlbml6ZT1TaXp6bGUudG9rZW5pemU9ZnVuY3Rpb24oc2VsZWN0b3IscGFyc2VPbmx5KXt2YXIgbWF0Y2hlZCxtYXRjaCx0b2tlbnMsdHlwZSxzb0Zhcixncm91cHMscHJlRmlsdGVycyxjYWNoZWQ9dG9rZW5DYWNoZVtzZWxlY3RvcisiICJdO2lmKGNhY2hlZCl7cmV0dXJuIHBhcnNlT25seT8wOmNhY2hlZC5zbGljZSgwKTt9CnNvRmFyPXNlbGVjdG9yO2dyb3Vwcz1bXTtwcmVGaWx0ZXJzPUV4cHIucHJlRmlsdGVyO3doaWxlKHNvRmFyKXtpZighbWF0Y2hlZHx8KG1hdGNoPXJjb21tYS5leGVjKHNvRmFyKSkpe2lmKG1hdGNoKXtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaFswXS5sZW5ndGgpfHxzb0Zhcjt9Cmdyb3Vwcy5wdXNoKCh0b2tlbnM9W10pKTt9Cm1hdGNoZWQ9ZmFsc2U7aWYoKG1hdGNoPXJjb21iaW5hdG9ycy5leGVjKHNvRmFyKSkpe21hdGNoZWQ9bWF0Y2guc2hpZnQoKTt0b2tlbnMucHVzaCh7dmFsdWU6bWF0Y2hlZCx0eXBlOm1hdGNoWzBdLnJlcGxhY2UocnRyaW0sIiAiKX0pO3NvRmFyPXNvRmFyLnNsaWNlKG1hdGNoZWQubGVuZ3RoKTt9CmZvcih0eXBlIGluIEV4cHIuZmlsdGVyKXtpZigobWF0Y2g9bWF0Y2hFeHByW3R5cGVdLmV4ZWMoc29GYXIpKSYmKCFwcmVGaWx0ZXJzW3R5cGVdfHwobWF0Y2g9cHJlRmlsdGVyc1t0eXBlXShtYXRjaCkpKSl7bWF0Y2hlZD1tYXRjaC5zaGlmdCgpO3Rva2Vucy5wdXNoKHt2YWx1ZTptYXRjaGVkLHR5cGU6dHlwZSxtYXRjaGVzOm1hdGNofSk7c29GYXI9c29GYXIuc2xpY2UobWF0Y2hlZC5sZW5ndGgpO319CmlmKCFtYXRjaGVkKXticmVhazt9fQpyZXR1cm4gcGFyc2VPbmx5P3NvRmFyLmxlbmd0aDpzb0Zhcj9TaXp6bGUuZXJyb3Ioc2VsZWN0b3IpOnRva2VuQ2FjaGUoc2VsZWN0b3IsZ3JvdXBzKS5zbGljZSgwKTt9O2Z1bmN0aW9uIHRvU2VsZWN0b3IodG9rZW5zKXt2YXIgaT0wLGxlbj10b2tlbnMubGVuZ3RoLHNlbGVjdG9yPSIiO2Zvcig7aTxsZW47aSsrKXtzZWxlY3Rvcis9dG9rZW5zW2ldLnZhbHVlO30KcmV0dXJuIHNlbGVjdG9yO30KZnVuY3Rpb24gYWRkQ29tYmluYXRvcihtYXRjaGVyLGNvbWJpbmF0b3IsYmFzZSl7dmFyIGRpcj1jb21iaW5hdG9yLmRpcixza2lwPWNvbWJpbmF0b3IubmV4dCxrZXk9c2tpcHx8ZGlyLGNoZWNrTm9uRWxlbWVudHM9YmFzZSYma2V5PT09InBhcmVudE5vZGUiLGRvbmVOYW1lPWRvbmUrKztyZXR1cm4gY29tYmluYXRvci5maXJzdD9mdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pKXtpZihlbGVtLm5vZGVUeXBlPT09MXx8Y2hlY2tOb25FbGVtZW50cyl7cmV0dXJuIG1hdGNoZXIoZWxlbSxjb250ZXh0LHhtbCk7fX0KcmV0dXJuIGZhbHNlO306ZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIG9sZENhY2hlLHVuaXF1ZUNhY2hlLG91dGVyQ2FjaGUsbmV3Q2FjaGU9W2RpcnJ1bnMsZG9uZU5hbWVdO2lmKHhtbCl7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSl7aWYoZWxlbS5ub2RlVHlwZT09PTF8fGNoZWNrTm9uRWxlbWVudHMpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0LHhtbCkpe3JldHVybiB0cnVlO319fX1lbHNle3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtvdXRlckNhY2hlPWVsZW1bZXhwYW5kb118fChlbGVtW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW2VsZW0udW5pcXVlSURdfHwob3V0ZXJDYWNoZVtlbGVtLnVuaXF1ZUlEXT17fSk7aWYoc2tpcCYmc2tpcD09PWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7ZWxlbT1lbGVtW2Rpcl18fGVsZW07fWVsc2UgaWYoKG9sZENhY2hlPXVuaXF1ZUNhY2hlW2tleV0pJiZvbGRDYWNoZVswXT09PWRpcnJ1bnMmJm9sZENhY2hlWzFdPT09ZG9uZU5hbWUpe3JldHVybihuZXdDYWNoZVsyXT1vbGRDYWNoZVsyXSk7fWVsc2V7dW5pcXVlQ2FjaGVba2V5XT1uZXdDYWNoZTtpZigobmV3Q2FjaGVbMl09bWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKSkpe3JldHVybiB0cnVlO319fX19CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpe3JldHVybiBtYXRjaGVycy5sZW5ndGg+MT9mdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt2YXIgaT1tYXRjaGVycy5sZW5ndGg7d2hpbGUoaS0tKXtpZighbWF0Y2hlcnNbaV0oZWxlbSxjb250ZXh0LHhtbCkpe3JldHVybiBmYWxzZTt9fQpyZXR1cm4gdHJ1ZTt9Om1hdGNoZXJzWzBdO30KZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyhzZWxlY3Rvcixjb250ZXh0cyxyZXN1bHRzKXt2YXIgaT0wLGxlbj1jb250ZXh0cy5sZW5ndGg7Zm9yKDtpPGxlbjtpKyspe1NpenpsZShzZWxlY3Rvcixjb250ZXh0c1tpXSxyZXN1bHRzKTt9CnJldHVybiByZXN1bHRzO30KZnVuY3Rpb24gY29uZGVuc2UodW5tYXRjaGVkLG1hcCxmaWx0ZXIsY29udGV4dCx4bWwpe3ZhciBlbGVtLG5ld1VubWF0Y2hlZD1bXSxpPTAsbGVuPXVubWF0Y2hlZC5sZW5ndGgsbWFwcGVkPW1hcCE9bnVsbDtmb3IoO2k8bGVuO2krKyl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7aWYoIWZpbHRlcnx8ZmlsdGVyKGVsZW0sY29udGV4dCx4bWwpKXtuZXdVbm1hdGNoZWQucHVzaChlbGVtKTtpZihtYXBwZWQpe21hcC5wdXNoKGkpO319fX0KcmV0dXJuIG5ld1VubWF0Y2hlZDt9CmZ1bmN0aW9uIHNldE1hdGNoZXIocHJlRmlsdGVyLHNlbGVjdG9yLG1hdGNoZXIscG9zdEZpbHRlcixwb3N0RmluZGVyLHBvc3RTZWxlY3Rvcil7aWYocG9zdEZpbHRlciYmIXBvc3RGaWx0ZXJbZXhwYW5kb10pe3Bvc3RGaWx0ZXI9c2V0TWF0Y2hlcihwb3N0RmlsdGVyKTt9CmlmKHBvc3RGaW5kZXImJiFwb3N0RmluZGVyW2V4cGFuZG9dKXtwb3N0RmluZGVyPXNldE1hdGNoZXIocG9zdEZpbmRlcixwb3N0U2VsZWN0b3IpO30KcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLHJlc3VsdHMsY29udGV4dCx4bWwpe3ZhciB0ZW1wLGksZWxlbSxwcmVNYXA9W10scG9zdE1hcD1bXSxwcmVleGlzdGluZz1yZXN1bHRzLmxlbmd0aCxlbGVtcz1zZWVkfHxtdWx0aXBsZUNvbnRleHRzKHNlbGVjdG9yfHwiKiIsY29udGV4dC5ub2RlVHlwZT9bY29udGV4dF06Y29udGV4dCxbXSksbWF0Y2hlckluPXByZUZpbHRlciYmKHNlZWR8fCFzZWxlY3Rvcik/Y29uZGVuc2UoZWxlbXMscHJlTWFwLHByZUZpbHRlcixjb250ZXh0LHhtbCk6ZWxlbXMsbWF0Y2hlck91dD1tYXRjaGVyP3Bvc3RGaW5kZXJ8fChzZWVkP3ByZUZpbHRlcjpwcmVleGlzdGluZ3x8cG9zdEZpbHRlcik/W106cmVzdWx0czptYXRjaGVySW47aWYobWF0Y2hlcil7bWF0Y2hlcihtYXRjaGVySW4sbWF0Y2hlck91dCxjb250ZXh0LHhtbCk7fQppZihwb3N0RmlsdGVyKXt0ZW1wPWNvbmRlbnNlKG1hdGNoZXJPdXQscG9zdE1hcCk7cG9zdEZpbHRlcih0ZW1wLFtdLGNvbnRleHQseG1sKTtpPXRlbXAubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09dGVtcFtpXSkpe21hdGNoZXJPdXRbcG9zdE1hcFtpXV09IShtYXRjaGVySW5bcG9zdE1hcFtpXV09ZWxlbSk7fX19CmlmKHNlZWQpe2lmKHBvc3RGaW5kZXJ8fHByZUZpbHRlcil7aWYocG9zdEZpbmRlcil7dGVtcD1bXTtpPW1hdGNoZXJPdXQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09bWF0Y2hlck91dFtpXSkpe3RlbXAucHVzaCgobWF0Y2hlckluW2ldPWVsZW0pKTt9fQpwb3N0RmluZGVyKG51bGwsKG1hdGNoZXJPdXQ9W10pLHRlbXAseG1sKTt9Cmk9bWF0Y2hlck91dC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT1tYXRjaGVyT3V0W2ldKSYmKHRlbXA9cG9zdEZpbmRlcj9pbmRleE9mKHNlZWQsZWxlbSk6cHJlTWFwW2ldKT4tMSl7c2VlZFt0ZW1wXT0hKHJlc3VsdHNbdGVtcF09ZWxlbSk7fX19fWVsc2V7bWF0Y2hlck91dD1jb25kZW5zZShtYXRjaGVyT3V0PT09cmVzdWx0cz9tYXRjaGVyT3V0LnNwbGljZShwcmVleGlzdGluZyxtYXRjaGVyT3V0Lmxlbmd0aCk6bWF0Y2hlck91dCk7aWYocG9zdEZpbmRlcil7cG9zdEZpbmRlcihudWxsLHJlc3VsdHMsbWF0Y2hlck91dCx4bWwpO31lbHNle3B1c2guYXBwbHkocmVzdWx0cyxtYXRjaGVyT3V0KTt9fX0pO30KZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zKXt2YXIgY2hlY2tDb250ZXh0LG1hdGNoZXIsaixsZW49dG9rZW5zLmxlbmd0aCxsZWFkaW5nUmVsYXRpdmU9RXhwci5yZWxhdGl2ZVt0b2tlbnNbMF0udHlwZV0saW1wbGljaXRSZWxhdGl2ZT1sZWFkaW5nUmVsYXRpdmV8fEV4cHIucmVsYXRpdmVbIiAiXSxpPWxlYWRpbmdSZWxhdGl2ZT8xOjAsbWF0Y2hDb250ZXh0PWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1jaGVja0NvbnRleHQ7fSxpbXBsaWNpdFJlbGF0aXZlLHRydWUpLG1hdGNoQW55Q29udGV4dD1hZGRDb21iaW5hdG9yKGZ1bmN0aW9uKGVsZW0pe3JldHVybiBpbmRleE9mKGNoZWNrQ29udGV4dCxlbGVtKT4tMTt9LGltcGxpY2l0UmVsYXRpdmUsdHJ1ZSksbWF0Y2hlcnM9W2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciByZXQ9KCFsZWFkaW5nUmVsYXRpdmUmJih4bWx8fGNvbnRleHQhPT1vdXRlcm1vc3RDb250ZXh0KSl8fCgoY2hlY2tDb250ZXh0PWNvbnRleHQpLm5vZGVUeXBlP21hdGNoQ29udGV4dChlbGVtLGNvbnRleHQseG1sKTptYXRjaEFueUNvbnRleHQoZWxlbSxjb250ZXh0LHhtbCkpO2NoZWNrQ29udGV4dD1udWxsO3JldHVybiByZXQ7fV07Zm9yKDtpPGxlbjtpKyspe2lmKChtYXRjaGVyPUV4cHIucmVsYXRpdmVbdG9rZW5zW2ldLnR5cGVdKSl7bWF0Y2hlcnM9W2FkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpLG1hdGNoZXIpXTt9ZWxzZXttYXRjaGVyPUV4cHIuZmlsdGVyW3Rva2Vuc1tpXS50eXBlXS5hcHBseShudWxsLHRva2Vuc1tpXS5tYXRjaGVzKTtpZihtYXRjaGVyW2V4cGFuZG9dKXtqPSsraTtmb3IoO2o8bGVuO2orKyl7aWYoRXhwci5yZWxhdGl2ZVt0b2tlbnNbal0udHlwZV0pe2JyZWFrO319CnJldHVybiBzZXRNYXRjaGVyKGk+MSYmZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpLGk+MSYmdG9TZWxlY3Rvcih0b2tlbnMuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6dG9rZW5zW2ktMl0udHlwZT09PSIgIj8iKiI6IiJ9KSkucmVwbGFjZShydHJpbSwiJDEiKSxtYXRjaGVyLGk8aiYmbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zLnNsaWNlKGksaikpLGo8bGVuJiZtYXRjaGVyRnJvbVRva2VucygodG9rZW5zPXRva2Vucy5zbGljZShqKSkpLGo8bGVuJiZ0b1NlbGVjdG9yKHRva2VucykpO30KbWF0Y2hlcnMucHVzaChtYXRjaGVyKTt9fQpyZXR1cm4gZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpO30KZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycyl7dmFyIGJ5U2V0PXNldE1hdGNoZXJzLmxlbmd0aD4wLGJ5RWxlbWVudD1lbGVtZW50TWF0Y2hlcnMubGVuZ3RoPjAsc3VwZXJNYXRjaGVyPWZ1bmN0aW9uKHNlZWQsY29udGV4dCx4bWwscmVzdWx0cyxvdXRlcm1vc3Qpe3ZhciBlbGVtLGosbWF0Y2hlcixtYXRjaGVkQ291bnQ9MCxpPSIwIix1bm1hdGNoZWQ9c2VlZCYmW10sc2V0TWF0Y2hlZD1bXSxjb250ZXh0QmFja3VwPW91dGVybW9zdENvbnRleHQsZWxlbXM9c2VlZHx8YnlFbGVtZW50JiZFeHByLmZpbmRbIlRBRyJdKCIqIixvdXRlcm1vc3QpLGRpcnJ1bnNVbmlxdWU9KGRpcnJ1bnMrPWNvbnRleHRCYWNrdXA9PW51bGw/MTpNYXRoLnJhbmRvbSgpfHwwLjEpLGxlbj1lbGVtcy5sZW5ndGg7aWYob3V0ZXJtb3N0KXtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHQ9PT1kb2N1bWVudHx8Y29udGV4dHx8b3V0ZXJtb3N0O30KZm9yKDtpIT09bGVuJiYoZWxlbT1lbGVtc1tpXSkhPW51bGw7aSsrKXtpZihieUVsZW1lbnQmJmVsZW0pe2o9MDtpZighY29udGV4dCYmZWxlbS5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO3htbD0hZG9jdW1lbnRJc0hUTUw7fQp3aGlsZSgobWF0Y2hlcj1lbGVtZW50TWF0Y2hlcnNbaisrXSkpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0fHxkb2N1bWVudCx4bWwpKXtyZXN1bHRzLnB1c2goZWxlbSk7YnJlYWs7fX0KaWYob3V0ZXJtb3N0KXtkaXJydW5zPWRpcnJ1bnNVbmlxdWU7fX0KaWYoYnlTZXQpe2lmKChlbGVtPSFtYXRjaGVyJiZlbGVtKSl7bWF0Y2hlZENvdW50LS07fQppZihzZWVkKXt1bm1hdGNoZWQucHVzaChlbGVtKTt9fX0KbWF0Y2hlZENvdW50Kz1pO2lmKGJ5U2V0JiZpIT09bWF0Y2hlZENvdW50KXtqPTA7d2hpbGUoKG1hdGNoZXI9c2V0TWF0Y2hlcnNbaisrXSkpe21hdGNoZXIodW5tYXRjaGVkLHNldE1hdGNoZWQsY29udGV4dCx4bWwpO30KaWYoc2VlZCl7aWYobWF0Y2hlZENvdW50PjApe3doaWxlKGktLSl7aWYoISh1bm1hdGNoZWRbaV18fHNldE1hdGNoZWRbaV0pKXtzZXRNYXRjaGVkW2ldPXBvcC5jYWxsKHJlc3VsdHMpO319fQpzZXRNYXRjaGVkPWNvbmRlbnNlKHNldE1hdGNoZWQpO30KcHVzaC5hcHBseShyZXN1bHRzLHNldE1hdGNoZWQpO2lmKG91dGVybW9zdCYmIXNlZWQmJnNldE1hdGNoZWQubGVuZ3RoPjAmJihtYXRjaGVkQ291bnQrc2V0TWF0Y2hlcnMubGVuZ3RoKT4xKXtTaXp6bGUudW5pcXVlU29ydChyZXN1bHRzKTt9fQppZihvdXRlcm1vc3Qpe2RpcnJ1bnM9ZGlycnVuc1VuaXF1ZTtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHRCYWNrdXA7fQpyZXR1cm4gdW5tYXRjaGVkO307cmV0dXJuIGJ5U2V0P21hcmtGdW5jdGlvbihzdXBlck1hdGNoZXIpOnN1cGVyTWF0Y2hlcjt9CmNvbXBpbGU9U2l6emxlLmNvbXBpbGU9ZnVuY3Rpb24oc2VsZWN0b3IsbWF0Y2gpe3ZhciBpLHNldE1hdGNoZXJzPVtdLGVsZW1lbnRNYXRjaGVycz1bXSxjYWNoZWQ9Y29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdO2lmKCFjYWNoZWQpe2lmKCFtYXRjaCl7bWF0Y2g9dG9rZW5pemUoc2VsZWN0b3IpO30KaT1tYXRjaC5sZW5ndGg7d2hpbGUoaS0tKXtjYWNoZWQ9bWF0Y2hlckZyb21Ub2tlbnMobWF0Y2hbaV0pO2lmKGNhY2hlZFtleHBhbmRvXSl7c2V0TWF0Y2hlcnMucHVzaChjYWNoZWQpO31lbHNle2VsZW1lbnRNYXRjaGVycy5wdXNoKGNhY2hlZCk7fX0KY2FjaGVkPWNvbXBpbGVyQ2FjaGUoc2VsZWN0b3IsbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycykpO2NhY2hlZC5zZWxlY3Rvcj1zZWxlY3Rvcjt9CnJldHVybiBjYWNoZWQ7fTtzZWxlY3Q9U2l6emxlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJlc3VsdHMsc2VlZCl7dmFyIGksdG9rZW5zLHRva2VuLHR5cGUsZmluZCxjb21waWxlZD10eXBlb2Ygc2VsZWN0b3I9PT0iZnVuY3Rpb24iJiZzZWxlY3RvcixtYXRjaD0hc2VlZCYmdG9rZW5pemUoKHNlbGVjdG9yPWNvbXBpbGVkLnNlbGVjdG9yfHxzZWxlY3RvcikpO3Jlc3VsdHM9cmVzdWx0c3x8W107aWYobWF0Y2gubGVuZ3RoPT09MSl7dG9rZW5zPW1hdGNoWzBdPW1hdGNoWzBdLnNsaWNlKDApO2lmKHRva2Vucy5sZW5ndGg+MiYmKHRva2VuPXRva2Vuc1swXSkudHlwZT09PSJJRCImJmNvbnRleHQubm9kZVR5cGU9PT05JiZkb2N1bWVudElzSFRNTCYmRXhwci5yZWxhdGl2ZVt0b2tlbnNbMV0udHlwZV0pe2NvbnRleHQ9KEV4cHIuZmluZFsiSUQiXSh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSksY29udGV4dCl8fFtdKVswXTtpZighY29udGV4dCl7cmV0dXJuIHJlc3VsdHM7fWVsc2UgaWYoY29tcGlsZWQpe2NvbnRleHQ9Y29udGV4dC5wYXJlbnROb2RlO30Kc2VsZWN0b3I9c2VsZWN0b3Iuc2xpY2UodG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoKTt9Cmk9bWF0Y2hFeHByWyJuZWVkc0NvbnRleHQiXS50ZXN0KHNlbGVjdG9yKT8wOnRva2Vucy5sZW5ndGg7d2hpbGUoaS0tKXt0b2tlbj10b2tlbnNbaV07aWYoRXhwci5yZWxhdGl2ZVsodHlwZT10b2tlbi50eXBlKV0pe2JyZWFrO30KaWYoKGZpbmQ9RXhwci5maW5kW3R5cGVdKSl7aWYoKHNlZWQ9ZmluZCh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkscnNpYmxpbmcudGVzdCh0b2tlbnNbMF0udHlwZSkmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpKSl7dG9rZW5zLnNwbGljZShpLDEpO3NlbGVjdG9yPXNlZWQubGVuZ3RoJiZ0b1NlbGVjdG9yKHRva2Vucyk7aWYoIXNlbGVjdG9yKXtwdXNoLmFwcGx5KHJlc3VsdHMsc2VlZCk7cmV0dXJuIHJlc3VsdHM7fQpicmVhazt9fX19Cihjb21waWxlZHx8Y29tcGlsZShzZWxlY3RvcixtYXRjaCkpKHNlZWQsY29udGV4dCwhZG9jdW1lbnRJc0hUTUwscmVzdWx0cywhY29udGV4dHx8cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpO3JldHVybiByZXN1bHRzO307c3VwcG9ydC5zb3J0U3RhYmxlPWV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoc29ydE9yZGVyKS5qb2luKCIiKT09PWV4cGFuZG87c3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzPSEhaGFzRHVwbGljYXRlO3NldERvY3VtZW50KCk7c3VwcG9ydC5zb3J0RGV0YWNoZWQ9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSkmMTt9KTtpZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09IiMiO30pKXthZGRIYW5kbGUoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7aWYoIWlzWE1MKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSxuYW1lLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKTt9fSk7fQppZighc3VwcG9ydC5hdHRyaWJ1dGVzfHwhYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxpbnB1dC8+IjtlbC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTtyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIjt9KSl7YWRkSGFuZGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZWxlbSxuYW1lLGlzWE1MKXtpZighaXNYTUwmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCIpe3JldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTt9fSk7fQppZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT1udWxsO30pKXthZGRIYW5kbGUoYm9vbGVhbnMsZnVuY3Rpb24oZWxlbSxuYW1lLGlzWE1MKXt2YXIgdmFsO2lmKCFpc1hNTCl7cmV0dXJuIGVsZW1bbmFtZV09PT10cnVlP25hbWUudG9Mb3dlckNhc2UoKToodmFsPWVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkmJnZhbC5zcGVjaWZpZWQ/dmFsLnZhbHVlOm51bGw7fX0pO30KcmV0dXJuIFNpenpsZTt9KSh3aW5kb3cpO2pRdWVyeS5maW5kPVNpenpsZTtqUXVlcnkuZXhwcj1TaXp6bGUuc2VsZWN0b3JzO2pRdWVyeS5leHByWyI6Il09alF1ZXJ5LmV4cHIucHNldWRvcztqUXVlcnkudW5pcXVlU29ydD1qUXVlcnkudW5pcXVlPVNpenpsZS51bmlxdWVTb3J0O2pRdWVyeS50ZXh0PVNpenpsZS5nZXRUZXh0O2pRdWVyeS5pc1hNTERvYz1TaXp6bGUuaXNYTUw7alF1ZXJ5LmNvbnRhaW5zPVNpenpsZS5jb250YWlucztqUXVlcnkuZXNjYXBlU2VsZWN0b3I9U2l6emxlLmVzY2FwZTt2YXIgZGlyPWZ1bmN0aW9uKGVsZW0sZGlyLHVudGlsKXt2YXIgbWF0Y2hlZD1bXSx0cnVuY2F0ZT11bnRpbCE9PXVuZGVmaW5lZDt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pJiZlbGVtLm5vZGVUeXBlIT09OSl7aWYoZWxlbS5ub2RlVHlwZT09PTEpe2lmKHRydW5jYXRlJiZqUXVlcnkoZWxlbSkuaXModW50aWwpKXticmVhazt9Cm1hdGNoZWQucHVzaChlbGVtKTt9fQpyZXR1cm4gbWF0Y2hlZDt9O3ZhciBzaWJsaW5ncz1mdW5jdGlvbihuLGVsZW0pe3ZhciBtYXRjaGVkPVtdO2Zvcig7bjtuPW4ubmV4dFNpYmxpbmcpe2lmKG4ubm9kZVR5cGU9PT0xJiZuIT09ZWxlbSl7bWF0Y2hlZC5wdXNoKG4pO319CnJldHVybiBtYXRjaGVkO307dmFyIHJuZWVkc0NvbnRleHQ9alF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O2Z1bmN0aW9uIG5vZGVOYW1lKGVsZW0sbmFtZSl7cmV0dXJuIGVsZW0ubm9kZU5hbWUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5hbWUudG9Mb3dlckNhc2UoKTt9O3ZhciByc2luZ2xlVGFnPSgvXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSk7ZnVuY3Rpb24gd2lubm93KGVsZW1lbnRzLHF1YWxpZmllcixub3Qpe2lmKGlzRnVuY3Rpb24ocXVhbGlmaWVyKSl7cmV0dXJuIGpRdWVyeS5ncmVwKGVsZW1lbnRzLGZ1bmN0aW9uKGVsZW0saSl7cmV0dXJuISFxdWFsaWZpZXIuY2FsbChlbGVtLGksZWxlbSkhPT1ub3Q7fSk7fQppZihxdWFsaWZpZXIubm9kZVR5cGUpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbT09PXF1YWxpZmllcikhPT1ub3Q7fSk7fQppZih0eXBlb2YgcXVhbGlmaWVyIT09InN0cmluZyIpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtKXtyZXR1cm4oaW5kZXhPZi5jYWxsKHF1YWxpZmllcixlbGVtKT4tMSkhPT1ub3Q7fSk7fQpyZXR1cm4galF1ZXJ5LmZpbHRlcihxdWFsaWZpZXIsZWxlbWVudHMsbm90KTt9CmpRdWVyeS5maWx0ZXI9ZnVuY3Rpb24oZXhwcixlbGVtcyxub3Qpe3ZhciBlbGVtPWVsZW1zWzBdO2lmKG5vdCl7ZXhwcj0iOm5vdCgiK2V4cHIrIikiO30KaWYoZWxlbXMubGVuZ3RoPT09MSYmZWxlbS5ub2RlVHlwZT09PTEpe3JldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZWxlbSxleHByKT9bZWxlbV06W107fQpyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyhleHByLGpRdWVyeS5ncmVwKGVsZW1zLGZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtLm5vZGVUeXBlPT09MTt9KSk7fTtqUXVlcnkuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgaSxyZXQsbGVuPXRoaXMubGVuZ3RoLHNlbGY9dGhpcztpZih0eXBlb2Ygc2VsZWN0b3IhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeShzZWxlY3RvcikuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGxlbjtpKyspe2lmKGpRdWVyeS5jb250YWlucyhzZWxmW2ldLHRoaXMpKXtyZXR1cm4gdHJ1ZTt9fX0pKTt9CnJldD10aGlzLnB1c2hTdGFjayhbXSk7Zm9yKGk9MDtpPGxlbjtpKyspe2pRdWVyeS5maW5kKHNlbGVjdG9yLHNlbGZbaV0scmV0KTt9CnJldHVybiBsZW4+MT9qUXVlcnkudW5pcXVlU29ydChyZXQpOnJldDt9LGZpbHRlcjpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHdpbm5vdyh0aGlzLHNlbGVjdG9yfHxbXSxmYWxzZSkpO30sbm90OmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sod2lubm93KHRoaXMsc2VsZWN0b3J8fFtdLHRydWUpKTt9LGlzOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4hIXdpbm5vdyh0aGlzLHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciJiZybmVlZHNDb250ZXh0LnRlc3Qoc2VsZWN0b3IpP2pRdWVyeShzZWxlY3Rvcik6c2VsZWN0b3J8fFtdLGZhbHNlKS5sZW5ndGg7fX0pO3ZhciByb290alF1ZXJ5LHJxdWlja0V4cHI9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLyxpbml0PWpRdWVyeS5mbi5pbml0PWZ1bmN0aW9uKHNlbGVjdG9yLGNvbnRleHQscm9vdCl7dmFyIG1hdGNoLGVsZW07aWYoIXNlbGVjdG9yKXtyZXR1cm4gdGhpczt9CnJvb3Q9cm9vdHx8cm9vdGpRdWVyeTtpZih0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIil7aWYoc2VsZWN0b3JbMF09PT0iPCImJnNlbGVjdG9yW3NlbGVjdG9yLmxlbmd0aC0xXT09PSI+IiYmc2VsZWN0b3IubGVuZ3RoPj0zKXttYXRjaD1bbnVsbCxzZWxlY3RvcixudWxsXTt9ZWxzZXttYXRjaD1ycXVpY2tFeHByLmV4ZWMoc2VsZWN0b3IpO30KaWYobWF0Y2gmJihtYXRjaFsxXXx8IWNvbnRleHQpKXtpZihtYXRjaFsxXSl7Y29udGV4dD1jb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5P2NvbnRleHRbMF06Y29udGV4dDtqUXVlcnkubWVyZ2UodGhpcyxqUXVlcnkucGFyc2VIVE1MKG1hdGNoWzFdLGNvbnRleHQmJmNvbnRleHQubm9kZVR5cGU/Y29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0OmRvY3VtZW50LHRydWUpKTtpZihyc2luZ2xlVGFnLnRlc3QobWF0Y2hbMV0pJiZqUXVlcnkuaXNQbGFpbk9iamVjdChjb250ZXh0KSl7Zm9yKG1hdGNoIGluIGNvbnRleHQpe2lmKGlzRnVuY3Rpb24odGhpc1ttYXRjaF0pKXt0aGlzW21hdGNoXShjb250ZXh0W21hdGNoXSk7fWVsc2V7dGhpcy5hdHRyKG1hdGNoLGNvbnRleHRbbWF0Y2hdKTt9fX0KcmV0dXJuIHRoaXM7fWVsc2V7ZWxlbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXRjaFsyXSk7aWYoZWxlbSl7dGhpc1swXT1lbGVtO3RoaXMubGVuZ3RoPTE7fQpyZXR1cm4gdGhpczt9fWVsc2UgaWYoIWNvbnRleHR8fGNvbnRleHQuanF1ZXJ5KXtyZXR1cm4oY29udGV4dHx8cm9vdCkuZmluZChzZWxlY3Rvcik7fWVsc2V7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoY29udGV4dCkuZmluZChzZWxlY3Rvcik7fX1lbHNlIGlmKHNlbGVjdG9yLm5vZGVUeXBlKXt0aGlzWzBdPXNlbGVjdG9yO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXM7fWVsc2UgaWYoaXNGdW5jdGlvbihzZWxlY3Rvcikpe3JldHVybiByb290LnJlYWR5IT09dW5kZWZpbmVkP3Jvb3QucmVhZHkoc2VsZWN0b3IpOnNlbGVjdG9yKGpRdWVyeSk7fQpyZXR1cm4galF1ZXJ5Lm1ha2VBcnJheShzZWxlY3Rvcix0aGlzKTt9O2luaXQucHJvdG90eXBlPWpRdWVyeS5mbjtyb290alF1ZXJ5PWpRdWVyeShkb2N1bWVudCk7dmFyIHJwYXJlbnRzcHJldj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxndWFyYW50ZWVkVW5pcXVlPXtjaGlsZHJlbjp0cnVlLGNvbnRlbnRzOnRydWUsbmV4dDp0cnVlLHByZXY6dHJ1ZX07alF1ZXJ5LmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKHRhcmdldCl7dmFyIHRhcmdldHM9alF1ZXJ5KHRhcmdldCx0aGlzKSxsPXRhcmdldHMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe3ZhciBpPTA7Zm9yKDtpPGw7aSsrKXtpZihqUXVlcnkuY29udGFpbnModGhpcyx0YXJnZXRzW2ldKSl7cmV0dXJuIHRydWU7fX19KTt9LGNsb3Nlc3Q6ZnVuY3Rpb24oc2VsZWN0b3JzLGNvbnRleHQpe3ZhciBjdXIsaT0wLGw9dGhpcy5sZW5ndGgsbWF0Y2hlZD1bXSx0YXJnZXRzPXR5cGVvZiBzZWxlY3RvcnMhPT0ic3RyaW5nIiYmalF1ZXJ5KHNlbGVjdG9ycyk7aWYoIXJuZWVkc0NvbnRleHQudGVzdChzZWxlY3RvcnMpKXtmb3IoO2k8bDtpKyspe2ZvcihjdXI9dGhpc1tpXTtjdXImJmN1ciE9PWNvbnRleHQ7Y3VyPWN1ci5wYXJlbnROb2RlKXtpZihjdXIubm9kZVR5cGU8MTEmJih0YXJnZXRzP3RhcmdldHMuaW5kZXgoY3VyKT4tMTpjdXIubm9kZVR5cGU9PT0xJiZqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoY3VyLHNlbGVjdG9ycykpKXttYXRjaGVkLnB1c2goY3VyKTticmVhazt9fX19CnJldHVybiB0aGlzLnB1c2hTdGFjayhtYXRjaGVkLmxlbmd0aD4xP2pRdWVyeS51bmlxdWVTb3J0KG1hdGNoZWQpOm1hdGNoZWQpO30saW5kZXg6ZnVuY3Rpb24oZWxlbSl7aWYoIWVsZW0pe3JldHVybih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xO30KaWYodHlwZW9mIGVsZW09PT0ic3RyaW5nIil7cmV0dXJuIGluZGV4T2YuY2FsbChqUXVlcnkoZWxlbSksdGhpc1swXSk7fQpyZXR1cm4gaW5kZXhPZi5jYWxsKHRoaXMsZWxlbS5qcXVlcnk/ZWxlbVswXTplbGVtKTt9LGFkZDpmdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soalF1ZXJ5LnVuaXF1ZVNvcnQoalF1ZXJ5Lm1lcmdlKHRoaXMuZ2V0KCksalF1ZXJ5KHNlbGVjdG9yLGNvbnRleHQpKSkpO30sYWRkQmFjazpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMuYWRkKHNlbGVjdG9yPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHNlbGVjdG9yKSk7fX0pO2Z1bmN0aW9uIHNpYmxpbmcoY3VyLGRpcil7d2hpbGUoKGN1cj1jdXJbZGlyXSkmJmN1ci5ub2RlVHlwZSE9PTEpe30KcmV0dXJuIGN1cjt9CmpRdWVyeS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7cmV0dXJuIHBhcmVudCYmcGFyZW50Lm5vZGVUeXBlIT09MTE/cGFyZW50Om51bGw7fSxwYXJlbnRzOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwicGFyZW50Tm9kZSIpO30scGFyZW50c1VudGlsOmZ1bmN0aW9uKGVsZW0saSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJwYXJlbnROb2RlIix1bnRpbCk7fSxuZXh0OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5nKGVsZW0sIm5leHRTaWJsaW5nIik7fSxwcmV2OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5nKGVsZW0sInByZXZpb3VzU2libGluZyIpO30sbmV4dEFsbDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIik7fSxwcmV2QWxsOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwicHJldmlvdXNTaWJsaW5nIik7fSxuZXh0VW50aWw6ZnVuY3Rpb24oZWxlbSxpLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIix1bnRpbCk7fSxwcmV2VW50aWw6ZnVuY3Rpb24oZWxlbSxpLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sInByZXZpb3VzU2libGluZyIsdW50aWwpO30sc2libGluZ3M6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmdzKChlbGVtLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGVsZW0pO30sY2hpbGRyZW46ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmdzKGVsZW0uZmlyc3RDaGlsZCk7fSxjb250ZW50czpmdW5jdGlvbihlbGVtKXtpZihub2RlTmFtZShlbGVtLCJpZnJhbWUiKSl7cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O30KaWYobm9kZU5hbWUoZWxlbSwidGVtcGxhdGUiKSl7ZWxlbT1lbGVtLmNvbnRlbnR8fGVsZW07fQpyZXR1cm4galF1ZXJ5Lm1lcmdlKFtdLGVsZW0uY2hpbGROb2Rlcyk7fX0sZnVuY3Rpb24obmFtZSxmbil7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHVudGlsLHNlbGVjdG9yKXt2YXIgbWF0Y2hlZD1qUXVlcnkubWFwKHRoaXMsZm4sdW50aWwpO2lmKG5hbWUuc2xpY2UoLTUpIT09IlVudGlsIil7c2VsZWN0b3I9dW50aWw7fQppZihzZWxlY3RvciYmdHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe21hdGNoZWQ9alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixtYXRjaGVkKTt9CmlmKHRoaXMubGVuZ3RoPjEpe2lmKCFndWFyYW50ZWVkVW5pcXVlW25hbWVdKXtqUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTt9CmlmKHJwYXJlbnRzcHJldi50ZXN0KG5hbWUpKXttYXRjaGVkLnJldmVyc2UoKTt9fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZCk7fTt9KTt2YXIgcm5vdGh0bWx3aGl0ZT0oL1teXHgyMFx0XHJcblxmXSsvZyk7ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhvcHRpb25zKXt2YXIgb2JqZWN0PXt9O2pRdWVyeS5lYWNoKG9wdGlvbnMubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdLGZ1bmN0aW9uKF8sZmxhZyl7b2JqZWN0W2ZsYWddPXRydWU7fSk7cmV0dXJuIG9iamVjdDt9CmpRdWVyeS5DYWxsYmFja3M9ZnVuY3Rpb24ob3B0aW9ucyl7b3B0aW9ucz10eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciP2NyZWF0ZU9wdGlvbnMob3B0aW9ucyk6alF1ZXJ5LmV4dGVuZCh7fSxvcHRpb25zKTt2YXIKZmlyaW5nLG1lbW9yeSxmaXJlZCxsb2NrZWQsbGlzdD1bXSxxdWV1ZT1bXSxmaXJpbmdJbmRleD0tMSxmaXJlPWZ1bmN0aW9uKCl7bG9ja2VkPWxvY2tlZHx8b3B0aW9ucy5vbmNlO2ZpcmVkPWZpcmluZz10cnVlO2Zvcig7cXVldWUubGVuZ3RoO2ZpcmluZ0luZGV4PS0xKXttZW1vcnk9cXVldWUuc2hpZnQoKTt3aGlsZSgrK2ZpcmluZ0luZGV4PGxpc3QubGVuZ3RoKXtpZihsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShtZW1vcnlbMF0sbWVtb3J5WzFdKT09PWZhbHNlJiZvcHRpb25zLnN0b3BPbkZhbHNlKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aDttZW1vcnk9ZmFsc2U7fX19CmlmKCFvcHRpb25zLm1lbW9yeSl7bWVtb3J5PWZhbHNlO30KZmlyaW5nPWZhbHNlO2lmKGxvY2tlZCl7aWYobWVtb3J5KXtsaXN0PVtdO31lbHNle2xpc3Q9IiI7fX19LHNlbGY9e2FkZDpmdW5jdGlvbigpe2lmKGxpc3Qpe2lmKG1lbW9yeSYmIWZpcmluZyl7ZmlyaW5nSW5kZXg9bGlzdC5sZW5ndGgtMTtxdWV1ZS5wdXNoKG1lbW9yeSk7fQooZnVuY3Rpb24gYWRkKGFyZ3Mpe2pRdWVyeS5lYWNoKGFyZ3MsZnVuY3Rpb24oXyxhcmcpe2lmKGlzRnVuY3Rpb24oYXJnKSl7aWYoIW9wdGlvbnMudW5pcXVlfHwhc2VsZi5oYXMoYXJnKSl7bGlzdC5wdXNoKGFyZyk7fX1lbHNlIGlmKGFyZyYmYXJnLmxlbmd0aCYmdG9UeXBlKGFyZykhPT0ic3RyaW5nIil7YWRkKGFyZyk7fX0pO30pKGFyZ3VtZW50cyk7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxyZW1vdmU6ZnVuY3Rpb24oKXtqUXVlcnkuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oXyxhcmcpe3ZhciBpbmRleDt3aGlsZSgoaW5kZXg9alF1ZXJ5LmluQXJyYXkoYXJnLGxpc3QsaW5kZXgpKT4tMSl7bGlzdC5zcGxpY2UoaW5kZXgsMSk7aWYoaW5kZXg8PWZpcmluZ0luZGV4KXtmaXJpbmdJbmRleC0tO319fSk7cmV0dXJuIHRoaXM7fSxoYXM6ZnVuY3Rpb24oZm4pe3JldHVybiBmbj9qUXVlcnkuaW5BcnJheShmbixsaXN0KT4tMTpsaXN0Lmxlbmd0aD4wO30sZW1wdHk6ZnVuY3Rpb24oKXtpZihsaXN0KXtsaXN0PVtdO30KcmV0dXJuIHRoaXM7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7bG9ja2VkPXF1ZXVlPVtdO2xpc3Q9bWVtb3J5PSIiO3JldHVybiB0aGlzO30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbGlzdDt9LGxvY2s6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107aWYoIW1lbW9yeSYmIWZpcmluZyl7bGlzdD1tZW1vcnk9IiI7fQpyZXR1cm4gdGhpczt9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhbG9ja2VkO30sZmlyZVdpdGg6ZnVuY3Rpb24oY29udGV4dCxhcmdzKXtpZighbG9ja2VkKXthcmdzPWFyZ3N8fFtdO2FyZ3M9W2NvbnRleHQsYXJncy5zbGljZT9hcmdzLnNsaWNlKCk6YXJnc107cXVldWUucHVzaChhcmdzKTtpZighZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxmaXJlOmZ1bmN0aW9uKCl7c2VsZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZmlyZWQ7fX07cmV0dXJuIHNlbGY7fTtmdW5jdGlvbiBJZGVudGl0eSh2KXtyZXR1cm4gdjt9CmZ1bmN0aW9uIFRocm93ZXIoZXgpe3Rocm93IGV4O30KZnVuY3Rpb24gYWRvcHRWYWx1ZSh2YWx1ZSxyZXNvbHZlLHJlamVjdCxub1ZhbHVlKXt2YXIgbWV0aG9kO3RyeXtpZih2YWx1ZSYmaXNGdW5jdGlvbigobWV0aG9kPXZhbHVlLnByb21pc2UpKSl7bWV0aG9kLmNhbGwodmFsdWUpLmRvbmUocmVzb2x2ZSkuZmFpbChyZWplY3QpO31lbHNlIGlmKHZhbHVlJiZpc0Z1bmN0aW9uKChtZXRob2Q9dmFsdWUudGhlbikpKXttZXRob2QuY2FsbCh2YWx1ZSxyZXNvbHZlLHJlamVjdCk7fWVsc2V7cmVzb2x2ZS5hcHBseSh1bmRlZmluZWQsW3ZhbHVlXS5zbGljZShub1ZhbHVlKSk7fX1jYXRjaCh2YWx1ZSl7cmVqZWN0LmFwcGx5KHVuZGVmaW5lZCxbdmFsdWVdKTt9fQpqUXVlcnkuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihmdW5jKXt2YXIgdHVwbGVzPVtbIm5vdGlmeSIsInByb2dyZXNzIixqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSwyXSxbInJlc29sdmUiLCJkb25lIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMCwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxzdGF0ZT0icGVuZGluZyIscHJvbWlzZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gc3RhdGU7fSxhbHdheXM6ZnVuY3Rpb24oKXtkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzO30sImNhdGNoIjpmdW5jdGlvbihmbil7cmV0dXJuIHByb21pc2UudGhlbihudWxsLGZuKTt9LHBpcGU6ZnVuY3Rpb24oKXt2YXIgZm5zPWFyZ3VtZW50cztyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKG5ld0RlZmVyKXtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGZuPWlzRnVuY3Rpb24oZm5zW3R1cGxlWzRdXSkmJmZuc1t0dXBsZVs0XV07ZGVmZXJyZWRbdHVwbGVbMV1dKGZ1bmN0aW9uKCl7dmFyIHJldHVybmVkPWZuJiZmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocmV0dXJuZWQmJmlzRnVuY3Rpb24ocmV0dXJuZWQucHJvbWlzZSkpe3JldHVybmVkLnByb21pc2UoKS5wcm9ncmVzcyhuZXdEZWZlci5ub3RpZnkpLmRvbmUobmV3RGVmZXIucmVzb2x2ZSkuZmFpbChuZXdEZWZlci5yZWplY3QpO31lbHNle25ld0RlZmVyW3R1cGxlWzBdKyJXaXRoIl0odGhpcyxmbj9bcmV0dXJuZWRdOmFyZ3VtZW50cyk7fX0pO30pO2Zucz1udWxsO30pLnByb21pc2UoKTt9LHRoZW46ZnVuY3Rpb24ob25GdWxmaWxsZWQsb25SZWplY3RlZCxvblByb2dyZXNzKXt2YXIgbWF4RGVwdGg9MDtmdW5jdGlvbiByZXNvbHZlKGRlcHRoLGRlZmVycmVkLGhhbmRsZXIsc3BlY2lhbCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpcyxhcmdzPWFyZ3VtZW50cyxtaWdodFRocm93PWZ1bmN0aW9uKCl7dmFyIHJldHVybmVkLHRoZW47aWYoZGVwdGg8bWF4RGVwdGgpe3JldHVybjt9CnJldHVybmVkPWhhbmRsZXIuYXBwbHkodGhhdCxhcmdzKTtpZihyZXR1cm5lZD09PWRlZmVycmVkLnByb21pc2UoKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uIik7fQp0aGVuPXJldHVybmVkJiYodHlwZW9mIHJldHVybmVkPT09Im9iamVjdCJ8fHR5cGVvZiByZXR1cm5lZD09PSJmdW5jdGlvbiIpJiZyZXR1cm5lZC50aGVuO2lmKGlzRnVuY3Rpb24odGhlbikpe2lmKHNwZWNpYWwpe3RoZW4uY2FsbChyZXR1cm5lZCxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLElkZW50aXR5LHNwZWNpYWwpLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsVGhyb3dlcixzcGVjaWFsKSk7fWVsc2V7bWF4RGVwdGgrKzt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxkZWZlcnJlZC5ub3RpZnlXaXRoKSk7fX1lbHNle2lmKGhhbmRsZXIhPT1JZGVudGl0eSl7dGhhdD11bmRlZmluZWQ7YXJncz1bcmV0dXJuZWRdO30KKHNwZWNpYWx8fGRlZmVycmVkLnJlc29sdmVXaXRoKSh0aGF0LGFyZ3MpO319LHByb2Nlc3M9c3BlY2lhbD9taWdodFRocm93OmZ1bmN0aW9uKCl7dHJ5e21pZ2h0VGhyb3coKTt9Y2F0Y2goZSl7aWYoalF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2spe2pRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGUscHJvY2Vzcy5zdGFja1RyYWNlKTt9CmlmKGRlcHRoKzE+PW1heERlcHRoKXtpZihoYW5kbGVyIT09VGhyb3dlcil7dGhhdD11bmRlZmluZWQ7YXJncz1bZV07fQpkZWZlcnJlZC5yZWplY3RXaXRoKHRoYXQsYXJncyk7fX19O2lmKGRlcHRoKXtwcm9jZXNzKCk7fWVsc2V7aWYoalF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vayl7cHJvY2Vzcy5zdGFja1RyYWNlPWpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2soKTt9CndpbmRvdy5zZXRUaW1lb3V0KHByb2Nlc3MpO319O30KcmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbihuZXdEZWZlcil7dHVwbGVzWzBdWzNdLmFkZChyZXNvbHZlKDAsbmV3RGVmZXIsaXNGdW5jdGlvbihvblByb2dyZXNzKT9vblByb2dyZXNzOklkZW50aXR5LG5ld0RlZmVyLm5vdGlmeVdpdGgpKTt0dXBsZXNbMV1bM10uYWRkKHJlc29sdmUoMCxuZXdEZWZlcixpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKT9vbkZ1bGZpbGxlZDpJZGVudGl0eSkpO3R1cGxlc1syXVszXS5hZGQocmVzb2x2ZSgwLG5ld0RlZmVyLGlzRnVuY3Rpb24ob25SZWplY3RlZCk/b25SZWplY3RlZDpUaHJvd2VyKSk7fSkucHJvbWlzZSgpO30scHJvbWlzZTpmdW5jdGlvbihvYmope3JldHVybiBvYmohPW51bGw/alF1ZXJ5LmV4dGVuZChvYmoscHJvbWlzZSk6cHJvbWlzZTt9fSxkZWZlcnJlZD17fTtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGxpc3Q9dHVwbGVbMl0sc3RhdGVTdHJpbmc9dHVwbGVbNV07cHJvbWlzZVt0dXBsZVsxXV09bGlzdC5hZGQ7aWYoc3RhdGVTdHJpbmcpe2xpc3QuYWRkKGZ1bmN0aW9uKCl7c3RhdGU9c3RhdGVTdHJpbmc7fSx0dXBsZXNbMy1pXVsyXS5kaXNhYmxlLHR1cGxlc1szLWldWzNdLmRpc2FibGUsdHVwbGVzWzBdWzJdLmxvY2ssdHVwbGVzWzBdWzNdLmxvY2spO30KbGlzdC5hZGQodHVwbGVbM10uZmlyZSk7ZGVmZXJyZWRbdHVwbGVbMF1dPWZ1bmN0aW9uKCl7ZGVmZXJyZWRbdHVwbGVbMF0rIldpdGgiXSh0aGlzPT09ZGVmZXJyZWQ/dW5kZWZpbmVkOnRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpczt9O2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl09bGlzdC5maXJlV2l0aDt9KTtwcm9taXNlLnByb21pc2UoZGVmZXJyZWQpO2lmKGZ1bmMpe2Z1bmMuY2FsbChkZWZlcnJlZCxkZWZlcnJlZCk7fQpyZXR1cm4gZGVmZXJyZWQ7fSx3aGVuOmZ1bmN0aW9uKHNpbmdsZVZhbHVlKXt2YXIKcmVtYWluaW5nPWFyZ3VtZW50cy5sZW5ndGgsaT1yZW1haW5pbmcscmVzb2x2ZUNvbnRleHRzPUFycmF5KGkpLHJlc29sdmVWYWx1ZXM9c2xpY2UuY2FsbChhcmd1bWVudHMpLG1hc3Rlcj1qUXVlcnkuRGVmZXJyZWQoKSx1cGRhdGVGdW5jPWZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmVzb2x2ZUNvbnRleHRzW2ldPXRoaXM7cmVzb2x2ZVZhbHVlc1tpXT1hcmd1bWVudHMubGVuZ3RoPjE/c2xpY2UuY2FsbChhcmd1bWVudHMpOnZhbHVlO2lmKCEoLS1yZW1haW5pbmcpKXttYXN0ZXIucmVzb2x2ZVdpdGgocmVzb2x2ZUNvbnRleHRzLHJlc29sdmVWYWx1ZXMpO319O307aWYocmVtYWluaW5nPD0xKXthZG9wdFZhbHVlKHNpbmdsZVZhbHVlLG1hc3Rlci5kb25lKHVwZGF0ZUZ1bmMoaSkpLnJlc29sdmUsbWFzdGVyLnJlamVjdCwhcmVtYWluaW5nKTtpZihtYXN0ZXIuc3RhdGUoKT09PSJwZW5kaW5nInx8aXNGdW5jdGlvbihyZXNvbHZlVmFsdWVzW2ldJiZyZXNvbHZlVmFsdWVzW2ldLnRoZW4pKXtyZXR1cm4gbWFzdGVyLnRoZW4oKTt9fQp3aGlsZShpLS0pe2Fkb3B0VmFsdWUocmVzb2x2ZVZhbHVlc1tpXSx1cGRhdGVGdW5jKGkpLG1hc3Rlci5yZWplY3QpO30KcmV0dXJuIG1hc3Rlci5wcm9taXNlKCk7fX0pO3ZhciByZXJyb3JOYW1lcz0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlcnJvcixzdGFjayl7aWYod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLndhcm4mJmVycm9yJiZyZXJyb3JOYW1lcy50ZXN0KGVycm9yLm5hbWUpKXt3aW5kb3cuY29uc29sZS53YXJuKCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiAiK2Vycm9yLm1lc3NhZ2UsZXJyb3Iuc3RhY2ssc3RhY2spO319O2pRdWVyeS5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlcnJvcil7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlcnJvcjt9KTt9O3ZhciByZWFkeUxpc3Q9alF1ZXJ5LkRlZmVycmVkKCk7alF1ZXJ5LmZuLnJlYWR5PWZ1bmN0aW9uKGZuKXtyZWFkeUxpc3QudGhlbihmbikuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2pRdWVyeS5yZWFkeUV4Y2VwdGlvbihlcnJvcik7fSk7cmV0dXJuIHRoaXM7fTtqUXVlcnkuZXh0ZW5kKHtpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKHdhaXQpe2lmKHdhaXQ9PT10cnVlPy0talF1ZXJ5LnJlYWR5V2FpdDpqUXVlcnkuaXNSZWFkeSl7cmV0dXJuO30KalF1ZXJ5LmlzUmVhZHk9dHJ1ZTtpZih3YWl0IT09dHJ1ZSYmLS1qUXVlcnkucmVhZHlXYWl0PjApe3JldHVybjt9CnJlYWR5TGlzdC5yZXNvbHZlV2l0aChkb2N1bWVudCxbalF1ZXJ5XSk7fX0pO2pRdWVyeS5yZWFkeS50aGVuPXJlYWR5TGlzdC50aGVuO2Z1bmN0aW9uIGNvbXBsZXRlZCgpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7alF1ZXJ5LnJlYWR5KCk7fQppZihkb2N1bWVudC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlInx8KGRvY3VtZW50LnJlYWR5U3RhdGUhPT0ibG9hZGluZyImJiFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpKXt3aW5kb3cuc2V0VGltZW91dChqUXVlcnkucmVhZHkpO31lbHNle2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7fQp2YXIgYWNjZXNzPWZ1bmN0aW9uKGVsZW1zLGZuLGtleSx2YWx1ZSxjaGFpbmFibGUsZW1wdHlHZXQscmF3KXt2YXIgaT0wLGxlbj1lbGVtcy5sZW5ndGgsYnVsaz1rZXk9PW51bGw7aWYodG9UeXBlKGtleSk9PT0ib2JqZWN0Iil7Y2hhaW5hYmxlPXRydWU7Zm9yKGkgaW4ga2V5KXthY2Nlc3MoZWxlbXMsZm4saSxrZXlbaV0sdHJ1ZSxlbXB0eUdldCxyYXcpO319ZWxzZSBpZih2YWx1ZSE9PXVuZGVmaW5lZCl7Y2hhaW5hYmxlPXRydWU7aWYoIWlzRnVuY3Rpb24odmFsdWUpKXtyYXc9dHJ1ZTt9CmlmKGJ1bGspe2lmKHJhdyl7Zm4uY2FsbChlbGVtcyx2YWx1ZSk7Zm49bnVsbDt9ZWxzZXtidWxrPWZuO2ZuPWZ1bmN0aW9uKGVsZW0sa2V5LHZhbHVlKXtyZXR1cm4gYnVsay5jYWxsKGpRdWVyeShlbGVtKSx2YWx1ZSk7fTt9fQppZihmbil7Zm9yKDtpPGxlbjtpKyspe2ZuKGVsZW1zW2ldLGtleSxyYXc/dmFsdWU6dmFsdWUuY2FsbChlbGVtc1tpXSxpLGZuKGVsZW1zW2ldLGtleSkpKTt9fX0KaWYoY2hhaW5hYmxlKXtyZXR1cm4gZWxlbXM7fQppZihidWxrKXtyZXR1cm4gZm4uY2FsbChlbGVtcyk7fQpyZXR1cm4gbGVuP2ZuKGVsZW1zWzBdLGtleSk6ZW1wdHlHZXQ7fTt2YXIgcm1zUHJlZml4PS9eLW1zLS8scmRhc2hBbHBoYT0vLShbYS16XSkvZztmdW5jdGlvbiBmY2FtZWxDYXNlKGFsbCxsZXR0ZXIpe3JldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTt9CmZ1bmN0aW9uIGNhbWVsQ2FzZShzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZShybXNQcmVmaXgsIm1zLSIpLnJlcGxhY2UocmRhc2hBbHBoYSxmY2FtZWxDYXNlKTt9CnZhciBhY2NlcHREYXRhPWZ1bmN0aW9uKG93bmVyKXtyZXR1cm4gb3duZXIubm9kZVR5cGU9PT0xfHxvd25lci5ub2RlVHlwZT09PTl8fCEoK293bmVyLm5vZGVUeXBlKTt9O2Z1bmN0aW9uIERhdGEoKXt0aGlzLmV4cGFuZG89alF1ZXJ5LmV4cGFuZG8rRGF0YS51aWQrKzt9CkRhdGEudWlkPTE7RGF0YS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKG93bmVyKXt2YXIgdmFsdWU9b3duZXJbdGhpcy5leHBhbmRvXTtpZighdmFsdWUpe3ZhbHVlPXt9O2lmKGFjY2VwdERhdGEob3duZXIpKXtpZihvd25lci5ub2RlVHlwZSl7b3duZXJbdGhpcy5leHBhbmRvXT12YWx1ZTt9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkob3duZXIsdGhpcy5leHBhbmRvLHt2YWx1ZTp2YWx1ZSxjb25maWd1cmFibGU6dHJ1ZX0pO319fQpyZXR1cm4gdmFsdWU7fSxzZXQ6ZnVuY3Rpb24ob3duZXIsZGF0YSx2YWx1ZSl7dmFyIHByb3AsY2FjaGU9dGhpcy5jYWNoZShvd25lcik7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7Y2FjaGVbY2FtZWxDYXNlKGRhdGEpXT12YWx1ZTt9ZWxzZXtmb3IocHJvcCBpbiBkYXRhKXtjYWNoZVtjYW1lbENhc2UocHJvcCldPWRhdGFbcHJvcF07fX0KcmV0dXJuIGNhY2hlO30sZ2V0OmZ1bmN0aW9uKG93bmVyLGtleSl7cmV0dXJuIGtleT09PXVuZGVmaW5lZD90aGlzLmNhY2hlKG93bmVyKTpvd25lclt0aGlzLmV4cGFuZG9dJiZvd25lclt0aGlzLmV4cGFuZG9dW2NhbWVsQ2FzZShrZXkpXTt9LGFjY2VzczpmdW5jdGlvbihvd25lcixrZXksdmFsdWUpe2lmKGtleT09PXVuZGVmaW5lZHx8KChrZXkmJnR5cGVvZiBrZXk9PT0ic3RyaW5nIikmJnZhbHVlPT09dW5kZWZpbmVkKSl7cmV0dXJuIHRoaXMuZ2V0KG93bmVyLGtleSk7fQp0aGlzLnNldChvd25lcixrZXksdmFsdWUpO3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZD92YWx1ZTprZXk7fSxyZW1vdmU6ZnVuY3Rpb24ob3duZXIsa2V5KXt2YXIgaSxjYWNoZT1vd25lclt0aGlzLmV4cGFuZG9dO2lmKGNhY2hlPT09dW5kZWZpbmVkKXtyZXR1cm47fQppZihrZXkhPT11bmRlZmluZWQpe2lmKEFycmF5LmlzQXJyYXkoa2V5KSl7a2V5PWtleS5tYXAoY2FtZWxDYXNlKTt9ZWxzZXtrZXk9Y2FtZWxDYXNlKGtleSk7a2V5PWtleSBpbiBjYWNoZT9ba2V5XTooa2V5Lm1hdGNoKHJub3RodG1sd2hpdGUpfHxbXSk7fQppPWtleS5sZW5ndGg7d2hpbGUoaS0tKXtkZWxldGUgY2FjaGVba2V5W2ldXTt9fQppZihrZXk9PT11bmRlZmluZWR8fGpRdWVyeS5pc0VtcHR5T2JqZWN0KGNhY2hlKSl7aWYob3duZXIubm9kZVR5cGUpe293bmVyW3RoaXMuZXhwYW5kb109dW5kZWZpbmVkO31lbHNle2RlbGV0ZSBvd25lclt0aGlzLmV4cGFuZG9dO319fSxoYXNEYXRhOmZ1bmN0aW9uKG93bmVyKXt2YXIgY2FjaGU9b3duZXJbdGhpcy5leHBhbmRvXTtyZXR1cm4gY2FjaGUhPT11bmRlZmluZWQmJiFqUXVlcnkuaXNFbXB0eU9iamVjdChjYWNoZSk7fX07dmFyIGRhdGFQcml2PW5ldyBEYXRhKCk7dmFyIGRhdGFVc2VyPW5ldyBEYXRhKCk7dmFyIHJicmFjZT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLHJtdWx0aURhc2g9L1tBLVpdL2c7ZnVuY3Rpb24gZ2V0RGF0YShkYXRhKXtpZihkYXRhPT09InRydWUiKXtyZXR1cm4gdHJ1ZTt9CmlmKGRhdGE9PT0iZmFsc2UiKXtyZXR1cm4gZmFsc2U7fQppZihkYXRhPT09Im51bGwiKXtyZXR1cm4gbnVsbDt9CmlmKGRhdGE9PT0rZGF0YSsiIil7cmV0dXJuK2RhdGE7fQppZihyYnJhY2UudGVzdChkYXRhKSl7cmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGRhdGFBdHRyKGVsZW0sa2V5LGRhdGEpe3ZhciBuYW1lO2lmKGRhdGE9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtuYW1lPSJkYXRhLSIra2V5LnJlcGxhY2Uocm11bHRpRGFzaCwiLSQmIikudG9Mb3dlckNhc2UoKTtkYXRhPWVsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO2lmKHR5cGVvZiBkYXRhPT09InN0cmluZyIpe3RyeXtkYXRhPWdldERhdGEoZGF0YSk7fWNhdGNoKGUpe30KZGF0YVVzZXIuc2V0KGVsZW0sa2V5LGRhdGEpO31lbHNle2RhdGE9dW5kZWZpbmVkO319CnJldHVybiBkYXRhO30KalF1ZXJ5LmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YShlbGVtKXx8ZGF0YVByaXYuaGFzRGF0YShlbGVtKTt9LGRhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhVXNlci5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihlbGVtLG5hbWUpe2RhdGFVc2VyLnJlbW92ZShlbGVtLG5hbWUpO30sX2RhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhUHJpdi5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxuYW1lKTt9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBpLG5hbWUsZGF0YSxlbGVtPXRoaXNbMF0sYXR0cnM9ZWxlbSYmZWxlbS5hdHRyaWJ1dGVzO2lmKGtleT09PXVuZGVmaW5lZCl7aWYodGhpcy5sZW5ndGgpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0pO2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYhZGF0YVByaXYuZ2V0KGVsZW0sImhhc0RhdGFBdHRycyIpKXtpPWF0dHJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKGF0dHJzW2ldKXtuYW1lPWF0dHJzW2ldLm5hbWU7aWYobmFtZS5pbmRleE9mKCJkYXRhLSIpPT09MCl7bmFtZT1jYW1lbENhc2UobmFtZS5zbGljZSg1KSk7ZGF0YUF0dHIoZWxlbSxuYW1lLGRhdGFbbmFtZV0pO319fQpkYXRhUHJpdi5zZXQoZWxlbSwiaGFzRGF0YUF0dHJzIix0cnVlKTt9fQpyZXR1cm4gZGF0YTt9CmlmKHR5cGVvZiBrZXk9PT0ib2JqZWN0Iil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSk7fSk7fQpyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3ZhciBkYXRhO2lmKGVsZW0mJnZhbHVlPT09dW5kZWZpbmVkKXtkYXRhPWRhdGFVc2VyLmdldChlbGVtLGtleSk7aWYoZGF0YSE9PXVuZGVmaW5lZCl7cmV0dXJuIGRhdGE7fQpkYXRhPWRhdGFBdHRyKGVsZW0sa2V5KTtpZihkYXRhIT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YTt9CnJldHVybjt9CnRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSx2YWx1ZSk7fSk7fSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLHRydWUpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkYXRhVXNlci5yZW1vdmUodGhpcyxrZXkpO30pO319KTtqUXVlcnkuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlbGVtLHR5cGUsZGF0YSl7dmFyIHF1ZXVlO2lmKGVsZW0pe3R5cGU9KHR5cGV8fCJmeCIpKyJxdWV1ZSI7cXVldWU9ZGF0YVByaXYuZ2V0KGVsZW0sdHlwZSk7aWYoZGF0YSl7aWYoIXF1ZXVlfHxBcnJheS5pc0FycmF5KGRhdGEpKXtxdWV1ZT1kYXRhUHJpdi5hY2Nlc3MoZWxlbSx0eXBlLGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkpO31lbHNle3F1ZXVlLnB1c2goZGF0YSk7fX0KcmV0dXJuIHF1ZXVlfHxbXTt9fSxkZXF1ZXVlOmZ1bmN0aW9uKGVsZW0sdHlwZSl7dHlwZT10eXBlfHwiZngiO3ZhciBxdWV1ZT1qUXVlcnkucXVldWUoZWxlbSx0eXBlKSxzdGFydExlbmd0aD1xdWV1ZS5sZW5ndGgsZm49cXVldWUuc2hpZnQoKSxob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSx0eXBlKSxuZXh0PWZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUoZWxlbSx0eXBlKTt9O2lmKGZuPT09ImlucHJvZ3Jlc3MiKXtmbj1xdWV1ZS5zaGlmdCgpO3N0YXJ0TGVuZ3RoLS07fQppZihmbil7aWYodHlwZT09PSJmeCIpe3F1ZXVlLnVuc2hpZnQoImlucHJvZ3Jlc3MiKTt9CmRlbGV0ZSBob29rcy5zdG9wO2ZuLmNhbGwoZWxlbSxuZXh0LGhvb2tzKTt9CmlmKCFzdGFydExlbmd0aCYmaG9va3Mpe2hvb2tzLmVtcHR5LmZpcmUoKTt9fSxfcXVldWVIb29rczpmdW5jdGlvbihlbGVtLHR5cGUpe3ZhciBrZXk9dHlwZSsicXVldWVIb29rcyI7cmV0dXJuIGRhdGFQcml2LmdldChlbGVtLGtleSl8fGRhdGFQcml2LmFjY2VzcyhlbGVtLGtleSx7ZW1wdHk6alF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxbdHlwZSsicXVldWUiLGtleV0pO30pfSk7fX0pO2pRdWVyeS5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIHNldHRlcj0yO2lmKHR5cGVvZiB0eXBlIT09InN0cmluZyIpe2RhdGE9dHlwZTt0eXBlPSJmeCI7c2V0dGVyLS07fQppZihhcmd1bWVudHMubGVuZ3RoPHNldHRlcil7cmV0dXJuIGpRdWVyeS5xdWV1ZSh0aGlzWzBdLHR5cGUpO30KcmV0dXJuIGRhdGE9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcXVldWU9alF1ZXJ5LnF1ZXVlKHRoaXMsdHlwZSxkYXRhKTtqUXVlcnkuX3F1ZXVlSG9va3ModGhpcyx0eXBlKTtpZih0eXBlPT09ImZ4IiYmcXVldWVbMF0hPT0iaW5wcm9ncmVzcyIpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsdHlwZSk7fX0pO30sZGVxdWV1ZTpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9KTt9LGNsZWFyUXVldWU6ZnVuY3Rpb24odHlwZSl7cmV0dXJuIHRoaXMucXVldWUodHlwZXx8ImZ4IixbXSk7fSxwcm9taXNlOmZ1bmN0aW9uKHR5cGUsb2JqKXt2YXIgdG1wLGNvdW50PTEsZGVmZXI9alF1ZXJ5LkRlZmVycmVkKCksZWxlbWVudHM9dGhpcyxpPXRoaXMubGVuZ3RoLHJlc29sdmU9ZnVuY3Rpb24oKXtpZighKC0tY291bnQpKXtkZWZlci5yZXNvbHZlV2l0aChlbGVtZW50cyxbZWxlbWVudHNdKTt9fTtpZih0eXBlb2YgdHlwZSE9PSJzdHJpbmciKXtvYmo9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CnR5cGU9dHlwZXx8ImZ4Ijt3aGlsZShpLS0pe3RtcD1kYXRhUHJpdi5nZXQoZWxlbWVudHNbaV0sdHlwZSsicXVldWVIb29rcyIpO2lmKHRtcCYmdG1wLmVtcHR5KXtjb3VudCsrO3RtcC5lbXB0eS5hZGQocmVzb2x2ZSk7fX0KcmVzb2x2ZSgpO3JldHVybiBkZWZlci5wcm9taXNlKG9iaik7fX0pO3ZhciBwbnVtPSgvWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvKS5zb3VyY2U7dmFyIHJjc3NOdW09bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3BudW0rIikoW2EteiVdKikkIiwiaSIpO3ZhciBjc3NFeHBhbmQ9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXTt2YXIgaXNIaWRkZW5XaXRoaW5UcmVlPWZ1bmN0aW9uKGVsZW0sZWwpe2VsZW09ZWx8fGVsZW07cmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheT09PSJub25lInx8ZWxlbS5zdHlsZS5kaXNwbGF5PT09IiImJmpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSkmJmpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpPT09Im5vbmUiO307dmFyIHN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrLGFyZ3Mpe3ZhciByZXQsbmFtZSxvbGQ9e307Zm9yKG5hbWUgaW4gb3B0aW9ucyl7b2xkW25hbWVdPWVsZW0uc3R5bGVbbmFtZV07ZWxlbS5zdHlsZVtuYW1lXT1vcHRpb25zW25hbWVdO30KcmV0PWNhbGxiYWNrLmFwcGx5KGVsZW0sYXJnc3x8W10pO2ZvcihuYW1lIGluIG9wdGlvbnMpe2VsZW0uc3R5bGVbbmFtZV09b2xkW25hbWVdO30KcmV0dXJuIHJldDt9O2Z1bmN0aW9uIGFkanVzdENTUyhlbGVtLHByb3AsdmFsdWVQYXJ0cyx0d2Vlbil7dmFyIGFkanVzdGVkLHNjYWxlLG1heEl0ZXJhdGlvbnM9MjAsY3VycmVudFZhbHVlPXR3ZWVuP2Z1bmN0aW9uKCl7cmV0dXJuIHR3ZWVuLmN1cigpO306ZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5LmNzcyhlbGVtLHByb3AsIiIpO30saW5pdGlhbD1jdXJyZW50VmFsdWUoKSx1bml0PXZhbHVlUGFydHMmJnZhbHVlUGFydHNbM118fChqUXVlcnkuY3NzTnVtYmVyW3Byb3BdPyIiOiJweCIpLGluaXRpYWxJblVuaXQ9KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF18fHVuaXQhPT0icHgiJiYraW5pdGlhbCkmJnJjc3NOdW0uZXhlYyhqUXVlcnkuY3NzKGVsZW0scHJvcCkpO2lmKGluaXRpYWxJblVuaXQmJmluaXRpYWxJblVuaXRbM10hPT11bml0KXtpbml0aWFsPWluaXRpYWwvMjt1bml0PXVuaXR8fGluaXRpYWxJblVuaXRbM107aW5pdGlhbEluVW5pdD0raW5pdGlhbHx8MTt3aGlsZShtYXhJdGVyYXRpb25zLS0pe2pRdWVyeS5zdHlsZShlbGVtLHByb3AsaW5pdGlhbEluVW5pdCt1bml0KTtpZigoMS1zY2FsZSkqKDEtKHNjYWxlPWN1cnJlbnRWYWx1ZSgpL2luaXRpYWx8fDAuNSkpPD0wKXttYXhJdGVyYXRpb25zPTA7fQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQvc2NhbGU7fQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQqMjtqUXVlcnkuc3R5bGUoZWxlbSxwcm9wLGluaXRpYWxJblVuaXQrdW5pdCk7dmFsdWVQYXJ0cz12YWx1ZVBhcnRzfHxbXTt9CmlmKHZhbHVlUGFydHMpe2luaXRpYWxJblVuaXQ9K2luaXRpYWxJblVuaXR8fCtpbml0aWFsfHwwO2FkanVzdGVkPXZhbHVlUGFydHNbMV0/aW5pdGlhbEluVW5pdCsodmFsdWVQYXJ0c1sxXSsxKSp2YWx1ZVBhcnRzWzJdOit2YWx1ZVBhcnRzWzJdO2lmKHR3ZWVuKXt0d2Vlbi51bml0PXVuaXQ7dHdlZW4uc3RhcnQ9aW5pdGlhbEluVW5pdDt0d2Vlbi5lbmQ9YWRqdXN0ZWQ7fX0KcmV0dXJuIGFkanVzdGVkO30KdmFyIGRlZmF1bHREaXNwbGF5TWFwPXt9O2Z1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KGVsZW0pe3ZhciB0ZW1wLGRvYz1lbGVtLm93bmVyRG9jdW1lbnQsbm9kZU5hbWU9ZWxlbS5ub2RlTmFtZSxkaXNwbGF5PWRlZmF1bHREaXNwbGF5TWFwW25vZGVOYW1lXTtpZihkaXNwbGF5KXtyZXR1cm4gZGlzcGxheTt9CnRlbXA9ZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZG9jLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpKTtkaXNwbGF5PWpRdWVyeS5jc3ModGVtcCwiZGlzcGxheSIpO3RlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZW1wKTtpZihkaXNwbGF5PT09Im5vbmUiKXtkaXNwbGF5PSJibG9jayI7fQpkZWZhdWx0RGlzcGxheU1hcFtub2RlTmFtZV09ZGlzcGxheTtyZXR1cm4gZGlzcGxheTt9CmZ1bmN0aW9uIHNob3dIaWRlKGVsZW1lbnRzLHNob3cpe3ZhciBkaXNwbGF5LGVsZW0sdmFsdWVzPVtdLGluZGV4PTAsbGVuZ3RoPWVsZW1lbnRzLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtlbGVtPWVsZW1lbnRzW2luZGV4XTtpZighZWxlbS5zdHlsZSl7Y29udGludWU7fQpkaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheTtpZihzaG93KXtpZihkaXNwbGF5PT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPWRhdGFQcml2LmdldChlbGVtLCJkaXNwbGF5Iil8fG51bGw7aWYoIXZhbHVlc1tpbmRleF0pe2VsZW0uc3R5bGUuZGlzcGxheT0iIjt9fQppZihlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNIaWRkZW5XaXRoaW5UcmVlKGVsZW0pKXt2YWx1ZXNbaW5kZXhdPWdldERlZmF1bHREaXNwbGF5KGVsZW0pO319ZWxzZXtpZihkaXNwbGF5IT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPSJub25lIjtkYXRhUHJpdi5zZXQoZWxlbSwiZGlzcGxheSIsZGlzcGxheSk7fX19CmZvcihpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtpZih2YWx1ZXNbaW5kZXhdIT1udWxsKXtlbGVtZW50c1tpbmRleF0uc3R5bGUuZGlzcGxheT12YWx1ZXNbaW5kZXhdO319CnJldHVybiBlbGVtZW50czt9CmpRdWVyeS5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyx0cnVlKTt9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyk7fSx0b2dnbGU6ZnVuY3Rpb24oc3RhdGUpe2lmKHR5cGVvZiBzdGF0ZT09PSJib29sZWFuIil7cmV0dXJuIHN0YXRlP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGlzSGlkZGVuV2l0aGluVHJlZSh0aGlzKSl7alF1ZXJ5KHRoaXMpLnNob3coKTt9ZWxzZXtqUXVlcnkodGhpcykuaGlkZSgpO319KTt9fSk7dmFyIHJjaGVja2FibGVUeXBlPSgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7dmFyIHJ0YWdOYW1lPSgvPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKykvaSk7dmFyIHJzY3JpcHRUeXBlPSgvXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kpO3ZhciB3cmFwTWFwPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbjt3cmFwTWFwLnRib2R5PXdyYXBNYXAudGZvb3Q9d3JhcE1hcC5jb2xncm91cD13cmFwTWFwLmNhcHRpb249d3JhcE1hcC50aGVhZDt3cmFwTWFwLnRoPXdyYXBNYXAudGQ7ZnVuY3Rpb24gZ2V0QWxsKGNvbnRleHQsdGFnKXt2YXIgcmV0O2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ3x8IioiKTt9ZWxzZSBpZih0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwodGFnfHwiKiIpO31lbHNle3JldD1bXTt9CmlmKHRhZz09PXVuZGVmaW5lZHx8dGFnJiZub2RlTmFtZShjb250ZXh0LHRhZykpe3JldHVybiBqUXVlcnkubWVyZ2UoW2NvbnRleHRdLHJldCk7fQpyZXR1cm4gcmV0O30KZnVuY3Rpb24gc2V0R2xvYmFsRXZhbChlbGVtcyxyZWZFbGVtZW50cyl7dmFyIGk9MCxsPWVsZW1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe2RhdGFQcml2LnNldChlbGVtc1tpXSwiZ2xvYmFsRXZhbCIsIXJlZkVsZW1lbnRzfHxkYXRhUHJpdi5nZXQocmVmRWxlbWVudHNbaV0sImdsb2JhbEV2YWwiKSk7fX0KdmFyIHJodG1sPS88fCYjP1x3KzsvO2Z1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoZWxlbXMsY29udGV4dCxzY3JpcHRzLHNlbGVjdGlvbixpZ25vcmVkKXt2YXIgZWxlbSx0bXAsdGFnLHdyYXAsY29udGFpbnMsaixmcmFnbWVudD1jb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxub2Rlcz1bXSxpPTAsbD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtlbGVtPWVsZW1zW2ldO2lmKGVsZW18fGVsZW09PT0wKXtpZih0b1R5cGUoZWxlbSk9PT0ib2JqZWN0Iil7alF1ZXJ5Lm1lcmdlKG5vZGVzLGVsZW0ubm9kZVR5cGU/W2VsZW1dOmVsZW0pO31lbHNlIGlmKCFyaHRtbC50ZXN0KGVsZW0pKXtub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoZWxlbSkpO31lbHNle3RtcD10bXB8fGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgiZGl2IikpO3RhZz0ocnRhZ05hbWUuZXhlYyhlbGVtKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTt3cmFwPXdyYXBNYXBbdGFnXXx8d3JhcE1hcC5fZGVmYXVsdDt0bXAuaW5uZXJIVE1MPXdyYXBbMV0ralF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoZWxlbSkrd3JhcFsyXTtqPXdyYXBbMF07d2hpbGUoai0tKXt0bXA9dG1wLmxhc3RDaGlsZDt9CmpRdWVyeS5tZXJnZShub2Rlcyx0bXAuY2hpbGROb2Rlcyk7dG1wPWZyYWdtZW50LmZpcnN0Q2hpbGQ7dG1wLnRleHRDb250ZW50PSIiO319fQpmcmFnbWVudC50ZXh0Q29udGVudD0iIjtpPTA7d2hpbGUoKGVsZW09bm9kZXNbaSsrXSkpe2lmKHNlbGVjdGlvbiYmalF1ZXJ5LmluQXJyYXkoZWxlbSxzZWxlY3Rpb24pPi0xKXtpZihpZ25vcmVkKXtpZ25vcmVkLnB1c2goZWxlbSk7fQpjb250aW51ZTt9CmNvbnRhaW5zPWpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSk7dG1wPWdldEFsbChmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtKSwic2NyaXB0Iik7aWYoY29udGFpbnMpe3NldEdsb2JhbEV2YWwodG1wKTt9CmlmKHNjcmlwdHMpe2o9MDt3aGlsZSgoZWxlbT10bXBbaisrXSkpe2lmKHJzY3JpcHRUeXBlLnRlc3QoZWxlbS50eXBlfHwiIikpe3NjcmlwdHMucHVzaChlbGVtKTt9fX19CnJldHVybiBmcmFnbWVudDt9CihmdW5jdGlvbigpe3ZhciBmcmFnbWVudD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZGl2PWZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIik7aW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpO2lucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKTtkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO3N1cHBvcnQuY2hlY2tDbG9uZT1kaXYuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDtkaXYuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IjtzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkPSEhZGl2LmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO30pKCk7dmFyIGRvY3VtZW50RWxlbWVudD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyCnJrZXlFdmVudD0vXmtleS8scm1vdXNlRXZlbnQ9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHJ0eXBlbmFtZXNwYWNlPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiByZXR1cm5UcnVlKCl7cmV0dXJuIHRydWU7fQpmdW5jdGlvbiByZXR1cm5GYWxzZSgpe3JldHVybiBmYWxzZTt9CmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCl7dHJ5e3JldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O31jYXRjaChlcnIpe319CmZ1bmN0aW9uIG9uKGVsZW0sdHlwZXMsc2VsZWN0b3IsZGF0YSxmbixvbmUpe3ZhciBvcmlnRm4sdHlwZTtpZih0eXBlb2YgdHlwZXM9PT0ib2JqZWN0Iil7aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyIpe2RhdGE9ZGF0YXx8c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkO30KZm9yKHR5cGUgaW4gdHlwZXMpe29uKGVsZW0sdHlwZSxzZWxlY3RvcixkYXRhLHR5cGVzW3R5cGVdLG9uZSk7fQpyZXR1cm4gZWxlbTt9CmlmKGRhdGE9PW51bGwmJmZuPT1udWxsKXtmbj1zZWxlY3RvcjtkYXRhPXNlbGVjdG9yPXVuZGVmaW5lZDt9ZWxzZSBpZihmbj09bnVsbCl7aWYodHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe2ZuPWRhdGE7ZGF0YT11bmRlZmluZWQ7fWVsc2V7Zm49ZGF0YTtkYXRhPXNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZDt9fQppZihmbj09PWZhbHNlKXtmbj1yZXR1cm5GYWxzZTt9ZWxzZSBpZighZm4pe3JldHVybiBlbGVtO30KaWYob25lPT09MSl7b3JpZ0ZuPWZuO2ZuPWZ1bmN0aW9uKGV2ZW50KXtqUXVlcnkoKS5vZmYoZXZlbnQpO3JldHVybiBvcmlnRm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO307Zm4uZ3VpZD1vcmlnRm4uZ3VpZHx8KG9yaWdGbi5ndWlkPWpRdWVyeS5ndWlkKyspO30KcmV0dXJuIGVsZW0uZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC5hZGQodGhpcyx0eXBlcyxmbixkYXRhLHNlbGVjdG9yKTt9KTt9CmpRdWVyeS5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlbGVtLHR5cGVzLGhhbmRsZXIsZGF0YSxzZWxlY3Rvcil7dmFyIGhhbmRsZU9iakluLGV2ZW50SGFuZGxlLHRtcCxldmVudHMsdCxoYW5kbGVPYmosc3BlY2lhbCxoYW5kbGVycyx0eXBlLG5hbWVzcGFjZXMsb3JpZ1R5cGUsZWxlbURhdGE9ZGF0YVByaXYuZ2V0KGVsZW0pO2lmKCFlbGVtRGF0YSl7cmV0dXJuO30KaWYoaGFuZGxlci5oYW5kbGVyKXtoYW5kbGVPYmpJbj1oYW5kbGVyO2hhbmRsZXI9aGFuZGxlT2JqSW4uaGFuZGxlcjtzZWxlY3Rvcj1oYW5kbGVPYmpJbi5zZWxlY3Rvcjt9CmlmKHNlbGVjdG9yKXtqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZG9jdW1lbnRFbGVtZW50LHNlbGVjdG9yKTt9CmlmKCFoYW5kbGVyLmd1aWQpe2hhbmRsZXIuZ3VpZD1qUXVlcnkuZ3VpZCsrO30KaWYoIShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7ZXZlbnRzPWVsZW1EYXRhLmV2ZW50cz17fTt9CmlmKCEoZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlKSl7ZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgalF1ZXJ5IT09InVuZGVmaW5lZCImJmpRdWVyeS5ldmVudC50cmlnZ2VyZWQhPT1lLnR5cGU/alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KGVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWQ7fTt9CnR5cGVzPSh0eXBlc3x8IiIpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO3Q9dHlwZXMubGVuZ3RoO3doaWxlKHQtLSl7dG1wPXJ0eXBlbmFtZXNwYWNlLmV4ZWModHlwZXNbdF0pfHxbXTt0eXBlPW9yaWdUeXBlPXRtcFsxXTtuYW1lc3BhY2VzPSh0bXBbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighdHlwZSl7Y29udGludWU7fQpzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTt0eXBlPShzZWxlY3Rvcj9zcGVjaWFsLmRlbGVnYXRlVHlwZTpzcGVjaWFsLmJpbmRUeXBlKXx8dHlwZTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtoYW5kbGVPYmo9alF1ZXJ5LmV4dGVuZCh7dHlwZTp0eXBlLG9yaWdUeXBlOm9yaWdUeXBlLGRhdGE6ZGF0YSxoYW5kbGVyOmhhbmRsZXIsZ3VpZDpoYW5kbGVyLmd1aWQsc2VsZWN0b3I6c2VsZWN0b3IsbmVlZHNDb250ZXh0OnNlbGVjdG9yJiZqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChzZWxlY3RvciksbmFtZXNwYWNlOm5hbWVzcGFjZXMuam9pbigiLiIpfSxoYW5kbGVPYmpJbik7aWYoIShoYW5kbGVycz1ldmVudHNbdHlwZV0pKXtoYW5kbGVycz1ldmVudHNbdHlwZV09W107aGFuZGxlcnMuZGVsZWdhdGVDb3VudD0wO2lmKCFzcGVjaWFsLnNldHVwfHxzcGVjaWFsLnNldHVwLmNhbGwoZWxlbSxkYXRhLG5hbWVzcGFjZXMsZXZlbnRIYW5kbGUpPT09ZmFsc2Upe2lmKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcil7ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZXZlbnRIYW5kbGUpO319fQppZihzcGVjaWFsLmFkZCl7c3BlY2lhbC5hZGQuY2FsbChlbGVtLGhhbmRsZU9iaik7aWYoIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQpe2hhbmRsZU9iai5oYW5kbGVyLmd1aWQ9aGFuZGxlci5ndWlkO319CmlmKHNlbGVjdG9yKXtoYW5kbGVycy5zcGxpY2UoaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLDAsaGFuZGxlT2JqKTt9ZWxzZXtoYW5kbGVycy5wdXNoKGhhbmRsZU9iaik7fQpqUXVlcnkuZXZlbnQuZ2xvYmFsW3R5cGVdPXRydWU7fX0scmVtb3ZlOmZ1bmN0aW9uKGVsZW0sdHlwZXMsaGFuZGxlcixzZWxlY3RvcixtYXBwZWRUeXBlcyl7dmFyIGosb3JpZ0NvdW50LHRtcCxldmVudHMsdCxoYW5kbGVPYmosc3BlY2lhbCxoYW5kbGVycyx0eXBlLG5hbWVzcGFjZXMsb3JpZ1R5cGUsZWxlbURhdGE9ZGF0YVByaXYuaGFzRGF0YShlbGVtKSYmZGF0YVByaXYuZ2V0KGVsZW0pO2lmKCFlbGVtRGF0YXx8IShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7cmV0dXJuO30KdHlwZXM9KHR5cGVzfHwiIikubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFsiIl07dD10eXBlcy5sZW5ndGg7d2hpbGUodC0tKXt0bXA9cnR5cGVuYW1lc3BhY2UuZXhlYyh0eXBlc1t0XSl8fFtdO3R5cGU9b3JpZ1R5cGU9dG1wWzFdO25hbWVzcGFjZXM9KHRtcFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCF0eXBlKXtmb3IodHlwZSBpbiBldmVudHMpe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlK3R5cGVzW3RdLGhhbmRsZXIsc2VsZWN0b3IsdHJ1ZSk7fQpjb250aW51ZTt9CnNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O3R5cGU9KHNlbGVjdG9yP3NwZWNpYWwuZGVsZWdhdGVUeXBlOnNwZWNpYWwuYmluZFR5cGUpfHx0eXBlO2hhbmRsZXJzPWV2ZW50c1t0eXBlXXx8W107dG1wPXRtcFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrbmFtZXNwYWNlcy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtvcmlnQ291bnQ9aj1oYW5kbGVycy5sZW5ndGg7d2hpbGUoai0tKXtoYW5kbGVPYmo9aGFuZGxlcnNbal07aWYoKG1hcHBlZFR5cGVzfHxvcmlnVHlwZT09PWhhbmRsZU9iai5vcmlnVHlwZSkmJighaGFuZGxlcnx8aGFuZGxlci5ndWlkPT09aGFuZGxlT2JqLmd1aWQpJiYoIXRtcHx8dG1wLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpJiYoIXNlbGVjdG9yfHxzZWxlY3Rvcj09PWhhbmRsZU9iai5zZWxlY3Rvcnx8c2VsZWN0b3I9PT0iKioiJiZoYW5kbGVPYmouc2VsZWN0b3IpKXtoYW5kbGVycy5zcGxpY2UoaiwxKTtpZihoYW5kbGVPYmouc2VsZWN0b3Ipe2hhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTt9CmlmKHNwZWNpYWwucmVtb3ZlKXtzcGVjaWFsLnJlbW92ZS5jYWxsKGVsZW0saGFuZGxlT2JqKTt9fX0KaWYob3JpZ0NvdW50JiYhaGFuZGxlcnMubGVuZ3RoKXtpZighc3BlY2lhbC50ZWFyZG93bnx8c3BlY2lhbC50ZWFyZG93bi5jYWxsKGVsZW0sbmFtZXNwYWNlcyxlbGVtRGF0YS5oYW5kbGUpPT09ZmFsc2Upe2pRdWVyeS5yZW1vdmVFdmVudChlbGVtLHR5cGUsZWxlbURhdGEuaGFuZGxlKTt9CmRlbGV0ZSBldmVudHNbdHlwZV07fX0KaWYoalF1ZXJ5LmlzRW1wdHlPYmplY3QoZXZlbnRzKSl7ZGF0YVByaXYucmVtb3ZlKGVsZW0sImhhbmRsZSBldmVudHMiKTt9fSxkaXNwYXRjaDpmdW5jdGlvbihuYXRpdmVFdmVudCl7dmFyIGV2ZW50PWpRdWVyeS5ldmVudC5maXgobmF0aXZlRXZlbnQpO3ZhciBpLGoscmV0LG1hdGNoZWQsaGFuZGxlT2JqLGhhbmRsZXJRdWV1ZSxhcmdzPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxoYW5kbGVycz0oZGF0YVByaXYuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZXZlbnQudHlwZV18fFtdLHNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbZXZlbnQudHlwZV18fHt9O2FyZ3NbMF09ZXZlbnQ7Zm9yKGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXthcmdzW2ldPWFyZ3VtZW50c1tpXTt9CmV2ZW50LmRlbGVnYXRlVGFyZ2V0PXRoaXM7aWYoc3BlY2lhbC5wcmVEaXNwYXRjaCYmc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZXZlbnQpPT09ZmFsc2Upe3JldHVybjt9CmhhbmRsZXJRdWV1ZT1qUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGV2ZW50LGhhbmRsZXJzKTtpPTA7d2hpbGUoKG1hdGNoZWQ9aGFuZGxlclF1ZXVlW2krK10pJiYhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZXZlbnQuY3VycmVudFRhcmdldD1tYXRjaGVkLmVsZW07aj0wO3doaWxlKChoYW5kbGVPYmo9bWF0Y2hlZC5oYW5kbGVyc1tqKytdKSYmIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFldmVudC5ybmFtZXNwYWNlfHxldmVudC5ybmFtZXNwYWNlLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpe2V2ZW50LmhhbmRsZU9iaj1oYW5kbGVPYmo7ZXZlbnQuZGF0YT1oYW5kbGVPYmouZGF0YTtyZXQ9KChqUXVlcnkuZXZlbnQuc3BlY2lhbFtoYW5kbGVPYmoub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxoYW5kbGVPYmouaGFuZGxlcikuYXBwbHkobWF0Y2hlZC5lbGVtLGFyZ3MpO2lmKHJldCE9PXVuZGVmaW5lZCl7aWYoKGV2ZW50LnJlc3VsdD1yZXQpPT09ZmFsc2Upe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX19fX0KaWYoc3BlY2lhbC5wb3N0RGlzcGF0Y2gpe3NwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxldmVudCk7fQpyZXR1cm4gZXZlbnQucmVzdWx0O30saGFuZGxlcnM6ZnVuY3Rpb24oZXZlbnQsaGFuZGxlcnMpe3ZhciBpLGhhbmRsZU9iaixzZWwsbWF0Y2hlZEhhbmRsZXJzLG1hdGNoZWRTZWxlY3RvcnMsaGFuZGxlclF1ZXVlPVtdLGRlbGVnYXRlQ291bnQ9aGFuZGxlcnMuZGVsZWdhdGVDb3VudCxjdXI9ZXZlbnQudGFyZ2V0O2lmKGRlbGVnYXRlQ291bnQmJmN1ci5ub2RlVHlwZSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmZXZlbnQuYnV0dG9uPj0xKSl7Zm9yKDtjdXIhPT10aGlzO2N1cj1jdXIucGFyZW50Tm9kZXx8dGhpcyl7aWYoY3VyLm5vZGVUeXBlPT09MSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmY3VyLmRpc2FibGVkPT09dHJ1ZSkpe21hdGNoZWRIYW5kbGVycz1bXTttYXRjaGVkU2VsZWN0b3JzPXt9O2ZvcihpPTA7aTxkZWxlZ2F0ZUNvdW50O2krKyl7aGFuZGxlT2JqPWhhbmRsZXJzW2ldO3NlbD1oYW5kbGVPYmouc2VsZWN0b3IrIiAiO2lmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXT09PXVuZGVmaW5lZCl7bWF0Y2hlZFNlbGVjdG9yc1tzZWxdPWhhbmRsZU9iai5uZWVkc0NvbnRleHQ/alF1ZXJ5KHNlbCx0aGlzKS5pbmRleChjdXIpPi0xOmpRdWVyeS5maW5kKHNlbCx0aGlzLG51bGwsW2N1cl0pLmxlbmd0aDt9CmlmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXSl7bWF0Y2hlZEhhbmRsZXJzLnB1c2goaGFuZGxlT2JqKTt9fQppZihtYXRjaGVkSGFuZGxlcnMubGVuZ3RoKXtoYW5kbGVyUXVldWUucHVzaCh7ZWxlbTpjdXIsaGFuZGxlcnM6bWF0Y2hlZEhhbmRsZXJzfSk7fX19fQpjdXI9dGhpcztpZihkZWxlZ2F0ZUNvdW50PGhhbmRsZXJzLmxlbmd0aCl7aGFuZGxlclF1ZXVlLnB1c2goe2VsZW06Y3VyLGhhbmRsZXJzOmhhbmRsZXJzLnNsaWNlKGRlbGVnYXRlQ291bnQpfSk7fQpyZXR1cm4gaGFuZGxlclF1ZXVlO30sYWRkUHJvcDpmdW5jdGlvbihuYW1lLGhvb2spe09iamVjdC5kZWZpbmVQcm9wZXJ0eShqUXVlcnkuRXZlbnQucHJvdG90eXBlLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSxnZXQ6aXNGdW5jdGlvbihob29rKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIGhvb2sodGhpcy5vcmlnaW5hbEV2ZW50KTt9fTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFtuYW1lXTt9fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlLHZhbHVlOnZhbHVlfSk7fX0pO30sZml4OmZ1bmN0aW9uKG9yaWdpbmFsRXZlbnQpe3JldHVybiBvcmlnaW5hbEV2ZW50W2pRdWVyeS5leHBhbmRvXT9vcmlnaW5hbEV2ZW50Om5ldyBqUXVlcnkuRXZlbnQob3JpZ2luYWxFdmVudCk7fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTp0cnVlfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1zYWZlQWN0aXZlRWxlbWVudCgpJiZ0aGlzLmZvY3VzKXt0aGlzLmZvY3VzKCk7cmV0dXJuIGZhbHNlO319LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzPT09c2FmZUFjdGl2ZUVsZW1lbnQoKSYmdGhpcy5ibHVyKXt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2U7fX0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT09ImNoZWNrYm94IiYmdGhpcy5jbGljayYmbm9kZU5hbWUodGhpcywiaW5wdXQiKSl7dGhpcy5jbGljaygpO3JldHVybiBmYWxzZTt9fSxfZGVmYXVsdDpmdW5jdGlvbihldmVudCl7cmV0dXJuIG5vZGVOYW1lKGV2ZW50LnRhcmdldCwiYSIpO319LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGV2ZW50KXtpZihldmVudC5yZXN1bHQhPT11bmRlZmluZWQmJmV2ZW50Lm9yaWdpbmFsRXZlbnQpe2V2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZXZlbnQucmVzdWx0O319fX19O2pRdWVyeS5yZW1vdmVFdmVudD1mdW5jdGlvbihlbGVtLHR5cGUsaGFuZGxlKXtpZihlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIpe2VsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLGhhbmRsZSk7fX07alF1ZXJ5LkV2ZW50PWZ1bmN0aW9uKHNyYyxwcm9wcyl7aWYoISh0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50KSl7cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoc3JjLHByb3BzKTt9CmlmKHNyYyYmc3JjLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1zcmM7dGhpcy50eXBlPXNyYy50eXBlO3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXNyYy5kZWZhdWx0UHJldmVudGVkfHxzcmMuZGVmYXVsdFByZXZlbnRlZD09PXVuZGVmaW5lZCYmc3JjLnJldHVyblZhbHVlPT09ZmFsc2U/cmV0dXJuVHJ1ZTpyZXR1cm5GYWxzZTt0aGlzLnRhcmdldD0oc3JjLnRhcmdldCYmc3JjLnRhcmdldC5ub2RlVHlwZT09PTMpP3NyYy50YXJnZXQucGFyZW50Tm9kZTpzcmMudGFyZ2V0O3RoaXMuY3VycmVudFRhcmdldD1zcmMuY3VycmVudFRhcmdldDt0aGlzLnJlbGF0ZWRUYXJnZXQ9c3JjLnJlbGF0ZWRUYXJnZXQ7fWVsc2V7dGhpcy50eXBlPXNyYzt9CmlmKHByb3BzKXtqUXVlcnkuZXh0ZW5kKHRoaXMscHJvcHMpO30KdGhpcy50aW1lU3RhbXA9c3JjJiZzcmMudGltZVN0YW1wfHxEYXRlLm5vdygpO3RoaXNbalF1ZXJ5LmV4cGFuZG9dPXRydWU7fTtqUXVlcnkuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpqUXVlcnkuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOnJldHVybkZhbHNlLGlzUHJvcGFnYXRpb25TdG9wcGVkOnJldHVybkZhbHNlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOnJldHVybkZhbHNlLGlzU2ltdWxhdGVkOmZhbHNlLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXJldHVyblRydWU7aWYoZSYmIXRoaXMuaXNTaW11bGF0ZWQpe2UucHJldmVudERlZmF1bHQoKTt9fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnN0b3BQcm9wYWdhdGlvbigpO319LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXJldHVyblRydWU7aWYoZSYmIXRoaXMuaXNTaW11bGF0ZWQpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7fQp0aGlzLnN0b3BQcm9wYWdhdGlvbigpO319O2pRdWVyeS5lYWNoKHthbHRLZXk6dHJ1ZSxidWJibGVzOnRydWUsY2FuY2VsYWJsZTp0cnVlLGNoYW5nZWRUb3VjaGVzOnRydWUsY3RybEtleTp0cnVlLGRldGFpbDp0cnVlLGV2ZW50UGhhc2U6dHJ1ZSxtZXRhS2V5OnRydWUscGFnZVg6dHJ1ZSxwYWdlWTp0cnVlLHNoaWZ0S2V5OnRydWUsdmlldzp0cnVlLCJjaGFyIjp0cnVlLGNoYXJDb2RlOnRydWUsa2V5OnRydWUsa2V5Q29kZTp0cnVlLGJ1dHRvbjp0cnVlLGJ1dHRvbnM6dHJ1ZSxjbGllbnRYOnRydWUsY2xpZW50WTp0cnVlLG9mZnNldFg6dHJ1ZSxvZmZzZXRZOnRydWUscG9pbnRlcklkOnRydWUscG9pbnRlclR5cGU6dHJ1ZSxzY3JlZW5YOnRydWUsc2NyZWVuWTp0cnVlLHRhcmdldFRvdWNoZXM6dHJ1ZSx0b0VsZW1lbnQ6dHJ1ZSx0b3VjaGVzOnRydWUsd2hpY2g6ZnVuY3Rpb24oZXZlbnQpe3ZhciBidXR0b249ZXZlbnQuYnV0dG9uO2lmKGV2ZW50LndoaWNoPT1udWxsJiZya2V5RXZlbnQudGVzdChldmVudC50eXBlKSl7cmV0dXJuIGV2ZW50LmNoYXJDb2RlIT1udWxsP2V2ZW50LmNoYXJDb2RlOmV2ZW50LmtleUNvZGU7fQppZighZXZlbnQud2hpY2gmJmJ1dHRvbiE9PXVuZGVmaW5lZCYmcm1vdXNlRXZlbnQudGVzdChldmVudC50eXBlKSl7aWYoYnV0dG9uJjEpe3JldHVybiAxO30KaWYoYnV0dG9uJjIpe3JldHVybiAzO30KaWYoYnV0dG9uJjQpe3JldHVybiAyO30KcmV0dXJuIDA7fQpyZXR1cm4gZXZlbnQud2hpY2g7fX0salF1ZXJ5LmV2ZW50LmFkZFByb3ApO2pRdWVyeS5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihvcmlnLGZpeCl7alF1ZXJ5LmV2ZW50LnNwZWNpYWxbb3JpZ109e2RlbGVnYXRlVHlwZTpmaXgsYmluZFR5cGU6Zml4LGhhbmRsZTpmdW5jdGlvbihldmVudCl7dmFyIHJldCx0YXJnZXQ9dGhpcyxyZWxhdGVkPWV2ZW50LnJlbGF0ZWRUYXJnZXQsaGFuZGxlT2JqPWV2ZW50LmhhbmRsZU9iajtpZighcmVsYXRlZHx8KHJlbGF0ZWQhPT10YXJnZXQmJiFqUXVlcnkuY29udGFpbnModGFyZ2V0LHJlbGF0ZWQpKSl7ZXZlbnQudHlwZT1oYW5kbGVPYmoub3JpZ1R5cGU7cmV0PWhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtldmVudC50eXBlPWZpeDt9CnJldHVybiByZXQ7fX07fSk7alF1ZXJ5LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil7cmV0dXJuIG9uKHRoaXMsdHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSxvbmU6ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil7cmV0dXJuIG9uKHRoaXMsdHlwZXMsc2VsZWN0b3IsZGF0YSxmbiwxKTt9LG9mZjpmdW5jdGlvbih0eXBlcyxzZWxlY3Rvcixmbil7dmFyIGhhbmRsZU9iaix0eXBlO2lmKHR5cGVzJiZ0eXBlcy5wcmV2ZW50RGVmYXVsdCYmdHlwZXMuaGFuZGxlT2JqKXtoYW5kbGVPYmo9dHlwZXMuaGFuZGxlT2JqO2pRdWVyeSh0eXBlcy5kZWxlZ2F0ZVRhcmdldCkub2ZmKGhhbmRsZU9iai5uYW1lc3BhY2U/aGFuZGxlT2JqLm9yaWdUeXBlKyIuIitoYW5kbGVPYmoubmFtZXNwYWNlOmhhbmRsZU9iai5vcmlnVHlwZSxoYW5kbGVPYmouc2VsZWN0b3IsaGFuZGxlT2JqLmhhbmRsZXIpO3JldHVybiB0aGlzO30KaWYodHlwZW9mIHR5cGVzPT09Im9iamVjdCIpe2Zvcih0eXBlIGluIHR5cGVzKXt0aGlzLm9mZih0eXBlLHNlbGVjdG9yLHR5cGVzW3R5cGVdKTt9CnJldHVybiB0aGlzO30KaWYoc2VsZWN0b3I9PT1mYWxzZXx8dHlwZW9mIHNlbGVjdG9yPT09ImZ1bmN0aW9uIil7Zm49c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkO30KaWYoZm49PT1mYWxzZSl7Zm49cmV0dXJuRmFsc2U7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnJlbW92ZSh0aGlzLHR5cGVzLGZuLHNlbGVjdG9yKTt9KTt9fSk7dmFyCnJ4aHRtbFRhZz0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKilbXj5dKilcLz4vZ2kscm5vSW5uZXJodG1sPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHJjaGVja2VkPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHJjbGVhblNjcmlwdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KGVsZW0sY29udGVudCl7aWYobm9kZU5hbWUoZWxlbSwidGFibGUiKSYmbm9kZU5hbWUoY29udGVudC5ub2RlVHlwZSE9PTExP2NvbnRlbnQ6Y29udGVudC5maXJzdENoaWxkLCJ0ciIpKXtyZXR1cm4galF1ZXJ5KGVsZW0pLmNoaWxkcmVuKCJ0Ym9keSIpWzBdfHxlbGVtO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBkaXNhYmxlU2NyaXB0KGVsZW0pe2VsZW0udHlwZT0oZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSE9PW51bGwpKyIvIitlbGVtLnR5cGU7cmV0dXJuIGVsZW07fQpmdW5jdGlvbiByZXN0b3JlU2NyaXB0KGVsZW0pe2lmKChlbGVtLnR5cGV8fCIiKS5zbGljZSgwLDUpPT09InRydWUvIil7ZWxlbS50eXBlPWVsZW0udHlwZS5zbGljZSg1KTt9ZWxzZXtlbGVtLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBjbG9uZUNvcHlFdmVudChzcmMsZGVzdCl7dmFyIGksbCx0eXBlLHBkYXRhT2xkLHBkYXRhQ3VyLHVkYXRhT2xkLHVkYXRhQ3VyLGV2ZW50cztpZihkZXN0Lm5vZGVUeXBlIT09MSl7cmV0dXJuO30KaWYoZGF0YVByaXYuaGFzRGF0YShzcmMpKXtwZGF0YU9sZD1kYXRhUHJpdi5hY2Nlc3Moc3JjKTtwZGF0YUN1cj1kYXRhUHJpdi5zZXQoZGVzdCxwZGF0YU9sZCk7ZXZlbnRzPXBkYXRhT2xkLmV2ZW50cztpZihldmVudHMpe2RlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7cGRhdGFDdXIuZXZlbnRzPXt9O2Zvcih0eXBlIGluIGV2ZW50cyl7Zm9yKGk9MCxsPWV2ZW50c1t0eXBlXS5sZW5ndGg7aTxsO2krKyl7alF1ZXJ5LmV2ZW50LmFkZChkZXN0LHR5cGUsZXZlbnRzW3R5cGVdW2ldKTt9fX19CmlmKGRhdGFVc2VyLmhhc0RhdGEoc3JjKSl7dWRhdGFPbGQ9ZGF0YVVzZXIuYWNjZXNzKHNyYyk7dWRhdGFDdXI9alF1ZXJ5LmV4dGVuZCh7fSx1ZGF0YU9sZCk7ZGF0YVVzZXIuc2V0KGRlc3QsdWRhdGFDdXIpO319CmZ1bmN0aW9uIGZpeElucHV0KHNyYyxkZXN0KXt2YXIgbm9kZU5hbWU9ZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT09ImlucHV0IiYmcmNoZWNrYWJsZVR5cGUudGVzdChzcmMudHlwZSkpe2Rlc3QuY2hlY2tlZD1zcmMuY2hlY2tlZDt9ZWxzZSBpZihub2RlTmFtZT09PSJpbnB1dCJ8fG5vZGVOYW1lPT09InRleHRhcmVhIil7ZGVzdC5kZWZhdWx0VmFsdWU9c3JjLmRlZmF1bHRWYWx1ZTt9fQpmdW5jdGlvbiBkb21NYW5pcChjb2xsZWN0aW9uLGFyZ3MsY2FsbGJhY2ssaWdub3JlZCl7YXJncz1jb25jYXQuYXBwbHkoW10sYXJncyk7dmFyIGZyYWdtZW50LGZpcnN0LHNjcmlwdHMsaGFzU2NyaXB0cyxub2RlLGRvYyxpPTAsbD1jb2xsZWN0aW9uLmxlbmd0aCxpTm9DbG9uZT1sLTEsdmFsdWU9YXJnc1swXSx2YWx1ZUlzRnVuY3Rpb249aXNGdW5jdGlvbih2YWx1ZSk7aWYodmFsdWVJc0Z1bmN0aW9ufHwobD4xJiZ0eXBlb2YgdmFsdWU9PT0ic3RyaW5nIiYmIXN1cHBvcnQuY2hlY2tDbG9uZSYmcmNoZWNrZWQudGVzdCh2YWx1ZSkpKXtyZXR1cm4gY29sbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGluZGV4KXt2YXIgc2VsZj1jb2xsZWN0aW9uLmVxKGluZGV4KTtpZih2YWx1ZUlzRnVuY3Rpb24pe2FyZ3NbMF09dmFsdWUuY2FsbCh0aGlzLGluZGV4LHNlbGYuaHRtbCgpKTt9CmRvbU1hbmlwKHNlbGYsYXJncyxjYWxsYmFjayxpZ25vcmVkKTt9KTt9CmlmKGwpe2ZyYWdtZW50PWJ1aWxkRnJhZ21lbnQoYXJncyxjb2xsZWN0aW9uWzBdLm93bmVyRG9jdW1lbnQsZmFsc2UsY29sbGVjdGlvbixpZ25vcmVkKTtmaXJzdD1mcmFnbWVudC5maXJzdENoaWxkO2lmKGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoPT09MSl7ZnJhZ21lbnQ9Zmlyc3Q7fQppZihmaXJzdHx8aWdub3JlZCl7c2NyaXB0cz1qUXVlcnkubWFwKGdldEFsbChmcmFnbWVudCwic2NyaXB0IiksZGlzYWJsZVNjcmlwdCk7aGFzU2NyaXB0cz1zY3JpcHRzLmxlbmd0aDtmb3IoO2k8bDtpKyspe25vZGU9ZnJhZ21lbnQ7aWYoaSE9PWlOb0Nsb25lKXtub2RlPWpRdWVyeS5jbG9uZShub2RlLHRydWUsdHJ1ZSk7aWYoaGFzU2NyaXB0cyl7alF1ZXJ5Lm1lcmdlKHNjcmlwdHMsZ2V0QWxsKG5vZGUsInNjcmlwdCIpKTt9fQpjYWxsYmFjay5jYWxsKGNvbGxlY3Rpb25baV0sbm9kZSxpKTt9CmlmKGhhc1NjcmlwdHMpe2RvYz1zY3JpcHRzW3NjcmlwdHMubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQ7alF1ZXJ5Lm1hcChzY3JpcHRzLHJlc3RvcmVTY3JpcHQpO2ZvcihpPTA7aTxoYXNTY3JpcHRzO2krKyl7bm9kZT1zY3JpcHRzW2ldO2lmKHJzY3JpcHRUeXBlLnRlc3Qobm9kZS50eXBlfHwiIikmJiFkYXRhUHJpdi5hY2Nlc3Mobm9kZSwiZ2xvYmFsRXZhbCIpJiZqUXVlcnkuY29udGFpbnMoZG9jLG5vZGUpKXtpZihub2RlLnNyYyYmKG5vZGUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCkhPT0ibW9kdWxlIil7aWYoalF1ZXJ5Ll9ldmFsVXJsKXtqUXVlcnkuX2V2YWxVcmwobm9kZS5zcmMpO319ZWxzZXtET01FdmFsKG5vZGUudGV4dENvbnRlbnQucmVwbGFjZShyY2xlYW5TY3JpcHQsIiIpLGRvYyxub2RlKTt9fX19fX0KcmV0dXJuIGNvbGxlY3Rpb247fQpmdW5jdGlvbiByZW1vdmUoZWxlbSxzZWxlY3RvcixrZWVwRGF0YSl7dmFyIG5vZGUsbm9kZXM9c2VsZWN0b3I/alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixlbGVtKTplbGVtLGk9MDtmb3IoOyhub2RlPW5vZGVzW2ldKSE9bnVsbDtpKyspe2lmKCFrZWVwRGF0YSYmbm9kZS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKG5vZGUpKTt9CmlmKG5vZGUucGFyZW50Tm9kZSl7aWYoa2VlcERhdGEmJmpRdWVyeS5jb250YWlucyhub2RlLm93bmVyRG9jdW1lbnQsbm9kZSkpe3NldEdsb2JhbEV2YWwoZ2V0QWxsKG5vZGUsInNjcmlwdCIpKTt9Cm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTt9fQpyZXR1cm4gZWxlbTt9CmpRdWVyeS5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oaHRtbCl7cmV0dXJuIGh0bWwucmVwbGFjZShyeGh0bWxUYWcsIjwkMT48LyQyPiIpO30sY2xvbmU6ZnVuY3Rpb24oZWxlbSxkYXRhQW5kRXZlbnRzLGRlZXBEYXRhQW5kRXZlbnRzKXt2YXIgaSxsLHNyY0VsZW1lbnRzLGRlc3RFbGVtZW50cyxjbG9uZT1lbGVtLmNsb25lTm9kZSh0cnVlKSxpblBhZ2U9alF1ZXJ5LmNvbnRhaW5zKGVsZW0ub3duZXJEb2N1bWVudCxlbGVtKTtpZighc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCYmKGVsZW0ubm9kZVR5cGU9PT0xfHxlbGVtLm5vZGVUeXBlPT09MTEpJiYhalF1ZXJ5LmlzWE1MRG9jKGVsZW0pKXtkZXN0RWxlbWVudHM9Z2V0QWxsKGNsb25lKTtzcmNFbGVtZW50cz1nZXRBbGwoZWxlbSk7Zm9yKGk9MCxsPXNyY0VsZW1lbnRzLmxlbmd0aDtpPGw7aSsrKXtmaXhJbnB1dChzcmNFbGVtZW50c1tpXSxkZXN0RWxlbWVudHNbaV0pO319CmlmKGRhdGFBbmRFdmVudHMpe2lmKGRlZXBEYXRhQW5kRXZlbnRzKXtzcmNFbGVtZW50cz1zcmNFbGVtZW50c3x8Z2V0QWxsKGVsZW0pO2Rlc3RFbGVtZW50cz1kZXN0RWxlbWVudHN8fGdldEFsbChjbG9uZSk7Zm9yKGk9MCxsPXNyY0VsZW1lbnRzLmxlbmd0aDtpPGw7aSsrKXtjbG9uZUNvcHlFdmVudChzcmNFbGVtZW50c1tpXSxkZXN0RWxlbWVudHNbaV0pO319ZWxzZXtjbG9uZUNvcHlFdmVudChlbGVtLGNsb25lKTt9fQpkZXN0RWxlbWVudHM9Z2V0QWxsKGNsb25lLCJzY3JpcHQiKTtpZihkZXN0RWxlbWVudHMubGVuZ3RoPjApe3NldEdsb2JhbEV2YWwoZGVzdEVsZW1lbnRzLCFpblBhZ2UmJmdldEFsbChlbGVtLCJzY3JpcHQiKSk7fQpyZXR1cm4gY2xvbmU7fSxjbGVhbkRhdGE6ZnVuY3Rpb24oZWxlbXMpe3ZhciBkYXRhLGVsZW0sdHlwZSxzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsLGk9MDtmb3IoOyhlbGVtPWVsZW1zW2ldKSE9PXVuZGVmaW5lZDtpKyspe2lmKGFjY2VwdERhdGEoZWxlbSkpe2lmKChkYXRhPWVsZW1bZGF0YVByaXYuZXhwYW5kb10pKXtpZihkYXRhLmV2ZW50cyl7Zm9yKHR5cGUgaW4gZGF0YS5ldmVudHMpe2lmKHNwZWNpYWxbdHlwZV0pe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlKTt9ZWxzZXtqUXVlcnkucmVtb3ZlRXZlbnQoZWxlbSx0eXBlLGRhdGEuaGFuZGxlKTt9fX0KZWxlbVtkYXRhUHJpdi5leHBhbmRvXT11bmRlZmluZWQ7fQppZihlbGVtW2RhdGFVc2VyLmV4cGFuZG9dKXtlbGVtW2RhdGFVc2VyLmV4cGFuZG9dPXVuZGVmaW5lZDt9fX19fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gcmVtb3ZlKHRoaXMsc2VsZWN0b3IsdHJ1ZSk7fSxyZW1vdmU6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiByZW1vdmUodGhpcyxzZWxlY3Rvcik7fSx0ZXh0OmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZT09PXVuZGVmaW5lZD9qUXVlcnkudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt0aGlzLnRleHRDb250ZW50PXZhbHVlO319KTt9LG51bGwsdmFsdWUsYXJndW1lbnRzLmxlbmd0aCk7fSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0YXJnZXQ9bWFuaXB1bGF0aW9uVGFyZ2V0KHRoaXMsZWxlbSk7dGFyZ2V0LmFwcGVuZENoaWxkKGVsZW0pO319KTt9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0YXJnZXQ9bWFuaXB1bGF0aW9uVGFyZ2V0KHRoaXMsZWxlbSk7dGFyZ2V0Lmluc2VydEJlZm9yZShlbGVtLHRhcmdldC5maXJzdENoaWxkKTt9fSk7fSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sdGhpcyk7fX0pO30sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sdGhpcy5uZXh0U2libGluZyk7fX0pO30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZWxlbSxpPTA7Zm9yKDsoZWxlbT10aGlzW2ldKSE9bnVsbDtpKyspe2lmKGVsZW0ubm9kZVR5cGU9PT0xKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbChlbGVtLGZhbHNlKSk7ZWxlbS50ZXh0Q29udGVudD0iIjt9fQpyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uKGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpe2RhdGFBbmRFdmVudHM9ZGF0YUFuZEV2ZW50cz09bnVsbD9mYWxzZTpkYXRhQW5kRXZlbnRzO2RlZXBEYXRhQW5kRXZlbnRzPWRlZXBEYXRhQW5kRXZlbnRzPT1udWxsP2RhdGFBbmRFdmVudHM6ZGVlcERhdGFBbmRFdmVudHM7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5jbG9uZSh0aGlzLGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpO30pO30saHRtbDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHZhbHVlKXt2YXIgZWxlbT10aGlzWzBdfHx7fSxpPTAsbD10aGlzLmxlbmd0aDtpZih2YWx1ZT09PXVuZGVmaW5lZCYmZWxlbS5ub2RlVHlwZT09PTEpe3JldHVybiBlbGVtLmlubmVySFRNTDt9CmlmKHR5cGVvZiB2YWx1ZT09PSJzdHJpbmciJiYhcm5vSW5uZXJodG1sLnRlc3QodmFsdWUpJiYhd3JhcE1hcFsocnRhZ05hbWUuZXhlYyh2YWx1ZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXt2YWx1ZT1qUXVlcnkuaHRtbFByZWZpbHRlcih2YWx1ZSk7dHJ5e2Zvcig7aTxsO2krKyl7ZWxlbT10aGlzW2ldfHx7fTtpZihlbGVtLm5vZGVUeXBlPT09MSl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwoZWxlbSxmYWxzZSkpO2VsZW0uaW5uZXJIVE1MPXZhbHVlO319CmVsZW09MDt9Y2F0Y2goZSl7fX0KaWYoZWxlbSl7dGhpcy5lbXB0eSgpLmFwcGVuZCh2YWx1ZSk7fX0sbnVsbCx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoKTt9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGlnbm9yZWQ9W107cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9dGhpcy5wYXJlbnROb2RlO2lmKGpRdWVyeS5pbkFycmF5KHRoaXMsaWdub3JlZCk8MCl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwodGhpcykpO2lmKHBhcmVudCl7cGFyZW50LnJlcGxhY2VDaGlsZChlbGVtLHRoaXMpO319fSxpZ25vcmVkKTt9fSk7alF1ZXJ5LmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihuYW1lLG9yaWdpbmFsKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBlbGVtcyxyZXQ9W10saW5zZXJ0PWpRdWVyeShzZWxlY3RvciksbGFzdD1pbnNlcnQubGVuZ3RoLTEsaT0wO2Zvcig7aTw9bGFzdDtpKyspe2VsZW1zPWk9PT1sYXN0P3RoaXM6dGhpcy5jbG9uZSh0cnVlKTtqUXVlcnkoaW5zZXJ0W2ldKVtvcmlnaW5hbF0oZWxlbXMpO3B1c2guYXBwbHkocmV0LGVsZW1zLmdldCgpKTt9CnJldHVybiB0aGlzLnB1c2hTdGFjayhyZXQpO307fSk7dmFyIHJudW1ub25weD1uZXcgUmVnRXhwKCJeKCIrcG51bSsiKSg/IXB4KVthLXolXSskIiwiaSIpO3ZhciBnZXRTdHlsZXM9ZnVuY3Rpb24oZWxlbSl7dmFyIHZpZXc9ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O2lmKCF2aWV3fHwhdmlldy5vcGVuZXIpe3ZpZXc9d2luZG93O30KcmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTt9O3ZhciByYm94U3R5bGU9bmV3IFJlZ0V4cChjc3NFeHBhbmQuam9pbigifCIpLCJpIik7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKXtpZighZGl2KXtyZXR1cm47fQpjb250YWluZXIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4OyIrIm1hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCI7ZGl2LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDsiKyJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4OyIrIndpZHRoOjYwJTt0b3A6MSUiO2RvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChjb250YWluZXIpLmFwcGVuZENoaWxkKGRpdik7dmFyIGRpdlN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRpdik7cGl4ZWxQb3NpdGlvblZhbD1kaXZTdHlsZS50b3AhPT0iMSUiO3JlbGlhYmxlTWFyZ2luTGVmdFZhbD1yb3VuZFBpeGVsTWVhc3VyZXMoZGl2U3R5bGUubWFyZ2luTGVmdCk9PT0xMjtkaXYuc3R5bGUucmlnaHQ9IjYwJSI7cGl4ZWxCb3hTdHlsZXNWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdlN0eWxlLnJpZ2h0KT09PTM2O2JveFNpemluZ1JlbGlhYmxlVmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXZTdHlsZS53aWR0aCk9PT0zNjtkaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjtzY3JvbGxib3hTaXplVmFsPWRpdi5vZmZzZXRXaWR0aD09PTM2fHwiYWJzb2x1dGUiO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO2Rpdj1udWxsO30KZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKG1lYXN1cmUpe3JldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQobWVhc3VyZSkpO30KdmFyIHBpeGVsUG9zaXRpb25WYWwsYm94U2l6aW5nUmVsaWFibGVWYWwsc2Nyb2xsYm94U2l6ZVZhbCxwaXhlbEJveFN0eWxlc1ZhbCxyZWxpYWJsZU1hcmdpbkxlZnRWYWwsY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGRpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZighZGl2LnN0eWxlKXtyZXR1cm47fQpkaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtkaXYuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3N1cHBvcnQuY2xlYXJDbG9uZVN0eWxlPWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD09PSJjb250ZW50LWJveCI7alF1ZXJ5LmV4dGVuZChzdXBwb3J0LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO30scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbEJveFN0eWxlc1ZhbDt9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbFBvc2l0aW9uVmFsO30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7Y29tcHV0ZVN0eWxlVGVzdHMoKTtyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7fX0pO30pKCk7ZnVuY3Rpb24gY3VyQ1NTKGVsZW0sbmFtZSxjb21wdXRlZCl7dmFyIHdpZHRoLG1pbldpZHRoLG1heFdpZHRoLHJldCxzdHlsZT1lbGVtLnN0eWxlO2NvbXB1dGVkPWNvbXB1dGVkfHxnZXRTdHlsZXMoZWxlbSk7aWYoY29tcHV0ZWQpe3JldD1jb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpfHxjb21wdXRlZFtuYW1lXTtpZihyZXQ9PT0iIiYmIWpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSkpe3JldD1qUXVlcnkuc3R5bGUoZWxlbSxuYW1lKTt9CmlmKCFzdXBwb3J0LnBpeGVsQm94U3R5bGVzKCkmJnJudW1ub25weC50ZXN0KHJldCkmJnJib3hTdHlsZS50ZXN0KG5hbWUpKXt3aWR0aD1zdHlsZS53aWR0aDttaW5XaWR0aD1zdHlsZS5taW5XaWR0aDttYXhXaWR0aD1zdHlsZS5tYXhXaWR0aDtzdHlsZS5taW5XaWR0aD1zdHlsZS5tYXhXaWR0aD1zdHlsZS53aWR0aD1yZXQ7cmV0PWNvbXB1dGVkLndpZHRoO3N0eWxlLndpZHRoPXdpZHRoO3N0eWxlLm1pbldpZHRoPW1pbldpZHRoO3N0eWxlLm1heFdpZHRoPW1heFdpZHRoO319CnJldHVybiByZXQhPT11bmRlZmluZWQ/cmV0KyIiOnJldDt9CmZ1bmN0aW9uIGFkZEdldEhvb2tJZihjb25kaXRpb25Gbixob29rRm4pe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZihjb25kaXRpb25GbigpKXtkZWxldGUgdGhpcy5nZXQ7cmV0dXJuO30KcmV0dXJuKHRoaXMuZ2V0PWhvb2tGbikuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O30KdmFyCnJkaXNwbGF5c3dhcD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scmN1c3RvbVByb3A9L14tLS8sY3NzU2hvdz17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sY3NzTm9ybWFsVHJhbnNmb3JtPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxjc3NQcmVmaXhlcz1bIldlYmtpdCIsIk1veiIsIm1zIl0sZW1wdHlTdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZShuYW1lKXtpZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO30KdmFyIGNhcE5hbWU9bmFtZVswXS50b1VwcGVyQ2FzZSgpK25hbWUuc2xpY2UoMSksaT1jc3NQcmVmaXhlcy5sZW5ndGg7d2hpbGUoaS0tKXtuYW1lPWNzc1ByZWZpeGVzW2ldK2NhcE5hbWU7aWYobmFtZSBpbiBlbXB0eVN0eWxlKXtyZXR1cm4gbmFtZTt9fX0KZnVuY3Rpb24gZmluYWxQcm9wTmFtZShuYW1lKXt2YXIgcmV0PWpRdWVyeS5jc3NQcm9wc1tuYW1lXTtpZighcmV0KXtyZXQ9alF1ZXJ5LmNzc1Byb3BzW25hbWVdPXZlbmRvclByb3BOYW1lKG5hbWUpfHxuYW1lO30KcmV0dXJuIHJldDt9CmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKGVsZW0sdmFsdWUsc3VidHJhY3Qpe3ZhciBtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSk7cmV0dXJuIG1hdGNoZXM/TWF0aC5tYXgoMCxtYXRjaGVzWzJdLShzdWJ0cmFjdHx8MCkpKyhtYXRjaGVzWzNdfHwicHgiKTp2YWx1ZTt9CmZ1bmN0aW9uIGJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixib3gsaXNCb3JkZXJCb3gsc3R5bGVzLGNvbXB1dGVkVmFsKXt2YXIgaT1kaW1lbnNpb249PT0id2lkdGgiPzE6MCxleHRyYT0wLGRlbHRhPTA7aWYoYm94PT09KGlzQm9yZGVyQm94PyJib3JkZXIiOiJjb250ZW50Iikpe3JldHVybiAwO30KZm9yKDtpPDQ7aSs9Mil7aWYoYm94PT09Im1hcmdpbiIpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sYm94K2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7fQppZighaXNCb3JkZXJCb3gpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sInBhZGRpbmciK2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7aWYoYm94IT09InBhZGRpbmciKXtkZWx0YSs9alF1ZXJ5LmNzcyhlbGVtLCJib3JkZXIiK2Nzc0V4cGFuZFtpXSsiV2lkdGgiLHRydWUsc3R5bGVzKTt9ZWxzZXtleHRyYSs9alF1ZXJ5LmNzcyhlbGVtLCJib3JkZXIiK2Nzc0V4cGFuZFtpXSsiV2lkdGgiLHRydWUsc3R5bGVzKTt9fWVsc2V7aWYoYm94PT09ImNvbnRlbnQiKXtkZWx0YS09alF1ZXJ5LmNzcyhlbGVtLCJwYWRkaW5nIitjc3NFeHBhbmRbaV0sdHJ1ZSxzdHlsZXMpO30KaWYoYm94IT09Im1hcmdpbiIpe2RlbHRhLT1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO319fQppZighaXNCb3JkZXJCb3gmJmNvbXB1dGVkVmFsPj0wKXtkZWx0YSs9TWF0aC5tYXgoMCxNYXRoLmNlaWwoZWxlbVsib2Zmc2V0IitkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKStkaW1lbnNpb24uc2xpY2UoMSldLQpjb21wdXRlZFZhbC0KZGVsdGEtCmV4dHJhLQowLjUpKTt9CnJldHVybiBkZWx0YTt9CmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoZWxlbSxkaW1lbnNpb24sZXh0cmEpe3ZhciBzdHlsZXM9Z2V0U3R5bGVzKGVsZW0pLHZhbD1jdXJDU1MoZWxlbSxkaW1lbnNpb24sc3R5bGVzKSxpc0JvcmRlckJveD1qUXVlcnkuY3NzKGVsZW0sImJveFNpemluZyIsZmFsc2Usc3R5bGVzKT09PSJib3JkZXItYm94Iix2YWx1ZUlzQm9yZGVyQm94PWlzQm9yZGVyQm94O2lmKHJudW1ub25weC50ZXN0KHZhbCkpe2lmKCFleHRyYSl7cmV0dXJuIHZhbDt9CnZhbD0iYXV0byI7fQp2YWx1ZUlzQm9yZGVyQm94PXZhbHVlSXNCb3JkZXJCb3gmJihzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCl8fHZhbD09PWVsZW0uc3R5bGVbZGltZW5zaW9uXSk7aWYodmFsPT09ImF1dG8ifHwhcGFyc2VGbG9hdCh2YWwpJiZqUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiLGZhbHNlLHN0eWxlcyk9PT0iaW5saW5lIil7dmFsPWVsZW1bIm9mZnNldCIrZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkrZGltZW5zaW9uLnNsaWNlKDEpXTt2YWx1ZUlzQm9yZGVyQm94PXRydWU7fQp2YWw9cGFyc2VGbG9hdCh2YWwpfHwwO3JldHVybih2YWwrCmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixleHRyYXx8KGlzQm9yZGVyQm94PyJib3JkZXIiOiJjb250ZW50IiksdmFsdWVJc0JvcmRlckJveCxzdHlsZXMsdmFsKSkrInB4Ijt9CmpRdWVyeS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZWxlbSxjb21wdXRlZCl7aWYoY29tcHV0ZWQpe3ZhciByZXQ9Y3VyQ1NTKGVsZW0sIm9wYWNpdHkiKTtyZXR1cm4gcmV0PT09IiI/IjEiOnJldDt9fX19LGNzc051bWJlcjp7ImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50Ijp0cnVlLCJjb2x1bW5Db3VudCI6dHJ1ZSwiZmlsbE9wYWNpdHkiOnRydWUsImZsZXhHcm93Ijp0cnVlLCJmbGV4U2hyaW5rIjp0cnVlLCJmb250V2VpZ2h0Ijp0cnVlLCJsaW5lSGVpZ2h0Ijp0cnVlLCJvcGFjaXR5Ijp0cnVlLCJvcmRlciI6dHJ1ZSwib3JwaGFucyI6dHJ1ZSwid2lkb3dzIjp0cnVlLCJ6SW5kZXgiOnRydWUsInpvb20iOnRydWV9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSxleHRyYSl7aWYoIWVsZW18fGVsZW0ubm9kZVR5cGU9PT0zfHxlbGVtLm5vZGVUeXBlPT09OHx8IWVsZW0uc3R5bGUpe3JldHVybjt9CnZhciByZXQsdHlwZSxob29rcyxvcmlnTmFtZT1jYW1lbENhc2UobmFtZSksaXNDdXN0b21Qcm9wPXJjdXN0b21Qcm9wLnRlc3QobmFtZSksc3R5bGU9ZWxlbS5zdHlsZTtpZighaXNDdXN0b21Qcm9wKXtuYW1lPWZpbmFsUHJvcE5hbWUob3JpZ05hbWUpO30KaG9va3M9alF1ZXJ5LmNzc0hvb2tzW25hbWVdfHxqUXVlcnkuY3NzSG9va3Nbb3JpZ05hbWVdO2lmKHZhbHVlIT09dW5kZWZpbmVkKXt0eXBlPXR5cGVvZiB2YWx1ZTtpZih0eXBlPT09InN0cmluZyImJihyZXQ9cmNzc051bS5leGVjKHZhbHVlKSkmJnJldFsxXSl7dmFsdWU9YWRqdXN0Q1NTKGVsZW0sbmFtZSxyZXQpO3R5cGU9Im51bWJlciI7fQppZih2YWx1ZT09bnVsbHx8dmFsdWUhPT12YWx1ZSl7cmV0dXJuO30KaWYodHlwZT09PSJudW1iZXIiKXt2YWx1ZSs9cmV0JiZyZXRbM118fChqUXVlcnkuY3NzTnVtYmVyW29yaWdOYW1lXT8iIjoicHgiKTt9CmlmKCFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSYmdmFsdWU9PT0iIiYmbmFtZS5pbmRleE9mKCJiYWNrZ3JvdW5kIik9PT0wKXtzdHlsZVtuYW1lXT0iaW5oZXJpdCI7fQppZighaG9va3N8fCEoInNldCJpbiBob29rcyl8fCh2YWx1ZT1ob29rcy5zZXQoZWxlbSx2YWx1ZSxleHRyYSkpIT09dW5kZWZpbmVkKXtpZihpc0N1c3RvbVByb3Ape3N0eWxlLnNldFByb3BlcnR5KG5hbWUsdmFsdWUpO31lbHNle3N0eWxlW25hbWVdPXZhbHVlO319fWVsc2V7aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sZmFsc2UsZXh0cmEpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJldDt9CnJldHVybiBzdHlsZVtuYW1lXTt9fSxjc3M6ZnVuY3Rpb24oZWxlbSxuYW1lLGV4dHJhLHN0eWxlcyl7dmFyIHZhbCxudW0saG9va3Msb3JpZ05hbWU9Y2FtZWxDYXNlKG5hbWUpLGlzQ3VzdG9tUHJvcD1yY3VzdG9tUHJvcC50ZXN0KG5hbWUpO2lmKCFpc0N1c3RvbVByb3Ape25hbWU9ZmluYWxQcm9wTmFtZShvcmlnTmFtZSk7fQpob29rcz1qUXVlcnkuY3NzSG9va3NbbmFtZV18fGpRdWVyeS5jc3NIb29rc1tvcmlnTmFtZV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3Mpe3ZhbD1ob29rcy5nZXQoZWxlbSx0cnVlLGV4dHJhKTt9CmlmKHZhbD09PXVuZGVmaW5lZCl7dmFsPWN1ckNTUyhlbGVtLG5hbWUsc3R5bGVzKTt9CmlmKHZhbD09PSJub3JtYWwiJiZuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSl7dmFsPWNzc05vcm1hbFRyYW5zZm9ybVtuYW1lXTt9CmlmKGV4dHJhPT09IiJ8fGV4dHJhKXtudW09cGFyc2VGbG9hdCh2YWwpO3JldHVybiBleHRyYT09PXRydWV8fGlzRmluaXRlKG51bSk/bnVtfHwwOnZhbDt9CnJldHVybiB2YWw7fX0pO2pRdWVyeS5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihpLGRpbWVuc2lvbil7alF1ZXJ5LmNzc0hvb2tzW2RpbWVuc2lvbl09e2dldDpmdW5jdGlvbihlbGVtLGNvbXB1dGVkLGV4dHJhKXtpZihjb21wdXRlZCl7cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KGpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpKSYmKCFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RofHwhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk/c3dhcChlbGVtLGNzc1Nob3csZnVuY3Rpb24oKXtyZXR1cm4gZ2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSk7fSk6Z2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSk7fX0sc2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsZXh0cmEpe3ZhciBtYXRjaGVzLHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksaXNCb3JkZXJCb3g9alF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsc3VidHJhY3Q9ZXh0cmEmJmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixleHRyYSxpc0JvcmRlckJveCxzdHlsZXMpO2lmKGlzQm9yZGVyQm94JiZzdXBwb3J0LnNjcm9sbGJveFNpemUoKT09PXN0eWxlcy5wb3NpdGlvbil7c3VidHJhY3QtPU1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tCnBhcnNlRmxvYXQoc3R5bGVzW2RpbWVuc2lvbl0pLQpib3hNb2RlbEFkanVzdG1lbnQoZWxlbSxkaW1lbnNpb24sImJvcmRlciIsZmFsc2Usc3R5bGVzKS0KMC41KTt9CmlmKHN1YnRyYWN0JiYobWF0Y2hlcz1yY3NzTnVtLmV4ZWModmFsdWUpKSYmKG1hdGNoZXNbM118fCJweCIpIT09InB4Iil7ZWxlbS5zdHlsZVtkaW1lbnNpb25dPXZhbHVlO3ZhbHVlPWpRdWVyeS5jc3MoZWxlbSxkaW1lbnNpb24pO30KcmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKGVsZW0sdmFsdWUsc3VidHJhY3QpO319O30pO2pRdWVyeS5jc3NIb29rcy5tYXJnaW5MZWZ0PWFkZEdldEhvb2tJZihzdXBwb3J0LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7cmV0dXJuKHBhcnNlRmxvYXQoY3VyQ1NTKGVsZW0sIm1hcmdpbkxlZnQiKSl8fGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC0Kc3dhcChlbGVtLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDt9KSkrInB4Ijt9fSk7alF1ZXJ5LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihwcmVmaXgsc3VmZml4KXtqUXVlcnkuY3NzSG9va3NbcHJlZml4K3N1ZmZpeF09e2V4cGFuZDpmdW5jdGlvbih2YWx1ZSl7dmFyIGk9MCxleHBhbmRlZD17fSxwYXJ0cz10eXBlb2YgdmFsdWU9PT0ic3RyaW5nIj92YWx1ZS5zcGxpdCgiICIpOlt2YWx1ZV07Zm9yKDtpPDQ7aSsrKXtleHBhbmRlZFtwcmVmaXgrY3NzRXhwYW5kW2ldK3N1ZmZpeF09cGFydHNbaV18fHBhcnRzW2ktMl18fHBhcnRzWzBdO30KcmV0dXJuIGV4cGFuZGVkO319O2lmKHByZWZpeCE9PSJtYXJnaW4iKXtqUXVlcnkuY3NzSG9va3NbcHJlZml4K3N1ZmZpeF0uc2V0PXNldFBvc2l0aXZlTnVtYmVyO319KTtqUXVlcnkuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSl7dmFyIHN0eWxlcyxsZW4sbWFwPXt9LGk9MDtpZihBcnJheS5pc0FycmF5KG5hbWUpKXtzdHlsZXM9Z2V0U3R5bGVzKGVsZW0pO2xlbj1uYW1lLmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7bWFwW25hbWVbaV1dPWpRdWVyeS5jc3MoZWxlbSxuYW1lW2ldLGZhbHNlLHN0eWxlcyk7fQpyZXR1cm4gbWFwO30KcmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkP2pRdWVyeS5zdHlsZShlbGVtLG5hbWUsdmFsdWUpOmpRdWVyeS5jc3MoZWxlbSxuYW1lKTt9LG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9fSk7ZnVuY3Rpb24gVHdlZW4oZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyl7cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdChlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nKTt9CmpRdWVyeS5Ud2Vlbj1Ud2VlbjtUd2Vlbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlR3ZWVuLGluaXQ6ZnVuY3Rpb24oZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyx1bml0KXt0aGlzLmVsZW09ZWxlbTt0aGlzLnByb3A9cHJvcDt0aGlzLmVhc2luZz1lYXNpbmd8fGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7dGhpcy5vcHRpb25zPW9wdGlvbnM7dGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpO3RoaXMuZW5kPWVuZDt0aGlzLnVuaXQ9dW5pdHx8KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF0/IiI6InB4Iik7fSxjdXI6ZnVuY3Rpb24oKXt2YXIgaG9va3M9VHdlZW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGhvb2tzJiZob29rcy5nZXQ/aG9va3MuZ2V0KHRoaXMpOlR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyk7fSxydW46ZnVuY3Rpb24ocGVyY2VudCl7dmFyIGVhc2VkLGhvb2tzPVR3ZWVuLnByb3BIb29rc1t0aGlzLnByb3BdO2lmKHRoaXMub3B0aW9ucy5kdXJhdGlvbil7dGhpcy5wb3M9ZWFzZWQ9alF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10ocGVyY2VudCx0aGlzLm9wdGlvbnMuZHVyYXRpb24qcGVyY2VudCwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTt9ZWxzZXt0aGlzLnBvcz1lYXNlZD1wZXJjZW50O30KdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmVhc2VkK3RoaXMuc3RhcnQ7aWYodGhpcy5vcHRpb25zLnN0ZXApe3RoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpO30KaWYoaG9va3MmJmhvb2tzLnNldCl7aG9va3Muc2V0KHRoaXMpO31lbHNle1R3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyk7fQpyZXR1cm4gdGhpczt9fTtUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9VHdlZW4ucHJvdG90eXBlO1R3ZWVuLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbih0d2Vlbil7dmFyIHJlc3VsdDtpZih0d2Vlbi5lbGVtLm5vZGVUeXBlIT09MXx8dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXSE9bnVsbCYmdHdlZW4uZWxlbS5zdHlsZVt0d2Vlbi5wcm9wXT09bnVsbCl7cmV0dXJuIHR3ZWVuLmVsZW1bdHdlZW4ucHJvcF07fQpyZXN1bHQ9alF1ZXJ5LmNzcyh0d2Vlbi5lbGVtLHR3ZWVuLnByb3AsIiIpO3JldHVybiFyZXN1bHR8fHJlc3VsdD09PSJhdXRvIj8wOnJlc3VsdDt9LHNldDpmdW5jdGlvbih0d2Vlbil7aWYoalF1ZXJ5LmZ4LnN0ZXBbdHdlZW4ucHJvcF0pe2pRdWVyeS5meC5zdGVwW3R3ZWVuLnByb3BdKHR3ZWVuKTt9ZWxzZSBpZih0d2Vlbi5lbGVtLm5vZGVUeXBlPT09MSYmKHR3ZWVuLmVsZW0uc3R5bGVbalF1ZXJ5LmNzc1Byb3BzW3R3ZWVuLnByb3BdXSE9bnVsbHx8alF1ZXJ5LmNzc0hvb2tzW3R3ZWVuLnByb3BdKSl7alF1ZXJ5LnN0eWxlKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCx0d2Vlbi5ub3crdHdlZW4udW5pdCk7fWVsc2V7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19fTtUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPVR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odHdlZW4pe2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUmJnR3ZWVuLmVsZW0ucGFyZW50Tm9kZSl7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19O2pRdWVyeS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihwKXtyZXR1cm4gcDt9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8yO30sX2RlZmF1bHQ6InN3aW5nIn07alF1ZXJ5LmZ4PVR3ZWVuLnByb3RvdHlwZS5pbml0O2pRdWVyeS5meC5zdGVwPXt9O3ZhcgpmeE5vdyxpblByb2dyZXNzLHJmeHR5cGVzPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxycnVuPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc2NoZWR1bGUoKXtpZihpblByb2dyZXNzKXtpZihkb2N1bWVudC5oaWRkZW49PT1mYWxzZSYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSl7d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY2hlZHVsZSk7fWVsc2V7d2luZG93LnNldFRpbWVvdXQoc2NoZWR1bGUsalF1ZXJ5LmZ4LmludGVydmFsKTt9CmpRdWVyeS5meC50aWNrKCk7fX0KZnVuY3Rpb24gY3JlYXRlRnhOb3coKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2Z4Tm93PXVuZGVmaW5lZDt9KTtyZXR1cm4oZnhOb3c9RGF0ZS5ub3coKSk7fQpmdW5jdGlvbiBnZW5GeCh0eXBlLGluY2x1ZGVXaWR0aCl7dmFyIHdoaWNoLGk9MCxhdHRycz17aGVpZ2h0OnR5cGV9O2luY2x1ZGVXaWR0aD1pbmNsdWRlV2lkdGg/MTowO2Zvcig7aTw0O2krPTItaW5jbHVkZVdpZHRoKXt3aGljaD1jc3NFeHBhbmRbaV07YXR0cnNbIm1hcmdpbiIrd2hpY2hdPWF0dHJzWyJwYWRkaW5nIit3aGljaF09dHlwZTt9CmlmKGluY2x1ZGVXaWR0aCl7YXR0cnMub3BhY2l0eT1hdHRycy53aWR0aD10eXBlO30KcmV0dXJuIGF0dHJzO30KZnVuY3Rpb24gY3JlYXRlVHdlZW4odmFsdWUscHJvcCxhbmltYXRpb24pe3ZhciB0d2Vlbixjb2xsZWN0aW9uPShBbmltYXRpb24udHdlZW5lcnNbcHJvcF18fFtdKS5jb25jYXQoQW5pbWF0aW9uLnR3ZWVuZXJzWyIqIl0pLGluZGV4PTAsbGVuZ3RoPWNvbGxlY3Rpb24ubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKCh0d2Vlbj1jb2xsZWN0aW9uW2luZGV4XS5jYWxsKGFuaW1hdGlvbixwcm9wLHZhbHVlKSkpe3JldHVybiB0d2Vlbjt9fX0KZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlcihlbGVtLHByb3BzLG9wdHMpe3ZhciBwcm9wLHZhbHVlLHRvZ2dsZSxob29rcyxvbGRmaXJlLHByb3BUd2VlbixyZXN0b3JlRGlzcGxheSxkaXNwbGF5LGlzQm94PSJ3aWR0aCJpbiBwcm9wc3x8ImhlaWdodCJpbiBwcm9wcyxhbmltPXRoaXMsb3JpZz17fSxzdHlsZT1lbGVtLnN0eWxlLGhpZGRlbj1lbGVtLm5vZGVUeXBlJiZpc0hpZGRlbldpdGhpblRyZWUoZWxlbSksZGF0YVNob3c9ZGF0YVByaXYuZ2V0KGVsZW0sImZ4c2hvdyIpO2lmKCFvcHRzLnF1ZXVlKXtob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSwiZngiKTtpZihob29rcy51bnF1ZXVlZD09bnVsbCl7aG9va3MudW5xdWV1ZWQ9MDtvbGRmaXJlPWhvb2tzLmVtcHR5LmZpcmU7aG9va3MuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2lmKCFob29rcy51bnF1ZXVlZCl7b2xkZmlyZSgpO319O30KaG9va3MudW5xdWV1ZWQrKzthbmltLmFsd2F5cyhmdW5jdGlvbigpe2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7aG9va3MudW5xdWV1ZWQtLTtpZighalF1ZXJ5LnF1ZXVlKGVsZW0sImZ4IikubGVuZ3RoKXtob29rcy5lbXB0eS5maXJlKCk7fX0pO30pO30KZm9yKHByb3AgaW4gcHJvcHMpe3ZhbHVlPXByb3BzW3Byb3BdO2lmKHJmeHR5cGVzLnRlc3QodmFsdWUpKXtkZWxldGUgcHJvcHNbcHJvcF07dG9nZ2xlPXRvZ2dsZXx8dmFsdWU9PT0idG9nZ2xlIjtpZih2YWx1ZT09PShoaWRkZW4/ImhpZGUiOiJzaG93Iikpe2lmKHZhbHVlPT09InNob3ciJiZkYXRhU2hvdyYmZGF0YVNob3dbcHJvcF0hPT11bmRlZmluZWQpe2hpZGRlbj10cnVlO31lbHNle2NvbnRpbnVlO319Cm9yaWdbcHJvcF09ZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdfHxqUXVlcnkuc3R5bGUoZWxlbSxwcm9wKTt9fQpwcm9wVHdlZW49IWpRdWVyeS5pc0VtcHR5T2JqZWN0KHByb3BzKTtpZighcHJvcFR3ZWVuJiZqUXVlcnkuaXNFbXB0eU9iamVjdChvcmlnKSl7cmV0dXJuO30KaWYoaXNCb3gmJmVsZW0ubm9kZVR5cGU9PT0xKXtvcHRzLm92ZXJmbG93PVtzdHlsZS5vdmVyZmxvdyxzdHlsZS5vdmVyZmxvd1gsc3R5bGUub3ZlcmZsb3dZXTtyZXN0b3JlRGlzcGxheT1kYXRhU2hvdyYmZGF0YVNob3cuZGlzcGxheTtpZihyZXN0b3JlRGlzcGxheT09bnVsbCl7cmVzdG9yZURpc3BsYXk9ZGF0YVByaXYuZ2V0KGVsZW0sImRpc3BsYXkiKTt9CmRpc3BsYXk9alF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik7aWYoZGlzcGxheT09PSJub25lIil7aWYocmVzdG9yZURpc3BsYXkpe2Rpc3BsYXk9cmVzdG9yZURpc3BsYXk7fWVsc2V7c2hvd0hpZGUoW2VsZW1dLHRydWUpO3Jlc3RvcmVEaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheXx8cmVzdG9yZURpc3BsYXk7ZGlzcGxheT1qUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiKTtzaG93SGlkZShbZWxlbV0pO319CmlmKGRpc3BsYXk9PT0iaW5saW5lInx8ZGlzcGxheT09PSJpbmxpbmUtYmxvY2siJiZyZXN0b3JlRGlzcGxheSE9bnVsbCl7aWYoalF1ZXJ5LmNzcyhlbGVtLCJmbG9hdCIpPT09Im5vbmUiKXtpZighcHJvcFR3ZWVuKXthbmltLmRvbmUoZnVuY3Rpb24oKXtzdHlsZS5kaXNwbGF5PXJlc3RvcmVEaXNwbGF5O30pO2lmKHJlc3RvcmVEaXNwbGF5PT1udWxsKXtkaXNwbGF5PXN0eWxlLmRpc3BsYXk7cmVzdG9yZURpc3BsYXk9ZGlzcGxheT09PSJub25lIj8iIjpkaXNwbGF5O319CnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7fX19CmlmKG9wdHMub3ZlcmZsb3cpe3N0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7c3R5bGUub3ZlcmZsb3c9b3B0cy5vdmVyZmxvd1swXTtzdHlsZS5vdmVyZmxvd1g9b3B0cy5vdmVyZmxvd1sxXTtzdHlsZS5vdmVyZmxvd1k9b3B0cy5vdmVyZmxvd1syXTt9KTt9CnByb3BUd2Vlbj1mYWxzZTtmb3IocHJvcCBpbiBvcmlnKXtpZighcHJvcFR3ZWVuKXtpZihkYXRhU2hvdyl7aWYoImhpZGRlbiJpbiBkYXRhU2hvdyl7aGlkZGVuPWRhdGFTaG93LmhpZGRlbjt9fWVsc2V7ZGF0YVNob3c9ZGF0YVByaXYuYWNjZXNzKGVsZW0sImZ4c2hvdyIse2Rpc3BsYXk6cmVzdG9yZURpc3BsYXl9KTt9CmlmKHRvZ2dsZSl7ZGF0YVNob3cuaGlkZGVuPSFoaWRkZW47fQppZihoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSx0cnVlKTt9CmFuaW0uZG9uZShmdW5jdGlvbigpe2lmKCFoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSk7fQpkYXRhUHJpdi5yZW1vdmUoZWxlbSwiZnhzaG93Iik7Zm9yKHByb3AgaW4gb3JpZyl7alF1ZXJ5LnN0eWxlKGVsZW0scHJvcCxvcmlnW3Byb3BdKTt9fSk7fQpwcm9wVHdlZW49Y3JlYXRlVHdlZW4oaGlkZGVuP2RhdGFTaG93W3Byb3BdOjAscHJvcCxhbmltKTtpZighKHByb3AgaW4gZGF0YVNob3cpKXtkYXRhU2hvd1twcm9wXT1wcm9wVHdlZW4uc3RhcnQ7aWYoaGlkZGVuKXtwcm9wVHdlZW4uZW5kPXByb3BUd2Vlbi5zdGFydDtwcm9wVHdlZW4uc3RhcnQ9MDt9fX19CmZ1bmN0aW9uIHByb3BGaWx0ZXIocHJvcHMsc3BlY2lhbEVhc2luZyl7dmFyIGluZGV4LG5hbWUsZWFzaW5nLHZhbHVlLGhvb2tzO2ZvcihpbmRleCBpbiBwcm9wcyl7bmFtZT1jYW1lbENhc2UoaW5kZXgpO2Vhc2luZz1zcGVjaWFsRWFzaW5nW25hbWVdO3ZhbHVlPXByb3BzW2luZGV4XTtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7ZWFzaW5nPXZhbHVlWzFdO3ZhbHVlPXByb3BzW2luZGV4XT12YWx1ZVswXTt9CmlmKGluZGV4IT09bmFtZSl7cHJvcHNbbmFtZV09dmFsdWU7ZGVsZXRlIHByb3BzW2luZGV4XTt9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXTtpZihob29rcyYmImV4cGFuZCJpbiBob29rcyl7dmFsdWU9aG9va3MuZXhwYW5kKHZhbHVlKTtkZWxldGUgcHJvcHNbbmFtZV07Zm9yKGluZGV4IGluIHZhbHVlKXtpZighKGluZGV4IGluIHByb3BzKSl7cHJvcHNbaW5kZXhdPXZhbHVlW2luZGV4XTtzcGVjaWFsRWFzaW5nW2luZGV4XT1lYXNpbmc7fX19ZWxzZXtzcGVjaWFsRWFzaW5nW25hbWVdPWVhc2luZzt9fX0KZnVuY3Rpb24gQW5pbWF0aW9uKGVsZW0scHJvcGVydGllcyxvcHRpb25zKXt2YXIgcmVzdWx0LHN0b3BwZWQsaW5kZXg9MCxsZW5ndGg9QW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLGRlZmVycmVkPWpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB0aWNrLmVsZW07fSksdGljaz1mdW5jdGlvbigpe2lmKHN0b3BwZWQpe3JldHVybiBmYWxzZTt9CnZhciBjdXJyZW50VGltZT1meE5vd3x8Y3JlYXRlRnhOb3coKSxyZW1haW5pbmc9TWF0aC5tYXgoMCxhbmltYXRpb24uc3RhcnRUaW1lK2FuaW1hdGlvbi5kdXJhdGlvbi1jdXJyZW50VGltZSksdGVtcD1yZW1haW5pbmcvYW5pbWF0aW9uLmR1cmF0aW9ufHwwLHBlcmNlbnQ9MS10ZW1wLGluZGV4PTAsbGVuZ3RoPWFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2FuaW1hdGlvbi50d2VlbnNbaW5kZXhdLnJ1bihwZXJjZW50KTt9CmRlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLHBlcmNlbnQscmVtYWluaW5nXSk7aWYocGVyY2VudDwxJiZsZW5ndGgpe3JldHVybiByZW1haW5pbmc7fQppZighbGVuZ3RoKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTt9CmRlZmVycmVkLnJlc29sdmVXaXRoKGVsZW0sW2FuaW1hdGlvbl0pO3JldHVybiBmYWxzZTt9LGFuaW1hdGlvbj1kZWZlcnJlZC5wcm9taXNlKHtlbGVtOmVsZW0scHJvcHM6alF1ZXJ5LmV4dGVuZCh7fSxwcm9wZXJ0aWVzKSxvcHRzOmpRdWVyeS5leHRlbmQodHJ1ZSx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6alF1ZXJ5LmVhc2luZy5fZGVmYXVsdH0sb3B0aW9ucyksb3JpZ2luYWxQcm9wZXJ0aWVzOnByb3BlcnRpZXMsb3JpZ2luYWxPcHRpb25zOm9wdGlvbnMsc3RhcnRUaW1lOmZ4Tm93fHxjcmVhdGVGeE5vdygpLGR1cmF0aW9uOm9wdGlvbnMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHByb3AsZW5kKXt2YXIgdHdlZW49alF1ZXJ5LlR3ZWVuKGVsZW0sYW5pbWF0aW9uLm9wdHMscHJvcCxlbmQsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1twcm9wXXx8YW5pbWF0aW9uLm9wdHMuZWFzaW5nKTthbmltYXRpb24udHdlZW5zLnB1c2godHdlZW4pO3JldHVybiB0d2Vlbjt9LHN0b3A6ZnVuY3Rpb24oZ290b0VuZCl7dmFyIGluZGV4PTAsbGVuZ3RoPWdvdG9FbmQ/YW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg6MDtpZihzdG9wcGVkKXtyZXR1cm4gdGhpczt9CnN0b3BwZWQ9dHJ1ZTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXthbmltYXRpb24udHdlZW5zW2luZGV4XS5ydW4oMSk7fQppZihnb3RvRW5kKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTtkZWZlcnJlZC5yZXNvbHZlV2l0aChlbGVtLFthbmltYXRpb24sZ290b0VuZF0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKTt9CnJldHVybiB0aGlzO319KSxwcm9wcz1hbmltYXRpb24ucHJvcHM7cHJvcEZpbHRlcihwcm9wcyxhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyZXN1bHQ9QW5pbWF0aW9uLnByZWZpbHRlcnNbaW5kZXhdLmNhbGwoYW5pbWF0aW9uLGVsZW0scHJvcHMsYW5pbWF0aW9uLm9wdHMpO2lmKHJlc3VsdCl7aWYoaXNGdW5jdGlvbihyZXN1bHQuc3RvcCkpe2pRdWVyeS5fcXVldWVIb29rcyhhbmltYXRpb24uZWxlbSxhbmltYXRpb24ub3B0cy5xdWV1ZSkuc3RvcD1yZXN1bHQuc3RvcC5iaW5kKHJlc3VsdCk7fQpyZXR1cm4gcmVzdWx0O319CmpRdWVyeS5tYXAocHJvcHMsY3JlYXRlVHdlZW4sYW5pbWF0aW9uKTtpZihpc0Z1bmN0aW9uKGFuaW1hdGlvbi5vcHRzLnN0YXJ0KSl7YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbChlbGVtLGFuaW1hdGlvbik7fQphbmltYXRpb24ucHJvZ3Jlc3MoYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYW5pbWF0aW9uLm9wdHMuZG9uZSxhbmltYXRpb24ub3B0cy5jb21wbGV0ZSkuZmFpbChhbmltYXRpb24ub3B0cy5mYWlsKS5hbHdheXMoYW5pbWF0aW9uLm9wdHMuYWx3YXlzKTtqUXVlcnkuZngudGltZXIoalF1ZXJ5LmV4dGVuZCh0aWNrLHtlbGVtOmVsZW0sYW5pbTphbmltYXRpb24scXVldWU6YW5pbWF0aW9uLm9wdHMucXVldWV9KSk7cmV0dXJuIGFuaW1hdGlvbjt9CmpRdWVyeS5BbmltYXRpb249alF1ZXJ5LmV4dGVuZChBbmltYXRpb24se3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKHByb3AsdmFsdWUpe3ZhciB0d2Vlbj10aGlzLmNyZWF0ZVR3ZWVuKHByb3AsdmFsdWUpO2FkanVzdENTUyh0d2Vlbi5lbGVtLHByb3AscmNzc051bS5leGVjKHZhbHVlKSx0d2Vlbik7cmV0dXJuIHR3ZWVuO31dfSx0d2VlbmVyOmZ1bmN0aW9uKHByb3BzLGNhbGxiYWNrKXtpZihpc0Z1bmN0aW9uKHByb3BzKSl7Y2FsbGJhY2s9cHJvcHM7cHJvcHM9WyIqIl07fWVsc2V7cHJvcHM9cHJvcHMubWF0Y2gocm5vdGh0bWx3aGl0ZSk7fQp2YXIgcHJvcCxpbmRleD0wLGxlbmd0aD1wcm9wcy5sZW5ndGg7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cHJvcD1wcm9wc1tpbmRleF07QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdPUFuaW1hdGlvbi50d2VlbmVyc1twcm9wXXx8W107QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdLnVuc2hpZnQoY2FsbGJhY2spO319LHByZWZpbHRlcnM6W2RlZmF1bHRQcmVmaWx0ZXJdLHByZWZpbHRlcjpmdW5jdGlvbihjYWxsYmFjayxwcmVwZW5kKXtpZihwcmVwZW5kKXtBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KGNhbGxiYWNrKTt9ZWxzZXtBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKGNhbGxiYWNrKTt9fX0pO2pRdWVyeS5zcGVlZD1mdW5jdGlvbihzcGVlZCxlYXNpbmcsZm4pe3ZhciBvcHQ9c3BlZWQmJnR5cGVvZiBzcGVlZD09PSJvYmplY3QiP2pRdWVyeS5leHRlbmQoe30sc3BlZWQpOntjb21wbGV0ZTpmbnx8IWZuJiZlYXNpbmd8fGlzRnVuY3Rpb24oc3BlZWQpJiZzcGVlZCxkdXJhdGlvbjpzcGVlZCxlYXNpbmc6Zm4mJmVhc2luZ3x8ZWFzaW5nJiYhaXNGdW5jdGlvbihlYXNpbmcpJiZlYXNpbmd9O2lmKGpRdWVyeS5meC5vZmYpe29wdC5kdXJhdGlvbj0wO31lbHNle2lmKHR5cGVvZiBvcHQuZHVyYXRpb24hPT0ibnVtYmVyIil7aWYob3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMpe29wdC5kdXJhdGlvbj1qUXVlcnkuZnguc3BlZWRzW29wdC5kdXJhdGlvbl07fWVsc2V7b3B0LmR1cmF0aW9uPWpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7fX19CmlmKG9wdC5xdWV1ZT09bnVsbHx8b3B0LnF1ZXVlPT09dHJ1ZSl7b3B0LnF1ZXVlPSJmeCI7fQpvcHQub2xkPW9wdC5jb21wbGV0ZTtvcHQuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihpc0Z1bmN0aW9uKG9wdC5vbGQpKXtvcHQub2xkLmNhbGwodGhpcyk7fQppZihvcHQucXVldWUpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsb3B0LnF1ZXVlKTt9fTtyZXR1cm4gb3B0O307alF1ZXJ5LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHNwZWVkLHRvLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuZmlsdGVyKGlzSGlkZGVuV2l0aGluVHJlZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0b30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9LGFuaW1hdGU6ZnVuY3Rpb24ocHJvcCxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3ZhciBlbXB0eT1qUXVlcnkuaXNFbXB0eU9iamVjdChwcm9wKSxvcHRhbGw9alF1ZXJ5LnNwZWVkKHNwZWVkLGVhc2luZyxjYWxsYmFjayksZG9BbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYW5pbT1BbmltYXRpb24odGhpcyxqUXVlcnkuZXh0ZW5kKHt9LHByb3ApLG9wdGFsbCk7aWYoZW1wdHl8fGRhdGFQcml2LmdldCh0aGlzLCJmaW5pc2giKSl7YW5pbS5zdG9wKHRydWUpO319O2RvQW5pbWF0aW9uLmZpbmlzaD1kb0FuaW1hdGlvbjtyZXR1cm4gZW1wdHl8fG9wdGFsbC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChkb0FuaW1hdGlvbik6dGhpcy5xdWV1ZShvcHRhbGwucXVldWUsZG9BbmltYXRpb24pO30sc3RvcDpmdW5jdGlvbih0eXBlLGNsZWFyUXVldWUsZ290b0VuZCl7dmFyIHN0b3BRdWV1ZT1mdW5jdGlvbihob29rcyl7dmFyIHN0b3A9aG9va3Muc3RvcDtkZWxldGUgaG9va3Muc3RvcDtzdG9wKGdvdG9FbmQpO307aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7Z290b0VuZD1jbGVhclF1ZXVlO2NsZWFyUXVldWU9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CmlmKGNsZWFyUXVldWUmJnR5cGUhPT1mYWxzZSl7dGhpcy5xdWV1ZSh0eXBlfHwiZngiLFtdKTt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGVxdWV1ZT10cnVlLGluZGV4PXR5cGUhPW51bGwmJnR5cGUrInF1ZXVlSG9va3MiLHRpbWVycz1qUXVlcnkudGltZXJzLGRhdGE9ZGF0YVByaXYuZ2V0KHRoaXMpO2lmKGluZGV4KXtpZihkYXRhW2luZGV4XSYmZGF0YVtpbmRleF0uc3RvcCl7c3RvcFF1ZXVlKGRhdGFbaW5kZXhdKTt9fWVsc2V7Zm9yKGluZGV4IGluIGRhdGEpe2lmKGRhdGFbaW5kZXhdJiZkYXRhW2luZGV4XS5zdG9wJiZycnVuLnRlc3QoaW5kZXgpKXtzdG9wUXVldWUoZGF0YVtpbmRleF0pO319fQpmb3IoaW5kZXg9dGltZXJzLmxlbmd0aDtpbmRleC0tOyl7aWYodGltZXJzW2luZGV4XS5lbGVtPT09dGhpcyYmKHR5cGU9PW51bGx8fHRpbWVyc1tpbmRleF0ucXVldWU9PT10eXBlKSl7dGltZXJzW2luZGV4XS5hbmltLnN0b3AoZ290b0VuZCk7ZGVxdWV1ZT1mYWxzZTt0aW1lcnMuc3BsaWNlKGluZGV4LDEpO319CmlmKGRlcXVldWV8fCFnb3RvRW5kKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpO319KTt9LGZpbmlzaDpmdW5jdGlvbih0eXBlKXtpZih0eXBlIT09ZmFsc2Upe3R5cGU9dHlwZXx8ImZ4Ijt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaW5kZXgsZGF0YT1kYXRhUHJpdi5nZXQodGhpcykscXVldWU9ZGF0YVt0eXBlKyJxdWV1ZSJdLGhvb2tzPWRhdGFbdHlwZSsicXVldWVIb29rcyJdLHRpbWVycz1qUXVlcnkudGltZXJzLGxlbmd0aD1xdWV1ZT9xdWV1ZS5sZW5ndGg6MDtkYXRhLmZpbmlzaD10cnVlO2pRdWVyeS5xdWV1ZSh0aGlzLHR5cGUsW10pO2lmKGhvb2tzJiZob29rcy5zdG9wKXtob29rcy5zdG9wLmNhbGwodGhpcyx0cnVlKTt9CmZvcihpbmRleD10aW1lcnMubGVuZ3RoO2luZGV4LS07KXtpZih0aW1lcnNbaW5kZXhdLmVsZW09PT10aGlzJiZ0aW1lcnNbaW5kZXhdLnF1ZXVlPT09dHlwZSl7dGltZXJzW2luZGV4XS5hbmltLnN0b3AodHJ1ZSk7dGltZXJzLnNwbGljZShpbmRleCwxKTt9fQpmb3IoaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7aWYocXVldWVbaW5kZXhdJiZxdWV1ZVtpbmRleF0uZmluaXNoKXtxdWV1ZVtpbmRleF0uZmluaXNoLmNhbGwodGhpcyk7fX0KZGVsZXRlIGRhdGEuZmluaXNoO30pO319KTtqUXVlcnkuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oaSxuYW1lKXt2YXIgY3NzRm49alF1ZXJ5LmZuW25hbWVdO2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3JldHVybiBzcGVlZD09bnVsbHx8dHlwZW9mIHNwZWVkPT09ImJvb2xlYW4iP2Nzc0ZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoZ2VuRngobmFtZSx0cnVlKSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spO307fSk7alF1ZXJ5LmVhY2goe3NsaWRlRG93bjpnZW5GeCgic2hvdyIpLHNsaWRlVXA6Z2VuRngoImhpZGUiKSxzbGlkZVRvZ2dsZTpnZW5GeCgidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihuYW1lLHByb3BzKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtyZXR1cm4gdGhpcy5hbmltYXRlKHByb3BzLHNwZWVkLGVhc2luZyxjYWxsYmFjayk7fTt9KTtqUXVlcnkudGltZXJzPVtdO2pRdWVyeS5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIHRpbWVyLGk9MCx0aW1lcnM9alF1ZXJ5LnRpbWVycztmeE5vdz1EYXRlLm5vdygpO2Zvcig7aTx0aW1lcnMubGVuZ3RoO2krKyl7dGltZXI9dGltZXJzW2ldO2lmKCF0aW1lcigpJiZ0aW1lcnNbaV09PT10aW1lcil7dGltZXJzLnNwbGljZShpLS0sMSk7fX0KaWYoIXRpbWVycy5sZW5ndGgpe2pRdWVyeS5meC5zdG9wKCk7fQpmeE5vdz11bmRlZmluZWQ7fTtqUXVlcnkuZngudGltZXI9ZnVuY3Rpb24odGltZXIpe2pRdWVyeS50aW1lcnMucHVzaCh0aW1lcik7alF1ZXJ5LmZ4LnN0YXJ0KCk7fTtqUXVlcnkuZnguaW50ZXJ2YWw9MTM7alF1ZXJ5LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7aWYoaW5Qcm9ncmVzcyl7cmV0dXJuO30KaW5Qcm9ncmVzcz10cnVlO3NjaGVkdWxlKCk7fTtqUXVlcnkuZnguc3RvcD1mdW5jdGlvbigpe2luUHJvZ3Jlc3M9bnVsbDt9O2pRdWVyeS5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH07alF1ZXJ5LmZuLmRlbGF5PWZ1bmN0aW9uKHRpbWUsdHlwZSl7dGltZT1qUXVlcnkuZng/alF1ZXJ5LmZ4LnNwZWVkc1t0aW1lXXx8dGltZTp0aW1lO3R5cGU9dHlwZXx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZSh0eXBlLGZ1bmN0aW9uKG5leHQsaG9va3Mpe3ZhciB0aW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KG5leHQsdGltZSk7aG9va3Muc3RvcD1mdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7fTt9KTt9OyhmdW5jdGlvbigpe3ZhciBpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHNlbGVjdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSxvcHQ9c2VsZWN0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtpbnB1dC50eXBlPSJjaGVja2JveCI7c3VwcG9ydC5jaGVja09uPWlucHV0LnZhbHVlIT09IiI7c3VwcG9ydC5vcHRTZWxlY3RlZD1vcHQuc2VsZWN0ZWQ7aW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC52YWx1ZT0idCI7aW5wdXQudHlwZT0icmFkaW8iO3N1cHBvcnQucmFkaW9WYWx1ZT1pbnB1dC52YWx1ZT09PSJ0Ijt9KSgpO3ZhciBib29sSG9vayxhdHRySGFuZGxlPWpRdWVyeS5leHByLmF0dHJIYW5kbGU7alF1ZXJ5LmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsalF1ZXJ5LmF0dHIsbmFtZSx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoPjEpO30scmVtb3ZlQXR0cjpmdW5jdGlvbihuYW1lKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LnJlbW92ZUF0dHIodGhpcyxuYW1lKTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZih0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGU9PT0idW5kZWZpbmVkIil7cmV0dXJuIGpRdWVyeS5wcm9wKGVsZW0sbmFtZSx2YWx1ZSk7fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe2hvb2tzPWpRdWVyeS5hdHRySG9va3NbbmFtZS50b0xvd2VyQ2FzZSgpXXx8KGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdChuYW1lKT9ib29sSG9vazp1bmRlZmluZWQpO30KaWYodmFsdWUhPT11bmRlZmluZWQpe2lmKHZhbHVlPT09bnVsbCl7alF1ZXJ5LnJlbW92ZUF0dHIoZWxlbSxuYW1lKTtyZXR1cm47fQppZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQplbGVtLnNldEF0dHJpYnV0ZShuYW1lLHZhbHVlKyIiKTtyZXR1cm4gdmFsdWU7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0PWpRdWVyeS5maW5kLmF0dHIoZWxlbSxuYW1lKTtyZXR1cm4gcmV0PT1udWxsP3VuZGVmaW5lZDpyZXQ7fSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZighc3VwcG9ydC5yYWRpb1ZhbHVlJiZ2YWx1ZT09PSJyYWRpbyImJm5vZGVOYW1lKGVsZW0sImlucHV0Iikpe3ZhciB2YWw9ZWxlbS52YWx1ZTtlbGVtLnNldEF0dHJpYnV0ZSgidHlwZSIsdmFsdWUpO2lmKHZhbCl7ZWxlbS52YWx1ZT12YWw7fQpyZXR1cm4gdmFsdWU7fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGVsZW0sdmFsdWUpe3ZhciBuYW1lLGk9MCxhdHRyTmFtZXM9dmFsdWUmJnZhbHVlLm1hdGNoKHJub3RodG1sd2hpdGUpO2lmKGF0dHJOYW1lcyYmZWxlbS5ub2RlVHlwZT09PTEpe3doaWxlKChuYW1lPWF0dHJOYW1lc1tpKytdKSl7ZWxlbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7fX19fSk7Ym9vbEhvb2s9e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlLG5hbWUpe2lmKHZhbHVlPT09ZmFsc2Upe2pRdWVyeS5yZW1vdmVBdHRyKGVsZW0sbmFtZSk7fWVsc2V7ZWxlbS5zZXRBdHRyaWJ1dGUobmFtZSxuYW1lKTt9CnJldHVybiBuYW1lO319O2pRdWVyeS5lYWNoKGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oaSxuYW1lKXt2YXIgZ2V0dGVyPWF0dHJIYW5kbGVbbmFtZV18fGpRdWVyeS5maW5kLmF0dHI7YXR0ckhhbmRsZVtuYW1lXT1mdW5jdGlvbihlbGVtLG5hbWUsaXNYTUwpe3ZhciByZXQsaGFuZGxlLGxvd2VyY2FzZU5hbWU9bmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFpc1hNTCl7aGFuZGxlPWF0dHJIYW5kbGVbbG93ZXJjYXNlTmFtZV07YXR0ckhhbmRsZVtsb3dlcmNhc2VOYW1lXT1yZXQ7cmV0PWdldHRlcihlbGVtLG5hbWUsaXNYTUwpIT1udWxsP2xvd2VyY2FzZU5hbWU6bnVsbDthdHRySGFuZGxlW2xvd2VyY2FzZU5hbWVdPWhhbmRsZTt9CnJldHVybiByZXQ7fTt9KTt2YXIgcmZvY3VzYWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHJjbGlja2FibGU9L14oPzphfGFyZWEpJC9pO2pRdWVyeS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5wcm9wLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9LHJlbW92ZVByb3A6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW2pRdWVyeS5wcm9wRml4W25hbWVdfHxuYW1lXTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe25hbWU9alF1ZXJ5LnByb3BGaXhbbmFtZV18fG5hbWU7aG9va3M9alF1ZXJ5LnByb3BIb29rc1tuYW1lXTt9CmlmKHZhbHVlIT09dW5kZWZpbmVkKXtpZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4oZWxlbVtuYW1lXT12YWx1ZSk7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0dXJuIGVsZW1bbmFtZV07fSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHRhYmluZGV4PWpRdWVyeS5maW5kLmF0dHIoZWxlbSwidGFiaW5kZXgiKTtpZih0YWJpbmRleCl7cmV0dXJuIHBhcnNlSW50KHRhYmluZGV4LDEwKTt9CmlmKHJmb2N1c2FibGUudGVzdChlbGVtLm5vZGVOYW1lKXx8cmNsaWNrYWJsZS50ZXN0KGVsZW0ubm9kZU5hbWUpJiZlbGVtLmhyZWYpe3JldHVybiAwO30KcmV0dXJuLTE7fX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pO2lmKCFzdXBwb3J0Lm9wdFNlbGVjdGVkKXtqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQucGFyZW50Tm9kZSl7cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDt9CnJldHVybiBudWxsO30sc2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO2lmKHBhcmVudCl7cGFyZW50LnNlbGVjdGVkSW5kZXg7aWYocGFyZW50LnBhcmVudE5vZGUpe3BhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fX19fTt9CmpRdWVyeS5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtqUXVlcnkucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXM7fSk7ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSh2YWx1ZSl7dmFyIHRva2Vucz12YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107cmV0dXJuIHRva2Vucy5qb2luKCIgIik7fQpmdW5jdGlvbiBnZXRDbGFzcyhlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUmJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIjt9CmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuIHZhbHVlO30KaWYodHlwZW9mIHZhbHVlPT09InN0cmluZyIpe3JldHVybiB2YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107fQpyZXR1cm5bXTt9CmpRdWVyeS5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5hZGRDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KY2xhc3Nlcz1jbGFzc2VzVG9BcnJheSh2YWx1ZSk7aWYoY2xhc3Nlcy5sZW5ndGgpe3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2N1clZhbHVlPWdldENsYXNzKGVsZW0pO2N1cj1lbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGN1clZhbHVlKSsiICIpO2lmKGN1cil7aj0wO3doaWxlKChjbGF6ej1jbGFzc2VzW2orK10pKXtpZihjdXIuaW5kZXhPZigiICIrY2xhenorIiAiKTwwKXtjdXIrPWNsYXp6KyIgIjt9fQpmaW5hbFZhbHVlPXN0cmlwQW5kQ29sbGFwc2UoY3VyKTtpZihjdXJWYWx1ZSE9PWZpbmFsVmFsdWUpe2VsZW0uc2V0QXR0cmlidXRlKCJjbGFzcyIsZmluYWxWYWx1ZSk7fX19fQpyZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KaWYoIWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiB0aGlzLmF0dHIoImNsYXNzIiwiIik7fQpjbGFzc2VzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTtpZihjbGFzc2VzLmxlbmd0aCl7d2hpbGUoKGVsZW09dGhpc1tpKytdKSl7Y3VyVmFsdWU9Z2V0Q2xhc3MoZWxlbSk7Y3VyPWVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoY3VyVmFsdWUpKyIgIik7aWYoY3VyKXtqPTA7d2hpbGUoKGNsYXp6PWNsYXNzZXNbaisrXSkpe3doaWxlKGN1ci5pbmRleE9mKCIgIitjbGF6eisiICIpPi0xKXtjdXI9Y3VyLnJlcGxhY2UoIiAiK2NsYXp6KyIgIiwiICIpO319CmZpbmFsVmFsdWU9c3RyaXBBbmRDb2xsYXBzZShjdXIpO2lmKGN1clZhbHVlIT09ZmluYWxWYWx1ZSl7ZWxlbS5zZXRBdHRyaWJ1dGUoImNsYXNzIixmaW5hbFZhbHVlKTt9fX19CnJldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odmFsdWUsc3RhdGVWYWwpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZSxpc1ZhbGlkVmFsdWU9dHlwZT09PSJzdHJpbmcifHxBcnJheS5pc0FycmF5KHZhbHVlKTtpZih0eXBlb2Ygc3RhdGVWYWw9PT0iYm9vbGVhbiImJmlzVmFsaWRWYWx1ZSl7cmV0dXJuIHN0YXRlVmFsP3RoaXMuYWRkQ2xhc3ModmFsdWUpOnRoaXMucmVtb3ZlQ2xhc3ModmFsdWUpO30KaWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKHZhbHVlLmNhbGwodGhpcyxpLGdldENsYXNzKHRoaXMpLHN0YXRlVmFsKSxzdGF0ZVZhbCk7fSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNsYXNzTmFtZSxpLHNlbGYsY2xhc3NOYW1lcztpZihpc1ZhbGlkVmFsdWUpe2k9MDtzZWxmPWpRdWVyeSh0aGlzKTtjbGFzc05hbWVzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTt3aGlsZSgoY2xhc3NOYW1lPWNsYXNzTmFtZXNbaSsrXSkpe2lmKHNlbGYuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7c2VsZi5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO31lbHNle3NlbGYuYWRkQ2xhc3MoY2xhc3NOYW1lKTt9fX1lbHNlIGlmKHZhbHVlPT09dW5kZWZpbmVkfHx0eXBlPT09ImJvb2xlYW4iKXtjbGFzc05hbWU9Z2V0Q2xhc3ModGhpcyk7aWYoY2xhc3NOYW1lKXtkYXRhUHJpdi5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsY2xhc3NOYW1lKTt9CmlmKHRoaXMuc2V0QXR0cmlidXRlKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNsYXNzTmFtZXx8dmFsdWU9PT1mYWxzZT8iIjpkYXRhUHJpdi5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIik7fX19KTt9LGhhc0NsYXNzOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgY2xhc3NOYW1lLGVsZW0saT0wO2NsYXNzTmFtZT0iICIrc2VsZWN0b3IrIiAiO3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoZ2V0Q2xhc3MoZWxlbSkpKyIgIikuaW5kZXhPZihjbGFzc05hbWUpPi0xKXtyZXR1cm4gdHJ1ZTt9fQpyZXR1cm4gZmFsc2U7fX0pO3ZhciBycmV0dXJuPS9cci9nO2pRdWVyeS5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2YWx1ZSl7dmFyIGhvb2tzLHJldCx2YWx1ZUlzRnVuY3Rpb24sZWxlbT10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihlbGVtKXtob29rcz1qUXVlcnkudmFsSG9va3NbZWxlbS50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW2VsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sInZhbHVlIikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcmV0O30KcmV0PWVsZW0udmFsdWU7aWYodHlwZW9mIHJldD09PSJzdHJpbmciKXtyZXR1cm4gcmV0LnJlcGxhY2UocnJldHVybiwiIik7fQpyZXR1cm4gcmV0PT1udWxsPyIiOnJldDt9CnJldHVybjt9CnZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciB2YWw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybjt9CmlmKHZhbHVlSXNGdW5jdGlvbil7dmFsPXZhbHVlLmNhbGwodGhpcyxpLGpRdWVyeSh0aGlzKS52YWwoKSk7fWVsc2V7dmFsPXZhbHVlO30KaWYodmFsPT1udWxsKXt2YWw9IiI7fWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWwrPSIiO31lbHNlIGlmKEFycmF5LmlzQXJyYXkodmFsKSl7dmFsPWpRdWVyeS5tYXAodmFsLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PW51bGw/IiI6dmFsdWUrIiI7fSk7fQpob29rcz1qUXVlcnkudmFsSG9va3NbdGhpcy50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHxob29rcy5zZXQodGhpcyx2YWwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9dmFsO319KTt9fSk7alF1ZXJ5LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWw9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLCJ2YWx1ZSIpO3JldHVybiB2YWwhPW51bGw/dmFsOnN0cmlwQW5kQ29sbGFwc2UoalF1ZXJ5LnRleHQoZWxlbSkpO319LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWx1ZSxvcHRpb24saSxvcHRpb25zPWVsZW0ub3B0aW9ucyxpbmRleD1lbGVtLnNlbGVjdGVkSW5kZXgsb25lPWVsZW0udHlwZT09PSJzZWxlY3Qtb25lIix2YWx1ZXM9b25lP251bGw6W10sbWF4PW9uZT9pbmRleCsxOm9wdGlvbnMubGVuZ3RoO2lmKGluZGV4PDApe2k9bWF4O31lbHNle2k9b25lP2luZGV4OjA7fQpmb3IoO2k8bWF4O2krKyl7b3B0aW9uPW9wdGlvbnNbaV07aWYoKG9wdGlvbi5zZWxlY3RlZHx8aT09PWluZGV4KSYmIW9wdGlvbi5kaXNhYmxlZCYmKCFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW5vZGVOYW1lKG9wdGlvbi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dmFsdWU9alF1ZXJ5KG9wdGlvbikudmFsKCk7aWYob25lKXtyZXR1cm4gdmFsdWU7fQp2YWx1ZXMucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHZhbHVlczt9LHNldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgb3B0aW9uU2V0LG9wdGlvbixvcHRpb25zPWVsZW0ub3B0aW9ucyx2YWx1ZXM9alF1ZXJ5Lm1ha2VBcnJheSh2YWx1ZSksaT1vcHRpb25zLmxlbmd0aDt3aGlsZShpLS0pe29wdGlvbj1vcHRpb25zW2ldO2lmKG9wdGlvbi5zZWxlY3RlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldChvcHRpb24pLHZhbHVlcyk+LTEpe29wdGlvblNldD10cnVlO319CmlmKCFvcHRpb25TZXQpe2VsZW0uc2VsZWN0ZWRJbmRleD0tMTt9CnJldHVybiB2YWx1ZXM7fX19fSk7alF1ZXJ5LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtqUXVlcnkudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuKGVsZW0uY2hlY2tlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkoZWxlbSkudmFsKCksdmFsdWUpPi0xKTt9fX07aWYoIXN1cHBvcnQuY2hlY2tPbil7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6ZWxlbS52YWx1ZTt9O319KTtzdXBwb3J0LmZvY3VzaW49Im9uZm9jdXNpbiJpbiB3aW5kb3c7dmFyIHJmb2N1c01vcnBoPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxzdG9wUHJvcGFnYXRpb25DYWxsYmFjaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO307alF1ZXJ5LmV4dGVuZChqUXVlcnkuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZXZlbnQsZGF0YSxlbGVtLG9ubHlIYW5kbGVycyl7dmFyIGksY3VyLHRtcCxidWJibGVUeXBlLG9udHlwZSxoYW5kbGUsc3BlY2lhbCxsYXN0RWxlbWVudCxldmVudFBhdGg9W2VsZW18fGRvY3VtZW50XSx0eXBlPWhhc093bi5jYWxsKGV2ZW50LCJ0eXBlIik/ZXZlbnQudHlwZTpldmVudCxuYW1lc3BhY2VzPWhhc093bi5jYWxsKGV2ZW50LCJuYW1lc3BhY2UiKT9ldmVudC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtjdXI9bGFzdEVsZW1lbnQ9dG1wPWVsZW09ZWxlbXx8ZG9jdW1lbnQ7aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT04KXtyZXR1cm47fQppZihyZm9jdXNNb3JwaC50ZXN0KHR5cGUralF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCkpe3JldHVybjt9CmlmKHR5cGUuaW5kZXhPZigiLiIpPi0xKXtuYW1lc3BhY2VzPXR5cGUuc3BsaXQoIi4iKTt0eXBlPW5hbWVzcGFjZXMuc2hpZnQoKTtuYW1lc3BhY2VzLnNvcnQoKTt9Cm9udHlwZT10eXBlLmluZGV4T2YoIjoiKTwwJiYib24iK3R5cGU7ZXZlbnQ9ZXZlbnRbalF1ZXJ5LmV4cGFuZG9dP2V2ZW50Om5ldyBqUXVlcnkuRXZlbnQodHlwZSx0eXBlb2YgZXZlbnQ9PT0ib2JqZWN0IiYmZXZlbnQpO2V2ZW50LmlzVHJpZ2dlcj1vbmx5SGFuZGxlcnM/MjozO2V2ZW50Lm5hbWVzcGFjZT1uYW1lc3BhY2VzLmpvaW4oIi4iKTtldmVudC5ybmFtZXNwYWNlPWV2ZW50Lm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7ZXZlbnQucmVzdWx0PXVuZGVmaW5lZDtpZighZXZlbnQudGFyZ2V0KXtldmVudC50YXJnZXQ9ZWxlbTt9CmRhdGE9ZGF0YT09bnVsbD9bZXZlbnRdOmpRdWVyeS5tYWtlQXJyYXkoZGF0YSxbZXZlbnRdKTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtpZighb25seUhhbmRsZXJzJiZzcGVjaWFsLnRyaWdnZXImJnNwZWNpYWwudHJpZ2dlci5hcHBseShlbGVtLGRhdGEpPT09ZmFsc2Upe3JldHVybjt9CmlmKCFvbmx5SGFuZGxlcnMmJiFzcGVjaWFsLm5vQnViYmxlJiYhaXNXaW5kb3coZWxlbSkpe2J1YmJsZVR5cGU9c3BlY2lhbC5kZWxlZ2F0ZVR5cGV8fHR5cGU7aWYoIXJmb2N1c01vcnBoLnRlc3QoYnViYmxlVHlwZSt0eXBlKSl7Y3VyPWN1ci5wYXJlbnROb2RlO30KZm9yKDtjdXI7Y3VyPWN1ci5wYXJlbnROb2RlKXtldmVudFBhdGgucHVzaChjdXIpO3RtcD1jdXI7fQppZih0bXA9PT0oZWxlbS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkpe2V2ZW50UGF0aC5wdXNoKHRtcC5kZWZhdWx0Vmlld3x8dG1wLnBhcmVudFdpbmRvd3x8d2luZG93KTt9fQppPTA7d2hpbGUoKGN1cj1ldmVudFBhdGhbaSsrXSkmJiFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudD1jdXI7ZXZlbnQudHlwZT1pPjE/YnViYmxlVHlwZTpzcGVjaWFsLmJpbmRUeXBlfHx0eXBlO2hhbmRsZT0oZGF0YVByaXYuZ2V0KGN1ciwiZXZlbnRzIil8fHt9KVtldmVudC50eXBlXSYmZGF0YVByaXYuZ2V0KGN1ciwiaGFuZGxlIik7aWYoaGFuZGxlKXtoYW5kbGUuYXBwbHkoY3VyLGRhdGEpO30KaGFuZGxlPW9udHlwZSYmY3VyW29udHlwZV07aWYoaGFuZGxlJiZoYW5kbGUuYXBwbHkmJmFjY2VwdERhdGEoY3VyKSl7ZXZlbnQucmVzdWx0PWhhbmRsZS5hcHBseShjdXIsZGF0YSk7aWYoZXZlbnQucmVzdWx0PT09ZmFsc2Upe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fX19CmV2ZW50LnR5cGU9dHlwZTtpZighb25seUhhbmRsZXJzJiYhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKCghc3BlY2lhbC5fZGVmYXVsdHx8c3BlY2lhbC5fZGVmYXVsdC5hcHBseShldmVudFBhdGgucG9wKCksZGF0YSk9PT1mYWxzZSkmJmFjY2VwdERhdGEoZWxlbSkpe2lmKG9udHlwZSYmaXNGdW5jdGlvbihlbGVtW3R5cGVdKSYmIWlzV2luZG93KGVsZW0pKXt0bXA9ZWxlbVtvbnR5cGVdO2lmKHRtcCl7ZWxlbVtvbnR5cGVdPW51bGw7fQpqUXVlcnkuZXZlbnQudHJpZ2dlcmVkPXR5cGU7aWYoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrKTt9CmVsZW1bdHlwZV0oKTtpZihldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2spO30KalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZD11bmRlZmluZWQ7aWYodG1wKXtlbGVtW29udHlwZV09dG1wO319fX0KcmV0dXJuIGV2ZW50LnJlc3VsdDt9LHNpbXVsYXRlOmZ1bmN0aW9uKHR5cGUsZWxlbSxldmVudCl7dmFyIGU9alF1ZXJ5LmV4dGVuZChuZXcgalF1ZXJ5LkV2ZW50KCksZXZlbnQse3R5cGU6dHlwZSxpc1NpbXVsYXRlZDp0cnVlfSk7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoZSxudWxsLGVsZW0pO319KTtqUXVlcnkuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKHR5cGUsZGF0YSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC50cmlnZ2VyKHR5cGUsZGF0YSx0aGlzKTt9KTt9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIGVsZW09dGhpc1swXTtpZihlbGVtKXtyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLGVsZW0sdHJ1ZSk7fX19KTtpZighc3VwcG9ydC5mb2N1c2luKXtqUXVlcnkuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24ob3JpZyxmaXgpe3ZhciBoYW5kbGVyPWZ1bmN0aW9uKGV2ZW50KXtqUXVlcnkuZXZlbnQuc2ltdWxhdGUoZml4LGV2ZW50LnRhcmdldCxqUXVlcnkuZXZlbnQuZml4KGV2ZW50KSk7fTtqUXVlcnkuZXZlbnQuc3BlY2lhbFtmaXhdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkb2M9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGF0dGFjaGVzPWRhdGFQcml2LmFjY2Vzcyhkb2MsZml4KTtpZighYXR0YWNoZXMpe2RvYy5hZGRFdmVudExpc3RlbmVyKG9yaWcsaGFuZGxlcix0cnVlKTt9CmRhdGFQcml2LmFjY2Vzcyhkb2MsZml4LChhdHRhY2hlc3x8MCkrMSk7fSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkb2M9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGF0dGFjaGVzPWRhdGFQcml2LmFjY2Vzcyhkb2MsZml4KS0xO2lmKCFhdHRhY2hlcyl7ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIob3JpZyxoYW5kbGVyLHRydWUpO2RhdGFQcml2LnJlbW92ZShkb2MsZml4KTt9ZWxzZXtkYXRhUHJpdi5hY2Nlc3MoZG9jLGZpeCxhdHRhY2hlcyk7fX19O30pO30KdmFyIGxvY2F0aW9uPXdpbmRvdy5sb2NhdGlvbjt2YXIgbm9uY2U9RGF0ZS5ub3coKTt2YXIgcnF1ZXJ5PSgvXD8vKTtqUXVlcnkucGFyc2VYTUw9ZnVuY3Rpb24oZGF0YSl7dmFyIHhtbDtpZighZGF0YXx8dHlwZW9mIGRhdGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fQp0cnl7eG1sPShuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoZGF0YSwidGV4dC94bWwiKTt9Y2F0Y2goZSl7eG1sPXVuZGVmaW5lZDt9CmlmKCF4bWx8fHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpe2pRdWVyeS5lcnJvcigiSW52YWxpZCBYTUw6ICIrZGF0YSk7fQpyZXR1cm4geG1sO307dmFyCnJicmFja2V0PS9cW1xdJC8sckNSTEY9L1xyP1xuL2cscnN1Ym1pdHRlclR5cGVzPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxyc3VibWl0dGFibGU9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIGJ1aWxkUGFyYW1zKHByZWZpeCxvYmosdHJhZGl0aW9uYWwsYWRkKXt2YXIgbmFtZTtpZihBcnJheS5pc0FycmF5KG9iaikpe2pRdWVyeS5lYWNoKG9iaixmdW5jdGlvbihpLHYpe2lmKHRyYWRpdGlvbmFsfHxyYnJhY2tldC50ZXN0KHByZWZpeCkpe2FkZChwcmVmaXgsdik7fWVsc2V7YnVpbGRQYXJhbXMocHJlZml4KyJbIisodHlwZW9mIHY9PT0ib2JqZWN0IiYmdiE9bnVsbD9pOiIiKSsiXSIsdix0cmFkaXRpb25hbCxhZGQpO319KTt9ZWxzZSBpZighdHJhZGl0aW9uYWwmJnRvVHlwZShvYmopPT09Im9iamVjdCIpe2ZvcihuYW1lIGluIG9iail7YnVpbGRQYXJhbXMocHJlZml4KyJbIituYW1lKyJdIixvYmpbbmFtZV0sdHJhZGl0aW9uYWwsYWRkKTt9fWVsc2V7YWRkKHByZWZpeCxvYmopO319CmpRdWVyeS5wYXJhbT1mdW5jdGlvbihhLHRyYWRpdGlvbmFsKXt2YXIgcHJlZml4LHM9W10sYWRkPWZ1bmN0aW9uKGtleSx2YWx1ZU9yRnVuY3Rpb24pe3ZhciB2YWx1ZT1pc0Z1bmN0aW9uKHZhbHVlT3JGdW5jdGlvbik/dmFsdWVPckZ1bmN0aW9uKCk6dmFsdWVPckZ1bmN0aW9uO3Nbcy5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChrZXkpKyI9IisKZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlPT1udWxsPyIiOnZhbHVlKTt9O2lmKEFycmF5LmlzQXJyYXkoYSl8fChhLmpxdWVyeSYmIWpRdWVyeS5pc1BsYWluT2JqZWN0KGEpKSl7alF1ZXJ5LmVhY2goYSxmdW5jdGlvbigpe2FkZCh0aGlzLm5hbWUsdGhpcy52YWx1ZSk7fSk7fWVsc2V7Zm9yKHByZWZpeCBpbiBhKXtidWlsZFBhcmFtcyhwcmVmaXgsYVtwcmVmaXhdLHRyYWRpdGlvbmFsLGFkZCk7fX0KcmV0dXJuIHMuam9pbigiJiIpO307alF1ZXJ5LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpO30sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZWxlbWVudHM9alF1ZXJ5LnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZWxlbWVudHM/alF1ZXJ5Lm1ha2VBcnJheShlbGVtZW50cyk6dGhpczt9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdHlwZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWpRdWVyeSh0aGlzKS5pcygiOmRpc2FibGVkIikmJnJzdWJtaXR0YWJsZS50ZXN0KHRoaXMubm9kZU5hbWUpJiYhcnN1Ym1pdHRlclR5cGVzLnRlc3QodHlwZSkmJih0aGlzLmNoZWNrZWR8fCFyY2hlY2thYmxlVHlwZS50ZXN0KHR5cGUpKTt9KS5tYXAoZnVuY3Rpb24oaSxlbGVtKXt2YXIgdmFsPWpRdWVyeSh0aGlzKS52YWwoKTtpZih2YWw9PW51bGwpe3JldHVybiBudWxsO30KaWYoQXJyYXkuaXNBcnJheSh2YWwpKXtyZXR1cm4galF1ZXJ5Lm1hcCh2YWwsZnVuY3Rpb24odmFsKXtyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSk7fQpyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSkuZ2V0KCk7fX0pO3ZhcgpyMjA9LyUyMC9nLHJoYXNoPS8jLiokLyxyYW50aUNhY2hlPS8oWz8mXSlfPVteJl0qLyxyaGVhZGVycz0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL21nLHJsb2NhbFByb3RvY29sPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHJub0NvbnRlbnQ9L14oPzpHRVR8SEVBRCkkLyxycHJvdG9jb2w9L15cL1wvLyxwcmVmaWx0ZXJzPXt9LHRyYW5zcG9ydHM9e30sYWxsVHlwZXM9IiovIi5jb25jYXQoIioiKSxvcmlnaW5BbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO29yaWdpbkFuY2hvci5ocmVmPWxvY2F0aW9uLmhyZWY7ZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSl7cmV0dXJuIGZ1bmN0aW9uKGRhdGFUeXBlRXhwcmVzc2lvbixmdW5jKXtpZih0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uIT09InN0cmluZyIpe2Z1bmM9ZGF0YVR5cGVFeHByZXNzaW9uO2RhdGFUeXBlRXhwcmVzc2lvbj0iKiI7fQp2YXIgZGF0YVR5cGUsaT0wLGRhdGFUeXBlcz1kYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107aWYoaXNGdW5jdGlvbihmdW5jKSl7d2hpbGUoKGRhdGFUeXBlPWRhdGFUeXBlc1tpKytdKSl7aWYoZGF0YVR5cGVbMF09PT0iKyIpe2RhdGFUeXBlPWRhdGFUeXBlLnNsaWNlKDEpfHwiKiI7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnVuc2hpZnQoZnVuYyk7fWVsc2V7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnB1c2goZnVuYyk7fX19fTt9CmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSxvcHRpb25zLG9yaWdpbmFsT3B0aW9ucyxqcVhIUil7dmFyIGluc3BlY3RlZD17fSxzZWVraW5nVHJhbnNwb3J0PShzdHJ1Y3R1cmU9PT10cmFuc3BvcnRzKTtmdW5jdGlvbiBpbnNwZWN0KGRhdGFUeXBlKXt2YXIgc2VsZWN0ZWQ7aW5zcGVjdGVkW2RhdGFUeXBlXT10cnVlO2pRdWVyeS5lYWNoKHN0cnVjdHVyZVtkYXRhVHlwZV18fFtdLGZ1bmN0aW9uKF8scHJlZmlsdGVyT3JGYWN0b3J5KXt2YXIgZGF0YVR5cGVPclRyYW5zcG9ydD1wcmVmaWx0ZXJPckZhY3Rvcnkob3B0aW9ucyxvcmlnaW5hbE9wdGlvbnMsanFYSFIpO2lmKHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0PT09InN0cmluZyImJiFzZWVraW5nVHJhbnNwb3J0JiYhaW5zcGVjdGVkW2RhdGFUeXBlT3JUcmFuc3BvcnRdKXtvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KGRhdGFUeXBlT3JUcmFuc3BvcnQpO2luc3BlY3QoZGF0YVR5cGVPclRyYW5zcG9ydCk7cmV0dXJuIGZhbHNlO31lbHNlIGlmKHNlZWtpbmdUcmFuc3BvcnQpe3JldHVybiEoc2VsZWN0ZWQ9ZGF0YVR5cGVPclRyYW5zcG9ydCk7fX0pO3JldHVybiBzZWxlY3RlZDt9CnJldHVybiBpbnNwZWN0KG9wdGlvbnMuZGF0YVR5cGVzWzBdKXx8IWluc3BlY3RlZFsiKiJdJiZpbnNwZWN0KCIqIik7fQpmdW5jdGlvbiBhamF4RXh0ZW5kKHRhcmdldCxzcmMpe3ZhciBrZXksZGVlcCxmbGF0T3B0aW9ucz1qUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3Ioa2V5IGluIHNyYyl7aWYoc3JjW2tleV0hPT11bmRlZmluZWQpeyhmbGF0T3B0aW9uc1trZXldP3RhcmdldDooZGVlcHx8KGRlZXA9e30pKSlba2V5XT1zcmNba2V5XTt9fQppZihkZWVwKXtqUXVlcnkuZXh0ZW5kKHRydWUsdGFyZ2V0LGRlZXApO30KcmV0dXJuIHRhcmdldDt9CmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpe3ZhciBjdCx0eXBlLGZpbmFsRGF0YVR5cGUsZmlyc3REYXRhVHlwZSxjb250ZW50cz1zLmNvbnRlbnRzLGRhdGFUeXBlcz1zLmRhdGFUeXBlczt3aGlsZShkYXRhVHlwZXNbMF09PT0iKiIpe2RhdGFUeXBlcy5zaGlmdCgpO2lmKGN0PT09dW5kZWZpbmVkKXtjdD1zLm1pbWVUeXBlfHxqcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7fX0KaWYoY3Qpe2Zvcih0eXBlIGluIGNvbnRlbnRzKXtpZihjb250ZW50c1t0eXBlXSYmY29udGVudHNbdHlwZV0udGVzdChjdCkpe2RhdGFUeXBlcy51bnNoaWZ0KHR5cGUpO2JyZWFrO319fQppZihkYXRhVHlwZXNbMF1pbiByZXNwb25zZXMpe2ZpbmFsRGF0YVR5cGU9ZGF0YVR5cGVzWzBdO31lbHNle2Zvcih0eXBlIGluIHJlc3BvbnNlcyl7aWYoIWRhdGFUeXBlc1swXXx8cy5jb252ZXJ0ZXJzW3R5cGUrIiAiK2RhdGFUeXBlc1swXV0pe2ZpbmFsRGF0YVR5cGU9dHlwZTticmVhazt9CmlmKCFmaXJzdERhdGFUeXBlKXtmaXJzdERhdGFUeXBlPXR5cGU7fX0KZmluYWxEYXRhVHlwZT1maW5hbERhdGFUeXBlfHxmaXJzdERhdGFUeXBlO30KaWYoZmluYWxEYXRhVHlwZSl7aWYoZmluYWxEYXRhVHlwZSE9PWRhdGFUeXBlc1swXSl7ZGF0YVR5cGVzLnVuc2hpZnQoZmluYWxEYXRhVHlwZSk7fQpyZXR1cm4gcmVzcG9uc2VzW2ZpbmFsRGF0YVR5cGVdO319CmZ1bmN0aW9uIGFqYXhDb252ZXJ0KHMscmVzcG9uc2UsanFYSFIsaXNTdWNjZXNzKXt2YXIgY29udjIsY3VycmVudCxjb252LHRtcCxwcmV2LGNvbnZlcnRlcnM9e30sZGF0YVR5cGVzPXMuZGF0YVR5cGVzLnNsaWNlKCk7aWYoZGF0YVR5cGVzWzFdKXtmb3IoY29udiBpbiBzLmNvbnZlcnRlcnMpe2NvbnZlcnRlcnNbY29udi50b0xvd2VyQ2FzZSgpXT1zLmNvbnZlcnRlcnNbY29udl07fX0KY3VycmVudD1kYXRhVHlwZXMuc2hpZnQoKTt3aGlsZShjdXJyZW50KXtpZihzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdKXtqcVhIUltzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdXT1yZXNwb25zZTt9CmlmKCFwcmV2JiZpc1N1Y2Nlc3MmJnMuZGF0YUZpbHRlcil7cmVzcG9uc2U9cy5kYXRhRmlsdGVyKHJlc3BvbnNlLHMuZGF0YVR5cGUpO30KcHJldj1jdXJyZW50O2N1cnJlbnQ9ZGF0YVR5cGVzLnNoaWZ0KCk7aWYoY3VycmVudCl7aWYoY3VycmVudD09PSIqIil7Y3VycmVudD1wcmV2O31lbHNlIGlmKHByZXYhPT0iKiImJnByZXYhPT1jdXJyZW50KXtjb252PWNvbnZlcnRlcnNbcHJldisiICIrY3VycmVudF18fGNvbnZlcnRlcnNbIiogIitjdXJyZW50XTtpZighY29udil7Zm9yKGNvbnYyIGluIGNvbnZlcnRlcnMpe3RtcD1jb252Mi5zcGxpdCgiICIpO2lmKHRtcFsxXT09PWN1cnJlbnQpe2NvbnY9Y29udmVydGVyc1twcmV2KyIgIit0bXBbMF1dfHxjb252ZXJ0ZXJzWyIqICIrdG1wWzBdXTtpZihjb252KXtpZihjb252PT09dHJ1ZSl7Y29udj1jb252ZXJ0ZXJzW2NvbnYyXTt9ZWxzZSBpZihjb252ZXJ0ZXJzW2NvbnYyXSE9PXRydWUpe2N1cnJlbnQ9dG1wWzBdO2RhdGFUeXBlcy51bnNoaWZ0KHRtcFsxXSk7fQpicmVhazt9fX19CmlmKGNvbnYhPT10cnVlKXtpZihjb252JiZzLnRocm93cyl7cmVzcG9uc2U9Y29udihyZXNwb25zZSk7fWVsc2V7dHJ5e3Jlc3BvbnNlPWNvbnYocmVzcG9uc2UpO31jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpjb252P2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3ByZXYrIiB0byAiK2N1cnJlbnR9O319fX19fQpyZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6cmVzcG9uc2V9O30KalF1ZXJ5LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6cmxvY2FsUHJvdG9jb2wudGVzdChsb2NhdGlvbi5wcm90b2NvbCksZ2xvYmFsOnRydWUscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjphbGxUeXBlcyx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjp0cnVlLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpqUXVlcnkucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6dHJ1ZSxjb250ZXh0OnRydWV9fSxhamF4U2V0dXA6ZnVuY3Rpb24odGFyZ2V0LHNldHRpbmdzKXtyZXR1cm4gc2V0dGluZ3M/YWpheEV4dGVuZChhamF4RXh0ZW5kKHRhcmdldCxqUXVlcnkuYWpheFNldHRpbmdzKSxzZXR0aW5ncyk6YWpheEV4dGVuZChqUXVlcnkuYWpheFNldHRpbmdzLHRhcmdldCk7fSxhamF4UHJlZmlsdGVyOmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyhwcmVmaWx0ZXJzKSxhamF4VHJhbnNwb3J0OmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyh0cmFuc3BvcnRzKSxhamF4OmZ1bmN0aW9uKHVybCxvcHRpb25zKXtpZih0eXBlb2YgdXJsPT09Im9iamVjdCIpe29wdGlvbnM9dXJsO3VybD11bmRlZmluZWQ7fQpvcHRpb25zPW9wdGlvbnN8fHt9O3ZhciB0cmFuc3BvcnQsY2FjaGVVUkwscmVzcG9uc2VIZWFkZXJzU3RyaW5nLHJlc3BvbnNlSGVhZGVycyx0aW1lb3V0VGltZXIsdXJsQW5jaG9yLGNvbXBsZXRlZCxmaXJlR2xvYmFscyxpLHVuY2FjaGVkLHM9alF1ZXJ5LmFqYXhTZXR1cCh7fSxvcHRpb25zKSxjYWxsYmFja0NvbnRleHQ9cy5jb250ZXh0fHxzLGdsb2JhbEV2ZW50Q29udGV4dD1zLmNvbnRleHQmJihjYWxsYmFja0NvbnRleHQubm9kZVR5cGV8fGNhbGxiYWNrQ29udGV4dC5qcXVlcnkpP2pRdWVyeShjYWxsYmFja0NvbnRleHQpOmpRdWVyeS5ldmVudCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKSxjb21wbGV0ZURlZmVycmVkPWpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksc3RhdHVzQ29kZT1zLnN0YXR1c0NvZGV8fHt9LHJlcXVlc3RIZWFkZXJzPXt9LHJlcXVlc3RIZWFkZXJzTmFtZXM9e30sc3RyQWJvcnQ9ImNhbmNlbGVkIixqcVhIUj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGtleSl7dmFyIG1hdGNoO2lmKGNvbXBsZXRlZCl7aWYoIXJlc3BvbnNlSGVhZGVycyl7cmVzcG9uc2VIZWFkZXJzPXt9O3doaWxlKChtYXRjaD1yaGVhZGVycy5leGVjKHJlc3BvbnNlSGVhZGVyc1N0cmluZykpKXtyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKV09bWF0Y2hbMl07fX0KbWF0Y2g9cmVzcG9uc2VIZWFkZXJzW2tleS50b0xvd2VyQ2FzZSgpXTt9CnJldHVybiBtYXRjaD09bnVsbD9udWxsOm1hdGNoO30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbXBsZXRlZD9yZXNwb25zZUhlYWRlcnNTdHJpbmc6bnVsbDt9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7aWYoY29tcGxldGVkPT1udWxsKXtuYW1lPXJlcXVlc3RIZWFkZXJzTmFtZXNbbmFtZS50b0xvd2VyQ2FzZSgpXT1yZXF1ZXN0SGVhZGVyc05hbWVzW25hbWUudG9Mb3dlckNhc2UoKV18fG5hbWU7cmVxdWVzdEhlYWRlcnNbbmFtZV09dmFsdWU7fQpyZXR1cm4gdGhpczt9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24odHlwZSl7aWYoY29tcGxldGVkPT1udWxsKXtzLm1pbWVUeXBlPXR5cGU7fQpyZXR1cm4gdGhpczt9LHN0YXR1c0NvZGU6ZnVuY3Rpb24obWFwKXt2YXIgY29kZTtpZihtYXApe2lmKGNvbXBsZXRlZCl7anFYSFIuYWx3YXlzKG1hcFtqcVhIUi5zdGF0dXNdKTt9ZWxzZXtmb3IoY29kZSBpbiBtYXApe3N0YXR1c0NvZGVbY29kZV09W3N0YXR1c0NvZGVbY29kZV0sbWFwW2NvZGVdXTt9fX0KcmV0dXJuIHRoaXM7fSxhYm9ydDpmdW5jdGlvbihzdGF0dXNUZXh0KXt2YXIgZmluYWxUZXh0PXN0YXR1c1RleHR8fHN0ckFib3J0O2lmKHRyYW5zcG9ydCl7dHJhbnNwb3J0LmFib3J0KGZpbmFsVGV4dCk7fQpkb25lKDAsZmluYWxUZXh0KTtyZXR1cm4gdGhpczt9fTtkZWZlcnJlZC5wcm9taXNlKGpxWEhSKTtzLnVybD0oKHVybHx8cy51cmx8fGxvY2F0aW9uLmhyZWYpKyIiKS5yZXBsYWNlKHJwcm90b2NvbCxsb2NhdGlvbi5wcm90b2NvbCsiLy8iKTtzLnR5cGU9b3B0aW9ucy5tZXRob2R8fG9wdGlvbnMudHlwZXx8cy5tZXRob2R8fHMudHlwZTtzLmRhdGFUeXBlcz0ocy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO2lmKHMuY3Jvc3NEb21haW49PW51bGwpe3VybEFuY2hvcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e3VybEFuY2hvci5ocmVmPXMudXJsO3VybEFuY2hvci5ocmVmPXVybEFuY2hvci5ocmVmO3MuY3Jvc3NEb21haW49b3JpZ2luQW5jaG9yLnByb3RvY29sKyIvLyIrb3JpZ2luQW5jaG9yLmhvc3QhPT11cmxBbmNob3IucHJvdG9jb2wrIi8vIit1cmxBbmNob3IuaG9zdDt9Y2F0Y2goZSl7cy5jcm9zc0RvbWFpbj10cnVlO319CmlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmdHlwZW9mIHMuZGF0YSE9PSJzdHJpbmciKXtzLmRhdGE9alF1ZXJ5LnBhcmFtKHMuZGF0YSxzLnRyYWRpdGlvbmFsKTt9Cmluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHByZWZpbHRlcnMscyxvcHRpb25zLGpxWEhSKTtpZihjb21wbGV0ZWQpe3JldHVybiBqcVhIUjt9CmZpcmVHbG9iYWxzPWpRdWVyeS5ldmVudCYmcy5nbG9iYWw7aWYoZmlyZUdsb2JhbHMmJmpRdWVyeS5hY3RpdmUrKz09PTApe2pRdWVyeS5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKTt9CnMudHlwZT1zLnR5cGUudG9VcHBlckNhc2UoKTtzLmhhc0NvbnRlbnQ9IXJub0NvbnRlbnQudGVzdChzLnR5cGUpO2NhY2hlVVJMPXMudXJsLnJlcGxhY2Uocmhhc2gsIiIpO2lmKCFzLmhhc0NvbnRlbnQpe3VuY2FjaGVkPXMudXJsLnNsaWNlKGNhY2hlVVJMLmxlbmd0aCk7aWYocy5kYXRhJiYocy5wcm9jZXNzRGF0YXx8dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciKSl7Y2FjaGVVUkwrPShycXVlcnkudGVzdChjYWNoZVVSTCk/IiYiOiI/Iikrcy5kYXRhO2RlbGV0ZSBzLmRhdGE7fQppZihzLmNhY2hlPT09ZmFsc2Upe2NhY2hlVVJMPWNhY2hlVVJMLnJlcGxhY2UocmFudGlDYWNoZSwiJDEiKTt1bmNhY2hlZD0ocnF1ZXJ5LnRlc3QoY2FjaGVVUkwpPyImIjoiPyIpKyJfPSIrKG5vbmNlKyspK3VuY2FjaGVkO30Kcy51cmw9Y2FjaGVVUkwrdW5jYWNoZWQ7fWVsc2UgaWYocy5kYXRhJiZzLnByb2Nlc3NEYXRhJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCl7cy5kYXRhPXMuZGF0YS5yZXBsYWNlKHIyMCwiKyIpO30KaWYocy5pZk1vZGlmaWVkKXtpZihqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGpRdWVyeS5sYXN0TW9kaWZpZWRbY2FjaGVVUkxdKTt9CmlmKGpRdWVyeS5ldGFnW2NhY2hlVVJMXSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsalF1ZXJ5LmV0YWdbY2FjaGVVUkxdKTt9fQppZihzLmRhdGEmJnMuaGFzQ29udGVudCYmcy5jb250ZW50VHlwZSE9PWZhbHNlfHxvcHRpb25zLmNvbnRlbnRUeXBlKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHMuY29udGVudFR5cGUpO30KanFYSFIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixzLmRhdGFUeXBlc1swXSYmcy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXT9zLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dKwoocy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIithbGxUeXBlcysiOyBxPTAuMDEiOiIiKTpzLmFjY2VwdHNbIioiXSk7Zm9yKGkgaW4gcy5oZWFkZXJzKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKGkscy5oZWFkZXJzW2ldKTt9CmlmKHMuYmVmb3JlU2VuZCYmKHMuYmVmb3JlU2VuZC5jYWxsKGNhbGxiYWNrQ29udGV4dCxqcVhIUixzKT09PWZhbHNlfHxjb21wbGV0ZWQpKXtyZXR1cm4ganFYSFIuYWJvcnQoKTt9CnN0ckFib3J0PSJhYm9ydCI7Y29tcGxldGVEZWZlcnJlZC5hZGQocy5jb21wbGV0ZSk7anFYSFIuZG9uZShzLnN1Y2Nlc3MpO2pxWEhSLmZhaWwocy5lcnJvcik7dHJhbnNwb3J0PWluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHRyYW5zcG9ydHMscyxvcHRpb25zLGpxWEhSKTtpZighdHJhbnNwb3J0KXtkb25lKC0xLCJObyBUcmFuc3BvcnQiKTt9ZWxzZXtqcVhIUi5yZWFkeVN0YXRlPTE7aWYoZmlyZUdsb2JhbHMpe2dsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCJhamF4U2VuZCIsW2pxWEhSLHNdKTt9CmlmKGNvbXBsZXRlZCl7cmV0dXJuIGpxWEhSO30KaWYocy5hc3luYyYmcy50aW1lb3V0PjApe3RpbWVvdXRUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2pxWEhSLmFib3J0KCJ0aW1lb3V0Iik7fSxzLnRpbWVvdXQpO30KdHJ5e2NvbXBsZXRlZD1mYWxzZTt0cmFuc3BvcnQuc2VuZChyZXF1ZXN0SGVhZGVycyxkb25lKTt9Y2F0Y2goZSl7aWYoY29tcGxldGVkKXt0aHJvdyBlO30KZG9uZSgtMSxlKTt9fQpmdW5jdGlvbiBkb25lKHN0YXR1cyxuYXRpdmVTdGF0dXNUZXh0LHJlc3BvbnNlcyxoZWFkZXJzKXt2YXIgaXNTdWNjZXNzLHN1Y2Nlc3MsZXJyb3IscmVzcG9uc2UsbW9kaWZpZWQsc3RhdHVzVGV4dD1uYXRpdmVTdGF0dXNUZXh0O2lmKGNvbXBsZXRlZCl7cmV0dXJuO30KY29tcGxldGVkPXRydWU7aWYodGltZW91dFRpbWVyKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcik7fQp0cmFuc3BvcnQ9dW5kZWZpbmVkO3Jlc3BvbnNlSGVhZGVyc1N0cmluZz1oZWFkZXJzfHwiIjtqcVhIUi5yZWFkeVN0YXRlPXN0YXR1cz4wPzQ6MDtpc1N1Y2Nlc3M9c3RhdHVzPj0yMDAmJnN0YXR1czwzMDB8fHN0YXR1cz09PTMwNDtpZihyZXNwb25zZXMpe3Jlc3BvbnNlPWFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpO30KcmVzcG9uc2U9YWpheENvbnZlcnQocyxyZXNwb25zZSxqcVhIUixpc1N1Y2Nlc3MpO2lmKGlzU3VjY2Vzcyl7aWYocy5pZk1vZGlmaWVkKXttb2RpZmllZD1qcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpO2lmKG1vZGlmaWVkKXtqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXT1tb2RpZmllZDt9Cm1vZGlmaWVkPWpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIik7aWYobW9kaWZpZWQpe2pRdWVyeS5ldGFnW2NhY2hlVVJMXT1tb2RpZmllZDt9fQppZihzdGF0dXM9PT0yMDR8fHMudHlwZT09PSJIRUFEIil7c3RhdHVzVGV4dD0ibm9jb250ZW50Ijt9ZWxzZSBpZihzdGF0dXM9PT0zMDQpe3N0YXR1c1RleHQ9Im5vdG1vZGlmaWVkIjt9ZWxzZXtzdGF0dXNUZXh0PXJlc3BvbnNlLnN0YXRlO3N1Y2Nlc3M9cmVzcG9uc2UuZGF0YTtlcnJvcj1yZXNwb25zZS5lcnJvcjtpc1N1Y2Nlc3M9IWVycm9yO319ZWxzZXtlcnJvcj1zdGF0dXNUZXh0O2lmKHN0YXR1c3x8IXN0YXR1c1RleHQpe3N0YXR1c1RleHQ9ImVycm9yIjtpZihzdGF0dXM8MCl7c3RhdHVzPTA7fX19CmpxWEhSLnN0YXR1cz1zdGF0dXM7anFYSFIuc3RhdHVzVGV4dD0obmF0aXZlU3RhdHVzVGV4dHx8c3RhdHVzVGV4dCkrIiI7aWYoaXNTdWNjZXNzKXtkZWZlcnJlZC5yZXNvbHZlV2l0aChjYWxsYmFja0NvbnRleHQsW3N1Y2Nlc3Msc3RhdHVzVGV4dCxqcVhIUl0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoY2FsbGJhY2tDb250ZXh0LFtqcVhIUixzdGF0dXNUZXh0LGVycm9yXSk7fQpqcVhIUi5zdGF0dXNDb2RlKHN0YXR1c0NvZGUpO3N0YXR1c0NvZGU9dW5kZWZpbmVkO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcihpc1N1Y2Nlc3M/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbanFYSFIscyxpc1N1Y2Nlc3M/c3VjY2VzczplcnJvcl0pO30KY29tcGxldGVEZWZlcnJlZC5maXJlV2l0aChjYWxsYmFja0NvbnRleHQsW2pxWEhSLHN0YXR1c1RleHRdKTtpZihmaXJlR2xvYmFscyl7Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW2pxWEhSLHNdKTtpZighKC0talF1ZXJ5LmFjdGl2ZSkpe2pRdWVyeS5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpO319fQpyZXR1cm4ganFYSFI7fSxnZXRKU09OOmZ1bmN0aW9uKHVybCxkYXRhLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsZGF0YSxjYWxsYmFjaywianNvbiIpO30sZ2V0U2NyaXB0OmZ1bmN0aW9uKHVybCxjYWxsYmFjayl7cmV0dXJuIGpRdWVyeS5nZXQodXJsLHVuZGVmaW5lZCxjYWxsYmFjaywic2NyaXB0Iik7fX0pO2pRdWVyeS5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGksbWV0aG9kKXtqUXVlcnlbbWV0aG9kXT1mdW5jdGlvbih1cmwsZGF0YSxjYWxsYmFjayx0eXBlKXtpZihpc0Z1bmN0aW9uKGRhdGEpKXt0eXBlPXR5cGV8fGNhbGxiYWNrO2NhbGxiYWNrPWRhdGE7ZGF0YT11bmRlZmluZWQ7fQpyZXR1cm4galF1ZXJ5LmFqYXgoalF1ZXJ5LmV4dGVuZCh7dXJsOnVybCx0eXBlOm1ldGhvZCxkYXRhVHlwZTp0eXBlLGRhdGE6ZGF0YSxzdWNjZXNzOmNhbGxiYWNrfSxqUXVlcnkuaXNQbGFpbk9iamVjdCh1cmwpJiZ1cmwpKTt9O30pO2pRdWVyeS5fZXZhbFVybD1mdW5jdGlvbih1cmwpe3JldHVybiBqUXVlcnkuYWpheCh7dXJsOnVybCx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOnRydWUsYXN5bmM6ZmFsc2UsZ2xvYmFsOmZhbHNlLCJ0aHJvd3MiOnRydWV9KTt9O2pRdWVyeS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oaHRtbCl7dmFyIHdyYXA7aWYodGhpc1swXSl7aWYoaXNGdW5jdGlvbihodG1sKSl7aHRtbD1odG1sLmNhbGwodGhpc1swXSk7fQp3cmFwPWpRdWVyeShodG1sLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7aWYodGhpc1swXS5wYXJlbnROb2RlKXt3cmFwLmluc2VydEJlZm9yZSh0aGlzWzBdKTt9CndyYXAubWFwKGZ1bmN0aW9uKCl7dmFyIGVsZW09dGhpczt3aGlsZShlbGVtLmZpcnN0RWxlbWVudENoaWxkKXtlbGVtPWVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7fQpyZXR1cm4gZWxlbTt9KS5hcHBlbmQodGhpcyk7fQpyZXR1cm4gdGhpczt9LHdyYXBJbm5lcjpmdW5jdGlvbihodG1sKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeSh0aGlzKS53cmFwSW5uZXIoaHRtbC5jYWxsKHRoaXMsaSkpO30pO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxmPWpRdWVyeSh0aGlzKSxjb250ZW50cz1zZWxmLmNvbnRlbnRzKCk7aWYoY29udGVudHMubGVuZ3RoKXtjb250ZW50cy53cmFwQWxsKGh0bWwpO31lbHNle3NlbGYuYXBwZW5kKGh0bWwpO319KTt9LHdyYXA6ZnVuY3Rpb24oaHRtbCl7dmFyIGh0bWxJc0Z1bmN0aW9uPWlzRnVuY3Rpb24oaHRtbCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkodGhpcykud3JhcEFsbChodG1sSXNGdW5jdGlvbj9odG1sLmNhbGwodGhpcyxpKTpodG1sKTt9KTt9LHVud3JhcDpmdW5jdGlvbihzZWxlY3Rvcil7dGhpcy5wYXJlbnQoc2VsZWN0b3IpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKTt9KTtyZXR1cm4gdGhpczt9fSk7alF1ZXJ5LmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZShlbGVtKTt9O2pRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlbGVtKXtyZXR1cm4hIShlbGVtLm9mZnNldFdpZHRofHxlbGVtLm9mZnNldEhlaWdodHx8ZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7fTtqUXVlcnkuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO31jYXRjaChlKXt9fTt2YXIgeGhyU3VjY2Vzc1N0YXR1cz17MDoyMDAsMTIyMzoyMDR9LHhoclN1cHBvcnRlZD1qUXVlcnkuYWpheFNldHRpbmdzLnhocigpO3N1cHBvcnQuY29ycz0hIXhoclN1cHBvcnRlZCYmKCJ3aXRoQ3JlZGVudGlhbHMiaW4geGhyU3VwcG9ydGVkKTtzdXBwb3J0LmFqYXg9eGhyU3VwcG9ydGVkPSEheGhyU3VwcG9ydGVkO2pRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBjYWxsYmFjayxlcnJvckNhbGxiYWNrO2lmKHN1cHBvcnQuY29yc3x8eGhyU3VwcG9ydGVkJiYhb3B0aW9ucy5jcm9zc0RvbWFpbil7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaGVhZGVycyxjb21wbGV0ZSl7dmFyIGkseGhyPW9wdGlvbnMueGhyKCk7eGhyLm9wZW4ob3B0aW9ucy50eXBlLG9wdGlvbnMudXJsLG9wdGlvbnMuYXN5bmMsb3B0aW9ucy51c2VybmFtZSxvcHRpb25zLnBhc3N3b3JkKTtpZihvcHRpb25zLnhockZpZWxkcyl7Zm9yKGkgaW4gb3B0aW9ucy54aHJGaWVsZHMpe3hocltpXT1vcHRpb25zLnhockZpZWxkc1tpXTt9fQppZihvcHRpb25zLm1pbWVUeXBlJiZ4aHIub3ZlcnJpZGVNaW1lVHlwZSl7eGhyLm92ZXJyaWRlTWltZVR5cGUob3B0aW9ucy5taW1lVHlwZSk7fQppZighb3B0aW9ucy5jcm9zc0RvbWFpbiYmIWhlYWRlcnNbIlgtUmVxdWVzdGVkLVdpdGgiXSl7aGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCI7fQpmb3IoaSBpbiBoZWFkZXJzKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihpLGhlYWRlcnNbaV0pO30KY2FsbGJhY2s9ZnVuY3Rpb24odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrPWVycm9yQ2FsbGJhY2s9eGhyLm9ubG9hZD14aHIub25lcnJvcj14aHIub25hYm9ydD14aHIub250aW1lb3V0PXhoci5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtpZih0eXBlPT09ImFib3J0Iil7eGhyLmFib3J0KCk7fWVsc2UgaWYodHlwZT09PSJlcnJvciIpe2lmKHR5cGVvZiB4aHIuc3RhdHVzIT09Im51bWJlciIpe2NvbXBsZXRlKDAsImVycm9yIik7fWVsc2V7Y29tcGxldGUoeGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCk7fX1lbHNle2NvbXBsZXRlKHhoclN1Y2Nlc3NTdGF0dXNbeGhyLnN0YXR1c118fHhoci5zdGF0dXMseGhyLnN0YXR1c1RleHQsKHhoci5yZXNwb25zZVR5cGV8fCJ0ZXh0IikhPT0idGV4dCJ8fHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0IT09InN0cmluZyI/e2JpbmFyeTp4aHIucmVzcG9uc2V9Ont0ZXh0Onhoci5yZXNwb25zZVRleHR9LHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7fX19O307eGhyLm9ubG9hZD1jYWxsYmFjaygpO2Vycm9yQ2FsbGJhY2s9eGhyLm9uZXJyb3I9eGhyLm9udGltZW91dD1jYWxsYmFjaygiZXJyb3IiKTtpZih4aHIub25hYm9ydCE9PXVuZGVmaW5lZCl7eGhyLm9uYWJvcnQ9ZXJyb3JDYWxsYmFjazt9ZWxzZXt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeGhyLnJlYWR5U3RhdGU9PT00KXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGNhbGxiYWNrKXtlcnJvckNhbGxiYWNrKCk7fX0pO319O30KY2FsbGJhY2s9Y2FsbGJhY2soImFib3J0Iik7dHJ5e3hoci5zZW5kKG9wdGlvbnMuaGFzQ29udGVudCYmb3B0aW9ucy5kYXRhfHxudWxsKTt9Y2F0Y2goZSl7aWYoY2FsbGJhY2spe3Rocm93IGU7fX19LGFib3J0OmZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX19O319KTtqUXVlcnkuYWpheFByZWZpbHRlcihmdW5jdGlvbihzKXtpZihzLmNyb3NzRG9tYWluKXtzLmNvbnRlbnRzLnNjcmlwdD1mYWxzZTt9fSk7alF1ZXJ5LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIrImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbih0ZXh0KXtqUXVlcnkuZ2xvYmFsRXZhbCh0ZXh0KTtyZXR1cm4gdGV4dDt9fX0pO2pRdWVyeS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY2FjaGU9PT11bmRlZmluZWQpe3MuY2FjaGU9ZmFsc2U7fQppZihzLmNyb3NzRG9tYWluKXtzLnR5cGU9IkdFVCI7fX0pO2pRdWVyeS5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW4pe3ZhciBzY3JpcHQsY2FsbGJhY2s7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oXyxjb21wbGV0ZSl7c2NyaXB0PWpRdWVyeSgiPHNjcmlwdD4iKS5wcm9wKHtjaGFyc2V0OnMuc2NyaXB0Q2hhcnNldCxzcmM6cy51cmx9KS5vbigibG9hZCBlcnJvciIsY2FsbGJhY2s9ZnVuY3Rpb24oZXZ0KXtzY3JpcHQucmVtb3ZlKCk7Y2FsbGJhY2s9bnVsbDtpZihldnQpe2NvbXBsZXRlKGV2dC50eXBlPT09ImVycm9yIj80MDQ6MjAwLGV2dC50eXBlKTt9fSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRbMF0pO30sYWJvcnQ6ZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fX07fX0pO3ZhciBvbGRDYWxsYmFja3M9W10scmpzb25wPS8oPSlcPyg/PSZ8JCl8XD9cPy87alF1ZXJ5LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGNhbGxiYWNrPW9sZENhbGxiYWNrcy5wb3AoKXx8KGpRdWVyeS5leHBhbmRvKyJfIisobm9uY2UrKykpO3RoaXNbY2FsbGJhY2tdPXRydWU7cmV0dXJuIGNhbGxiYWNrO319KTtqUXVlcnkuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24ocyxvcmlnaW5hbFNldHRpbmdzLGpxWEhSKXt2YXIgY2FsbGJhY2tOYW1lLG92ZXJ3cml0dGVuLHJlc3BvbnNlQ29udGFpbmVyLGpzb25Qcm9wPXMuanNvbnAhPT1mYWxzZSYmKHJqc29ucC50ZXN0KHMudXJsKT8idXJsIjp0eXBlb2Ygcy5kYXRhPT09InN0cmluZyImJihzLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik9PT0wJiZyanNvbnAudGVzdChzLmRhdGEpJiYiZGF0YSIpO2lmKGpzb25Qcm9wfHxzLmRhdGFUeXBlc1swXT09PSJqc29ucCIpe2NhbGxiYWNrTmFtZT1zLmpzb25wQ2FsbGJhY2s9aXNGdW5jdGlvbihzLmpzb25wQ2FsbGJhY2spP3MuanNvbnBDYWxsYmFjaygpOnMuanNvbnBDYWxsYmFjaztpZihqc29uUHJvcCl7c1tqc29uUHJvcF09c1tqc29uUHJvcF0ucmVwbGFjZShyanNvbnAsIiQxIitjYWxsYmFja05hbWUpO31lbHNlIGlmKHMuanNvbnAhPT1mYWxzZSl7cy51cmwrPShycXVlcnkudGVzdChzLnVybCk/IiYiOiI/Iikrcy5qc29ucCsiPSIrY2FsbGJhY2tOYW1lO30Kcy5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7aWYoIXJlc3BvbnNlQ29udGFpbmVyKXtqUXVlcnkuZXJyb3IoY2FsbGJhY2tOYW1lKyIgd2FzIG5vdCBjYWxsZWQiKTt9CnJldHVybiByZXNwb25zZUNvbnRhaW5lclswXTt9O3MuZGF0YVR5cGVzWzBdPSJqc29uIjtvdmVyd3JpdHRlbj13aW5kb3dbY2FsbGJhY2tOYW1lXTt3aW5kb3dbY2FsbGJhY2tOYW1lXT1mdW5jdGlvbigpe3Jlc3BvbnNlQ29udGFpbmVyPWFyZ3VtZW50czt9O2pxWEhSLmFsd2F5cyhmdW5jdGlvbigpe2lmKG92ZXJ3cml0dGVuPT09dW5kZWZpbmVkKXtqUXVlcnkod2luZG93KS5yZW1vdmVQcm9wKGNhbGxiYWNrTmFtZSk7fWVsc2V7d2luZG93W2NhbGxiYWNrTmFtZV09b3ZlcndyaXR0ZW47fQppZihzW2NhbGxiYWNrTmFtZV0pe3MuanNvbnBDYWxsYmFjaz1vcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7b2xkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2tOYW1lKTt9CmlmKHJlc3BvbnNlQ29udGFpbmVyJiZpc0Z1bmN0aW9uKG92ZXJ3cml0dGVuKSl7b3ZlcndyaXR0ZW4ocmVzcG9uc2VDb250YWluZXJbMF0pO30KcmVzcG9uc2VDb250YWluZXI9b3ZlcndyaXR0ZW49dW5kZWZpbmVkO30pO3JldHVybiJzY3JpcHQiO319KTtzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudD0oZnVuY3Rpb24oKXt2YXIgYm9keT1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLmJvZHk7Ym9keS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IjtyZXR1cm4gYm9keS5jaGlsZE5vZGVzLmxlbmd0aD09PTI7fSkoKTtqUXVlcnkucGFyc2VIVE1MPWZ1bmN0aW9uKGRhdGEsY29udGV4dCxrZWVwU2NyaXB0cyl7aWYodHlwZW9mIGRhdGEhPT0ic3RyaW5nIil7cmV0dXJuW107fQppZih0eXBlb2YgY29udGV4dD09PSJib29sZWFuIil7a2VlcFNjcmlwdHM9Y29udGV4dDtjb250ZXh0PWZhbHNlO30KdmFyIGJhc2UscGFyc2VkLHNjcmlwdHM7aWYoIWNvbnRleHQpe2lmKHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50KXtjb250ZXh0PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7YmFzZT1jb250ZXh0LmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtiYXNlLmhyZWY9ZG9jdW1lbnQubG9jYXRpb24uaHJlZjtjb250ZXh0LmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7fWVsc2V7Y29udGV4dD1kb2N1bWVudDt9fQpwYXJzZWQ9cnNpbmdsZVRhZy5leGVjKGRhdGEpO3NjcmlwdHM9IWtlZXBTY3JpcHRzJiZbXTtpZihwYXJzZWQpe3JldHVybltjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV07fQpwYXJzZWQ9YnVpbGRGcmFnbWVudChbZGF0YV0sY29udGV4dCxzY3JpcHRzKTtpZihzY3JpcHRzJiZzY3JpcHRzLmxlbmd0aCl7alF1ZXJ5KHNjcmlwdHMpLnJlbW92ZSgpO30KcmV0dXJuIGpRdWVyeS5tZXJnZShbXSxwYXJzZWQuY2hpbGROb2Rlcyk7fTtqUXVlcnkuZm4ubG9hZD1mdW5jdGlvbih1cmwscGFyYW1zLGNhbGxiYWNrKXt2YXIgc2VsZWN0b3IsdHlwZSxyZXNwb25zZSxzZWxmPXRoaXMsb2ZmPXVybC5pbmRleE9mKCIgIik7aWYob2ZmPi0xKXtzZWxlY3Rvcj1zdHJpcEFuZENvbGxhcHNlKHVybC5zbGljZShvZmYpKTt1cmw9dXJsLnNsaWNlKDAsb2ZmKTt9CmlmKGlzRnVuY3Rpb24ocGFyYW1zKSl7Y2FsbGJhY2s9cGFyYW1zO3BhcmFtcz11bmRlZmluZWQ7fWVsc2UgaWYocGFyYW1zJiZ0eXBlb2YgcGFyYW1zPT09Im9iamVjdCIpe3R5cGU9IlBPU1QiO30KaWYoc2VsZi5sZW5ndGg+MCl7alF1ZXJ5LmFqYXgoe3VybDp1cmwsdHlwZTp0eXBlfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTpwYXJhbXN9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlVGV4dCl7cmVzcG9uc2U9YXJndW1lbnRzO3NlbGYuaHRtbChzZWxlY3Rvcj9qUXVlcnkoIjxkaXY+IikuYXBwZW5kKGpRdWVyeS5wYXJzZUhUTUwocmVzcG9uc2VUZXh0KSkuZmluZChzZWxlY3Rvcik6cmVzcG9uc2VUZXh0KTt9KS5hbHdheXMoY2FsbGJhY2smJmZ1bmN0aW9uKGpxWEhSLHN0YXR1cyl7c2VsZi5lYWNoKGZ1bmN0aW9uKCl7Y2FsbGJhY2suYXBwbHkodGhpcyxyZXNwb25zZXx8W2pxWEhSLnJlc3BvbnNlVGV4dCxzdGF0dXMsanFYSFJdKTt9KTt9KTt9CnJldHVybiB0aGlzO307alF1ZXJ5LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihpLHR5cGUpe2pRdWVyeS5mblt0eXBlXT1mdW5jdGlvbihmbil7cmV0dXJuIHRoaXMub24odHlwZSxmbik7fTt9KTtqUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGVsZW0pe3JldHVybiBqUXVlcnkuZ3JlcChqUXVlcnkudGltZXJzLGZ1bmN0aW9uKGZuKXtyZXR1cm4gZWxlbT09PWZuLmVsZW07fSkubGVuZ3RoO307alF1ZXJ5Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGVsZW0sb3B0aW9ucyxpKXt2YXIgY3VyUG9zaXRpb24sY3VyTGVmdCxjdXJDU1NUb3AsY3VyVG9wLGN1ck9mZnNldCxjdXJDU1NMZWZ0LGNhbGN1bGF0ZVBvc2l0aW9uLHBvc2l0aW9uPWpRdWVyeS5jc3MoZWxlbSwicG9zaXRpb24iKSxjdXJFbGVtPWpRdWVyeShlbGVtKSxwcm9wcz17fTtpZihwb3NpdGlvbj09PSJzdGF0aWMiKXtlbGVtLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7fQpjdXJPZmZzZXQ9Y3VyRWxlbS5vZmZzZXQoKTtjdXJDU1NUb3A9alF1ZXJ5LmNzcyhlbGVtLCJ0b3AiKTtjdXJDU1NMZWZ0PWpRdWVyeS5jc3MoZWxlbSwibGVmdCIpO2NhbGN1bGF0ZVBvc2l0aW9uPShwb3NpdGlvbj09PSJhYnNvbHV0ZSJ8fHBvc2l0aW9uPT09ImZpeGVkIikmJihjdXJDU1NUb3ArY3VyQ1NTTGVmdCkuaW5kZXhPZigiYXV0byIpPi0xO2lmKGNhbGN1bGF0ZVBvc2l0aW9uKXtjdXJQb3NpdGlvbj1jdXJFbGVtLnBvc2l0aW9uKCk7Y3VyVG9wPWN1clBvc2l0aW9uLnRvcDtjdXJMZWZ0PWN1clBvc2l0aW9uLmxlZnQ7fWVsc2V7Y3VyVG9wPXBhcnNlRmxvYXQoY3VyQ1NTVG9wKXx8MDtjdXJMZWZ0PXBhcnNlRmxvYXQoY3VyQ1NTTGVmdCl8fDA7fQppZihpc0Z1bmN0aW9uKG9wdGlvbnMpKXtvcHRpb25zPW9wdGlvbnMuY2FsbChlbGVtLGksalF1ZXJ5LmV4dGVuZCh7fSxjdXJPZmZzZXQpKTt9CmlmKG9wdGlvbnMudG9wIT1udWxsKXtwcm9wcy50b3A9KG9wdGlvbnMudG9wLWN1ck9mZnNldC50b3ApK2N1clRvcDt9CmlmKG9wdGlvbnMubGVmdCE9bnVsbCl7cHJvcHMubGVmdD0ob3B0aW9ucy5sZWZ0LWN1ck9mZnNldC5sZWZ0KStjdXJMZWZ0O30KaWYoInVzaW5nImluIG9wdGlvbnMpe29wdGlvbnMudXNpbmcuY2FsbChlbGVtLHByb3BzKTt9ZWxzZXtjdXJFbGVtLmNzcyhwcm9wcyk7fX19O2pRdWVyeS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihvcHRpb25zKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gb3B0aW9ucz09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkub2Zmc2V0LnNldE9mZnNldCh0aGlzLG9wdGlvbnMsaSk7fSk7fQp2YXIgcmVjdCx3aW4sZWxlbT10aGlzWzBdO2lmKCFlbGVtKXtyZXR1cm47fQppZighZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl7cmV0dXJue3RvcDowLGxlZnQ6MH07fQpyZWN0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7d2luPWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm57dG9wOnJlY3QudG9wK3dpbi5wYWdlWU9mZnNldCxsZWZ0OnJlY3QubGVmdCt3aW4ucGFnZVhPZmZzZXR9O30scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJuO30KdmFyIG9mZnNldFBhcmVudCxvZmZzZXQsZG9jLGVsZW09dGhpc1swXSxwYXJlbnRPZmZzZXQ9e3RvcDowLGxlZnQ6MH07aWYoalF1ZXJ5LmNzcyhlbGVtLCJwb3NpdGlvbiIpPT09ImZpeGVkIil7b2Zmc2V0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7fWVsc2V7b2Zmc2V0PXRoaXMub2Zmc2V0KCk7ZG9jPWVsZW0ub3duZXJEb2N1bWVudDtvZmZzZXRQYXJlbnQ9ZWxlbS5vZmZzZXRQYXJlbnR8fGRvYy5kb2N1bWVudEVsZW1lbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiYob2Zmc2V0UGFyZW50PT09ZG9jLmJvZHl8fG9mZnNldFBhcmVudD09PWRvYy5kb2N1bWVudEVsZW1lbnQpJiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7fQppZihvZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudCE9PWVsZW0mJm9mZnNldFBhcmVudC5ub2RlVHlwZT09PTEpe3BhcmVudE9mZnNldD1qUXVlcnkob2Zmc2V0UGFyZW50KS5vZmZzZXQoKTtwYXJlbnRPZmZzZXQudG9wKz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyVG9wV2lkdGgiLHRydWUpO3BhcmVudE9mZnNldC5sZWZ0Kz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyTGVmdFdpZHRoIix0cnVlKTt9fQpyZXR1cm57dG9wOm9mZnNldC50b3AtcGFyZW50T2Zmc2V0LnRvcC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpblRvcCIsdHJ1ZSksbGVmdDpvZmZzZXQubGVmdC1wYXJlbnRPZmZzZXQubGVmdC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpbkxlZnQiLHRydWUpfTt9LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBvZmZzZXRQYXJlbnQ9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDt9CnJldHVybiBvZmZzZXRQYXJlbnR8fGRvY3VtZW50RWxlbWVudDt9KTt9fSk7alF1ZXJ5LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24obWV0aG9kLHByb3Ape3ZhciB0b3A9InBhZ2VZT2Zmc2V0Ij09PXByb3A7alF1ZXJ5LmZuW21ldGhvZF09ZnVuY3Rpb24odmFsKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxtZXRob2QsdmFsKXt2YXIgd2luO2lmKGlzV2luZG93KGVsZW0pKXt3aW49ZWxlbTt9ZWxzZSBpZihlbGVtLm5vZGVUeXBlPT09OSl7d2luPWVsZW0uZGVmYXVsdFZpZXc7fQppZih2YWw9PT11bmRlZmluZWQpe3JldHVybiB3aW4/d2luW3Byb3BdOmVsZW1bbWV0aG9kXTt9CmlmKHdpbil7d2luLnNjcm9sbFRvKCF0b3A/dmFsOndpbi5wYWdlWE9mZnNldCx0b3A/dmFsOndpbi5wYWdlWU9mZnNldCk7fWVsc2V7ZWxlbVttZXRob2RdPXZhbDt9fSxtZXRob2QsdmFsLGFyZ3VtZW50cy5sZW5ndGgpO307fSk7alF1ZXJ5LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oaSxwcm9wKXtqUXVlcnkuY3NzSG9va3NbcHJvcF09YWRkR2V0SG9va0lmKHN1cHBvcnQucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7Y29tcHV0ZWQ9Y3VyQ1NTKGVsZW0scHJvcCk7cmV0dXJuIHJudW1ub25weC50ZXN0KGNvbXB1dGVkKT9qUXVlcnkoZWxlbSkucG9zaXRpb24oKVtwcm9wXSsicHgiOmNvbXB1dGVkO319KTt9KTtqUXVlcnkuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG5hbWUsdHlwZSl7alF1ZXJ5LmVhY2goe3BhZGRpbmc6ImlubmVyIituYW1lLGNvbnRlbnQ6dHlwZSwiIjoib3V0ZXIiK25hbWV9LGZ1bmN0aW9uKGRlZmF1bHRFeHRyYSxmdW5jTmFtZSl7alF1ZXJ5LmZuW2Z1bmNOYW1lXT1mdW5jdGlvbihtYXJnaW4sdmFsdWUpe3ZhciBjaGFpbmFibGU9YXJndW1lbnRzLmxlbmd0aCYmKGRlZmF1bHRFeHRyYXx8dHlwZW9mIG1hcmdpbiE9PSJib29sZWFuIiksZXh0cmE9ZGVmYXVsdEV4dHJhfHwobWFyZ2luPT09dHJ1ZXx8dmFsdWU9PT10cnVlPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSx0eXBlLHZhbHVlKXt2YXIgZG9jO2lmKGlzV2luZG93KGVsZW0pKXtyZXR1cm4gZnVuY05hbWUuaW5kZXhPZigib3V0ZXIiKT09PTA/ZWxlbVsiaW5uZXIiK25hbWVdOmVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK25hbWVdO30KaWYoZWxlbS5ub2RlVHlwZT09PTkpe2RvYz1lbGVtLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gTWF0aC5tYXgoZWxlbS5ib2R5WyJzY3JvbGwiK25hbWVdLGRvY1sic2Nyb2xsIituYW1lXSxlbGVtLmJvZHlbIm9mZnNldCIrbmFtZV0sZG9jWyJvZmZzZXQiK25hbWVdLGRvY1siY2xpZW50IituYW1lXSk7fQpyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LmNzcyhlbGVtLHR5cGUsZXh0cmEpOmpRdWVyeS5zdHlsZShlbGVtLHR5cGUsdmFsdWUsZXh0cmEpO30sdHlwZSxjaGFpbmFibGU/bWFyZ2luOnVuZGVmaW5lZCxjaGFpbmFibGUpO307fSk7fSk7alF1ZXJ5LmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG5hbWUpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihkYXRhLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24obmFtZSxudWxsLGRhdGEsZm4pOnRoaXMudHJpZ2dlcihuYW1lKTt9O30pO2pRdWVyeS5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGZuT3Zlcixmbk91dCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihmbk92ZXIpLm1vdXNlbGVhdmUoZm5PdXR8fGZuT3Zlcik7fX0pO2pRdWVyeS5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24odHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsbnVsbCxkYXRhLGZuKTt9LHVuYmluZDpmdW5jdGlvbih0eXBlcyxmbil7cmV0dXJuIHRoaXMub2ZmKHR5cGVzLG51bGwsZm4pO30sZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoc2VsZWN0b3IsIioqIik6dGhpcy5vZmYodHlwZXMsc2VsZWN0b3J8fCIqKiIsZm4pO319KTtqUXVlcnkucHJveHk9ZnVuY3Rpb24oZm4sY29udGV4dCl7dmFyIHRtcCxhcmdzLHByb3h5O2lmKHR5cGVvZiBjb250ZXh0PT09InN0cmluZyIpe3RtcD1mbltjb250ZXh0XTtjb250ZXh0PWZuO2ZuPXRtcDt9CmlmKCFpc0Z1bmN0aW9uKGZuKSl7cmV0dXJuIHVuZGVmaW5lZDt9CmFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMsMik7cHJveHk9ZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkoY29udGV4dHx8dGhpcyxhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTt9O3Byb3h5Lmd1aWQ9Zm4uZ3VpZD1mbi5ndWlkfHxqUXVlcnkuZ3VpZCsrO3JldHVybiBwcm94eTt9O2pRdWVyeS5ob2xkUmVhZHk9ZnVuY3Rpb24oaG9sZCl7aWYoaG9sZCl7alF1ZXJ5LnJlYWR5V2FpdCsrO31lbHNle2pRdWVyeS5yZWFkeSh0cnVlKTt9fTtqUXVlcnkuaXNBcnJheT1BcnJheS5pc0FycmF5O2pRdWVyeS5wYXJzZUpTT049SlNPTi5wYXJzZTtqUXVlcnkubm9kZU5hbWU9bm9kZU5hbWU7alF1ZXJ5LmlzRnVuY3Rpb249aXNGdW5jdGlvbjtqUXVlcnkuaXNXaW5kb3c9aXNXaW5kb3c7alF1ZXJ5LmNhbWVsQ2FzZT1jYW1lbENhc2U7alF1ZXJ5LnR5cGU9dG9UeXBlO2pRdWVyeS5ub3c9RGF0ZS5ub3c7alF1ZXJ5LmlzTnVtZXJpYz1mdW5jdGlvbihvYmope3ZhciB0eXBlPWpRdWVyeS50eXBlKG9iaik7cmV0dXJuKHR5cGU9PT0ibnVtYmVyInx8dHlwZT09PSJzdHJpbmciKSYmIWlzTmFOKG9iai1wYXJzZUZsb2F0KG9iaikpO307aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBqUXVlcnk7fSk7fQp2YXIKX2pRdWVyeT13aW5kb3cualF1ZXJ5LF8kPXdpbmRvdy4kO2pRdWVyeS5ub0NvbmZsaWN0PWZ1bmN0aW9uKGRlZXApe2lmKHdpbmRvdy4kPT09alF1ZXJ5KXt3aW5kb3cuJD1fJDt9CmlmKGRlZXAmJndpbmRvdy5qUXVlcnk9PT1qUXVlcnkpe3dpbmRvdy5qUXVlcnk9X2pRdWVyeTt9CnJldHVybiBqUXVlcnk7fTtpZighbm9HbG9iYWwpe3dpbmRvdy5qUXVlcnk9d2luZG93LiQ9alF1ZXJ5O30KcmV0dXJuIGpRdWVyeTt9KTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5LnVpL2pxdWVyeS11aS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGZhY3Rvcnkpe2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoWyJqcXVlcnkiXSxmYWN0b3J5KTt9ZWxzZXtmYWN0b3J5KGpRdWVyeSk7fX0oZnVuY3Rpb24oJCl7JC51aT0kLnVpfHx7fTt2YXIgdmVyc2lvbj0kLnVpLnZlcnNpb249IjEuMTIuMSI7dmFyIHdpZGdldFV1aWQ9MDt2YXIgd2lkZ2V0U2xpY2U9QXJyYXkucHJvdG90eXBlLnNsaWNlOyQuY2xlYW5EYXRhPShmdW5jdGlvbihvcmlnKXtyZXR1cm4gZnVuY3Rpb24oZWxlbXMpe3ZhciBldmVudHMsZWxlbSxpO2ZvcihpPTA7KGVsZW09ZWxlbXNbaV0pIT1udWxsO2krKyl7dHJ5e2V2ZW50cz0kLl9kYXRhKGVsZW0sImV2ZW50cyIpO2lmKGV2ZW50cyYmZXZlbnRzLnJlbW92ZSl7JChlbGVtKS50cmlnZ2VySGFuZGxlcigicmVtb3ZlIik7fX1jYXRjaChlKXt9fQpvcmlnKGVsZW1zKTt9O30pKCQuY2xlYW5EYXRhKTskLndpZGdldD1mdW5jdGlvbihuYW1lLGJhc2UscHJvdG90eXBlKXt2YXIgZXhpc3RpbmdDb25zdHJ1Y3Rvcixjb25zdHJ1Y3RvcixiYXNlUHJvdG90eXBlO3ZhciBwcm94aWVkUHJvdG90eXBlPXt9O3ZhciBuYW1lc3BhY2U9bmFtZS5zcGxpdCgiLiIpWzBdO25hbWU9bmFtZS5zcGxpdCgiLiIpWzFdO3ZhciBmdWxsTmFtZT1uYW1lc3BhY2UrIi0iK25hbWU7aWYoIXByb3RvdHlwZSl7cHJvdG90eXBlPWJhc2U7YmFzZT0kLldpZGdldDt9CmlmKCQuaXNBcnJheShwcm90b3R5cGUpKXtwcm90b3R5cGU9JC5leHRlbmQuYXBwbHkobnVsbCxbe31dLmNvbmNhdChwcm90b3R5cGUpKTt9CiQuZXhwclsiOiJdW2Z1bGxOYW1lLnRvTG93ZXJDYXNlKCldPWZ1bmN0aW9uKGVsZW0pe3JldHVybiEhJC5kYXRhKGVsZW0sZnVsbE5hbWUpO307JFtuYW1lc3BhY2VdPSRbbmFtZXNwYWNlXXx8e307ZXhpc3RpbmdDb25zdHJ1Y3Rvcj0kW25hbWVzcGFjZV1bbmFtZV07Y29uc3RydWN0b3I9JFtuYW1lc3BhY2VdW25hbWVdPWZ1bmN0aW9uKG9wdGlvbnMsZWxlbWVudCl7aWYoIXRoaXMuX2NyZWF0ZVdpZGdldCl7cmV0dXJuIG5ldyBjb25zdHJ1Y3RvcihvcHRpb25zLGVsZW1lbnQpO30KaWYoYXJndW1lbnRzLmxlbmd0aCl7dGhpcy5fY3JlYXRlV2lkZ2V0KG9wdGlvbnMsZWxlbWVudCk7fX07JC5leHRlbmQoY29uc3RydWN0b3IsZXhpc3RpbmdDb25zdHJ1Y3Rvcix7dmVyc2lvbjpwcm90b3R5cGUudmVyc2lvbixfcHJvdG86JC5leHRlbmQoe30scHJvdG90eXBlKSxfY2hpbGRDb25zdHJ1Y3RvcnM6W119KTtiYXNlUHJvdG90eXBlPW5ldyBiYXNlKCk7YmFzZVByb3RvdHlwZS5vcHRpb25zPSQud2lkZ2V0LmV4dGVuZCh7fSxiYXNlUHJvdG90eXBlLm9wdGlvbnMpOyQuZWFjaChwcm90b3R5cGUsZnVuY3Rpb24ocHJvcCx2YWx1ZSl7aWYoISQuaXNGdW5jdGlvbih2YWx1ZSkpe3Byb3hpZWRQcm90b3R5cGVbcHJvcF09dmFsdWU7cmV0dXJuO30KcHJveGllZFByb3RvdHlwZVtwcm9wXT0oZnVuY3Rpb24oKXtmdW5jdGlvbiBfc3VwZXIoKXtyZXR1cm4gYmFzZS5wcm90b3R5cGVbcHJvcF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO30KZnVuY3Rpb24gX3N1cGVyQXBwbHkoYXJncyl7cmV0dXJuIGJhc2UucHJvdG90eXBlW3Byb3BdLmFwcGx5KHRoaXMsYXJncyk7fQpyZXR1cm4gZnVuY3Rpb24oKXt2YXIgX19zdXBlcj10aGlzLl9zdXBlcjt2YXIgX19zdXBlckFwcGx5PXRoaXMuX3N1cGVyQXBwbHk7dmFyIHJldHVyblZhbHVlO3RoaXMuX3N1cGVyPV9zdXBlcjt0aGlzLl9zdXBlckFwcGx5PV9zdXBlckFwcGx5O3JldHVyblZhbHVlPXZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9zdXBlcj1fX3N1cGVyO3RoaXMuX3N1cGVyQXBwbHk9X19zdXBlckFwcGx5O3JldHVybiByZXR1cm5WYWx1ZTt9O30pKCk7fSk7Y29uc3RydWN0b3IucHJvdG90eXBlPSQud2lkZ2V0LmV4dGVuZChiYXNlUHJvdG90eXBlLHt3aWRnZXRFdmVudFByZWZpeDpleGlzdGluZ0NvbnN0cnVjdG9yPyhiYXNlUHJvdG90eXBlLndpZGdldEV2ZW50UHJlZml4fHxuYW1lKTpuYW1lfSxwcm94aWVkUHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjpjb25zdHJ1Y3RvcixuYW1lc3BhY2U6bmFtZXNwYWNlLHdpZGdldE5hbWU6bmFtZSx3aWRnZXRGdWxsTmFtZTpmdWxsTmFtZX0pO2lmKGV4aXN0aW5nQ29uc3RydWN0b3IpeyQuZWFjaChleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycyxmdW5jdGlvbihpLGNoaWxkKXt2YXIgY2hpbGRQcm90b3R5cGU9Y2hpbGQucHJvdG90eXBlOyQud2lkZ2V0KGNoaWxkUHJvdG90eXBlLm5hbWVzcGFjZSsiLiIrY2hpbGRQcm90b3R5cGUud2lkZ2V0TmFtZSxjb25zdHJ1Y3RvcixjaGlsZC5fcHJvdG8pO30pO2RlbGV0ZSBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9yczt9ZWxzZXtiYXNlLl9jaGlsZENvbnN0cnVjdG9ycy5wdXNoKGNvbnN0cnVjdG9yKTt9CiQud2lkZ2V0LmJyaWRnZShuYW1lLGNvbnN0cnVjdG9yKTtyZXR1cm4gY29uc3RydWN0b3I7fTskLndpZGdldC5leHRlbmQ9ZnVuY3Rpb24odGFyZ2V0KXt2YXIgaW5wdXQ9d2lkZ2V0U2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dmFyIGlucHV0SW5kZXg9MDt2YXIgaW5wdXRMZW5ndGg9aW5wdXQubGVuZ3RoO3ZhciBrZXk7dmFyIHZhbHVlO2Zvcig7aW5wdXRJbmRleDxpbnB1dExlbmd0aDtpbnB1dEluZGV4Kyspe2ZvcihrZXkgaW4gaW5wdXRbaW5wdXRJbmRleF0pe3ZhbHVlPWlucHV0W2lucHV0SW5kZXhdW2tleV07aWYoaW5wdXRbaW5wdXRJbmRleF0uaGFzT3duUHJvcGVydHkoa2V5KSYmdmFsdWUhPT11bmRlZmluZWQpe2lmKCQuaXNQbGFpbk9iamVjdCh2YWx1ZSkpe3RhcmdldFtrZXldPSQuaXNQbGFpbk9iamVjdCh0YXJnZXRba2V5XSk/JC53aWRnZXQuZXh0ZW5kKHt9LHRhcmdldFtrZXldLHZhbHVlKTokLndpZGdldC5leHRlbmQoe30sdmFsdWUpO31lbHNle3RhcmdldFtrZXldPXZhbHVlO319fX0KcmV0dXJuIHRhcmdldDt9OyQud2lkZ2V0LmJyaWRnZT1mdW5jdGlvbihuYW1lLG9iamVjdCl7dmFyIGZ1bGxOYW1lPW9iamVjdC5wcm90b3R5cGUud2lkZ2V0RnVsbE5hbWV8fG5hbWU7JC5mbltuYW1lXT1mdW5jdGlvbihvcHRpb25zKXt2YXIgaXNNZXRob2RDYWxsPXR5cGVvZiBvcHRpb25zPT09InN0cmluZyI7dmFyIGFyZ3M9d2lkZ2V0U2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dmFyIHJldHVyblZhbHVlPXRoaXM7aWYoaXNNZXRob2RDYWxsKXtpZighdGhpcy5sZW5ndGgmJm9wdGlvbnM9PT0iaW5zdGFuY2UiKXtyZXR1cm5WYWx1ZT11bmRlZmluZWQ7fWVsc2V7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG1ldGhvZFZhbHVlO3ZhciBpbnN0YW5jZT0kLmRhdGEodGhpcyxmdWxsTmFtZSk7aWYob3B0aW9ucz09PSJpbnN0YW5jZSIpe3JldHVyblZhbHVlPWluc3RhbmNlO3JldHVybiBmYWxzZTt9CmlmKCFpbnN0YW5jZSl7cmV0dXJuICQuZXJyb3IoImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gIituYW1lKyIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247ICIrImF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnIitvcHRpb25zKyInIik7fQppZighJC5pc0Z1bmN0aW9uKGluc3RhbmNlW29wdGlvbnNdKXx8b3B0aW9ucy5jaGFyQXQoMCk9PT0iXyIpe3JldHVybiAkLmVycm9yKCJubyBzdWNoIG1ldGhvZCAnIitvcHRpb25zKyInIGZvciAiK25hbWUrIiB3aWRnZXQgaW5zdGFuY2UiKTt9Cm1ldGhvZFZhbHVlPWluc3RhbmNlW29wdGlvbnNdLmFwcGx5KGluc3RhbmNlLGFyZ3MpO2lmKG1ldGhvZFZhbHVlIT09aW5zdGFuY2UmJm1ldGhvZFZhbHVlIT09dW5kZWZpbmVkKXtyZXR1cm5WYWx1ZT1tZXRob2RWYWx1ZSYmbWV0aG9kVmFsdWUuanF1ZXJ5P3JldHVyblZhbHVlLnB1c2hTdGFjayhtZXRob2RWYWx1ZS5nZXQoKSk6bWV0aG9kVmFsdWU7cmV0dXJuIGZhbHNlO319KTt9fWVsc2V7aWYoYXJncy5sZW5ndGgpe29wdGlvbnM9JC53aWRnZXQuZXh0ZW5kLmFwcGx5KG51bGwsW29wdGlvbnNdLmNvbmNhdChhcmdzKSk7fQp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaW5zdGFuY2U9JC5kYXRhKHRoaXMsZnVsbE5hbWUpO2lmKGluc3RhbmNlKXtpbnN0YW5jZS5vcHRpb24ob3B0aW9uc3x8e30pO2lmKGluc3RhbmNlLl9pbml0KXtpbnN0YW5jZS5faW5pdCgpO319ZWxzZXskLmRhdGEodGhpcyxmdWxsTmFtZSxuZXcgb2JqZWN0KG9wdGlvbnMsdGhpcykpO319KTt9CnJldHVybiByZXR1cm5WYWx1ZTt9O307JC5XaWRnZXQ9ZnVuY3Rpb24oKXt9OyQuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycz1bXTskLldpZGdldC5wcm90b3R5cGU9e3dpZGdldE5hbWU6IndpZGdldCIsd2lkZ2V0RXZlbnRQcmVmaXg6IiIsZGVmYXVsdEVsZW1lbnQ6IjxkaXY+IixvcHRpb25zOntjbGFzc2VzOnt9LGRpc2FibGVkOmZhbHNlLGNyZWF0ZTpudWxsfSxfY3JlYXRlV2lkZ2V0OmZ1bmN0aW9uKG9wdGlvbnMsZWxlbWVudCl7ZWxlbWVudD0kKGVsZW1lbnR8fHRoaXMuZGVmYXVsdEVsZW1lbnR8fHRoaXMpWzBdO3RoaXMuZWxlbWVudD0kKGVsZW1lbnQpO3RoaXMudXVpZD13aWRnZXRVdWlkKys7dGhpcy5ldmVudE5hbWVzcGFjZT0iLiIrdGhpcy53aWRnZXROYW1lK3RoaXMudXVpZDt0aGlzLmJpbmRpbmdzPSQoKTt0aGlzLmhvdmVyYWJsZT0kKCk7dGhpcy5mb2N1c2FibGU9JCgpO3RoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXA9e307aWYoZWxlbWVudCE9PXRoaXMpeyQuZGF0YShlbGVtZW50LHRoaXMud2lkZ2V0RnVsbE5hbWUsdGhpcyk7dGhpcy5fb24odHJ1ZSx0aGlzLmVsZW1lbnQse3JlbW92ZTpmdW5jdGlvbihldmVudCl7aWYoZXZlbnQudGFyZ2V0PT09ZWxlbWVudCl7dGhpcy5kZXN0cm95KCk7fX19KTt0aGlzLmRvY3VtZW50PSQoZWxlbWVudC5zdHlsZT9lbGVtZW50Lm93bmVyRG9jdW1lbnQ6ZWxlbWVudC5kb2N1bWVudHx8ZWxlbWVudCk7dGhpcy53aW5kb3c9JCh0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3fHx0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdyk7fQp0aGlzLm9wdGlvbnM9JC53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyx0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksb3B0aW9ucyk7dGhpcy5fY3JlYXRlKCk7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkKXt0aGlzLl9zZXRPcHRpb25EaXNhYmxlZCh0aGlzLm9wdGlvbnMuZGlzYWJsZWQpO30KdGhpcy5fdHJpZ2dlcigiY3JlYXRlIixudWxsLHRoaXMuX2dldENyZWF0ZUV2ZW50RGF0YSgpKTt0aGlzLl9pbml0KCk7fSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3JldHVybnt9O30sX2dldENyZWF0ZUV2ZW50RGF0YTokLm5vb3AsX2NyZWF0ZTokLm5vb3AsX2luaXQ6JC5ub29wLGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzO3RoaXMuX2Rlc3Ryb3koKTskLmVhY2godGhpcy5jbGFzc2VzRWxlbWVudExvb2t1cCxmdW5jdGlvbihrZXksdmFsdWUpe3RoYXQuX3JlbW92ZUNsYXNzKHZhbHVlLGtleSk7fSk7dGhpcy5lbGVtZW50Lm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0RnVsbE5hbWUpO3RoaXMud2lkZ2V0KCkub2ZmKHRoaXMuZXZlbnROYW1lc3BhY2UpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKTt0aGlzLmJpbmRpbmdzLm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKTt9LF9kZXN0cm95OiQubm9vcCx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50O30sb3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dmFyIG9wdGlvbnM9a2V5O3ZhciBwYXJ0czt2YXIgY3VyT3B0aW9uO3ZhciBpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyk7fQppZih0eXBlb2Yga2V5PT09InN0cmluZyIpe29wdGlvbnM9e307cGFydHM9a2V5LnNwbGl0KCIuIik7a2V5PXBhcnRzLnNoaWZ0KCk7aWYocGFydHMubGVuZ3RoKXtjdXJPcHRpb249b3B0aW9uc1trZXldPSQud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnNba2V5XSk7Zm9yKGk9MDtpPHBhcnRzLmxlbmd0aC0xO2krKyl7Y3VyT3B0aW9uW3BhcnRzW2ldXT1jdXJPcHRpb25bcGFydHNbaV1dfHx7fTtjdXJPcHRpb249Y3VyT3B0aW9uW3BhcnRzW2ldXTt9CmtleT1wYXJ0cy5wb3AoKTtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIGN1ck9wdGlvbltrZXldPT09dW5kZWZpbmVkP251bGw6Y3VyT3B0aW9uW2tleV07fQpjdXJPcHRpb25ba2V5XT12YWx1ZTt9ZWxzZXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIHRoaXMub3B0aW9uc1trZXldPT09dW5kZWZpbmVkP251bGw6dGhpcy5vcHRpb25zW2tleV07fQpvcHRpb25zW2tleV09dmFsdWU7fX0KdGhpcy5fc2V0T3B0aW9ucyhvcHRpb25zKTtyZXR1cm4gdGhpczt9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBrZXk7Zm9yKGtleSBpbiBvcHRpb25zKXt0aGlzLl9zZXRPcHRpb24oa2V5LG9wdGlvbnNba2V5XSk7fQpyZXR1cm4gdGhpczt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihrZXk9PT0iY2xhc3NlcyIpe3RoaXMuX3NldE9wdGlvbkNsYXNzZXModmFsdWUpO30KdGhpcy5vcHRpb25zW2tleV09dmFsdWU7aWYoa2V5PT09ImRpc2FibGVkIil7dGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQodmFsdWUpO30KcmV0dXJuIHRoaXM7fSxfc2V0T3B0aW9uQ2xhc3NlczpmdW5jdGlvbih2YWx1ZSl7dmFyIGNsYXNzS2V5LGVsZW1lbnRzLGN1cnJlbnRFbGVtZW50cztmb3IoY2xhc3NLZXkgaW4gdmFsdWUpe2N1cnJlbnRFbGVtZW50cz10aGlzLmNsYXNzZXNFbGVtZW50TG9va3VwW2NsYXNzS2V5XTtpZih2YWx1ZVtjbGFzc0tleV09PT10aGlzLm9wdGlvbnMuY2xhc3Nlc1tjbGFzc0tleV18fCFjdXJyZW50RWxlbWVudHN8fCFjdXJyZW50RWxlbWVudHMubGVuZ3RoKXtjb250aW51ZTt9CmVsZW1lbnRzPSQoY3VycmVudEVsZW1lbnRzLmdldCgpKTt0aGlzLl9yZW1vdmVDbGFzcyhjdXJyZW50RWxlbWVudHMsY2xhc3NLZXkpO2VsZW1lbnRzLmFkZENsYXNzKHRoaXMuX2NsYXNzZXMoe2VsZW1lbnQ6ZWxlbWVudHMsa2V5czpjbGFzc0tleSxjbGFzc2VzOnZhbHVlLGFkZDp0cnVlfSkpO319LF9zZXRPcHRpb25EaXNhYmxlZDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5fdG9nZ2xlQ2xhc3ModGhpcy53aWRnZXQoKSx0aGlzLndpZGdldEZ1bGxOYW1lKyItZGlzYWJsZWQiLG51bGwsISF2YWx1ZSk7aWYodmFsdWUpe3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaG92ZXJhYmxlLG51bGwsInVpLXN0YXRlLWhvdmVyIik7dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5mb2N1c2FibGUsbnVsbCwidWktc3RhdGUtZm9jdXMiKTt9fSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7ZGlzYWJsZWQ6ZmFsc2V9KTt9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7ZGlzYWJsZWQ6dHJ1ZX0pO30sX2NsYXNzZXM6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGZ1bGw9W107dmFyIHRoYXQ9dGhpcztvcHRpb25zPSQuZXh0ZW5kKHtlbGVtZW50OnRoaXMuZWxlbWVudCxjbGFzc2VzOnRoaXMub3B0aW9ucy5jbGFzc2VzfHx7fX0sb3B0aW9ucyk7ZnVuY3Rpb24gcHJvY2Vzc0NsYXNzU3RyaW5nKGNsYXNzZXMsY2hlY2tPcHRpb24pe3ZhciBjdXJyZW50LGk7Zm9yKGk9MDtpPGNsYXNzZXMubGVuZ3RoO2krKyl7Y3VycmVudD10aGF0LmNsYXNzZXNFbGVtZW50TG9va3VwW2NsYXNzZXNbaV1dfHwkKCk7aWYob3B0aW9ucy5hZGQpe2N1cnJlbnQ9JCgkLnVuaXF1ZShjdXJyZW50LmdldCgpLmNvbmNhdChvcHRpb25zLmVsZW1lbnQuZ2V0KCkpKSk7fWVsc2V7Y3VycmVudD0kKGN1cnJlbnQubm90KG9wdGlvbnMuZWxlbWVudCkuZ2V0KCkpO30KdGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFtjbGFzc2VzW2ldXT1jdXJyZW50O2Z1bGwucHVzaChjbGFzc2VzW2ldKTtpZihjaGVja09wdGlvbiYmb3B0aW9ucy5jbGFzc2VzW2NsYXNzZXNbaV1dKXtmdWxsLnB1c2gob3B0aW9ucy5jbGFzc2VzW2NsYXNzZXNbaV1dKTt9fX0KdGhpcy5fb24ob3B0aW9ucy5lbGVtZW50LHsicmVtb3ZlIjoiX3VudHJhY2tDbGFzc2VzRWxlbWVudCJ9KTtpZihvcHRpb25zLmtleXMpe3Byb2Nlc3NDbGFzc1N0cmluZyhvcHRpb25zLmtleXMubWF0Y2goL1xTKy9nKXx8W10sdHJ1ZSk7fQppZihvcHRpb25zLmV4dHJhKXtwcm9jZXNzQ2xhc3NTdHJpbmcob3B0aW9ucy5leHRyYS5tYXRjaCgvXFMrL2cpfHxbXSk7fQpyZXR1cm4gZnVsbC5qb2luKCIgIik7fSxfdW50cmFja0NsYXNzZXNFbGVtZW50OmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGhhdD10aGlzOyQuZWFjaCh0aGF0LmNsYXNzZXNFbGVtZW50TG9va3VwLGZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYoJC5pbkFycmF5KGV2ZW50LnRhcmdldCx2YWx1ZSkhPT0tMSl7dGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFtrZXldPSQodmFsdWUubm90KGV2ZW50LnRhcmdldCkuZ2V0KCkpO319KTt9LF9yZW1vdmVDbGFzczpmdW5jdGlvbihlbGVtZW50LGtleXMsZXh0cmEpe3JldHVybiB0aGlzLl90b2dnbGVDbGFzcyhlbGVtZW50LGtleXMsZXh0cmEsZmFsc2UpO30sX2FkZENsYXNzOmZ1bmN0aW9uKGVsZW1lbnQsa2V5cyxleHRyYSl7cmV0dXJuIHRoaXMuX3RvZ2dsZUNsYXNzKGVsZW1lbnQsa2V5cyxleHRyYSx0cnVlKTt9LF90b2dnbGVDbGFzczpmdW5jdGlvbihlbGVtZW50LGtleXMsZXh0cmEsYWRkKXthZGQ9KHR5cGVvZiBhZGQ9PT0iYm9vbGVhbiIpP2FkZDpleHRyYTt2YXIgc2hpZnQ9KHR5cGVvZiBlbGVtZW50PT09InN0cmluZyJ8fGVsZW1lbnQ9PT1udWxsKSxvcHRpb25zPXtleHRyYTpzaGlmdD9rZXlzOmV4dHJhLGtleXM6c2hpZnQ/ZWxlbWVudDprZXlzLGVsZW1lbnQ6c2hpZnQ/dGhpcy5lbGVtZW50OmVsZW1lbnQsYWRkOmFkZH07b3B0aW9ucy5lbGVtZW50LnRvZ2dsZUNsYXNzKHRoaXMuX2NsYXNzZXMob3B0aW9ucyksYWRkKTtyZXR1cm4gdGhpczt9LF9vbjpmdW5jdGlvbihzdXBwcmVzc0Rpc2FibGVkQ2hlY2ssZWxlbWVudCxoYW5kbGVycyl7dmFyIGRlbGVnYXRlRWxlbWVudDt2YXIgaW5zdGFuY2U9dGhpcztpZih0eXBlb2Ygc3VwcHJlc3NEaXNhYmxlZENoZWNrIT09ImJvb2xlYW4iKXtoYW5kbGVycz1lbGVtZW50O2VsZW1lbnQ9c3VwcHJlc3NEaXNhYmxlZENoZWNrO3N1cHByZXNzRGlzYWJsZWRDaGVjaz1mYWxzZTt9CmlmKCFoYW5kbGVycyl7aGFuZGxlcnM9ZWxlbWVudDtlbGVtZW50PXRoaXMuZWxlbWVudDtkZWxlZ2F0ZUVsZW1lbnQ9dGhpcy53aWRnZXQoKTt9ZWxzZXtlbGVtZW50PWRlbGVnYXRlRWxlbWVudD0kKGVsZW1lbnQpO3RoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5ncy5hZGQoZWxlbWVudCk7fQokLmVhY2goaGFuZGxlcnMsZnVuY3Rpb24oZXZlbnQsaGFuZGxlcil7ZnVuY3Rpb24gaGFuZGxlclByb3h5KCl7aWYoIXN1cHByZXNzRGlzYWJsZWRDaGVjayYmKGluc3RhbmNlLm9wdGlvbnMuZGlzYWJsZWQ9PT10cnVlfHwkKHRoaXMpLmhhc0NsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpKSl7cmV0dXJuO30KcmV0dXJuKHR5cGVvZiBoYW5kbGVyPT09InN0cmluZyI/aW5zdGFuY2VbaGFuZGxlcl06aGFuZGxlcikuYXBwbHkoaW5zdGFuY2UsYXJndW1lbnRzKTt9CmlmKHR5cGVvZiBoYW5kbGVyIT09InN0cmluZyIpe2hhbmRsZXJQcm94eS5ndWlkPWhhbmRsZXIuZ3VpZD1oYW5kbGVyLmd1aWR8fGhhbmRsZXJQcm94eS5ndWlkfHwkLmd1aWQrKzt9CnZhciBtYXRjaD1ldmVudC5tYXRjaCgvXihbXHc6LV0qKVxzKiguKikkLyk7dmFyIGV2ZW50TmFtZT1tYXRjaFsxXStpbnN0YW5jZS5ldmVudE5hbWVzcGFjZTt2YXIgc2VsZWN0b3I9bWF0Y2hbMl07aWYoc2VsZWN0b3Ipe2RlbGVnYXRlRWxlbWVudC5vbihldmVudE5hbWUsc2VsZWN0b3IsaGFuZGxlclByb3h5KTt9ZWxzZXtlbGVtZW50Lm9uKGV2ZW50TmFtZSxoYW5kbGVyUHJveHkpO319KTt9LF9vZmY6ZnVuY3Rpb24oZWxlbWVudCxldmVudE5hbWUpe2V2ZW50TmFtZT0oZXZlbnROYW1lfHwiIikuc3BsaXQoIiAiKS5qb2luKHRoaXMuZXZlbnROYW1lc3BhY2UrIiAiKSsKdGhpcy5ldmVudE5hbWVzcGFjZTtlbGVtZW50Lm9mZihldmVudE5hbWUpLm9mZihldmVudE5hbWUpO3RoaXMuYmluZGluZ3M9JCh0aGlzLmJpbmRpbmdzLm5vdChlbGVtZW50KS5nZXQoKSk7dGhpcy5mb2N1c2FibGU9JCh0aGlzLmZvY3VzYWJsZS5ub3QoZWxlbWVudCkuZ2V0KCkpO3RoaXMuaG92ZXJhYmxlPSQodGhpcy5ob3ZlcmFibGUubm90KGVsZW1lbnQpLmdldCgpKTt9LF9kZWxheTpmdW5jdGlvbihoYW5kbGVyLGRlbGF5KXtmdW5jdGlvbiBoYW5kbGVyUHJveHkoKXtyZXR1cm4odHlwZW9mIGhhbmRsZXI9PT0ic3RyaW5nIj9pbnN0YW5jZVtoYW5kbGVyXTpoYW5kbGVyKS5hcHBseShpbnN0YW5jZSxhcmd1bWVudHMpO30KdmFyIGluc3RhbmNlPXRoaXM7cmV0dXJuIHNldFRpbWVvdXQoaGFuZGxlclByb3h5LGRlbGF5fHwwKTt9LF9ob3ZlcmFibGU6ZnVuY3Rpb24oZWxlbWVudCl7dGhpcy5ob3ZlcmFibGU9dGhpcy5ob3ZlcmFibGUuYWRkKGVsZW1lbnQpO3RoaXMuX29uKGVsZW1lbnQse21vdXNlZW50ZXI6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX2FkZENsYXNzKCQoZXZlbnQuY3VycmVudFRhcmdldCksbnVsbCwidWktc3RhdGUtaG92ZXIiKTt9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3JlbW92ZUNsYXNzKCQoZXZlbnQuY3VycmVudFRhcmdldCksbnVsbCwidWktc3RhdGUtaG92ZXIiKTt9fSk7fSxfZm9jdXNhYmxlOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuZm9jdXNhYmxlPXRoaXMuZm9jdXNhYmxlLmFkZChlbGVtZW50KTt0aGlzLl9vbihlbGVtZW50LHtmb2N1c2luOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9hZGRDbGFzcygkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLG51bGwsInVpLXN0YXRlLWZvY3VzIik7fSxmb2N1c291dDpmdW5jdGlvbihldmVudCl7dGhpcy5fcmVtb3ZlQ2xhc3MoJChldmVudC5jdXJyZW50VGFyZ2V0KSxudWxsLCJ1aS1zdGF0ZS1mb2N1cyIpO319KTt9LF90cmlnZ2VyOmZ1bmN0aW9uKHR5cGUsZXZlbnQsZGF0YSl7dmFyIHByb3Asb3JpZzt2YXIgY2FsbGJhY2s9dGhpcy5vcHRpb25zW3R5cGVdO2RhdGE9ZGF0YXx8e307ZXZlbnQ9JC5FdmVudChldmVudCk7ZXZlbnQudHlwZT0odHlwZT09PXRoaXMud2lkZ2V0RXZlbnRQcmVmaXg/dHlwZTp0aGlzLndpZGdldEV2ZW50UHJlZml4K3R5cGUpLnRvTG93ZXJDYXNlKCk7ZXZlbnQudGFyZ2V0PXRoaXMuZWxlbWVudFswXTtvcmlnPWV2ZW50Lm9yaWdpbmFsRXZlbnQ7aWYob3JpZyl7Zm9yKHByb3AgaW4gb3JpZyl7aWYoIShwcm9wIGluIGV2ZW50KSl7ZXZlbnRbcHJvcF09b3JpZ1twcm9wXTt9fX0KdGhpcy5lbGVtZW50LnRyaWdnZXIoZXZlbnQsZGF0YSk7cmV0dXJuISgkLmlzRnVuY3Rpb24oY2FsbGJhY2spJiZjYWxsYmFjay5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW2V2ZW50XS5jb25jYXQoZGF0YSkpPT09ZmFsc2V8fGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKTt9fTskLmVhY2goe3Nob3c6ImZhZGVJbiIsaGlkZToiZmFkZU91dCJ9LGZ1bmN0aW9uKG1ldGhvZCxkZWZhdWx0RWZmZWN0KXskLldpZGdldC5wcm90b3R5cGVbIl8iK21ldGhvZF09ZnVuY3Rpb24oZWxlbWVudCxvcHRpb25zLGNhbGxiYWNrKXtpZih0eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciKXtvcHRpb25zPXtlZmZlY3Q6b3B0aW9uc307fQp2YXIgaGFzT3B0aW9uczt2YXIgZWZmZWN0TmFtZT0hb3B0aW9ucz9tZXRob2Q6b3B0aW9ucz09PXRydWV8fHR5cGVvZiBvcHRpb25zPT09Im51bWJlciI/ZGVmYXVsdEVmZmVjdDpvcHRpb25zLmVmZmVjdHx8ZGVmYXVsdEVmZmVjdDtvcHRpb25zPW9wdGlvbnN8fHt9O2lmKHR5cGVvZiBvcHRpb25zPT09Im51bWJlciIpe29wdGlvbnM9e2R1cmF0aW9uOm9wdGlvbnN9O30KaGFzT3B0aW9ucz0hJC5pc0VtcHR5T2JqZWN0KG9wdGlvbnMpO29wdGlvbnMuY29tcGxldGU9Y2FsbGJhY2s7aWYob3B0aW9ucy5kZWxheSl7ZWxlbWVudC5kZWxheShvcHRpb25zLmRlbGF5KTt9CmlmKGhhc09wdGlvbnMmJiQuZWZmZWN0cyYmJC5lZmZlY3RzLmVmZmVjdFtlZmZlY3ROYW1lXSl7ZWxlbWVudFttZXRob2RdKG9wdGlvbnMpO31lbHNlIGlmKGVmZmVjdE5hbWUhPT1tZXRob2QmJmVsZW1lbnRbZWZmZWN0TmFtZV0pe2VsZW1lbnRbZWZmZWN0TmFtZV0ob3B0aW9ucy5kdXJhdGlvbixvcHRpb25zLmVhc2luZyxjYWxsYmFjayk7fWVsc2V7ZWxlbWVudC5xdWV1ZShmdW5jdGlvbihuZXh0KXskKHRoaXMpW21ldGhvZF0oKTtpZihjYWxsYmFjayl7Y2FsbGJhY2suY2FsbChlbGVtZW50WzBdKTt9Cm5leHQoKTt9KTt9fTt9KTt2YXIgd2lkZ2V0PSQud2lkZ2V0OyhmdW5jdGlvbigpe3ZhciBjYWNoZWRTY3JvbGxiYXJXaWR0aCxtYXg9TWF0aC5tYXgsYWJzPU1hdGguYWJzLHJob3Jpem9udGFsPS9sZWZ0fGNlbnRlcnxyaWdodC8scnZlcnRpY2FsPS90b3B8Y2VudGVyfGJvdHRvbS8scm9mZnNldD0vW1wrXC1dXGQrKFwuW1xkXSspPyU/LyxycG9zaXRpb249L15cdysvLHJwZXJjZW50PS8lJC8sX3Bvc2l0aW9uPSQuZm4ucG9zaXRpb247ZnVuY3Rpb24gZ2V0T2Zmc2V0cyhvZmZzZXRzLHdpZHRoLGhlaWdodCl7cmV0dXJuW3BhcnNlRmxvYXQob2Zmc2V0c1swXSkqKHJwZXJjZW50LnRlc3Qob2Zmc2V0c1swXSk/d2lkdGgvMTAwOjEpLHBhcnNlRmxvYXQob2Zmc2V0c1sxXSkqKHJwZXJjZW50LnRlc3Qob2Zmc2V0c1sxXSk/aGVpZ2h0LzEwMDoxKV07fQpmdW5jdGlvbiBwYXJzZUNzcyhlbGVtZW50LHByb3BlcnR5KXtyZXR1cm4gcGFyc2VJbnQoJC5jc3MoZWxlbWVudCxwcm9wZXJ0eSksMTApfHwwO30KZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhlbGVtKXt2YXIgcmF3PWVsZW1bMF07aWYocmF3Lm5vZGVUeXBlPT09OSl7cmV0dXJue3dpZHRoOmVsZW0ud2lkdGgoKSxoZWlnaHQ6ZWxlbS5oZWlnaHQoKSxvZmZzZXQ6e3RvcDowLGxlZnQ6MH19O30KaWYoJC5pc1dpbmRvdyhyYXcpKXtyZXR1cm57d2lkdGg6ZWxlbS53aWR0aCgpLGhlaWdodDplbGVtLmhlaWdodCgpLG9mZnNldDp7dG9wOmVsZW0uc2Nyb2xsVG9wKCksbGVmdDplbGVtLnNjcm9sbExlZnQoKX19O30KaWYocmF3LnByZXZlbnREZWZhdWx0KXtyZXR1cm57d2lkdGg6MCxoZWlnaHQ6MCxvZmZzZXQ6e3RvcDpyYXcucGFnZVksbGVmdDpyYXcucGFnZVh9fTt9CnJldHVybnt3aWR0aDplbGVtLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZWxlbS5vdXRlckhlaWdodCgpLG9mZnNldDplbGVtLm9mZnNldCgpfTt9CiQucG9zaXRpb249e3Njcm9sbGJhcldpZHRoOmZ1bmN0aW9uKCl7aWYoY2FjaGVkU2Nyb2xsYmFyV2lkdGghPT11bmRlZmluZWQpe3JldHVybiBjYWNoZWRTY3JvbGxiYXJXaWR0aDt9CnZhciB3MSx3MixkaXY9JCgiPGRpdiAiKyJzdHlsZT0nZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmhpZGRlbjsnPiIrIjxkaXYgc3R5bGU9J2hlaWdodDoxMDBweDt3aWR0aDphdXRvOyc+PC9kaXY+PC9kaXY+IiksaW5uZXJEaXY9ZGl2LmNoaWxkcmVuKClbMF07JCgiYm9keSIpLmFwcGVuZChkaXYpO3cxPWlubmVyRGl2Lm9mZnNldFdpZHRoO2Rpdi5jc3MoIm92ZXJmbG93Iiwic2Nyb2xsIik7dzI9aW5uZXJEaXYub2Zmc2V0V2lkdGg7aWYodzE9PT13Mil7dzI9ZGl2WzBdLmNsaWVudFdpZHRoO30KZGl2LnJlbW92ZSgpO3JldHVybihjYWNoZWRTY3JvbGxiYXJXaWR0aD13MS13Mik7fSxnZXRTY3JvbGxJbmZvOmZ1bmN0aW9uKHdpdGhpbil7dmFyIG92ZXJmbG93WD13aXRoaW4uaXNXaW5kb3d8fHdpdGhpbi5pc0RvY3VtZW50PyIiOndpdGhpbi5lbGVtZW50LmNzcygib3ZlcmZsb3cteCIpLG92ZXJmbG93WT13aXRoaW4uaXNXaW5kb3d8fHdpdGhpbi5pc0RvY3VtZW50PyIiOndpdGhpbi5lbGVtZW50LmNzcygib3ZlcmZsb3cteSIpLGhhc092ZXJmbG93WD1vdmVyZmxvd1g9PT0ic2Nyb2xsInx8KG92ZXJmbG93WD09PSJhdXRvIiYmd2l0aGluLndpZHRoPHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbFdpZHRoKSxoYXNPdmVyZmxvd1k9b3ZlcmZsb3dZPT09InNjcm9sbCJ8fChvdmVyZmxvd1k9PT0iYXV0byImJndpdGhpbi5oZWlnaHQ8d2l0aGluLmVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0KTtyZXR1cm57d2lkdGg6aGFzT3ZlcmZsb3dZPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowLGhlaWdodDpoYXNPdmVyZmxvd1g/JC5wb3NpdGlvbi5zY3JvbGxiYXJXaWR0aCgpOjB9O30sZ2V0V2l0aGluSW5mbzpmdW5jdGlvbihlbGVtZW50KXt2YXIgd2l0aGluRWxlbWVudD0kKGVsZW1lbnR8fHdpbmRvdyksaXNXaW5kb3c9JC5pc1dpbmRvdyh3aXRoaW5FbGVtZW50WzBdKSxpc0RvY3VtZW50PSEhd2l0aGluRWxlbWVudFswXSYmd2l0aGluRWxlbWVudFswXS5ub2RlVHlwZT09PTksaGFzT2Zmc2V0PSFpc1dpbmRvdyYmIWlzRG9jdW1lbnQ7cmV0dXJue2VsZW1lbnQ6d2l0aGluRWxlbWVudCxpc1dpbmRvdzppc1dpbmRvdyxpc0RvY3VtZW50OmlzRG9jdW1lbnQsb2Zmc2V0Omhhc09mZnNldD8kKGVsZW1lbnQpLm9mZnNldCgpOntsZWZ0OjAsdG9wOjB9LHNjcm9sbExlZnQ6d2l0aGluRWxlbWVudC5zY3JvbGxMZWZ0KCksc2Nyb2xsVG9wOndpdGhpbkVsZW1lbnQuc2Nyb2xsVG9wKCksd2lkdGg6d2l0aGluRWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OndpdGhpbkVsZW1lbnQub3V0ZXJIZWlnaHQoKX07fX07JC5mbi5wb3NpdGlvbj1mdW5jdGlvbihvcHRpb25zKXtpZighb3B0aW9uc3x8IW9wdGlvbnMub2Ype3JldHVybiBfcG9zaXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO30Kb3B0aW9ucz0kLmV4dGVuZCh7fSxvcHRpb25zKTt2YXIgYXRPZmZzZXQsdGFyZ2V0V2lkdGgsdGFyZ2V0SGVpZ2h0LHRhcmdldE9mZnNldCxiYXNlUG9zaXRpb24sZGltZW5zaW9ucyx0YXJnZXQ9JChvcHRpb25zLm9mKSx3aXRoaW49JC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKG9wdGlvbnMud2l0aGluKSxzY3JvbGxJbmZvPSQucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyh3aXRoaW4pLGNvbGxpc2lvbj0ob3B0aW9ucy5jb2xsaXNpb258fCJmbGlwIikuc3BsaXQoIiAiKSxvZmZzZXRzPXt9O2RpbWVuc2lvbnM9Z2V0RGltZW5zaW9ucyh0YXJnZXQpO2lmKHRhcmdldFswXS5wcmV2ZW50RGVmYXVsdCl7b3B0aW9ucy5hdD0ibGVmdCB0b3AiO30KdGFyZ2V0V2lkdGg9ZGltZW5zaW9ucy53aWR0aDt0YXJnZXRIZWlnaHQ9ZGltZW5zaW9ucy5oZWlnaHQ7dGFyZ2V0T2Zmc2V0PWRpbWVuc2lvbnMub2Zmc2V0O2Jhc2VQb3NpdGlvbj0kLmV4dGVuZCh7fSx0YXJnZXRPZmZzZXQpOyQuZWFjaChbIm15IiwiYXQiXSxmdW5jdGlvbigpe3ZhciBwb3M9KG9wdGlvbnNbdGhpc118fCIiKS5zcGxpdCgiICIpLGhvcml6b250YWxPZmZzZXQsdmVydGljYWxPZmZzZXQ7aWYocG9zLmxlbmd0aD09PTEpe3Bvcz1yaG9yaXpvbnRhbC50ZXN0KHBvc1swXSk/cG9zLmNvbmNhdChbImNlbnRlciJdKTpydmVydGljYWwudGVzdChwb3NbMF0pP1siY2VudGVyIl0uY29uY2F0KHBvcyk6WyJjZW50ZXIiLCJjZW50ZXIiXTt9CnBvc1swXT1yaG9yaXpvbnRhbC50ZXN0KHBvc1swXSk/cG9zWzBdOiJjZW50ZXIiO3Bvc1sxXT1ydmVydGljYWwudGVzdChwb3NbMV0pP3Bvc1sxXToiY2VudGVyIjtob3Jpem9udGFsT2Zmc2V0PXJvZmZzZXQuZXhlYyhwb3NbMF0pO3ZlcnRpY2FsT2Zmc2V0PXJvZmZzZXQuZXhlYyhwb3NbMV0pO29mZnNldHNbdGhpc109W2hvcml6b250YWxPZmZzZXQ/aG9yaXpvbnRhbE9mZnNldFswXTowLHZlcnRpY2FsT2Zmc2V0P3ZlcnRpY2FsT2Zmc2V0WzBdOjBdO29wdGlvbnNbdGhpc109W3Jwb3NpdGlvbi5leGVjKHBvc1swXSlbMF0scnBvc2l0aW9uLmV4ZWMocG9zWzFdKVswXV07fSk7aWYoY29sbGlzaW9uLmxlbmd0aD09PTEpe2NvbGxpc2lvblsxXT1jb2xsaXNpb25bMF07fQppZihvcHRpb25zLmF0WzBdPT09InJpZ2h0Iil7YmFzZVBvc2l0aW9uLmxlZnQrPXRhcmdldFdpZHRoO31lbHNlIGlmKG9wdGlvbnMuYXRbMF09PT0iY2VudGVyIil7YmFzZVBvc2l0aW9uLmxlZnQrPXRhcmdldFdpZHRoLzI7fQppZihvcHRpb25zLmF0WzFdPT09ImJvdHRvbSIpe2Jhc2VQb3NpdGlvbi50b3ArPXRhcmdldEhlaWdodDt9ZWxzZSBpZihvcHRpb25zLmF0WzFdPT09ImNlbnRlciIpe2Jhc2VQb3NpdGlvbi50b3ArPXRhcmdldEhlaWdodC8yO30KYXRPZmZzZXQ9Z2V0T2Zmc2V0cyhvZmZzZXRzLmF0LHRhcmdldFdpZHRoLHRhcmdldEhlaWdodCk7YmFzZVBvc2l0aW9uLmxlZnQrPWF0T2Zmc2V0WzBdO2Jhc2VQb3NpdGlvbi50b3ArPWF0T2Zmc2V0WzFdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgY29sbGlzaW9uUG9zaXRpb24sdXNpbmcsZWxlbT0kKHRoaXMpLGVsZW1XaWR0aD1lbGVtLm91dGVyV2lkdGgoKSxlbGVtSGVpZ2h0PWVsZW0ub3V0ZXJIZWlnaHQoKSxtYXJnaW5MZWZ0PXBhcnNlQ3NzKHRoaXMsIm1hcmdpbkxlZnQiKSxtYXJnaW5Ub3A9cGFyc2VDc3ModGhpcywibWFyZ2luVG9wIiksY29sbGlzaW9uV2lkdGg9ZWxlbVdpZHRoK21hcmdpbkxlZnQrcGFyc2VDc3ModGhpcywibWFyZ2luUmlnaHQiKSsKc2Nyb2xsSW5mby53aWR0aCxjb2xsaXNpb25IZWlnaHQ9ZWxlbUhlaWdodCttYXJnaW5Ub3ArcGFyc2VDc3ModGhpcywibWFyZ2luQm90dG9tIikrCnNjcm9sbEluZm8uaGVpZ2h0LHBvc2l0aW9uPSQuZXh0ZW5kKHt9LGJhc2VQb3NpdGlvbiksbXlPZmZzZXQ9Z2V0T2Zmc2V0cyhvZmZzZXRzLm15LGVsZW0ub3V0ZXJXaWR0aCgpLGVsZW0ub3V0ZXJIZWlnaHQoKSk7aWYob3B0aW9ucy5teVswXT09PSJyaWdodCIpe3Bvc2l0aW9uLmxlZnQtPWVsZW1XaWR0aDt9ZWxzZSBpZihvcHRpb25zLm15WzBdPT09ImNlbnRlciIpe3Bvc2l0aW9uLmxlZnQtPWVsZW1XaWR0aC8yO30KaWYob3B0aW9ucy5teVsxXT09PSJib3R0b20iKXtwb3NpdGlvbi50b3AtPWVsZW1IZWlnaHQ7fWVsc2UgaWYob3B0aW9ucy5teVsxXT09PSJjZW50ZXIiKXtwb3NpdGlvbi50b3AtPWVsZW1IZWlnaHQvMjt9CnBvc2l0aW9uLmxlZnQrPW15T2Zmc2V0WzBdO3Bvc2l0aW9uLnRvcCs9bXlPZmZzZXRbMV07Y29sbGlzaW9uUG9zaXRpb249e21hcmdpbkxlZnQ6bWFyZ2luTGVmdCxtYXJnaW5Ub3A6bWFyZ2luVG9wfTskLmVhY2goWyJsZWZ0IiwidG9wIl0sZnVuY3Rpb24oaSxkaXIpe2lmKCQudWkucG9zaXRpb25bY29sbGlzaW9uW2ldXSl7JC51aS5wb3NpdGlvbltjb2xsaXNpb25baV1dW2Rpcl0ocG9zaXRpb24se3RhcmdldFdpZHRoOnRhcmdldFdpZHRoLHRhcmdldEhlaWdodDp0YXJnZXRIZWlnaHQsZWxlbVdpZHRoOmVsZW1XaWR0aCxlbGVtSGVpZ2h0OmVsZW1IZWlnaHQsY29sbGlzaW9uUG9zaXRpb246Y29sbGlzaW9uUG9zaXRpb24sY29sbGlzaW9uV2lkdGg6Y29sbGlzaW9uV2lkdGgsY29sbGlzaW9uSGVpZ2h0OmNvbGxpc2lvbkhlaWdodCxvZmZzZXQ6W2F0T2Zmc2V0WzBdK215T2Zmc2V0WzBdLGF0T2Zmc2V0WzFdK215T2Zmc2V0WzFdXSxteTpvcHRpb25zLm15LGF0Om9wdGlvbnMuYXQsd2l0aGluOndpdGhpbixlbGVtOmVsZW19KTt9fSk7aWYob3B0aW9ucy51c2luZyl7dXNpbmc9ZnVuY3Rpb24ocHJvcHMpe3ZhciBsZWZ0PXRhcmdldE9mZnNldC5sZWZ0LXBvc2l0aW9uLmxlZnQscmlnaHQ9bGVmdCt0YXJnZXRXaWR0aC1lbGVtV2lkdGgsdG9wPXRhcmdldE9mZnNldC50b3AtcG9zaXRpb24udG9wLGJvdHRvbT10b3ArdGFyZ2V0SGVpZ2h0LWVsZW1IZWlnaHQsZmVlZGJhY2s9e3RhcmdldDp7ZWxlbWVudDp0YXJnZXQsbGVmdDp0YXJnZXRPZmZzZXQubGVmdCx0b3A6dGFyZ2V0T2Zmc2V0LnRvcCx3aWR0aDp0YXJnZXRXaWR0aCxoZWlnaHQ6dGFyZ2V0SGVpZ2h0fSxlbGVtZW50OntlbGVtZW50OmVsZW0sbGVmdDpwb3NpdGlvbi5sZWZ0LHRvcDpwb3NpdGlvbi50b3Asd2lkdGg6ZWxlbVdpZHRoLGhlaWdodDplbGVtSGVpZ2h0fSxob3Jpem9udGFsOnJpZ2h0PDA/ImxlZnQiOmxlZnQ+MD8icmlnaHQiOiJjZW50ZXIiLHZlcnRpY2FsOmJvdHRvbTwwPyJ0b3AiOnRvcD4wPyJib3R0b20iOiJtaWRkbGUifTtpZih0YXJnZXRXaWR0aDxlbGVtV2lkdGgmJmFicyhsZWZ0K3JpZ2h0KTx0YXJnZXRXaWR0aCl7ZmVlZGJhY2suaG9yaXpvbnRhbD0iY2VudGVyIjt9CmlmKHRhcmdldEhlaWdodDxlbGVtSGVpZ2h0JiZhYnModG9wK2JvdHRvbSk8dGFyZ2V0SGVpZ2h0KXtmZWVkYmFjay52ZXJ0aWNhbD0ibWlkZGxlIjt9CmlmKG1heChhYnMobGVmdCksYWJzKHJpZ2h0KSk+bWF4KGFicyh0b3ApLGFicyhib3R0b20pKSl7ZmVlZGJhY2suaW1wb3J0YW50PSJob3Jpem9udGFsIjt9ZWxzZXtmZWVkYmFjay5pbXBvcnRhbnQ9InZlcnRpY2FsIjt9Cm9wdGlvbnMudXNpbmcuY2FsbCh0aGlzLHByb3BzLGZlZWRiYWNrKTt9O30KZWxlbS5vZmZzZXQoJC5leHRlbmQocG9zaXRpb24se3VzaW5nOnVzaW5nfSkpO30pO307JC51aS5wb3NpdGlvbj17Zml0OntsZWZ0OmZ1bmN0aW9uKHBvc2l0aW9uLGRhdGEpe3ZhciB3aXRoaW49ZGF0YS53aXRoaW4sd2l0aGluT2Zmc2V0PXdpdGhpbi5pc1dpbmRvdz93aXRoaW4uc2Nyb2xsTGVmdDp3aXRoaW4ub2Zmc2V0LmxlZnQsb3V0ZXJXaWR0aD13aXRoaW4ud2lkdGgsY29sbGlzaW9uUG9zTGVmdD1wb3NpdGlvbi5sZWZ0LWRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCxvdmVyTGVmdD13aXRoaW5PZmZzZXQtY29sbGlzaW9uUG9zTGVmdCxvdmVyUmlnaHQ9Y29sbGlzaW9uUG9zTGVmdCtkYXRhLmNvbGxpc2lvbldpZHRoLW91dGVyV2lkdGgtd2l0aGluT2Zmc2V0LG5ld092ZXJSaWdodDtpZihkYXRhLmNvbGxpc2lvbldpZHRoPm91dGVyV2lkdGgpe2lmKG92ZXJMZWZ0PjAmJm92ZXJSaWdodDw9MCl7bmV3T3ZlclJpZ2h0PXBvc2l0aW9uLmxlZnQrb3ZlckxlZnQrZGF0YS5jb2xsaXNpb25XaWR0aC1vdXRlcldpZHRoLQp3aXRoaW5PZmZzZXQ7cG9zaXRpb24ubGVmdCs9b3ZlckxlZnQtbmV3T3ZlclJpZ2h0O31lbHNlIGlmKG92ZXJSaWdodD4wJiZvdmVyTGVmdDw9MCl7cG9zaXRpb24ubGVmdD13aXRoaW5PZmZzZXQ7fWVsc2V7aWYob3ZlckxlZnQ+b3ZlclJpZ2h0KXtwb3NpdGlvbi5sZWZ0PXdpdGhpbk9mZnNldCtvdXRlcldpZHRoLWRhdGEuY29sbGlzaW9uV2lkdGg7fWVsc2V7cG9zaXRpb24ubGVmdD13aXRoaW5PZmZzZXQ7fX19ZWxzZSBpZihvdmVyTGVmdD4wKXtwb3NpdGlvbi5sZWZ0Kz1vdmVyTGVmdDt9ZWxzZSBpZihvdmVyUmlnaHQ+MCl7cG9zaXRpb24ubGVmdC09b3ZlclJpZ2h0O31lbHNle3Bvc2l0aW9uLmxlZnQ9bWF4KHBvc2l0aW9uLmxlZnQtY29sbGlzaW9uUG9zTGVmdCxwb3NpdGlvbi5sZWZ0KTt9fSx0b3A6ZnVuY3Rpb24ocG9zaXRpb24sZGF0YSl7dmFyIHdpdGhpbj1kYXRhLndpdGhpbix3aXRoaW5PZmZzZXQ9d2l0aGluLmlzV2luZG93P3dpdGhpbi5zY3JvbGxUb3A6d2l0aGluLm9mZnNldC50b3Asb3V0ZXJIZWlnaHQ9ZGF0YS53aXRoaW4uaGVpZ2h0LGNvbGxpc2lvblBvc1RvcD1wb3NpdGlvbi50b3AtZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3Asb3ZlclRvcD13aXRoaW5PZmZzZXQtY29sbGlzaW9uUG9zVG9wLG92ZXJCb3R0b209Y29sbGlzaW9uUG9zVG9wK2RhdGEuY29sbGlzaW9uSGVpZ2h0LW91dGVySGVpZ2h0LXdpdGhpbk9mZnNldCxuZXdPdmVyQm90dG9tO2lmKGRhdGEuY29sbGlzaW9uSGVpZ2h0Pm91dGVySGVpZ2h0KXtpZihvdmVyVG9wPjAmJm92ZXJCb3R0b208PTApe25ld092ZXJCb3R0b209cG9zaXRpb24udG9wK292ZXJUb3ArZGF0YS5jb2xsaXNpb25IZWlnaHQtb3V0ZXJIZWlnaHQtCndpdGhpbk9mZnNldDtwb3NpdGlvbi50b3ArPW92ZXJUb3AtbmV3T3ZlckJvdHRvbTt9ZWxzZSBpZihvdmVyQm90dG9tPjAmJm92ZXJUb3A8PTApe3Bvc2l0aW9uLnRvcD13aXRoaW5PZmZzZXQ7fWVsc2V7aWYob3ZlclRvcD5vdmVyQm90dG9tKXtwb3NpdGlvbi50b3A9d2l0aGluT2Zmc2V0K291dGVySGVpZ2h0LWRhdGEuY29sbGlzaW9uSGVpZ2h0O31lbHNle3Bvc2l0aW9uLnRvcD13aXRoaW5PZmZzZXQ7fX19ZWxzZSBpZihvdmVyVG9wPjApe3Bvc2l0aW9uLnRvcCs9b3ZlclRvcDt9ZWxzZSBpZihvdmVyQm90dG9tPjApe3Bvc2l0aW9uLnRvcC09b3ZlckJvdHRvbTt9ZWxzZXtwb3NpdGlvbi50b3A9bWF4KHBvc2l0aW9uLnRvcC1jb2xsaXNpb25Qb3NUb3AscG9zaXRpb24udG9wKTt9fX0sZmxpcDp7bGVmdDpmdW5jdGlvbihwb3NpdGlvbixkYXRhKXt2YXIgd2l0aGluPWRhdGEud2l0aGluLHdpdGhpbk9mZnNldD13aXRoaW4ub2Zmc2V0LmxlZnQrd2l0aGluLnNjcm9sbExlZnQsb3V0ZXJXaWR0aD13aXRoaW4ud2lkdGgsb2Zmc2V0TGVmdD13aXRoaW4uaXNXaW5kb3c/d2l0aGluLnNjcm9sbExlZnQ6d2l0aGluLm9mZnNldC5sZWZ0LGNvbGxpc2lvblBvc0xlZnQ9cG9zaXRpb24ubGVmdC1kYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsb3ZlckxlZnQ9Y29sbGlzaW9uUG9zTGVmdC1vZmZzZXRMZWZ0LG92ZXJSaWdodD1jb2xsaXNpb25Qb3NMZWZ0K2RhdGEuY29sbGlzaW9uV2lkdGgtb3V0ZXJXaWR0aC1vZmZzZXRMZWZ0LG15T2Zmc2V0PWRhdGEubXlbMF09PT0ibGVmdCI/LWRhdGEuZWxlbVdpZHRoOmRhdGEubXlbMF09PT0icmlnaHQiP2RhdGEuZWxlbVdpZHRoOjAsYXRPZmZzZXQ9ZGF0YS5hdFswXT09PSJsZWZ0Ij9kYXRhLnRhcmdldFdpZHRoOmRhdGEuYXRbMF09PT0icmlnaHQiPy1kYXRhLnRhcmdldFdpZHRoOjAsb2Zmc2V0PS0yKmRhdGEub2Zmc2V0WzBdLG5ld092ZXJSaWdodCxuZXdPdmVyTGVmdDtpZihvdmVyTGVmdDwwKXtuZXdPdmVyUmlnaHQ9cG9zaXRpb24ubGVmdCtteU9mZnNldCthdE9mZnNldCtvZmZzZXQrZGF0YS5jb2xsaXNpb25XaWR0aC0Kb3V0ZXJXaWR0aC13aXRoaW5PZmZzZXQ7aWYobmV3T3ZlclJpZ2h0PDB8fG5ld092ZXJSaWdodDxhYnMob3ZlckxlZnQpKXtwb3NpdGlvbi5sZWZ0Kz1teU9mZnNldCthdE9mZnNldCtvZmZzZXQ7fX1lbHNlIGlmKG92ZXJSaWdodD4wKXtuZXdPdmVyTGVmdD1wb3NpdGlvbi5sZWZ0LWRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCtteU9mZnNldCsKYXRPZmZzZXQrb2Zmc2V0LW9mZnNldExlZnQ7aWYobmV3T3ZlckxlZnQ+MHx8YWJzKG5ld092ZXJMZWZ0KTxvdmVyUmlnaHQpe3Bvc2l0aW9uLmxlZnQrPW15T2Zmc2V0K2F0T2Zmc2V0K29mZnNldDt9fX0sdG9wOmZ1bmN0aW9uKHBvc2l0aW9uLGRhdGEpe3ZhciB3aXRoaW49ZGF0YS53aXRoaW4sd2l0aGluT2Zmc2V0PXdpdGhpbi5vZmZzZXQudG9wK3dpdGhpbi5zY3JvbGxUb3Asb3V0ZXJIZWlnaHQ9d2l0aGluLmhlaWdodCxvZmZzZXRUb3A9d2l0aGluLmlzV2luZG93P3dpdGhpbi5zY3JvbGxUb3A6d2l0aGluLm9mZnNldC50b3AsY29sbGlzaW9uUG9zVG9wPXBvc2l0aW9uLnRvcC1kYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxvdmVyVG9wPWNvbGxpc2lvblBvc1RvcC1vZmZzZXRUb3Asb3ZlckJvdHRvbT1jb2xsaXNpb25Qb3NUb3ArZGF0YS5jb2xsaXNpb25IZWlnaHQtb3V0ZXJIZWlnaHQtb2Zmc2V0VG9wLHRvcD1kYXRhLm15WzFdPT09InRvcCIsbXlPZmZzZXQ9dG9wPy1kYXRhLmVsZW1IZWlnaHQ6ZGF0YS5teVsxXT09PSJib3R0b20iP2RhdGEuZWxlbUhlaWdodDowLGF0T2Zmc2V0PWRhdGEuYXRbMV09PT0idG9wIj9kYXRhLnRhcmdldEhlaWdodDpkYXRhLmF0WzFdPT09ImJvdHRvbSI/LWRhdGEudGFyZ2V0SGVpZ2h0OjAsb2Zmc2V0PS0yKmRhdGEub2Zmc2V0WzFdLG5ld092ZXJUb3AsbmV3T3ZlckJvdHRvbTtpZihvdmVyVG9wPDApe25ld092ZXJCb3R0b209cG9zaXRpb24udG9wK215T2Zmc2V0K2F0T2Zmc2V0K29mZnNldCtkYXRhLmNvbGxpc2lvbkhlaWdodC0Kb3V0ZXJIZWlnaHQtd2l0aGluT2Zmc2V0O2lmKG5ld092ZXJCb3R0b208MHx8bmV3T3ZlckJvdHRvbTxhYnMob3ZlclRvcCkpe3Bvc2l0aW9uLnRvcCs9bXlPZmZzZXQrYXRPZmZzZXQrb2Zmc2V0O319ZWxzZSBpZihvdmVyQm90dG9tPjApe25ld092ZXJUb3A9cG9zaXRpb24udG9wLWRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wK215T2Zmc2V0K2F0T2Zmc2V0KwpvZmZzZXQtb2Zmc2V0VG9wO2lmKG5ld092ZXJUb3A+MHx8YWJzKG5ld092ZXJUb3ApPG92ZXJCb3R0b20pe3Bvc2l0aW9uLnRvcCs9bXlPZmZzZXQrYXRPZmZzZXQrb2Zmc2V0O319fX0sZmxpcGZpdDp7bGVmdDpmdW5jdGlvbigpeyQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTskLnVpLnBvc2l0aW9uLmZpdC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LHRvcDpmdW5jdGlvbigpeyQudWkucG9zaXRpb24uZmxpcC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpOyQudWkucG9zaXRpb24uZml0LnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX19O30pKCk7dmFyIHBvc2l0aW9uPSQudWkucG9zaXRpb247dmFyIGRhdGE9JC5leHRlbmQoJC5leHByWyI6Il0se2RhdGE6JC5leHByLmNyZWF0ZVBzZXVkbz8kLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGRhdGFOYW1lKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuISEkLmRhdGEoZWxlbSxkYXRhTmFtZSk7fTt9KTpmdW5jdGlvbihlbGVtLGksbWF0Y2gpe3JldHVybiEhJC5kYXRhKGVsZW0sbWF0Y2hbM10pO319KTt2YXIgZGlzYWJsZVNlbGVjdGlvbj0kLmZuLmV4dGVuZCh7ZGlzYWJsZVNlbGVjdGlvbjooZnVuY3Rpb24oKXt2YXIgZXZlbnRUeXBlPSJvbnNlbGVjdHN0YXJ0ImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpPyJzZWxlY3RzdGFydCI6Im1vdXNlZG93biI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub24oZXZlbnRUeXBlKyIudWktZGlzYWJsZVNlbGVjdGlvbiIsZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fSk7fTt9KSgpLGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZigiLnVpLWRpc2FibGVTZWxlY3Rpb24iKTt9fSk7JC51aS5mb2N1c2FibGU9ZnVuY3Rpb24oZWxlbWVudCxoYXNUYWJpbmRleCl7dmFyIG1hcCxtYXBOYW1lLGltZyxmb2N1c2FibGVJZlZpc2libGUsZmllbGRzZXQsbm9kZU5hbWU9ZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCJhcmVhIj09PW5vZGVOYW1lKXttYXA9ZWxlbWVudC5wYXJlbnROb2RlO21hcE5hbWU9bWFwLm5hbWU7aWYoIWVsZW1lbnQuaHJlZnx8IW1hcE5hbWV8fG1hcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im1hcCIpe3JldHVybiBmYWxzZTt9CmltZz0kKCJpbWdbdXNlbWFwPScjIittYXBOYW1lKyInXSIpO3JldHVybiBpbWcubGVuZ3RoPjAmJmltZy5pcygiOnZpc2libGUiKTt9CmlmKC9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvLnRlc3Qobm9kZU5hbWUpKXtmb2N1c2FibGVJZlZpc2libGU9IWVsZW1lbnQuZGlzYWJsZWQ7aWYoZm9jdXNhYmxlSWZWaXNpYmxlKXtmaWVsZHNldD0kKGVsZW1lbnQpLmNsb3Nlc3QoImZpZWxkc2V0IilbMF07aWYoZmllbGRzZXQpe2ZvY3VzYWJsZUlmVmlzaWJsZT0hZmllbGRzZXQuZGlzYWJsZWQ7fX19ZWxzZSBpZigiYSI9PT1ub2RlTmFtZSl7Zm9jdXNhYmxlSWZWaXNpYmxlPWVsZW1lbnQuaHJlZnx8aGFzVGFiaW5kZXg7fWVsc2V7Zm9jdXNhYmxlSWZWaXNpYmxlPWhhc1RhYmluZGV4O30KcmV0dXJuIGZvY3VzYWJsZUlmVmlzaWJsZSYmJChlbGVtZW50KS5pcygiOnZpc2libGUiKSYmdmlzaWJsZSgkKGVsZW1lbnQpKTt9O2Z1bmN0aW9uIHZpc2libGUoZWxlbWVudCl7dmFyIHZpc2liaWxpdHk9ZWxlbWVudC5jc3MoInZpc2liaWxpdHkiKTt3aGlsZSh2aXNpYmlsaXR5PT09ImluaGVyaXQiKXtlbGVtZW50PWVsZW1lbnQucGFyZW50KCk7dmlzaWJpbGl0eT1lbGVtZW50LmNzcygidmlzaWJpbGl0eSIpO30KcmV0dXJuIHZpc2liaWxpdHkhPT0iaGlkZGVuIjt9CiQuZXh0ZW5kKCQuZXhwclsiOiJdLHtmb2N1c2FibGU6ZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuICQudWkuZm9jdXNhYmxlKGVsZW1lbnQsJC5hdHRyKGVsZW1lbnQsInRhYmluZGV4IikhPW51bGwpO319KTt2YXIgZm9jdXNhYmxlPSQudWkuZm9jdXNhYmxlO3ZhciBrZXljb2RlPSQudWkua2V5Q29kZT17QkFDS1NQQUNFOjgsQ09NTUE6MTg4LERFTEVURTo0NixET1dOOjQwLEVORDozNSxFTlRFUjoxMyxFU0NBUEU6MjcsSE9NRTozNixMRUZUOjM3LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU1BBQ0U6MzIsVEFCOjksVVA6Mzh9O3ZhciBzY3JvbGxQYXJlbnQ9JC5mbi5zY3JvbGxQYXJlbnQ9ZnVuY3Rpb24oaW5jbHVkZUhpZGRlbil7dmFyIHBvc2l0aW9uPXRoaXMuY3NzKCJwb3NpdGlvbiIpLGV4Y2x1ZGVTdGF0aWNQYXJlbnQ9cG9zaXRpb249PT0iYWJzb2x1dGUiLG92ZXJmbG93UmVnZXg9aW5jbHVkZUhpZGRlbj8vKGF1dG98c2Nyb2xsfGhpZGRlbikvOi8oYXV0b3xzY3JvbGwpLyxzY3JvbGxQYXJlbnQ9dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHBhcmVudD0kKHRoaXMpO2lmKGV4Y2x1ZGVTdGF0aWNQYXJlbnQmJnBhcmVudC5jc3MoInBvc2l0aW9uIik9PT0ic3RhdGljIil7cmV0dXJuIGZhbHNlO30KcmV0dXJuIG92ZXJmbG93UmVnZXgudGVzdChwYXJlbnQuY3NzKCJvdmVyZmxvdyIpK3BhcmVudC5jc3MoIm92ZXJmbG93LXkiKSsKcGFyZW50LmNzcygib3ZlcmZsb3cteCIpKTt9KS5lcSgwKTtyZXR1cm4gcG9zaXRpb249PT0iZml4ZWQifHwhc2Nyb2xsUGFyZW50Lmxlbmd0aD8kKHRoaXNbMF0ub3duZXJEb2N1bWVudHx8ZG9jdW1lbnQpOnNjcm9sbFBhcmVudDt9O3ZhciB1bmlxdWVJZD0kLmZuLmV4dGVuZCh7dW5pcXVlSWQ6KGZ1bmN0aW9uKCl7dmFyIHV1aWQ9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoIXRoaXMuaWQpe3RoaXMuaWQ9InVpLWlkLSIrKCsrdXVpZCk7fX0pO307fSkoKSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigvXnVpLWlkLVxkKyQvLnRlc3QodGhpcy5pZCkpeyQodGhpcykucmVtb3ZlQXR0cigiaWQiKTt9fSk7fX0pO3ZhciBpZT0kLnVpLmllPSEhL21zaWUgW1x3Ll0rLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7dmFyIG1vdXNlSGFuZGxlZD1mYWxzZTskKGRvY3VtZW50KS5vbigibW91c2V1cCIsZnVuY3Rpb24oKXttb3VzZUhhbmRsZWQ9ZmFsc2U7fSk7dmFyIHdpZGdldHNNb3VzZT0kLndpZGdldCgidWkubW91c2UiLHt2ZXJzaW9uOiIxLjEyLjEiLG9wdGlvbnM6e2NhbmNlbDoiaW5wdXQsIHRleHRhcmVhLCBidXR0b24sIHNlbGVjdCwgb3B0aW9uIixkaXN0YW5jZToxLGRlbGF5OjB9LF9tb3VzZUluaXQ6ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzO3RoaXMuZWxlbWVudC5vbigibW91c2Vkb3duLiIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gdGhhdC5fbW91c2VEb3duKGV2ZW50KTt9KS5vbigiY2xpY2suIit0aGlzLndpZGdldE5hbWUsZnVuY3Rpb24oZXZlbnQpe2lmKHRydWU9PT0kLmRhdGEoZXZlbnQudGFyZ2V0LHRoYXQud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50IikpeyQucmVtb3ZlRGF0YShldmVudC50YXJnZXQsdGhhdC53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKTtldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2U7fX0pO3RoaXMuc3RhcnRlZD1mYWxzZTt9LF9tb3VzZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub2ZmKCIuIit0aGlzLndpZGdldE5hbWUpO2lmKHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKXt0aGlzLmRvY3VtZW50Lm9mZigibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5vZmYoIm1vdXNldXAuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKTt9fSxfbW91c2VEb3duOmZ1bmN0aW9uKGV2ZW50KXtpZihtb3VzZUhhbmRsZWQpe3JldHVybjt9CnRoaXMuX21vdXNlTW92ZWQ9ZmFsc2U7KHRoaXMuX21vdXNlU3RhcnRlZCYmdGhpcy5fbW91c2VVcChldmVudCkpO3RoaXMuX21vdXNlRG93bkV2ZW50PWV2ZW50O3ZhciB0aGF0PXRoaXMsYnRuSXNMZWZ0PShldmVudC53aGljaD09PTEpLGVsSXNDYW5jZWw9KHR5cGVvZiB0aGlzLm9wdGlvbnMuY2FuY2VsPT09InN0cmluZyImJmV2ZW50LnRhcmdldC5ub2RlTmFtZT8kKGV2ZW50LnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY2FuY2VsKS5sZW5ndGg6ZmFsc2UpO2lmKCFidG5Jc0xlZnR8fGVsSXNDYW5jZWx8fCF0aGlzLl9tb3VzZUNhcHR1cmUoZXZlbnQpKXtyZXR1cm4gdHJ1ZTt9CnRoaXMubW91c2VEZWxheU1ldD0hdGhpcy5vcHRpb25zLmRlbGF5O2lmKCF0aGlzLm1vdXNlRGVsYXlNZXQpe3RoaXMuX21vdXNlRGVsYXlUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhhdC5tb3VzZURlbGF5TWV0PXRydWU7fSx0aGlzLm9wdGlvbnMuZGVsYXkpO30KaWYodGhpcy5fbW91c2VEaXN0YW5jZU1ldChldmVudCkmJnRoaXMuX21vdXNlRGVsYXlNZXQoZXZlbnQpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9KHRoaXMuX21vdXNlU3RhcnQoZXZlbnQpIT09ZmFsc2UpO2lmKCF0aGlzLl9tb3VzZVN0YXJ0ZWQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIHRydWU7fX0KaWYodHJ1ZT09PSQuZGF0YShldmVudC50YXJnZXQsdGhpcy53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKSl7JC5yZW1vdmVEYXRhKGV2ZW50LnRhcmdldCx0aGlzLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIpO30KdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGU9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiB0aGF0Ll9tb3VzZU1vdmUoZXZlbnQpO307dGhpcy5fbW91c2VVcERlbGVnYXRlPWZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gdGhhdC5fbW91c2VVcChldmVudCk7fTt0aGlzLmRvY3VtZW50Lm9uKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLm9uKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7ZXZlbnQucHJldmVudERlZmF1bHQoKTttb3VzZUhhbmRsZWQ9dHJ1ZTtyZXR1cm4gdHJ1ZTt9LF9tb3VzZU1vdmU6ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMuX21vdXNlTW92ZWQpe2lmKCQudWkuaWUmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxkb2N1bWVudC5kb2N1bWVudE1vZGU8OSkmJiFldmVudC5idXR0b24pe3JldHVybiB0aGlzLl9tb3VzZVVwKGV2ZW50KTt9ZWxzZSBpZighZXZlbnQud2hpY2gpe2lmKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5fHxldmVudC5vcmlnaW5hbEV2ZW50LmN0cmxLZXl8fGV2ZW50Lm9yaWdpbmFsRXZlbnQubWV0YUtleXx8ZXZlbnQub3JpZ2luYWxFdmVudC5zaGlmdEtleSl7dGhpcy5pZ25vcmVNaXNzaW5nV2hpY2g9dHJ1ZTt9ZWxzZSBpZighdGhpcy5pZ25vcmVNaXNzaW5nV2hpY2gpe3JldHVybiB0aGlzLl9tb3VzZVVwKGV2ZW50KTt9fX0KaWYoZXZlbnQud2hpY2h8fGV2ZW50LmJ1dHRvbil7dGhpcy5fbW91c2VNb3ZlZD10cnVlO30KaWYodGhpcy5fbW91c2VTdGFydGVkKXt0aGlzLl9tb3VzZURyYWcoZXZlbnQpO3JldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KaWYodGhpcy5fbW91c2VEaXN0YW5jZU1ldChldmVudCkmJnRoaXMuX21vdXNlRGVsYXlNZXQoZXZlbnQpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9KHRoaXMuX21vdXNlU3RhcnQodGhpcy5fbW91c2VEb3duRXZlbnQsZXZlbnQpIT09ZmFsc2UpOyh0aGlzLl9tb3VzZVN0YXJ0ZWQ/dGhpcy5fbW91c2VEcmFnKGV2ZW50KTp0aGlzLl9tb3VzZVVwKGV2ZW50KSk7fQpyZXR1cm4hdGhpcy5fbW91c2VTdGFydGVkO30sX21vdXNlVXA6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuZG9jdW1lbnQub2ZmKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLm9mZigibW91c2V1cC4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpO2lmKHRoaXMuX21vdXNlU3RhcnRlZCl7dGhpcy5fbW91c2VTdGFydGVkPWZhbHNlO2lmKGV2ZW50LnRhcmdldD09PXRoaXMuX21vdXNlRG93bkV2ZW50LnRhcmdldCl7JC5kYXRhKGV2ZW50LnRhcmdldCx0aGlzLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIsdHJ1ZSk7fQp0aGlzLl9tb3VzZVN0b3AoZXZlbnQpO30KaWYodGhpcy5fbW91c2VEZWxheVRpbWVyKXtjbGVhclRpbWVvdXQodGhpcy5fbW91c2VEZWxheVRpbWVyKTtkZWxldGUgdGhpcy5fbW91c2VEZWxheVRpbWVyO30KdGhpcy5pZ25vcmVNaXNzaW5nV2hpY2g9ZmFsc2U7bW91c2VIYW5kbGVkPWZhbHNlO2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fSxfbW91c2VEaXN0YW5jZU1ldDpmdW5jdGlvbihldmVudCl7cmV0dXJuKE1hdGgubWF4KE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VYLWV2ZW50LnBhZ2VYKSxNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWS1ldmVudC5wYWdlWSkpPj10aGlzLm9wdGlvbnMuZGlzdGFuY2UpO30sX21vdXNlRGVsYXlNZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0O30sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oKXt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oKXt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oKXt9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9fSk7dmFyIHBsdWdpbj0kLnVpLnBsdWdpbj17YWRkOmZ1bmN0aW9uKG1vZHVsZSxvcHRpb24sc2V0KXt2YXIgaSxwcm90bz0kLnVpW21vZHVsZV0ucHJvdG90eXBlO2ZvcihpIGluIHNldCl7cHJvdG8ucGx1Z2luc1tpXT1wcm90by5wbHVnaW5zW2ldfHxbXTtwcm90by5wbHVnaW5zW2ldLnB1c2goW29wdGlvbixzZXRbaV1dKTt9fSxjYWxsOmZ1bmN0aW9uKGluc3RhbmNlLG5hbWUsYXJncyxhbGxvd0Rpc2Nvbm5lY3RlZCl7dmFyIGksc2V0PWluc3RhbmNlLnBsdWdpbnNbbmFtZV07aWYoIXNldCl7cmV0dXJuO30KaWYoIWFsbG93RGlzY29ubmVjdGVkJiYoIWluc3RhbmNlLmVsZW1lbnRbMF0ucGFyZW50Tm9kZXx8aW5zdGFuY2UuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTEpKXtyZXR1cm47fQpmb3IoaT0wO2k8c2V0Lmxlbmd0aDtpKyspe2lmKGluc3RhbmNlLm9wdGlvbnNbc2V0W2ldWzBdXSl7c2V0W2ldWzFdLmFwcGx5KGluc3RhbmNlLmVsZW1lbnQsYXJncyk7fX19fTt2YXIgc2FmZUFjdGl2ZUVsZW1lbnQ9JC51aS5zYWZlQWN0aXZlRWxlbWVudD1mdW5jdGlvbihkb2N1bWVudCl7dmFyIGFjdGl2ZUVsZW1lbnQ7dHJ5e2FjdGl2ZUVsZW1lbnQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDt9Y2F0Y2goZXJyb3Ipe2FjdGl2ZUVsZW1lbnQ9ZG9jdW1lbnQuYm9keTt9CmlmKCFhY3RpdmVFbGVtZW50KXthY3RpdmVFbGVtZW50PWRvY3VtZW50LmJvZHk7fQppZighYWN0aXZlRWxlbWVudC5ub2RlTmFtZSl7YWN0aXZlRWxlbWVudD1kb2N1bWVudC5ib2R5O30KcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7fTt2YXIgc2FmZUJsdXI9JC51aS5zYWZlQmx1cj1mdW5jdGlvbihlbGVtZW50KXtpZihlbGVtZW50JiZlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0iYm9keSIpeyQoZWxlbWVudCkudHJpZ2dlcigiYmx1ciIpO319OyQud2lkZ2V0KCJ1aS5kcmFnZ2FibGUiLCQudWkubW91c2Use3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6ImRyYWciLG9wdGlvbnM6e2FkZENsYXNzZXM6dHJ1ZSxhcHBlbmRUbzoicGFyZW50IixheGlzOmZhbHNlLGNvbm5lY3RUb1NvcnRhYmxlOmZhbHNlLGNvbnRhaW5tZW50OmZhbHNlLGN1cnNvcjoiYXV0byIsY3Vyc29yQXQ6ZmFsc2UsZ3JpZDpmYWxzZSxoYW5kbGU6ZmFsc2UsaGVscGVyOiJvcmlnaW5hbCIsaWZyYW1lRml4OmZhbHNlLG9wYWNpdHk6ZmFsc2UscmVmcmVzaFBvc2l0aW9uczpmYWxzZSxyZXZlcnQ6ZmFsc2UscmV2ZXJ0RHVyYXRpb246NTAwLHNjb3BlOiJkZWZhdWx0IixzY3JvbGw6dHJ1ZSxzY3JvbGxTZW5zaXRpdml0eToyMCxzY3JvbGxTcGVlZDoyMCxzbmFwOmZhbHNlLHNuYXBNb2RlOiJib3RoIixzbmFwVG9sZXJhbmNlOjIwLHN0YWNrOmZhbHNlLHpJbmRleDpmYWxzZSxkcmFnOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaGVscGVyPT09Im9yaWdpbmFsIil7dGhpcy5fc2V0UG9zaXRpb25SZWxhdGl2ZSgpO30KaWYodGhpcy5vcHRpb25zLmFkZENsYXNzZXMpe3RoaXMuX2FkZENsYXNzKCJ1aS1kcmFnZ2FibGUiKTt9CnRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO3RoaXMuX21vdXNlSW5pdCgpO30sX3NldE9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe3RoaXMuX3N1cGVyKGtleSx2YWx1ZSk7aWYoa2V5PT09ImhhbmRsZSIpe3RoaXMuX3JlbW92ZUhhbmRsZUNsYXNzTmFtZSgpO3RoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO319LF9kZXN0cm95OmZ1bmN0aW9uKCl7aWYoKHRoaXMuaGVscGVyfHx0aGlzLmVsZW1lbnQpLmlzKCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIikpe3RoaXMuZGVzdHJveU9uQ2xlYXI9dHJ1ZTtyZXR1cm47fQp0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKTt0aGlzLl9tb3VzZURlc3Ryb3koKTt9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZXZlbnQpe3ZhciBvPXRoaXMub3B0aW9ucztpZih0aGlzLmhlbHBlcnx8by5kaXNhYmxlZHx8JChldmVudC50YXJnZXQpLmNsb3Nlc3QoIi51aS1yZXNpemFibGUtaGFuZGxlIikubGVuZ3RoPjApe3JldHVybiBmYWxzZTt9CnRoaXMuaGFuZGxlPXRoaXMuX2dldEhhbmRsZShldmVudCk7aWYoIXRoaXMuaGFuZGxlKXtyZXR1cm4gZmFsc2U7fQp0aGlzLl9ibHVyQWN0aXZlRWxlbWVudChldmVudCk7dGhpcy5fYmxvY2tGcmFtZXMoby5pZnJhbWVGaXg9PT10cnVlPyJpZnJhbWUiOm8uaWZyYW1lRml4KTtyZXR1cm4gdHJ1ZTt9LF9ibG9ja0ZyYW1lczpmdW5jdGlvbihzZWxlY3Rvcil7dGhpcy5pZnJhbWVCbG9ja3M9dGhpcy5kb2N1bWVudC5maW5kKHNlbGVjdG9yKS5tYXAoZnVuY3Rpb24oKXt2YXIgaWZyYW1lPSQodGhpcyk7cmV0dXJuICQoIjxkaXY+IikuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIikuYXBwZW5kVG8oaWZyYW1lLnBhcmVudCgpKS5vdXRlcldpZHRoKGlmcmFtZS5vdXRlcldpZHRoKCkpLm91dGVySGVpZ2h0KGlmcmFtZS5vdXRlckhlaWdodCgpKS5vZmZzZXQoaWZyYW1lLm9mZnNldCgpKVswXTt9KTt9LF91bmJsb2NrRnJhbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5pZnJhbWVCbG9ja3Mpe3RoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmlmcmFtZUJsb2Nrczt9fSxfYmx1ckFjdGl2ZUVsZW1lbnQ6ZnVuY3Rpb24oZXZlbnQpe3ZhciBhY3RpdmVFbGVtZW50PSQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSksdGFyZ2V0PSQoZXZlbnQudGFyZ2V0KTtpZih0YXJnZXQuY2xvc2VzdChhY3RpdmVFbGVtZW50KS5sZW5ndGgpe3JldHVybjt9CiQudWkuc2FmZUJsdXIoYWN0aXZlRWxlbWVudCk7fSxfbW91c2VTdGFydDpmdW5jdGlvbihldmVudCl7dmFyIG89dGhpcy5vcHRpb25zO3RoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcihldmVudCk7dGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpO3RoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTtpZigkLnVpLmRkbWFuYWdlcil7JC51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzO30KdGhpcy5fY2FjaGVNYXJnaW5zKCk7dGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoInBvc2l0aW9uIik7dGhpcy5zY3JvbGxQYXJlbnQ9dGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KHRydWUpO3RoaXMub2Zmc2V0UGFyZW50PXRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpO3RoaXMuaGFzRml4ZWRBbmNlc3Rvcj10aGlzLmhlbHBlci5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykuY3NzKCJwb3NpdGlvbiIpPT09ImZpeGVkIjt9KS5sZW5ndGg+MDt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuZWxlbWVudC5vZmZzZXQoKTt0aGlzLl9yZWZyZXNoT2Zmc2V0cyhldmVudCk7dGhpcy5vcmlnaW5hbFBvc2l0aW9uPXRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCxmYWxzZSk7dGhpcy5vcmlnaW5hbFBhZ2VYPWV2ZW50LnBhZ2VYO3RoaXMub3JpZ2luYWxQYWdlWT1ldmVudC5wYWdlWTsoby5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihvLmN1cnNvckF0KSk7dGhpcy5fc2V0Q29udGFpbm1lbnQoKTtpZih0aGlzLl90cmlnZ2VyKCJzdGFydCIsZXZlbnQpPT09ZmFsc2Upe3RoaXMuX2NsZWFyKCk7cmV0dXJuIGZhbHNlO30KdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO2lmKCQudWkuZGRtYW5hZ2VyJiYhby5kcm9wQmVoYXZpb3VyKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGV2ZW50KTt9CnRoaXMuX21vdXNlRHJhZyhldmVudCx0cnVlKTtpZigkLnVpLmRkbWFuYWdlcil7JC51aS5kZG1hbmFnZXIuZHJhZ1N0YXJ0KHRoaXMsZXZlbnQpO30KcmV0dXJuIHRydWU7fSxfcmVmcmVzaE9mZnNldHM6ZnVuY3Rpb24oZXZlbnQpe3RoaXMub2Zmc2V0PXt0b3A6dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMucG9zaXRpb25BYnMubGVmdC10aGlzLm1hcmdpbnMubGVmdCxzY3JvbGw6ZmFsc2UscGFyZW50OnRoaXMuX2dldFBhcmVudE9mZnNldCgpLHJlbGF0aXZlOnRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCl9O3RoaXMub2Zmc2V0LmNsaWNrPXtsZWZ0OmV2ZW50LnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOmV2ZW50LnBhZ2VZLXRoaXMub2Zmc2V0LnRvcH07fSxfbW91c2VEcmFnOmZ1bmN0aW9uKGV2ZW50LG5vUHJvcGFnYXRpb24pe2lmKHRoaXMuaGFzRml4ZWRBbmNlc3Rvcil7dGhpcy5vZmZzZXQucGFyZW50PXRoaXMuX2dldFBhcmVudE9mZnNldCgpO30KdGhpcy5wb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGV2ZW50LHRydWUpO3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7aWYoIW5vUHJvcGFnYXRpb24pe3ZhciB1aT10aGlzLl91aUhhc2goKTtpZih0aGlzLl90cmlnZ2VyKCJkcmFnIixldmVudCx1aSk9PT1mYWxzZSl7dGhpcy5fbW91c2VVcChuZXcgJC5FdmVudCgibW91c2V1cCIsZXZlbnQpKTtyZXR1cm4gZmFsc2U7fQp0aGlzLnBvc2l0aW9uPXVpLnBvc2l0aW9uO30KdGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4Ijt0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4IjtpZigkLnVpLmRkbWFuYWdlcil7JC51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGV2ZW50KTt9CnJldHVybiBmYWxzZTt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0aGF0PXRoaXMsZHJvcHBlZD1mYWxzZTtpZigkLnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKXtkcm9wcGVkPSQudWkuZGRtYW5hZ2VyLmRyb3AodGhpcyxldmVudCk7fQppZih0aGlzLmRyb3BwZWQpe2Ryb3BwZWQ9dGhpcy5kcm9wcGVkO3RoaXMuZHJvcHBlZD1mYWxzZTt9CmlmKCh0aGlzLm9wdGlvbnMucmV2ZXJ0PT09ImludmFsaWQiJiYhZHJvcHBlZCl8fCh0aGlzLm9wdGlvbnMucmV2ZXJ0PT09InZhbGlkIiYmZHJvcHBlZCl8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT10cnVlfHwoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpJiZ0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LGRyb3BwZWQpKSl7JCh0aGlzLmhlbHBlcikuYW5pbWF0ZSh0aGlzLm9yaWdpbmFsUG9zaXRpb24scGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydER1cmF0aW9uLDEwKSxmdW5jdGlvbigpe2lmKHRoYXQuX3RyaWdnZXIoInN0b3AiLGV2ZW50KSE9PWZhbHNlKXt0aGF0Ll9jbGVhcigpO319KTt9ZWxzZXtpZih0aGlzLl90cmlnZ2VyKCJzdG9wIixldmVudCkhPT1mYWxzZSl7dGhpcy5fY2xlYXIoKTt9fQpyZXR1cm4gZmFsc2U7fSxfbW91c2VVcDpmdW5jdGlvbihldmVudCl7dGhpcy5fdW5ibG9ja0ZyYW1lcygpO2lmKCQudWkuZGRtYW5hZ2VyKXskLnVpLmRkbWFuYWdlci5kcmFnU3RvcCh0aGlzLGV2ZW50KTt9CmlmKHRoaXMuaGFuZGxlRWxlbWVudC5pcyhldmVudC50YXJnZXQpKXt0aGlzLmVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKTt9CnJldHVybiAkLnVpLm1vdXNlLnByb3RvdHlwZS5fbW91c2VVcC5jYWxsKHRoaXMsZXZlbnQpO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5oZWxwZXIuaXMoIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmciKSl7dGhpcy5fbW91c2VVcChuZXcgJC5FdmVudCgibW91c2V1cCIse3RhcmdldDp0aGlzLmVsZW1lbnRbMF19KSk7fWVsc2V7dGhpcy5fY2xlYXIoKTt9CnJldHVybiB0aGlzO30sX2dldEhhbmRsZTpmdW5jdGlvbihldmVudCl7cmV0dXJuIHRoaXMub3B0aW9ucy5oYW5kbGU/ISEkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCh0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaGFuZGxlKSkubGVuZ3RoOnRydWU7fSxfc2V0SGFuZGxlQ2xhc3NOYW1lOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVFbGVtZW50PXRoaXMub3B0aW9ucy5oYW5kbGU/dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSk6dGhpcy5lbGVtZW50O3RoaXMuX2FkZENsYXNzKHRoaXMuaGFuZGxlRWxlbWVudCwidWktZHJhZ2dhYmxlLWhhbmRsZSIpO30sX3JlbW92ZUhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaGFuZGxlRWxlbWVudCwidWktZHJhZ2dhYmxlLWhhbmRsZSIpO30sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihldmVudCl7dmFyIG89dGhpcy5vcHRpb25zLGhlbHBlcklzRnVuY3Rpb249JC5pc0Z1bmN0aW9uKG8uaGVscGVyKSxoZWxwZXI9aGVscGVySXNGdW5jdGlvbj8kKG8uaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSxbZXZlbnRdKSk6KG8uaGVscGVyPT09ImNsb25lIj90aGlzLmVsZW1lbnQuY2xvbmUoKS5yZW1vdmVBdHRyKCJpZCIpOnRoaXMuZWxlbWVudCk7aWYoIWhlbHBlci5wYXJlbnRzKCJib2R5IikubGVuZ3RoKXtoZWxwZXIuYXBwZW5kVG8oKG8uYXBwZW5kVG89PT0icGFyZW50Ij90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTpvLmFwcGVuZFRvKSk7fQppZihoZWxwZXJJc0Z1bmN0aW9uJiZoZWxwZXJbMF09PT10aGlzLmVsZW1lbnRbMF0pe3RoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKTt9CmlmKGhlbHBlclswXSE9PXRoaXMuZWxlbWVudFswXSYmISgvKGZpeGVkfGFic29sdXRlKS8pLnRlc3QoaGVscGVyLmNzcygicG9zaXRpb24iKSkpe2hlbHBlci5jc3MoInBvc2l0aW9uIiwiYWJzb2x1dGUiKTt9CnJldHVybiBoZWxwZXI7fSxfc2V0UG9zaXRpb25SZWxhdGl2ZTpmdW5jdGlvbigpe2lmKCEoL14oPzpyfGF8ZikvKS50ZXN0KHRoaXMuZWxlbWVudC5jc3MoInBvc2l0aW9uIikpKXt0aGlzLmVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjt9fSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbihvYmope2lmKHR5cGVvZiBvYmo9PT0ic3RyaW5nIil7b2JqPW9iai5zcGxpdCgiICIpO30KaWYoJC5pc0FycmF5KG9iaikpe29iaj17bGVmdDorb2JqWzBdLHRvcDorb2JqWzFdfHwwfTt9CmlmKCJsZWZ0ImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2subGVmdD1vYmoubGVmdCt0aGlzLm1hcmdpbnMubGVmdDt9CmlmKCJyaWdodCJpbiBvYmope3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC1vYmoucmlnaHQrdGhpcy5tYXJnaW5zLmxlZnQ7fQppZigidG9wImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2sudG9wPW9iai50b3ArdGhpcy5tYXJnaW5zLnRvcDt9CmlmKCJib3R0b20iaW4gb2JqKXt0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtb2JqLmJvdHRvbSt0aGlzLm1hcmdpbnMudG9wO319LF9pc1Jvb3ROb2RlOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybigvKGh0bWx8Ym9keSkvaSkudGVzdChlbGVtZW50LnRhZ05hbWUpfHxlbGVtZW50PT09dGhpcy5kb2N1bWVudFswXTt9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgcG89dGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCksZG9jdW1lbnQ9dGhpcy5kb2N1bWVudFswXTtpZih0aGlzLmNzc1Bvc2l0aW9uPT09ImFic29sdXRlIiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpe3BvLmxlZnQrPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTtwby50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpO30KaWYodGhpcy5faXNSb290Tm9kZSh0aGlzLm9mZnNldFBhcmVudFswXSkpe3BvPXt0b3A6MCxsZWZ0OjB9O30KcmV0dXJue3RvcDpwby50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLGxlZnQ6cG8ubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfTt9LF9nZXRSZWxhdGl2ZU9mZnNldDpmdW5jdGlvbigpe2lmKHRoaXMuY3NzUG9zaXRpb24hPT0icmVsYXRpdmUiKXtyZXR1cm57dG9wOjAsbGVmdDowfTt9CnZhciBwPXRoaXMuZWxlbWVudC5wb3NpdGlvbigpLHNjcm9sbElzUm9vdE5vZGU9dGhpcy5faXNSb290Tm9kZSh0aGlzLnNjcm9sbFBhcmVudFswXSk7cmV0dXJue3RvcDpwLnRvcC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSwxMCl8fDApKwooIXNjcm9sbElzUm9vdE5vZGU/dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6MCksbGVmdDpwLmxlZnQtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygibGVmdCIpLDEwKXx8MCkrCighc2Nyb2xsSXNSb290Tm9kZT90aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6MCl9O30sX2NhY2hlTWFyZ2luczpmdW5jdGlvbigpe3RoaXMubWFyZ2lucz17bGVmdDoocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCksdG9wOihwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSwxMCl8fDApLHJpZ2h0OihwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpLDEwKXx8MCksYm90dG9tOihwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSwxMCl8fDApfTt9LF9jYWNoZUhlbHBlclByb3BvcnRpb25zOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpfTt9LF9zZXRDb250YWlubWVudDpmdW5jdGlvbigpe3ZhciBpc1VzZXJTY3JvbGxhYmxlLGMsY2Usbz10aGlzLm9wdGlvbnMsZG9jdW1lbnQ9dGhpcy5kb2N1bWVudFswXTt0aGlzLnJlbGF0aXZlQ29udGFpbmVyPW51bGw7aWYoIW8uY29udGFpbm1lbnQpe3RoaXMuY29udGFpbm1lbnQ9bnVsbDtyZXR1cm47fQppZihvLmNvbnRhaW5tZW50PT09IndpbmRvdyIpe3RoaXMuY29udGFpbm1lbnQ9WyQod2luZG93KS5zY3JvbGxMZWZ0KCktdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCwkKHdpbmRvdykuc2Nyb2xsVG9wKCktdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsJCh3aW5kb3cpLnNjcm9sbExlZnQoKSskKHdpbmRvdykud2lkdGgoKS0KdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwkKHdpbmRvdykuc2Nyb2xsVG9wKCkrCigkKHdpbmRvdykuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLQp0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXTtyZXR1cm47fQppZihvLmNvbnRhaW5tZW50PT09ImRvY3VtZW50Iil7dGhpcy5jb250YWlubWVudD1bMCwwLCQoZG9jdW1lbnQpLndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwoJChkb2N1bWVudCkuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLQp0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXTtyZXR1cm47fQppZihvLmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yPT09QXJyYXkpe3RoaXMuY29udGFpbm1lbnQ9by5jb250YWlubWVudDtyZXR1cm47fQppZihvLmNvbnRhaW5tZW50PT09InBhcmVudCIpe28uY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZTt9CmM9JChvLmNvbnRhaW5tZW50KTtjZT1jWzBdO2lmKCFjZSl7cmV0dXJuO30KaXNVc2VyU2Nyb2xsYWJsZT0vKHNjcm9sbHxhdXRvKS8udGVzdChjLmNzcygib3ZlcmZsb3ciKSk7dGhpcy5jb250YWlubWVudD1bKHBhcnNlSW50KGMuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApKwoocGFyc2VJbnQoYy5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKSwocGFyc2VJbnQoYy5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSsKKHBhcnNlSW50KGMuY3NzKCJwYWRkaW5nVG9wIiksMTApfHwwKSwoaXNVc2VyU2Nyb2xsYWJsZT9NYXRoLm1heChjZS5zY3JvbGxXaWR0aCxjZS5vZmZzZXRXaWR0aCk6Y2Uub2Zmc2V0V2lkdGgpLQoocGFyc2VJbnQoYy5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSwxMCl8fDApLQoocGFyc2VJbnQoYy5jc3MoInBhZGRpbmdSaWdodCIpLDEwKXx8MCktCnRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtCnRoaXMubWFyZ2lucy5sZWZ0LQp0aGlzLm1hcmdpbnMucmlnaHQsKGlzVXNlclNjcm9sbGFibGU/TWF0aC5tYXgoY2Uuc2Nyb2xsSGVpZ2h0LGNlLm9mZnNldEhlaWdodCk6Y2Uub2Zmc2V0SGVpZ2h0KS0KKHBhcnNlSW50KGMuY3NzKCJib3JkZXJCb3R0b21XaWR0aCIpLDEwKXx8MCktCihwYXJzZUludChjLmNzcygicGFkZGluZ0JvdHRvbSIpLDEwKXx8MCktCnRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LQp0aGlzLm1hcmdpbnMudG9wLQp0aGlzLm1hcmdpbnMuYm90dG9tXTt0aGlzLnJlbGF0aXZlQ29udGFpbmVyPWM7fSxfY29udmVydFBvc2l0aW9uVG86ZnVuY3Rpb24oZCxwb3Mpe2lmKCFwb3Mpe3Bvcz10aGlzLnBvc2l0aW9uO30KdmFyIG1vZD1kPT09ImFic29sdXRlIj8xOi0xLHNjcm9sbElzUm9vdE5vZGU9dGhpcy5faXNSb290Tm9kZSh0aGlzLnNjcm9sbFBhcmVudFswXSk7cmV0dXJue3RvcDoocG9zLnRvcCsKdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wKm1vZCsKdGhpcy5vZmZzZXQucGFyZW50LnRvcCptb2QtCigodGhpcy5jc3NQb3NpdGlvbj09PSJmaXhlZCI/LXRoaXMub2Zmc2V0LnNjcm9sbC50b3A6KHNjcm9sbElzUm9vdE5vZGU/MDp0aGlzLm9mZnNldC5zY3JvbGwudG9wKSkqbW9kKSksbGVmdDoocG9zLmxlZnQrCnRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqbW9kKwp0aGlzLm9mZnNldC5wYXJlbnQubGVmdCptb2QtCigodGhpcy5jc3NQb3NpdGlvbj09PSJmaXhlZCI/LXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0OihzY3JvbGxJc1Jvb3ROb2RlPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQpKSptb2QpKX07fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbihldmVudCxjb25zdHJhaW5Qb3NpdGlvbil7dmFyIGNvbnRhaW5tZW50LGNvLHRvcCxsZWZ0LG89dGhpcy5vcHRpb25zLHNjcm9sbElzUm9vdE5vZGU9dGhpcy5faXNSb290Tm9kZSh0aGlzLnNjcm9sbFBhcmVudFswXSkscGFnZVg9ZXZlbnQucGFnZVgscGFnZVk9ZXZlbnQucGFnZVk7aWYoIXNjcm9sbElzUm9vdE5vZGV8fCF0aGlzLm9mZnNldC5zY3JvbGwpe3RoaXMub2Zmc2V0LnNjcm9sbD17dG9wOnRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLGxlZnQ6dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpfTt9CmlmKGNvbnN0cmFpblBvc2l0aW9uKXtpZih0aGlzLmNvbnRhaW5tZW50KXtpZih0aGlzLnJlbGF0aXZlQ29udGFpbmVyKXtjbz10aGlzLnJlbGF0aXZlQ29udGFpbmVyLm9mZnNldCgpO2NvbnRhaW5tZW50PVt0aGlzLmNvbnRhaW5tZW50WzBdK2NvLmxlZnQsdGhpcy5jb250YWlubWVudFsxXStjby50b3AsdGhpcy5jb250YWlubWVudFsyXStjby5sZWZ0LHRoaXMuY29udGFpbm1lbnRbM10rY28udG9wXTt9ZWxzZXtjb250YWlubWVudD10aGlzLmNvbnRhaW5tZW50O30KaWYoZXZlbnQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDxjb250YWlubWVudFswXSl7cGFnZVg9Y29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDt9CmlmKGV2ZW50LnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDxjb250YWlubWVudFsxXSl7cGFnZVk9Y29udGFpbm1lbnRbMV0rdGhpcy5vZmZzZXQuY2xpY2sudG9wO30KaWYoZXZlbnQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5jb250YWlubWVudFsyXSl7cGFnZVg9Y29udGFpbm1lbnRbMl0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDt9CmlmKGV2ZW50LnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5jb250YWlubWVudFszXSl7cGFnZVk9Y29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wO319CmlmKG8uZ3JpZCl7dG9wPW8uZ3JpZFsxXT90aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgocGFnZVktCnRoaXMub3JpZ2luYWxQYWdlWSkvby5ncmlkWzFdKSpvLmdyaWRbMV06dGhpcy5vcmlnaW5hbFBhZ2VZO3BhZ2VZPWNvbnRhaW5tZW50PygodG9wLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49Y29udGFpbm1lbnRbMV18fHRvcC10aGlzLm9mZnNldC5jbGljay50b3A+Y29udGFpbm1lbnRbM10pP3RvcDooKHRvcC10aGlzLm9mZnNldC5jbGljay50b3A+PWNvbnRhaW5tZW50WzFdKT90b3Atby5ncmlkWzFdOnRvcCtvLmdyaWRbMV0pKTp0b3A7bGVmdD1vLmdyaWRbMF0/dGhpcy5vcmlnaW5hbFBhZ2VYKwpNYXRoLnJvdW5kKChwYWdlWC10aGlzLm9yaWdpbmFsUGFnZVgpL28uZ3JpZFswXSkqby5ncmlkWzBdOnRoaXMub3JpZ2luYWxQYWdlWDtwYWdlWD1jb250YWlubWVudD8oKGxlZnQtdGhpcy5vZmZzZXQuY2xpY2subGVmdD49Y29udGFpbm1lbnRbMF18fGxlZnQtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5jb250YWlubWVudFsyXSk/bGVmdDooKGxlZnQtdGhpcy5vZmZzZXQuY2xpY2subGVmdD49Y29udGFpbm1lbnRbMF0pP2xlZnQtby5ncmlkWzBdOmxlZnQrby5ncmlkWzBdKSk6bGVmdDt9CmlmKG8uYXhpcz09PSJ5Iil7cGFnZVg9dGhpcy5vcmlnaW5hbFBhZ2VYO30KaWYoby5heGlzPT09IngiKXtwYWdlWT10aGlzLm9yaWdpbmFsUGFnZVk7fX0KcmV0dXJue3RvcDoocGFnZVktCnRoaXMub2Zmc2V0LmNsaWNrLnRvcC0KdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLQp0aGlzLm9mZnNldC5wYXJlbnQudG9wKwoodGhpcy5jc3NQb3NpdGlvbj09PSJmaXhlZCI/LXRoaXMub2Zmc2V0LnNjcm9sbC50b3A6KHNjcm9sbElzUm9vdE5vZGU/MDp0aGlzLm9mZnNldC5zY3JvbGwudG9wKSkpLGxlZnQ6KHBhZ2VYLQp0aGlzLm9mZnNldC5jbGljay5sZWZ0LQp0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LQp0aGlzLm9mZnNldC5wYXJlbnQubGVmdCsKKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLm9mZnNldC5zY3JvbGwubGVmdDooc2Nyb2xsSXNSb290Tm9kZT8wOnRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0KSkpfTt9LF9jbGVhcjpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaGVscGVyLCJ1aS1kcmFnZ2FibGUtZHJhZ2dpbmciKTtpZih0aGlzLmhlbHBlclswXSE9PXRoaXMuZWxlbWVudFswXSYmIXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCl7dGhpcy5oZWxwZXIucmVtb3ZlKCk7fQp0aGlzLmhlbHBlcj1udWxsO3RoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbD1mYWxzZTtpZih0aGlzLmRlc3Ryb3lPbkNsZWFyKXt0aGlzLmRlc3Ryb3koKTt9fSxfdHJpZ2dlcjpmdW5jdGlvbih0eXBlLGV2ZW50LHVpKXt1aT11aXx8dGhpcy5fdWlIYXNoKCk7JC51aS5wbHVnaW4uY2FsbCh0aGlzLHR5cGUsW2V2ZW50LHVpLHRoaXNdLHRydWUpO2lmKC9eKGRyYWd8c3RhcnR8c3RvcCkvLnRlc3QodHlwZSkpe3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7dWkub2Zmc2V0PXRoaXMucG9zaXRpb25BYnM7fQpyZXR1cm4gJC5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmNhbGwodGhpcyx0eXBlLGV2ZW50LHVpKTt9LHBsdWdpbnM6e30sX3VpSGFzaDpmdW5jdGlvbigpe3JldHVybntoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6dGhpcy5wb3NpdGlvbkFic307fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiY29ubmVjdFRvU29ydGFibGUiLHtzdGFydDpmdW5jdGlvbihldmVudCx1aSxkcmFnZ2FibGUpe3ZhciB1aVNvcnRhYmxlPSQuZXh0ZW5kKHt9LHVpLHtpdGVtOmRyYWdnYWJsZS5lbGVtZW50fSk7ZHJhZ2dhYmxlLnNvcnRhYmxlcz1bXTskKGRyYWdnYWJsZS5vcHRpb25zLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHNvcnRhYmxlPSQodGhpcykuc29ydGFibGUoImluc3RhbmNlIik7aWYoc29ydGFibGUmJiFzb3J0YWJsZS5vcHRpb25zLmRpc2FibGVkKXtkcmFnZ2FibGUuc29ydGFibGVzLnB1c2goc29ydGFibGUpO3NvcnRhYmxlLnJlZnJlc2hQb3NpdGlvbnMoKTtzb3J0YWJsZS5fdHJpZ2dlcigiYWN0aXZhdGUiLGV2ZW50LHVpU29ydGFibGUpO319KTt9LHN0b3A6ZnVuY3Rpb24oZXZlbnQsdWksZHJhZ2dhYmxlKXt2YXIgdWlTb3J0YWJsZT0kLmV4dGVuZCh7fSx1aSx7aXRlbTpkcmFnZ2FibGUuZWxlbWVudH0pO2RyYWdnYWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsPWZhbHNlOyQuZWFjaChkcmFnZ2FibGUuc29ydGFibGVzLGZ1bmN0aW9uKCl7dmFyIHNvcnRhYmxlPXRoaXM7aWYoc29ydGFibGUuaXNPdmVyKXtzb3J0YWJsZS5pc092ZXI9MDtkcmFnZ2FibGUuY2FuY2VsSGVscGVyUmVtb3ZhbD10cnVlO3NvcnRhYmxlLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2U7c29ydGFibGUuX3N0b3JlZENTUz17cG9zaXRpb246c29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCJwb3NpdGlvbiIpLHRvcDpzb3J0YWJsZS5wbGFjZWhvbGRlci5jc3MoInRvcCIpLGxlZnQ6c29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCJsZWZ0Iil9O3NvcnRhYmxlLl9tb3VzZVN0b3AoZXZlbnQpO3NvcnRhYmxlLm9wdGlvbnMuaGVscGVyPXNvcnRhYmxlLm9wdGlvbnMuX2hlbHBlcjt9ZWxzZXtzb3J0YWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsPXRydWU7c29ydGFibGUuX3RyaWdnZXIoImRlYWN0aXZhdGUiLGV2ZW50LHVpU29ydGFibGUpO319KTt9LGRyYWc6ZnVuY3Rpb24oZXZlbnQsdWksZHJhZ2dhYmxlKXskLmVhY2goZHJhZ2dhYmxlLnNvcnRhYmxlcyxmdW5jdGlvbigpe3ZhciBpbm5lcm1vc3RJbnRlcnNlY3Rpbmc9ZmFsc2Usc29ydGFibGU9dGhpcztzb3J0YWJsZS5wb3NpdGlvbkFicz1kcmFnZ2FibGUucG9zaXRpb25BYnM7c29ydGFibGUuaGVscGVyUHJvcG9ydGlvbnM9ZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zO3NvcnRhYmxlLm9mZnNldC5jbGljaz1kcmFnZ2FibGUub2Zmc2V0LmNsaWNrO2lmKHNvcnRhYmxlLl9pbnRlcnNlY3RzV2l0aChzb3J0YWJsZS5jb250YWluZXJDYWNoZSkpe2lubmVybW9zdEludGVyc2VjdGluZz10cnVlOyQuZWFjaChkcmFnZ2FibGUuc29ydGFibGVzLGZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbkFicz1kcmFnZ2FibGUucG9zaXRpb25BYnM7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz1kcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnM7dGhpcy5vZmZzZXQuY2xpY2s9ZHJhZ2dhYmxlLm9mZnNldC5jbGljaztpZih0aGlzIT09c29ydGFibGUmJnRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyQ2FjaGUpJiYkLmNvbnRhaW5zKHNvcnRhYmxlLmVsZW1lbnRbMF0sdGhpcy5lbGVtZW50WzBdKSl7aW5uZXJtb3N0SW50ZXJzZWN0aW5nPWZhbHNlO30KcmV0dXJuIGlubmVybW9zdEludGVyc2VjdGluZzt9KTt9CmlmKGlubmVybW9zdEludGVyc2VjdGluZyl7aWYoIXNvcnRhYmxlLmlzT3Zlcil7c29ydGFibGUuaXNPdmVyPTE7ZHJhZ2dhYmxlLl9wYXJlbnQ9dWkuaGVscGVyLnBhcmVudCgpO3NvcnRhYmxlLmN1cnJlbnRJdGVtPXVpLmhlbHBlci5hcHBlbmRUbyhzb3J0YWJsZS5lbGVtZW50KS5kYXRhKCJ1aS1zb3J0YWJsZS1pdGVtIix0cnVlKTtzb3J0YWJsZS5vcHRpb25zLl9oZWxwZXI9c29ydGFibGUub3B0aW9ucy5oZWxwZXI7c29ydGFibGUub3B0aW9ucy5oZWxwZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdWkuaGVscGVyWzBdO307ZXZlbnQudGFyZ2V0PXNvcnRhYmxlLmN1cnJlbnRJdGVtWzBdO3NvcnRhYmxlLl9tb3VzZUNhcHR1cmUoZXZlbnQsdHJ1ZSk7c29ydGFibGUuX21vdXNlU3RhcnQoZXZlbnQsdHJ1ZSx0cnVlKTtzb3J0YWJsZS5vZmZzZXQuY2xpY2sudG9wPWRyYWdnYWJsZS5vZmZzZXQuY2xpY2sudG9wO3NvcnRhYmxlLm9mZnNldC5jbGljay5sZWZ0PWRyYWdnYWJsZS5vZmZzZXQuY2xpY2subGVmdDtzb3J0YWJsZS5vZmZzZXQucGFyZW50LmxlZnQtPWRyYWdnYWJsZS5vZmZzZXQucGFyZW50LmxlZnQtCnNvcnRhYmxlLm9mZnNldC5wYXJlbnQubGVmdDtzb3J0YWJsZS5vZmZzZXQucGFyZW50LnRvcC09ZHJhZ2dhYmxlLm9mZnNldC5wYXJlbnQudG9wLQpzb3J0YWJsZS5vZmZzZXQucGFyZW50LnRvcDtkcmFnZ2FibGUuX3RyaWdnZXIoInRvU29ydGFibGUiLGV2ZW50KTtkcmFnZ2FibGUuZHJvcHBlZD1zb3J0YWJsZS5lbGVtZW50OyQuZWFjaChkcmFnZ2FibGUuc29ydGFibGVzLGZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7fSk7ZHJhZ2dhYmxlLmN1cnJlbnRJdGVtPWRyYWdnYWJsZS5lbGVtZW50O3NvcnRhYmxlLmZyb21PdXRzaWRlPWRyYWdnYWJsZTt9CmlmKHNvcnRhYmxlLmN1cnJlbnRJdGVtKXtzb3J0YWJsZS5fbW91c2VEcmFnKGV2ZW50KTt1aS5wb3NpdGlvbj1zb3J0YWJsZS5wb3NpdGlvbjt9fWVsc2V7aWYoc29ydGFibGUuaXNPdmVyKXtzb3J0YWJsZS5pc092ZXI9MDtzb3J0YWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsPXRydWU7c29ydGFibGUub3B0aW9ucy5fcmV2ZXJ0PXNvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0O3NvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0PWZhbHNlO3NvcnRhYmxlLl90cmlnZ2VyKCJvdXQiLGV2ZW50LHNvcnRhYmxlLl91aUhhc2goc29ydGFibGUpKTtzb3J0YWJsZS5fbW91c2VTdG9wKGV2ZW50LHRydWUpO3NvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0PXNvcnRhYmxlLm9wdGlvbnMuX3JldmVydDtzb3J0YWJsZS5vcHRpb25zLmhlbHBlcj1zb3J0YWJsZS5vcHRpb25zLl9oZWxwZXI7aWYoc29ydGFibGUucGxhY2Vob2xkZXIpe3NvcnRhYmxlLnBsYWNlaG9sZGVyLnJlbW92ZSgpO30KdWkuaGVscGVyLmFwcGVuZFRvKGRyYWdnYWJsZS5fcGFyZW50KTtkcmFnZ2FibGUuX3JlZnJlc2hPZmZzZXRzKGV2ZW50KTt1aS5wb3NpdGlvbj1kcmFnZ2FibGUuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQsdHJ1ZSk7ZHJhZ2dhYmxlLl90cmlnZ2VyKCJmcm9tU29ydGFibGUiLGV2ZW50KTtkcmFnZ2FibGUuZHJvcHBlZD1mYWxzZTskLmVhY2goZHJhZ2dhYmxlLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO30pO319fSk7fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiY3Vyc29yIix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdGFuY2Upe3ZhciB0PSQoImJvZHkiKSxvPWluc3RhbmNlLm9wdGlvbnM7aWYodC5jc3MoImN1cnNvciIpKXtvLl9jdXJzb3I9dC5jc3MoImN1cnNvciIpO30KdC5jc3MoImN1cnNvciIsby5jdXJzb3IpO30sc3RvcDpmdW5jdGlvbihldmVudCx1aSxpbnN0YW5jZSl7dmFyIG89aW5zdGFuY2Uub3B0aW9ucztpZihvLl9jdXJzb3IpeyQoImJvZHkiKS5jc3MoImN1cnNvciIsby5fY3Vyc29yKTt9fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwib3BhY2l0eSIse3N0YXJ0OmZ1bmN0aW9uKGV2ZW50LHVpLGluc3RhbmNlKXt2YXIgdD0kKHVpLmhlbHBlciksbz1pbnN0YW5jZS5vcHRpb25zO2lmKHQuY3NzKCJvcGFjaXR5Iikpe28uX29wYWNpdHk9dC5jc3MoIm9wYWNpdHkiKTt9CnQuY3NzKCJvcGFjaXR5IixvLm9wYWNpdHkpO30sc3RvcDpmdW5jdGlvbihldmVudCx1aSxpbnN0YW5jZSl7dmFyIG89aW5zdGFuY2Uub3B0aW9ucztpZihvLl9vcGFjaXR5KXskKHVpLmhlbHBlcikuY3NzKCJvcGFjaXR5IixvLl9vcGFjaXR5KTt9fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic2Nyb2xsIix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksaSl7aWYoIWkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuKXtpLnNjcm9sbFBhcmVudE5vdEhpZGRlbj1pLmhlbHBlci5zY3JvbGxQYXJlbnQoZmFsc2UpO30KaWYoaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bMF0hPT1pLmRvY3VtZW50WzBdJiZpLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXS50YWdOYW1lIT09IkhUTUwiKXtpLm92ZXJmbG93T2Zmc2V0PWkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuLm9mZnNldCgpO319LGRyYWc6ZnVuY3Rpb24oZXZlbnQsdWksaSl7dmFyIG89aS5vcHRpb25zLHNjcm9sbGVkPWZhbHNlLHNjcm9sbFBhcmVudD1pLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXSxkb2N1bWVudD1pLmRvY3VtZW50WzBdO2lmKHNjcm9sbFBhcmVudCE9PWRvY3VtZW50JiZzY3JvbGxQYXJlbnQudGFnTmFtZSE9PSJIVE1MIil7aWYoIW8uYXhpc3x8by5heGlzIT09IngiKXtpZigoaS5vdmVyZmxvd09mZnNldC50b3Arc2Nyb2xsUGFyZW50Lm9mZnNldEhlaWdodCktZXZlbnQucGFnZVk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsUGFyZW50LnNjcm9sbFRvcD1zY3JvbGxlZD1zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wK28uc2Nyb2xsU3BlZWQ7fWVsc2UgaWYoZXZlbnQucGFnZVktaS5vdmVyZmxvd09mZnNldC50b3A8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsUGFyZW50LnNjcm9sbFRvcD1zY3JvbGxlZD1zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wLW8uc2Nyb2xsU3BlZWQ7fX0KaWYoIW8uYXhpc3x8by5heGlzIT09InkiKXtpZigoaS5vdmVyZmxvd09mZnNldC5sZWZ0K3Njcm9sbFBhcmVudC5vZmZzZXRXaWR0aCktZXZlbnQucGFnZVg8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQ9c2Nyb2xsZWQ9c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQrby5zY3JvbGxTcGVlZDt9ZWxzZSBpZihldmVudC5wYWdlWC1pLm92ZXJmbG93T2Zmc2V0LmxlZnQ8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQ9c2Nyb2xsZWQ9c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQtby5zY3JvbGxTcGVlZDt9fX1lbHNle2lmKCFvLmF4aXN8fG8uYXhpcyE9PSJ4Iil7aWYoZXZlbnQucGFnZVktJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JChkb2N1bWVudCkuc2Nyb2xsVG9wKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLW8uc2Nyb2xsU3BlZWQpO31lbHNlIGlmKCQod2luZG93KS5oZWlnaHQoKS0oZXZlbnQucGFnZVktJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPSQoZG9jdW1lbnQpLnNjcm9sbFRvcCgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKStvLnNjcm9sbFNwZWVkKTt9fQppZighby5heGlzfHxvLmF4aXMhPT0ieSIpe2lmKGV2ZW50LnBhZ2VYLSQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKS1vLnNjcm9sbFNwZWVkKTt9ZWxzZSBpZigkKHdpbmRvdykud2lkdGgoKS0oZXZlbnQucGFnZVgtJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStvLnNjcm9sbFNwZWVkKTt9fX0KaWYoc2Nyb2xsZWQhPT1mYWxzZSYmJC51aS5kZG1hbmFnZXImJiFvLmRyb3BCZWhhdmlvdXIpeyQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGksZXZlbnQpO319fSk7JC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzbmFwIix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksaSl7dmFyIG89aS5vcHRpb25zO2kuc25hcEVsZW1lbnRzPVtdOyQoby5zbmFwLmNvbnN0cnVjdG9yIT09U3RyaW5nPyhvLnNuYXAuaXRlbXN8fCI6ZGF0YSh1aS1kcmFnZ2FibGUpIik6by5zbmFwKS5lYWNoKGZ1bmN0aW9uKCl7dmFyICR0PSQodGhpcyksJG89JHQub2Zmc2V0KCk7aWYodGhpcyE9PWkuZWxlbWVudFswXSl7aS5zbmFwRWxlbWVudHMucHVzaCh7aXRlbTp0aGlzLHdpZHRoOiR0Lm91dGVyV2lkdGgoKSxoZWlnaHQ6JHQub3V0ZXJIZWlnaHQoKSx0b3A6JG8udG9wLGxlZnQ6JG8ubGVmdH0pO319KTt9LGRyYWc6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdCl7dmFyIHRzLGJzLGxzLHJzLGwscix0LGIsaSxmaXJzdCxvPWluc3Qub3B0aW9ucyxkPW8uc25hcFRvbGVyYW5jZSx4MT11aS5vZmZzZXQubGVmdCx4Mj14MStpbnN0LmhlbHBlclByb3BvcnRpb25zLndpZHRoLHkxPXVpLm9mZnNldC50b3AseTI9eTEraW5zdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7Zm9yKGk9aW5zdC5zbmFwRWxlbWVudHMubGVuZ3RoLTE7aT49MDtpLS0pe2w9aW5zdC5zbmFwRWxlbWVudHNbaV0ubGVmdC1pbnN0Lm1hcmdpbnMubGVmdDtyPWwraW5zdC5zbmFwRWxlbWVudHNbaV0ud2lkdGg7dD1pbnN0LnNuYXBFbGVtZW50c1tpXS50b3AtaW5zdC5tYXJnaW5zLnRvcDtiPXQraW5zdC5zbmFwRWxlbWVudHNbaV0uaGVpZ2h0O2lmKHgyPGwtZHx8eDE+citkfHx5Mjx0LWR8fHkxPmIrZHx8ISQuY29udGFpbnMoaW5zdC5zbmFwRWxlbWVudHNbaV0uaXRlbS5vd25lckRvY3VtZW50LGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0pKXtpZihpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyl7KGluc3Qub3B0aW9ucy5zbmFwLnJlbGVhc2UmJmluc3Qub3B0aW9ucy5zbmFwLnJlbGVhc2UuY2FsbChpbnN0LmVsZW1lbnQsZXZlbnQsJC5leHRlbmQoaW5zdC5fdWlIYXNoKCkse3NuYXBJdGVtOmluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW19KSkpO30KaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmc9ZmFsc2U7Y29udGludWU7fQppZihvLnNuYXBNb2RlIT09ImlubmVyIil7dHM9TWF0aC5hYnModC15Mik8PWQ7YnM9TWF0aC5hYnMoYi15MSk8PWQ7bHM9TWF0aC5hYnMobC14Mik8PWQ7cnM9TWF0aC5hYnMoci14MSk8PWQ7aWYodHMpe3VpLnBvc2l0aW9uLnRvcD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6dC1pbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3A7fQppZihicyl7dWkucG9zaXRpb24udG9wPWluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDpiLGxlZnQ6MH0pLnRvcDt9CmlmKGxzKXt1aS5wb3NpdGlvbi5sZWZ0PWluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6bC1pbnN0LmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdDt9CmlmKHJzKXt1aS5wb3NpdGlvbi5sZWZ0PWluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6cn0pLmxlZnQ7fX0KZmlyc3Q9KHRzfHxic3x8bHN8fHJzKTtpZihvLnNuYXBNb2RlIT09Im91dGVyIil7dHM9TWF0aC5hYnModC15MSk8PWQ7YnM9TWF0aC5hYnMoYi15Mik8PWQ7bHM9TWF0aC5hYnMobC14MSk8PWQ7cnM9TWF0aC5hYnMoci14Mik8PWQ7aWYodHMpe3VpLnBvc2l0aW9uLnRvcD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6dCxsZWZ0OjB9KS50b3A7fQppZihicyl7dWkucG9zaXRpb24udG9wPWluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDpiLWluc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcDt9CmlmKGxzKXt1aS5wb3NpdGlvbi5sZWZ0PWluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6bH0pLmxlZnQ7fQppZihycyl7dWkucG9zaXRpb24ubGVmdD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0OnItaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQ7fX0KaWYoIWluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nJiYodHN8fGJzfHxsc3x8cnN8fGZpcnN0KSl7KGluc3Qub3B0aW9ucy5zbmFwLnNuYXAmJmluc3Qub3B0aW9ucy5zbmFwLnNuYXAuY2FsbChpbnN0LmVsZW1lbnQsZXZlbnQsJC5leHRlbmQoaW5zdC5fdWlIYXNoKCkse3NuYXBJdGVtOmluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW19KSkpO30KaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmc9KHRzfHxic3x8bHN8fHJzfHxmaXJzdCk7fX19KTskLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsInN0YWNrIix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdGFuY2Upe3ZhciBtaW4sbz1pbnN0YW5jZS5vcHRpb25zLGdyb3VwPSQubWFrZUFycmF5KCQoby5zdGFjaykpLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4ocGFyc2VJbnQoJChhKS5jc3MoInpJbmRleCIpLDEwKXx8MCktCihwYXJzZUludCgkKGIpLmNzcygiekluZGV4IiksMTApfHwwKTt9KTtpZighZ3JvdXAubGVuZ3RoKXtyZXR1cm47fQptaW49cGFyc2VJbnQoJChncm91cFswXSkuY3NzKCJ6SW5kZXgiKSwxMCl8fDA7JChncm91cCkuZWFjaChmdW5jdGlvbihpKXskKHRoaXMpLmNzcygiekluZGV4IixtaW4raSk7fSk7dGhpcy5jc3MoInpJbmRleCIsKG1pbitncm91cC5sZW5ndGgpKTt9fSk7JC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJ6SW5kZXgiLHtzdGFydDpmdW5jdGlvbihldmVudCx1aSxpbnN0YW5jZSl7dmFyIHQ9JCh1aS5oZWxwZXIpLG89aW5zdGFuY2Uub3B0aW9ucztpZih0LmNzcygiekluZGV4Iikpe28uX3pJbmRleD10LmNzcygiekluZGV4Iik7fQp0LmNzcygiekluZGV4IixvLnpJbmRleCk7fSxzdG9wOmZ1bmN0aW9uKGV2ZW50LHVpLGluc3RhbmNlKXt2YXIgbz1pbnN0YW5jZS5vcHRpb25zO2lmKG8uX3pJbmRleCl7JCh1aS5oZWxwZXIpLmNzcygiekluZGV4IixvLl96SW5kZXgpO319fSk7dmFyIHdpZGdldHNEcmFnZ2FibGU9JC51aS5kcmFnZ2FibGU7JC53aWRnZXQoInVpLmRyb3BwYWJsZSIse3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6ImRyb3AiLG9wdGlvbnM6e2FjY2VwdDoiKiIsYWRkQ2xhc3Nlczp0cnVlLGdyZWVkeTpmYWxzZSxzY29wZToiZGVmYXVsdCIsdG9sZXJhbmNlOiJpbnRlcnNlY3QiLGFjdGl2YXRlOm51bGwsZGVhY3RpdmF0ZTpudWxsLGRyb3A6bnVsbCxvdXQ6bnVsbCxvdmVyOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgcHJvcG9ydGlvbnMsbz10aGlzLm9wdGlvbnMsYWNjZXB0PW8uYWNjZXB0O3RoaXMuaXNvdmVyPWZhbHNlO3RoaXMuaXNvdXQ9dHJ1ZTt0aGlzLmFjY2VwdD0kLmlzRnVuY3Rpb24oYWNjZXB0KT9hY2NlcHQ6ZnVuY3Rpb24oZCl7cmV0dXJuIGQuaXMoYWNjZXB0KTt9O3RoaXMucHJvcG9ydGlvbnM9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoKXtwcm9wb3J0aW9ucz1hcmd1bWVudHNbMF07fWVsc2V7cmV0dXJuIHByb3BvcnRpb25zP3Byb3BvcnRpb25zOnByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaGVpZ2h0OnRoaXMuZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9O319O3RoaXMuX2FkZFRvTWFuYWdlcihvLnNjb3BlKTtvLmFkZENsYXNzZXMmJnRoaXMuX2FkZENsYXNzKCJ1aS1kcm9wcGFibGUiKTt9LF9hZGRUb01hbmFnZXI6ZnVuY3Rpb24oc2NvcGUpeyQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbc2NvcGVdPSQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbc2NvcGVdfHxbXTskLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Njb3BlXS5wdXNoKHRoaXMpO30sX3NwbGljZTpmdW5jdGlvbihkcm9wKXt2YXIgaT0wO2Zvcig7aTxkcm9wLmxlbmd0aDtpKyspe2lmKGRyb3BbaV09PT10aGlzKXtkcm9wLnNwbGljZShpLDEpO319fSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciBkcm9wPSQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXTt0aGlzLl9zcGxpY2UoZHJvcCk7fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYoa2V5PT09ImFjY2VwdCIpe3RoaXMuYWNjZXB0PSQuaXNGdW5jdGlvbih2YWx1ZSk/dmFsdWU6ZnVuY3Rpb24oZCl7cmV0dXJuIGQuaXModmFsdWUpO307fWVsc2UgaWYoa2V5PT09InNjb3BlIil7dmFyIGRyb3A9JC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0aGlzLm9wdGlvbnMuc2NvcGVdO3RoaXMuX3NwbGljZShkcm9wKTt0aGlzLl9hZGRUb01hbmFnZXIodmFsdWUpO30KdGhpcy5fc3VwZXIoa2V5LHZhbHVlKTt9LF9hY3RpdmF0ZTpmdW5jdGlvbihldmVudCl7dmFyIGRyYWdnYWJsZT0kLnVpLmRkbWFuYWdlci5jdXJyZW50O3RoaXMuX2FkZEFjdGl2ZUNsYXNzKCk7aWYoZHJhZ2dhYmxlKXt0aGlzLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZXZlbnQsdGhpcy51aShkcmFnZ2FibGUpKTt9fSxfZGVhY3RpdmF0ZTpmdW5jdGlvbihldmVudCl7dmFyIGRyYWdnYWJsZT0kLnVpLmRkbWFuYWdlci5jdXJyZW50O3RoaXMuX3JlbW92ZUFjdGl2ZUNsYXNzKCk7aWYoZHJhZ2dhYmxlKXt0aGlzLl90cmlnZ2VyKCJkZWFjdGl2YXRlIixldmVudCx0aGlzLnVpKGRyYWdnYWJsZSkpO319LF9vdmVyOmZ1bmN0aW9uKGV2ZW50KXt2YXIgZHJhZ2dhYmxlPSQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoIWRyYWdnYWJsZXx8KGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtyZXR1cm47fQppZih0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtfHxkcmFnZ2FibGUuZWxlbWVudCkpKXt0aGlzLl9hZGRIb3ZlckNsYXNzKCk7dGhpcy5fdHJpZ2dlcigib3ZlciIsZXZlbnQsdGhpcy51aShkcmFnZ2FibGUpKTt9fSxfb3V0OmZ1bmN0aW9uKGV2ZW50KXt2YXIgZHJhZ2dhYmxlPSQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoIWRyYWdnYWJsZXx8KGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtyZXR1cm47fQppZih0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtfHxkcmFnZ2FibGUuZWxlbWVudCkpKXt0aGlzLl9yZW1vdmVIb3ZlckNsYXNzKCk7dGhpcy5fdHJpZ2dlcigib3V0IixldmVudCx0aGlzLnVpKGRyYWdnYWJsZSkpO319LF9kcm9wOmZ1bmN0aW9uKGV2ZW50LGN1c3RvbSl7dmFyIGRyYWdnYWJsZT1jdXN0b218fCQudWkuZGRtYW5hZ2VyLmN1cnJlbnQsY2hpbGRyZW5JbnRlcnNlY3Rpb249ZmFsc2U7aWYoIWRyYWdnYWJsZXx8KGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtyZXR1cm4gZmFsc2U7fQp0aGlzLmVsZW1lbnQuZmluZCgiOmRhdGEodWktZHJvcHBhYmxlKSIpLm5vdCgiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpLmVhY2goZnVuY3Rpb24oKXt2YXIgaW5zdD0kKHRoaXMpLmRyb3BwYWJsZSgiaW5zdGFuY2UiKTtpZihpbnN0Lm9wdGlvbnMuZ3JlZWR5JiYhaW5zdC5vcHRpb25zLmRpc2FibGVkJiZpbnN0Lm9wdGlvbnMuc2NvcGU9PT1kcmFnZ2FibGUub3B0aW9ucy5zY29wZSYmaW5zdC5hY2NlcHQuY2FsbChpbnN0LmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpKSYmaW50ZXJzZWN0KGRyYWdnYWJsZSwkLmV4dGVuZChpbnN0LHtvZmZzZXQ6aW5zdC5lbGVtZW50Lm9mZnNldCgpfSksaW5zdC5vcHRpb25zLnRvbGVyYW5jZSxldmVudCkpe2NoaWxkcmVuSW50ZXJzZWN0aW9uPXRydWU7cmV0dXJuIGZhbHNlO319KTtpZihjaGlsZHJlbkludGVyc2VjdGlvbil7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpKSl7dGhpcy5fcmVtb3ZlQWN0aXZlQ2xhc3MoKTt0aGlzLl9yZW1vdmVIb3ZlckNsYXNzKCk7dGhpcy5fdHJpZ2dlcigiZHJvcCIsZXZlbnQsdGhpcy51aShkcmFnZ2FibGUpKTtyZXR1cm4gdGhpcy5lbGVtZW50O30KcmV0dXJuIGZhbHNlO30sdWk6ZnVuY3Rpb24oYyl7cmV0dXJue2RyYWdnYWJsZTooYy5jdXJyZW50SXRlbXx8Yy5lbGVtZW50KSxoZWxwZXI6Yy5oZWxwZXIscG9zaXRpb246Yy5wb3NpdGlvbixvZmZzZXQ6Yy5wb3NpdGlvbkFic307fSxfYWRkSG92ZXJDbGFzczpmdW5jdGlvbigpe3RoaXMuX2FkZENsYXNzKCJ1aS1kcm9wcGFibGUtaG92ZXIiKTt9LF9yZW1vdmVIb3ZlckNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlQ2xhc3MoInVpLWRyb3BwYWJsZS1ob3ZlciIpO30sX2FkZEFjdGl2ZUNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fYWRkQ2xhc3MoInVpLWRyb3BwYWJsZS1hY3RpdmUiKTt9LF9yZW1vdmVBY3RpdmVDbGFzczpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUNsYXNzKCJ1aS1kcm9wcGFibGUtYWN0aXZlIik7fX0pO3ZhciBpbnRlcnNlY3Q9JC51aS5pbnRlcnNlY3Q9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gaXNPdmVyQXhpcyh4LHJlZmVyZW5jZSxzaXplKXtyZXR1cm4oeD49cmVmZXJlbmNlKSYmKHg8KHJlZmVyZW5jZStzaXplKSk7fQpyZXR1cm4gZnVuY3Rpb24oZHJhZ2dhYmxlLGRyb3BwYWJsZSx0b2xlcmFuY2VNb2RlLGV2ZW50KXtpZighZHJvcHBhYmxlLm9mZnNldCl7cmV0dXJuIGZhbHNlO30KdmFyIHgxPShkcmFnZ2FibGUucG9zaXRpb25BYnN8fGRyYWdnYWJsZS5wb3NpdGlvbi5hYnNvbHV0ZSkubGVmdCtkcmFnZ2FibGUubWFyZ2lucy5sZWZ0LHkxPShkcmFnZ2FibGUucG9zaXRpb25BYnN8fGRyYWdnYWJsZS5wb3NpdGlvbi5hYnNvbHV0ZSkudG9wK2RyYWdnYWJsZS5tYXJnaW5zLnRvcCx4Mj14MStkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgseTI9eTErZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsPWRyb3BwYWJsZS5vZmZzZXQubGVmdCx0PWRyb3BwYWJsZS5vZmZzZXQudG9wLHI9bCtkcm9wcGFibGUucHJvcG9ydGlvbnMoKS53aWR0aCxiPXQrZHJvcHBhYmxlLnByb3BvcnRpb25zKCkuaGVpZ2h0O3N3aXRjaCh0b2xlcmFuY2VNb2RlKXtjYXNlImZpdCI6cmV0dXJuKGw8PXgxJiZ4Mjw9ciYmdDw9eTEmJnkyPD1iKTtjYXNlImludGVyc2VjdCI6cmV0dXJuKGw8eDErKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yKSYmeDItKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yKTxyJiZ0PHkxKyhkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzIpJiZ5Mi0oZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yKTxiKTtjYXNlInBvaW50ZXIiOnJldHVybiBpc092ZXJBeGlzKGV2ZW50LnBhZ2VZLHQsZHJvcHBhYmxlLnByb3BvcnRpb25zKCkuaGVpZ2h0KSYmaXNPdmVyQXhpcyhldmVudC5wYWdlWCxsLGRyb3BwYWJsZS5wcm9wb3J0aW9ucygpLndpZHRoKTtjYXNlInRvdWNoIjpyZXR1cm4oKHkxPj10JiZ5MTw9Yil8fCh5Mj49dCYmeTI8PWIpfHwoeTE8dCYmeTI+YikpJiYoKHgxPj1sJiZ4MTw9cil8fCh4Mj49bCYmeDI8PXIpfHwoeDE8bCYmeDI+cikpO2RlZmF1bHQ6cmV0dXJuIGZhbHNlO319O30pKCk7JC51aS5kZG1hbmFnZXI9e2N1cnJlbnQ6bnVsbCxkcm9wcGFibGVzOnsiZGVmYXVsdCI6W119LHByZXBhcmVPZmZzZXRzOmZ1bmN0aW9uKHQsZXZlbnQpe3ZhciBpLGosbT0kLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Qub3B0aW9ucy5zY29wZV18fFtdLHR5cGU9ZXZlbnQ/ZXZlbnQudHlwZTpudWxsLGxpc3Q9KHQuY3VycmVudEl0ZW18fHQuZWxlbWVudCkuZmluZCgiOmRhdGEodWktZHJvcHBhYmxlKSIpLmFkZEJhY2soKTtkcm9wcGFibGVzTG9vcDpmb3IoaT0wO2k8bS5sZW5ndGg7aSsrKXtpZihtW2ldLm9wdGlvbnMuZGlzYWJsZWR8fCh0JiYhbVtpXS5hY2NlcHQuY2FsbChtW2ldLmVsZW1lbnRbMF0sKHQuY3VycmVudEl0ZW18fHQuZWxlbWVudCkpKSl7Y29udGludWU7fQpmb3Ioaj0wO2o8bGlzdC5sZW5ndGg7aisrKXtpZihsaXN0W2pdPT09bVtpXS5lbGVtZW50WzBdKXttW2ldLnByb3BvcnRpb25zKCkuaGVpZ2h0PTA7Y29udGludWUgZHJvcHBhYmxlc0xvb3A7fX0KbVtpXS52aXNpYmxlPW1baV0uZWxlbWVudC5jc3MoImRpc3BsYXkiKSE9PSJub25lIjtpZighbVtpXS52aXNpYmxlKXtjb250aW51ZTt9CmlmKHR5cGU9PT0ibW91c2Vkb3duIil7bVtpXS5fYWN0aXZhdGUuY2FsbChtW2ldLGV2ZW50KTt9Cm1baV0ub2Zmc2V0PW1baV0uZWxlbWVudC5vZmZzZXQoKTttW2ldLnByb3BvcnRpb25zKHt3aWR0aDptW2ldLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaGVpZ2h0Om1baV0uZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9KTt9fSxkcm9wOmZ1bmN0aW9uKGRyYWdnYWJsZSxldmVudCl7dmFyIGRyb3BwZWQ9ZmFsc2U7JC5lYWNoKCgkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2RyYWdnYWJsZS5vcHRpb25zLnNjb3BlXXx8W10pLnNsaWNlKCksZnVuY3Rpb24oKXtpZighdGhpcy5vcHRpb25zKXtyZXR1cm47fQppZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLnZpc2libGUmJmludGVyc2VjdChkcmFnZ2FibGUsdGhpcyx0aGlzLm9wdGlvbnMudG9sZXJhbmNlLGV2ZW50KSl7ZHJvcHBlZD10aGlzLl9kcm9wLmNhbGwodGhpcyxldmVudCl8fGRyb3BwZWQ7fQppZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLnZpc2libGUmJnRoaXMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KSkpe3RoaXMuaXNvdXQ9dHJ1ZTt0aGlzLmlzb3Zlcj1mYWxzZTt0aGlzLl9kZWFjdGl2YXRlLmNhbGwodGhpcyxldmVudCk7fX0pO3JldHVybiBkcm9wcGVkO30sZHJhZ1N0YXJ0OmZ1bmN0aW9uKGRyYWdnYWJsZSxldmVudCl7ZHJhZ2dhYmxlLmVsZW1lbnQucGFyZW50c1VudGlsKCJib2R5Iikub24oInNjcm9sbC5kcm9wcGFibGUiLGZ1bmN0aW9uKCl7aWYoIWRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMpeyQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGRyYWdnYWJsZSxldmVudCk7fX0pO30sZHJhZzpmdW5jdGlvbihkcmFnZ2FibGUsZXZlbnQpe2lmKGRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMpeyQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGRyYWdnYWJsZSxldmVudCk7fQokLmVhY2goJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tkcmFnZ2FibGUub3B0aW9ucy5zY29wZV18fFtdLGZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkfHx0aGlzLmdyZWVkeUNoaWxkfHwhdGhpcy52aXNpYmxlKXtyZXR1cm47fQp2YXIgcGFyZW50SW5zdGFuY2Usc2NvcGUscGFyZW50LGludGVyc2VjdHM9aW50ZXJzZWN0KGRyYWdnYWJsZSx0aGlzLHRoaXMub3B0aW9ucy50b2xlcmFuY2UsZXZlbnQpLGM9IWludGVyc2VjdHMmJnRoaXMuaXNvdmVyPyJpc291dCI6KGludGVyc2VjdHMmJiF0aGlzLmlzb3Zlcj8iaXNvdmVyIjpudWxsKTtpZighYyl7cmV0dXJuO30KaWYodGhpcy5vcHRpb25zLmdyZWVkeSl7c2NvcGU9dGhpcy5vcHRpb25zLnNjb3BlO3BhcmVudD10aGlzLmVsZW1lbnQucGFyZW50cygiOmRhdGEodWktZHJvcHBhYmxlKSIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmRyb3BwYWJsZSgiaW5zdGFuY2UiKS5vcHRpb25zLnNjb3BlPT09c2NvcGU7fSk7aWYocGFyZW50Lmxlbmd0aCl7cGFyZW50SW5zdGFuY2U9JChwYXJlbnRbMF0pLmRyb3BwYWJsZSgiaW5zdGFuY2UiKTtwYXJlbnRJbnN0YW5jZS5ncmVlZHlDaGlsZD0oYz09PSJpc292ZXIiKTt9fQppZihwYXJlbnRJbnN0YW5jZSYmYz09PSJpc292ZXIiKXtwYXJlbnRJbnN0YW5jZS5pc292ZXI9ZmFsc2U7cGFyZW50SW5zdGFuY2UuaXNvdXQ9dHJ1ZTtwYXJlbnRJbnN0YW5jZS5fb3V0LmNhbGwocGFyZW50SW5zdGFuY2UsZXZlbnQpO30KdGhpc1tjXT10cnVlO3RoaXNbYz09PSJpc291dCI/Imlzb3ZlciI6Imlzb3V0Il09ZmFsc2U7dGhpc1tjPT09Imlzb3ZlciI/Il9vdmVyIjoiX291dCJdLmNhbGwodGhpcyxldmVudCk7aWYocGFyZW50SW5zdGFuY2UmJmM9PT0iaXNvdXQiKXtwYXJlbnRJbnN0YW5jZS5pc291dD1mYWxzZTtwYXJlbnRJbnN0YW5jZS5pc292ZXI9dHJ1ZTtwYXJlbnRJbnN0YW5jZS5fb3Zlci5jYWxsKHBhcmVudEluc3RhbmNlLGV2ZW50KTt9fSk7fSxkcmFnU3RvcDpmdW5jdGlvbihkcmFnZ2FibGUsZXZlbnQpe2RyYWdnYWJsZS5lbGVtZW50LnBhcmVudHNVbnRpbCgiYm9keSIpLm9mZigic2Nyb2xsLmRyb3BwYWJsZSIpO2lmKCFkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhkcmFnZ2FibGUsZXZlbnQpO319fTtpZigkLnVpQmFja0NvbXBhdCE9PWZhbHNlKXskLndpZGdldCgidWkuZHJvcHBhYmxlIiwkLnVpLmRyb3BwYWJsZSx7b3B0aW9uczp7aG92ZXJDbGFzczpmYWxzZSxhY3RpdmVDbGFzczpmYWxzZX0sX2FkZEFjdGl2ZUNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKTtpZih0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3Mpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO319LF9yZW1vdmVBY3RpdmVDbGFzczpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7aWYodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTt9fSxfYWRkSG92ZXJDbGFzczpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7aWYodGhpcy5vcHRpb25zLmhvdmVyQ2xhc3Mpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7fX0sX3JlbW92ZUhvdmVyQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpO2lmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpO319fSk7fQp2YXIgd2lkZ2V0c0Ryb3BwYWJsZT0kLnVpLmRyb3BwYWJsZTskLndpZGdldCgidWkucmVzaXphYmxlIiwkLnVpLm1vdXNlLHt2ZXJzaW9uOiIxLjEyLjEiLHdpZGdldEV2ZW50UHJlZml4OiJyZXNpemUiLG9wdGlvbnM6e2Fsc29SZXNpemU6ZmFsc2UsYW5pbWF0ZTpmYWxzZSxhbmltYXRlRHVyYXRpb246InNsb3ciLGFuaW1hdGVFYXNpbmc6InN3aW5nIixhc3BlY3RSYXRpbzpmYWxzZSxhdXRvSGlkZTpmYWxzZSxjbGFzc2VzOnsidWktcmVzaXphYmxlLXNlIjoidWktaWNvbiB1aS1pY29uLWdyaXBzbWFsbC1kaWFnb25hbC1zZSJ9LGNvbnRhaW5tZW50OmZhbHNlLGdob3N0OmZhbHNlLGdyaWQ6ZmFsc2UsaGFuZGxlczoiZSxzLHNlIixoZWxwZXI6ZmFsc2UsbWF4SGVpZ2h0Om51bGwsbWF4V2lkdGg6bnVsbCxtaW5IZWlnaHQ6MTAsbWluV2lkdGg6MTAsekluZGV4OjkwLHJlc2l6ZTpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxfbnVtOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSl8fDA7fSxfaXNOdW1iZXI6ZnVuY3Rpb24odmFsdWUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KHZhbHVlKSk7fSxfaGFzU2Nyb2xsOmZ1bmN0aW9uKGVsLGEpe2lmKCQoZWwpLmNzcygib3ZlcmZsb3ciKT09PSJoaWRkZW4iKXtyZXR1cm4gZmFsc2U7fQp2YXIgc2Nyb2xsPShhJiZhPT09ImxlZnQiKT8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCIsaGFzPWZhbHNlO2lmKGVsW3Njcm9sbF0+MCl7cmV0dXJuIHRydWU7fQplbFtzY3JvbGxdPTE7aGFzPShlbFtzY3JvbGxdPjApO2VsW3Njcm9sbF09MDtyZXR1cm4gaGFzO30sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBtYXJnaW5zLG89dGhpcy5vcHRpb25zLHRoYXQ9dGhpczt0aGlzLl9hZGRDbGFzcygidWktcmVzaXphYmxlIik7JC5leHRlbmQodGhpcyx7X2FzcGVjdFJhdGlvOiEhKG8uYXNwZWN0UmF0aW8pLGFzcGVjdFJhdGlvOm8uYXNwZWN0UmF0aW8sb3JpZ2luYWxFbGVtZW50OnRoaXMuZWxlbWVudCxfcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50czpbXSxfaGVscGVyOm8uaGVscGVyfHxvLmdob3N0fHxvLmFuaW1hdGU/by5oZWxwZXJ8fCJ1aS1yZXNpemFibGUtaGVscGVyIjpudWxsfSk7aWYodGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9eKGNhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZykkL2kpKXt0aGlzLmVsZW1lbnQud3JhcCgkKCI8ZGl2IGNsYXNzPSd1aS13cmFwcGVyJyBzdHlsZT0nb3ZlcmZsb3c6IGhpZGRlbjsnPjwvZGl2PiIpLmNzcyh7cG9zaXRpb246dGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSx3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSx0b3A6dGhpcy5lbGVtZW50LmNzcygidG9wIiksbGVmdDp0aGlzLmVsZW1lbnQuY3NzKCJsZWZ0Iil9KSk7dGhpcy5lbGVtZW50PXRoaXMuZWxlbWVudC5wYXJlbnQoKS5kYXRhKCJ1aS1yZXNpemFibGUiLHRoaXMuZWxlbWVudC5yZXNpemFibGUoImluc3RhbmNlIikpO3RoaXMuZWxlbWVudElzV3JhcHBlcj10cnVlO21hcmdpbnM9e21hcmdpblRvcDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpblRvcCIpLG1hcmdpblJpZ2h0OnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKSxtYXJnaW5Cb3R0b206dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSxtYXJnaW5MZWZ0OnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luTGVmdCIpfTt0aGlzLmVsZW1lbnQuY3NzKG1hcmdpbnMpO3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luIiwwKTt0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGU9dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiKTt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIsIm5vbmUiKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLnB1c2godGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtwb3NpdGlvbjoic3RhdGljIix6b29tOjEsZGlzcGxheToiYmxvY2sifSkpO3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhtYXJnaW5zKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpO30KdGhpcy5fc2V0dXBIYW5kbGVzKCk7aWYoby5hdXRvSGlkZSl7JCh0aGlzLmVsZW1lbnQpLm9uKCJtb3VzZWVudGVyIixmdW5jdGlvbigpe2lmKG8uZGlzYWJsZWQpe3JldHVybjt9CnRoYXQuX3JlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTt0aGF0Ll9oYW5kbGVzLnNob3coKTt9KS5vbigibW91c2VsZWF2ZSIsZnVuY3Rpb24oKXtpZihvLmRpc2FibGVkKXtyZXR1cm47fQppZighdGhhdC5yZXNpemluZyl7dGhhdC5fYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpO3RoYXQuX2hhbmRsZXMuaGlkZSgpO319KTt9CnRoaXMuX21vdXNlSW5pdCgpO30sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9tb3VzZURlc3Ryb3koKTt2YXIgd3JhcHBlcixfZGVzdHJveT1mdW5jdGlvbihleHApeyQoZXhwKS5yZW1vdmVEYXRhKCJyZXNpemFibGUiKS5yZW1vdmVEYXRhKCJ1aS1yZXNpemFibGUiKS5vZmYoIi5yZXNpemFibGUiKS5maW5kKCIudWktcmVzaXphYmxlLWhhbmRsZSIpLnJlbW92ZSgpO307aWYodGhpcy5lbGVtZW50SXNXcmFwcGVyKXtfZGVzdHJveSh0aGlzLmVsZW1lbnQpO3dyYXBwZXI9dGhpcy5lbGVtZW50O3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7cG9zaXRpb246d3JhcHBlci5jc3MoInBvc2l0aW9uIiksd2lkdGg6d3JhcHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OndyYXBwZXIub3V0ZXJIZWlnaHQoKSx0b3A6d3JhcHBlci5jc3MoInRvcCIpLGxlZnQ6d3JhcHBlci5jc3MoImxlZnQiKX0pLmluc2VydEFmdGVyKHdyYXBwZXIpO3dyYXBwZXIucmVtb3ZlKCk7fQp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIsdGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlKTtfZGVzdHJveSh0aGlzLm9yaWdpbmFsRWxlbWVudCk7cmV0dXJuIHRoaXM7fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dGhpcy5fc3VwZXIoa2V5LHZhbHVlKTtzd2l0Y2goa2V5KXtjYXNlImhhbmRsZXMiOnRoaXMuX3JlbW92ZUhhbmRsZXMoKTt0aGlzLl9zZXR1cEhhbmRsZXMoKTticmVhaztkZWZhdWx0OmJyZWFrO319LF9zZXR1cEhhbmRsZXM6ZnVuY3Rpb24oKXt2YXIgbz10aGlzLm9wdGlvbnMsaGFuZGxlLGksbixobmFtZSxheGlzLHRoYXQ9dGhpczt0aGlzLmhhbmRsZXM9by5oYW5kbGVzfHwoISQoIi51aS1yZXNpemFibGUtaGFuZGxlIix0aGlzLmVsZW1lbnQpLmxlbmd0aD8iZSxzLHNlIjp7bjoiLnVpLXJlc2l6YWJsZS1uIixlOiIudWktcmVzaXphYmxlLWUiLHM6Ii51aS1yZXNpemFibGUtcyIsdzoiLnVpLXJlc2l6YWJsZS13IixzZToiLnVpLXJlc2l6YWJsZS1zZSIsc3c6Ii51aS1yZXNpemFibGUtc3ciLG5lOiIudWktcmVzaXphYmxlLW5lIixudzoiLnVpLXJlc2l6YWJsZS1udyJ9KTt0aGlzLl9oYW5kbGVzPSQoKTtpZih0aGlzLmhhbmRsZXMuY29uc3RydWN0b3I9PT1TdHJpbmcpe2lmKHRoaXMuaGFuZGxlcz09PSJhbGwiKXt0aGlzLmhhbmRsZXM9Im4sZSxzLHcsc2Usc3csbmUsbnciO30Kbj10aGlzLmhhbmRsZXMuc3BsaXQoIiwiKTt0aGlzLmhhbmRsZXM9e307Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl7aGFuZGxlPSQudHJpbShuW2ldKTtobmFtZT0idWktcmVzaXphYmxlLSIraGFuZGxlO2F4aXM9JCgiPGRpdj4iKTt0aGlzLl9hZGRDbGFzcyhheGlzLCJ1aS1yZXNpemFibGUtaGFuZGxlICIraG5hbWUpO2F4aXMuY3NzKHt6SW5kZXg6by56SW5kZXh9KTt0aGlzLmhhbmRsZXNbaGFuZGxlXT0iLnVpLXJlc2l6YWJsZS0iK2hhbmRsZTt0aGlzLmVsZW1lbnQuYXBwZW5kKGF4aXMpO319CnRoaXMuX3JlbmRlckF4aXM9ZnVuY3Rpb24odGFyZ2V0KXt2YXIgaSxheGlzLHBhZFBvcyxwYWRXcmFwcGVyO3RhcmdldD10YXJnZXR8fHRoaXMuZWxlbWVudDtmb3IoaSBpbiB0aGlzLmhhbmRsZXMpe2lmKHRoaXMuaGFuZGxlc1tpXS5jb25zdHJ1Y3Rvcj09PVN0cmluZyl7dGhpcy5oYW5kbGVzW2ldPXRoaXMuZWxlbWVudC5jaGlsZHJlbih0aGlzLmhhbmRsZXNbaV0pLmZpcnN0KCkuc2hvdygpO31lbHNlIGlmKHRoaXMuaGFuZGxlc1tpXS5qcXVlcnl8fHRoaXMuaGFuZGxlc1tpXS5ub2RlVHlwZSl7dGhpcy5oYW5kbGVzW2ldPSQodGhpcy5oYW5kbGVzW2ldKTt0aGlzLl9vbih0aGlzLmhhbmRsZXNbaV0seyJtb3VzZWRvd24iOnRoYXQuX21vdXNlRG93bn0pO30KaWYodGhpcy5lbGVtZW50SXNXcmFwcGVyJiZ0aGlzLm9yaWdpbmFsRWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvXih0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uKSQvaSkpe2F4aXM9JCh0aGlzLmhhbmRsZXNbaV0sdGhpcy5lbGVtZW50KTtwYWRXcmFwcGVyPS9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSk/YXhpcy5vdXRlckhlaWdodCgpOmF4aXMub3V0ZXJXaWR0aCgpO3BhZFBvcz1bInBhZGRpbmciLC9uZXxud3xuLy50ZXN0KGkpPyJUb3AiOi9zZXxzd3xzLy50ZXN0KGkpPyJCb3R0b20iOi9eZSQvLnRlc3QoaSk/IlJpZ2h0IjoiTGVmdCJdLmpvaW4oIiIpO3RhcmdldC5jc3MocGFkUG9zLHBhZFdyYXBwZXIpO3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7fQp0aGlzLl9oYW5kbGVzPXRoaXMuX2hhbmRsZXMuYWRkKHRoaXMuaGFuZGxlc1tpXSk7fX07dGhpcy5fcmVuZGVyQXhpcyh0aGlzLmVsZW1lbnQpO3RoaXMuX2hhbmRsZXM9dGhpcy5faGFuZGxlcy5hZGQodGhpcy5lbGVtZW50LmZpbmQoIi51aS1yZXNpemFibGUtaGFuZGxlIikpO3RoaXMuX2hhbmRsZXMuZGlzYWJsZVNlbGVjdGlvbigpO3RoaXMuX2hhbmRsZXMub24oIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtpZighdGhhdC5yZXNpemluZyl7aWYodGhpcy5jbGFzc05hbWUpe2F4aXM9dGhpcy5jbGFzc05hbWUubWF0Y2goL3VpLXJlc2l6YWJsZS0oc2V8c3d8bmV8bnd8bnxlfHN8dykvaSk7fQp0aGF0LmF4aXM9YXhpcyYmYXhpc1sxXT9heGlzWzFdOiJzZSI7fX0pO2lmKG8uYXV0b0hpZGUpe3RoaXMuX2hhbmRsZXMuaGlkZSgpO3RoaXMuX2FkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTt9fSxfcmVtb3ZlSGFuZGxlczpmdW5jdGlvbigpe3RoaXMuX2hhbmRsZXMucmVtb3ZlKCk7fSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgaSxoYW5kbGUsY2FwdHVyZT1mYWxzZTtmb3IoaSBpbiB0aGlzLmhhbmRsZXMpe2hhbmRsZT0kKHRoaXMuaGFuZGxlc1tpXSlbMF07aWYoaGFuZGxlPT09ZXZlbnQudGFyZ2V0fHwkLmNvbnRhaW5zKGhhbmRsZSxldmVudC50YXJnZXQpKXtjYXB0dXJlPXRydWU7fX0KcmV0dXJuIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmY2FwdHVyZTt9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGV2ZW50KXt2YXIgY3VybGVmdCxjdXJ0b3AsY3Vyc29yLG89dGhpcy5vcHRpb25zLGVsPXRoaXMuZWxlbWVudDt0aGlzLnJlc2l6aW5nPXRydWU7dGhpcy5fcmVuZGVyUHJveHkoKTtjdXJsZWZ0PXRoaXMuX251bSh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSk7Y3VydG9wPXRoaXMuX251bSh0aGlzLmhlbHBlci5jc3MoInRvcCIpKTtpZihvLmNvbnRhaW5tZW50KXtjdXJsZWZ0Kz0kKG8uY29udGFpbm1lbnQpLnNjcm9sbExlZnQoKXx8MDtjdXJ0b3ArPSQoby5jb250YWlubWVudCkuc2Nyb2xsVG9wKCl8fDA7fQp0aGlzLm9mZnNldD10aGlzLmhlbHBlci5vZmZzZXQoKTt0aGlzLnBvc2l0aW9uPXtsZWZ0OmN1cmxlZnQsdG9wOmN1cnRvcH07dGhpcy5zaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6dGhpcy5oZWxwZXIud2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIuaGVpZ2h0KCl9Ont3aWR0aDplbC53aWR0aCgpLGhlaWdodDplbC5oZWlnaHQoKX07dGhpcy5vcmlnaW5hbFNpemU9dGhpcy5faGVscGVyP3t3aWR0aDplbC5vdXRlcldpZHRoKCksaGVpZ2h0OmVsLm91dGVySGVpZ2h0KCl9Ont3aWR0aDplbC53aWR0aCgpLGhlaWdodDplbC5oZWlnaHQoKX07dGhpcy5zaXplRGlmZj17d2lkdGg6ZWwub3V0ZXJXaWR0aCgpLWVsLndpZHRoKCksaGVpZ2h0OmVsLm91dGVySGVpZ2h0KCktZWwuaGVpZ2h0KCl9O3RoaXMub3JpZ2luYWxQb3NpdGlvbj17bGVmdDpjdXJsZWZ0LHRvcDpjdXJ0b3B9O3RoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uPXtsZWZ0OmV2ZW50LnBhZ2VYLHRvcDpldmVudC5wYWdlWX07dGhpcy5hc3BlY3RSYXRpbz0odHlwZW9mIG8uYXNwZWN0UmF0aW89PT0ibnVtYmVyIik/by5hc3BlY3RSYXRpbzooKHRoaXMub3JpZ2luYWxTaXplLndpZHRoL3RoaXMub3JpZ2luYWxTaXplLmhlaWdodCl8fDEpO2N1cnNvcj0kKCIudWktcmVzaXphYmxlLSIrdGhpcy5heGlzKS5jc3MoImN1cnNvciIpOyQoImJvZHkiKS5jc3MoImN1cnNvciIsY3Vyc29yPT09ImF1dG8iP3RoaXMuYXhpcysiLXJlc2l6ZSI6Y3Vyc29yKTt0aGlzLl9hZGRDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7dGhpcy5fcHJvcGFnYXRlKCJzdGFydCIsZXZlbnQpO3JldHVybiB0cnVlO30sX21vdXNlRHJhZzpmdW5jdGlvbihldmVudCl7dmFyIGRhdGEscHJvcHMsc21wPXRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uLGE9dGhpcy5heGlzLGR4PShldmVudC5wYWdlWC1zbXAubGVmdCl8fDAsZHk9KGV2ZW50LnBhZ2VZLXNtcC50b3ApfHwwLHRyaWdnZXI9dGhpcy5fY2hhbmdlW2FdO3RoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCk7aWYoIXRyaWdnZXIpe3JldHVybiBmYWxzZTt9CmRhdGE9dHJpZ2dlci5hcHBseSh0aGlzLFtldmVudCxkeCxkeV0pO3RoaXMuX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzKGV2ZW50LnNoaWZ0S2V5KTtpZih0aGlzLl9hc3BlY3RSYXRpb3x8ZXZlbnQuc2hpZnRLZXkpe2RhdGE9dGhpcy5fdXBkYXRlUmF0aW8oZGF0YSxldmVudCk7fQpkYXRhPXRoaXMuX3Jlc3BlY3RTaXplKGRhdGEsZXZlbnQpO3RoaXMuX3VwZGF0ZUNhY2hlKGRhdGEpO3RoaXMuX3Byb3BhZ2F0ZSgicmVzaXplIixldmVudCk7cHJvcHM9dGhpcy5fYXBwbHlDaGFuZ2VzKCk7aWYoIXRoaXMuX2hlbHBlciYmdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpe3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7fQppZighJC5pc0VtcHR5T2JqZWN0KHByb3BzKSl7dGhpcy5fdXBkYXRlUHJldlByb3BlcnRpZXMoKTt0aGlzLl90cmlnZ2VyKCJyZXNpemUiLGV2ZW50LHRoaXMudWkoKSk7dGhpcy5fYXBwbHlDaGFuZ2VzKCk7fQpyZXR1cm4gZmFsc2U7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLnJlc2l6aW5nPWZhbHNlO3ZhciBwcixpc3RhLHNvZmZzZXRoLHNvZmZzZXR3LHMsbGVmdCx0b3Asbz10aGlzLm9wdGlvbnMsdGhhdD10aGlzO2lmKHRoaXMuX2hlbHBlcil7cHI9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cztpc3RhPXByLmxlbmd0aCYmKC90ZXh0YXJlYS9pKS50ZXN0KHByWzBdLm5vZGVOYW1lKTtzb2Zmc2V0aD1pc3RhJiZ0aGlzLl9oYXNTY3JvbGwocHJbMF0sImxlZnQiKT8wOnRoYXQuc2l6ZURpZmYuaGVpZ2h0O3NvZmZzZXR3PWlzdGE/MDp0aGF0LnNpemVEaWZmLndpZHRoO3M9e3dpZHRoOih0aGF0LmhlbHBlci53aWR0aCgpLXNvZmZzZXR3KSxoZWlnaHQ6KHRoYXQuaGVscGVyLmhlaWdodCgpLXNvZmZzZXRoKX07bGVmdD0ocGFyc2VGbG9hdCh0aGF0LmVsZW1lbnQuY3NzKCJsZWZ0IikpKwoodGhhdC5wb3NpdGlvbi5sZWZ0LXRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSl8fG51bGw7dG9wPShwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoInRvcCIpKSsKKHRoYXQucG9zaXRpb24udG9wLXRoYXQub3JpZ2luYWxQb3NpdGlvbi50b3ApKXx8bnVsbDtpZighby5hbmltYXRlKXt0aGlzLmVsZW1lbnQuY3NzKCQuZXh0ZW5kKHMse3RvcDp0b3AsbGVmdDpsZWZ0fSkpO30KdGhhdC5oZWxwZXIuaGVpZ2h0KHRoYXQuc2l6ZS5oZWlnaHQpO3RoYXQuaGVscGVyLndpZHRoKHRoYXQuc2l6ZS53aWR0aCk7aWYodGhpcy5faGVscGVyJiYhby5hbmltYXRlKXt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpO319CiQoImJvZHkiKS5jc3MoImN1cnNvciIsImF1dG8iKTt0aGlzLl9yZW1vdmVDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7dGhpcy5fcHJvcGFnYXRlKCJzdG9wIixldmVudCk7aWYodGhpcy5faGVscGVyKXt0aGlzLmhlbHBlci5yZW1vdmUoKTt9CnJldHVybiBmYWxzZTt9LF91cGRhdGVQcmV2UHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMucHJldlBvc2l0aW9uPXt0b3A6dGhpcy5wb3NpdGlvbi50b3AsbGVmdDp0aGlzLnBvc2l0aW9uLmxlZnR9O3RoaXMucHJldlNpemU9e3dpZHRoOnRoaXMuc2l6ZS53aWR0aCxoZWlnaHQ6dGhpcy5zaXplLmhlaWdodH07fSxfYXBwbHlDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIHByb3BzPXt9O2lmKHRoaXMucG9zaXRpb24udG9wIT09dGhpcy5wcmV2UG9zaXRpb24udG9wKXtwcm9wcy50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4Ijt9CmlmKHRoaXMucG9zaXRpb24ubGVmdCE9PXRoaXMucHJldlBvc2l0aW9uLmxlZnQpe3Byb3BzLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCI7fQppZih0aGlzLnNpemUud2lkdGghPT10aGlzLnByZXZTaXplLndpZHRoKXtwcm9wcy53aWR0aD10aGlzLnNpemUud2lkdGgrInB4Ijt9CmlmKHRoaXMuc2l6ZS5oZWlnaHQhPT10aGlzLnByZXZTaXplLmhlaWdodCl7cHJvcHMuaGVpZ2h0PXRoaXMuc2l6ZS5oZWlnaHQrInB4Ijt9CnRoaXMuaGVscGVyLmNzcyhwcm9wcyk7cmV0dXJuIHByb3BzO30sX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzOmZ1bmN0aW9uKGZvcmNlQXNwZWN0UmF0aW8pe3ZhciBwTWluV2lkdGgscE1heFdpZHRoLHBNaW5IZWlnaHQscE1heEhlaWdodCxiLG89dGhpcy5vcHRpb25zO2I9e21pbldpZHRoOnRoaXMuX2lzTnVtYmVyKG8ubWluV2lkdGgpP28ubWluV2lkdGg6MCxtYXhXaWR0aDp0aGlzLl9pc051bWJlcihvLm1heFdpZHRoKT9vLm1heFdpZHRoOkluZmluaXR5LG1pbkhlaWdodDp0aGlzLl9pc051bWJlcihvLm1pbkhlaWdodCk/by5taW5IZWlnaHQ6MCxtYXhIZWlnaHQ6dGhpcy5faXNOdW1iZXIoby5tYXhIZWlnaHQpP28ubWF4SGVpZ2h0OkluZmluaXR5fTtpZih0aGlzLl9hc3BlY3RSYXRpb3x8Zm9yY2VBc3BlY3RSYXRpbyl7cE1pbldpZHRoPWIubWluSGVpZ2h0KnRoaXMuYXNwZWN0UmF0aW87cE1pbkhlaWdodD1iLm1pbldpZHRoL3RoaXMuYXNwZWN0UmF0aW87cE1heFdpZHRoPWIubWF4SGVpZ2h0KnRoaXMuYXNwZWN0UmF0aW87cE1heEhlaWdodD1iLm1heFdpZHRoL3RoaXMuYXNwZWN0UmF0aW87aWYocE1pbldpZHRoPmIubWluV2lkdGgpe2IubWluV2lkdGg9cE1pbldpZHRoO30KaWYocE1pbkhlaWdodD5iLm1pbkhlaWdodCl7Yi5taW5IZWlnaHQ9cE1pbkhlaWdodDt9CmlmKHBNYXhXaWR0aDxiLm1heFdpZHRoKXtiLm1heFdpZHRoPXBNYXhXaWR0aDt9CmlmKHBNYXhIZWlnaHQ8Yi5tYXhIZWlnaHQpe2IubWF4SGVpZ2h0PXBNYXhIZWlnaHQ7fX0KdGhpcy5fdkJvdW5kYXJpZXM9Yjt9LF91cGRhdGVDYWNoZTpmdW5jdGlvbihkYXRhKXt0aGlzLm9mZnNldD10aGlzLmhlbHBlci5vZmZzZXQoKTtpZih0aGlzLl9pc051bWJlcihkYXRhLmxlZnQpKXt0aGlzLnBvc2l0aW9uLmxlZnQ9ZGF0YS5sZWZ0O30KaWYodGhpcy5faXNOdW1iZXIoZGF0YS50b3ApKXt0aGlzLnBvc2l0aW9uLnRvcD1kYXRhLnRvcDt9CmlmKHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSl7dGhpcy5zaXplLmhlaWdodD1kYXRhLmhlaWdodDt9CmlmKHRoaXMuX2lzTnVtYmVyKGRhdGEud2lkdGgpKXt0aGlzLnNpemUud2lkdGg9ZGF0YS53aWR0aDt9fSxfdXBkYXRlUmF0aW86ZnVuY3Rpb24oZGF0YSl7dmFyIGNwb3M9dGhpcy5wb3NpdGlvbixjc2l6ZT10aGlzLnNpemUsYT10aGlzLmF4aXM7aWYodGhpcy5faXNOdW1iZXIoZGF0YS5oZWlnaHQpKXtkYXRhLndpZHRoPShkYXRhLmhlaWdodCp0aGlzLmFzcGVjdFJhdGlvKTt9ZWxzZSBpZih0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSl7ZGF0YS5oZWlnaHQ9KGRhdGEud2lkdGgvdGhpcy5hc3BlY3RSYXRpbyk7fQppZihhPT09InN3Iil7ZGF0YS5sZWZ0PWNwb3MubGVmdCsoY3NpemUud2lkdGgtZGF0YS53aWR0aCk7ZGF0YS50b3A9bnVsbDt9CmlmKGE9PT0ibnciKXtkYXRhLnRvcD1jcG9zLnRvcCsoY3NpemUuaGVpZ2h0LWRhdGEuaGVpZ2h0KTtkYXRhLmxlZnQ9Y3Bvcy5sZWZ0Kyhjc2l6ZS53aWR0aC1kYXRhLndpZHRoKTt9CnJldHVybiBkYXRhO30sX3Jlc3BlY3RTaXplOmZ1bmN0aW9uKGRhdGEpe3ZhciBvPXRoaXMuX3ZCb3VuZGFyaWVzLGE9dGhpcy5heGlzLGlzbWF4dz10aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSYmby5tYXhXaWR0aCYmKG8ubWF4V2lkdGg8ZGF0YS53aWR0aCksaXNtYXhoPXRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSYmby5tYXhIZWlnaHQmJihvLm1heEhlaWdodDxkYXRhLmhlaWdodCksaXNtaW53PXRoaXMuX2lzTnVtYmVyKGRhdGEud2lkdGgpJiZvLm1pbldpZHRoJiYoby5taW5XaWR0aD5kYXRhLndpZHRoKSxpc21pbmg9dGhpcy5faXNOdW1iZXIoZGF0YS5oZWlnaHQpJiZvLm1pbkhlaWdodCYmKG8ubWluSGVpZ2h0PmRhdGEuaGVpZ2h0KSxkdz10aGlzLm9yaWdpbmFsUG9zaXRpb24ubGVmdCt0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCxkaD10aGlzLm9yaWdpbmFsUG9zaXRpb24udG9wK3RoaXMub3JpZ2luYWxTaXplLmhlaWdodCxjdz0vc3d8bnd8dy8udGVzdChhKSxjaD0vbnd8bmV8bi8udGVzdChhKTtpZihpc21pbncpe2RhdGEud2lkdGg9by5taW5XaWR0aDt9CmlmKGlzbWluaCl7ZGF0YS5oZWlnaHQ9by5taW5IZWlnaHQ7fQppZihpc21heHcpe2RhdGEud2lkdGg9by5tYXhXaWR0aDt9CmlmKGlzbWF4aCl7ZGF0YS5oZWlnaHQ9by5tYXhIZWlnaHQ7fQppZihpc21pbncmJmN3KXtkYXRhLmxlZnQ9ZHctby5taW5XaWR0aDt9CmlmKGlzbWF4dyYmY3cpe2RhdGEubGVmdD1kdy1vLm1heFdpZHRoO30KaWYoaXNtaW5oJiZjaCl7ZGF0YS50b3A9ZGgtby5taW5IZWlnaHQ7fQppZihpc21heGgmJmNoKXtkYXRhLnRvcD1kaC1vLm1heEhlaWdodDt9CmlmKCFkYXRhLndpZHRoJiYhZGF0YS5oZWlnaHQmJiFkYXRhLmxlZnQmJmRhdGEudG9wKXtkYXRhLnRvcD1udWxsO31lbHNlIGlmKCFkYXRhLndpZHRoJiYhZGF0YS5oZWlnaHQmJiFkYXRhLnRvcCYmZGF0YS5sZWZ0KXtkYXRhLmxlZnQ9bnVsbDt9CnJldHVybiBkYXRhO30sX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9uczpmdW5jdGlvbihlbGVtZW50KXt2YXIgaT0wLHdpZHRocz1bXSxib3JkZXJzPVtlbGVtZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSxlbGVtZW50LmNzcygiYm9yZGVyUmlnaHRXaWR0aCIpLGVsZW1lbnQuY3NzKCJib3JkZXJCb3R0b21XaWR0aCIpLGVsZW1lbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKV0scGFkZGluZ3M9W2VsZW1lbnQuY3NzKCJwYWRkaW5nVG9wIiksZWxlbWVudC5jc3MoInBhZGRpbmdSaWdodCIpLGVsZW1lbnQuY3NzKCJwYWRkaW5nQm90dG9tIiksZWxlbWVudC5jc3MoInBhZGRpbmdMZWZ0IildO2Zvcig7aTw0O2krKyl7d2lkdGhzW2ldPShwYXJzZUZsb2F0KGJvcmRlcnNbaV0pfHwwKTt3aWR0aHNbaV0rPShwYXJzZUZsb2F0KHBhZGRpbmdzW2ldKXx8MCk7fQpyZXR1cm57aGVpZ2h0OndpZHRoc1swXSt3aWR0aHNbMl0sd2lkdGg6d2lkdGhzWzFdK3dpZHRoc1szXX07fSxfcHJvcG9ydGlvbmFsbHlSZXNpemU6ZnVuY3Rpb24oKXtpZighdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpe3JldHVybjt9CnZhciBwcmVsLGk9MCxlbGVtZW50PXRoaXMuaGVscGVyfHx0aGlzLmVsZW1lbnQ7Zm9yKDtpPHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoO2krKyl7cHJlbD10aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzW2ldO2lmKCF0aGlzLm91dGVyRGltZW5zaW9ucyl7dGhpcy5vdXRlckRpbWVuc2lvbnM9dGhpcy5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKHByZWwpO30KcHJlbC5jc3Moe2hlaWdodDooZWxlbWVudC5oZWlnaHQoKS10aGlzLm91dGVyRGltZW5zaW9ucy5oZWlnaHQpfHwwLHdpZHRoOihlbGVtZW50LndpZHRoKCktdGhpcy5vdXRlckRpbWVuc2lvbnMud2lkdGgpfHwwfSk7fX0sX3JlbmRlclByb3h5OmZ1bmN0aW9uKCl7dmFyIGVsPXRoaXMuZWxlbWVudCxvPXRoaXMub3B0aW9uczt0aGlzLmVsZW1lbnRPZmZzZXQ9ZWwub2Zmc2V0KCk7aWYodGhpcy5faGVscGVyKXt0aGlzLmhlbHBlcj10aGlzLmhlbHBlcnx8JCgiPGRpdiBzdHlsZT0nb3ZlcmZsb3c6aGlkZGVuOyc+PC9kaXY+Iik7dGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsdGhpcy5faGVscGVyKTt0aGlzLmhlbHBlci5jc3Moe3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLHBvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDp0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCsicHgiLHRvcDp0aGlzLmVsZW1lbnRPZmZzZXQudG9wKyJweCIsekluZGV4Oisrby56SW5kZXh9KTt0aGlzLmhlbHBlci5hcHBlbmRUbygiYm9keSIpLmRpc2FibGVTZWxlY3Rpb24oKTt9ZWxzZXt0aGlzLmhlbHBlcj10aGlzLmVsZW1lbnQ7fX0sX2NoYW5nZTp7ZTpmdW5jdGlvbihldmVudCxkeCl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK2R4fTt9LHc6ZnVuY3Rpb24oZXZlbnQsZHgpe3ZhciBjcz10aGlzLm9yaWdpbmFsU2l6ZSxzcD10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue2xlZnQ6c3AubGVmdCtkeCx3aWR0aDpjcy53aWR0aC1keH07fSxuOmZ1bmN0aW9uKGV2ZW50LGR4LGR5KXt2YXIgY3M9dGhpcy5vcmlnaW5hbFNpemUsc3A9dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3JldHVybnt0b3A6c3AudG9wK2R5LGhlaWdodDpjcy5oZWlnaHQtZHl9O30sczpmdW5jdGlvbihldmVudCxkeCxkeSl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQrZHl9O30sc2U6ZnVuY3Rpb24oZXZlbnQsZHgsZHkpe3JldHVybiAkLmV4dGVuZCh0aGlzLl9jaGFuZ2Uucy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcyxbZXZlbnQsZHgsZHldKSk7fSxzdzpmdW5jdGlvbihldmVudCxkeCxkeSl7cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFtldmVudCxkeCxkeV0pKTt9LG5lOmZ1bmN0aW9uKGV2ZW50LGR4LGR5KXtyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2V2ZW50LGR4LGR5XSkpO30sbnc6ZnVuY3Rpb24oZXZlbnQsZHgsZHkpe3JldHVybiAkLmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcyxbZXZlbnQsZHgsZHldKSk7fX0sX3Byb3BhZ2F0ZTpmdW5jdGlvbihuLGV2ZW50KXskLnVpLnBsdWdpbi5jYWxsKHRoaXMsbixbZXZlbnQsdGhpcy51aSgpXSk7KG4hPT0icmVzaXplIiYmdGhpcy5fdHJpZ2dlcihuLGV2ZW50LHRoaXMudWkoKSkpO30scGx1Z2luczp7fSx1aTpmdW5jdGlvbigpe3JldHVybntvcmlnaW5hbEVsZW1lbnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQsZWxlbWVudDp0aGlzLmVsZW1lbnQsaGVscGVyOnRoaXMuaGVscGVyLHBvc2l0aW9uOnRoaXMucG9zaXRpb24sc2l6ZTp0aGlzLnNpemUsb3JpZ2luYWxTaXplOnRoaXMub3JpZ2luYWxTaXplLG9yaWdpbmFsUG9zaXRpb246dGhpcy5vcmlnaW5hbFBvc2l0aW9ufTt9fSk7JC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJhbmltYXRlIix7c3RvcDpmdW5jdGlvbihldmVudCl7dmFyIHRoYXQ9JCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIiksbz10aGF0Lm9wdGlvbnMscHI9dGhhdC5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cyxpc3RhPXByLmxlbmd0aCYmKC90ZXh0YXJlYS9pKS50ZXN0KHByWzBdLm5vZGVOYW1lKSxzb2Zmc2V0aD1pc3RhJiZ0aGF0Ll9oYXNTY3JvbGwocHJbMF0sImxlZnQiKT8wOnRoYXQuc2l6ZURpZmYuaGVpZ2h0LHNvZmZzZXR3PWlzdGE/MDp0aGF0LnNpemVEaWZmLndpZHRoLHN0eWxlPXt3aWR0aDoodGhhdC5zaXplLndpZHRoLXNvZmZzZXR3KSxoZWlnaHQ6KHRoYXQuc2l6ZS5oZWlnaHQtc29mZnNldGgpfSxsZWZ0PShwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoImxlZnQiKSkrCih0aGF0LnBvc2l0aW9uLmxlZnQtdGhhdC5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpKXx8bnVsbCx0b3A9KHBhcnNlRmxvYXQodGhhdC5lbGVtZW50LmNzcygidG9wIikpKwoodGhhdC5wb3NpdGlvbi50b3AtdGhhdC5vcmlnaW5hbFBvc2l0aW9uLnRvcCkpfHxudWxsO3RoYXQuZWxlbWVudC5hbmltYXRlKCQuZXh0ZW5kKHN0eWxlLHRvcCYmbGVmdD97dG9wOnRvcCxsZWZ0OmxlZnR9Ont9KSx7ZHVyYXRpb246by5hbmltYXRlRHVyYXRpb24sZWFzaW5nOm8uYW5pbWF0ZUVhc2luZyxzdGVwOmZ1bmN0aW9uKCl7dmFyIGRhdGE9e3dpZHRoOnBhcnNlRmxvYXQodGhhdC5lbGVtZW50LmNzcygid2lkdGgiKSksaGVpZ2h0OnBhcnNlRmxvYXQodGhhdC5lbGVtZW50LmNzcygiaGVpZ2h0IikpLHRvcDpwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoInRvcCIpKSxsZWZ0OnBhcnNlRmxvYXQodGhhdC5lbGVtZW50LmNzcygibGVmdCIpKX07aWYocHImJnByLmxlbmd0aCl7JChwclswXSkuY3NzKHt3aWR0aDpkYXRhLndpZHRoLGhlaWdodDpkYXRhLmhlaWdodH0pO30KdGhhdC5fdXBkYXRlQ2FjaGUoZGF0YSk7dGhhdC5fcHJvcGFnYXRlKCJyZXNpemUiLGV2ZW50KTt9fSk7fX0pOyQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiY29udGFpbm1lbnQiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBlbGVtZW50LHAsY28sY2gsY3csd2lkdGgsaGVpZ2h0LHRoYXQ9JCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIiksbz10aGF0Lm9wdGlvbnMsZWw9dGhhdC5lbGVtZW50LG9jPW8uY29udGFpbm1lbnQsY2U9KG9jIGluc3RhbmNlb2YgJCk/b2MuZ2V0KDApOigvcGFyZW50Ly50ZXN0KG9jKSk/ZWwucGFyZW50KCkuZ2V0KDApOm9jO2lmKCFjZSl7cmV0dXJuO30KdGhhdC5jb250YWluZXJFbGVtZW50PSQoY2UpO2lmKC9kb2N1bWVudC8udGVzdChvYyl8fG9jPT09ZG9jdW1lbnQpe3RoYXQuY29udGFpbmVyT2Zmc2V0PXtsZWZ0OjAsdG9wOjB9O3RoYXQuY29udGFpbmVyUG9zaXRpb249e2xlZnQ6MCx0b3A6MH07dGhhdC5wYXJlbnREYXRhPXtlbGVtZW50OiQoZG9jdW1lbnQpLGxlZnQ6MCx0b3A6MCx3aWR0aDokKGRvY3VtZW50KS53aWR0aCgpLGhlaWdodDokKGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodH07fWVsc2V7ZWxlbWVudD0kKGNlKTtwPVtdOyQoWyJUb3AiLCJSaWdodCIsIkxlZnQiLCJCb3R0b20iXSkuZWFjaChmdW5jdGlvbihpLG5hbWUpe3BbaV09dGhhdC5fbnVtKGVsZW1lbnQuY3NzKCJwYWRkaW5nIituYW1lKSk7fSk7dGhhdC5jb250YWluZXJPZmZzZXQ9ZWxlbWVudC5vZmZzZXQoKTt0aGF0LmNvbnRhaW5lclBvc2l0aW9uPWVsZW1lbnQucG9zaXRpb24oKTt0aGF0LmNvbnRhaW5lclNpemU9e2hlaWdodDooZWxlbWVudC5pbm5lckhlaWdodCgpLXBbM10pLHdpZHRoOihlbGVtZW50LmlubmVyV2lkdGgoKS1wWzFdKX07Y289dGhhdC5jb250YWluZXJPZmZzZXQ7Y2g9dGhhdC5jb250YWluZXJTaXplLmhlaWdodDtjdz10aGF0LmNvbnRhaW5lclNpemUud2lkdGg7d2lkdGg9KHRoYXQuX2hhc1Njcm9sbChjZSwibGVmdCIpP2NlLnNjcm9sbFdpZHRoOmN3KTtoZWlnaHQ9KHRoYXQuX2hhc1Njcm9sbChjZSk/Y2Uuc2Nyb2xsSGVpZ2h0OmNoKTt0aGF0LnBhcmVudERhdGE9e2VsZW1lbnQ6Y2UsbGVmdDpjby5sZWZ0LHRvcDpjby50b3Asd2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodH07fX0scmVzaXplOmZ1bmN0aW9uKGV2ZW50KXt2YXIgd29zZXQsaG9zZXQsaXNQYXJlbnQsaXNPZmZzZXRSZWxhdGl2ZSx0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zLGNvPXRoYXQuY29udGFpbmVyT2Zmc2V0LGNwPXRoYXQucG9zaXRpb24scFJhdGlvPXRoYXQuX2FzcGVjdFJhdGlvfHxldmVudC5zaGlmdEtleSxjb3A9e3RvcDowLGxlZnQ6MH0sY2U9dGhhdC5jb250YWluZXJFbGVtZW50LGNvbnRpbnVlUmVzaXplPXRydWU7aWYoY2VbMF0hPT1kb2N1bWVudCYmKC9zdGF0aWMvKS50ZXN0KGNlLmNzcygicG9zaXRpb24iKSkpe2NvcD1jbzt9CmlmKGNwLmxlZnQ8KHRoYXQuX2hlbHBlcj9jby5sZWZ0OjApKXt0aGF0LnNpemUud2lkdGg9dGhhdC5zaXplLndpZHRoKwoodGhhdC5faGVscGVyPyh0aGF0LnBvc2l0aW9uLmxlZnQtY28ubGVmdCk6KHRoYXQucG9zaXRpb24ubGVmdC1jb3AubGVmdCkpO2lmKHBSYXRpbyl7dGhhdC5zaXplLmhlaWdodD10aGF0LnNpemUud2lkdGgvdGhhdC5hc3BlY3RSYXRpbztjb250aW51ZVJlc2l6ZT1mYWxzZTt9CnRoYXQucG9zaXRpb24ubGVmdD1vLmhlbHBlcj9jby5sZWZ0OjA7fQppZihjcC50b3A8KHRoYXQuX2hlbHBlcj9jby50b3A6MCkpe3RoYXQuc2l6ZS5oZWlnaHQ9dGhhdC5zaXplLmhlaWdodCsKKHRoYXQuX2hlbHBlcj8odGhhdC5wb3NpdGlvbi50b3AtY28udG9wKTp0aGF0LnBvc2l0aW9uLnRvcCk7aWYocFJhdGlvKXt0aGF0LnNpemUud2lkdGg9dGhhdC5zaXplLmhlaWdodCp0aGF0LmFzcGVjdFJhdGlvO2NvbnRpbnVlUmVzaXplPWZhbHNlO30KdGhhdC5wb3NpdGlvbi50b3A9dGhhdC5faGVscGVyP2NvLnRvcDowO30KaXNQYXJlbnQ9dGhhdC5jb250YWluZXJFbGVtZW50LmdldCgwKT09PXRoYXQuZWxlbWVudC5wYXJlbnQoKS5nZXQoMCk7aXNPZmZzZXRSZWxhdGl2ZT0vcmVsYXRpdmV8YWJzb2x1dGUvLnRlc3QodGhhdC5jb250YWluZXJFbGVtZW50LmNzcygicG9zaXRpb24iKSk7aWYoaXNQYXJlbnQmJmlzT2Zmc2V0UmVsYXRpdmUpe3RoYXQub2Zmc2V0LmxlZnQ9dGhhdC5wYXJlbnREYXRhLmxlZnQrdGhhdC5wb3NpdGlvbi5sZWZ0O3RoYXQub2Zmc2V0LnRvcD10aGF0LnBhcmVudERhdGEudG9wK3RoYXQucG9zaXRpb24udG9wO31lbHNle3RoYXQub2Zmc2V0LmxlZnQ9dGhhdC5lbGVtZW50Lm9mZnNldCgpLmxlZnQ7dGhhdC5vZmZzZXQudG9wPXRoYXQuZWxlbWVudC5vZmZzZXQoKS50b3A7fQp3b3NldD1NYXRoLmFicyh0aGF0LnNpemVEaWZmLndpZHRoKwoodGhhdC5faGVscGVyP3RoYXQub2Zmc2V0LmxlZnQtY29wLmxlZnQ6KHRoYXQub2Zmc2V0LmxlZnQtY28ubGVmdCkpKTtob3NldD1NYXRoLmFicyh0aGF0LnNpemVEaWZmLmhlaWdodCsKKHRoYXQuX2hlbHBlcj90aGF0Lm9mZnNldC50b3AtY29wLnRvcDoodGhhdC5vZmZzZXQudG9wLWNvLnRvcCkpKTtpZih3b3NldCt0aGF0LnNpemUud2lkdGg+PXRoYXQucGFyZW50RGF0YS53aWR0aCl7dGhhdC5zaXplLndpZHRoPXRoYXQucGFyZW50RGF0YS53aWR0aC13b3NldDtpZihwUmF0aW8pe3RoYXQuc2l6ZS5oZWlnaHQ9dGhhdC5zaXplLndpZHRoL3RoYXQuYXNwZWN0UmF0aW87Y29udGludWVSZXNpemU9ZmFsc2U7fX0KaWYoaG9zZXQrdGhhdC5zaXplLmhlaWdodD49dGhhdC5wYXJlbnREYXRhLmhlaWdodCl7dGhhdC5zaXplLmhlaWdodD10aGF0LnBhcmVudERhdGEuaGVpZ2h0LWhvc2V0O2lmKHBSYXRpbyl7dGhhdC5zaXplLndpZHRoPXRoYXQuc2l6ZS5oZWlnaHQqdGhhdC5hc3BlY3RSYXRpbztjb250aW51ZVJlc2l6ZT1mYWxzZTt9fQppZighY29udGludWVSZXNpemUpe3RoYXQucG9zaXRpb24ubGVmdD10aGF0LnByZXZQb3NpdGlvbi5sZWZ0O3RoYXQucG9zaXRpb24udG9wPXRoYXQucHJldlBvc2l0aW9uLnRvcDt0aGF0LnNpemUud2lkdGg9dGhhdC5wcmV2U2l6ZS53aWR0aDt0aGF0LnNpemUuaGVpZ2h0PXRoYXQucHJldlNpemUuaGVpZ2h0O319LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxvPXRoYXQub3B0aW9ucyxjbz10aGF0LmNvbnRhaW5lck9mZnNldCxjb3A9dGhhdC5jb250YWluZXJQb3NpdGlvbixjZT10aGF0LmNvbnRhaW5lckVsZW1lbnQsaGVscGVyPSQodGhhdC5oZWxwZXIpLGhvPWhlbHBlci5vZmZzZXQoKSx3PWhlbHBlci5vdXRlcldpZHRoKCktdGhhdC5zaXplRGlmZi53aWR0aCxoPWhlbHBlci5vdXRlckhlaWdodCgpLXRoYXQuc2l6ZURpZmYuaGVpZ2h0O2lmKHRoYXQuX2hlbHBlciYmIW8uYW5pbWF0ZSYmKC9yZWxhdGl2ZS8pLnRlc3QoY2UuY3NzKCJwb3NpdGlvbiIpKSl7JCh0aGlzKS5jc3Moe2xlZnQ6aG8ubGVmdC1jb3AubGVmdC1jby5sZWZ0LHdpZHRoOncsaGVpZ2h0Omh9KTt9CmlmKHRoYXQuX2hlbHBlciYmIW8uYW5pbWF0ZSYmKC9zdGF0aWMvKS50ZXN0KGNlLmNzcygicG9zaXRpb24iKSkpeyQodGhpcykuY3NzKHtsZWZ0OmhvLmxlZnQtY29wLmxlZnQtY28ubGVmdCx3aWR0aDp3LGhlaWdodDpofSk7fX19KTskLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImFsc29SZXNpemUiLHtzdGFydDpmdW5jdGlvbigpe3ZhciB0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zOyQoby5hbHNvUmVzaXplKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGVsPSQodGhpcyk7ZWwuZGF0YSgidWktcmVzaXphYmxlLWFsc29yZXNpemUiLHt3aWR0aDpwYXJzZUZsb2F0KGVsLndpZHRoKCkpLGhlaWdodDpwYXJzZUZsb2F0KGVsLmhlaWdodCgpKSxsZWZ0OnBhcnNlRmxvYXQoZWwuY3NzKCJsZWZ0IikpLHRvcDpwYXJzZUZsb2F0KGVsLmNzcygidG9wIikpfSk7fSk7fSxyZXNpemU6ZnVuY3Rpb24oZXZlbnQsdWkpe3ZhciB0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zLG9zPXRoYXQub3JpZ2luYWxTaXplLG9wPXRoYXQub3JpZ2luYWxQb3NpdGlvbixkZWx0YT17aGVpZ2h0Oih0aGF0LnNpemUuaGVpZ2h0LW9zLmhlaWdodCl8fDAsd2lkdGg6KHRoYXQuc2l6ZS53aWR0aC1vcy53aWR0aCl8fDAsdG9wOih0aGF0LnBvc2l0aW9uLnRvcC1vcC50b3ApfHwwLGxlZnQ6KHRoYXQucG9zaXRpb24ubGVmdC1vcC5sZWZ0KXx8MH07JChvLmFsc29SZXNpemUpLmVhY2goZnVuY3Rpb24oKXt2YXIgZWw9JCh0aGlzKSxzdGFydD0kKHRoaXMpLmRhdGEoInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplIiksc3R5bGU9e30sY3NzPWVsLnBhcmVudHModWkub3JpZ2luYWxFbGVtZW50WzBdKS5sZW5ndGg/WyJ3aWR0aCIsImhlaWdodCJdOlsid2lkdGgiLCJoZWlnaHQiLCJ0b3AiLCJsZWZ0Il07JC5lYWNoKGNzcyxmdW5jdGlvbihpLHByb3Ape3ZhciBzdW09KHN0YXJ0W3Byb3BdfHwwKSsoZGVsdGFbcHJvcF18fDApO2lmKHN1bSYmc3VtPj0wKXtzdHlsZVtwcm9wXT1zdW18fG51bGw7fX0pO2VsLmNzcyhzdHlsZSk7fSk7fSxzdG9wOmZ1bmN0aW9uKCl7JCh0aGlzKS5yZW1vdmVEYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIpO319KTskLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImdob3N0Iix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxjcz10aGF0LnNpemU7dGhhdC5naG9zdD10aGF0Lm9yaWdpbmFsRWxlbWVudC5jbG9uZSgpO3RoYXQuZ2hvc3QuY3NzKHtvcGFjaXR5OjAuMjUsZGlzcGxheToiYmxvY2siLHBvc2l0aW9uOiJyZWxhdGl2ZSIsaGVpZ2h0OmNzLmhlaWdodCx3aWR0aDpjcy53aWR0aCxtYXJnaW46MCxsZWZ0OjAsdG9wOjB9KTt0aGF0Ll9hZGRDbGFzcyh0aGF0Lmdob3N0LCJ1aS1yZXNpemFibGUtZ2hvc3QiKTtpZigkLnVpQmFja0NvbXBhdCE9PWZhbHNlJiZ0eXBlb2YgdGhhdC5vcHRpb25zLmdob3N0PT09InN0cmluZyIpe3RoYXQuZ2hvc3QuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmdob3N0KTt9CnRoYXQuZ2hvc3QuYXBwZW5kVG8odGhhdC5oZWxwZXIpO30scmVzaXplOmZ1bmN0aW9uKCl7dmFyIHRoYXQ9JCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIik7aWYodGhhdC5naG9zdCl7dGhhdC5naG9zdC5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIsaGVpZ2h0OnRoYXQuc2l6ZS5oZWlnaHQsd2lkdGg6dGhhdC5zaXplLndpZHRofSk7fX0sc3RvcDpmdW5jdGlvbigpe3ZhciB0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpO2lmKHRoYXQuZ2hvc3QmJnRoYXQuaGVscGVyKXt0aGF0LmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQodGhhdC5naG9zdC5nZXQoMCkpO319fSk7JC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJncmlkIix7cmVzaXplOmZ1bmN0aW9uKCl7dmFyIG91dGVyRGltZW5zaW9ucyx0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zLGNzPXRoYXQuc2l6ZSxvcz10aGF0Lm9yaWdpbmFsU2l6ZSxvcD10aGF0Lm9yaWdpbmFsUG9zaXRpb24sYT10aGF0LmF4aXMsZ3JpZD10eXBlb2Ygby5ncmlkPT09Im51bWJlciI/W28uZ3JpZCxvLmdyaWRdOm8uZ3JpZCxncmlkWD0oZ3JpZFswXXx8MSksZ3JpZFk9KGdyaWRbMV18fDEpLG94PU1hdGgucm91bmQoKGNzLndpZHRoLW9zLndpZHRoKS9ncmlkWCkqZ3JpZFgsb3k9TWF0aC5yb3VuZCgoY3MuaGVpZ2h0LW9zLmhlaWdodCkvZ3JpZFkpKmdyaWRZLG5ld1dpZHRoPW9zLndpZHRoK294LG5ld0hlaWdodD1vcy5oZWlnaHQrb3ksaXNNYXhXaWR0aD1vLm1heFdpZHRoJiYoby5tYXhXaWR0aDxuZXdXaWR0aCksaXNNYXhIZWlnaHQ9by5tYXhIZWlnaHQmJihvLm1heEhlaWdodDxuZXdIZWlnaHQpLGlzTWluV2lkdGg9by5taW5XaWR0aCYmKG8ubWluV2lkdGg+bmV3V2lkdGgpLGlzTWluSGVpZ2h0PW8ubWluSGVpZ2h0JiYoby5taW5IZWlnaHQ+bmV3SGVpZ2h0KTtvLmdyaWQ9Z3JpZDtpZihpc01pbldpZHRoKXtuZXdXaWR0aCs9Z3JpZFg7fQppZihpc01pbkhlaWdodCl7bmV3SGVpZ2h0Kz1ncmlkWTt9CmlmKGlzTWF4V2lkdGgpe25ld1dpZHRoLT1ncmlkWDt9CmlmKGlzTWF4SGVpZ2h0KXtuZXdIZWlnaHQtPWdyaWRZO30KaWYoL14oc2V8c3xlKSQvLnRlc3QoYSkpe3RoYXQuc2l6ZS53aWR0aD1uZXdXaWR0aDt0aGF0LnNpemUuaGVpZ2h0PW5ld0hlaWdodDt9ZWxzZSBpZigvXihuZSkkLy50ZXN0KGEpKXt0aGF0LnNpemUud2lkdGg9bmV3V2lkdGg7dGhhdC5zaXplLmhlaWdodD1uZXdIZWlnaHQ7dGhhdC5wb3NpdGlvbi50b3A9b3AudG9wLW95O31lbHNlIGlmKC9eKHN3KSQvLnRlc3QoYSkpe3RoYXQuc2l6ZS53aWR0aD1uZXdXaWR0aDt0aGF0LnNpemUuaGVpZ2h0PW5ld0hlaWdodDt0aGF0LnBvc2l0aW9uLmxlZnQ9b3AubGVmdC1veDt9ZWxzZXtpZihuZXdIZWlnaHQtZ3JpZFk8PTB8fG5ld1dpZHRoLWdyaWRYPD0wKXtvdXRlckRpbWVuc2lvbnM9dGhhdC5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKHRoaXMpO30KaWYobmV3SGVpZ2h0LWdyaWRZPjApe3RoYXQuc2l6ZS5oZWlnaHQ9bmV3SGVpZ2h0O3RoYXQucG9zaXRpb24udG9wPW9wLnRvcC1veTt9ZWxzZXtuZXdIZWlnaHQ9Z3JpZFktb3V0ZXJEaW1lbnNpb25zLmhlaWdodDt0aGF0LnNpemUuaGVpZ2h0PW5ld0hlaWdodDt0aGF0LnBvc2l0aW9uLnRvcD1vcC50b3Arb3MuaGVpZ2h0LW5ld0hlaWdodDt9CmlmKG5ld1dpZHRoLWdyaWRYPjApe3RoYXQuc2l6ZS53aWR0aD1uZXdXaWR0aDt0aGF0LnBvc2l0aW9uLmxlZnQ9b3AubGVmdC1veDt9ZWxzZXtuZXdXaWR0aD1ncmlkWC1vdXRlckRpbWVuc2lvbnMud2lkdGg7dGhhdC5zaXplLndpZHRoPW5ld1dpZHRoO3RoYXQucG9zaXRpb24ubGVmdD1vcC5sZWZ0K29zLndpZHRoLW5ld1dpZHRoO319fX0pO3ZhciB3aWRnZXRzUmVzaXphYmxlPSQudWkucmVzaXphYmxlO3ZhciB3aWRnZXRzU2VsZWN0YWJsZT0kLndpZGdldCgidWkuc2VsZWN0YWJsZSIsJC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMi4xIixvcHRpb25zOnthcHBlbmRUbzoiYm9keSIsYXV0b1JlZnJlc2g6dHJ1ZSxkaXN0YW5jZTowLGZpbHRlcjoiKiIsdG9sZXJhbmNlOiJ0b3VjaCIsc2VsZWN0ZWQ6bnVsbCxzZWxlY3Rpbmc6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbCx1bnNlbGVjdGVkOm51bGwsdW5zZWxlY3Rpbmc6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXM7dGhpcy5fYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTt0aGlzLmRyYWdnZWQ9ZmFsc2U7dGhpcy5yZWZyZXNoPWZ1bmN0aW9uKCl7dGhhdC5lbGVtZW50UG9zPSQodGhhdC5lbGVtZW50WzBdKS5vZmZzZXQoKTt0aGF0LnNlbGVjdGVlcz0kKHRoYXQub3B0aW9ucy5maWx0ZXIsdGhhdC5lbGVtZW50WzBdKTt0aGF0Ll9hZGRDbGFzcyh0aGF0LnNlbGVjdGVlcywidWktc2VsZWN0ZWUiKTt0aGF0LnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCl7dmFyICR0aGlzPSQodGhpcyksc2VsZWN0ZWVPZmZzZXQ9JHRoaXMub2Zmc2V0KCkscG9zPXtsZWZ0OnNlbGVjdGVlT2Zmc2V0LmxlZnQtdGhhdC5lbGVtZW50UG9zLmxlZnQsdG9wOnNlbGVjdGVlT2Zmc2V0LnRvcC10aGF0LmVsZW1lbnRQb3MudG9wfTskLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIix7ZWxlbWVudDp0aGlzLCRlbGVtZW50OiR0aGlzLGxlZnQ6cG9zLmxlZnQsdG9wOnBvcy50b3AscmlnaHQ6cG9zLmxlZnQrJHRoaXMub3V0ZXJXaWR0aCgpLGJvdHRvbTpwb3MudG9wKyR0aGlzLm91dGVySGVpZ2h0KCksc3RhcnRzZWxlY3RlZDpmYWxzZSxzZWxlY3RlZDokdGhpcy5oYXNDbGFzcygidWktc2VsZWN0ZWQiKSxzZWxlY3Rpbmc6JHRoaXMuaGFzQ2xhc3MoInVpLXNlbGVjdGluZyIpLHVuc2VsZWN0aW5nOiR0aGlzLmhhc0NsYXNzKCJ1aS11bnNlbGVjdGluZyIpfSk7fSk7fTt0aGlzLnJlZnJlc2goKTt0aGlzLl9tb3VzZUluaXQoKTt0aGlzLmhlbHBlcj0kKCI8ZGl2PiIpO3RoaXMuX2FkZENsYXNzKHRoaXMuaGVscGVyLCJ1aS1zZWxlY3RhYmxlLWhlbHBlciIpO30sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVlcy5yZW1vdmVEYXRhKCJzZWxlY3RhYmxlLWl0ZW0iKTt0aGlzLl9tb3VzZURlc3Ryb3koKTt9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGhhdD10aGlzLG9wdGlvbnM9dGhpcy5vcHRpb25zO3RoaXMub3Bvcz1bZXZlbnQucGFnZVgsZXZlbnQucGFnZVldO3RoaXMuZWxlbWVudFBvcz0kKHRoaXMuZWxlbWVudFswXSkub2Zmc2V0KCk7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkKXtyZXR1cm47fQp0aGlzLnNlbGVjdGVlcz0kKG9wdGlvbnMuZmlsdGVyLHRoaXMuZWxlbWVudFswXSk7dGhpcy5fdHJpZ2dlcigic3RhcnQiLGV2ZW50KTskKG9wdGlvbnMuYXBwZW5kVG8pLmFwcGVuZCh0aGlzLmhlbHBlcik7dGhpcy5oZWxwZXIuY3NzKHsibGVmdCI6ZXZlbnQucGFnZVgsInRvcCI6ZXZlbnQucGFnZVksIndpZHRoIjowLCJoZWlnaHQiOjB9KTtpZihvcHRpb25zLmF1dG9SZWZyZXNoKXt0aGlzLnJlZnJlc2goKTt9CnRoaXMuc2VsZWN0ZWVzLmZpbHRlcigiLnVpLXNlbGVjdGVkIikuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxlY3RlZT0kLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7c2VsZWN0ZWUuc3RhcnRzZWxlY3RlZD10cnVlO2lmKCFldmVudC5tZXRhS2V5JiYhZXZlbnQuY3RybEtleSl7dGhhdC5fcmVtb3ZlQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGVkIik7c2VsZWN0ZWUuc2VsZWN0ZWQ9ZmFsc2U7dGhhdC5fYWRkQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXVuc2VsZWN0aW5nIik7c2VsZWN0ZWUudW5zZWxlY3Rpbmc9dHJ1ZTt0aGF0Ll90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZXZlbnQse3Vuc2VsZWN0aW5nOnNlbGVjdGVlLmVsZW1lbnR9KTt9fSk7JChldmVudC50YXJnZXQpLnBhcmVudHMoKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe3ZhciBkb1NlbGVjdCxzZWxlY3RlZT0kLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7aWYoc2VsZWN0ZWUpe2RvU2VsZWN0PSghZXZlbnQubWV0YUtleSYmIWV2ZW50LmN0cmxLZXkpfHwhc2VsZWN0ZWUuJGVsZW1lbnQuaGFzQ2xhc3MoInVpLXNlbGVjdGVkIik7dGhhdC5fcmVtb3ZlQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsZG9TZWxlY3Q/InVpLXVuc2VsZWN0aW5nIjoidWktc2VsZWN0ZWQiKS5fYWRkQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsZG9TZWxlY3Q/InVpLXNlbGVjdGluZyI6InVpLXVuc2VsZWN0aW5nIik7c2VsZWN0ZWUudW5zZWxlY3Rpbmc9IWRvU2VsZWN0O3NlbGVjdGVlLnNlbGVjdGluZz1kb1NlbGVjdDtzZWxlY3RlZS5zZWxlY3RlZD1kb1NlbGVjdDtpZihkb1NlbGVjdCl7dGhhdC5fdHJpZ2dlcigic2VsZWN0aW5nIixldmVudCx7c2VsZWN0aW5nOnNlbGVjdGVlLmVsZW1lbnR9KTt9ZWxzZXt0aGF0Ll90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZXZlbnQse3Vuc2VsZWN0aW5nOnNlbGVjdGVlLmVsZW1lbnR9KTt9CnJldHVybiBmYWxzZTt9fSk7fSxfbW91c2VEcmFnOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmRyYWdnZWQ9dHJ1ZTtpZih0aGlzLm9wdGlvbnMuZGlzYWJsZWQpe3JldHVybjt9CnZhciB0bXAsdGhhdD10aGlzLG9wdGlvbnM9dGhpcy5vcHRpb25zLHgxPXRoaXMub3Bvc1swXSx5MT10aGlzLm9wb3NbMV0seDI9ZXZlbnQucGFnZVgseTI9ZXZlbnQucGFnZVk7aWYoeDE+eDIpe3RtcD14Mjt4Mj14MTt4MT10bXA7fQppZih5MT55Mil7dG1wPXkyO3kyPXkxO3kxPXRtcDt9CnRoaXMuaGVscGVyLmNzcyh7bGVmdDp4MSx0b3A6eTEsd2lkdGg6eDIteDEsaGVpZ2h0OnkyLXkxfSk7dGhpcy5zZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxlY3RlZT0kLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIiksaGl0PWZhbHNlLG9mZnNldD17fTtpZighc2VsZWN0ZWV8fHNlbGVjdGVlLmVsZW1lbnQ9PT10aGF0LmVsZW1lbnRbMF0pe3JldHVybjt9Cm9mZnNldC5sZWZ0PXNlbGVjdGVlLmxlZnQrdGhhdC5lbGVtZW50UG9zLmxlZnQ7b2Zmc2V0LnJpZ2h0PXNlbGVjdGVlLnJpZ2h0K3RoYXQuZWxlbWVudFBvcy5sZWZ0O29mZnNldC50b3A9c2VsZWN0ZWUudG9wK3RoYXQuZWxlbWVudFBvcy50b3A7b2Zmc2V0LmJvdHRvbT1zZWxlY3RlZS5ib3R0b20rdGhhdC5lbGVtZW50UG9zLnRvcDtpZihvcHRpb25zLnRvbGVyYW5jZT09PSJ0b3VjaCIpe2hpdD0oIShvZmZzZXQubGVmdD54Mnx8b2Zmc2V0LnJpZ2h0PHgxfHxvZmZzZXQudG9wPnkyfHxvZmZzZXQuYm90dG9tPHkxKSk7fWVsc2UgaWYob3B0aW9ucy50b2xlcmFuY2U9PT0iZml0Iil7aGl0PShvZmZzZXQubGVmdD54MSYmb2Zmc2V0LnJpZ2h0PHgyJiZvZmZzZXQudG9wPnkxJiZvZmZzZXQuYm90dG9tPHkyKTt9CmlmKGhpdCl7aWYoc2VsZWN0ZWUuc2VsZWN0ZWQpe3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpO3NlbGVjdGVlLnNlbGVjdGVkPWZhbHNlO30KaWYoc2VsZWN0ZWUudW5zZWxlY3Rpbmcpe3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpO3NlbGVjdGVlLnVuc2VsZWN0aW5nPWZhbHNlO30KaWYoIXNlbGVjdGVlLnNlbGVjdGluZyl7dGhhdC5fYWRkQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGluZyIpO3NlbGVjdGVlLnNlbGVjdGluZz10cnVlO3RoYXQuX3RyaWdnZXIoInNlbGVjdGluZyIsZXZlbnQse3NlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fX1lbHNle2lmKHNlbGVjdGVlLnNlbGVjdGluZyl7aWYoKGV2ZW50Lm1ldGFLZXl8fGV2ZW50LmN0cmxLZXkpJiZzZWxlY3RlZS5zdGFydHNlbGVjdGVkKXt0aGF0Ll9yZW1vdmVDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktc2VsZWN0aW5nIik7c2VsZWN0ZWUuc2VsZWN0aW5nPWZhbHNlO3RoYXQuX2FkZENsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpO3NlbGVjdGVlLnNlbGVjdGVkPXRydWU7fWVsc2V7dGhhdC5fcmVtb3ZlQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGluZyIpO3NlbGVjdGVlLnNlbGVjdGluZz1mYWxzZTtpZihzZWxlY3RlZS5zdGFydHNlbGVjdGVkKXt0aGF0Ll9hZGRDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKTtzZWxlY3RlZS51bnNlbGVjdGluZz10cnVlO30KdGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGV2ZW50LHt1bnNlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fX0KaWYoc2VsZWN0ZWUuc2VsZWN0ZWQpe2lmKCFldmVudC5tZXRhS2V5JiYhZXZlbnQuY3RybEtleSYmIXNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQpe3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpO3NlbGVjdGVlLnNlbGVjdGVkPWZhbHNlO3RoYXQuX2FkZENsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpO3NlbGVjdGVlLnVuc2VsZWN0aW5nPXRydWU7dGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGV2ZW50LHt1bnNlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fX19fSk7cmV0dXJuIGZhbHNlO30sX21vdXNlU3RvcDpmdW5jdGlvbihldmVudCl7dmFyIHRoYXQ9dGhpczt0aGlzLmRyYWdnZWQ9ZmFsc2U7JCgiLnVpLXVuc2VsZWN0aW5nIix0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt2YXIgc2VsZWN0ZWU9JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpO3NlbGVjdGVlLnVuc2VsZWN0aW5nPWZhbHNlO3NlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQ9ZmFsc2U7dGhhdC5fdHJpZ2dlcigidW5zZWxlY3RlZCIsZXZlbnQse3Vuc2VsZWN0ZWQ6c2VsZWN0ZWUuZWxlbWVudH0pO30pOyQoIi51aS1zZWxlY3RpbmciLHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxlY3RlZT0kLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7dGhhdC5fcmVtb3ZlQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGluZyIpLl9hZGRDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKTtzZWxlY3RlZS5zZWxlY3Rpbmc9ZmFsc2U7c2VsZWN0ZWUuc2VsZWN0ZWQ9dHJ1ZTtzZWxlY3RlZS5zdGFydHNlbGVjdGVkPXRydWU7dGhhdC5fdHJpZ2dlcigic2VsZWN0ZWQiLGV2ZW50LHtzZWxlY3RlZDpzZWxlY3RlZS5lbGVtZW50fSk7fSk7dGhpcy5fdHJpZ2dlcigic3RvcCIsZXZlbnQpO3RoaXMuaGVscGVyLnJlbW92ZSgpO3JldHVybiBmYWxzZTt9fSk7dmFyIHdpZGdldHNTb3J0YWJsZT0kLndpZGdldCgidWkuc29ydGFibGUiLCQudWkubW91c2Use3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6InNvcnQiLHJlYWR5OmZhbHNlLG9wdGlvbnM6e2FwcGVuZFRvOiJwYXJlbnQiLGF4aXM6ZmFsc2UsY29ubmVjdFdpdGg6ZmFsc2UsY29udGFpbm1lbnQ6ZmFsc2UsY3Vyc29yOiJhdXRvIixjdXJzb3JBdDpmYWxzZSxkcm9wT25FbXB0eTp0cnVlLGZvcmNlUGxhY2Vob2xkZXJTaXplOmZhbHNlLGZvcmNlSGVscGVyU2l6ZTpmYWxzZSxncmlkOmZhbHNlLGhhbmRsZTpmYWxzZSxoZWxwZXI6Im9yaWdpbmFsIixpdGVtczoiPiAqIixvcGFjaXR5OmZhbHNlLHBsYWNlaG9sZGVyOmZhbHNlLHJldmVydDpmYWxzZSxzY3JvbGw6dHJ1ZSxzY3JvbGxTZW5zaXRpdml0eToyMCxzY3JvbGxTcGVlZDoyMCxzY29wZToiZGVmYXVsdCIsdG9sZXJhbmNlOiJpbnRlcnNlY3QiLHpJbmRleDoxMDAwLGFjdGl2YXRlOm51bGwsYmVmb3JlU3RvcDpudWxsLGNoYW5nZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxvdXQ6bnVsbCxvdmVyOm51bGwscmVjZWl2ZTpudWxsLHJlbW92ZTpudWxsLHNvcnQ6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbCx1cGRhdGU6bnVsbH0sX2lzT3ZlckF4aXM6ZnVuY3Rpb24oeCxyZWZlcmVuY2Usc2l6ZSl7cmV0dXJuKHg+PXJlZmVyZW5jZSkmJih4PChyZWZlcmVuY2Urc2l6ZSkpO30sX2lzRmxvYXRpbmc6ZnVuY3Rpb24oaXRlbSl7cmV0dXJuKC9sZWZ0fHJpZ2h0LykudGVzdChpdGVtLmNzcygiZmxvYXQiKSl8fCgvaW5saW5lfHRhYmxlLWNlbGwvKS50ZXN0KGl0ZW0uY3NzKCJkaXNwbGF5IikpO30sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyQ2FjaGU9e307dGhpcy5fYWRkQ2xhc3MoInVpLXNvcnRhYmxlIik7dGhpcy5yZWZyZXNoKCk7dGhpcy5vZmZzZXQ9dGhpcy5lbGVtZW50Lm9mZnNldCgpO3RoaXMuX21vdXNlSW5pdCgpO3RoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO3RoaXMucmVhZHk9dHJ1ZTt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzLl9zdXBlcihrZXksdmFsdWUpO2lmKGtleT09PSJoYW5kbGUiKXt0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTt9fSxfc2V0SGFuZGxlQ2xhc3NOYW1lOmZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpczt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQuZmluZCgiLnVpLXNvcnRhYmxlLWhhbmRsZSIpLCJ1aS1zb3J0YWJsZS1oYW5kbGUiKTskLmVhY2godGhpcy5pdGVtcyxmdW5jdGlvbigpe3RoYXQuX2FkZENsYXNzKHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGU/dGhpcy5pdGVtLmZpbmQodGhpcy5pbnN0YW5jZS5vcHRpb25zLmhhbmRsZSk6dGhpcy5pdGVtLCJ1aS1zb3J0YWJsZS1oYW5kbGUiKTt9KTt9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEZXN0cm95KCk7Zm9yKHZhciBpPXRoaXMuaXRlbXMubGVuZ3RoLTE7aT49MDtpLS0pe3RoaXMuaXRlbXNbaV0uaXRlbS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZSsiLWl0ZW0iKTt9CnJldHVybiB0aGlzO30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihldmVudCxvdmVycmlkZUhhbmRsZSl7dmFyIGN1cnJlbnRJdGVtPW51bGwsdmFsaWRIYW5kbGU9ZmFsc2UsdGhhdD10aGlzO2lmKHRoaXMucmV2ZXJ0aW5nKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLm9wdGlvbnMuZGlzYWJsZWR8fHRoaXMub3B0aW9ucy50eXBlPT09InN0YXRpYyIpe3JldHVybiBmYWxzZTt9CnRoaXMuX3JlZnJlc2hJdGVtcyhldmVudCk7JChldmVudC50YXJnZXQpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7aWYoJC5kYXRhKHRoaXMsdGhhdC53aWRnZXROYW1lKyItaXRlbSIpPT09dGhhdCl7Y3VycmVudEl0ZW09JCh0aGlzKTtyZXR1cm4gZmFsc2U7fX0pO2lmKCQuZGF0YShldmVudC50YXJnZXQsdGhhdC53aWRnZXROYW1lKyItaXRlbSIpPT09dGhhdCl7Y3VycmVudEl0ZW09JChldmVudC50YXJnZXQpO30KaWYoIWN1cnJlbnRJdGVtKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLm9wdGlvbnMuaGFuZGxlJiYhb3ZlcnJpZGVIYW5kbGUpeyQodGhpcy5vcHRpb25zLmhhbmRsZSxjdXJyZW50SXRlbSkuZmluZCgiKiIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcz09PWV2ZW50LnRhcmdldCl7dmFsaWRIYW5kbGU9dHJ1ZTt9fSk7aWYoIXZhbGlkSGFuZGxlKXtyZXR1cm4gZmFsc2U7fX0KdGhpcy5jdXJyZW50SXRlbT1jdXJyZW50SXRlbTt0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpO3JldHVybiB0cnVlO30sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZXZlbnQsb3ZlcnJpZGVIYW5kbGUsbm9BY3RpdmF0aW9uKXt2YXIgaSxib2R5LG89dGhpcy5vcHRpb25zO3RoaXMuY3VycmVudENvbnRhaW5lcj10aGlzO3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO3RoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcihldmVudCk7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO3RoaXMuX2NhY2hlTWFyZ2lucygpO3RoaXMuc2Nyb2xsUGFyZW50PXRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpO3RoaXMub2Zmc2V0PXRoaXMuY3VycmVudEl0ZW0ub2Zmc2V0KCk7dGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9OyQuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDpldmVudC5wYWdlWC10aGlzLm9mZnNldC5sZWZ0LHRvcDpldmVudC5wYWdlWS10aGlzLm9mZnNldC50b3B9LHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfSk7dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIik7dGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoInBvc2l0aW9uIik7dGhpcy5vcmlnaW5hbFBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpO3RoaXMub3JpZ2luYWxQYWdlWD1ldmVudC5wYWdlWDt0aGlzLm9yaWdpbmFsUGFnZVk9ZXZlbnQucGFnZVk7KG8uY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoby5jdXJzb3JBdCkpO3RoaXMuZG9tUG9zaXRpb249e3ByZXY6dGhpcy5jdXJyZW50SXRlbS5wcmV2KClbMF0scGFyZW50OnRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF19O2lmKHRoaXMuaGVscGVyWzBdIT09dGhpcy5jdXJyZW50SXRlbVswXSl7dGhpcy5jdXJyZW50SXRlbS5oaWRlKCk7fQp0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcigpO2lmKG8uY29udGFpbm1lbnQpe3RoaXMuX3NldENvbnRhaW5tZW50KCk7fQppZihvLmN1cnNvciYmby5jdXJzb3IhPT0iYXV0byIpe2JvZHk9dGhpcy5kb2N1bWVudC5maW5kKCJib2R5Iik7dGhpcy5zdG9yZWRDdXJzb3I9Ym9keS5jc3MoImN1cnNvciIpO2JvZHkuY3NzKCJjdXJzb3IiLG8uY3Vyc29yKTt0aGlzLnN0b3JlZFN0eWxlc2hlZXQ9JCgiPHN0eWxlPip7IGN1cnNvcjogIitvLmN1cnNvcisiICFpbXBvcnRhbnQ7IH08L3N0eWxlPiIpLmFwcGVuZFRvKGJvZHkpO30KaWYoby5vcGFjaXR5KXtpZih0aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiKSl7dGhpcy5fc3RvcmVkT3BhY2l0eT10aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiKTt9CnRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsby5vcGFjaXR5KTt9CmlmKG8uekluZGV4KXtpZih0aGlzLmhlbHBlci5jc3MoInpJbmRleCIpKXt0aGlzLl9zdG9yZWRaSW5kZXg9dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiKTt9CnRoaXMuaGVscGVyLmNzcygiekluZGV4IixvLnpJbmRleCk7fQppZih0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPT0iSFRNTCIpe3RoaXMub3ZlcmZsb3dPZmZzZXQ9dGhpcy5zY3JvbGxQYXJlbnQub2Zmc2V0KCk7fQp0aGlzLl90cmlnZ2VyKCJzdGFydCIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO2lmKCF0aGlzLl9wcmVzZXJ2ZUhlbHBlclByb3BvcnRpb25zKXt0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7fQppZighbm9BY3RpdmF0aW9uKXtmb3IoaT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7aT49MDtpLS0pe3RoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcigiYWN0aXZhdGUiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7fX0KaWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpczt9CmlmKCQudWkuZGRtYW5hZ2VyJiYhby5kcm9wQmVoYXZpb3VyKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGV2ZW50KTt9CnRoaXMuZHJhZ2dpbmc9dHJ1ZTt0aGlzLl9hZGRDbGFzcyh0aGlzLmhlbHBlciwidWktc29ydGFibGUtaGVscGVyIik7dGhpcy5fbW91c2VEcmFnKGV2ZW50KTtyZXR1cm4gdHJ1ZTt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZXZlbnQpe3ZhciBpLGl0ZW0saXRlbUVsZW1lbnQsaW50ZXJzZWN0aW9uLG89dGhpcy5vcHRpb25zLHNjcm9sbGVkPWZhbHNlO3RoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCk7dGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTtpZighdGhpcy5sYXN0UG9zaXRpb25BYnMpe3RoaXMubGFzdFBvc2l0aW9uQWJzPXRoaXMucG9zaXRpb25BYnM7fQppZih0aGlzLm9wdGlvbnMuc2Nyb2xsKXtpZih0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPT0iSFRNTCIpe2lmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCt0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQpLQpldmVudC5wYWdlWTxvLnNjcm9sbFNlbnNpdGl2aXR5KXt0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9c2Nyb2xsZWQ9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wK28uc2Nyb2xsU3BlZWQ7fWVsc2UgaWYoZXZlbnQucGFnZVktdGhpcy5vdmVyZmxvd09mZnNldC50b3A8by5zY3JvbGxTZW5zaXRpdml0eSl7dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPXNjcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcC1vLnNjcm9sbFNwZWVkO30KaWYoKHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCt0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aCktCmV2ZW50LnBhZ2VYPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9c2Nyb2xsZWQ9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCtvLnNjcm9sbFNwZWVkO31lbHNlIGlmKGV2ZW50LnBhZ2VYLXRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdDxvLnNjcm9sbFNlbnNpdGl2aXR5KXt0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXNjcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQtby5zY3JvbGxTcGVlZDt9fWVsc2V7aWYoZXZlbnQucGFnZVktdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCh0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpLW8uc2Nyb2xsU3BlZWQpO31lbHNlIGlmKHRoaXMud2luZG93LmhlaWdodCgpLShldmVudC5wYWdlWS10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCh0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpK28uc2Nyb2xsU3BlZWQpO30KaWYoZXZlbnQucGFnZVgtdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLW8uc2Nyb2xsU3BlZWQpO31lbHNlIGlmKHRoaXMud2luZG93LndpZHRoKCktKGV2ZW50LnBhZ2VYLXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLmRvY3VtZW50LnNjcm9sbExlZnQodGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCkrby5zY3JvbGxTcGVlZCk7fX0KaWYoc2Nyb2xsZWQhPT1mYWxzZSYmJC51aS5kZG1hbmFnZXImJiFvLmRyb3BCZWhhdmlvdXIpeyQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsZXZlbnQpO319CnRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7aWYoIXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLm9wdGlvbnMuYXhpcyE9PSJ5Iil7dGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4Ijt9CmlmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPT0ieCIpe3RoaXMuaGVscGVyWzBdLnN0eWxlLnRvcD10aGlzLnBvc2l0aW9uLnRvcCsicHgiO30KZm9yKGk9dGhpcy5pdGVtcy5sZW5ndGgtMTtpPj0wO2ktLSl7aXRlbT10aGlzLml0ZW1zW2ldO2l0ZW1FbGVtZW50PWl0ZW0uaXRlbVswXTtpbnRlcnNlY3Rpb249dGhpcy5faW50ZXJzZWN0c1dpdGhQb2ludGVyKGl0ZW0pO2lmKCFpbnRlcnNlY3Rpb24pe2NvbnRpbnVlO30KaWYoaXRlbS5pbnN0YW5jZSE9PXRoaXMuY3VycmVudENvbnRhaW5lcil7Y29udGludWU7fQppZihpdGVtRWxlbWVudCE9PXRoaXMuY3VycmVudEl0ZW1bMF0mJnRoaXMucGxhY2Vob2xkZXJbaW50ZXJzZWN0aW9uPT09MT8ibmV4dCI6InByZXYiXSgpWzBdIT09aXRlbUVsZW1lbnQmJiEkLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0saXRlbUVsZW1lbnQpJiYodGhpcy5vcHRpb25zLnR5cGU9PT0ic2VtaS1keW5hbWljIj8hJC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0saXRlbUVsZW1lbnQpOnRydWUpKXt0aGlzLmRpcmVjdGlvbj1pbnRlcnNlY3Rpb249PT0xPyJkb3duIjoidXAiO2lmKHRoaXMub3B0aW9ucy50b2xlcmFuY2U9PT0icG9pbnRlciJ8fHRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMoaXRlbSkpe3RoaXMuX3JlYXJyYW5nZShldmVudCxpdGVtKTt9ZWxzZXticmVhazt9CnRoaXMuX3RyaWdnZXIoImNoYW5nZSIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO2JyZWFrO319CnRoaXMuX2NvbnRhY3RDb250YWluZXJzKGV2ZW50KTtpZigkLnVpLmRkbWFuYWdlcil7JC51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGV2ZW50KTt9CnRoaXMuX3RyaWdnZXIoInNvcnQiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt0aGlzLmxhc3RQb3NpdGlvbkFicz10aGlzLnBvc2l0aW9uQWJzO3JldHVybiBmYWxzZTt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZXZlbnQsbm9Qcm9wYWdhdGlvbil7aWYoIWV2ZW50KXtyZXR1cm47fQppZigkLnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKXskLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsZXZlbnQpO30KaWYodGhpcy5vcHRpb25zLnJldmVydCl7dmFyIHRoYXQ9dGhpcyxjdXI9dGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKSxheGlzPXRoaXMub3B0aW9ucy5heGlzLGFuaW1hdGlvbj17fTtpZighYXhpc3x8YXhpcz09PSJ4Iil7YW5pbWF0aW9uLmxlZnQ9Y3VyLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnQrCih0aGlzLm9mZnNldFBhcmVudFswXT09PXRoaXMuZG9jdW1lbnRbMF0uYm9keT8wOnRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbExlZnQpO30KaWYoIWF4aXN8fGF4aXM9PT0ieSIpe2FuaW1hdGlvbi50b3A9Y3VyLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLXRoaXMubWFyZ2lucy50b3ArCih0aGlzLm9mZnNldFBhcmVudFswXT09PXRoaXMuZG9jdW1lbnRbMF0uYm9keT8wOnRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbFRvcCk7fQp0aGlzLnJldmVydGluZz10cnVlOyQodGhpcy5oZWxwZXIpLmFuaW1hdGUoYW5pbWF0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnQsMTApfHw1MDAsZnVuY3Rpb24oKXt0aGF0Ll9jbGVhcihldmVudCk7fSk7fWVsc2V7dGhpcy5fY2xlYXIoZXZlbnQsbm9Qcm9wYWdhdGlvbik7fQpyZXR1cm4gZmFsc2U7fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmRyYWdnaW5nKXt0aGlzLl9tb3VzZVVwKG5ldyAkLkV2ZW50KCJtb3VzZXVwIix7dGFyZ2V0Om51bGx9KSk7aWYodGhpcy5vcHRpb25zLmhlbHBlcj09PSJvcmlnaW5hbCIpe3RoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUyk7dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50SXRlbSwidWktc29ydGFibGUtaGVscGVyIik7fWVsc2V7dGhpcy5jdXJyZW50SXRlbS5zaG93KCk7fQpmb3IodmFyIGk9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2k+PTA7aS0tKXt0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoImRlYWN0aXZhdGUiLG51bGwsdGhpcy5fdWlIYXNoKHRoaXMpKTtpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcil7dGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJvdXQiLG51bGwsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcj0wO319fQppZih0aGlzLnBsYWNlaG9sZGVyKXtpZih0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUpe3RoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTt9CmlmKHRoaXMub3B0aW9ucy5oZWxwZXIhPT0ib3JpZ2luYWwiJiZ0aGlzLmhlbHBlciYmdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSl7dGhpcy5oZWxwZXIucmVtb3ZlKCk7fQokLmV4dGVuZCh0aGlzLHtoZWxwZXI6bnVsbCxkcmFnZ2luZzpmYWxzZSxyZXZlcnRpbmc6ZmFsc2UsX25vRmluYWxTb3J0Om51bGx9KTtpZih0aGlzLmRvbVBvc2l0aW9uLnByZXYpeyQodGhpcy5kb21Qb3NpdGlvbi5wcmV2KS5hZnRlcih0aGlzLmN1cnJlbnRJdGVtKTt9ZWxzZXskKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pO319CnJldHVybiB0aGlzO30sc2VyaWFsaXplOmZ1bmN0aW9uKG8pe3ZhciBpdGVtcz10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8mJm8uY29ubmVjdGVkKSxzdHI9W107bz1vfHx7fTskKGl0ZW1zKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHJlcz0oJChvLml0ZW18fHRoaXMpLmF0dHIoby5hdHRyaWJ1dGV8fCJpZCIpfHwiIikubWF0Y2goby5leHByZXNzaW9ufHwoLyguKylbXC09X10oLispLykpO2lmKHJlcyl7c3RyLnB1c2goKG8ua2V5fHxyZXNbMV0rIltdIikrIj0iKyhvLmtleSYmby5leHByZXNzaW9uP3Jlc1sxXTpyZXNbMl0pKTt9fSk7aWYoIXN0ci5sZW5ndGgmJm8ua2V5KXtzdHIucHVzaChvLmtleSsiPSIpO30KcmV0dXJuIHN0ci5qb2luKCImIik7fSx0b0FycmF5OmZ1bmN0aW9uKG8pe3ZhciBpdGVtcz10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8mJm8uY29ubmVjdGVkKSxyZXQ9W107bz1vfHx7fTtpdGVtcy5lYWNoKGZ1bmN0aW9uKCl7cmV0LnB1c2goJChvLml0ZW18fHRoaXMpLmF0dHIoby5hdHRyaWJ1dGV8fCJpZCIpfHwiIik7fSk7cmV0dXJuIHJldDt9LF9pbnRlcnNlY3RzV2l0aDpmdW5jdGlvbihpdGVtKXt2YXIgeDE9dGhpcy5wb3NpdGlvbkFicy5sZWZ0LHgyPXgxK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgseTE9dGhpcy5wb3NpdGlvbkFicy50b3AseTI9eTErdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbD1pdGVtLmxlZnQscj1sK2l0ZW0ud2lkdGgsdD1pdGVtLnRvcCxiPXQraXRlbS5oZWlnaHQsZHlDbGljaz10aGlzLm9mZnNldC5jbGljay50b3AsZHhDbGljaz10aGlzLm9mZnNldC5jbGljay5sZWZ0LGlzT3ZlckVsZW1lbnRIZWlnaHQ9KHRoaXMub3B0aW9ucy5heGlzPT09IngiKXx8KCh5MStkeUNsaWNrKT50JiYoeTErZHlDbGljayk8YiksaXNPdmVyRWxlbWVudFdpZHRoPSh0aGlzLm9wdGlvbnMuYXhpcz09PSJ5Iil8fCgoeDErZHhDbGljayk+bCYmKHgxK2R4Q2xpY2spPHIpLGlzT3ZlckVsZW1lbnQ9aXNPdmVyRWxlbWVudEhlaWdodCYmaXNPdmVyRWxlbWVudFdpZHRoO2lmKHRoaXMub3B0aW9ucy50b2xlcmFuY2U9PT0icG9pbnRlciJ8fHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzfHwodGhpcy5vcHRpb25zLnRvbGVyYW5jZSE9PSJwb2ludGVyIiYmdGhpcy5oZWxwZXJQcm9wb3J0aW9uc1t0aGlzLmZsb2F0aW5nPyJ3aWR0aCI6ImhlaWdodCJdPml0ZW1bdGhpcy5mbG9hdGluZz8id2lkdGgiOiJoZWlnaHQiXSkpe3JldHVybiBpc092ZXJFbGVtZW50O31lbHNle3JldHVybihsPHgxKyh0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzIpJiZ4Mi0odGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yKTxyJiZ0PHkxKyh0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yKSYmeTItKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzIpPGIpO319LF9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6ZnVuY3Rpb24oaXRlbSl7dmFyIHZlcnRpY2FsRGlyZWN0aW9uLGhvcml6b250YWxEaXJlY3Rpb24saXNPdmVyRWxlbWVudEhlaWdodD0odGhpcy5vcHRpb25zLmF4aXM9PT0ieCIpfHx0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCxpdGVtLnRvcCxpdGVtLmhlaWdodCksaXNPdmVyRWxlbWVudFdpZHRoPSh0aGlzLm9wdGlvbnMuYXhpcz09PSJ5Iil8fHRoaXMuX2lzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0K3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQsaXRlbS5sZWZ0LGl0ZW0ud2lkdGgpLGlzT3ZlckVsZW1lbnQ9aXNPdmVyRWxlbWVudEhlaWdodCYmaXNPdmVyRWxlbWVudFdpZHRoO2lmKCFpc092ZXJFbGVtZW50KXtyZXR1cm4gZmFsc2U7fQp2ZXJ0aWNhbERpcmVjdGlvbj10aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKTtob3Jpem9udGFsRGlyZWN0aW9uPXRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7cmV0dXJuIHRoaXMuZmxvYXRpbmc/KChob3Jpem9udGFsRGlyZWN0aW9uPT09InJpZ2h0Inx8dmVydGljYWxEaXJlY3Rpb249PT0iZG93biIpPzI6MSk6KHZlcnRpY2FsRGlyZWN0aW9uJiYodmVydGljYWxEaXJlY3Rpb249PT0iZG93biI/MjoxKSk7fSxfaW50ZXJzZWN0c1dpdGhTaWRlczpmdW5jdGlvbihpdGVtKXt2YXIgaXNPdmVyQm90dG9tSGFsZj10aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wKwp0aGlzLm9mZnNldC5jbGljay50b3AsaXRlbS50b3ArKGl0ZW0uaGVpZ2h0LzIpLGl0ZW0uaGVpZ2h0KSxpc092ZXJSaWdodEhhbGY9dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrCnRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsaXRlbS5sZWZ0KyhpdGVtLndpZHRoLzIpLGl0ZW0ud2lkdGgpLHZlcnRpY2FsRGlyZWN0aW9uPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLGhvcml6b250YWxEaXJlY3Rpb249dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtpZih0aGlzLmZsb2F0aW5nJiZob3Jpem9udGFsRGlyZWN0aW9uKXtyZXR1cm4oKGhvcml6b250YWxEaXJlY3Rpb249PT0icmlnaHQiJiZpc092ZXJSaWdodEhhbGYpfHwoaG9yaXpvbnRhbERpcmVjdGlvbj09PSJsZWZ0IiYmIWlzT3ZlclJpZ2h0SGFsZikpO31lbHNle3JldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiYmKCh2ZXJ0aWNhbERpcmVjdGlvbj09PSJkb3duIiYmaXNPdmVyQm90dG9tSGFsZil8fCh2ZXJ0aWNhbERpcmVjdGlvbj09PSJ1cCImJiFpc092ZXJCb3R0b21IYWxmKSk7fX0sX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBkZWx0YT10aGlzLnBvc2l0aW9uQWJzLnRvcC10aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7cmV0dXJuIGRlbHRhIT09MCYmKGRlbHRhPjA/ImRvd24iOiJ1cCIpO30sX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGRlbHRhPXRoaXMucG9zaXRpb25BYnMubGVmdC10aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0O3JldHVybiBkZWx0YSE9PTAmJihkZWx0YT4wPyJyaWdodCI6ImxlZnQiKTt9LHJlZnJlc2g6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3JlZnJlc2hJdGVtcyhldmVudCk7dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7cmV0dXJuIHRoaXM7fSxfY29ubmVjdFdpdGg6ZnVuY3Rpb24oKXt2YXIgb3B0aW9ucz10aGlzLm9wdGlvbnM7cmV0dXJuIG9wdGlvbnMuY29ubmVjdFdpdGguY29uc3RydWN0b3I9PT1TdHJpbmc/W29wdGlvbnMuY29ubmVjdFdpdGhdOm9wdGlvbnMuY29ubmVjdFdpdGg7fSxfZ2V0SXRlbXNBc2pRdWVyeTpmdW5jdGlvbihjb25uZWN0ZWQpe3ZhciBpLGosY3VyLGluc3QsaXRlbXM9W10scXVlcmllcz1bXSxjb25uZWN0V2l0aD10aGlzLl9jb25uZWN0V2l0aCgpO2lmKGNvbm5lY3RXaXRoJiZjb25uZWN0ZWQpe2ZvcihpPWNvbm5lY3RXaXRoLmxlbmd0aC0xO2k+PTA7aS0tKXtjdXI9JChjb25uZWN0V2l0aFtpXSx0aGlzLmRvY3VtZW50WzBdKTtmb3Ioaj1jdXIubGVuZ3RoLTE7aj49MDtqLS0pe2luc3Q9JC5kYXRhKGN1cltqXSx0aGlzLndpZGdldEZ1bGxOYW1lKTtpZihpbnN0JiZpbnN0IT09dGhpcyYmIWluc3Qub3B0aW9ucy5kaXNhYmxlZCl7cXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24oaW5zdC5vcHRpb25zLml0ZW1zKT9pbnN0Lm9wdGlvbnMuaXRlbXMuY2FsbChpbnN0LmVsZW1lbnQpOiQoaW5zdC5vcHRpb25zLml0ZW1zLGluc3QuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCIudWktc29ydGFibGUtcGxhY2Vob2xkZXIiKSxpbnN0XSk7fX19fQpxdWVyaWVzLnB1c2goWyQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuaXRlbXMpP3RoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudCxudWxsLHtvcHRpb25zOnRoaXMub3B0aW9ucyxpdGVtOnRoaXMuY3VycmVudEl0ZW19KTokKHRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLmVsZW1lbnQpLm5vdCgiLnVpLXNvcnRhYmxlLWhlbHBlciIpLm5vdCgiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIiksdGhpc10pO2Z1bmN0aW9uIGFkZEl0ZW1zKCl7aXRlbXMucHVzaCh0aGlzKTt9CmZvcihpPXF1ZXJpZXMubGVuZ3RoLTE7aT49MDtpLS0pe3F1ZXJpZXNbaV1bMF0uZWFjaChhZGRJdGVtcyk7fQpyZXR1cm4gJChpdGVtcyk7fSxfcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXM6ZnVuY3Rpb24oKXt2YXIgbGlzdD10aGlzLmN1cnJlbnRJdGVtLmZpbmQoIjpkYXRhKCIrdGhpcy53aWRnZXROYW1lKyItaXRlbSkiKTt0aGlzLml0ZW1zPSQuZ3JlcCh0aGlzLml0ZW1zLGZ1bmN0aW9uKGl0ZW0pe2Zvcih2YXIgaj0wO2o8bGlzdC5sZW5ndGg7aisrKXtpZihsaXN0W2pdPT09aXRlbS5pdGVtWzBdKXtyZXR1cm4gZmFsc2U7fX0KcmV0dXJuIHRydWU7fSk7fSxfcmVmcmVzaEl0ZW1zOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLml0ZW1zPVtdO3RoaXMuY29udGFpbmVycz1bdGhpc107dmFyIGksaixjdXIsaW5zdCx0YXJnZXREYXRhLF9xdWVyaWVzLGl0ZW0scXVlcmllc0xlbmd0aCxpdGVtcz10aGlzLml0ZW1zLHF1ZXJpZXM9W1skLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnRbMF0sZXZlbnQse2l0ZW06dGhpcy5jdXJyZW50SXRlbX0pOiQodGhpcy5vcHRpb25zLml0ZW1zLHRoaXMuZWxlbWVudCksdGhpc11dLGNvbm5lY3RXaXRoPXRoaXMuX2Nvbm5lY3RXaXRoKCk7aWYoY29ubmVjdFdpdGgmJnRoaXMucmVhZHkpe2ZvcihpPWNvbm5lY3RXaXRoLmxlbmd0aC0xO2k+PTA7aS0tKXtjdXI9JChjb25uZWN0V2l0aFtpXSx0aGlzLmRvY3VtZW50WzBdKTtmb3Ioaj1jdXIubGVuZ3RoLTE7aj49MDtqLS0pe2luc3Q9JC5kYXRhKGN1cltqXSx0aGlzLndpZGdldEZ1bGxOYW1lKTtpZihpbnN0JiZpbnN0IT09dGhpcyYmIWluc3Qub3B0aW9ucy5kaXNhYmxlZCl7cXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24oaW5zdC5vcHRpb25zLml0ZW1zKT9pbnN0Lm9wdGlvbnMuaXRlbXMuY2FsbChpbnN0LmVsZW1lbnRbMF0sZXZlbnQse2l0ZW06dGhpcy5jdXJyZW50SXRlbX0pOiQoaW5zdC5vcHRpb25zLml0ZW1zLGluc3QuZWxlbWVudCksaW5zdF0pO3RoaXMuY29udGFpbmVycy5wdXNoKGluc3QpO319fX0KZm9yKGk9cXVlcmllcy5sZW5ndGgtMTtpPj0wO2ktLSl7dGFyZ2V0RGF0YT1xdWVyaWVzW2ldWzFdO19xdWVyaWVzPXF1ZXJpZXNbaV1bMF07Zm9yKGo9MCxxdWVyaWVzTGVuZ3RoPV9xdWVyaWVzLmxlbmd0aDtqPHF1ZXJpZXNMZW5ndGg7aisrKXtpdGVtPSQoX3F1ZXJpZXNbal0pO2l0ZW0uZGF0YSh0aGlzLndpZGdldE5hbWUrIi1pdGVtIix0YXJnZXREYXRhKTtpdGVtcy5wdXNoKHtpdGVtOml0ZW0saW5zdGFuY2U6dGFyZ2V0RGF0YSx3aWR0aDowLGhlaWdodDowLGxlZnQ6MCx0b3A6MH0pO319fSxyZWZyZXNoUG9zaXRpb25zOmZ1bmN0aW9uKGZhc3Qpe3RoaXMuZmxvYXRpbmc9dGhpcy5pdGVtcy5sZW5ndGg/dGhpcy5vcHRpb25zLmF4aXM9PT0ieCJ8fHRoaXMuX2lzRmxvYXRpbmcodGhpcy5pdGVtc1swXS5pdGVtKTpmYWxzZTtpZih0aGlzLm9mZnNldFBhcmVudCYmdGhpcy5oZWxwZXIpe3RoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKTt9CnZhciBpLGl0ZW0sdCxwO2ZvcihpPXRoaXMuaXRlbXMubGVuZ3RoLTE7aT49MDtpLS0pe2l0ZW09dGhpcy5pdGVtc1tpXTtpZihpdGVtLmluc3RhbmNlIT09dGhpcy5jdXJyZW50Q29udGFpbmVyJiZ0aGlzLmN1cnJlbnRDb250YWluZXImJml0ZW0uaXRlbVswXSE9PXRoaXMuY3VycmVudEl0ZW1bMF0pe2NvbnRpbnVlO30KdD10aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudD8kKHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LGl0ZW0uaXRlbSk6aXRlbS5pdGVtO2lmKCFmYXN0KXtpdGVtLndpZHRoPXQub3V0ZXJXaWR0aCgpO2l0ZW0uaGVpZ2h0PXQub3V0ZXJIZWlnaHQoKTt9CnA9dC5vZmZzZXQoKTtpdGVtLmxlZnQ9cC5sZWZ0O2l0ZW0udG9wPXAudG9wO30KaWYodGhpcy5vcHRpb25zLmN1c3RvbSYmdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycyl7dGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpO31lbHNle2ZvcihpPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtpPj0wO2ktLSl7cD10aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vZmZzZXQoKTt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUubGVmdD1wLmxlZnQ7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLnRvcD1wLnRvcDt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUud2lkdGg9dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub3V0ZXJXaWR0aCgpO3RoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5oZWlnaHQ9dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub3V0ZXJIZWlnaHQoKTt9fQpyZXR1cm4gdGhpczt9LF9jcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbih0aGF0KXt0aGF0PXRoYXR8fHRoaXM7dmFyIGNsYXNzTmFtZSxvPXRoYXQub3B0aW9ucztpZighby5wbGFjZWhvbGRlcnx8by5wbGFjZWhvbGRlci5jb25zdHJ1Y3Rvcj09PVN0cmluZyl7Y2xhc3NOYW1lPW8ucGxhY2Vob2xkZXI7by5wbGFjZWhvbGRlcj17ZWxlbWVudDpmdW5jdGlvbigpe3ZhciBub2RlTmFtZT10aGF0LmN1cnJlbnRJdGVtWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksZWxlbWVudD0kKCI8Iitub2RlTmFtZSsiPiIsdGhhdC5kb2N1bWVudFswXSk7dGhhdC5fYWRkQ2xhc3MoZWxlbWVudCwidWktc29ydGFibGUtcGxhY2Vob2xkZXIiLGNsYXNzTmFtZXx8dGhhdC5jdXJyZW50SXRlbVswXS5jbGFzc05hbWUpLl9yZW1vdmVDbGFzcyhlbGVtZW50LCJ1aS1zb3J0YWJsZS1oZWxwZXIiKTtpZihub2RlTmFtZT09PSJ0Ym9keSIpe3RoYXQuX2NyZWF0ZVRyUGxhY2Vob2xkZXIodGhhdC5jdXJyZW50SXRlbS5maW5kKCJ0ciIpLmVxKDApLCQoIjx0cj4iLHRoYXQuZG9jdW1lbnRbMF0pLmFwcGVuZFRvKGVsZW1lbnQpKTt9ZWxzZSBpZihub2RlTmFtZT09PSJ0ciIpe3RoYXQuX2NyZWF0ZVRyUGxhY2Vob2xkZXIodGhhdC5jdXJyZW50SXRlbSxlbGVtZW50KTt9ZWxzZSBpZihub2RlTmFtZT09PSJpbWciKXtlbGVtZW50LmF0dHIoInNyYyIsdGhhdC5jdXJyZW50SXRlbS5hdHRyKCJzcmMiKSk7fQppZighY2xhc3NOYW1lKXtlbGVtZW50LmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpO30KcmV0dXJuIGVsZW1lbnQ7fSx1cGRhdGU6ZnVuY3Rpb24oY29udGFpbmVyLHApe2lmKGNsYXNzTmFtZSYmIW8uZm9yY2VQbGFjZWhvbGRlclNpemUpe3JldHVybjt9CmlmKCFwLmhlaWdodCgpKXtwLmhlaWdodCh0aGF0LmN1cnJlbnRJdGVtLmlubmVySGVpZ2h0KCktCnBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nVG9wIil8fDAsMTApLQpwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ0JvdHRvbSIpfHwwLDEwKSk7fQppZighcC53aWR0aCgpKXtwLndpZHRoKHRoYXQuY3VycmVudEl0ZW0uaW5uZXJXaWR0aCgpLQpwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ0xlZnQiKXx8MCwxMCktCnBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nUmlnaHQiKXx8MCwxMCkpO319fTt9CnRoYXQucGxhY2Vob2xkZXI9JChvLnBsYWNlaG9sZGVyLmVsZW1lbnQuY2FsbCh0aGF0LmVsZW1lbnQsdGhhdC5jdXJyZW50SXRlbSkpO3RoYXQuY3VycmVudEl0ZW0uYWZ0ZXIodGhhdC5wbGFjZWhvbGRlcik7by5wbGFjZWhvbGRlci51cGRhdGUodGhhdCx0aGF0LnBsYWNlaG9sZGVyKTt9LF9jcmVhdGVUclBsYWNlaG9sZGVyOmZ1bmN0aW9uKHNvdXJjZVRyLHRhcmdldFRyKXt2YXIgdGhhdD10aGlzO3NvdXJjZVRyLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpeyQoIjx0ZD4mIzE2MDs8L3RkPiIsdGhhdC5kb2N1bWVudFswXSkuYXR0cigiY29sc3BhbiIsJCh0aGlzKS5hdHRyKCJjb2xzcGFuIil8fDEpLmFwcGVuZFRvKHRhcmdldFRyKTt9KTt9LF9jb250YWN0Q29udGFpbmVyczpmdW5jdGlvbihldmVudCl7dmFyIGksaixkaXN0LGl0ZW1XaXRoTGVhc3REaXN0YW5jZSxwb3NQcm9wZXJ0eSxzaXplUHJvcGVydHksY3VyLG5lYXJCb3R0b20sZmxvYXRpbmcsYXhpcyxpbm5lcm1vc3RDb250YWluZXI9bnVsbCxpbm5lcm1vc3RJbmRleD1udWxsO2ZvcihpPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYoJC5jb250YWlucyh0aGlzLmN1cnJlbnRJdGVtWzBdLHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdKSl7Y29udGludWU7fQppZih0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUpKXtpZihpbm5lcm1vc3RDb250YWluZXImJiQuY29udGFpbnModGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnRbMF0saW5uZXJtb3N0Q29udGFpbmVyLmVsZW1lbnRbMF0pKXtjb250aW51ZTt9CmlubmVybW9zdENvbnRhaW5lcj10aGlzLmNvbnRhaW5lcnNbaV07aW5uZXJtb3N0SW5kZXg9aTt9ZWxzZXtpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcil7dGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJvdXQiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXI9MDt9fX0KaWYoIWlubmVybW9zdENvbnRhaW5lcil7cmV0dXJuO30KaWYodGhpcy5jb250YWluZXJzLmxlbmd0aD09PTEpe2lmKCF0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uX3RyaWdnZXIoIm92ZXIiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyPTE7fX1lbHNle2Rpc3Q9MTAwMDA7aXRlbVdpdGhMZWFzdERpc3RhbmNlPW51bGw7ZmxvYXRpbmc9aW5uZXJtb3N0Q29udGFpbmVyLmZsb2F0aW5nfHx0aGlzLl9pc0Zsb2F0aW5nKHRoaXMuY3VycmVudEl0ZW0pO3Bvc1Byb3BlcnR5PWZsb2F0aW5nPyJsZWZ0IjoidG9wIjtzaXplUHJvcGVydHk9ZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0IjtheGlzPWZsb2F0aW5nPyJwYWdlWCI6InBhZ2VZIjtmb3Ioaj10aGlzLml0ZW1zLmxlbmd0aC0xO2o+PTA7ai0tKXtpZighJC5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmVsZW1lbnRbMF0sdGhpcy5pdGVtc1tqXS5pdGVtWzBdKSl7Y29udGludWU7fQppZih0aGlzLml0ZW1zW2pdLml0ZW1bMF09PT10aGlzLmN1cnJlbnRJdGVtWzBdKXtjb250aW51ZTt9CmN1cj10aGlzLml0ZW1zW2pdLml0ZW0ub2Zmc2V0KClbcG9zUHJvcGVydHldO25lYXJCb3R0b209ZmFsc2U7aWYoZXZlbnRbYXhpc10tY3VyPnRoaXMuaXRlbXNbal1bc2l6ZVByb3BlcnR5XS8yKXtuZWFyQm90dG9tPXRydWU7fQppZihNYXRoLmFicyhldmVudFtheGlzXS1jdXIpPGRpc3Qpe2Rpc3Q9TWF0aC5hYnMoZXZlbnRbYXhpc10tY3VyKTtpdGVtV2l0aExlYXN0RGlzdGFuY2U9dGhpcy5pdGVtc1tqXTt0aGlzLmRpcmVjdGlvbj1uZWFyQm90dG9tPyJ1cCI6ImRvd24iO319CmlmKCFpdGVtV2l0aExlYXN0RGlzdGFuY2UmJiF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpe3JldHVybjt9CmlmKHRoaXMuY3VycmVudENvbnRhaW5lcj09PXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0pe2lmKCF0aGlzLmN1cnJlbnRDb250YWluZXIuY29udGFpbmVyQ2FjaGUub3Zlcil7dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5fdHJpZ2dlcigib3ZlciIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO3RoaXMuY3VycmVudENvbnRhaW5lci5jb250YWluZXJDYWNoZS5vdmVyPTE7fQpyZXR1cm47fQppdGVtV2l0aExlYXN0RGlzdGFuY2U/dGhpcy5fcmVhcnJhbmdlKGV2ZW50LGl0ZW1XaXRoTGVhc3REaXN0YW5jZSxudWxsLHRydWUpOnRoaXMuX3JlYXJyYW5nZShldmVudCxudWxsLHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uZWxlbWVudCx0cnVlKTt0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKCJjaGFuZ2UiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jdXJyZW50Q29udGFpbmVyPXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF07dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsdGhpcy5wbGFjZWhvbGRlcik7dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5fdHJpZ2dlcigib3ZlciIsZXZlbnQsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmNvbnRhaW5lckNhY2hlLm92ZXI9MTt9fSxfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbz10aGlzLm9wdGlvbnMsaGVscGVyPSQuaXNGdW5jdGlvbihvLmhlbHBlcik/JChvLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW2V2ZW50LHRoaXMuY3VycmVudEl0ZW1dKSk6KG8uaGVscGVyPT09ImNsb25lIj90aGlzLmN1cnJlbnRJdGVtLmNsb25lKCk6dGhpcy5jdXJyZW50SXRlbSk7aWYoIWhlbHBlci5wYXJlbnRzKCJib2R5IikubGVuZ3RoKXskKG8uYXBwZW5kVG8hPT0icGFyZW50Ij9vLmFwcGVuZFRvOnRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSlbMF0uYXBwZW5kQ2hpbGQoaGVscGVyWzBdKTt9CmlmKGhlbHBlclswXT09PXRoaXMuY3VycmVudEl0ZW1bMF0pe3RoaXMuX3N0b3JlZENTUz17d2lkdGg6dGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS53aWR0aCxoZWlnaHQ6dGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS5oZWlnaHQscG9zaXRpb246dGhpcy5jdXJyZW50SXRlbS5jc3MoInBvc2l0aW9uIiksdG9wOnRoaXMuY3VycmVudEl0ZW0uY3NzKCJ0b3AiKSxsZWZ0OnRoaXMuY3VycmVudEl0ZW0uY3NzKCJsZWZ0Iil9O30KaWYoIWhlbHBlclswXS5zdHlsZS53aWR0aHx8by5mb3JjZUhlbHBlclNpemUpe2hlbHBlci53aWR0aCh0aGlzLmN1cnJlbnRJdGVtLndpZHRoKCkpO30KaWYoIWhlbHBlclswXS5zdHlsZS5oZWlnaHR8fG8uZm9yY2VIZWxwZXJTaXplKXtoZWxwZXIuaGVpZ2h0KHRoaXMuY3VycmVudEl0ZW0uaGVpZ2h0KCkpO30KcmV0dXJuIGhlbHBlcjt9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKG9iail7aWYodHlwZW9mIG9iaj09PSJzdHJpbmciKXtvYmo9b2JqLnNwbGl0KCIgIik7fQppZigkLmlzQXJyYXkob2JqKSl7b2JqPXtsZWZ0OitvYmpbMF0sdG9wOitvYmpbMV18fDB9O30KaWYoImxlZnQiaW4gb2JqKXt0aGlzLm9mZnNldC5jbGljay5sZWZ0PW9iai5sZWZ0K3RoaXMubWFyZ2lucy5sZWZ0O30KaWYoInJpZ2h0ImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2subGVmdD10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLW9iai5yaWdodCt0aGlzLm1hcmdpbnMubGVmdDt9CmlmKCJ0b3AiaW4gb2JqKXt0aGlzLm9mZnNldC5jbGljay50b3A9b2JqLnRvcCt0aGlzLm1hcmdpbnMudG9wO30KaWYoImJvdHRvbSJpbiBvYmope3RoaXMub2Zmc2V0LmNsaWNrLnRvcD10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC1vYmouYm90dG9tK3RoaXMubWFyZ2lucy50b3A7fX0sX2dldFBhcmVudE9mZnNldDpmdW5jdGlvbigpe3RoaXMub2Zmc2V0UGFyZW50PXRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpO3ZhciBwbz10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZih0aGlzLmNzc1Bvc2l0aW9uPT09ImFic29sdXRlIiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiYkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSl7cG8ubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpO3BvLnRvcCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk7fQppZih0aGlzLm9mZnNldFBhcmVudFswXT09PXRoaXMuZG9jdW1lbnRbMF0uYm9keXx8KHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUmJnRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PSJodG1sIiYmJC51aS5pZSkpe3BvPXt0b3A6MCxsZWZ0OjB9O30KcmV0dXJue3RvcDpwby50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLGxlZnQ6cG8ubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfTt9LF9nZXRSZWxhdGl2ZU9mZnNldDpmdW5jdGlvbigpe2lmKHRoaXMuY3NzUG9zaXRpb249PT0icmVsYXRpdmUiKXt2YXIgcD10aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7cmV0dXJue3RvcDpwLnRvcC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSwxMCl8fDApKwp0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OnAubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApfHwwKSsKdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpfTt9ZWxzZXtyZXR1cm57dG9wOjAsbGVmdDowfTt9fSxfY2FjaGVNYXJnaW5zOmZ1bmN0aW9uKCl7dGhpcy5tYXJnaW5zPXtsZWZ0OihwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCksdG9wOihwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luVG9wIiksMTApfHwwKX07fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX07fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgY2UsY28sb3ZlcixvPXRoaXMub3B0aW9ucztpZihvLmNvbnRhaW5tZW50PT09InBhcmVudCIpe28uY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZTt9CmlmKG8uY29udGFpbm1lbnQ9PT0iZG9jdW1lbnQifHxvLmNvbnRhaW5tZW50PT09IndpbmRvdyIpe3RoaXMuY29udGFpbm1lbnQ9WzAtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCwwLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLG8uY29udGFpbm1lbnQ9PT0iZG9jdW1lbnQiP3RoaXMuZG9jdW1lbnQud2lkdGgoKTp0aGlzLndpbmRvdy53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsKG8uY29udGFpbm1lbnQ9PT0iZG9jdW1lbnQiPyh0aGlzLmRvY3VtZW50LmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KTp0aGlzLndpbmRvdy5oZWlnaHQoKXx8dGhpcy5kb2N1bWVudFswXS5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXTt9CmlmKCEoL14oZG9jdW1lbnR8d2luZG93fHBhcmVudCkkLykudGVzdChvLmNvbnRhaW5tZW50KSl7Y2U9JChvLmNvbnRhaW5tZW50KVswXTtjbz0kKG8uY29udGFpbm1lbnQpLm9mZnNldCgpO292ZXI9KCQoY2UpLmNzcygib3ZlcmZsb3ciKSE9PSJoaWRkZW4iKTt0aGlzLmNvbnRhaW5tZW50PVtjby5sZWZ0KyhwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCkrCihwYXJzZUludCgkKGNlKS5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKS10aGlzLm1hcmdpbnMubGVmdCxjby50b3ArKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApKwoocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nVG9wIiksMTApfHwwKS10aGlzLm1hcmdpbnMudG9wLGNvLmxlZnQrKG92ZXI/TWF0aC5tYXgoY2Uuc2Nyb2xsV2lkdGgsY2Uub2Zmc2V0V2lkdGgpOmNlLm9mZnNldFdpZHRoKS0KKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKS0KKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApfHwwKS0KdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCxjby50b3ArKG92ZXI/TWF0aC5tYXgoY2Uuc2Nyb2xsSGVpZ2h0LGNlLm9mZnNldEhlaWdodCk6Y2Uub2Zmc2V0SGVpZ2h0KS0KKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLQoocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApfHwwKS0KdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF07fX0sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKGQscG9zKXtpZighcG9zKXtwb3M9dGhpcy5wb3NpdGlvbjt9CnZhciBtb2Q9ZD09PSJhYnNvbHV0ZSI/MTotMSxzY3JvbGw9dGhpcy5jc3NQb3NpdGlvbj09PSJhYnNvbHV0ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiYkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSk/dGhpcy5vZmZzZXRQYXJlbnQ6dGhpcy5zY3JvbGxQYXJlbnQsc2Nyb2xsSXNSb290Tm9kZT0oLyhodG1sfGJvZHkpL2kpLnRlc3Qoc2Nyb2xsWzBdLnRhZ05hbWUpO3JldHVybnt0b3A6KHBvcy50b3ArCnRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCptb2QrCnRoaXMub2Zmc2V0LnBhcmVudC50b3AqbW9kLQooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTooc2Nyb2xsSXNSb290Tm9kZT8wOnNjcm9sbC5zY3JvbGxUb3AoKSkpKm1vZCkpLGxlZnQ6KHBvcy5sZWZ0Kwp0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0Km1vZCsKdGhpcy5vZmZzZXQucGFyZW50LmxlZnQqbW9kLQooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6c2Nyb2xsSXNSb290Tm9kZT8wOnNjcm9sbC5zY3JvbGxMZWZ0KCkpKm1vZCkpfTt9LF9nZW5lcmF0ZVBvc2l0aW9uOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdG9wLGxlZnQsbz10aGlzLm9wdGlvbnMscGFnZVg9ZXZlbnQucGFnZVgscGFnZVk9ZXZlbnQucGFnZVksc2Nyb2xsPXRoaXMuY3NzUG9zaXRpb249PT0iYWJzb2x1dGUiJiYhKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpP3RoaXMub2Zmc2V0UGFyZW50OnRoaXMuc2Nyb2xsUGFyZW50LHNjcm9sbElzUm9vdE5vZGU9KC8oaHRtbHxib2R5KS9pKS50ZXN0KHNjcm9sbFswXS50YWdOYW1lKTtpZih0aGlzLmNzc1Bvc2l0aW9uPT09InJlbGF0aXZlIiYmISh0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5vZmZzZXRQYXJlbnRbMF0pKXt0aGlzLm9mZnNldC5yZWxhdGl2ZT10aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpO30KaWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKXtpZih0aGlzLmNvbnRhaW5tZW50KXtpZihldmVudC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF0pe3BhZ2VYPXRoaXMuY29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDt9CmlmKGV2ZW50LnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdKXtwYWdlWT10aGlzLmNvbnRhaW5tZW50WzFdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcDt9CmlmKGV2ZW50LnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+dGhpcy5jb250YWlubWVudFsyXSl7cGFnZVg9dGhpcy5jb250YWlubWVudFsyXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0O30KaWYoZXZlbnQucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPnRoaXMuY29udGFpbm1lbnRbM10pe3BhZ2VZPXRoaXMuY29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wO319CmlmKG8uZ3JpZCl7dG9wPXRoaXMub3JpZ2luYWxQYWdlWStNYXRoLnJvdW5kKChwYWdlWS10aGlzLm9yaWdpbmFsUGFnZVkpL28uZ3JpZFsxXSkqby5ncmlkWzFdO3BhZ2VZPXRoaXMuY29udGFpbm1lbnQ/KCh0b3AtdGhpcy5vZmZzZXQuY2xpY2sudG9wPj10aGlzLmNvbnRhaW5tZW50WzFdJiZ0b3AtdGhpcy5vZmZzZXQuY2xpY2sudG9wPD10aGlzLmNvbnRhaW5tZW50WzNdKT90b3A6KCh0b3AtdGhpcy5vZmZzZXQuY2xpY2sudG9wPj10aGlzLmNvbnRhaW5tZW50WzFdKT90b3Atby5ncmlkWzFdOnRvcCtvLmdyaWRbMV0pKTp0b3A7bGVmdD10aGlzLm9yaWdpbmFsUGFnZVgrTWF0aC5yb3VuZCgocGFnZVgtdGhpcy5vcmlnaW5hbFBhZ2VYKS9vLmdyaWRbMF0pKm8uZ3JpZFswXTtwYWdlWD10aGlzLmNvbnRhaW5tZW50PygobGVmdC10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj10aGlzLmNvbnRhaW5tZW50WzBdJiZsZWZ0LXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8PXRoaXMuY29udGFpbm1lbnRbMl0pP2xlZnQ6KChsZWZ0LXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PXRoaXMuY29udGFpbm1lbnRbMF0pP2xlZnQtby5ncmlkWzBdOmxlZnQrby5ncmlkWzBdKSk6bGVmdDt9fQpyZXR1cm57dG9wOihwYWdlWS0KdGhpcy5vZmZzZXQuY2xpY2sudG9wLQp0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtCnRoaXMub2Zmc2V0LnBhcmVudC50b3ArCigodGhpcy5jc3NQb3NpdGlvbj09PSJmaXhlZCI/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOihzY3JvbGxJc1Jvb3ROb2RlPzA6c2Nyb2xsLnNjcm9sbFRvcCgpKSkpKSxsZWZ0OihwYWdlWC0KdGhpcy5vZmZzZXQuY2xpY2subGVmdC0KdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC0KdGhpcy5vZmZzZXQucGFyZW50LmxlZnQrCigodGhpcy5jc3NQb3NpdGlvbj09PSJmaXhlZCI/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTpzY3JvbGxJc1Jvb3ROb2RlPzA6c2Nyb2xsLnNjcm9sbExlZnQoKSkpKX07fSxfcmVhcnJhbmdlOmZ1bmN0aW9uKGV2ZW50LGksYSxoYXJkUmVmcmVzaCl7YT9hWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOmkuaXRlbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyWzBdLCh0aGlzLmRpcmVjdGlvbj09PSJkb3duIj9pLml0ZW1bMF06aS5pdGVtWzBdLm5leHRTaWJsaW5nKSk7dGhpcy5jb3VudGVyPXRoaXMuY291bnRlcj8rK3RoaXMuY291bnRlcjoxO3ZhciBjb3VudGVyPXRoaXMuY291bnRlcjt0aGlzLl9kZWxheShmdW5jdGlvbigpe2lmKGNvdW50ZXI9PT10aGlzLmNvdW50ZXIpe3RoaXMucmVmcmVzaFBvc2l0aW9ucyghaGFyZFJlZnJlc2gpO319KTt9LF9jbGVhcjpmdW5jdGlvbihldmVudCxub1Byb3BhZ2F0aW9uKXt0aGlzLnJldmVydGluZz1mYWxzZTt2YXIgaSxkZWxheWVkVHJpZ2dlcnM9W107aWYoIXRoaXMuX25vRmluYWxTb3J0JiZ0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLmxlbmd0aCl7dGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5jdXJyZW50SXRlbSk7fQp0aGlzLl9ub0ZpbmFsU29ydD1udWxsO2lmKHRoaXMuaGVscGVyWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXSl7Zm9yKGkgaW4gdGhpcy5fc3RvcmVkQ1NTKXtpZih0aGlzLl9zdG9yZWRDU1NbaV09PT0iYXV0byJ8fHRoaXMuX3N0b3JlZENTU1tpXT09PSJzdGF0aWMiKXt0aGlzLl9zdG9yZWRDU1NbaV09IiI7fX0KdGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKTt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRJdGVtLCJ1aS1zb3J0YWJsZS1oZWxwZXIiKTt9ZWxzZXt0aGlzLmN1cnJlbnRJdGVtLnNob3coKTt9CmlmKHRoaXMuZnJvbU91dHNpZGUmJiFub1Byb3BhZ2F0aW9uKXtkZWxheWVkVHJpZ2dlcnMucHVzaChmdW5jdGlvbihldmVudCl7dGhpcy5fdHJpZ2dlcigicmVjZWl2ZSIsZXZlbnQsdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKTt9KTt9CmlmKCh0aGlzLmZyb21PdXRzaWRlfHx0aGlzLmRvbVBvc2l0aW9uLnByZXYhPT10aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKVswXXx8dGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQhPT10aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdKSYmIW5vUHJvcGFnYXRpb24pe2RlbGF5ZWRUcmlnZ2Vycy5wdXNoKGZ1bmN0aW9uKGV2ZW50KXt0aGlzLl90cmlnZ2VyKCJ1cGRhdGUiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt9KTt9CmlmKHRoaXMhPT10aGlzLmN1cnJlbnRDb250YWluZXIpe2lmKCFub1Byb3BhZ2F0aW9uKXtkZWxheWVkVHJpZ2dlcnMucHVzaChmdW5jdGlvbihldmVudCl7dGhpcy5fdHJpZ2dlcigicmVtb3ZlIixldmVudCx0aGlzLl91aUhhc2goKSk7fSk7ZGVsYXllZFRyaWdnZXJzLnB1c2goKGZ1bmN0aW9uKGMpe3JldHVybiBmdW5jdGlvbihldmVudCl7Yy5fdHJpZ2dlcigicmVjZWl2ZSIsZXZlbnQsdGhpcy5fdWlIYXNoKHRoaXMpKTt9O30pLmNhbGwodGhpcyx0aGlzLmN1cnJlbnRDb250YWluZXIpKTtkZWxheWVkVHJpZ2dlcnMucHVzaCgoZnVuY3Rpb24oYyl7cmV0dXJuIGZ1bmN0aW9uKGV2ZW50KXtjLl90cmlnZ2VyKCJ1cGRhdGUiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7fTt9KS5jYWxsKHRoaXMsdGhpcy5jdXJyZW50Q29udGFpbmVyKSk7fX0KZnVuY3Rpb24gZGVsYXlFdmVudCh0eXBlLGluc3RhbmNlLGNvbnRhaW5lcil7cmV0dXJuIGZ1bmN0aW9uKGV2ZW50KXtjb250YWluZXIuX3RyaWdnZXIodHlwZSxldmVudCxpbnN0YW5jZS5fdWlIYXNoKGluc3RhbmNlKSk7fTt9CmZvcihpPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYoIW5vUHJvcGFnYXRpb24pe2RlbGF5ZWRUcmlnZ2Vycy5wdXNoKGRlbGF5RXZlbnQoImRlYWN0aXZhdGUiLHRoaXMsdGhpcy5jb250YWluZXJzW2ldKSk7fQppZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcil7ZGVsYXllZFRyaWdnZXJzLnB1c2goZGVsYXlFdmVudCgib3V0Iix0aGlzLHRoaXMuY29udGFpbmVyc1tpXSkpO3RoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyPTA7fX0KaWYodGhpcy5zdG9yZWRDdXJzb3Ipe3RoaXMuZG9jdW1lbnQuZmluZCgiYm9keSIpLmNzcygiY3Vyc29yIix0aGlzLnN0b3JlZEN1cnNvcik7dGhpcy5zdG9yZWRTdHlsZXNoZWV0LnJlbW92ZSgpO30KaWYodGhpcy5fc3RvcmVkT3BhY2l0eSl7dGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iix0aGlzLl9zdG9yZWRPcGFjaXR5KTt9CmlmKHRoaXMuX3N0b3JlZFpJbmRleCl7dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLHRoaXMuX3N0b3JlZFpJbmRleD09PSJhdXRvIj8iIjp0aGlzLl9zdG9yZWRaSW5kZXgpO30KdGhpcy5kcmFnZ2luZz1mYWxzZTtpZighbm9Qcm9wYWdhdGlvbil7dGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO30KdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO2lmKCF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwpe2lmKHRoaXMuaGVscGVyWzBdIT09dGhpcy5jdXJyZW50SXRlbVswXSl7dGhpcy5oZWxwZXIucmVtb3ZlKCk7fQp0aGlzLmhlbHBlcj1udWxsO30KaWYoIW5vUHJvcGFnYXRpb24pe2ZvcihpPTA7aTxkZWxheWVkVHJpZ2dlcnMubGVuZ3RoO2krKyl7ZGVsYXllZFRyaWdnZXJzW2ldLmNhbGwodGhpcyxldmVudCk7fQp0aGlzLl90cmlnZ2VyKCJzdG9wIixldmVudCx0aGlzLl91aUhhc2goKSk7fQp0aGlzLmZyb21PdXRzaWRlPWZhbHNlO3JldHVybiF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWw7fSxfdHJpZ2dlcjpmdW5jdGlvbigpe2lmKCQuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk9PT1mYWxzZSl7dGhpcy5jYW5jZWwoKTt9fSxfdWlIYXNoOmZ1bmN0aW9uKF9pbnN0KXt2YXIgaW5zdD1faW5zdHx8dGhpcztyZXR1cm57aGVscGVyOmluc3QuaGVscGVyLHBsYWNlaG9sZGVyOmluc3QucGxhY2Vob2xkZXJ8fCQoW10pLHBvc2l0aW9uOmluc3QucG9zaXRpb24sb3JpZ2luYWxQb3NpdGlvbjppbnN0Lm9yaWdpbmFsUG9zaXRpb24sb2Zmc2V0Omluc3QucG9zaXRpb25BYnMsaXRlbTppbnN0LmN1cnJlbnRJdGVtLHNlbmRlcjpfaW5zdD9faW5zdC5lbGVtZW50Om51bGx9O319KTt2YXIgd2lkZ2V0c01lbnU9JC53aWRnZXQoInVpLm1lbnUiLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8dWw+IixkZWxheTozMDAsb3B0aW9uczp7aWNvbnM6e3N1Ym1lbnU6InVpLWljb24tY2FyZXQtMS1lIn0saXRlbXM6Ij4gKiIsbWVudXM6InVsIixwb3NpdGlvbjp7bXk6ImxlZnQgdG9wIixhdDoicmlnaHQgdG9wIn0scm9sZToibWVudSIsYmx1cjpudWxsLGZvY3VzOm51bGwsc2VsZWN0Om51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZU1lbnU9dGhpcy5lbGVtZW50O3RoaXMubW91c2VIYW5kbGVkPWZhbHNlO3RoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoe3JvbGU6dGhpcy5vcHRpb25zLnJvbGUsdGFiSW5kZXg6MH0pO3RoaXMuX2FkZENsYXNzKCJ1aS1tZW51IiwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50Iik7dGhpcy5fb24oeyJtb3VzZWRvd24gLnVpLW1lbnUtaXRlbSI6ZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fSwiY2xpY2sgLnVpLW1lbnUtaXRlbSI6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0YXJnZXQ9JChldmVudC50YXJnZXQpO3ZhciBhY3RpdmU9JCgkLnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pKTtpZighdGhpcy5tb3VzZUhhbmRsZWQmJnRhcmdldC5ub3QoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLmxlbmd0aCl7dGhpcy5zZWxlY3QoZXZlbnQpO2lmKCFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXt0aGlzLm1vdXNlSGFuZGxlZD10cnVlO30KaWYodGFyZ2V0LmhhcygiLnVpLW1lbnUiKS5sZW5ndGgpe3RoaXMuZXhwYW5kKGV2ZW50KTt9ZWxzZSBpZighdGhpcy5lbGVtZW50LmlzKCI6Zm9jdXMiKSYmYWN0aXZlLmNsb3Nlc3QoIi51aS1tZW51IikubGVuZ3RoKXt0aGlzLmVsZW1lbnQudHJpZ2dlcigiZm9jdXMiLFt0cnVlXSk7aWYodGhpcy5hY3RpdmUmJnRoaXMuYWN0aXZlLnBhcmVudHMoIi51aS1tZW51IikubGVuZ3RoPT09MSl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO319fX0sIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbSI6ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMucHJldmlvdXNGaWx0ZXIpe3JldHVybjt9CnZhciBhY3R1YWxUYXJnZXQ9JChldmVudC50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKSx0YXJnZXQ9JChldmVudC5jdXJyZW50VGFyZ2V0KTtpZihhY3R1YWxUYXJnZXRbMF0hPT10YXJnZXRbMF0pe3JldHVybjt9CnRoaXMuX3JlbW92ZUNsYXNzKHRhcmdldC5zaWJsaW5ncygpLmNoaWxkcmVuKCIudWktc3RhdGUtYWN0aXZlIiksbnVsbCwidWktc3RhdGUtYWN0aXZlIik7dGhpcy5mb2N1cyhldmVudCx0YXJnZXQpO30sbW91c2VsZWF2ZToiY29sbGFwc2VBbGwiLCJtb3VzZWxlYXZlIC51aS1tZW51IjoiY29sbGFwc2VBbGwiLGZvY3VzOmZ1bmN0aW9uKGV2ZW50LGtlZXBBY3RpdmVJdGVtKXt2YXIgaXRlbT10aGlzLmFjdGl2ZXx8dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5lcSgwKTtpZigha2VlcEFjdGl2ZUl0ZW0pe3RoaXMuZm9jdXMoZXZlbnQsaXRlbSk7fX0sYmx1cjpmdW5jdGlvbihldmVudCl7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt2YXIgbm90Q29udGFpbmVkPSEkLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSwkLnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pKTtpZihub3RDb250YWluZWQpe3RoaXMuY29sbGFwc2VBbGwoZXZlbnQpO319KTt9LGtleWRvd246Il9rZXlkb3duIn0pO3RoaXMucmVmcmVzaCgpO3RoaXMuX29uKHRoaXMuZG9jdW1lbnQse2NsaWNrOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLl9jbG9zZU9uRG9jdW1lbnRDbGljayhldmVudCkpe3RoaXMuY29sbGFwc2VBbGwoZXZlbnQpO30KdGhpcy5tb3VzZUhhbmRsZWQ9ZmFsc2U7fX0pO30sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgaXRlbXM9dGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51LWl0ZW0iKS5yZW1vdmVBdHRyKCJyb2xlIGFyaWEtZGlzYWJsZWQiKSxzdWJtZW51cz1pdGVtcy5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbS13cmFwcGVyIikucmVtb3ZlVW5pcXVlSWQoKS5yZW1vdmVBdHRyKCJ0YWJJbmRleCByb2xlIGFyaWEtaGFzcG9wdXAiKTt0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IikuZmluZCgiLnVpLW1lbnUiKS5hZGRCYWNrKCkucmVtb3ZlQXR0cigicm9sZSBhcmlhLWxhYmVsbGVkYnkgYXJpYS1leHBhbmRlZCBhcmlhLWhpZGRlbiBhcmlhLWRpc2FibGVkICIrInRhYkluZGV4IikucmVtb3ZlVW5pcXVlSWQoKS5zaG93KCk7c3VibWVudXMuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGVsZW09JCh0aGlzKTtpZihlbGVtLmRhdGEoInVpLW1lbnUtc3VibWVudS1jYXJldCIpKXtlbGVtLnJlbW92ZSgpO319KTt9LF9rZXlkb3duOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbWF0Y2gscHJldixjaGFyYWN0ZXIsc2tpcCxwcmV2ZW50RGVmYXVsdD10cnVlO3N3aXRjaChldmVudC5rZXlDb2RlKXtjYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOnRoaXMucHJldmlvdXNQYWdlKGV2ZW50KTticmVhaztjYXNlICQudWkua2V5Q29kZS5QQUdFX0RPV046dGhpcy5uZXh0UGFnZShldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTp0aGlzLl9tb3ZlKCJmaXJzdCIsImZpcnN0IixldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuRU5EOnRoaXMuX21vdmUoImxhc3QiLCJsYXN0IixldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuVVA6dGhpcy5wcmV2aW91cyhldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuRE9XTjp0aGlzLm5leHQoZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLkxFRlQ6dGhpcy5jb2xsYXBzZShldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6aWYodGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5pcygiLnVpLXN0YXRlLWRpc2FibGVkIikpe3RoaXMuZXhwYW5kKGV2ZW50KTt9CmJyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLkVOVEVSOmNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOnRoaXMuX2FjdGl2YXRlKGV2ZW50KTticmVhaztjYXNlICQudWkua2V5Q29kZS5FU0NBUEU6dGhpcy5jb2xsYXBzZShldmVudCk7YnJlYWs7ZGVmYXVsdDpwcmV2ZW50RGVmYXVsdD1mYWxzZTtwcmV2PXRoaXMucHJldmlvdXNGaWx0ZXJ8fCIiO3NraXA9ZmFsc2U7Y2hhcmFjdGVyPWV2ZW50LmtleUNvZGU+PTk2JiZldmVudC5rZXlDb2RlPD0xMDU/KGV2ZW50LmtleUNvZGUtOTYpLnRvU3RyaW5nKCk6U3RyaW5nLmZyb21DaGFyQ29kZShldmVudC5rZXlDb2RlKTtjbGVhclRpbWVvdXQodGhpcy5maWx0ZXJUaW1lcik7aWYoY2hhcmFjdGVyPT09cHJldil7c2tpcD10cnVlO31lbHNle2NoYXJhY3Rlcj1wcmV2K2NoYXJhY3Rlcjt9Cm1hdGNoPXRoaXMuX2ZpbHRlck1lbnVJdGVtcyhjaGFyYWN0ZXIpO21hdGNoPXNraXAmJm1hdGNoLmluZGV4KHRoaXMuYWN0aXZlLm5leHQoKSkhPT0tMT90aGlzLmFjdGl2ZS5uZXh0QWxsKCIudWktbWVudS1pdGVtIik6bWF0Y2g7aWYoIW1hdGNoLmxlbmd0aCl7Y2hhcmFjdGVyPVN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQua2V5Q29kZSk7bWF0Y2g9dGhpcy5fZmlsdGVyTWVudUl0ZW1zKGNoYXJhY3Rlcik7fQppZihtYXRjaC5sZW5ndGgpe3RoaXMuZm9jdXMoZXZlbnQsbWF0Y2gpO3RoaXMucHJldmlvdXNGaWx0ZXI9Y2hhcmFjdGVyO3RoaXMuZmlsdGVyVGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcjt9LDEwMDApO31lbHNle2RlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyO319CmlmKHByZXZlbnREZWZhdWx0KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO319LF9hY3RpdmF0ZTpmdW5jdGlvbihldmVudCl7aWYodGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5pcygiLnVpLXN0YXRlLWRpc2FibGVkIikpe2lmKHRoaXMuYWN0aXZlLmNoaWxkcmVuKCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddIikubGVuZ3RoKXt0aGlzLmV4cGFuZChldmVudCk7fWVsc2V7dGhpcy5zZWxlY3QoZXZlbnQpO319fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIG1lbnVzLGl0ZW1zLG5ld1N1Ym1lbnVzLG5ld0l0ZW1zLG5ld1dyYXBwZXJzLHRoYXQ9dGhpcyxpY29uPXRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51LHN1Ym1lbnVzPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5tZW51cyk7dGhpcy5fdG9nZ2xlQ2xhc3MoInVpLW1lbnUtaWNvbnMiLG51bGwsISF0aGlzLmVsZW1lbnQuZmluZCgiLnVpLWljb24iKS5sZW5ndGgpO25ld1N1Ym1lbnVzPXN1Ym1lbnVzLmZpbHRlcigiOm5vdCgudWktbWVudSkiKS5oaWRlKCkuYXR0cih7cm9sZTp0aGlzLm9wdGlvbnMucm9sZSwiYXJpYS1oaWRkZW4iOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6ImZhbHNlIn0pLmVhY2goZnVuY3Rpb24oKXt2YXIgbWVudT0kKHRoaXMpLGl0ZW09bWVudS5wcmV2KCksc3VibWVudUNhcmV0PSQoIjxzcGFuPiIpLmRhdGEoInVpLW1lbnUtc3VibWVudS1jYXJldCIsdHJ1ZSk7dGhhdC5fYWRkQ2xhc3Moc3VibWVudUNhcmV0LCJ1aS1tZW51LWljb24iLCJ1aS1pY29uICIraWNvbik7aXRlbS5hdHRyKCJhcmlhLWhhc3BvcHVwIiwidHJ1ZSIpLnByZXBlbmQoc3VibWVudUNhcmV0KTttZW51LmF0dHIoImFyaWEtbGFiZWxsZWRieSIsaXRlbS5hdHRyKCJpZCIpKTt9KTt0aGlzLl9hZGRDbGFzcyhuZXdTdWJtZW51cywidWktbWVudSIsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1mcm9udCIpO21lbnVzPXN1Ym1lbnVzLmFkZCh0aGlzLmVsZW1lbnQpO2l0ZW1zPW1lbnVzLmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKTtpdGVtcy5ub3QoIi51aS1tZW51LWl0ZW0iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGl0ZW09JCh0aGlzKTtpZih0aGF0Ll9pc0RpdmlkZXIoaXRlbSkpe3RoYXQuX2FkZENsYXNzKGl0ZW0sInVpLW1lbnUtZGl2aWRlciIsInVpLXdpZGdldC1jb250ZW50Iik7fX0pO25ld0l0ZW1zPWl0ZW1zLm5vdCgiLnVpLW1lbnUtaXRlbSwgLnVpLW1lbnUtZGl2aWRlciIpO25ld1dyYXBwZXJzPW5ld0l0ZW1zLmNoaWxkcmVuKCkubm90KCIudWktbWVudSIpLnVuaXF1ZUlkKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZTp0aGlzLl9pdGVtUm9sZSgpfSk7dGhpcy5fYWRkQ2xhc3MobmV3SXRlbXMsInVpLW1lbnUtaXRlbSIpLl9hZGRDbGFzcyhuZXdXcmFwcGVycywidWktbWVudS1pdGVtLXdyYXBwZXIiKTtpdGVtcy5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLmF0dHIoImFyaWEtZGlzYWJsZWQiLCJ0cnVlIik7aWYodGhpcy5hY3RpdmUmJiEkLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmFjdGl2ZVswXSkpe3RoaXMuYmx1cigpO319LF9pdGVtUm9sZTpmdW5jdGlvbigpe3JldHVybnttZW51OiJtZW51aXRlbSIsbGlzdGJveDoib3B0aW9uIn1bdGhpcy5vcHRpb25zLnJvbGVdO30sX3NldE9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe2lmKGtleT09PSJpY29ucyIpe3ZhciBpY29ucz10aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUtaWNvbiIpO3RoaXMuX3JlbW92ZUNsYXNzKGljb25zLG51bGwsdGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUpLl9hZGRDbGFzcyhpY29ucyxudWxsLHZhbHVlLnN1Ym1lbnUpO30KdGhpcy5fc3VwZXIoa2V5LHZhbHVlKTt9LF9zZXRPcHRpb25EaXNhYmxlZDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5fc3VwZXIodmFsdWUpO3RoaXMuZWxlbWVudC5hdHRyKCJhcmlhLWRpc2FibGVkIixTdHJpbmcodmFsdWUpKTt0aGlzLl90b2dnbGVDbGFzcyhudWxsLCJ1aS1zdGF0ZS1kaXNhYmxlZCIsISF2YWx1ZSk7fSxmb2N1czpmdW5jdGlvbihldmVudCxpdGVtKXt2YXIgbmVzdGVkLGZvY3VzZWQsYWN0aXZlUGFyZW50O3RoaXMuYmx1cihldmVudCxldmVudCYmZXZlbnQudHlwZT09PSJmb2N1cyIpO3RoaXMuX3Njcm9sbEludG9WaWV3KGl0ZW0pO3RoaXMuYWN0aXZlPWl0ZW0uZmlyc3QoKTtmb2N1c2VkPXRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKTt0aGlzLl9hZGRDbGFzcyhmb2N1c2VkLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpO2lmKHRoaXMub3B0aW9ucy5yb2xlKXt0aGlzLmVsZW1lbnQuYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50Iixmb2N1c2VkLmF0dHIoImlkIikpO30KYWN0aXZlUGFyZW50PXRoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbS13cmFwcGVyIik7dGhpcy5fYWRkQ2xhc3MoYWN0aXZlUGFyZW50LG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpO2lmKGV2ZW50JiZldmVudC50eXBlPT09ImtleWRvd24iKXt0aGlzLl9jbG9zZSgpO31lbHNle3RoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpO30sdGhpcy5kZWxheSk7fQpuZXN0ZWQ9aXRlbS5jaGlsZHJlbigiLnVpLW1lbnUiKTtpZihuZXN0ZWQubGVuZ3RoJiZldmVudCYmKC9ebW91c2UvLnRlc3QoZXZlbnQudHlwZSkpKXt0aGlzLl9zdGFydE9wZW5pbmcobmVzdGVkKTt9CnRoaXMuYWN0aXZlTWVudT1pdGVtLnBhcmVudCgpO3RoaXMuX3RyaWdnZXIoImZvY3VzIixldmVudCx7aXRlbTppdGVtfSk7fSxfc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oaXRlbSl7dmFyIGJvcmRlclRvcCxwYWRkaW5nVG9wLG9mZnNldCxzY3JvbGwsZWxlbWVudEhlaWdodCxpdGVtSGVpZ2h0O2lmKHRoaXMuX2hhc1Njcm9sbCgpKXtib3JkZXJUb3A9cGFyc2VGbG9hdCgkLmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sImJvcmRlclRvcFdpZHRoIikpfHwwO3BhZGRpbmdUb3A9cGFyc2VGbG9hdCgkLmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sInBhZGRpbmdUb3AiKSl8fDA7b2Zmc2V0PWl0ZW0ub2Zmc2V0KCkudG9wLXRoaXMuYWN0aXZlTWVudS5vZmZzZXQoKS50b3AtYm9yZGVyVG9wLXBhZGRpbmdUb3A7c2Nyb2xsPXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoKTtlbGVtZW50SGVpZ2h0PXRoaXMuYWN0aXZlTWVudS5oZWlnaHQoKTtpdGVtSGVpZ2h0PWl0ZW0ub3V0ZXJIZWlnaHQoKTtpZihvZmZzZXQ8MCl7dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChzY3JvbGwrb2Zmc2V0KTt9ZWxzZSBpZihvZmZzZXQraXRlbUhlaWdodD5lbGVtZW50SGVpZ2h0KXt0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKHNjcm9sbCtvZmZzZXQtZWxlbWVudEhlaWdodCtpdGVtSGVpZ2h0KTt9fX0sYmx1cjpmdW5jdGlvbihldmVudCxmcm9tRm9jdXMpe2lmKCFmcm9tRm9jdXMpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt9CmlmKCF0aGlzLmFjdGl2ZSl7cmV0dXJuO30KdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5hY3RpdmUuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0td3JhcHBlciIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpO3RoaXMuX3RyaWdnZXIoImJsdXIiLGV2ZW50LHtpdGVtOnRoaXMuYWN0aXZlfSk7dGhpcy5hY3RpdmU9bnVsbDt9LF9zdGFydE9wZW5pbmc6ZnVuY3Rpb24oc3VibWVudSl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2lmKHN1Ym1lbnUuYXR0cigiYXJpYS1oaWRkZW4iKSE9PSJ0cnVlIil7cmV0dXJuO30KdGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuX2Nsb3NlKCk7dGhpcy5fb3BlbihzdWJtZW51KTt9LHRoaXMuZGVsYXkpO30sX29wZW46ZnVuY3Rpb24oc3VibWVudSl7dmFyIHBvc2l0aW9uPSQuZXh0ZW5kKHtvZjp0aGlzLmFjdGl2ZX0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKTtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51Iikubm90KHN1Ym1lbnUucGFyZW50cygiLnVpLW1lbnUiKSkuaGlkZSgpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpO3N1Ym1lbnUuc2hvdygpLnJlbW92ZUF0dHIoImFyaWEtaGlkZGVuIikuYXR0cigiYXJpYS1leHBhbmRlZCIsInRydWUiKS5wb3NpdGlvbihwb3NpdGlvbik7fSxjb2xsYXBzZUFsbDpmdW5jdGlvbihldmVudCxhbGwpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIGN1cnJlbnRNZW51PWFsbD90aGlzLmVsZW1lbnQ6JChldmVudCYmZXZlbnQudGFyZ2V0KS5jbG9zZXN0KHRoaXMuZWxlbWVudC5maW5kKCIudWktbWVudSIpKTtpZighY3VycmVudE1lbnUubGVuZ3RoKXtjdXJyZW50TWVudT10aGlzLmVsZW1lbnQ7fQp0aGlzLl9jbG9zZShjdXJyZW50TWVudSk7dGhpcy5ibHVyKGV2ZW50KTt0aGlzLl9yZW1vdmVDbGFzcyhjdXJyZW50TWVudS5maW5kKCIudWktc3RhdGUtYWN0aXZlIiksbnVsbCwidWktc3RhdGUtYWN0aXZlIik7dGhpcy5hY3RpdmVNZW51PWN1cnJlbnRNZW51O30sdGhpcy5kZWxheSk7fSxfY2xvc2U6ZnVuY3Rpb24oc3RhcnRNZW51KXtpZighc3RhcnRNZW51KXtzdGFydE1lbnU9dGhpcy5hY3RpdmU/dGhpcy5hY3RpdmUucGFyZW50KCk6dGhpcy5lbGVtZW50O30Kc3RhcnRNZW51LmZpbmQoIi51aS1tZW51IikuaGlkZSgpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCJmYWxzZSIpO30sX2Nsb3NlT25Eb2N1bWVudENsaWNrOmZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4hJChldmVudC50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51IikubGVuZ3RoO30sX2lzRGl2aWRlcjpmdW5jdGlvbihpdGVtKXtyZXR1cm4hL1teXC1cdTIwMTRcdTIwMTNcc10vLnRlc3QoaXRlbS50ZXh0KCkpO30sY29sbGFwc2U6ZnVuY3Rpb24oZXZlbnQpe3ZhciBuZXdJdGVtPXRoaXMuYWN0aXZlJiZ0aGlzLmFjdGl2ZS5wYXJlbnQoKS5jbG9zZXN0KCIudWktbWVudS1pdGVtIix0aGlzLmVsZW1lbnQpO2lmKG5ld0l0ZW0mJm5ld0l0ZW0ubGVuZ3RoKXt0aGlzLl9jbG9zZSgpO3RoaXMuZm9jdXMoZXZlbnQsbmV3SXRlbSk7fX0sZXhwYW5kOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbmV3SXRlbT10aGlzLmFjdGl2ZSYmdGhpcy5hY3RpdmUuY2hpbGRyZW4oIi51aS1tZW51ICIpLmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5maXJzdCgpO2lmKG5ld0l0ZW0mJm5ld0l0ZW0ubGVuZ3RoKXt0aGlzLl9vcGVuKG5ld0l0ZW0ucGFyZW50KCkpO3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5mb2N1cyhldmVudCxuZXdJdGVtKTt9KTt9fSxuZXh0OmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9tb3ZlKCJuZXh0IiwiZmlyc3QiLGV2ZW50KTt9LHByZXZpb3VzOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9tb3ZlKCJwcmV2IiwibGFzdCIsZXZlbnQpO30saXNGaXJzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5wcmV2QWxsKCIudWktbWVudS1pdGVtIikubGVuZ3RoO30saXNMYXN0SXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZSYmIXRoaXMuYWN0aXZlLm5leHRBbGwoIi51aS1tZW51LWl0ZW0iKS5sZW5ndGg7fSxfbW92ZTpmdW5jdGlvbihkaXJlY3Rpb24sZmlsdGVyLGV2ZW50KXt2YXIgbmV4dDtpZih0aGlzLmFjdGl2ZSl7aWYoZGlyZWN0aW9uPT09ImZpcnN0Inx8ZGlyZWN0aW9uPT09Imxhc3QiKXtuZXh0PXRoaXMuYWN0aXZlCltkaXJlY3Rpb249PT0iZmlyc3QiPyJwcmV2QWxsIjoibmV4dEFsbCJdKCIudWktbWVudS1pdGVtIikuZXEoLTEpO31lbHNle25leHQ9dGhpcy5hY3RpdmUKW2RpcmVjdGlvbisiQWxsIl0oIi51aS1tZW51LWl0ZW0iKS5lcSgwKTt9fQppZighbmV4dHx8IW5leHQubGVuZ3RofHwhdGhpcy5hY3RpdmUpe25leHQ9dGhpcy5hY3RpdmVNZW51LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKVtmaWx0ZXJdKCk7fQp0aGlzLmZvY3VzKGV2ZW50LG5leHQpO30sbmV4dFBhZ2U6ZnVuY3Rpb24oZXZlbnQpe3ZhciBpdGVtLGJhc2UsaGVpZ2h0O2lmKCF0aGlzLmFjdGl2ZSl7dGhpcy5uZXh0KGV2ZW50KTtyZXR1cm47fQppZih0aGlzLmlzTGFzdEl0ZW0oKSl7cmV0dXJuO30KaWYodGhpcy5faGFzU2Nyb2xsKCkpe2Jhc2U9dGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wO2hlaWdodD10aGlzLmVsZW1lbnQuaGVpZ2h0KCk7dGhpcy5hY3RpdmUubmV4dEFsbCgiLnVpLW1lbnUtaXRlbSIpLmVhY2goZnVuY3Rpb24oKXtpdGVtPSQodGhpcyk7cmV0dXJuIGl0ZW0ub2Zmc2V0KCkudG9wLWJhc2UtaGVpZ2h0PDA7fSk7dGhpcy5mb2N1cyhldmVudCxpdGVtKTt9ZWxzZXt0aGlzLmZvY3VzKGV2ZW50LHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykKWyF0aGlzLmFjdGl2ZT8iZmlyc3QiOiJsYXN0Il0oKSk7fX0scHJldmlvdXNQYWdlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgaXRlbSxiYXNlLGhlaWdodDtpZighdGhpcy5hY3RpdmUpe3RoaXMubmV4dChldmVudCk7cmV0dXJuO30KaWYodGhpcy5pc0ZpcnN0SXRlbSgpKXtyZXR1cm47fQppZih0aGlzLl9oYXNTY3JvbGwoKSl7YmFzZT10aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3A7aGVpZ2h0PXRoaXMuZWxlbWVudC5oZWlnaHQoKTt0aGlzLmFjdGl2ZS5wcmV2QWxsKCIudWktbWVudS1pdGVtIikuZWFjaChmdW5jdGlvbigpe2l0ZW09JCh0aGlzKTtyZXR1cm4gaXRlbS5vZmZzZXQoKS50b3AtYmFzZStoZWlnaHQ+MDt9KTt0aGlzLmZvY3VzKGV2ZW50LGl0ZW0pO31lbHNle3RoaXMuZm9jdXMoZXZlbnQsdGhpcy5hY3RpdmVNZW51LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5maXJzdCgpKTt9fSxfaGFzU2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpPHRoaXMuZWxlbWVudC5wcm9wKCJzY3JvbGxIZWlnaHQiKTt9LHNlbGVjdDpmdW5jdGlvbihldmVudCl7dGhpcy5hY3RpdmU9dGhpcy5hY3RpdmV8fCQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudS1pdGVtIik7dmFyIHVpPXtpdGVtOnRoaXMuYWN0aXZlfTtpZighdGhpcy5hY3RpdmUuaGFzKCIudWktbWVudSIpLmxlbmd0aCl7dGhpcy5jb2xsYXBzZUFsbChldmVudCx0cnVlKTt9CnRoaXMuX3RyaWdnZXIoInNlbGVjdCIsZXZlbnQsdWkpO30sX2ZpbHRlck1lbnVJdGVtczpmdW5jdGlvbihjaGFyYWN0ZXIpe3ZhciBlc2NhcGVkQ2hhcmFjdGVyPWNoYXJhY3Rlci5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCJcXCQmIikscmVnZXg9bmV3IFJlZ0V4cCgiXiIrZXNjYXBlZENoYXJhY3RlciwiaSIpO3JldHVybiB0aGlzLmFjdGl2ZU1lbnUuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLmZpbHRlcigiLnVpLW1lbnUtaXRlbSIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiByZWdleC50ZXN0KCQudHJpbSgkKHRoaXMpLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKS50ZXh0KCkpKTt9KTt9fSk7JC53aWRnZXQoInVpLmF1dG9jb21wbGV0ZSIse3ZlcnNpb246IjEuMTIuMSIsZGVmYXVsdEVsZW1lbnQ6IjxpbnB1dD4iLG9wdGlvbnM6e2FwcGVuZFRvOm51bGwsYXV0b0ZvY3VzOmZhbHNlLGRlbGF5OjMwMCxtaW5MZW5ndGg6MSxwb3NpdGlvbjp7bXk6ImxlZnQgdG9wIixhdDoibGVmdCBib3R0b20iLGNvbGxpc2lvbjoibm9uZSJ9LHNvdXJjZTpudWxsLGNoYW5nZTpudWxsLGNsb3NlOm51bGwsZm9jdXM6bnVsbCxvcGVuOm51bGwscmVzcG9uc2U6bnVsbCxzZWFyY2g6bnVsbCxzZWxlY3Q6bnVsbH0scmVxdWVzdEluZGV4OjAscGVuZGluZzowLF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgc3VwcHJlc3NLZXlQcmVzcyxzdXBwcmVzc0tleVByZXNzUmVwZWF0LHN1cHByZXNzSW5wdXQsbm9kZU5hbWU9dGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksaXNUZXh0YXJlYT1ub2RlTmFtZT09PSJ0ZXh0YXJlYSIsaXNJbnB1dD1ub2RlTmFtZT09PSJpbnB1dCI7dGhpcy5pc011bHRpTGluZT1pc1RleHRhcmVhfHwhaXNJbnB1dCYmdGhpcy5faXNDb250ZW50RWRpdGFibGUodGhpcy5lbGVtZW50KTt0aGlzLnZhbHVlTWV0aG9kPXRoaXMuZWxlbWVudFtpc1RleHRhcmVhfHxpc0lucHV0PyJ2YWwiOiJ0ZXh0Il07dGhpcy5pc05ld01lbnU9dHJ1ZTt0aGlzLl9hZGRDbGFzcygidWktYXV0b2NvbXBsZXRlLWlucHV0Iik7dGhpcy5lbGVtZW50LmF0dHIoImF1dG9jb21wbGV0ZSIsIm9mZiIpO3RoaXMuX29uKHRoaXMuZWxlbWVudCx7a2V5ZG93bjpmdW5jdGlvbihldmVudCl7aWYodGhpcy5lbGVtZW50LnByb3AoInJlYWRPbmx5Iikpe3N1cHByZXNzS2V5UHJlc3M9dHJ1ZTtzdXBwcmVzc0lucHV0PXRydWU7c3VwcHJlc3NLZXlQcmVzc1JlcGVhdD10cnVlO3JldHVybjt9CnN1cHByZXNzS2V5UHJlc3M9ZmFsc2U7c3VwcHJlc3NJbnB1dD1mYWxzZTtzdXBwcmVzc0tleVByZXNzUmVwZWF0PWZhbHNlO3ZhciBrZXlDb2RlPSQudWkua2V5Q29kZTtzd2l0Y2goZXZlbnQua2V5Q29kZSl7Y2FzZSBrZXlDb2RlLlBBR0VfVVA6c3VwcHJlc3NLZXlQcmVzcz10cnVlO3RoaXMuX21vdmUoInByZXZpb3VzUGFnZSIsZXZlbnQpO2JyZWFrO2Nhc2Uga2V5Q29kZS5QQUdFX0RPV046c3VwcHJlc3NLZXlQcmVzcz10cnVlO3RoaXMuX21vdmUoIm5leHRQYWdlIixldmVudCk7YnJlYWs7Y2FzZSBrZXlDb2RlLlVQOnN1cHByZXNzS2V5UHJlc3M9dHJ1ZTt0aGlzLl9rZXlFdmVudCgicHJldmlvdXMiLGV2ZW50KTticmVhaztjYXNlIGtleUNvZGUuRE9XTjpzdXBwcmVzc0tleVByZXNzPXRydWU7dGhpcy5fa2V5RXZlbnQoIm5leHQiLGV2ZW50KTticmVhaztjYXNlIGtleUNvZGUuRU5URVI6aWYodGhpcy5tZW51LmFjdGl2ZSl7c3VwcHJlc3NLZXlQcmVzcz10cnVlO2V2ZW50LnByZXZlbnREZWZhdWx0KCk7dGhpcy5tZW51LnNlbGVjdChldmVudCk7fQpicmVhaztjYXNlIGtleUNvZGUuVEFCOmlmKHRoaXMubWVudS5hY3RpdmUpe3RoaXMubWVudS5zZWxlY3QoZXZlbnQpO30KYnJlYWs7Y2FzZSBrZXlDb2RlLkVTQ0FQRTppZih0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7aWYoIXRoaXMuaXNNdWx0aUxpbmUpe3RoaXMuX3ZhbHVlKHRoaXMudGVybSk7fQp0aGlzLmNsb3NlKGV2ZW50KTtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KYnJlYWs7ZGVmYXVsdDpzdXBwcmVzc0tleVByZXNzUmVwZWF0PXRydWU7dGhpcy5fc2VhcmNoVGltZW91dChldmVudCk7YnJlYWs7fX0sa2V5cHJlc3M6ZnVuY3Rpb24oZXZlbnQpe2lmKHN1cHByZXNzS2V5UHJlc3Mpe3N1cHByZXNzS2V5UHJlc3M9ZmFsc2U7aWYoIXRoaXMuaXNNdWx0aUxpbmV8fHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KcmV0dXJuO30KaWYoc3VwcHJlc3NLZXlQcmVzc1JlcGVhdCl7cmV0dXJuO30KdmFyIGtleUNvZGU9JC51aS5rZXlDb2RlO3N3aXRjaChldmVudC5rZXlDb2RlKXtjYXNlIGtleUNvZGUuUEFHRV9VUDp0aGlzLl9tb3ZlKCJwcmV2aW91c1BhZ2UiLGV2ZW50KTticmVhaztjYXNlIGtleUNvZGUuUEFHRV9ET1dOOnRoaXMuX21vdmUoIm5leHRQYWdlIixldmVudCk7YnJlYWs7Y2FzZSBrZXlDb2RlLlVQOnRoaXMuX2tleUV2ZW50KCJwcmV2aW91cyIsZXZlbnQpO2JyZWFrO2Nhc2Uga2V5Q29kZS5ET1dOOnRoaXMuX2tleUV2ZW50KCJuZXh0IixldmVudCk7YnJlYWs7fX0saW5wdXQ6ZnVuY3Rpb24oZXZlbnQpe2lmKHN1cHByZXNzSW5wdXQpe3N1cHByZXNzSW5wdXQ9ZmFsc2U7ZXZlbnQucHJldmVudERlZmF1bHQoKTtyZXR1cm47fQp0aGlzLl9zZWFyY2hUaW1lb3V0KGV2ZW50KTt9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZEl0ZW09bnVsbDt0aGlzLnByZXZpb3VzPXRoaXMuX3ZhbHVlKCk7fSxibHVyOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLmNhbmNlbEJsdXIpe2RlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7cmV0dXJuO30KY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKTt0aGlzLmNsb3NlKGV2ZW50KTt0aGlzLl9jaGFuZ2UoZXZlbnQpO319KTt0aGlzLl9pbml0U291cmNlKCk7dGhpcy5tZW51PSQoIjx1bD4iKS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKS5tZW51KHtyb2xlOm51bGx9KS5oaWRlKCkubWVudSgiaW5zdGFuY2UiKTt0aGlzLl9hZGRDbGFzcyh0aGlzLm1lbnUuZWxlbWVudCwidWktYXV0b2NvbXBsZXRlIiwidWktZnJvbnQiKTt0aGlzLl9vbih0aGlzLm1lbnUuZWxlbWVudCx7bW91c2Vkb3duOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuY2FuY2VsQmx1cj10cnVlO3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY2FuY2VsQmx1cjtpZih0aGlzLmVsZW1lbnRbMF0hPT0kLnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pKXt0aGlzLmVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKTt9fSk7fSxtZW51Zm9jdXM6ZnVuY3Rpb24oZXZlbnQsdWkpe3ZhciBsYWJlbCxpdGVtO2lmKHRoaXMuaXNOZXdNZW51KXt0aGlzLmlzTmV3TWVudT1mYWxzZTtpZihldmVudC5vcmlnaW5hbEV2ZW50JiYvXm1vdXNlLy50ZXN0KGV2ZW50Lm9yaWdpbmFsRXZlbnQudHlwZSkpe3RoaXMubWVudS5ibHVyKCk7dGhpcy5kb2N1bWVudC5vbmUoIm1vdXNlbW92ZSIsZnVuY3Rpb24oKXskKGV2ZW50LnRhcmdldCkudHJpZ2dlcihldmVudC5vcmlnaW5hbEV2ZW50KTt9KTtyZXR1cm47fX0KaXRlbT11aS5pdGVtLmRhdGEoInVpLWF1dG9jb21wbGV0ZS1pdGVtIik7aWYoZmFsc2UhPT10aGlzLl90cmlnZ2VyKCJmb2N1cyIsZXZlbnQse2l0ZW06aXRlbX0pKXtpZihldmVudC5vcmlnaW5hbEV2ZW50JiYvXmtleS8udGVzdChldmVudC5vcmlnaW5hbEV2ZW50LnR5cGUpKXt0aGlzLl92YWx1ZShpdGVtLnZhbHVlKTt9fQpsYWJlbD11aS5pdGVtLmF0dHIoImFyaWEtbGFiZWwiKXx8aXRlbS52YWx1ZTtpZihsYWJlbCYmJC50cmltKGxhYmVsKS5sZW5ndGgpe3RoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKTskKCI8ZGl2PiIpLnRleHQobGFiZWwpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbik7fX0sbWVudXNlbGVjdDpmdW5jdGlvbihldmVudCx1aSl7dmFyIGl0ZW09dWkuaXRlbS5kYXRhKCJ1aS1hdXRvY29tcGxldGUtaXRlbSIpLHByZXZpb3VzPXRoaXMucHJldmlvdXM7aWYodGhpcy5lbGVtZW50WzBdIT09JC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSl7dGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIik7dGhpcy5wcmV2aW91cz1wcmV2aW91czt0aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMucHJldmlvdXM9cHJldmlvdXM7dGhpcy5zZWxlY3RlZEl0ZW09aXRlbTt9KTt9CmlmKGZhbHNlIT09dGhpcy5fdHJpZ2dlcigic2VsZWN0IixldmVudCx7aXRlbTppdGVtfSkpe3RoaXMuX3ZhbHVlKGl0ZW0udmFsdWUpO30KdGhpcy50ZXJtPXRoaXMuX3ZhbHVlKCk7dGhpcy5jbG9zZShldmVudCk7dGhpcy5zZWxlY3RlZEl0ZW09aXRlbTt9fSk7dGhpcy5saXZlUmVnaW9uPSQoIjxkaXY+Iix7cm9sZToic3RhdHVzIiwiYXJpYS1saXZlIjoiYXNzZXJ0aXZlIiwiYXJpYS1yZWxldmFudCI6ImFkZGl0aW9ucyJ9KS5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpO3RoaXMuX2FkZENsYXNzKHRoaXMubGl2ZVJlZ2lvbixudWxsLCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiKTt0aGlzLl9vbih0aGlzLndpbmRvdyx7YmVmb3JldW5sb2FkOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImF1dG9jb21wbGV0ZSIpO319KTt9LF9kZXN0cm95OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKTt0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiYXV0b2NvbXBsZXRlIik7dGhpcy5tZW51LmVsZW1lbnQucmVtb3ZlKCk7dGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpO30sX3NldE9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe3RoaXMuX3N1cGVyKGtleSx2YWx1ZSk7aWYoa2V5PT09InNvdXJjZSIpe3RoaXMuX2luaXRTb3VyY2UoKTt9CmlmKGtleT09PSJhcHBlbmRUbyIpe3RoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpO30KaWYoa2V5PT09ImRpc2FibGVkIiYmdmFsdWUmJnRoaXMueGhyKXt0aGlzLnhoci5hYm9ydCgpO319LF9pc0V2ZW50VGFyZ2V0SW5XaWRnZXQ6ZnVuY3Rpb24oZXZlbnQpe3ZhciBtZW51RWxlbWVudD10aGlzLm1lbnUuZWxlbWVudFswXTtyZXR1cm4gZXZlbnQudGFyZ2V0PT09dGhpcy5lbGVtZW50WzBdfHxldmVudC50YXJnZXQ9PT1tZW51RWxlbWVudHx8JC5jb250YWlucyhtZW51RWxlbWVudCxldmVudC50YXJnZXQpO30sX2Nsb3NlT25DbGlja091dHNpZGU6ZnVuY3Rpb24oZXZlbnQpe2lmKCF0aGlzLl9pc0V2ZW50VGFyZ2V0SW5XaWRnZXQoZXZlbnQpKXt0aGlzLmNsb3NlKCk7fX0sX2FwcGVuZFRvOmZ1bmN0aW9uKCl7dmFyIGVsZW1lbnQ9dGhpcy5vcHRpb25zLmFwcGVuZFRvO2lmKGVsZW1lbnQpe2VsZW1lbnQ9ZWxlbWVudC5qcXVlcnl8fGVsZW1lbnQubm9kZVR5cGU/JChlbGVtZW50KTp0aGlzLmRvY3VtZW50LmZpbmQoZWxlbWVudCkuZXEoMCk7fQppZighZWxlbWVudHx8IWVsZW1lbnRbMF0pe2VsZW1lbnQ9dGhpcy5lbGVtZW50LmNsb3Nlc3QoIi51aS1mcm9udCwgZGlhbG9nIik7fQppZighZWxlbWVudC5sZW5ndGgpe2VsZW1lbnQ9dGhpcy5kb2N1bWVudFswXS5ib2R5O30KcmV0dXJuIGVsZW1lbnQ7fSxfaW5pdFNvdXJjZTpmdW5jdGlvbigpe3ZhciBhcnJheSx1cmwsdGhhdD10aGlzO2lmKCQuaXNBcnJheSh0aGlzLm9wdGlvbnMuc291cmNlKSl7YXJyYXk9dGhpcy5vcHRpb25zLnNvdXJjZTt0aGlzLnNvdXJjZT1mdW5jdGlvbihyZXF1ZXN0LHJlc3BvbnNlKXtyZXNwb25zZSgkLnVpLmF1dG9jb21wbGV0ZS5maWx0ZXIoYXJyYXkscmVxdWVzdC50ZXJtKSk7fTt9ZWxzZSBpZih0eXBlb2YgdGhpcy5vcHRpb25zLnNvdXJjZT09PSJzdHJpbmciKXt1cmw9dGhpcy5vcHRpb25zLnNvdXJjZTt0aGlzLnNvdXJjZT1mdW5jdGlvbihyZXF1ZXN0LHJlc3BvbnNlKXtpZih0aGF0Lnhocil7dGhhdC54aHIuYWJvcnQoKTt9CnRoYXQueGhyPSQuYWpheCh7dXJsOnVybCxkYXRhOnJlcXVlc3QsZGF0YVR5cGU6Impzb24iLHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7cmVzcG9uc2UoZGF0YSk7fSxlcnJvcjpmdW5jdGlvbigpe3Jlc3BvbnNlKFtdKTt9fSk7fTt9ZWxzZXt0aGlzLnNvdXJjZT10aGlzLm9wdGlvbnMuc291cmNlO319LF9zZWFyY2hUaW1lb3V0OmZ1bmN0aW9uKGV2ZW50KXtjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpO3RoaXMuc2VhcmNoaW5nPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIGVxdWFsVmFsdWVzPXRoaXMudGVybT09PXRoaXMuX3ZhbHVlKCksbWVudVZpc2libGU9dGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIiksbW9kaWZpZXJLZXk9ZXZlbnQuYWx0S2V5fHxldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5fHxldmVudC5zaGlmdEtleTtpZighZXF1YWxWYWx1ZXN8fChlcXVhbFZhbHVlcyYmIW1lbnVWaXNpYmxlJiYhbW9kaWZpZXJLZXkpKXt0aGlzLnNlbGVjdGVkSXRlbT1udWxsO3RoaXMuc2VhcmNoKG51bGwsZXZlbnQpO319LHRoaXMub3B0aW9ucy5kZWxheSk7fSxzZWFyY2g6ZnVuY3Rpb24odmFsdWUsZXZlbnQpe3ZhbHVlPXZhbHVlIT1udWxsP3ZhbHVlOnRoaXMuX3ZhbHVlKCk7dGhpcy50ZXJtPXRoaXMuX3ZhbHVlKCk7aWYodmFsdWUubGVuZ3RoPHRoaXMub3B0aW9ucy5taW5MZW5ndGgpe3JldHVybiB0aGlzLmNsb3NlKGV2ZW50KTt9CmlmKHRoaXMuX3RyaWdnZXIoInNlYXJjaCIsZXZlbnQpPT09ZmFsc2Upe3JldHVybjt9CnJldHVybiB0aGlzLl9zZWFyY2godmFsdWUpO30sX3NlYXJjaDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wZW5kaW5nKys7dGhpcy5fYWRkQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nIik7dGhpcy5jYW5jZWxTZWFyY2g9ZmFsc2U7dGhpcy5zb3VyY2Uoe3Rlcm06dmFsdWV9LHRoaXMuX3Jlc3BvbnNlKCkpO30sX3Jlc3BvbnNlOmZ1bmN0aW9uKCl7dmFyIGluZGV4PSsrdGhpcy5yZXF1ZXN0SW5kZXg7cmV0dXJuICQucHJveHkoZnVuY3Rpb24oY29udGVudCl7aWYoaW5kZXg9PT10aGlzLnJlcXVlc3RJbmRleCl7dGhpcy5fX3Jlc3BvbnNlKGNvbnRlbnQpO30KdGhpcy5wZW5kaW5nLS07aWYoIXRoaXMucGVuZGluZyl7dGhpcy5fcmVtb3ZlQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nIik7fX0sdGhpcyk7fSxfX3Jlc3BvbnNlOmZ1bmN0aW9uKGNvbnRlbnQpe2lmKGNvbnRlbnQpe2NvbnRlbnQ9dGhpcy5fbm9ybWFsaXplKGNvbnRlbnQpO30KdGhpcy5fdHJpZ2dlcigicmVzcG9uc2UiLG51bGwse2NvbnRlbnQ6Y29udGVudH0pO2lmKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJmNvbnRlbnQmJmNvbnRlbnQubGVuZ3RoJiYhdGhpcy5jYW5jZWxTZWFyY2gpe3RoaXMuX3N1Z2dlc3QoY29udGVudCk7dGhpcy5fdHJpZ2dlcigib3BlbiIpO31lbHNle3RoaXMuX2Nsb3NlKCk7fX0sY2xvc2U6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuY2FuY2VsU2VhcmNoPXRydWU7dGhpcy5fY2xvc2UoZXZlbnQpO30sX2Nsb3NlOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9vZmYodGhpcy5kb2N1bWVudCwibW91c2Vkb3duIik7aWYodGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikpe3RoaXMubWVudS5lbGVtZW50LmhpZGUoKTt0aGlzLm1lbnUuYmx1cigpO3RoaXMuaXNOZXdNZW51PXRydWU7dGhpcy5fdHJpZ2dlcigiY2xvc2UiLGV2ZW50KTt9fSxfY2hhbmdlOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLnByZXZpb3VzIT09dGhpcy5fdmFsdWUoKSl7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx7aXRlbTp0aGlzLnNlbGVjdGVkSXRlbX0pO319LF9ub3JtYWxpemU6ZnVuY3Rpb24oaXRlbXMpe2lmKGl0ZW1zLmxlbmd0aCYmaXRlbXNbMF0ubGFiZWwmJml0ZW1zWzBdLnZhbHVlKXtyZXR1cm4gaXRlbXM7fQpyZXR1cm4gJC5tYXAoaXRlbXMsZnVuY3Rpb24oaXRlbSl7aWYodHlwZW9mIGl0ZW09PT0ic3RyaW5nIil7cmV0dXJue2xhYmVsOml0ZW0sdmFsdWU6aXRlbX07fQpyZXR1cm4gJC5leHRlbmQoe30saXRlbSx7bGFiZWw6aXRlbS5sYWJlbHx8aXRlbS52YWx1ZSx2YWx1ZTppdGVtLnZhbHVlfHxpdGVtLmxhYmVsfSk7fSk7fSxfc3VnZ2VzdDpmdW5jdGlvbihpdGVtcyl7dmFyIHVsPXRoaXMubWVudS5lbGVtZW50LmVtcHR5KCk7dGhpcy5fcmVuZGVyTWVudSh1bCxpdGVtcyk7dGhpcy5pc05ld01lbnU9dHJ1ZTt0aGlzLm1lbnUucmVmcmVzaCgpO3VsLnNob3coKTt0aGlzLl9yZXNpemVNZW51KCk7dWwucG9zaXRpb24oJC5leHRlbmQoe29mOnRoaXMuZWxlbWVudH0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSk7aWYodGhpcy5vcHRpb25zLmF1dG9Gb2N1cyl7dGhpcy5tZW51Lm5leHQoKTt9CnRoaXMuX29uKHRoaXMuZG9jdW1lbnQse21vdXNlZG93bjoiX2Nsb3NlT25DbGlja091dHNpZGUifSk7fSxfcmVzaXplTWVudTpmdW5jdGlvbigpe3ZhciB1bD10aGlzLm1lbnUuZWxlbWVudDt1bC5vdXRlcldpZHRoKE1hdGgubWF4KHVsLndpZHRoKCIiKS5vdXRlcldpZHRoKCkrMSx0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpKSk7fSxfcmVuZGVyTWVudTpmdW5jdGlvbih1bCxpdGVtcyl7dmFyIHRoYXQ9dGhpczskLmVhY2goaXRlbXMsZnVuY3Rpb24oaW5kZXgsaXRlbSl7dGhhdC5fcmVuZGVySXRlbURhdGEodWwsaXRlbSk7fSk7fSxfcmVuZGVySXRlbURhdGE6ZnVuY3Rpb24odWwsaXRlbSl7cmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0odWwsaXRlbSkuZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iLGl0ZW0pO30sX3JlbmRlckl0ZW06ZnVuY3Rpb24odWwsaXRlbSl7cmV0dXJuICQoIjxsaT4iKS5hcHBlbmQoJCgiPGRpdj4iKS50ZXh0KGl0ZW0ubGFiZWwpKS5hcHBlbmRUbyh1bCk7fSxfbW92ZTpmdW5jdGlvbihkaXJlY3Rpb24sZXZlbnQpe2lmKCF0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7dGhpcy5zZWFyY2gobnVsbCxldmVudCk7cmV0dXJuO30KaWYodGhpcy5tZW51LmlzRmlyc3RJdGVtKCkmJi9ecHJldmlvdXMvLnRlc3QoZGlyZWN0aW9uKXx8dGhpcy5tZW51LmlzTGFzdEl0ZW0oKSYmL15uZXh0Ly50ZXN0KGRpcmVjdGlvbikpe2lmKCF0aGlzLmlzTXVsdGlMaW5lKXt0aGlzLl92YWx1ZSh0aGlzLnRlcm0pO30KdGhpcy5tZW51LmJsdXIoKTtyZXR1cm47fQp0aGlzLm1lbnVbZGlyZWN0aW9uXShldmVudCk7fSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51LmVsZW1lbnQ7fSxfdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU1ldGhvZC5hcHBseSh0aGlzLmVsZW1lbnQsYXJndW1lbnRzKTt9LF9rZXlFdmVudDpmdW5jdGlvbihrZXlFdmVudCxldmVudCl7aWYoIXRoaXMuaXNNdWx0aUxpbmV8fHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpKXt0aGlzLl9tb3ZlKGtleUV2ZW50LGV2ZW50KTtldmVudC5wcmV2ZW50RGVmYXVsdCgpO319LF9pc0NvbnRlbnRFZGl0YWJsZTpmdW5jdGlvbihlbGVtZW50KXtpZighZWxlbWVudC5sZW5ndGgpe3JldHVybiBmYWxzZTt9CnZhciBlZGl0YWJsZT1lbGVtZW50LnByb3AoImNvbnRlbnRFZGl0YWJsZSIpO2lmKGVkaXRhYmxlPT09ImluaGVyaXQiKXtyZXR1cm4gdGhpcy5faXNDb250ZW50RWRpdGFibGUoZWxlbWVudC5wYXJlbnQoKSk7fQpyZXR1cm4gZWRpdGFibGU9PT0idHJ1ZSI7fX0pOyQuZXh0ZW5kKCQudWkuYXV0b2NvbXBsZXRlLHtlc2NhcGVSZWdleDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlLnJlcGxhY2UoL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csIlxcJCYiKTt9LGZpbHRlcjpmdW5jdGlvbihhcnJheSx0ZXJtKXt2YXIgbWF0Y2hlcj1uZXcgUmVnRXhwKCQudWkuYXV0b2NvbXBsZXRlLmVzY2FwZVJlZ2V4KHRlcm0pLCJpIik7cmV0dXJuICQuZ3JlcChhcnJheSxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIG1hdGNoZXIudGVzdCh2YWx1ZS5sYWJlbHx8dmFsdWUudmFsdWV8fHZhbHVlKTt9KTt9fSk7JC53aWRnZXQoInVpLmF1dG9jb21wbGV0ZSIsJC51aS5hdXRvY29tcGxldGUse29wdGlvbnM6e21lc3NhZ2VzOntub1Jlc3VsdHM6Ik5vIHNlYXJjaCByZXN1bHRzLiIscmVzdWx0czpmdW5jdGlvbihhbW91bnQpe3JldHVybiBhbW91bnQrKGFtb3VudD4xPyIgcmVzdWx0cyBhcmUiOiIgcmVzdWx0IGlzIikrIiBhdmFpbGFibGUsIHVzZSB1cCBhbmQgZG93biBhcnJvdyBrZXlzIHRvIG5hdmlnYXRlLiI7fX19LF9fcmVzcG9uc2U6ZnVuY3Rpb24oY29udGVudCl7dmFyIG1lc3NhZ2U7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpO2lmKHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5jYW5jZWxTZWFyY2gpe3JldHVybjt9CmlmKGNvbnRlbnQmJmNvbnRlbnQubGVuZ3RoKXttZXNzYWdlPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5yZXN1bHRzKGNvbnRlbnQubGVuZ3RoKTt9ZWxzZXttZXNzYWdlPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHM7fQp0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCk7JCgiPGRpdj4iKS50ZXh0KG1lc3NhZ2UpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbik7fX0pO3ZhciB3aWRnZXRzQXV0b2NvbXBsZXRlPSQudWkuYXV0b2NvbXBsZXRlOyQuZXh0ZW5kKCQudWkse2RhdGVwaWNrZXI6e3ZlcnNpb246IjEuMTIuMSJ9fSk7dmFyIGRhdGVwaWNrZXJfaW5zdEFjdGl2ZTtmdW5jdGlvbiBkYXRlcGlja2VyX2dldFppbmRleChlbGVtKXt2YXIgcG9zaXRpb24sdmFsdWU7d2hpbGUoZWxlbS5sZW5ndGgmJmVsZW1bMF0hPT1kb2N1bWVudCl7cG9zaXRpb249ZWxlbS5jc3MoInBvc2l0aW9uIik7aWYocG9zaXRpb249PT0iYWJzb2x1dGUifHxwb3NpdGlvbj09PSJyZWxhdGl2ZSJ8fHBvc2l0aW9uPT09ImZpeGVkIil7dmFsdWU9cGFyc2VJbnQoZWxlbS5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4odmFsdWUpJiZ2YWx1ZSE9PTApe3JldHVybiB2YWx1ZTt9fQplbGVtPWVsZW0ucGFyZW50KCk7fQpyZXR1cm4gMDt9CmZ1bmN0aW9uIERhdGVwaWNrZXIoKXt0aGlzLl9jdXJJbnN0PW51bGw7dGhpcy5fa2V5RXZlbnQ9ZmFsc2U7dGhpcy5fZGlzYWJsZWRJbnB1dHM9W107dGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7dGhpcy5faW5EaWFsb2c9ZmFsc2U7dGhpcy5fbWFpbkRpdklkPSJ1aS1kYXRlcGlja2VyLWRpdiI7dGhpcy5faW5saW5lQ2xhc3M9InVpLWRhdGVwaWNrZXItaW5saW5lIjt0aGlzLl9hcHBlbmRDbGFzcz0idWktZGF0ZXBpY2tlci1hcHBlbmQiO3RoaXMuX3RyaWdnZXJDbGFzcz0idWktZGF0ZXBpY2tlci10cmlnZ2VyIjt0aGlzLl9kaWFsb2dDbGFzcz0idWktZGF0ZXBpY2tlci1kaWFsb2ciO3RoaXMuX2Rpc2FibGVDbGFzcz0idWktZGF0ZXBpY2tlci1kaXNhYmxlZCI7dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjt0aGlzLl9jdXJyZW50Q2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudC1kYXkiO3RoaXMuX2RheU92ZXJDbGFzcz0idWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlciI7dGhpcy5yZWdpb25hbD1bXTt0aGlzLnJlZ2lvbmFsWyIiXT17Y2xvc2VUZXh0OiJEb25lIixwcmV2VGV4dDoiUHJldiIsbmV4dFRleHQ6Ik5leHQiLGN1cnJlbnRUZXh0OiJUb2RheSIsbW9udGhOYW1lczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sbW9udGhOYW1lc1Nob3J0OlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZGF5TmFtZXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLGRheU5hbWVzU2hvcnQ6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSxkYXlOYW1lc01pbjpbIlN1IiwiTW8iLCJUdSIsIldlIiwiVGgiLCJGciIsIlNhIl0sd2Vla0hlYWRlcjoiV2siLGRhdGVGb3JtYXQ6Im1tL2RkL3l5IixmaXJzdERheTowLGlzUlRMOmZhbHNlLHNob3dNb250aEFmdGVyWWVhcjpmYWxzZSx5ZWFyU3VmZml4OiIifTt0aGlzLl9kZWZhdWx0cz17c2hvd09uOiJmb2N1cyIsc2hvd0FuaW06ImZhZGVJbiIsc2hvd09wdGlvbnM6e30sZGVmYXVsdERhdGU6bnVsbCxhcHBlbmRUZXh0OiIiLGJ1dHRvblRleHQ6Ii4uLiIsYnV0dG9uSW1hZ2U6IiIsYnV0dG9uSW1hZ2VPbmx5OmZhbHNlLGhpZGVJZk5vUHJldk5leHQ6ZmFsc2UsbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDpmYWxzZSxnb3RvQ3VycmVudDpmYWxzZSxjaGFuZ2VNb250aDpmYWxzZSxjaGFuZ2VZZWFyOmZhbHNlLHllYXJSYW5nZToiYy0xMDpjKzEwIixzaG93T3RoZXJNb250aHM6ZmFsc2Usc2VsZWN0T3RoZXJNb250aHM6ZmFsc2Usc2hvd1dlZWs6ZmFsc2UsY2FsY3VsYXRlV2Vlazp0aGlzLmlzbzg2MDFXZWVrLHNob3J0WWVhckN1dG9mZjoiKzEwIixtaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOiJmYXN0IixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6IiIsYWx0Rm9ybWF0OiIiLGNvbnN0cmFpbklucHV0OnRydWUsc2hvd0J1dHRvblBhbmVsOmZhbHNlLGF1dG9TaXplOmZhbHNlLGRpc2FibGVkOmZhbHNlfTskLmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5yZWdpb25hbC5lbj0kLmV4dGVuZCh0cnVlLHt9LHRoaXMucmVnaW9uYWxbIiJdKTt0aGlzLnJlZ2lvbmFsWyJlbi1VUyJdPSQuZXh0ZW5kKHRydWUse30sdGhpcy5yZWdpb25hbC5lbik7dGhpcy5kcERpdj1kYXRlcGlja2VyX2JpbmRIb3ZlcigkKCI8ZGl2IGlkPSciK3RoaXMuX21haW5EaXZJZCsiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIpKTt9CiQuZXh0ZW5kKERhdGVwaWNrZXIucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2O30sc2V0RGVmYXVsdHM6ZnVuY3Rpb24oc2V0dGluZ3Mpe2RhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKHRoaXMuX2RlZmF1bHRzLHNldHRpbmdzfHx7fSk7cmV0dXJuIHRoaXM7fSxfYXR0YWNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsc2V0dGluZ3Mpe3ZhciBub2RlTmFtZSxpbmxpbmUsaW5zdDtub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpbmxpbmU9KG5vZGVOYW1lPT09ImRpdiJ8fG5vZGVOYW1lPT09InNwYW4iKTtpZighdGFyZ2V0LmlkKXt0aGlzLnV1aWQrPTE7dGFyZ2V0LmlkPSJkcCIrdGhpcy51dWlkO30KaW5zdD10aGlzLl9uZXdJbnN0KCQodGFyZ2V0KSxpbmxpbmUpO2luc3Quc2V0dGluZ3M9JC5leHRlbmQoe30sc2V0dGluZ3N8fHt9KTtpZihub2RlTmFtZT09PSJpbnB1dCIpe3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHRhcmdldCxpbnN0KTt9ZWxzZSBpZihpbmxpbmUpe3RoaXMuX2lubGluZURhdGVwaWNrZXIodGFyZ2V0LGluc3QpO319LF9uZXdJbnN0OmZ1bmN0aW9uKHRhcmdldCxpbmxpbmUpe3ZhciBpZD10YXJnZXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1wtXSkvZywiXFxcXCQxIik7cmV0dXJue2lkOmlkLGlucHV0OnRhcmdldCxzZWxlY3RlZERheTowLHNlbGVjdGVkTW9udGg6MCxzZWxlY3RlZFllYXI6MCxkcmF3TW9udGg6MCxkcmF3WWVhcjowLGlubGluZTppbmxpbmUsZHBEaXY6KCFpbmxpbmU/dGhpcy5kcERpdjpkYXRlcGlja2VyX2JpbmRIb3ZlcigkKCI8ZGl2IGNsYXNzPSciK3RoaXMuX2lubGluZUNsYXNzKyIgdWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIpKSl9O30sX2Nvbm5lY3REYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCxpbnN0KXt2YXIgaW5wdXQ9JCh0YXJnZXQpO2luc3QuYXBwZW5kPSQoW10pO2luc3QudHJpZ2dlcj0kKFtdKTtpZihpbnB1dC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybjt9CnRoaXMuX2F0dGFjaG1lbnRzKGlucHV0LGluc3QpO2lucHV0LmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5vbigia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS5vbigia2V5cHJlc3MiLHRoaXMuX2RvS2V5UHJlc3MpLm9uKCJrZXl1cCIsdGhpcy5fZG9LZXlVcCk7dGhpcy5fYXV0b1NpemUoaW5zdCk7JC5kYXRhKHRhcmdldCwiZGF0ZXBpY2tlciIsaW5zdCk7aWYoaW5zdC5zZXR0aW5ncy5kaXNhYmxlZCl7dGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodGFyZ2V0KTt9fSxfYXR0YWNobWVudHM6ZnVuY3Rpb24oaW5wdXQsaW5zdCl7dmFyIHNob3dPbixidXR0b25UZXh0LGJ1dHRvbkltYWdlLGFwcGVuZFRleHQ9dGhpcy5fZ2V0KGluc3QsImFwcGVuZFRleHQiKSxpc1JUTD10aGlzLl9nZXQoaW5zdCwiaXNSVEwiKTtpZihpbnN0LmFwcGVuZCl7aW5zdC5hcHBlbmQucmVtb3ZlKCk7fQppZihhcHBlbmRUZXh0KXtpbnN0LmFwcGVuZD0kKCI8c3BhbiBjbGFzcz0nIit0aGlzLl9hcHBlbmRDbGFzcysiJz4iK2FwcGVuZFRleHQrIjwvc3Bhbj4iKTtpbnB1dFtpc1JUTD8iYmVmb3JlIjoiYWZ0ZXIiXShpbnN0LmFwcGVuZCk7fQppbnB1dC5vZmYoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcik7aWYoaW5zdC50cmlnZ2VyKXtpbnN0LnRyaWdnZXIucmVtb3ZlKCk7fQpzaG93T249dGhpcy5fZ2V0KGluc3QsInNob3dPbiIpO2lmKHNob3dPbj09PSJmb2N1cyJ8fHNob3dPbj09PSJib3RoIil7aW5wdXQub24oImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcik7fQppZihzaG93T249PT0iYnV0dG9uInx8c2hvd09uPT09ImJvdGgiKXtidXR0b25UZXh0PXRoaXMuX2dldChpbnN0LCJidXR0b25UZXh0Iik7YnV0dG9uSW1hZ2U9dGhpcy5fZ2V0KGluc3QsImJ1dHRvbkltYWdlIik7aW5zdC50cmlnZ2VyPSQodGhpcy5fZ2V0KGluc3QsImJ1dHRvbkltYWdlT25seSIpPyQoIjxpbWcvPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOmJ1dHRvbkltYWdlLGFsdDpidXR0b25UZXh0LHRpdGxlOmJ1dHRvblRleHR9KTokKCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IikuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKCFidXR0b25JbWFnZT9idXR0b25UZXh0OiQoIjxpbWcvPiIpLmF0dHIoe3NyYzpidXR0b25JbWFnZSxhbHQ6YnV0dG9uVGV4dCx0aXRsZTpidXR0b25UZXh0fSkpKTtpbnB1dFtpc1JUTD8iYmVmb3JlIjoiYWZ0ZXIiXShpbnN0LnRyaWdnZXIpO2luc3QudHJpZ2dlci5vbigiY2xpY2siLGZ1bmN0aW9uKCl7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PT1pbnB1dFswXSl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO31lbHNlIGlmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0IT09aW5wdXRbMF0peyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlucHV0WzBdKTt9ZWxzZXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlucHV0WzBdKTt9CnJldHVybiBmYWxzZTt9KTt9fSxfYXV0b1NpemU6ZnVuY3Rpb24oaW5zdCl7aWYodGhpcy5fZ2V0KGluc3QsImF1dG9TaXplIikmJiFpbnN0LmlubGluZSl7dmFyIGZpbmRNYXgsbWF4LG1heEksaSxkYXRlPW5ldyBEYXRlKDIwMDksMTItMSwyMCksZGF0ZUZvcm1hdD10aGlzLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpO2lmKGRhdGVGb3JtYXQubWF0Y2goL1tETV0vKSl7ZmluZE1heD1mdW5jdGlvbihuYW1lcyl7bWF4PTA7bWF4ST0wO2ZvcihpPTA7aTxuYW1lcy5sZW5ndGg7aSsrKXtpZihuYW1lc1tpXS5sZW5ndGg+bWF4KXttYXg9bmFtZXNbaV0ubGVuZ3RoO21heEk9aTt9fQpyZXR1cm4gbWF4STt9O2RhdGUuc2V0TW9udGgoZmluZE1heCh0aGlzLl9nZXQoaW5zdCwoZGF0ZUZvcm1hdC5tYXRjaCgvTU0vKT8ibW9udGhOYW1lcyI6Im1vbnRoTmFtZXNTaG9ydCIpKSkpO2RhdGUuc2V0RGF0ZShmaW5kTWF4KHRoaXMuX2dldChpbnN0LChkYXRlRm9ybWF0Lm1hdGNoKC9ERC8pPyJkYXlOYW1lcyI6ImRheU5hbWVzU2hvcnQiKSkpKzIwLWRhdGUuZ2V0RGF5KCkpO30KaW5zdC5pbnB1dC5hdHRyKCJzaXplIix0aGlzLl9mb3JtYXREYXRlKGluc3QsZGF0ZSkubGVuZ3RoKTt9fSxfaW5saW5lRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsaW5zdCl7dmFyIGRpdlNwYW49JCh0YXJnZXQpO2lmKGRpdlNwYW4uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm47fQpkaXZTcGFuLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5hcHBlbmQoaW5zdC5kcERpdik7JC5kYXRhKHRhcmdldCwiZGF0ZXBpY2tlciIsaW5zdCk7dGhpcy5fc2V0RGF0ZShpbnN0LHRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpLHRydWUpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO2lmKGluc3Quc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHRhcmdldCk7fQppbnN0LmRwRGl2LmNzcygiZGlzcGxheSIsImJsb2NrIik7fSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbihpbnB1dCxkYXRlLG9uU2VsZWN0LHNldHRpbmdzLHBvcyl7dmFyIGlkLGJyb3dzZXJXaWR0aCxicm93c2VySGVpZ2h0LHNjcm9sbFgsc2Nyb2xsWSxpbnN0PXRoaXMuX2RpYWxvZ0luc3Q7aWYoIWluc3Qpe3RoaXMudXVpZCs9MTtpZD0iZHAiK3RoaXMudXVpZDt0aGlzLl9kaWFsb2dJbnB1dD0kKCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9JyIraWQrIicgc3R5bGU9J3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMTAwcHg7IHdpZHRoOiAwcHg7Jy8+Iik7dGhpcy5fZGlhbG9nSW5wdXQub24oImtleWRvd24iLHRoaXMuX2RvS2V5RG93bik7JCgiYm9keSIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCk7aW5zdD10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsZmFsc2UpO2luc3Quc2V0dGluZ3M9e307JC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCJkYXRlcGlja2VyIixpbnN0KTt9CmRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKGluc3Quc2V0dGluZ3Msc2V0dGluZ3N8fHt9KTtkYXRlPShkYXRlJiZkYXRlLmNvbnN0cnVjdG9yPT09RGF0ZT90aGlzLl9mb3JtYXREYXRlKGluc3QsZGF0ZSk6ZGF0ZSk7dGhpcy5fZGlhbG9nSW5wdXQudmFsKGRhdGUpO3RoaXMuX3Bvcz0ocG9zPyhwb3MubGVuZ3RoP3BvczpbcG9zLnBhZ2VYLHBvcy5wYWdlWV0pOm51bGwpO2lmKCF0aGlzLl9wb3Mpe2Jyb3dzZXJXaWR0aD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7YnJvd3NlckhlaWdodD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O3Njcm9sbFg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtzY3JvbGxZPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO3RoaXMuX3Bvcz1bKGJyb3dzZXJXaWR0aC8yKS0xMDArc2Nyb2xsWCwoYnJvd3NlckhlaWdodC8yKS0xNTArc2Nyb2xsWV07fQp0aGlzLl9kaWFsb2dJbnB1dC5jc3MoImxlZnQiLCh0aGlzLl9wb3NbMF0rMjApKyJweCIpLmNzcygidG9wIix0aGlzLl9wb3NbMV0rInB4Iik7aW5zdC5zZXR0aW5ncy5vblNlbGVjdD1vblNlbGVjdDt0aGlzLl9pbkRpYWxvZz10cnVlO3RoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpO3RoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKTtpZigkLmJsb2NrVUkpeyQuYmxvY2tVSSh0aGlzLmRwRGl2KTt9CiQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSwiZGF0ZXBpY2tlciIsaW5zdCk7cmV0dXJuIHRoaXM7fSxfZGVzdHJveURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0KXt2YXIgbm9kZU5hbWUsJHRhcmdldD0kKHRhcmdldCksaW5zdD0kLmRhdGEodGFyZ2V0LCJkYXRlcGlja2VyIik7aWYoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm47fQpub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTskLnJlbW92ZURhdGEodGFyZ2V0LCJkYXRlcGlja2VyIik7aWYobm9kZU5hbWU9PT0iaW5wdXQiKXtpbnN0LmFwcGVuZC5yZW1vdmUoKTtpbnN0LnRyaWdnZXIucmVtb3ZlKCk7JHRhcmdldC5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkub2ZmKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLm9mZigia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS5vZmYoImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS5vZmYoImtleXVwIix0aGlzLl9kb0tleVVwKTt9ZWxzZSBpZihub2RlTmFtZT09PSJkaXYifHxub2RlTmFtZT09PSJzcGFuIil7JHRhcmdldC5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuZW1wdHkoKTt9CmlmKGRhdGVwaWNrZXJfaW5zdEFjdGl2ZT09PWluc3Qpe2RhdGVwaWNrZXJfaW5zdEFjdGl2ZT1udWxsO319LF9lbmFibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCl7dmFyIG5vZGVOYW1lLGlubGluZSwkdGFyZ2V0PSQodGFyZ2V0KSxpbnN0PSQuZGF0YSh0YXJnZXQsImRhdGVwaWNrZXIiKTtpZighJHRhcmdldC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybjt9Cm5vZGVOYW1lPXRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT09ImlucHV0Iil7dGFyZ2V0LmRpc2FibGVkPWZhbHNlO2luc3QudHJpZ2dlci5maWx0ZXIoImJ1dHRvbiIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlO30pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIxLjAiLGN1cnNvcjoiIn0pO31lbHNlIGlmKG5vZGVOYW1lPT09ImRpdiJ8fG5vZGVOYW1lPT09InNwYW4iKXtpbmxpbmU9JHRhcmdldC5jaGlsZHJlbigiLiIrdGhpcy5faW5saW5lQ2xhc3MpO2lubGluZS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2lubGluZS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIixmYWxzZSk7fQp0aGlzLl9kaXNhYmxlZElucHV0cz0kLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuKHZhbHVlPT09dGFyZ2V0P251bGw6dmFsdWUpO30pO30sX2Rpc2FibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCl7dmFyIG5vZGVOYW1lLGlubGluZSwkdGFyZ2V0PSQodGFyZ2V0KSxpbnN0PSQuZGF0YSh0YXJnZXQsImRhdGVwaWNrZXIiKTtpZighJHRhcmdldC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybjt9Cm5vZGVOYW1lPXRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT09ImlucHV0Iil7dGFyZ2V0LmRpc2FibGVkPXRydWU7aW5zdC50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZTt9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMC41IixjdXJzb3I6ImRlZmF1bHQifSk7fWVsc2UgaWYobm9kZU5hbWU9PT0iZGl2Inx8bm9kZU5hbWU9PT0ic3BhbiIpe2lubGluZT0kdGFyZ2V0LmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7aW5saW5lLmNoaWxkcmVuKCkuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7aW5saW5lLmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIikucHJvcCgiZGlzYWJsZWQiLHRydWUpO30KdGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odmFsdWUpe3JldHVybih2YWx1ZT09PXRhcmdldD9udWxsOnZhbHVlKTt9KTt0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPXRhcmdldDt9LF9pc0Rpc2FibGVkRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe2lmKCF0YXJnZXQpe3JldHVybiBmYWxzZTt9CmZvcih2YXIgaT0wO2k8dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoO2krKyl7aWYodGhpcy5fZGlzYWJsZWRJbnB1dHNbaV09PT10YXJnZXQpe3JldHVybiB0cnVlO319CnJldHVybiBmYWxzZTt9LF9nZXRJbnN0OmZ1bmN0aW9uKHRhcmdldCl7dHJ5e3JldHVybiAkLmRhdGEodGFyZ2V0LCJkYXRlcGlja2VyIik7fQpjYXRjaChlcnIpe3Rocm93Ik1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIjt9fSxfb3B0aW9uRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsbmFtZSx2YWx1ZSl7dmFyIHNldHRpbmdzLGRhdGUsbWluRGF0ZSxtYXhEYXRlLGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXQpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgbmFtZT09PSJzdHJpbmciKXtyZXR1cm4obmFtZT09PSJkZWZhdWx0cyI/JC5leHRlbmQoe30sJC5kYXRlcGlja2VyLl9kZWZhdWx0cyk6KGluc3Q/KG5hbWU9PT0iYWxsIj8kLmV4dGVuZCh7fSxpbnN0LnNldHRpbmdzKTp0aGlzLl9nZXQoaW5zdCxuYW1lKSk6bnVsbCkpO30Kc2V0dGluZ3M9bmFtZXx8e307aWYodHlwZW9mIG5hbWU9PT0ic3RyaW5nIil7c2V0dGluZ3M9e307c2V0dGluZ3NbbmFtZV09dmFsdWU7fQppZihpbnN0KXtpZih0aGlzLl9jdXJJbnN0PT09aW5zdCl7dGhpcy5faGlkZURhdGVwaWNrZXIoKTt9CmRhdGU9dGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIodGFyZ2V0LHRydWUpO21pbkRhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtaW4iKTttYXhEYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWF4Iik7ZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncyxzZXR0aW5ncyk7aWYobWluRGF0ZSE9PW51bGwmJnNldHRpbmdzLmRhdGVGb3JtYXQhPT11bmRlZmluZWQmJnNldHRpbmdzLm1pbkRhdGU9PT11bmRlZmluZWQpe2luc3Quc2V0dGluZ3MubWluRGF0ZT10aGlzLl9mb3JtYXREYXRlKGluc3QsbWluRGF0ZSk7fQppZihtYXhEYXRlIT09bnVsbCYmc2V0dGluZ3MuZGF0ZUZvcm1hdCE9PXVuZGVmaW5lZCYmc2V0dGluZ3MubWF4RGF0ZT09PXVuZGVmaW5lZCl7aW5zdC5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUoaW5zdCxtYXhEYXRlKTt9CmlmKCJkaXNhYmxlZCJpbiBzZXR0aW5ncyl7aWYoc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHRhcmdldCk7fWVsc2V7dGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0YXJnZXQpO319CnRoaXMuX2F0dGFjaG1lbnRzKCQodGFyZ2V0KSxpbnN0KTt0aGlzLl9hdXRvU2l6ZShpbnN0KTt0aGlzLl9zZXREYXRlKGluc3QsZGF0ZSk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7fX0sX2NoYW5nZURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LG5hbWUsdmFsdWUpe3RoaXMuX29wdGlvbkRhdGVwaWNrZXIodGFyZ2V0LG5hbWUsdmFsdWUpO30sX3JlZnJlc2hEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCl7dmFyIGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXQpO2lmKGluc3Qpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7fX0sX3NldERhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCxkYXRlKXt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldCk7aWYoaW5zdCl7dGhpcy5fc2V0RGF0ZShpbnN0LGRhdGUpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO319LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsbm9EZWZhdWx0KXt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldCk7aWYoaW5zdCYmIWluc3QuaW5saW5lKXt0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGluc3Qsbm9EZWZhdWx0KTt9CnJldHVybihpbnN0P3RoaXMuX2dldERhdGUoaW5zdCk6bnVsbCk7fSxfZG9LZXlEb3duOmZ1bmN0aW9uKGV2ZW50KXt2YXIgb25TZWxlY3QsZGF0ZVN0cixzZWwsaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoZXZlbnQudGFyZ2V0KSxoYW5kbGVkPXRydWUsaXNSVEw9aW5zdC5kcERpdi5pcygiLnVpLWRhdGVwaWNrZXItcnRsIik7aW5zdC5fa2V5RXZlbnQ9dHJ1ZTtpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXtzd2l0Y2goZXZlbnQua2V5Q29kZSl7Y2FzZSA5OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtoYW5kbGVkPWZhbHNlO2JyZWFrO2Nhc2UgMTM6c2VsPSQoInRkLiIrJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MrIjpub3QoLiIrCiQuZGF0ZXBpY2tlci5fY3VycmVudENsYXNzKyIpIixpbnN0LmRwRGl2KTtpZihzZWxbMF0peyQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGV2ZW50LnRhcmdldCxpbnN0LnNlbGVjdGVkTW9udGgsaW5zdC5zZWxlY3RlZFllYXIsc2VsWzBdKTt9Cm9uU2VsZWN0PSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsIm9uU2VsZWN0Iik7aWYob25TZWxlY3Qpe2RhdGVTdHI9JC5kYXRlcGlja2VyLl9mb3JtYXREYXRlKGluc3QpO29uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksW2RhdGVTdHIsaW5zdF0pO31lbHNleyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTt9CnJldHVybiBmYWxzZTtjYXNlIDI3OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTticmVhaztjYXNlIDMzOiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGV2ZW50LmN0cmxLZXk/LSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBCaWdNb250aHMiKTotJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzQ6JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwoZXZlbnQuY3RybEtleT8rJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcEJpZ01vbnRocyIpOiskLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwTW9udGhzIikpLCJNIik7YnJlYWs7Y2FzZSAzNTppZihldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShldmVudC50YXJnZXQpO30KaGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2JyZWFrO2Nhc2UgMzY6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoZXZlbnQudGFyZ2V0KTt9CmhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTticmVhaztjYXNlIDM3OmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGlzUlRMPysxOi0xKSwiRCIpO30KaGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2lmKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChldmVudC5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSksIk0iKTt9CmJyZWFrO2Nhc2UgMzg6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwtNywiRCIpO30KaGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwoaXNSVEw/LTE6KzEpLCJEIik7fQpoYW5kbGVkPWV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXk7aWYoZXZlbnQub3JpZ2luYWxFdmVudC5hbHRLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGV2ZW50LmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpKSwiTSIpO30KYnJlYWs7Y2FzZSA0MDppZihldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCs3LCJEIik7fQpoYW5kbGVkPWV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXk7YnJlYWs7ZGVmYXVsdDpoYW5kbGVkPWZhbHNlO319ZWxzZSBpZihldmVudC5rZXlDb2RlPT09MzYmJmV2ZW50LmN0cmxLZXkpeyQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyk7fWVsc2V7aGFuZGxlZD1mYWxzZTt9CmlmKGhhbmRsZWQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX0sX2RvS2V5UHJlc3M6ZnVuY3Rpb24oZXZlbnQpe3ZhciBjaGFycyxjaHIsaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoZXZlbnQudGFyZ2V0KTtpZigkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJjb25zdHJhaW5JbnB1dCIpKXtjaGFycz0kLmRhdGVwaWNrZXIuX3Bvc3NpYmxlQ2hhcnMoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpKTtjaHI9U3RyaW5nLmZyb21DaGFyQ29kZShldmVudC5jaGFyQ29kZT09bnVsbD9ldmVudC5rZXlDb2RlOmV2ZW50LmNoYXJDb2RlKTtyZXR1cm4gZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleXx8KGNocjwiICJ8fCFjaGFyc3x8Y2hhcnMuaW5kZXhPZihjaHIpPi0xKTt9fSxfZG9LZXlVcDpmdW5jdGlvbihldmVudCl7dmFyIGRhdGUsaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoZXZlbnQudGFyZ2V0KTtpZihpbnN0LmlucHV0LnZhbCgpIT09aW5zdC5sYXN0VmFsKXt0cnl7ZGF0ZT0kLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKSwoaW5zdC5pbnB1dD9pbnN0LmlucHV0LnZhbCgpOm51bGwpLCQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKTtpZihkYXRlKXskLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaW5zdCk7JC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO319CmNhdGNoKGVycil7fX0KcmV0dXJuIHRydWU7fSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24oaW5wdXQpe2lucHV0PWlucHV0LnRhcmdldHx8aW5wdXQ7aWYoaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJpbnB1dCIpe2lucHV0PSQoImlucHV0IixpbnB1dC5wYXJlbnROb2RlKVswXTt9CmlmKCQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaW5wdXQpfHwkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09PWlucHV0KXtyZXR1cm47fQp2YXIgaW5zdCxiZWZvcmVTaG93LGJlZm9yZVNob3dTZXR0aW5ncyxpc0ZpeGVkLG9mZnNldCxzaG93QW5pbSxkdXJhdGlvbjtpbnN0PSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChpbnB1dCk7aWYoJC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2N1ckluc3QhPT1pbnN0KXskLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCh0cnVlLHRydWUpO2lmKGluc3QmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoJC5kYXRlcGlja2VyLl9jdXJJbnN0LmlucHV0WzBdKTt9fQpiZWZvcmVTaG93PSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImJlZm9yZVNob3ciKTtiZWZvcmVTaG93U2V0dGluZ3M9YmVmb3JlU2hvdz9iZWZvcmVTaG93LmFwcGx5KGlucHV0LFtpbnB1dCxpbnN0XSk6e307aWYoYmVmb3JlU2hvd1NldHRpbmdzPT09ZmFsc2Upe3JldHVybjt9CmRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKGluc3Quc2V0dGluZ3MsYmVmb3JlU2hvd1NldHRpbmdzKTtpbnN0Lmxhc3RWYWw9bnVsbDskLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD1pbnB1dDskLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaW5zdCk7aWYoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyl7aW5wdXQudmFsdWU9IiI7fQppZighJC5kYXRlcGlja2VyLl9wb3MpeyQuZGF0ZXBpY2tlci5fcG9zPSQuZGF0ZXBpY2tlci5fZmluZFBvcyhpbnB1dCk7JC5kYXRlcGlja2VyLl9wb3NbMV0rPWlucHV0Lm9mZnNldEhlaWdodDt9CmlzRml4ZWQ9ZmFsc2U7JChpbnB1dCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXtpc0ZpeGVkfD0kKHRoaXMpLmNzcygicG9zaXRpb24iKT09PSJmaXhlZCI7cmV0dXJuIWlzRml4ZWQ7fSk7b2Zmc2V0PXtsZWZ0OiQuZGF0ZXBpY2tlci5fcG9zWzBdLHRvcDokLmRhdGVwaWNrZXIuX3Bvc1sxXX07JC5kYXRlcGlja2VyLl9wb3M9bnVsbDtpbnN0LmRwRGl2LmVtcHR5KCk7aW5zdC5kcERpdi5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsZGlzcGxheToiYmxvY2siLHRvcDoiLTEwMDBweCJ9KTskLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7b2Zmc2V0PSQuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQoaW5zdCxvZmZzZXQsaXNGaXhlZCk7aW5zdC5kcERpdi5jc3Moe3Bvc2l0aW9uOigkLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYkLmJsb2NrVUk/InN0YXRpYyI6KGlzRml4ZWQ/ImZpeGVkIjoiYWJzb2x1dGUiKSksZGlzcGxheToibm9uZSIsbGVmdDpvZmZzZXQubGVmdCsicHgiLHRvcDpvZmZzZXQudG9wKyJweCJ9KTtpZighaW5zdC5pbmxpbmUpe3Nob3dBbmltPSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInNob3dBbmltIik7ZHVyYXRpb249JC5kYXRlcGlja2VyLl9nZXQoaW5zdCwiZHVyYXRpb24iKTtpbnN0LmRwRGl2LmNzcygiei1pbmRleCIsZGF0ZXBpY2tlcl9nZXRaaW5kZXgoJChpbnB1dCkpKzEpOyQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9dHJ1ZTtpZigkLmVmZmVjdHMmJiQuZWZmZWN0cy5lZmZlY3Rbc2hvd0FuaW1dKXtpbnN0LmRwRGl2LnNob3coc2hvd0FuaW0sJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic2hvd09wdGlvbnMiKSxkdXJhdGlvbik7fWVsc2V7aW5zdC5kcERpdltzaG93QW5pbXx8InNob3ciXShzaG93QW5pbT9kdXJhdGlvbjpudWxsKTt9CmlmKCQuZGF0ZXBpY2tlci5fc2hvdWxkRm9jdXNJbnB1dChpbnN0KSl7aW5zdC5pbnB1dC50cmlnZ2VyKCJmb2N1cyIpO30KJC5kYXRlcGlja2VyLl9jdXJJbnN0PWluc3Q7fX0sX3VwZGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oaW5zdCl7dGhpcy5tYXhSb3dzPTQ7ZGF0ZXBpY2tlcl9pbnN0QWN0aXZlPWluc3Q7aW5zdC5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaW5zdCkpO3RoaXMuX2F0dGFjaEhhbmRsZXJzKGluc3QpO3ZhciBvcmlneWVhcnNodG1sLG51bU1vbnRocz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpbnN0KSxjb2xzPW51bU1vbnRoc1sxXSx3aWR0aD0xNyxhY3RpdmVDZWxsPWluc3QuZHBEaXYuZmluZCgiLiIrdGhpcy5fZGF5T3ZlckNsYXNzKyIgYSIpO2lmKGFjdGl2ZUNlbGwubGVuZ3RoPjApe2RhdGVwaWNrZXJfaGFuZGxlTW91c2VvdmVyLmFwcGx5KGFjdGl2ZUNlbGwuZ2V0KDApKTt9Cmluc3QuZHBEaXYucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktMiB1aS1kYXRlcGlja2VyLW11bHRpLTMgdWktZGF0ZXBpY2tlci1tdWx0aS00Iikud2lkdGgoIiIpO2lmKGNvbHM+MSl7aW5zdC5kcERpdi5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1tdWx0aS0iK2NvbHMpLmNzcygid2lkdGgiLCh3aWR0aCpjb2xzKSsiZW0iKTt9Cmluc3QuZHBEaXZbKG51bU1vbnRoc1swXSE9PTF8fG51bU1vbnRoc1sxXSE9PTE/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLW11bHRpIik7aW5zdC5kcERpdlsodGhpcy5fZ2V0KGluc3QsImlzUlRMIik/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLXJ0bCIpO2lmKGluc3Q9PT0kLmRhdGVwaWNrZXIuX2N1ckluc3QmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fc2hvdWxkRm9jdXNJbnB1dChpbnN0KSl7aW5zdC5pbnB1dC50cmlnZ2VyKCJmb2N1cyIpO30KaWYoaW5zdC55ZWFyc2h0bWwpe29yaWd5ZWFyc2h0bWw9aW5zdC55ZWFyc2h0bWw7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKG9yaWd5ZWFyc2h0bWw9PT1pbnN0LnllYXJzaHRtbCYmaW5zdC55ZWFyc2h0bWwpe2luc3QuZHBEaXYuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhcjpmaXJzdCIpLnJlcGxhY2VXaXRoKGluc3QueWVhcnNodG1sKTt9Cm9yaWd5ZWFyc2h0bWw9aW5zdC55ZWFyc2h0bWw9bnVsbDt9LDApO319LF9zaG91bGRGb2N1c0lucHV0OmZ1bmN0aW9uKGluc3Qpe3JldHVybiBpbnN0LmlucHV0JiZpbnN0LmlucHV0LmlzKCI6dmlzaWJsZSIpJiYhaW5zdC5pbnB1dC5pcygiOmRpc2FibGVkIikmJiFpbnN0LmlucHV0LmlzKCI6Zm9jdXMiKTt9LF9jaGVja09mZnNldDpmdW5jdGlvbihpbnN0LG9mZnNldCxpc0ZpeGVkKXt2YXIgZHBXaWR0aD1pbnN0LmRwRGl2Lm91dGVyV2lkdGgoKSxkcEhlaWdodD1pbnN0LmRwRGl2Lm91dGVySGVpZ2h0KCksaW5wdXRXaWR0aD1pbnN0LmlucHV0P2luc3QuaW5wdXQub3V0ZXJXaWR0aCgpOjAsaW5wdXRIZWlnaHQ9aW5zdC5pbnB1dD9pbnN0LmlucHV0Lm91dGVySGVpZ2h0KCk6MCx2aWV3V2lkdGg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKyhpc0ZpeGVkPzA6JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSx2aWV3SGVpZ2h0PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQrKGlzRml4ZWQ/MDokKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7b2Zmc2V0LmxlZnQtPSh0aGlzLl9nZXQoaW5zdCwiaXNSVEwiKT8oZHBXaWR0aC1pbnB1dFdpZHRoKTowKTtvZmZzZXQubGVmdC09KGlzRml4ZWQmJm9mZnNldC5sZWZ0PT09aW5zdC5pbnB1dC5vZmZzZXQoKS5sZWZ0KT8kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk6MDtvZmZzZXQudG9wLT0oaXNGaXhlZCYmb2Zmc2V0LnRvcD09PShpbnN0LmlucHV0Lm9mZnNldCgpLnRvcCtpbnB1dEhlaWdodCkpPyQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpOjA7b2Zmc2V0LmxlZnQtPU1hdGgubWluKG9mZnNldC5sZWZ0LChvZmZzZXQubGVmdCtkcFdpZHRoPnZpZXdXaWR0aCYmdmlld1dpZHRoPmRwV2lkdGgpP01hdGguYWJzKG9mZnNldC5sZWZ0K2RwV2lkdGgtdmlld1dpZHRoKTowKTtvZmZzZXQudG9wLT1NYXRoLm1pbihvZmZzZXQudG9wLChvZmZzZXQudG9wK2RwSGVpZ2h0PnZpZXdIZWlnaHQmJnZpZXdIZWlnaHQ+ZHBIZWlnaHQpP01hdGguYWJzKGRwSGVpZ2h0K2lucHV0SGVpZ2h0KTowKTtyZXR1cm4gb2Zmc2V0O30sX2ZpbmRQb3M6ZnVuY3Rpb24ob2JqKXt2YXIgcG9zaXRpb24saW5zdD10aGlzLl9nZXRJbnN0KG9iaiksaXNSVEw9dGhpcy5fZ2V0KGluc3QsImlzUlRMIik7d2hpbGUob2JqJiYob2JqLnR5cGU9PT0iaGlkZGVuInx8b2JqLm5vZGVUeXBlIT09MXx8JC5leHByLmZpbHRlcnMuaGlkZGVuKG9iaikpKXtvYmo9b2JqW2lzUlRMPyJwcmV2aW91c1NpYmxpbmciOiJuZXh0U2libGluZyJdO30KcG9zaXRpb249JChvYmopLm9mZnNldCgpO3JldHVybltwb3NpdGlvbi5sZWZ0LHBvc2l0aW9uLnRvcF07fSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24oaW5wdXQpe3ZhciBzaG93QW5pbSxkdXJhdGlvbixwb3N0UHJvY2VzcyxvbkNsb3NlLGluc3Q9dGhpcy5fY3VySW5zdDtpZighaW5zdHx8KGlucHV0JiZpbnN0IT09JC5kYXRhKGlucHV0LCJkYXRlcGlja2VyIikpKXtyZXR1cm47fQppZih0aGlzLl9kYXRlcGlja2VyU2hvd2luZyl7c2hvd0FuaW09dGhpcy5fZ2V0KGluc3QsInNob3dBbmltIik7ZHVyYXRpb249dGhpcy5fZ2V0KGluc3QsImR1cmF0aW9uIik7cG9zdFByb2Nlc3M9ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3RpZHlEaWFsb2coaW5zdCk7fTtpZigkLmVmZmVjdHMmJigkLmVmZmVjdHMuZWZmZWN0W3Nob3dBbmltXXx8JC5lZmZlY3RzW3Nob3dBbmltXSkpe2luc3QuZHBEaXYuaGlkZShzaG93QW5pbSwkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzaG93T3B0aW9ucyIpLGR1cmF0aW9uLHBvc3RQcm9jZXNzKTt9ZWxzZXtpbnN0LmRwRGl2WyhzaG93QW5pbT09PSJzbGlkZURvd24iPyJzbGlkZVVwIjooc2hvd0FuaW09PT0iZmFkZUluIj8iZmFkZU91dCI6ImhpZGUiKSldKChzaG93QW5pbT9kdXJhdGlvbjpudWxsKSxwb3N0UHJvY2Vzcyk7fQppZighc2hvd0FuaW0pe3Bvc3RQcm9jZXNzKCk7fQp0aGlzLl9kYXRlcGlja2VyU2hvd2luZz1mYWxzZTtvbkNsb3NlPXRoaXMuX2dldChpbnN0LCJvbkNsb3NlIik7aWYob25DbG9zZSl7b25DbG9zZS5hcHBseSgoaW5zdC5pbnB1dD9pbnN0LmlucHV0WzBdOm51bGwpLFsoaW5zdC5pbnB1dD9pbnN0LmlucHV0LnZhbCgpOiIiKSxpbnN0XSk7fQp0aGlzLl9sYXN0SW5wdXQ9bnVsbDtpZih0aGlzLl9pbkRpYWxvZyl7dGhpcy5fZGlhbG9nSW5wdXQuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6IjAiLHRvcDoiLTEwMHB4In0pO2lmKCQuYmxvY2tVSSl7JC51bmJsb2NrVUkoKTskKCJib2R5IikuYXBwZW5kKHRoaXMuZHBEaXYpO319CnRoaXMuX2luRGlhbG9nPWZhbHNlO319LF90aWR5RGlhbG9nOmZ1bmN0aW9uKGluc3Qpe2luc3QuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLm9mZigiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKTt9LF9jaGVja0V4dGVybmFsQ2xpY2s6ZnVuY3Rpb24oZXZlbnQpe2lmKCEkLmRhdGVwaWNrZXIuX2N1ckluc3Qpe3JldHVybjt9CnZhciAkdGFyZ2V0PSQoZXZlbnQudGFyZ2V0KSxpbnN0PSQuZGF0ZXBpY2tlci5fZ2V0SW5zdCgkdGFyZ2V0WzBdKTtpZigoKCR0YXJnZXRbMF0uaWQhPT0kLmRhdGVwaWNrZXIuX21haW5EaXZJZCYmJHRhcmdldC5wYXJlbnRzKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT09MCYmISR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiEkdGFyZ2V0LmNsb3Nlc3QoIi4iKyQuZGF0ZXBpY2tlci5fdHJpZ2dlckNsYXNzKS5sZW5ndGgmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiEoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmJC5ibG9ja1VJKSkpfHwoJHRhcmdldC5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT09aW5zdCkpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTt9fSxfYWRqdXN0RGF0ZTpmdW5jdGlvbihpZCxvZmZzZXQscGVyaW9kKXt2YXIgdGFyZ2V0PSQoaWQpLGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO2lmKHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRhcmdldFswXSkpe3JldHVybjt9CnRoaXMuX2FkanVzdEluc3REYXRlKGluc3Qsb2Zmc2V0KwoocGVyaW9kPT09Ik0iP3RoaXMuX2dldChpbnN0LCJzaG93Q3VycmVudEF0UG9zIik6MCkscGVyaW9kKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO30sX2dvdG9Ub2RheTpmdW5jdGlvbihpZCl7dmFyIGRhdGUsdGFyZ2V0PSQoaWQpLGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO2lmKHRoaXMuX2dldChpbnN0LCJnb3RvQ3VycmVudCIpJiZpbnN0LmN1cnJlbnREYXkpe2luc3Quc2VsZWN0ZWREYXk9aW5zdC5jdXJyZW50RGF5O2luc3QuZHJhd01vbnRoPWluc3Quc2VsZWN0ZWRNb250aD1pbnN0LmN1cnJlbnRNb250aDtpbnN0LmRyYXdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyPWluc3QuY3VycmVudFllYXI7fWVsc2V7ZGF0ZT1uZXcgRGF0ZSgpO2luc3Quc2VsZWN0ZWREYXk9ZGF0ZS5nZXREYXRlKCk7aW5zdC5kcmF3TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoPWRhdGUuZ2V0TW9udGgoKTtpbnN0LmRyYXdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyPWRhdGUuZ2V0RnVsbFllYXIoKTt9CnRoaXMuX25vdGlmeUNoYW5nZShpbnN0KTt0aGlzLl9hZGp1c3REYXRlKHRhcmdldCk7fSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKGlkLHNlbGVjdCxwZXJpb2Qpe3ZhciB0YXJnZXQ9JChpZCksaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aW5zdFsic2VsZWN0ZWQiKyhwZXJpb2Q9PT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1pbnN0WyJkcmF3IisocGVyaW9kPT09Ik0iPyJNb250aCI6IlllYXIiKV09cGFyc2VJbnQoc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTt0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7dGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpO30sX3NlbGVjdERheTpmdW5jdGlvbihpZCxtb250aCx5ZWFyLHRkKXt2YXIgaW5zdCx0YXJnZXQ9JChpZCk7aWYoJCh0ZCkuaGFzQ2xhc3ModGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MpfHx0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0YXJnZXRbMF0pKXtyZXR1cm47fQppbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtpbnN0LnNlbGVjdGVkRGF5PWluc3QuY3VycmVudERheT0kKCJhIix0ZCkuaHRtbCgpO2luc3Quc2VsZWN0ZWRNb250aD1pbnN0LmN1cnJlbnRNb250aD1tb250aDtpbnN0LnNlbGVjdGVkWWVhcj1pbnN0LmN1cnJlbnRZZWFyPXllYXI7dGhpcy5fc2VsZWN0RGF0ZShpZCx0aGlzLl9mb3JtYXREYXRlKGluc3QsaW5zdC5jdXJyZW50RGF5LGluc3QuY3VycmVudE1vbnRoLGluc3QuY3VycmVudFllYXIpKTt9LF9jbGVhckRhdGU6ZnVuY3Rpb24oaWQpe3ZhciB0YXJnZXQ9JChpZCk7dGhpcy5fc2VsZWN0RGF0ZSh0YXJnZXQsIiIpO30sX3NlbGVjdERhdGU6ZnVuY3Rpb24oaWQsZGF0ZVN0cil7dmFyIG9uU2VsZWN0LHRhcmdldD0kKGlkKSxpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtkYXRlU3RyPShkYXRlU3RyIT1udWxsP2RhdGVTdHI6dGhpcy5fZm9ybWF0RGF0ZShpbnN0KSk7aWYoaW5zdC5pbnB1dCl7aW5zdC5pbnB1dC52YWwoZGF0ZVN0cik7fQp0aGlzLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7b25TZWxlY3Q9dGhpcy5fZ2V0KGluc3QsIm9uU2VsZWN0Iik7aWYob25TZWxlY3Qpe29uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksW2RhdGVTdHIsaW5zdF0pO31lbHNlIGlmKGluc3QuaW5wdXQpe2luc3QuaW5wdXQudHJpZ2dlcigiY2hhbmdlIik7fQppZihpbnN0LmlubGluZSl7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTt9ZWxzZXt0aGlzLl9oaWRlRGF0ZXBpY2tlcigpO3RoaXMuX2xhc3RJbnB1dD1pbnN0LmlucHV0WzBdO2lmKHR5cGVvZihpbnN0LmlucHV0WzBdKSE9PSJvYmplY3QiKXtpbnN0LmlucHV0LnRyaWdnZXIoImZvY3VzIik7fQp0aGlzLl9sYXN0SW5wdXQ9bnVsbDt9fSxfdXBkYXRlQWx0ZXJuYXRlOmZ1bmN0aW9uKGluc3Qpe3ZhciBhbHRGb3JtYXQsZGF0ZSxkYXRlU3RyLGFsdEZpZWxkPXRoaXMuX2dldChpbnN0LCJhbHRGaWVsZCIpO2lmKGFsdEZpZWxkKXthbHRGb3JtYXQ9dGhpcy5fZ2V0KGluc3QsImFsdEZvcm1hdCIpfHx0aGlzLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpO2RhdGU9dGhpcy5fZ2V0RGF0ZShpbnN0KTtkYXRlU3RyPXRoaXMuZm9ybWF0RGF0ZShhbHRGb3JtYXQsZGF0ZSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpOyQoYWx0RmllbGQpLnZhbChkYXRlU3RyKTt9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKGRhdGUpe3ZhciBkYXk9ZGF0ZS5nZXREYXkoKTtyZXR1cm5bKGRheT4wJiZkYXk8NiksIiJdO30saXNvODYwMVdlZWs6ZnVuY3Rpb24oZGF0ZSl7dmFyIHRpbWUsY2hlY2tEYXRlPW5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtjaGVja0RhdGUuc2V0RGF0ZShjaGVja0RhdGUuZ2V0RGF0ZSgpKzQtKGNoZWNrRGF0ZS5nZXREYXkoKXx8NykpO3RpbWU9Y2hlY2tEYXRlLmdldFRpbWUoKTtjaGVja0RhdGUuc2V0TW9udGgoMCk7Y2hlY2tEYXRlLnNldERhdGUoMSk7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodGltZS1jaGVja0RhdGUpLzg2NDAwMDAwKS83KSsxO30scGFyc2VEYXRlOmZ1bmN0aW9uKGZvcm1hdCx2YWx1ZSxzZXR0aW5ncyl7aWYoZm9ybWF0PT1udWxsfHx2YWx1ZT09bnVsbCl7dGhyb3ciSW52YWxpZCBhcmd1bWVudHMiO30KdmFsdWU9KHR5cGVvZiB2YWx1ZT09PSJvYmplY3QiP3ZhbHVlLnRvU3RyaW5nKCk6dmFsdWUrIiIpO2lmKHZhbHVlPT09IiIpe3JldHVybiBudWxsO30KdmFyIGlGb3JtYXQsZGltLGV4dHJhLGlWYWx1ZT0wLHNob3J0WWVhckN1dG9mZlRlbXA9KHNldHRpbmdzP3NldHRpbmdzLnNob3J0WWVhckN1dG9mZjpudWxsKXx8dGhpcy5fZGVmYXVsdHMuc2hvcnRZZWFyQ3V0b2ZmLHNob3J0WWVhckN1dG9mZj0odHlwZW9mIHNob3J0WWVhckN1dG9mZlRlbXAhPT0ic3RyaW5nIj9zaG9ydFllYXJDdXRvZmZUZW1wOm5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQoc2hvcnRZZWFyQ3V0b2ZmVGVtcCwxMCkpLGRheU5hbWVzU2hvcnQ9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsZGF5TmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxtb250aE5hbWVzU2hvcnQ9KHNldHRpbmdzP3NldHRpbmdzLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LG1vbnRoTmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMseWVhcj0tMSxtb250aD0tMSxkYXk9LTEsZG95PS0xLGxpdGVyYWw9ZmFsc2UsZGF0ZSxsb29rQWhlYWQ9ZnVuY3Rpb24obWF0Y2gpe3ZhciBtYXRjaGVzPShpRm9ybWF0KzE8Zm9ybWF0Lmxlbmd0aCYmZm9ybWF0LmNoYXJBdChpRm9ybWF0KzEpPT09bWF0Y2gpO2lmKG1hdGNoZXMpe2lGb3JtYXQrKzt9CnJldHVybiBtYXRjaGVzO30sZ2V0TnVtYmVyPWZ1bmN0aW9uKG1hdGNoKXt2YXIgaXNEb3VibGVkPWxvb2tBaGVhZChtYXRjaCksc2l6ZT0obWF0Y2g9PT0iQCI/MTQ6KG1hdGNoPT09IiEiPzIwOihtYXRjaD09PSJ5IiYmaXNEb3VibGVkPzQ6KG1hdGNoPT09Im8iPzM6MikpKSksbWluU2l6ZT0obWF0Y2g9PT0ieSI/c2l6ZToxKSxkaWdpdHM9bmV3IFJlZ0V4cCgiXlxcZHsiK21pblNpemUrIiwiK3NpemUrIn0iKSxudW09dmFsdWUuc3Vic3RyaW5nKGlWYWx1ZSkubWF0Y2goZGlnaXRzKTtpZighbnVtKXt0aHJvdyJNaXNzaW5nIG51bWJlciBhdCBwb3NpdGlvbiAiK2lWYWx1ZTt9CmlWYWx1ZSs9bnVtWzBdLmxlbmd0aDtyZXR1cm4gcGFyc2VJbnQobnVtWzBdLDEwKTt9LGdldE5hbWU9ZnVuY3Rpb24obWF0Y2gsc2hvcnROYW1lcyxsb25nTmFtZXMpe3ZhciBpbmRleD0tMSxuYW1lcz0kLm1hcChsb29rQWhlYWQobWF0Y2gpP2xvbmdOYW1lczpzaG9ydE5hbWVzLGZ1bmN0aW9uKHYsayl7cmV0dXJuW1trLHZdXTt9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuLShhWzFdLmxlbmd0aC1iWzFdLmxlbmd0aCk7fSk7JC5lYWNoKG5hbWVzLGZ1bmN0aW9uKGkscGFpcil7dmFyIG5hbWU9cGFpclsxXTtpZih2YWx1ZS5zdWJzdHIoaVZhbHVlLG5hbWUubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT09bmFtZS50b0xvd2VyQ2FzZSgpKXtpbmRleD1wYWlyWzBdO2lWYWx1ZSs9bmFtZS5sZW5ndGg7cmV0dXJuIGZhbHNlO319KTtpZihpbmRleCE9PS0xKXtyZXR1cm4gaW5kZXgrMTt9ZWxzZXt0aHJvdyJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIitpVmFsdWU7fX0sY2hlY2tMaXRlcmFsPWZ1bmN0aW9uKCl7aWYodmFsdWUuY2hhckF0KGlWYWx1ZSkhPT1mb3JtYXQuY2hhckF0KGlGb3JtYXQpKXt0aHJvdyJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gIitpVmFsdWU7fQppVmFsdWUrKzt9O2ZvcihpRm9ybWF0PTA7aUZvcm1hdDxmb3JtYXQubGVuZ3RoO2lGb3JtYXQrKyl7aWYobGl0ZXJhbCl7aWYoZm9ybWF0LmNoYXJBdChpRm9ybWF0KT09PSInIiYmIWxvb2tBaGVhZCgiJyIpKXtsaXRlcmFsPWZhbHNlO31lbHNle2NoZWNrTGl0ZXJhbCgpO319ZWxzZXtzd2l0Y2goZm9ybWF0LmNoYXJBdChpRm9ybWF0KSl7Y2FzZSJkIjpkYXk9Z2V0TnVtYmVyKCJkIik7YnJlYWs7Y2FzZSJEIjpnZXROYW1lKCJEIixkYXlOYW1lc1Nob3J0LGRheU5hbWVzKTticmVhaztjYXNlIm8iOmRveT1nZXROdW1iZXIoIm8iKTticmVhaztjYXNlIm0iOm1vbnRoPWdldE51bWJlcigibSIpO2JyZWFrO2Nhc2UiTSI6bW9udGg9Z2V0TmFtZSgiTSIsbW9udGhOYW1lc1Nob3J0LG1vbnRoTmFtZXMpO2JyZWFrO2Nhc2UieSI6eWVhcj1nZXROdW1iZXIoInkiKTticmVhaztjYXNlIkAiOmRhdGU9bmV3IERhdGUoZ2V0TnVtYmVyKCJAIikpO3llYXI9ZGF0ZS5nZXRGdWxsWWVhcigpO21vbnRoPWRhdGUuZ2V0TW9udGgoKSsxO2RheT1kYXRlLmdldERhdGUoKTticmVhaztjYXNlIiEiOmRhdGU9bmV3IERhdGUoKGdldE51bWJlcigiISIpLXRoaXMuX3RpY2tzVG8xOTcwKS8xMDAwMCk7eWVhcj1kYXRlLmdldEZ1bGxZZWFyKCk7bW9udGg9ZGF0ZS5nZXRNb250aCgpKzE7ZGF5PWRhdGUuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2UiJyI6aWYobG9va0FoZWFkKCInIikpe2NoZWNrTGl0ZXJhbCgpO31lbHNle2xpdGVyYWw9dHJ1ZTt9CmJyZWFrO2RlZmF1bHQ6Y2hlY2tMaXRlcmFsKCk7fX19CmlmKGlWYWx1ZTx2YWx1ZS5sZW5ndGgpe2V4dHJhPXZhbHVlLnN1YnN0cihpVmFsdWUpO2lmKCEvXlxzKy8udGVzdChleHRyYSkpe3Rocm93IkV4dHJhL3VucGFyc2VkIGNoYXJhY3RlcnMgZm91bmQgaW4gZGF0ZTogIitleHRyYTt9fQppZih5ZWFyPT09LTEpe3llYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO31lbHNlIGlmKHllYXI8MTAwKXt5ZWFyKz1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCktbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCsKKHllYXI8PXNob3J0WWVhckN1dG9mZj8wOi0xMDApO30KaWYoZG95Pi0xKXttb250aD0xO2RheT1kb3k7ZG97ZGltPXRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsbW9udGgtMSk7aWYoZGF5PD1kaW0pe2JyZWFrO30KbW9udGgrKztkYXktPWRpbTt9d2hpbGUodHJ1ZSk7fQpkYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgtMSxkYXkpKTtpZihkYXRlLmdldEZ1bGxZZWFyKCkhPT15ZWFyfHxkYXRlLmdldE1vbnRoKCkrMSE9PW1vbnRofHxkYXRlLmdldERhdGUoKSE9PWRheSl7dGhyb3ciSW52YWxpZCBkYXRlIjt9CnJldHVybiBkYXRlO30sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSUNLUzoiISIsVElNRVNUQU1QOiJAIixXM0M6Inl5LW1tLWRkIixfdGlja3NUbzE5NzA6KCgoMTk3MC0xKSozNjUrTWF0aC5mbG9vcigxOTcwLzQpLU1hdGguZmxvb3IoMTk3MC8xMDApKwpNYXRoLmZsb29yKDE5NzAvNDAwKSkqMjQqNjAqNjAqMTAwMDAwMDApLGZvcm1hdERhdGU6ZnVuY3Rpb24oZm9ybWF0LGRhdGUsc2V0dGluZ3Mpe2lmKCFkYXRlKXtyZXR1cm4iIjt9CnZhciBpRm9ybWF0LGRheU5hbWVzU2hvcnQ9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsZGF5TmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxtb250aE5hbWVzU2hvcnQ9KHNldHRpbmdzP3NldHRpbmdzLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LG1vbnRoTmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMsbG9va0FoZWFkPWZ1bmN0aW9uKG1hdGNoKXt2YXIgbWF0Y2hlcz0oaUZvcm1hdCsxPGZvcm1hdC5sZW5ndGgmJmZvcm1hdC5jaGFyQXQoaUZvcm1hdCsxKT09PW1hdGNoKTtpZihtYXRjaGVzKXtpRm9ybWF0Kys7fQpyZXR1cm4gbWF0Y2hlczt9LGZvcm1hdE51bWJlcj1mdW5jdGlvbihtYXRjaCx2YWx1ZSxsZW4pe3ZhciBudW09IiIrdmFsdWU7aWYobG9va0FoZWFkKG1hdGNoKSl7d2hpbGUobnVtLmxlbmd0aDxsZW4pe251bT0iMCIrbnVtO319CnJldHVybiBudW07fSxmb3JtYXROYW1lPWZ1bmN0aW9uKG1hdGNoLHZhbHVlLHNob3J0TmFtZXMsbG9uZ05hbWVzKXtyZXR1cm4obG9va0FoZWFkKG1hdGNoKT9sb25nTmFtZXNbdmFsdWVdOnNob3J0TmFtZXNbdmFsdWVdKTt9LG91dHB1dD0iIixsaXRlcmFsPWZhbHNlO2lmKGRhdGUpe2ZvcihpRm9ybWF0PTA7aUZvcm1hdDxmb3JtYXQubGVuZ3RoO2lGb3JtYXQrKyl7aWYobGl0ZXJhbCl7aWYoZm9ybWF0LmNoYXJBdChpRm9ybWF0KT09PSInIiYmIWxvb2tBaGVhZCgiJyIpKXtsaXRlcmFsPWZhbHNlO31lbHNle291dHB1dCs9Zm9ybWF0LmNoYXJBdChpRm9ybWF0KTt9fWVsc2V7c3dpdGNoKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpe2Nhc2UiZCI6b3V0cHV0Kz1mb3JtYXROdW1iZXIoImQiLGRhdGUuZ2V0RGF0ZSgpLDIpO2JyZWFrO2Nhc2UiRCI6b3V0cHV0Kz1mb3JtYXROYW1lKCJEIixkYXRlLmdldERheSgpLGRheU5hbWVzU2hvcnQsZGF5TmFtZXMpO2JyZWFrO2Nhc2UibyI6b3V0cHV0Kz1mb3JtYXROdW1iZXIoIm8iLE1hdGgucm91bmQoKG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkpLmdldFRpbWUoKS1uZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksMCwwKS5nZXRUaW1lKCkpLzg2NDAwMDAwKSwzKTticmVhaztjYXNlIm0iOm91dHB1dCs9Zm9ybWF0TnVtYmVyKCJtIixkYXRlLmdldE1vbnRoKCkrMSwyKTticmVhaztjYXNlIk0iOm91dHB1dCs9Zm9ybWF0TmFtZSgiTSIsZGF0ZS5nZXRNb250aCgpLG1vbnRoTmFtZXNTaG9ydCxtb250aE5hbWVzKTticmVhaztjYXNlInkiOm91dHB1dCs9KGxvb2tBaGVhZCgieSIpP2RhdGUuZ2V0RnVsbFllYXIoKTooZGF0ZS5nZXRGdWxsWWVhcigpJTEwMDwxMD8iMCI6IiIpK2RhdGUuZ2V0RnVsbFllYXIoKSUxMDApO2JyZWFrO2Nhc2UiQCI6b3V0cHV0Kz1kYXRlLmdldFRpbWUoKTticmVhaztjYXNlIiEiOm91dHB1dCs9ZGF0ZS5nZXRUaW1lKCkqMTAwMDArdGhpcy5fdGlja3NUbzE5NzA7YnJlYWs7Y2FzZSInIjppZihsb29rQWhlYWQoIiciKSl7b3V0cHV0Kz0iJyI7fWVsc2V7bGl0ZXJhbD10cnVlO30KYnJlYWs7ZGVmYXVsdDpvdXRwdXQrPWZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7fX19fQpyZXR1cm4gb3V0cHV0O30sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24oZm9ybWF0KXt2YXIgaUZvcm1hdCxjaGFycz0iIixsaXRlcmFsPWZhbHNlLGxvb2tBaGVhZD1mdW5jdGlvbihtYXRjaCl7dmFyIG1hdGNoZXM9KGlGb3JtYXQrMTxmb3JtYXQubGVuZ3RoJiZmb3JtYXQuY2hhckF0KGlGb3JtYXQrMSk9PT1tYXRjaCk7aWYobWF0Y2hlcyl7aUZvcm1hdCsrO30KcmV0dXJuIG1hdGNoZXM7fTtmb3IoaUZvcm1hdD0wO2lGb3JtYXQ8Zm9ybWF0Lmxlbmd0aDtpRm9ybWF0Kyspe2lmKGxpdGVyYWwpe2lmKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk9PT0iJyImJiFsb29rQWhlYWQoIiciKSl7bGl0ZXJhbD1mYWxzZTt9ZWxzZXtjaGFycys9Zm9ybWF0LmNoYXJBdChpRm9ybWF0KTt9fWVsc2V7c3dpdGNoKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpe2Nhc2UiZCI6Y2FzZSJtIjpjYXNlInkiOmNhc2UiQCI6Y2hhcnMrPSIwMTIzNDU2Nzg5IjticmVhaztjYXNlIkQiOmNhc2UiTSI6cmV0dXJuIG51bGw7Y2FzZSInIjppZihsb29rQWhlYWQoIiciKSl7Y2hhcnMrPSInIjt9ZWxzZXtsaXRlcmFsPXRydWU7fQpicmVhaztkZWZhdWx0OmNoYXJzKz1mb3JtYXQuY2hhckF0KGlGb3JtYXQpO319fQpyZXR1cm4gY2hhcnM7fSxfZ2V0OmZ1bmN0aW9uKGluc3QsbmFtZSl7cmV0dXJuIGluc3Quc2V0dGluZ3NbbmFtZV0hPT11bmRlZmluZWQ/aW5zdC5zZXR0aW5nc1tuYW1lXTp0aGlzLl9kZWZhdWx0c1tuYW1lXTt9LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKGluc3Qsbm9EZWZhdWx0KXtpZihpbnN0LmlucHV0LnZhbCgpPT09aW5zdC5sYXN0VmFsKXtyZXR1cm47fQp2YXIgZGF0ZUZvcm1hdD10aGlzLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpLGRhdGVzPWluc3QubGFzdFZhbD1pbnN0LmlucHV0P2luc3QuaW5wdXQudmFsKCk6bnVsbCxkZWZhdWx0RGF0ZT10aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KSxkYXRlPWRlZmF1bHREYXRlLHNldHRpbmdzPXRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KTt0cnl7ZGF0ZT10aGlzLnBhcnNlRGF0ZShkYXRlRm9ybWF0LGRhdGVzLHNldHRpbmdzKXx8ZGVmYXVsdERhdGU7fWNhdGNoKGV2ZW50KXtkYXRlcz0obm9EZWZhdWx0PyIiOmRhdGVzKTt9Cmluc3Quc2VsZWN0ZWREYXk9ZGF0ZS5nZXREYXRlKCk7aW5zdC5kcmF3TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoPWRhdGUuZ2V0TW9udGgoKTtpbnN0LmRyYXdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyPWRhdGUuZ2V0RnVsbFllYXIoKTtpbnN0LmN1cnJlbnREYXk9KGRhdGVzP2RhdGUuZ2V0RGF0ZSgpOjApO2luc3QuY3VycmVudE1vbnRoPShkYXRlcz9kYXRlLmdldE1vbnRoKCk6MCk7aW5zdC5jdXJyZW50WWVhcj0oZGF0ZXM/ZGF0ZS5nZXRGdWxsWWVhcigpOjApO3RoaXMuX2FkanVzdEluc3REYXRlKGluc3QpO30sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKGluc3Qpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LHRoaXMuX2RldGVybWluZURhdGUoaW5zdCx0aGlzLl9nZXQoaW5zdCwiZGVmYXVsdERhdGUiKSxuZXcgRGF0ZSgpKSk7fSxfZGV0ZXJtaW5lRGF0ZTpmdW5jdGlvbihpbnN0LGRhdGUsZGVmYXVsdERhdGUpe3ZhciBvZmZzZXROdW1lcmljPWZ1bmN0aW9uKG9mZnNldCl7dmFyIGRhdGU9bmV3IERhdGUoKTtkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkrb2Zmc2V0KTtyZXR1cm4gZGF0ZTt9LG9mZnNldFN0cmluZz1mdW5jdGlvbihvZmZzZXQpe3RyeXtyZXR1cm4gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJkYXRlRm9ybWF0Iiksb2Zmc2V0LCQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKTt9CmNhdGNoKGUpe30KdmFyIGRhdGU9KG9mZnNldC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pPyQuZGF0ZXBpY2tlci5fZ2V0RGF0ZShpbnN0KTpudWxsKXx8bmV3IERhdGUoKSx5ZWFyPWRhdGUuZ2V0RnVsbFllYXIoKSxtb250aD1kYXRlLmdldE1vbnRoKCksZGF5PWRhdGUuZ2V0RGF0ZSgpLHBhdHRlcm49LyhbK1wtXT9bMC05XSspXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csbWF0Y2hlcz1wYXR0ZXJuLmV4ZWMob2Zmc2V0KTt3aGlsZShtYXRjaGVzKXtzd2l0Y2gobWF0Y2hlc1syXXx8ImQiKXtjYXNlImQiOmNhc2UiRCI6ZGF5Kz1wYXJzZUludChtYXRjaGVzWzFdLDEwKTticmVhaztjYXNlInciOmNhc2UiVyI6ZGF5Kz1wYXJzZUludChtYXRjaGVzWzFdLDEwKSo3O2JyZWFrO2Nhc2UibSI6Y2FzZSJNIjptb250aCs9cGFyc2VJbnQobWF0Y2hlc1sxXSwxMCk7ZGF5PU1hdGgubWluKGRheSwkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsbW9udGgpKTticmVhaztjYXNlInkiOmNhc2UiWSI6eWVhcis9cGFyc2VJbnQobWF0Y2hlc1sxXSwxMCk7ZGF5PU1hdGgubWluKGRheSwkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsbW9udGgpKTticmVhazt9Cm1hdGNoZXM9cGF0dGVybi5leGVjKG9mZnNldCk7fQpyZXR1cm4gbmV3IERhdGUoeWVhcixtb250aCxkYXkpO30sbmV3RGF0ZT0oZGF0ZT09bnVsbHx8ZGF0ZT09PSIiP2RlZmF1bHREYXRlOih0eXBlb2YgZGF0ZT09PSJzdHJpbmciP29mZnNldFN0cmluZyhkYXRlKToodHlwZW9mIGRhdGU9PT0ibnVtYmVyIj8oaXNOYU4oZGF0ZSk/ZGVmYXVsdERhdGU6b2Zmc2V0TnVtZXJpYyhkYXRlKSk6bmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpKSkpO25ld0RhdGU9KG5ld0RhdGUmJm5ld0RhdGUudG9TdHJpbmcoKT09PSJJbnZhbGlkIERhdGUiP2RlZmF1bHREYXRlOm5ld0RhdGUpO2lmKG5ld0RhdGUpe25ld0RhdGUuc2V0SG91cnMoMCk7bmV3RGF0ZS5zZXRNaW51dGVzKDApO25ld0RhdGUuc2V0U2Vjb25kcygwKTtuZXdEYXRlLnNldE1pbGxpc2Vjb25kcygwKTt9CnJldHVybiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXdEYXRlKTt9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbihkYXRlKXtpZighZGF0ZSl7cmV0dXJuIG51bGw7fQpkYXRlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKT4xMj9kYXRlLmdldEhvdXJzKCkrMjowKTtyZXR1cm4gZGF0ZTt9LF9zZXREYXRlOmZ1bmN0aW9uKGluc3QsZGF0ZSxub0NoYW5nZSl7dmFyIGNsZWFyPSFkYXRlLG9yaWdNb250aD1pbnN0LnNlbGVjdGVkTW9udGgsb3JpZ1llYXI9aW5zdC5zZWxlY3RlZFllYXIsbmV3RGF0ZT10aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LHRoaXMuX2RldGVybWluZURhdGUoaW5zdCxkYXRlLG5ldyBEYXRlKCkpKTtpbnN0LnNlbGVjdGVkRGF5PWluc3QuY3VycmVudERheT1uZXdEYXRlLmdldERhdGUoKTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9aW5zdC5jdXJyZW50TW9udGg9bmV3RGF0ZS5nZXRNb250aCgpO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9aW5zdC5jdXJyZW50WWVhcj1uZXdEYXRlLmdldEZ1bGxZZWFyKCk7aWYoKG9yaWdNb250aCE9PWluc3Quc2VsZWN0ZWRNb250aHx8b3JpZ1llYXIhPT1pbnN0LnNlbGVjdGVkWWVhcikmJiFub0NoYW5nZSl7dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpO30KdGhpcy5fYWRqdXN0SW5zdERhdGUoaW5zdCk7aWYoaW5zdC5pbnB1dCl7aW5zdC5pbnB1dC52YWwoY2xlYXI/IiI6dGhpcy5fZm9ybWF0RGF0ZShpbnN0KSk7fX0sX2dldERhdGU6ZnVuY3Rpb24oaW5zdCl7dmFyIHN0YXJ0RGF0ZT0oIWluc3QuY3VycmVudFllYXJ8fChpbnN0LmlucHV0JiZpbnN0LmlucHV0LnZhbCgpPT09IiIpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5jdXJyZW50WWVhcixpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnREYXkpKSk7cmV0dXJuIHN0YXJ0RGF0ZTt9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbihpbnN0KXt2YXIgc3RlcE1vbnRocz10aGlzLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpLGlkPSIjIitpbnN0LmlkLnJlcGxhY2UoL1xcXFwvZywiXFwiKTtpbnN0LmRwRGl2LmZpbmQoIltkYXRhLWhhbmRsZXJdIikubWFwKGZ1bmN0aW9uKCl7dmFyIGhhbmRsZXI9e3ByZXY6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoaWQsLXN0ZXBNb250aHMsIk0iKTt9LG5leHQ6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoaWQsK3N0ZXBNb250aHMsIk0iKTt9LGhpZGU6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7fSx0b2RheTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGlkKTt9LHNlbGVjdERheTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGlkLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1tb250aCIpLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS15ZWFyIiksdGhpcyk7cmV0dXJuIGZhbHNlO30sc2VsZWN0TW9udGg6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihpZCx0aGlzLCJNIik7cmV0dXJuIGZhbHNlO30sc2VsZWN0WWVhcjpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGlkLHRoaXMsIlkiKTtyZXR1cm4gZmFsc2U7fX07JCh0aGlzKS5vbih0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1ldmVudCIpLGhhbmRsZXJbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSk7fSk7fSxfZ2VuZXJhdGVIVE1MOmZ1bmN0aW9uKGluc3Qpe3ZhciBtYXhEcmF3LHByZXZUZXh0LHByZXYsbmV4dFRleHQsbmV4dCxjdXJyZW50VGV4dCxnb3RvRGF0ZSxjb250cm9scyxidXR0b25QYW5lbCxmaXJzdERheSxzaG93V2VlayxkYXlOYW1lcyxkYXlOYW1lc01pbixtb250aE5hbWVzLG1vbnRoTmFtZXNTaG9ydCxiZWZvcmVTaG93RGF5LHNob3dPdGhlck1vbnRocyxzZWxlY3RPdGhlck1vbnRocyxkZWZhdWx0RGF0ZSxodG1sLGRvdyxyb3csZ3JvdXAsY29sLHNlbGVjdGVkRGF0ZSxjb3JuZXJDbGFzcyxjYWxlbmRlcix0aGVhZCxkYXksZGF5c0luTW9udGgsbGVhZERheXMsY3VyUm93cyxudW1Sb3dzLHByaW50RGF0ZSxkUm93LHRib2R5LGRheVNldHRpbmdzLG90aGVyTW9udGgsdW5zZWxlY3RhYmxlLHRlbXBEYXRlPW5ldyBEYXRlKCksdG9kYXk9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodGVtcERhdGUuZ2V0RnVsbFllYXIoKSx0ZW1wRGF0ZS5nZXRNb250aCgpLHRlbXBEYXRlLmdldERhdGUoKSkpLGlzUlRMPXRoaXMuX2dldChpbnN0LCJpc1JUTCIpLHNob3dCdXR0b25QYW5lbD10aGlzLl9nZXQoaW5zdCwic2hvd0J1dHRvblBhbmVsIiksaGlkZUlmTm9QcmV2TmV4dD10aGlzLl9nZXQoaW5zdCwiaGlkZUlmTm9QcmV2TmV4dCIpLG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ9dGhpcy5fZ2V0KGluc3QsIm5hdmlnYXRpb25Bc0RhdGVGb3JtYXQiKSxudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCksc2hvd0N1cnJlbnRBdFBvcz10aGlzLl9nZXQoaW5zdCwic2hvd0N1cnJlbnRBdFBvcyIpLHN0ZXBNb250aHM9dGhpcy5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSxpc011bHRpTW9udGg9KG51bU1vbnRoc1swXSE9PTF8fG51bU1vbnRoc1sxXSE9PTEpLGN1cnJlbnREYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCghaW5zdC5jdXJyZW50RGF5P25ldyBEYXRlKDk5OTksOSw5KTpuZXcgRGF0ZShpbnN0LmN1cnJlbnRZZWFyLGluc3QuY3VycmVudE1vbnRoLGluc3QuY3VycmVudERheSkpKSxtaW5EYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIiksbWF4RGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1heCIpLGRyYXdNb250aD1pbnN0LmRyYXdNb250aC1zaG93Q3VycmVudEF0UG9zLGRyYXdZZWFyPWluc3QuZHJhd1llYXI7aWYoZHJhd01vbnRoPDApe2RyYXdNb250aCs9MTI7ZHJhd1llYXItLTt9CmlmKG1heERhdGUpe21heERyYXc9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobWF4RGF0ZS5nZXRGdWxsWWVhcigpLG1heERhdGUuZ2V0TW9udGgoKS0obnVtTW9udGhzWzBdKm51bU1vbnRoc1sxXSkrMSxtYXhEYXRlLmdldERhdGUoKSkpO21heERyYXc9KG1pbkRhdGUmJm1heERyYXc8bWluRGF0ZT9taW5EYXRlOm1heERyYXcpO3doaWxlKHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aCwxKSk+bWF4RHJhdyl7ZHJhd01vbnRoLS07aWYoZHJhd01vbnRoPDApe2RyYXdNb250aD0xMTtkcmF3WWVhci0tO319fQppbnN0LmRyYXdNb250aD1kcmF3TW9udGg7aW5zdC5kcmF3WWVhcj1kcmF3WWVhcjtwcmV2VGV4dD10aGlzLl9nZXQoaW5zdCwicHJldlRleHQiKTtwcmV2VGV4dD0oIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ/cHJldlRleHQ6dGhpcy5mb3JtYXREYXRlKHByZXZUZXh0LHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aC1zdGVwTW9udGhzLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTtwcmV2PSh0aGlzLl9jYW5BZGp1c3RNb250aChpbnN0LC0xLGRyYXdZZWFyLGRyYXdNb250aCk/IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdwcmV2JyBkYXRhLWV2ZW50PSdjbGljayciKyIgdGl0bGU9JyIrcHJldlRleHQrIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoaXNSVEw/ImUiOiJ3IikrIic+IitwcmV2VGV4dCsiPC9zcGFuPjwvYT4iOihoaWRlSWZOb1ByZXZOZXh0PyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK3ByZXZUZXh0KyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKGlzUlRMPyJlIjoidyIpKyInPiIrcHJldlRleHQrIjwvc3Bhbj48L2E+IikpO25leHRUZXh0PXRoaXMuX2dldChpbnN0LCJuZXh0VGV4dCIpO25leHRUZXh0PSghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdD9uZXh0VGV4dDp0aGlzLmZvcm1hdERhdGUobmV4dFRleHQsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsZHJhd01vbnRoK3N0ZXBNb250aHMsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpO25leHQ9KHRoaXMuX2NhbkFkanVzdE1vbnRoKGluc3QsKzEsZHJhd1llYXIsZHJhd01vbnRoKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J25leHQnIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIiB0aXRsZT0nIituZXh0VGV4dCsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhpc1JUTD8idyI6ImUiKSsiJz4iK25leHRUZXh0KyI8L3NwYW4+PC9hPiI6KGhpZGVJZk5vUHJldk5leHQ/IiI6IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrbmV4dFRleHQrIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoaXNSVEw/InciOiJlIikrIic+IituZXh0VGV4dCsiPC9zcGFuPjwvYT4iKSk7Y3VycmVudFRleHQ9dGhpcy5fZ2V0KGluc3QsImN1cnJlbnRUZXh0Iik7Z290b0RhdGU9KHRoaXMuX2dldChpbnN0LCJnb3RvQ3VycmVudCIpJiZpbnN0LmN1cnJlbnREYXk/Y3VycmVudERhdGU6dG9kYXkpO2N1cnJlbnRUZXh0PSghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdD9jdXJyZW50VGV4dDp0aGlzLmZvcm1hdERhdGUoY3VycmVudFRleHQsZ290b0RhdGUsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7Y29udHJvbHM9KCFpbnN0LmlubGluZT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNsb3NlIHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktcHJpbWFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J2hpZGUnIGRhdGEtZXZlbnQ9J2NsaWNrJz4iKwp0aGlzLl9nZXQoaW5zdCwiY2xvc2VUZXh0IikrIjwvYnV0dG9uPiI6IiIpO2J1dHRvblBhbmVsPShzaG93QnV0dG9uUGFuZWwpPyI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQnPiIrKGlzUlRMP2NvbnRyb2xzOiIiKSsKKHRoaXMuX2lzSW5SYW5nZShpbnN0LGdvdG9EYXRlKT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snIisiPiIrY3VycmVudFRleHQrIjwvYnV0dG9uPiI6IiIpKyhpc1JUTD8iIjpjb250cm9scykrIjwvZGl2PiI6IiI7Zmlyc3REYXk9cGFyc2VJbnQodGhpcy5fZ2V0KGluc3QsImZpcnN0RGF5IiksMTApO2ZpcnN0RGF5PShpc05hTihmaXJzdERheSk/MDpmaXJzdERheSk7c2hvd1dlZWs9dGhpcy5fZ2V0KGluc3QsInNob3dXZWVrIik7ZGF5TmFtZXM9dGhpcy5fZ2V0KGluc3QsImRheU5hbWVzIik7ZGF5TmFtZXNNaW49dGhpcy5fZ2V0KGluc3QsImRheU5hbWVzTWluIik7bW9udGhOYW1lcz10aGlzLl9nZXQoaW5zdCwibW9udGhOYW1lcyIpO21vbnRoTmFtZXNTaG9ydD10aGlzLl9nZXQoaW5zdCwibW9udGhOYW1lc1Nob3J0Iik7YmVmb3JlU2hvd0RheT10aGlzLl9nZXQoaW5zdCwiYmVmb3JlU2hvd0RheSIpO3Nob3dPdGhlck1vbnRocz10aGlzLl9nZXQoaW5zdCwic2hvd090aGVyTW9udGhzIik7c2VsZWN0T3RoZXJNb250aHM9dGhpcy5fZ2V0KGluc3QsInNlbGVjdE90aGVyTW9udGhzIik7ZGVmYXVsdERhdGU9dGhpcy5fZ2V0RGVmYXVsdERhdGUoaW5zdCk7aHRtbD0iIjtmb3Iocm93PTA7cm93PG51bU1vbnRoc1swXTtyb3crKyl7Z3JvdXA9IiI7dGhpcy5tYXhSb3dzPTQ7Zm9yKGNvbD0wO2NvbDxudW1Nb250aHNbMV07Y29sKyspe3NlbGVjdGVkRGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhcixkcmF3TW9udGgsaW5zdC5zZWxlY3RlZERheSkpO2Nvcm5lckNsYXNzPSIgdWktY29ybmVyLWFsbCI7Y2FsZW5kZXI9IiI7aWYoaXNNdWx0aU1vbnRoKXtjYWxlbmRlcis9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXAiO2lmKG51bU1vbnRoc1sxXT4xKXtzd2l0Y2goY29sKXtjYXNlIDA6Y2FsZW5kZXIrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1maXJzdCI7Y29ybmVyQ2xhc3M9IiB1aS1jb3JuZXItIisoaXNSVEw/InJpZ2h0IjoibGVmdCIpO2JyZWFrO2Nhc2UgbnVtTW9udGhzWzFdLTE6Y2FsZW5kZXIrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1sYXN0Ijtjb3JuZXJDbGFzcz0iIHVpLWNvcm5lci0iKyhpc1JUTD8ibGVmdCI6InJpZ2h0Iik7YnJlYWs7ZGVmYXVsdDpjYWxlbmRlcis9IiB1aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZSI7Y29ybmVyQ2xhc3M9IiI7YnJlYWs7fX0KY2FsZW5kZXIrPSInPiI7fQpjYWxlbmRlcis9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4Iitjb3JuZXJDbGFzcysiJz4iKwooL2FsbHxsZWZ0Ly50ZXN0KGNvcm5lckNsYXNzKSYmcm93PT09MD8oaXNSVEw/bmV4dDpwcmV2KToiIikrCigvYWxsfHJpZ2h0Ly50ZXN0KGNvcm5lckNsYXNzKSYmcm93PT09MD8oaXNSVEw/cHJldjpuZXh0KToiIikrCnRoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGluc3QsZHJhd01vbnRoLGRyYXdZZWFyLG1pbkRhdGUsbWF4RGF0ZSxyb3c+MHx8Y29sPjAsbW9udGhOYW1lcyxtb250aE5hbWVzU2hvcnQpKyI8L2Rpdj48dGFibGUgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2FsZW5kYXInPjx0aGVhZD4iKyI8dHI+Ijt0aGVhZD0oc2hvd1dlZWs/Ijx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQoaW5zdCwid2Vla0hlYWRlciIpKyI8L3RoPiI6IiIpO2Zvcihkb3c9MDtkb3c8Nztkb3crKyl7ZGF5PShkb3crZmlyc3REYXkpJTc7dGhlYWQrPSI8dGggc2NvcGU9J2NvbCciKygoZG93K2ZpcnN0RGF5KzYpJTc+PTU/IiBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWVuZCciOiIiKSsiPiIrIjxzcGFuIHRpdGxlPSciK2RheU5hbWVzW2RheV0rIic+IitkYXlOYW1lc01pbltkYXldKyI8L3NwYW4+PC90aD4iO30KY2FsZW5kZXIrPXRoZWFkKyI8L3RyPjwvdGhlYWQ+PHRib2R5PiI7ZGF5c0luTW9udGg9dGhpcy5fZ2V0RGF5c0luTW9udGgoZHJhd1llYXIsZHJhd01vbnRoKTtpZihkcmF3WWVhcj09PWluc3Quc2VsZWN0ZWRZZWFyJiZkcmF3TW9udGg9PT1pbnN0LnNlbGVjdGVkTW9udGgpe2luc3Quc2VsZWN0ZWREYXk9TWF0aC5taW4oaW5zdC5zZWxlY3RlZERheSxkYXlzSW5Nb250aCk7fQpsZWFkRGF5cz0odGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKGRyYXdZZWFyLGRyYXdNb250aCktZmlyc3REYXkrNyklNztjdXJSb3dzPU1hdGguY2VpbCgobGVhZERheXMrZGF5c0luTW9udGgpLzcpO251bVJvd3M9KGlzTXVsdGlNb250aD90aGlzLm1heFJvd3M+Y3VyUm93cz90aGlzLm1heFJvd3M6Y3VyUm93czpjdXJSb3dzKTt0aGlzLm1heFJvd3M9bnVtUm93cztwcmludERhdGU9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsZHJhd01vbnRoLDEtbGVhZERheXMpKTtmb3IoZFJvdz0wO2RSb3c8bnVtUm93cztkUm93Kyspe2NhbGVuZGVyKz0iPHRyPiI7dGJvZHk9KCFzaG93V2Vlaz8iIjoiPHRkIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz4iKwp0aGlzLl9nZXQoaW5zdCwiY2FsY3VsYXRlV2VlayIpKHByaW50RGF0ZSkrIjwvdGQ+Iik7Zm9yKGRvdz0wO2Rvdzw3O2RvdysrKXtkYXlTZXR0aW5ncz0oYmVmb3JlU2hvd0RheT9iZWZvcmVTaG93RGF5LmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksW3ByaW50RGF0ZV0pOlt0cnVlLCIiXSk7b3RoZXJNb250aD0ocHJpbnREYXRlLmdldE1vbnRoKCkhPT1kcmF3TW9udGgpO3Vuc2VsZWN0YWJsZT0ob3RoZXJNb250aCYmIXNlbGVjdE90aGVyTW9udGhzKXx8IWRheVNldHRpbmdzWzBdfHwobWluRGF0ZSYmcHJpbnREYXRlPG1pbkRhdGUpfHwobWF4RGF0ZSYmcHJpbnREYXRlPm1heERhdGUpO3Rib2R5Kz0iPHRkIGNsYXNzPSciKwooKGRvdytmaXJzdERheSs2KSU3Pj01PyIgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCI6IiIpKwoob3RoZXJNb250aD8iIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGgiOiIiKSsKKChwcmludERhdGUuZ2V0VGltZSgpPT09c2VsZWN0ZWREYXRlLmdldFRpbWUoKSYmZHJhd01vbnRoPT09aW5zdC5zZWxlY3RlZE1vbnRoJiZpbnN0Ll9rZXlFdmVudCl8fChkZWZhdWx0RGF0ZS5nZXRUaW1lKCk9PT1wcmludERhdGUuZ2V0VGltZSgpJiZkZWZhdWx0RGF0ZS5nZXRUaW1lKCk9PT1zZWxlY3RlZERhdGUuZ2V0VGltZSgpKT8iICIrdGhpcy5fZGF5T3ZlckNsYXNzOiIiKSsKKHVuc2VsZWN0YWJsZT8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKwoob3RoZXJNb250aCYmIXNob3dPdGhlck1vbnRocz8iIjoiICIrZGF5U2V0dGluZ3NbMV0rCihwcmludERhdGUuZ2V0VGltZSgpPT09Y3VycmVudERhdGUuZ2V0VGltZSgpPyIgIit0aGlzLl9jdXJyZW50Q2xhc3M6IiIpKwoocHJpbnREYXRlLmdldFRpbWUoKT09PXRvZGF5LmdldFRpbWUoKT8iIHVpLWRhdGVwaWNrZXItdG9kYXkiOiIiKSkrIiciKwooKCFvdGhlck1vbnRofHxzaG93T3RoZXJNb250aHMpJiZkYXlTZXR0aW5nc1syXT8iIHRpdGxlPSciK2RheVNldHRpbmdzWzJdLnJlcGxhY2UoLycvZywiJiMzOTsiKSsiJyI6IiIpKwoodW5zZWxlY3RhYmxlPyIiOiIgZGF0YS1oYW5kbGVyPSdzZWxlY3REYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyBkYXRhLW1vbnRoPSciK3ByaW50RGF0ZS5nZXRNb250aCgpKyInIGRhdGEteWVhcj0nIitwcmludERhdGUuZ2V0RnVsbFllYXIoKSsiJyIpKyI+IisKKG90aGVyTW9udGgmJiFzaG93T3RoZXJNb250aHM/IiYjeGEwOyI6KHVuc2VsZWN0YWJsZT8iPHNwYW4gY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQnPiIrcHJpbnREYXRlLmdldERhdGUoKSsiPC9zcGFuPiI6IjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IisKKHByaW50RGF0ZS5nZXRUaW1lKCk9PT10b2RheS5nZXRUaW1lKCk/IiB1aS1zdGF0ZS1oaWdobGlnaHQiOiIiKSsKKHByaW50RGF0ZS5nZXRUaW1lKCk9PT1jdXJyZW50RGF0ZS5nZXRUaW1lKCk/IiB1aS1zdGF0ZS1hY3RpdmUiOiIiKSsKKG90aGVyTW9udGg/IiB1aS1wcmlvcml0eS1zZWNvbmRhcnkiOiIiKSsiJyBocmVmPScjJz4iK3ByaW50RGF0ZS5nZXREYXRlKCkrIjwvYT4iKSkrIjwvdGQ+IjtwcmludERhdGUuc2V0RGF0ZShwcmludERhdGUuZ2V0RGF0ZSgpKzEpO3ByaW50RGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChwcmludERhdGUpO30KY2FsZW5kZXIrPXRib2R5KyI8L3RyPiI7fQpkcmF3TW9udGgrKztpZihkcmF3TW9udGg+MTEpe2RyYXdNb250aD0wO2RyYXdZZWFyKys7fQpjYWxlbmRlcis9IjwvdGJvZHk+PC90YWJsZT4iKyhpc011bHRpTW9udGg/IjwvZGl2PiIrCigobnVtTW9udGhzWzBdPjAmJmNvbD09PW51bU1vbnRoc1sxXS0xKT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1yb3ctYnJlYWsnPjwvZGl2PiI6IiIpOiIiKTtncm91cCs9Y2FsZW5kZXI7fQpodG1sKz1ncm91cDt9Cmh0bWwrPWJ1dHRvblBhbmVsO2luc3QuX2tleUV2ZW50PWZhbHNlO3JldHVybiBodG1sO30sX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOmZ1bmN0aW9uKGluc3QsZHJhd01vbnRoLGRyYXdZZWFyLG1pbkRhdGUsbWF4RGF0ZSxzZWNvbmRhcnksbW9udGhOYW1lcyxtb250aE5hbWVzU2hvcnQpe3ZhciBpbk1pblllYXIsaW5NYXhZZWFyLG1vbnRoLHllYXJzLHRoaXNZZWFyLGRldGVybWluZVllYXIseWVhcixlbmRZZWFyLGNoYW5nZU1vbnRoPXRoaXMuX2dldChpbnN0LCJjaGFuZ2VNb250aCIpLGNoYW5nZVllYXI9dGhpcy5fZ2V0KGluc3QsImNoYW5nZVllYXIiKSxzaG93TW9udGhBZnRlclllYXI9dGhpcy5fZ2V0KGluc3QsInNob3dNb250aEFmdGVyWWVhciIpLGh0bWw9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItdGl0bGUnPiIsbW9udGhIdG1sPSIiO2lmKHNlY29uZGFyeXx8IWNoYW5nZU1vbnRoKXttb250aEh0bWwrPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+Iittb250aE5hbWVzW2RyYXdNb250aF0rIjwvc3Bhbj4iO31lbHNle2luTWluWWVhcj0obWluRGF0ZSYmbWluRGF0ZS5nZXRGdWxsWWVhcigpPT09ZHJhd1llYXIpO2luTWF4WWVhcj0obWF4RGF0ZSYmbWF4RGF0ZS5nZXRGdWxsWWVhcigpPT09ZHJhd1llYXIpO21vbnRoSHRtbCs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+Ijtmb3IobW9udGg9MDttb250aDwxMjttb250aCsrKXtpZigoIWluTWluWWVhcnx8bW9udGg+PW1pbkRhdGUuZ2V0TW9udGgoKSkmJighaW5NYXhZZWFyfHxtb250aDw9bWF4RGF0ZS5nZXRNb250aCgpKSl7bW9udGhIdG1sKz0iPG9wdGlvbiB2YWx1ZT0nIittb250aCsiJyIrCihtb250aD09PWRyYXdNb250aD8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIrbW9udGhOYW1lc1Nob3J0W21vbnRoXSsiPC9vcHRpb24+Ijt9fQptb250aEh0bWwrPSI8L3NlbGVjdD4iO30KaWYoIXNob3dNb250aEFmdGVyWWVhcil7aHRtbCs9bW9udGhIdG1sKyhzZWNvbmRhcnl8fCEoY2hhbmdlTW9udGgmJmNoYW5nZVllYXIpPyImI3hhMDsiOiIiKTt9CmlmKCFpbnN0LnllYXJzaHRtbCl7aW5zdC55ZWFyc2h0bWw9IiI7aWYoc2Vjb25kYXJ5fHwhY2hhbmdlWWVhcil7aHRtbCs9IjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInPiIrZHJhd1llYXIrIjwvc3Bhbj4iO31lbHNle3llYXJzPXRoaXMuX2dldChpbnN0LCJ5ZWFyUmFuZ2UiKS5zcGxpdCgiOiIpO3RoaXNZZWFyPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtkZXRlcm1pbmVZZWFyPWZ1bmN0aW9uKHZhbHVlKXt2YXIgeWVhcj0odmFsdWUubWF0Y2goL2NbK1wtXS4qLyk/ZHJhd1llYXIrcGFyc2VJbnQodmFsdWUuc3Vic3RyaW5nKDEpLDEwKToodmFsdWUubWF0Y2goL1srXC1dLiovKT90aGlzWWVhcitwYXJzZUludCh2YWx1ZSwxMCk6cGFyc2VJbnQodmFsdWUsMTApKSk7cmV0dXJuKGlzTmFOKHllYXIpP3RoaXNZZWFyOnllYXIpO307eWVhcj1kZXRlcm1pbmVZZWFyKHllYXJzWzBdKTtlbmRZZWFyPU1hdGgubWF4KHllYXIsZGV0ZXJtaW5lWWVhcih5ZWFyc1sxXXx8IiIpKTt5ZWFyPShtaW5EYXRlP01hdGgubWF4KHllYXIsbWluRGF0ZS5nZXRGdWxsWWVhcigpKTp5ZWFyKTtlbmRZZWFyPShtYXhEYXRlP01hdGgubWluKGVuZFllYXIsbWF4RGF0ZS5nZXRGdWxsWWVhcigpKTplbmRZZWFyKTtpbnN0LnllYXJzaHRtbCs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcicgZGF0YS1oYW5kbGVyPSdzZWxlY3RZZWFyJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7Zm9yKDt5ZWFyPD1lbmRZZWFyO3llYXIrKyl7aW5zdC55ZWFyc2h0bWwrPSI8b3B0aW9uIHZhbHVlPSciK3llYXIrIiciKwooeWVhcj09PWRyYXdZZWFyPyIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyI+Iit5ZWFyKyI8L29wdGlvbj4iO30KaW5zdC55ZWFyc2h0bWwrPSI8L3NlbGVjdD4iO2h0bWwrPWluc3QueWVhcnNodG1sO2luc3QueWVhcnNodG1sPW51bGw7fX0KaHRtbCs9dGhpcy5fZ2V0KGluc3QsInllYXJTdWZmaXgiKTtpZihzaG93TW9udGhBZnRlclllYXIpe2h0bWwrPShzZWNvbmRhcnl8fCEoY2hhbmdlTW9udGgmJmNoYW5nZVllYXIpPyImI3hhMDsiOiIiKSttb250aEh0bWw7fQpodG1sKz0iPC9kaXY+IjtyZXR1cm4gaHRtbDt9LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbihpbnN0LG9mZnNldCxwZXJpb2Qpe3ZhciB5ZWFyPWluc3Quc2VsZWN0ZWRZZWFyKyhwZXJpb2Q9PT0iWSI/b2Zmc2V0OjApLG1vbnRoPWluc3Quc2VsZWN0ZWRNb250aCsocGVyaW9kPT09Ik0iP29mZnNldDowKSxkYXk9TWF0aC5taW4oaW5zdC5zZWxlY3RlZERheSx0aGlzLl9nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoKSkrKHBlcmlvZD09PSJEIj9vZmZzZXQ6MCksZGF0ZT10aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgsZGF5KSkpO2luc3Quc2VsZWN0ZWREYXk9ZGF0ZS5nZXREYXRlKCk7aW5zdC5kcmF3TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoPWRhdGUuZ2V0TW9udGgoKTtpbnN0LmRyYXdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyPWRhdGUuZ2V0RnVsbFllYXIoKTtpZihwZXJpb2Q9PT0iTSJ8fHBlcmlvZD09PSJZIil7dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpO319LF9yZXN0cmljdE1pbk1heDpmdW5jdGlvbihpbnN0LGRhdGUpe3ZhciBtaW5EYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIiksbWF4RGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1heCIpLG5ld0RhdGU9KG1pbkRhdGUmJmRhdGU8bWluRGF0ZT9taW5EYXRlOmRhdGUpO3JldHVybihtYXhEYXRlJiZuZXdEYXRlPm1heERhdGU/bWF4RGF0ZTpuZXdEYXRlKTt9LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24oaW5zdCl7dmFyIG9uQ2hhbmdlPXRoaXMuX2dldChpbnN0LCJvbkNoYW5nZU1vbnRoWWVhciIpO2lmKG9uQ2hhbmdlKXtvbkNoYW5nZS5hcHBseSgoaW5zdC5pbnB1dD9pbnN0LmlucHV0WzBdOm51bGwpLFtpbnN0LnNlbGVjdGVkWWVhcixpbnN0LnNlbGVjdGVkTW9udGgrMSxpbnN0XSk7fX0sX2dldE51bWJlck9mTW9udGhzOmZ1bmN0aW9uKGluc3Qpe3ZhciBudW1Nb250aHM9dGhpcy5fZ2V0KGluc3QsIm51bWJlck9mTW9udGhzIik7cmV0dXJuKG51bU1vbnRocz09bnVsbD9bMSwxXToodHlwZW9mIG51bU1vbnRocz09PSJudW1iZXIiP1sxLG51bU1vbnRoc106bnVtTW9udGhzKSk7fSxfZ2V0TWluTWF4RGF0ZTpmdW5jdGlvbihpbnN0LG1pbk1heCl7cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaW5zdCx0aGlzLl9nZXQoaW5zdCxtaW5NYXgrIkRhdGUiKSxudWxsKTt9LF9nZXREYXlzSW5Nb250aDpmdW5jdGlvbih5ZWFyLG1vbnRoKXtyZXR1cm4gMzItdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeWVhcixtb250aCwzMikpLmdldERhdGUoKTt9LF9nZXRGaXJzdERheU9mTW9udGg6ZnVuY3Rpb24oeWVhcixtb250aCl7cmV0dXJuIG5ldyBEYXRlKHllYXIsbW9udGgsMSkuZ2V0RGF5KCk7fSxfY2FuQWRqdXN0TW9udGg6ZnVuY3Rpb24oaW5zdCxvZmZzZXQsY3VyWWVhcixjdXJNb250aCl7dmFyIG51bU1vbnRocz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpbnN0KSxkYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGN1clllYXIsY3VyTW9udGgrKG9mZnNldDwwP29mZnNldDpudW1Nb250aHNbMF0qbnVtTW9udGhzWzFdKSwxKSk7aWYob2Zmc2V0PDApe2RhdGUuc2V0RGF0ZSh0aGlzLl9nZXREYXlzSW5Nb250aChkYXRlLmdldEZ1bGxZZWFyKCksZGF0ZS5nZXRNb250aCgpKSk7fQpyZXR1cm4gdGhpcy5faXNJblJhbmdlKGluc3QsZGF0ZSk7fSxfaXNJblJhbmdlOmZ1bmN0aW9uKGluc3QsZGF0ZSl7dmFyIHllYXJTcGxpdCxjdXJyZW50WWVhcixtaW5EYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIiksbWF4RGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1heCIpLG1pblllYXI9bnVsbCxtYXhZZWFyPW51bGwseWVhcnM9dGhpcy5fZ2V0KGluc3QsInllYXJSYW5nZSIpO2lmKHllYXJzKXt5ZWFyU3BsaXQ9eWVhcnMuc3BsaXQoIjoiKTtjdXJyZW50WWVhcj1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7bWluWWVhcj1wYXJzZUludCh5ZWFyU3BsaXRbMF0sMTApO21heFllYXI9cGFyc2VJbnQoeWVhclNwbGl0WzFdLDEwKTtpZih5ZWFyU3BsaXRbMF0ubWF0Y2goL1srXC1dLiovKSl7bWluWWVhcis9Y3VycmVudFllYXI7fQppZih5ZWFyU3BsaXRbMV0ubWF0Y2goL1srXC1dLiovKSl7bWF4WWVhcis9Y3VycmVudFllYXI7fX0KcmV0dXJuKCghbWluRGF0ZXx8ZGF0ZS5nZXRUaW1lKCk+PW1pbkRhdGUuZ2V0VGltZSgpKSYmKCFtYXhEYXRlfHxkYXRlLmdldFRpbWUoKTw9bWF4RGF0ZS5nZXRUaW1lKCkpJiYoIW1pblllYXJ8fGRhdGUuZ2V0RnVsbFllYXIoKT49bWluWWVhcikmJighbWF4WWVhcnx8ZGF0ZS5nZXRGdWxsWWVhcigpPD1tYXhZZWFyKSk7fSxfZ2V0Rm9ybWF0Q29uZmlnOmZ1bmN0aW9uKGluc3Qpe3ZhciBzaG9ydFllYXJDdXRvZmY9dGhpcy5fZ2V0KGluc3QsInNob3J0WWVhckN1dG9mZiIpO3Nob3J0WWVhckN1dG9mZj0odHlwZW9mIHNob3J0WWVhckN1dG9mZiE9PSJzdHJpbmciP3Nob3J0WWVhckN1dG9mZjpuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KHNob3J0WWVhckN1dG9mZiwxMCkpO3JldHVybntzaG9ydFllYXJDdXRvZmY6c2hvcnRZZWFyQ3V0b2ZmLGRheU5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGluc3QsImRheU5hbWVzU2hvcnQiKSxkYXlOYW1lczp0aGlzLl9nZXQoaW5zdCwiZGF5TmFtZXMiKSxtb250aE5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGluc3QsIm1vbnRoTmFtZXNTaG9ydCIpLG1vbnRoTmFtZXM6dGhpcy5fZ2V0KGluc3QsIm1vbnRoTmFtZXMiKX07fSxfZm9ybWF0RGF0ZTpmdW5jdGlvbihpbnN0LGRheSxtb250aCx5ZWFyKXtpZighZGF5KXtpbnN0LmN1cnJlbnREYXk9aW5zdC5zZWxlY3RlZERheTtpbnN0LmN1cnJlbnRNb250aD1pbnN0LnNlbGVjdGVkTW9udGg7aW5zdC5jdXJyZW50WWVhcj1pbnN0LnNlbGVjdGVkWWVhcjt9CnZhciBkYXRlPShkYXk/KHR5cGVvZiBkYXk9PT0ib2JqZWN0Ij9kYXk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeWVhcixtb250aCxkYXkpKSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5jdXJyZW50WWVhcixpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnREYXkpKSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpLGRhdGUsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKTt9fSk7ZnVuY3Rpb24gZGF0ZXBpY2tlcl9iaW5kSG92ZXIoZHBEaXYpe3ZhciBzZWxlY3Rvcj0iYnV0dG9uLCAudWktZGF0ZXBpY2tlci1wcmV2LCAudWktZGF0ZXBpY2tlci1uZXh0LCAudWktZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBhIjtyZXR1cm4gZHBEaXYub24oIm1vdXNlb3V0IixzZWxlY3RvcixmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIik7fQppZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9PS0xKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKTt9fSkub24oIm1vdXNlb3ZlciIsc2VsZWN0b3IsZGF0ZXBpY2tlcl9oYW5kbGVNb3VzZW92ZXIpO30KZnVuY3Rpb24gZGF0ZXBpY2tlcl9oYW5kbGVNb3VzZW92ZXIoKXtpZighJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihkYXRlcGlja2VyX2luc3RBY3RpdmUuaW5saW5lP2RhdGVwaWNrZXJfaW5zdEFjdGl2ZS5kcERpdi5wYXJlbnQoKVswXTpkYXRlcGlja2VyX2luc3RBY3RpdmUuaW5wdXRbMF0pKXskKHRoaXMpLnBhcmVudHMoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIikuZmluZCgiYSIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpOyQodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPT0tMSl7JCh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIik7fQppZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9PS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKTt9fX0KZnVuY3Rpb24gZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUodGFyZ2V0LHByb3BzKXskLmV4dGVuZCh0YXJnZXQscHJvcHMpO2Zvcih2YXIgbmFtZSBpbiBwcm9wcyl7aWYocHJvcHNbbmFtZV09PW51bGwpe3RhcmdldFtuYW1lXT1wcm9wc1tuYW1lXTt9fQpyZXR1cm4gdGFyZ2V0O30KJC5mbi5kYXRlcGlja2VyPWZ1bmN0aW9uKG9wdGlvbnMpe2lmKCF0aGlzLmxlbmd0aCl7cmV0dXJuIHRoaXM7fQppZighJC5kYXRlcGlja2VyLmluaXRpYWxpemVkKXskKGRvY3VtZW50KS5vbigibW91c2Vkb3duIiwkLmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljayk7JC5kYXRlcGlja2VyLmluaXRpYWxpemVkPXRydWU7fQppZigkKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT09MCl7JCgiYm9keSIpLmFwcGVuZCgkLmRhdGVwaWNrZXIuZHBEaXYpO30KdmFyIG90aGVyQXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7aWYodHlwZW9mIG9wdGlvbnM9PT0ic3RyaW5nIiYmKG9wdGlvbnM9PT0iaXNEaXNhYmxlZCJ8fG9wdGlvbnM9PT0iZ2V0RGF0ZSJ8fG9wdGlvbnM9PT0id2lkZ2V0Iikpe3JldHVybiAkLmRhdGVwaWNrZXJbIl8iK29wdGlvbnMrIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChvdGhlckFyZ3MpKTt9CmlmKG9wdGlvbnM9PT0ib3B0aW9uIiYmYXJndW1lbnRzLmxlbmd0aD09PTImJnR5cGVvZiBhcmd1bWVudHNbMV09PT0ic3RyaW5nIil7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrb3B0aW9ucysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KG90aGVyQXJncykpO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3R5cGVvZiBvcHRpb25zPT09InN0cmluZyI/JC5kYXRlcGlja2VyWyJfIitvcHRpb25zKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzXS5jb25jYXQob3RoZXJBcmdzKSk6JC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsb3B0aW9ucyk7fSk7fTskLmRhdGVwaWNrZXI9bmV3IERhdGVwaWNrZXIoKTskLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ZmFsc2U7JC5kYXRlcGlja2VyLnV1aWQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7JC5kYXRlcGlja2VyLnZlcnNpb249IjEuMTIuMSI7dmFyIHdpZGdldHNEYXRlcGlja2VyPSQuZGF0ZXBpY2tlcjskLndpZGdldCgidWkudG9vbHRpcCIse3ZlcnNpb246IjEuMTIuMSIsb3B0aW9uczp7Y2xhc3Nlczp7InVpLXRvb2x0aXAiOiJ1aS1jb3JuZXItYWxsIHVpLXdpZGdldC1zaGFkb3cifSxjb250ZW50OmZ1bmN0aW9uKCl7dmFyIHRpdGxlPSQodGhpcykuYXR0cigidGl0bGUiKXx8IiI7cmV0dXJuICQoIjxhPiIpLnRleHQodGl0bGUpLmh0bWwoKTt9LGhpZGU6dHJ1ZSxpdGVtczoiW3RpdGxlXTpub3QoW2Rpc2FibGVkXSkiLHBvc2l0aW9uOntteToibGVmdCB0b3ArMTUiLGF0OiJsZWZ0IGJvdHRvbSIsY29sbGlzaW9uOiJmbGlwZml0IGZsaXAifSxzaG93OnRydWUsdHJhY2s6ZmFsc2UsY2xvc2U6bnVsbCxvcGVuOm51bGx9LF9hZGREZXNjcmliZWRCeTpmdW5jdGlvbihlbGVtLGlkKXt2YXIgZGVzY3JpYmVkYnk9KGVsZW0uYXR0cigiYXJpYS1kZXNjcmliZWRieSIpfHwiIikuc3BsaXQoL1xzKy8pO2Rlc2NyaWJlZGJ5LnB1c2goaWQpO2VsZW0uZGF0YSgidWktdG9vbHRpcC1pZCIsaWQpLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiLCQudHJpbShkZXNjcmliZWRieS5qb2luKCIgIikpKTt9LF9yZW1vdmVEZXNjcmliZWRCeTpmdW5jdGlvbihlbGVtKXt2YXIgaWQ9ZWxlbS5kYXRhKCJ1aS10b29sdGlwLWlkIiksZGVzY3JpYmVkYnk9KGVsZW0uYXR0cigiYXJpYS1kZXNjcmliZWRieSIpfHwiIikuc3BsaXQoL1xzKy8pLGluZGV4PSQuaW5BcnJheShpZCxkZXNjcmliZWRieSk7aWYoaW5kZXghPT0tMSl7ZGVzY3JpYmVkYnkuc3BsaWNlKGluZGV4LDEpO30KZWxlbS5yZW1vdmVEYXRhKCJ1aS10b29sdGlwLWlkIik7ZGVzY3JpYmVkYnk9JC50cmltKGRlc2NyaWJlZGJ5LmpvaW4oIiAiKSk7aWYoZGVzY3JpYmVkYnkpe2VsZW0uYXR0cigiYXJpYS1kZXNjcmliZWRieSIsZGVzY3JpYmVkYnkpO31lbHNle2VsZW0ucmVtb3ZlQXR0cigiYXJpYS1kZXNjcmliZWRieSIpO319LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9vbih7bW91c2VvdmVyOiJvcGVuIixmb2N1c2luOiJvcGVuIn0pO3RoaXMudG9vbHRpcHM9e307dGhpcy5wYXJlbnRzPXt9O3RoaXMubGl2ZVJlZ2lvbj0kKCI8ZGl2PiIpLmF0dHIoe3JvbGU6ImxvZyIsImFyaWEtbGl2ZSI6ImFzc2VydGl2ZSIsImFyaWEtcmVsZXZhbnQiOiJhZGRpdGlvbnMifSkuYXBwZW5kVG8odGhpcy5kb2N1bWVudFswXS5ib2R5KTt0aGlzLl9hZGRDbGFzcyh0aGlzLmxpdmVSZWdpb24sbnVsbCwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIik7dGhpcy5kaXNhYmxlZFRpdGxlcz0kKFtdKTt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXt2YXIgdGhhdD10aGlzO3RoaXMuX3N1cGVyKGtleSx2YWx1ZSk7aWYoa2V5PT09ImNvbnRlbnQiKXskLmVhY2godGhpcy50b29sdGlwcyxmdW5jdGlvbihpZCx0b29sdGlwRGF0YSl7dGhhdC5fdXBkYXRlQ29udGVudCh0b29sdGlwRGF0YS5lbGVtZW50KTt9KTt9fSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24odmFsdWUpe3RoaXNbdmFsdWU/Il9kaXNhYmxlIjoiX2VuYWJsZSJdKCk7fSxfZGlzYWJsZTpmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXM7JC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24oaWQsdG9vbHRpcERhdGEpe3ZhciBldmVudD0kLkV2ZW50KCJibHVyIik7ZXZlbnQudGFyZ2V0PWV2ZW50LmN1cnJlbnRUYXJnZXQ9dG9vbHRpcERhdGEuZWxlbWVudFswXTt0aGF0LmNsb3NlKGV2ZW50LHRydWUpO30pO3RoaXMuZGlzYWJsZWRUaXRsZXM9dGhpcy5kaXNhYmxlZFRpdGxlcy5hZGQodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5hZGRCYWNrKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGVsZW1lbnQ9JCh0aGlzKTtpZihlbGVtZW50LmlzKCJbdGl0bGVdIikpe3JldHVybiBlbGVtZW50LmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiLGVsZW1lbnQuYXR0cigidGl0bGUiKSkucmVtb3ZlQXR0cigidGl0bGUiKTt9fSkpO30sX2VuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWRUaXRsZXMuZWFjaChmdW5jdGlvbigpe3ZhciBlbGVtZW50PSQodGhpcyk7aWYoZWxlbWVudC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikpe2VsZW1lbnQuYXR0cigidGl0bGUiLGVsZW1lbnQuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKTt9fSk7dGhpcy5kaXNhYmxlZFRpdGxlcz0kKFtdKTt9LG9wZW46ZnVuY3Rpb24oZXZlbnQpe3ZhciB0aGF0PXRoaXMsdGFyZ2V0PSQoZXZlbnQ/ZXZlbnQudGFyZ2V0OnRoaXMuZWxlbWVudCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuaXRlbXMpO2lmKCF0YXJnZXQubGVuZ3RofHx0YXJnZXQuZGF0YSgidWktdG9vbHRpcC1pZCIpKXtyZXR1cm47fQppZih0YXJnZXQuYXR0cigidGl0bGUiKSl7dGFyZ2V0LmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiLHRhcmdldC5hdHRyKCJ0aXRsZSIpKTt9CnRhcmdldC5kYXRhKCJ1aS10b29sdGlwLW9wZW4iLHRydWUpO2lmKGV2ZW50JiZldmVudC50eXBlPT09Im1vdXNlb3ZlciIpe3RhcmdldC5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe3ZhciBwYXJlbnQ9JCh0aGlzKSxibHVyRXZlbnQ7aWYocGFyZW50LmRhdGEoInVpLXRvb2x0aXAtb3BlbiIpKXtibHVyRXZlbnQ9JC5FdmVudCgiYmx1ciIpO2JsdXJFdmVudC50YXJnZXQ9Ymx1ckV2ZW50LmN1cnJlbnRUYXJnZXQ9dGhpczt0aGF0LmNsb3NlKGJsdXJFdmVudCx0cnVlKTt9CmlmKHBhcmVudC5hdHRyKCJ0aXRsZSIpKXtwYXJlbnQudW5pcXVlSWQoKTt0aGF0LnBhcmVudHNbdGhpcy5pZF09e2VsZW1lbnQ6dGhpcyx0aXRsZTpwYXJlbnQuYXR0cigidGl0bGUiKX07cGFyZW50LmF0dHIoInRpdGxlIiwiIik7fX0pO30KdGhpcy5fcmVnaXN0ZXJDbG9zZUhhbmRsZXJzKGV2ZW50LHRhcmdldCk7dGhpcy5fdXBkYXRlQ29udGVudCh0YXJnZXQsZXZlbnQpO30sX3VwZGF0ZUNvbnRlbnQ6ZnVuY3Rpb24odGFyZ2V0LGV2ZW50KXt2YXIgY29udGVudCxjb250ZW50T3B0aW9uPXRoaXMub3B0aW9ucy5jb250ZW50LHRoYXQ9dGhpcyxldmVudFR5cGU9ZXZlbnQ/ZXZlbnQudHlwZTpudWxsO2lmKHR5cGVvZiBjb250ZW50T3B0aW9uPT09InN0cmluZyJ8fGNvbnRlbnRPcHRpb24ubm9kZVR5cGV8fGNvbnRlbnRPcHRpb24uanF1ZXJ5KXtyZXR1cm4gdGhpcy5fb3BlbihldmVudCx0YXJnZXQsY29udGVudE9wdGlvbik7fQpjb250ZW50PWNvbnRlbnRPcHRpb24uY2FsbCh0YXJnZXRbMF0sZnVuY3Rpb24ocmVzcG9uc2Upe3RoYXQuX2RlbGF5KGZ1bmN0aW9uKCl7aWYoIXRhcmdldC5kYXRhKCJ1aS10b29sdGlwLW9wZW4iKSl7cmV0dXJuO30KaWYoZXZlbnQpe2V2ZW50LnR5cGU9ZXZlbnRUeXBlO30KdGhpcy5fb3BlbihldmVudCx0YXJnZXQscmVzcG9uc2UpO30pO30pO2lmKGNvbnRlbnQpe3RoaXMuX29wZW4oZXZlbnQsdGFyZ2V0LGNvbnRlbnQpO319LF9vcGVuOmZ1bmN0aW9uKGV2ZW50LHRhcmdldCxjb250ZW50KXt2YXIgdG9vbHRpcERhdGEsdG9vbHRpcCxkZWxheWVkU2hvdyxhMTF5Q29udGVudCxwb3NpdGlvbk9wdGlvbj0kLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMucG9zaXRpb24pO2lmKCFjb250ZW50KXtyZXR1cm47fQp0b29sdGlwRGF0YT10aGlzLl9maW5kKHRhcmdldCk7aWYodG9vbHRpcERhdGEpe3Rvb2x0aXBEYXRhLnRvb2x0aXAuZmluZCgiLnVpLXRvb2x0aXAtY29udGVudCIpLmh0bWwoY29udGVudCk7cmV0dXJuO30KaWYodGFyZ2V0LmlzKCJbdGl0bGVdIikpe2lmKGV2ZW50JiZldmVudC50eXBlPT09Im1vdXNlb3ZlciIpe3RhcmdldC5hdHRyKCJ0aXRsZSIsIiIpO31lbHNle3RhcmdldC5yZW1vdmVBdHRyKCJ0aXRsZSIpO319CnRvb2x0aXBEYXRhPXRoaXMuX3Rvb2x0aXAodGFyZ2V0KTt0b29sdGlwPXRvb2x0aXBEYXRhLnRvb2x0aXA7dGhpcy5fYWRkRGVzY3JpYmVkQnkodGFyZ2V0LHRvb2x0aXAuYXR0cigiaWQiKSk7dG9vbHRpcC5maW5kKCIudWktdG9vbHRpcC1jb250ZW50IikuaHRtbChjb250ZW50KTt0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCk7YTExeUNvbnRlbnQ9JCgiPGRpdj4iKS5odG1sKHRvb2x0aXAuZmluZCgiLnVpLXRvb2x0aXAtY29udGVudCIpLmh0bWwoKSk7YTExeUNvbnRlbnQucmVtb3ZlQXR0cigibmFtZSIpLmZpbmQoIltuYW1lXSIpLnJlbW92ZUF0dHIoIm5hbWUiKTthMTF5Q29udGVudC5yZW1vdmVBdHRyKCJpZCIpLmZpbmQoIltpZF0iKS5yZW1vdmVBdHRyKCJpZCIpO2ExMXlDb250ZW50LmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbik7ZnVuY3Rpb24gcG9zaXRpb24oZXZlbnQpe3Bvc2l0aW9uT3B0aW9uLm9mPWV2ZW50O2lmKHRvb2x0aXAuaXMoIjpoaWRkZW4iKSl7cmV0dXJuO30KdG9vbHRpcC5wb3NpdGlvbihwb3NpdGlvbk9wdGlvbik7fQppZih0aGlzLm9wdGlvbnMudHJhY2smJmV2ZW50JiYvXm1vdXNlLy50ZXN0KGV2ZW50LnR5cGUpKXt0aGlzLl9vbih0aGlzLmRvY3VtZW50LHttb3VzZW1vdmU6cG9zaXRpb259KTtwb3NpdGlvbihldmVudCk7fWVsc2V7dG9vbHRpcC5wb3NpdGlvbigkLmV4dGVuZCh7b2Y6dGFyZ2V0fSx0aGlzLm9wdGlvbnMucG9zaXRpb24pKTt9CnRvb2x0aXAuaGlkZSgpO3RoaXMuX3Nob3codG9vbHRpcCx0aGlzLm9wdGlvbnMuc2hvdyk7aWYodGhpcy5vcHRpb25zLnRyYWNrJiZ0aGlzLm9wdGlvbnMuc2hvdyYmdGhpcy5vcHRpb25zLnNob3cuZGVsYXkpe2RlbGF5ZWRTaG93PXRoaXMuZGVsYXllZFNob3c9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZih0b29sdGlwLmlzKCI6dmlzaWJsZSIpKXtwb3NpdGlvbihwb3NpdGlvbk9wdGlvbi5vZik7Y2xlYXJJbnRlcnZhbChkZWxheWVkU2hvdyk7fX0sJC5meC5pbnRlcnZhbCk7fQp0aGlzLl90cmlnZ2VyKCJvcGVuIixldmVudCx7dG9vbHRpcDp0b29sdGlwfSk7fSxfcmVnaXN0ZXJDbG9zZUhhbmRsZXJzOmZ1bmN0aW9uKGV2ZW50LHRhcmdldCl7dmFyIGV2ZW50cz17a2V5dXA6ZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LmtleUNvZGU9PT0kLnVpLmtleUNvZGUuRVNDQVBFKXt2YXIgZmFrZUV2ZW50PSQuRXZlbnQoZXZlbnQpO2Zha2VFdmVudC5jdXJyZW50VGFyZ2V0PXRhcmdldFswXTt0aGlzLmNsb3NlKGZha2VFdmVudCx0cnVlKTt9fX07aWYodGFyZ2V0WzBdIT09dGhpcy5lbGVtZW50WzBdKXtldmVudHMucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlVG9vbHRpcCh0aGlzLl9maW5kKHRhcmdldCkudG9vbHRpcCk7fTt9CmlmKCFldmVudHx8ZXZlbnQudHlwZT09PSJtb3VzZW92ZXIiKXtldmVudHMubW91c2VsZWF2ZT0iY2xvc2UiO30KaWYoIWV2ZW50fHxldmVudC50eXBlPT09ImZvY3VzaW4iKXtldmVudHMuZm9jdXNvdXQ9ImNsb3NlIjt9CnRoaXMuX29uKHRydWUsdGFyZ2V0LGV2ZW50cyk7fSxjbG9zZTpmdW5jdGlvbihldmVudCl7dmFyIHRvb2x0aXAsdGhhdD10aGlzLHRhcmdldD0kKGV2ZW50P2V2ZW50LmN1cnJlbnRUYXJnZXQ6dGhpcy5lbGVtZW50KSx0b29sdGlwRGF0YT10aGlzLl9maW5kKHRhcmdldCk7aWYoIXRvb2x0aXBEYXRhKXt0YXJnZXQucmVtb3ZlRGF0YSgidWktdG9vbHRpcC1vcGVuIik7cmV0dXJuO30KdG9vbHRpcD10b29sdGlwRGF0YS50b29sdGlwO2lmKHRvb2x0aXBEYXRhLmNsb3Npbmcpe3JldHVybjt9CmNsZWFySW50ZXJ2YWwodGhpcy5kZWxheWVkU2hvdyk7aWYodGFyZ2V0LmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSYmIXRhcmdldC5hdHRyKCJ0aXRsZSIpKXt0YXJnZXQuYXR0cigidGl0bGUiLHRhcmdldC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikpO30KdGhpcy5fcmVtb3ZlRGVzY3JpYmVkQnkodGFyZ2V0KTt0b29sdGlwRGF0YS5oaWRpbmc9dHJ1ZTt0b29sdGlwLnN0b3AodHJ1ZSk7dGhpcy5faGlkZSh0b29sdGlwLHRoaXMub3B0aW9ucy5oaWRlLGZ1bmN0aW9uKCl7dGhhdC5fcmVtb3ZlVG9vbHRpcCgkKHRoaXMpKTt9KTt0YXJnZXQucmVtb3ZlRGF0YSgidWktdG9vbHRpcC1vcGVuIik7dGhpcy5fb2ZmKHRhcmdldCwibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cCIpO2lmKHRhcmdldFswXSE9PXRoaXMuZWxlbWVudFswXSl7dGhpcy5fb2ZmKHRhcmdldCwicmVtb3ZlIik7fQp0aGlzLl9vZmYodGhpcy5kb2N1bWVudCwibW91c2Vtb3ZlIik7aWYoZXZlbnQmJmV2ZW50LnR5cGU9PT0ibW91c2VsZWF2ZSIpeyQuZWFjaCh0aGlzLnBhcmVudHMsZnVuY3Rpb24oaWQscGFyZW50KXskKHBhcmVudC5lbGVtZW50KS5hdHRyKCJ0aXRsZSIscGFyZW50LnRpdGxlKTtkZWxldGUgdGhhdC5wYXJlbnRzW2lkXTt9KTt9CnRvb2x0aXBEYXRhLmNsb3Npbmc9dHJ1ZTt0aGlzLl90cmlnZ2VyKCJjbG9zZSIsZXZlbnQse3Rvb2x0aXA6dG9vbHRpcH0pO2lmKCF0b29sdGlwRGF0YS5oaWRpbmcpe3Rvb2x0aXBEYXRhLmNsb3Npbmc9ZmFsc2U7fX0sX3Rvb2x0aXA6ZnVuY3Rpb24oZWxlbWVudCl7dmFyIHRvb2x0aXA9JCgiPGRpdj4iKS5hdHRyKCJyb2xlIiwidG9vbHRpcCIpLGNvbnRlbnQ9JCgiPGRpdj4iKS5hcHBlbmRUbyh0b29sdGlwKSxpZD10b29sdGlwLnVuaXF1ZUlkKCkuYXR0cigiaWQiKTt0aGlzLl9hZGRDbGFzcyhjb250ZW50LCJ1aS10b29sdGlwLWNvbnRlbnQiKTt0aGlzLl9hZGRDbGFzcyh0b29sdGlwLCJ1aS10b29sdGlwIiwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50Iik7dG9vbHRpcC5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbyhlbGVtZW50KSk7cmV0dXJuIHRoaXMudG9vbHRpcHNbaWRdPXtlbGVtZW50OmVsZW1lbnQsdG9vbHRpcDp0b29sdGlwfTt9LF9maW5kOmZ1bmN0aW9uKHRhcmdldCl7dmFyIGlkPXRhcmdldC5kYXRhKCJ1aS10b29sdGlwLWlkIik7cmV0dXJuIGlkP3RoaXMudG9vbHRpcHNbaWRdOm51bGw7fSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbih0b29sdGlwKXt0b29sdGlwLnJlbW92ZSgpO2RlbGV0ZSB0aGlzLnRvb2x0aXBzW3Rvb2x0aXAuYXR0cigiaWQiKV07fSxfYXBwZW5kVG86ZnVuY3Rpb24odGFyZ2V0KXt2YXIgZWxlbWVudD10YXJnZXQuY2xvc2VzdCgiLnVpLWZyb250LCBkaWFsb2ciKTtpZighZWxlbWVudC5sZW5ndGgpe2VsZW1lbnQ9dGhpcy5kb2N1bWVudFswXS5ib2R5O30KcmV0dXJuIGVsZW1lbnQ7fSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXM7JC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24oaWQsdG9vbHRpcERhdGEpe3ZhciBldmVudD0kLkV2ZW50KCJibHVyIiksZWxlbWVudD10b29sdGlwRGF0YS5lbGVtZW50O2V2ZW50LnRhcmdldD1ldmVudC5jdXJyZW50VGFyZ2V0PWVsZW1lbnRbMF07dGhhdC5jbG9zZShldmVudCx0cnVlKTskKCIjIitpZCkucmVtb3ZlKCk7aWYoZWxlbWVudC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikpe2lmKCFlbGVtZW50LmF0dHIoInRpdGxlIikpe2VsZW1lbnQuYXR0cigidGl0bGUiLGVsZW1lbnQuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKTt9CmVsZW1lbnQucmVtb3ZlRGF0YSgidWktdG9vbHRpcC10aXRsZSIpO319KTt0aGlzLmxpdmVSZWdpb24ucmVtb3ZlKCk7fX0pO2lmKCQudWlCYWNrQ29tcGF0IT09ZmFsc2UpeyQud2lkZ2V0KCJ1aS50b29sdGlwIiwkLnVpLnRvb2x0aXAse29wdGlvbnM6e3Rvb2x0aXBDbGFzczpudWxsfSxfdG9vbHRpcDpmdW5jdGlvbigpe3ZhciB0b29sdGlwRGF0YT10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyk7aWYodGhpcy5vcHRpb25zLnRvb2x0aXBDbGFzcyl7dG9vbHRpcERhdGEudG9vbHRpcC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudG9vbHRpcENsYXNzKTt9CnJldHVybiB0b29sdGlwRGF0YTt9fSk7fQp2YXIgd2lkZ2V0c1Rvb2x0aXA9JC51aS50b29sdGlwO3ZhciBkYXRhU3BhY2U9InVpLWVmZmVjdHMtIixkYXRhU3BhY2VTdHlsZT0idWktZWZmZWN0cy1zdHlsZSIsZGF0YVNwYWNlQW5pbWF0ZWQ9InVpLWVmZmVjdHMtYW5pbWF0ZWQiLGpRdWVyeT0kOyQuZWZmZWN0cz17ZWZmZWN0Ont9fTsoZnVuY3Rpb24oalF1ZXJ5LHVuZGVmaW5lZCl7dmFyIHN0ZXBIb29rcz0iYmFja2dyb3VuZENvbG9yIGJvcmRlckJvdHRvbUNvbG9yIGJvcmRlckxlZnRDb2xvciBib3JkZXJSaWdodENvbG9yICIrImJvcmRlclRvcENvbG9yIGNvbG9yIGNvbHVtblJ1bGVDb2xvciBvdXRsaW5lQ29sb3IgdGV4dERlY29yYXRpb25Db2xvciB0ZXh0RW1waGFzaXNDb2xvciIscnBsdXNlcXVhbHM9L14oW1wtK10pPVxzKihcZCtcLj9cZCopLyxzdHJpbmdQYXJzZXJzPVt7cmU6L3JnYmE/XChccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxwYXJzZTpmdW5jdGlvbihleGVjUmVzdWx0KXtyZXR1cm5bZXhlY1Jlc3VsdFsxXSxleGVjUmVzdWx0WzJdLGV4ZWNSZXN1bHRbM10sZXhlY1Jlc3VsdFs0XV07fX0se3JlOi9yZ2JhP1woXHMqKFxkKyg/OlwuXGQrKT8pXCVccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyooPzosXHMqKFxkPyg/OlwuXGQrKT8pXHMqKT9cKS8scGFyc2U6ZnVuY3Rpb24oZXhlY1Jlc3VsdCl7cmV0dXJuW2V4ZWNSZXN1bHRbMV0qMi41NSxleGVjUmVzdWx0WzJdKjIuNTUsZXhlY1Jlc3VsdFszXSoyLjU1LGV4ZWNSZXN1bHRbNF1dO319LHtyZTovIyhbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KS8scGFyc2U6ZnVuY3Rpb24oZXhlY1Jlc3VsdCl7cmV0dXJuW3BhcnNlSW50KGV4ZWNSZXN1bHRbMV0sMTYpLHBhcnNlSW50KGV4ZWNSZXN1bHRbMl0sMTYpLHBhcnNlSW50KGV4ZWNSZXN1bHRbM10sMTYpXTt9fSx7cmU6LyMoW2EtZjAtOV0pKFthLWYwLTldKShbYS1mMC05XSkvLHBhcnNlOmZ1bmN0aW9uKGV4ZWNSZXN1bHQpe3JldHVybltwYXJzZUludChleGVjUmVzdWx0WzFdK2V4ZWNSZXN1bHRbMV0sMTYpLHBhcnNlSW50KGV4ZWNSZXN1bHRbMl0rZXhlY1Jlc3VsdFsyXSwxNikscGFyc2VJbnQoZXhlY1Jlc3VsdFszXStleGVjUmVzdWx0WzNdLDE2KV07fX0se3JlOi9oc2xhP1woXHMqKFxkKyg/OlwuXGQrKT8pXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqKD86LFxzKihcZD8oPzpcLlxkKyk/KVxzKik/XCkvLHNwYWNlOiJoc2xhIixwYXJzZTpmdW5jdGlvbihleGVjUmVzdWx0KXtyZXR1cm5bZXhlY1Jlc3VsdFsxXSxleGVjUmVzdWx0WzJdLzEwMCxleGVjUmVzdWx0WzNdLzEwMCxleGVjUmVzdWx0WzRdXTt9fV0sY29sb3I9alF1ZXJ5LkNvbG9yPWZ1bmN0aW9uKGNvbG9yLGdyZWVuLGJsdWUsYWxwaGEpe3JldHVybiBuZXcgalF1ZXJ5LkNvbG9yLmZuLnBhcnNlKGNvbG9yLGdyZWVuLGJsdWUsYWxwaGEpO30sc3BhY2VzPXtyZ2JhOntwcm9wczp7cmVkOntpZHg6MCx0eXBlOiJieXRlIn0sZ3JlZW46e2lkeDoxLHR5cGU6ImJ5dGUifSxibHVlOntpZHg6Mix0eXBlOiJieXRlIn19fSxoc2xhOntwcm9wczp7aHVlOntpZHg6MCx0eXBlOiJkZWdyZWVzIn0sc2F0dXJhdGlvbjp7aWR4OjEsdHlwZToicGVyY2VudCJ9LGxpZ2h0bmVzczp7aWR4OjIsdHlwZToicGVyY2VudCJ9fX19LHByb3BUeXBlcz17ImJ5dGUiOntmbG9vcjp0cnVlLG1heDoyNTV9LCJwZXJjZW50Ijp7bWF4OjF9LCJkZWdyZWVzIjp7bW9kOjM2MCxmbG9vcjp0cnVlfX0sc3VwcG9ydD1jb2xvci5zdXBwb3J0PXt9LHN1cHBvcnRFbGVtPWpRdWVyeSgiPHA+IilbMF0sY29sb3JzLGVhY2g9alF1ZXJ5LmVhY2g7c3VwcG9ydEVsZW0uc3R5bGUuY3NzVGV4dD0iYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEsMSwxLC41KSI7c3VwcG9ydC5yZ2JhPXN1cHBvcnRFbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKCJyZ2JhIik+LTE7ZWFjaChzcGFjZXMsZnVuY3Rpb24oc3BhY2VOYW1lLHNwYWNlKXtzcGFjZS5jYWNoZT0iXyIrc3BhY2VOYW1lO3NwYWNlLnByb3BzLmFscGhhPXtpZHg6Myx0eXBlOiJwZXJjZW50IixkZWY6MX07fSk7ZnVuY3Rpb24gY2xhbXAodmFsdWUscHJvcCxhbGxvd0VtcHR5KXt2YXIgdHlwZT1wcm9wVHlwZXNbcHJvcC50eXBlXXx8e307aWYodmFsdWU9PW51bGwpe3JldHVybihhbGxvd0VtcHR5fHwhcHJvcC5kZWYpP251bGw6cHJvcC5kZWY7fQp2YWx1ZT10eXBlLmZsb29yP35+dmFsdWU6cGFyc2VGbG9hdCh2YWx1ZSk7aWYoaXNOYU4odmFsdWUpKXtyZXR1cm4gcHJvcC5kZWY7fQppZih0eXBlLm1vZCl7cmV0dXJuKHZhbHVlK3R5cGUubW9kKSV0eXBlLm1vZDt9CnJldHVybiAwPnZhbHVlPzA6dHlwZS5tYXg8dmFsdWU/dHlwZS5tYXg6dmFsdWU7fQpmdW5jdGlvbiBzdHJpbmdQYXJzZShzdHJpbmcpe3ZhciBpbnN0PWNvbG9yKCkscmdiYT1pbnN0Ll9yZ2JhPVtdO3N0cmluZz1zdHJpbmcudG9Mb3dlckNhc2UoKTtlYWNoKHN0cmluZ1BhcnNlcnMsZnVuY3Rpb24oaSxwYXJzZXIpe3ZhciBwYXJzZWQsbWF0Y2g9cGFyc2VyLnJlLmV4ZWMoc3RyaW5nKSx2YWx1ZXM9bWF0Y2gmJnBhcnNlci5wYXJzZShtYXRjaCksc3BhY2VOYW1lPXBhcnNlci5zcGFjZXx8InJnYmEiO2lmKHZhbHVlcyl7cGFyc2VkPWluc3Rbc3BhY2VOYW1lXSh2YWx1ZXMpO2luc3Rbc3BhY2VzW3NwYWNlTmFtZV0uY2FjaGVdPXBhcnNlZFtzcGFjZXNbc3BhY2VOYW1lXS5jYWNoZV07cmdiYT1pbnN0Ll9yZ2JhPXBhcnNlZC5fcmdiYTtyZXR1cm4gZmFsc2U7fX0pO2lmKHJnYmEubGVuZ3RoKXtpZihyZ2JhLmpvaW4oKT09PSIwLDAsMCwwIil7alF1ZXJ5LmV4dGVuZChyZ2JhLGNvbG9ycy50cmFuc3BhcmVudCk7fQpyZXR1cm4gaW5zdDt9CnJldHVybiBjb2xvcnNbc3RyaW5nXTt9CmNvbG9yLmZuPWpRdWVyeS5leHRlbmQoY29sb3IucHJvdG90eXBlLHtwYXJzZTpmdW5jdGlvbihyZWQsZ3JlZW4sYmx1ZSxhbHBoYSl7aWYocmVkPT09dW5kZWZpbmVkKXt0aGlzLl9yZ2JhPVtudWxsLG51bGwsbnVsbCxudWxsXTtyZXR1cm4gdGhpczt9CmlmKHJlZC5qcXVlcnl8fHJlZC5ub2RlVHlwZSl7cmVkPWpRdWVyeShyZWQpLmNzcyhncmVlbik7Z3JlZW49dW5kZWZpbmVkO30KdmFyIGluc3Q9dGhpcyx0eXBlPWpRdWVyeS50eXBlKHJlZCkscmdiYT10aGlzLl9yZ2JhPVtdO2lmKGdyZWVuIT09dW5kZWZpbmVkKXtyZWQ9W3JlZCxncmVlbixibHVlLGFscGhhXTt0eXBlPSJhcnJheSI7fQppZih0eXBlPT09InN0cmluZyIpe3JldHVybiB0aGlzLnBhcnNlKHN0cmluZ1BhcnNlKHJlZCl8fGNvbG9ycy5fZGVmYXVsdCk7fQppZih0eXBlPT09ImFycmF5Iil7ZWFjaChzcGFjZXMucmdiYS5wcm9wcyxmdW5jdGlvbihrZXkscHJvcCl7cmdiYVtwcm9wLmlkeF09Y2xhbXAocmVkW3Byb3AuaWR4XSxwcm9wKTt9KTtyZXR1cm4gdGhpczt9CmlmKHR5cGU9PT0ib2JqZWN0Iil7aWYocmVkIGluc3RhbmNlb2YgY29sb3Ipe2VhY2goc3BhY2VzLGZ1bmN0aW9uKHNwYWNlTmFtZSxzcGFjZSl7aWYocmVkW3NwYWNlLmNhY2hlXSl7aW5zdFtzcGFjZS5jYWNoZV09cmVkW3NwYWNlLmNhY2hlXS5zbGljZSgpO319KTt9ZWxzZXtlYWNoKHNwYWNlcyxmdW5jdGlvbihzcGFjZU5hbWUsc3BhY2Upe3ZhciBjYWNoZT1zcGFjZS5jYWNoZTtlYWNoKHNwYWNlLnByb3BzLGZ1bmN0aW9uKGtleSxwcm9wKXtpZighaW5zdFtjYWNoZV0mJnNwYWNlLnRvKXtpZihrZXk9PT0iYWxwaGEifHxyZWRba2V5XT09bnVsbCl7cmV0dXJuO30KaW5zdFtjYWNoZV09c3BhY2UudG8oaW5zdC5fcmdiYSk7fQppbnN0W2NhY2hlXVtwcm9wLmlkeF09Y2xhbXAocmVkW2tleV0scHJvcCx0cnVlKTt9KTtpZihpbnN0W2NhY2hlXSYmalF1ZXJ5LmluQXJyYXkobnVsbCxpbnN0W2NhY2hlXS5zbGljZSgwLDMpKTwwKXtpbnN0W2NhY2hlXVszXT0xO2lmKHNwYWNlLmZyb20pe2luc3QuX3JnYmE9c3BhY2UuZnJvbShpbnN0W2NhY2hlXSk7fX19KTt9CnJldHVybiB0aGlzO319LGlzOmZ1bmN0aW9uKGNvbXBhcmUpe3ZhciBpcz1jb2xvcihjb21wYXJlKSxzYW1lPXRydWUsaW5zdD10aGlzO2VhY2goc3BhY2VzLGZ1bmN0aW9uKF8sc3BhY2Upe3ZhciBsb2NhbENhY2hlLGlzQ2FjaGU9aXNbc3BhY2UuY2FjaGVdO2lmKGlzQ2FjaGUpe2xvY2FsQ2FjaGU9aW5zdFtzcGFjZS5jYWNoZV18fHNwYWNlLnRvJiZzcGFjZS50byhpbnN0Ll9yZ2JhKXx8W107ZWFjaChzcGFjZS5wcm9wcyxmdW5jdGlvbihfLHByb3Ape2lmKGlzQ2FjaGVbcHJvcC5pZHhdIT1udWxsKXtzYW1lPShpc0NhY2hlW3Byb3AuaWR4XT09PWxvY2FsQ2FjaGVbcHJvcC5pZHhdKTtyZXR1cm4gc2FtZTt9fSk7fQpyZXR1cm4gc2FtZTt9KTtyZXR1cm4gc2FtZTt9LF9zcGFjZTpmdW5jdGlvbigpe3ZhciB1c2VkPVtdLGluc3Q9dGhpcztlYWNoKHNwYWNlcyxmdW5jdGlvbihzcGFjZU5hbWUsc3BhY2Upe2lmKGluc3Rbc3BhY2UuY2FjaGVdKXt1c2VkLnB1c2goc3BhY2VOYW1lKTt9fSk7cmV0dXJuIHVzZWQucG9wKCk7fSx0cmFuc2l0aW9uOmZ1bmN0aW9uKG90aGVyLGRpc3RhbmNlKXt2YXIgZW5kPWNvbG9yKG90aGVyKSxzcGFjZU5hbWU9ZW5kLl9zcGFjZSgpLHNwYWNlPXNwYWNlc1tzcGFjZU5hbWVdLHN0YXJ0Q29sb3I9dGhpcy5hbHBoYSgpPT09MD9jb2xvcigidHJhbnNwYXJlbnQiKTp0aGlzLHN0YXJ0PXN0YXJ0Q29sb3Jbc3BhY2UuY2FjaGVdfHxzcGFjZS50byhzdGFydENvbG9yLl9yZ2JhKSxyZXN1bHQ9c3RhcnQuc2xpY2UoKTtlbmQ9ZW5kW3NwYWNlLmNhY2hlXTtlYWNoKHNwYWNlLnByb3BzLGZ1bmN0aW9uKGtleSxwcm9wKXt2YXIgaW5kZXg9cHJvcC5pZHgsc3RhcnRWYWx1ZT1zdGFydFtpbmRleF0sZW5kVmFsdWU9ZW5kW2luZGV4XSx0eXBlPXByb3BUeXBlc1twcm9wLnR5cGVdfHx7fTtpZihlbmRWYWx1ZT09PW51bGwpe3JldHVybjt9CmlmKHN0YXJ0VmFsdWU9PT1udWxsKXtyZXN1bHRbaW5kZXhdPWVuZFZhbHVlO31lbHNle2lmKHR5cGUubW9kKXtpZihlbmRWYWx1ZS1zdGFydFZhbHVlPnR5cGUubW9kLzIpe3N0YXJ0VmFsdWUrPXR5cGUubW9kO31lbHNlIGlmKHN0YXJ0VmFsdWUtZW5kVmFsdWU+dHlwZS5tb2QvMil7c3RhcnRWYWx1ZS09dHlwZS5tb2Q7fX0KcmVzdWx0W2luZGV4XT1jbGFtcCgoZW5kVmFsdWUtc3RhcnRWYWx1ZSkqZGlzdGFuY2Urc3RhcnRWYWx1ZSxwcm9wKTt9fSk7cmV0dXJuIHRoaXNbc3BhY2VOYW1lXShyZXN1bHQpO30sYmxlbmQ6ZnVuY3Rpb24ob3BhcXVlKXtpZih0aGlzLl9yZ2JhWzNdPT09MSl7cmV0dXJuIHRoaXM7fQp2YXIgcmdiPXRoaXMuX3JnYmEuc2xpY2UoKSxhPXJnYi5wb3AoKSxibGVuZD1jb2xvcihvcGFxdWUpLl9yZ2JhO3JldHVybiBjb2xvcihqUXVlcnkubWFwKHJnYixmdW5jdGlvbih2LGkpe3JldHVybigxLWEpKmJsZW5kW2ldK2Eqdjt9KSk7fSx0b1JnYmFTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcHJlZml4PSJyZ2JhKCIscmdiYT1qUXVlcnkubWFwKHRoaXMuX3JnYmEsZnVuY3Rpb24odixpKXtyZXR1cm4gdj09bnVsbD8oaT4yPzE6MCk6djt9KTtpZihyZ2JhWzNdPT09MSl7cmdiYS5wb3AoKTtwcmVmaXg9InJnYigiO30KcmV0dXJuIHByZWZpeCtyZ2JhLmpvaW4oKSsiKSI7fSx0b0hzbGFTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcHJlZml4PSJoc2xhKCIsaHNsYT1qUXVlcnkubWFwKHRoaXMuaHNsYSgpLGZ1bmN0aW9uKHYsaSl7aWYodj09bnVsbCl7dj1pPjI/MTowO30KaWYoaSYmaTwzKXt2PU1hdGgucm91bmQodioxMDApKyIlIjt9CnJldHVybiB2O30pO2lmKGhzbGFbM109PT0xKXtoc2xhLnBvcCgpO3ByZWZpeD0iaHNsKCI7fQpyZXR1cm4gcHJlZml4K2hzbGEuam9pbigpKyIpIjt9LHRvSGV4U3RyaW5nOmZ1bmN0aW9uKGluY2x1ZGVBbHBoYSl7dmFyIHJnYmE9dGhpcy5fcmdiYS5zbGljZSgpLGFscGhhPXJnYmEucG9wKCk7aWYoaW5jbHVkZUFscGhhKXtyZ2JhLnB1c2gofn4oYWxwaGEqMjU1KSk7fQpyZXR1cm4iIyIralF1ZXJ5Lm1hcChyZ2JhLGZ1bmN0aW9uKHYpe3Y9KHZ8fDApLnRvU3RyaW5nKDE2KTtyZXR1cm4gdi5sZW5ndGg9PT0xPyIwIit2OnY7fSkuam9pbigiIik7fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZ2JhWzNdPT09MD8idHJhbnNwYXJlbnQiOnRoaXMudG9SZ2JhU3RyaW5nKCk7fX0pO2NvbG9yLmZuLnBhcnNlLnByb3RvdHlwZT1jb2xvci5mbjtmdW5jdGlvbiBodWUycmdiKHAscSxoKXtoPShoKzEpJTE7aWYoaCo2PDEpe3JldHVybiBwKyhxLXApKmgqNjt9CmlmKGgqMjwxKXtyZXR1cm4gcTt9CmlmKGgqMzwyKXtyZXR1cm4gcCsocS1wKSooKDIvMyktaCkqNjt9CnJldHVybiBwO30Kc3BhY2VzLmhzbGEudG89ZnVuY3Rpb24ocmdiYSl7aWYocmdiYVswXT09bnVsbHx8cmdiYVsxXT09bnVsbHx8cmdiYVsyXT09bnVsbCl7cmV0dXJuW251bGwsbnVsbCxudWxsLHJnYmFbM11dO30KdmFyIHI9cmdiYVswXS8yNTUsZz1yZ2JhWzFdLzI1NSxiPXJnYmFbMl0vMjU1LGE9cmdiYVszXSxtYXg9TWF0aC5tYXgocixnLGIpLG1pbj1NYXRoLm1pbihyLGcsYiksZGlmZj1tYXgtbWluLGFkZD1tYXgrbWluLGw9YWRkKjAuNSxoLHM7aWYobWluPT09bWF4KXtoPTA7fWVsc2UgaWYocj09PW1heCl7aD0oNjAqKGctYikvZGlmZikrMzYwO31lbHNlIGlmKGc9PT1tYXgpe2g9KDYwKihiLXIpL2RpZmYpKzEyMDt9ZWxzZXtoPSg2MCooci1nKS9kaWZmKSsyNDA7fQppZihkaWZmPT09MCl7cz0wO31lbHNlIGlmKGw8PTAuNSl7cz1kaWZmL2FkZDt9ZWxzZXtzPWRpZmYvKDItYWRkKTt9CnJldHVybltNYXRoLnJvdW5kKGgpJTM2MCxzLGwsYT09bnVsbD8xOmFdO307c3BhY2VzLmhzbGEuZnJvbT1mdW5jdGlvbihoc2xhKXtpZihoc2xhWzBdPT1udWxsfHxoc2xhWzFdPT1udWxsfHxoc2xhWzJdPT1udWxsKXtyZXR1cm5bbnVsbCxudWxsLG51bGwsaHNsYVszXV07fQp2YXIgaD1oc2xhWzBdLzM2MCxzPWhzbGFbMV0sbD1oc2xhWzJdLGE9aHNsYVszXSxxPWw8PTAuNT9sKigxK3MpOmwrcy1sKnMscD0yKmwtcTtyZXR1cm5bTWF0aC5yb3VuZChodWUycmdiKHAscSxoKygxLzMpKSoyNTUpLE1hdGgucm91bmQoaHVlMnJnYihwLHEsaCkqMjU1KSxNYXRoLnJvdW5kKGh1ZTJyZ2IocCxxLGgtKDEvMykpKjI1NSksYV07fTtlYWNoKHNwYWNlcyxmdW5jdGlvbihzcGFjZU5hbWUsc3BhY2Upe3ZhciBwcm9wcz1zcGFjZS5wcm9wcyxjYWNoZT1zcGFjZS5jYWNoZSx0bz1zcGFjZS50byxmcm9tPXNwYWNlLmZyb207Y29sb3IuZm5bc3BhY2VOYW1lXT1mdW5jdGlvbih2YWx1ZSl7aWYodG8mJiF0aGlzW2NhY2hlXSl7dGhpc1tjYWNoZV09dG8odGhpcy5fcmdiYSk7fQppZih2YWx1ZT09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXNbY2FjaGVdLnNsaWNlKCk7fQp2YXIgcmV0LHR5cGU9alF1ZXJ5LnR5cGUodmFsdWUpLGFycj0odHlwZT09PSJhcnJheSJ8fHR5cGU9PT0ib2JqZWN0Iik/dmFsdWU6YXJndW1lbnRzLGxvY2FsPXRoaXNbY2FjaGVdLnNsaWNlKCk7ZWFjaChwcm9wcyxmdW5jdGlvbihrZXkscHJvcCl7dmFyIHZhbD1hcnJbdHlwZT09PSJvYmplY3QiP2tleTpwcm9wLmlkeF07aWYodmFsPT1udWxsKXt2YWw9bG9jYWxbcHJvcC5pZHhdO30KbG9jYWxbcHJvcC5pZHhdPWNsYW1wKHZhbCxwcm9wKTt9KTtpZihmcm9tKXtyZXQ9Y29sb3IoZnJvbShsb2NhbCkpO3JldFtjYWNoZV09bG9jYWw7cmV0dXJuIHJldDt9ZWxzZXtyZXR1cm4gY29sb3IobG9jYWwpO319O2VhY2gocHJvcHMsZnVuY3Rpb24oa2V5LHByb3Ape2lmKGNvbG9yLmZuW2tleV0pe3JldHVybjt9CmNvbG9yLmZuW2tleV09ZnVuY3Rpb24odmFsdWUpe3ZhciB2dHlwZT1qUXVlcnkudHlwZSh2YWx1ZSksZm49KGtleT09PSJhbHBoYSI/KHRoaXMuX2hzbGE/ImhzbGEiOiJyZ2JhIik6c3BhY2VOYW1lKSxsb2NhbD10aGlzW2ZuXSgpLGN1cj1sb2NhbFtwcm9wLmlkeF0sbWF0Y2g7aWYodnR5cGU9PT0idW5kZWZpbmVkIil7cmV0dXJuIGN1cjt9CmlmKHZ0eXBlPT09ImZ1bmN0aW9uIil7dmFsdWU9dmFsdWUuY2FsbCh0aGlzLGN1cik7dnR5cGU9alF1ZXJ5LnR5cGUodmFsdWUpO30KaWYodmFsdWU9PW51bGwmJnByb3AuZW1wdHkpe3JldHVybiB0aGlzO30KaWYodnR5cGU9PT0ic3RyaW5nIil7bWF0Y2g9cnBsdXNlcXVhbHMuZXhlYyh2YWx1ZSk7aWYobWF0Y2gpe3ZhbHVlPWN1citwYXJzZUZsb2F0KG1hdGNoWzJdKSoobWF0Y2hbMV09PT0iKyI/MTotMSk7fX0KbG9jYWxbcHJvcC5pZHhdPXZhbHVlO3JldHVybiB0aGlzW2ZuXShsb2NhbCk7fTt9KTt9KTtjb2xvci5ob29rPWZ1bmN0aW9uKGhvb2spe3ZhciBob29rcz1ob29rLnNwbGl0KCIgIik7ZWFjaChob29rcyxmdW5jdGlvbihpLGhvb2spe2pRdWVyeS5jc3NIb29rc1tob29rXT17c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUpe3ZhciBwYXJzZWQsY3VyRWxlbSxiYWNrZ3JvdW5kQ29sb3I9IiI7aWYodmFsdWUhPT0idHJhbnNwYXJlbnQiJiYoalF1ZXJ5LnR5cGUodmFsdWUpIT09InN0cmluZyJ8fChwYXJzZWQ9c3RyaW5nUGFyc2UodmFsdWUpKSkpe3ZhbHVlPWNvbG9yKHBhcnNlZHx8dmFsdWUpO2lmKCFzdXBwb3J0LnJnYmEmJnZhbHVlLl9yZ2JhWzNdIT09MSl7Y3VyRWxlbT1ob29rPT09ImJhY2tncm91bmRDb2xvciI/ZWxlbS5wYXJlbnROb2RlOmVsZW07d2hpbGUoKGJhY2tncm91bmRDb2xvcj09PSIifHxiYWNrZ3JvdW5kQ29sb3I9PT0idHJhbnNwYXJlbnQiKSYmY3VyRWxlbSYmY3VyRWxlbS5zdHlsZSl7dHJ5e2JhY2tncm91bmRDb2xvcj1qUXVlcnkuY3NzKGN1ckVsZW0sImJhY2tncm91bmRDb2xvciIpO2N1ckVsZW09Y3VyRWxlbS5wYXJlbnROb2RlO31jYXRjaChlKXt9fQp2YWx1ZT12YWx1ZS5ibGVuZChiYWNrZ3JvdW5kQ29sb3ImJmJhY2tncm91bmRDb2xvciE9PSJ0cmFuc3BhcmVudCI/YmFja2dyb3VuZENvbG9yOiJfZGVmYXVsdCIpO30KdmFsdWU9dmFsdWUudG9SZ2JhU3RyaW5nKCk7fQp0cnl7ZWxlbS5zdHlsZVtob29rXT12YWx1ZTt9Y2F0Y2goZSl7fX19O2pRdWVyeS5meC5zdGVwW2hvb2tdPWZ1bmN0aW9uKGZ4KXtpZighZnguY29sb3JJbml0KXtmeC5zdGFydD1jb2xvcihmeC5lbGVtLGhvb2spO2Z4LmVuZD1jb2xvcihmeC5lbmQpO2Z4LmNvbG9ySW5pdD10cnVlO30KalF1ZXJ5LmNzc0hvb2tzW2hvb2tdLnNldChmeC5lbGVtLGZ4LnN0YXJ0LnRyYW5zaXRpb24oZnguZW5kLGZ4LnBvcykpO307fSk7fTtjb2xvci5ob29rKHN0ZXBIb29rcyk7alF1ZXJ5LmNzc0hvb2tzLmJvcmRlckNvbG9yPXtleHBhbmQ6ZnVuY3Rpb24odmFsdWUpe3ZhciBleHBhbmRlZD17fTtlYWNoKFsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sZnVuY3Rpb24oaSxwYXJ0KXtleHBhbmRlZFsiYm9yZGVyIitwYXJ0KyJDb2xvciJdPXZhbHVlO30pO3JldHVybiBleHBhbmRlZDt9fTtjb2xvcnM9alF1ZXJ5LkNvbG9yLm5hbWVzPXthcXVhOiIjMDBmZmZmIixibGFjazoiIzAwMDAwMCIsYmx1ZToiIzAwMDBmZiIsZnVjaHNpYToiI2ZmMDBmZiIsZ3JheToiIzgwODA4MCIsZ3JlZW46IiMwMDgwMDAiLGxpbWU6IiMwMGZmMDAiLG1hcm9vbjoiIzgwMDAwMCIsbmF2eToiIzAwMDA4MCIsb2xpdmU6IiM4MDgwMDAiLHB1cnBsZToiIzgwMDA4MCIscmVkOiIjZmYwMDAwIixzaWx2ZXI6IiNjMGMwYzAiLHRlYWw6IiMwMDgwODAiLHdoaXRlOiIjZmZmZmZmIix5ZWxsb3c6IiNmZmZmMDAiLHRyYW5zcGFyZW50OltudWxsLG51bGwsbnVsbCwwXSxfZGVmYXVsdDoiI2ZmZmZmZiJ9O30pKGpRdWVyeSk7KGZ1bmN0aW9uKCl7dmFyIGNsYXNzQW5pbWF0aW9uQWN0aW9ucz1bImFkZCIsInJlbW92ZSIsInRvZ2dsZSJdLHNob3J0aGFuZFN0eWxlcz17Ym9yZGVyOjEsYm9yZGVyQm90dG9tOjEsYm9yZGVyQ29sb3I6MSxib3JkZXJMZWZ0OjEsYm9yZGVyUmlnaHQ6MSxib3JkZXJUb3A6MSxib3JkZXJXaWR0aDoxLG1hcmdpbjoxLHBhZGRpbmc6MX07JC5lYWNoKFsiYm9yZGVyTGVmdFN0eWxlIiwiYm9yZGVyUmlnaHRTdHlsZSIsImJvcmRlckJvdHRvbVN0eWxlIiwiYm9yZGVyVG9wU3R5bGUiXSxmdW5jdGlvbihfLHByb3ApeyQuZnguc3RlcFtwcm9wXT1mdW5jdGlvbihmeCl7aWYoZnguZW5kIT09Im5vbmUiJiYhZnguc2V0QXR0cnx8ZngucG9zPT09MSYmIWZ4LnNldEF0dHIpe2pRdWVyeS5zdHlsZShmeC5lbGVtLHByb3AsZnguZW5kKTtmeC5zZXRBdHRyPXRydWU7fX07fSk7ZnVuY3Rpb24gZ2V0RWxlbWVudFN0eWxlcyhlbGVtKXt2YXIga2V5LGxlbixzdHlsZT1lbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc/ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbSxudWxsKTplbGVtLmN1cnJlbnRTdHlsZSxzdHlsZXM9e307aWYoc3R5bGUmJnN0eWxlLmxlbmd0aCYmc3R5bGVbMF0mJnN0eWxlW3N0eWxlWzBdXSl7bGVuPXN0eWxlLmxlbmd0aDt3aGlsZShsZW4tLSl7a2V5PXN0eWxlW2xlbl07aWYodHlwZW9mIHN0eWxlW2tleV09PT0ic3RyaW5nIil7c3R5bGVzWyQuY2FtZWxDYXNlKGtleSldPXN0eWxlW2tleV07fX19ZWxzZXtmb3Ioa2V5IGluIHN0eWxlKXtpZih0eXBlb2Ygc3R5bGVba2V5XT09PSJzdHJpbmciKXtzdHlsZXNba2V5XT1zdHlsZVtrZXldO319fQpyZXR1cm4gc3R5bGVzO30KZnVuY3Rpb24gc3R5bGVEaWZmZXJlbmNlKG9sZFN0eWxlLG5ld1N0eWxlKXt2YXIgZGlmZj17fSxuYW1lLHZhbHVlO2ZvcihuYW1lIGluIG5ld1N0eWxlKXt2YWx1ZT1uZXdTdHlsZVtuYW1lXTtpZihvbGRTdHlsZVtuYW1lXSE9PXZhbHVlKXtpZighc2hvcnRoYW5kU3R5bGVzW25hbWVdKXtpZigkLmZ4LnN0ZXBbbmFtZV18fCFpc05hTihwYXJzZUZsb2F0KHZhbHVlKSkpe2RpZmZbbmFtZV09dmFsdWU7fX19fQpyZXR1cm4gZGlmZjt9CmlmKCEkLmZuLmFkZEJhY2speyQuZm4uYWRkQmFjaz1mdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMuYWRkKHNlbGVjdG9yPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHNlbGVjdG9yKSk7fTt9CiQuZWZmZWN0cy5hbmltYXRlQ2xhc3M9ZnVuY3Rpb24odmFsdWUsZHVyYXRpb24sZWFzaW5nLGNhbGxiYWNrKXt2YXIgbz0kLnNwZWVkKGR1cmF0aW9uLGVhc2luZyxjYWxsYmFjayk7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYW5pbWF0ZWQ9JCh0aGlzKSxiYXNlQ2xhc3M9YW5pbWF0ZWQuYXR0cigiY2xhc3MiKXx8IiIsYXBwbHlDbGFzc0NoYW5nZSxhbGxBbmltYXRpb25zPW8uY2hpbGRyZW4/YW5pbWF0ZWQuZmluZCgiKiIpLmFkZEJhY2soKTphbmltYXRlZDthbGxBbmltYXRpb25zPWFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCl7dmFyIGVsPSQodGhpcyk7cmV0dXJue2VsOmVsLHN0YXJ0OmdldEVsZW1lbnRTdHlsZXModGhpcyl9O30pO2FwcGx5Q2xhc3NDaGFuZ2U9ZnVuY3Rpb24oKXskLmVhY2goY2xhc3NBbmltYXRpb25BY3Rpb25zLGZ1bmN0aW9uKGksYWN0aW9uKXtpZih2YWx1ZVthY3Rpb25dKXthbmltYXRlZFthY3Rpb24rIkNsYXNzIl0odmFsdWVbYWN0aW9uXSk7fX0pO307YXBwbHlDbGFzc0NoYW5nZSgpO2FsbEFuaW1hdGlvbnM9YWxsQW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24oKXt0aGlzLmVuZD1nZXRFbGVtZW50U3R5bGVzKHRoaXMuZWxbMF0pO3RoaXMuZGlmZj1zdHlsZURpZmZlcmVuY2UodGhpcy5zdGFydCx0aGlzLmVuZCk7cmV0dXJuIHRoaXM7fSk7YW5pbWF0ZWQuYXR0cigiY2xhc3MiLGJhc2VDbGFzcyk7YWxsQW5pbWF0aW9ucz1hbGxBbmltYXRpb25zLm1hcChmdW5jdGlvbigpe3ZhciBzdHlsZUluZm89dGhpcyxkZmQ9JC5EZWZlcnJlZCgpLG9wdHM9JC5leHRlbmQoe30sbyx7cXVldWU6ZmFsc2UsY29tcGxldGU6ZnVuY3Rpb24oKXtkZmQucmVzb2x2ZShzdHlsZUluZm8pO319KTt0aGlzLmVsLmFuaW1hdGUodGhpcy5kaWZmLG9wdHMpO3JldHVybiBkZmQucHJvbWlzZSgpO30pOyQud2hlbi5hcHBseSgkLGFsbEFuaW1hdGlvbnMuZ2V0KCkpLmRvbmUoZnVuY3Rpb24oKXthcHBseUNsYXNzQ2hhbmdlKCk7JC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbigpe3ZhciBlbD10aGlzLmVsOyQuZWFjaCh0aGlzLmRpZmYsZnVuY3Rpb24oa2V5KXtlbC5jc3Moa2V5LCIiKTt9KTt9KTtvLmNvbXBsZXRlLmNhbGwoYW5pbWF0ZWRbMF0pO30pO30pO307JC5mbi5leHRlbmQoe2FkZENsYXNzOihmdW5jdGlvbihvcmlnKXtyZXR1cm4gZnVuY3Rpb24oY2xhc3NOYW1lcyxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3JldHVybiBzcGVlZD8kLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7YWRkOmNsYXNzTmFtZXN9LHNwZWVkLGVhc2luZyxjYWxsYmFjayk6b3JpZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTt9KSgkLmZuLmFkZENsYXNzKSxyZW1vdmVDbGFzczooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKGNsYXNzTmFtZXMsc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xPyQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHtyZW1vdmU6Y2xhc3NOYW1lc30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTpvcmlnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O30pKCQuZm4ucmVtb3ZlQ2xhc3MpLHRvZ2dsZUNsYXNzOihmdW5jdGlvbihvcmlnKXtyZXR1cm4gZnVuY3Rpb24oY2xhc3NOYW1lcyxmb3JjZSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe2lmKHR5cGVvZiBmb3JjZT09PSJib29sZWFuInx8Zm9yY2U9PT11bmRlZmluZWQpe2lmKCFzcGVlZCl7cmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmd1bWVudHMpO31lbHNle3JldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcywoZm9yY2U/e2FkZDpjbGFzc05hbWVzfTp7cmVtb3ZlOmNsYXNzTmFtZXN9KSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spO319ZWxzZXtyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse3RvZ2dsZTpjbGFzc05hbWVzfSxmb3JjZSxzcGVlZCxlYXNpbmcpO319O30pKCQuZm4udG9nZ2xlQ2xhc3MpLHN3aXRjaENsYXNzOmZ1bmN0aW9uKHJlbW92ZSxhZGQsc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse2FkZDphZGQscmVtb3ZlOnJlbW92ZX0sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9fSk7fSkoKTsoZnVuY3Rpb24oKXtpZigkLmV4cHImJiQuZXhwci5maWx0ZXJzJiYkLmV4cHIuZmlsdGVycy5hbmltYXRlZCl7JC5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9KGZ1bmN0aW9uKG9yaWcpe3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4hISQoZWxlbSkuZGF0YShkYXRhU3BhY2VBbmltYXRlZCl8fG9yaWcoZWxlbSk7fTt9KSgkLmV4cHIuZmlsdGVycy5hbmltYXRlZCk7fQppZigkLnVpQmFja0NvbXBhdCE9PWZhbHNlKXskLmV4dGVuZCgkLmVmZmVjdHMse3NhdmU6ZnVuY3Rpb24oZWxlbWVudCxzZXQpe3ZhciBpPTAsbGVuZ3RoPXNldC5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe2lmKHNldFtpXSE9PW51bGwpe2VsZW1lbnQuZGF0YShkYXRhU3BhY2Urc2V0W2ldLGVsZW1lbnRbMF0uc3R5bGVbc2V0W2ldXSk7fX19LHJlc3RvcmU6ZnVuY3Rpb24oZWxlbWVudCxzZXQpe3ZhciB2YWwsaT0wLGxlbmd0aD1zZXQubGVuZ3RoO2Zvcig7aTxsZW5ndGg7aSsrKXtpZihzZXRbaV0hPT1udWxsKXt2YWw9ZWxlbWVudC5kYXRhKGRhdGFTcGFjZStzZXRbaV0pO2VsZW1lbnQuY3NzKHNldFtpXSx2YWwpO319fSxzZXRNb2RlOmZ1bmN0aW9uKGVsLG1vZGUpe2lmKG1vZGU9PT0idG9nZ2xlIil7bW9kZT1lbC5pcygiOmhpZGRlbiIpPyJzaG93IjoiaGlkZSI7fQpyZXR1cm4gbW9kZTt9LGNyZWF0ZVdyYXBwZXI6ZnVuY3Rpb24oZWxlbWVudCl7aWYoZWxlbWVudC5wYXJlbnQoKS5pcygiLnVpLWVmZmVjdHMtd3JhcHBlciIpKXtyZXR1cm4gZWxlbWVudC5wYXJlbnQoKTt9CnZhciBwcm9wcz17d2lkdGg6ZWxlbWVudC5vdXRlcldpZHRoKHRydWUpLGhlaWdodDplbGVtZW50Lm91dGVySGVpZ2h0KHRydWUpLCJmbG9hdCI6ZWxlbWVudC5jc3MoImZsb2F0Iil9LHdyYXBwZXI9JCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcygidWktZWZmZWN0cy13cmFwcGVyIikuY3NzKHtmb250U2l6ZToiMTAwJSIsYmFja2dyb3VuZDoidHJhbnNwYXJlbnQiLGJvcmRlcjoibm9uZSIsbWFyZ2luOjAscGFkZGluZzowfSksc2l6ZT17d2lkdGg6ZWxlbWVudC53aWR0aCgpLGhlaWdodDplbGVtZW50LmhlaWdodCgpfSxhY3RpdmU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDt0cnl7YWN0aXZlLmlkO31jYXRjaChlKXthY3RpdmU9ZG9jdW1lbnQuYm9keTt9CmVsZW1lbnQud3JhcCh3cmFwcGVyKTtpZihlbGVtZW50WzBdPT09YWN0aXZlfHwkLmNvbnRhaW5zKGVsZW1lbnRbMF0sYWN0aXZlKSl7JChhY3RpdmUpLnRyaWdnZXIoImZvY3VzIik7fQp3cmFwcGVyPWVsZW1lbnQucGFyZW50KCk7aWYoZWxlbWVudC5jc3MoInBvc2l0aW9uIik9PT0ic3RhdGljIil7d3JhcHBlci5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9KTtlbGVtZW50LmNzcyh7cG9zaXRpb246InJlbGF0aXZlIn0pO31lbHNleyQuZXh0ZW5kKHByb3BzLHtwb3NpdGlvbjplbGVtZW50LmNzcygicG9zaXRpb24iKSx6SW5kZXg6ZWxlbWVudC5jc3MoInotaW5kZXgiKX0pOyQuZWFjaChbInRvcCIsImxlZnQiLCJib3R0b20iLCJyaWdodCJdLGZ1bmN0aW9uKGkscG9zKXtwcm9wc1twb3NdPWVsZW1lbnQuY3NzKHBvcyk7aWYoaXNOYU4ocGFyc2VJbnQocHJvcHNbcG9zXSwxMCkpKXtwcm9wc1twb3NdPSJhdXRvIjt9fSk7ZWxlbWVudC5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIsdG9wOjAsbGVmdDowLHJpZ2h0OiJhdXRvIixib3R0b206ImF1dG8ifSk7fQplbGVtZW50LmNzcyhzaXplKTtyZXR1cm4gd3JhcHBlci5jc3MocHJvcHMpLnNob3coKTt9LHJlbW92ZVdyYXBwZXI6ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGFjdGl2ZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKGVsZW1lbnQucGFyZW50KCkuaXMoIi51aS1lZmZlY3RzLXdyYXBwZXIiKSl7ZWxlbWVudC5wYXJlbnQoKS5yZXBsYWNlV2l0aChlbGVtZW50KTtpZihlbGVtZW50WzBdPT09YWN0aXZlfHwkLmNvbnRhaW5zKGVsZW1lbnRbMF0sYWN0aXZlKSl7JChhY3RpdmUpLnRyaWdnZXIoImZvY3VzIik7fX0KcmV0dXJuIGVsZW1lbnQ7fX0pO30KJC5leHRlbmQoJC5lZmZlY3RzLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmluZTpmdW5jdGlvbihuYW1lLG1vZGUsZWZmZWN0KXtpZighZWZmZWN0KXtlZmZlY3Q9bW9kZTttb2RlPSJlZmZlY3QiO30KJC5lZmZlY3RzLmVmZmVjdFtuYW1lXT1lZmZlY3Q7JC5lZmZlY3RzLmVmZmVjdFtuYW1lXS5tb2RlPW1vZGU7cmV0dXJuIGVmZmVjdDt9LHNjYWxlZERpbWVuc2lvbnM6ZnVuY3Rpb24oZWxlbWVudCxwZXJjZW50LGRpcmVjdGlvbil7aWYocGVyY2VudD09PTApe3JldHVybntoZWlnaHQ6MCx3aWR0aDowLG91dGVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowfTt9CnZhciB4PWRpcmVjdGlvbiE9PSJob3Jpem9udGFsIj8oKHBlcmNlbnR8fDEwMCkvMTAwKToxLHk9ZGlyZWN0aW9uIT09InZlcnRpY2FsIj8oKHBlcmNlbnR8fDEwMCkvMTAwKToxO3JldHVybntoZWlnaHQ6ZWxlbWVudC5oZWlnaHQoKSp5LHdpZHRoOmVsZW1lbnQud2lkdGgoKSp4LG91dGVySGVpZ2h0OmVsZW1lbnQub3V0ZXJIZWlnaHQoKSp5LG91dGVyV2lkdGg6ZWxlbWVudC5vdXRlcldpZHRoKCkqeH07fSxjbGlwVG9Cb3g6ZnVuY3Rpb24oYW5pbWF0aW9uKXtyZXR1cm57d2lkdGg6YW5pbWF0aW9uLmNsaXAucmlnaHQtYW5pbWF0aW9uLmNsaXAubGVmdCxoZWlnaHQ6YW5pbWF0aW9uLmNsaXAuYm90dG9tLWFuaW1hdGlvbi5jbGlwLnRvcCxsZWZ0OmFuaW1hdGlvbi5jbGlwLmxlZnQsdG9wOmFuaW1hdGlvbi5jbGlwLnRvcH07fSx1bnNoaWZ0OmZ1bmN0aW9uKGVsZW1lbnQscXVldWVMZW5ndGgsY291bnQpe3ZhciBxdWV1ZT1lbGVtZW50LnF1ZXVlKCk7aWYocXVldWVMZW5ndGg+MSl7cXVldWUuc3BsaWNlLmFwcGx5KHF1ZXVlLFsxLDBdLmNvbmNhdChxdWV1ZS5zcGxpY2UocXVldWVMZW5ndGgsY291bnQpKSk7fQplbGVtZW50LmRlcXVldWUoKTt9LHNhdmVTdHlsZTpmdW5jdGlvbihlbGVtZW50KXtlbGVtZW50LmRhdGEoZGF0YVNwYWNlU3R5bGUsZWxlbWVudFswXS5zdHlsZS5jc3NUZXh0KTt9LHJlc3RvcmVTdHlsZTpmdW5jdGlvbihlbGVtZW50KXtlbGVtZW50WzBdLnN0eWxlLmNzc1RleHQ9ZWxlbWVudC5kYXRhKGRhdGFTcGFjZVN0eWxlKXx8IiI7ZWxlbWVudC5yZW1vdmVEYXRhKGRhdGFTcGFjZVN0eWxlKTt9LG1vZGU6ZnVuY3Rpb24oZWxlbWVudCxtb2RlKXt2YXIgaGlkZGVuPWVsZW1lbnQuaXMoIjpoaWRkZW4iKTtpZihtb2RlPT09InRvZ2dsZSIpe21vZGU9aGlkZGVuPyJzaG93IjoiaGlkZSI7fQppZihoaWRkZW4/bW9kZT09PSJoaWRlIjptb2RlPT09InNob3ciKXttb2RlPSJub25lIjt9CnJldHVybiBtb2RlO30sZ2V0QmFzZWxpbmU6ZnVuY3Rpb24ob3JpZ2luLG9yaWdpbmFsKXt2YXIgeSx4O3N3aXRjaChvcmlnaW5bMF0pe2Nhc2UidG9wIjp5PTA7YnJlYWs7Y2FzZSJtaWRkbGUiOnk9MC41O2JyZWFrO2Nhc2UiYm90dG9tIjp5PTE7YnJlYWs7ZGVmYXVsdDp5PW9yaWdpblswXS9vcmlnaW5hbC5oZWlnaHQ7fQpzd2l0Y2gob3JpZ2luWzFdKXtjYXNlImxlZnQiOng9MDticmVhaztjYXNlImNlbnRlciI6eD0wLjU7YnJlYWs7Y2FzZSJyaWdodCI6eD0xO2JyZWFrO2RlZmF1bHQ6eD1vcmlnaW5bMV0vb3JpZ2luYWwud2lkdGg7fQpyZXR1cm57eDp4LHk6eX07fSxjcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbihlbGVtZW50KXt2YXIgcGxhY2Vob2xkZXIsY3NzUG9zaXRpb249ZWxlbWVudC5jc3MoInBvc2l0aW9uIikscG9zaXRpb249ZWxlbWVudC5wb3NpdGlvbigpO2VsZW1lbnQuY3NzKHttYXJnaW5Ub3A6ZWxlbWVudC5jc3MoIm1hcmdpblRvcCIpLG1hcmdpbkJvdHRvbTplbGVtZW50LmNzcygibWFyZ2luQm90dG9tIiksbWFyZ2luTGVmdDplbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLG1hcmdpblJpZ2h0OmVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpfSkub3V0ZXJXaWR0aChlbGVtZW50Lm91dGVyV2lkdGgoKSkub3V0ZXJIZWlnaHQoZWxlbWVudC5vdXRlckhlaWdodCgpKTtpZigvXihzdGF0aWN8cmVsYXRpdmUpLy50ZXN0KGNzc1Bvc2l0aW9uKSl7Y3NzUG9zaXRpb249ImFic29sdXRlIjtwbGFjZWhvbGRlcj0kKCI8IitlbGVtZW50WzBdLm5vZGVOYW1lKyI+IikuaW5zZXJ0QWZ0ZXIoZWxlbWVudCkuY3NzKHtkaXNwbGF5Oi9eKGlubGluZXxydWJ5KS8udGVzdChlbGVtZW50LmNzcygiZGlzcGxheSIpKT8iaW5saW5lLWJsb2NrIjoiYmxvY2siLHZpc2liaWxpdHk6ImhpZGRlbiIsbWFyZ2luVG9wOmVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSxtYXJnaW5Cb3R0b206ZWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpLG1hcmdpbkxlZnQ6ZWxlbWVudC5jc3MoIm1hcmdpbkxlZnQiKSxtYXJnaW5SaWdodDplbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKSwiZmxvYXQiOmVsZW1lbnQuY3NzKCJmbG9hdCIpfSkub3V0ZXJXaWR0aChlbGVtZW50Lm91dGVyV2lkdGgoKSkub3V0ZXJIZWlnaHQoZWxlbWVudC5vdXRlckhlaWdodCgpKS5hZGRDbGFzcygidWktZWZmZWN0cy1wbGFjZWhvbGRlciIpO2VsZW1lbnQuZGF0YShkYXRhU3BhY2UrInBsYWNlaG9sZGVyIixwbGFjZWhvbGRlcik7fQplbGVtZW50LmNzcyh7cG9zaXRpb246Y3NzUG9zaXRpb24sbGVmdDpwb3NpdGlvbi5sZWZ0LHRvcDpwb3NpdGlvbi50b3B9KTtyZXR1cm4gcGxhY2Vob2xkZXI7fSxyZW1vdmVQbGFjZWhvbGRlcjpmdW5jdGlvbihlbGVtZW50KXt2YXIgZGF0YUtleT1kYXRhU3BhY2UrInBsYWNlaG9sZGVyIixwbGFjZWhvbGRlcj1lbGVtZW50LmRhdGEoZGF0YUtleSk7aWYocGxhY2Vob2xkZXIpe3BsYWNlaG9sZGVyLnJlbW92ZSgpO2VsZW1lbnQucmVtb3ZlRGF0YShkYXRhS2V5KTt9fSxjbGVhblVwOmZ1bmN0aW9uKGVsZW1lbnQpeyQuZWZmZWN0cy5yZXN0b3JlU3R5bGUoZWxlbWVudCk7JC5lZmZlY3RzLnJlbW92ZVBsYWNlaG9sZGVyKGVsZW1lbnQpO30sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlbGVtZW50LGxpc3QsZmFjdG9yLHZhbHVlKXt2YWx1ZT12YWx1ZXx8e307JC5lYWNoKGxpc3QsZnVuY3Rpb24oaSx4KXt2YXIgdW5pdD1lbGVtZW50LmNzc1VuaXQoeCk7aWYodW5pdFswXT4wKXt2YWx1ZVt4XT11bml0WzBdKmZhY3Rvcit1bml0WzFdO319KTtyZXR1cm4gdmFsdWU7fX0pO2Z1bmN0aW9uIF9ub3JtYWxpemVBcmd1bWVudHMoZWZmZWN0LG9wdGlvbnMsc3BlZWQsY2FsbGJhY2spe2lmKCQuaXNQbGFpbk9iamVjdChlZmZlY3QpKXtvcHRpb25zPWVmZmVjdDtlZmZlY3Q9ZWZmZWN0LmVmZmVjdDt9CmVmZmVjdD17ZWZmZWN0OmVmZmVjdH07aWYob3B0aW9ucz09bnVsbCl7b3B0aW9ucz17fTt9CmlmKCQuaXNGdW5jdGlvbihvcHRpb25zKSl7Y2FsbGJhY2s9b3B0aW9ucztzcGVlZD1udWxsO29wdGlvbnM9e307fQppZih0eXBlb2Ygb3B0aW9ucz09PSJudW1iZXIifHwkLmZ4LnNwZWVkc1tvcHRpb25zXSl7Y2FsbGJhY2s9c3BlZWQ7c3BlZWQ9b3B0aW9ucztvcHRpb25zPXt9O30KaWYoJC5pc0Z1bmN0aW9uKHNwZWVkKSl7Y2FsbGJhY2s9c3BlZWQ7c3BlZWQ9bnVsbDt9CmlmKG9wdGlvbnMpeyQuZXh0ZW5kKGVmZmVjdCxvcHRpb25zKTt9CnNwZWVkPXNwZWVkfHxvcHRpb25zLmR1cmF0aW9uO2VmZmVjdC5kdXJhdGlvbj0kLmZ4Lm9mZj8wOnR5cGVvZiBzcGVlZD09PSJudW1iZXIiP3NwZWVkOnNwZWVkIGluICQuZnguc3BlZWRzPyQuZnguc3BlZWRzW3NwZWVkXTokLmZ4LnNwZWVkcy5fZGVmYXVsdDtlZmZlY3QuY29tcGxldGU9Y2FsbGJhY2t8fG9wdGlvbnMuY29tcGxldGU7cmV0dXJuIGVmZmVjdDt9CmZ1bmN0aW9uIHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKG9wdGlvbil7aWYoIW9wdGlvbnx8dHlwZW9mIG9wdGlvbj09PSJudW1iZXIifHwkLmZ4LnNwZWVkc1tvcHRpb25dKXtyZXR1cm4gdHJ1ZTt9CmlmKHR5cGVvZiBvcHRpb249PT0ic3RyaW5nIiYmISQuZWZmZWN0cy5lZmZlY3Rbb3B0aW9uXSl7cmV0dXJuIHRydWU7fQppZigkLmlzRnVuY3Rpb24ob3B0aW9uKSl7cmV0dXJuIHRydWU7fQppZih0eXBlb2Ygb3B0aW9uPT09Im9iamVjdCImJiFvcHRpb24uZWZmZWN0KXtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9CiQuZm4uZXh0ZW5kKHtlZmZlY3Q6ZnVuY3Rpb24oKXt2YXIgYXJncz1fbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlZmZlY3RNZXRob2Q9JC5lZmZlY3RzLmVmZmVjdFthcmdzLmVmZmVjdF0sZGVmYXVsdE1vZGU9ZWZmZWN0TWV0aG9kLm1vZGUscXVldWU9YXJncy5xdWV1ZSxxdWV1ZU5hbWU9cXVldWV8fCJmeCIsY29tcGxldGU9YXJncy5jb21wbGV0ZSxtb2RlPWFyZ3MubW9kZSxtb2Rlcz1bXSxwcmVmaWx0ZXI9ZnVuY3Rpb24obmV4dCl7dmFyIGVsPSQodGhpcyksbm9ybWFsaXplZE1vZGU9JC5lZmZlY3RzLm1vZGUoZWwsbW9kZSl8fGRlZmF1bHRNb2RlO2VsLmRhdGEoZGF0YVNwYWNlQW5pbWF0ZWQsdHJ1ZSk7bW9kZXMucHVzaChub3JtYWxpemVkTW9kZSk7aWYoZGVmYXVsdE1vZGUmJihub3JtYWxpemVkTW9kZT09PSJzaG93Inx8KG5vcm1hbGl6ZWRNb2RlPT09ZGVmYXVsdE1vZGUmJm5vcm1hbGl6ZWRNb2RlPT09ImhpZGUiKSkpe2VsLnNob3coKTt9CmlmKCFkZWZhdWx0TW9kZXx8bm9ybWFsaXplZE1vZGUhPT0ibm9uZSIpeyQuZWZmZWN0cy5zYXZlU3R5bGUoZWwpO30KaWYoJC5pc0Z1bmN0aW9uKG5leHQpKXtuZXh0KCk7fX07aWYoJC5meC5vZmZ8fCFlZmZlY3RNZXRob2Qpe2lmKG1vZGUpe3JldHVybiB0aGlzW21vZGVdKGFyZ3MuZHVyYXRpb24sY29tcGxldGUpO31lbHNle3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihjb21wbGV0ZSl7Y29tcGxldGUuY2FsbCh0aGlzKTt9fSk7fX0KZnVuY3Rpb24gcnVuKG5leHQpe3ZhciBlbGVtPSQodGhpcyk7ZnVuY3Rpb24gY2xlYW51cCgpe2VsZW0ucmVtb3ZlRGF0YShkYXRhU3BhY2VBbmltYXRlZCk7JC5lZmZlY3RzLmNsZWFuVXAoZWxlbSk7aWYoYXJncy5tb2RlPT09ImhpZGUiKXtlbGVtLmhpZGUoKTt9CmRvbmUoKTt9CmZ1bmN0aW9uIGRvbmUoKXtpZigkLmlzRnVuY3Rpb24oY29tcGxldGUpKXtjb21wbGV0ZS5jYWxsKGVsZW1bMF0pO30KaWYoJC5pc0Z1bmN0aW9uKG5leHQpKXtuZXh0KCk7fX0KYXJncy5tb2RlPW1vZGVzLnNoaWZ0KCk7aWYoJC51aUJhY2tDb21wYXQhPT1mYWxzZSYmIWRlZmF1bHRNb2RlKXtpZihlbGVtLmlzKCI6aGlkZGVuIik/bW9kZT09PSJoaWRlIjptb2RlPT09InNob3ciKXtlbGVtW21vZGVdKCk7ZG9uZSgpO31lbHNle2VmZmVjdE1ldGhvZC5jYWxsKGVsZW1bMF0sYXJncyxkb25lKTt9fWVsc2V7aWYoYXJncy5tb2RlPT09Im5vbmUiKXtlbGVtW21vZGVdKCk7ZG9uZSgpO31lbHNle2VmZmVjdE1ldGhvZC5jYWxsKGVsZW1bMF0sYXJncyxjbGVhbnVwKTt9fX0KcmV0dXJuIHF1ZXVlPT09ZmFsc2U/dGhpcy5lYWNoKHByZWZpbHRlcikuZWFjaChydW4pOnRoaXMucXVldWUocXVldWVOYW1lLHByZWZpbHRlcikucXVldWUocXVldWVOYW1lLHJ1bik7fSxzaG93OihmdW5jdGlvbihvcmlnKXtyZXR1cm4gZnVuY3Rpb24ob3B0aW9uKXtpZihzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbihvcHRpb24pKXtyZXR1cm4gb3JpZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWVsc2V7dmFyIGFyZ3M9X25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YXJncy5tb2RlPSJzaG93IjtyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCh0aGlzLGFyZ3MpO319O30pKCQuZm4uc2hvdyksaGlkZTooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKG9wdGlvbil7aWYoc3RhbmRhcmRBbmltYXRpb25PcHRpb24ob3B0aW9uKSl7cmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmd1bWVudHMpO31lbHNle3ZhciBhcmdzPV9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2FyZ3MubW9kZT0iaGlkZSI7cmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwodGhpcyxhcmdzKTt9fTt9KSgkLmZuLmhpZGUpLHRvZ2dsZTooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKG9wdGlvbil7aWYoc3RhbmRhcmRBbmltYXRpb25PcHRpb24ob3B0aW9uKXx8dHlwZW9mIG9wdGlvbj09PSJib29sZWFuIil7cmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmd1bWVudHMpO31lbHNle3ZhciBhcmdzPV9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2FyZ3MubW9kZT0idG9nZ2xlIjtyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCh0aGlzLGFyZ3MpO319O30pKCQuZm4udG9nZ2xlKSxjc3NVbml0OmZ1bmN0aW9uKGtleSl7dmFyIHN0eWxlPXRoaXMuY3NzKGtleSksdmFsPVtdOyQuZWFjaChbImVtIiwicHgiLCIlIiwicHQiXSxmdW5jdGlvbihpLHVuaXQpe2lmKHN0eWxlLmluZGV4T2YodW5pdCk+MCl7dmFsPVtwYXJzZUZsb2F0KHN0eWxlKSx1bml0XTt9fSk7cmV0dXJuIHZhbDt9LGNzc0NsaXA6ZnVuY3Rpb24oY2xpcE9iail7aWYoY2xpcE9iail7cmV0dXJuIHRoaXMuY3NzKCJjbGlwIiwicmVjdCgiK2NsaXBPYmoudG9wKyJweCAiK2NsaXBPYmoucmlnaHQrInB4ICIrCmNsaXBPYmouYm90dG9tKyJweCAiK2NsaXBPYmoubGVmdCsicHgpIik7fQpyZXR1cm4gcGFyc2VDbGlwKHRoaXMuY3NzKCJjbGlwIiksdGhpcyk7fSx0cmFuc2ZlcjpmdW5jdGlvbihvcHRpb25zLGRvbmUpe3ZhciBlbGVtZW50PSQodGhpcyksdGFyZ2V0PSQob3B0aW9ucy50byksdGFyZ2V0Rml4ZWQ9dGFyZ2V0LmNzcygicG9zaXRpb24iKT09PSJmaXhlZCIsYm9keT0kKCJib2R5IiksZml4VG9wPXRhcmdldEZpeGVkP2JvZHkuc2Nyb2xsVG9wKCk6MCxmaXhMZWZ0PXRhcmdldEZpeGVkP2JvZHkuc2Nyb2xsTGVmdCgpOjAsZW5kUG9zaXRpb249dGFyZ2V0Lm9mZnNldCgpLGFuaW1hdGlvbj17dG9wOmVuZFBvc2l0aW9uLnRvcC1maXhUb3AsbGVmdDplbmRQb3NpdGlvbi5sZWZ0LWZpeExlZnQsaGVpZ2h0OnRhcmdldC5pbm5lckhlaWdodCgpLHdpZHRoOnRhcmdldC5pbm5lcldpZHRoKCl9LHN0YXJ0UG9zaXRpb249ZWxlbWVudC5vZmZzZXQoKSx0cmFuc2Zlcj0kKCI8ZGl2IGNsYXNzPSd1aS1lZmZlY3RzLXRyYW5zZmVyJz48L2Rpdj4iKS5hcHBlbmRUbygiYm9keSIpLmFkZENsYXNzKG9wdGlvbnMuY2xhc3NOYW1lKS5jc3Moe3RvcDpzdGFydFBvc2l0aW9uLnRvcC1maXhUb3AsbGVmdDpzdGFydFBvc2l0aW9uLmxlZnQtZml4TGVmdCxoZWlnaHQ6ZWxlbWVudC5pbm5lckhlaWdodCgpLHdpZHRoOmVsZW1lbnQuaW5uZXJXaWR0aCgpLHBvc2l0aW9uOnRhcmdldEZpeGVkPyJmaXhlZCI6ImFic29sdXRlIn0pLmFuaW1hdGUoYW5pbWF0aW9uLG9wdGlvbnMuZHVyYXRpb24sb3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXt0cmFuc2Zlci5yZW1vdmUoKTtpZigkLmlzRnVuY3Rpb24oZG9uZSkpe2RvbmUoKTt9fSk7fX0pO2Z1bmN0aW9uIHBhcnNlQ2xpcChzdHIsZWxlbWVudCl7dmFyIG91dGVyV2lkdGg9ZWxlbWVudC5vdXRlcldpZHRoKCksb3V0ZXJIZWlnaHQ9ZWxlbWVudC5vdXRlckhlaWdodCgpLGNsaXBSZWdleD0vXnJlY3RcKCgtP1xkKlwuP1xkKnB4fC0/XGQrJXxhdXRvKSw/XHMqKC0/XGQqXC4/XGQqcHh8LT9cZCslfGF1dG8pLD9ccyooLT9cZCpcLj9cZCpweHwtP1xkKyV8YXV0byksP1xzKigtP1xkKlwuP1xkKnB4fC0/XGQrJXxhdXRvKVwpJC8sdmFsdWVzPWNsaXBSZWdleC5leGVjKHN0cil8fFsiIiwwLG91dGVyV2lkdGgsb3V0ZXJIZWlnaHQsMF07cmV0dXJue3RvcDpwYXJzZUZsb2F0KHZhbHVlc1sxXSl8fDAscmlnaHQ6dmFsdWVzWzJdPT09ImF1dG8iP291dGVyV2lkdGg6cGFyc2VGbG9hdCh2YWx1ZXNbMl0pLGJvdHRvbTp2YWx1ZXNbM109PT0iYXV0byI/b3V0ZXJIZWlnaHQ6cGFyc2VGbG9hdCh2YWx1ZXNbM10pLGxlZnQ6cGFyc2VGbG9hdCh2YWx1ZXNbNF0pfHwwfTt9CiQuZnguc3RlcC5jbGlwPWZ1bmN0aW9uKGZ4KXtpZighZnguY2xpcEluaXQpe2Z4LnN0YXJ0PSQoZnguZWxlbSkuY3NzQ2xpcCgpO2lmKHR5cGVvZiBmeC5lbmQ9PT0ic3RyaW5nIil7ZnguZW5kPXBhcnNlQ2xpcChmeC5lbmQsZnguZWxlbSk7fQpmeC5jbGlwSW5pdD10cnVlO30KJChmeC5lbGVtKS5jc3NDbGlwKHt0b3A6ZngucG9zKihmeC5lbmQudG9wLWZ4LnN0YXJ0LnRvcCkrZnguc3RhcnQudG9wLHJpZ2h0OmZ4LnBvcyooZnguZW5kLnJpZ2h0LWZ4LnN0YXJ0LnJpZ2h0KStmeC5zdGFydC5yaWdodCxib3R0b206ZngucG9zKihmeC5lbmQuYm90dG9tLWZ4LnN0YXJ0LmJvdHRvbSkrZnguc3RhcnQuYm90dG9tLGxlZnQ6ZngucG9zKihmeC5lbmQubGVmdC1meC5zdGFydC5sZWZ0KStmeC5zdGFydC5sZWZ0fSk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBiYXNlRWFzaW5ncz17fTskLmVhY2goWyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50IiwiRXhwbyJdLGZ1bmN0aW9uKGksbmFtZSl7YmFzZUVhc2luZ3NbbmFtZV09ZnVuY3Rpb24ocCl7cmV0dXJuIE1hdGgucG93KHAsaSsyKTt9O30pOyQuZXh0ZW5kKGJhc2VFYXNpbmdzLHtTaW5lOmZ1bmN0aW9uKHApe3JldHVybiAxLU1hdGguY29zKHAqTWF0aC5QSS8yKTt9LENpcmM6ZnVuY3Rpb24ocCl7cmV0dXJuIDEtTWF0aC5zcXJ0KDEtcCpwKTt9LEVsYXN0aWM6ZnVuY3Rpb24ocCl7cmV0dXJuIHA9PT0wfHxwPT09MT9wOi1NYXRoLnBvdygyLDgqKHAtMSkpKk1hdGguc2luKCgocC0xKSo4MC03LjUpKk1hdGguUEkvMTUpO30sQmFjazpmdW5jdGlvbihwKXtyZXR1cm4gcCpwKigzKnAtMik7fSxCb3VuY2U6ZnVuY3Rpb24ocCl7dmFyIHBvdzIsYm91bmNlPTQ7d2hpbGUocDwoKHBvdzI9TWF0aC5wb3coMiwtLWJvdW5jZSkpLTEpLzExKXt9CnJldHVybiAxL01hdGgucG93KDQsMy1ib3VuY2UpLTcuNTYyNSpNYXRoLnBvdygocG93MiozLTIpLzIyLXAsMik7fX0pOyQuZWFjaChiYXNlRWFzaW5ncyxmdW5jdGlvbihuYW1lLGVhc2VJbil7JC5lYXNpbmdbImVhc2VJbiIrbmFtZV09ZWFzZUluOyQuZWFzaW5nWyJlYXNlT3V0IituYW1lXT1mdW5jdGlvbihwKXtyZXR1cm4gMS1lYXNlSW4oMS1wKTt9OyQuZWFzaW5nWyJlYXNlSW5PdXQiK25hbWVdPWZ1bmN0aW9uKHApe3JldHVybiBwPDAuNT9lYXNlSW4ocCoyKS8yOjEtZWFzZUluKHAqLTIrMikvMjt9O30pO30pKCk7dmFyIGVmZmVjdD0kLmVmZmVjdHM7dmFyIGVmZmVjdHNFZmZlY3RCb3VuY2U9JC5lZmZlY3RzLmRlZmluZSgiYm91bmNlIixmdW5jdGlvbihvcHRpb25zLGRvbmUpe3ZhciB1cEFuaW0sZG93bkFuaW0scmVmVmFsdWUsZWxlbWVudD0kKHRoaXMpLG1vZGU9b3B0aW9ucy5tb2RlLGhpZGU9bW9kZT09PSJoaWRlIixzaG93PW1vZGU9PT0ic2hvdyIsZGlyZWN0aW9uPW9wdGlvbnMuZGlyZWN0aW9ufHwidXAiLGRpc3RhbmNlPW9wdGlvbnMuZGlzdGFuY2UsdGltZXM9b3B0aW9ucy50aW1lc3x8NSxhbmltcz10aW1lcyoyKyhzaG93fHxoaWRlPzE6MCksc3BlZWQ9b3B0aW9ucy5kdXJhdGlvbi9hbmltcyxlYXNpbmc9b3B0aW9ucy5lYXNpbmcscmVmPShkaXJlY3Rpb249PT0idXAifHxkaXJlY3Rpb249PT0iZG93biIpPyJ0b3AiOiJsZWZ0Iixtb3Rpb249KGRpcmVjdGlvbj09PSJ1cCJ8fGRpcmVjdGlvbj09PSJsZWZ0IiksaT0wLHF1ZXVlbGVuPWVsZW1lbnQucXVldWUoKS5sZW5ndGg7JC5lZmZlY3RzLmNyZWF0ZVBsYWNlaG9sZGVyKGVsZW1lbnQpO3JlZlZhbHVlPWVsZW1lbnQuY3NzKHJlZik7aWYoIWRpc3RhbmNlKXtkaXN0YW5jZT1lbGVtZW50W3JlZj09PSJ0b3AiPyJvdXRlckhlaWdodCI6Im91dGVyV2lkdGgiXSgpLzM7fQppZihzaG93KXtkb3duQW5pbT17b3BhY2l0eToxfTtkb3duQW5pbVtyZWZdPXJlZlZhbHVlO2VsZW1lbnQuY3NzKCJvcGFjaXR5IiwwKS5jc3MocmVmLG1vdGlvbj8tZGlzdGFuY2UqMjpkaXN0YW5jZSoyKS5hbmltYXRlKGRvd25BbmltLHNwZWVkLGVhc2luZyk7fQppZihoaWRlKXtkaXN0YW5jZT1kaXN0YW5jZS9NYXRoLnBvdygyLHRpbWVzLTEpO30KZG93bkFuaW09e307ZG93bkFuaW1bcmVmXT1yZWZWYWx1ZTtmb3IoO2k8dGltZXM7aSsrKXt1cEFuaW09e307dXBBbmltW3JlZl09KG1vdGlvbj8iLT0iOiIrPSIpK2Rpc3RhbmNlO2VsZW1lbnQuYW5pbWF0ZSh1cEFuaW0sc3BlZWQsZWFzaW5nKS5hbmltYXRlKGRvd25BbmltLHNwZWVkLGVhc2luZyk7ZGlzdGFuY2U9aGlkZT9kaXN0YW5jZSoyOmRpc3RhbmNlLzI7fQppZihoaWRlKXt1cEFuaW09e29wYWNpdHk6MH07dXBBbmltW3JlZl09KG1vdGlvbj8iLT0iOiIrPSIpK2Rpc3RhbmNlO2VsZW1lbnQuYW5pbWF0ZSh1cEFuaW0sc3BlZWQsZWFzaW5nKTt9CmVsZW1lbnQucXVldWUoZG9uZSk7JC5lZmZlY3RzLnVuc2hpZnQoZWxlbWVudCxxdWV1ZWxlbixhbmltcysxKTt9KTt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS9qcXVlcnkuYnJvd3Nlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKCl7JC51YU1hdGNoPWZ1bmN0aW9uKHVhKXt2YXIgdWE9dWEudG9Mb3dlckNhc2UoKTt2YXIgbWF0Y2g9LyhjaHJvbWUpWyBcL10oW1x3Ll0rKS8uZXhlYyh1YSl8fC8od2Via2l0KVsgXC9dKFtcdy5dKykvLmV4ZWModWEpfHwvKG9wZXJhKSg/Oi4qdmVyc2lvbnwpWyBcL10oW1x3Ll0rKS8uZXhlYyh1YSl8fC8obXNpZSkgKFtcdy5dKykvLmV4ZWModWEpfHx1YS5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKXwpLy5leGVjKHVhKXx8W107cmV0dXJue2Jyb3dzZXI6bWF0Y2hbMV18fCIiLHZlcnNpb246bWF0Y2hbMl18fCIwIn07fTtpZighJC5icm93c2VyKXt2YXIgbWF0Y2hlZD0kLnVhTWF0Y2gobmF2aWdhdG9yLnVzZXJBZ2VudCk7dmFyIGJyb3dzZXI9e307aWYobWF0Y2hlZC5icm93c2VyKXticm93c2VyW21hdGNoZWQuYnJvd3Nlcl09dHJ1ZTticm93c2VyLnZlcnNpb249bWF0Y2hlZC52ZXJzaW9uO30KaWYoYnJvd3Nlci5jaHJvbWUpe2Jyb3dzZXIud2Via2l0PXRydWU7fWVsc2UgaWYoYnJvd3Nlci53ZWJraXQpe2Jyb3dzZXIuc2FmYXJpPXRydWU7fQokLmJyb3dzZXI9YnJvd3Nlcjt9fSkoKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5LmJsb2NrVUkvanF1ZXJ5LmJsb2NrVUkuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCjsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gc2V0dXAoJCl7JC5mbi5fZmFkZUluPSQuZm4uZmFkZUluO3ZhciBub09wPSQubm9vcHx8ZnVuY3Rpb24oKXt9O3ZhciBtc2llPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO3ZhciBpZTY9L01TSUUgNi4wLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL01TSUUgOC4wLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO3ZhciBtb2RlPWRvY3VtZW50LmRvY3VtZW50TW9kZXx8MDt2YXIgc2V0RXhwcj0kLmlzRnVuY3Rpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGUuc2V0RXhwcmVzc2lvbik7JC5ibG9ja1VJPWZ1bmN0aW9uKG9wdHMpe2luc3RhbGwod2luZG93LG9wdHMpO307JC51bmJsb2NrVUk9ZnVuY3Rpb24ob3B0cyl7cmVtb3ZlKHdpbmRvdyxvcHRzKTt9OyQuZ3Jvd2xVST1mdW5jdGlvbih0aXRsZSxtZXNzYWdlLHRpbWVvdXQsb25DbG9zZSl7dmFyICRtPSQoJzxkaXYgY2xhc3M9Imdyb3dsVUkiPjwvZGl2PicpO2lmKHRpdGxlKSRtLmFwcGVuZCgnPGgxPicrdGl0bGUrJzwvaDE+Jyk7aWYobWVzc2FnZSkkbS5hcHBlbmQoJzxoMj4nK21lc3NhZ2UrJzwvaDI+Jyk7aWYodGltZW91dD09PXVuZGVmaW5lZCl0aW1lb3V0PTMwMDA7dmFyIGNhbGxCbG9jaz1mdW5jdGlvbihvcHRzKXtvcHRzPW9wdHN8fHt9OyQuYmxvY2tVSSh7bWVzc2FnZTokbSxmYWRlSW46dHlwZW9mIG9wdHMuZmFkZUluIT09J3VuZGVmaW5lZCc/b3B0cy5mYWRlSW46NzAwLGZhZGVPdXQ6dHlwZW9mIG9wdHMuZmFkZU91dCE9PSd1bmRlZmluZWQnP29wdHMuZmFkZU91dDoxMDAwLHRpbWVvdXQ6dHlwZW9mIG9wdHMudGltZW91dCE9PSd1bmRlZmluZWQnP29wdHMudGltZW91dDp0aW1lb3V0LGNlbnRlclk6ZmFsc2Usc2hvd092ZXJsYXk6ZmFsc2Usb25VbmJsb2NrOm9uQ2xvc2UsY3NzOiQuYmxvY2tVSS5kZWZhdWx0cy5ncm93bENTU30pO307Y2FsbEJsb2NrKCk7dmFyIG5vbm1vdXNlZE9wYWNpdHk9JG0uY3NzKCdvcGFjaXR5Jyk7JG0ubW91c2VvdmVyKGZ1bmN0aW9uKCl7Y2FsbEJsb2NrKHtmYWRlSW46MCx0aW1lb3V0OjMwMDAwfSk7dmFyIGRpc3BsYXlCbG9jaz0kKCcuYmxvY2tNc2cnKTtkaXNwbGF5QmxvY2suc3RvcCgpO2Rpc3BsYXlCbG9jay5mYWRlVG8oMzAwLDEpO30pLm1vdXNlb3V0KGZ1bmN0aW9uKCl7JCgnLmJsb2NrTXNnJykuZmFkZU91dCgxMDAwKTt9KTt9OyQuZm4uYmxvY2s9ZnVuY3Rpb24ob3B0cyl7aWYodGhpc1swXT09PXdpbmRvdyl7JC5ibG9ja1VJKG9wdHMpO3JldHVybiB0aGlzO30KdmFyIGZ1bGxPcHRzPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cyxvcHRzfHx7fSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyICRlbD0kKHRoaXMpO2lmKGZ1bGxPcHRzLmlnbm9yZUlmQmxvY2tlZCYmJGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJykpCnJldHVybjskZWwudW5ibG9jayh7ZmFkZU91dDowfSk7fSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCQuY3NzKHRoaXMsJ3Bvc2l0aW9uJyk9PSdzdGF0aWMnKXt0aGlzLnN0eWxlLnBvc2l0aW9uPSdyZWxhdGl2ZSc7JCh0aGlzKS5kYXRhKCdibG9ja1VJLnN0YXRpYycsdHJ1ZSk7fQp0aGlzLnN0eWxlLnpvb209MTtpbnN0YWxsKHRoaXMsb3B0cyk7fSk7fTskLmZuLnVuYmxvY2s9ZnVuY3Rpb24ob3B0cyl7aWYodGhpc1swXT09PXdpbmRvdyl7JC51bmJsb2NrVUkob3B0cyk7cmV0dXJuIHRoaXM7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7cmVtb3ZlKHRoaXMsb3B0cyk7fSk7fTskLmJsb2NrVUkudmVyc2lvbj0yLjcwOyQuYmxvY2tVSS5kZWZhdWx0cz17bWVzc2FnZTonPGgxPlBsZWFzZSB3YWl0Li4uPC9oMT4nLHRpdGxlOm51bGwsZHJhZ2dhYmxlOnRydWUsdGhlbWU6ZmFsc2UsY3NzOntwYWRkaW5nOjAsbWFyZ2luOjAsd2lkdGg6JzMwJScsdG9wOic0MCUnLGxlZnQ6JzM1JScsdGV4dEFsaWduOidjZW50ZXInLGNvbG9yOicjMDAwJyxib3JkZXI6JzNweCBzb2xpZCAjYWFhJyxiYWNrZ3JvdW5kQ29sb3I6JyNmZmYnLGN1cnNvcjond2FpdCd9LHRoZW1lZENTUzp7d2lkdGg6JzMwJScsdG9wOic0MCUnLGxlZnQ6JzM1JSd9LG92ZXJsYXlDU1M6e2JhY2tncm91bmRDb2xvcjonIzAwMCcsb3BhY2l0eTowLjYsY3Vyc29yOid3YWl0J30sY3Vyc29yUmVzZXQ6J2RlZmF1bHQnLGdyb3dsQ1NTOnt3aWR0aDonMzUwcHgnLHRvcDonMTBweCcsbGVmdDonJyxyaWdodDonMTBweCcsYm9yZGVyOidub25lJyxwYWRkaW5nOic1cHgnLG9wYWNpdHk6MC42LGN1cnNvcjonZGVmYXVsdCcsY29sb3I6JyNmZmYnLGJhY2tncm91bmRDb2xvcjonIzAwMCcsJy13ZWJraXQtYm9yZGVyLXJhZGl1cyc6JzEwcHgnLCctbW96LWJvcmRlci1yYWRpdXMnOicxMHB4JywnYm9yZGVyLXJhZGl1cyc6JzEwcHgnfSxpZnJhbWVTcmM6L15odHRwcy9pLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWZ8fCcnKT8namF2YXNjcmlwdDpmYWxzZSc6J2Fib3V0OmJsYW5rJyxmb3JjZUlmcmFtZTpmYWxzZSxiYXNlWjoxMDAwLGNlbnRlclg6dHJ1ZSxjZW50ZXJZOnRydWUsYWxsb3dCb2R5U3RyZXRjaDp0cnVlLGJpbmRFdmVudHM6dHJ1ZSxjb25zdHJhaW5UYWJLZXk6dHJ1ZSxmYWRlSW46MjAwLGZhZGVPdXQ6NDAwLHRpbWVvdXQ6MCxzaG93T3ZlcmxheTp0cnVlLGZvY3VzSW5wdXQ6dHJ1ZSxmb2N1c2FibGVFbGVtZW50czonOmlucHV0OmVuYWJsZWQ6dmlzaWJsZScsb25CbG9jazpudWxsLG9uVW5ibG9jazpudWxsLG9uT3ZlcmxheUNsaWNrOm51bGwscXVpcmtzbW9kZU9mZnNldEhhY2s6NCxibG9ja01zZ0NsYXNzOidibG9ja01zZycsaWdub3JlSWZCbG9ja2VkOmZhbHNlfTt2YXIgcGFnZUJsb2NrPW51bGw7dmFyIHBhZ2VCbG9ja0Vscz1bXTtmdW5jdGlvbiBpbnN0YWxsKGVsLG9wdHMpe3ZhciBjc3MsdGhlbWVkQ1NTO3ZhciBmdWxsPShlbD09d2luZG93KTt2YXIgbXNnPShvcHRzJiZvcHRzLm1lc3NhZ2UhPT11bmRlZmluZWQ/b3B0cy5tZXNzYWdlOnVuZGVmaW5lZCk7b3B0cz0kLmV4dGVuZCh7fSwkLmJsb2NrVUkuZGVmYXVsdHMsb3B0c3x8e30pO2lmKG9wdHMuaWdub3JlSWZCbG9ja2VkJiYkKGVsKS5kYXRhKCdibG9ja1VJLmlzQmxvY2tlZCcpKQpyZXR1cm47b3B0cy5vdmVybGF5Q1NTPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cy5vdmVybGF5Q1NTLG9wdHMub3ZlcmxheUNTU3x8e30pO2Nzcz0kLmV4dGVuZCh7fSwkLmJsb2NrVUkuZGVmYXVsdHMuY3NzLG9wdHMuY3NzfHx7fSk7aWYob3B0cy5vbk92ZXJsYXlDbGljaykKb3B0cy5vdmVybGF5Q1NTLmN1cnNvcj0ncG9pbnRlcic7dGhlbWVkQ1NTPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cy50aGVtZWRDU1Msb3B0cy50aGVtZWRDU1N8fHt9KTttc2c9bXNnPT09dW5kZWZpbmVkP29wdHMubWVzc2FnZTptc2c7aWYoZnVsbCYmcGFnZUJsb2NrKQpyZW1vdmUod2luZG93LHtmYWRlT3V0OjB9KTtpZihtc2cmJnR5cGVvZiBtc2chPSdzdHJpbmcnJiYobXNnLnBhcmVudE5vZGV8fG1zZy5qcXVlcnkpKXt2YXIgbm9kZT1tc2cuanF1ZXJ5P21zZ1swXTptc2c7dmFyIGRhdGE9e307JChlbCkuZGF0YSgnYmxvY2tVSS5oaXN0b3J5JyxkYXRhKTtkYXRhLmVsPW5vZGU7ZGF0YS5wYXJlbnQ9bm9kZS5wYXJlbnROb2RlO2RhdGEuZGlzcGxheT1ub2RlLnN0eWxlLmRpc3BsYXk7ZGF0YS5wb3NpdGlvbj1ub2RlLnN0eWxlLnBvc2l0aW9uO2lmKGRhdGEucGFyZW50KQpkYXRhLnBhcmVudC5yZW1vdmVDaGlsZChub2RlKTt9CiQoZWwpLmRhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyxvcHRzLm9uVW5ibG9jayk7dmFyIHo9b3B0cy5iYXNlWjt2YXIgbHlyMSxseXIyLGx5cjMscztpZihtc2llfHxvcHRzLmZvcmNlSWZyYW1lKQpseXIxPSQoJzxpZnJhbWUgY2xhc3M9ImJsb2NrVUkiIHN0eWxlPSJ6LWluZGV4OicrKHorKykrJztkaXNwbGF5Om5vbmU7Ym9yZGVyOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowIiBzcmM9Iicrb3B0cy5pZnJhbWVTcmMrJyI+PC9pZnJhbWU+Jyk7ZWxzZQpseXIxPSQoJzxkaXYgY2xhc3M9ImJsb2NrVUkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PicpO2lmKG9wdHMudGhlbWUpCmx5cjI9JCgnPGRpdiBjbGFzcz0iYmxvY2tVSSBibG9ja092ZXJsYXkgdWktd2lkZ2V0LW92ZXJsYXkiIHN0eWxlPSJ6LWluZGV4OicrKHorKykrJztkaXNwbGF5Om5vbmUiPjwvZGl2PicpO2Vsc2UKbHlyMj0kKCc8ZGl2IGNsYXNzPSJibG9ja1VJIGJsb2NrT3ZlcmxheSIgc3R5bGU9InotaW5kZXg6JysoeisrKSsnO2Rpc3BsYXk6bm9uZTtib3JkZXI6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtsZWZ0OjAiPjwvZGl2PicpO2lmKG9wdHMudGhlbWUmJmZ1bGwpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja1BhZ2UgdWktZGlhbG9nIHVpLXdpZGdldCB1aS1jb3JuZXItYWxsIiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZCI+JztpZihvcHRzLnRpdGxlKXtzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWhlYWRlciB1aS1kaWFsb2ctdGl0bGViYXIgdWktY29ybmVyLWFsbCBibG9ja1RpdGxlIj4nKyhvcHRzLnRpdGxlfHwnJm5ic3A7JykrJzwvZGl2Pic7fQpzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWNvbnRlbnQgdWktZGlhbG9nLWNvbnRlbnQiPjwvZGl2Pic7cys9JzwvZGl2Pic7fQplbHNlIGlmKG9wdHMudGhlbWUpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja0VsZW1lbnQgdWktZGlhbG9nIHVpLXdpZGdldCB1aS1jb3JuZXItYWxsIiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZSI+JztpZihvcHRzLnRpdGxlKXtzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWhlYWRlciB1aS1kaWFsb2ctdGl0bGViYXIgdWktY29ybmVyLWFsbCBibG9ja1RpdGxlIj4nKyhvcHRzLnRpdGxlfHwnJm5ic3A7JykrJzwvZGl2Pic7fQpzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWNvbnRlbnQgdWktZGlhbG9nLWNvbnRlbnQiPjwvZGl2Pic7cys9JzwvZGl2Pic7fQplbHNlIGlmKGZ1bGwpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja1BhZ2UiIHN0eWxlPSJ6LWluZGV4OicrKHorMTApKyc7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkIj48L2Rpdj4nO30KZWxzZXtzPSc8ZGl2IGNsYXNzPSJibG9ja1VJICcrb3B0cy5ibG9ja01zZ0NsYXNzKycgYmxvY2tFbGVtZW50IiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZSI+PC9kaXY+Jzt9Cmx5cjM9JChzKTtpZihtc2cpe2lmKG9wdHMudGhlbWUpe2x5cjMuY3NzKHRoZW1lZENTUyk7bHlyMy5hZGRDbGFzcygndWktd2lkZ2V0LWNvbnRlbnQnKTt9CmVsc2UKbHlyMy5jc3MoY3NzKTt9CmlmKCFvcHRzLnRoZW1lKQpseXIyLmNzcyhvcHRzLm92ZXJsYXlDU1MpO2x5cjIuY3NzKCdwb3NpdGlvbicsZnVsbD8nZml4ZWQnOidhYnNvbHV0ZScpO2lmKG1zaWV8fG9wdHMuZm9yY2VJZnJhbWUpCmx5cjEuY3NzKCdvcGFjaXR5JywwLjApO3ZhciBsYXllcnM9W2x5cjEsbHlyMixseXIzXSwkcGFyPWZ1bGw/JCgnYm9keScpOiQoZWwpOyQuZWFjaChsYXllcnMsZnVuY3Rpb24oKXt0aGlzLmFwcGVuZFRvKCRwYXIpO30pO2lmKG9wdHMudGhlbWUmJm9wdHMuZHJhZ2dhYmxlJiYkLmZuLmRyYWdnYWJsZSl7bHlyMy5kcmFnZ2FibGUoe2hhbmRsZTonLnVpLWRpYWxvZy10aXRsZWJhcicsY2FuY2VsOidsaSd9KTt9CnZhciBleHByPXNldEV4cHImJighJC5zdXBwb3J0LmJveE1vZGVsfHwkKCdvYmplY3QsZW1iZWQnLGZ1bGw/bnVsbDplbCkubGVuZ3RoPjApO2lmKGllNnx8ZXhwcil7aWYoZnVsbCYmb3B0cy5hbGxvd0JvZHlTdHJldGNoJiYkLnN1cHBvcnQuYm94TW9kZWwpCiQoJ2h0bWwsYm9keScpLmNzcygnaGVpZ2h0JywnMTAwJScpO2lmKChpZTZ8fCEkLnN1cHBvcnQuYm94TW9kZWwpJiYhZnVsbCl7dmFyIHQ9c3ooZWwsJ2JvcmRlclRvcFdpZHRoJyksbD1zeihlbCwnYm9yZGVyTGVmdFdpZHRoJyk7dmFyIGZpeFQ9dD8nKDAgLSAnK3QrJyknOjA7dmFyIGZpeEw9bD8nKDAgLSAnK2wrJyknOjA7fQokLmVhY2gobGF5ZXJzLGZ1bmN0aW9uKGksbyl7dmFyIHM9b1swXS5zdHlsZTtzLnBvc2l0aW9uPSdhYnNvbHV0ZSc7aWYoaTwyKXtpZihmdWxsKQpzLnNldEV4cHJlc3Npb24oJ2hlaWdodCcsJ01hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkgLSAoalF1ZXJ5LnN1cHBvcnQuYm94TW9kZWw/MDonK29wdHMucXVpcmtzbW9kZU9mZnNldEhhY2srJykgKyAicHgiJyk7ZWxzZQpzLnNldEV4cHJlc3Npb24oJ2hlaWdodCcsJ3RoaXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQgKyAicHgiJyk7aWYoZnVsbCkKcy5zZXRFeHByZXNzaW9uKCd3aWR0aCcsJ2pRdWVyeS5zdXBwb3J0LmJveE1vZGVsICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoICsgInB4IicpO2Vsc2UKcy5zZXRFeHByZXNzaW9uKCd3aWR0aCcsJ3RoaXMucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCArICJweCInKTtpZihmaXhMKXMuc2V0RXhwcmVzc2lvbignbGVmdCcsZml4TCk7aWYoZml4VClzLnNldEV4cHJlc3Npb24oJ3RvcCcsZml4VCk7fQplbHNlIGlmKG9wdHMuY2VudGVyWSl7aWYoZnVsbClzLnNldEV4cHJlc3Npb24oJ3RvcCcsJyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSAvIDIgLSAodGhpcy5vZmZzZXRIZWlnaHQgLyAyKSArIChibGFoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgKyAicHgiJyk7cy5tYXJnaW5Ub3A9MDt9CmVsc2UgaWYoIW9wdHMuY2VudGVyWSYmZnVsbCl7dmFyIHRvcD0ob3B0cy5jc3MmJm9wdHMuY3NzLnRvcCk/cGFyc2VJbnQob3B0cy5jc3MudG9wLDEwKTowO3ZhciBleHByZXNzaW9uPScoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApICsgJyt0b3ArJykgKyAicHgiJztzLnNldEV4cHJlc3Npb24oJ3RvcCcsZXhwcmVzc2lvbik7fX0pO30KaWYobXNnKXtpZihvcHRzLnRoZW1lKQpseXIzLmZpbmQoJy51aS13aWRnZXQtY29udGVudCcpLmFwcGVuZChtc2cpO2Vsc2UKbHlyMy5hcHBlbmQobXNnKTtpZihtc2cuanF1ZXJ5fHxtc2cubm9kZVR5cGUpCiQobXNnKS5zaG93KCk7fQppZigobXNpZXx8b3B0cy5mb3JjZUlmcmFtZSkmJm9wdHMuc2hvd092ZXJsYXkpCmx5cjEuc2hvdygpO2lmKG9wdHMuZmFkZUluKXt2YXIgY2I9b3B0cy5vbkJsb2NrP29wdHMub25CbG9jazpub09wO3ZhciBjYjE9KG9wdHMuc2hvd092ZXJsYXkmJiFtc2cpP2NiOm5vT3A7dmFyIGNiMj1tc2c/Y2I6bm9PcDtpZihvcHRzLnNob3dPdmVybGF5KQpseXIyLl9mYWRlSW4ob3B0cy5mYWRlSW4sY2IxKTtpZihtc2cpCmx5cjMuX2ZhZGVJbihvcHRzLmZhZGVJbixjYjIpO30KZWxzZXtpZihvcHRzLnNob3dPdmVybGF5KQpseXIyLnNob3coKTtpZihtc2cpCmx5cjMuc2hvdygpO2lmKG9wdHMub25CbG9jaykKb3B0cy5vbkJsb2NrLmJpbmQobHlyMykoKTt9CmJpbmQoMSxlbCxvcHRzKTtpZihmdWxsKXtwYWdlQmxvY2s9bHlyM1swXTtwYWdlQmxvY2tFbHM9JChvcHRzLmZvY3VzYWJsZUVsZW1lbnRzLHBhZ2VCbG9jayk7aWYob3B0cy5mb2N1c0lucHV0KQpzZXRUaW1lb3V0KGZvY3VzLDIwKTt9CmVsc2UKY2VudGVyKGx5cjNbMF0sb3B0cy5jZW50ZXJYLG9wdHMuY2VudGVyWSk7aWYob3B0cy50aW1lb3V0KXt2YXIgdG89c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGZ1bGwpCiQudW5ibG9ja1VJKG9wdHMpO2Vsc2UKJChlbCkudW5ibG9jayhvcHRzKTt9LG9wdHMudGltZW91dCk7JChlbCkuZGF0YSgnYmxvY2tVSS50aW1lb3V0Jyx0byk7fX0KZnVuY3Rpb24gcmVtb3ZlKGVsLG9wdHMpe3ZhciBjb3VudDt2YXIgZnVsbD0oZWw9PXdpbmRvdyk7dmFyICRlbD0kKGVsKTt2YXIgZGF0YT0kZWwuZGF0YSgnYmxvY2tVSS5oaXN0b3J5Jyk7dmFyIHRvPSRlbC5kYXRhKCdibG9ja1VJLnRpbWVvdXQnKTtpZih0byl7Y2xlYXJUaW1lb3V0KHRvKTskZWwucmVtb3ZlRGF0YSgnYmxvY2tVSS50aW1lb3V0Jyk7fQpvcHRzPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cyxvcHRzfHx7fSk7YmluZCgwLGVsLG9wdHMpO2lmKG9wdHMub25VbmJsb2NrPT09bnVsbCl7b3B0cy5vblVuYmxvY2s9JGVsLmRhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyk7JGVsLnJlbW92ZURhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyk7fQp2YXIgZWxzO2lmKGZ1bGwpCmVscz0kKCdib2R5JykuY2hpbGRyZW4oKS5maWx0ZXIoJy5ibG9ja1VJJykuYWRkKCdib2R5ID4gLmJsb2NrVUknKTtlbHNlCmVscz0kZWwuZmluZCgnPi5ibG9ja1VJJyk7aWYob3B0cy5jdXJzb3JSZXNldCl7aWYoZWxzLmxlbmd0aD4xKQplbHNbMV0uc3R5bGUuY3Vyc29yPW9wdHMuY3Vyc29yUmVzZXQ7aWYoZWxzLmxlbmd0aD4yKQplbHNbMl0uc3R5bGUuY3Vyc29yPW9wdHMuY3Vyc29yUmVzZXQ7fQppZihmdWxsKQpwYWdlQmxvY2s9cGFnZUJsb2NrRWxzPW51bGw7aWYob3B0cy5mYWRlT3V0KXtjb3VudD1lbHMubGVuZ3RoO2Vscy5zdG9wKCkuZmFkZU91dChvcHRzLmZhZGVPdXQsZnVuY3Rpb24oKXtpZigtLWNvdW50PT09MCkKcmVzZXQoZWxzLGRhdGEsb3B0cyxlbCk7fSk7fQplbHNlCnJlc2V0KGVscyxkYXRhLG9wdHMsZWwpO30KZnVuY3Rpb24gcmVzZXQoZWxzLGRhdGEsb3B0cyxlbCl7dmFyICRlbD0kKGVsKTtpZigkZWwuZGF0YSgnYmxvY2tVSS5pc0Jsb2NrZWQnKSkKcmV0dXJuO2Vscy5lYWNoKGZ1bmN0aW9uKGksbyl7aWYodGhpcy5wYXJlbnROb2RlKQp0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7fSk7aWYoZGF0YSYmZGF0YS5lbCl7ZGF0YS5lbC5zdHlsZS5kaXNwbGF5PWRhdGEuZGlzcGxheTtkYXRhLmVsLnN0eWxlLnBvc2l0aW9uPWRhdGEucG9zaXRpb247ZGF0YS5lbC5zdHlsZS5jdXJzb3I9J2RlZmF1bHQnO2lmKGRhdGEucGFyZW50KQpkYXRhLnBhcmVudC5hcHBlbmRDaGlsZChkYXRhLmVsKTskZWwucmVtb3ZlRGF0YSgnYmxvY2tVSS5oaXN0b3J5Jyk7fQppZigkZWwuZGF0YSgnYmxvY2tVSS5zdGF0aWMnKSl7JGVsLmNzcygncG9zaXRpb24nLCdzdGF0aWMnKTt9CmlmKHR5cGVvZiBvcHRzLm9uVW5ibG9jaz09J2Z1bmN0aW9uJykKb3B0cy5vblVuYmxvY2soZWwsb3B0cyk7dmFyIGJvZHk9JChkb2N1bWVudC5ib2R5KSx3PWJvZHkud2lkdGgoKSxjc3NXPWJvZHlbMF0uc3R5bGUud2lkdGg7Ym9keS53aWR0aCh3LTEpLndpZHRoKHcpO2JvZHlbMF0uc3R5bGUud2lkdGg9Y3NzVzt9CmZ1bmN0aW9uIGJpbmQoYixlbCxvcHRzKXt2YXIgZnVsbD1lbD09d2luZG93LCRlbD0kKGVsKTtpZighYiYmKGZ1bGwmJiFwYWdlQmxvY2t8fCFmdWxsJiYhJGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJykpKQpyZXR1cm47JGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJyxiKTtpZighZnVsbHx8IW9wdHMuYmluZEV2ZW50c3x8KGImJiFvcHRzLnNob3dPdmVybGF5KSkKcmV0dXJuO3ZhciBldmVudHM9J21vdXNlZG93biBtb3VzZXVwIGtleWRvd24ga2V5cHJlc3Mga2V5dXAgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaG1vdmUnO2lmKGIpCiQoZG9jdW1lbnQpLmJpbmQoZXZlbnRzLG9wdHMsaGFuZGxlcik7ZWxzZQokKGRvY3VtZW50KS51bmJpbmQoZXZlbnRzLGhhbmRsZXIpO30KZnVuY3Rpb24gaGFuZGxlcihlKXtpZihlLnR5cGU9PT0na2V5ZG93bicmJmUua2V5Q29kZSYmZS5rZXlDb2RlPT05KXtpZihwYWdlQmxvY2smJmUuZGF0YS5jb25zdHJhaW5UYWJLZXkpe3ZhciBlbHM9cGFnZUJsb2NrRWxzO3ZhciBmd2Q9IWUuc2hpZnRLZXkmJmUudGFyZ2V0PT09ZWxzW2Vscy5sZW5ndGgtMV07dmFyIGJhY2s9ZS5zaGlmdEtleSYmZS50YXJnZXQ9PT1lbHNbMF07aWYoZndkfHxiYWNrKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9jdXMoYmFjayk7fSwxMCk7cmV0dXJuIGZhbHNlO319fQp2YXIgb3B0cz1lLmRhdGE7dmFyIHRhcmdldD0kKGUudGFyZ2V0KTtpZih0YXJnZXQuaGFzQ2xhc3MoJ2Jsb2NrT3ZlcmxheScpJiZvcHRzLm9uT3ZlcmxheUNsaWNrKQpvcHRzLm9uT3ZlcmxheUNsaWNrKGUpO2lmKHRhcmdldC5wYXJlbnRzKCdkaXYuJytvcHRzLmJsb2NrTXNnQ2xhc3MpLmxlbmd0aD4wKQpyZXR1cm4gdHJ1ZTtyZXR1cm4gdGFyZ2V0LnBhcmVudHMoKS5jaGlsZHJlbigpLmZpbHRlcignZGl2LmJsb2NrVUknKS5sZW5ndGg9PT0wO30KZnVuY3Rpb24gZm9jdXMoYmFjayl7aWYoIXBhZ2VCbG9ja0VscykKcmV0dXJuO3ZhciBlPXBhZ2VCbG9ja0Vsc1tiYWNrPT09dHJ1ZT9wYWdlQmxvY2tFbHMubGVuZ3RoLTE6MF07aWYoZSkKZS5mb2N1cygpO30KZnVuY3Rpb24gY2VudGVyKGVsLHgseSl7dmFyIHA9ZWwucGFyZW50Tm9kZSxzPWVsLnN0eWxlO3ZhciBsPSgocC5vZmZzZXRXaWR0aC1lbC5vZmZzZXRXaWR0aCkvMiktc3oocCwnYm9yZGVyTGVmdFdpZHRoJyk7dmFyIHQ9KChwLm9mZnNldEhlaWdodC1lbC5vZmZzZXRIZWlnaHQpLzIpLXN6KHAsJ2JvcmRlclRvcFdpZHRoJyk7aWYoeClzLmxlZnQ9bD4wPyhsKydweCcpOicwJztpZih5KXMudG9wPXQ+MD8odCsncHgnKTonMCc7fQpmdW5jdGlvbiBzeihlbCxwKXtyZXR1cm4gcGFyc2VJbnQoJC5jc3MoZWwscCksMTApfHwwO319CmlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSl7ZGVmaW5lKFsnanF1ZXJ5J10sc2V0dXApO31lbHNle3NldHVwKGpRdWVyeSk7fX0pKCk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS5ob3RrZXlzL2pxdWVyeS5ob3RrZXlzLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oalF1ZXJ5KXtqUXVlcnkuaG90a2V5cz17dmVyc2lvbjoiMC44IixzcGVjaWFsS2V5czp7ODoiYmFja3NwYWNlIiw5OiJ0YWIiLDEzOiJyZXR1cm4iLDE2OiJzaGlmdCIsMTc6ImN0cmwiLDE4OiJhbHQiLDE5OiJwYXVzZSIsMjA6ImNhcHNsb2NrIiwyNzoiZXNjIiwzMjoic3BhY2UiLDMzOiJwYWdldXAiLDM0OiJwYWdlZG93biIsMzU6ImVuZCIsMzY6ImhvbWUiLDM3OiJsZWZ0IiwzODoidXAiLDM5OiJyaWdodCIsNDA6ImRvd24iLDQ1OiJpbnNlcnQiLDQ2OiJkZWwiLDk2OiIwIiw5NzoiMSIsOTg6IjIiLDk5OiIzIiwxMDA6IjQiLDEwMToiNSIsMTAyOiI2IiwxMDM6IjciLDEwNDoiOCIsMTA1OiI5IiwxMDY6IioiLDEwNzoiKyIsMTA5OiItIiwxMTA6Ii4iLDExMToiLyIsMTEyOiJmMSIsMTEzOiJmMiIsMTE0OiJmMyIsMTE1OiJmNCIsMTE2OiJmNSIsMTE3OiJmNiIsMTE4OiJmNyIsMTE5OiJmOCIsMTIwOiJmOSIsMTIxOiJmMTAiLDEyMjoiZjExIiwxMjM6ImYxMiIsMTQ0OiJudW1sb2NrIiwxNDU6InNjcm9sbCIsMTkxOiIvIiwyMjQ6Im1ldGEifSxzaGlmdE51bXM6eyJgIjoifiIsIjEiOiIhIiwiMiI6IkAiLCIzIjoiIyIsIjQiOiIkIiwiNSI6IiUiLCI2IjoiXiIsIjciOiImIiwiOCI6IioiLCI5IjoiKCIsIjAiOiIpIiwiLSI6Il8iLCI9IjoiKyIsIjsiOiI6ICIsIiciOiJcIiIsIiwiOiI8IiwiLiI6Ij4iLCIvIjoiPyIsIlxcIjoifCJ9fTtmdW5jdGlvbiBrZXlIYW5kbGVyKGhhbmRsZU9iail7aWYodHlwZW9mIGhhbmRsZU9iai5kYXRhIT09InN0cmluZyIpe3JldHVybjt9CnZhciBvcmlnSGFuZGxlcj1oYW5kbGVPYmouaGFuZGxlcixrZXlzPWhhbmRsZU9iai5kYXRhLnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKTtoYW5kbGVPYmouaGFuZGxlcj1mdW5jdGlvbihldmVudCl7aWYodGhpcyE9PWV2ZW50LnRhcmdldCYmKC90ZXh0YXJlYXxzZWxlY3QvaS50ZXN0KGV2ZW50LnRhcmdldC5ub2RlTmFtZSl8fGV2ZW50LnRhcmdldC50eXBlPT09InRleHQiKSl7cmV0dXJuO30KdmFyIHNwZWNpYWw9ZXZlbnQudHlwZSE9PSJrZXlwcmVzcyImJmpRdWVyeS5ob3RrZXlzLnNwZWNpYWxLZXlzW2V2ZW50LndoaWNoXSxjaGFyYWN0ZXI9U3RyaW5nLmZyb21DaGFyQ29kZShldmVudC53aGljaCkudG9Mb3dlckNhc2UoKSxrZXksbW9kaWY9IiIscG9zc2libGU9e307aWYoZXZlbnQuYWx0S2V5JiZzcGVjaWFsIT09ImFsdCIpe21vZGlmKz0iYWx0KyI7fQppZihldmVudC5jdHJsS2V5JiZzcGVjaWFsIT09ImN0cmwiKXttb2RpZis9ImN0cmwrIjt9CmlmKGV2ZW50Lm1ldGFLZXkmJiFldmVudC5jdHJsS2V5JiZzcGVjaWFsIT09Im1ldGEiKXttb2RpZis9Im1ldGErIjt9CmlmKGV2ZW50LnNoaWZ0S2V5JiZzcGVjaWFsIT09InNoaWZ0Iil7bW9kaWYrPSJzaGlmdCsiO30KaWYoc3BlY2lhbCl7cG9zc2libGVbbW9kaWYrc3BlY2lhbF09dHJ1ZTt9ZWxzZXtwb3NzaWJsZVttb2RpZitjaGFyYWN0ZXJdPXRydWU7cG9zc2libGVbbW9kaWYralF1ZXJ5LmhvdGtleXMuc2hpZnROdW1zW2NoYXJhY3Rlcl1dPXRydWU7aWYobW9kaWY9PT0ic2hpZnQrIil7cG9zc2libGVbalF1ZXJ5LmhvdGtleXMuc2hpZnROdW1zW2NoYXJhY3Rlcl1dPXRydWU7fX0KZm9yKHZhciBpPTAsbD1rZXlzLmxlbmd0aDtpPGw7aSsrKXtpZihwb3NzaWJsZVtrZXlzW2ldXSl7cmV0dXJuIG9yaWdIYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fX07fQpqUXVlcnkuZWFjaChbImtleWRvd24iLCJrZXl1cCIsImtleXByZXNzIl0sZnVuY3Rpb24oKXtqUXVlcnkuZXZlbnQuc3BlY2lhbFt0aGlzXT17YWRkOmtleUhhbmRsZXJ9O30pO30pKGpRdWVyeSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS5wbGFjZWhvbGRlci9qcXVlcnkucGxhY2Vob2xkZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCjsoZnVuY3Rpb24od2luZG93LGRvY3VtZW50LCQpe3ZhciBpc0lucHV0U3VwcG9ydGVkPSdwbGFjZWhvbGRlcidpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpLGlzVGV4dGFyZWFTdXBwb3J0ZWQ9J3BsYWNlaG9sZGVyJ2luIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJykscHJvdG90eXBlPSQuZm4sdmFsSG9va3M9JC52YWxIb29rcyxob29rcyxwbGFjZWhvbGRlcjtpZihpc0lucHV0U3VwcG9ydGVkJiZpc1RleHRhcmVhU3VwcG9ydGVkKXtwbGFjZWhvbGRlcj1wcm90b3R5cGUucGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9O3BsYWNlaG9sZGVyLmlucHV0PXBsYWNlaG9sZGVyLnRleHRhcmVhPXRydWU7fWVsc2V7cGxhY2Vob2xkZXI9cHJvdG90eXBlLnBsYWNlaG9sZGVyPWZ1bmN0aW9uKCl7dmFyICR0aGlzPXRoaXM7JHRoaXMuZmlsdGVyKChpc0lucHV0U3VwcG9ydGVkPyd0ZXh0YXJlYSc6JzppbnB1dCcpKydbcGxhY2Vob2xkZXJdJykubm90KCcucGxhY2Vob2xkZXInKS5iaW5kKHsnZm9jdXMucGxhY2Vob2xkZXInOmNsZWFyUGxhY2Vob2xkZXIsJ2JsdXIucGxhY2Vob2xkZXInOnNldFBsYWNlaG9sZGVyfSkuZGF0YSgncGxhY2Vob2xkZXItZW5hYmxlZCcsdHJ1ZSkudHJpZ2dlcignYmx1ci5wbGFjZWhvbGRlcicpO3JldHVybiAkdGhpczt9O3BsYWNlaG9sZGVyLmlucHV0PWlzSW5wdXRTdXBwb3J0ZWQ7cGxhY2Vob2xkZXIudGV4dGFyZWE9aXNUZXh0YXJlYVN1cHBvcnRlZDtob29rcz17J2dldCc6ZnVuY3Rpb24oZWxlbWVudCl7dmFyICRlbGVtZW50PSQoZWxlbWVudCk7cmV0dXJuICRlbGVtZW50LmRhdGEoJ3BsYWNlaG9sZGVyLWVuYWJsZWQnKSYmJGVsZW1lbnQuaGFzQ2xhc3MoJ3BsYWNlaG9sZGVyJyk/Jyc6ZWxlbWVudC52YWx1ZTt9LCdzZXQnOmZ1bmN0aW9uKGVsZW1lbnQsdmFsdWUpe3ZhciAkZWxlbWVudD0kKGVsZW1lbnQpO2lmKCEkZWxlbWVudC5kYXRhKCdwbGFjZWhvbGRlci1lbmFibGVkJykpe3JldHVybiBlbGVtZW50LnZhbHVlPXZhbHVlO30KaWYodmFsdWU9PScnKXtlbGVtZW50LnZhbHVlPXZhbHVlO2lmKGVsZW1lbnQhPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpe3NldFBsYWNlaG9sZGVyLmNhbGwoZWxlbWVudCk7fX1lbHNlIGlmKCRlbGVtZW50Lmhhc0NsYXNzKCdwbGFjZWhvbGRlcicpKXtjbGVhclBsYWNlaG9sZGVyLmNhbGwoZWxlbWVudCx0cnVlLHZhbHVlKXx8KGVsZW1lbnQudmFsdWU9dmFsdWUpO31lbHNle2VsZW1lbnQudmFsdWU9dmFsdWU7fQpyZXR1cm4gJGVsZW1lbnQ7fX07aXNJbnB1dFN1cHBvcnRlZHx8KHZhbEhvb2tzLmlucHV0PWhvb2tzKTtpc1RleHRhcmVhU3VwcG9ydGVkfHwodmFsSG9va3MudGV4dGFyZWE9aG9va3MpOyQoZnVuY3Rpb24oKXskKGRvY3VtZW50KS5kZWxlZ2F0ZSgnZm9ybScsJ3N1Ym1pdC5wbGFjZWhvbGRlcicsZnVuY3Rpb24oKXt2YXIgJGlucHV0cz0kKCcucGxhY2Vob2xkZXInLHRoaXMpLmVhY2goY2xlYXJQbGFjZWhvbGRlcik7c2V0VGltZW91dChmdW5jdGlvbigpeyRpbnB1dHMuZWFjaChzZXRQbGFjZWhvbGRlcik7fSwxMCk7fSk7fSk7JCh3aW5kb3cpLmJpbmQoJ2JlZm9yZXVubG9hZC5wbGFjZWhvbGRlcicsZnVuY3Rpb24oKXskKCcucGxhY2Vob2xkZXInKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy52YWx1ZT0nJzt9KTt9KTt9CmZ1bmN0aW9uIGFyZ3MoZWxlbSl7dmFyIG5ld0F0dHJzPXt9LHJpbmxpbmVqUXVlcnk9L15qUXVlcnlcZCskLzskLmVhY2goZWxlbS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGksYXR0cil7aWYoYXR0ci5zcGVjaWZpZWQmJiFyaW5saW5lalF1ZXJ5LnRlc3QoYXR0ci5uYW1lKSl7bmV3QXR0cnNbYXR0ci5uYW1lXT1hdHRyLnZhbHVlO319KTtyZXR1cm4gbmV3QXR0cnM7fQpmdW5jdGlvbiBjbGVhclBsYWNlaG9sZGVyKGV2ZW50LHZhbHVlKXt2YXIgaW5wdXQ9dGhpcywkaW5wdXQ9JChpbnB1dCk7aWYoaW5wdXQudmFsdWU9PSRpbnB1dC5hdHRyKCdwbGFjZWhvbGRlcicpJiYkaW5wdXQuaGFzQ2xhc3MoJ3BsYWNlaG9sZGVyJykpe2lmKCRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci1wYXNzd29yZCcpKXskaW5wdXQ9JGlucHV0LmhpZGUoKS5uZXh0KCkuc2hvdygpLmF0dHIoJ2lkJywkaW5wdXQucmVtb3ZlQXR0cignaWQnKS5kYXRhKCdwbGFjZWhvbGRlci1pZCcpKTtpZihldmVudD09PXRydWUpe3JldHVybiAkaW5wdXRbMF0udmFsdWU9dmFsdWU7fQokaW5wdXQuZm9jdXMoKTt9ZWxzZXtpbnB1dC52YWx1ZT0nJzskaW5wdXQucmVtb3ZlQ2xhc3MoJ3BsYWNlaG9sZGVyJyk7aW5wdXQ9PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJmlucHV0LnNlbGVjdCgpO319fQpmdW5jdGlvbiBzZXRQbGFjZWhvbGRlcigpe3ZhciAkcmVwbGFjZW1lbnQsaW5wdXQ9dGhpcywkaW5wdXQ9JChpbnB1dCksJG9yaWdJbnB1dD0kaW5wdXQsaWQ9dGhpcy5pZDtpZihpbnB1dC52YWx1ZT09Jycpe2lmKGlucHV0LnR5cGU9PSdwYXNzd29yZCcpe2lmKCEkaW5wdXQuZGF0YSgncGxhY2Vob2xkZXItdGV4dGlucHV0Jykpe3RyeXskcmVwbGFjZW1lbnQ9JGlucHV0LmNsb25lKCkuYXR0cih7J3R5cGUnOid0ZXh0J30pO31jYXRjaChlKXskcmVwbGFjZW1lbnQ9JCgnPGlucHV0PicpLmF0dHIoJC5leHRlbmQoYXJncyh0aGlzKSx7J3R5cGUnOid0ZXh0J30pKTt9CiRyZXBsYWNlbWVudC5yZW1vdmVBdHRyKCduYW1lJykuZGF0YSh7J3BsYWNlaG9sZGVyLXBhc3N3b3JkJzp0cnVlLCdwbGFjZWhvbGRlci1pZCc6aWR9KS5iaW5kKCdmb2N1cy5wbGFjZWhvbGRlcicsY2xlYXJQbGFjZWhvbGRlcik7JGlucHV0LmRhdGEoeydwbGFjZWhvbGRlci10ZXh0aW5wdXQnOiRyZXBsYWNlbWVudCwncGxhY2Vob2xkZXItaWQnOmlkfSkuYmVmb3JlKCRyZXBsYWNlbWVudCk7fQokaW5wdXQ9JGlucHV0LnJlbW92ZUF0dHIoJ2lkJykuaGlkZSgpLnByZXYoKS5hdHRyKCdpZCcsaWQpLnNob3coKTt9CiRpbnB1dC5hZGRDbGFzcygncGxhY2Vob2xkZXInKTskaW5wdXRbMF0udmFsdWU9JGlucHV0LmF0dHIoJ3BsYWNlaG9sZGVyJyk7fWVsc2V7JGlucHV0LnJlbW92ZUNsYXNzKCdwbGFjZWhvbGRlcicpO319fSh0aGlzLGRvY3VtZW50LGpRdWVyeSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qcXVlcnkuZm9ybS9qcXVlcnkuZm9ybS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGZhY3RvcnkpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsnanF1ZXJ5J10sZmFjdG9yeSk7fWVsc2V7ZmFjdG9yeSgodHlwZW9mKGpRdWVyeSkhPSd1bmRlZmluZWQnKT9qUXVlcnk6d2luZG93LlplcHRvKTt9fQooZnVuY3Rpb24oJCl7InVzZSBzdHJpY3QiO3ZhciBmZWF0dXJlPXt9O2ZlYXR1cmUuZmlsZWFwaT0kKCI8aW5wdXQgdHlwZT0nZmlsZScvPiIpLmdldCgwKS5maWxlcyE9PXVuZGVmaW5lZDtmZWF0dXJlLmZvcm1kYXRhPXdpbmRvdy5Gb3JtRGF0YSE9PXVuZGVmaW5lZDt2YXIgaGFzUHJvcD0hISQuZm4ucHJvcDskLmZuLmF0dHIyPWZ1bmN0aW9uKCl7aWYoIWhhc1Byb3Ape3JldHVybiB0aGlzLmF0dHIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30KdmFyIHZhbD10aGlzLnByb3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCh2YWwmJnZhbC5qcXVlcnkpfHx0eXBlb2YgdmFsPT09J3N0cmluZycpe3JldHVybiB2YWw7fQpyZXR1cm4gdGhpcy5hdHRyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9OyQuZm4uYWpheFN1Ym1pdD1mdW5jdGlvbihvcHRpb25zKXtpZighdGhpcy5sZW5ndGgpe2xvZygnYWpheFN1Ym1pdDogc2tpcHBpbmcgc3VibWl0IHByb2Nlc3MgLSBubyBlbGVtZW50IHNlbGVjdGVkJyk7cmV0dXJuIHRoaXM7fQp2YXIgbWV0aG9kLGFjdGlvbix1cmwsJGZvcm09dGhpcztpZih0eXBlb2Ygb3B0aW9ucz09J2Z1bmN0aW9uJyl7b3B0aW9ucz17c3VjY2VzczpvcHRpb25zfTt9CmVsc2UgaWYob3B0aW9ucz09PXVuZGVmaW5lZCl7b3B0aW9ucz17fTt9Cm1ldGhvZD1vcHRpb25zLnR5cGV8fHRoaXMuYXR0cjIoJ21ldGhvZCcpO2FjdGlvbj1vcHRpb25zLnVybHx8dGhpcy5hdHRyMignYWN0aW9uJyk7dXJsPSh0eXBlb2YgYWN0aW9uPT09J3N0cmluZycpPyQudHJpbShhY3Rpb24pOicnO3VybD11cmx8fHdpbmRvdy5sb2NhdGlvbi5ocmVmfHwnJztpZih1cmwpe3VybD0odXJsLm1hdGNoKC9eKFteI10rKS8pfHxbXSlbMV07fQpvcHRpb25zPSQuZXh0ZW5kKHRydWUse3VybDp1cmwsc3VjY2VzczokLmFqYXhTZXR0aW5ncy5zdWNjZXNzLHR5cGU6bWV0aG9kfHwkLmFqYXhTZXR0aW5ncy50eXBlLGlmcmFtZVNyYzovXmh0dHBzL2kudGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZnx8JycpPydqYXZhc2NyaXB0OmZhbHNlJzonYWJvdXQ6YmxhbmsnfSxvcHRpb25zKTt2YXIgdmV0bz17fTt0aGlzLnRyaWdnZXIoJ2Zvcm0tcHJlLXNlcmlhbGl6ZScsW3RoaXMsb3B0aW9ucyx2ZXRvXSk7aWYodmV0by52ZXRvKXtsb2coJ2FqYXhTdWJtaXQ6IHN1Ym1pdCB2ZXRvZWQgdmlhIGZvcm0tcHJlLXNlcmlhbGl6ZSB0cmlnZ2VyJyk7cmV0dXJuIHRoaXM7fQppZihvcHRpb25zLmJlZm9yZVNlcmlhbGl6ZSYmb3B0aW9ucy5iZWZvcmVTZXJpYWxpemUodGhpcyxvcHRpb25zKT09PWZhbHNlKXtsb2coJ2FqYXhTdWJtaXQ6IHN1Ym1pdCBhYm9ydGVkIHZpYSBiZWZvcmVTZXJpYWxpemUgY2FsbGJhY2snKTtyZXR1cm4gdGhpczt9CnZhciB0cmFkaXRpb25hbD1vcHRpb25zLnRyYWRpdGlvbmFsO2lmKHRyYWRpdGlvbmFsPT09dW5kZWZpbmVkKXt0cmFkaXRpb25hbD0kLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDt9CnZhciBlbGVtZW50cz1bXTt2YXIgcXgsYT10aGlzLmZvcm1Ub0FycmF5KG9wdGlvbnMuc2VtYW50aWMsZWxlbWVudHMpO2lmKG9wdGlvbnMuZGF0YSl7b3B0aW9ucy5leHRyYURhdGE9b3B0aW9ucy5kYXRhO3F4PSQucGFyYW0ob3B0aW9ucy5kYXRhLHRyYWRpdGlvbmFsKTt9CmlmKG9wdGlvbnMuYmVmb3JlU3VibWl0JiZvcHRpb25zLmJlZm9yZVN1Ym1pdChhLHRoaXMsb3B0aW9ucyk9PT1mYWxzZSl7bG9nKCdhamF4U3VibWl0OiBzdWJtaXQgYWJvcnRlZCB2aWEgYmVmb3JlU3VibWl0IGNhbGxiYWNrJyk7cmV0dXJuIHRoaXM7fQp0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LXZhbGlkYXRlJyxbYSx0aGlzLG9wdGlvbnMsdmV0b10pO2lmKHZldG8udmV0byl7bG9nKCdhamF4U3VibWl0OiBzdWJtaXQgdmV0b2VkIHZpYSBmb3JtLXN1Ym1pdC12YWxpZGF0ZSB0cmlnZ2VyJyk7cmV0dXJuIHRoaXM7fQp2YXIgcT0kLnBhcmFtKGEsdHJhZGl0aW9uYWwpO2lmKHF4KXtxPShxPyhxKycmJytxeCk6cXgpO30KaWYob3B0aW9ucy50eXBlLnRvVXBwZXJDYXNlKCk9PSdHRVQnKXtvcHRpb25zLnVybCs9KG9wdGlvbnMudXJsLmluZGV4T2YoJz8nKT49MD8nJic6Jz8nKStxO29wdGlvbnMuZGF0YT1udWxsO30KZWxzZXtvcHRpb25zLmRhdGE9cTt9CnZhciBjYWxsYmFja3M9W107aWYob3B0aW9ucy5yZXNldEZvcm0pe2NhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCl7JGZvcm0ucmVzZXRGb3JtKCk7fSk7fQppZihvcHRpb25zLmNsZWFyRm9ybSl7Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oKXskZm9ybS5jbGVhckZvcm0ob3B0aW9ucy5pbmNsdWRlSGlkZGVuKTt9KTt9CmlmKCFvcHRpb25zLmRhdGFUeXBlJiZvcHRpb25zLnRhcmdldCl7dmFyIG9sZFN1Y2Nlc3M9b3B0aW9ucy5zdWNjZXNzfHxmdW5jdGlvbigpe307Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oZGF0YSl7dmFyIGZuPW9wdGlvbnMucmVwbGFjZVRhcmdldD8ncmVwbGFjZVdpdGgnOidodG1sJzskKG9wdGlvbnMudGFyZ2V0KVtmbl0oZGF0YSkuZWFjaChvbGRTdWNjZXNzLGFyZ3VtZW50cyk7fSk7fQplbHNlIGlmKG9wdGlvbnMuc3VjY2Vzcyl7Y2FsbGJhY2tzLnB1c2gob3B0aW9ucy5zdWNjZXNzKTt9Cm9wdGlvbnMuc3VjY2Vzcz1mdW5jdGlvbihkYXRhLHN0YXR1cyx4aHIpe3ZhciBjb250ZXh0PW9wdGlvbnMuY29udGV4dHx8dGhpcztmb3IodmFyIGk9MCxtYXg9Y2FsbGJhY2tzLmxlbmd0aDtpPG1heDtpKyspe2NhbGxiYWNrc1tpXS5hcHBseShjb250ZXh0LFtkYXRhLHN0YXR1cyx4aHJ8fCRmb3JtLCRmb3JtXSk7fX07aWYob3B0aW9ucy5lcnJvcil7dmFyIG9sZEVycm9yPW9wdGlvbnMuZXJyb3I7b3B0aW9ucy5lcnJvcj1mdW5jdGlvbih4aHIsc3RhdHVzLGVycm9yKXt2YXIgY29udGV4dD1vcHRpb25zLmNvbnRleHR8fHRoaXM7b2xkRXJyb3IuYXBwbHkoY29udGV4dCxbeGhyLHN0YXR1cyxlcnJvciwkZm9ybV0pO307fQppZihvcHRpb25zLmNvbXBsZXRlKXt2YXIgb2xkQ29tcGxldGU9b3B0aW9ucy5jb21wbGV0ZTtvcHRpb25zLmNvbXBsZXRlPWZ1bmN0aW9uKHhocixzdGF0dXMpe3ZhciBjb250ZXh0PW9wdGlvbnMuY29udGV4dHx8dGhpcztvbGRDb21wbGV0ZS5hcHBseShjb250ZXh0LFt4aHIsc3RhdHVzLCRmb3JtXSk7fTt9CnZhciBmaWxlSW5wdXRzPSQoJ2lucHV0W3R5cGU9ZmlsZV06ZW5hYmxlZCcsdGhpcykuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykudmFsKCkhPT0nJzt9KTt2YXIgaGFzRmlsZUlucHV0cz1maWxlSW5wdXRzLmxlbmd0aD4wO3ZhciBtcD0nbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7dmFyIG11bHRpcGFydD0oJGZvcm0uYXR0cignZW5jdHlwZScpPT1tcHx8JGZvcm0uYXR0cignZW5jb2RpbmcnKT09bXApO3ZhciBmaWxlQVBJPWZlYXR1cmUuZmlsZWFwaSYmZmVhdHVyZS5mb3JtZGF0YTtsb2coImZpbGVBUEkgOiIrZmlsZUFQSSk7dmFyIHNob3VsZFVzZUZyYW1lPShoYXNGaWxlSW5wdXRzfHxtdWx0aXBhcnQpJiYhZmlsZUFQSTt2YXIganF4aHI7aWYob3B0aW9ucy5pZnJhbWUhPT1mYWxzZSYmKG9wdGlvbnMuaWZyYW1lfHxzaG91bGRVc2VGcmFtZSkpe2lmKG9wdGlvbnMuY2xvc2VLZWVwQWxpdmUpeyQuZ2V0KG9wdGlvbnMuY2xvc2VLZWVwQWxpdmUsZnVuY3Rpb24oKXtqcXhocj1maWxlVXBsb2FkSWZyYW1lKGEpO30pO30KZWxzZXtqcXhocj1maWxlVXBsb2FkSWZyYW1lKGEpO319CmVsc2UgaWYoKGhhc0ZpbGVJbnB1dHN8fG11bHRpcGFydCkmJmZpbGVBUEkpe2pxeGhyPWZpbGVVcGxvYWRYaHIoYSk7fQplbHNle2pxeGhyPSQuYWpheChvcHRpb25zKTt9CiRmb3JtLnJlbW92ZURhdGEoJ2pxeGhyJykuZGF0YSgnanF4aHInLGpxeGhyKTtmb3IodmFyIGs9MDtrPGVsZW1lbnRzLmxlbmd0aDtrKyspe2VsZW1lbnRzW2tdPW51bGw7fQp0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LW5vdGlmeScsW3RoaXMsb3B0aW9uc10pO3JldHVybiB0aGlzO2Z1bmN0aW9uIGRlZXBTZXJpYWxpemUoZXh0cmFEYXRhKXt2YXIgc2VyaWFsaXplZD0kLnBhcmFtKGV4dHJhRGF0YSxvcHRpb25zLnRyYWRpdGlvbmFsKS5zcGxpdCgnJicpO3ZhciBsZW49c2VyaWFsaXplZC5sZW5ndGg7dmFyIHJlc3VsdD1bXTt2YXIgaSxwYXJ0O2ZvcihpPTA7aTxsZW47aSsrKXtzZXJpYWxpemVkW2ldPXNlcmlhbGl6ZWRbaV0ucmVwbGFjZSgvXCsvZywnICcpO3BhcnQ9c2VyaWFsaXplZFtpXS5zcGxpdCgnPScpO3Jlc3VsdC5wdXNoKFtkZWNvZGVVUklDb21wb25lbnQocGFydFswXSksZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRbMV0pXSk7fQpyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gZmlsZVVwbG9hZFhocihhKXt2YXIgZm9ybWRhdGE9bmV3IEZvcm1EYXRhKCk7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe2Zvcm1kYXRhLmFwcGVuZChhW2ldLm5hbWUsYVtpXS52YWx1ZSk7fQppZihvcHRpb25zLmV4dHJhRGF0YSl7dmFyIHNlcmlhbGl6ZWREYXRhPWRlZXBTZXJpYWxpemUob3B0aW9ucy5leHRyYURhdGEpO2ZvcihpPTA7aTxzZXJpYWxpemVkRGF0YS5sZW5ndGg7aSsrKXtpZihzZXJpYWxpemVkRGF0YVtpXSl7Zm9ybWRhdGEuYXBwZW5kKHNlcmlhbGl6ZWREYXRhW2ldWzBdLHNlcmlhbGl6ZWREYXRhW2ldWzFdKTt9fX0Kb3B0aW9ucy5kYXRhPW51bGw7dmFyIHM9JC5leHRlbmQodHJ1ZSx7fSwkLmFqYXhTZXR0aW5ncyxvcHRpb25zLHtjb250ZW50VHlwZTpmYWxzZSxwcm9jZXNzRGF0YTpmYWxzZSxjYWNoZTpmYWxzZSx0eXBlOm1ldGhvZHx8J1BPU1QnfSk7aWYob3B0aW9ucy51cGxvYWRQcm9ncmVzcyl7cy54aHI9ZnVuY3Rpb24oKXt2YXIgeGhyPSQuYWpheFNldHRpbmdzLnhocigpO2lmKHhoci51cGxvYWQpe3hoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLGZ1bmN0aW9uKGV2ZW50KXt2YXIgcGVyY2VudD0wO3ZhciBwb3NpdGlvbj1ldmVudC5sb2FkZWR8fGV2ZW50LnBvc2l0aW9uO3ZhciB0b3RhbD1ldmVudC50b3RhbDtpZihldmVudC5sZW5ndGhDb21wdXRhYmxlKXtwZXJjZW50PU1hdGguY2VpbChwb3NpdGlvbi90b3RhbCoxMDApO30Kb3B0aW9ucy51cGxvYWRQcm9ncmVzcyhldmVudCxwb3NpdGlvbix0b3RhbCxwZXJjZW50KTt9LGZhbHNlKTt9CnJldHVybiB4aHI7fTt9CnMuZGF0YT1udWxsO3ZhciBiZWZvcmVTZW5kPXMuYmVmb3JlU2VuZDtzLmJlZm9yZVNlbmQ9ZnVuY3Rpb24oeGhyLG8pe2lmKG9wdGlvbnMuZm9ybURhdGEpe28uZGF0YT1vcHRpb25zLmZvcm1EYXRhO30KZWxzZXtvLmRhdGE9Zm9ybWRhdGE7fQppZihiZWZvcmVTZW5kKXtiZWZvcmVTZW5kLmNhbGwodGhpcyx4aHIsbyk7fX07cmV0dXJuICQuYWpheChzKTt9CmZ1bmN0aW9uIGZpbGVVcGxvYWRJZnJhbWUoYSl7dmFyIGZvcm09JGZvcm1bMF0sZWwsaSxzLGcsaWQsJGlvLGlvLHhocixzdWIsbix0aW1lZE91dCx0aW1lb3V0SGFuZGxlO3ZhciBkZWZlcnJlZD0kLkRlZmVycmVkKCk7ZGVmZXJyZWQuYWJvcnQ9ZnVuY3Rpb24oc3RhdHVzKXt4aHIuYWJvcnQoc3RhdHVzKTt9O2lmKGEpe2ZvcihpPTA7aTxlbGVtZW50cy5sZW5ndGg7aSsrKXtlbD0kKGVsZW1lbnRzW2ldKTtpZihoYXNQcm9wKXtlbC5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO30KZWxzZXtlbC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO319fQpzPSQuZXh0ZW5kKHRydWUse30sJC5hamF4U2V0dGluZ3Msb3B0aW9ucyk7cy5jb250ZXh0PXMuY29udGV4dHx8cztpZD0nanFGb3JtSU8nKyhuZXcgRGF0ZSgpLmdldFRpbWUoKSk7aWYocy5pZnJhbWVUYXJnZXQpeyRpbz0kKHMuaWZyYW1lVGFyZ2V0KTtuPSRpby5hdHRyMignbmFtZScpO2lmKCFuKXskaW8uYXR0cjIoJ25hbWUnLGlkKTt9CmVsc2V7aWQ9bjt9fQplbHNleyRpbz0kKCc8aWZyYW1lIG5hbWU9IicraWQrJyIgc3JjPSInK3MuaWZyYW1lU3JjKyciIC8+Jyk7JGlvLmNzcyh7cG9zaXRpb246J2Fic29sdXRlJyx0b3A6Jy0xMDAwcHgnLGxlZnQ6Jy0xMDAwcHgnfSk7fQppbz0kaW9bMF07eGhyPXthYm9ydGVkOjAscmVzcG9uc2VUZXh0Om51bGwscmVzcG9uc2VYTUw6bnVsbCxzdGF0dXM6MCxzdGF0dXNUZXh0OiduL2EnLGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe30sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oKXt9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oKXt9LGFib3J0OmZ1bmN0aW9uKHN0YXR1cyl7dmFyIGU9KHN0YXR1cz09PSd0aW1lb3V0Jz8ndGltZW91dCc6J2Fib3J0ZWQnKTtsb2coJ2Fib3J0aW5nIHVwbG9hZC4uLiAnK2UpO3RoaXMuYWJvcnRlZD0xO3RyeXtpZihpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKXtpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKCdTdG9wJyk7fX0KY2F0Y2goaWdub3JlKXt9CiRpby5hdHRyKCdzcmMnLHMuaWZyYW1lU3JjKTt4aHIuZXJyb3I9ZTtpZihzLmVycm9yKXtzLmVycm9yLmNhbGwocy5jb250ZXh0LHhocixlLHN0YXR1cyk7fQppZihnKXskLmV2ZW50LnRyaWdnZXIoImFqYXhFcnJvciIsW3hocixzLGVdKTt9CmlmKHMuY29tcGxldGUpe3MuY29tcGxldGUuY2FsbChzLmNvbnRleHQseGhyLGUpO319fTtnPXMuZ2xvYmFsO2lmKGcmJjA9PT0kLmFjdGl2ZSsrKXskLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpO30KaWYoZyl7JC5ldmVudC50cmlnZ2VyKCJhamF4U2VuZCIsW3hocixzXSk7fQppZihzLmJlZm9yZVNlbmQmJnMuYmVmb3JlU2VuZC5jYWxsKHMuY29udGV4dCx4aHIscyk9PT1mYWxzZSl7aWYocy5nbG9iYWwpeyQuYWN0aXZlLS07fQpkZWZlcnJlZC5yZWplY3QoKTtyZXR1cm4gZGVmZXJyZWQ7fQppZih4aHIuYWJvcnRlZCl7ZGVmZXJyZWQucmVqZWN0KCk7cmV0dXJuIGRlZmVycmVkO30Kc3ViPWZvcm0uY2xrO2lmKHN1Yil7bj1zdWIubmFtZTtpZihuJiYhc3ViLmRpc2FibGVkKXtzLmV4dHJhRGF0YT1zLmV4dHJhRGF0YXx8e307cy5leHRyYURhdGFbbl09c3ViLnZhbHVlO2lmKHN1Yi50eXBlPT0iaW1hZ2UiKXtzLmV4dHJhRGF0YVtuKycueCddPWZvcm0uY2xrX3g7cy5leHRyYURhdGFbbisnLnknXT1mb3JtLmNsa195O319fQp2YXIgQ0xJRU5UX1RJTUVPVVRfQUJPUlQ9MTt2YXIgU0VSVkVSX0FCT1JUPTI7ZnVuY3Rpb24gZ2V0RG9jKGZyYW1lKXt2YXIgZG9jPW51bGw7dHJ5e2lmKGZyYW1lLmNvbnRlbnRXaW5kb3cpe2RvYz1mcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O319Y2F0Y2goZXJyKXtsb2coJ2Nhbm5vdCBnZXQgaWZyYW1lLmNvbnRlbnRXaW5kb3cgZG9jdW1lbnQ6ICcrZXJyKTt9CmlmKGRvYyl7cmV0dXJuIGRvYzt9CnRyeXtkb2M9ZnJhbWUuY29udGVudERvY3VtZW50P2ZyYW1lLmNvbnRlbnREb2N1bWVudDpmcmFtZS5kb2N1bWVudDt9Y2F0Y2goZXJyKXtsb2coJ2Nhbm5vdCBnZXQgaWZyYW1lLmNvbnRlbnREb2N1bWVudDogJytlcnIpO2RvYz1mcmFtZS5kb2N1bWVudDt9CnJldHVybiBkb2M7fQp2YXIgY3NyZl90b2tlbj0kKCdtZXRhW25hbWU9Y3NyZi10b2tlbl0nKS5hdHRyKCdjb250ZW50Jyk7dmFyIGNzcmZfcGFyYW09JCgnbWV0YVtuYW1lPWNzcmYtcGFyYW1dJykuYXR0cignY29udGVudCcpO2lmKGNzcmZfcGFyYW0mJmNzcmZfdG9rZW4pe3MuZXh0cmFEYXRhPXMuZXh0cmFEYXRhfHx7fTtzLmV4dHJhRGF0YVtjc3JmX3BhcmFtXT1jc3JmX3Rva2VuO30KZnVuY3Rpb24gZG9TdWJtaXQoKXt2YXIgdD0kZm9ybS5hdHRyMigndGFyZ2V0JyksYT0kZm9ybS5hdHRyMignYWN0aW9uJyksbXA9J211bHRpcGFydC9mb3JtLWRhdGEnLGV0PSRmb3JtLmF0dHIoJ2VuY3R5cGUnKXx8JGZvcm0uYXR0cignZW5jb2RpbmcnKXx8bXA7Zm9ybS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsaWQpO2lmKCFtZXRob2R8fC9wb3N0L2kudGVzdChtZXRob2QpKXtmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywnUE9TVCcpO30KaWYoYSE9cy51cmwpe2Zvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLHMudXJsKTt9CmlmKCFzLnNraXBFbmNvZGluZ092ZXJyaWRlJiYoIW1ldGhvZHx8L3Bvc3QvaS50ZXN0KG1ldGhvZCkpKXskZm9ybS5hdHRyKHtlbmNvZGluZzonbXVsdGlwYXJ0L2Zvcm0tZGF0YScsZW5jdHlwZTonbXVsdGlwYXJ0L2Zvcm0tZGF0YSd9KTt9CmlmKHMudGltZW91dCl7dGltZW91dEhhbmRsZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGltZWRPdXQ9dHJ1ZTtjYihDTElFTlRfVElNRU9VVF9BQk9SVCk7fSxzLnRpbWVvdXQpO30KZnVuY3Rpb24gY2hlY2tTdGF0ZSgpe3RyeXt2YXIgc3RhdGU9Z2V0RG9jKGlvKS5yZWFkeVN0YXRlO2xvZygnc3RhdGUgPSAnK3N0YXRlKTtpZihzdGF0ZSYmc3RhdGUudG9Mb3dlckNhc2UoKT09J3VuaW5pdGlhbGl6ZWQnKXtzZXRUaW1lb3V0KGNoZWNrU3RhdGUsNTApO319CmNhdGNoKGUpe2xvZygnU2VydmVyIGFib3J0OiAnLGUsJyAoJyxlLm5hbWUsJyknKTtjYihTRVJWRVJfQUJPUlQpO2lmKHRpbWVvdXRIYW5kbGUpe2NsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTt9CnRpbWVvdXRIYW5kbGU9dW5kZWZpbmVkO319CnZhciBleHRyYUlucHV0cz1bXTt0cnl7aWYocy5leHRyYURhdGEpe2Zvcih2YXIgbiBpbiBzLmV4dHJhRGF0YSl7aWYocy5leHRyYURhdGEuaGFzT3duUHJvcGVydHkobikpe2lmKCQuaXNQbGFpbk9iamVjdChzLmV4dHJhRGF0YVtuXSkmJnMuZXh0cmFEYXRhW25dLmhhc093blByb3BlcnR5KCduYW1lJykmJnMuZXh0cmFEYXRhW25dLmhhc093blByb3BlcnR5KCd2YWx1ZScpKXtleHRyYUlucHV0cy5wdXNoKCQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Iicrcy5leHRyYURhdGFbbl0ubmFtZSsnIj4nKS52YWwocy5leHRyYURhdGFbbl0udmFsdWUpLmFwcGVuZFRvKGZvcm0pWzBdKTt9ZWxzZXtleHRyYUlucHV0cy5wdXNoKCQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IicrbisnIj4nKS52YWwocy5leHRyYURhdGFbbl0pLmFwcGVuZFRvKGZvcm0pWzBdKTt9fX19CmlmKCFzLmlmcmFtZVRhcmdldCl7JGlvLmFwcGVuZFRvKCdib2R5Jyk7fQppZihpby5hdHRhY2hFdmVudCl7aW8uYXR0YWNoRXZlbnQoJ29ubG9hZCcsY2IpO30KZWxzZXtpby5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxjYixmYWxzZSk7fQpzZXRUaW1lb3V0KGNoZWNrU3RhdGUsMTUpO3RyeXtmb3JtLnN1Ym1pdCgpO31jYXRjaChlcnIpe3ZhciBzdWJtaXRGbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJykuc3VibWl0O3N1Ym1pdEZuLmFwcGx5KGZvcm0pO319CmZpbmFsbHl7Zm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsYSk7Zm9ybS5zZXRBdHRyaWJ1dGUoJ2VuY3R5cGUnLGV0KTtpZih0KXtmb3JtLnNldEF0dHJpYnV0ZSgndGFyZ2V0Jyx0KTt9ZWxzZXskZm9ybS5yZW1vdmVBdHRyKCd0YXJnZXQnKTt9CiQoZXh0cmFJbnB1dHMpLnJlbW92ZSgpO319CmlmKHMuZm9yY2VTeW5jKXtkb1N1Ym1pdCgpO30KZWxzZXtzZXRUaW1lb3V0KGRvU3VibWl0LDEwKTt9CnZhciBkYXRhLGRvYyxkb21DaGVja0NvdW50PTUwLGNhbGxiYWNrUHJvY2Vzc2VkO2Z1bmN0aW9uIGNiKGUpe2lmKHhoci5hYm9ydGVkfHxjYWxsYmFja1Byb2Nlc3NlZCl7cmV0dXJuO30KZG9jPWdldERvYyhpbyk7aWYoIWRvYyl7bG9nKCdjYW5ub3QgYWNjZXNzIHJlc3BvbnNlIGRvY3VtZW50Jyk7ZT1TRVJWRVJfQUJPUlQ7fQppZihlPT09Q0xJRU5UX1RJTUVPVVRfQUJPUlQmJnhocil7eGhyLmFib3J0KCd0aW1lb3V0Jyk7ZGVmZXJyZWQucmVqZWN0KHhociwndGltZW91dCcpO3JldHVybjt9CmVsc2UgaWYoZT09U0VSVkVSX0FCT1JUJiZ4aHIpe3hoci5hYm9ydCgnc2VydmVyIGFib3J0Jyk7ZGVmZXJyZWQucmVqZWN0KHhociwnZXJyb3InLCdzZXJ2ZXIgYWJvcnQnKTtyZXR1cm47fQppZighZG9jfHxkb2MubG9jYXRpb24uaHJlZj09cy5pZnJhbWVTcmMpe2lmKCF0aW1lZE91dCl7cmV0dXJuO319CmlmKGlvLmRldGFjaEV2ZW50KXtpby5kZXRhY2hFdmVudCgnb25sb2FkJyxjYik7fQplbHNle2lvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLGNiLGZhbHNlKTt9CnZhciBzdGF0dXM9J3N1Y2Nlc3MnLGVyck1zZzt0cnl7aWYodGltZWRPdXQpe3Rocm93J3RpbWVvdXQnO30KdmFyIGlzWG1sPXMuZGF0YVR5cGU9PSd4bWwnfHxkb2MuWE1MRG9jdW1lbnR8fCQuaXNYTUxEb2MoZG9jKTtsb2coJ2lzWG1sPScraXNYbWwpO2lmKCFpc1htbCYmd2luZG93Lm9wZXJhJiYoZG9jLmJvZHk9PT1udWxsfHwhZG9jLmJvZHkuaW5uZXJIVE1MKSl7aWYoLS1kb21DaGVja0NvdW50KXtsb2coJ3JlcXVlaW5nIG9uTG9hZCBjYWxsYmFjaywgRE9NIG5vdCBhdmFpbGFibGUnKTtzZXRUaW1lb3V0KGNiLDI1MCk7cmV0dXJuO319CnZhciBkb2NSb290PWRvYy5ib2R5P2RvYy5ib2R5OmRvYy5kb2N1bWVudEVsZW1lbnQ7eGhyLnJlc3BvbnNlVGV4dD1kb2NSb290P2RvY1Jvb3QuaW5uZXJIVE1MOm51bGw7eGhyLnJlc3BvbnNlWE1MPWRvYy5YTUxEb2N1bWVudD9kb2MuWE1MRG9jdW1lbnQ6ZG9jO2lmKGlzWG1sKXtzLmRhdGFUeXBlPSd4bWwnO30KeGhyLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGhlYWRlcil7dmFyIGhlYWRlcnM9eydjb250ZW50LXR5cGUnOnMuZGF0YVR5cGV9O3JldHVybiBoZWFkZXJzW2hlYWRlci50b0xvd2VyQ2FzZSgpXTt9O2lmKGRvY1Jvb3Qpe3hoci5zdGF0dXM9TnVtYmVyKGRvY1Jvb3QuZ2V0QXR0cmlidXRlKCdzdGF0dXMnKSl8fHhoci5zdGF0dXM7eGhyLnN0YXR1c1RleHQ9ZG9jUm9vdC5nZXRBdHRyaWJ1dGUoJ3N0YXR1c1RleHQnKXx8eGhyLnN0YXR1c1RleHQ7fQp2YXIgZHQ9KHMuZGF0YVR5cGV8fCcnKS50b0xvd2VyQ2FzZSgpO3ZhciBzY3I9Lyhqc29ufHNjcmlwdHx0ZXh0KS8udGVzdChkdCk7aWYoc2NyfHxzLnRleHRhcmVhKXt2YXIgdGE9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0ZXh0YXJlYScpWzBdO2lmKHRhKXt4aHIucmVzcG9uc2VUZXh0PXRhLnZhbHVlO3hoci5zdGF0dXM9TnVtYmVyKHRhLmdldEF0dHJpYnV0ZSgnc3RhdHVzJykpfHx4aHIuc3RhdHVzO3hoci5zdGF0dXNUZXh0PXRhLmdldEF0dHJpYnV0ZSgnc3RhdHVzVGV4dCcpfHx4aHIuc3RhdHVzVGV4dDt9CmVsc2UgaWYoc2NyKXt2YXIgcHJlPWRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncHJlJylbMF07dmFyIGI9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07aWYocHJlKXt4aHIucmVzcG9uc2VUZXh0PXByZS50ZXh0Q29udGVudD9wcmUudGV4dENvbnRlbnQ6cHJlLmlubmVyVGV4dDt9CmVsc2UgaWYoYil7eGhyLnJlc3BvbnNlVGV4dD1iLnRleHRDb250ZW50P2IudGV4dENvbnRlbnQ6Yi5pbm5lclRleHQ7fX19CmVsc2UgaWYoZHQ9PSd4bWwnJiYheGhyLnJlc3BvbnNlWE1MJiZ4aHIucmVzcG9uc2VUZXh0KXt4aHIucmVzcG9uc2VYTUw9dG9YbWwoeGhyLnJlc3BvbnNlVGV4dCk7fQp0cnl7ZGF0YT1odHRwRGF0YSh4aHIsZHQscyk7fQpjYXRjaChlcnIpe3N0YXR1cz0ncGFyc2VyZXJyb3InO3hoci5lcnJvcj1lcnJNc2c9KGVycnx8c3RhdHVzKTt9fQpjYXRjaChlcnIpe2xvZygnZXJyb3IgY2F1Z2h0OiAnLGVycik7c3RhdHVzPSdlcnJvcic7eGhyLmVycm9yPWVyck1zZz0oZXJyfHxzdGF0dXMpO30KaWYoeGhyLmFib3J0ZWQpe2xvZygndXBsb2FkIGFib3J0ZWQnKTtzdGF0dXM9bnVsbDt9CmlmKHhoci5zdGF0dXMpe3N0YXR1cz0oeGhyLnN0YXR1cz49MjAwJiZ4aHIuc3RhdHVzPDMwMHx8eGhyLnN0YXR1cz09PTMwNCk/J3N1Y2Nlc3MnOidlcnJvcic7fQppZihzdGF0dXM9PT0nc3VjY2Vzcycpe2lmKHMuc3VjY2Vzcyl7cy5zdWNjZXNzLmNhbGwocy5jb250ZXh0LGRhdGEsJ3N1Y2Nlc3MnLHhocik7fQpkZWZlcnJlZC5yZXNvbHZlKHhoci5yZXNwb25zZVRleHQsJ3N1Y2Nlc3MnLHhocik7aWYoZyl7JC5ldmVudC50cmlnZ2VyKCJhamF4U3VjY2VzcyIsW3hocixzXSk7fX0KZWxzZSBpZihzdGF0dXMpe2lmKGVyck1zZz09PXVuZGVmaW5lZCl7ZXJyTXNnPXhoci5zdGF0dXNUZXh0O30KaWYocy5lcnJvcil7cy5lcnJvci5jYWxsKHMuY29udGV4dCx4aHIsc3RhdHVzLGVyck1zZyk7fQpkZWZlcnJlZC5yZWplY3QoeGhyLCdlcnJvcicsZXJyTXNnKTtpZihnKXskLmV2ZW50LnRyaWdnZXIoImFqYXhFcnJvciIsW3hocixzLGVyck1zZ10pO319CmlmKGcpeyQuZXZlbnQudHJpZ2dlcigiYWpheENvbXBsZXRlIixbeGhyLHNdKTt9CmlmKGcmJiEtLSQuYWN0aXZlKXskLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIik7fQppZihzLmNvbXBsZXRlKXtzLmNvbXBsZXRlLmNhbGwocy5jb250ZXh0LHhocixzdGF0dXMpO30KY2FsbGJhY2tQcm9jZXNzZWQ9dHJ1ZTtpZihzLnRpbWVvdXQpe2NsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTt9CnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighcy5pZnJhbWVUYXJnZXQpeyRpby5yZW1vdmUoKTt9CmVsc2V7JGlvLmF0dHIoJ3NyYycscy5pZnJhbWVTcmMpO30KeGhyLnJlc3BvbnNlWE1MPW51bGw7fSwxMDApO30KdmFyIHRvWG1sPSQucGFyc2VYTUx8fGZ1bmN0aW9uKHMsZG9jKXtpZih3aW5kb3cuQWN0aXZlWE9iamVjdCl7ZG9jPW5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJyk7ZG9jLmFzeW5jPSdmYWxzZSc7ZG9jLmxvYWRYTUwocyk7fQplbHNle2RvYz0obmV3IERPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcocywndGV4dC94bWwnKTt9CnJldHVybihkb2MmJmRvYy5kb2N1bWVudEVsZW1lbnQmJmRvYy5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPSdwYXJzZXJlcnJvcicpP2RvYzpudWxsO307dmFyIHBhcnNlSlNPTj0kLnBhcnNlSlNPTnx8ZnVuY3Rpb24ocyl7cmV0dXJuIHdpbmRvd1snZXZhbCddKCcoJytzKycpJyk7fTt2YXIgaHR0cERhdGE9ZnVuY3Rpb24oeGhyLHR5cGUscyl7dmFyIGN0PXhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyl8fCcnLHhtbD10eXBlPT09J3htbCd8fCF0eXBlJiZjdC5pbmRleE9mKCd4bWwnKT49MCxkYXRhPXhtbD94aHIucmVzcG9uc2VYTUw6eGhyLnJlc3BvbnNlVGV4dDtpZih4bWwmJmRhdGEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lPT09J3BhcnNlcmVycm9yJyl7aWYoJC5lcnJvcil7JC5lcnJvcigncGFyc2VyZXJyb3InKTt9fQppZihzJiZzLmRhdGFGaWx0ZXIpe2RhdGE9cy5kYXRhRmlsdGVyKGRhdGEsdHlwZSk7fQppZih0eXBlb2YgZGF0YT09PSdzdHJpbmcnKXtpZih0eXBlPT09J2pzb24nfHwhdHlwZSYmY3QuaW5kZXhPZignanNvbicpPj0wKXtkYXRhPXBhcnNlSlNPTihkYXRhKTt9ZWxzZSBpZih0eXBlPT09InNjcmlwdCJ8fCF0eXBlJiZjdC5pbmRleE9mKCJqYXZhc2NyaXB0Iik+PTApeyQuZ2xvYmFsRXZhbChkYXRhKTt9fQpyZXR1cm4gZGF0YTt9O3JldHVybiBkZWZlcnJlZDt9fTskLmZuLmFqYXhGb3JtPWZ1bmN0aW9uKG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307b3B0aW9ucy5kZWxlZ2F0aW9uPW9wdGlvbnMuZGVsZWdhdGlvbiYmJC5pc0Z1bmN0aW9uKCQuZm4ub24pO2lmKCFvcHRpb25zLmRlbGVnYXRpb24mJnRoaXMubGVuZ3RoPT09MCl7dmFyIG89e3M6dGhpcy5zZWxlY3RvcixjOnRoaXMuY29udGV4dH07aWYoISQuaXNSZWFkeSYmby5zKXtsb2coJ0RPTSBub3QgcmVhZHksIHF1ZXVpbmcgYWpheEZvcm0nKTskKGZ1bmN0aW9uKCl7JChvLnMsby5jKS5hamF4Rm9ybShvcHRpb25zKTt9KTtyZXR1cm4gdGhpczt9CmxvZygndGVybWluYXRpbmc7IHplcm8gZWxlbWVudHMgZm91bmQgYnkgc2VsZWN0b3InKygkLmlzUmVhZHk/Jyc6JyAoRE9NIG5vdCByZWFkeSknKSk7cmV0dXJuIHRoaXM7fQppZihvcHRpb25zLmRlbGVnYXRpb24peyQoZG9jdW1lbnQpLm9mZignc3VibWl0LmZvcm0tcGx1Z2luJyx0aGlzLnNlbGVjdG9yLGRvQWpheFN1Ym1pdCkub2ZmKCdjbGljay5mb3JtLXBsdWdpbicsdGhpcy5zZWxlY3RvcixjYXB0dXJlU3VibWl0dGluZ0VsZW1lbnQpLm9uKCdzdWJtaXQuZm9ybS1wbHVnaW4nLHRoaXMuc2VsZWN0b3Isb3B0aW9ucyxkb0FqYXhTdWJtaXQpLm9uKCdjbGljay5mb3JtLXBsdWdpbicsdGhpcy5zZWxlY3RvcixvcHRpb25zLGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudCk7cmV0dXJuIHRoaXM7fQpyZXR1cm4gdGhpcy5hamF4Rm9ybVVuYmluZCgpLmJpbmQoJ3N1Ym1pdC5mb3JtLXBsdWdpbicsb3B0aW9ucyxkb0FqYXhTdWJtaXQpLmJpbmQoJ2NsaWNrLmZvcm0tcGx1Z2luJyxvcHRpb25zLGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudCk7fTtmdW5jdGlvbiBkb0FqYXhTdWJtaXQoZSl7dmFyIG9wdGlvbnM9ZS5kYXRhO2lmKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtlLnByZXZlbnREZWZhdWx0KCk7JChlLnRhcmdldCkuYWpheFN1Ym1pdChvcHRpb25zKTt9fQpmdW5jdGlvbiBjYXB0dXJlU3VibWl0dGluZ0VsZW1lbnQoZSl7dmFyIHRhcmdldD1lLnRhcmdldDt2YXIgJGVsPSQodGFyZ2V0KTtpZighKCRlbC5pcygiW3R5cGU9c3VibWl0XSxbdHlwZT1pbWFnZV0iKSkpe3ZhciB0PSRlbC5jbG9zZXN0KCdbdHlwZT1zdWJtaXRdJyk7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm47fQp0YXJnZXQ9dFswXTt9CnZhciBmb3JtPXRoaXM7Zm9ybS5jbGs9dGFyZ2V0O2lmKHRhcmdldC50eXBlPT0naW1hZ2UnKXtpZihlLm9mZnNldFghPT11bmRlZmluZWQpe2Zvcm0uY2xrX3g9ZS5vZmZzZXRYO2Zvcm0uY2xrX3k9ZS5vZmZzZXRZO31lbHNlIGlmKHR5cGVvZiAkLmZuLm9mZnNldD09J2Z1bmN0aW9uJyl7dmFyIG9mZnNldD0kZWwub2Zmc2V0KCk7Zm9ybS5jbGtfeD1lLnBhZ2VYLW9mZnNldC5sZWZ0O2Zvcm0uY2xrX3k9ZS5wYWdlWS1vZmZzZXQudG9wO31lbHNle2Zvcm0uY2xrX3g9ZS5wYWdlWC10YXJnZXQub2Zmc2V0TGVmdDtmb3JtLmNsa195PWUucGFnZVktdGFyZ2V0Lm9mZnNldFRvcDt9fQpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9ybS5jbGs9Zm9ybS5jbGtfeD1mb3JtLmNsa195PW51bGw7fSwxMDApO30KJC5mbi5hamF4Rm9ybVVuYmluZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZCgnc3VibWl0LmZvcm0tcGx1Z2luIGNsaWNrLmZvcm0tcGx1Z2luJyk7fTskLmZuLmZvcm1Ub0FycmF5PWZ1bmN0aW9uKHNlbWFudGljLGVsZW1lbnRzKXt2YXIgYT1bXTtpZih0aGlzLmxlbmd0aD09PTApe3JldHVybiBhO30KdmFyIGZvcm09dGhpc1swXTt2YXIgZm9ybUlkPXRoaXMuYXR0cignaWQnKTt2YXIgZWxzPXNlbWFudGljP2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTpmb3JtLmVsZW1lbnRzO3ZhciBlbHMyO2lmKGVscyYmIS9NU0lFIFs2NzhdLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtlbHM9JChlbHMpLmdldCgpO30KaWYoZm9ybUlkKXtlbHMyPSQoJzppbnB1dFtmb3JtPSInK2Zvcm1JZCsnIl0nKS5nZXQoKTtpZihlbHMyLmxlbmd0aCl7ZWxzPShlbHN8fFtdKS5jb25jYXQoZWxzMik7fX0KaWYoIWVsc3x8IWVscy5sZW5ndGgpe3JldHVybiBhO30KdmFyIGksaixuLHYsZWwsbWF4LGptYXg7Zm9yKGk9MCxtYXg9ZWxzLmxlbmd0aDtpPG1heDtpKyspe2VsPWVsc1tpXTtuPWVsLm5hbWU7aWYoIW58fGVsLmRpc2FibGVkKXtjb250aW51ZTt9CmlmKHNlbWFudGljJiZmb3JtLmNsayYmZWwudHlwZT09ImltYWdlIil7aWYoZm9ybS5jbGs9PWVsKXthLnB1c2goe25hbWU6bix2YWx1ZTokKGVsKS52YWwoKSx0eXBlOmVsLnR5cGV9KTthLnB1c2goe25hbWU6bisnLngnLHZhbHVlOmZvcm0uY2xrX3h9LHtuYW1lOm4rJy55Jyx2YWx1ZTpmb3JtLmNsa195fSk7fQpjb250aW51ZTt9CnY9JC5maWVsZFZhbHVlKGVsLHRydWUpO2lmKHYmJnYuY29uc3RydWN0b3I9PUFycmF5KXtpZihlbGVtZW50cyl7ZWxlbWVudHMucHVzaChlbCk7fQpmb3Ioaj0wLGptYXg9di5sZW5ndGg7ajxqbWF4O2orKyl7YS5wdXNoKHtuYW1lOm4sdmFsdWU6dltqXX0pO319CmVsc2UgaWYoZmVhdHVyZS5maWxlYXBpJiZlbC50eXBlPT0nZmlsZScpe2lmKGVsZW1lbnRzKXtlbGVtZW50cy5wdXNoKGVsKTt9CnZhciBmaWxlcz1lbC5maWxlcztpZihmaWxlcy5sZW5ndGgpe2ZvcihqPTA7ajxmaWxlcy5sZW5ndGg7aisrKXthLnB1c2goe25hbWU6bix2YWx1ZTpmaWxlc1tqXSx0eXBlOmVsLnR5cGV9KTt9fQplbHNle2EucHVzaCh7bmFtZTpuLHZhbHVlOicnLHR5cGU6ZWwudHlwZX0pO319CmVsc2UgaWYodiE9PW51bGwmJnR5cGVvZiB2IT0ndW5kZWZpbmVkJyl7aWYoZWxlbWVudHMpe2VsZW1lbnRzLnB1c2goZWwpO30KYS5wdXNoKHtuYW1lOm4sdmFsdWU6dix0eXBlOmVsLnR5cGUscmVxdWlyZWQ6ZWwucmVxdWlyZWR9KTt9fQppZighc2VtYW50aWMmJmZvcm0uY2xrKXt2YXIgJGlucHV0PSQoZm9ybS5jbGspLGlucHV0PSRpbnB1dFswXTtuPWlucHV0Lm5hbWU7aWYobiYmIWlucHV0LmRpc2FibGVkJiZpbnB1dC50eXBlPT0naW1hZ2UnKXthLnB1c2goe25hbWU6bix2YWx1ZTokaW5wdXQudmFsKCl9KTthLnB1c2goe25hbWU6bisnLngnLHZhbHVlOmZvcm0uY2xrX3h9LHtuYW1lOm4rJy55Jyx2YWx1ZTpmb3JtLmNsa195fSk7fX0KcmV0dXJuIGE7fTskLmZuLmZvcm1TZXJpYWxpemU9ZnVuY3Rpb24oc2VtYW50aWMpe3JldHVybiAkLnBhcmFtKHRoaXMuZm9ybVRvQXJyYXkoc2VtYW50aWMpKTt9OyQuZm4uZmllbGRTZXJpYWxpemU9ZnVuY3Rpb24oc3VjY2Vzc2Z1bCl7dmFyIGE9W107dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dGhpcy5uYW1lO2lmKCFuKXtyZXR1cm47fQp2YXIgdj0kLmZpZWxkVmFsdWUodGhpcyxzdWNjZXNzZnVsKTtpZih2JiZ2LmNvbnN0cnVjdG9yPT1BcnJheSl7Zm9yKHZhciBpPTAsbWF4PXYubGVuZ3RoO2k8bWF4O2krKyl7YS5wdXNoKHtuYW1lOm4sdmFsdWU6dltpXX0pO319CmVsc2UgaWYodiE9PW51bGwmJnR5cGVvZiB2IT0ndW5kZWZpbmVkJyl7YS5wdXNoKHtuYW1lOnRoaXMubmFtZSx2YWx1ZTp2fSk7fX0pO3JldHVybiAkLnBhcmFtKGEpO307JC5mbi5maWVsZFZhbHVlPWZ1bmN0aW9uKHN1Y2Nlc3NmdWwpe2Zvcih2YXIgdmFsPVtdLGk9MCxtYXg9dGhpcy5sZW5ndGg7aTxtYXg7aSsrKXt2YXIgZWw9dGhpc1tpXTt2YXIgdj0kLmZpZWxkVmFsdWUoZWwsc3VjY2Vzc2Z1bCk7aWYodj09PW51bGx8fHR5cGVvZiB2PT0ndW5kZWZpbmVkJ3x8KHYuY29uc3RydWN0b3I9PUFycmF5JiYhdi5sZW5ndGgpKXtjb250aW51ZTt9CmlmKHYuY29uc3RydWN0b3I9PUFycmF5KXskLm1lcmdlKHZhbCx2KTt9CmVsc2V7dmFsLnB1c2godik7fX0KcmV0dXJuIHZhbDt9OyQuZmllbGRWYWx1ZT1mdW5jdGlvbihlbCxzdWNjZXNzZnVsKXt2YXIgbj1lbC5uYW1lLHQ9ZWwudHlwZSx0YWc9ZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHN1Y2Nlc3NmdWw9PT11bmRlZmluZWQpe3N1Y2Nlc3NmdWw9dHJ1ZTt9CmlmKHN1Y2Nlc3NmdWwmJighbnx8ZWwuZGlzYWJsZWR8fHQ9PSdyZXNldCd8fHQ9PSdidXR0b24nfHwodD09J2NoZWNrYm94J3x8dD09J3JhZGlvJykmJiFlbC5jaGVja2VkfHwodD09J3N1Ym1pdCd8fHQ9PSdpbWFnZScpJiZlbC5mb3JtJiZlbC5mb3JtLmNsayE9ZWx8fHRhZz09J3NlbGVjdCcmJmVsLnNlbGVjdGVkSW5kZXg9PS0xKSl7cmV0dXJuIG51bGw7fQppZih0YWc9PSdzZWxlY3QnKXt2YXIgaW5kZXg9ZWwuc2VsZWN0ZWRJbmRleDtpZihpbmRleDwwKXtyZXR1cm4gbnVsbDt9CnZhciBhPVtdLG9wcz1lbC5vcHRpb25zO3ZhciBvbmU9KHQ9PSdzZWxlY3Qtb25lJyk7dmFyIG1heD0ob25lP2luZGV4KzE6b3BzLmxlbmd0aCk7Zm9yKHZhciBpPShvbmU/aW5kZXg6MCk7aTxtYXg7aSsrKXt2YXIgb3A9b3BzW2ldO2lmKG9wLnNlbGVjdGVkKXt2YXIgdj1vcC52YWx1ZTtpZighdil7dj0ob3AuYXR0cmlidXRlcyYmb3AuYXR0cmlidXRlcy52YWx1ZSYmIShvcC5hdHRyaWJ1dGVzLnZhbHVlLnNwZWNpZmllZCkpP29wLnRleHQ6b3AudmFsdWU7fQppZihvbmUpe3JldHVybiB2O30KYS5wdXNoKHYpO319CnJldHVybiBhO30KcmV0dXJuICQoZWwpLnZhbCgpO307JC5mbi5jbGVhckZvcm09ZnVuY3Rpb24oaW5jbHVkZUhpZGRlbil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyQoJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYScsdGhpcykuY2xlYXJGaWVsZHMoaW5jbHVkZUhpZGRlbik7fSk7fTskLmZuLmNsZWFyRmllbGRzPSQuZm4uY2xlYXJJbnB1dHM9ZnVuY3Rpb24oaW5jbHVkZUhpZGRlbil7dmFyIHJlPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxlbWFpbHxtb250aHxudW1iZXJ8cGFzc3dvcmR8cmFuZ2V8c2VhcmNofHRlbHx0ZXh0fHRpbWV8dXJsfHdlZWspJC9pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD10aGlzLnR5cGUsdGFnPXRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHJlLnRlc3QodCl8fHRhZz09J3RleHRhcmVhJyl7dGhpcy52YWx1ZT0nJzt9CmVsc2UgaWYodD09J2NoZWNrYm94J3x8dD09J3JhZGlvJyl7dGhpcy5jaGVja2VkPWZhbHNlO30KZWxzZSBpZih0YWc9PSdzZWxlY3QnKXt0aGlzLnNlbGVjdGVkSW5kZXg9LTE7fQplbHNlIGlmKHQ9PSJmaWxlIil7aWYoL01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpeyQodGhpcykucmVwbGFjZVdpdGgoJCh0aGlzKS5jbG9uZSh0cnVlKSk7fWVsc2V7JCh0aGlzKS52YWwoJycpO319CmVsc2UgaWYoaW5jbHVkZUhpZGRlbil7aWYoKGluY2x1ZGVIaWRkZW49PT10cnVlJiYvaGlkZGVuLy50ZXN0KHQpKXx8KHR5cGVvZiBpbmNsdWRlSGlkZGVuPT0nc3RyaW5nJyYmJCh0aGlzKS5pcyhpbmNsdWRlSGlkZGVuKSkpe3RoaXMudmFsdWU9Jyc7fX19KTt9OyQuZm4ucmVzZXRGb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLnJlc2V0PT0nZnVuY3Rpb24nfHwodHlwZW9mIHRoaXMucmVzZXQ9PSdvYmplY3QnJiYhdGhpcy5yZXNldC5ub2RlVHlwZSkpe3RoaXMucmVzZXQoKTt9fSk7fTskLmZuLmVuYWJsZT1mdW5jdGlvbihiKXtpZihiPT09dW5kZWZpbmVkKXtiPXRydWU7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hYjt9KTt9OyQuZm4uc2VsZWN0ZWQ9ZnVuY3Rpb24oc2VsZWN0KXtpZihzZWxlY3Q9PT11bmRlZmluZWQpe3NlbGVjdD10cnVlO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXRoaXMudHlwZTtpZih0PT0nY2hlY2tib3gnfHx0PT0ncmFkaW8nKXt0aGlzLmNoZWNrZWQ9c2VsZWN0O30KZWxzZSBpZih0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09J29wdGlvbicpe3ZhciAkc2VsPSQodGhpcykucGFyZW50KCdzZWxlY3QnKTtpZihzZWxlY3QmJiRzZWxbMF0mJiRzZWxbMF0udHlwZT09J3NlbGVjdC1vbmUnKXskc2VsLmZpbmQoJ29wdGlvbicpLnNlbGVjdGVkKGZhbHNlKTt9CnRoaXMuc2VsZWN0ZWQ9c2VsZWN0O319KTt9OyQuZm4uYWpheFN1Ym1pdC5kZWJ1Zz1mYWxzZTtmdW5jdGlvbiBsb2coKXtpZighJC5mbi5hamF4U3VibWl0LmRlYnVnKXtyZXR1cm47fQp2YXIgbXNnPSdbanF1ZXJ5LmZvcm1dICcrQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChhcmd1bWVudHMsJycpO2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cpe3dpbmRvdy5jb25zb2xlLmxvZyhtc2cpO30KZWxzZSBpZih3aW5kb3cub3BlcmEmJndpbmRvdy5vcGVyYS5wb3N0RXJyb3Ipe3dpbmRvdy5vcGVyYS5wb3N0RXJyb3IobXNnKTt9fX0pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5LmJhLWJicS9qcXVlcnkuYmEtYmJxLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oJCx3aW5kb3cpeyckOm5vbXVuZ2UnO3ZhciB1bmRlZmluZWQsYXBzPUFycmF5LnByb3RvdHlwZS5zbGljZSxkZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50LGpxX3BhcmFtPSQucGFyYW0sanFfcGFyYW1fc29ydGVkLGpxX3BhcmFtX2ZyYWdtZW50LGpxX2RlcGFyYW0sanFfZGVwYXJhbV9mcmFnbWVudCxqcV9iYnE9JC5iYnE9JC5iYnF8fHt9LGpxX2JicV9wdXNoU3RhdGUsanFfYmJxX2dldFN0YXRlLGpxX2VsZW1VcmxBdHRyLHNwZWNpYWw9JC5ldmVudC5zcGVjaWFsLHN0cl9oYXNoY2hhbmdlPSdoYXNoY2hhbmdlJyxzdHJfcXVlcnlzdHJpbmc9J3F1ZXJ5c3RyaW5nJyxzdHJfZnJhZ21lbnQ9J2ZyYWdtZW50JyxzdHJfZWxlbVVybEF0dHI9J2VsZW1VcmxBdHRyJyxzdHJfaHJlZj0naHJlZicsc3RyX3NyYz0nc3JjJyxyZV9wYXJhbXNfcXVlcnlzdHJpbmc9L14uKlw/fCMuKiQvZyxyZV9wYXJhbXNfZnJhZ21lbnQscmVfZnJhZ21lbnQscmVfbm9fZXNjYXBlLGFqYXhfY3Jhd2xhYmxlLGZyYWdtZW50X3ByZWZpeCxlbGVtVXJsQXR0cl9jYWNoZT17fTtmdW5jdGlvbiBpc19zdHJpbmcoYXJnKXtyZXR1cm4gdHlwZW9mIGFyZz09PSdzdHJpbmcnO307ZnVuY3Rpb24gY3VycnkoZnVuYyl7dmFyIGFyZ3M9YXBzLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmdW5jLmFwcGx5KHRoaXMsYXJncy5jb25jYXQoYXBzLmNhbGwoYXJndW1lbnRzKSkpO307fTtmdW5jdGlvbiBnZXRfZnJhZ21lbnQodXJsKXtyZXR1cm4gdXJsLnJlcGxhY2UocmVfZnJhZ21lbnQsJyQyJyk7fTtmdW5jdGlvbiBnZXRfcXVlcnlzdHJpbmcodXJsKXtyZXR1cm4gdXJsLnJlcGxhY2UoLyg/Ol5bXj8jXSpcPyhbXiNdKikuKiQpPy4qLywnJDEnKTt9O2Z1bmN0aW9uIGpxX3BhcmFtX3N1Yihpc19mcmFnbWVudCxnZXRfZnVuYyx1cmwscGFyYW1zLG1lcmdlX21vZGUpe3ZhciByZXN1bHQscXMsbWF0Y2hlcyx1cmxfcGFyYW1zLGhhc2g7aWYocGFyYW1zIT09dW5kZWZpbmVkKXttYXRjaGVzPXVybC5tYXRjaChpc19mcmFnbWVudD9yZV9mcmFnbWVudDovXihbXiM/XSopXD8/KFteI10qKSgjPy4qKS8pO2hhc2g9bWF0Y2hlc1szXXx8Jyc7aWYobWVyZ2VfbW9kZT09PTImJmlzX3N0cmluZyhwYXJhbXMpKXtxcz1wYXJhbXMucmVwbGFjZShpc19mcmFnbWVudD9yZV9wYXJhbXNfZnJhZ21lbnQ6cmVfcGFyYW1zX3F1ZXJ5c3RyaW5nLCcnKTt9ZWxzZXt1cmxfcGFyYW1zPWpxX2RlcGFyYW0obWF0Y2hlc1syXSk7cGFyYW1zPWlzX3N0cmluZyhwYXJhbXMpP2pxX2RlcGFyYW1baXNfZnJhZ21lbnQ/c3RyX2ZyYWdtZW50OnN0cl9xdWVyeXN0cmluZ10ocGFyYW1zKTpwYXJhbXM7cXM9bWVyZ2VfbW9kZT09PTI/cGFyYW1zOm1lcmdlX21vZGU9PT0xPyQuZXh0ZW5kKHt9LHBhcmFtcyx1cmxfcGFyYW1zKTokLmV4dGVuZCh7fSx1cmxfcGFyYW1zLHBhcmFtcyk7cXM9anFfcGFyYW1fc29ydGVkKHFzKTtpZihpc19mcmFnbWVudCl7cXM9cXMucmVwbGFjZShyZV9ub19lc2NhcGUsZGVjb2RlKTt9fQpyZXN1bHQ9bWF0Y2hlc1sxXSsoaXNfZnJhZ21lbnQ/ZnJhZ21lbnRfcHJlZml4OnFzfHwhbWF0Y2hlc1sxXT8nPyc6JycpK3FzK2hhc2g7fWVsc2V7cmVzdWx0PWdldF9mdW5jKHVybCE9PXVuZGVmaW5lZD91cmw6bG9jYXRpb24uaHJlZik7fQpyZXR1cm4gcmVzdWx0O307anFfcGFyYW1bc3RyX3F1ZXJ5c3RyaW5nXT1jdXJyeShqcV9wYXJhbV9zdWIsMCxnZXRfcXVlcnlzdHJpbmcpO2pxX3BhcmFtW3N0cl9mcmFnbWVudF09anFfcGFyYW1fZnJhZ21lbnQ9Y3VycnkoanFfcGFyYW1fc3ViLDEsZ2V0X2ZyYWdtZW50KTtqcV9wYXJhbS5zb3J0ZWQ9anFfcGFyYW1fc29ydGVkPWZ1bmN0aW9uKGEsdHJhZGl0aW9uYWwpe3ZhciBhcnI9W10sb2JqPXt9OyQuZWFjaChqcV9wYXJhbShhLHRyYWRpdGlvbmFsKS5zcGxpdCgnJicpLGZ1bmN0aW9uKGksdil7dmFyIGtleT12LnJlcGxhY2UoLyg/OiU1Qnw9KS4qJC8sJycpLGtleV9vYmo9b2JqW2tleV07aWYoIWtleV9vYmope2tleV9vYmo9b2JqW2tleV09W107YXJyLnB1c2goa2V5KTt9CmtleV9vYmoucHVzaCh2KTt9KTtyZXR1cm4gJC5tYXAoYXJyLnNvcnQoKSxmdW5jdGlvbih2KXtyZXR1cm4gb2JqW3ZdO30pLmpvaW4oJyYnKTt9O2pxX3BhcmFtX2ZyYWdtZW50Lm5vRXNjYXBlPWZ1bmN0aW9uKGNoYXJzKXtjaGFycz1jaGFyc3x8Jyc7dmFyIGFycj0kLm1hcChjaGFycy5zcGxpdCgnJyksZW5jb2RlVVJJQ29tcG9uZW50KTtyZV9ub19lc2NhcGU9bmV3IFJlZ0V4cChhcnIuam9pbignfCcpLCdnJyk7fTtqcV9wYXJhbV9mcmFnbWVudC5ub0VzY2FwZSgnLC8nKTtqcV9wYXJhbV9mcmFnbWVudC5hamF4Q3Jhd2xhYmxlPWZ1bmN0aW9uKHN0YXRlKXtpZihzdGF0ZSE9PXVuZGVmaW5lZCl7aWYoc3RhdGUpe3JlX3BhcmFtc19mcmFnbWVudD0vXi4qKD86IyF8IykvO3JlX2ZyYWdtZW50PS9eKFteI10qKSg/OiMhfCMpPyguKikkLztmcmFnbWVudF9wcmVmaXg9JyMhJzt9ZWxzZXtyZV9wYXJhbXNfZnJhZ21lbnQ9L14uKiMvO3JlX2ZyYWdtZW50PS9eKFteI10qKSM/KC4qKSQvO2ZyYWdtZW50X3ByZWZpeD0nIyc7fQphamF4X2NyYXdsYWJsZT0hIXN0YXRlO30KcmV0dXJuIGFqYXhfY3Jhd2xhYmxlO307anFfcGFyYW1fZnJhZ21lbnQuYWpheENyYXdsYWJsZSgwKTskLmRlcGFyYW09anFfZGVwYXJhbT1mdW5jdGlvbihwYXJhbXMsY29lcmNlKXt2YXIgb2JqPXt9LGNvZXJjZV90eXBlcz17J3RydWUnOiEwLCdmYWxzZSc6ITEsJ251bGwnOm51bGx9OyQuZWFjaChwYXJhbXMucmVwbGFjZSgvXCsvZywnICcpLnNwbGl0KCcmJyksZnVuY3Rpb24oaix2KXt2YXIgcGFyYW09di5zcGxpdCgnPScpLGtleT1kZWNvZGUocGFyYW1bMF0pLHZhbCxjdXI9b2JqLGk9MCxrZXlzPWtleS5zcGxpdCgnXVsnKSxrZXlzX2xhc3Q9a2V5cy5sZW5ndGgtMTtpZigvXFsvLnRlc3Qoa2V5c1swXSkmJi9cXSQvLnRlc3Qoa2V5c1trZXlzX2xhc3RdKSl7a2V5c1trZXlzX2xhc3RdPWtleXNba2V5c19sYXN0XS5yZXBsYWNlKC9cXSQvLCcnKTtrZXlzPWtleXMuc2hpZnQoKS5zcGxpdCgnWycpLmNvbmNhdChrZXlzKTtrZXlzX2xhc3Q9a2V5cy5sZW5ndGgtMTt9ZWxzZXtrZXlzX2xhc3Q9MDt9CmlmKHBhcmFtLmxlbmd0aD09PTIpe3ZhbD1kZWNvZGUocGFyYW1bMV0pO2lmKGNvZXJjZSl7dmFsPXZhbCYmIWlzTmFOKHZhbCk/K3ZhbDp2YWw9PT0ndW5kZWZpbmVkJz91bmRlZmluZWQ6Y29lcmNlX3R5cGVzW3ZhbF0hPT11bmRlZmluZWQ/Y29lcmNlX3R5cGVzW3ZhbF06dmFsO30KaWYoa2V5c19sYXN0KXtmb3IoO2k8PWtleXNfbGFzdDtpKyspe2tleT1rZXlzW2ldPT09Jyc/Y3VyLmxlbmd0aDprZXlzW2ldO2N1cj1jdXJba2V5XT1pPGtleXNfbGFzdD9jdXJba2V5XXx8KGtleXNbaSsxXSYmaXNOYU4oa2V5c1tpKzFdKT97fTpbXSk6dmFsO319ZWxzZXtpZigkLmlzQXJyYXkob2JqW2tleV0pKXtvYmpba2V5XS5wdXNoKHZhbCk7fWVsc2UgaWYob2JqW2tleV0hPT11bmRlZmluZWQpe29ialtrZXldPVtvYmpba2V5XSx2YWxdO31lbHNle29ialtrZXldPXZhbDt9fX1lbHNlIGlmKGtleSl7b2JqW2tleV09Y29lcmNlP3VuZGVmaW5lZDonJzt9fSk7cmV0dXJuIG9iajt9O2Z1bmN0aW9uIGpxX2RlcGFyYW1fc3ViKGlzX2ZyYWdtZW50LHVybF9vcl9wYXJhbXMsY29lcmNlKXtpZih1cmxfb3JfcGFyYW1zPT09dW5kZWZpbmVkfHx0eXBlb2YgdXJsX29yX3BhcmFtcz09PSdib29sZWFuJyl7Y29lcmNlPXVybF9vcl9wYXJhbXM7dXJsX29yX3BhcmFtcz1qcV9wYXJhbVtpc19mcmFnbWVudD9zdHJfZnJhZ21lbnQ6c3RyX3F1ZXJ5c3RyaW5nXSgpO31lbHNle3VybF9vcl9wYXJhbXM9aXNfc3RyaW5nKHVybF9vcl9wYXJhbXMpP3VybF9vcl9wYXJhbXMucmVwbGFjZShpc19mcmFnbWVudD9yZV9wYXJhbXNfZnJhZ21lbnQ6cmVfcGFyYW1zX3F1ZXJ5c3RyaW5nLCcnKTp1cmxfb3JfcGFyYW1zO30KcmV0dXJuIGpxX2RlcGFyYW0odXJsX29yX3BhcmFtcyxjb2VyY2UpO307anFfZGVwYXJhbVtzdHJfcXVlcnlzdHJpbmddPWN1cnJ5KGpxX2RlcGFyYW1fc3ViLDApO2pxX2RlcGFyYW1bc3RyX2ZyYWdtZW50XT1qcV9kZXBhcmFtX2ZyYWdtZW50PWN1cnJ5KGpxX2RlcGFyYW1fc3ViLDEpOyRbc3RyX2VsZW1VcmxBdHRyXXx8KCRbc3RyX2VsZW1VcmxBdHRyXT1mdW5jdGlvbihvYmope3JldHVybiAkLmV4dGVuZChlbGVtVXJsQXR0cl9jYWNoZSxvYmopO30pKHthOnN0cl9ocmVmLGJhc2U6c3RyX2hyZWYsaWZyYW1lOnN0cl9zcmMsaW1nOnN0cl9zcmMsaW5wdXQ6c3RyX3NyYyxmb3JtOidhY3Rpb24nLGxpbms6c3RyX2hyZWYsc2NyaXB0OnN0cl9zcmN9KTtqcV9lbGVtVXJsQXR0cj0kW3N0cl9lbGVtVXJsQXR0cl07ZnVuY3Rpb24ganFfZm5fc3ViKG1vZGUsZm9yY2VfYXR0cixwYXJhbXMsbWVyZ2VfbW9kZSl7aWYoIWlzX3N0cmluZyhwYXJhbXMpJiZ0eXBlb2YgcGFyYW1zIT09J29iamVjdCcpe21lcmdlX21vZGU9cGFyYW1zO3BhcmFtcz1mb3JjZV9hdHRyO2ZvcmNlX2F0dHI9dW5kZWZpbmVkO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0aGF0PSQodGhpcyksYXR0cj1mb3JjZV9hdHRyfHxqcV9lbGVtVXJsQXR0cigpWyh0aGlzLm5vZGVOYW1lfHwnJykudG9Mb3dlckNhc2UoKV18fCcnLHVybD1hdHRyJiZ0aGF0LmF0dHIoYXR0cil8fCcnO3RoYXQuYXR0cihhdHRyLGpxX3BhcmFtW21vZGVdKHVybCxwYXJhbXMsbWVyZ2VfbW9kZSkpO30pO307JC5mbltzdHJfcXVlcnlzdHJpbmddPWN1cnJ5KGpxX2ZuX3N1YixzdHJfcXVlcnlzdHJpbmcpOyQuZm5bc3RyX2ZyYWdtZW50XT1jdXJyeShqcV9mbl9zdWIsc3RyX2ZyYWdtZW50KTtqcV9iYnEucHVzaFN0YXRlPWpxX2JicV9wdXNoU3RhdGU9ZnVuY3Rpb24ocGFyYW1zLG1lcmdlX21vZGUpe2lmKGlzX3N0cmluZyhwYXJhbXMpJiYvXiMvLnRlc3QocGFyYW1zKSYmbWVyZ2VfbW9kZT09PXVuZGVmaW5lZCl7bWVyZ2VfbW9kZT0yO30KdmFyIGhhc19hcmdzPXBhcmFtcyE9PXVuZGVmaW5lZCx1cmw9anFfcGFyYW1fZnJhZ21lbnQobG9jYXRpb24uaHJlZixoYXNfYXJncz9wYXJhbXM6e30saGFzX2FyZ3M/bWVyZ2VfbW9kZToyKTtsb2NhdGlvbi5ocmVmPXVybDt9O2pxX2JicS5nZXRTdGF0ZT1qcV9iYnFfZ2V0U3RhdGU9ZnVuY3Rpb24oa2V5LGNvZXJjZSl7cmV0dXJuIGtleT09PXVuZGVmaW5lZHx8dHlwZW9mIGtleT09PSdib29sZWFuJz9qcV9kZXBhcmFtX2ZyYWdtZW50KGtleSk6anFfZGVwYXJhbV9mcmFnbWVudChjb2VyY2UpW2tleV07fTtqcV9iYnEucmVtb3ZlU3RhdGU9ZnVuY3Rpb24oYXJyKXt2YXIgc3RhdGU9e307aWYoYXJyIT09dW5kZWZpbmVkKXtzdGF0ZT1qcV9iYnFfZ2V0U3RhdGUoKTskLmVhY2goJC5pc0FycmF5KGFycik/YXJyOmFyZ3VtZW50cyxmdW5jdGlvbihpLHYpe2RlbGV0ZSBzdGF0ZVt2XTt9KTt9CmpxX2JicV9wdXNoU3RhdGUoc3RhdGUsMik7fTtzcGVjaWFsW3N0cl9oYXNoY2hhbmdlXT0kLmV4dGVuZChzcGVjaWFsW3N0cl9oYXNoY2hhbmdlXSx7YWRkOmZ1bmN0aW9uKGhhbmRsZU9iail7dmFyIG9sZF9oYW5kbGVyO2Z1bmN0aW9uIG5ld19oYW5kbGVyKGUpe3ZhciBoYXNoPWVbc3RyX2ZyYWdtZW50XT1qcV9wYXJhbV9mcmFnbWVudCgpO2UuZ2V0U3RhdGU9ZnVuY3Rpb24oa2V5LGNvZXJjZSl7cmV0dXJuIGtleT09PXVuZGVmaW5lZHx8dHlwZW9mIGtleT09PSdib29sZWFuJz9qcV9kZXBhcmFtKGhhc2gsa2V5KTpqcV9kZXBhcmFtKGhhc2gsY29lcmNlKVtrZXldO307b2xkX2hhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO307aWYoJC5pc0Z1bmN0aW9uKGhhbmRsZU9iaikpe29sZF9oYW5kbGVyPWhhbmRsZU9iajtyZXR1cm4gbmV3X2hhbmRsZXI7fWVsc2V7b2xkX2hhbmRsZXI9aGFuZGxlT2JqLmhhbmRsZXI7aGFuZGxlT2JqLmhhbmRsZXI9bmV3X2hhbmRsZXI7fX19KTt9KShqUXVlcnksdGhpcyk7KGZ1bmN0aW9uKCQsd2luZG93LHVuZGVmaW5lZCl7JyQ6bm9tdW5nZSc7dmFyIHN0cl9oYXNoY2hhbmdlPSdoYXNoY2hhbmdlJyxkb2M9ZG9jdW1lbnQsZmFrZV9vbmhhc2hjaGFuZ2Usc3BlY2lhbD0kLmV2ZW50LnNwZWNpYWwsZG9jX21vZGU9ZG9jLmRvY3VtZW50TW9kZSxzdXBwb3J0c19vbmhhc2hjaGFuZ2U9J29uJytzdHJfaGFzaGNoYW5nZSBpbiB3aW5kb3cmJihkb2NfbW9kZT09PXVuZGVmaW5lZHx8ZG9jX21vZGU+Nyk7ZnVuY3Rpb24gZ2V0X2ZyYWdtZW50KHVybCl7dXJsPXVybHx8bG9jYXRpb24uaHJlZjtyZXR1cm4nIycrdXJsLnJlcGxhY2UoL15bXiNdKiM/KC4qKSQvLCckMScpO307JC5mbltzdHJfaGFzaGNoYW5nZV09ZnVuY3Rpb24oZm4pe3JldHVybiBmbj90aGlzLmJpbmQoc3RyX2hhc2hjaGFuZ2UsZm4pOnRoaXMudHJpZ2dlcihzdHJfaGFzaGNoYW5nZSk7fTskLmZuW3N0cl9oYXNoY2hhbmdlXS5kZWxheT01MDtzcGVjaWFsW3N0cl9oYXNoY2hhbmdlXT0kLmV4dGVuZChzcGVjaWFsW3N0cl9oYXNoY2hhbmdlXSx7c2V0dXA6ZnVuY3Rpb24oKXtpZihzdXBwb3J0c19vbmhhc2hjaGFuZ2Upe3JldHVybiBmYWxzZTt9CiQoZmFrZV9vbmhhc2hjaGFuZ2Uuc3RhcnQpO30sdGVhcmRvd246ZnVuY3Rpb24oKXtpZihzdXBwb3J0c19vbmhhc2hjaGFuZ2Upe3JldHVybiBmYWxzZTt9CiQoZmFrZV9vbmhhc2hjaGFuZ2Uuc3RvcCk7fX0pO2Zha2Vfb25oYXNoY2hhbmdlPShmdW5jdGlvbigpe3ZhciBzZWxmPXt9LHRpbWVvdXRfaWQsbGFzdF9oYXNoPWdldF9mcmFnbWVudCgpLGZuX3JldHZhbD1mdW5jdGlvbih2YWwpe3JldHVybiB2YWw7fSxoaXN0b3J5X3NldD1mbl9yZXR2YWwsaGlzdG9yeV9nZXQ9Zm5fcmV0dmFsO3NlbGYuc3RhcnQ9ZnVuY3Rpb24oKXt0aW1lb3V0X2lkfHxwb2xsKCk7fTtzZWxmLnN0b3A9ZnVuY3Rpb24oKXt0aW1lb3V0X2lkJiZjbGVhclRpbWVvdXQodGltZW91dF9pZCk7dGltZW91dF9pZD11bmRlZmluZWQ7fTtmdW5jdGlvbiBwb2xsKCl7dmFyIGhhc2g9Z2V0X2ZyYWdtZW50KCksaGlzdG9yeV9oYXNoPWhpc3RvcnlfZ2V0KGxhc3RfaGFzaCk7aWYoaGFzaCE9PWxhc3RfaGFzaCl7aGlzdG9yeV9zZXQobGFzdF9oYXNoPWhhc2gsaGlzdG9yeV9oYXNoKTskKHdpbmRvdykudHJpZ2dlcihzdHJfaGFzaGNoYW5nZSk7fWVsc2UgaWYoaGlzdG9yeV9oYXNoIT09bGFzdF9oYXNoKXtsb2NhdGlvbi5ocmVmPWxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qLywnJykraGlzdG9yeV9oYXNoO30KdGltZW91dF9pZD1zZXRUaW1lb3V0KHBvbGwsJC5mbltzdHJfaGFzaGNoYW5nZV0uZGVsYXkpO307JC5icm93c2VyLm1zaWUmJiFzdXBwb3J0c19vbmhhc2hjaGFuZ2UmJihmdW5jdGlvbigpe3ZhciBpZnJhbWUsaWZyYW1lX3NyYztzZWxmLnN0YXJ0PWZ1bmN0aW9uKCl7aWYoIWlmcmFtZSl7aWZyYW1lX3NyYz0kLmZuW3N0cl9oYXNoY2hhbmdlXS5zcmM7aWZyYW1lX3NyYz1pZnJhbWVfc3JjJiZpZnJhbWVfc3JjK2dldF9mcmFnbWVudCgpO2lmcmFtZT0kKCc8aWZyYW1lIHRhYmluZGV4PSItMSIgdGl0bGU9ImVtcHR5Ii8+JykuaGlkZSgpLm9uZSgnbG9hZCcsZnVuY3Rpb24oKXtpZnJhbWVfc3JjfHxoaXN0b3J5X3NldChnZXRfZnJhZ21lbnQoKSk7cG9sbCgpO30pLmF0dHIoJ3NyYycsaWZyYW1lX3NyY3x8J2phdmFzY3JpcHQ6MCcpLmluc2VydEFmdGVyKCdib2R5JylbMF0uY29udGVudFdpbmRvdztkb2Mub25wcm9wZXJ0eWNoYW5nZT1mdW5jdGlvbigpe3RyeXtpZihldmVudC5wcm9wZXJ0eU5hbWU9PT0ndGl0bGUnKXtpZnJhbWUuZG9jdW1lbnQudGl0bGU9ZG9jLnRpdGxlO319Y2F0Y2goZSl7fX07fX07c2VsZi5zdG9wPWZuX3JldHZhbDtoaXN0b3J5X2dldD1mdW5jdGlvbigpe3JldHVybiBnZXRfZnJhZ21lbnQoaWZyYW1lLmxvY2F0aW9uLmhyZWYpO307aGlzdG9yeV9zZXQ9ZnVuY3Rpb24oaGFzaCxoaXN0b3J5X2hhc2gpe3ZhciBpZnJhbWVfZG9jPWlmcmFtZS5kb2N1bWVudCxkb21haW49JC5mbltzdHJfaGFzaGNoYW5nZV0uZG9tYWluO2lmKGhhc2ghPT1oaXN0b3J5X2hhc2gpe2lmcmFtZV9kb2MudGl0bGU9ZG9jLnRpdGxlO2lmcmFtZV9kb2Mub3BlbigpO2RvbWFpbiYmaWZyYW1lX2RvYy53cml0ZSgnPHNjcmlwdD5kb2N1bWVudC5kb21haW49IicrZG9tYWluKyciPC9zY3JpcHQ+Jyk7aWZyYW1lX2RvYy5jbG9zZSgpO2lmcmFtZS5sb2NhdGlvbi5oYXNoPWhhc2g7fX07fSkoKTtyZXR1cm4gc2VsZjt9KSgpO30pKGpRdWVyeSx0aGlzKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5Lm1qcy5uZXN0ZWRTb3J0YWJsZS9qcXVlcnkubWpzLm5lc3RlZFNvcnRhYmxlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oZmFjdG9yeSl7InVzZSBzdHJpY3QiO2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoWyJqcXVlcnkiLCJqcXVlcnktdWkvc29ydGFibGUiXSxmYWN0b3J5KTt9ZWxzZXtmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO319KGZ1bmN0aW9uKCQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpc092ZXJBeGlzKHgscmVmZXJlbmNlLHNpemUpe3JldHVybih4PnJlZmVyZW5jZSkmJih4PChyZWZlcmVuY2Urc2l6ZSkpO30KJC53aWRnZXQoIm1qcy5uZXN0ZWRTb3J0YWJsZSIsJC5leHRlbmQoe30sJC51aS5zb3J0YWJsZS5wcm90b3R5cGUse29wdGlvbnM6e2Rpc2FibGVQYXJlbnRDaGFuZ2U6ZmFsc2UsZG9Ob3RDbGVhcjpmYWxzZSxleHBhbmRPbkhvdmVyOjcwMCxpc0FsbG93ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9LGlzVHJlZTpmYWxzZSxsaXN0VHlwZToib2wiLG1heExldmVsczowLHByb3RlY3RSb290OmZhbHNlLHJvb3RJRDpudWxsLHJ0bDpmYWxzZSxzdGFydENvbGxhcHNlZDpmYWxzZSx0YWJTaXplOjIwLGJyYW5jaENsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtYnJhbmNoIixjb2xsYXBzZWRDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLWNvbGxhcHNlZCIsZGlzYWJsZU5lc3RpbmdDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLW5vLW5lc3RpbmciLGVycm9yQ2xhc3M6Im1qcy1uZXN0ZWRTb3J0YWJsZS1lcnJvciIsZXhwYW5kZWRDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLWV4cGFuZGVkIixob3ZlcmluZ0NsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtaG92ZXJpbmciLGxlYWZDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLWxlYWYiLGRpc2FibGVkQ2xhc3M6Im1qcy1uZXN0ZWRTb3J0YWJsZS1kaXNhYmxlZCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzLGVycjt0aGlzLmVsZW1lbnQuZGF0YSgidWktc29ydGFibGUiLHRoaXMuZWxlbWVudC5kYXRhKCJtanMtbmVzdGVkU29ydGFibGUiKSk7aWYoIXRoaXMuZWxlbWVudC5pcyh0aGlzLm9wdGlvbnMubGlzdFR5cGUpKXtlcnI9Im5lc3RlZFNvcnRhYmxlOiAiKyJQbGVhc2UgY2hlY2sgdGhhdCB0aGUgbGlzdFR5cGUgb3B0aW9uIGlzIHNldCB0byB5b3VyIGFjdHVhbCBsaXN0IHR5cGUiO3Rocm93IG5ldyBFcnJvcihlcnIpO30KaWYodGhpcy5vcHRpb25zLmlzVHJlZSYmdGhpcy5vcHRpb25zLmV4cGFuZE9uSG92ZXIpe3RoaXMub3B0aW9ucy50b2xlcmFuY2U9ImludGVyc2VjdCI7fQokLnVpLnNvcnRhYmxlLnByb3RvdHlwZS5fY3JlYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLm9wdGlvbnMuaXNUcmVlKXskKHRoaXMuaXRlbXMpLmVhY2goZnVuY3Rpb24oKXt2YXIgJGxpPXRoaXMuaXRlbSxoYXNDb2xsYXBzZWRDbGFzcz0kbGkuaGFzQ2xhc3Moc2VsZi5vcHRpb25zLmNvbGxhcHNlZENsYXNzKSxoYXNFeHBhbmRlZENsYXNzPSRsaS5oYXNDbGFzcyhzZWxmLm9wdGlvbnMuZXhwYW5kZWRDbGFzcyk7aWYoJGxpLmNoaWxkcmVuKHNlbGYub3B0aW9ucy5saXN0VHlwZSkubGVuZ3RoKXskbGkuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmJyYW5jaENsYXNzKTtpZighaGFzQ29sbGFwc2VkQ2xhc3MmJiFoYXNFeHBhbmRlZENsYXNzKXtpZihzZWxmLm9wdGlvbnMuc3RhcnRDb2xsYXBzZWQpeyRsaS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuY29sbGFwc2VkQ2xhc3MpO31lbHNleyRsaS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuZXhwYW5kZWRDbGFzcyk7fX19ZWxzZXskbGkuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmxlYWZDbGFzcyk7fX0pO319LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZURhdGEoIm1qcy1uZXN0ZWRTb3J0YWJsZSIpLnJlbW92ZURhdGEoInVpLXNvcnRhYmxlIik7cmV0dXJuICQudWkuc29ydGFibGUucHJvdG90eXBlLl9kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZXZlbnQpe3ZhciBpLGl0ZW0saXRlbUVsZW1lbnQsaW50ZXJzZWN0aW9uLHNlbGY9dGhpcyxvPXRoaXMub3B0aW9ucyxzY3JvbGxlZD1mYWxzZSwkZG9jdW1lbnQ9JChkb2N1bWVudCkscHJldmlvdXNUb3BPZmZzZXQscGFyZW50SXRlbSxsZXZlbCxjaGlsZExldmVscyxpdGVtQWZ0ZXIsaXRlbUJlZm9yZSxuZXdMaXN0LG1ldGhvZCxhLHByZXZpb3VzSXRlbSxuZXh0SXRlbSxoZWxwZXJJc05vdFNpYmxpbmc7dGhpcy5wb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGV2ZW50KTt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCF0aGlzLmxhc3RQb3NpdGlvbkFicyl7dGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFiczt9CmlmKHRoaXMub3B0aW9ucy5zY3JvbGwpe2lmKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPT0iSFRNTCIpe2lmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCsKdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0KS0KZXZlbnQucGFnZVk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCkrby5zY3JvbGxTcGVlZDt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3Aoc2Nyb2xsZWQpO31lbHNlIGlmKGV2ZW50LnBhZ2VZLQp0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcDxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKS1vLnNjcm9sbFNwZWVkO3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcChzY3JvbGxlZCk7fQppZigodGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0Kwp0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aCktCmV2ZW50LnBhZ2VYPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKStvLnNjcm9sbFNwZWVkO3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoc2Nyb2xsZWQpO31lbHNlIGlmKGV2ZW50LnBhZ2VYLQp0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQ8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpLW8uc2Nyb2xsU3BlZWQ7dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdChzY3JvbGxlZCk7fX1lbHNle2lmKGV2ZW50LnBhZ2VZLQokZG9jdW1lbnQuc2Nyb2xsVG9wKCk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JGRvY3VtZW50LnNjcm9sbFRvcCgpLW8uc2Nyb2xsU3BlZWQ7JGRvY3VtZW50LnNjcm9sbFRvcChzY3JvbGxlZCk7fWVsc2UgaWYoJCh3aW5kb3cpLmhlaWdodCgpLQooZXZlbnQucGFnZVktCiRkb2N1bWVudC5zY3JvbGxUb3AoKSk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JGRvY3VtZW50LnNjcm9sbFRvcCgpK28uc2Nyb2xsU3BlZWQ7JGRvY3VtZW50LnNjcm9sbFRvcChzY3JvbGxlZCk7fQppZihldmVudC5wYWdlWC0KJGRvY3VtZW50LnNjcm9sbExlZnQoKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLW8uc2Nyb2xsU3BlZWQ7JGRvY3VtZW50LnNjcm9sbExlZnQoc2Nyb2xsZWQpO31lbHNlIGlmKCQod2luZG93KS53aWR0aCgpLQooZXZlbnQucGFnZVgtCiRkb2N1bWVudC5zY3JvbGxMZWZ0KCkpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPSRkb2N1bWVudC5zY3JvbGxMZWZ0KCkrby5zY3JvbGxTcGVlZDskZG9jdW1lbnQuc2Nyb2xsTGVmdChzY3JvbGxlZCk7fX0KaWYoc2Nyb2xsZWQhPT1mYWxzZSYmJC51aS5kZG1hbmFnZXImJiFvLmRyb3BCZWhhdmlvdXIpeyQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsZXZlbnQpO319CnRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7cHJldmlvdXNUb3BPZmZzZXQ9dGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKS50b3A7aWYoIXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLm9wdGlvbnMuYXhpcyE9PSJ5Iil7dGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4Ijt9CmlmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPT0ieCIpe3RoaXMuaGVscGVyWzBdLnN0eWxlLnRvcD0odGhpcy5wb3NpdGlvbi50b3ApKyJweCI7fQp0aGlzLmhvdmVyaW5nPXRoaXMuaG92ZXJpbmc/dGhpcy5ob3ZlcmluZzpudWxsO3RoaXMubW91c2VlbnRlcmVkPXRoaXMubW91c2VlbnRlcmVkP3RoaXMubW91c2VlbnRlcmVkOmZhbHNlOyhmdW5jdGlvbigpe3ZhciBfcGFyZW50SXRlbT10aGlzLnBsYWNlaG9sZGVyLnBhcmVudCgpLnBhcmVudCgpO2lmKF9wYXJlbnRJdGVtJiZfcGFyZW50SXRlbS5jbG9zZXN0KCIudWktc29ydGFibGUiKS5sZW5ndGgpe3BhcmVudEl0ZW09X3BhcmVudEl0ZW07fX0uY2FsbCh0aGlzKSk7bGV2ZWw9dGhpcy5fZ2V0TGV2ZWwodGhpcy5wbGFjZWhvbGRlcik7Y2hpbGRMZXZlbHM9dGhpcy5fZ2V0Q2hpbGRMZXZlbHModGhpcy5oZWxwZXIpO25ld0xpc3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChvLmxpc3RUeXBlKTtmb3IoaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXtpdGVtPXRoaXMuaXRlbXNbaV07aXRlbUVsZW1lbnQ9aXRlbS5pdGVtWzBdO2ludGVyc2VjdGlvbj10aGlzLl9pbnRlcnNlY3RzV2l0aFBvaW50ZXIoaXRlbSk7aWYoIWludGVyc2VjdGlvbil7Y29udGludWU7fQppZihpdGVtLmluc3RhbmNlIT09dGhpcy5jdXJyZW50Q29udGFpbmVyKXtjb250aW51ZTt9CmlmKGl0ZW1FbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKG8uZGlzYWJsZWRDbGFzcykhPT0tMSl7aWYoaW50ZXJzZWN0aW9uPT09Mil7aXRlbUFmdGVyPXRoaXMuaXRlbXNbaSsxXTtpZihpdGVtQWZ0ZXImJml0ZW1BZnRlci5pdGVtLmhhc0NsYXNzKG8uZGlzYWJsZWRDbGFzcykpe2NvbnRpbnVlO319ZWxzZSBpZihpbnRlcnNlY3Rpb249PT0xKXtpdGVtQmVmb3JlPXRoaXMuaXRlbXNbaS0xXTtpZihpdGVtQmVmb3JlJiZpdGVtQmVmb3JlLml0ZW0uaGFzQ2xhc3Moby5kaXNhYmxlZENsYXNzKSl7Y29udGludWU7fX19Cm1ldGhvZD1pbnRlcnNlY3Rpb249PT0xPyJuZXh0IjoicHJldiI7aWYoaXRlbUVsZW1lbnQhPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLnBsYWNlaG9sZGVyW21ldGhvZF0oKVswXSE9PWl0ZW1FbGVtZW50JiYhJC5jb250YWlucyh0aGlzLnBsYWNlaG9sZGVyWzBdLGl0ZW1FbGVtZW50KSYmKHRoaXMub3B0aW9ucy50eXBlPT09InNlbWktZHluYW1pYyI/ISQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLGl0ZW1FbGVtZW50KTp0cnVlKSl7aWYoIXRoaXMubW91c2VlbnRlcmVkKXskKGl0ZW1FbGVtZW50KS5tb3VzZWVudGVyKCk7dGhpcy5tb3VzZWVudGVyZWQ9dHJ1ZTt9CmlmKG8uaXNUcmVlJiYkKGl0ZW1FbGVtZW50KS5oYXNDbGFzcyhvLmNvbGxhcHNlZENsYXNzKSYmby5leHBhbmRPbkhvdmVyKXtpZighdGhpcy5ob3ZlcmluZyl7JChpdGVtRWxlbWVudCkuYWRkQ2xhc3Moby5ob3ZlcmluZ0NsYXNzKTt0aGlzLmhvdmVyaW5nPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JChpdGVtRWxlbWVudCkucmVtb3ZlQ2xhc3Moby5jb2xsYXBzZWRDbGFzcykuYWRkQ2xhc3Moby5leHBhbmRlZENsYXNzKTtzZWxmLnJlZnJlc2hQb3NpdGlvbnMoKTtzZWxmLl90cmlnZ2VyKCJleHBhbmQiLGV2ZW50LHNlbGYuX3VpSGFzaCgpKTt9LG8uZXhwYW5kT25Ib3Zlcik7fX0KdGhpcy5kaXJlY3Rpb249aW50ZXJzZWN0aW9uPT09MT8iZG93biI6InVwIjtpZih0aGlzLm9wdGlvbnMudG9sZXJhbmNlPT09InBvaW50ZXIifHx0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKGl0ZW0pKXskKGl0ZW1FbGVtZW50KS5tb3VzZWxlYXZlKCk7dGhpcy5tb3VzZWVudGVyZWQ9ZmFsc2U7JChpdGVtRWxlbWVudCkucmVtb3ZlQ2xhc3Moby5ob3ZlcmluZ0NsYXNzKTtpZih0aGlzLmhvdmVyaW5nKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJpbmcpO30KdGhpcy5ob3ZlcmluZz1udWxsO2lmKG8ucHJvdGVjdFJvb3QmJiEodGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlPT09dGhpcy5lbGVtZW50WzBdJiZpdGVtRWxlbWVudC5wYXJlbnROb2RlIT09dGhpcy5lbGVtZW50WzBdKSl7aWYodGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlIT09dGhpcy5lbGVtZW50WzBdJiZpdGVtRWxlbWVudC5wYXJlbnROb2RlPT09dGhpcy5lbGVtZW50WzBdKXtpZighJChpdGVtRWxlbWVudCkuY2hpbGRyZW4oby5saXN0VHlwZSkubGVuZ3RoKXtpdGVtRWxlbWVudC5hcHBlbmRDaGlsZChuZXdMaXN0KTtpZihvLmlzVHJlZSl7JChpdGVtRWxlbWVudCkucmVtb3ZlQ2xhc3Moby5sZWFmQ2xhc3MpLmFkZENsYXNzKG8uYnJhbmNoQ2xhc3MrIiAiK28uZXhwYW5kZWRDbGFzcyk7fX0KaWYodGhpcy5kaXJlY3Rpb249PT0iZG93biIpe2E9JChpdGVtRWxlbWVudCkucHJldigpLmNoaWxkcmVuKG8ubGlzdFR5cGUpO31lbHNle2E9JChpdGVtRWxlbWVudCkuY2hpbGRyZW4oby5saXN0VHlwZSk7fQppZihhWzBdIT09dW5kZWZpbmVkKXt0aGlzLl9yZWFycmFuZ2UoZXZlbnQsbnVsbCxhKTt9fWVsc2V7dGhpcy5fcmVhcnJhbmdlKGV2ZW50LGl0ZW0pO319ZWxzZSBpZighby5wcm90ZWN0Um9vdCl7dGhpcy5fcmVhcnJhbmdlKGV2ZW50LGl0ZW0pO319ZWxzZXticmVhazt9CnRoaXMuX2NsZWFyRW1wdHkoaXRlbUVsZW1lbnQpO3RoaXMuX3RyaWdnZXIoImNoYW5nZSIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO2JyZWFrO319CihmdW5jdGlvbigpe3ZhciBfcHJldmlvdXNJdGVtPXRoaXMucGxhY2Vob2xkZXIucHJldigpO2lmKF9wcmV2aW91c0l0ZW0ubGVuZ3RoKXtwcmV2aW91c0l0ZW09X3ByZXZpb3VzSXRlbTt9ZWxzZXtwcmV2aW91c0l0ZW09bnVsbDt9fS5jYWxsKHRoaXMpKTtpZihwcmV2aW91c0l0ZW0hPW51bGwpe3doaWxlKHByZXZpb3VzSXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ImxpInx8cHJldmlvdXNJdGVtWzBdLmNsYXNzTmFtZS5pbmRleE9mKG8uZGlzYWJsZWRDbGFzcykhPT0tMXx8cHJldmlvdXNJdGVtWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXXx8cHJldmlvdXNJdGVtWzBdPT09dGhpcy5oZWxwZXJbMF0pe2lmKHByZXZpb3VzSXRlbVswXS5wcmV2aW91c1NpYmxpbmcpe3ByZXZpb3VzSXRlbT0kKHByZXZpb3VzSXRlbVswXS5wcmV2aW91c1NpYmxpbmcpO31lbHNle3ByZXZpb3VzSXRlbT1udWxsO2JyZWFrO319fQooZnVuY3Rpb24oKXt2YXIgX25leHRJdGVtPXRoaXMucGxhY2Vob2xkZXIubmV4dCgpO2lmKF9uZXh0SXRlbS5sZW5ndGgpe25leHRJdGVtPV9uZXh0SXRlbTt9ZWxzZXtuZXh0SXRlbT1udWxsO319LmNhbGwodGhpcykpO2lmKG5leHRJdGVtIT1udWxsKXt3aGlsZShuZXh0SXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ImxpInx8bmV4dEl0ZW1bMF0uY2xhc3NOYW1lLmluZGV4T2Yoby5kaXNhYmxlZENsYXNzKSE9PS0xfHxuZXh0SXRlbVswXT09PXRoaXMuY3VycmVudEl0ZW1bMF18fG5leHRJdGVtWzBdPT09dGhpcy5oZWxwZXJbMF0pe2lmKG5leHRJdGVtWzBdLm5leHRTaWJsaW5nKXtuZXh0SXRlbT0kKG5leHRJdGVtWzBdLm5leHRTaWJsaW5nKTt9ZWxzZXtuZXh0SXRlbT1udWxsO2JyZWFrO319fQp0aGlzLmJleW9uZE1heExldmVscz0wO2lmKHBhcmVudEl0ZW0hPW51bGwmJm5leHRJdGVtPT1udWxsJiYhKG8ucHJvdGVjdFJvb3QmJnBhcmVudEl0ZW1bMF0ucGFyZW50Tm9kZT09dGhpcy5lbGVtZW50WzBdKSYmKG8ucnRsJiYodGhpcy5wb3NpdGlvbkFicy5sZWZ0Kwp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCk+cGFyZW50SXRlbS5vZmZzZXQoKS5sZWZ0KwpwYXJlbnRJdGVtLm91dGVyV2lkdGgoKSl8fCFvLnJ0bCYmKHRoaXMucG9zaXRpb25BYnMubGVmdDxwYXJlbnRJdGVtLm9mZnNldCgpLmxlZnQpKSl7cGFyZW50SXRlbS5hZnRlcih0aGlzLnBsYWNlaG9sZGVyWzBdKTtoZWxwZXJJc05vdFNpYmxpbmc9IXBhcmVudEl0ZW0uY2hpbGRyZW4oby5saXN0SXRlbSkuY2hpbGRyZW4oImxpOnZpc2libGU6bm90KC51aS1zb3J0YWJsZS1oZWxwZXIpIikubGVuZ3RoO2lmKG8uaXNUcmVlJiZoZWxwZXJJc05vdFNpYmxpbmcpe3BhcmVudEl0ZW0ucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmJyYW5jaENsYXNzKyIgIit0aGlzLm9wdGlvbnMuZXhwYW5kZWRDbGFzcykuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmxlYWZDbGFzcyk7fQppZih0eXBlb2YgcGFyZW50SXRlbSE9PSd1bmRlZmluZWQnKQp0aGlzLl9jbGVhckVtcHR5KHBhcmVudEl0ZW1bMF0pO3RoaXMuX3RyaWdnZXIoImNoYW5nZSIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO31lbHNlIGlmKHByZXZpb3VzSXRlbSE9bnVsbCYmIXByZXZpb3VzSXRlbS5oYXNDbGFzcyhvLmRpc2FibGVOZXN0aW5nQ2xhc3MpJiYocHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmxlbmd0aCYmcHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmlzKCI6dmlzaWJsZSIpfHwhcHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmxlbmd0aCkmJiEoby5wcm90ZWN0Um9vdCYmdGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlPT09dGhpcy5lbGVtZW50WzBdKSYmKG8ucnRsJiYodGhpcy5wb3NpdGlvbkFicy5sZWZ0Kwp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCk8cHJldmlvdXNJdGVtLm9mZnNldCgpLmxlZnQrCnByZXZpb3VzSXRlbS5vdXRlcldpZHRoKCktCm8udGFiU2l6ZSl8fCFvLnJ0bCYmKHRoaXMucG9zaXRpb25BYnMubGVmdD5wcmV2aW91c0l0ZW0ub2Zmc2V0KCkubGVmdCtvLnRhYlNpemUpKSl7dGhpcy5faXNBbGxvd2VkKHByZXZpb3VzSXRlbSxsZXZlbCxsZXZlbCtjaGlsZExldmVscysxKTtpZighcHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmxlbmd0aCl7cHJldmlvdXNJdGVtWzBdLmFwcGVuZENoaWxkKG5ld0xpc3QpO2lmKG8uaXNUcmVlKXtwcmV2aW91c0l0ZW0ucmVtb3ZlQ2xhc3Moby5sZWFmQ2xhc3MpLmFkZENsYXNzKG8uYnJhbmNoQ2xhc3MrIiAiK28uZXhwYW5kZWRDbGFzcyk7fX0KaWYocHJldmlvdXNUb3BPZmZzZXQmJihwcmV2aW91c1RvcE9mZnNldDw9cHJldmlvdXNJdGVtLm9mZnNldCgpLnRvcCkpe3ByZXZpb3VzSXRlbS5jaGlsZHJlbihvLmxpc3RUeXBlKS5wcmVwZW5kKHRoaXMucGxhY2Vob2xkZXIpO31lbHNle3ByZXZpb3VzSXRlbS5jaGlsZHJlbihvLmxpc3RUeXBlKVswXS5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTt9CmlmKHR5cGVvZiBwYXJlbnRJdGVtIT09J3VuZGVmaW5lZCcpCnRoaXMuX2NsZWFyRW1wdHkocGFyZW50SXRlbVswXSk7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx0aGlzLl91aUhhc2goKSk7fWVsc2V7dGhpcy5faXNBbGxvd2VkKHBhcmVudEl0ZW0sbGV2ZWwsbGV2ZWwrY2hpbGRMZXZlbHMpO30KdGhpcy5fY29udGFjdENvbnRhaW5lcnMoZXZlbnQpO2lmKCQudWkuZGRtYW5hZ2VyKXskLnVpLmRkbWFuYWdlci5kcmFnKHRoaXMsZXZlbnQpO30KdGhpcy5fdHJpZ2dlcigic29ydCIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO3RoaXMubGFzdFBvc2l0aW9uQWJzPXRoaXMucG9zaXRpb25BYnM7cmV0dXJuIGZhbHNlO30sX21vdXNlU3RvcDpmdW5jdGlvbihldmVudCl7aWYodGhpcy5iZXlvbmRNYXhMZXZlbHMpe3RoaXMucGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmVycm9yQ2xhc3MpO2lmKHRoaXMuZG9tUG9zaXRpb24ucHJldil7JCh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLmFmdGVyKHRoaXMucGxhY2Vob2xkZXIpO31lbHNleyQodGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQpLnByZXBlbmQodGhpcy5wbGFjZWhvbGRlcik7fQp0aGlzLl90cmlnZ2VyKCJyZXZlcnQiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt9CiQoIi4iK3RoaXMub3B0aW9ucy5ob3ZlcmluZ0NsYXNzKS5tb3VzZWxlYXZlKCkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyaW5nQ2xhc3MpO3RoaXMubW91c2VlbnRlcmVkPWZhbHNlO2lmKHRoaXMuaG92ZXJpbmcpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5ob3ZlcmluZyk7fQp0aGlzLmhvdmVyaW5nPW51bGw7dGhpcy5fcmVsb2NhdGVfZXZlbnQ9ZXZlbnQ7dGhpcy5fcGlkX2N1cnJlbnQ9JCh0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCkucGFyZW50KCkuYXR0cigiaWQiKTt0aGlzLl9zb3J0X2N1cnJlbnQ9dGhpcy5kb21Qb3NpdGlvbi5wcmV2PyQodGhpcy5kb21Qb3NpdGlvbi5wcmV2KS5uZXh0KCkuaW5kZXgoKTowOyQudWkuc29ydGFibGUucHJvdG90eXBlLl9tb3VzZVN0b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sX2ludGVyc2VjdHNXaXRoU2lkZXM6ZnVuY3Rpb24oaXRlbSl7dmFyIGhhbGY9dGhpcy5vcHRpb25zLmlzVHJlZT8uODouNSxpc092ZXJCb3R0b21IYWxmPWlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3ArdGhpcy5vZmZzZXQuY2xpY2sudG9wLGl0ZW0udG9wKyhpdGVtLmhlaWdodCpoYWxmKSxpdGVtLmhlaWdodCksaXNPdmVyVG9wSGFsZj1pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCxpdGVtLnRvcC0oaXRlbS5oZWlnaHQqaGFsZiksaXRlbS5oZWlnaHQpLGlzT3ZlclJpZ2h0SGFsZj1pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCt0aGlzLm9mZnNldC5jbGljay5sZWZ0LGl0ZW0ubGVmdCsoaXRlbS53aWR0aC8yKSxpdGVtLndpZHRoKSx2ZXJ0aWNhbERpcmVjdGlvbj10aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSxob3Jpem9udGFsRGlyZWN0aW9uPXRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7aWYodGhpcy5mbG9hdGluZyYmaG9yaXpvbnRhbERpcmVjdGlvbil7cmV0dXJuKChob3Jpem9udGFsRGlyZWN0aW9uPT09InJpZ2h0IiYmaXNPdmVyUmlnaHRIYWxmKXx8KGhvcml6b250YWxEaXJlY3Rpb249PT0ibGVmdCImJiFpc092ZXJSaWdodEhhbGYpKTt9ZWxzZXtyZXR1cm4gdmVydGljYWxEaXJlY3Rpb24mJigodmVydGljYWxEaXJlY3Rpb249PT0iZG93biImJmlzT3ZlckJvdHRvbUhhbGYpfHwodmVydGljYWxEaXJlY3Rpb249PT0idXAiJiZpc092ZXJUb3BIYWxmKSk7fX0sX2NvbnRhY3RDb250YWluZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLnByb3RlY3RSb290JiZ0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGU9PT10aGlzLmVsZW1lbnRbMF0pe3JldHVybjt9CiQudWkuc29ydGFibGUucHJvdG90eXBlLl9jb250YWN0Q29udGFpbmVycy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxfY2xlYXI6ZnVuY3Rpb24oKXt2YXIgaSxpdGVtOyQudWkuc29ydGFibGUucHJvdG90eXBlLl9jbGVhci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoISh0aGlzLl9waWRfY3VycmVudD09PXRoaXMuX3VpSGFzaCgpLml0ZW0ucGFyZW50KCkucGFyZW50KCkuYXR0cigiaWQiKSYmdGhpcy5fc29ydF9jdXJyZW50PT09dGhpcy5fdWlIYXNoKCkuaXRlbS5pbmRleCgpKSl7dGhpcy5fdHJpZ2dlcigicmVsb2NhdGUiLHRoaXMuX3JlbG9jYXRlX2V2ZW50LHRoaXMuX3VpSGFzaCgpKTt9CmZvcihpPXRoaXMuaXRlbXMubGVuZ3RoLTE7aT49MDtpLS0pe2l0ZW09dGhpcy5pdGVtc1tpXS5pdGVtWzBdO3RoaXMuX2NsZWFyRW1wdHkoaXRlbSk7fX0sc2VyaWFsaXplOmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBvPSQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyxvcHRpb25zKSxpdGVtcz10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8mJm8uY29ubmVjdGVkKSxzdHI9W107JChpdGVtcykuZWFjaChmdW5jdGlvbigpe3ZhciByZXM9KCQoby5pdGVtfHx0aGlzKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKXx8IiIpLm1hdGNoKG8uZXhwcmVzc2lvbnx8KC8oLispWy09X10oLispLykpLHBpZD0oJChvLml0ZW18fHRoaXMpLnBhcmVudChvLmxpc3RUeXBlKS5wYXJlbnQoby5pdGVtcykuYXR0cihvLmF0dHJpYnV0ZXx8ImlkIil8fCIiKS5tYXRjaChvLmV4cHJlc3Npb258fCgvKC4rKVstPV9dKC4rKS8pKTtpZihyZXMpe3N0ci5wdXNoKCgoby5rZXl8fHJlc1sxXSkrIlsiKwooby5rZXkmJm8uZXhwcmVzc2lvbj9yZXNbMV06cmVzWzJdKSsiXSIpKyI9IisKKHBpZD8oby5rZXkmJm8uZXhwcmVzc2lvbj9waWRbMV06cGlkWzJdKTpvLnJvb3RJRCkpO319KTtpZighc3RyLmxlbmd0aCYmby5rZXkpe3N0ci5wdXNoKG8ua2V5KyI9Iik7fQpyZXR1cm4gc3RyLmpvaW4oIiYiKTt9LHRvSGllcmFyY2h5OmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBvPSQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyxvcHRpb25zKSxyZXQ9W107JCh0aGlzLmVsZW1lbnQpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oKXt2YXIgbGV2ZWw9X3JlY3Vyc2l2ZUl0ZW1zKHRoaXMpO3JldC5wdXNoKGxldmVsKTt9KTtyZXR1cm4gcmV0O2Z1bmN0aW9uIF9yZWN1cnNpdmVJdGVtcyhpdGVtKXt2YXIgaWQ9KCQoaXRlbSkuYXR0cihvLmF0dHJpYnV0ZXx8ImlkIil8fCIiKS5tYXRjaChvLmV4cHJlc3Npb258fCgvKC4rKVstPV9dKC4rKS8pKSxjdXJyZW50SXRlbTt2YXIgZGF0YT0kKGl0ZW0pLmRhdGEoKTtpZihkYXRhLm5lc3RlZFNvcnRhYmxlSXRlbSl7ZGVsZXRlIGRhdGEubmVzdGVkU29ydGFibGVJdGVtO30KaWYoaWQpe2N1cnJlbnRJdGVtPXsiaWQiOmlkWzJdfTtjdXJyZW50SXRlbT0kLmV4dGVuZCh7fSxjdXJyZW50SXRlbSxkYXRhKTtpZigkKGl0ZW0pLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmxlbmd0aD4wKXtjdXJyZW50SXRlbS5jaGlsZHJlbj1bXTskKGl0ZW0pLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oKXt2YXIgbGV2ZWw9X3JlY3Vyc2l2ZUl0ZW1zKHRoaXMpO2N1cnJlbnRJdGVtLmNoaWxkcmVuLnB1c2gobGV2ZWwpO30pO30KcmV0dXJuIGN1cnJlbnRJdGVtO319fSx0b0FycmF5OmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBvPSQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyxvcHRpb25zKSxzRGVwdGg9by5zdGFydERlcHRoQ291bnR8fDAscmV0PVtdLGxlZnQ9MTtpZighby5leGNsdWRlUm9vdCl7cmV0LnB1c2goeyJpdGVtX2lkIjpvLnJvb3RJRCwicGFyZW50X2lkIjpudWxsLCJkZXB0aCI6c0RlcHRoLCJsZWZ0IjpsZWZ0LCJyaWdodCI6KCQoby5pdGVtcyx0aGlzLmVsZW1lbnQpLmxlbmd0aCsxKSoyfSk7bGVmdCsrO30KJCh0aGlzLmVsZW1lbnQpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oKXtsZWZ0PV9yZWN1cnNpdmVBcnJheSh0aGlzLHNEZXB0aCxsZWZ0KTt9KTtyZXQ9cmV0LnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5sZWZ0LWIubGVmdCk7fSk7cmV0dXJuIHJldDtmdW5jdGlvbiBfcmVjdXJzaXZlQXJyYXkoaXRlbSxkZXB0aCxfbGVmdCl7dmFyIHJpZ2h0PV9sZWZ0KzEsaWQscGlkLHBhcmVudEl0ZW07aWYoJChpdGVtKS5jaGlsZHJlbihvLmxpc3RUeXBlKS5jaGlsZHJlbihvLml0ZW1zKS5sZW5ndGg+MCl7ZGVwdGgrKzskKGl0ZW0pLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oKXtyaWdodD1fcmVjdXJzaXZlQXJyYXkoJCh0aGlzKSxkZXB0aCxyaWdodCk7fSk7ZGVwdGgtLTt9CmlkPSgkKGl0ZW0pLmF0dHIoby5hdHRyaWJ1dGV8fCJpZCIpKS5tYXRjaChvLmV4cHJlc3Npb258fCgvKC4rKVstPV9dKC4rKS8pKTtpZihkZXB0aD09PXNEZXB0aCl7cGlkPW8ucm9vdElEO31lbHNle3BhcmVudEl0ZW09KCQoaXRlbSkucGFyZW50KG8ubGlzdFR5cGUpLnBhcmVudChvLml0ZW1zKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKSkubWF0Y2goby5leHByZXNzaW9ufHwoLyguKylbLT1fXSguKykvKSk7cGlkPXBhcmVudEl0ZW1bMl07fQppZihpZCl7dmFyIGRhdGE9JChpdGVtKS5jaGlsZHJlbignZGl2JykuZGF0YSgpO3ZhciBpdGVtT2JqPSQuZXh0ZW5kKGRhdGEseyJpZCI6aWRbMl0sInBhcmVudF9pZCI6cGlkLCJkZXB0aCI6ZGVwdGgsImxlZnQiOl9sZWZ0LCJyaWdodCI6cmlnaHR9KTtyZXQucHVzaChpdGVtT2JqKTt9Cl9sZWZ0PXJpZ2h0KzE7cmV0dXJuIF9sZWZ0O319LF9jbGVhckVtcHR5OmZ1bmN0aW9uKGl0ZW0pe2Z1bmN0aW9uIHJlcGxhY2VDbGFzcyhlbGVtLHNlYXJjaCxyZXBsYWNlLHN3YXApe2lmKHN3YXApe3NlYXJjaD1bcmVwbGFjZSxyZXBsYWNlPXNlYXJjaF1bMF07fQokKGVsZW0pLnJlbW92ZUNsYXNzKHNlYXJjaCkuYWRkQ2xhc3MocmVwbGFjZSk7fQp2YXIgbz10aGlzLm9wdGlvbnMsY2hpbGRyZW5MaXN0PSQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSksaGFzQ2hpbGRyZW49Y2hpbGRyZW5MaXN0LmhhcygnbGknKS5sZW5ndGg7dmFyIGRvTm90Q2xlYXI9by5kb05vdENsZWFyfHxoYXNDaGlsZHJlbnx8by5wcm90ZWN0Um9vdCYmJChpdGVtKVswXT09PXRoaXMuZWxlbWVudFswXTtpZihvLmlzVHJlZSl7cmVwbGFjZUNsYXNzKGl0ZW0sby5icmFuY2hDbGFzcyxvLmxlYWZDbGFzcyxkb05vdENsZWFyKTt9CmlmKCFkb05vdENsZWFyKXtjaGlsZHJlbkxpc3QucGFyZW50KCkucmVtb3ZlQ2xhc3Moby5leHBhbmRlZENsYXNzKTtjaGlsZHJlbkxpc3QucmVtb3ZlKCk7fX0sX2dldExldmVsOmZ1bmN0aW9uKGl0ZW0pe3ZhciBsZXZlbD0xLGxpc3Q7aWYodGhpcy5vcHRpb25zLmxpc3RUeXBlKXtsaXN0PWl0ZW0uY2xvc2VzdCh0aGlzLm9wdGlvbnMubGlzdFR5cGUpO3doaWxlKGxpc3QmJmxpc3QubGVuZ3RoPjAmJiFsaXN0LmlzKCIudWktc29ydGFibGUiKSl7bGV2ZWwrKztsaXN0PWxpc3QucGFyZW50KCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMubGlzdFR5cGUpO319CnJldHVybiBsZXZlbDt9LF9nZXRDaGlsZExldmVsczpmdW5jdGlvbihwYXJlbnQsZGVwdGgpe3ZhciBzZWxmPXRoaXMsbz10aGlzLm9wdGlvbnMscmVzdWx0PTA7ZGVwdGg9ZGVwdGh8fDA7JChwYXJlbnQpLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oaW5kZXgsY2hpbGQpe3Jlc3VsdD1NYXRoLm1heChzZWxmLl9nZXRDaGlsZExldmVscyhjaGlsZCxkZXB0aCsxKSxyZXN1bHQpO30pO3JldHVybiBkZXB0aD9yZXN1bHQrMTpyZXN1bHQ7fSxfaXNBbGxvd2VkOmZ1bmN0aW9uKHBhcmVudEl0ZW0sbGV2ZWwsbGV2ZWxzKXt2YXIgbz10aGlzLm9wdGlvbnMsbWF4TGV2ZWxzPXRoaXMucGxhY2Vob2xkZXIuY2xvc2VzdCgiLnVpLXNvcnRhYmxlIikubmVzdGVkU29ydGFibGUoIm9wdGlvbiIsIm1heExldmVscyIpLG9sZFBhcmVudD10aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLnBhcmVudCgpLGRpc2FibGVkQnlQYXJlbnRjaGFuZ2U9by5kaXNhYmxlUGFyZW50Q2hhbmdlJiYodHlwZW9mIHBhcmVudEl0ZW0hPT0ndW5kZWZpbmVkJyYmIW9sZFBhcmVudC5pcyhwYXJlbnRJdGVtKXx8dHlwZW9mIHBhcmVudEl0ZW09PT0ndW5kZWZpbmVkJyYmb2xkUGFyZW50LmlzKCJsaSIpKTtpZihkaXNhYmxlZEJ5UGFyZW50Y2hhbmdlfHwhby5pc0FsbG93ZWQodGhpcy5wbGFjZWhvbGRlcixwYXJlbnRJdGVtLHRoaXMuY3VycmVudEl0ZW0pKXt0aGlzLnBsYWNlaG9sZGVyLmFkZENsYXNzKG8uZXJyb3JDbGFzcyk7aWYobWF4TGV2ZWxzPGxldmVscyYmbWF4TGV2ZWxzIT09MCl7dGhpcy5iZXlvbmRNYXhMZXZlbHM9bGV2ZWxzLW1heExldmVsczt9ZWxzZXt0aGlzLmJleW9uZE1heExldmVscz0xO319ZWxzZXtpZihtYXhMZXZlbHM8bGV2ZWxzJiZtYXhMZXZlbHMhPT0wKXt0aGlzLnBsYWNlaG9sZGVyLmFkZENsYXNzKG8uZXJyb3JDbGFzcyk7dGhpcy5iZXlvbmRNYXhMZXZlbHM9bGV2ZWxzLW1heExldmVsczt9ZWxzZXt0aGlzLnBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKG8uZXJyb3JDbGFzcyk7dGhpcy5iZXlvbmRNYXhMZXZlbHM9MDt9fX19KSk7JC5tanMubmVzdGVkU29ydGFibGUucHJvdG90eXBlLm9wdGlvbnM9JC5leHRlbmQoe30sJC51aS5zb3J0YWJsZS5wcm90b3R5cGUub3B0aW9ucywkLm1qcy5uZXN0ZWRTb3J0YWJsZS5wcm90b3R5cGUub3B0aW9ucyk7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9wb3BwZXIvcG9wcGVyLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe3R5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJz9tb2R1bGUuZXhwb3J0cz1mYWN0b3J5KCk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKGZhY3RvcnkpOihnbG9iYWwuUG9wcGVyPWZhY3RvcnkoKSk7fSh0aGlzLChmdW5jdGlvbigpeyd1c2Ugc3RyaWN0Jzt2YXIgaXNCcm93c2VyPXR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyYmdHlwZW9mIGRvY3VtZW50IT09J3VuZGVmaW5lZCc7dmFyIGxvbmdlclRpbWVvdXRCcm93c2Vycz1bJ0VkZ2UnLCdUcmlkZW50JywnRmlyZWZveCddO3ZhciB0aW1lb3V0RHVyYXRpb249MDtmb3IodmFyIGk9MDtpPGxvbmdlclRpbWVvdXRCcm93c2Vycy5sZW5ndGg7aSs9MSl7aWYoaXNCcm93c2VyJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YobG9uZ2VyVGltZW91dEJyb3dzZXJzW2ldKT49MCl7dGltZW91dER1cmF0aW9uPTE7YnJlYWs7fX0KZnVuY3Rpb24gbWljcm90YXNrRGVib3VuY2UoZm4pe3ZhciBjYWxsZWQ9ZmFsc2U7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY2FsbGVkKXtyZXR1cm47fQpjYWxsZWQ9dHJ1ZTt3aW5kb3cuUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe2NhbGxlZD1mYWxzZTtmbigpO30pO307fQpmdW5jdGlvbiB0YXNrRGVib3VuY2UoZm4pe3ZhciBzY2hlZHVsZWQ9ZmFsc2U7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIXNjaGVkdWxlZCl7c2NoZWR1bGVkPXRydWU7c2V0VGltZW91dChmdW5jdGlvbigpe3NjaGVkdWxlZD1mYWxzZTtmbigpO30sdGltZW91dER1cmF0aW9uKTt9fTt9CnZhciBzdXBwb3J0c01pY3JvVGFza3M9aXNCcm93c2VyJiZ3aW5kb3cuUHJvbWlzZTt2YXIgZGVib3VuY2U9c3VwcG9ydHNNaWNyb1Rhc2tzP21pY3JvdGFza0RlYm91bmNlOnRhc2tEZWJvdW5jZTtmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmN0aW9uVG9DaGVjayl7dmFyIGdldFR5cGU9e307cmV0dXJuIGZ1bmN0aW9uVG9DaGVjayYmZ2V0VHlwZS50b1N0cmluZy5jYWxsKGZ1bmN0aW9uVG9DaGVjayk9PT0nW29iamVjdCBGdW5jdGlvbl0nO30KZnVuY3Rpb24gZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsZW1lbnQscHJvcGVydHkpe2lmKGVsZW1lbnQubm9kZVR5cGUhPT0xKXtyZXR1cm5bXTt9CnZhciBjc3M9Z2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LG51bGwpO3JldHVybiBwcm9wZXJ0eT9jc3NbcHJvcGVydHldOmNzczt9CmZ1bmN0aW9uIGdldFBhcmVudE5vZGUoZWxlbWVudCl7aWYoZWxlbWVudC5ub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGVsZW1lbnQ7fQpyZXR1cm4gZWxlbWVudC5wYXJlbnROb2RlfHxlbGVtZW50Lmhvc3Q7fQpmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQoZWxlbWVudCl7aWYoIWVsZW1lbnQpe3JldHVybiBkb2N1bWVudC5ib2R5O30Kc3dpdGNoKGVsZW1lbnQubm9kZU5hbWUpe2Nhc2UnSFRNTCc6Y2FzZSdCT0RZJzpyZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50LmJvZHk7Y2FzZScjZG9jdW1lbnQnOnJldHVybiBlbGVtZW50LmJvZHk7fQp2YXIgX2dldFN0eWxlQ29tcHV0ZWRQcm9wPWdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShlbGVtZW50KSxvdmVyZmxvdz1fZ2V0U3R5bGVDb21wdXRlZFByb3Aub3ZlcmZsb3csb3ZlcmZsb3dYPV9nZXRTdHlsZUNvbXB1dGVkUHJvcC5vdmVyZmxvd1gsb3ZlcmZsb3dZPV9nZXRTdHlsZUNvbXB1dGVkUHJvcC5vdmVyZmxvd1k7aWYoLyhhdXRvfHNjcm9sbHxvdmVybGF5KS8udGVzdChvdmVyZmxvdytvdmVyZmxvd1krb3ZlcmZsb3dYKSl7cmV0dXJuIGVsZW1lbnQ7fQpyZXR1cm4gZ2V0U2Nyb2xsUGFyZW50KGdldFBhcmVudE5vZGUoZWxlbWVudCkpO30KdmFyIGlzSUUxMT1pc0Jyb3dzZXImJiEhKHdpbmRvdy5NU0lucHV0TWV0aG9kQ29udGV4dCYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlKTt2YXIgaXNJRTEwPWlzQnJvd3NlciYmL01TSUUgMTAvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7ZnVuY3Rpb24gaXNJRSh2ZXJzaW9uKXtpZih2ZXJzaW9uPT09MTEpe3JldHVybiBpc0lFMTE7fQppZih2ZXJzaW9uPT09MTApe3JldHVybiBpc0lFMTA7fQpyZXR1cm4gaXNJRTExfHxpc0lFMTA7fQpmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCl7aWYoIWVsZW1lbnQpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fQp2YXIgbm9PZmZzZXRQYXJlbnQ9aXNJRSgxMCk/ZG9jdW1lbnQuYm9keTpudWxsO3ZhciBvZmZzZXRQYXJlbnQ9ZWxlbWVudC5vZmZzZXRQYXJlbnQ7d2hpbGUob2Zmc2V0UGFyZW50PT09bm9PZmZzZXRQYXJlbnQmJmVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nKXtvZmZzZXRQYXJlbnQ9KGVsZW1lbnQ9ZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcpLm9mZnNldFBhcmVudDt9CnZhciBub2RlTmFtZT1vZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudC5ub2RlTmFtZTtpZighbm9kZU5hbWV8fG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGVsZW1lbnQ/ZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fQppZihbJ1REJywnVEFCTEUnXS5pbmRleE9mKG9mZnNldFBhcmVudC5ub2RlTmFtZSkhPT0tMSYmZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KG9mZnNldFBhcmVudCwncG9zaXRpb24nKT09PSdzdGF0aWMnKXtyZXR1cm4gZ2V0T2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7fQpyZXR1cm4gb2Zmc2V0UGFyZW50O30KZnVuY3Rpb24gaXNPZmZzZXRDb250YWluZXIoZWxlbWVudCl7dmFyIG5vZGVOYW1lPWVsZW1lbnQubm9kZU5hbWU7aWYobm9kZU5hbWU9PT0nQk9EWScpe3JldHVybiBmYWxzZTt9CnJldHVybiBub2RlTmFtZT09PSdIVE1MJ3x8Z2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpPT09ZWxlbWVudDt9CmZ1bmN0aW9uIGdldFJvb3Qobm9kZSl7aWYobm9kZS5wYXJlbnROb2RlIT09bnVsbCl7cmV0dXJuIGdldFJvb3Qobm9kZS5wYXJlbnROb2RlKTt9CnJldHVybiBub2RlO30KZnVuY3Rpb24gZmluZENvbW1vbk9mZnNldFBhcmVudChlbGVtZW50MSxlbGVtZW50Mil7aWYoIWVsZW1lbnQxfHwhZWxlbWVudDEubm9kZVR5cGV8fCFlbGVtZW50Mnx8IWVsZW1lbnQyLm5vZGVUeXBlKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KdmFyIG9yZGVyPWVsZW1lbnQxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGVsZW1lbnQyKSZOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORzt2YXIgc3RhcnQ9b3JkZXI/ZWxlbWVudDE6ZWxlbWVudDI7dmFyIGVuZD1vcmRlcj9lbGVtZW50MjplbGVtZW50MTt2YXIgcmFuZ2U9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyYW5nZS5zZXRTdGFydChzdGFydCwwKTtyYW5nZS5zZXRFbmQoZW5kLDApO3ZhciBjb21tb25BbmNlc3RvckNvbnRhaW5lcj1yYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtpZihlbGVtZW50MSE9PWNvbW1vbkFuY2VzdG9yQ29udGFpbmVyJiZlbGVtZW50MiE9PWNvbW1vbkFuY2VzdG9yQ29udGFpbmVyfHxzdGFydC5jb250YWlucyhlbmQpKXtpZihpc09mZnNldENvbnRhaW5lcihjb21tb25BbmNlc3RvckNvbnRhaW5lcikpe3JldHVybiBjb21tb25BbmNlc3RvckNvbnRhaW5lcjt9CnJldHVybiBnZXRPZmZzZXRQYXJlbnQoY29tbW9uQW5jZXN0b3JDb250YWluZXIpO30KdmFyIGVsZW1lbnQxcm9vdD1nZXRSb290KGVsZW1lbnQxKTtpZihlbGVtZW50MXJvb3QuaG9zdCl7cmV0dXJuIGZpbmRDb21tb25PZmZzZXRQYXJlbnQoZWxlbWVudDFyb290Lmhvc3QsZWxlbWVudDIpO31lbHNle3JldHVybiBmaW5kQ29tbW9uT2Zmc2V0UGFyZW50KGVsZW1lbnQxLGdldFJvb3QoZWxlbWVudDIpLmhvc3QpO319CmZ1bmN0aW9uIGdldFNjcm9sbChlbGVtZW50KXt2YXIgc2lkZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06J3RvcCc7dmFyIHVwcGVyU2lkZT1zaWRlPT09J3RvcCc/J3Njcm9sbFRvcCc6J3Njcm9sbExlZnQnO3ZhciBub2RlTmFtZT1lbGVtZW50Lm5vZGVOYW1lO2lmKG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7dmFyIGh0bWw9ZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt2YXIgc2Nyb2xsaW5nRWxlbWVudD1lbGVtZW50Lm93bmVyRG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudHx8aHRtbDtyZXR1cm4gc2Nyb2xsaW5nRWxlbWVudFt1cHBlclNpZGVdO30KcmV0dXJuIGVsZW1lbnRbdXBwZXJTaWRlXTt9CmZ1bmN0aW9uIGluY2x1ZGVTY3JvbGwocmVjdCxlbGVtZW50KXt2YXIgc3VidHJhY3Q9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzJdOmZhbHNlO3ZhciBzY3JvbGxUb3A9Z2V0U2Nyb2xsKGVsZW1lbnQsJ3RvcCcpO3ZhciBzY3JvbGxMZWZ0PWdldFNjcm9sbChlbGVtZW50LCdsZWZ0Jyk7dmFyIG1vZGlmaWVyPXN1YnRyYWN0Py0xOjE7cmVjdC50b3ArPXNjcm9sbFRvcCptb2RpZmllcjtyZWN0LmJvdHRvbSs9c2Nyb2xsVG9wKm1vZGlmaWVyO3JlY3QubGVmdCs9c2Nyb2xsTGVmdCptb2RpZmllcjtyZWN0LnJpZ2h0Kz1zY3JvbGxMZWZ0Km1vZGlmaWVyO3JldHVybiByZWN0O30KZnVuY3Rpb24gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzLGF4aXMpe3ZhciBzaWRlQT1heGlzPT09J3gnPydMZWZ0JzonVG9wJzt2YXIgc2lkZUI9c2lkZUE9PT0nTGVmdCc/J1JpZ2h0JzonQm90dG9tJztyZXR1cm4gcGFyc2VGbG9hdChzdHlsZXNbJ2JvcmRlcicrc2lkZUErJ1dpZHRoJ10sMTApK3BhcnNlRmxvYXQoc3R5bGVzWydib3JkZXInK3NpZGVCKydXaWR0aCddLDEwKTt9CmZ1bmN0aW9uIGdldFNpemUoYXhpcyxib2R5LGh0bWwsY29tcHV0ZWRTdHlsZSl7cmV0dXJuIE1hdGgubWF4KGJvZHlbJ29mZnNldCcrYXhpc10sYm9keVsnc2Nyb2xsJytheGlzXSxodG1sWydjbGllbnQnK2F4aXNdLGh0bWxbJ29mZnNldCcrYXhpc10saHRtbFsnc2Nyb2xsJytheGlzXSxpc0lFKDEwKT9odG1sWydvZmZzZXQnK2F4aXNdK2NvbXB1dGVkU3R5bGVbJ21hcmdpbicrKGF4aXM9PT0nSGVpZ2h0Jz8nVG9wJzonTGVmdCcpXStjb21wdXRlZFN0eWxlWydtYXJnaW4nKyhheGlzPT09J0hlaWdodCc/J0JvdHRvbSc6J1JpZ2h0JyldOjApO30KZnVuY3Rpb24gZ2V0V2luZG93U2l6ZXMoKXt2YXIgYm9keT1kb2N1bWVudC5ib2R5O3ZhciBodG1sPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt2YXIgY29tcHV0ZWRTdHlsZT1pc0lFKDEwKSYmZ2V0Q29tcHV0ZWRTdHlsZShodG1sKTtyZXR1cm57aGVpZ2h0OmdldFNpemUoJ0hlaWdodCcsYm9keSxodG1sLGNvbXB1dGVkU3R5bGUpLHdpZHRoOmdldFNpemUoJ1dpZHRoJyxib2R5LGh0bWwsY29tcHV0ZWRTdHlsZSl9O30KdmFyIGNsYXNzQ2FsbENoZWNrPWZ1bmN0aW9uKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fTt2YXIgY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CnJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24ob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO307dmFyIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV07Zm9yKHZhciBrZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkpe3RhcmdldFtrZXldPXNvdXJjZVtrZXldO319fQpyZXR1cm4gdGFyZ2V0O307ZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdChvZmZzZXRzKXtyZXR1cm4gX2V4dGVuZHMoe30sb2Zmc2V0cyx7cmlnaHQ6b2Zmc2V0cy5sZWZ0K29mZnNldHMud2lkdGgsYm90dG9tOm9mZnNldHMudG9wK29mZnNldHMuaGVpZ2h0fSk7fQpmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCl7dmFyIHJlY3Q9e307dHJ5e2lmKGlzSUUoMTApKXtyZWN0PWVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIHNjcm9sbFRvcD1nZXRTY3JvbGwoZWxlbWVudCwndG9wJyk7dmFyIHNjcm9sbExlZnQ9Z2V0U2Nyb2xsKGVsZW1lbnQsJ2xlZnQnKTtyZWN0LnRvcCs9c2Nyb2xsVG9wO3JlY3QubGVmdCs9c2Nyb2xsTGVmdDtyZWN0LmJvdHRvbSs9c2Nyb2xsVG9wO3JlY3QucmlnaHQrPXNjcm9sbExlZnQ7fWVsc2V7cmVjdD1lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO319Y2F0Y2goZSl7fQp2YXIgcmVzdWx0PXtsZWZ0OnJlY3QubGVmdCx0b3A6cmVjdC50b3Asd2lkdGg6cmVjdC5yaWdodC1yZWN0LmxlZnQsaGVpZ2h0OnJlY3QuYm90dG9tLXJlY3QudG9wfTt2YXIgc2l6ZXM9ZWxlbWVudC5ub2RlTmFtZT09PSdIVE1MJz9nZXRXaW5kb3dTaXplcygpOnt9O3ZhciB3aWR0aD1zaXplcy53aWR0aHx8ZWxlbWVudC5jbGllbnRXaWR0aHx8cmVzdWx0LnJpZ2h0LXJlc3VsdC5sZWZ0O3ZhciBoZWlnaHQ9c2l6ZXMuaGVpZ2h0fHxlbGVtZW50LmNsaWVudEhlaWdodHx8cmVzdWx0LmJvdHRvbS1yZXN1bHQudG9wO3ZhciBob3JpelNjcm9sbGJhcj1lbGVtZW50Lm9mZnNldFdpZHRoLXdpZHRoO3ZhciB2ZXJ0U2Nyb2xsYmFyPWVsZW1lbnQub2Zmc2V0SGVpZ2h0LWhlaWdodDtpZihob3JpelNjcm9sbGJhcnx8dmVydFNjcm9sbGJhcil7dmFyIHN0eWxlcz1nZXRTdHlsZUNvbXB1dGVkUHJvcGVydHkoZWxlbWVudCk7aG9yaXpTY3JvbGxiYXItPWdldEJvcmRlcnNTaXplKHN0eWxlcywneCcpO3ZlcnRTY3JvbGxiYXItPWdldEJvcmRlcnNTaXplKHN0eWxlcywneScpO3Jlc3VsdC53aWR0aC09aG9yaXpTY3JvbGxiYXI7cmVzdWx0LmhlaWdodC09dmVydFNjcm9sbGJhcjt9CnJldHVybiBnZXRDbGllbnRSZWN0KHJlc3VsdCk7fQpmdW5jdGlvbiBnZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoY2hpbGRyZW4scGFyZW50KXt2YXIgZml4ZWRQb3NpdGlvbj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMl06ZmFsc2U7dmFyIGlzSUUxMD1pc0lFKDEwKTt2YXIgaXNIVE1MPXBhcmVudC5ub2RlTmFtZT09PSdIVE1MJzt2YXIgY2hpbGRyZW5SZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdChjaGlsZHJlbik7dmFyIHBhcmVudFJlY3Q9Z2V0Qm91bmRpbmdDbGllbnRSZWN0KHBhcmVudCk7dmFyIHNjcm9sbFBhcmVudD1nZXRTY3JvbGxQYXJlbnQoY2hpbGRyZW4pO3ZhciBzdHlsZXM9Z2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KHBhcmVudCk7dmFyIGJvcmRlclRvcFdpZHRoPXBhcnNlRmxvYXQoc3R5bGVzLmJvcmRlclRvcFdpZHRoLDEwKTt2YXIgYm9yZGVyTGVmdFdpZHRoPXBhcnNlRmxvYXQoc3R5bGVzLmJvcmRlckxlZnRXaWR0aCwxMCk7aWYoZml4ZWRQb3NpdGlvbiYmcGFyZW50Lm5vZGVOYW1lPT09J0hUTUwnKXtwYXJlbnRSZWN0LnRvcD1NYXRoLm1heChwYXJlbnRSZWN0LnRvcCwwKTtwYXJlbnRSZWN0LmxlZnQ9TWF0aC5tYXgocGFyZW50UmVjdC5sZWZ0LDApO30KdmFyIG9mZnNldHM9Z2V0Q2xpZW50UmVjdCh7dG9wOmNoaWxkcmVuUmVjdC50b3AtcGFyZW50UmVjdC50b3AtYm9yZGVyVG9wV2lkdGgsbGVmdDpjaGlsZHJlblJlY3QubGVmdC1wYXJlbnRSZWN0LmxlZnQtYm9yZGVyTGVmdFdpZHRoLHdpZHRoOmNoaWxkcmVuUmVjdC53aWR0aCxoZWlnaHQ6Y2hpbGRyZW5SZWN0LmhlaWdodH0pO29mZnNldHMubWFyZ2luVG9wPTA7b2Zmc2V0cy5tYXJnaW5MZWZ0PTA7aWYoIWlzSUUxMCYmaXNIVE1MKXt2YXIgbWFyZ2luVG9wPXBhcnNlRmxvYXQoc3R5bGVzLm1hcmdpblRvcCwxMCk7dmFyIG1hcmdpbkxlZnQ9cGFyc2VGbG9hdChzdHlsZXMubWFyZ2luTGVmdCwxMCk7b2Zmc2V0cy50b3AtPWJvcmRlclRvcFdpZHRoLW1hcmdpblRvcDtvZmZzZXRzLmJvdHRvbS09Ym9yZGVyVG9wV2lkdGgtbWFyZ2luVG9wO29mZnNldHMubGVmdC09Ym9yZGVyTGVmdFdpZHRoLW1hcmdpbkxlZnQ7b2Zmc2V0cy5yaWdodC09Ym9yZGVyTGVmdFdpZHRoLW1hcmdpbkxlZnQ7b2Zmc2V0cy5tYXJnaW5Ub3A9bWFyZ2luVG9wO29mZnNldHMubWFyZ2luTGVmdD1tYXJnaW5MZWZ0O30KaWYoaXNJRTEwJiYhZml4ZWRQb3NpdGlvbj9wYXJlbnQuY29udGFpbnMoc2Nyb2xsUGFyZW50KTpwYXJlbnQ9PT1zY3JvbGxQYXJlbnQmJnNjcm9sbFBhcmVudC5ub2RlTmFtZSE9PSdCT0RZJyl7b2Zmc2V0cz1pbmNsdWRlU2Nyb2xsKG9mZnNldHMscGFyZW50KTt9CnJldHVybiBvZmZzZXRzO30KZnVuY3Rpb24gZ2V0Vmlld3BvcnRPZmZzZXRSZWN0UmVsYXRpdmVUb0FydGJpdHJhcnlOb2RlKGVsZW1lbnQpe3ZhciBleGNsdWRlU2Nyb2xsPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTpmYWxzZTt2YXIgaHRtbD1lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciByZWxhdGl2ZU9mZnNldD1nZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoZWxlbWVudCxodG1sKTt2YXIgd2lkdGg9TWF0aC5tYXgoaHRtbC5jbGllbnRXaWR0aCx3aW5kb3cuaW5uZXJXaWR0aHx8MCk7dmFyIGhlaWdodD1NYXRoLm1heChodG1sLmNsaWVudEhlaWdodCx3aW5kb3cuaW5uZXJIZWlnaHR8fDApO3ZhciBzY3JvbGxUb3A9IWV4Y2x1ZGVTY3JvbGw/Z2V0U2Nyb2xsKGh0bWwpOjA7dmFyIHNjcm9sbExlZnQ9IWV4Y2x1ZGVTY3JvbGw/Z2V0U2Nyb2xsKGh0bWwsJ2xlZnQnKTowO3ZhciBvZmZzZXQ9e3RvcDpzY3JvbGxUb3AtcmVsYXRpdmVPZmZzZXQudG9wK3JlbGF0aXZlT2Zmc2V0Lm1hcmdpblRvcCxsZWZ0OnNjcm9sbExlZnQtcmVsYXRpdmVPZmZzZXQubGVmdCtyZWxhdGl2ZU9mZnNldC5tYXJnaW5MZWZ0LHdpZHRoOndpZHRoLGhlaWdodDpoZWlnaHR9O3JldHVybiBnZXRDbGllbnRSZWN0KG9mZnNldCk7fQpmdW5jdGlvbiBpc0ZpeGVkKGVsZW1lbnQpe3ZhciBub2RlTmFtZT1lbGVtZW50Lm5vZGVOYW1lO2lmKG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGZhbHNlO30KaWYoZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsZW1lbnQsJ3Bvc2l0aW9uJyk9PT0nZml4ZWQnKXtyZXR1cm4gdHJ1ZTt9CnJldHVybiBpc0ZpeGVkKGdldFBhcmVudE5vZGUoZWxlbWVudCkpO30KZnVuY3Rpb24gZ2V0Rml4ZWRQb3NpdGlvbk9mZnNldFBhcmVudChlbGVtZW50KXtpZighZWxlbWVudHx8IWVsZW1lbnQucGFyZW50RWxlbWVudHx8aXNJRSgpKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KdmFyIGVsPWVsZW1lbnQucGFyZW50RWxlbWVudDt3aGlsZShlbCYmZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsLCd0cmFuc2Zvcm0nKT09PSdub25lJyl7ZWw9ZWwucGFyZW50RWxlbWVudDt9CnJldHVybiBlbHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KZnVuY3Rpb24gZ2V0Qm91bmRhcmllcyhwb3BwZXIscmVmZXJlbmNlLHBhZGRpbmcsYm91bmRhcmllc0VsZW1lbnQpe3ZhciBmaXhlZFBvc2l0aW9uPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1s0XTpmYWxzZTt2YXIgYm91bmRhcmllcz17dG9wOjAsbGVmdDowfTt2YXIgb2Zmc2V0UGFyZW50PWZpeGVkUG9zaXRpb24/Z2V0Rml4ZWRQb3NpdGlvbk9mZnNldFBhcmVudChwb3BwZXIpOmZpbmRDb21tb25PZmZzZXRQYXJlbnQocG9wcGVyLHJlZmVyZW5jZSk7aWYoYm91bmRhcmllc0VsZW1lbnQ9PT0ndmlld3BvcnQnKXtib3VuZGFyaWVzPWdldFZpZXdwb3J0T2Zmc2V0UmVjdFJlbGF0aXZlVG9BcnRiaXRyYXJ5Tm9kZShvZmZzZXRQYXJlbnQsZml4ZWRQb3NpdGlvbik7fWVsc2V7dmFyIGJvdW5kYXJpZXNOb2RlPXZvaWQgMDtpZihib3VuZGFyaWVzRWxlbWVudD09PSdzY3JvbGxQYXJlbnQnKXtib3VuZGFyaWVzTm9kZT1nZXRTY3JvbGxQYXJlbnQoZ2V0UGFyZW50Tm9kZShyZWZlcmVuY2UpKTtpZihib3VuZGFyaWVzTm9kZS5ub2RlTmFtZT09PSdCT0RZJyl7Ym91bmRhcmllc05vZGU9cG9wcGVyLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O319ZWxzZSBpZihib3VuZGFyaWVzRWxlbWVudD09PSd3aW5kb3cnKXtib3VuZGFyaWVzTm9kZT1wb3BwZXIub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fWVsc2V7Ym91bmRhcmllc05vZGU9Ym91bmRhcmllc0VsZW1lbnQ7fQp2YXIgb2Zmc2V0cz1nZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoYm91bmRhcmllc05vZGUsb2Zmc2V0UGFyZW50LGZpeGVkUG9zaXRpb24pO2lmKGJvdW5kYXJpZXNOb2RlLm5vZGVOYW1lPT09J0hUTUwnJiYhaXNGaXhlZChvZmZzZXRQYXJlbnQpKXt2YXIgX2dldFdpbmRvd1NpemVzPWdldFdpbmRvd1NpemVzKCksaGVpZ2h0PV9nZXRXaW5kb3dTaXplcy5oZWlnaHQsd2lkdGg9X2dldFdpbmRvd1NpemVzLndpZHRoO2JvdW5kYXJpZXMudG9wKz1vZmZzZXRzLnRvcC1vZmZzZXRzLm1hcmdpblRvcDtib3VuZGFyaWVzLmJvdHRvbT1oZWlnaHQrb2Zmc2V0cy50b3A7Ym91bmRhcmllcy5sZWZ0Kz1vZmZzZXRzLmxlZnQtb2Zmc2V0cy5tYXJnaW5MZWZ0O2JvdW5kYXJpZXMucmlnaHQ9d2lkdGgrb2Zmc2V0cy5sZWZ0O31lbHNle2JvdW5kYXJpZXM9b2Zmc2V0czt9fQpib3VuZGFyaWVzLmxlZnQrPXBhZGRpbmc7Ym91bmRhcmllcy50b3ArPXBhZGRpbmc7Ym91bmRhcmllcy5yaWdodC09cGFkZGluZztib3VuZGFyaWVzLmJvdHRvbS09cGFkZGluZztyZXR1cm4gYm91bmRhcmllczt9CmZ1bmN0aW9uIGdldEFyZWEoX3JlZil7dmFyIHdpZHRoPV9yZWYud2lkdGgsaGVpZ2h0PV9yZWYuaGVpZ2h0O3JldHVybiB3aWR0aCpoZWlnaHQ7fQpmdW5jdGlvbiBjb21wdXRlQXV0b1BsYWNlbWVudChwbGFjZW1lbnQscmVmUmVjdCxwb3BwZXIscmVmZXJlbmNlLGJvdW5kYXJpZXNFbGVtZW50KXt2YXIgcGFkZGluZz1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbNV06MDtpZihwbGFjZW1lbnQuaW5kZXhPZignYXV0bycpPT09LTEpe3JldHVybiBwbGFjZW1lbnQ7fQp2YXIgYm91bmRhcmllcz1nZXRCb3VuZGFyaWVzKHBvcHBlcixyZWZlcmVuY2UscGFkZGluZyxib3VuZGFyaWVzRWxlbWVudCk7dmFyIHJlY3RzPXt0b3A6e3dpZHRoOmJvdW5kYXJpZXMud2lkdGgsaGVpZ2h0OnJlZlJlY3QudG9wLWJvdW5kYXJpZXMudG9wfSxyaWdodDp7d2lkdGg6Ym91bmRhcmllcy5yaWdodC1yZWZSZWN0LnJpZ2h0LGhlaWdodDpib3VuZGFyaWVzLmhlaWdodH0sYm90dG9tOnt3aWR0aDpib3VuZGFyaWVzLndpZHRoLGhlaWdodDpib3VuZGFyaWVzLmJvdHRvbS1yZWZSZWN0LmJvdHRvbX0sbGVmdDp7d2lkdGg6cmVmUmVjdC5sZWZ0LWJvdW5kYXJpZXMubGVmdCxoZWlnaHQ6Ym91bmRhcmllcy5oZWlnaHR9fTt2YXIgc29ydGVkQXJlYXM9T2JqZWN0LmtleXMocmVjdHMpLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBfZXh0ZW5kcyh7a2V5OmtleX0scmVjdHNba2V5XSx7YXJlYTpnZXRBcmVhKHJlY3RzW2tleV0pfSk7fSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBiLmFyZWEtYS5hcmVhO30pO3ZhciBmaWx0ZXJlZEFyZWFzPXNvcnRlZEFyZWFzLmZpbHRlcihmdW5jdGlvbihfcmVmMil7dmFyIHdpZHRoPV9yZWYyLndpZHRoLGhlaWdodD1fcmVmMi5oZWlnaHQ7cmV0dXJuIHdpZHRoPj1wb3BwZXIuY2xpZW50V2lkdGgmJmhlaWdodD49cG9wcGVyLmNsaWVudEhlaWdodDt9KTt2YXIgY29tcHV0ZWRQbGFjZW1lbnQ9ZmlsdGVyZWRBcmVhcy5sZW5ndGg+MD9maWx0ZXJlZEFyZWFzWzBdLmtleTpzb3J0ZWRBcmVhc1swXS5rZXk7dmFyIHZhcmlhdGlvbj1wbGFjZW1lbnQuc3BsaXQoJy0nKVsxXTtyZXR1cm4gY29tcHV0ZWRQbGFjZW1lbnQrKHZhcmlhdGlvbj8nLScrdmFyaWF0aW9uOicnKTt9CmZ1bmN0aW9uIGdldFJlZmVyZW5jZU9mZnNldHMoc3RhdGUscG9wcGVyLHJlZmVyZW5jZSl7dmFyIGZpeGVkUG9zaXRpb249YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT11bmRlZmluZWQ/YXJndW1lbnRzWzNdOm51bGw7dmFyIGNvbW1vbk9mZnNldFBhcmVudD1maXhlZFBvc2l0aW9uP2dldEZpeGVkUG9zaXRpb25PZmZzZXRQYXJlbnQocG9wcGVyKTpmaW5kQ29tbW9uT2Zmc2V0UGFyZW50KHBvcHBlcixyZWZlcmVuY2UpO3JldHVybiBnZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUocmVmZXJlbmNlLGNvbW1vbk9mZnNldFBhcmVudCxmaXhlZFBvc2l0aW9uKTt9CmZ1bmN0aW9uIGdldE91dGVyU2l6ZXMoZWxlbWVudCl7dmFyIHN0eWxlcz1nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO3ZhciB4PXBhcnNlRmxvYXQoc3R5bGVzLm1hcmdpblRvcCkrcGFyc2VGbG9hdChzdHlsZXMubWFyZ2luQm90dG9tKTt2YXIgeT1wYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5MZWZ0KStwYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5SaWdodCk7dmFyIHJlc3VsdD17d2lkdGg6ZWxlbWVudC5vZmZzZXRXaWR0aCt5LGhlaWdodDplbGVtZW50Lm9mZnNldEhlaWdodCt4fTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KXt2YXIgaGFzaD17bGVmdDoncmlnaHQnLHJpZ2h0OidsZWZ0Jyxib3R0b206J3RvcCcsdG9wOidib3R0b20nfTtyZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLGZ1bmN0aW9uKG1hdGNoZWQpe3JldHVybiBoYXNoW21hdGNoZWRdO30pO30KZnVuY3Rpb24gZ2V0UG9wcGVyT2Zmc2V0cyhwb3BwZXIscmVmZXJlbmNlT2Zmc2V0cyxwbGFjZW1lbnQpe3BsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgcG9wcGVyUmVjdD1nZXRPdXRlclNpemVzKHBvcHBlcik7dmFyIHBvcHBlck9mZnNldHM9e3dpZHRoOnBvcHBlclJlY3Qud2lkdGgsaGVpZ2h0OnBvcHBlclJlY3QuaGVpZ2h0fTt2YXIgaXNIb3Jpej1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YocGxhY2VtZW50KSE9PS0xO3ZhciBtYWluU2lkZT1pc0hvcml6Pyd0b3AnOidsZWZ0Jzt2YXIgc2Vjb25kYXJ5U2lkZT1pc0hvcml6PydsZWZ0JzondG9wJzt2YXIgbWVhc3VyZW1lbnQ9aXNIb3Jpej8naGVpZ2h0Jzond2lkdGgnO3ZhciBzZWNvbmRhcnlNZWFzdXJlbWVudD0haXNIb3Jpej8naGVpZ2h0Jzond2lkdGgnO3BvcHBlck9mZnNldHNbbWFpblNpZGVdPXJlZmVyZW5jZU9mZnNldHNbbWFpblNpZGVdK3JlZmVyZW5jZU9mZnNldHNbbWVhc3VyZW1lbnRdLzItcG9wcGVyUmVjdFttZWFzdXJlbWVudF0vMjtpZihwbGFjZW1lbnQ9PT1zZWNvbmRhcnlTaWRlKXtwb3BwZXJPZmZzZXRzW3NlY29uZGFyeVNpZGVdPXJlZmVyZW5jZU9mZnNldHNbc2Vjb25kYXJ5U2lkZV0tcG9wcGVyUmVjdFtzZWNvbmRhcnlNZWFzdXJlbWVudF07fWVsc2V7cG9wcGVyT2Zmc2V0c1tzZWNvbmRhcnlTaWRlXT1yZWZlcmVuY2VPZmZzZXRzW2dldE9wcG9zaXRlUGxhY2VtZW50KHNlY29uZGFyeVNpZGUpXTt9CnJldHVybiBwb3BwZXJPZmZzZXRzO30KZnVuY3Rpb24gZmluZChhcnIsY2hlY2spe2lmKEFycmF5LnByb3RvdHlwZS5maW5kKXtyZXR1cm4gYXJyLmZpbmQoY2hlY2spO30KcmV0dXJuIGFyci5maWx0ZXIoY2hlY2spWzBdO30KZnVuY3Rpb24gZmluZEluZGV4KGFycixwcm9wLHZhbHVlKXtpZihBcnJheS5wcm90b3R5cGUuZmluZEluZGV4KXtyZXR1cm4gYXJyLmZpbmRJbmRleChmdW5jdGlvbihjdXIpe3JldHVybiBjdXJbcHJvcF09PT12YWx1ZTt9KTt9CnZhciBtYXRjaD1maW5kKGFycixmdW5jdGlvbihvYmope3JldHVybiBvYmpbcHJvcF09PT12YWx1ZTt9KTtyZXR1cm4gYXJyLmluZGV4T2YobWF0Y2gpO30KZnVuY3Rpb24gcnVuTW9kaWZpZXJzKG1vZGlmaWVycyxkYXRhLGVuZHMpe3ZhciBtb2RpZmllcnNUb1J1bj1lbmRzPT09dW5kZWZpbmVkP21vZGlmaWVyczptb2RpZmllcnMuc2xpY2UoMCxmaW5kSW5kZXgobW9kaWZpZXJzLCduYW1lJyxlbmRzKSk7bW9kaWZpZXJzVG9SdW4uZm9yRWFjaChmdW5jdGlvbihtb2RpZmllcil7aWYobW9kaWZpZXJbJ2Z1bmN0aW9uJ10pe2NvbnNvbGUud2FybignYG1vZGlmaWVyLmZ1bmN0aW9uYCBpcyBkZXByZWNhdGVkLCB1c2UgYG1vZGlmaWVyLmZuYCEnKTt9CnZhciBmbj1tb2RpZmllclsnZnVuY3Rpb24nXXx8bW9kaWZpZXIuZm47aWYobW9kaWZpZXIuZW5hYmxlZCYmaXNGdW5jdGlvbihmbikpe2RhdGEub2Zmc2V0cy5wb3BwZXI9Z2V0Q2xpZW50UmVjdChkYXRhLm9mZnNldHMucG9wcGVyKTtkYXRhLm9mZnNldHMucmVmZXJlbmNlPWdldENsaWVudFJlY3QoZGF0YS5vZmZzZXRzLnJlZmVyZW5jZSk7ZGF0YT1mbihkYXRhLG1vZGlmaWVyKTt9fSk7cmV0dXJuIGRhdGE7fQpmdW5jdGlvbiB1cGRhdGUoKXtpZih0aGlzLnN0YXRlLmlzRGVzdHJveWVkKXtyZXR1cm47fQp2YXIgZGF0YT17aW5zdGFuY2U6dGhpcyxzdHlsZXM6e30sYXJyb3dTdHlsZXM6e30sYXR0cmlidXRlczp7fSxmbGlwcGVkOmZhbHNlLG9mZnNldHM6e319O2RhdGEub2Zmc2V0cy5yZWZlcmVuY2U9Z2V0UmVmZXJlbmNlT2Zmc2V0cyh0aGlzLnN0YXRlLHRoaXMucG9wcGVyLHRoaXMucmVmZXJlbmNlLHRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkKTtkYXRhLnBsYWNlbWVudD1jb21wdXRlQXV0b1BsYWNlbWVudCh0aGlzLm9wdGlvbnMucGxhY2VtZW50LGRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsdGhpcy5wb3BwZXIsdGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LHRoaXMub3B0aW9ucy5tb2RpZmllcnMuZmxpcC5wYWRkaW5nKTtkYXRhLm9yaWdpbmFsUGxhY2VtZW50PWRhdGEucGxhY2VtZW50O2RhdGEucG9zaXRpb25GaXhlZD10aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZDtkYXRhLm9mZnNldHMucG9wcGVyPWdldFBvcHBlck9mZnNldHModGhpcy5wb3BwZXIsZGF0YS5vZmZzZXRzLnJlZmVyZW5jZSxkYXRhLnBsYWNlbWVudCk7ZGF0YS5vZmZzZXRzLnBvcHBlci5wb3NpdGlvbj10aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZD8nZml4ZWQnOidhYnNvbHV0ZSc7ZGF0YT1ydW5Nb2RpZmllcnModGhpcy5tb2RpZmllcnMsZGF0YSk7aWYoIXRoaXMuc3RhdGUuaXNDcmVhdGVkKXt0aGlzLnN0YXRlLmlzQ3JlYXRlZD10cnVlO3RoaXMub3B0aW9ucy5vbkNyZWF0ZShkYXRhKTt9ZWxzZXt0aGlzLm9wdGlvbnMub25VcGRhdGUoZGF0YSk7fX0KZnVuY3Rpb24gaXNNb2RpZmllckVuYWJsZWQobW9kaWZpZXJzLG1vZGlmaWVyTmFtZSl7cmV0dXJuIG1vZGlmaWVycy5zb21lKGZ1bmN0aW9uKF9yZWYpe3ZhciBuYW1lPV9yZWYubmFtZSxlbmFibGVkPV9yZWYuZW5hYmxlZDtyZXR1cm4gZW5hYmxlZCYmbmFtZT09PW1vZGlmaWVyTmFtZTt9KTt9CmZ1bmN0aW9uIGdldFN1cHBvcnRlZFByb3BlcnR5TmFtZShwcm9wZXJ0eSl7dmFyIHByZWZpeGVzPVtmYWxzZSwnbXMnLCdXZWJraXQnLCdNb3onLCdPJ107dmFyIHVwcGVyUHJvcD1wcm9wZXJ0eS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStwcm9wZXJ0eS5zbGljZSgxKTtmb3IodmFyIGk9MDtpPHByZWZpeGVzLmxlbmd0aDtpKyspe3ZhciBwcmVmaXg9cHJlZml4ZXNbaV07dmFyIHRvQ2hlY2s9cHJlZml4PycnK3ByZWZpeCt1cHBlclByb3A6cHJvcGVydHk7aWYodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGVbdG9DaGVja10hPT0ndW5kZWZpbmVkJyl7cmV0dXJuIHRvQ2hlY2s7fX0KcmV0dXJuIG51bGw7fQpmdW5jdGlvbiBkZXN0cm95KCl7dGhpcy5zdGF0ZS5pc0Rlc3Ryb3llZD10cnVlO2lmKGlzTW9kaWZpZXJFbmFibGVkKHRoaXMubW9kaWZpZXJzLCdhcHBseVN0eWxlJykpe3RoaXMucG9wcGVyLnJlbW92ZUF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnKTt0aGlzLnBvcHBlci5zdHlsZS5wb3NpdGlvbj0nJzt0aGlzLnBvcHBlci5zdHlsZS50b3A9Jyc7dGhpcy5wb3BwZXIuc3R5bGUubGVmdD0nJzt0aGlzLnBvcHBlci5zdHlsZS5yaWdodD0nJzt0aGlzLnBvcHBlci5zdHlsZS5ib3R0b209Jyc7dGhpcy5wb3BwZXIuc3R5bGUud2lsbENoYW5nZT0nJzt0aGlzLnBvcHBlci5zdHlsZVtnZXRTdXBwb3J0ZWRQcm9wZXJ0eU5hbWUoJ3RyYW5zZm9ybScpXT0nJzt9CnRoaXMuZGlzYWJsZUV2ZW50TGlzdGVuZXJzKCk7aWYodGhpcy5vcHRpb25zLnJlbW92ZU9uRGVzdHJveSl7dGhpcy5wb3BwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBvcHBlcik7fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGdldFdpbmRvdyhlbGVtZW50KXt2YXIgb3duZXJEb2N1bWVudD1lbGVtZW50Lm93bmVyRG9jdW1lbnQ7cmV0dXJuIG93bmVyRG9jdW1lbnQ/b3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldzp3aW5kb3c7fQpmdW5jdGlvbiBhdHRhY2hUb1Njcm9sbFBhcmVudHMoc2Nyb2xsUGFyZW50LGV2ZW50LGNhbGxiYWNrLHNjcm9sbFBhcmVudHMpe3ZhciBpc0JvZHk9c2Nyb2xsUGFyZW50Lm5vZGVOYW1lPT09J0JPRFknO3ZhciB0YXJnZXQ9aXNCb2R5P3Njcm9sbFBhcmVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3OnNjcm9sbFBhcmVudDt0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCxjYWxsYmFjayx7cGFzc2l2ZTp0cnVlfSk7aWYoIWlzQm9keSl7YXR0YWNoVG9TY3JvbGxQYXJlbnRzKGdldFNjcm9sbFBhcmVudCh0YXJnZXQucGFyZW50Tm9kZSksZXZlbnQsY2FsbGJhY2ssc2Nyb2xsUGFyZW50cyk7fQpzY3JvbGxQYXJlbnRzLnB1c2godGFyZ2V0KTt9CmZ1bmN0aW9uIHNldHVwRXZlbnRMaXN0ZW5lcnMocmVmZXJlbmNlLG9wdGlvbnMsc3RhdGUsdXBkYXRlQm91bmQpe3N0YXRlLnVwZGF0ZUJvdW5kPXVwZGF0ZUJvdW5kO2dldFdpbmRvdyhyZWZlcmVuY2UpLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsc3RhdGUudXBkYXRlQm91bmQse3Bhc3NpdmU6dHJ1ZX0pO3ZhciBzY3JvbGxFbGVtZW50PWdldFNjcm9sbFBhcmVudChyZWZlcmVuY2UpO2F0dGFjaFRvU2Nyb2xsUGFyZW50cyhzY3JvbGxFbGVtZW50LCdzY3JvbGwnLHN0YXRlLnVwZGF0ZUJvdW5kLHN0YXRlLnNjcm9sbFBhcmVudHMpO3N0YXRlLnNjcm9sbEVsZW1lbnQ9c2Nyb2xsRWxlbWVudDtzdGF0ZS5ldmVudHNFbmFibGVkPXRydWU7cmV0dXJuIHN0YXRlO30KZnVuY3Rpb24gZW5hYmxlRXZlbnRMaXN0ZW5lcnMoKXtpZighdGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkKXt0aGlzLnN0YXRlPXNldHVwRXZlbnRMaXN0ZW5lcnModGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLHRoaXMuc3RhdGUsdGhpcy5zY2hlZHVsZVVwZGF0ZSk7fX0KZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMocmVmZXJlbmNlLHN0YXRlKXtnZXRXaW5kb3cocmVmZXJlbmNlKS5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLHN0YXRlLnVwZGF0ZUJvdW5kKTtzdGF0ZS5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24odGFyZ2V0KXt0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyxzdGF0ZS51cGRhdGVCb3VuZCk7fSk7c3RhdGUudXBkYXRlQm91bmQ9bnVsbDtzdGF0ZS5zY3JvbGxQYXJlbnRzPVtdO3N0YXRlLnNjcm9sbEVsZW1lbnQ9bnVsbDtzdGF0ZS5ldmVudHNFbmFibGVkPWZhbHNlO3JldHVybiBzdGF0ZTt9CmZ1bmN0aW9uIGRpc2FibGVFdmVudExpc3RlbmVycygpe2lmKHRoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5zY2hlZHVsZVVwZGF0ZSk7dGhpcy5zdGF0ZT1yZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnJlZmVyZW5jZSx0aGlzLnN0YXRlKTt9fQpmdW5jdGlvbiBpc051bWVyaWMobil7cmV0dXJuIG4hPT0nJyYmIWlzTmFOKHBhcnNlRmxvYXQobikpJiZpc0Zpbml0ZShuKTt9CmZ1bmN0aW9uIHNldFN0eWxlcyhlbGVtZW50LHN0eWxlcyl7T2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZhciB1bml0PScnO2lmKFsnd2lkdGgnLCdoZWlnaHQnLCd0b3AnLCdyaWdodCcsJ2JvdHRvbScsJ2xlZnQnXS5pbmRleE9mKHByb3ApIT09LTEmJmlzTnVtZXJpYyhzdHlsZXNbcHJvcF0pKXt1bml0PSdweCc7fQplbGVtZW50LnN0eWxlW3Byb3BdPXN0eWxlc1twcm9wXSt1bml0O30pO30KZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbGVtZW50LGF0dHJpYnV0ZXMpe09iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24ocHJvcCl7dmFyIHZhbHVlPWF0dHJpYnV0ZXNbcHJvcF07aWYodmFsdWUhPT1mYWxzZSl7ZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcCxhdHRyaWJ1dGVzW3Byb3BdKTt9ZWxzZXtlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShwcm9wKTt9fSk7fQpmdW5jdGlvbiBhcHBseVN0eWxlKGRhdGEpe3NldFN0eWxlcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLnN0eWxlcyk7c2V0QXR0cmlidXRlcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLmF0dHJpYnV0ZXMpO2lmKGRhdGEuYXJyb3dFbGVtZW50JiZPYmplY3Qua2V5cyhkYXRhLmFycm93U3R5bGVzKS5sZW5ndGgpe3NldFN0eWxlcyhkYXRhLmFycm93RWxlbWVudCxkYXRhLmFycm93U3R5bGVzKTt9CnJldHVybiBkYXRhO30KZnVuY3Rpb24gYXBwbHlTdHlsZU9uTG9hZChyZWZlcmVuY2UscG9wcGVyLG9wdGlvbnMsbW9kaWZpZXJPcHRpb25zLHN0YXRlKXt2YXIgcmVmZXJlbmNlT2Zmc2V0cz1nZXRSZWZlcmVuY2VPZmZzZXRzKHN0YXRlLHBvcHBlcixyZWZlcmVuY2Usb3B0aW9ucy5wb3NpdGlvbkZpeGVkKTt2YXIgcGxhY2VtZW50PWNvbXB1dGVBdXRvUGxhY2VtZW50KG9wdGlvbnMucGxhY2VtZW50LHJlZmVyZW5jZU9mZnNldHMscG9wcGVyLHJlZmVyZW5jZSxvcHRpb25zLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LG9wdGlvbnMubW9kaWZpZXJzLmZsaXAucGFkZGluZyk7cG9wcGVyLnNldEF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnLHBsYWNlbWVudCk7c2V0U3R5bGVzKHBvcHBlcix7cG9zaXRpb246b3B0aW9ucy5wb3NpdGlvbkZpeGVkPydmaXhlZCc6J2Fic29sdXRlJ30pO3JldHVybiBvcHRpb25zO30KZnVuY3Rpb24gY29tcHV0ZVN0eWxlKGRhdGEsb3B0aW9ucyl7dmFyIHg9b3B0aW9ucy54LHk9b3B0aW9ucy55O3ZhciBwb3BwZXI9ZGF0YS5vZmZzZXRzLnBvcHBlcjt2YXIgbGVnYWN5R3B1QWNjZWxlcmF0aW9uT3B0aW9uPWZpbmQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsZnVuY3Rpb24obW9kaWZpZXIpe3JldHVybiBtb2RpZmllci5uYW1lPT09J2FwcGx5U3R5bGUnO30pLmdwdUFjY2VsZXJhdGlvbjtpZihsZWdhY3lHcHVBY2NlbGVyYXRpb25PcHRpb24hPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignV0FSTklORzogYGdwdUFjY2VsZXJhdGlvbmAgb3B0aW9uIG1vdmVkIHRvIGBjb21wdXRlU3R5bGVgIG1vZGlmaWVyIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQgaW4gZnV0dXJlIHZlcnNpb25zIG9mIFBvcHBlci5qcyEnKTt9CnZhciBncHVBY2NlbGVyYXRpb249bGVnYWN5R3B1QWNjZWxlcmF0aW9uT3B0aW9uIT09dW5kZWZpbmVkP2xlZ2FjeUdwdUFjY2VsZXJhdGlvbk9wdGlvbjpvcHRpb25zLmdwdUFjY2VsZXJhdGlvbjt2YXIgb2Zmc2V0UGFyZW50PWdldE9mZnNldFBhcmVudChkYXRhLmluc3RhbmNlLnBvcHBlcik7dmFyIG9mZnNldFBhcmVudFJlY3Q9Z2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCk7dmFyIHN0eWxlcz17cG9zaXRpb246cG9wcGVyLnBvc2l0aW9ufTt2YXIgb2Zmc2V0cz17bGVmdDpNYXRoLmZsb29yKHBvcHBlci5sZWZ0KSx0b3A6TWF0aC5yb3VuZChwb3BwZXIudG9wKSxib3R0b206TWF0aC5yb3VuZChwb3BwZXIuYm90dG9tKSxyaWdodDpNYXRoLmZsb29yKHBvcHBlci5yaWdodCl9O3ZhciBzaWRlQT14PT09J2JvdHRvbSc/J3RvcCc6J2JvdHRvbSc7dmFyIHNpZGVCPXk9PT0ncmlnaHQnPydsZWZ0JzoncmlnaHQnO3ZhciBwcmVmaXhlZFByb3BlcnR5PWdldFN1cHBvcnRlZFByb3BlcnR5TmFtZSgndHJhbnNmb3JtJyk7dmFyIGxlZnQ9dm9pZCAwLHRvcD12b2lkIDA7aWYoc2lkZUE9PT0nYm90dG9tJyl7dG9wPS1vZmZzZXRQYXJlbnRSZWN0LmhlaWdodCtvZmZzZXRzLmJvdHRvbTt9ZWxzZXt0b3A9b2Zmc2V0cy50b3A7fQppZihzaWRlQj09PSdyaWdodCcpe2xlZnQ9LW9mZnNldFBhcmVudFJlY3Qud2lkdGgrb2Zmc2V0cy5yaWdodDt9ZWxzZXtsZWZ0PW9mZnNldHMubGVmdDt9CmlmKGdwdUFjY2VsZXJhdGlvbiYmcHJlZml4ZWRQcm9wZXJ0eSl7c3R5bGVzW3ByZWZpeGVkUHJvcGVydHldPSd0cmFuc2xhdGUzZCgnK2xlZnQrJ3B4LCAnK3RvcCsncHgsIDApJztzdHlsZXNbc2lkZUFdPTA7c3R5bGVzW3NpZGVCXT0wO3N0eWxlcy53aWxsQ2hhbmdlPSd0cmFuc2Zvcm0nO31lbHNle3ZhciBpbnZlcnRUb3A9c2lkZUE9PT0nYm90dG9tJz8tMToxO3ZhciBpbnZlcnRMZWZ0PXNpZGVCPT09J3JpZ2h0Jz8tMToxO3N0eWxlc1tzaWRlQV09dG9wKmludmVydFRvcDtzdHlsZXNbc2lkZUJdPWxlZnQqaW52ZXJ0TGVmdDtzdHlsZXMud2lsbENoYW5nZT1zaWRlQSsnLCAnK3NpZGVCO30KdmFyIGF0dHJpYnV0ZXM9eyd4LXBsYWNlbWVudCc6ZGF0YS5wbGFjZW1lbnR9O2RhdGEuYXR0cmlidXRlcz1fZXh0ZW5kcyh7fSxhdHRyaWJ1dGVzLGRhdGEuYXR0cmlidXRlcyk7ZGF0YS5zdHlsZXM9X2V4dGVuZHMoe30sc3R5bGVzLGRhdGEuc3R5bGVzKTtkYXRhLmFycm93U3R5bGVzPV9leHRlbmRzKHt9LGRhdGEub2Zmc2V0cy5hcnJvdyxkYXRhLmFycm93U3R5bGVzKTtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGlzTW9kaWZpZXJSZXF1aXJlZChtb2RpZmllcnMscmVxdWVzdGluZ05hbWUscmVxdWVzdGVkTmFtZSl7dmFyIHJlcXVlc3Rpbmc9ZmluZChtb2RpZmllcnMsZnVuY3Rpb24oX3JlZil7dmFyIG5hbWU9X3JlZi5uYW1lO3JldHVybiBuYW1lPT09cmVxdWVzdGluZ05hbWU7fSk7dmFyIGlzUmVxdWlyZWQ9ISFyZXF1ZXN0aW5nJiZtb2RpZmllcnMuc29tZShmdW5jdGlvbihtb2RpZmllcil7cmV0dXJuIG1vZGlmaWVyLm5hbWU9PT1yZXF1ZXN0ZWROYW1lJiZtb2RpZmllci5lbmFibGVkJiZtb2RpZmllci5vcmRlcjxyZXF1ZXN0aW5nLm9yZGVyO30pO2lmKCFpc1JlcXVpcmVkKXt2YXIgX3JlcXVlc3Rpbmc9J2AnK3JlcXVlc3RpbmdOYW1lKydgJzt2YXIgcmVxdWVzdGVkPSdgJytyZXF1ZXN0ZWROYW1lKydgJztjb25zb2xlLndhcm4ocmVxdWVzdGVkKycgbW9kaWZpZXIgaXMgcmVxdWlyZWQgYnkgJytfcmVxdWVzdGluZysnIG1vZGlmaWVyIGluIG9yZGVyIHRvIHdvcmssIGJlIHN1cmUgdG8gaW5jbHVkZSBpdCBiZWZvcmUgJytfcmVxdWVzdGluZysnIScpO30KcmV0dXJuIGlzUmVxdWlyZWQ7fQpmdW5jdGlvbiBhcnJvdyhkYXRhLG9wdGlvbnMpe3ZhciBfZGF0YSRvZmZzZXRzJGFycm93O2lmKCFpc01vZGlmaWVyUmVxdWlyZWQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsJ2Fycm93Jywna2VlcFRvZ2V0aGVyJykpe3JldHVybiBkYXRhO30KdmFyIGFycm93RWxlbWVudD1vcHRpb25zLmVsZW1lbnQ7aWYodHlwZW9mIGFycm93RWxlbWVudD09PSdzdHJpbmcnKXthcnJvd0VsZW1lbnQ9ZGF0YS5pbnN0YW5jZS5wb3BwZXIucXVlcnlTZWxlY3RvcihhcnJvd0VsZW1lbnQpO2lmKCFhcnJvd0VsZW1lbnQpe3JldHVybiBkYXRhO319ZWxzZXtpZighZGF0YS5pbnN0YW5jZS5wb3BwZXIuY29udGFpbnMoYXJyb3dFbGVtZW50KSl7Y29uc29sZS53YXJuKCdXQVJOSU5HOiBgYXJyb3cuZWxlbWVudGAgbXVzdCBiZSBjaGlsZCBvZiBpdHMgcG9wcGVyIGVsZW1lbnQhJyk7cmV0dXJuIGRhdGE7fX0KdmFyIHBsYWNlbWVudD1kYXRhLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBpc1ZlcnRpY2FsPVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihwbGFjZW1lbnQpIT09LTE7dmFyIGxlbj1pc1ZlcnRpY2FsPydoZWlnaHQnOid3aWR0aCc7dmFyIHNpZGVDYXBpdGFsaXplZD1pc1ZlcnRpY2FsPydUb3AnOidMZWZ0Jzt2YXIgc2lkZT1zaWRlQ2FwaXRhbGl6ZWQudG9Mb3dlckNhc2UoKTt2YXIgYWx0U2lkZT1pc1ZlcnRpY2FsPydsZWZ0JzondG9wJzt2YXIgb3BTaWRlPWlzVmVydGljYWw/J2JvdHRvbSc6J3JpZ2h0Jzt2YXIgYXJyb3dFbGVtZW50U2l6ZT1nZXRPdXRlclNpemVzKGFycm93RWxlbWVudClbbGVuXTtpZihyZWZlcmVuY2Vbb3BTaWRlXS1hcnJvd0VsZW1lbnRTaXplPHBvcHBlcltzaWRlXSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltzaWRlXS09cG9wcGVyW3NpZGVdLShyZWZlcmVuY2Vbb3BTaWRlXS1hcnJvd0VsZW1lbnRTaXplKTt9CmlmKHJlZmVyZW5jZVtzaWRlXSthcnJvd0VsZW1lbnRTaXplPnBvcHBlcltvcFNpZGVdKXtkYXRhLm9mZnNldHMucG9wcGVyW3NpZGVdKz1yZWZlcmVuY2Vbc2lkZV0rYXJyb3dFbGVtZW50U2l6ZS1wb3BwZXJbb3BTaWRlXTt9CmRhdGEub2Zmc2V0cy5wb3BwZXI9Z2V0Q2xpZW50UmVjdChkYXRhLm9mZnNldHMucG9wcGVyKTt2YXIgY2VudGVyPXJlZmVyZW5jZVtzaWRlXStyZWZlcmVuY2VbbGVuXS8yLWFycm93RWxlbWVudFNpemUvMjt2YXIgY3NzPWdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShkYXRhLmluc3RhbmNlLnBvcHBlcik7dmFyIHBvcHBlck1hcmdpblNpZGU9cGFyc2VGbG9hdChjc3NbJ21hcmdpbicrc2lkZUNhcGl0YWxpemVkXSwxMCk7dmFyIHBvcHBlckJvcmRlclNpZGU9cGFyc2VGbG9hdChjc3NbJ2JvcmRlcicrc2lkZUNhcGl0YWxpemVkKydXaWR0aCddLDEwKTt2YXIgc2lkZVZhbHVlPWNlbnRlci1kYXRhLm9mZnNldHMucG9wcGVyW3NpZGVdLXBvcHBlck1hcmdpblNpZGUtcG9wcGVyQm9yZGVyU2lkZTtzaWRlVmFsdWU9TWF0aC5tYXgoTWF0aC5taW4ocG9wcGVyW2xlbl0tYXJyb3dFbGVtZW50U2l6ZSxzaWRlVmFsdWUpLDApO2RhdGEuYXJyb3dFbGVtZW50PWFycm93RWxlbWVudDtkYXRhLm9mZnNldHMuYXJyb3c9KF9kYXRhJG9mZnNldHMkYXJyb3c9e30sZGVmaW5lUHJvcGVydHkoX2RhdGEkb2Zmc2V0cyRhcnJvdyxzaWRlLE1hdGgucm91bmQoc2lkZVZhbHVlKSksZGVmaW5lUHJvcGVydHkoX2RhdGEkb2Zmc2V0cyRhcnJvdyxhbHRTaWRlLCcnKSxfZGF0YSRvZmZzZXRzJGFycm93KTtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGdldE9wcG9zaXRlVmFyaWF0aW9uKHZhcmlhdGlvbil7aWYodmFyaWF0aW9uPT09J2VuZCcpe3JldHVybidzdGFydCc7fWVsc2UgaWYodmFyaWF0aW9uPT09J3N0YXJ0Jyl7cmV0dXJuJ2VuZCc7fQpyZXR1cm4gdmFyaWF0aW9uO30KdmFyIHBsYWNlbWVudHM9WydhdXRvLXN0YXJ0JywnYXV0bycsJ2F1dG8tZW5kJywndG9wLXN0YXJ0JywndG9wJywndG9wLWVuZCcsJ3JpZ2h0LXN0YXJ0JywncmlnaHQnLCdyaWdodC1lbmQnLCdib3R0b20tZW5kJywnYm90dG9tJywnYm90dG9tLXN0YXJ0JywnbGVmdC1lbmQnLCdsZWZ0JywnbGVmdC1zdGFydCddO3ZhciB2YWxpZFBsYWNlbWVudHM9cGxhY2VtZW50cy5zbGljZSgzKTtmdW5jdGlvbiBjbG9ja3dpc2UocGxhY2VtZW50KXt2YXIgY291bnRlcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06ZmFsc2U7dmFyIGluZGV4PXZhbGlkUGxhY2VtZW50cy5pbmRleE9mKHBsYWNlbWVudCk7dmFyIGFycj12YWxpZFBsYWNlbWVudHMuc2xpY2UoaW5kZXgrMSkuY29uY2F0KHZhbGlkUGxhY2VtZW50cy5zbGljZSgwLGluZGV4KSk7cmV0dXJuIGNvdW50ZXI/YXJyLnJldmVyc2UoKTphcnI7fQp2YXIgQkVIQVZJT1JTPXtGTElQOidmbGlwJyxDTE9DS1dJU0U6J2Nsb2Nrd2lzZScsQ09VTlRFUkNMT0NLV0lTRTonY291bnRlcmNsb2Nrd2lzZSd9O2Z1bmN0aW9uIGZsaXAoZGF0YSxvcHRpb25zKXtpZihpc01vZGlmaWVyRW5hYmxlZChkYXRhLmluc3RhbmNlLm1vZGlmaWVycywnaW5uZXInKSl7cmV0dXJuIGRhdGE7fQppZihkYXRhLmZsaXBwZWQmJmRhdGEucGxhY2VtZW50PT09ZGF0YS5vcmlnaW5hbFBsYWNlbWVudCl7cmV0dXJuIGRhdGE7fQp2YXIgYm91bmRhcmllcz1nZXRCb3VuZGFyaWVzKGRhdGEuaW5zdGFuY2UucG9wcGVyLGRhdGEuaW5zdGFuY2UucmVmZXJlbmNlLG9wdGlvbnMucGFkZGluZyxvcHRpb25zLmJvdW5kYXJpZXNFbGVtZW50LGRhdGEucG9zaXRpb25GaXhlZCk7dmFyIHBsYWNlbWVudD1kYXRhLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBwbGFjZW1lbnRPcHBvc2l0ZT1nZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO3ZhciB2YXJpYXRpb249ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVsxXXx8Jyc7dmFyIGZsaXBPcmRlcj1bXTtzd2l0Y2gob3B0aW9ucy5iZWhhdmlvcil7Y2FzZSBCRUhBVklPUlMuRkxJUDpmbGlwT3JkZXI9W3BsYWNlbWVudCxwbGFjZW1lbnRPcHBvc2l0ZV07YnJlYWs7Y2FzZSBCRUhBVklPUlMuQ0xPQ0tXSVNFOmZsaXBPcmRlcj1jbG9ja3dpc2UocGxhY2VtZW50KTticmVhaztjYXNlIEJFSEFWSU9SUy5DT1VOVEVSQ0xPQ0tXSVNFOmZsaXBPcmRlcj1jbG9ja3dpc2UocGxhY2VtZW50LHRydWUpO2JyZWFrO2RlZmF1bHQ6ZmxpcE9yZGVyPW9wdGlvbnMuYmVoYXZpb3I7fQpmbGlwT3JkZXIuZm9yRWFjaChmdW5jdGlvbihzdGVwLGluZGV4KXtpZihwbGFjZW1lbnQhPT1zdGVwfHxmbGlwT3JkZXIubGVuZ3RoPT09aW5kZXgrMSl7cmV0dXJuIGRhdGE7fQpwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTtwbGFjZW1lbnRPcHBvc2l0ZT1nZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO3ZhciBwb3BwZXJPZmZzZXRzPWRhdGEub2Zmc2V0cy5wb3BwZXI7dmFyIHJlZk9mZnNldHM9ZGF0YS5vZmZzZXRzLnJlZmVyZW5jZTt2YXIgZmxvb3I9TWF0aC5mbG9vcjt2YXIgb3ZlcmxhcHNSZWY9cGxhY2VtZW50PT09J2xlZnQnJiZmbG9vcihwb3BwZXJPZmZzZXRzLnJpZ2h0KT5mbG9vcihyZWZPZmZzZXRzLmxlZnQpfHxwbGFjZW1lbnQ9PT0ncmlnaHQnJiZmbG9vcihwb3BwZXJPZmZzZXRzLmxlZnQpPGZsb29yKHJlZk9mZnNldHMucmlnaHQpfHxwbGFjZW1lbnQ9PT0ndG9wJyYmZmxvb3IocG9wcGVyT2Zmc2V0cy5ib3R0b20pPmZsb29yKHJlZk9mZnNldHMudG9wKXx8cGxhY2VtZW50PT09J2JvdHRvbScmJmZsb29yKHBvcHBlck9mZnNldHMudG9wKTxmbG9vcihyZWZPZmZzZXRzLmJvdHRvbSk7dmFyIG92ZXJmbG93c0xlZnQ9Zmxvb3IocG9wcGVyT2Zmc2V0cy5sZWZ0KTxmbG9vcihib3VuZGFyaWVzLmxlZnQpO3ZhciBvdmVyZmxvd3NSaWdodD1mbG9vcihwb3BwZXJPZmZzZXRzLnJpZ2h0KT5mbG9vcihib3VuZGFyaWVzLnJpZ2h0KTt2YXIgb3ZlcmZsb3dzVG9wPWZsb29yKHBvcHBlck9mZnNldHMudG9wKTxmbG9vcihib3VuZGFyaWVzLnRvcCk7dmFyIG92ZXJmbG93c0JvdHRvbT1mbG9vcihwb3BwZXJPZmZzZXRzLmJvdHRvbSk+Zmxvb3IoYm91bmRhcmllcy5ib3R0b20pO3ZhciBvdmVyZmxvd3NCb3VuZGFyaWVzPXBsYWNlbWVudD09PSdsZWZ0JyYmb3ZlcmZsb3dzTGVmdHx8cGxhY2VtZW50PT09J3JpZ2h0JyYmb3ZlcmZsb3dzUmlnaHR8fHBsYWNlbWVudD09PSd0b3AnJiZvdmVyZmxvd3NUb3B8fHBsYWNlbWVudD09PSdib3R0b20nJiZvdmVyZmxvd3NCb3R0b207dmFyIGlzVmVydGljYWw9Wyd0b3AnLCdib3R0b20nXS5pbmRleE9mKHBsYWNlbWVudCkhPT0tMTt2YXIgZmxpcHBlZFZhcmlhdGlvbj0hIW9wdGlvbnMuZmxpcFZhcmlhdGlvbnMmJihpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nc3RhcnQnJiZvdmVyZmxvd3NMZWZ0fHxpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nZW5kJyYmb3ZlcmZsb3dzUmlnaHR8fCFpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nc3RhcnQnJiZvdmVyZmxvd3NUb3B8fCFpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nZW5kJyYmb3ZlcmZsb3dzQm90dG9tKTtpZihvdmVybGFwc1JlZnx8b3ZlcmZsb3dzQm91bmRhcmllc3x8ZmxpcHBlZFZhcmlhdGlvbil7ZGF0YS5mbGlwcGVkPXRydWU7aWYob3ZlcmxhcHNSZWZ8fG92ZXJmbG93c0JvdW5kYXJpZXMpe3BsYWNlbWVudD1mbGlwT3JkZXJbaW5kZXgrMV07fQppZihmbGlwcGVkVmFyaWF0aW9uKXt2YXJpYXRpb249Z2V0T3Bwb3NpdGVWYXJpYXRpb24odmFyaWF0aW9uKTt9CmRhdGEucGxhY2VtZW50PXBsYWNlbWVudCsodmFyaWF0aW9uPyctJyt2YXJpYXRpb246JycpO2RhdGEub2Zmc2V0cy5wb3BwZXI9X2V4dGVuZHMoe30sZGF0YS5vZmZzZXRzLnBvcHBlcixnZXRQb3BwZXJPZmZzZXRzKGRhdGEuaW5zdGFuY2UucG9wcGVyLGRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsZGF0YS5wbGFjZW1lbnQpKTtkYXRhPXJ1bk1vZGlmaWVycyhkYXRhLmluc3RhbmNlLm1vZGlmaWVycyxkYXRhLCdmbGlwJyk7fX0pO3JldHVybiBkYXRhO30KZnVuY3Rpb24ga2VlcFRvZ2V0aGVyKGRhdGEpe3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgZmxvb3I9TWF0aC5mbG9vcjt2YXIgaXNWZXJ0aWNhbD1bJ3RvcCcsJ2JvdHRvbSddLmluZGV4T2YocGxhY2VtZW50KSE9PS0xO3ZhciBzaWRlPWlzVmVydGljYWw/J3JpZ2h0JzonYm90dG9tJzt2YXIgb3BTaWRlPWlzVmVydGljYWw/J2xlZnQnOid0b3AnO3ZhciBtZWFzdXJlbWVudD1pc1ZlcnRpY2FsPyd3aWR0aCc6J2hlaWdodCc7aWYocG9wcGVyW3NpZGVdPGZsb29yKHJlZmVyZW5jZVtvcFNpZGVdKSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltvcFNpZGVdPWZsb29yKHJlZmVyZW5jZVtvcFNpZGVdKS1wb3BwZXJbbWVhc3VyZW1lbnRdO30KaWYocG9wcGVyW29wU2lkZV0+Zmxvb3IocmVmZXJlbmNlW3NpZGVdKSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltvcFNpZGVdPWZsb29yKHJlZmVyZW5jZVtzaWRlXSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIHRvVmFsdWUoc3RyLG1lYXN1cmVtZW50LHBvcHBlck9mZnNldHMscmVmZXJlbmNlT2Zmc2V0cyl7dmFyIHNwbGl0PXN0ci5tYXRjaCgvKCg/OlwtfFwrKT9cZCpcLj9cZCopKC4qKS8pO3ZhciB2YWx1ZT0rc3BsaXRbMV07dmFyIHVuaXQ9c3BsaXRbMl07aWYoIXZhbHVlKXtyZXR1cm4gc3RyO30KaWYodW5pdC5pbmRleE9mKCclJyk9PT0wKXt2YXIgZWxlbWVudD12b2lkIDA7c3dpdGNoKHVuaXQpe2Nhc2UnJXAnOmVsZW1lbnQ9cG9wcGVyT2Zmc2V0czticmVhaztjYXNlJyUnOmNhc2UnJXInOmRlZmF1bHQ6ZWxlbWVudD1yZWZlcmVuY2VPZmZzZXRzO30KdmFyIHJlY3Q9Z2V0Q2xpZW50UmVjdChlbGVtZW50KTtyZXR1cm4gcmVjdFttZWFzdXJlbWVudF0vMTAwKnZhbHVlO31lbHNlIGlmKHVuaXQ9PT0ndmgnfHx1bml0PT09J3Z3Jyl7dmFyIHNpemU9dm9pZCAwO2lmKHVuaXQ9PT0ndmgnKXtzaXplPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsd2luZG93LmlubmVySGVpZ2h0fHwwKTt9ZWxzZXtzaXplPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCx3aW5kb3cuaW5uZXJXaWR0aHx8MCk7fQpyZXR1cm4gc2l6ZS8xMDAqdmFsdWU7fWVsc2V7cmV0dXJuIHZhbHVlO319CmZ1bmN0aW9uIHBhcnNlT2Zmc2V0KG9mZnNldCxwb3BwZXJPZmZzZXRzLHJlZmVyZW5jZU9mZnNldHMsYmFzZVBsYWNlbWVudCl7dmFyIG9mZnNldHM9WzAsMF07dmFyIHVzZUhlaWdodD1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YoYmFzZVBsYWNlbWVudCkhPT0tMTt2YXIgZnJhZ21lbnRzPW9mZnNldC5zcGxpdCgvKFwrfFwtKS8pLm1hcChmdW5jdGlvbihmcmFnKXtyZXR1cm4gZnJhZy50cmltKCk7fSk7dmFyIGRpdmlkZXI9ZnJhZ21lbnRzLmluZGV4T2YoZmluZChmcmFnbWVudHMsZnVuY3Rpb24oZnJhZyl7cmV0dXJuIGZyYWcuc2VhcmNoKC8sfFxzLykhPT0tMTt9KSk7aWYoZnJhZ21lbnRzW2RpdmlkZXJdJiZmcmFnbWVudHNbZGl2aWRlcl0uaW5kZXhPZignLCcpPT09LTEpe2NvbnNvbGUud2FybignT2Zmc2V0cyBzZXBhcmF0ZWQgYnkgd2hpdGUgc3BhY2UocykgYXJlIGRlcHJlY2F0ZWQsIHVzZSBhIGNvbW1hICgsKSBpbnN0ZWFkLicpO30KdmFyIHNwbGl0UmVnZXg9L1xzKixccyp8XHMrLzt2YXIgb3BzPWRpdmlkZXIhPT0tMT9bZnJhZ21lbnRzLnNsaWNlKDAsZGl2aWRlcikuY29uY2F0KFtmcmFnbWVudHNbZGl2aWRlcl0uc3BsaXQoc3BsaXRSZWdleClbMF1dKSxbZnJhZ21lbnRzW2RpdmlkZXJdLnNwbGl0KHNwbGl0UmVnZXgpWzFdXS5jb25jYXQoZnJhZ21lbnRzLnNsaWNlKGRpdmlkZXIrMSkpXTpbZnJhZ21lbnRzXTtvcHM9b3BzLm1hcChmdW5jdGlvbihvcCxpbmRleCl7dmFyIG1lYXN1cmVtZW50PShpbmRleD09PTE/IXVzZUhlaWdodDp1c2VIZWlnaHQpPydoZWlnaHQnOid3aWR0aCc7dmFyIG1lcmdlV2l0aFByZXZpb3VzPWZhbHNlO3JldHVybiBvcC5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtpZihhW2EubGVuZ3RoLTFdPT09JycmJlsnKycsJy0nXS5pbmRleE9mKGIpIT09LTEpe2FbYS5sZW5ndGgtMV09YjttZXJnZVdpdGhQcmV2aW91cz10cnVlO3JldHVybiBhO31lbHNlIGlmKG1lcmdlV2l0aFByZXZpb3VzKXthW2EubGVuZ3RoLTFdKz1iO21lcmdlV2l0aFByZXZpb3VzPWZhbHNlO3JldHVybiBhO31lbHNle3JldHVybiBhLmNvbmNhdChiKTt9fSxbXSkubWFwKGZ1bmN0aW9uKHN0cil7cmV0dXJuIHRvVmFsdWUoc3RyLG1lYXN1cmVtZW50LHBvcHBlck9mZnNldHMscmVmZXJlbmNlT2Zmc2V0cyk7fSk7fSk7b3BzLmZvckVhY2goZnVuY3Rpb24ob3AsaW5kZXgpe29wLmZvckVhY2goZnVuY3Rpb24oZnJhZyxpbmRleDIpe2lmKGlzTnVtZXJpYyhmcmFnKSl7b2Zmc2V0c1tpbmRleF0rPWZyYWcqKG9wW2luZGV4Mi0xXT09PSctJz8tMToxKTt9fSk7fSk7cmV0dXJuIG9mZnNldHM7fQpmdW5jdGlvbiBvZmZzZXQoZGF0YSxfcmVmKXt2YXIgb2Zmc2V0PV9yZWYub2Zmc2V0O3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQsX2RhdGEkb2Zmc2V0cz1kYXRhLm9mZnNldHMscG9wcGVyPV9kYXRhJG9mZnNldHMucG9wcGVyLHJlZmVyZW5jZT1fZGF0YSRvZmZzZXRzLnJlZmVyZW5jZTt2YXIgYmFzZVBsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgb2Zmc2V0cz12b2lkIDA7aWYoaXNOdW1lcmljKCtvZmZzZXQpKXtvZmZzZXRzPVsrb2Zmc2V0LDBdO31lbHNle29mZnNldHM9cGFyc2VPZmZzZXQob2Zmc2V0LHBvcHBlcixyZWZlcmVuY2UsYmFzZVBsYWNlbWVudCk7fQppZihiYXNlUGxhY2VtZW50PT09J2xlZnQnKXtwb3BwZXIudG9wKz1vZmZzZXRzWzBdO3BvcHBlci5sZWZ0LT1vZmZzZXRzWzFdO31lbHNlIGlmKGJhc2VQbGFjZW1lbnQ9PT0ncmlnaHQnKXtwb3BwZXIudG9wKz1vZmZzZXRzWzBdO3BvcHBlci5sZWZ0Kz1vZmZzZXRzWzFdO31lbHNlIGlmKGJhc2VQbGFjZW1lbnQ9PT0ndG9wJyl7cG9wcGVyLmxlZnQrPW9mZnNldHNbMF07cG9wcGVyLnRvcC09b2Zmc2V0c1sxXTt9ZWxzZSBpZihiYXNlUGxhY2VtZW50PT09J2JvdHRvbScpe3BvcHBlci5sZWZ0Kz1vZmZzZXRzWzBdO3BvcHBlci50b3ArPW9mZnNldHNbMV07fQpkYXRhLnBvcHBlcj1wb3BwZXI7cmV0dXJuIGRhdGE7fQpmdW5jdGlvbiBwcmV2ZW50T3ZlcmZsb3coZGF0YSxvcHRpb25zKXt2YXIgYm91bmRhcmllc0VsZW1lbnQ9b3B0aW9ucy5ib3VuZGFyaWVzRWxlbWVudHx8Z2V0T2Zmc2V0UGFyZW50KGRhdGEuaW5zdGFuY2UucG9wcGVyKTtpZihkYXRhLmluc3RhbmNlLnJlZmVyZW5jZT09PWJvdW5kYXJpZXNFbGVtZW50KXtib3VuZGFyaWVzRWxlbWVudD1nZXRPZmZzZXRQYXJlbnQoYm91bmRhcmllc0VsZW1lbnQpO30KdmFyIHRyYW5zZm9ybVByb3A9Z2V0U3VwcG9ydGVkUHJvcGVydHlOYW1lKCd0cmFuc2Zvcm0nKTt2YXIgcG9wcGVyU3R5bGVzPWRhdGEuaW5zdGFuY2UucG9wcGVyLnN0eWxlO3ZhciB0b3A9cG9wcGVyU3R5bGVzLnRvcCxsZWZ0PXBvcHBlclN0eWxlcy5sZWZ0LHRyYW5zZm9ybT1wb3BwZXJTdHlsZXNbdHJhbnNmb3JtUHJvcF07cG9wcGVyU3R5bGVzLnRvcD0nJztwb3BwZXJTdHlsZXMubGVmdD0nJztwb3BwZXJTdHlsZXNbdHJhbnNmb3JtUHJvcF09Jyc7dmFyIGJvdW5kYXJpZXM9Z2V0Qm91bmRhcmllcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLmluc3RhbmNlLnJlZmVyZW5jZSxvcHRpb25zLnBhZGRpbmcsYm91bmRhcmllc0VsZW1lbnQsZGF0YS5wb3NpdGlvbkZpeGVkKTtwb3BwZXJTdHlsZXMudG9wPXRvcDtwb3BwZXJTdHlsZXMubGVmdD1sZWZ0O3BvcHBlclN0eWxlc1t0cmFuc2Zvcm1Qcm9wXT10cmFuc2Zvcm07b3B0aW9ucy5ib3VuZGFyaWVzPWJvdW5kYXJpZXM7dmFyIG9yZGVyPW9wdGlvbnMucHJpb3JpdHk7dmFyIHBvcHBlcj1kYXRhLm9mZnNldHMucG9wcGVyO3ZhciBjaGVjaz17cHJpbWFyeTpmdW5jdGlvbiBwcmltYXJ5KHBsYWNlbWVudCl7dmFyIHZhbHVlPXBvcHBlcltwbGFjZW1lbnRdO2lmKHBvcHBlcltwbGFjZW1lbnRdPGJvdW5kYXJpZXNbcGxhY2VtZW50XSYmIW9wdGlvbnMuZXNjYXBlV2l0aFJlZmVyZW5jZSl7dmFsdWU9TWF0aC5tYXgocG9wcGVyW3BsYWNlbWVudF0sYm91bmRhcmllc1twbGFjZW1lbnRdKTt9CnJldHVybiBkZWZpbmVQcm9wZXJ0eSh7fSxwbGFjZW1lbnQsdmFsdWUpO30sc2Vjb25kYXJ5OmZ1bmN0aW9uIHNlY29uZGFyeShwbGFjZW1lbnQpe3ZhciBtYWluU2lkZT1wbGFjZW1lbnQ9PT0ncmlnaHQnPydsZWZ0JzondG9wJzt2YXIgdmFsdWU9cG9wcGVyW21haW5TaWRlXTtpZihwb3BwZXJbcGxhY2VtZW50XT5ib3VuZGFyaWVzW3BsYWNlbWVudF0mJiFvcHRpb25zLmVzY2FwZVdpdGhSZWZlcmVuY2Upe3ZhbHVlPU1hdGgubWluKHBvcHBlclttYWluU2lkZV0sYm91bmRhcmllc1twbGFjZW1lbnRdLShwbGFjZW1lbnQ9PT0ncmlnaHQnP3BvcHBlci53aWR0aDpwb3BwZXIuaGVpZ2h0KSk7fQpyZXR1cm4gZGVmaW5lUHJvcGVydHkoe30sbWFpblNpZGUsdmFsdWUpO319O29yZGVyLmZvckVhY2goZnVuY3Rpb24ocGxhY2VtZW50KXt2YXIgc2lkZT1bJ2xlZnQnLCd0b3AnXS5pbmRleE9mKHBsYWNlbWVudCkhPT0tMT8ncHJpbWFyeSc6J3NlY29uZGFyeSc7cG9wcGVyPV9leHRlbmRzKHt9LHBvcHBlcixjaGVja1tzaWRlXShwbGFjZW1lbnQpKTt9KTtkYXRhLm9mZnNldHMucG9wcGVyPXBvcHBlcjtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIHNoaWZ0KGRhdGEpe3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQ7dmFyIGJhc2VQbGFjZW1lbnQ9cGxhY2VtZW50LnNwbGl0KCctJylbMF07dmFyIHNoaWZ0dmFyaWF0aW9uPXBsYWNlbWVudC5zcGxpdCgnLScpWzFdO2lmKHNoaWZ0dmFyaWF0aW9uKXt2YXIgX2RhdGEkb2Zmc2V0cz1kYXRhLm9mZnNldHMscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlLHBvcHBlcj1fZGF0YSRvZmZzZXRzLnBvcHBlcjt2YXIgaXNWZXJ0aWNhbD1bJ2JvdHRvbScsJ3RvcCddLmluZGV4T2YoYmFzZVBsYWNlbWVudCkhPT0tMTt2YXIgc2lkZT1pc1ZlcnRpY2FsPydsZWZ0JzondG9wJzt2YXIgbWVhc3VyZW1lbnQ9aXNWZXJ0aWNhbD8nd2lkdGgnOidoZWlnaHQnO3ZhciBzaGlmdE9mZnNldHM9e3N0YXJ0OmRlZmluZVByb3BlcnR5KHt9LHNpZGUscmVmZXJlbmNlW3NpZGVdKSxlbmQ6ZGVmaW5lUHJvcGVydHkoe30sc2lkZSxyZWZlcmVuY2Vbc2lkZV0rcmVmZXJlbmNlW21lYXN1cmVtZW50XS1wb3BwZXJbbWVhc3VyZW1lbnRdKX07ZGF0YS5vZmZzZXRzLnBvcHBlcj1fZXh0ZW5kcyh7fSxwb3BwZXIsc2hpZnRPZmZzZXRzW3NoaWZ0dmFyaWF0aW9uXSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGhpZGUoZGF0YSl7aWYoIWlzTW9kaWZpZXJSZXF1aXJlZChkYXRhLmluc3RhbmNlLm1vZGlmaWVycywnaGlkZScsJ3ByZXZlbnRPdmVyZmxvdycpKXtyZXR1cm4gZGF0YTt9CnZhciByZWZSZWN0PWRhdGEub2Zmc2V0cy5yZWZlcmVuY2U7dmFyIGJvdW5kPWZpbmQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsZnVuY3Rpb24obW9kaWZpZXIpe3JldHVybiBtb2RpZmllci5uYW1lPT09J3ByZXZlbnRPdmVyZmxvdyc7fSkuYm91bmRhcmllcztpZihyZWZSZWN0LmJvdHRvbTxib3VuZC50b3B8fHJlZlJlY3QubGVmdD5ib3VuZC5yaWdodHx8cmVmUmVjdC50b3A+Ym91bmQuYm90dG9tfHxyZWZSZWN0LnJpZ2h0PGJvdW5kLmxlZnQpe2lmKGRhdGEuaGlkZT09PXRydWUpe3JldHVybiBkYXRhO30KZGF0YS5oaWRlPXRydWU7ZGF0YS5hdHRyaWJ1dGVzWyd4LW91dC1vZi1ib3VuZGFyaWVzJ109Jyc7fWVsc2V7aWYoZGF0YS5oaWRlPT09ZmFsc2Upe3JldHVybiBkYXRhO30KZGF0YS5oaWRlPWZhbHNlO2RhdGEuYXR0cmlidXRlc1sneC1vdXQtb2YtYm91bmRhcmllcyddPWZhbHNlO30KcmV0dXJuIGRhdGE7fQpmdW5jdGlvbiBpbm5lcihkYXRhKXt2YXIgcGxhY2VtZW50PWRhdGEucGxhY2VtZW50O3ZhciBiYXNlUGxhY2VtZW50PXBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBpc0hvcml6PVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihiYXNlUGxhY2VtZW50KSE9PS0xO3ZhciBzdWJ0cmFjdExlbmd0aD1bJ3RvcCcsJ2xlZnQnXS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpPT09LTE7cG9wcGVyW2lzSG9yaXo/J2xlZnQnOid0b3AnXT1yZWZlcmVuY2VbYmFzZVBsYWNlbWVudF0tKHN1YnRyYWN0TGVuZ3RoP3BvcHBlcltpc0hvcml6Pyd3aWR0aCc6J2hlaWdodCddOjApO2RhdGEucGxhY2VtZW50PWdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCk7ZGF0YS5vZmZzZXRzLnBvcHBlcj1nZXRDbGllbnRSZWN0KHBvcHBlcik7cmV0dXJuIGRhdGE7fQp2YXIgbW9kaWZpZXJzPXtzaGlmdDp7b3JkZXI6MTAwLGVuYWJsZWQ6dHJ1ZSxmbjpzaGlmdH0sb2Zmc2V0OntvcmRlcjoyMDAsZW5hYmxlZDp0cnVlLGZuOm9mZnNldCxvZmZzZXQ6MH0scHJldmVudE92ZXJmbG93OntvcmRlcjozMDAsZW5hYmxlZDp0cnVlLGZuOnByZXZlbnRPdmVyZmxvdyxwcmlvcml0eTpbJ2xlZnQnLCdyaWdodCcsJ3RvcCcsJ2JvdHRvbSddLHBhZGRpbmc6NSxib3VuZGFyaWVzRWxlbWVudDonc2Nyb2xsUGFyZW50J30sa2VlcFRvZ2V0aGVyOntvcmRlcjo0MDAsZW5hYmxlZDp0cnVlLGZuOmtlZXBUb2dldGhlcn0sYXJyb3c6e29yZGVyOjUwMCxlbmFibGVkOnRydWUsZm46YXJyb3csZWxlbWVudDonW3gtYXJyb3ddJ30sZmxpcDp7b3JkZXI6NjAwLGVuYWJsZWQ6dHJ1ZSxmbjpmbGlwLGJlaGF2aW9yOidmbGlwJyxwYWRkaW5nOjUsYm91bmRhcmllc0VsZW1lbnQ6J3ZpZXdwb3J0J30saW5uZXI6e29yZGVyOjcwMCxlbmFibGVkOmZhbHNlLGZuOmlubmVyfSxoaWRlOntvcmRlcjo4MDAsZW5hYmxlZDp0cnVlLGZuOmhpZGV9LGNvbXB1dGVTdHlsZTp7b3JkZXI6ODUwLGVuYWJsZWQ6dHJ1ZSxmbjpjb21wdXRlU3R5bGUsZ3B1QWNjZWxlcmF0aW9uOnRydWUseDonYm90dG9tJyx5OidyaWdodCd9LGFwcGx5U3R5bGU6e29yZGVyOjkwMCxlbmFibGVkOnRydWUsZm46YXBwbHlTdHlsZSxvbkxvYWQ6YXBwbHlTdHlsZU9uTG9hZCxncHVBY2NlbGVyYXRpb246dW5kZWZpbmVkfX07dmFyIERlZmF1bHRzPXtwbGFjZW1lbnQ6J2JvdHRvbScscG9zaXRpb25GaXhlZDpmYWxzZSxldmVudHNFbmFibGVkOnRydWUscmVtb3ZlT25EZXN0cm95OmZhbHNlLG9uQ3JlYXRlOmZ1bmN0aW9uIG9uQ3JlYXRlKCl7fSxvblVwZGF0ZTpmdW5jdGlvbiBvblVwZGF0ZSgpe30sbW9kaWZpZXJzOm1vZGlmaWVyc307dmFyIFBvcHBlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIFBvcHBlcihyZWZlcmVuY2UscG9wcGVyKXt2YXIgX3RoaXM9dGhpczt2YXIgb3B0aW9ucz1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMl06e307Y2xhc3NDYWxsQ2hlY2sodGhpcyxQb3BwZXIpO3RoaXMuc2NoZWR1bGVVcGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLnVwZGF0ZSk7fTt0aGlzLnVwZGF0ZT1kZWJvdW5jZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTt0aGlzLm9wdGlvbnM9X2V4dGVuZHMoe30sUG9wcGVyLkRlZmF1bHRzLG9wdGlvbnMpO3RoaXMuc3RhdGU9e2lzRGVzdHJveWVkOmZhbHNlLGlzQ3JlYXRlZDpmYWxzZSxzY3JvbGxQYXJlbnRzOltdfTt0aGlzLnJlZmVyZW5jZT1yZWZlcmVuY2UmJnJlZmVyZW5jZS5qcXVlcnk/cmVmZXJlbmNlWzBdOnJlZmVyZW5jZTt0aGlzLnBvcHBlcj1wb3BwZXImJnBvcHBlci5qcXVlcnk/cG9wcGVyWzBdOnBvcHBlcjt0aGlzLm9wdGlvbnMubW9kaWZpZXJzPXt9O09iamVjdC5rZXlzKF9leHRlbmRzKHt9LFBvcHBlci5EZWZhdWx0cy5tb2RpZmllcnMsb3B0aW9ucy5tb2RpZmllcnMpKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpe190aGlzLm9wdGlvbnMubW9kaWZpZXJzW25hbWVdPV9leHRlbmRzKHt9LFBvcHBlci5EZWZhdWx0cy5tb2RpZmllcnNbbmFtZV18fHt9LG9wdGlvbnMubW9kaWZpZXJzP29wdGlvbnMubW9kaWZpZXJzW25hbWVdOnt9KTt9KTt0aGlzLm1vZGlmaWVycz1PYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMubW9kaWZpZXJzKS5tYXAoZnVuY3Rpb24obmFtZSl7cmV0dXJuIF9leHRlbmRzKHtuYW1lOm5hbWV9LF90aGlzLm9wdGlvbnMubW9kaWZpZXJzW25hbWVdKTt9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEub3JkZXItYi5vcmRlcjt9KTt0aGlzLm1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGlmaWVyT3B0aW9ucyl7aWYobW9kaWZpZXJPcHRpb25zLmVuYWJsZWQmJmlzRnVuY3Rpb24obW9kaWZpZXJPcHRpb25zLm9uTG9hZCkpe21vZGlmaWVyT3B0aW9ucy5vbkxvYWQoX3RoaXMucmVmZXJlbmNlLF90aGlzLnBvcHBlcixfdGhpcy5vcHRpb25zLG1vZGlmaWVyT3B0aW9ucyxfdGhpcy5zdGF0ZSk7fX0pO3RoaXMudXBkYXRlKCk7dmFyIGV2ZW50c0VuYWJsZWQ9dGhpcy5vcHRpb25zLmV2ZW50c0VuYWJsZWQ7aWYoZXZlbnRzRW5hYmxlZCl7dGhpcy5lbmFibGVFdmVudExpc3RlbmVycygpO30KdGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkPWV2ZW50c0VuYWJsZWQ7fQpjcmVhdGVDbGFzcyhQb3BwZXIsW3trZXk6J3VwZGF0ZScsdmFsdWU6ZnVuY3Rpb24gdXBkYXRlJCQxKCl7cmV0dXJuIHVwZGF0ZS5jYWxsKHRoaXMpO319LHtrZXk6J2Rlc3Ryb3knLHZhbHVlOmZ1bmN0aW9uIGRlc3Ryb3kkJDEoKXtyZXR1cm4gZGVzdHJveS5jYWxsKHRoaXMpO319LHtrZXk6J2VuYWJsZUV2ZW50TGlzdGVuZXJzJyx2YWx1ZTpmdW5jdGlvbiBlbmFibGVFdmVudExpc3RlbmVycyQkMSgpe3JldHVybiBlbmFibGVFdmVudExpc3RlbmVycy5jYWxsKHRoaXMpO319LHtrZXk6J2Rpc2FibGVFdmVudExpc3RlbmVycycsdmFsdWU6ZnVuY3Rpb24gZGlzYWJsZUV2ZW50TGlzdGVuZXJzJCQxKCl7cmV0dXJuIGRpc2FibGVFdmVudExpc3RlbmVycy5jYWxsKHRoaXMpO319XSk7cmV0dXJuIFBvcHBlcjt9KCk7UG9wcGVyLlV0aWxzPSh0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCc/d2luZG93Omdsb2JhbCkuUG9wcGVyVXRpbHM7UG9wcGVyLnBsYWNlbWVudHM9cGxhY2VtZW50cztQb3BwZXIuRGVmYXVsdHM9RGVmYXVsdHM7cmV0dXJuIFBvcHBlcjt9KSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvaW5kZXguanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbigkKXtpZih0eXBlb2YgJD09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkuIGpRdWVyeSBtdXN0IGJlIGluY2x1ZGVkIGJlZm9yZSBCb290c3RyYXBcJ3MgSmF2YVNjcmlwdC4nKTt9CnZhciB2ZXJzaW9uPSQuZm4uanF1ZXJ5LnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKTt2YXIgbWluTWFqb3I9MTt2YXIgbHRNYWpvcj0yO3ZhciBtaW5NaW5vcj05O3ZhciBtaW5QYXRjaD0xO3ZhciBtYXhNYWpvcj00O2lmKHZlcnNpb25bMF08bHRNYWpvciYmdmVyc2lvblsxXTxtaW5NaW5vcnx8dmVyc2lvblswXT09PW1pbk1ham9yJiZ2ZXJzaW9uWzFdPT09bWluTWlub3ImJnZlcnNpb25bMl08bWluUGF0Y2h8fHZlcnNpb25bMF0+PW1heE1ham9yKXt0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSB2MS45LjEgYnV0IGxlc3MgdGhhbiB2NC4wLjAnKTt9fSkoJCk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2Jvb3RzdHJhcC9qcy91dGlsLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe3R5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJz9tb2R1bGUuZXhwb3J0cz1mYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoWydqcXVlcnknXSxmYWN0b3J5KTooZ2xvYmFsPWdsb2JhbHx8c2VsZixnbG9iYWwuVXRpbD1mYWN0b3J5KGdsb2JhbC5qUXVlcnkpKTt9KHRoaXMsZnVuY3Rpb24oJCl7J3VzZSBzdHJpY3QnOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpPyRbJ2RlZmF1bHQnXTokO3ZhciBUUkFOU0lUSU9OX0VORD0ndHJhbnNpdGlvbmVuZCc7dmFyIE1BWF9VSUQ9MTAwMDAwMDt2YXIgTUlMTElTRUNPTkRTX01VTFRJUExJRVI9MTAwMDtmdW5jdGlvbiB0b1R5cGUob2JqKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKG9iaikubWF0Y2goL1xzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKTt9CmZ1bmN0aW9uIGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKXtyZXR1cm57YmluZFR5cGU6VFJBTlNJVElPTl9FTkQsZGVsZWdhdGVUeXBlOlRSQU5TSVRJT05fRU5ELGhhbmRsZTpmdW5jdGlvbiBoYW5kbGUoZXZlbnQpe2lmKCQoZXZlbnQudGFyZ2V0KS5pcyh0aGlzKSl7cmV0dXJuIGV2ZW50LmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9CnJldHVybiB1bmRlZmluZWQ7fX07fQpmdW5jdGlvbiB0cmFuc2l0aW9uRW5kRW11bGF0b3IoZHVyYXRpb24pe3ZhciBfdGhpcz10aGlzO3ZhciBjYWxsZWQ9ZmFsc2U7JCh0aGlzKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCxmdW5jdGlvbigpe2NhbGxlZD10cnVlO30pO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighY2FsbGVkKXtVdGlsLnRyaWdnZXJUcmFuc2l0aW9uRW5kKF90aGlzKTt9fSxkdXJhdGlvbik7cmV0dXJuIHRoaXM7fQpmdW5jdGlvbiBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpeyQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQ9dHJhbnNpdGlvbkVuZEVtdWxhdG9yOyQuZXZlbnQuc3BlY2lhbFtVdGlsLlRSQU5TSVRJT05fRU5EXT1nZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50KCk7fQp2YXIgVXRpbD17VFJBTlNJVElPTl9FTkQ6J2JzVHJhbnNpdGlvbkVuZCcsZ2V0VUlEOmZ1bmN0aW9uIGdldFVJRChwcmVmaXgpe2Rve3ByZWZpeCs9fn4oTWF0aC5yYW5kb20oKSpNQVhfVUlEKTt9d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSk7cmV0dXJuIHByZWZpeDt9LGdldFNlbGVjdG9yRnJvbUVsZW1lbnQ6ZnVuY3Rpb24gZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KXt2YXIgc2VsZWN0b3I9ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0Jyk7aWYoIXNlbGVjdG9yfHxzZWxlY3Rvcj09PScjJyl7dmFyIGhyZWZBdHRyPWVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJyk7c2VsZWN0b3I9aHJlZkF0dHImJmhyZWZBdHRyIT09JyMnP2hyZWZBdHRyLnRyaW0oKTonJzt9CnRyeXtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik/c2VsZWN0b3I6bnVsbDt9Y2F0Y2goZXJyKXtyZXR1cm4gbnVsbDt9fSxnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudDpmdW5jdGlvbiBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChlbGVtZW50KXtpZighZWxlbWVudCl7cmV0dXJuIDA7fQp2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPSQoZWxlbWVudCkuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7dmFyIHRyYW5zaXRpb25EZWxheT0kKGVsZW1lbnQpLmNzcygndHJhbnNpdGlvbi1kZWxheScpO3ZhciBmbG9hdFRyYW5zaXRpb25EdXJhdGlvbj1wYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbik7dmFyIGZsb2F0VHJhbnNpdGlvbkRlbGF5PXBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KTtpZighZmxvYXRUcmFuc2l0aW9uRHVyYXRpb24mJiFmbG9hdFRyYW5zaXRpb25EZWxheSl7cmV0dXJuIDA7fQp0cmFuc2l0aW9uRHVyYXRpb249dHJhbnNpdGlvbkR1cmF0aW9uLnNwbGl0KCcsJylbMF07dHJhbnNpdGlvbkRlbGF5PXRyYW5zaXRpb25EZWxheS5zcGxpdCgnLCcpWzBdO3JldHVybihwYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbikrcGFyc2VGbG9hdCh0cmFuc2l0aW9uRGVsYXkpKSpNSUxMSVNFQ09ORFNfTVVMVElQTElFUjt9LHJlZmxvdzpmdW5jdGlvbiByZWZsb3coZWxlbWVudCl7cmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O30sdHJpZ2dlclRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24gdHJpZ2dlclRyYW5zaXRpb25FbmQoZWxlbWVudCl7JChlbGVtZW50KS50cmlnZ2VyKFRSQU5TSVRJT05fRU5EKTt9LHN1cHBvcnRzVHJhbnNpdGlvbkVuZDpmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKXtyZXR1cm4gQm9vbGVhbihUUkFOU0lUSU9OX0VORCk7fSxpc0VsZW1lbnQ6ZnVuY3Rpb24gaXNFbGVtZW50KG9iail7cmV0dXJuKG9ialswXXx8b2JqKS5ub2RlVHlwZTt9LHR5cGVDaGVja0NvbmZpZzpmdW5jdGlvbiB0eXBlQ2hlY2tDb25maWcoY29tcG9uZW50TmFtZSxjb25maWcsY29uZmlnVHlwZXMpe2Zvcih2YXIgcHJvcGVydHkgaW4gY29uZmlnVHlwZXMpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb25maWdUeXBlcyxwcm9wZXJ0eSkpe3ZhciBleHBlY3RlZFR5cGVzPWNvbmZpZ1R5cGVzW3Byb3BlcnR5XTt2YXIgdmFsdWU9Y29uZmlnW3Byb3BlcnR5XTt2YXIgdmFsdWVUeXBlPXZhbHVlJiZVdGlsLmlzRWxlbWVudCh2YWx1ZSk/J2VsZW1lbnQnOnRvVHlwZSh2YWx1ZSk7aWYoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKXt0aHJvdyBuZXcgRXJyb3IoY29tcG9uZW50TmFtZS50b1VwcGVyQ2FzZSgpKyI6ICIrKCJPcHRpb24gXCIiK3Byb3BlcnR5KyJcIiBwcm92aWRlZCB0eXBlIFwiIit2YWx1ZVR5cGUrIlwiICIpKygiYnV0IGV4cGVjdGVkIHR5cGUgXCIiK2V4cGVjdGVkVHlwZXMrIlwiLiIpKTt9fX19LGZpbmRTaGFkb3dSb290OmZ1bmN0aW9uIGZpbmRTaGFkb3dSb290KGVsZW1lbnQpe2lmKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXR0YWNoU2hhZG93KXtyZXR1cm4gbnVsbDt9CmlmKHR5cGVvZiBlbGVtZW50LmdldFJvb3ROb2RlPT09J2Z1bmN0aW9uJyl7dmFyIHJvb3Q9ZWxlbWVudC5nZXRSb290Tm9kZSgpO3JldHVybiByb290IGluc3RhbmNlb2YgU2hhZG93Um9vdD9yb290Om51bGw7fQppZihlbGVtZW50IGluc3RhbmNlb2YgU2hhZG93Um9vdCl7cmV0dXJuIGVsZW1lbnQ7fQppZighZWxlbWVudC5wYXJlbnROb2RlKXtyZXR1cm4gbnVsbDt9CnJldHVybiBVdGlsLmZpbmRTaGFkb3dSb290KGVsZW1lbnQucGFyZW50Tm9kZSk7fX07c2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKTtyZXR1cm4gVXRpbDt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2Jvb3RzdHJhcC9qcy9hbGVydC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkFsZXJ0PWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CnZhciBOQU1FPSdhbGVydCc7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLmFsZXJ0Jzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgU2VsZWN0b3I9e0RJU01JU1M6J1tkYXRhLWRpc21pc3M9ImFsZXJ0Il0nfTt2YXIgRXZlbnQ9e0NMT1NFOiJjbG9zZSIrRVZFTlRfS0VZLENMT1NFRDoiY2xvc2VkIitFVkVOVF9LRVksQ0xJQ0tfREFUQV9BUEk6ImNsaWNrIitFVkVOVF9LRVkrREFUQV9BUElfS0VZfTt2YXIgQ2xhc3NOYW1lPXtBTEVSVDonYWxlcnQnLEZBREU6J2ZhZGUnLFNIT1c6J3Nob3cnfTt2YXIgQWxlcnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBbGVydChlbGVtZW50KXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7fQp2YXIgX3Byb3RvPUFsZXJ0LnByb3RvdHlwZTtfcHJvdG8uY2xvc2U9ZnVuY3Rpb24gY2xvc2UoZWxlbWVudCl7dmFyIHJvb3RFbGVtZW50PXRoaXMuX2VsZW1lbnQ7aWYoZWxlbWVudCl7cm9vdEVsZW1lbnQ9dGhpcy5fZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCk7fQp2YXIgY3VzdG9tRXZlbnQ9dGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQocm9vdEVsZW1lbnQpO2lmKGN1c3RvbUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQp0aGlzLl9yZW1vdmVFbGVtZW50KHJvb3RFbGVtZW50KTt9O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7dGhpcy5fZWxlbWVudD1udWxsO307X3Byb3RvLl9nZXRSb290RWxlbWVudD1mdW5jdGlvbiBfZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCl7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTt2YXIgcGFyZW50PWZhbHNlO2lmKHNlbGVjdG9yKXtwYXJlbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7fQppZighcGFyZW50KXtwYXJlbnQ9JChlbGVtZW50KS5jbG9zZXN0KCIuIitDbGFzc05hbWUuQUxFUlQpWzBdO30KcmV0dXJuIHBhcmVudDt9O19wcm90by5fdHJpZ2dlckNsb3NlRXZlbnQ9ZnVuY3Rpb24gX3RyaWdnZXJDbG9zZUV2ZW50KGVsZW1lbnQpe3ZhciBjbG9zZUV2ZW50PSQuRXZlbnQoRXZlbnQuQ0xPU0UpOyQoZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtyZXR1cm4gY2xvc2VFdmVudDt9O19wcm90by5fcmVtb3ZlRWxlbWVudD1mdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KXt2YXIgX3RoaXM9dGhpczskKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTtpZighJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpe3RoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpO3JldHVybjt9CnZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChlbGVtZW50KTskKGVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQsZXZlbnQpO30pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fTtfcHJvdG8uX2Rlc3Ryb3lFbGVtZW50PWZ1bmN0aW9uIF9kZXN0cm95RWxlbWVudChlbGVtZW50KXskKGVsZW1lbnQpLmRldGFjaCgpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKS5yZW1vdmUoKTt9O0FsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgJGVsZW1lbnQ9JCh0aGlzKTt2YXIgZGF0YT0kZWxlbWVudC5kYXRhKERBVEFfS0VZKTtpZighZGF0YSl7ZGF0YT1uZXcgQWxlcnQodGhpcyk7JGVsZW1lbnQuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKGNvbmZpZz09PSdjbG9zZScpe2RhdGFbY29uZmlnXSh0aGlzKTt9fSk7fTtBbGVydC5faGFuZGxlRGlzbWlzcz1mdW5jdGlvbiBfaGFuZGxlRGlzbWlzcyhhbGVydEluc3RhbmNlKXtyZXR1cm4gZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KYWxlcnRJbnN0YW5jZS5jbG9zZSh0aGlzKTt9O307X2NyZWF0ZUNsYXNzKEFsZXJ0LG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fV0pO3JldHVybiBBbGVydDt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuRElTTUlTUyxBbGVydC5faGFuZGxlRGlzbWlzcyhuZXcgQWxlcnQoKSkpOyQuZm5bTkFNRV09QWxlcnQuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPUFsZXJ0OyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIEFsZXJ0O30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL2J1dHRvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5J10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkJ1dHRvbj1mYWN0b3J5KGdsb2JhbC5qUXVlcnkpKTt9KHRoaXMsZnVuY3Rpb24oJCl7J3VzZSBzdHJpY3QnOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpPyRbJ2RlZmF1bHQnXTokO2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO30KdmFyIE5BTUU9J2J1dHRvbic7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLmJ1dHRvbic7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIERBVEFfQVBJX0tFWT0nLmRhdGEtYXBpJzt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIENsYXNzTmFtZT17QUNUSVZFOidhY3RpdmUnLEJVVFRPTjonYnRuJyxGT0NVUzonZm9jdXMnfTt2YXIgU2VsZWN0b3I9e0RBVEFfVE9HR0xFX0NBUlJPVDonW2RhdGEtdG9nZ2xlXj0iYnV0dG9uIl0nLERBVEFfVE9HR0xFOidbZGF0YS10b2dnbGU9ImJ1dHRvbnMiXScsSU5QVVQ6J2lucHV0Om5vdChbdHlwZT0iaGlkZGVuIl0pJyxBQ1RJVkU6Jy5hY3RpdmUnLEJVVFRPTjonLmJ0bid9O3ZhciBFdmVudD17Q0xJQ0tfREFUQV9BUEk6ImNsaWNrIitFVkVOVF9LRVkrREFUQV9BUElfS0VZLEZPQ1VTX0JMVVJfREFUQV9BUEk6ImZvY3VzIitFVkVOVF9LRVkrREFUQV9BUElfS0VZKyIgIisoImJsdXIiK0VWRU5UX0tFWStEQVRBX0FQSV9LRVkpfTt2YXIgQnV0dG9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQnV0dG9uKGVsZW1lbnQpe3RoaXMuX2VsZW1lbnQ9ZWxlbWVudDt9CnZhciBfcHJvdG89QnV0dG9uLnByb3RvdHlwZTtfcHJvdG8udG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZSgpe3ZhciB0cmlnZ2VyQ2hhbmdlRXZlbnQ9dHJ1ZTt2YXIgYWRkQXJpYVByZXNzZWQ9dHJ1ZTt2YXIgcm9vdEVsZW1lbnQ9JCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRBVEFfVE9HR0xFKVswXTtpZihyb290RWxlbWVudCl7dmFyIGlucHV0PXRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5JTlBVVCk7aWYoaW5wdXQpe2lmKGlucHV0LnR5cGU9PT0ncmFkaW8nKXtpZihpbnB1dC5jaGVja2VkJiZ0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuQUNUSVZFKSl7dHJpZ2dlckNoYW5nZUV2ZW50PWZhbHNlO31lbHNle3ZhciBhY3RpdmVFbGVtZW50PXJvb3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuQUNUSVZFKTtpZihhY3RpdmVFbGVtZW50KXskKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO319fQppZih0cmlnZ2VyQ2hhbmdlRXZlbnQpe2lmKGlucHV0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKXx8cm9vdEVsZW1lbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpfHxpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyl8fHJvb3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSl7cmV0dXJuO30KaW5wdXQuY2hlY2tlZD0hdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLkFDVElWRSk7JChpbnB1dCkudHJpZ2dlcignY2hhbmdlJyk7fQppbnB1dC5mb2N1cygpO2FkZEFyaWFQcmVzc2VkPWZhbHNlO319CmlmKGFkZEFyaWFQcmVzc2VkKXt0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywhdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLkFDVElWRSkpO30KaWYodHJpZ2dlckNoYW5nZUV2ZW50KXskKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO319O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7dGhpcy5fZWxlbWVudD1udWxsO307QnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO2lmKCFkYXRhKXtkYXRhPW5ldyBCdXR0b24odGhpcyk7JCh0aGlzKS5kYXRhKERBVEFfS0VZLGRhdGEpO30KaWYoY29uZmlnPT09J3RvZ2dsZScpe2RhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhCdXR0b24sbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319XSk7cmV0dXJuIEJ1dHRvbjt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuREFUQV9UT0dHTEVfQ0FSUk9ULGZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBidXR0b249ZXZlbnQudGFyZ2V0O2lmKCEkKGJ1dHRvbikuaGFzQ2xhc3MoQ2xhc3NOYW1lLkJVVFRPTikpe2J1dHRvbj0kKGJ1dHRvbikuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pO30KQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKGJ1dHRvbiksJ3RvZ2dsZScpO30pLm9uKEV2ZW50LkZPQ1VTX0JMVVJfREFUQV9BUEksU2VsZWN0b3IuREFUQV9UT0dHTEVfQ0FSUk9ULGZ1bmN0aW9uKGV2ZW50KXt2YXIgYnV0dG9uPSQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNlbGVjdG9yLkJVVFRPTilbMF07JChidXR0b24pLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5GT0NVUywvXmZvY3VzKGluKT8kLy50ZXN0KGV2ZW50LnR5cGUpKTt9KTskLmZuW05BTUVdPUJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9QnV0dG9uOyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBCdXR0b24uX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBCdXR0b247fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvY2Fyb3VzZWwuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5DYXJvdXNlbD1mYWN0b3J5KGdsb2JhbC5qUXVlcnksZ2xvYmFsLlV0aWwpKTt9KHRoaXMsZnVuY3Rpb24oJCxVdGlsKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fQpvd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fQpyZXR1cm4gdGFyZ2V0O30KdmFyIE5BTUU9J2Nhcm91c2VsJzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMuY2Fyb3VzZWwnO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaSc7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBBUlJPV19MRUZUX0tFWUNPREU9Mzc7dmFyIEFSUk9XX1JJR0hUX0tFWUNPREU9Mzk7dmFyIFRPVUNIRVZFTlRfQ09NUEFUX1dBSVQ9NTAwO3ZhciBTV0lQRV9USFJFU0hPTEQ9NDA7dmFyIERlZmF1bHQ9e2ludGVydmFsOjUwMDAsa2V5Ym9hcmQ6dHJ1ZSxzbGlkZTpmYWxzZSxwYXVzZTonaG92ZXInLHdyYXA6dHJ1ZSx0b3VjaDp0cnVlfTt2YXIgRGVmYXVsdFR5cGU9e2ludGVydmFsOicobnVtYmVyfGJvb2xlYW4pJyxrZXlib2FyZDonYm9vbGVhbicsc2xpZGU6Jyhib29sZWFufHN0cmluZyknLHBhdXNlOicoc3RyaW5nfGJvb2xlYW4pJyx3cmFwOidib29sZWFuJyx0b3VjaDonYm9vbGVhbid9O3ZhciBEaXJlY3Rpb249e05FWFQ6J25leHQnLFBSRVY6J3ByZXYnLExFRlQ6J2xlZnQnLFJJR0hUOidyaWdodCd9O3ZhciBFdmVudD17U0xJREU6InNsaWRlIitFVkVOVF9LRVksU0xJRDoic2xpZCIrRVZFTlRfS0VZLEtFWURPV046ImtleWRvd24iK0VWRU5UX0tFWSxNT1VTRUVOVEVSOiJtb3VzZWVudGVyIitFVkVOVF9LRVksTU9VU0VMRUFWRToibW91c2VsZWF2ZSIrRVZFTlRfS0VZLFRPVUNIU1RBUlQ6InRvdWNoc3RhcnQiK0VWRU5UX0tFWSxUT1VDSE1PVkU6InRvdWNobW92ZSIrRVZFTlRfS0VZLFRPVUNIRU5EOiJ0b3VjaGVuZCIrRVZFTlRfS0VZLFBPSU5URVJET1dOOiJwb2ludGVyZG93biIrRVZFTlRfS0VZLFBPSU5URVJVUDoicG9pbnRlcnVwIitFVkVOVF9LRVksRFJBR19TVEFSVDoiZHJhZ3N0YXJ0IitFVkVOVF9LRVksTE9BRF9EQVRBX0FQSToibG9hZCIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWSxDTElDS19EQVRBX0FQSToiY2xpY2siK0VWRU5UX0tFWStEQVRBX0FQSV9LRVl9O3ZhciBDbGFzc05hbWU9e0NBUk9VU0VMOidjYXJvdXNlbCcsQUNUSVZFOidhY3RpdmUnLFNMSURFOidzbGlkZScsUklHSFQ6J2Nhcm91c2VsLWl0ZW0tcmlnaHQnLExFRlQ6J2Nhcm91c2VsLWl0ZW0tbGVmdCcsTkVYVDonY2Fyb3VzZWwtaXRlbS1uZXh0JyxQUkVWOidjYXJvdXNlbC1pdGVtLXByZXYnLElURU06J2Nhcm91c2VsLWl0ZW0nLFBPSU5URVJfRVZFTlQ6J3BvaW50ZXItZXZlbnQnfTt2YXIgU2VsZWN0b3I9e0FDVElWRTonLmFjdGl2ZScsQUNUSVZFX0lURU06Jy5hY3RpdmUuY2Fyb3VzZWwtaXRlbScsSVRFTTonLmNhcm91c2VsLWl0ZW0nLElURU1fSU1HOicuY2Fyb3VzZWwtaXRlbSBpbWcnLE5FWFRfUFJFVjonLmNhcm91c2VsLWl0ZW0tbmV4dCwgLmNhcm91c2VsLWl0ZW0tcHJldicsSU5ESUNBVE9SUzonLmNhcm91c2VsLWluZGljYXRvcnMnLERBVEFfU0xJREU6J1tkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dJyxEQVRBX1JJREU6J1tkYXRhLXJpZGU9ImNhcm91c2VsIl0nfTt2YXIgUG9pbnRlclR5cGU9e1RPVUNIOid0b3VjaCcsUEVOOidwZW4nfTt2YXIgQ2Fyb3VzZWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50LGNvbmZpZyl7dGhpcy5faXRlbXM9bnVsbDt0aGlzLl9pbnRlcnZhbD1udWxsO3RoaXMuX2FjdGl2ZUVsZW1lbnQ9bnVsbDt0aGlzLl9pc1BhdXNlZD1mYWxzZTt0aGlzLl9pc1NsaWRpbmc9ZmFsc2U7dGhpcy50b3VjaFRpbWVvdXQ9bnVsbDt0aGlzLnRvdWNoU3RhcnRYPTA7dGhpcy50b3VjaERlbHRhWD0wO3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoY29uZmlnKTt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7dGhpcy5faW5kaWNhdG9yc0VsZW1lbnQ9dGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLklORElDQVRPUlMpO3RoaXMuX3RvdWNoU3VwcG9ydGVkPSdvbnRvdWNoc3RhcnQnaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM+MDt0aGlzLl9wb2ludGVyRXZlbnQ9Qm9vbGVhbih3aW5kb3cuUG9pbnRlckV2ZW50fHx3aW5kb3cuTVNQb2ludGVyRXZlbnQpO3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7fQp2YXIgX3Byb3RvPUNhcm91c2VsLnByb3RvdHlwZTtfcHJvdG8ubmV4dD1mdW5jdGlvbiBuZXh0KCl7aWYoIXRoaXMuX2lzU2xpZGluZyl7dGhpcy5fc2xpZGUoRGlyZWN0aW9uLk5FWFQpO319O19wcm90by5uZXh0V2hlblZpc2libGU9ZnVuY3Rpb24gbmV4dFdoZW5WaXNpYmxlKCl7aWYoIWRvY3VtZW50LmhpZGRlbiYmJCh0aGlzLl9lbGVtZW50KS5pcygnOnZpc2libGUnKSYmJCh0aGlzLl9lbGVtZW50KS5jc3MoJ3Zpc2liaWxpdHknKSE9PSdoaWRkZW4nKXt0aGlzLm5leHQoKTt9fTtfcHJvdG8ucHJldj1mdW5jdGlvbiBwcmV2KCl7aWYoIXRoaXMuX2lzU2xpZGluZyl7dGhpcy5fc2xpZGUoRGlyZWN0aW9uLlBSRVYpO319O19wcm90by5wYXVzZT1mdW5jdGlvbiBwYXVzZShldmVudCl7aWYoIWV2ZW50KXt0aGlzLl9pc1BhdXNlZD10cnVlO30KaWYodGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLk5FWFRfUFJFVikpe1V0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7dGhpcy5jeWNsZSh0cnVlKTt9CmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO3RoaXMuX2ludGVydmFsPW51bGw7fTtfcHJvdG8uY3ljbGU9ZnVuY3Rpb24gY3ljbGUoZXZlbnQpe2lmKCFldmVudCl7dGhpcy5faXNQYXVzZWQ9ZmFsc2U7fQppZih0aGlzLl9pbnRlcnZhbCl7Y2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7dGhpcy5faW50ZXJ2YWw9bnVsbDt9CmlmKHRoaXMuX2NvbmZpZy5pbnRlcnZhbCYmIXRoaXMuX2lzUGF1c2VkKXt0aGlzLl9pbnRlcnZhbD1zZXRJbnRlcnZhbCgoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlP3RoaXMubmV4dFdoZW5WaXNpYmxlOnRoaXMubmV4dCkuYmluZCh0aGlzKSx0aGlzLl9jb25maWcuaW50ZXJ2YWwpO319O19wcm90by50bz1mdW5jdGlvbiB0byhpbmRleCl7dmFyIF90aGlzPXRoaXM7dGhpcy5fYWN0aXZlRWxlbWVudD10aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuQUNUSVZFX0lURU0pO3ZhciBhY3RpdmVJbmRleD10aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fYWN0aXZlRWxlbWVudCk7aWYoaW5kZXg+dGhpcy5faXRlbXMubGVuZ3RoLTF8fGluZGV4PDApe3JldHVybjt9CmlmKHRoaXMuX2lzU2xpZGluZyl7JCh0aGlzLl9lbGVtZW50KS5vbmUoRXZlbnQuU0xJRCxmdW5jdGlvbigpe3JldHVybiBfdGhpcy50byhpbmRleCk7fSk7cmV0dXJuO30KaWYoYWN0aXZlSW5kZXg9PT1pbmRleCl7dGhpcy5wYXVzZSgpO3RoaXMuY3ljbGUoKTtyZXR1cm47fQp2YXIgZGlyZWN0aW9uPWluZGV4PmFjdGl2ZUluZGV4P0RpcmVjdGlvbi5ORVhUOkRpcmVjdGlvbi5QUkVWO3RoaXMuX3NsaWRlKGRpcmVjdGlvbix0aGlzLl9pdGVtc1tpbmRleF0pO307X3Byb3RvLmRpc3Bvc2U9ZnVuY3Rpb24gZGlzcG9zZSgpeyQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2l0ZW1zPW51bGw7dGhpcy5fY29uZmlnPW51bGw7dGhpcy5fZWxlbWVudD1udWxsO3RoaXMuX2ludGVydmFsPW51bGw7dGhpcy5faXNQYXVzZWQ9bnVsbDt0aGlzLl9pc1NsaWRpbmc9bnVsbDt0aGlzLl9hY3RpdmVFbGVtZW50PW51bGw7dGhpcy5faW5kaWNhdG9yc0VsZW1lbnQ9bnVsbDt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LGNvbmZpZyk7VXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSxjb25maWcsRGVmYXVsdFR5cGUpO3JldHVybiBjb25maWc7fTtfcHJvdG8uX2hhbmRsZVN3aXBlPWZ1bmN0aW9uIF9oYW5kbGVTd2lwZSgpe3ZhciBhYnNEZWx0YXg9TWF0aC5hYnModGhpcy50b3VjaERlbHRhWCk7aWYoYWJzRGVsdGF4PD1TV0lQRV9USFJFU0hPTEQpe3JldHVybjt9CnZhciBkaXJlY3Rpb249YWJzRGVsdGF4L3RoaXMudG91Y2hEZWx0YVg7aWYoZGlyZWN0aW9uPjApe3RoaXMucHJldigpO30KaWYoZGlyZWN0aW9uPDApe3RoaXMubmV4dCgpO319O19wcm90by5fYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCl7dmFyIF90aGlzMj10aGlzO2lmKHRoaXMuX2NvbmZpZy5rZXlib2FyZCl7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5LRVlET1dOLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMyLl9rZXlkb3duKGV2ZW50KTt9KTt9CmlmKHRoaXMuX2NvbmZpZy5wYXVzZT09PSdob3ZlcicpeyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuTU9VU0VFTlRFUixmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzMi5wYXVzZShldmVudCk7fSkub24oRXZlbnQuTU9VU0VMRUFWRSxmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzMi5jeWNsZShldmVudCk7fSk7fQppZih0aGlzLl9jb25maWcudG91Y2gpe3RoaXMuX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKTt9fTtfcHJvdG8uX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24gX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKXt2YXIgX3RoaXMzPXRoaXM7aWYoIXRoaXMuX3RvdWNoU3VwcG9ydGVkKXtyZXR1cm47fQp2YXIgc3RhcnQ9ZnVuY3Rpb24gc3RhcnQoZXZlbnQpe2lmKF90aGlzMy5fcG9pbnRlckV2ZW50JiZQb2ludGVyVHlwZVtldmVudC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlLnRvVXBwZXJDYXNlKCldKXtfdGhpczMudG91Y2hTdGFydFg9ZXZlbnQub3JpZ2luYWxFdmVudC5jbGllbnRYO31lbHNlIGlmKCFfdGhpczMuX3BvaW50ZXJFdmVudCl7X3RoaXMzLnRvdWNoU3RhcnRYPWV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5jbGllbnRYO319O3ZhciBtb3ZlPWZ1bmN0aW9uIG1vdmUoZXZlbnQpe2lmKGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyYmZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aD4xKXtfdGhpczMudG91Y2hEZWx0YVg9MDt9ZWxzZXtfdGhpczMudG91Y2hEZWx0YVg9ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFgtX3RoaXMzLnRvdWNoU3RhcnRYO319O3ZhciBlbmQ9ZnVuY3Rpb24gZW5kKGV2ZW50KXtpZihfdGhpczMuX3BvaW50ZXJFdmVudCYmUG9pbnRlclR5cGVbZXZlbnQub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZS50b1VwcGVyQ2FzZSgpXSl7X3RoaXMzLnRvdWNoRGVsdGFYPWV2ZW50Lm9yaWdpbmFsRXZlbnQuY2xpZW50WC1fdGhpczMudG91Y2hTdGFydFg7fQpfdGhpczMuX2hhbmRsZVN3aXBlKCk7aWYoX3RoaXMzLl9jb25maWcucGF1c2U9PT0naG92ZXInKXtfdGhpczMucGF1c2UoKTtpZihfdGhpczMudG91Y2hUaW1lb3V0KXtjbGVhclRpbWVvdXQoX3RoaXMzLnRvdWNoVGltZW91dCk7fQpfdGhpczMudG91Y2hUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczMuY3ljbGUoZXZlbnQpO30sVE9VQ0hFVkVOVF9DT01QQVRfV0FJVCtfdGhpczMuX2NvbmZpZy5pbnRlcnZhbCk7fX07JCh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuSVRFTV9JTUcpKS5vbihFdmVudC5EUkFHX1NUQVJULGZ1bmN0aW9uKGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCk7fSk7aWYodGhpcy5fcG9pbnRlckV2ZW50KXskKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LlBPSU5URVJET1dOLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gc3RhcnQoZXZlbnQpO30pOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuUE9JTlRFUlVQLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gZW5kKGV2ZW50KTt9KTt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLlBPSU5URVJfRVZFTlQpO31lbHNleyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuVE9VQ0hTVEFSVCxmdW5jdGlvbihldmVudCl7cmV0dXJuIHN0YXJ0KGV2ZW50KTt9KTskKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LlRPVUNITU9WRSxmdW5jdGlvbihldmVudCl7cmV0dXJuIG1vdmUoZXZlbnQpO30pOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuVE9VQ0hFTkQsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBlbmQoZXZlbnQpO30pO319O19wcm90by5fa2V5ZG93bj1mdW5jdGlvbiBfa2V5ZG93bihldmVudCl7aWYoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpe3JldHVybjt9CnN3aXRjaChldmVudC53aGljaCl7Y2FzZSBBUlJPV19MRUZUX0tFWUNPREU6ZXZlbnQucHJldmVudERlZmF1bHQoKTt0aGlzLnByZXYoKTticmVhaztjYXNlIEFSUk9XX1JJR0hUX0tFWUNPREU6ZXZlbnQucHJldmVudERlZmF1bHQoKTt0aGlzLm5leHQoKTticmVhaztkZWZhdWx0On19O19wcm90by5fZ2V0SXRlbUluZGV4PWZ1bmN0aW9uIF9nZXRJdGVtSW5kZXgoZWxlbWVudCl7dGhpcy5faXRlbXM9ZWxlbWVudCYmZWxlbWVudC5wYXJlbnROb2RlP1tdLnNsaWNlLmNhbGwoZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuSVRFTSkpOltdO3JldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGVsZW1lbnQpO307X3Byb3RvLl9nZXRJdGVtQnlEaXJlY3Rpb249ZnVuY3Rpb24gX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sYWN0aXZlRWxlbWVudCl7dmFyIGlzTmV4dERpcmVjdGlvbj1kaXJlY3Rpb249PT1EaXJlY3Rpb24uTkVYVDt2YXIgaXNQcmV2RGlyZWN0aW9uPWRpcmVjdGlvbj09PURpcmVjdGlvbi5QUkVWO3ZhciBhY3RpdmVJbmRleD10aGlzLl9nZXRJdGVtSW5kZXgoYWN0aXZlRWxlbWVudCk7dmFyIGxhc3RJdGVtSW5kZXg9dGhpcy5faXRlbXMubGVuZ3RoLTE7dmFyIGlzR29pbmdUb1dyYXA9aXNQcmV2RGlyZWN0aW9uJiZhY3RpdmVJbmRleD09PTB8fGlzTmV4dERpcmVjdGlvbiYmYWN0aXZlSW5kZXg9PT1sYXN0SXRlbUluZGV4O2lmKGlzR29pbmdUb1dyYXAmJiF0aGlzLl9jb25maWcud3JhcCl7cmV0dXJuIGFjdGl2ZUVsZW1lbnQ7fQp2YXIgZGVsdGE9ZGlyZWN0aW9uPT09RGlyZWN0aW9uLlBSRVY/LTE6MTt2YXIgaXRlbUluZGV4PShhY3RpdmVJbmRleCtkZWx0YSkldGhpcy5faXRlbXMubGVuZ3RoO3JldHVybiBpdGVtSW5kZXg9PT0tMT90aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGgtMV06dGhpcy5faXRlbXNbaXRlbUluZGV4XTt9O19wcm90by5fdHJpZ2dlclNsaWRlRXZlbnQ9ZnVuY3Rpb24gX3RyaWdnZXJTbGlkZUV2ZW50KHJlbGF0ZWRUYXJnZXQsZXZlbnREaXJlY3Rpb25OYW1lKXt2YXIgdGFyZ2V0SW5kZXg9dGhpcy5fZ2V0SXRlbUluZGV4KHJlbGF0ZWRUYXJnZXQpO3ZhciBmcm9tSW5kZXg9dGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5BQ1RJVkVfSVRFTSkpO3ZhciBzbGlkZUV2ZW50PSQuRXZlbnQoRXZlbnQuU0xJREUse3JlbGF0ZWRUYXJnZXQ6cmVsYXRlZFRhcmdldCxkaXJlY3Rpb246ZXZlbnREaXJlY3Rpb25OYW1lLGZyb206ZnJvbUluZGV4LHRvOnRhcmdldEluZGV4fSk7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRlRXZlbnQpO3JldHVybiBzbGlkZUV2ZW50O307X3Byb3RvLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50PWZ1bmN0aW9uIF9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KGVsZW1lbnQpe2lmKHRoaXMuX2luZGljYXRvcnNFbGVtZW50KXt2YXIgaW5kaWNhdG9ycz1bXS5zbGljZS5jYWxsKHRoaXMuX2luZGljYXRvcnNFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuQUNUSVZFKSk7JChpbmRpY2F0b3JzKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTt2YXIgbmV4dEluZGljYXRvcj10aGlzLl9pbmRpY2F0b3JzRWxlbWVudC5jaGlsZHJlblt0aGlzLl9nZXRJdGVtSW5kZXgoZWxlbWVudCldO2lmKG5leHRJbmRpY2F0b3IpeyQobmV4dEluZGljYXRvcikuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fX19O19wcm90by5fc2xpZGU9ZnVuY3Rpb24gX3NsaWRlKGRpcmVjdGlvbixlbGVtZW50KXt2YXIgX3RoaXM0PXRoaXM7dmFyIGFjdGl2ZUVsZW1lbnQ9dGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkFDVElWRV9JVEVNKTt2YXIgYWN0aXZlRWxlbWVudEluZGV4PXRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTt2YXIgbmV4dEVsZW1lbnQ9ZWxlbWVudHx8YWN0aXZlRWxlbWVudCYmdGhpcy5fZ2V0SXRlbUJ5RGlyZWN0aW9uKGRpcmVjdGlvbixhY3RpdmVFbGVtZW50KTt2YXIgbmV4dEVsZW1lbnRJbmRleD10aGlzLl9nZXRJdGVtSW5kZXgobmV4dEVsZW1lbnQpO3ZhciBpc0N5Y2xpbmc9Qm9vbGVhbih0aGlzLl9pbnRlcnZhbCk7dmFyIGRpcmVjdGlvbmFsQ2xhc3NOYW1lO3ZhciBvcmRlckNsYXNzTmFtZTt2YXIgZXZlbnREaXJlY3Rpb25OYW1lO2lmKGRpcmVjdGlvbj09PURpcmVjdGlvbi5ORVhUKXtkaXJlY3Rpb25hbENsYXNzTmFtZT1DbGFzc05hbWUuTEVGVDtvcmRlckNsYXNzTmFtZT1DbGFzc05hbWUuTkVYVDtldmVudERpcmVjdGlvbk5hbWU9RGlyZWN0aW9uLkxFRlQ7fWVsc2V7ZGlyZWN0aW9uYWxDbGFzc05hbWU9Q2xhc3NOYW1lLlJJR0hUO29yZGVyQ2xhc3NOYW1lPUNsYXNzTmFtZS5QUkVWO2V2ZW50RGlyZWN0aW9uTmFtZT1EaXJlY3Rpb24uUklHSFQ7fQppZihuZXh0RWxlbWVudCYmJChuZXh0RWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpe3RoaXMuX2lzU2xpZGluZz1mYWxzZTtyZXR1cm47fQp2YXIgc2xpZGVFdmVudD10aGlzLl90cmlnZ2VyU2xpZGVFdmVudChuZXh0RWxlbWVudCxldmVudERpcmVjdGlvbk5hbWUpO2lmKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CmlmKCFhY3RpdmVFbGVtZW50fHwhbmV4dEVsZW1lbnQpe3JldHVybjt9CnRoaXMuX2lzU2xpZGluZz10cnVlO2lmKGlzQ3ljbGluZyl7dGhpcy5wYXVzZSgpO30KdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudCk7dmFyIHNsaWRFdmVudD0kLkV2ZW50KEV2ZW50LlNMSUQse3JlbGF0ZWRUYXJnZXQ6bmV4dEVsZW1lbnQsZGlyZWN0aW9uOmV2ZW50RGlyZWN0aW9uTmFtZSxmcm9tOmFjdGl2ZUVsZW1lbnRJbmRleCx0bzpuZXh0RWxlbWVudEluZGV4fSk7aWYoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0xJREUpKXskKG5leHRFbGVtZW50KS5hZGRDbGFzcyhvcmRlckNsYXNzTmFtZSk7VXRpbC5yZWZsb3cobmV4dEVsZW1lbnQpOyQoYWN0aXZlRWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpOyQobmV4dEVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTt2YXIgbmV4dEVsZW1lbnRJbnRlcnZhbD1wYXJzZUludChuZXh0RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW50ZXJ2YWwnKSwxMCk7aWYobmV4dEVsZW1lbnRJbnRlcnZhbCl7dGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbD10aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsfHx0aGlzLl9jb25maWcuaW50ZXJ2YWw7dGhpcy5fY29uZmlnLmludGVydmFsPW5leHRFbGVtZW50SW50ZXJ2YWw7fWVsc2V7dGhpcy5fY29uZmlnLmludGVydmFsPXRoaXMuX2NvbmZpZy5kZWZhdWx0SW50ZXJ2YWx8fHRoaXMuX2NvbmZpZy5pbnRlcnZhbDt9CnZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChhY3RpdmVFbGVtZW50KTskKGFjdGl2ZUVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKCl7JChuZXh0RWxlbWVudCkucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUrIiAiK29yZGVyQ2xhc3NOYW1lKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTskKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUrIiAiK29yZGVyQ2xhc3NOYW1lKyIgIitkaXJlY3Rpb25hbENsYXNzTmFtZSk7X3RoaXM0Ll9pc1NsaWRpbmc9ZmFsc2U7c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiAkKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihzbGlkRXZlbnQpO30sMCk7fSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTt9ZWxzZXskKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpOyQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO3RoaXMuX2lzU2xpZGluZz1mYWxzZTskKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTt9CmlmKGlzQ3ljbGluZyl7dGhpcy5jeWNsZSgpO319O0Nhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO3ZhciBfY29uZmlnPV9vYmplY3RTcHJlYWQoe30sRGVmYXVsdCwkKHRoaXMpLmRhdGEoKSk7aWYodHlwZW9mIGNvbmZpZz09PSdvYmplY3QnKXtfY29uZmlnPV9vYmplY3RTcHJlYWQoe30sX2NvbmZpZyxjb25maWcpO30KdmFyIGFjdGlvbj10eXBlb2YgY29uZmlnPT09J3N0cmluZyc/Y29uZmlnOl9jb25maWcuc2xpZGU7aWYoIWRhdGEpe2RhdGE9bmV3IENhcm91c2VsKHRoaXMsX2NvbmZpZyk7JCh0aGlzKS5kYXRhKERBVEFfS0VZLGRhdGEpO30KaWYodHlwZW9mIGNvbmZpZz09PSdudW1iZXInKXtkYXRhLnRvKGNvbmZpZyk7fWVsc2UgaWYodHlwZW9mIGFjdGlvbj09PSdzdHJpbmcnKXtpZih0eXBlb2YgZGF0YVthY3Rpb25dPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIrYWN0aW9uKyJcIiIpO30KZGF0YVthY3Rpb25dKCk7fWVsc2UgaWYoX2NvbmZpZy5pbnRlcnZhbCYmX2NvbmZpZy5yaWRlKXtkYXRhLnBhdXNlKCk7ZGF0YS5jeWNsZSgpO319KTt9O0Nhcm91c2VsLl9kYXRhQXBpQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uIF9kYXRhQXBpQ2xpY2tIYW5kbGVyKGV2ZW50KXt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO2lmKCFzZWxlY3Rvcil7cmV0dXJuO30KdmFyIHRhcmdldD0kKHNlbGVjdG9yKVswXTtpZighdGFyZ2V0fHwhJCh0YXJnZXQpLmhhc0NsYXNzKENsYXNzTmFtZS5DQVJPVVNFTCkpe3JldHVybjt9CnZhciBjb25maWc9X29iamVjdFNwcmVhZCh7fSwkKHRhcmdldCkuZGF0YSgpLCQodGhpcykuZGF0YSgpKTt2YXIgc2xpZGVJbmRleD10aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGlkZS10bycpO2lmKHNsaWRlSW5kZXgpe2NvbmZpZy5pbnRlcnZhbD1mYWxzZTt9CkNhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksY29uZmlnKTtpZihzbGlkZUluZGV4KXskKHRhcmdldCkuZGF0YShEQVRBX0tFWSkudG8oc2xpZGVJbmRleCk7fQpldmVudC5wcmV2ZW50RGVmYXVsdCgpO307X2NyZWF0ZUNsYXNzKENhcm91c2VsLG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fSx7a2V5OiJEZWZhdWx0IixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHQ7fX1dKTtyZXR1cm4gQ2Fyb3VzZWw7fSgpOyQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLFNlbGVjdG9yLkRBVEFfU0xJREUsQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpOyQod2luZG93KS5vbihFdmVudC5MT0FEX0RBVEFfQVBJLGZ1bmN0aW9uKCl7dmFyIGNhcm91c2Vscz1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuREFUQV9SSURFKSk7Zm9yKHZhciBpPTAsbGVuPWNhcm91c2Vscy5sZW5ndGg7aTxsZW47aSsrKXt2YXIgJGNhcm91c2VsPSQoY2Fyb3VzZWxzW2ldKTtDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJGNhcm91c2VsLCRjYXJvdXNlbC5kYXRhKCkpO319KTskLmZuW05BTUVdPUNhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7JC5mbltOQU1FXS5Db25zdHJ1Y3Rvcj1DYXJvdXNlbDskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBDYXJvdXNlbDt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2Jvb3RzdHJhcC9qcy9jb2xsYXBzZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkNvbGxhcHNlPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0nY29sbGFwc2UnO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5jb2xsYXBzZSc7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIERBVEFfQVBJX0tFWT0nLmRhdGEtYXBpJzt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIERlZmF1bHQ9e3RvZ2dsZTp0cnVlLHBhcmVudDonJ307dmFyIERlZmF1bHRUeXBlPXt0b2dnbGU6J2Jvb2xlYW4nLHBhcmVudDonKHN0cmluZ3xlbGVtZW50KSd9O3ZhciBFdmVudD17U0hPVzoic2hvdyIrRVZFTlRfS0VZLFNIT1dOOiJzaG93biIrRVZFTlRfS0VZLEhJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLENMSUNLX0RBVEFfQVBJOiJjbGljayIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWX07dmFyIENsYXNzTmFtZT17U0hPVzonc2hvdycsQ09MTEFQU0U6J2NvbGxhcHNlJyxDT0xMQVBTSU5HOidjb2xsYXBzaW5nJyxDT0xMQVBTRUQ6J2NvbGxhcHNlZCd9O3ZhciBEaW1lbnNpb249e1dJRFRIOid3aWR0aCcsSEVJR0hUOidoZWlnaHQnfTt2YXIgU2VsZWN0b3I9e0FDVElWRVM6Jy5zaG93LCAuY29sbGFwc2luZycsREFUQV9UT0dHTEU6J1tkYXRhLXRvZ2dsZT0iY29sbGFwc2UiXSd9O3ZhciBDb2xsYXBzZT1mdW5jdGlvbigpe2Z1bmN0aW9uIENvbGxhcHNlKGVsZW1lbnQsY29uZmlnKXt0aGlzLl9pc1RyYW5zaXRpb25pbmc9ZmFsc2U7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoY29uZmlnKTt0aGlzLl90cmlnZ2VyQXJyYXk9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIyIrZWxlbWVudC5pZCsiXCJdLCIrKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMiK2VsZW1lbnQuaWQrIlwiXSIpKSk7dmFyIHRvZ2dsZUxpc3Q9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLkRBVEFfVE9HR0xFKSk7Zm9yKHZhciBpPTAsbGVuPXRvZ2dsZUxpc3QubGVuZ3RoO2k8bGVuO2krKyl7dmFyIGVsZW09dG9nZ2xlTGlzdFtpXTt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW0pO3ZhciBmaWx0ZXJFbGVtZW50PVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmZpbHRlcihmdW5jdGlvbihmb3VuZEVsZW0pe3JldHVybiBmb3VuZEVsZW09PT1lbGVtZW50O30pO2lmKHNlbGVjdG9yIT09bnVsbCYmZmlsdGVyRWxlbWVudC5sZW5ndGg+MCl7dGhpcy5fc2VsZWN0b3I9c2VsZWN0b3I7dGhpcy5fdHJpZ2dlckFycmF5LnB1c2goZWxlbSk7fX0KdGhpcy5fcGFyZW50PXRoaXMuX2NvbmZpZy5wYXJlbnQ/dGhpcy5fZ2V0UGFyZW50KCk6bnVsbDtpZighdGhpcy5fY29uZmlnLnBhcmVudCl7dGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsdGhpcy5fdHJpZ2dlckFycmF5KTt9CmlmKHRoaXMuX2NvbmZpZy50b2dnbGUpe3RoaXMudG9nZ2xlKCk7fX0KdmFyIF9wcm90bz1Db2xsYXBzZS5wcm90b3R5cGU7X3Byb3RvLnRvZ2dsZT1mdW5jdGlvbiB0b2dnbGUoKXtpZigkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSl7dGhpcy5oaWRlKCk7fWVsc2V7dGhpcy5zaG93KCk7fX07X3Byb3RvLnNob3c9ZnVuY3Rpb24gc2hvdygpe3ZhciBfdGhpcz10aGlzO2lmKHRoaXMuX2lzVHJhbnNpdGlvbmluZ3x8JCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3JldHVybjt9CnZhciBhY3RpdmVzO3ZhciBhY3RpdmVzRGF0YTtpZih0aGlzLl9wYXJlbnQpe2FjdGl2ZXM9W10uc2xpY2UuY2FsbCh0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5BQ1RJVkVTKSkuZmlsdGVyKGZ1bmN0aW9uKGVsZW0pe2lmKHR5cGVvZiBfdGhpcy5fY29uZmlnLnBhcmVudD09PSdzdHJpbmcnKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50Jyk9PT1fdGhpcy5fY29uZmlnLnBhcmVudDt9CnJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuQ09MTEFQU0UpO30pO2lmKGFjdGl2ZXMubGVuZ3RoPT09MCl7YWN0aXZlcz1udWxsO319CmlmKGFjdGl2ZXMpe2FjdGl2ZXNEYXRhPSQoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKS5kYXRhKERBVEFfS0VZKTtpZihhY3RpdmVzRGF0YSYmYWN0aXZlc0RhdGEuX2lzVHJhbnNpdGlvbmluZyl7cmV0dXJuO319CnZhciBzdGFydEV2ZW50PSQuRXZlbnQoRXZlbnQuU0hPVyk7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO2lmKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CmlmKGFjdGl2ZXMpe0NvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKGFjdGl2ZXMpLm5vdCh0aGlzLl9zZWxlY3RvciksJ2hpZGUnKTtpZighYWN0aXZlc0RhdGEpeyQoYWN0aXZlcykuZGF0YShEQVRBX0tFWSxudWxsKTt9fQp2YXIgZGltZW5zaW9uPXRoaXMuX2dldERpbWVuc2lvbigpOyQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORyk7dGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPTA7aWYodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCl7JCh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLHRydWUpO30KdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpeyQoX3RoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKTtfdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPScnO190aGlzLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpOyQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPV04pO307dmFyIGNhcGl0YWxpemVkRGltZW5zaW9uPWRpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKTt2YXIgc2Nyb2xsU2l6ZT0ic2Nyb2xsIitjYXBpdGFsaXplZERpbWVuc2lvbjt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7JCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCxjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTt0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl09dGhpcy5fZWxlbWVudFtzY3JvbGxTaXplXSsicHgiO307X3Byb3RvLmhpZGU9ZnVuY3Rpb24gaGlkZSgpe3ZhciBfdGhpczI9dGhpcztpZih0aGlzLl9pc1RyYW5zaXRpb25pbmd8fCEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSl7cmV0dXJuO30KdmFyIHN0YXJ0RXZlbnQ9JC5FdmVudChFdmVudC5ISURFKTskKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7aWYoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KdmFyIGRpbWVuc2lvbj10aGlzLl9nZXREaW1lbnNpb24oKTt0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl09dGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtkaW1lbnNpb25dKyJweCI7VXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7JCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7dmFyIHRyaWdnZXJBcnJheUxlbmd0aD10aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoO2lmKHRyaWdnZXJBcnJheUxlbmd0aD4wKXtmb3IodmFyIGk9MDtpPHRyaWdnZXJBcnJheUxlbmd0aDtpKyspe3ZhciB0cmlnZ2VyPXRoaXMuX3RyaWdnZXJBcnJheVtpXTt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRyaWdnZXIpO2lmKHNlbGVjdG9yIT09bnVsbCl7dmFyICRlbGVtPSQoW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO2lmKCEkZWxlbS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpeyQodHJpZ2dlcikuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsZmFsc2UpO319fX0KdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe190aGlzMi5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTskKF90aGlzMi5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkudHJpZ2dlcihFdmVudC5ISURERU4pO307dGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPScnO3ZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO307X3Byb3RvLnNldFRyYW5zaXRpb25pbmc9ZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpe3RoaXMuX2lzVHJhbnNpdGlvbmluZz1pc1RyYW5zaXRpb25pbmc7fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2NvbmZpZz1udWxsO3RoaXMuX3BhcmVudD1udWxsO3RoaXMuX2VsZW1lbnQ9bnVsbDt0aGlzLl90cmlnZ2VyQXJyYXk9bnVsbDt0aGlzLl9pc1RyYW5zaXRpb25pbmc9bnVsbDt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LGNvbmZpZyk7Y29uZmlnLnRvZ2dsZT1Cb29sZWFuKGNvbmZpZy50b2dnbGUpO1V0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsY29uZmlnLERlZmF1bHRUeXBlKTtyZXR1cm4gY29uZmlnO307X3Byb3RvLl9nZXREaW1lbnNpb249ZnVuY3Rpb24gX2dldERpbWVuc2lvbigpe3ZhciBoYXNXaWR0aD0kKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7cmV0dXJuIGhhc1dpZHRoP0RpbWVuc2lvbi5XSURUSDpEaW1lbnNpb24uSEVJR0hUO307X3Byb3RvLl9nZXRQYXJlbnQ9ZnVuY3Rpb24gX2dldFBhcmVudCgpe3ZhciBfdGhpczM9dGhpczt2YXIgcGFyZW50O2lmKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5wYXJlbnQpKXtwYXJlbnQ9dGhpcy5fY29uZmlnLnBhcmVudDtpZih0eXBlb2YgdGhpcy5fY29uZmlnLnBhcmVudC5qcXVlcnkhPT0ndW5kZWZpbmVkJyl7cGFyZW50PXRoaXMuX2NvbmZpZy5wYXJlbnRbMF07fX1lbHNle3BhcmVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wYXJlbnQpO30KdmFyIHNlbGVjdG9yPSJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIiIrdGhpcy5fY29uZmlnLnBhcmVudCsiXCJdIjt2YXIgY2hpbGRyZW49W10uc2xpY2UuY2FsbChwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOyQoY2hpbGRyZW4pLmVhY2goZnVuY3Rpb24oaSxlbGVtZW50KXtfdGhpczMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksW2VsZW1lbnRdKTt9KTtyZXR1cm4gcGFyZW50O307X3Byb3RvLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LHRyaWdnZXJBcnJheSl7dmFyIGlzT3Blbj0kKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKTtpZih0cmlnZ2VyQXJyYXkubGVuZ3RoKXskKHRyaWdnZXJBcnJheSkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCwhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJyxpc09wZW4pO319O0NvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudD1mdW5jdGlvbiBfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCl7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtyZXR1cm4gc2VsZWN0b3I/ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik6bnVsbDt9O0NvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgJHRoaXM9JCh0aGlzKTt2YXIgZGF0YT0kdGhpcy5kYXRhKERBVEFfS0VZKTt2YXIgX2NvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LERlZmF1bHQsJHRoaXMuZGF0YSgpLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYoIWRhdGEmJl9jb25maWcudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGNvbmZpZykpe19jb25maWcudG9nZ2xlPWZhbHNlO30KaWYoIWRhdGEpe2RhdGE9bmV3IENvbGxhcHNlKHRoaXMsX2NvbmZpZyk7JHRoaXMuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhDb2xsYXBzZSxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319XSk7cmV0dXJuIENvbGxhcHNlO30oKTskKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSxTZWxlY3Rvci5EQVRBX1RPR0dMRSxmdW5jdGlvbihldmVudCl7aWYoZXZlbnQuY3VycmVudFRhcmdldC50YWdOYW1lPT09J0EnKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KdmFyICR0cmlnZ2VyPSQodGhpcyk7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTt2YXIgc2VsZWN0b3JzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOyQoc2VsZWN0b3JzKS5lYWNoKGZ1bmN0aW9uKCl7dmFyICR0YXJnZXQ9JCh0aGlzKTt2YXIgZGF0YT0kdGFyZ2V0LmRhdGEoREFUQV9LRVkpO3ZhciBjb25maWc9ZGF0YT8ndG9nZ2xlJzokdHJpZ2dlci5kYXRhKCk7Q29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsY29uZmlnKTt9KTt9KTskLmZuW05BTUVdPUNvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7JC5mbltOQU1FXS5Db25zdHJ1Y3Rvcj1Db2xsYXBzZTskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBDb2xsYXBzZTt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2Jvb3RzdHJhcC9qcy9kcm9wZG93bi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCdwb3BwZXIuanMnKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywncG9wcGVyLmpzJywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkRyb3Bkb3duPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuUG9wcGVyLGdsb2JhbC5VdGlsKSk7fSh0aGlzLGZ1bmN0aW9uKCQsUG9wcGVyLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtQb3BwZXI9UG9wcGVyJiZQb3BwZXIuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9Qb3BwZXJbJ2RlZmF1bHQnXTpQb3BwZXI7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fQpvd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fQpyZXR1cm4gdGFyZ2V0O30KdmFyIE5BTUU9J2Ryb3Bkb3duJzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMuZHJvcGRvd24nO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaSc7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBFU0NBUEVfS0VZQ09ERT0yNzt2YXIgU1BBQ0VfS0VZQ09ERT0zMjt2YXIgVEFCX0tFWUNPREU9OTt2YXIgQVJST1dfVVBfS0VZQ09ERT0zODt2YXIgQVJST1dfRE9XTl9LRVlDT0RFPTQwO3ZhciBSSUdIVF9NT1VTRV9CVVRUT05fV0hJQ0g9Mzt2YXIgUkVHRVhQX0tFWURPV049bmV3IFJlZ0V4cChBUlJPV19VUF9LRVlDT0RFKyJ8IitBUlJPV19ET1dOX0tFWUNPREUrInwiK0VTQ0FQRV9LRVlDT0RFKTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxDTElDSzoiY2xpY2siK0VWRU5UX0tFWSxDTElDS19EQVRBX0FQSToiY2xpY2siK0VWRU5UX0tFWStEQVRBX0FQSV9LRVksS0VZRE9XTl9EQVRBX0FQSToia2V5ZG93biIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWSxLRVlVUF9EQVRBX0FQSToia2V5dXAiK0VWRU5UX0tFWStEQVRBX0FQSV9LRVl9O3ZhciBDbGFzc05hbWU9e0RJU0FCTEVEOidkaXNhYmxlZCcsU0hPVzonc2hvdycsRFJPUFVQOidkcm9wdXAnLERST1BSSUdIVDonZHJvcHJpZ2h0JyxEUk9QTEVGVDonZHJvcGxlZnQnLE1FTlVSSUdIVDonZHJvcGRvd24tbWVudS1yaWdodCcsTUVOVUxFRlQ6J2Ryb3Bkb3duLW1lbnUtbGVmdCcsUE9TSVRJT05fU1RBVElDOidwb3NpdGlvbi1zdGF0aWMnfTt2YXIgU2VsZWN0b3I9e0RBVEFfVE9HR0xFOidbZGF0YS10b2dnbGU9ImRyb3Bkb3duIl0nLEZPUk1fQ0hJTEQ6Jy5kcm9wZG93biBmb3JtJyxNRU5VOicuZHJvcGRvd24tbWVudScsTkFWQkFSX05BVjonLm5hdmJhci1uYXYnLFZJU0lCTEVfSVRFTVM6Jy5kcm9wZG93bi1tZW51IC5kcm9wZG93bi1pdGVtOm5vdCguZGlzYWJsZWQpOm5vdCg6ZGlzYWJsZWQpJ307dmFyIEF0dGFjaG1lbnRNYXA9e1RPUDondG9wLXN0YXJ0JyxUT1BFTkQ6J3RvcC1lbmQnLEJPVFRPTTonYm90dG9tLXN0YXJ0JyxCT1RUT01FTkQ6J2JvdHRvbS1lbmQnLFJJR0hUOidyaWdodC1zdGFydCcsUklHSFRFTkQ6J3JpZ2h0LWVuZCcsTEVGVDonbGVmdC1zdGFydCcsTEVGVEVORDonbGVmdC1lbmQnfTt2YXIgRGVmYXVsdD17b2Zmc2V0OjAsZmxpcDp0cnVlLGJvdW5kYXJ5OidzY3JvbGxQYXJlbnQnLHJlZmVyZW5jZTondG9nZ2xlJyxkaXNwbGF5OidkeW5hbWljJ307dmFyIERlZmF1bHRUeXBlPXtvZmZzZXQ6JyhudW1iZXJ8c3RyaW5nfGZ1bmN0aW9uKScsZmxpcDonYm9vbGVhbicsYm91bmRhcnk6JyhzdHJpbmd8ZWxlbWVudCknLHJlZmVyZW5jZTonKHN0cmluZ3xlbGVtZW50KScsZGlzcGxheTonc3RyaW5nJ307dmFyIERyb3Bkb3duPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRHJvcGRvd24oZWxlbWVudCxjb25maWcpe3RoaXMuX2VsZW1lbnQ9ZWxlbWVudDt0aGlzLl9wb3BwZXI9bnVsbDt0aGlzLl9jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7dGhpcy5fbWVudT10aGlzLl9nZXRNZW51RWxlbWVudCgpO3RoaXMuX2luTmF2YmFyPXRoaXMuX2RldGVjdE5hdmJhcigpO3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7fQp2YXIgX3Byb3RvPURyb3Bkb3duLnByb3RvdHlwZTtfcHJvdG8udG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZSgpe2lmKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWR8fCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSl7cmV0dXJuO30KdmFyIHBhcmVudD1Ecm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7dmFyIGlzQWN0aXZlPSQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO0Ryb3Bkb3duLl9jbGVhck1lbnVzKCk7aWYoaXNBY3RpdmUpe3JldHVybjt9CnZhciByZWxhdGVkVGFyZ2V0PXtyZWxhdGVkVGFyZ2V0OnRoaXMuX2VsZW1lbnR9O3ZhciBzaG93RXZlbnQ9JC5FdmVudChFdmVudC5TSE9XLHJlbGF0ZWRUYXJnZXQpOyQocGFyZW50KS50cmlnZ2VyKHNob3dFdmVudCk7aWYoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQppZighdGhpcy5faW5OYXZiYXIpe2lmKHR5cGVvZiBQb3BwZXI9PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignQm9vdHN0cmFwXCdzIGRyb3Bkb3ducyByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnLyknKTt9CnZhciByZWZlcmVuY2VFbGVtZW50PXRoaXMuX2VsZW1lbnQ7aWYodGhpcy5fY29uZmlnLnJlZmVyZW5jZT09PSdwYXJlbnQnKXtyZWZlcmVuY2VFbGVtZW50PXBhcmVudDt9ZWxzZSBpZihVdGlsLmlzRWxlbWVudCh0aGlzLl9jb25maWcucmVmZXJlbmNlKSl7cmVmZXJlbmNlRWxlbWVudD10aGlzLl9jb25maWcucmVmZXJlbmNlO2lmKHR5cGVvZiB0aGlzLl9jb25maWcucmVmZXJlbmNlLmpxdWVyeSE9PSd1bmRlZmluZWQnKXtyZWZlcmVuY2VFbGVtZW50PXRoaXMuX2NvbmZpZy5yZWZlcmVuY2VbMF07fX0KaWYodGhpcy5fY29uZmlnLmJvdW5kYXJ5IT09J3Njcm9sbFBhcmVudCcpeyQocGFyZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuUE9TSVRJT05fU1RBVElDKTt9CnRoaXMuX3BvcHBlcj1uZXcgUG9wcGVyKHJlZmVyZW5jZUVsZW1lbnQsdGhpcy5fbWVudSx0aGlzLl9nZXRQb3BwZXJDb25maWcoKSk7fQppZignb250b3VjaHN0YXJ0J2luIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmJChwYXJlbnQpLmNsb3Nlc3QoU2VsZWN0b3IuTkFWQkFSX05BVikubGVuZ3RoPT09MCl7JChkb2N1bWVudC5ib2R5KS5jaGlsZHJlbigpLm9uKCdtb3VzZW92ZXInLG51bGwsJC5ub29wKTt9CnRoaXMuX2VsZW1lbnQuZm9jdXMoKTt0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsdHJ1ZSk7JCh0aGlzLl9tZW51KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVyk7JChwYXJlbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuU0hPV04scmVsYXRlZFRhcmdldCkpO307X3Byb3RvLnNob3c9ZnVuY3Rpb24gc2hvdygpe2lmKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWR8fCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKXx8JCh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3JldHVybjt9CnZhciByZWxhdGVkVGFyZ2V0PXtyZWxhdGVkVGFyZ2V0OnRoaXMuX2VsZW1lbnR9O3ZhciBzaG93RXZlbnQ9JC5FdmVudChFdmVudC5TSE9XLHJlbGF0ZWRUYXJnZXQpO3ZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOyQocGFyZW50KS50cmlnZ2VyKHNob3dFdmVudCk7aWYoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQokKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKTskKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpLnRyaWdnZXIoJC5FdmVudChFdmVudC5TSE9XTixyZWxhdGVkVGFyZ2V0KSk7fTtfcHJvdG8uaGlkZT1mdW5jdGlvbiBoaWRlKCl7aWYodGhpcy5fZWxlbWVudC5kaXNhYmxlZHx8JCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRElTQUJMRUQpfHwhJCh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3JldHVybjt9CnZhciByZWxhdGVkVGFyZ2V0PXtyZWxhdGVkVGFyZ2V0OnRoaXMuX2VsZW1lbnR9O3ZhciBoaWRlRXZlbnQ9JC5FdmVudChFdmVudC5ISURFLHJlbGF0ZWRUYXJnZXQpO3ZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOyQocGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7aWYoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQokKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKTskKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpLnRyaWdnZXIoJC5FdmVudChFdmVudC5ISURERU4scmVsYXRlZFRhcmdldCkpO307X3Byb3RvLmRpc3Bvc2U9ZnVuY3Rpb24gZGlzcG9zZSgpeyQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LERBVEFfS0VZKTskKHRoaXMuX2VsZW1lbnQpLm9mZihFVkVOVF9LRVkpO3RoaXMuX2VsZW1lbnQ9bnVsbDt0aGlzLl9tZW51PW51bGw7aWYodGhpcy5fcG9wcGVyIT09bnVsbCl7dGhpcy5fcG9wcGVyLmRlc3Ryb3koKTt0aGlzLl9wb3BwZXI9bnVsbDt9fTtfcHJvdG8udXBkYXRlPWZ1bmN0aW9uIHVwZGF0ZSgpe3RoaXMuX2luTmF2YmFyPXRoaXMuX2RldGVjdE5hdmJhcigpO2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5zY2hlZHVsZVVwZGF0ZSgpO319O19wcm90by5fYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCl7dmFyIF90aGlzPXRoaXM7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDSyxmdW5jdGlvbihldmVudCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKTtfdGhpcy50b2dnbGUoKTt9KTt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsJCh0aGlzLl9lbGVtZW50KS5kYXRhKCksY29uZmlnKTtVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLGNvbmZpZyx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKTtyZXR1cm4gY29uZmlnO307X3Byb3RvLl9nZXRNZW51RWxlbWVudD1mdW5jdGlvbiBfZ2V0TWVudUVsZW1lbnQoKXtpZighdGhpcy5fbWVudSl7dmFyIHBhcmVudD1Ecm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7aWYocGFyZW50KXt0aGlzLl9tZW51PXBhcmVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLk1FTlUpO319CnJldHVybiB0aGlzLl9tZW51O307X3Byb3RvLl9nZXRQbGFjZW1lbnQ9ZnVuY3Rpb24gX2dldFBsYWNlbWVudCgpe3ZhciAkcGFyZW50RHJvcGRvd249JCh0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUpO3ZhciBwbGFjZW1lbnQ9QXR0YWNobWVudE1hcC5CT1RUT007aWYoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QVVApKXtwbGFjZW1lbnQ9QXR0YWNobWVudE1hcC5UT1A7aWYoJCh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuTUVOVVJJR0hUKSl7cGxhY2VtZW50PUF0dGFjaG1lbnRNYXAuVE9QRU5EO319ZWxzZSBpZigkcGFyZW50RHJvcGRvd24uaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BSSUdIVCkpe3BsYWNlbWVudD1BdHRhY2htZW50TWFwLlJJR0hUO31lbHNlIGlmKCRwYXJlbnREcm9wZG93bi5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUExFRlQpKXtwbGFjZW1lbnQ9QXR0YWNobWVudE1hcC5MRUZUO31lbHNlIGlmKCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk1FTlVSSUdIVCkpe3BsYWNlbWVudD1BdHRhY2htZW50TWFwLkJPVFRPTUVORDt9CnJldHVybiBwbGFjZW1lbnQ7fTtfcHJvdG8uX2RldGVjdE5hdmJhcj1mdW5jdGlvbiBfZGV0ZWN0TmF2YmFyKCl7cmV0dXJuICQodGhpcy5fZWxlbWVudCkuY2xvc2VzdCgnLm5hdmJhcicpLmxlbmd0aD4wO307X3Byb3RvLl9nZXRPZmZzZXQ9ZnVuY3Rpb24gX2dldE9mZnNldCgpe3ZhciBfdGhpczI9dGhpczt2YXIgb2Zmc2V0PXt9O2lmKHR5cGVvZiB0aGlzLl9jb25maWcub2Zmc2V0PT09J2Z1bmN0aW9uJyl7b2Zmc2V0LmZuPWZ1bmN0aW9uKGRhdGEpe2RhdGEub2Zmc2V0cz1fb2JqZWN0U3ByZWFkKHt9LGRhdGEub2Zmc2V0cyxfdGhpczIuX2NvbmZpZy5vZmZzZXQoZGF0YS5vZmZzZXRzLF90aGlzMi5fZWxlbWVudCl8fHt9KTtyZXR1cm4gZGF0YTt9O31lbHNle29mZnNldC5vZmZzZXQ9dGhpcy5fY29uZmlnLm9mZnNldDt9CnJldHVybiBvZmZzZXQ7fTtfcHJvdG8uX2dldFBvcHBlckNvbmZpZz1mdW5jdGlvbiBfZ2V0UG9wcGVyQ29uZmlnKCl7dmFyIHBvcHBlckNvbmZpZz17cGxhY2VtZW50OnRoaXMuX2dldFBsYWNlbWVudCgpLG1vZGlmaWVyczp7b2Zmc2V0OnRoaXMuX2dldE9mZnNldCgpLGZsaXA6e2VuYWJsZWQ6dGhpcy5fY29uZmlnLmZsaXB9LHByZXZlbnRPdmVyZmxvdzp7Ym91bmRhcmllc0VsZW1lbnQ6dGhpcy5fY29uZmlnLmJvdW5kYXJ5fX19O2lmKHRoaXMuX2NvbmZpZy5kaXNwbGF5PT09J3N0YXRpYycpe3BvcHBlckNvbmZpZy5tb2RpZmllcnMuYXBwbHlTdHlsZT17ZW5hYmxlZDpmYWxzZX07fQpyZXR1cm4gcG9wcGVyQ29uZmlnO307RHJvcGRvd24uX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9dHlwZW9mIGNvbmZpZz09PSdvYmplY3QnP2NvbmZpZzpudWxsO2lmKCFkYXRhKXtkYXRhPW5ldyBEcm9wZG93bih0aGlzLF9jb25maWcpOyQodGhpcykuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O0Ryb3Bkb3duLl9jbGVhck1lbnVzPWZ1bmN0aW9uIF9jbGVhck1lbnVzKGV2ZW50KXtpZihldmVudCYmKGV2ZW50LndoaWNoPT09UklHSFRfTU9VU0VfQlVUVE9OX1dISUNIfHxldmVudC50eXBlPT09J2tleXVwJyYmZXZlbnQud2hpY2ghPT1UQUJfS0VZQ09ERSkpe3JldHVybjt9CnZhciB0b2dnbGVzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5EQVRBX1RPR0dMRSkpO2Zvcih2YXIgaT0wLGxlbj10b2dnbGVzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRvZ2dsZXNbaV0pO3ZhciBjb250ZXh0PSQodG9nZ2xlc1tpXSkuZGF0YShEQVRBX0tFWSk7dmFyIHJlbGF0ZWRUYXJnZXQ9e3JlbGF0ZWRUYXJnZXQ6dG9nZ2xlc1tpXX07aWYoZXZlbnQmJmV2ZW50LnR5cGU9PT0nY2xpY2snKXtyZWxhdGVkVGFyZ2V0LmNsaWNrRXZlbnQ9ZXZlbnQ7fQppZighY29udGV4dCl7Y29udGludWU7fQp2YXIgZHJvcGRvd25NZW51PWNvbnRleHQuX21lbnU7aWYoISQocGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe2NvbnRpbnVlO30KaWYoZXZlbnQmJihldmVudC50eXBlPT09J2NsaWNrJyYmL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSl8fGV2ZW50LnR5cGU9PT0na2V5dXAnJiZldmVudC53aGljaD09PVRBQl9LRVlDT0RFKSYmJC5jb250YWlucyhwYXJlbnQsZXZlbnQudGFyZ2V0KSl7Y29udGludWU7fQp2YXIgaGlkZUV2ZW50PSQuRXZlbnQoRXZlbnQuSElERSxyZWxhdGVkVGFyZ2V0KTskKHBhcmVudCkudHJpZ2dlcihoaWRlRXZlbnQpO2lmKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7Y29udGludWU7fQppZignb250b3VjaHN0YXJ0J2luIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7JChkb2N1bWVudC5ib2R5KS5jaGlsZHJlbigpLm9mZignbW91c2VvdmVyJyxudWxsLCQubm9vcCk7fQp0b2dnbGVzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsJ2ZhbHNlJyk7JChkcm9wZG93bk1lbnUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTskKHBhcmVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpLnRyaWdnZXIoJC5FdmVudChFdmVudC5ISURERU4scmVsYXRlZFRhcmdldCkpO319O0Ryb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudD1mdW5jdGlvbiBfZ2V0UGFyZW50RnJvbUVsZW1lbnQoZWxlbWVudCl7dmFyIHBhcmVudDt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO2lmKHNlbGVjdG9yKXtwYXJlbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7fQpyZXR1cm4gcGFyZW50fHxlbGVtZW50LnBhcmVudE5vZGU7fTtEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyPWZ1bmN0aW9uIF9kYXRhQXBpS2V5ZG93bkhhbmRsZXIoZXZlbnQpe2lmKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpP2V2ZW50LndoaWNoPT09U1BBQ0VfS0VZQ09ERXx8ZXZlbnQud2hpY2ghPT1FU0NBUEVfS0VZQ09ERSYmKGV2ZW50LndoaWNoIT09QVJST1dfRE9XTl9LRVlDT0RFJiZldmVudC53aGljaCE9PUFSUk9XX1VQX0tFWUNPREV8fCQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNlbGVjdG9yLk1FTlUpLmxlbmd0aCk6IVJFR0VYUF9LRVlET1dOLnRlc3QoZXZlbnQud2hpY2gpKXtyZXR1cm47fQpldmVudC5wcmV2ZW50RGVmYXVsdCgpO2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO2lmKHRoaXMuZGlzYWJsZWR8fCQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSl7cmV0dXJuO30KdmFyIHBhcmVudD1Ecm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcyk7dmFyIGlzQWN0aXZlPSQocGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoIWlzQWN0aXZlfHxpc0FjdGl2ZSYmKGV2ZW50LndoaWNoPT09RVNDQVBFX0tFWUNPREV8fGV2ZW50LndoaWNoPT09U1BBQ0VfS0VZQ09ERSkpe2lmKGV2ZW50LndoaWNoPT09RVNDQVBFX0tFWUNPREUpe3ZhciB0b2dnbGU9cGFyZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuREFUQV9UT0dHTEUpOyQodG9nZ2xlKS50cmlnZ2VyKCdmb2N1cycpO30KJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO3JldHVybjt9CnZhciBpdGVtcz1bXS5zbGljZS5jYWxsKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlZJU0lCTEVfSVRFTVMpKTtpZihpdGVtcy5sZW5ndGg9PT0wKXtyZXR1cm47fQp2YXIgaW5kZXg9aXRlbXMuaW5kZXhPZihldmVudC50YXJnZXQpO2lmKGV2ZW50LndoaWNoPT09QVJST1dfVVBfS0VZQ09ERSYmaW5kZXg+MCl7aW5kZXgtLTt9CmlmKGV2ZW50LndoaWNoPT09QVJST1dfRE9XTl9LRVlDT0RFJiZpbmRleDxpdGVtcy5sZW5ndGgtMSl7aW5kZXgrKzt9CmlmKGluZGV4PDApe2luZGV4PTA7fQppdGVtc1tpbmRleF0uZm9jdXMoKTt9O19jcmVhdGVDbGFzcyhEcm9wZG93bixudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319LHtrZXk6IkRlZmF1bHRUeXBlIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHRUeXBlO319XSk7cmV0dXJuIERyb3Bkb3duO30oKTskKGRvY3VtZW50KS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLFNlbGVjdG9yLkRBVEFfVE9HR0xFLERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKEV2ZW50LktFWURPV05fREFUQV9BUEksU2VsZWN0b3IuTUVOVSxEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSsiICIrRXZlbnQuS0VZVVBfREFUQV9BUEksRHJvcGRvd24uX2NsZWFyTWVudXMpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLFNlbGVjdG9yLkRBVEFfVE9HR0xFLGZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO0Ryb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRoaXMpLCd0b2dnbGUnKTt9KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSxTZWxlY3Rvci5GT1JNX0NISUxELGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7fSk7JC5mbltOQU1FXT1Ecm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9RHJvcGRvd247JC5mbltOQU1FXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7JC5mbltOQU1FXT1KUVVFUllfTk9fQ09ORkxJQ1Q7cmV0dXJuIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gRHJvcGRvd247fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvbW9kYWwuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5Nb2RhbD1mYWN0b3J5KGdsb2JhbC5qUXVlcnksZ2xvYmFsLlV0aWwpKTt9KHRoaXMsZnVuY3Rpb24oJCxVdGlsKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fQpvd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fQpyZXR1cm4gdGFyZ2V0O30KdmFyIE5BTUU9J21vZGFsJzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMubW9kYWwnO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaSc7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBFU0NBUEVfS0VZQ09ERT0yNzt2YXIgRGVmYXVsdD17YmFja2Ryb3A6dHJ1ZSxrZXlib2FyZDp0cnVlLGZvY3VzOnRydWUsc2hvdzp0cnVlfTt2YXIgRGVmYXVsdFR5cGU9e2JhY2tkcm9wOicoYm9vbGVhbnxzdHJpbmcpJyxrZXlib2FyZDonYm9vbGVhbicsZm9jdXM6J2Jvb2xlYW4nLHNob3c6J2Jvb2xlYW4nfTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxGT0NVU0lOOiJmb2N1c2luIitFVkVOVF9LRVksUkVTSVpFOiJyZXNpemUiK0VWRU5UX0tFWSxDTElDS19ESVNNSVNTOiJjbGljay5kaXNtaXNzIitFVkVOVF9LRVksS0VZRE9XTl9ESVNNSVNTOiJrZXlkb3duLmRpc21pc3MiK0VWRU5UX0tFWSxNT1VTRVVQX0RJU01JU1M6Im1vdXNldXAuZGlzbWlzcyIrRVZFTlRfS0VZLE1PVVNFRE9XTl9ESVNNSVNTOiJtb3VzZWRvd24uZGlzbWlzcyIrRVZFTlRfS0VZLENMSUNLX0RBVEFfQVBJOiJjbGljayIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWX07dmFyIENsYXNzTmFtZT17U0NST0xMQUJMRTonbW9kYWwtZGlhbG9nLXNjcm9sbGFibGUnLFNDUk9MTEJBUl9NRUFTVVJFUjonbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnLEJBQ0tEUk9QOidtb2RhbC1iYWNrZHJvcCcsT1BFTjonbW9kYWwtb3BlbicsRkFERTonZmFkZScsU0hPVzonc2hvdyd9O3ZhciBTZWxlY3Rvcj17RElBTE9HOicubW9kYWwtZGlhbG9nJyxNT0RBTF9CT0RZOicubW9kYWwtYm9keScsREFUQV9UT0dHTEU6J1tkYXRhLXRvZ2dsZT0ibW9kYWwiXScsREFUQV9ESVNNSVNTOidbZGF0YS1kaXNtaXNzPSJtb2RhbCJdJyxGSVhFRF9DT05URU5UOicuZml4ZWQtdG9wLCAuZml4ZWQtYm90dG9tLCAuaXMtZml4ZWQsIC5zdGlja3ktdG9wJyxTVElDS1lfQ09OVEVOVDonLnN0aWNreS10b3AnfTt2YXIgTW9kYWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNb2RhbChlbGVtZW50LGNvbmZpZyl7dGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhjb25maWcpO3RoaXMuX2VsZW1lbnQ9ZWxlbWVudDt0aGlzLl9kaWFsb2c9ZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkRJQUxPRyk7dGhpcy5fYmFja2Ryb3A9bnVsbDt0aGlzLl9pc1Nob3duPWZhbHNlO3RoaXMuX2lzQm9keU92ZXJmbG93aW5nPWZhbHNlO3RoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2s9ZmFsc2U7dGhpcy5faXNUcmFuc2l0aW9uaW5nPWZhbHNlO3RoaXMuX3Njcm9sbGJhcldpZHRoPTA7fQp2YXIgX3Byb3RvPU1vZGFsLnByb3RvdHlwZTtfcHJvdG8udG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZShyZWxhdGVkVGFyZ2V0KXtyZXR1cm4gdGhpcy5faXNTaG93bj90aGlzLmhpZGUoKTp0aGlzLnNob3cocmVsYXRlZFRhcmdldCk7fTtfcHJvdG8uc2hvdz1mdW5jdGlvbiBzaG93KHJlbGF0ZWRUYXJnZXQpe3ZhciBfdGhpcz10aGlzO2lmKHRoaXMuX2lzU2hvd258fHRoaXMuX2lzVHJhbnNpdGlvbmluZyl7cmV0dXJuO30KaWYoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpe3RoaXMuX2lzVHJhbnNpdGlvbmluZz10cnVlO30KdmFyIHNob3dFdmVudD0kLkV2ZW50KEV2ZW50LlNIT1cse3JlbGF0ZWRUYXJnZXQ6cmVsYXRlZFRhcmdldH0pOyQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO2lmKHRoaXMuX2lzU2hvd258fHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KdGhpcy5faXNTaG93bj10cnVlO3RoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7dGhpcy5fc2V0U2Nyb2xsYmFyKCk7dGhpcy5fYWRqdXN0RGlhbG9nKCk7dGhpcy5fc2V0RXNjYXBlRXZlbnQoKTt0aGlzLl9zZXRSZXNpemVFdmVudCgpOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUyxTZWxlY3Rvci5EQVRBX0RJU01JU1MsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpcy5oaWRlKGV2ZW50KTt9KTskKHRoaXMuX2RpYWxvZykub24oRXZlbnQuTU9VU0VET1dOX0RJU01JU1MsZnVuY3Rpb24oKXskKF90aGlzLl9lbGVtZW50KS5vbmUoRXZlbnQuTU9VU0VVUF9ESVNNSVNTLGZ1bmN0aW9uKGV2ZW50KXtpZigkKGV2ZW50LnRhcmdldCkuaXMoX3RoaXMuX2VsZW1lbnQpKXtfdGhpcy5faWdub3JlQmFja2Ryb3BDbGljaz10cnVlO319KTt9KTt0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMuX3Nob3dFbGVtZW50KHJlbGF0ZWRUYXJnZXQpO30pO307X3Byb3RvLmhpZGU9ZnVuY3Rpb24gaGlkZShldmVudCl7dmFyIF90aGlzMj10aGlzO2lmKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KaWYoIXRoaXMuX2lzU2hvd258fHRoaXMuX2lzVHJhbnNpdGlvbmluZyl7cmV0dXJuO30KdmFyIGhpZGVFdmVudD0kLkV2ZW50KEV2ZW50LkhJREUpOyQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO2lmKCF0aGlzLl9pc1Nob3dufHxoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CnRoaXMuX2lzU2hvd249ZmFsc2U7dmFyIHRyYW5zaXRpb249JCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSk7aWYodHJhbnNpdGlvbil7dGhpcy5faXNUcmFuc2l0aW9uaW5nPXRydWU7fQp0aGlzLl9zZXRFc2NhcGVFdmVudCgpO3RoaXMuX3NldFJlc2l6ZUV2ZW50KCk7JChkb2N1bWVudCkub2ZmKEV2ZW50LkZPQ1VTSU4pOyQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpOyQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LkNMSUNLX0RJU01JU1MpOyQodGhpcy5fZGlhbG9nKS5vZmYoRXZlbnQuTU9VU0VET1dOX0RJU01JU1MpO2lmKHRyYW5zaXRpb24pe3ZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMyLl9oaWRlTW9kYWwoZXZlbnQpO30pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7dGhpcy5faGlkZU1vZGFsKCk7fX07X3Byb3RvLmRpc3Bvc2U9ZnVuY3Rpb24gZGlzcG9zZSgpe1t3aW5kb3csdGhpcy5fZWxlbWVudCx0aGlzLl9kaWFsb2ddLmZvckVhY2goZnVuY3Rpb24oaHRtbEVsZW1lbnQpe3JldHVybiAkKGh0bWxFbGVtZW50KS5vZmYoRVZFTlRfS0VZKTt9KTskKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2NvbmZpZz1udWxsO3RoaXMuX2VsZW1lbnQ9bnVsbDt0aGlzLl9kaWFsb2c9bnVsbDt0aGlzLl9iYWNrZHJvcD1udWxsO3RoaXMuX2lzU2hvd249bnVsbDt0aGlzLl9pc0JvZHlPdmVyZmxvd2luZz1udWxsO3RoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2s9bnVsbDt0aGlzLl9pc1RyYW5zaXRpb25pbmc9bnVsbDt0aGlzLl9zY3JvbGxiYXJXaWR0aD1udWxsO307X3Byb3RvLmhhbmRsZVVwZGF0ZT1mdW5jdGlvbiBoYW5kbGVVcGRhdGUoKXt0aGlzLl9hZGp1c3REaWFsb2coKTt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LGNvbmZpZyk7VXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSxjb25maWcsRGVmYXVsdFR5cGUpO3JldHVybiBjb25maWc7fTtfcHJvdG8uX3Nob3dFbGVtZW50PWZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KXt2YXIgX3RoaXMzPXRoaXM7dmFyIHRyYW5zaXRpb249JCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSk7aWYoIXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZXx8dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREUpe2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fZWxlbWVudCk7fQp0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTt0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsdHJ1ZSk7aWYoJCh0aGlzLl9kaWFsb2cpLmhhc0NsYXNzKENsYXNzTmFtZS5TQ1JPTExBQkxFKSl7dGhpcy5fZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuTU9EQUxfQk9EWSkuc2Nyb2xsVG9wPTA7fWVsc2V7dGhpcy5fZWxlbWVudC5zY3JvbGxUb3A9MDt9CmlmKHRyYW5zaXRpb24pe1V0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO30KJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYodGhpcy5fY29uZmlnLmZvY3VzKXt0aGlzLl9lbmZvcmNlRm9jdXMoKTt9CnZhciBzaG93bkV2ZW50PSQuRXZlbnQoRXZlbnQuU0hPV04se3JlbGF0ZWRUYXJnZXQ6cmVsYXRlZFRhcmdldH0pO3ZhciB0cmFuc2l0aW9uQ29tcGxldGU9ZnVuY3Rpb24gdHJhbnNpdGlvbkNvbXBsZXRlKCl7aWYoX3RoaXMzLl9jb25maWcuZm9jdXMpe190aGlzMy5fZWxlbWVudC5mb2N1cygpO30KX3RoaXMzLl9pc1RyYW5zaXRpb25pbmc9ZmFsc2U7JChfdGhpczMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7fTtpZih0cmFuc2l0aW9uKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZGlhbG9nKTskKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsdHJhbnNpdGlvbkNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle3RyYW5zaXRpb25Db21wbGV0ZSgpO319O19wcm90by5fZW5mb3JjZUZvY3VzPWZ1bmN0aW9uIF9lbmZvcmNlRm9jdXMoKXt2YXIgX3RoaXM0PXRoaXM7JChkb2N1bWVudCkub2ZmKEV2ZW50LkZPQ1VTSU4pLm9uKEV2ZW50LkZPQ1VTSU4sZnVuY3Rpb24oZXZlbnQpe2lmKGRvY3VtZW50IT09ZXZlbnQudGFyZ2V0JiZfdGhpczQuX2VsZW1lbnQhPT1ldmVudC50YXJnZXQmJiQoX3RoaXM0Ll9lbGVtZW50KS5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGg9PT0wKXtfdGhpczQuX2VsZW1lbnQuZm9jdXMoKTt9fSk7fTtfcHJvdG8uX3NldEVzY2FwZUV2ZW50PWZ1bmN0aW9uIF9zZXRFc2NhcGVFdmVudCgpe3ZhciBfdGhpczU9dGhpcztpZih0aGlzLl9pc1Nob3duJiZ0aGlzLl9jb25maWcua2V5Ym9hcmQpeyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuS0VZRE9XTl9ESVNNSVNTLGZ1bmN0aW9uKGV2ZW50KXtpZihldmVudC53aGljaD09PUVTQ0FQRV9LRVlDT0RFKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO190aGlzNS5oaWRlKCk7fX0pO31lbHNlIGlmKCF0aGlzLl9pc1Nob3duKXskKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5LRVlET1dOX0RJU01JU1MpO319O19wcm90by5fc2V0UmVzaXplRXZlbnQ9ZnVuY3Rpb24gX3NldFJlc2l6ZUV2ZW50KCl7dmFyIF90aGlzNj10aGlzO2lmKHRoaXMuX2lzU2hvd24peyQod2luZG93KS5vbihFdmVudC5SRVNJWkUsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczYuaGFuZGxlVXBkYXRlKGV2ZW50KTt9KTt9ZWxzZXskKHdpbmRvdykub2ZmKEV2ZW50LlJFU0laRSk7fX07X3Byb3RvLl9oaWRlTW9kYWw9ZnVuY3Rpb24gX2hpZGVNb2RhbCgpe3ZhciBfdGhpczc9dGhpczt0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9J25vbmUnO3RoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsdHJ1ZSk7dGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnKTt0aGlzLl9pc1RyYW5zaXRpb25pbmc9ZmFsc2U7dGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uKCl7JChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuT1BFTik7X3RoaXM3Ll9yZXNldEFkanVzdG1lbnRzKCk7X3RoaXM3Ll9yZXNldFNjcm9sbGJhcigpOyQoX3RoaXM3Ll9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LkhJRERFTik7fSk7fTtfcHJvdG8uX3JlbW92ZUJhY2tkcm9wPWZ1bmN0aW9uIF9yZW1vdmVCYWNrZHJvcCgpe2lmKHRoaXMuX2JhY2tkcm9wKXskKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmUoKTt0aGlzLl9iYWNrZHJvcD1udWxsO319O19wcm90by5fc2hvd0JhY2tkcm9wPWZ1bmN0aW9uIF9zaG93QmFja2Ryb3AoY2FsbGJhY2spe3ZhciBfdGhpczg9dGhpczt2YXIgYW5pbWF0ZT0kKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKT9DbGFzc05hbWUuRkFERTonJztpZih0aGlzLl9pc1Nob3duJiZ0aGlzLl9jb25maWcuYmFja2Ryb3Ape3RoaXMuX2JhY2tkcm9wPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO3RoaXMuX2JhY2tkcm9wLmNsYXNzTmFtZT1DbGFzc05hbWUuQkFDS0RST1A7aWYoYW5pbWF0ZSl7dGhpcy5fYmFja2Ryb3AuY2xhc3NMaXN0LmFkZChhbmltYXRlKTt9CiQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUyxmdW5jdGlvbihldmVudCl7aWYoX3RoaXM4Ll9pZ25vcmVCYWNrZHJvcENsaWNrKXtfdGhpczguX2lnbm9yZUJhY2tkcm9wQ2xpY2s9ZmFsc2U7cmV0dXJuO30KaWYoZXZlbnQudGFyZ2V0IT09ZXZlbnQuY3VycmVudFRhcmdldCl7cmV0dXJuO30KaWYoX3RoaXM4Ll9jb25maWcuYmFja2Ryb3A9PT0nc3RhdGljJyl7X3RoaXM4Ll9lbGVtZW50LmZvY3VzKCk7fWVsc2V7X3RoaXM4LmhpZGUoKTt9fSk7aWYoYW5pbWF0ZSl7VXRpbC5yZWZsb3codGhpcy5fYmFja2Ryb3ApO30KJCh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO2lmKCFjYWxsYmFjayl7cmV0dXJuO30KaWYoIWFuaW1hdGUpe2NhbGxiYWNrKCk7cmV0dXJuO30KdmFyIGJhY2tkcm9wVHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fYmFja2Ryb3ApOyQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNhbGxiYWNrKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChiYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2UgaWYoIXRoaXMuX2lzU2hvd24mJnRoaXMuX2JhY2tkcm9wKXskKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7dmFyIGNhbGxiYWNrUmVtb3ZlPWZ1bmN0aW9uIGNhbGxiYWNrUmVtb3ZlKCl7X3RoaXM4Ll9yZW1vdmVCYWNrZHJvcCgpO2lmKGNhbGxiYWNrKXtjYWxsYmFjaygpO319O2lmKCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKXt2YXIgX2JhY2tkcm9wVHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fYmFja2Ryb3ApOyQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNhbGxiYWNrUmVtb3ZlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChfYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NhbGxiYWNrUmVtb3ZlKCk7fX1lbHNlIGlmKGNhbGxiYWNrKXtjYWxsYmFjaygpO319O19wcm90by5fYWRqdXN0RGlhbG9nPWZ1bmN0aW9uIF9hZGp1c3REaWFsb2coKXt2YXIgaXNNb2RhbE92ZXJmbG93aW5nPXRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7aWYoIXRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiZpc01vZGFsT3ZlcmZsb3dpbmcpe3RoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQ9dGhpcy5fc2Nyb2xsYmFyV2lkdGgrInB4Ijt9CmlmKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiYhaXNNb2RhbE92ZXJmbG93aW5nKXt0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodD10aGlzLl9zY3JvbGxiYXJXaWR0aCsicHgiO319O19wcm90by5fcmVzZXRBZGp1c3RtZW50cz1mdW5jdGlvbiBfcmVzZXRBZGp1c3RtZW50cygpe3RoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQ9Jyc7dGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9Jyc7fTtfcHJvdG8uX2NoZWNrU2Nyb2xsYmFyPWZ1bmN0aW9uIF9jaGVja1Njcm9sbGJhcigpe3ZhciByZWN0PWRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5faXNCb2R5T3ZlcmZsb3dpbmc9cmVjdC5sZWZ0K3JlY3QucmlnaHQ8d2luZG93LmlubmVyV2lkdGg7dGhpcy5fc2Nyb2xsYmFyV2lkdGg9dGhpcy5fZ2V0U2Nyb2xsYmFyV2lkdGgoKTt9O19wcm90by5fc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uIF9zZXRTY3JvbGxiYXIoKXt2YXIgX3RoaXM5PXRoaXM7aWYodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcpe3ZhciBmaXhlZENvbnRlbnQ9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLkZJWEVEX0NPTlRFTlQpKTt2YXIgc3RpY2t5Q29udGVudD1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuU1RJQ0tZX0NPTlRFTlQpKTskKGZpeGVkQ29udGVudCkuZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXt2YXIgYWN0dWFsUGFkZGluZz1lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodDt2YXIgY2FsY3VsYXRlZFBhZGRpbmc9JChlbGVtZW50KS5jc3MoJ3BhZGRpbmctcmlnaHQnKTskKGVsZW1lbnQpLmRhdGEoJ3BhZGRpbmctcmlnaHQnLGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcscGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykrX3RoaXM5Ll9zY3JvbGxiYXJXaWR0aCsicHgiKTt9KTskKHN0aWNreUNvbnRlbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7dmFyIGFjdHVhbE1hcmdpbj1lbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0O3ZhciBjYWxjdWxhdGVkTWFyZ2luPSQoZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnKTskKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcsYWN0dWFsTWFyZ2luKS5jc3MoJ21hcmdpbi1yaWdodCcscGFyc2VGbG9hdChjYWxjdWxhdGVkTWFyZ2luKS1fdGhpczkuX3Njcm9sbGJhcldpZHRoKyJweCIpO30pO3ZhciBhY3R1YWxQYWRkaW5nPWRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0O3ZhciBjYWxjdWxhdGVkUGFkZGluZz0kKGRvY3VtZW50LmJvZHkpLmNzcygncGFkZGluZy1yaWdodCcpOyQoZG9jdW1lbnQuYm9keSkuZGF0YSgncGFkZGluZy1yaWdodCcsYWN0dWFsUGFkZGluZykuY3NzKCdwYWRkaW5nLXJpZ2h0JyxwYXJzZUZsb2F0KGNhbGN1bGF0ZWRQYWRkaW5nKSt0aGlzLl9zY3JvbGxiYXJXaWR0aCsicHgiKTt9CiQoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO307X3Byb3RvLl9yZXNldFNjcm9sbGJhcj1mdW5jdGlvbiBfcmVzZXRTY3JvbGxiYXIoKXt2YXIgZml4ZWRDb250ZW50PVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5GSVhFRF9DT05URU5UKSk7JChmaXhlZENvbnRlbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7dmFyIHBhZGRpbmc9JChlbGVtZW50KS5kYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7JChlbGVtZW50KS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7ZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9cGFkZGluZz9wYWRkaW5nOicnO30pO3ZhciBlbGVtZW50cz1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiIrU2VsZWN0b3IuU1RJQ0tZX0NPTlRFTlQpKTskKGVsZW1lbnRzKS5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpe3ZhciBtYXJnaW49JChlbGVtZW50KS5kYXRhKCdtYXJnaW4tcmlnaHQnKTtpZih0eXBlb2YgbWFyZ2luIT09J3VuZGVmaW5lZCcpeyQoZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnLG1hcmdpbikucmVtb3ZlRGF0YSgnbWFyZ2luLXJpZ2h0Jyk7fX0pO3ZhciBwYWRkaW5nPSQoZG9jdW1lbnQuYm9keSkuZGF0YSgncGFkZGluZy1yaWdodCcpOyQoZG9jdW1lbnQuYm9keSkucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpO2RvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0PXBhZGRpbmc/cGFkZGluZzonJzt9O19wcm90by5fZ2V0U2Nyb2xsYmFyV2lkdGg9ZnVuY3Rpb24gX2dldFNjcm9sbGJhcldpZHRoKCl7dmFyIHNjcm9sbERpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtzY3JvbGxEaXYuY2xhc3NOYW1lPUNsYXNzTmFtZS5TQ1JPTExCQVJfTUVBU1VSRVI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JvbGxEaXYpO3ZhciBzY3JvbGxiYXJXaWR0aD1zY3JvbGxEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgtc2Nyb2xsRGl2LmNsaWVudFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtyZXR1cm4gc2Nyb2xsYmFyV2lkdGg7fTtNb2RhbC5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnLHJlbGF0ZWRUYXJnZXQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO3ZhciBfY29uZmlnPV9vYmplY3RTcHJlYWQoe30sRGVmYXVsdCwkKHRoaXMpLmRhdGEoKSx0eXBlb2YgY29uZmlnPT09J29iamVjdCcmJmNvbmZpZz9jb25maWc6e30pO2lmKCFkYXRhKXtkYXRhPW5ldyBNb2RhbCh0aGlzLF9jb25maWcpOyQodGhpcykuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXShyZWxhdGVkVGFyZ2V0KTt9ZWxzZSBpZihfY29uZmlnLnNob3cpe2RhdGEuc2hvdyhyZWxhdGVkVGFyZ2V0KTt9fSk7fTtfY3JlYXRlQ2xhc3MoTW9kYWwsbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319LHtrZXk6IkRlZmF1bHQiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9fV0pO3JldHVybiBNb2RhbDt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuREFUQV9UT0dHTEUsZnVuY3Rpb24oZXZlbnQpe3ZhciBfdGhpczEwPXRoaXM7dmFyIHRhcmdldDt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO2lmKHNlbGVjdG9yKXt0YXJnZXQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7fQp2YXIgY29uZmlnPSQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKT8ndG9nZ2xlJzpfb2JqZWN0U3ByZWFkKHt9LCQodGFyZ2V0KS5kYXRhKCksJCh0aGlzKS5kYXRhKCkpO2lmKHRoaXMudGFnTmFtZT09PSdBJ3x8dGhpcy50YWdOYW1lPT09J0FSRUEnKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KdmFyICR0YXJnZXQ9JCh0YXJnZXQpLm9uZShFdmVudC5TSE9XLGZ1bmN0aW9uKHNob3dFdmVudCl7aWYoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQokdGFyZ2V0Lm9uZShFdmVudC5ISURERU4sZnVuY3Rpb24oKXtpZigkKF90aGlzMTApLmlzKCc6dmlzaWJsZScpKXtfdGhpczEwLmZvY3VzKCk7fX0pO30pO01vZGFsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksY29uZmlnLHRoaXMpO30pOyQuZm5bTkFNRV09TW9kYWwuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPU1vZGFsOyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIE1vZGFsO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL3Rvb2x0aXAuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgncG9wcGVyLmpzJykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJ3BvcHBlci5qcycsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5Ub29sdGlwPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuUG9wcGVyLGdsb2JhbC5VdGlsKSk7fSh0aGlzLGZ1bmN0aW9uKCQsUG9wcGVyLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtQb3BwZXI9UG9wcGVyJiZQb3BwZXIuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9Qb3BwZXJbJ2RlZmF1bHQnXTpQb3BwZXI7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fQpvd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fQpyZXR1cm4gdGFyZ2V0O30KdmFyIHVyaUF0dHJzPVsnYmFja2dyb3VuZCcsJ2NpdGUnLCdocmVmJywnaXRlbXR5cGUnLCdsb25nZGVzYycsJ3Bvc3RlcicsJ3NyYycsJ3hsaW5rOmhyZWYnXTt2YXIgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTj0vXmFyaWEtW1x3LV0qJC9pO3ZhciBEZWZhdWx0V2hpdGVsaXN0PXsnKic6WydjbGFzcycsJ2RpcicsJ2lkJywnbGFuZycsJ3JvbGUnLEFSSUFfQVRUUklCVVRFX1BBVFRFUk5dLGE6Wyd0YXJnZXQnLCdocmVmJywndGl0bGUnLCdyZWwnXSxhcmVhOltdLGI6W10sYnI6W10sY29sOltdLGNvZGU6W10sZGl2OltdLGVtOltdLGhyOltdLGgxOltdLGgyOltdLGgzOltdLGg0OltdLGg1OltdLGg2OltdLGk6W10saW1nOlsnc3JjJywnYWx0JywndGl0bGUnLCd3aWR0aCcsJ2hlaWdodCddLGxpOltdLG9sOltdLHA6W10scHJlOltdLHM6W10sc21hbGw6W10sc3BhbjpbXSxzdWI6W10sc3VwOltdLHN0cm9uZzpbXSx1OltdLHVsOltdfTt2YXIgU0FGRV9VUkxfUEFUVEVSTj0vXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwfHRlbHxmaWxlKTp8W14mOi8/I10qKD86Wy8/I118JCkpL2dpO3ZhciBEQVRBX1VSTF9QQVRURVJOPS9eZGF0YTooPzppbWFnZVwvKD86Ym1wfGdpZnxqcGVnfGpwZ3xwbmd8dGlmZnx3ZWJwKXx2aWRlb1wvKD86bXBlZ3xtcDR8b2dnfHdlYm0pfGF1ZGlvXC8oPzptcDN8b2dhfG9nZ3xvcHVzKSk7YmFzZTY0LFthLXowLTkrL10rPSokL2k7ZnVuY3Rpb24gYWxsb3dlZEF0dHJpYnV0ZShhdHRyLGFsbG93ZWRBdHRyaWJ1dGVMaXN0KXt2YXIgYXR0ck5hbWU9YXR0ci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGFsbG93ZWRBdHRyaWJ1dGVMaXN0LmluZGV4T2YoYXR0ck5hbWUpIT09LTEpe2lmKHVyaUF0dHJzLmluZGV4T2YoYXR0ck5hbWUpIT09LTEpe3JldHVybiBCb29sZWFuKGF0dHIubm9kZVZhbHVlLm1hdGNoKFNBRkVfVVJMX1BBVFRFUk4pfHxhdHRyLm5vZGVWYWx1ZS5tYXRjaChEQVRBX1VSTF9QQVRURVJOKSk7fQpyZXR1cm4gdHJ1ZTt9CnZhciByZWdFeHA9YWxsb3dlZEF0dHJpYnV0ZUxpc3QuZmlsdGVyKGZ1bmN0aW9uKGF0dHJSZWdleCl7cmV0dXJuIGF0dHJSZWdleCBpbnN0YW5jZW9mIFJlZ0V4cDt9KTtmb3IodmFyIGk9MCxsPXJlZ0V4cC5sZW5ndGg7aTxsO2krKyl7aWYoYXR0ck5hbWUubWF0Y2gocmVnRXhwW2ldKSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gc2FuaXRpemVIdG1sKHVuc2FmZUh0bWwsd2hpdGVMaXN0LHNhbml0aXplRm4pe2lmKHVuc2FmZUh0bWwubGVuZ3RoPT09MCl7cmV0dXJuIHVuc2FmZUh0bWw7fQppZihzYW5pdGl6ZUZuJiZ0eXBlb2Ygc2FuaXRpemVGbj09PSdmdW5jdGlvbicpe3JldHVybiBzYW5pdGl6ZUZuKHVuc2FmZUh0bWwpO30KdmFyIGRvbVBhcnNlcj1uZXcgd2luZG93LkRPTVBhcnNlcigpO3ZhciBjcmVhdGVkRG9jdW1lbnQ9ZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyh1bnNhZmVIdG1sLCd0ZXh0L2h0bWwnKTt2YXIgd2hpdGVsaXN0S2V5cz1PYmplY3Qua2V5cyh3aGl0ZUxpc3QpO3ZhciBlbGVtZW50cz1bXS5zbGljZS5jYWxsKGNyZWF0ZWREb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSk7dmFyIF9sb29wPWZ1bmN0aW9uIF9sb29wKGksbGVuKXt2YXIgZWw9ZWxlbWVudHNbaV07dmFyIGVsTmFtZT1lbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHdoaXRlbGlzdEtleXMuaW5kZXhPZihlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKT09PS0xKXtlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtyZXR1cm4iY29udGludWUiO30KdmFyIGF0dHJpYnV0ZUxpc3Q9W10uc2xpY2UuY2FsbChlbC5hdHRyaWJ1dGVzKTt2YXIgd2hpdGVsaXN0ZWRBdHRyaWJ1dGVzPVtdLmNvbmNhdCh3aGl0ZUxpc3RbJyonXXx8W10sd2hpdGVMaXN0W2VsTmFtZV18fFtdKTthdHRyaWJ1dGVMaXN0LmZvckVhY2goZnVuY3Rpb24oYXR0cil7aWYoIWFsbG93ZWRBdHRyaWJ1dGUoYXR0cix3aGl0ZWxpc3RlZEF0dHJpYnV0ZXMpKXtlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5ub2RlTmFtZSk7fX0pO307Zm9yKHZhciBpPTAsbGVuPWVsZW1lbnRzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBfcmV0PV9sb29wKGksbGVuKTtpZihfcmV0PT09ImNvbnRpbnVlIiljb250aW51ZTt9CnJldHVybiBjcmVhdGVkRG9jdW1lbnQuYm9keS5pbm5lckhUTUw7fQp2YXIgTkFNRT0ndG9vbHRpcCc7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLnRvb2x0aXAnO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgQ0xBU1NfUFJFRklYPSdicy10b29sdGlwJzt2YXIgQlNDTFNfUFJFRklYX1JFR0VYPW5ldyBSZWdFeHAoIihefFxccykiK0NMQVNTX1BSRUZJWCsiXFxTKyIsJ2cnKTt2YXIgRElTQUxMT1dFRF9BVFRSSUJVVEVTPVsnc2FuaXRpemUnLCd3aGl0ZUxpc3QnLCdzYW5pdGl6ZUZuJ107dmFyIERlZmF1bHRUeXBlPXthbmltYXRpb246J2Jvb2xlYW4nLHRlbXBsYXRlOidzdHJpbmcnLHRpdGxlOicoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJyx0cmlnZ2VyOidzdHJpbmcnLGRlbGF5OicobnVtYmVyfG9iamVjdCknLGh0bWw6J2Jvb2xlYW4nLHNlbGVjdG9yOicoc3RyaW5nfGJvb2xlYW4pJyxwbGFjZW1lbnQ6JyhzdHJpbmd8ZnVuY3Rpb24pJyxvZmZzZXQ6JyhudW1iZXJ8c3RyaW5nfGZ1bmN0aW9uKScsY29udGFpbmVyOicoc3RyaW5nfGVsZW1lbnR8Ym9vbGVhbiknLGZhbGxiYWNrUGxhY2VtZW50Oicoc3RyaW5nfGFycmF5KScsYm91bmRhcnk6JyhzdHJpbmd8ZWxlbWVudCknLHNhbml0aXplOidib29sZWFuJyxzYW5pdGl6ZUZuOicobnVsbHxmdW5jdGlvbiknLHdoaXRlTGlzdDonb2JqZWN0J307dmFyIEF0dGFjaG1lbnRNYXA9e0FVVE86J2F1dG8nLFRPUDondG9wJyxSSUdIVDoncmlnaHQnLEJPVFRPTTonYm90dG9tJyxMRUZUOidsZWZ0J307dmFyIERlZmF1bHQ9e2FuaW1hdGlvbjp0cnVlLHRlbXBsYXRlOic8ZGl2IGNsYXNzPSJ0b29sdGlwIiByb2xlPSJ0b29sdGlwIj4nKyc8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+JysnPGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOidob3ZlciBmb2N1cycsdGl0bGU6JycsZGVsYXk6MCxodG1sOmZhbHNlLHNlbGVjdG9yOmZhbHNlLHBsYWNlbWVudDondG9wJyxvZmZzZXQ6MCxjb250YWluZXI6ZmFsc2UsZmFsbGJhY2tQbGFjZW1lbnQ6J2ZsaXAnLGJvdW5kYXJ5OidzY3JvbGxQYXJlbnQnLHNhbml0aXplOnRydWUsc2FuaXRpemVGbjpudWxsLHdoaXRlTGlzdDpEZWZhdWx0V2hpdGVsaXN0fTt2YXIgSG92ZXJTdGF0ZT17U0hPVzonc2hvdycsT1VUOidvdXQnfTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxJTlNFUlRFRDoiaW5zZXJ0ZWQiK0VWRU5UX0tFWSxDTElDSzoiY2xpY2siK0VWRU5UX0tFWSxGT0NVU0lOOiJmb2N1c2luIitFVkVOVF9LRVksRk9DVVNPVVQ6ImZvY3Vzb3V0IitFVkVOVF9LRVksTU9VU0VFTlRFUjoibW91c2VlbnRlciIrRVZFTlRfS0VZLE1PVVNFTEVBVkU6Im1vdXNlbGVhdmUiK0VWRU5UX0tFWX07dmFyIENsYXNzTmFtZT17RkFERTonZmFkZScsU0hPVzonc2hvdyd9O3ZhciBTZWxlY3Rvcj17VE9PTFRJUDonLnRvb2x0aXAnLFRPT0xUSVBfSU5ORVI6Jy50b29sdGlwLWlubmVyJyxBUlJPVzonLmFycm93J307dmFyIFRyaWdnZXI9e0hPVkVSOidob3ZlcicsRk9DVVM6J2ZvY3VzJyxDTElDSzonY2xpY2snLE1BTlVBTDonbWFudWFsJ307dmFyIFRvb2x0aXA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBUb29sdGlwKGVsZW1lbnQsY29uZmlnKXtpZih0eXBlb2YgUG9wcGVyPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFwncyB0b29sdGlwcyByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnLyknKTt9CnRoaXMuX2lzRW5hYmxlZD10cnVlO3RoaXMuX3RpbWVvdXQ9MDt0aGlzLl9ob3ZlclN0YXRlPScnO3RoaXMuX2FjdGl2ZVRyaWdnZXI9e307dGhpcy5fcG9wcGVyPW51bGw7dGhpcy5lbGVtZW50PWVsZW1lbnQ7dGhpcy5jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7dGhpcy50aXA9bnVsbDt0aGlzLl9zZXRMaXN0ZW5lcnMoKTt9CnZhciBfcHJvdG89VG9vbHRpcC5wcm90b3R5cGU7X3Byb3RvLmVuYWJsZT1mdW5jdGlvbiBlbmFibGUoKXt0aGlzLl9pc0VuYWJsZWQ9dHJ1ZTt9O19wcm90by5kaXNhYmxlPWZ1bmN0aW9uIGRpc2FibGUoKXt0aGlzLl9pc0VuYWJsZWQ9ZmFsc2U7fTtfcHJvdG8udG9nZ2xlRW5hYmxlZD1mdW5jdGlvbiB0b2dnbGVFbmFibGVkKCl7dGhpcy5faXNFbmFibGVkPSF0aGlzLl9pc0VuYWJsZWQ7fTtfcHJvdG8udG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZShldmVudCl7aWYoIXRoaXMuX2lzRW5hYmxlZCl7cmV0dXJuO30KaWYoZXZlbnQpe3ZhciBkYXRhS2V5PXRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7dmFyIGNvbnRleHQ9JChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXkpO2lmKCFjb250ZXh0KXtjb250ZXh0PW5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7JChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksY29udGV4dCk7fQpjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrPSFjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrO2lmKGNvbnRleHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSl7Y29udGV4dC5fZW50ZXIobnVsbCxjb250ZXh0KTt9ZWxzZXtjb250ZXh0Ll9sZWF2ZShudWxsLGNvbnRleHQpO319ZWxzZXtpZigkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3RoaXMuX2xlYXZlKG51bGwsdGhpcyk7cmV0dXJuO30KdGhpcy5fZW50ZXIobnVsbCx0aGlzKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpOyQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7JCh0aGlzLmVsZW1lbnQpLm9mZih0aGlzLmNvbnN0cnVjdG9yLkVWRU5UX0tFWSk7JCh0aGlzLmVsZW1lbnQpLmNsb3Nlc3QoJy5tb2RhbCcpLm9mZignaGlkZS5icy5tb2RhbCcpO2lmKHRoaXMudGlwKXskKHRoaXMudGlwKS5yZW1vdmUoKTt9CnRoaXMuX2lzRW5hYmxlZD1udWxsO3RoaXMuX3RpbWVvdXQ9bnVsbDt0aGlzLl9ob3ZlclN0YXRlPW51bGw7dGhpcy5fYWN0aXZlVHJpZ2dlcj1udWxsO2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5kZXN0cm95KCk7fQp0aGlzLl9wb3BwZXI9bnVsbDt0aGlzLmVsZW1lbnQ9bnVsbDt0aGlzLmNvbmZpZz1udWxsO3RoaXMudGlwPW51bGw7fTtfcHJvdG8uc2hvdz1mdW5jdGlvbiBzaG93KCl7dmFyIF90aGlzPXRoaXM7aWYoJCh0aGlzLmVsZW1lbnQpLmNzcygnZGlzcGxheScpPT09J25vbmUnKXt0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzJyk7fQp2YXIgc2hvd0V2ZW50PSQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtpZih0aGlzLmlzV2l0aENvbnRlbnQoKSYmdGhpcy5faXNFbmFibGVkKXskKHRoaXMuZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO3ZhciBzaGFkb3dSb290PVV0aWwuZmluZFNoYWRvd1Jvb3QodGhpcy5lbGVtZW50KTt2YXIgaXNJblRoZURvbT0kLmNvbnRhaW5zKHNoYWRvd1Jvb3QhPT1udWxsP3NoYWRvd1Jvb3Q6dGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuZWxlbWVudCk7aWYoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhaXNJblRoZURvbSl7cmV0dXJuO30KdmFyIHRpcD10aGlzLmdldFRpcEVsZW1lbnQoKTt2YXIgdGlwSWQ9VXRpbC5nZXRVSUQodGhpcy5jb25zdHJ1Y3Rvci5OQU1FKTt0aXAuc2V0QXR0cmlidXRlKCdpZCcsdGlwSWQpO3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLHRpcElkKTt0aGlzLnNldENvbnRlbnQoKTtpZih0aGlzLmNvbmZpZy5hbmltYXRpb24peyQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuRkFERSk7fQp2YXIgcGxhY2VtZW50PXR5cGVvZiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQ9PT0nZnVuY3Rpb24nP3RoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMsdGlwLHRoaXMuZWxlbWVudCk6dGhpcy5jb25maWcucGxhY2VtZW50O3ZhciBhdHRhY2htZW50PXRoaXMuX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KTt0aGlzLmFkZEF0dGFjaG1lbnRDbGFzcyhhdHRhY2htZW50KTt2YXIgY29udGFpbmVyPXRoaXMuX2dldENvbnRhaW5lcigpOyQodGlwKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksdGhpcyk7aWYoISQuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMudGlwKSl7JCh0aXApLmFwcGVuZFRvKGNvbnRhaW5lcik7fQokKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKTt0aGlzLl9wb3BwZXI9bmV3IFBvcHBlcih0aGlzLmVsZW1lbnQsdGlwLHtwbGFjZW1lbnQ6YXR0YWNobWVudCxtb2RpZmllcnM6e29mZnNldDp0aGlzLl9nZXRPZmZzZXQoKSxmbGlwOntiZWhhdmlvcjp0aGlzLmNvbmZpZy5mYWxsYmFja1BsYWNlbWVudH0sYXJyb3c6e2VsZW1lbnQ6U2VsZWN0b3IuQVJST1d9LHByZXZlbnRPdmVyZmxvdzp7Ym91bmRhcmllc0VsZW1lbnQ6dGhpcy5jb25maWcuYm91bmRhcnl9fSxvbkNyZWF0ZTpmdW5jdGlvbiBvbkNyZWF0ZShkYXRhKXtpZihkYXRhLm9yaWdpbmFsUGxhY2VtZW50IT09ZGF0YS5wbGFjZW1lbnQpe190aGlzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSk7fX0sb25VcGRhdGU6ZnVuY3Rpb24gb25VcGRhdGUoZGF0YSl7cmV0dXJuIF90aGlzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSk7fX0pOyQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJyxudWxsLCQubm9vcCk7fQp2YXIgY29tcGxldGU9ZnVuY3Rpb24gY29tcGxldGUoKXtpZihfdGhpcy5jb25maWcuYW5pbWF0aW9uKXtfdGhpcy5fZml4VHJhbnNpdGlvbigpO30KdmFyIHByZXZIb3ZlclN0YXRlPV90aGlzLl9ob3ZlclN0YXRlO190aGlzLl9ob3ZlclN0YXRlPW51bGw7JChfdGhpcy5lbGVtZW50KS50cmlnZ2VyKF90aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKTtpZihwcmV2SG92ZXJTdGF0ZT09PUhvdmVyU3RhdGUuT1VUKXtfdGhpcy5fbGVhdmUobnVsbCxfdGhpcyk7fX07aWYoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy50aXApOyQodGhpcy50aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NvbXBsZXRlKCk7fX19O19wcm90by5oaWRlPWZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spe3ZhciBfdGhpczI9dGhpczt2YXIgdGlwPXRoaXMuZ2V0VGlwRWxlbWVudCgpO3ZhciBoaWRlRXZlbnQ9JC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe2lmKF90aGlzMi5faG92ZXJTdGF0ZSE9PUhvdmVyU3RhdGUuU0hPVyYmdGlwLnBhcmVudE5vZGUpe3RpcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRpcCk7fQpfdGhpczIuX2NsZWFuVGlwQ2xhc3MoKTtfdGhpczIuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTskKF90aGlzMi5lbGVtZW50KS50cmlnZ2VyKF90aGlzMi5jb25zdHJ1Y3Rvci5FdmVudC5ISURERU4pO2lmKF90aGlzMi5fcG9wcGVyIT09bnVsbCl7X3RoaXMyLl9wb3BwZXIuZGVzdHJveSgpO30KaWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX07JCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtpZihoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CiQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vZmYoJ21vdXNlb3ZlcicsbnVsbCwkLm5vb3ApO30KdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkNMSUNLXT1mYWxzZTt0aGlzLl9hY3RpdmVUcmlnZ2VyW1RyaWdnZXIuRk9DVVNdPWZhbHNlO3RoaXMuX2FjdGl2ZVRyaWdnZXJbVHJpZ2dlci5IT1ZFUl09ZmFsc2U7aWYoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGlwKTskKHRpcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7Y29tcGxldGUoKTt9CnRoaXMuX2hvdmVyU3RhdGU9Jyc7fTtfcHJvdG8udXBkYXRlPWZ1bmN0aW9uIHVwZGF0ZSgpe2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5zY2hlZHVsZVVwZGF0ZSgpO319O19wcm90by5pc1dpdGhDb250ZW50PWZ1bmN0aW9uIGlzV2l0aENvbnRlbnQoKXtyZXR1cm4gQm9vbGVhbih0aGlzLmdldFRpdGxlKCkpO307X3Byb3RvLmFkZEF0dGFjaG1lbnRDbGFzcz1mdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCl7JCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYKyItIithdHRhY2htZW50KTt9O19wcm90by5nZXRUaXBFbGVtZW50PWZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKXt0aGlzLnRpcD10aGlzLnRpcHx8JCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07cmV0dXJuIHRoaXMudGlwO307X3Byb3RvLnNldENvbnRlbnQ9ZnVuY3Rpb24gc2V0Q29udGVudCgpe3ZhciB0aXA9dGhpcy5nZXRUaXBFbGVtZW50KCk7dGhpcy5zZXRFbGVtZW50Q29udGVudCgkKHRpcC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlRPT0xUSVBfSU5ORVIpKSx0aGlzLmdldFRpdGxlKCkpOyQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuRkFERSsiICIrQ2xhc3NOYW1lLlNIT1cpO307X3Byb3RvLnNldEVsZW1lbnRDb250ZW50PWZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LGNvbnRlbnQpe2lmKHR5cGVvZiBjb250ZW50PT09J29iamVjdCcmJihjb250ZW50Lm5vZGVUeXBlfHxjb250ZW50LmpxdWVyeSkpe2lmKHRoaXMuY29uZmlnLmh0bWwpe2lmKCEkKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSl7JGVsZW1lbnQuZW1wdHkoKS5hcHBlbmQoY29udGVudCk7fX1lbHNleyRlbGVtZW50LnRleHQoJChjb250ZW50KS50ZXh0KCkpO30KcmV0dXJuO30KaWYodGhpcy5jb25maWcuaHRtbCl7aWYodGhpcy5jb25maWcuc2FuaXRpemUpe2NvbnRlbnQ9c2FuaXRpemVIdG1sKGNvbnRlbnQsdGhpcy5jb25maWcud2hpdGVMaXN0LHRoaXMuY29uZmlnLnNhbml0aXplRm4pO30KJGVsZW1lbnQuaHRtbChjb250ZW50KTt9ZWxzZXskZWxlbWVudC50ZXh0KGNvbnRlbnQpO319O19wcm90by5nZXRUaXRsZT1mdW5jdGlvbiBnZXRUaXRsZSgpe3ZhciB0aXRsZT10aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7aWYoIXRpdGxlKXt0aXRsZT10eXBlb2YgdGhpcy5jb25maWcudGl0bGU9PT0nZnVuY3Rpb24nP3RoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KTp0aGlzLmNvbmZpZy50aXRsZTt9CnJldHVybiB0aXRsZTt9O19wcm90by5fZ2V0T2Zmc2V0PWZ1bmN0aW9uIF9nZXRPZmZzZXQoKXt2YXIgX3RoaXMzPXRoaXM7dmFyIG9mZnNldD17fTtpZih0eXBlb2YgdGhpcy5jb25maWcub2Zmc2V0PT09J2Z1bmN0aW9uJyl7b2Zmc2V0LmZuPWZ1bmN0aW9uKGRhdGEpe2RhdGEub2Zmc2V0cz1fb2JqZWN0U3ByZWFkKHt9LGRhdGEub2Zmc2V0cyxfdGhpczMuY29uZmlnLm9mZnNldChkYXRhLm9mZnNldHMsX3RoaXMzLmVsZW1lbnQpfHx7fSk7cmV0dXJuIGRhdGE7fTt9ZWxzZXtvZmZzZXQub2Zmc2V0PXRoaXMuY29uZmlnLm9mZnNldDt9CnJldHVybiBvZmZzZXQ7fTtfcHJvdG8uX2dldENvbnRhaW5lcj1mdW5jdGlvbiBfZ2V0Q29udGFpbmVyKCl7aWYodGhpcy5jb25maWcuY29udGFpbmVyPT09ZmFsc2Upe3JldHVybiBkb2N1bWVudC5ib2R5O30KaWYoVXRpbC5pc0VsZW1lbnQodGhpcy5jb25maWcuY29udGFpbmVyKSl7cmV0dXJuICQodGhpcy5jb25maWcuY29udGFpbmVyKTt9CnJldHVybiAkKGRvY3VtZW50KS5maW5kKHRoaXMuY29uZmlnLmNvbnRhaW5lcik7fTtfcHJvdG8uX2dldEF0dGFjaG1lbnQ9ZnVuY3Rpb24gX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KXtyZXR1cm4gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07fTtfcHJvdG8uX3NldExpc3RlbmVycz1mdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCl7dmFyIF90aGlzND10aGlzO3ZhciB0cmlnZ2Vycz10aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7dHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbih0cmlnZ2VyKXtpZih0cmlnZ2VyPT09J2NsaWNrJyl7JChfdGhpczQuZWxlbWVudCkub24oX3RoaXM0LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLF90aGlzNC5jb25maWcuc2VsZWN0b3IsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczQudG9nZ2xlKGV2ZW50KTt9KTt9ZWxzZSBpZih0cmlnZ2VyIT09VHJpZ2dlci5NQU5VQUwpe3ZhciBldmVudEluPXRyaWdnZXI9PT1UcmlnZ2VyLkhPVkVSP190aGlzNC5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUVOVEVSOl90aGlzNC5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU0lOO3ZhciBldmVudE91dD10cmlnZ2VyPT09VHJpZ2dlci5IT1ZFUj9fdGhpczQuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VMRUFWRTpfdGhpczQuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNPVVQ7JChfdGhpczQuZWxlbWVudCkub24oZXZlbnRJbixfdGhpczQuY29uZmlnLnNlbGVjdG9yLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXM0Ll9lbnRlcihldmVudCk7fSkub24oZXZlbnRPdXQsX3RoaXM0LmNvbmZpZy5zZWxlY3RvcixmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzNC5fbGVhdmUoZXZlbnQpO30pO319KTskKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oJ2hpZGUuYnMubW9kYWwnLGZ1bmN0aW9uKCl7aWYoX3RoaXM0LmVsZW1lbnQpe190aGlzNC5oaWRlKCk7fX0pO2lmKHRoaXMuY29uZmlnLnNlbGVjdG9yKXt0aGlzLmNvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LHRoaXMuY29uZmlnLHt0cmlnZ2VyOidtYW51YWwnLHNlbGVjdG9yOicnfSk7fWVsc2V7dGhpcy5fZml4VGl0bGUoKTt9fTtfcHJvdG8uX2ZpeFRpdGxlPWZ1bmN0aW9uIF9maXhUaXRsZSgpe3ZhciB0aXRsZVR5cGU9dHlwZW9mIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtpZih0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpfHx0aXRsZVR5cGUhPT0nc3RyaW5nJyl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScsdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKXx8JycpO3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywnJyk7fX07X3Byb3RvLl9lbnRlcj1mdW5jdGlvbiBfZW50ZXIoZXZlbnQsY29udGV4dCl7dmFyIGRhdGFLZXk9dGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtjb250ZXh0PWNvbnRleHR8fCQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtpZighY29udGV4dCl7Y29udGV4dD1uZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpOyQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LGNvbnRleHQpO30KaWYoZXZlbnQpe2NvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZT09PSdmb2N1c2luJz9UcmlnZ2VyLkZPQ1VTOlRyaWdnZXIuSE9WRVJdPXRydWU7fQppZigkKGNvbnRleHQuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVyl8fGNvbnRleHQuX2hvdmVyU3RhdGU9PT1Ib3ZlclN0YXRlLlNIT1cpe2NvbnRleHQuX2hvdmVyU3RhdGU9SG92ZXJTdGF0ZS5TSE9XO3JldHVybjt9CmNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtjb250ZXh0Ll9ob3ZlclN0YXRlPUhvdmVyU3RhdGUuU0hPVztpZighY29udGV4dC5jb25maWcuZGVsYXl8fCFjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KXtjb250ZXh0LnNob3coKTtyZXR1cm47fQpjb250ZXh0Ll90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihjb250ZXh0Ll9ob3ZlclN0YXRlPT09SG92ZXJTdGF0ZS5TSE9XKXtjb250ZXh0LnNob3coKTt9fSxjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTt9O19wcm90by5fbGVhdmU9ZnVuY3Rpb24gX2xlYXZlKGV2ZW50LGNvbnRleHQpe3ZhciBkYXRhS2V5PXRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7Y29udGV4dD1jb250ZXh0fHwkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7aWYoIWNvbnRleHQpe2NvbnRleHQ9bmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCx0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTskKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSxjb250ZXh0KTt9CmlmKGV2ZW50KXtjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGU9PT0nZm9jdXNvdXQnP1RyaWdnZXIuRk9DVVM6VHJpZ2dlci5IT1ZFUl09ZmFsc2U7fQppZihjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpe3JldHVybjt9CmNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtjb250ZXh0Ll9ob3ZlclN0YXRlPUhvdmVyU3RhdGUuT1VUO2lmKCFjb250ZXh0LmNvbmZpZy5kZWxheXx8IWNvbnRleHQuY29uZmlnLmRlbGF5LmhpZGUpe2NvbnRleHQuaGlkZSgpO3JldHVybjt9CmNvbnRleHQuX3RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGNvbnRleHQuX2hvdmVyU3RhdGU9PT1Ib3ZlclN0YXRlLk9VVCl7Y29udGV4dC5oaWRlKCk7fX0sY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSk7fTtfcHJvdG8uX2lzV2l0aEFjdGl2ZVRyaWdnZXI9ZnVuY3Rpb24gX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKXtmb3IodmFyIHRyaWdnZXIgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcil7aWYodGhpcy5fYWN0aXZlVHJpZ2dlclt0cmlnZ2VyXSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO307X3Byb3RvLl9nZXRDb25maWc9ZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpe3ZhciBkYXRhQXR0cmlidXRlcz0kKHRoaXMuZWxlbWVudCkuZGF0YSgpO09iamVjdC5rZXlzKGRhdGFBdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGFBdHRyKXtpZihESVNBTExPV0VEX0FUVFJJQlVURVMuaW5kZXhPZihkYXRhQXR0cikhPT0tMSl7ZGVsZXRlIGRhdGFBdHRyaWJ1dGVzW2RhdGFBdHRyXTt9fSk7Y29uZmlnPV9vYmplY3RTcHJlYWQoe30sdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LGRhdGFBdHRyaWJ1dGVzLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYodHlwZW9mIGNvbmZpZy5kZWxheT09PSdudW1iZXInKXtjb25maWcuZGVsYXk9e3Nob3c6Y29uZmlnLmRlbGF5LGhpZGU6Y29uZmlnLmRlbGF5fTt9CmlmKHR5cGVvZiBjb25maWcudGl0bGU9PT0nbnVtYmVyJyl7Y29uZmlnLnRpdGxlPWNvbmZpZy50aXRsZS50b1N0cmluZygpO30KaWYodHlwZW9mIGNvbmZpZy5jb250ZW50PT09J251bWJlcicpe2NvbmZpZy5jb250ZW50PWNvbmZpZy5jb250ZW50LnRvU3RyaW5nKCk7fQpVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLGNvbmZpZyx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKTtpZihjb25maWcuc2FuaXRpemUpe2NvbmZpZy50ZW1wbGF0ZT1zYW5pdGl6ZUh0bWwoY29uZmlnLnRlbXBsYXRlLGNvbmZpZy53aGl0ZUxpc3QsY29uZmlnLnNhbml0aXplRm4pO30KcmV0dXJuIGNvbmZpZzt9O19wcm90by5fZ2V0RGVsZWdhdGVDb25maWc9ZnVuY3Rpb24gX2dldERlbGVnYXRlQ29uZmlnKCl7dmFyIGNvbmZpZz17fTtpZih0aGlzLmNvbmZpZyl7Zm9yKHZhciBrZXkgaW4gdGhpcy5jb25maWcpe2lmKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldIT09dGhpcy5jb25maWdba2V5XSl7Y29uZmlnW2tleV09dGhpcy5jb25maWdba2V5XTt9fX0KcmV0dXJuIGNvbmZpZzt9O19wcm90by5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbiBfY2xlYW5UaXBDbGFzcygpe3ZhciAkdGlwPSQodGhpcy5nZXRUaXBFbGVtZW50KCkpO3ZhciB0YWJDbGFzcz0kdGlwLmF0dHIoJ2NsYXNzJykubWF0Y2goQlNDTFNfUFJFRklYX1JFR0VYKTtpZih0YWJDbGFzcyE9PW51bGwmJnRhYkNsYXNzLmxlbmd0aCl7JHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7fX07X3Byb3RvLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2U9ZnVuY3Rpb24gX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShwb3BwZXJEYXRhKXt2YXIgcG9wcGVySW5zdGFuY2U9cG9wcGVyRGF0YS5pbnN0YW5jZTt0aGlzLnRpcD1wb3BwZXJJbnN0YW5jZS5wb3BwZXI7dGhpcy5fY2xlYW5UaXBDbGFzcygpO3RoaXMuYWRkQXR0YWNobWVudENsYXNzKHRoaXMuX2dldEF0dGFjaG1lbnQocG9wcGVyRGF0YS5wbGFjZW1lbnQpKTt9O19wcm90by5fZml4VHJhbnNpdGlvbj1mdW5jdGlvbiBfZml4VHJhbnNpdGlvbigpe3ZhciB0aXA9dGhpcy5nZXRUaXBFbGVtZW50KCk7dmFyIGluaXRDb25maWdBbmltYXRpb249dGhpcy5jb25maWcuYW5pbWF0aW9uO2lmKHRpcC5nZXRBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50JykhPT1udWxsKXtyZXR1cm47fQokKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO3RoaXMuY29uZmlnLmFuaW1hdGlvbj1mYWxzZTt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt0aGlzLmNvbmZpZy5hbmltYXRpb249aW5pdENvbmZpZ0FuaW1hdGlvbjt9O1Rvb2x0aXAuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9dHlwZW9mIGNvbmZpZz09PSdvYmplY3QnJiZjb25maWc7aWYoIWRhdGEmJi9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSl7cmV0dXJuO30KaWYoIWRhdGEpe2RhdGE9bmV3IFRvb2x0aXAodGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2NvbmZpZ109PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIitjb25maWcrIlwiIik7fQpkYXRhW2NvbmZpZ10oKTt9fSk7fTtfY3JlYXRlQ2xhc3MoVG9vbHRpcCxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319LHtrZXk6Ik5BTUUiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gTkFNRTt9fSx7a2V5OiJEQVRBX0tFWSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEQVRBX0tFWTt9fSx7a2V5OiJFdmVudCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBFdmVudDt9fSx7a2V5OiJFVkVOVF9LRVkiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRVZFTlRfS0VZO319LHtrZXk6IkRlZmF1bHRUeXBlIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHRUeXBlO319XSk7cmV0dXJuIFRvb2x0aXA7fSgpOyQuZm5bTkFNRV09VG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9VG9vbHRpcDskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIFRvb2x0aXA7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvcG9wb3Zlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3Rvb2x0aXAuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi90b29sdGlwLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLlBvcG92ZXI9ZmFjdG9yeShnbG9iYWwualF1ZXJ5LGdsb2JhbC5Ub29sdGlwKSk7fSh0aGlzLGZ1bmN0aW9uKCQsVG9vbHRpcCl7J3VzZSBzdHJpY3QnOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpPyRbJ2RlZmF1bHQnXTokO1Rvb2x0aXA9VG9vbHRpcCYmVG9vbHRpcC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpP1Rvb2x0aXBbJ2RlZmF1bHQnXTpUb29sdGlwO2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO30KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pO31lbHNle29ialtrZXldPXZhbHVlO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307dmFyIG93bktleXM9T2JqZWN0LmtleXMoc291cmNlKTtpZih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09PSdmdW5jdGlvbicpe293bktleXM9b3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxzeW0pLmVudW1lcmFibGU7fSkpO30Kb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO30KcmV0dXJuIHRhcmdldDt9CmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe3N1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3I9c3ViQ2xhc3M7c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fQp2YXIgTkFNRT0ncG9wb3Zlcic7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLnBvcG92ZXInO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgQ0xBU1NfUFJFRklYPSdicy1wb3BvdmVyJzt2YXIgQlNDTFNfUFJFRklYX1JFR0VYPW5ldyBSZWdFeHAoIihefFxccykiK0NMQVNTX1BSRUZJWCsiXFxTKyIsJ2cnKTt2YXIgRGVmYXVsdD1fb2JqZWN0U3ByZWFkKHt9LFRvb2x0aXAuRGVmYXVsdCx7cGxhY2VtZW50OidyaWdodCcsdHJpZ2dlcjonY2xpY2snLGNvbnRlbnQ6JycsdGVtcGxhdGU6JzxkaXYgY2xhc3M9InBvcG92ZXIiIHJvbGU9InRvb2x0aXAiPicrJzxkaXYgY2xhc3M9ImFycm93Ij48L2Rpdj4nKyc8aDMgY2xhc3M9InBvcG92ZXItaGVhZGVyIj48L2gzPicrJzxkaXYgY2xhc3M9InBvcG92ZXItYm9keSI+PC9kaXY+PC9kaXY+J30pO3ZhciBEZWZhdWx0VHlwZT1fb2JqZWN0U3ByZWFkKHt9LFRvb2x0aXAuRGVmYXVsdFR5cGUse2NvbnRlbnQ6JyhzdHJpbmd8ZWxlbWVudHxmdW5jdGlvbiknfSk7dmFyIENsYXNzTmFtZT17RkFERTonZmFkZScsU0hPVzonc2hvdyd9O3ZhciBTZWxlY3Rvcj17VElUTEU6Jy5wb3BvdmVyLWhlYWRlcicsQ09OVEVOVDonLnBvcG92ZXItYm9keSd9O3ZhciBFdmVudD17SElERToiaGlkZSIrRVZFTlRfS0VZLEhJRERFTjoiaGlkZGVuIitFVkVOVF9LRVksU0hPVzoic2hvdyIrRVZFTlRfS0VZLFNIT1dOOiJzaG93biIrRVZFTlRfS0VZLElOU0VSVEVEOiJpbnNlcnRlZCIrRVZFTlRfS0VZLENMSUNLOiJjbGljayIrRVZFTlRfS0VZLEZPQ1VTSU46ImZvY3VzaW4iK0VWRU5UX0tFWSxGT0NVU09VVDoiZm9jdXNvdXQiK0VWRU5UX0tFWSxNT1VTRUVOVEVSOiJtb3VzZWVudGVyIitFVkVOVF9LRVksTU9VU0VMRUFWRToibW91c2VsZWF2ZSIrRVZFTlRfS0VZfTt2YXIgUG9wb3Zlcj1mdW5jdGlvbihfVG9vbHRpcCl7X2luaGVyaXRzTG9vc2UoUG9wb3ZlcixfVG9vbHRpcCk7ZnVuY3Rpb24gUG9wb3Zlcigpe3JldHVybiBfVG9vbHRpcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7fQp2YXIgX3Byb3RvPVBvcG92ZXIucHJvdG90eXBlO19wcm90by5pc1dpdGhDb250ZW50PWZ1bmN0aW9uIGlzV2l0aENvbnRlbnQoKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLl9nZXRDb250ZW50KCk7fTtfcHJvdG8uYWRkQXR0YWNobWVudENsYXNzPWZ1bmN0aW9uIGFkZEF0dGFjaG1lbnRDbGFzcyhhdHRhY2htZW50KXskKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhDTEFTU19QUkVGSVgrIi0iK2F0dGFjaG1lbnQpO307X3Byb3RvLmdldFRpcEVsZW1lbnQ9ZnVuY3Rpb24gZ2V0VGlwRWxlbWVudCgpe3RoaXMudGlwPXRoaXMudGlwfHwkKHRoaXMuY29uZmlnLnRlbXBsYXRlKVswXTtyZXR1cm4gdGhpcy50aXA7fTtfcHJvdG8uc2V0Q29udGVudD1mdW5jdGlvbiBzZXRDb250ZW50KCl7dmFyICR0aXA9JCh0aGlzLmdldFRpcEVsZW1lbnQoKSk7dGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuVElUTEUpLHRoaXMuZ2V0VGl0bGUoKSk7dmFyIGNvbnRlbnQ9dGhpcy5fZ2V0Q29udGVudCgpO2lmKHR5cGVvZiBjb250ZW50PT09J2Z1bmN0aW9uJyl7Y29udGVudD1jb250ZW50LmNhbGwodGhpcy5lbGVtZW50KTt9CnRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLkNPTlRFTlQpLGNvbnRlbnQpOyR0aXAucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUrIiAiK0NsYXNzTmFtZS5TSE9XKTt9O19wcm90by5fZ2V0Q29udGVudD1mdW5jdGlvbiBfZ2V0Q29udGVudCgpe3JldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKXx8dGhpcy5jb25maWcuY29udGVudDt9O19wcm90by5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbiBfY2xlYW5UaXBDbGFzcygpe3ZhciAkdGlwPSQodGhpcy5nZXRUaXBFbGVtZW50KCkpO3ZhciB0YWJDbGFzcz0kdGlwLmF0dHIoJ2NsYXNzJykubWF0Y2goQlNDTFNfUFJFRklYX1JFR0VYKTtpZih0YWJDbGFzcyE9PW51bGwmJnRhYkNsYXNzLmxlbmd0aD4wKXskdGlwLnJlbW92ZUNsYXNzKHRhYkNsYXNzLmpvaW4oJycpKTt9fTtQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO3ZhciBfY29uZmlnPXR5cGVvZiBjb25maWc9PT0nb2JqZWN0Jz9jb25maWc6bnVsbDtpZighZGF0YSYmL2Rpc3Bvc2V8aGlkZS8udGVzdChjb25maWcpKXtyZXR1cm47fQppZighZGF0YSl7ZGF0YT1uZXcgUG9wb3Zlcih0aGlzLF9jb25maWcpOyQodGhpcykuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhQb3BvdmVyLG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fSx7a2V5OiJEZWZhdWx0IixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHQ7fX0se2tleToiTkFNRSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBOQU1FO319LHtrZXk6IkRBVEFfS0VZIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERBVEFfS0VZO319LHtrZXk6IkV2ZW50IixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIEV2ZW50O319LHtrZXk6IkVWRU5UX0tFWSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBFVkVOVF9LRVk7fX0se2tleToiRGVmYXVsdFR5cGUiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdFR5cGU7fX1dKTtyZXR1cm4gUG9wb3Zlcjt9KFRvb2x0aXApOyQuZm5bTkFNRV09UG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9UG9wb3ZlcjskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIFBvcG92ZXI7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvc2Nyb2xsc3B5LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe3R5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJz9tb2R1bGUuZXhwb3J0cz1mYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLHJlcXVpcmUoJy4vdXRpbC5qcycpKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoWydqcXVlcnknLCcuL3V0aWwuanMnXSxmYWN0b3J5KTooZ2xvYmFsPWdsb2JhbHx8c2VsZixnbG9iYWwuU2Nyb2xsU3B5PWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0nc2Nyb2xsc3B5Jzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMuc2Nyb2xsc3B5Jzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgRGVmYXVsdD17b2Zmc2V0OjEwLG1ldGhvZDonYXV0bycsdGFyZ2V0OicnfTt2YXIgRGVmYXVsdFR5cGU9e29mZnNldDonbnVtYmVyJyxtZXRob2Q6J3N0cmluZycsdGFyZ2V0Oicoc3RyaW5nfGVsZW1lbnQpJ307dmFyIEV2ZW50PXtBQ1RJVkFURToiYWN0aXZhdGUiK0VWRU5UX0tFWSxTQ1JPTEw6InNjcm9sbCIrRVZFTlRfS0VZLExPQURfREFUQV9BUEk6ImxvYWQiK0VWRU5UX0tFWStEQVRBX0FQSV9LRVl9O3ZhciBDbGFzc05hbWU9e0RST1BET1dOX0lURU06J2Ryb3Bkb3duLWl0ZW0nLERST1BET1dOX01FTlU6J2Ryb3Bkb3duLW1lbnUnLEFDVElWRTonYWN0aXZlJ307dmFyIFNlbGVjdG9yPXtEQVRBX1NQWTonW2RhdGEtc3B5PSJzY3JvbGwiXScsQUNUSVZFOicuYWN0aXZlJyxOQVZfTElTVF9HUk9VUDonLm5hdiwgLmxpc3QtZ3JvdXAnLE5BVl9MSU5LUzonLm5hdi1saW5rJyxOQVZfSVRFTVM6Jy5uYXYtaXRlbScsTElTVF9JVEVNUzonLmxpc3QtZ3JvdXAtaXRlbScsRFJPUERPV046Jy5kcm9wZG93bicsRFJPUERPV05fSVRFTVM6Jy5kcm9wZG93bi1pdGVtJyxEUk9QRE9XTl9UT0dHTEU6Jy5kcm9wZG93bi10b2dnbGUnfTt2YXIgT2Zmc2V0TWV0aG9kPXtPRkZTRVQ6J29mZnNldCcsUE9TSVRJT046J3Bvc2l0aW9uJ307dmFyIFNjcm9sbFNweT1mdW5jdGlvbigpe2Z1bmN0aW9uIFNjcm9sbFNweShlbGVtZW50LGNvbmZpZyl7dmFyIF90aGlzPXRoaXM7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX3Njcm9sbEVsZW1lbnQ9ZWxlbWVudC50YWdOYW1lPT09J0JPRFknP3dpbmRvdzplbGVtZW50O3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoY29uZmlnKTt0aGlzLl9zZWxlY3Rvcj10aGlzLl9jb25maWcudGFyZ2V0KyIgIitTZWxlY3Rvci5OQVZfTElOS1MrIiwiKyh0aGlzLl9jb25maWcudGFyZ2V0KyIgIitTZWxlY3Rvci5MSVNUX0lURU1TKyIsIikrKHRoaXMuX2NvbmZpZy50YXJnZXQrIiAiK1NlbGVjdG9yLkRST1BET1dOX0lURU1TKTt0aGlzLl9vZmZzZXRzPVtdO3RoaXMuX3RhcmdldHM9W107dGhpcy5fYWN0aXZlVGFyZ2V0PW51bGw7dGhpcy5fc2Nyb2xsSGVpZ2h0PTA7JCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vbihFdmVudC5TQ1JPTEwsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpcy5fcHJvY2VzcyhldmVudCk7fSk7dGhpcy5yZWZyZXNoKCk7dGhpcy5fcHJvY2VzcygpO30KdmFyIF9wcm90bz1TY3JvbGxTcHkucHJvdG90eXBlO19wcm90by5yZWZyZXNoPWZ1bmN0aW9uIHJlZnJlc2goKXt2YXIgX3RoaXMyPXRoaXM7dmFyIGF1dG9NZXRob2Q9dGhpcy5fc2Nyb2xsRWxlbWVudD09PXRoaXMuX3Njcm9sbEVsZW1lbnQud2luZG93P09mZnNldE1ldGhvZC5PRkZTRVQ6T2Zmc2V0TWV0aG9kLlBPU0lUSU9OO3ZhciBvZmZzZXRNZXRob2Q9dGhpcy5fY29uZmlnLm1ldGhvZD09PSdhdXRvJz9hdXRvTWV0aG9kOnRoaXMuX2NvbmZpZy5tZXRob2Q7dmFyIG9mZnNldEJhc2U9b2Zmc2V0TWV0aG9kPT09T2Zmc2V0TWV0aG9kLlBPU0lUSU9OP3RoaXMuX2dldFNjcm9sbFRvcCgpOjA7dGhpcy5fb2Zmc2V0cz1bXTt0aGlzLl90YXJnZXRzPVtdO3RoaXMuX3Njcm9sbEhlaWdodD10aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTt2YXIgdGFyZ2V0cz1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3IpKTt0YXJnZXRzLm1hcChmdW5jdGlvbihlbGVtZW50KXt2YXIgdGFyZ2V0O3ZhciB0YXJnZXRTZWxlY3Rvcj1VdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7aWYodGFyZ2V0U2VsZWN0b3Ipe3RhcmdldD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTt9CmlmKHRhcmdldCl7dmFyIHRhcmdldEJDUj10YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYodGFyZ2V0QkNSLndpZHRofHx0YXJnZXRCQ1IuaGVpZ2h0KXtyZXR1cm5bJCh0YXJnZXQpW29mZnNldE1ldGhvZF0oKS50b3Arb2Zmc2V0QmFzZSx0YXJnZXRTZWxlY3Rvcl07fX0KcmV0dXJuIG51bGw7fSkuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtO30pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYVswXS1iWzBdO30pLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7X3RoaXMyLl9vZmZzZXRzLnB1c2goaXRlbVswXSk7X3RoaXMyLl90YXJnZXRzLnB1c2goaXRlbVsxXSk7fSk7fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpOyQodGhpcy5fc2Nyb2xsRWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7dGhpcy5fZWxlbWVudD1udWxsO3RoaXMuX3Njcm9sbEVsZW1lbnQ9bnVsbDt0aGlzLl9jb25maWc9bnVsbDt0aGlzLl9zZWxlY3Rvcj1udWxsO3RoaXMuX29mZnNldHM9bnVsbDt0aGlzLl90YXJnZXRzPW51bGw7dGhpcy5fYWN0aXZlVGFyZ2V0PW51bGw7dGhpcy5fc2Nyb2xsSGVpZ2h0PW51bGw7fTtfcHJvdG8uX2dldENvbmZpZz1mdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZyl7Y29uZmlnPV9vYmplY3RTcHJlYWQoe30sRGVmYXVsdCx0eXBlb2YgY29uZmlnPT09J29iamVjdCcmJmNvbmZpZz9jb25maWc6e30pO2lmKHR5cGVvZiBjb25maWcudGFyZ2V0IT09J3N0cmluZycpe3ZhciBpZD0kKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJyk7aWYoIWlkKXtpZD1VdGlsLmdldFVJRChOQU1FKTskKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJyxpZCk7fQpjb25maWcudGFyZ2V0PSIjIitpZDt9ClV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsY29uZmlnLERlZmF1bHRUeXBlKTtyZXR1cm4gY29uZmlnO307X3Byb3RvLl9nZXRTY3JvbGxUb3A9ZnVuY3Rpb24gX2dldFNjcm9sbFRvcCgpe3JldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50PT09d2luZG93P3RoaXMuX3Njcm9sbEVsZW1lbnQucGFnZVlPZmZzZXQ6dGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3A7fTtfcHJvdG8uX2dldFNjcm9sbEhlaWdodD1mdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCl7cmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0fHxNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTt9O19wcm90by5fZ2V0T2Zmc2V0SGVpZ2h0PWZ1bmN0aW9uIF9nZXRPZmZzZXRIZWlnaHQoKXtyZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudD09PXdpbmRvdz93aW5kb3cuaW5uZXJIZWlnaHQ6dGhpcy5fc2Nyb2xsRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7fTtfcHJvdG8uX3Byb2Nlc3M9ZnVuY3Rpb24gX3Byb2Nlc3MoKXt2YXIgc2Nyb2xsVG9wPXRoaXMuX2dldFNjcm9sbFRvcCgpK3RoaXMuX2NvbmZpZy5vZmZzZXQ7dmFyIHNjcm9sbEhlaWdodD10aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTt2YXIgbWF4U2Nyb2xsPXRoaXMuX2NvbmZpZy5vZmZzZXQrc2Nyb2xsSGVpZ2h0LXRoaXMuX2dldE9mZnNldEhlaWdodCgpO2lmKHRoaXMuX3Njcm9sbEhlaWdodCE9PXNjcm9sbEhlaWdodCl7dGhpcy5yZWZyZXNoKCk7fQppZihzY3JvbGxUb3A+PW1heFNjcm9sbCl7dmFyIHRhcmdldD10aGlzLl90YXJnZXRzW3RoaXMuX3RhcmdldHMubGVuZ3RoLTFdO2lmKHRoaXMuX2FjdGl2ZVRhcmdldCE9PXRhcmdldCl7dGhpcy5fYWN0aXZhdGUodGFyZ2V0KTt9CnJldHVybjt9CmlmKHRoaXMuX2FjdGl2ZVRhcmdldCYmc2Nyb2xsVG9wPHRoaXMuX29mZnNldHNbMF0mJnRoaXMuX29mZnNldHNbMF0+MCl7dGhpcy5fYWN0aXZlVGFyZ2V0PW51bGw7dGhpcy5fY2xlYXIoKTtyZXR1cm47fQp2YXIgb2Zmc2V0TGVuZ3RoPXRoaXMuX29mZnNldHMubGVuZ3RoO2Zvcih2YXIgaT1vZmZzZXRMZW5ndGg7aS0tOyl7dmFyIGlzQWN0aXZlVGFyZ2V0PXRoaXMuX2FjdGl2ZVRhcmdldCE9PXRoaXMuX3RhcmdldHNbaV0mJnNjcm9sbFRvcD49dGhpcy5fb2Zmc2V0c1tpXSYmKHR5cGVvZiB0aGlzLl9vZmZzZXRzW2krMV09PT0ndW5kZWZpbmVkJ3x8c2Nyb2xsVG9wPHRoaXMuX29mZnNldHNbaSsxXSk7aWYoaXNBY3RpdmVUYXJnZXQpe3RoaXMuX2FjdGl2YXRlKHRoaXMuX3RhcmdldHNbaV0pO319fTtfcHJvdG8uX2FjdGl2YXRlPWZ1bmN0aW9uIF9hY3RpdmF0ZSh0YXJnZXQpe3RoaXMuX2FjdGl2ZVRhcmdldD10YXJnZXQ7dGhpcy5fY2xlYXIoKTt2YXIgcXVlcmllcz10aGlzLl9zZWxlY3Rvci5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHNlbGVjdG9yKyJbZGF0YS10YXJnZXQ9XCIiK3RhcmdldCsiXCJdLCIrc2VsZWN0b3IrIltocmVmPVwiIit0YXJnZXQrIlwiXSI7fSk7dmFyICRsaW5rPSQoW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJpZXMuam9pbignLCcpKSkpO2lmKCRsaW5rLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9JVEVNKSl7JGxpbmsuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTikuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9UT0dHTEUpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpOyRsaW5rLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO31lbHNleyRsaW5rLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpOyRsaW5rLnBhcmVudHMoU2VsZWN0b3IuTkFWX0xJU1RfR1JPVVApLnByZXYoU2VsZWN0b3IuTkFWX0xJTktTKyIsICIrU2VsZWN0b3IuTElTVF9JVEVNUykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7JGxpbmsucGFyZW50cyhTZWxlY3Rvci5OQVZfTElTVF9HUk9VUCkucHJldihTZWxlY3Rvci5OQVZfSVRFTVMpLmNoaWxkcmVuKFNlbGVjdG9yLk5BVl9MSU5LUykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fQokKHRoaXMuX3Njcm9sbEVsZW1lbnQpLnRyaWdnZXIoRXZlbnQuQUNUSVZBVEUse3JlbGF0ZWRUYXJnZXQ6dGFyZ2V0fSk7fTtfcHJvdG8uX2NsZWFyPWZ1bmN0aW9uIF9jbGVhcigpe1tdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZWxlY3RvcikpLmZpbHRlcihmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLkFDVElWRSk7fSkuZm9yRWFjaChmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZS5BQ1RJVkUpO30pO307U2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO3ZhciBfY29uZmlnPXR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnO2lmKCFkYXRhKXtkYXRhPW5ldyBTY3JvbGxTcHkodGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2NvbmZpZ109PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIitjb25maWcrIlwiIik7fQpkYXRhW2NvbmZpZ10oKTt9fSk7fTtfY3JlYXRlQ2xhc3MoU2Nyb2xsU3B5LG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fSx7a2V5OiJEZWZhdWx0IixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHQ7fX1dKTtyZXR1cm4gU2Nyb2xsU3B5O30oKTskKHdpbmRvdykub24oRXZlbnQuTE9BRF9EQVRBX0FQSSxmdW5jdGlvbigpe3ZhciBzY3JvbGxTcHlzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5EQVRBX1NQWSkpO3ZhciBzY3JvbGxTcHlzTGVuZ3RoPXNjcm9sbFNweXMubGVuZ3RoO2Zvcih2YXIgaT1zY3JvbGxTcHlzTGVuZ3RoO2ktLTspe3ZhciAkc3B5PSQoc2Nyb2xsU3B5c1tpXSk7U2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkc3B5LCRzcHkuZGF0YSgpKTt9fSk7JC5mbltOQU1FXT1TY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPVNjcm9sbFNweTskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gU2Nyb2xsU3B5O30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL3RhYi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLlRhYj1mYWN0b3J5KGdsb2JhbC5qUXVlcnksZ2xvYmFsLlV0aWwpKTt9KHRoaXMsZnVuY3Rpb24oJCxVdGlsKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQp2YXIgTkFNRT0ndGFiJzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMudGFiJzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxDTElDS19EQVRBX0FQSToiY2xpY2siK0VWRU5UX0tFWStEQVRBX0FQSV9LRVl9O3ZhciBDbGFzc05hbWU9e0RST1BET1dOX01FTlU6J2Ryb3Bkb3duLW1lbnUnLEFDVElWRTonYWN0aXZlJyxESVNBQkxFRDonZGlzYWJsZWQnLEZBREU6J2ZhZGUnLFNIT1c6J3Nob3cnfTt2YXIgU2VsZWN0b3I9e0RST1BET1dOOicuZHJvcGRvd24nLE5BVl9MSVNUX0dST1VQOicubmF2LCAubGlzdC1ncm91cCcsQUNUSVZFOicuYWN0aXZlJyxBQ1RJVkVfVUw6Jz4gbGkgPiAuYWN0aXZlJyxEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSJ0YWIiXSwgW2RhdGEtdG9nZ2xlPSJwaWxsIl0sIFtkYXRhLXRvZ2dsZT0ibGlzdCJdJyxEUk9QRE9XTl9UT0dHTEU6Jy5kcm9wZG93bi10b2dnbGUnLERST1BET1dOX0FDVElWRV9DSElMRDonPiAuZHJvcGRvd24tbWVudSAuYWN0aXZlJ307dmFyIFRhYj1mdW5jdGlvbigpe2Z1bmN0aW9uIFRhYihlbGVtZW50KXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7fQp2YXIgX3Byb3RvPVRhYi5wcm90b3R5cGU7X3Byb3RvLnNob3c9ZnVuY3Rpb24gc2hvdygpe3ZhciBfdGhpcz10aGlzO2lmKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSYmdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJiQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSl8fCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSl7cmV0dXJuO30KdmFyIHRhcmdldDt2YXIgcHJldmlvdXM7dmFyIGxpc3RFbGVtZW50PSQodGhpcy5fZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5OQVZfTElTVF9HUk9VUClbMF07dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtpZihsaXN0RWxlbWVudCl7dmFyIGl0ZW1TZWxlY3Rvcj1saXN0RWxlbWVudC5ub2RlTmFtZT09PSdVTCd8fGxpc3RFbGVtZW50Lm5vZGVOYW1lPT09J09MJz9TZWxlY3Rvci5BQ1RJVkVfVUw6U2VsZWN0b3IuQUNUSVZFO3ByZXZpb3VzPSQubWFrZUFycmF5KCQobGlzdEVsZW1lbnQpLmZpbmQoaXRlbVNlbGVjdG9yKSk7cHJldmlvdXM9cHJldmlvdXNbcHJldmlvdXMubGVuZ3RoLTFdO30KdmFyIGhpZGVFdmVudD0kLkV2ZW50KEV2ZW50LkhJREUse3JlbGF0ZWRUYXJnZXQ6dGhpcy5fZWxlbWVudH0pO3ZhciBzaG93RXZlbnQ9JC5FdmVudChFdmVudC5TSE9XLHtyZWxhdGVkVGFyZ2V0OnByZXZpb3VzfSk7aWYocHJldmlvdXMpeyQocHJldmlvdXMpLnRyaWdnZXIoaGlkZUV2ZW50KTt9CiQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO2lmKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8aGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQppZihzZWxlY3Rvcil7dGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO30KdGhpcy5fYWN0aXZhdGUodGhpcy5fZWxlbWVudCxsaXN0RWxlbWVudCk7dmFyIGNvbXBsZXRlPWZ1bmN0aW9uIGNvbXBsZXRlKCl7dmFyIGhpZGRlbkV2ZW50PSQuRXZlbnQoRXZlbnQuSElEREVOLHtyZWxhdGVkVGFyZ2V0Ol90aGlzLl9lbGVtZW50fSk7dmFyIHNob3duRXZlbnQ9JC5FdmVudChFdmVudC5TSE9XTix7cmVsYXRlZFRhcmdldDpwcmV2aW91c30pOyQocHJldmlvdXMpLnRyaWdnZXIoaGlkZGVuRXZlbnQpOyQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7fTtpZih0YXJnZXQpe3RoaXMuX2FjdGl2YXRlKHRhcmdldCx0YXJnZXQucGFyZW50Tm9kZSxjb21wbGV0ZSk7fWVsc2V7Y29tcGxldGUoKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2VsZW1lbnQ9bnVsbDt9O19wcm90by5fYWN0aXZhdGU9ZnVuY3Rpb24gX2FjdGl2YXRlKGVsZW1lbnQsY29udGFpbmVyLGNhbGxiYWNrKXt2YXIgX3RoaXMyPXRoaXM7dmFyIGFjdGl2ZUVsZW1lbnRzPWNvbnRhaW5lciYmKGNvbnRhaW5lci5ub2RlTmFtZT09PSdVTCd8fGNvbnRhaW5lci5ub2RlTmFtZT09PSdPTCcpPyQoY29udGFpbmVyKS5maW5kKFNlbGVjdG9yLkFDVElWRV9VTCk6JChjb250YWluZXIpLmNoaWxkcmVuKFNlbGVjdG9yLkFDVElWRSk7dmFyIGFjdGl2ZT1hY3RpdmVFbGVtZW50c1swXTt2YXIgaXNUcmFuc2l0aW9uaW5nPWNhbGxiYWNrJiZhY3RpdmUmJiQoYWN0aXZlKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSk7dmFyIGNvbXBsZXRlPWZ1bmN0aW9uIGNvbXBsZXRlKCl7cmV0dXJuIF90aGlzMi5fdHJhbnNpdGlvbkNvbXBsZXRlKGVsZW1lbnQsYWN0aXZlLGNhbGxiYWNrKTt9O2lmKGFjdGl2ZSYmaXNUcmFuc2l0aW9uaW5nKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQoYWN0aXZlKTskKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NvbXBsZXRlKCk7fX07X3Byb3RvLl90cmFuc2l0aW9uQ29tcGxldGU9ZnVuY3Rpb24gX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LGFjdGl2ZSxjYWxsYmFjayl7aWYoYWN0aXZlKXskKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7dmFyIGRyb3Bkb3duQ2hpbGQ9JChhY3RpdmUucGFyZW50Tm9kZSkuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTEQpWzBdO2lmKGRyb3Bkb3duQ2hpbGQpeyQoZHJvcGRvd25DaGlsZCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fQppZihhY3RpdmUuZ2V0QXR0cmlidXRlKCdyb2xlJyk9PT0ndGFiJyl7YWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsZmFsc2UpO319CiQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7aWYoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3JvbGUnKT09PSd0YWInKXtlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsdHJ1ZSk7fQpVdGlsLnJlZmxvdyhlbGVtZW50KTtpZihlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuRkFERSkpe2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuU0hPVyk7fQppZihlbGVtZW50LnBhcmVudE5vZGUmJiQoZWxlbWVudC5wYXJlbnROb2RlKS5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUERPV05fTUVOVSkpe3ZhciBkcm9wZG93bkVsZW1lbnQ9JChlbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKVswXTtpZihkcm9wZG93bkVsZW1lbnQpe3ZhciBkcm9wZG93blRvZ2dsZUxpc3Q9W10uc2xpY2UuY2FsbChkcm9wZG93bkVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5EUk9QRE9XTl9UT0dHTEUpKTskKGRyb3Bkb3duVG9nZ2xlTGlzdCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fQplbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsdHJ1ZSk7fQppZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fTtUYWIuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciAkdGhpcz0kKHRoaXMpO3ZhciBkYXRhPSR0aGlzLmRhdGEoREFUQV9LRVkpO2lmKCFkYXRhKXtkYXRhPW5ldyBUYWIodGhpcyk7JHRoaXMuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhUYWIsbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319XSk7cmV0dXJuIFRhYjt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuREFUQV9UT0dHTEUsZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7VGFiLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRoaXMpLCdzaG93Jyk7fSk7JC5mbltOQU1FXT1UYWIuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPVRhYjskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gVGFiO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL3RvYXN0LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe3R5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJz9tb2R1bGUuZXhwb3J0cz1mYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLHJlcXVpcmUoJy4vdXRpbC5qcycpKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoWydqcXVlcnknLCcuL3V0aWwuanMnXSxmYWN0b3J5KTooZ2xvYmFsPWdsb2JhbHx8c2VsZixnbG9iYWwuVG9hc3Q9ZmFjdG9yeShnbG9iYWwualF1ZXJ5LGdsb2JhbC5VdGlsKSk7fSh0aGlzLGZ1bmN0aW9uKCQsVXRpbCl7J3VzZSBzdHJpY3QnOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpPyRbJ2RlZmF1bHQnXTokO1V0aWw9VXRpbCYmVXRpbC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpP1V0aWxbJ2RlZmF1bHQnXTpVdGlsO2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO30KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pO31lbHNle29ialtrZXldPXZhbHVlO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307dmFyIG93bktleXM9T2JqZWN0LmtleXMoc291cmNlKTtpZih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09PSdmdW5jdGlvbicpe293bktleXM9b3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxzeW0pLmVudW1lcmFibGU7fSkpO30Kb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO30KcmV0dXJuIHRhcmdldDt9CnZhciBOQU1FPSd0b2FzdCc7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLnRvYXN0Jzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIEV2ZW50PXtDTElDS19ESVNNSVNTOiJjbGljay5kaXNtaXNzIitFVkVOVF9LRVksSElERToiaGlkZSIrRVZFTlRfS0VZLEhJRERFTjoiaGlkZGVuIitFVkVOVF9LRVksU0hPVzoic2hvdyIrRVZFTlRfS0VZLFNIT1dOOiJzaG93biIrRVZFTlRfS0VZfTt2YXIgQ2xhc3NOYW1lPXtGQURFOidmYWRlJyxISURFOidoaWRlJyxTSE9XOidzaG93JyxTSE9XSU5HOidzaG93aW5nJ307dmFyIERlZmF1bHRUeXBlPXthbmltYXRpb246J2Jvb2xlYW4nLGF1dG9oaWRlOidib29sZWFuJyxkZWxheTonbnVtYmVyJ307dmFyIERlZmF1bHQ9e2FuaW1hdGlvbjp0cnVlLGF1dG9oaWRlOnRydWUsZGVsYXk6NTAwfTt2YXIgU2VsZWN0b3I9e0RBVEFfRElTTUlTUzonW2RhdGEtZGlzbWlzcz0idG9hc3QiXSd9O3ZhciBUb2FzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIFRvYXN0KGVsZW1lbnQsY29uZmlnKXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7dGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhjb25maWcpO3RoaXMuX3RpbWVvdXQ9bnVsbDt0aGlzLl9zZXRMaXN0ZW5lcnMoKTt9CnZhciBfcHJvdG89VG9hc3QucHJvdG90eXBlO19wcm90by5zaG93PWZ1bmN0aW9uIHNob3coKXt2YXIgX3RoaXM9dGhpczskKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPVyk7aWYodGhpcy5fY29uZmlnLmFuaW1hdGlvbil7dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZS5GQURFKTt9CnZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe190aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLlNIT1dJTkcpO190aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLlNIT1cpOyQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPV04pO2lmKF90aGlzLl9jb25maWcuYXV0b2hpZGUpe190aGlzLmhpZGUoKTt9fTt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLkhJREUpO3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuU0hPV0lORyk7aWYodGhpcy5fY29uZmlnLmFuaW1hdGlvbil7dmFyIHRyYW5zaXRpb25EdXJhdGlvbj1VdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOyQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7Y29tcGxldGUoKTt9fTtfcHJvdG8uaGlkZT1mdW5jdGlvbiBoaWRlKHdpdGhvdXRUaW1lb3V0KXt2YXIgX3RoaXMyPXRoaXM7aWYoIXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENsYXNzTmFtZS5TSE9XKSl7cmV0dXJuO30KJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LkhJREUpO2lmKHdpdGhvdXRUaW1lb3V0KXt0aGlzLl9jbG9zZSgpO31lbHNle3RoaXMuX3RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzMi5fY2xvc2UoKTt9LHRoaXMuX2NvbmZpZy5kZWxheSk7fX07X3Byb3RvLmRpc3Bvc2U9ZnVuY3Rpb24gZGlzcG9zZSgpe2NsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTt0aGlzLl90aW1lb3V0PW51bGw7aWYodGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLlNIT1cpKXt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLlNIT1cpO30KJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuQ0xJQ0tfRElTTUlTUyk7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2VsZW1lbnQ9bnVsbDt0aGlzLl9jb25maWc9bnVsbDt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LCQodGhpcy5fZWxlbWVudCkuZGF0YSgpLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7VXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSxjb25maWcsdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7cmV0dXJuIGNvbmZpZzt9O19wcm90by5fc2V0TGlzdGVuZXJzPWZ1bmN0aW9uIF9zZXRMaXN0ZW5lcnMoKXt2YXIgX3RoaXMzPXRoaXM7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLFNlbGVjdG9yLkRBVEFfRElTTUlTUyxmdW5jdGlvbigpe3JldHVybiBfdGhpczMuaGlkZSh0cnVlKTt9KTt9O19wcm90by5fY2xvc2U9ZnVuY3Rpb24gX2Nsb3NlKCl7dmFyIF90aGlzND10aGlzO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe190aGlzNC5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZS5ISURFKTskKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURERU4pO307dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZS5TSE9XKTtpZih0aGlzLl9jb25maWcuYW5pbWF0aW9uKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7JCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCxjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTt9ZWxzZXtjb21wbGV0ZSgpO319O1RvYXN0Ll9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgJGVsZW1lbnQ9JCh0aGlzKTt2YXIgZGF0YT0kZWxlbWVudC5kYXRhKERBVEFfS0VZKTt2YXIgX2NvbmZpZz10eXBlb2YgY29uZmlnPT09J29iamVjdCcmJmNvbmZpZztpZighZGF0YSl7ZGF0YT1uZXcgVG9hc3QodGhpcyxfY29uZmlnKTskZWxlbWVudC5kYXRhKERBVEFfS0VZLGRhdGEpO30KaWYodHlwZW9mIGNvbmZpZz09PSdzdHJpbmcnKXtpZih0eXBlb2YgZGF0YVtjb25maWddPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIrY29uZmlnKyJcIiIpO30KZGF0YVtjb25maWddKHRoaXMpO319KTt9O19jcmVhdGVDbGFzcyhUb2FzdCxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdFR5cGUiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdFR5cGU7fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319XSk7cmV0dXJuIFRvYXN0O30oKTskLmZuW05BTUVdPVRvYXN0Ll9qUXVlcnlJbnRlcmZhY2U7JC5mbltOQU1FXS5Db25zdHJ1Y3Rvcj1Ub2FzdDskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVG9hc3QuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBUb2FzdDt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL3RlbXB1c2RvbWludXMvdGVtcHVzZG9taW51cy5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8KaWYodHlwZW9mIGpRdWVyeT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgRXJyb3IoJ1RlbXB1cyBEb21pbnVzIEJvb3RzdHJhcDRcJ3MgcmVxdWlyZXMgalF1ZXJ5LiBqUXVlcnkgbXVzdCBiZSBpbmNsdWRlZCBiZWZvcmUgVGVtcHVzIERvbWludXMgQm9vdHN0cmFwNFwncyBKYXZhU2NyaXB0LicpO30KK2Z1bmN0aW9uKCQpe3ZhciB2ZXJzaW9uPSQuZm4uanF1ZXJ5LnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKTtpZigodmVyc2lvblswXTwyJiZ2ZXJzaW9uWzFdPDkpfHwodmVyc2lvblswXT09PTEmJnZlcnNpb25bMV09PT05JiZ2ZXJzaW9uWzJdPDEpfHwodmVyc2lvblswXT49NCkpe3Rocm93IG5ldyBFcnJvcignVGVtcHVzIERvbWludXMgQm9vdHN0cmFwNFwncyByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgdjMuMC4wIGJ1dCBsZXNzIHRoYW4gdjQuMC4wJyk7fX0oalF1ZXJ5KTtpZih0eXBlb2YgbW9tZW50PT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBFcnJvcignVGVtcHVzIERvbWludXMgQm9vdHN0cmFwNFwncyByZXF1aXJlcyBtb21lbnQuanMuIE1vbWVudC5qcyBtdXN0IGJlIGluY2x1ZGVkIGJlZm9yZSBUZW1wdXMgRG9taW51cyBCb290c3RyYXA0XCdzIEphdmFTY3JpcHQuJyk7fQp2YXIgdmVyc2lvbj1tb21lbnQudmVyc2lvbi5zcGxpdCgnLicpCmlmKCh2ZXJzaW9uWzBdPD0yJiZ2ZXJzaW9uWzFdPDE3KXx8KHZlcnNpb25bMF0+PTMpKXt0aHJvdyBuZXcgRXJyb3IoJ1RlbXB1cyBEb21pbnVzIEJvb3RzdHJhcDRcJ3MgcmVxdWlyZXMgYXQgbGVhc3QgbW9tZW50LmpzIHYyLjE3LjAgYnV0IGxlc3MgdGhhbiB2My4wLjAnKTt9CitmdW5jdGlvbigpe3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09InN5bWJvbCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqO307dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1yZXR1cm4gZnVuY3Rpb24oQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fTt9KCk7ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZighc2VsZil7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTt9cmV0dXJuIGNhbGwmJih0eXBlb2YgY2FsbD09PSJvYmplY3QifHx0eXBlb2YgY2FsbD09PSJmdW5jdGlvbiIpP2NhbGw6c2VsZjt9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PSJmdW5jdGlvbiImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk6c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319CnZhciBEYXRlVGltZVBpY2tlcj1mdW5jdGlvbigkLG1vbWVudCl7dmFyIE5BTUU9J2RhdGV0aW1lcGlja2VyJyxEQVRBX0tFWT0nJytOQU1FLEVWRU5UX0tFWT0nLicrREFUQV9LRVksREFUQV9BUElfS0VZPScuZGF0YS1hcGknLFNlbGVjdG9yPXtEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSInK0RBVEFfS0VZKyciXSd9LENsYXNzTmFtZT17SU5QVVQ6TkFNRSsnLWlucHV0J30sRXZlbnQ9e0NIQU5HRTonY2hhbmdlJytFVkVOVF9LRVksQkxVUjonYmx1cicrRVZFTlRfS0VZLEtFWVVQOidrZXl1cCcrRVZFTlRfS0VZLEtFWURPV046J2tleWRvd24nK0VWRU5UX0tFWSxGT0NVUzonZm9jdXMnK0VWRU5UX0tFWSxDTElDS19EQVRBX0FQSTonY2xpY2snK0VWRU5UX0tFWStEQVRBX0FQSV9LRVksVVBEQVRFOid1cGRhdGUnK0VWRU5UX0tFWSxFUlJPUjonZXJyb3InK0VWRU5UX0tFWSxISURFOidoaWRlJytFVkVOVF9LRVksU0hPVzonc2hvdycrRVZFTlRfS0VZfSxEYXRlUGlja2VyTW9kZXM9W3tDTEFTU19OQU1FOidkYXlzJyxOQVZfRlVOQ1RJT046J00nLE5BVl9TVEVQOjF9LHtDTEFTU19OQU1FOidtb250aHMnLE5BVl9GVU5DVElPTjoneScsTkFWX1NURVA6MX0se0NMQVNTX05BTUU6J3llYXJzJyxOQVZfRlVOQ1RJT046J3knLE5BVl9TVEVQOjEwfSx7Q0xBU1NfTkFNRTonZGVjYWRlcycsTkFWX0ZVTkNUSU9OOid5JyxOQVZfU1RFUDoxMDB9XSxLZXlNYXA9eyd1cCc6MzgsMzg6J3VwJywnZG93bic6NDAsNDA6J2Rvd24nLCdsZWZ0JzozNywzNzonbGVmdCcsJ3JpZ2h0JzozOSwzOToncmlnaHQnLCd0YWInOjksOTondGFiJywnZXNjYXBlJzoyNywyNzonZXNjYXBlJywnZW50ZXInOjEzLDEzOidlbnRlcicsJ3BhZ2VVcCc6MzMsMzM6J3BhZ2VVcCcsJ3BhZ2VEb3duJzozNCwzNDoncGFnZURvd24nLCdzaGlmdCc6MTYsMTY6J3NoaWZ0JywnY29udHJvbCc6MTcsMTc6J2NvbnRyb2wnLCdzcGFjZSc6MzIsMzI6J3NwYWNlJywndCc6ODQsODQ6J3QnLCdkZWxldGUnOjQ2LDQ2OidkZWxldGUnfSxWaWV3TW9kZXM9Wyd0aW1lcycsJ2RheXMnLCdtb250aHMnLCd5ZWFycycsJ2RlY2FkZXMnXSxrZXlTdGF0ZT17fSxrZXlQcmVzc0hhbmRsZWQ9e307dmFyIE1pblZpZXdNb2RlTnVtYmVyPTAsRGVmYXVsdD17dGltZVpvbmU6JycsZm9ybWF0OmZhbHNlLGRheVZpZXdIZWFkZXJGb3JtYXQ6J01NTU0gWVlZWScsZXh0cmFGb3JtYXRzOmZhbHNlLHN0ZXBwaW5nOjEsbWluRGF0ZTpmYWxzZSxtYXhEYXRlOmZhbHNlLHVzZUN1cnJlbnQ6dHJ1ZSxjb2xsYXBzZTp0cnVlLGxvY2FsZTptb21lbnQubG9jYWxlKCksZGVmYXVsdERhdGU6ZmFsc2UsZGlzYWJsZWREYXRlczpmYWxzZSxlbmFibGVkRGF0ZXM6ZmFsc2UsaWNvbnM6e3RpbWU6J2ZhIGZhLWNsb2NrLW8nLGRhdGU6J2ZhIGZhLWNhbGVuZGFyJyx1cDonZmEgZmEtYXJyb3ctdXAnLGRvd246J2ZhIGZhLWFycm93LWRvd24nLHByZXZpb3VzOidmYSBmYS1jaGV2cm9uLWxlZnQnLG5leHQ6J2ZhIGZhLWNoZXZyb24tcmlnaHQnLHRvZGF5OidmYSBmYS1jYWxlbmRhci1jaGVjay1vJyxjbGVhcjonZmEgZmEtZGVsZXRlJyxjbG9zZTonZmEgZmEtdGltZXMnfSx0b29sdGlwczp7dG9kYXk6J0dvIHRvIHRvZGF5JyxjbGVhcjonQ2xlYXIgc2VsZWN0aW9uJyxjbG9zZTonQ2xvc2UgdGhlIHBpY2tlcicsc2VsZWN0TW9udGg6J1NlbGVjdCBNb250aCcscHJldk1vbnRoOidQcmV2aW91cyBNb250aCcsbmV4dE1vbnRoOidOZXh0IE1vbnRoJyxzZWxlY3RZZWFyOidTZWxlY3QgWWVhcicscHJldlllYXI6J1ByZXZpb3VzIFllYXInLG5leHRZZWFyOidOZXh0IFllYXInLHNlbGVjdERlY2FkZTonU2VsZWN0IERlY2FkZScscHJldkRlY2FkZTonUHJldmlvdXMgRGVjYWRlJyxuZXh0RGVjYWRlOidOZXh0IERlY2FkZScscHJldkNlbnR1cnk6J1ByZXZpb3VzIENlbnR1cnknLG5leHRDZW50dXJ5OidOZXh0IENlbnR1cnknLHBpY2tIb3VyOidQaWNrIEhvdXInLGluY3JlbWVudEhvdXI6J0luY3JlbWVudCBIb3VyJyxkZWNyZW1lbnRIb3VyOidEZWNyZW1lbnQgSG91cicscGlja01pbnV0ZTonUGljayBNaW51dGUnLGluY3JlbWVudE1pbnV0ZTonSW5jcmVtZW50IE1pbnV0ZScsZGVjcmVtZW50TWludXRlOidEZWNyZW1lbnQgTWludXRlJyxwaWNrU2Vjb25kOidQaWNrIFNlY29uZCcsaW5jcmVtZW50U2Vjb25kOidJbmNyZW1lbnQgU2Vjb25kJyxkZWNyZW1lbnRTZWNvbmQ6J0RlY3JlbWVudCBTZWNvbmQnLHRvZ2dsZVBlcmlvZDonVG9nZ2xlIFBlcmlvZCcsc2VsZWN0VGltZTonU2VsZWN0IFRpbWUnLHNlbGVjdERhdGU6J1NlbGVjdCBEYXRlJ30sdXNlU3RyaWN0OmZhbHNlLHNpZGVCeVNpZGU6ZmFsc2UsZGF5c09mV2Vla0Rpc2FibGVkOmZhbHNlLGNhbGVuZGFyV2Vla3M6ZmFsc2Usdmlld01vZGU6J2RheXMnLHRvb2xiYXJQbGFjZW1lbnQ6J2RlZmF1bHQnLGJ1dHRvbnM6e3Nob3dUb2RheTpmYWxzZSxzaG93Q2xlYXI6ZmFsc2Usc2hvd0Nsb3NlOmZhbHNlfSx3aWRnZXRQb3NpdGlvbmluZzp7aG9yaXpvbnRhbDonYXV0bycsdmVydGljYWw6J2F1dG8nfSx3aWRnZXRQYXJlbnQ6bnVsbCxpZ25vcmVSZWFkb25seTpmYWxzZSxrZWVwT3BlbjpmYWxzZSxmb2N1c09uU2hvdzp0cnVlLGlubGluZTpmYWxzZSxrZWVwSW52YWxpZDpmYWxzZSxrZXlCaW5kczp7dXA6ZnVuY3Rpb24gdXAoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuc3VidHJhY3QoNywnZCcpKTt9ZWxzZXt0aGlzLmRhdGUoZC5jbG9uZSgpLmFkZCh0aGlzLnN0ZXBwaW5nKCksJ20nKSk7fQpyZXR1cm4gdHJ1ZTt9LGRvd246ZnVuY3Rpb24gZG93bigpe2lmKCF0aGlzLndpZGdldCl7dGhpcy5zaG93KCk7cmV0dXJuIGZhbHNlO30KdmFyIGQ9dGhpcy5fZGF0ZXNbMF18fHRoaXMuZ2V0TW9tZW50KCk7aWYodGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXInKS5pcygnOnZpc2libGUnKSl7dGhpcy5kYXRlKGQuY2xvbmUoKS5hZGQoNywnZCcpKTt9ZWxzZXt0aGlzLmRhdGUoZC5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc3RlcHBpbmcoKSwnbScpKTt9CnJldHVybiB0cnVlO30sJ2NvbnRyb2wgdXAnOmZ1bmN0aW9uIGNvbnRyb2xVcCgpe2lmKCF0aGlzLndpZGdldCl7cmV0dXJuIGZhbHNlO30KdmFyIGQ9dGhpcy5fZGF0ZXNbMF18fHRoaXMuZ2V0TW9tZW50KCk7aWYodGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXInKS5pcygnOnZpc2libGUnKSl7dGhpcy5kYXRlKGQuY2xvbmUoKS5zdWJ0cmFjdCgxLCd5JykpO31lbHNle3RoaXMuZGF0ZShkLmNsb25lKCkuYWRkKDEsJ2gnKSk7fQpyZXR1cm4gdHJ1ZTt9LCdjb250cm9sIGRvd24nOmZ1bmN0aW9uIGNvbnRyb2xEb3duKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLmFkZCgxLCd5JykpO31lbHNle3RoaXMuZGF0ZShkLmNsb25lKCkuc3VidHJhY3QoMSwnaCcpKTt9CnJldHVybiB0cnVlO30sbGVmdDpmdW5jdGlvbiBsZWZ0KCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLnN1YnRyYWN0KDEsJ2QnKSk7fQpyZXR1cm4gdHJ1ZTt9LHJpZ2h0OmZ1bmN0aW9uIHJpZ2h0KCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLmFkZCgxLCdkJykpO30KcmV0dXJuIHRydWU7fSxwYWdlVXA6ZnVuY3Rpb24gcGFnZVVwKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLnN1YnRyYWN0KDEsJ00nKSk7fQpyZXR1cm4gdHJ1ZTt9LHBhZ2VEb3duOmZ1bmN0aW9uIHBhZ2VEb3duKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLmFkZCgxLCdNJykpO30KcmV0dXJuIHRydWU7fSxlbnRlcjpmdW5jdGlvbiBlbnRlcigpe2lmKCF0aGlzLndpZGdldCl7cmV0dXJuIGZhbHNlO30KdGhpcy5oaWRlKCk7cmV0dXJuIHRydWU7fSxlc2NhcGU6ZnVuY3Rpb24gZXNjYXBlKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp0aGlzLmhpZGUoKTtyZXR1cm4gdHJ1ZTt9LCdjb250cm9sIHNwYWNlJzpmdW5jdGlvbiBjb250cm9sU3BhY2UoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CmlmKHRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMud2lkZ2V0LmZpbmQoJy5idG5bZGF0YS1hY3Rpb249InRvZ2dsZVBlcmlvZCJdJykuY2xpY2soKTt9CnJldHVybiB0cnVlO30sdDpmdW5jdGlvbiB0KCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp0aGlzLmRhdGUodGhpcy5nZXRNb21lbnQoKSk7cmV0dXJuIHRydWU7fSwnZGVsZXRlJzpmdW5jdGlvbiBfZGVsZXRlKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp0aGlzLmNsZWFyKCk7cmV0dXJuIHRydWU7fX0sZGVidWc6ZmFsc2UsYWxsb3dJbnB1dFRvZ2dsZTpmYWxzZSxkaXNhYmxlZFRpbWVJbnRlcnZhbHM6ZmFsc2UsZGlzYWJsZWRIb3VyczpmYWxzZSxlbmFibGVkSG91cnM6ZmFsc2Usdmlld0RhdGU6ZmFsc2UsYWxsb3dNdWx0aWRhdGU6ZmFsc2UsbXVsdGlkYXRlU2VwYXJhdG9yOicsJ307dmFyIERhdGVUaW1lUGlja2VyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGF0ZVRpbWVQaWNrZXIoZWxlbWVudCxvcHRpb25zKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxEYXRlVGltZVBpY2tlcik7dGhpcy5fb3B0aW9ucz10aGlzLl9nZXRPcHRpb25zKG9wdGlvbnMpO3RoaXMuX2VsZW1lbnQ9ZWxlbWVudDt0aGlzLl9kYXRlcz1bXTt0aGlzLl9kYXRlc0Zvcm1hdHRlZD1bXTt0aGlzLl92aWV3RGF0ZT1udWxsO3RoaXMudW5zZXQ9dHJ1ZTt0aGlzLmNvbXBvbmVudD1mYWxzZTt0aGlzLndpZGdldD1mYWxzZTt0aGlzLnVzZTI0SG91cnM9bnVsbDt0aGlzLmFjdHVhbEZvcm1hdD1udWxsO3RoaXMucGFyc2VGb3JtYXRzPW51bGw7dGhpcy5jdXJyZW50Vmlld01vZGU9bnVsbDt0aGlzLl9pbnQoKTt9CkRhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faW50PWZ1bmN0aW9uIF9pbnQoKXt2YXIgdGFyZ2V0SW5wdXQ9dGhpcy5fZWxlbWVudC5kYXRhKCd0YXJnZXQtaW5wdXQnKTtpZih0aGlzLl9lbGVtZW50LmlzKCdpbnB1dCcpKXt0aGlzLmlucHV0PXRoaXMuX2VsZW1lbnQ7fWVsc2UgaWYodGFyZ2V0SW5wdXQhPT11bmRlZmluZWQpe2lmKHRhcmdldElucHV0PT09J25lYXJlc3QnKXt0aGlzLmlucHV0PXRoaXMuX2VsZW1lbnQuZmluZCgnaW5wdXQnKTt9ZWxzZXt0aGlzLmlucHV0PSQodGFyZ2V0SW5wdXQpO319CnRoaXMuX2RhdGVzPVtdO3RoaXMuX2RhdGVzWzBdPXRoaXMuZ2V0TW9tZW50KCk7dGhpcy5fdmlld0RhdGU9dGhpcy5nZXRNb21lbnQoKS5jbG9uZSgpOyQuZXh0ZW5kKHRydWUsdGhpcy5fb3B0aW9ucyx0aGlzLl9kYXRhVG9PcHRpb25zKCkpO3RoaXMub3B0aW9ucyh0aGlzLl9vcHRpb25zKTt0aGlzLl9pbml0Rm9ybWF0dGluZygpO2lmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQmJnRoaXMuaW5wdXQuaXMoJ2lucHV0JykmJnRoaXMuaW5wdXQudmFsKCkudHJpbSgpLmxlbmd0aCE9PTApe3RoaXMuX3NldFZhbHVlKHRoaXMuX3BhcnNlSW5wdXREYXRlKHRoaXMuaW5wdXQudmFsKCkudHJpbSgpKSwwKTt9ZWxzZSBpZih0aGlzLl9vcHRpb25zLmRlZmF1bHREYXRlJiZ0aGlzLmlucHV0IT09dW5kZWZpbmVkJiZ0aGlzLmlucHV0LmF0dHIoJ3BsYWNlaG9sZGVyJyk9PT11bmRlZmluZWQpe3RoaXMuX3NldFZhbHVlKHRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGUsMCk7fQppZih0aGlzLl9vcHRpb25zLmlubGluZSl7dGhpcy5zaG93KCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24gX3VwZGF0ZSgpe2lmKCF0aGlzLndpZGdldCl7cmV0dXJuO30KdGhpcy5fZmlsbERhdGUoKTt0aGlzLl9maWxsVGltZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9zZXRWYWx1ZT1mdW5jdGlvbiBfc2V0VmFsdWUodGFyZ2V0TW9tZW50LGluZGV4KXt2YXIgb2xkRGF0ZT10aGlzLnVuc2V0P251bGw6dGhpcy5fZGF0ZXNbaW5kZXhdO3ZhciBvdXRwVmFsdWU9Jyc7aWYoIXRhcmdldE1vbWVudCl7aWYoIXRoaXMuX29wdGlvbnMuYWxsb3dNdWx0aWRhdGV8fHRoaXMuX2RhdGVzLmxlbmd0aD09PTEpe3RoaXMudW5zZXQ9dHJ1ZTt0aGlzLl9kYXRlcz1bXTt0aGlzLl9kYXRlc0Zvcm1hdHRlZD1bXTt9ZWxzZXtvdXRwVmFsdWU9dGhpcy5fZWxlbWVudC5kYXRhKCdkYXRlJykrJywnO291dHBWYWx1ZT1vdXRwVmFsdWUucmVwbGFjZShvbGREYXRlLmZvcm1hdCh0aGlzLmFjdHVhbEZvcm1hdCkrJywnLCcnKS5yZXBsYWNlKCcsLCcsJycpLnJlcGxhY2UoLyxccyokLywnJyk7dGhpcy5fZGF0ZXMuc3BsaWNlKGluZGV4LDEpO3RoaXMuX2RhdGVzRm9ybWF0dGVkLnNwbGljZShpbmRleCwxKTt9CmlmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQpe3RoaXMuaW5wdXQudmFsKG91dHBWYWx1ZSk7dGhpcy5pbnB1dC50cmlnZ2VyKCdpbnB1dCcpO30KdGhpcy5fZWxlbWVudC5kYXRhKCdkYXRlJyxvdXRwVmFsdWUpO3RoaXMuX25vdGlmeUV2ZW50KHt0eXBlOkRhdGVUaW1lUGlja2VyLkV2ZW50LkNIQU5HRSxkYXRlOmZhbHNlLG9sZERhdGU6b2xkRGF0ZX0pO3RoaXMuX3VwZGF0ZSgpO3JldHVybjt9CnRhcmdldE1vbWVudD10YXJnZXRNb21lbnQuY2xvbmUoKS5sb2NhbGUodGhpcy5fb3B0aW9ucy5sb2NhbGUpO2lmKHRoaXMuX2hhc1RpbWVab25lKCkpe3RhcmdldE1vbWVudC50eih0aGlzLl9vcHRpb25zLnRpbWVab25lKTt9CmlmKHRoaXMuX29wdGlvbnMuc3RlcHBpbmchPT0xKXt0YXJnZXRNb21lbnQubWludXRlcyhNYXRoLnJvdW5kKHRhcmdldE1vbWVudC5taW51dGVzKCkvdGhpcy5fb3B0aW9ucy5zdGVwcGluZykqdGhpcy5fb3B0aW9ucy5zdGVwcGluZykuc2Vjb25kcygwKTt9CmlmKHRoaXMuX2lzVmFsaWQodGFyZ2V0TW9tZW50KSl7dGhpcy5fZGF0ZXNbaW5kZXhdPXRhcmdldE1vbWVudDt0aGlzLl9kYXRlc0Zvcm1hdHRlZFtpbmRleF09dGFyZ2V0TW9tZW50LmZvcm1hdCgnWVlZWS1NTS1ERCcpO3RoaXMuX3ZpZXdEYXRlPXRhcmdldE1vbWVudC5jbG9uZSgpO2lmKHRoaXMuX29wdGlvbnMuYWxsb3dNdWx0aWRhdGUmJnRoaXMuX2RhdGVzLmxlbmd0aD4xKXtmb3IodmFyIGk9MDtpPHRoaXMuX2RhdGVzLmxlbmd0aDtpKyspe291dHBWYWx1ZSs9JycrdGhpcy5fZGF0ZXNbaV0uZm9ybWF0KHRoaXMuYWN0dWFsRm9ybWF0KSt0aGlzLl9vcHRpb25zLm11bHRpZGF0ZVNlcGFyYXRvcjt9Cm91dHBWYWx1ZT1vdXRwVmFsdWUucmVwbGFjZSgvLFxzKiQvLCcnKTt9ZWxzZXtvdXRwVmFsdWU9dGhpcy5fZGF0ZXNbaW5kZXhdLmZvcm1hdCh0aGlzLmFjdHVhbEZvcm1hdCk7fQppZih0aGlzLmlucHV0IT09dW5kZWZpbmVkKXt0aGlzLmlucHV0LnZhbChvdXRwVmFsdWUpO3RoaXMuaW5wdXQudHJpZ2dlcignaW5wdXQnKTt9CnRoaXMuX2VsZW1lbnQuZGF0YSgnZGF0ZScsb3V0cFZhbHVlKTt0aGlzLnVuc2V0PWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3RoaXMuX25vdGlmeUV2ZW50KHt0eXBlOkRhdGVUaW1lUGlja2VyLkV2ZW50LkNIQU5HRSxkYXRlOnRoaXMuX2RhdGVzW2luZGV4XS5jbG9uZSgpLG9sZERhdGU6b2xkRGF0ZX0pO31lbHNle2lmKCF0aGlzLl9vcHRpb25zLmtlZXBJbnZhbGlkKXtpZih0aGlzLmlucHV0IT09dW5kZWZpbmVkKXt0aGlzLmlucHV0LnZhbCgnJysodGhpcy51bnNldD8nJzp0aGlzLl9kYXRlc1tpbmRleF0uZm9ybWF0KHRoaXMuYWN0dWFsRm9ybWF0KSkpO3RoaXMuaW5wdXQudHJpZ2dlcignaW5wdXQnKTt9fWVsc2V7dGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuQ0hBTkdFLGRhdGU6dGFyZ2V0TW9tZW50LG9sZERhdGU6b2xkRGF0ZX0pO30KdGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuRVJST1IsZGF0ZTp0YXJnZXRNb21lbnQsb2xkRGF0ZTpvbGREYXRlfSk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9jaGFuZ2U9ZnVuY3Rpb24gX2NoYW5nZShlKXt2YXIgdmFsPSQoZS50YXJnZXQpLnZhbCgpLnRyaW0oKSxwYXJzZWREYXRlPXZhbD90aGlzLl9wYXJzZUlucHV0RGF0ZSh2YWwpOm51bGw7dGhpcy5fc2V0VmFsdWUocGFyc2VkRGF0ZSk7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2U7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2dldE9wdGlvbnM9ZnVuY3Rpb24gX2dldE9wdGlvbnMob3B0aW9ucyl7b3B0aW9ucz0kLmV4dGVuZCh0cnVlLHt9LERlZmF1bHQsb3B0aW9ucyk7cmV0dXJuIG9wdGlvbnM7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2hhc1RpbWVab25lPWZ1bmN0aW9uIF9oYXNUaW1lWm9uZSgpe3JldHVybiBtb21lbnQudHohPT11bmRlZmluZWQmJnRoaXMuX29wdGlvbnMudGltZVpvbmUhPT11bmRlZmluZWQmJnRoaXMuX29wdGlvbnMudGltZVpvbmUhPT1udWxsJiZ0aGlzLl9vcHRpb25zLnRpbWVab25lIT09Jyc7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2lzRW5hYmxlZD1mdW5jdGlvbiBfaXNFbmFibGVkKGdyYW51bGFyaXR5KXtpZih0eXBlb2YgZ3JhbnVsYXJpdHkhPT0nc3RyaW5nJ3x8Z3JhbnVsYXJpdHkubGVuZ3RoPjEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2lzRW5hYmxlZCBleHBlY3RzIGEgc2luZ2xlIGNoYXJhY3RlciBzdHJpbmcgcGFyYW1ldGVyJyk7fQpzd2l0Y2goZ3JhbnVsYXJpdHkpe2Nhc2UneSc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LmluZGV4T2YoJ1knKSE9PS0xO2Nhc2UnTSc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LmluZGV4T2YoJ00nKSE9PS0xO2Nhc2UnZCc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZCcpIT09LTE7Y2FzZSdoJzpjYXNlJ0gnOnJldHVybiB0aGlzLmFjdHVhbEZvcm1hdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2gnKSE9PS0xO2Nhc2UnbSc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LmluZGV4T2YoJ20nKSE9PS0xO2Nhc2Uncyc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LmluZGV4T2YoJ3MnKSE9PS0xO2Nhc2UnYSc6Y2FzZSdBJzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhJykhPT0tMTtkZWZhdWx0OnJldHVybiBmYWxzZTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2hhc1RpbWU9ZnVuY3Rpb24gX2hhc1RpbWUoKXtyZXR1cm4gdGhpcy5faXNFbmFibGVkKCdoJyl8fHRoaXMuX2lzRW5hYmxlZCgnbScpfHx0aGlzLl9pc0VuYWJsZWQoJ3MnKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faGFzRGF0ZT1mdW5jdGlvbiBfaGFzRGF0ZSgpe3JldHVybiB0aGlzLl9pc0VuYWJsZWQoJ3knKXx8dGhpcy5faXNFbmFibGVkKCdNJyl8fHRoaXMuX2lzRW5hYmxlZCgnZCcpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9kYXRhVG9PcHRpb25zPWZ1bmN0aW9uIF9kYXRhVG9PcHRpb25zKCl7dmFyIGVEYXRhPXRoaXMuX2VsZW1lbnQuZGF0YSgpO3ZhciBkYXRhT3B0aW9ucz17fTtpZihlRGF0YS5kYXRlT3B0aW9ucyYmZURhdGEuZGF0ZU9wdGlvbnMgaW5zdGFuY2VvZiBPYmplY3Qpe2RhdGFPcHRpb25zPSQuZXh0ZW5kKHRydWUsZGF0YU9wdGlvbnMsZURhdGEuZGF0ZU9wdGlvbnMpO30KJC5lYWNoKHRoaXMuX29wdGlvbnMsZnVuY3Rpb24oa2V5KXt2YXIgYXR0cmlidXRlTmFtZT0nZGF0ZScra2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2tleS5zbGljZSgxKTtpZihlRGF0YVthdHRyaWJ1dGVOYW1lXSE9PXVuZGVmaW5lZCl7ZGF0YU9wdGlvbnNba2V5XT1lRGF0YVthdHRyaWJ1dGVOYW1lXTt9ZWxzZXtkZWxldGUgZGF0YU9wdGlvbnNba2V5XTt9fSk7cmV0dXJuIGRhdGFPcHRpb25zO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9ub3RpZnlFdmVudD1mdW5jdGlvbiBfbm90aWZ5RXZlbnQoZSl7aWYoZS50eXBlPT09RGF0ZVRpbWVQaWNrZXIuRXZlbnQuQ0hBTkdFKXtpZighZS5kYXRlJiYhZS5vbGREYXRlKXtyZXR1cm47fQp2YXIgYm90aFVUQz1lLmRhdGUmJmUub2xkRGF0ZSYmZS5kYXRlLl9pc1VUQz09PWUub2xkRGF0ZS5faXNVVEM7aWYoYm90aFVUQyYmZS5kYXRlLmlzU2FtZShlLm9sZERhdGUpKXtyZXR1cm47fX0KdGhpcy5fZWxlbWVudC50cmlnZ2VyKGUpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl92aWV3VXBkYXRlPWZ1bmN0aW9uIF92aWV3VXBkYXRlKGUpe2lmKGU9PT0neScpe2U9J1lZWVknO30KdGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuVVBEQVRFLGNoYW5nZTplLHZpZXdEYXRlOnRoaXMuX3ZpZXdEYXRlLmNsb25lKCl9KTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5fc2hvd01vZGU9ZnVuY3Rpb24gX3Nob3dNb2RlKGRpcil7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm47fQppZihkaXIpe3RoaXMuY3VycmVudFZpZXdNb2RlPU1hdGgubWF4KE1pblZpZXdNb2RlTnVtYmVyLE1hdGgubWluKDMsdGhpcy5jdXJyZW50Vmlld01vZGUrZGlyKSk7fQp0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlciA+IGRpdicpLmhpZGUoKS5maWx0ZXIoJy5kYXRlcGlja2VyLScrRGF0ZVBpY2tlck1vZGVzW3RoaXMuY3VycmVudFZpZXdNb2RlXS5DTEFTU19OQU1FKS5zaG93KCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2lzSW5EaXNhYmxlZERhdGVzPWZ1bmN0aW9uIF9pc0luRGlzYWJsZWREYXRlcyh0ZXN0RGF0ZSl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlc1t0ZXN0RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV09PT10cnVlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pc0luRW5hYmxlZERhdGVzPWZ1bmN0aW9uIF9pc0luRW5hYmxlZERhdGVzKHRlc3REYXRlKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXNbdGVzdERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJyldPT09dHJ1ZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faXNJbkRpc2FibGVkSG91cnM9ZnVuY3Rpb24gX2lzSW5EaXNhYmxlZEhvdXJzKHRlc3REYXRlKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzW3Rlc3REYXRlLmZvcm1hdCgnSCcpXT09PXRydWU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2lzSW5FbmFibGVkSG91cnM9ZnVuY3Rpb24gX2lzSW5FbmFibGVkSG91cnModGVzdERhdGUpe3JldHVybiB0aGlzLl9vcHRpb25zLmVuYWJsZWRIb3Vyc1t0ZXN0RGF0ZS5mb3JtYXQoJ0gnKV09PT10cnVlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pc1ZhbGlkPWZ1bmN0aW9uIF9pc1ZhbGlkKHRhcmdldE1vbWVudCxncmFudWxhcml0eSl7aWYoIXRhcmdldE1vbWVudC5pc1ZhbGlkKCkpe3JldHVybiBmYWxzZTt9CmlmKHRoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlcyYmZ3JhbnVsYXJpdHk9PT0nZCcmJnRoaXMuX2lzSW5EaXNhYmxlZERhdGVzKHRhcmdldE1vbWVudCkpe3JldHVybiBmYWxzZTt9CmlmKHRoaXMuX29wdGlvbnMuZW5hYmxlZERhdGVzJiZncmFudWxhcml0eT09PSdkJyYmIXRoaXMuX2lzSW5FbmFibGVkRGF0ZXModGFyZ2V0TW9tZW50KSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5taW5EYXRlJiZ0YXJnZXRNb21lbnQuaXNCZWZvcmUodGhpcy5fb3B0aW9ucy5taW5EYXRlLGdyYW51bGFyaXR5KSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5tYXhEYXRlJiZ0YXJnZXRNb21lbnQuaXNBZnRlcih0aGlzLl9vcHRpb25zLm1heERhdGUsZ3JhbnVsYXJpdHkpKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZCYmZ3JhbnVsYXJpdHk9PT0nZCcmJnRoaXMuX29wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkLmluZGV4T2YodGFyZ2V0TW9tZW50LmRheSgpKSE9PS0xKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnMmJihncmFudWxhcml0eT09PSdoJ3x8Z3JhbnVsYXJpdHk9PT0nbSd8fGdyYW51bGFyaXR5PT09J3MnKSYmdGhpcy5faXNJbkRpc2FibGVkSG91cnModGFyZ2V0TW9tZW50KSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5lbmFibGVkSG91cnMmJihncmFudWxhcml0eT09PSdoJ3x8Z3JhbnVsYXJpdHk9PT0nbSd8fGdyYW51bGFyaXR5PT09J3MnKSYmIXRoaXMuX2lzSW5FbmFibGVkSG91cnModGFyZ2V0TW9tZW50KSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHMmJihncmFudWxhcml0eT09PSdoJ3x8Z3JhbnVsYXJpdHk9PT0nbSd8fGdyYW51bGFyaXR5PT09J3MnKSl7dmFyIGZvdW5kPWZhbHNlOyQuZWFjaCh0aGlzLl9vcHRpb25zLmRpc2FibGVkVGltZUludGVydmFscyxmdW5jdGlvbigpe2lmKHRhcmdldE1vbWVudC5pc0JldHdlZW4odGhpc1swXSx0aGlzWzFdKSl7Zm91bmQ9dHJ1ZTtyZXR1cm4gZmFsc2U7fX0pO2lmKGZvdW5kKXtyZXR1cm4gZmFsc2U7fX0KcmV0dXJuIHRydWU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX3BhcnNlSW5wdXREYXRlPWZ1bmN0aW9uIF9wYXJzZUlucHV0RGF0ZShpbnB1dERhdGUpe2lmKHRoaXMuX29wdGlvbnMucGFyc2VJbnB1dERhdGU9PT11bmRlZmluZWQpe2lmKCFtb21lbnQuaXNNb21lbnQoaW5wdXREYXRlKSl7aW5wdXREYXRlPXRoaXMuZ2V0TW9tZW50KGlucHV0RGF0ZSk7fX1lbHNle2lucHV0RGF0ZT10aGlzLl9vcHRpb25zLnBhcnNlSW5wdXREYXRlKGlucHV0RGF0ZSk7fQpyZXR1cm4gaW5wdXREYXRlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9rZXlkb3duPWZ1bmN0aW9uIF9rZXlkb3duKGUpe3ZhciBoYW5kbGVyPW51bGwsaW5kZXg9dm9pZCAwLGluZGV4Mj12b2lkIDAsa2V5QmluZEtleXM9dm9pZCAwLGFsbE1vZGlmaWVyc1ByZXNzZWQ9dm9pZCAwO3ZhciBwcmVzc2VkS2V5cz1bXSxwcmVzc2VkTW9kaWZpZXJzPXt9LGN1cnJlbnRLZXk9ZS53aGljaCxwcmVzc2VkPSdwJztrZXlTdGF0ZVtjdXJyZW50S2V5XT1wcmVzc2VkO2ZvcihpbmRleCBpbiBrZXlTdGF0ZSl7aWYoa2V5U3RhdGUuaGFzT3duUHJvcGVydHkoaW5kZXgpJiZrZXlTdGF0ZVtpbmRleF09PT1wcmVzc2VkKXtwcmVzc2VkS2V5cy5wdXNoKGluZGV4KTtpZihwYXJzZUludChpbmRleCwxMCkhPT1jdXJyZW50S2V5KXtwcmVzc2VkTW9kaWZpZXJzW2luZGV4XT10cnVlO319fQpmb3IoaW5kZXggaW4gdGhpcy5fb3B0aW9ucy5rZXlCaW5kcyl7aWYodGhpcy5fb3B0aW9ucy5rZXlCaW5kcy5oYXNPd25Qcm9wZXJ0eShpbmRleCkmJnR5cGVvZiB0aGlzLl9vcHRpb25zLmtleUJpbmRzW2luZGV4XT09PSdmdW5jdGlvbicpe2tleUJpbmRLZXlzPWluZGV4LnNwbGl0KCcgJyk7aWYoa2V5QmluZEtleXMubGVuZ3RoPT09cHJlc3NlZEtleXMubGVuZ3RoJiZLZXlNYXBbY3VycmVudEtleV09PT1rZXlCaW5kS2V5c1trZXlCaW5kS2V5cy5sZW5ndGgtMV0pe2FsbE1vZGlmaWVyc1ByZXNzZWQ9dHJ1ZTtmb3IoaW5kZXgyPWtleUJpbmRLZXlzLmxlbmd0aC0yO2luZGV4Mj49MDtpbmRleDItLSl7aWYoIShLZXlNYXBba2V5QmluZEtleXNbaW5kZXgyXV1pbiBwcmVzc2VkTW9kaWZpZXJzKSl7YWxsTW9kaWZpZXJzUHJlc3NlZD1mYWxzZTticmVhazt9fQppZihhbGxNb2RpZmllcnNQcmVzc2VkKXtoYW5kbGVyPXRoaXMuX29wdGlvbnMua2V5QmluZHNbaW5kZXhdO2JyZWFrO319fX0KaWYoaGFuZGxlcil7aWYoaGFuZGxlci5jYWxsKHRoaXMpKXtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTt9fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9rZXl1cD1mdW5jdGlvbiBfa2V5dXAoZSl7a2V5U3RhdGVbZS53aGljaF09J3InO2lmKGtleVByZXNzSGFuZGxlZFtlLndoaWNoXSl7a2V5UHJlc3NIYW5kbGVkW2Uud2hpY2hdPWZhbHNlO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faW5kZXhHaXZlbkRhdGVzPWZ1bmN0aW9uIF9pbmRleEdpdmVuRGF0ZXMoZ2l2ZW5EYXRlc0FycmF5KXt2YXIgZ2l2ZW5EYXRlc0luZGV4ZWQ9e30sc2VsZj10aGlzOyQuZWFjaChnaXZlbkRhdGVzQXJyYXksZnVuY3Rpb24oKXt2YXIgZERhdGU9c2VsZi5fcGFyc2VJbnB1dERhdGUodGhpcyk7aWYoZERhdGUuaXNWYWxpZCgpKXtnaXZlbkRhdGVzSW5kZXhlZFtkRGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV09dHJ1ZTt9fSk7cmV0dXJuIE9iamVjdC5rZXlzKGdpdmVuRGF0ZXNJbmRleGVkKS5sZW5ndGg/Z2l2ZW5EYXRlc0luZGV4ZWQ6ZmFsc2U7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2luZGV4R2l2ZW5Ib3Vycz1mdW5jdGlvbiBfaW5kZXhHaXZlbkhvdXJzKGdpdmVuSG91cnNBcnJheSl7dmFyIGdpdmVuSG91cnNJbmRleGVkPXt9OyQuZWFjaChnaXZlbkhvdXJzQXJyYXksZnVuY3Rpb24oKXtnaXZlbkhvdXJzSW5kZXhlZFt0aGlzXT10cnVlO30pO3JldHVybiBPYmplY3Qua2V5cyhnaXZlbkhvdXJzSW5kZXhlZCkubGVuZ3RoP2dpdmVuSG91cnNJbmRleGVkOmZhbHNlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pbml0Rm9ybWF0dGluZz1mdW5jdGlvbiBfaW5pdEZvcm1hdHRpbmcoKXt2YXIgZm9ybWF0PXRoaXMuX29wdGlvbnMuZm9ybWF0fHwnTCBMVCcsc2VsZj10aGlzO3RoaXMuYWN0dWFsRm9ybWF0PWZvcm1hdC5yZXBsYWNlKC8oXFtbXlxbXSpdKXwoXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2csZnVuY3Rpb24oZm9ybWF0SW5wdXQpe3JldHVybiBzZWxmLl9kYXRlc1swXS5sb2NhbGVEYXRhKCkubG9uZ0RhdGVGb3JtYXQoZm9ybWF0SW5wdXQpfHxmb3JtYXRJbnB1dDt9KTt0aGlzLnBhcnNlRm9ybWF0cz10aGlzLl9vcHRpb25zLmV4dHJhRm9ybWF0cz90aGlzLl9vcHRpb25zLmV4dHJhRm9ybWF0cy5zbGljZSgpOltdO2lmKHRoaXMucGFyc2VGb3JtYXRzLmluZGV4T2YoZm9ybWF0KTwwJiZ0aGlzLnBhcnNlRm9ybWF0cy5pbmRleE9mKHRoaXMuYWN0dWFsRm9ybWF0KTwwKXt0aGlzLnBhcnNlRm9ybWF0cy5wdXNoKHRoaXMuYWN0dWFsRm9ybWF0KTt9CnRoaXMudXNlMjRIb3Vycz10aGlzLmFjdHVhbEZvcm1hdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2EnKTwxJiZ0aGlzLmFjdHVhbEZvcm1hdC5yZXBsYWNlKC9cWy4qP10vZywnJykuaW5kZXhPZignaCcpPDE7aWYodGhpcy5faXNFbmFibGVkKCd5Jykpe01pblZpZXdNb2RlTnVtYmVyPTI7fQppZih0aGlzLl9pc0VuYWJsZWQoJ00nKSl7TWluVmlld01vZGVOdW1iZXI9MTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgnZCcpKXtNaW5WaWV3TW9kZU51bWJlcj0wO30KdGhpcy5jdXJyZW50Vmlld01vZGU9TWF0aC5tYXgoTWluVmlld01vZGVOdW1iZXIsdGhpcy5jdXJyZW50Vmlld01vZGUpO2lmKCF0aGlzLnVuc2V0KXt0aGlzLl9zZXRWYWx1ZSh0aGlzLl9kYXRlc1swXSwwKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2dldExhc3RQaWNrZWREYXRlPWZ1bmN0aW9uIF9nZXRMYXN0UGlja2VkRGF0ZSgpe3JldHVybiB0aGlzLl9kYXRlc1t0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCldfHx0aGlzLmdldE1vbWVudCgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4PWZ1bmN0aW9uIF9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCl7cmV0dXJuIHRoaXMuX2RhdGVzLmxlbmd0aC0xO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmdldE1vbWVudD1mdW5jdGlvbiBnZXRNb21lbnQoZCl7dmFyIHJldHVybk1vbWVudD12b2lkIDA7aWYoZD09PXVuZGVmaW5lZHx8ZD09PW51bGwpe3JldHVybk1vbWVudD1tb21lbnQoKTt9ZWxzZSBpZih0aGlzLl9oYXNUaW1lWm9uZSgpKXtyZXR1cm5Nb21lbnQ9bW9tZW50LnR6KGQsdGhpcy5wYXJzZUZvcm1hdHMsdGhpcy5fb3B0aW9ucy5sb2NhbGUsdGhpcy5fb3B0aW9ucy51c2VTdHJpY3QsdGhpcy5fb3B0aW9ucy50aW1lWm9uZSk7fWVsc2V7cmV0dXJuTW9tZW50PW1vbWVudChkLHRoaXMucGFyc2VGb3JtYXRzLHRoaXMuX29wdGlvbnMubG9jYWxlLHRoaXMuX29wdGlvbnMudXNlU3RyaWN0KTt9CmlmKHRoaXMuX2hhc1RpbWVab25lKCkpe3JldHVybk1vbWVudC50eih0aGlzLl9vcHRpb25zLnRpbWVab25lKTt9CnJldHVybiByZXR1cm5Nb21lbnQ7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZSgpe3JldHVybiB0aGlzLndpZGdldD90aGlzLmhpZGUoKTp0aGlzLnNob3coKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5pZ25vcmVSZWFkb25seT1mdW5jdGlvbiBpZ25vcmVSZWFkb25seShfaWdub3JlUmVhZG9ubHkpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5pZ25vcmVSZWFkb25seTt9CmlmKHR5cGVvZiBfaWdub3JlUmVhZG9ubHkhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2lnbm9yZVJlYWRvbmx5ICgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5pZ25vcmVSZWFkb25seT1faWdub3JlUmVhZG9ubHk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUub3B0aW9ucz1mdW5jdGlvbiBvcHRpb25zKG5ld09wdGlvbnMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC5leHRlbmQodHJ1ZSx7fSx0aGlzLl9vcHRpb25zKTt9CmlmKCEobmV3T3B0aW9ucyBpbnN0YW5jZW9mIE9iamVjdCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMoKSB0aGlzLm9wdGlvbnMgcGFyYW1ldGVyIHNob3VsZCBiZSBhbiBvYmplY3QnKTt9CiQuZXh0ZW5kKHRydWUsdGhpcy5fb3B0aW9ucyxuZXdPcHRpb25zKTt2YXIgc2VsZj10aGlzOyQuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYoc2VsZltrZXldIT09dW5kZWZpbmVkKXtzZWxmW2tleV0odmFsdWUpO319KTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kYXRlPWZ1bmN0aW9uIGRhdGUobmV3RGF0ZSxpbmRleCl7aW5kZXg9aW5kZXh8fDA7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe2lmKHRoaXMudW5zZXQpe3JldHVybiBudWxsO30KaWYodGhpcy5fb3B0aW9ucy5hbGxvd011bHRpZGF0ZSl7cmV0dXJuIHRoaXMuX2RhdGVzLmpvaW4odGhpcy5fb3B0aW9ucy5tdWx0aWRhdGVTZXBhcmF0b3IpO31lbHNle3JldHVybiB0aGlzLl9kYXRlc1tpbmRleF0uY2xvbmUoKTt9fQppZihuZXdEYXRlIT09bnVsbCYmdHlwZW9mIG5ld0RhdGUhPT0nc3RyaW5nJyYmIW1vbWVudC5pc01vbWVudChuZXdEYXRlKSYmIShuZXdEYXRlIGluc3RhbmNlb2YgRGF0ZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGUoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgW251bGwsIHN0cmluZywgbW9tZW50IG9yIERhdGVdJyk7fQp0aGlzLl9zZXRWYWx1ZShuZXdEYXRlPT09bnVsbD9udWxsOnRoaXMuX3BhcnNlSW5wdXREYXRlKG5ld0RhdGUpLGluZGV4KTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24gZm9ybWF0KG5ld0Zvcm1hdCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmZvcm1hdDt9CmlmKHR5cGVvZiBuZXdGb3JtYXQhPT0nc3RyaW5nJyYmKHR5cGVvZiBuZXdGb3JtYXQhPT0nYm9vbGVhbid8fG5ld0Zvcm1hdCE9PWZhbHNlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZm9ybWF0KCkgZXhwZWN0cyBhIHN0cmluZyBvciBib29sZWFuOmZhbHNlIHBhcmFtZXRlciAnK25ld0Zvcm1hdCk7fQp0aGlzLl9vcHRpb25zLmZvcm1hdD1uZXdGb3JtYXQ7aWYodGhpcy5hY3R1YWxGb3JtYXQpe3RoaXMuX2luaXRGb3JtYXR0aW5nKCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLnRpbWVab25lPWZ1bmN0aW9uIHRpbWVab25lKG5ld1pvbmUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy50aW1lWm9uZTt9CmlmKHR5cGVvZiBuZXdab25lIT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ25ld1pvbmUoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy50aW1lWm9uZT1uZXdab25lO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRheVZpZXdIZWFkZXJGb3JtYXQ9ZnVuY3Rpb24gZGF5Vmlld0hlYWRlckZvcm1hdChuZXdGb3JtYXQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kYXlWaWV3SGVhZGVyRm9ybWF0O30KaWYodHlwZW9mIG5ld0Zvcm1hdCE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkYXlWaWV3SGVhZGVyRm9ybWF0KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZGF5Vmlld0hlYWRlckZvcm1hdD1uZXdGb3JtYXQ7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZXh0cmFGb3JtYXRzPWZ1bmN0aW9uIGV4dHJhRm9ybWF0cyhmb3JtYXRzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZXh0cmFGb3JtYXRzO30KaWYoZm9ybWF0cyE9PWZhbHNlJiYhKGZvcm1hdHMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2V4dHJhRm9ybWF0cygpIGV4cGVjdHMgYW4gYXJyYXkgb3IgZmFsc2UgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmV4dHJhRm9ybWF0cz1mb3JtYXRzO2lmKHRoaXMucGFyc2VGb3JtYXRzKXt0aGlzLl9pbml0Rm9ybWF0dGluZygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZERhdGVzPWZ1bmN0aW9uIGRpc2FibGVkRGF0ZXMoZGF0ZXMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzPyQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlcyk6dGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzO30KaWYoIWRhdGVzKXt0aGlzLl9vcHRpb25zLmRpc2FibGVkRGF0ZXM9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZighKGRhdGVzIGluc3RhbmNlb2YgQXJyYXkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkaXNhYmxlZERhdGVzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlcz10aGlzLl9pbmRleEdpdmVuRGF0ZXMoZGF0ZXMpO3RoaXMuX29wdGlvbnMuZW5hYmxlZERhdGVzPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmVuYWJsZWREYXRlcz1mdW5jdGlvbiBlbmFibGVkRGF0ZXMoZGF0ZXMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXM/JC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXMpOnRoaXMuX29wdGlvbnMuZW5hYmxlZERhdGVzO30KaWYoIWRhdGVzKXt0aGlzLl9vcHRpb25zLmVuYWJsZWREYXRlcz1mYWxzZTt0aGlzLl91cGRhdGUoKTtyZXR1cm4gdHJ1ZTt9CmlmKCEoZGF0ZXMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2VuYWJsZWREYXRlcygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmVuYWJsZWREYXRlcz10aGlzLl9pbmRleEdpdmVuRGF0ZXMoZGF0ZXMpO3RoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlcz1mYWxzZTt0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kYXlzT2ZXZWVrRGlzYWJsZWQ9ZnVuY3Rpb24gZGF5c09mV2Vla0Rpc2FibGVkKF9kYXlzT2ZXZWVrRGlzYWJsZWQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kYXlzT2ZXZWVrRGlzYWJsZWQuc3BsaWNlKDApO30KaWYodHlwZW9mIF9kYXlzT2ZXZWVrRGlzYWJsZWQ9PT0nYm9vbGVhbicmJiFfZGF5c09mV2Vla0Rpc2FibGVkKXt0aGlzLl9vcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZD1mYWxzZTt0aGlzLl91cGRhdGUoKTtyZXR1cm4gdHJ1ZTt9CmlmKCEoX2RheXNPZldlZWtEaXNhYmxlZCBpbnN0YW5jZW9mIEFycmF5KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZGF5c09mV2Vla0Rpc2FibGVkKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkPV9kYXlzT2ZXZWVrRGlzYWJsZWQucmVkdWNlKGZ1bmN0aW9uKHByZXZpb3VzVmFsdWUsY3VycmVudFZhbHVlKXtjdXJyZW50VmFsdWU9cGFyc2VJbnQoY3VycmVudFZhbHVlLDEwKTtpZihjdXJyZW50VmFsdWU+Nnx8Y3VycmVudFZhbHVlPDB8fGlzTmFOKGN1cnJlbnRWYWx1ZSkpe3JldHVybiBwcmV2aW91c1ZhbHVlO30KaWYocHJldmlvdXNWYWx1ZS5pbmRleE9mKGN1cnJlbnRWYWx1ZSk9PT0tMSl7cHJldmlvdXNWYWx1ZS5wdXNoKGN1cnJlbnRWYWx1ZSk7fQpyZXR1cm4gcHJldmlvdXNWYWx1ZTt9LFtdKS5zb3J0KCk7aWYodGhpcy5fb3B0aW9ucy51c2VDdXJyZW50JiYhdGhpcy5fb3B0aW9ucy5rZWVwSW52YWxpZCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXt2YXIgdHJpZXM9MDt3aGlsZSghdGhpcy5faXNWYWxpZCh0aGlzLl9kYXRlc1tpXSwnZCcpKXt0aGlzLl9kYXRlc1tpXS5hZGQoMSwnZCcpO2lmKHRyaWVzPT09MzEpe3Rocm93J1RyaWVkIDMxIHRpbWVzIHRvIGZpbmQgYSB2YWxpZCBkYXRlJzt9CnRyaWVzKys7fQp0aGlzLl9zZXRWYWx1ZSh0aGlzLl9kYXRlc1tpXSxpKTt9fQp0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5tYXhEYXRlPWZ1bmN0aW9uIG1heERhdGUoX21heERhdGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5tYXhEYXRlP3RoaXMuX29wdGlvbnMubWF4RGF0ZS5jbG9uZSgpOnRoaXMuX29wdGlvbnMubWF4RGF0ZTt9CmlmKHR5cGVvZiBfbWF4RGF0ZT09PSdib29sZWFuJyYmX21heERhdGU9PT1mYWxzZSl7dGhpcy5fb3B0aW9ucy5tYXhEYXRlPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYodHlwZW9mIF9tYXhEYXRlPT09J3N0cmluZycpe2lmKF9tYXhEYXRlPT09J25vdyd8fF9tYXhEYXRlPT09J21vbWVudCcpe19tYXhEYXRlPXRoaXMuZ2V0TW9tZW50KCk7fX0KdmFyIHBhcnNlZERhdGU9dGhpcy5fcGFyc2VJbnB1dERhdGUoX21heERhdGUpO2lmKCFwYXJzZWREYXRlLmlzVmFsaWQoKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignbWF4RGF0ZSgpIENvdWxkIG5vdCBwYXJzZSBkYXRlIHBhcmFtZXRlcjogJytfbWF4RGF0ZSk7fQppZih0aGlzLl9vcHRpb25zLm1pbkRhdGUmJnBhcnNlZERhdGUuaXNCZWZvcmUodGhpcy5fb3B0aW9ucy5taW5EYXRlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignbWF4RGF0ZSgpIGRhdGUgcGFyYW1ldGVyIGlzIGJlZm9yZSB0aGlzLm9wdGlvbnMubWluRGF0ZTogJytwYXJzZWREYXRlLmZvcm1hdCh0aGlzLmFjdHVhbEZvcm1hdCkpO30KdGhpcy5fb3B0aW9ucy5tYXhEYXRlPXBhcnNlZERhdGU7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnQmJiF0aGlzLl9vcHRpb25zLmtlZXBJbnZhbGlkJiZ0aGlzLl9kYXRlc1tpXS5pc0FmdGVyKF9tYXhEYXRlKSl7dGhpcy5fc2V0VmFsdWUodGhpcy5fb3B0aW9ucy5tYXhEYXRlLGkpO319CmlmKHRoaXMuX3ZpZXdEYXRlLmlzQWZ0ZXIocGFyc2VkRGF0ZSkpe3RoaXMuX3ZpZXdEYXRlPXBhcnNlZERhdGUuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLl9vcHRpb25zLnN0ZXBwaW5nLCdtJyk7fQp0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5taW5EYXRlPWZ1bmN0aW9uIG1pbkRhdGUoX21pbkRhdGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5taW5EYXRlP3RoaXMuX29wdGlvbnMubWluRGF0ZS5jbG9uZSgpOnRoaXMuX29wdGlvbnMubWluRGF0ZTt9CmlmKHR5cGVvZiBfbWluRGF0ZT09PSdib29sZWFuJyYmX21pbkRhdGU9PT1mYWxzZSl7dGhpcy5fb3B0aW9ucy5taW5EYXRlPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYodHlwZW9mIF9taW5EYXRlPT09J3N0cmluZycpe2lmKF9taW5EYXRlPT09J25vdyd8fF9taW5EYXRlPT09J21vbWVudCcpe19taW5EYXRlPXRoaXMuZ2V0TW9tZW50KCk7fX0KdmFyIHBhcnNlZERhdGU9dGhpcy5fcGFyc2VJbnB1dERhdGUoX21pbkRhdGUpO2lmKCFwYXJzZWREYXRlLmlzVmFsaWQoKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignbWluRGF0ZSgpIENvdWxkIG5vdCBwYXJzZSBkYXRlIHBhcmFtZXRlcjogJytfbWluRGF0ZSk7fQppZih0aGlzLl9vcHRpb25zLm1heERhdGUmJnBhcnNlZERhdGUuaXNBZnRlcih0aGlzLl9vcHRpb25zLm1heERhdGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdtaW5EYXRlKCkgZGF0ZSBwYXJhbWV0ZXIgaXMgYWZ0ZXIgdGhpcy5vcHRpb25zLm1heERhdGU6ICcrcGFyc2VkRGF0ZS5mb3JtYXQodGhpcy5hY3R1YWxGb3JtYXQpKTt9CnRoaXMuX29wdGlvbnMubWluRGF0ZT1wYXJzZWREYXRlO2Zvcih2YXIgaT0wO2k8dGhpcy5fZGF0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5fb3B0aW9ucy51c2VDdXJyZW50JiYhdGhpcy5fb3B0aW9ucy5rZWVwSW52YWxpZCYmdGhpcy5fZGF0ZXNbaV0uaXNCZWZvcmUoX21pbkRhdGUpKXt0aGlzLl9zZXRWYWx1ZSh0aGlzLl9vcHRpb25zLm1pbkRhdGUsaSk7fX0KaWYodGhpcy5fdmlld0RhdGUuaXNCZWZvcmUocGFyc2VkRGF0ZSkpe3RoaXMuX3ZpZXdEYXRlPXBhcnNlZERhdGUuY2xvbmUoKS5hZGQodGhpcy5fb3B0aW9ucy5zdGVwcGluZywnbScpO30KdGhpcy5fdXBkYXRlKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZGVmYXVsdERhdGU9ZnVuY3Rpb24gZGVmYXVsdERhdGUoX2RlZmF1bHREYXRlKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGU/dGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZS5jbG9uZSgpOnRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGU7fQppZighX2RlZmF1bHREYXRlKXt0aGlzLl9vcHRpb25zLmRlZmF1bHREYXRlPWZhbHNlO3JldHVybiB0cnVlO30KaWYodHlwZW9mIF9kZWZhdWx0RGF0ZT09PSdzdHJpbmcnKXtpZihfZGVmYXVsdERhdGU9PT0nbm93J3x8X2RlZmF1bHREYXRlPT09J21vbWVudCcpe19kZWZhdWx0RGF0ZT10aGlzLmdldE1vbWVudCgpO31lbHNle19kZWZhdWx0RGF0ZT10aGlzLmdldE1vbWVudChfZGVmYXVsdERhdGUpO319CnZhciBwYXJzZWREYXRlPXRoaXMuX3BhcnNlSW5wdXREYXRlKF9kZWZhdWx0RGF0ZSk7aWYoIXBhcnNlZERhdGUuaXNWYWxpZCgpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkZWZhdWx0RGF0ZSgpIENvdWxkIG5vdCBwYXJzZSBkYXRlIHBhcmFtZXRlcjogJytfZGVmYXVsdERhdGUpO30KaWYoIXRoaXMuX2lzVmFsaWQocGFyc2VkRGF0ZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RlZmF1bHREYXRlKCkgZGF0ZSBwYXNzZWQgaXMgaW52YWxpZCBhY2NvcmRpbmcgdG8gY29tcG9uZW50IHNldHVwIHZhbGlkYXRpb25zJyk7fQp0aGlzLl9vcHRpb25zLmRlZmF1bHREYXRlPXBhcnNlZERhdGU7aWYodGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZSYmdGhpcy5fb3B0aW9ucy5pbmxpbmV8fHRoaXMuaW5wdXQhPT11bmRlZmluZWQmJnRoaXMuaW5wdXQudmFsKCkudHJpbSgpPT09Jycpe3RoaXMuX3NldFZhbHVlKHRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGUsMCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmxvY2FsZT1mdW5jdGlvbiBsb2NhbGUoX2xvY2FsZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmxvY2FsZTt9CmlmKCFtb21lbnQubG9jYWxlRGF0YShfbG9jYWxlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignbG9jYWxlKCkgbG9jYWxlICcrX2xvY2FsZSsnIGlzIG5vdCBsb2FkZWQgZnJvbSBtb21lbnQgbG9jYWxlcyEnKTt9CnRoaXMuX29wdGlvbnMubG9jYWxlPV9sb2NhbGU7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXt0aGlzLl9kYXRlc1tpXS5sb2NhbGUodGhpcy5fb3B0aW9ucy5sb2NhbGUpO30KdGhpcy5fdmlld0RhdGUubG9jYWxlKHRoaXMuX29wdGlvbnMubG9jYWxlKTtpZih0aGlzLmFjdHVhbEZvcm1hdCl7dGhpcy5faW5pdEZvcm1hdHRpbmcoKTt9CmlmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuc3RlcHBpbmc9ZnVuY3Rpb24gc3RlcHBpbmcoX3N0ZXBwaW5nKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuc3RlcHBpbmc7fQpfc3RlcHBpbmc9cGFyc2VJbnQoX3N0ZXBwaW5nLDEwKTtpZihpc05hTihfc3RlcHBpbmcpfHxfc3RlcHBpbmc8MSl7X3N0ZXBwaW5nPTE7fQp0aGlzLl9vcHRpb25zLnN0ZXBwaW5nPV9zdGVwcGluZzt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS51c2VDdXJyZW50PWZ1bmN0aW9uIHVzZUN1cnJlbnQoX3VzZUN1cnJlbnQpe3ZhciB1c2VDdXJyZW50T3B0aW9ucz1bJ3llYXInLCdtb250aCcsJ2RheScsJ2hvdXInLCdtaW51dGUnXTtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMudXNlQ3VycmVudDt9CmlmKHR5cGVvZiBfdXNlQ3VycmVudCE9PSdib29sZWFuJyYmdHlwZW9mIF91c2VDdXJyZW50IT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3VzZUN1cnJlbnQoKSBleHBlY3RzIGEgYm9vbGVhbiBvciBzdHJpbmcgcGFyYW1ldGVyJyk7fQppZih0eXBlb2YgX3VzZUN1cnJlbnQ9PT0nc3RyaW5nJyYmdXNlQ3VycmVudE9wdGlvbnMuaW5kZXhPZihfdXNlQ3VycmVudC50b0xvd2VyQ2FzZSgpKT09PS0xKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd1c2VDdXJyZW50KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXIgb2YgJyt1c2VDdXJyZW50T3B0aW9ucy5qb2luKCcsICcpKTt9CnRoaXMuX29wdGlvbnMudXNlQ3VycmVudD1fdXNlQ3VycmVudDt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5jb2xsYXBzZT1mdW5jdGlvbiBjb2xsYXBzZShfY29sbGFwc2Upe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5jb2xsYXBzZTt9CmlmKHR5cGVvZiBfY29sbGFwc2UhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2NvbGxhcHNlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQppZih0aGlzLl9vcHRpb25zLmNvbGxhcHNlPT09X2NvbGxhcHNlKXtyZXR1cm4gdHJ1ZTt9CnRoaXMuX29wdGlvbnMuY29sbGFwc2U9X2NvbGxhcHNlO2lmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuaWNvbnM9ZnVuY3Rpb24gaWNvbnMoX2ljb25zKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuICQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMuaWNvbnMpO30KaWYoIShfaWNvbnMgaW5zdGFuY2VvZiBPYmplY3QpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdpY29ucygpIGV4cGVjdHMgcGFyYW1ldGVyIHRvIGJlIGFuIE9iamVjdCcpO30KJC5leHRlbmQodGhpcy5fb3B0aW9ucy5pY29ucyxfaWNvbnMpO2lmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUudG9vbHRpcHM9ZnVuY3Rpb24gdG9vbHRpcHMoX3Rvb2x0aXBzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuICQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMudG9vbHRpcHMpO30KaWYoIShfdG9vbHRpcHMgaW5zdGFuY2VvZiBPYmplY3QpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd0b29sdGlwcygpIGV4cGVjdHMgcGFyYW1ldGVyIHRvIGJlIGFuIE9iamVjdCcpO30KJC5leHRlbmQodGhpcy5fb3B0aW9ucy50b29sdGlwcyxfdG9vbHRpcHMpO2lmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUudXNlU3RyaWN0PWZ1bmN0aW9uIHVzZVN0cmljdChfdXNlU3RyaWN0KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMudXNlU3RyaWN0O30KaWYodHlwZW9mIF91c2VTdHJpY3QhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3VzZVN0cmljdCgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy51c2VTdHJpY3Q9X3VzZVN0cmljdDt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5zaWRlQnlTaWRlPWZ1bmN0aW9uIHNpZGVCeVNpZGUoX3NpZGVCeVNpZGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5zaWRlQnlTaWRlO30KaWYodHlwZW9mIF9zaWRlQnlTaWRlIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdzaWRlQnlTaWRlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLnNpZGVCeVNpZGU9X3NpZGVCeVNpZGU7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS52aWV3TW9kZT1mdW5jdGlvbiB2aWV3TW9kZShfdmlld01vZGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy52aWV3TW9kZTt9CmlmKHR5cGVvZiBfdmlld01vZGUhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigndmlld01vZGUoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlcicpO30KaWYoRGF0ZVRpbWVQaWNrZXIuVmlld01vZGVzLmluZGV4T2YoX3ZpZXdNb2RlKT09PS0xKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd2aWV3TW9kZSgpIHBhcmFtZXRlciBtdXN0IGJlIG9uZSBvZiAoJytEYXRlVGltZVBpY2tlci5WaWV3TW9kZXMuam9pbignLCAnKSsnKSB2YWx1ZScpO30KdGhpcy5fb3B0aW9ucy52aWV3TW9kZT1fdmlld01vZGU7dGhpcy5jdXJyZW50Vmlld01vZGU9TWF0aC5tYXgoRGF0ZVRpbWVQaWNrZXIuVmlld01vZGVzLmluZGV4T2YoX3ZpZXdNb2RlKS0xLERhdGVUaW1lUGlja2VyLk1pblZpZXdNb2RlTnVtYmVyKTt0aGlzLl9zaG93TW9kZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmNhbGVuZGFyV2Vla3M9ZnVuY3Rpb24gY2FsZW5kYXJXZWVrcyhfY2FsZW5kYXJXZWVrcyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmNhbGVuZGFyV2Vla3M7fQppZih0eXBlb2YgX2NhbGVuZGFyV2Vla3MhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGVuZGFyV2Vla3MoKSBleHBlY3RzIHBhcmFtZXRlciB0byBiZSBhIGJvb2xlYW4gdmFsdWUnKTt9CnRoaXMuX29wdGlvbnMuY2FsZW5kYXJXZWVrcz1fY2FsZW5kYXJXZWVrczt0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5idXR0b25zPWZ1bmN0aW9uIGJ1dHRvbnMoX2J1dHRvbnMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5idXR0b25zKTt9CmlmKCEoX2J1dHRvbnMgaW5zdGFuY2VvZiBPYmplY3QpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdidXR0b25zKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYW4gT2JqZWN0Jyk7fQokLmV4dGVuZCh0aGlzLl9vcHRpb25zLmJ1dHRvbnMsX2J1dHRvbnMpO2lmKHR5cGVvZiB0aGlzLl9vcHRpb25zLmJ1dHRvbnMuc2hvd1RvZGF5IT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdidXR0b25zLnNob3dUb2RheSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CmlmKHR5cGVvZiB0aGlzLl9vcHRpb25zLmJ1dHRvbnMuc2hvd0NsZWFyIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdidXR0b25zLnNob3dDbGVhciBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CmlmKHR5cGVvZiB0aGlzLl9vcHRpb25zLmJ1dHRvbnMuc2hvd0Nsb3NlIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdidXR0b25zLnNob3dDbG9zZSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CmlmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUua2VlcE9wZW49ZnVuY3Rpb24ga2VlcE9wZW4oX2tlZXBPcGVuKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMua2VlcE9wZW47fQppZih0eXBlb2YgX2tlZXBPcGVuIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdrZWVwT3BlbigpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5rZWVwT3Blbj1fa2VlcE9wZW47fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZm9jdXNPblNob3c9ZnVuY3Rpb24gZm9jdXNPblNob3coX2ZvY3VzT25TaG93KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZm9jdXNPblNob3c7fQppZih0eXBlb2YgX2ZvY3VzT25TaG93IT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdmb2N1c09uU2hvdygpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5mb2N1c09uU2hvdz1fZm9jdXNPblNob3c7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuaW5saW5lPWZ1bmN0aW9uIGlubGluZShfaW5saW5lKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuaW5saW5lO30KaWYodHlwZW9mIF9pbmxpbmUhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2lubGluZSgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5pbmxpbmU9X2lubGluZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbiBjbGVhcigpe3RoaXMuX3NldFZhbHVlKG51bGwpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmtleUJpbmRzPWZ1bmN0aW9uIGtleUJpbmRzKF9rZXlCaW5kcyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmtleUJpbmRzO30KdGhpcy5fb3B0aW9ucy5rZXlCaW5kcz1fa2V5QmluZHM7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZGVidWc9ZnVuY3Rpb24gZGVidWcoX2RlYnVnKXtpZih0eXBlb2YgX2RlYnVnIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkZWJ1ZygpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kZWJ1Zz1fZGVidWc7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuYWxsb3dJbnB1dFRvZ2dsZT1mdW5jdGlvbiBhbGxvd0lucHV0VG9nZ2xlKF9hbGxvd0lucHV0VG9nZ2xlKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuYWxsb3dJbnB1dFRvZ2dsZTt9CmlmKHR5cGVvZiBfYWxsb3dJbnB1dFRvZ2dsZSE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignYWxsb3dJbnB1dFRvZ2dsZSgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5hbGxvd0lucHV0VG9nZ2xlPV9hbGxvd0lucHV0VG9nZ2xlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmtlZXBJbnZhbGlkPWZ1bmN0aW9uIGtlZXBJbnZhbGlkKF9rZWVwSW52YWxpZCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmtlZXBJbnZhbGlkO30KaWYodHlwZW9mIF9rZWVwSW52YWxpZCE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigna2VlcEludmFsaWQoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMua2VlcEludmFsaWQ9X2tlZXBJbnZhbGlkO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRhdGVwaWNrZXJJbnB1dD1mdW5jdGlvbiBkYXRlcGlja2VySW5wdXQoX2RhdGVwaWNrZXJJbnB1dCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRhdGVwaWNrZXJJbnB1dDt9CmlmKHR5cGVvZiBfZGF0ZXBpY2tlcklucHV0IT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGVwaWNrZXJJbnB1dCgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmRhdGVwaWNrZXJJbnB1dD1fZGF0ZXBpY2tlcklucHV0O307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLnBhcnNlSW5wdXREYXRlPWZ1bmN0aW9uIHBhcnNlSW5wdXREYXRlKF9wYXJzZUlucHV0RGF0ZTIpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5wYXJzZUlucHV0RGF0ZTt9CmlmKHR5cGVvZiBfcGFyc2VJbnB1dERhdGUyIT09J2Z1bmN0aW9uJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigncGFyc2VJbnB1dERhdGUoKSBzaG91bGQgYmUgYXMgZnVuY3Rpb24nKTt9CnRoaXMuX29wdGlvbnMucGFyc2VJbnB1dERhdGU9X3BhcnNlSW5wdXREYXRlMjt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZFRpbWVJbnRlcnZhbHM9ZnVuY3Rpb24gZGlzYWJsZWRUaW1lSW50ZXJ2YWxzKF9kaXNhYmxlZFRpbWVJbnRlcnZhbHMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHM/JC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHMpOnRoaXMuX29wdGlvbnMuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzO30KaWYoIV9kaXNhYmxlZFRpbWVJbnRlcnZhbHMpe3RoaXMuX29wdGlvbnMuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYoIShfZGlzYWJsZWRUaW1lSW50ZXJ2YWxzIGluc3RhbmNlb2YgQXJyYXkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkaXNhYmxlZFRpbWVJbnRlcnZhbHMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHM9X2Rpc2FibGVkVGltZUludGVydmFsczt0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZEhvdXJzPWZ1bmN0aW9uIGRpc2FibGVkSG91cnMoaG91cnMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzPyQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMuZGlzYWJsZWRIb3Vycyk6dGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzO30KaWYoIWhvdXJzKXt0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnM9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZighKGhvdXJzIGluc3RhbmNlb2YgQXJyYXkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkaXNhYmxlZEhvdXJzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZGlzYWJsZWRIb3Vycz10aGlzLl9pbmRleEdpdmVuSG91cnMoaG91cnMpO3RoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzPWZhbHNlO2lmKHRoaXMuX29wdGlvbnMudXNlQ3VycmVudCYmIXRoaXMuX29wdGlvbnMua2VlcEludmFsaWQpe2Zvcih2YXIgaT0wO2k8dGhpcy5fZGF0ZXMubGVuZ3RoO2krKyl7dmFyIHRyaWVzPTA7d2hpbGUoIXRoaXMuX2lzVmFsaWQodGhpcy5fZGF0ZXNbaV0sJ2gnKSl7dGhpcy5fZGF0ZXNbaV0uYWRkKDEsJ2gnKTtpZih0cmllcz09PTI0KXt0aHJvdydUcmllZCAyNCB0aW1lcyB0byBmaW5kIGEgdmFsaWQgZGF0ZSc7fQp0cmllcysrO30KdGhpcy5fc2V0VmFsdWUodGhpcy5fZGF0ZXNbaV0saSk7fX0KdGhpcy5fdXBkYXRlKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZW5hYmxlZEhvdXJzPWZ1bmN0aW9uIGVuYWJsZWRIb3Vycyhob3Vycyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmVuYWJsZWRIb3Vycz8kLmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zLmVuYWJsZWRIb3Vycyk6dGhpcy5fb3B0aW9ucy5lbmFibGVkSG91cnM7fQppZighaG91cnMpe3RoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYoIShob3VycyBpbnN0YW5jZW9mIEFycmF5KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZW5hYmxlZEhvdXJzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzPXRoaXMuX2luZGV4R2l2ZW5Ib3Vycyhob3Vycyk7dGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzPWZhbHNlO2lmKHRoaXMuX29wdGlvbnMudXNlQ3VycmVudCYmIXRoaXMuX29wdGlvbnMua2VlcEludmFsaWQpe2Zvcih2YXIgaT0wO2k8dGhpcy5fZGF0ZXMubGVuZ3RoO2krKyl7dmFyIHRyaWVzPTA7d2hpbGUoIXRoaXMuX2lzVmFsaWQodGhpcy5fZGF0ZXNbaV0sJ2gnKSl7dGhpcy5fZGF0ZXNbaV0uYWRkKDEsJ2gnKTtpZih0cmllcz09PTI0KXt0aHJvdydUcmllZCAyNCB0aW1lcyB0byBmaW5kIGEgdmFsaWQgZGF0ZSc7fQp0cmllcysrO30KdGhpcy5fc2V0VmFsdWUodGhpcy5fZGF0ZXNbaV0saSk7fX0KdGhpcy5fdXBkYXRlKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUudmlld0RhdGU9ZnVuY3Rpb24gdmlld0RhdGUobmV3RGF0ZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl92aWV3RGF0ZS5jbG9uZSgpO30KaWYoIW5ld0RhdGUpe3RoaXMuX3ZpZXdEYXRlPSh0aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKSkuY2xvbmUoKTtyZXR1cm4gdHJ1ZTt9CmlmKHR5cGVvZiBuZXdEYXRlIT09J3N0cmluZycmJiFtb21lbnQuaXNNb21lbnQobmV3RGF0ZSkmJiEobmV3RGF0ZSBpbnN0YW5jZW9mIERhdGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd2aWV3RGF0ZSgpIHBhcmFtZXRlciBtdXN0IGJlIG9uZSBvZiBbc3RyaW5nLCBtb21lbnQgb3IgRGF0ZV0nKTt9CnRoaXMuX3ZpZXdEYXRlPXRoaXMuX3BhcnNlSW5wdXREYXRlKG5ld0RhdGUpO3RoaXMuX3ZpZXdVcGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5hbGxvd011bHRpZGF0ZT1mdW5jdGlvbiBhbGxvd011bHRpZGF0ZShfYWxsb3dNdWx0aWRhdGUpe2lmKHR5cGVvZiBfYWxsb3dNdWx0aWRhdGUhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2FsbG93TXVsdGlkYXRlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmFsbG93TXVsdGlkYXRlPV9hbGxvd011bHRpZGF0ZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5tdWx0aWRhdGVTZXBhcmF0b3I9ZnVuY3Rpb24gbXVsdGlkYXRlU2VwYXJhdG9yKF9tdWx0aWRhdGVTZXBhcmF0b3Ipe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5tdWx0aWRhdGVTZXBhcmF0b3I7fQppZih0eXBlb2YgX211bHRpZGF0ZVNlcGFyYXRvciE9PSdzdHJpbmcnfHxfbXVsdGlkYXRlU2VwYXJhdG9yLmxlbmd0aD4xKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdtdWx0aWRhdGVTZXBhcmF0b3IgZXhwZWN0cyBhIHNpbmdsZSBjaGFyYWN0ZXIgc3RyaW5nIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5tdWx0aWRhdGVTZXBhcmF0b3I9X211bHRpZGF0ZVNlcGFyYXRvcjt9O19jcmVhdGVDbGFzcyhEYXRlVGltZVBpY2tlcixudWxsLFt7a2V5OidOQU1FJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIE5BTUU7fX0se2tleTonREFUQV9LRVknLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gREFUQV9LRVk7fX0se2tleTonRVZFTlRfS0VZJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIEVWRU5UX0tFWTt9fSx7a2V5OidEQVRBX0FQSV9LRVknLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gREFUQV9BUElfS0VZO319LHtrZXk6J0RhdGVQaWNrZXJNb2RlcycsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEYXRlUGlja2VyTW9kZXM7fX0se2tleTonVmlld01vZGVzJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZpZXdNb2Rlczt9fSx7a2V5OidNaW5WaWV3TW9kZU51bWJlcicsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBNaW5WaWV3TW9kZU51bWJlcjt9fSx7a2V5OidFdmVudCcsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBFdmVudDt9fSx7a2V5OidTZWxlY3RvcicsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBTZWxlY3Rvcjt9fSx7a2V5OidEZWZhdWx0JyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHQ7fSxzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXtEZWZhdWx0PXZhbHVlO319LHtrZXk6J0NsYXNzTmFtZScsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBDbGFzc05hbWU7fX1dKTtyZXR1cm4gRGF0ZVRpbWVQaWNrZXI7fSgpO3JldHVybiBEYXRlVGltZVBpY2tlcjt9KGpRdWVyeSxtb21lbnQpO3ZhciBUZW1wdXNEb21pbnVzQm9vdHN0cmFwND1mdW5jdGlvbigkKXt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bRGF0ZVRpbWVQaWNrZXIuTkFNRV0sdmVydGljYWxNb2Rlcz1bJ3RvcCcsJ2JvdHRvbScsJ2F1dG8nXSxob3Jpem9udGFsTW9kZXM9WydsZWZ0JywncmlnaHQnLCdhdXRvJ10sdG9vbGJhclBsYWNlbWVudHM9WydkZWZhdWx0JywndG9wJywnYm90dG9tJ10sZ2V0U2VsZWN0b3JGcm9tRWxlbWVudD1mdW5jdGlvbiBnZXRTZWxlY3RvckZyb21FbGVtZW50KCRlbGVtZW50KXt2YXIgc2VsZWN0b3I9JGVsZW1lbnQuZGF0YSgndGFyZ2V0JyksJHNlbGVjdG9yPXZvaWQgMDtpZighc2VsZWN0b3Ipe3NlbGVjdG9yPSRlbGVtZW50LmF0dHIoJ2hyZWYnKXx8Jyc7c2VsZWN0b3I9L14jW2Etel0vaS50ZXN0KHNlbGVjdG9yKT9zZWxlY3RvcjpudWxsO30KJHNlbGVjdG9yPSQoc2VsZWN0b3IpO2lmKCRzZWxlY3Rvci5sZW5ndGg9PT0wKXtyZXR1cm4gJHNlbGVjdG9yO30KaWYoISRzZWxlY3Rvci5kYXRhKERhdGVUaW1lUGlja2VyLkRBVEFfS0VZKSl7JC5leHRlbmQoe30sJHNlbGVjdG9yLmRhdGEoKSwkKHRoaXMpLmRhdGEoKSk7fQpyZXR1cm4gJHNlbGVjdG9yO307dmFyIFRlbXB1c0RvbWludXNCb290c3RyYXA0PWZ1bmN0aW9uKF9EYXRlVGltZVBpY2tlcil7X2luaGVyaXRzKFRlbXB1c0RvbWludXNCb290c3RyYXA0LF9EYXRlVGltZVBpY2tlcik7ZnVuY3Rpb24gVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQoZWxlbWVudCxvcHRpb25zKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxUZW1wdXNEb21pbnVzQm9vdHN0cmFwNCk7dmFyIF90aGlzPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX0RhdGVUaW1lUGlja2VyLmNhbGwodGhpcyxlbGVtZW50LG9wdGlvbnMpKTtfdGhpcy5faW5pdCgpO3JldHVybiBfdGhpczt9ClRlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbiBfaW5pdCgpe2lmKHRoaXMuX2VsZW1lbnQuaGFzQ2xhc3MoJ2lucHV0LWdyb3VwJykpe3ZhciBkYXRlcGlja2VyQnV0dG9uPXRoaXMuX2VsZW1lbnQuZmluZCgnLmRhdGVwaWNrZXJidXR0b24nKTtpZihkYXRlcGlja2VyQnV0dG9uLmxlbmd0aD09PTApe3RoaXMuY29tcG9uZW50PXRoaXMuX2VsZW1lbnQuZmluZCgnW2RhdGEtdG9nZ2xlPSJkYXRldGltZXBpY2tlciJdJyk7fWVsc2V7dGhpcy5jb21wb25lbnQ9ZGF0ZXBpY2tlckJ1dHRvbjt9fX07VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9nZXREYXRlUGlja2VyVGVtcGxhdGU9ZnVuY3Rpb24gX2dldERhdGVQaWNrZXJUZW1wbGF0ZSgpe3ZhciBoZWFkVGVtcGxhdGU9JCgnPHRoZWFkPicpLmFwcGVuZCgkKCc8dHI+JykuYXBwZW5kKCQoJzx0aD4nKS5hZGRDbGFzcygncHJldicpLmF0dHIoJ2RhdGEtYWN0aW9uJywncHJldmlvdXMnKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy5wcmV2aW91cykpKS5hcHBlbmQoJCgnPHRoPicpLmFkZENsYXNzKCdwaWNrZXItc3dpdGNoJykuYXR0cignZGF0YS1hY3Rpb24nLCdwaWNrZXJTd2l0Y2gnKS5hdHRyKCdjb2xzcGFuJywnJysodGhpcy5fb3B0aW9ucy5jYWxlbmRhcldlZWtzPyc2JzonNScpKSkuYXBwZW5kKCQoJzx0aD4nKS5hZGRDbGFzcygnbmV4dCcpLmF0dHIoJ2RhdGEtYWN0aW9uJywnbmV4dCcpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLm5leHQpKSkpLGNvbnRUZW1wbGF0ZT0kKCc8dGJvZHk+JykuYXBwZW5kKCQoJzx0cj4nKS5hcHBlbmQoJCgnPHRkPicpLmF0dHIoJ2NvbHNwYW4nLCcnKyh0aGlzLl9vcHRpb25zLmNhbGVuZGFyV2Vla3M/JzgnOic3JykpKSk7cmV0dXJuWyQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RhdGVwaWNrZXItZGF5cycpLmFwcGVuZCgkKCc8dGFibGU+JykuYWRkQ2xhc3MoJ3RhYmxlIHRhYmxlLXNtJykuYXBwZW5kKGhlYWRUZW1wbGF0ZSkuYXBwZW5kKCQoJzx0Ym9keT4nKSkpLCQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RhdGVwaWNrZXItbW9udGhzJykuYXBwZW5kKCQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUtY29uZGVuc2VkJykuYXBwZW5kKGhlYWRUZW1wbGF0ZS5jbG9uZSgpKS5hcHBlbmQoY29udFRlbXBsYXRlLmNsb25lKCkpKSwkKCc8ZGl2PicpLmFkZENsYXNzKCdkYXRlcGlja2VyLXllYXJzJykuYXBwZW5kKCQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUtY29uZGVuc2VkJykuYXBwZW5kKGhlYWRUZW1wbGF0ZS5jbG9uZSgpKS5hcHBlbmQoY29udFRlbXBsYXRlLmNsb25lKCkpKSwkKCc8ZGl2PicpLmFkZENsYXNzKCdkYXRlcGlja2VyLWRlY2FkZXMnKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKS5hcHBlbmQoaGVhZFRlbXBsYXRlLmNsb25lKCkpLmFwcGVuZChjb250VGVtcGxhdGUuY2xvbmUoKSkpXTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZ2V0VGltZVBpY2tlck1haW5UZW1wbGF0ZT1mdW5jdGlvbiBfZ2V0VGltZVBpY2tlck1haW5UZW1wbGF0ZSgpe3ZhciB0b3BSb3c9JCgnPHRyPicpLG1pZGRsZVJvdz0kKCc8dHI+JyksYm90dG9tUm93PSQoJzx0cj4nKTtpZih0aGlzLl9pc0VuYWJsZWQoJ2gnKSl7dG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmluY3JlbWVudEhvdXJ9KS5hZGRDbGFzcygnYnRuJykuYXR0cignZGF0YS1hY3Rpb24nLCdpbmNyZW1lbnRIb3VycycpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLnVwKSkpKTttaWRkbGVSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItaG91cicpLmF0dHIoeydkYXRhLXRpbWUtY29tcG9uZW50JzonaG91cnMnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5waWNrSG91cn0pLmF0dHIoJ2RhdGEtYWN0aW9uJywnc2hvd0hvdXJzJykpKTtib3R0b21Sb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuZGVjcmVtZW50SG91cn0pLmFkZENsYXNzKCdidG4nKS5hdHRyKCdkYXRhLWFjdGlvbicsJ2RlY3JlbWVudEhvdXJzJykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMuZG93bikpKSk7fQppZih0aGlzLl9pc0VuYWJsZWQoJ20nKSl7aWYodGhpcy5faXNFbmFibGVkKCdoJykpe3RvcFJvdy5hcHBlbmQoJCgnPHRkPicpLmFkZENsYXNzKCdzZXBhcmF0b3InKSk7bWlkZGxlUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpLmh0bWwoJzonKSk7Ym90dG9tUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpKTt9CnRvcFJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5pbmNyZW1lbnRNaW51dGV9KS5hZGRDbGFzcygnYnRuJykuYXR0cignZGF0YS1hY3Rpb24nLCdpbmNyZW1lbnRNaW51dGVzJykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMudXApKSkpO21pZGRsZVJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcygndGltZXBpY2tlci1taW51dGUnKS5hdHRyKHsnZGF0YS10aW1lLWNvbXBvbmVudCc6J21pbnV0ZXMnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5waWNrTWludXRlfSkuYXR0cignZGF0YS1hY3Rpb24nLCdzaG93TWludXRlcycpKSk7Ym90dG9tUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmRlY3JlbWVudE1pbnV0ZX0pLmFkZENsYXNzKCdidG4nKS5hdHRyKCdkYXRhLWFjdGlvbicsJ2RlY3JlbWVudE1pbnV0ZXMnKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy5kb3duKSkpKTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgncycpKXtpZih0aGlzLl9pc0VuYWJsZWQoJ20nKSl7dG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpKTttaWRkbGVSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykuaHRtbCgnOicpKTtib3R0b21Sb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykpO30KdG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmluY3JlbWVudFNlY29uZH0pLmFkZENsYXNzKCdidG4nKS5hdHRyKCdkYXRhLWFjdGlvbicsJ2luY3JlbWVudFNlY29uZHMnKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy51cCkpKSk7bWlkZGxlUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKCd0aW1lcGlja2VyLXNlY29uZCcpLmF0dHIoeydkYXRhLXRpbWUtY29tcG9uZW50Jzonc2Vjb25kcycsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnBpY2tTZWNvbmR9KS5hdHRyKCdkYXRhLWFjdGlvbicsJ3Nob3dTZWNvbmRzJykpKTtib3R0b21Sb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuZGVjcmVtZW50U2Vjb25kfSkuYWRkQ2xhc3MoJ2J0bicpLmF0dHIoJ2RhdGEtYWN0aW9uJywnZGVjcmVtZW50U2Vjb25kcycpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLmRvd24pKSkpO30KaWYoIXRoaXMudXNlMjRIb3Vycyl7dG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpKTttaWRkbGVSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnYnRuIGJ0bi1wcmltYXJ5JykuYXR0cih7J2RhdGEtYWN0aW9uJzondG9nZ2xlUGVyaW9kJyx0YWJpbmRleDonLTEnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy50b2dnbGVQZXJpb2R9KSkpO2JvdHRvbVJvdy5hcHBlbmQoJCgnPHRkPicpLmFkZENsYXNzKCdzZXBhcmF0b3InKSk7fQpyZXR1cm4gJCgnPGRpdj4nKS5hZGRDbGFzcygndGltZXBpY2tlci1waWNrZXInKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKS5hcHBlbmQoW3RvcFJvdyxtaWRkbGVSb3csYm90dG9tUm93XSkpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9nZXRUaW1lUGlja2VyVGVtcGxhdGU9ZnVuY3Rpb24gX2dldFRpbWVQaWNrZXJUZW1wbGF0ZSgpe3ZhciBob3Vyc1ZpZXc9JCgnPGRpdj4nKS5hZGRDbGFzcygndGltZXBpY2tlci1ob3VycycpLmFwcGVuZCgkKCc8dGFibGU+JykuYWRkQ2xhc3MoJ3RhYmxlLWNvbmRlbnNlZCcpKSxtaW51dGVzVmlldz0kKCc8ZGl2PicpLmFkZENsYXNzKCd0aW1lcGlja2VyLW1pbnV0ZXMnKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKSksc2Vjb25kc1ZpZXc9JCgnPGRpdj4nKS5hZGRDbGFzcygndGltZXBpY2tlci1zZWNvbmRzJykuYXBwZW5kKCQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUtY29uZGVuc2VkJykpLHJldD1bdGhpcy5fZ2V0VGltZVBpY2tlck1haW5UZW1wbGF0ZSgpXTtpZih0aGlzLl9pc0VuYWJsZWQoJ2gnKSl7cmV0LnB1c2goaG91cnNWaWV3KTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgnbScpKXtyZXQucHVzaChtaW51dGVzVmlldyk7fQppZih0aGlzLl9pc0VuYWJsZWQoJ3MnKSl7cmV0LnB1c2goc2Vjb25kc1ZpZXcpO30KcmV0dXJuIHJldDt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZ2V0VG9vbGJhcj1mdW5jdGlvbiBfZ2V0VG9vbGJhcigpe3ZhciByb3c9W107aWYodGhpcy5fb3B0aW9ucy5idXR0b25zLnNob3dUb2RheSl7cm93LnB1c2goJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCdkYXRhLWFjdGlvbic6J3RvZGF5JywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMudG9kYXl9KS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy50b2RheSkpKSk7fQppZighdGhpcy5fb3B0aW9ucy5zaWRlQnlTaWRlJiZ0aGlzLl9oYXNEYXRlKCkmJnRoaXMuX2hhc1RpbWUoKSl7dmFyIHRpdGxlPXZvaWQgMCxpY29uPXZvaWQgMDtpZih0aGlzLl9vcHRpb25zLnZpZXdNb2RlPT09J3RpbWVzJyl7dGl0bGU9dGhpcy5fb3B0aW9ucy50b29sdGlwcy5zZWxlY3REYXRlO2ljb249dGhpcy5fb3B0aW9ucy5pY29ucy5kYXRlO31lbHNle3RpdGxlPXRoaXMuX29wdGlvbnMudG9vbHRpcHMuc2VsZWN0VGltZTtpY29uPXRoaXMuX29wdGlvbnMuaWNvbnMudGltZTt9CnJvdy5wdXNoKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywnZGF0YS1hY3Rpb24nOid0b2dnbGVQaWNrZXInLCd0aXRsZSc6dGl0bGV9KS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3MoaWNvbikpKSk7fQppZih0aGlzLl9vcHRpb25zLmJ1dHRvbnMuc2hvd0NsZWFyKXtyb3cucHVzaCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ2RhdGEtYWN0aW9uJzonY2xlYXInLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5jbGVhcn0pLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLmNsZWFyKSkpKTt9CmlmKHRoaXMuX29wdGlvbnMuYnV0dG9ucy5zaG93Q2xvc2Upe3Jvdy5wdXNoKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywnZGF0YS1hY3Rpb24nOidjbG9zZScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmNsb3NlfSkuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMuY2xvc2UpKSkpO30KcmV0dXJuIHJvdy5sZW5ndGg9PT0wPycnOiQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUtY29uZGVuc2VkJykuYXBwZW5kKCQoJzx0Ym9keT4nKS5hcHBlbmQoJCgnPHRyPicpLmFwcGVuZChyb3cpKSk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2dldFRlbXBsYXRlPWZ1bmN0aW9uIF9nZXRUZW1wbGF0ZSgpe3ZhciB0ZW1wbGF0ZT0kKCc8ZGl2PicpLmFkZENsYXNzKCdib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IGRyb3Bkb3duLW1lbnUnKSxkYXRlVmlldz0kKCc8ZGl2PicpLmFkZENsYXNzKCdkYXRlcGlja2VyJykuYXBwZW5kKHRoaXMuX2dldERhdGVQaWNrZXJUZW1wbGF0ZSgpKSx0aW1lVmlldz0kKCc8ZGl2PicpLmFkZENsYXNzKCd0aW1lcGlja2VyJykuYXBwZW5kKHRoaXMuX2dldFRpbWVQaWNrZXJUZW1wbGF0ZSgpKSxjb250ZW50PSQoJzx1bD4nKS5hZGRDbGFzcygnbGlzdC11bnN0eWxlZCcpLHRvb2xiYXI9JCgnPGxpPicpLmFkZENsYXNzKCdwaWNrZXItc3dpdGNoJysodGhpcy5fb3B0aW9ucy5jb2xsYXBzZT8nIGFjY29yZGlvbi10b2dnbGUnOicnKSkuYXBwZW5kKHRoaXMuX2dldFRvb2xiYXIoKSk7aWYodGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RlbXBsYXRlLnJlbW92ZUNsYXNzKCdkcm9wZG93bi1tZW51Jyk7fQppZih0aGlzLnVzZTI0SG91cnMpe3RlbXBsYXRlLmFkZENsYXNzKCd1c2V0d2VudHlmb3VyJyk7fQppZih0aGlzLl9pc0VuYWJsZWQoJ3MnKSYmIXRoaXMudXNlMjRIb3Vycyl7dGVtcGxhdGUuYWRkQ2xhc3MoJ3dpZGVyJyk7fQppZih0aGlzLl9vcHRpb25zLnNpZGVCeVNpZGUmJnRoaXMuX2hhc0RhdGUoKSYmdGhpcy5faGFzVGltZSgpKXt0ZW1wbGF0ZS5hZGRDbGFzcygndGltZXBpY2tlci1zYnMnKTtpZih0aGlzLl9vcHRpb25zLnRvb2xiYXJQbGFjZW1lbnQ9PT0ndG9wJyl7dGVtcGxhdGUuYXBwZW5kKHRvb2xiYXIpO30KdGVtcGxhdGUuYXBwZW5kKCQoJzxkaXY+JykuYWRkQ2xhc3MoJ3JvdycpLmFwcGVuZChkYXRlVmlldy5hZGRDbGFzcygnY29sLW1kLTYnKSkuYXBwZW5kKHRpbWVWaWV3LmFkZENsYXNzKCdjb2wtbWQtNicpKSk7aWYodGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PT09J2JvdHRvbSd8fHRoaXMuX29wdGlvbnMudG9vbGJhclBsYWNlbWVudD09PSdkZWZhdWx0Jyl7dGVtcGxhdGUuYXBwZW5kKHRvb2xiYXIpO30KcmV0dXJuIHRlbXBsYXRlO30KaWYodGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PT09J3RvcCcpe2NvbnRlbnQuYXBwZW5kKHRvb2xiYXIpO30KaWYodGhpcy5faGFzRGF0ZSgpKXtjb250ZW50LmFwcGVuZCgkKCc8bGk+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5jb2xsYXBzZSYmdGhpcy5faGFzVGltZSgpPydjb2xsYXBzZSc6JycpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuY29sbGFwc2UmJnRoaXMuX2hhc1RpbWUoKSYmdGhpcy5fb3B0aW9ucy52aWV3TW9kZT09PSd0aW1lcyc/Jyc6J3Nob3cnKS5hcHBlbmQoZGF0ZVZpZXcpKTt9CmlmKHRoaXMuX29wdGlvbnMudG9vbGJhclBsYWNlbWVudD09PSdkZWZhdWx0Jyl7Y29udGVudC5hcHBlbmQodG9vbGJhcik7fQppZih0aGlzLl9oYXNUaW1lKCkpe2NvbnRlbnQuYXBwZW5kKCQoJzxsaT4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmNvbGxhcHNlJiZ0aGlzLl9oYXNEYXRlKCk/J2NvbGxhcHNlJzonJykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5jb2xsYXBzZSYmdGhpcy5faGFzRGF0ZSgpJiZ0aGlzLl9vcHRpb25zLnZpZXdNb2RlPT09J3RpbWVzJz8nc2hvdyc6JycpLmFwcGVuZCh0aW1lVmlldykpO30KaWYodGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PT09J2JvdHRvbScpe2NvbnRlbnQuYXBwZW5kKHRvb2xiYXIpO30KcmV0dXJuIHRlbXBsYXRlLmFwcGVuZChjb250ZW50KTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fcGxhY2U9ZnVuY3Rpb24gX3BsYWNlKGUpe3ZhciBzZWxmPWUmJmUuZGF0YSYmZS5kYXRhLnBpY2tlcnx8dGhpcyx2ZXJ0aWNhbD1zZWxmLl9vcHRpb25zLndpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsLGhvcml6b250YWw9c2VsZi5fb3B0aW9ucy53aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsLHBhcmVudD12b2lkIDA7dmFyIHBvc2l0aW9uPShzZWxmLmNvbXBvbmVudCYmc2VsZi5jb21wb25lbnQubGVuZ3RoP3NlbGYuY29tcG9uZW50OnNlbGYuX2VsZW1lbnQpLnBvc2l0aW9uKCksb2Zmc2V0PShzZWxmLmNvbXBvbmVudCYmc2VsZi5jb21wb25lbnQubGVuZ3RoP3NlbGYuY29tcG9uZW50OnNlbGYuX2VsZW1lbnQpLm9mZnNldCgpO2lmKHNlbGYuX29wdGlvbnMud2lkZ2V0UGFyZW50KXtwYXJlbnQ9c2VsZi5fb3B0aW9ucy53aWRnZXRQYXJlbnQuYXBwZW5kKHNlbGYud2lkZ2V0KTt9ZWxzZSBpZihzZWxmLl9lbGVtZW50LmlzKCdpbnB1dCcpKXtwYXJlbnQ9c2VsZi5fZWxlbWVudC5hZnRlcihzZWxmLndpZGdldCkucGFyZW50KCk7fWVsc2UgaWYoc2VsZi5fb3B0aW9ucy5pbmxpbmUpe3BhcmVudD1zZWxmLl9lbGVtZW50LmFwcGVuZChzZWxmLndpZGdldCk7cmV0dXJuO31lbHNle3BhcmVudD1zZWxmLl9lbGVtZW50O3NlbGYuX2VsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpLmFmdGVyKHNlbGYud2lkZ2V0KTt9CnZhciBwYXJlbnRPZmZzZXQ9cGFyZW50Lm9mZnNldCgpO3Bvc2l0aW9uLnRvcD1vZmZzZXQudG9wLXBhcmVudE9mZnNldC50b3A7cG9zaXRpb24ubGVmdD1vZmZzZXQubGVmdC1wYXJlbnRPZmZzZXQubGVmdDtpZih2ZXJ0aWNhbD09PSdhdXRvJyl7aWYob2Zmc2V0LnRvcCtzZWxmLndpZGdldC5oZWlnaHQoKSoxLjU+PSQod2luZG93KS5oZWlnaHQoKSskKHdpbmRvdykuc2Nyb2xsVG9wKCkmJnNlbGYud2lkZ2V0LmhlaWdodCgpK3NlbGYuX2VsZW1lbnQub3V0ZXJIZWlnaHQoKTxvZmZzZXQudG9wKXt2ZXJ0aWNhbD0ndG9wJzt9ZWxzZXt2ZXJ0aWNhbD0nYm90dG9tJzt9fQppZihob3Jpem9udGFsPT09J2F1dG8nKXtpZihwYXJlbnQud2lkdGgoKTxvZmZzZXQubGVmdCtzZWxmLndpZGdldC5vdXRlcldpZHRoKCkvMiYmb2Zmc2V0LmxlZnQrc2VsZi53aWRnZXQub3V0ZXJXaWR0aCgpPiQod2luZG93KS53aWR0aCgpKXtob3Jpem9udGFsPSdyaWdodCc7fWVsc2V7aG9yaXpvbnRhbD0nbGVmdCc7fX0KaWYodmVydGljYWw9PT0ndG9wJyl7c2VsZi53aWRnZXQuYWRkQ2xhc3MoJ3RvcCcpLnJlbW92ZUNsYXNzKCdib3R0b20nKTt9ZWxzZXtzZWxmLndpZGdldC5hZGRDbGFzcygnYm90dG9tJykucmVtb3ZlQ2xhc3MoJ3RvcCcpO30KaWYoaG9yaXpvbnRhbD09PSdyaWdodCcpe3NlbGYud2lkZ2V0LmFkZENsYXNzKCdmbG9hdC1yaWdodCcpO31lbHNle3NlbGYud2lkZ2V0LnJlbW92ZUNsYXNzKCdmbG9hdC1yaWdodCcpO30KaWYocGFyZW50LmNzcygncG9zaXRpb24nKSE9PSdyZWxhdGl2ZScpe3BhcmVudD1wYXJlbnQucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmNzcygncG9zaXRpb24nKT09PSdyZWxhdGl2ZSc7fSkuZmlyc3QoKTt9CmlmKHBhcmVudC5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgRXJyb3IoJ2RhdGV0aW1lcGlja2VyIGNvbXBvbmVudCBzaG91bGQgYmUgcGxhY2VkIHdpdGhpbiBhIHJlbGF0aXZlIHBvc2l0aW9uZWQgY29udGFpbmVyJyk7fQpzZWxmLndpZGdldC5jc3Moe3RvcDp2ZXJ0aWNhbD09PSd0b3AnPydhdXRvJzpwb3NpdGlvbi50b3Arc2VsZi5fZWxlbWVudC5vdXRlckhlaWdodCgpKydweCcsYm90dG9tOnZlcnRpY2FsPT09J3RvcCc/cGFyZW50Lm91dGVySGVpZ2h0KCktKHBhcmVudD09PXNlbGYuX2VsZW1lbnQ/MDpwb3NpdGlvbi50b3ApKydweCc6J2F1dG8nLGxlZnQ6aG9yaXpvbnRhbD09PSdsZWZ0Jz8ocGFyZW50PT09c2VsZi5fZWxlbWVudD8wOnBvc2l0aW9uLmxlZnQpKydweCc6J2F1dG8nLHJpZ2h0Omhvcml6b250YWw9PT0nbGVmdCc/J2F1dG8nOnBhcmVudC5vdXRlcldpZHRoKCktc2VsZi5fZWxlbWVudC5vdXRlcldpZHRoKCktKHBhcmVudD09PXNlbGYuX2VsZW1lbnQ/MDpwb3NpdGlvbi5sZWZ0KSsncHgnfSk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2ZpbGxEb3c9ZnVuY3Rpb24gX2ZpbGxEb3coKXt2YXIgcm93PSQoJzx0cj4nKSxjdXJyZW50RGF0ZT10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnN0YXJ0T2YoJ3cnKS5zdGFydE9mKCdkJyk7aWYodGhpcy5fb3B0aW9ucy5jYWxlbmRhcldlZWtzPT09dHJ1ZSl7cm93LmFwcGVuZCgkKCc8dGg+JykuYWRkQ2xhc3MoJ2N3JykudGV4dCgnIycpKTt9CndoaWxlKGN1cnJlbnREYXRlLmlzQmVmb3JlKHRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuZW5kT2YoJ3cnKSkpe3Jvdy5hcHBlbmQoJCgnPHRoPicpLmFkZENsYXNzKCdkb3cnKS50ZXh0KGN1cnJlbnREYXRlLmZvcm1hdCgnZGQnKSkpO2N1cnJlbnREYXRlLmFkZCgxLCdkJyk7fQp0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1kYXlzIHRoZWFkJykuYXBwZW5kKHJvdyk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2ZpbGxNb250aHM9ZnVuY3Rpb24gX2ZpbGxNb250aHMoKXt2YXIgc3BhbnM9W10sbW9udGhzU2hvcnQ9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS5zdGFydE9mKCd5Jykuc3RhcnRPZignZCcpO3doaWxlKG1vbnRoc1Nob3J0LmlzU2FtZSh0aGlzLl92aWV3RGF0ZSwneScpKXtzcGFucy5wdXNoKCQoJzxzcGFuPicpLmF0dHIoJ2RhdGEtYWN0aW9uJywnc2VsZWN0TW9udGgnKS5hZGRDbGFzcygnbW9udGgnKS50ZXh0KG1vbnRoc1Nob3J0LmZvcm1hdCgnTU1NJykpKTttb250aHNTaG9ydC5hZGQoMSwnTScpO30KdGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXItbW9udGhzIHRkJykuZW1wdHkoKS5hcHBlbmQoc3BhbnMpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl91cGRhdGVNb250aHM9ZnVuY3Rpb24gX3VwZGF0ZU1vbnRocygpe3ZhciBtb250aHNWaWV3PXRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLW1vbnRocycpLG1vbnRoc1ZpZXdIZWFkZXI9bW9udGhzVmlldy5maW5kKCd0aCcpLG1vbnRocz1tb250aHNWaWV3LmZpbmQoJ3Rib2R5JykuZmluZCgnc3BhbicpLHNlbGY9dGhpczttb250aHNWaWV3SGVhZGVyLmVxKDApLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5wcmV2WWVhcik7bW9udGhzVmlld0hlYWRlci5lcSgxKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5zZWxlY3RZZWFyKTttb250aHNWaWV3SGVhZGVyLmVxKDIpLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5uZXh0WWVhcik7bW9udGhzVmlldy5maW5kKCcuZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtpZighdGhpcy5faXNWYWxpZCh0aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsJ3knKSwneScpKXttb250aHNWaWV3SGVhZGVyLmVxKDApLmFkZENsYXNzKCdkaXNhYmxlZCcpO30KbW9udGhzVmlld0hlYWRlci5lcSgxKS50ZXh0KHRoaXMuX3ZpZXdEYXRlLnllYXIoKSk7aWYoIXRoaXMuX2lzVmFsaWQodGhpcy5fdmlld0RhdGUuY2xvbmUoKS5hZGQoMSwneScpLCd5Jykpe21vbnRoc1ZpZXdIZWFkZXIuZXEoMikuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQptb250aHMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO2lmKHRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuaXNTYW1lKHRoaXMuX3ZpZXdEYXRlLCd5JykmJiF0aGlzLnVuc2V0KXttb250aHMuZXEodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5tb250aCgpKS5hZGRDbGFzcygnYWN0aXZlJyk7fQptb250aHMuZWFjaChmdW5jdGlvbihpbmRleCl7aWYoIXNlbGYuX2lzVmFsaWQoc2VsZi5fdmlld0RhdGUuY2xvbmUoKS5tb250aChpbmRleCksJ00nKSl7JCh0aGlzKS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9fSk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2dldFN0YXJ0RW5kWWVhcj1mdW5jdGlvbiBfZ2V0U3RhcnRFbmRZZWFyKGZhY3Rvcix5ZWFyKXt2YXIgc3RlcD1mYWN0b3IvMTAsc3RhcnRZZWFyPU1hdGguZmxvb3IoeWVhci9mYWN0b3IpKmZhY3RvcixlbmRZZWFyPXN0YXJ0WWVhcitzdGVwKjksZm9jdXNWYWx1ZT1NYXRoLmZsb29yKHllYXIvc3RlcCkqc3RlcDtyZXR1cm5bc3RhcnRZZWFyLGVuZFllYXIsZm9jdXNWYWx1ZV07fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX3VwZGF0ZVllYXJzPWZ1bmN0aW9uIF91cGRhdGVZZWFycygpe3ZhciB5ZWFyc1ZpZXc9dGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXIteWVhcnMnKSx5ZWFyc1ZpZXdIZWFkZXI9eWVhcnNWaWV3LmZpbmQoJ3RoJykseWVhckNhcHM9dGhpcy5fZ2V0U3RhcnRFbmRZZWFyKDEwLHRoaXMuX3ZpZXdEYXRlLnllYXIoKSksc3RhcnRZZWFyPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkueWVhcih5ZWFyQ2Fwc1swXSksZW5kWWVhcj10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnllYXIoeWVhckNhcHNbMV0pO3ZhciBodG1sPScnO3llYXJzVmlld0hlYWRlci5lcSgwKS5maW5kKCdzcGFuJykuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMucHJldkRlY2FkZSk7eWVhcnNWaWV3SGVhZGVyLmVxKDEpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdERlY2FkZSk7eWVhcnNWaWV3SGVhZGVyLmVxKDIpLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5uZXh0RGVjYWRlKTt5ZWFyc1ZpZXcuZmluZCgnLmRpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7aWYodGhpcy5fb3B0aW9ucy5taW5EYXRlJiZ0aGlzLl9vcHRpb25zLm1pbkRhdGUuaXNBZnRlcihzdGFydFllYXIsJ3knKSl7eWVhcnNWaWV3SGVhZGVyLmVxKDApLmFkZENsYXNzKCdkaXNhYmxlZCcpO30KeWVhcnNWaWV3SGVhZGVyLmVxKDEpLnRleHQoc3RhcnRZZWFyLnllYXIoKSsnLScrZW5kWWVhci55ZWFyKCkpO2lmKHRoaXMuX29wdGlvbnMubWF4RGF0ZSYmdGhpcy5fb3B0aW9ucy5tYXhEYXRlLmlzQmVmb3JlKGVuZFllYXIsJ3knKSl7eWVhcnNWaWV3SGVhZGVyLmVxKDIpLmFkZENsYXNzKCdkaXNhYmxlZCcpO30KaHRtbCs9JzxzcGFuIGRhdGEtYWN0aW9uPSJzZWxlY3RZZWFyIiBjbGFzcz0ieWVhciBvbGQnKyghdGhpcy5faXNWYWxpZChzdGFydFllYXIsJ3knKT8nIGRpc2FibGVkJzonJykrJyI+Jysoc3RhcnRZZWFyLnllYXIoKS0xKSsnPC9zcGFuPic7d2hpbGUoIXN0YXJ0WWVhci5pc0FmdGVyKGVuZFllYXIsJ3knKSl7aHRtbCs9JzxzcGFuIGRhdGEtYWN0aW9uPSJzZWxlY3RZZWFyIiBjbGFzcz0ieWVhcicrKHN0YXJ0WWVhci5pc1NhbWUodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKSwneScpJiYhdGhpcy51bnNldD8nIGFjdGl2ZSc6JycpKyghdGhpcy5faXNWYWxpZChzdGFydFllYXIsJ3knKT8nIGRpc2FibGVkJzonJykrJyI+JytzdGFydFllYXIueWVhcigpKyc8L3NwYW4+JztzdGFydFllYXIuYWRkKDEsJ3knKTt9Cmh0bWwrPSc8c3BhbiBkYXRhLWFjdGlvbj0ic2VsZWN0WWVhciIgY2xhc3M9InllYXIgb2xkJysoIXRoaXMuX2lzVmFsaWQoc3RhcnRZZWFyLCd5Jyk/JyBkaXNhYmxlZCc6JycpKyciPicrc3RhcnRZZWFyLnllYXIoKSsnPC9zcGFuPic7eWVhcnNWaWV3LmZpbmQoJ3RkJykuaHRtbChodG1sKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fdXBkYXRlRGVjYWRlcz1mdW5jdGlvbiBfdXBkYXRlRGVjYWRlcygpe3ZhciBkZWNhZGVzVmlldz10aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1kZWNhZGVzJyksZGVjYWRlc1ZpZXdIZWFkZXI9ZGVjYWRlc1ZpZXcuZmluZCgndGgnKSx5ZWFyQ2Fwcz10aGlzLl9nZXRTdGFydEVuZFllYXIoMTAwLHRoaXMuX3ZpZXdEYXRlLnllYXIoKSksc3RhcnREZWNhZGU9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS55ZWFyKHllYXJDYXBzWzBdKSxlbmREZWNhZGU9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS55ZWFyKHllYXJDYXBzWzFdKTt2YXIgbWluRGF0ZURlY2FkZT1mYWxzZSxtYXhEYXRlRGVjYWRlPWZhbHNlLGVuZERlY2FkZVllYXI9dm9pZCAwLGh0bWw9Jyc7ZGVjYWRlc1ZpZXdIZWFkZXIuZXEoMCkuZmluZCgnc3BhbicpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnByZXZDZW50dXJ5KTtkZWNhZGVzVmlld0hlYWRlci5lcSgyKS5maW5kKCdzcGFuJykuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMubmV4dENlbnR1cnkpO2RlY2FkZXNWaWV3LmZpbmQoJy5kaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO2lmKHN0YXJ0RGVjYWRlLnllYXIoKT09PTB8fHRoaXMuX29wdGlvbnMubWluRGF0ZSYmdGhpcy5fb3B0aW9ucy5taW5EYXRlLmlzQWZ0ZXIoc3RhcnREZWNhZGUsJ3knKSl7ZGVjYWRlc1ZpZXdIZWFkZXIuZXEoMCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQpkZWNhZGVzVmlld0hlYWRlci5lcSgxKS50ZXh0KHN0YXJ0RGVjYWRlLnllYXIoKSsnLScrZW5kRGVjYWRlLnllYXIoKSk7aWYodGhpcy5fb3B0aW9ucy5tYXhEYXRlJiZ0aGlzLl9vcHRpb25zLm1heERhdGUuaXNCZWZvcmUoZW5kRGVjYWRlLCd5Jykpe2RlY2FkZXNWaWV3SGVhZGVyLmVxKDIpLmFkZENsYXNzKCdkaXNhYmxlZCcpO30KaWYoc3RhcnREZWNhZGUueWVhcigpLTEwPDApe2h0bWwrPSc8c3Bhbj4mbmJzcDs8L3NwYW4+Jzt9ZWxzZXtodG1sKz0nPHNwYW4gZGF0YS1hY3Rpb249InNlbGVjdERlY2FkZSIgY2xhc3M9ImRlY2FkZSBvbGQiIGRhdGEtc2VsZWN0aW9uPSInKyhzdGFydERlY2FkZS55ZWFyKCkrNikrJyI+Jysoc3RhcnREZWNhZGUueWVhcigpLTEwKSsnPC9zcGFuPic7fQp3aGlsZSghc3RhcnREZWNhZGUuaXNBZnRlcihlbmREZWNhZGUsJ3knKSl7ZW5kRGVjYWRlWWVhcj1zdGFydERlY2FkZS55ZWFyKCkrMTE7bWluRGF0ZURlY2FkZT10aGlzLl9vcHRpb25zLm1pbkRhdGUmJnRoaXMuX29wdGlvbnMubWluRGF0ZS5pc0FmdGVyKHN0YXJ0RGVjYWRlLCd5JykmJnRoaXMuX29wdGlvbnMubWluRGF0ZS55ZWFyKCk8PWVuZERlY2FkZVllYXI7bWF4RGF0ZURlY2FkZT10aGlzLl9vcHRpb25zLm1heERhdGUmJnRoaXMuX29wdGlvbnMubWF4RGF0ZS5pc0FmdGVyKHN0YXJ0RGVjYWRlLCd5JykmJnRoaXMuX29wdGlvbnMubWF4RGF0ZS55ZWFyKCk8PWVuZERlY2FkZVllYXI7aHRtbCs9JzxzcGFuIGRhdGEtYWN0aW9uPSJzZWxlY3REZWNhZGUiIGNsYXNzPSJkZWNhZGUnKyh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmlzQWZ0ZXIoc3RhcnREZWNhZGUpJiZ0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLnllYXIoKTw9ZW5kRGVjYWRlWWVhcj8nIGFjdGl2ZSc6JycpKyghdGhpcy5faXNWYWxpZChzdGFydERlY2FkZSwneScpJiYhbWluRGF0ZURlY2FkZSYmIW1heERhdGVEZWNhZGU/JyBkaXNhYmxlZCc6JycpKyciIGRhdGEtc2VsZWN0aW9uPSInKyhzdGFydERlY2FkZS55ZWFyKCkrNikrJyI+JytzdGFydERlY2FkZS55ZWFyKCkrJzwvc3Bhbj4nO3N0YXJ0RGVjYWRlLmFkZCgxMCwneScpO30KaHRtbCs9JzxzcGFuIGRhdGEtYWN0aW9uPSJzZWxlY3REZWNhZGUiIGNsYXNzPSJkZWNhZGUgb2xkIiBkYXRhLXNlbGVjdGlvbj0iJysoc3RhcnREZWNhZGUueWVhcigpKzYpKyciPicrc3RhcnREZWNhZGUueWVhcigpKyc8L3NwYW4+JztkZWNhZGVzVmlldy5maW5kKCd0ZCcpLmh0bWwoaHRtbCk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2ZpbGxEYXRlPWZ1bmN0aW9uIF9maWxsRGF0ZSgpe3ZhciBkYXlzVmlldz10aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1kYXlzJyksZGF5c1ZpZXdIZWFkZXI9ZGF5c1ZpZXcuZmluZCgndGgnKSxodG1sPVtdO3ZhciBjdXJyZW50RGF0ZT12b2lkIDAscm93PXZvaWQgMCxjbHNOYW1lPXZvaWQgMCxpPXZvaWQgMDtpZighdGhpcy5faGFzRGF0ZSgpKXtyZXR1cm47fQpkYXlzVmlld0hlYWRlci5lcSgwKS5maW5kKCdzcGFuJykuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMucHJldk1vbnRoKTtkYXlzVmlld0hlYWRlci5lcSgxKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5zZWxlY3RNb250aCk7ZGF5c1ZpZXdIZWFkZXIuZXEoMikuZmluZCgnc3BhbicpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLm5leHRNb250aCk7ZGF5c1ZpZXcuZmluZCgnLmRpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7ZGF5c1ZpZXdIZWFkZXIuZXEoMSkudGV4dCh0aGlzLl92aWV3RGF0ZS5mb3JtYXQodGhpcy5fb3B0aW9ucy5kYXlWaWV3SGVhZGVyRm9ybWF0KSk7aWYoIXRoaXMuX2lzVmFsaWQodGhpcy5fdmlld0RhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCdNJyksJ00nKSl7ZGF5c1ZpZXdIZWFkZXIuZXEoMCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQppZighdGhpcy5faXNWYWxpZCh0aGlzLl92aWV3RGF0ZS5jbG9uZSgpLmFkZCgxLCdNJyksJ00nKSl7ZGF5c1ZpZXdIZWFkZXIuZXEoMikuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQpjdXJyZW50RGF0ZT10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnN0YXJ0T2YoJ00nKS5zdGFydE9mKCd3Jykuc3RhcnRPZignZCcpO3ZhciBub3c9dGhpcy5nZXRNb21lbnQoKTtmb3IoaT0wO2k8NDI7aSsrKXtpZihjdXJyZW50RGF0ZS53ZWVrZGF5KCk9PT0wKXtyb3c9JCgnPHRyPicpO2lmKHRoaXMuX29wdGlvbnMuY2FsZW5kYXJXZWVrcyl7cm93LmFwcGVuZCgnPHRkIGNsYXNzPSJjdyI+JytjdXJyZW50RGF0ZS53ZWVrKCkrJzwvdGQ+Jyk7fQpodG1sLnB1c2gocm93KTt9CmNsc05hbWU9Jyc7aWYoY3VycmVudERhdGUuaXNCZWZvcmUodGhpcy5fdmlld0RhdGUsJ00nKSl7Y2xzTmFtZSs9JyBvbGQnO30KaWYoY3VycmVudERhdGUuaXNBZnRlcih0aGlzLl92aWV3RGF0ZSwnTScpKXtjbHNOYW1lKz0nIG5ldyc7fQppZih0aGlzLl9vcHRpb25zLmFsbG93TXVsdGlkYXRlKXt2YXIgaW5kZXg9dGhpcy5fZGF0ZXNGb3JtYXR0ZWQuaW5kZXhPZihjdXJyZW50RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKSk7aWYoaW5kZXghPT0tMSl7aWYoY3VycmVudERhdGUuaXNTYW1lKHRoaXMuX2RhdGVzRm9ybWF0dGVkW2luZGV4XSwnZCcpJiYhdGhpcy51bnNldCl7Y2xzTmFtZSs9JyBhY3RpdmUnO319fWVsc2V7aWYoY3VycmVudERhdGUuaXNTYW1lKHRoaXMuX2dldExhc3RQaWNrZWREYXRlKCksJ2QnKSYmIXRoaXMudW5zZXQpe2Nsc05hbWUrPScgYWN0aXZlJzt9fQppZighdGhpcy5faXNWYWxpZChjdXJyZW50RGF0ZSwnZCcpKXtjbHNOYW1lKz0nIGRpc2FibGVkJzt9CmlmKGN1cnJlbnREYXRlLmRhdGUoKT09PW5vdy5kYXRlKCkmJmN1cnJlbnREYXRlLm1vbnRoKCk9PT1ub3cubW9udGgoKSYmY3VycmVudERhdGUueWVhcigpPT09bm93LnllYXIoKSl7Y2xzTmFtZSs9JyB0b2RheSc7fQppZihjdXJyZW50RGF0ZS5kYXkoKT09PTB8fGN1cnJlbnREYXRlLmRheSgpPT09Nil7Y2xzTmFtZSs9JyB3ZWVrZW5kJzt9CnJvdy5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj0ic2VsZWN0RGF5IiBkYXRhLWRheT0iJytjdXJyZW50RGF0ZS5mb3JtYXQoJ0wnKSsnIiBjbGFzcz0iZGF5JytjbHNOYW1lKyciPicrY3VycmVudERhdGUuZGF0ZSgpKyc8L3RkPicpO2N1cnJlbnREYXRlLmFkZCgxLCdkJyk7fQpkYXlzVmlldy5maW5kKCd0Ym9keScpLmVtcHR5KCkuYXBwZW5kKGh0bWwpO3RoaXMuX3VwZGF0ZU1vbnRocygpO3RoaXMuX3VwZGF0ZVllYXJzKCk7dGhpcy5fdXBkYXRlRGVjYWRlcygpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9maWxsSG91cnM9ZnVuY3Rpb24gX2ZpbGxIb3Vycygpe3ZhciB0YWJsZT10aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlci1ob3VycyB0YWJsZScpLGN1cnJlbnRIb3VyPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3RhcnRPZignZCcpLGh0bWw9W107dmFyIHJvdz0kKCc8dHI+Jyk7aWYodGhpcy5fdmlld0RhdGUuaG91cigpPjExJiYhdGhpcy51c2UyNEhvdXJzKXtjdXJyZW50SG91ci5ob3VyKDEyKTt9CndoaWxlKGN1cnJlbnRIb3VyLmlzU2FtZSh0aGlzLl92aWV3RGF0ZSwnZCcpJiYodGhpcy51c2UyNEhvdXJzfHx0aGlzLl92aWV3RGF0ZS5ob3VyKCk8MTImJmN1cnJlbnRIb3VyLmhvdXIoKTwxMnx8dGhpcy5fdmlld0RhdGUuaG91cigpPjExKSl7aWYoY3VycmVudEhvdXIuaG91cigpJTQ9PT0wKXtyb3c9JCgnPHRyPicpO2h0bWwucHVzaChyb3cpO30Kcm93LmFwcGVuZCgnPHRkIGRhdGEtYWN0aW9uPSJzZWxlY3RIb3VyIiBjbGFzcz0iaG91cicrKCF0aGlzLl9pc1ZhbGlkKGN1cnJlbnRIb3VyLCdoJyk/JyBkaXNhYmxlZCc6JycpKyciPicrY3VycmVudEhvdXIuZm9ybWF0KHRoaXMudXNlMjRIb3Vycz8nSEgnOidoaCcpKyc8L3RkPicpO2N1cnJlbnRIb3VyLmFkZCgxLCdoJyk7fQp0YWJsZS5lbXB0eSgpLmFwcGVuZChodG1sKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbE1pbnV0ZXM9ZnVuY3Rpb24gX2ZpbGxNaW51dGVzKCl7dmFyIHRhYmxlPXRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyLW1pbnV0ZXMgdGFibGUnKSxjdXJyZW50TWludXRlPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3RhcnRPZignaCcpLGh0bWw9W10sc3RlcD10aGlzLl9vcHRpb25zLnN0ZXBwaW5nPT09MT81OnRoaXMuX29wdGlvbnMuc3RlcHBpbmc7dmFyIHJvdz0kKCc8dHI+Jyk7d2hpbGUodGhpcy5fdmlld0RhdGUuaXNTYW1lKGN1cnJlbnRNaW51dGUsJ2gnKSl7aWYoY3VycmVudE1pbnV0ZS5taW51dGUoKSUoc3RlcCo0KT09PTApe3Jvdz0kKCc8dHI+Jyk7aHRtbC5wdXNoKHJvdyk7fQpyb3cuYXBwZW5kKCc8dGQgZGF0YS1hY3Rpb249InNlbGVjdE1pbnV0ZSIgY2xhc3M9Im1pbnV0ZScrKCF0aGlzLl9pc1ZhbGlkKGN1cnJlbnRNaW51dGUsJ20nKT8nIGRpc2FibGVkJzonJykrJyI+JytjdXJyZW50TWludXRlLmZvcm1hdCgnbW0nKSsnPC90ZD4nKTtjdXJyZW50TWludXRlLmFkZChzdGVwLCdtJyk7fQp0YWJsZS5lbXB0eSgpLmFwcGVuZChodG1sKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbFNlY29uZHM9ZnVuY3Rpb24gX2ZpbGxTZWNvbmRzKCl7dmFyIHRhYmxlPXRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyLXNlY29uZHMgdGFibGUnKSxjdXJyZW50U2Vjb25kPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3RhcnRPZignbScpLGh0bWw9W107dmFyIHJvdz0kKCc8dHI+Jyk7d2hpbGUodGhpcy5fdmlld0RhdGUuaXNTYW1lKGN1cnJlbnRTZWNvbmQsJ20nKSl7aWYoY3VycmVudFNlY29uZC5zZWNvbmQoKSUyMD09PTApe3Jvdz0kKCc8dHI+Jyk7aHRtbC5wdXNoKHJvdyk7fQpyb3cuYXBwZW5kKCc8dGQgZGF0YS1hY3Rpb249InNlbGVjdFNlY29uZCIgY2xhc3M9InNlY29uZCcrKCF0aGlzLl9pc1ZhbGlkKGN1cnJlbnRTZWNvbmQsJ3MnKT8nIGRpc2FibGVkJzonJykrJyI+JytjdXJyZW50U2Vjb25kLmZvcm1hdCgnc3MnKSsnPC90ZD4nKTtjdXJyZW50U2Vjb25kLmFkZCg1LCdzJyk7fQp0YWJsZS5lbXB0eSgpLmFwcGVuZChodG1sKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbFRpbWU9ZnVuY3Rpb24gX2ZpbGxUaW1lKCl7dmFyIHRvZ2dsZT12b2lkIDAsbmV3RGF0ZT12b2lkIDA7dmFyIHRpbWVDb21wb25lbnRzPXRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIHNwYW5bZGF0YS10aW1lLWNvbXBvbmVudF0nKTtpZighdGhpcy51c2UyNEhvdXJzKXt0b2dnbGU9dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgW2RhdGEtYWN0aW9uPXRvZ2dsZVBlcmlvZF0nKTtuZXdEYXRlPXRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuY2xvbmUoKS5hZGQodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5ob3VycygpPj0xMj8tMTI6MTIsJ2gnKTt0b2dnbGUudGV4dCh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmZvcm1hdCgnQScpKTtpZih0aGlzLl9pc1ZhbGlkKG5ld0RhdGUsJ2gnKSl7dG9nZ2xlLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO31lbHNle3RvZ2dsZS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9fQp0aW1lQ29tcG9uZW50cy5maWx0ZXIoJ1tkYXRhLXRpbWUtY29tcG9uZW50PWhvdXJzXScpLnRleHQodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5mb3JtYXQoJycrKHRoaXMudXNlMjRIb3Vycz8nSEgnOidoaCcpKSk7dGltZUNvbXBvbmVudHMuZmlsdGVyKCdbZGF0YS10aW1lLWNvbXBvbmVudD1taW51dGVzXScpLnRleHQodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5mb3JtYXQoJ21tJykpO3RpbWVDb21wb25lbnRzLmZpbHRlcignW2RhdGEtdGltZS1jb21wb25lbnQ9c2Vjb25kc10nKS50ZXh0KHRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuZm9ybWF0KCdzcycpKTt0aGlzLl9maWxsSG91cnMoKTt0aGlzLl9maWxsTWludXRlcygpO3RoaXMuX2ZpbGxTZWNvbmRzKCk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2RvQWN0aW9uPWZ1bmN0aW9uIF9kb0FjdGlvbihlLGFjdGlvbil7dmFyIGxhc3RQaWNrZWQ9dGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKTtpZigkKGUuY3VycmVudFRhcmdldCkuaXMoJy5kaXNhYmxlZCcpKXtyZXR1cm4gZmFsc2U7fQphY3Rpb249YWN0aW9ufHwkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnYWN0aW9uJyk7c3dpdGNoKGFjdGlvbil7Y2FzZSduZXh0Jzp7dmFyIG5hdkZuYz1EYXRlVGltZVBpY2tlci5EYXRlUGlja2VyTW9kZXNbdGhpcy5jdXJyZW50Vmlld01vZGVdLk5BVl9GVU5DVElPTjt0aGlzLl92aWV3RGF0ZS5hZGQoRGF0ZVRpbWVQaWNrZXIuRGF0ZVBpY2tlck1vZGVzW3RoaXMuY3VycmVudFZpZXdNb2RlXS5OQVZfU1RFUCxuYXZGbmMpO3RoaXMuX2ZpbGxEYXRlKCk7dGhpcy5fdmlld1VwZGF0ZShuYXZGbmMpO2JyZWFrO30KY2FzZSdwcmV2aW91cyc6e3ZhciBfbmF2Rm5jPURhdGVUaW1lUGlja2VyLkRhdGVQaWNrZXJNb2Rlc1t0aGlzLmN1cnJlbnRWaWV3TW9kZV0uTkFWX0ZVTkNUSU9OO3RoaXMuX3ZpZXdEYXRlLnN1YnRyYWN0KERhdGVUaW1lUGlja2VyLkRhdGVQaWNrZXJNb2Rlc1t0aGlzLmN1cnJlbnRWaWV3TW9kZV0uTkFWX1NURVAsX25hdkZuYyk7dGhpcy5fZmlsbERhdGUoKTt0aGlzLl92aWV3VXBkYXRlKF9uYXZGbmMpO2JyZWFrO30KY2FzZSdwaWNrZXJTd2l0Y2gnOnRoaXMuX3Nob3dNb2RlKDEpO2JyZWFrO2Nhc2Unc2VsZWN0TW9udGgnOnt2YXIgbW9udGg9JChlLnRhcmdldCkuY2xvc2VzdCgndGJvZHknKS5maW5kKCdzcGFuJykuaW5kZXgoJChlLnRhcmdldCkpO3RoaXMuX3ZpZXdEYXRlLm1vbnRoKG1vbnRoKTtpZih0aGlzLmN1cnJlbnRWaWV3TW9kZT09PURhdGVUaW1lUGlja2VyLk1pblZpZXdNb2RlTnVtYmVyKXt0aGlzLl9zZXRWYWx1ZShsYXN0UGlja2VkLmNsb25lKCkueWVhcih0aGlzLl92aWV3RGF0ZS55ZWFyKCkpLm1vbnRoKHRoaXMuX3ZpZXdEYXRlLm1vbnRoKCkpLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7aWYoIXRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLmhpZGUoKTt9fWVsc2V7dGhpcy5fc2hvd01vZGUoLTEpO3RoaXMuX2ZpbGxEYXRlKCk7fQp0aGlzLl92aWV3VXBkYXRlKCdNJyk7YnJlYWs7fQpjYXNlJ3NlbGVjdFllYXInOnt2YXIgeWVhcj1wYXJzZUludCgkKGUudGFyZ2V0KS50ZXh0KCksMTApfHwwO3RoaXMuX3ZpZXdEYXRlLnllYXIoeWVhcik7aWYodGhpcy5jdXJyZW50Vmlld01vZGU9PT1EYXRlVGltZVBpY2tlci5NaW5WaWV3TW9kZU51bWJlcil7dGhpcy5fc2V0VmFsdWUobGFzdFBpY2tlZC5jbG9uZSgpLnllYXIodGhpcy5fdmlld0RhdGUueWVhcigpKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2lmKCF0aGlzLl9vcHRpb25zLmlubGluZSl7dGhpcy5oaWRlKCk7fX1lbHNle3RoaXMuX3Nob3dNb2RlKC0xKTt0aGlzLl9maWxsRGF0ZSgpO30KdGhpcy5fdmlld1VwZGF0ZSgnWVlZWScpO2JyZWFrO30KY2FzZSdzZWxlY3REZWNhZGUnOnt2YXIgX3llYXI9cGFyc2VJbnQoJChlLnRhcmdldCkuZGF0YSgnc2VsZWN0aW9uJyksMTApfHwwO3RoaXMuX3ZpZXdEYXRlLnllYXIoX3llYXIpO2lmKHRoaXMuY3VycmVudFZpZXdNb2RlPT09RGF0ZVRpbWVQaWNrZXIuTWluVmlld01vZGVOdW1iZXIpe3RoaXMuX3NldFZhbHVlKGxhc3RQaWNrZWQuY2xvbmUoKS55ZWFyKHRoaXMuX3ZpZXdEYXRlLnllYXIoKSksdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTtpZighdGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RoaXMuaGlkZSgpO319ZWxzZXt0aGlzLl9zaG93TW9kZSgtMSk7dGhpcy5fZmlsbERhdGUoKTt9CnRoaXMuX3ZpZXdVcGRhdGUoJ1lZWVknKTticmVhazt9CmNhc2Unc2VsZWN0RGF5Jzp7dmFyIGRheT10aGlzLl92aWV3RGF0ZS5jbG9uZSgpO2lmKCQoZS50YXJnZXQpLmlzKCcub2xkJykpe2RheS5zdWJ0cmFjdCgxLCdNJyk7fQppZigkKGUudGFyZ2V0KS5pcygnLm5ldycpKXtkYXkuYWRkKDEsJ00nKTt9CnRoaXMuX3NldFZhbHVlKGRheS5kYXRlKHBhcnNlSW50KCQoZS50YXJnZXQpLnRleHQoKSwxMCkpLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7aWYoIXRoaXMuX2hhc1RpbWUoKSYmIXRoaXMuX29wdGlvbnMua2VlcE9wZW4mJiF0aGlzLl9vcHRpb25zLmlubGluZSl7dGhpcy5oaWRlKCk7fQpicmVhazt9CmNhc2UnaW5jcmVtZW50SG91cnMnOnt2YXIgbmV3RGF0ZT1sYXN0UGlja2VkLmNsb25lKCkuYWRkKDEsJ2gnKTtpZih0aGlzLl9pc1ZhbGlkKG5ld0RhdGUsJ2gnKSl7dGhpcy5fc2V0VmFsdWUobmV3RGF0ZSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fQpjYXNlJ2luY3JlbWVudE1pbnV0ZXMnOnt2YXIgX25ld0RhdGU9bGFzdFBpY2tlZC5jbG9uZSgpLmFkZCh0aGlzLl9vcHRpb25zLnN0ZXBwaW5nLCdtJyk7aWYodGhpcy5faXNWYWxpZChfbmV3RGF0ZSwnbScpKXt0aGlzLl9zZXRWYWx1ZShfbmV3RGF0ZSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fQpjYXNlJ2luY3JlbWVudFNlY29uZHMnOnt2YXIgX25ld0RhdGUyPWxhc3RQaWNrZWQuY2xvbmUoKS5hZGQoMSwncycpO2lmKHRoaXMuX2lzVmFsaWQoX25ld0RhdGUyLCdzJykpe3RoaXMuX3NldFZhbHVlKF9uZXdEYXRlMix0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fQpjYXNlJ2RlY3JlbWVudEhvdXJzJzp7dmFyIF9uZXdEYXRlMz1sYXN0UGlja2VkLmNsb25lKCkuc3VidHJhY3QoMSwnaCcpO2lmKHRoaXMuX2lzVmFsaWQoX25ld0RhdGUzLCdoJykpe3RoaXMuX3NldFZhbHVlKF9uZXdEYXRlMyx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fQpjYXNlJ2RlY3JlbWVudE1pbnV0ZXMnOnt2YXIgX25ld0RhdGU0PWxhc3RQaWNrZWQuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLl9vcHRpb25zLnN0ZXBwaW5nLCdtJyk7aWYodGhpcy5faXNWYWxpZChfbmV3RGF0ZTQsJ20nKSl7dGhpcy5fc2V0VmFsdWUoX25ld0RhdGU0LHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9CmNhc2UnZGVjcmVtZW50U2Vjb25kcyc6e3ZhciBfbmV3RGF0ZTU9bGFzdFBpY2tlZC5jbG9uZSgpLnN1YnRyYWN0KDEsJ3MnKTtpZih0aGlzLl9pc1ZhbGlkKF9uZXdEYXRlNSwncycpKXt0aGlzLl9zZXRWYWx1ZShfbmV3RGF0ZTUsdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTt9CmJyZWFrO30KY2FzZSd0b2dnbGVQZXJpb2QnOnt0aGlzLl9zZXRWYWx1ZShsYXN0UGlja2VkLmNsb25lKCkuYWRkKGxhc3RQaWNrZWQuaG91cnMoKT49MTI/LTEyOjEyLCdoJyksdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTticmVhazt9CmNhc2UndG9nZ2xlUGlja2VyJzp7dmFyICR0aGlzPSQoZS50YXJnZXQpLCRsaW5rPSR0aGlzLmNsb3Nlc3QoJ2EnKSwkcGFyZW50PSR0aGlzLmNsb3Nlc3QoJ3VsJyksZXhwYW5kZWQ9JHBhcmVudC5maW5kKCcuc2hvdycpLGNsb3NlZD0kcGFyZW50LmZpbmQoJy5jb2xsYXBzZTpub3QoLnNob3cpJyksJHNwYW49JHRoaXMuaXMoJ3NwYW4nKT8kdGhpczokdGhpcy5maW5kKCdzcGFuJyk7dmFyIGNvbGxhcHNlRGF0YT12b2lkIDA7aWYoZXhwYW5kZWQmJmV4cGFuZGVkLmxlbmd0aCl7Y29sbGFwc2VEYXRhPWV4cGFuZGVkLmRhdGEoJ2NvbGxhcHNlJyk7aWYoY29sbGFwc2VEYXRhJiZjb2xsYXBzZURhdGEudHJhbnNpdGlvbmluZyl7cmV0dXJuIHRydWU7fQppZihleHBhbmRlZC5jb2xsYXBzZSl7ZXhwYW5kZWQuY29sbGFwc2UoJ2hpZGUnKTtjbG9zZWQuY29sbGFwc2UoJ3Nob3cnKTt9ZWxzZXtleHBhbmRlZC5yZW1vdmVDbGFzcygnc2hvdycpO2Nsb3NlZC5hZGRDbGFzcygnc2hvdycpO30KJHNwYW4udG9nZ2xlQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy50aW1lKycgJyt0aGlzLl9vcHRpb25zLmljb25zLmRhdGUpO2lmKCRzcGFuLmhhc0NsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMuZGF0ZSkpeyRsaW5rLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdERhdGUpO31lbHNleyRsaW5rLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdFRpbWUpO319fQpicmVhaztjYXNlJ3Nob3dQaWNrZXInOnRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyID4gZGl2Om5vdCgudGltZXBpY2tlci1waWNrZXIpJykuaGlkZSgpO3RoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLXBpY2tlcicpLnNob3coKTticmVhaztjYXNlJ3Nob3dIb3Vycyc6dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuaGlkZSgpO3RoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLWhvdXJzJykuc2hvdygpO2JyZWFrO2Nhc2Unc2hvd01pbnV0ZXMnOnRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLXBpY2tlcicpLmhpZGUoKTt0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1taW51dGVzJykuc2hvdygpO2JyZWFrO2Nhc2Unc2hvd1NlY29uZHMnOnRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLXBpY2tlcicpLmhpZGUoKTt0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1zZWNvbmRzJykuc2hvdygpO2JyZWFrO2Nhc2Unc2VsZWN0SG91cic6e3ZhciBob3VyPXBhcnNlSW50KCQoZS50YXJnZXQpLnRleHQoKSwxMCk7aWYoIXRoaXMudXNlMjRIb3Vycyl7aWYobGFzdFBpY2tlZC5ob3VycygpPj0xMil7aWYoaG91ciE9PTEyKXtob3VyKz0xMjt9fWVsc2V7aWYoaG91cj09PTEyKXtob3VyPTA7fX19CnRoaXMuX3NldFZhbHVlKGxhc3RQaWNrZWQuY2xvbmUoKS5ob3Vycyhob3VyKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2lmKCF0aGlzLl9pc0VuYWJsZWQoJ2EnKSYmIXRoaXMuX2lzRW5hYmxlZCgnbScpJiYhdGhpcy5fb3B0aW9ucy5rZWVwT3BlbiYmIXRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLmhpZGUoKTt9ZWxzZXt0aGlzLl9kb0FjdGlvbihlLCdzaG93UGlja2VyJyk7fQpicmVhazt9CmNhc2Unc2VsZWN0TWludXRlJzp0aGlzLl9zZXRWYWx1ZShsYXN0UGlja2VkLmNsb25lKCkubWludXRlcyhwYXJzZUludCgkKGUudGFyZ2V0KS50ZXh0KCksMTApKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2lmKCF0aGlzLl9pc0VuYWJsZWQoJ2EnKSYmIXRoaXMuX2lzRW5hYmxlZCgncycpJiYhdGhpcy5fb3B0aW9ucy5rZWVwT3BlbiYmIXRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLmhpZGUoKTt9ZWxzZXt0aGlzLl9kb0FjdGlvbihlLCdzaG93UGlja2VyJyk7fQpicmVhaztjYXNlJ3NlbGVjdFNlY29uZCc6dGhpcy5fc2V0VmFsdWUobGFzdFBpY2tlZC5jbG9uZSgpLnNlY29uZHMocGFyc2VJbnQoJChlLnRhcmdldCkudGV4dCgpLDEwKSksdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTtpZighdGhpcy5faXNFbmFibGVkKCdhJykmJiF0aGlzLl9vcHRpb25zLmtlZXBPcGVuJiYhdGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RoaXMuaGlkZSgpO31lbHNle3RoaXMuX2RvQWN0aW9uKGUsJ3Nob3dQaWNrZXInKTt9CmJyZWFrO2Nhc2UnY2xlYXInOnRoaXMuY2xlYXIoKTticmVhaztjYXNlJ2Nsb3NlJzp0aGlzLmhpZGUoKTticmVhaztjYXNlJ3RvZGF5Jzp7dmFyIHRvZGF5c0RhdGU9dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLl9pc1ZhbGlkKHRvZGF5c0RhdGUsJ2QnKSl7dGhpcy5fc2V0VmFsdWUodG9kYXlzRGF0ZSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fX0KcmV0dXJuIGZhbHNlO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24gaGlkZSgpe3ZhciB0cmFuc2l0aW9uaW5nPWZhbHNlO2lmKCF0aGlzLndpZGdldCl7cmV0dXJuO30KdGhpcy53aWRnZXQuZmluZCgnLmNvbGxhcHNlJykuZWFjaChmdW5jdGlvbigpe3ZhciBjb2xsYXBzZURhdGE9JCh0aGlzKS5kYXRhKCdjb2xsYXBzZScpO2lmKGNvbGxhcHNlRGF0YSYmY29sbGFwc2VEYXRhLnRyYW5zaXRpb25pbmcpe3RyYW5zaXRpb25pbmc9dHJ1ZTtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9KTtpZih0cmFuc2l0aW9uaW5nKXtyZXR1cm47fQppZih0aGlzLmNvbXBvbmVudCYmdGhpcy5jb21wb25lbnQuaGFzQ2xhc3MoJ2J0bicpKXt0aGlzLmNvbXBvbmVudC50b2dnbGVDbGFzcygnYWN0aXZlJyk7fQp0aGlzLndpZGdldC5oaWRlKCk7JCh3aW5kb3cpLm9mZigncmVzaXplJyx0aGlzLl9wbGFjZSgpKTt0aGlzLndpZGdldC5vZmYoJ2NsaWNrJywnW2RhdGEtYWN0aW9uXScpO3RoaXMud2lkZ2V0Lm9mZignbW91c2Vkb3duJyxmYWxzZSk7dGhpcy53aWRnZXQucmVtb3ZlKCk7dGhpcy53aWRnZXQ9ZmFsc2U7dGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuSElERSxkYXRlOnRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuY2xvbmUoKX0pO2lmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQpe3RoaXMuaW5wdXQuYmx1cigpO30KdGhpcy5fdmlld0RhdGU9dGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5jbG9uZSgpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24gc2hvdygpe3ZhciBjdXJyZW50TW9tZW50PXZvaWQgMDt2YXIgdXNlQ3VycmVudEdyYW51bGFyaXR5PXsneWVhcic6ZnVuY3Rpb24geWVhcihtKXtyZXR1cm4gbS5tb250aCgwKS5kYXRlKDEpLmhvdXJzKDApLnNlY29uZHMoMCkubWludXRlcygwKTt9LCdtb250aCc6ZnVuY3Rpb24gbW9udGgobSl7cmV0dXJuIG0uZGF0ZSgxKS5ob3VycygwKS5zZWNvbmRzKDApLm1pbnV0ZXMoMCk7fSwnZGF5JzpmdW5jdGlvbiBkYXkobSl7cmV0dXJuIG0uaG91cnMoMCkuc2Vjb25kcygwKS5taW51dGVzKDApO30sJ2hvdXInOmZ1bmN0aW9uIGhvdXIobSl7cmV0dXJuIG0uc2Vjb25kcygwKS5taW51dGVzKDApO30sJ21pbnV0ZSc6ZnVuY3Rpb24gbWludXRlKG0pe3JldHVybiBtLnNlY29uZHMoMCk7fX07aWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCl7aWYodGhpcy5pbnB1dC5wcm9wKCdkaXNhYmxlZCcpfHwhdGhpcy5fb3B0aW9ucy5pZ25vcmVSZWFkb25seSYmdGhpcy5pbnB1dC5wcm9wKCdyZWFkb25seScpfHx0aGlzLndpZGdldCl7cmV0dXJuO30KaWYodGhpcy5pbnB1dC52YWwoKSE9PXVuZGVmaW5lZCYmdGhpcy5pbnB1dC52YWwoKS50cmltKCkubGVuZ3RoIT09MCl7dGhpcy5fc2V0VmFsdWUodGhpcy5fcGFyc2VJbnB1dERhdGUodGhpcy5pbnB1dC52YWwoKS50cmltKCkpLDApO31lbHNlIGlmKHRoaXMudW5zZXQmJnRoaXMuX29wdGlvbnMudXNlQ3VycmVudCl7Y3VycmVudE1vbWVudD10aGlzLmdldE1vbWVudCgpO2lmKHR5cGVvZiB0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnQ9PT0nc3RyaW5nJyl7Y3VycmVudE1vbWVudD11c2VDdXJyZW50R3JhbnVsYXJpdHlbdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50XShjdXJyZW50TW9tZW50KTt9CnRoaXMuX3NldFZhbHVlKGN1cnJlbnRNb21lbnQsMCk7fX1lbHNlIGlmKHRoaXMudW5zZXQmJnRoaXMuX29wdGlvbnMudXNlQ3VycmVudCl7Y3VycmVudE1vbWVudD10aGlzLmdldE1vbWVudCgpO2lmKHR5cGVvZiB0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnQ9PT0nc3RyaW5nJyl7Y3VycmVudE1vbWVudD11c2VDdXJyZW50R3JhbnVsYXJpdHlbdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50XShjdXJyZW50TW9tZW50KTt9CnRoaXMuX3NldFZhbHVlKGN1cnJlbnRNb21lbnQsMCk7fQp0aGlzLndpZGdldD10aGlzLl9nZXRUZW1wbGF0ZSgpO3RoaXMuX2ZpbGxEb3coKTt0aGlzLl9maWxsTW9udGhzKCk7dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXItaG91cnMnKS5oaWRlKCk7dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXItbWludXRlcycpLmhpZGUoKTt0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlci1zZWNvbmRzJykuaGlkZSgpO3RoaXMuX3VwZGF0ZSgpO3RoaXMuX3Nob3dNb2RlKCk7JCh3aW5kb3cpLm9uKCdyZXNpemUnLHtwaWNrZXI6dGhpc30sdGhpcy5fcGxhY2UpO3RoaXMud2lkZ2V0Lm9uKCdjbGljaycsJ1tkYXRhLWFjdGlvbl0nLCQucHJveHkodGhpcy5fZG9BY3Rpb24sdGhpcykpO3RoaXMud2lkZ2V0Lm9uKCdtb3VzZWRvd24nLGZhbHNlKTtpZih0aGlzLmNvbXBvbmVudCYmdGhpcy5jb21wb25lbnQuaGFzQ2xhc3MoJ2J0bicpKXt0aGlzLmNvbXBvbmVudC50b2dnbGVDbGFzcygnYWN0aXZlJyk7fQp0aGlzLl9wbGFjZSgpO3RoaXMud2lkZ2V0LnNob3coKTtpZih0aGlzLmlucHV0IT09dW5kZWZpbmVkJiZ0aGlzLl9vcHRpb25zLmZvY3VzT25TaG93JiYhdGhpcy5pbnB1dC5pcygnOmZvY3VzJykpe3RoaXMuaW5wdXQuZm9jdXMoKTt9CnRoaXMuX25vdGlmeUV2ZW50KHt0eXBlOkRhdGVUaW1lUGlja2VyLkV2ZW50LlNIT1d9KTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uIGRlc3Ryb3koKXt0aGlzLmhpZGUoKTt0aGlzLl9lbGVtZW50LnJlbW92ZURhdGEoRGF0ZVRpbWVQaWNrZXIuREFUQV9LRVkpO3RoaXMuX2VsZW1lbnQucmVtb3ZlRGF0YSgnZGF0ZScpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24gZGlzYWJsZSgpe3RoaXMuaGlkZSgpO2lmKHRoaXMuY29tcG9uZW50JiZ0aGlzLmNvbXBvbmVudC5oYXNDbGFzcygnYnRuJykpe3RoaXMuY29tcG9uZW50LmFkZENsYXNzKCdkaXNhYmxlZCcpO30KaWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCl7dGhpcy5pbnB1dC5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7fX07VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbiBlbmFibGUoKXtpZih0aGlzLmNvbXBvbmVudCYmdGhpcy5jb21wb25lbnQuaGFzQ2xhc3MoJ2J0bicpKXt0aGlzLmNvbXBvbmVudC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTt9CmlmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQpe3RoaXMuaW5wdXQucHJvcCgnZGlzYWJsZWQnLGZhbHNlKTt9fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUudG9vbGJhclBsYWNlbWVudD1mdW5jdGlvbiB0b29sYmFyUGxhY2VtZW50KF90b29sYmFyUGxhY2VtZW50KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMudG9vbGJhclBsYWNlbWVudDt9CmlmKHR5cGVvZiBfdG9vbGJhclBsYWNlbWVudCE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd0b29sYmFyUGxhY2VtZW50KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXInKTt9CmlmKHRvb2xiYXJQbGFjZW1lbnRzLmluZGV4T2YoX3Rvb2xiYXJQbGFjZW1lbnQpPT09LTEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3Rvb2xiYXJQbGFjZW1lbnQoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgKCcrdG9vbGJhclBsYWNlbWVudHMuam9pbignLCAnKSsnKSB2YWx1ZScpO30KdGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PV90b29sYmFyUGxhY2VtZW50O2lmKHRoaXMud2lkZ2V0KXt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt9fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUud2lkZ2V0UG9zaXRpb25pbmc9ZnVuY3Rpb24gd2lkZ2V0UG9zaXRpb25pbmcoX3dpZGdldFBvc2l0aW9uaW5nKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuICQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMud2lkZ2V0UG9zaXRpb25pbmcpO30KaWYoe30udG9TdHJpbmcuY2FsbChfd2lkZ2V0UG9zaXRpb25pbmcpIT09J1tvYmplY3QgT2JqZWN0XScpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3dpZGdldFBvc2l0aW9uaW5nKCkgZXhwZWN0cyBhbiBvYmplY3QgdmFyaWFibGUnKTt9CmlmKF93aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsKXtpZih0eXBlb2YgX3dpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWwhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignd2lkZ2V0UG9zaXRpb25pbmcoKSBob3Jpem9udGFsIHZhcmlhYmxlIG11c3QgYmUgYSBzdHJpbmcnKTt9Cl93aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsPV93aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsLnRvTG93ZXJDYXNlKCk7aWYoaG9yaXpvbnRhbE1vZGVzLmluZGV4T2YoX3dpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWwpPT09LTEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3dpZGdldFBvc2l0aW9uaW5nKCkgZXhwZWN0cyBob3Jpem9udGFsIHBhcmFtZXRlciB0byBiZSBvbmUgb2YgKCcraG9yaXpvbnRhbE1vZGVzLmpvaW4oJywgJykrJyknKTt9CnRoaXMuX29wdGlvbnMud2lkZ2V0UG9zaXRpb25pbmcuaG9yaXpvbnRhbD1fd2lkZ2V0UG9zaXRpb25pbmcuaG9yaXpvbnRhbDt9CmlmKF93aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbCl7aWYodHlwZW9mIF93aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbCE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd3aWRnZXRQb3NpdGlvbmluZygpIHZlcnRpY2FsIHZhcmlhYmxlIG11c3QgYmUgYSBzdHJpbmcnKTt9Cl93aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbD1fd2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWwudG9Mb3dlckNhc2UoKTtpZih2ZXJ0aWNhbE1vZGVzLmluZGV4T2YoX3dpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsKT09PS0xKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd3aWRnZXRQb3NpdGlvbmluZygpIGV4cGVjdHMgdmVydGljYWwgcGFyYW1ldGVyIHRvIGJlIG9uZSBvZiAoJyt2ZXJ0aWNhbE1vZGVzLmpvaW4oJywgJykrJyknKTt9CnRoaXMuX29wdGlvbnMud2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWw9X3dpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsO30KdGhpcy5fdXBkYXRlKCk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUud2lkZ2V0UGFyZW50PWZ1bmN0aW9uIHdpZGdldFBhcmVudChfd2lkZ2V0UGFyZW50KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMud2lkZ2V0UGFyZW50O30KaWYodHlwZW9mIF93aWRnZXRQYXJlbnQ9PT0nc3RyaW5nJyl7X3dpZGdldFBhcmVudD0kKF93aWRnZXRQYXJlbnQpO30KaWYoX3dpZGdldFBhcmVudCE9PW51bGwmJnR5cGVvZiBfd2lkZ2V0UGFyZW50IT09J3N0cmluZycmJiEoX3dpZGdldFBhcmVudCBpbnN0YW5jZW9mICQpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd3aWRnZXRQYXJlbnQoKSBleHBlY3RzIGEgc3RyaW5nIG9yIGEgalF1ZXJ5IG9iamVjdCBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMud2lkZ2V0UGFyZW50PV93aWRnZXRQYXJlbnQ7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O1RlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlIYW5kbGVUaGlzPWZ1bmN0aW9uIF9qUXVlcnlIYW5kbGVUaGlzKG1lLG9wdGlvbixhcmd1bWVudCl7dmFyIGRhdGE9JChtZSkuZGF0YShEYXRlVGltZVBpY2tlci5EQVRBX0tFWSk7aWYoKHR5cGVvZiBvcHRpb249PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKG9wdGlvbikpPT09J29iamVjdCcpeyQuZXh0ZW5kKHt9LERhdGVUaW1lUGlja2VyLkRlZmF1bHQsb3B0aW9uKTt9CmlmKCFkYXRhKXtkYXRhPW5ldyBUZW1wdXNEb21pbnVzQm9vdHN0cmFwNCgkKG1lKSxvcHRpb24pOyQobWUpLmRhdGEoRGF0ZVRpbWVQaWNrZXIuREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2Ygb3B0aW9uPT09J3N0cmluZycpe2lmKGRhdGFbb3B0aW9uXT09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgIicrb3B0aW9uKyciJyk7fQppZihhcmd1bWVudD09PXVuZGVmaW5lZCl7cmV0dXJuIGRhdGFbb3B0aW9uXSgpO31lbHNle3JldHVybiBkYXRhW29wdGlvbl0oYXJndW1lbnQpO319fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2Uob3B0aW9uLGFyZ3VtZW50KXtpZih0aGlzLmxlbmd0aD09PTEpe3JldHVybiBUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SGFuZGxlVGhpcyh0aGlzWzBdLG9wdGlvbixhcmd1bWVudCk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUhhbmRsZVRoaXModGhpcyxvcHRpb24sYXJndW1lbnQpO30pO307cmV0dXJuIFRlbXB1c0RvbWludXNCb290c3RyYXA0O30oRGF0ZVRpbWVQaWNrZXIpOyQoZG9jdW1lbnQpLm9uKERhdGVUaW1lUGlja2VyLkV2ZW50LkNMSUNLX0RBVEFfQVBJLERhdGVUaW1lUGlja2VyLlNlbGVjdG9yLkRBVEFfVE9HR0xFLGZ1bmN0aW9uKCl7dmFyICR0YXJnZXQ9Z2V0U2VsZWN0b3JGcm9tRWxlbWVudCgkKHRoaXMpKTtpZigkdGFyZ2V0Lmxlbmd0aD09PTApe3JldHVybjt9ClRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkdGFyZ2V0LCd0b2dnbGUnKTt9KS5vbihEYXRlVGltZVBpY2tlci5FdmVudC5DSEFOR0UsJy4nK0RhdGVUaW1lUGlja2VyLkNsYXNzTmFtZS5JTlBVVCxmdW5jdGlvbihldmVudCl7dmFyICR0YXJnZXQ9Z2V0U2VsZWN0b3JGcm9tRWxlbWVudCgkKHRoaXMpKTtpZigkdGFyZ2V0Lmxlbmd0aD09PTApe3JldHVybjt9ClRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkdGFyZ2V0LCdfY2hhbmdlJyxldmVudCk7fSkub24oRGF0ZVRpbWVQaWNrZXIuRXZlbnQuQkxVUiwnLicrRGF0ZVRpbWVQaWNrZXIuQ2xhc3NOYW1lLklOUFVULGZ1bmN0aW9uKGV2ZW50KXt2YXIgJHRhcmdldD1nZXRTZWxlY3RvckZyb21FbGVtZW50KCQodGhpcykpLGNvbmZpZz0kdGFyZ2V0LmRhdGEoRGF0ZVRpbWVQaWNrZXIuREFUQV9LRVkpO2lmKCR0YXJnZXQubGVuZ3RoPT09MCl7cmV0dXJuO30KaWYoY29uZmlnJiZjb25maWcuX29wdGlvbnMuZGVidWd8fHdpbmRvdy5kZWJ1Zyl7cmV0dXJuO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsJ2hpZGUnLGV2ZW50KTt9KS5vbihEYXRlVGltZVBpY2tlci5FdmVudC5LRVlET1dOLCcuJytEYXRlVGltZVBpY2tlci5DbGFzc05hbWUuSU5QVVQsZnVuY3Rpb24oZXZlbnQpe3ZhciAkdGFyZ2V0PWdldFNlbGVjdG9yRnJvbUVsZW1lbnQoJCh0aGlzKSk7aWYoJHRhcmdldC5sZW5ndGg9PT0wKXtyZXR1cm47fQpUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHRhcmdldCwnX2tleWRvd24nLGV2ZW50KTt9KS5vbihEYXRlVGltZVBpY2tlci5FdmVudC5LRVlVUCwnLicrRGF0ZVRpbWVQaWNrZXIuQ2xhc3NOYW1lLklOUFVULGZ1bmN0aW9uKGV2ZW50KXt2YXIgJHRhcmdldD1nZXRTZWxlY3RvckZyb21FbGVtZW50KCQodGhpcykpO2lmKCR0YXJnZXQubGVuZ3RoPT09MCl7cmV0dXJuO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsJ19rZXl1cCcsZXZlbnQpO30pLm9uKERhdGVUaW1lUGlja2VyLkV2ZW50LkZPQ1VTLCcuJytEYXRlVGltZVBpY2tlci5DbGFzc05hbWUuSU5QVVQsZnVuY3Rpb24oZXZlbnQpe3ZhciAkdGFyZ2V0PWdldFNlbGVjdG9yRnJvbUVsZW1lbnQoJCh0aGlzKSksY29uZmlnPSR0YXJnZXQuZGF0YShEYXRlVGltZVBpY2tlci5EQVRBX0tFWSk7aWYoJHRhcmdldC5sZW5ndGg9PT0wKXtyZXR1cm47fQppZighY29uZmlnLl9vcHRpb25zLmFsbG93SW5wdXRUb2dnbGUpe3JldHVybjt9ClRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkdGFyZ2V0LCdzaG93JyxldmVudCk7fSk7JC5mbltEYXRlVGltZVBpY2tlci5OQU1FXT1UZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bRGF0ZVRpbWVQaWNrZXIuTkFNRV0uQ29uc3RydWN0b3I9VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQ7JC5mbltEYXRlVGltZVBpY2tlci5OQU1FXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7JC5mbltEYXRlVGltZVBpY2tlci5OQU1FXT1KUVVFUllfTk9fQ09ORkxJQ1Q7cmV0dXJuIFRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQ7fShqUXVlcnkpO30oKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvc2VsZWN0Mi9zZWxlY3QyLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oJCl7aWYodHlwZW9mICQuZm4uZWFjaDI9PSJ1bmRlZmluZWQiKXskLmV4dGVuZCgkLmZuLHtlYWNoMjpmdW5jdGlvbihjKXt2YXIgaj0kKFswXSksaT0tMSxsPXRoaXMubGVuZ3RoO3doaWxlKCsraTxsJiYoai5jb250ZXh0PWpbMF09dGhpc1tpXSkmJmMuY2FsbChqWzBdLGksaikhPT1mYWxzZSk7cmV0dXJuIHRoaXM7fX0pO319KShqUXVlcnkpOyhmdW5jdGlvbigkLHVuZGVmaW5lZCl7InVzZSBzdHJpY3QiO2lmKHdpbmRvdy5TZWxlY3QyIT09dW5kZWZpbmVkKXtyZXR1cm47fQp2YXIgQWJzdHJhY3RTZWxlY3QyLFNpbmdsZVNlbGVjdDIsTXVsdGlTZWxlY3QyLG5leHRVaWQsc2l6ZXIsbGFzdE1vdXNlUG9zaXRpb249e3g6MCx5OjB9LCRkb2N1bWVudCxzY3JvbGxCYXJEaW1lbnNpb25zLEtFWT17VEFCOjksRU5URVI6MTMsRVNDOjI3LFNQQUNFOjMyLExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxTSElGVDoxNixDVFJMOjE3LEFMVDoxOCxQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxIT01FOjM2LEVORDozNSxCQUNLU1BBQ0U6OCxERUxFVEU6NDYsaXNBcnJvdzpmdW5jdGlvbihrKXtrPWsud2hpY2g/ay53aGljaDprO3N3aXRjaChrKXtjYXNlIEtFWS5MRUZUOmNhc2UgS0VZLlJJR0hUOmNhc2UgS0VZLlVQOmNhc2UgS0VZLkRPV046cmV0dXJuIHRydWU7fQpyZXR1cm4gZmFsc2U7fSxpc0NvbnRyb2w6ZnVuY3Rpb24oZSl7dmFyIGs9ZS53aGljaDtzd2l0Y2goayl7Y2FzZSBLRVkuU0hJRlQ6Y2FzZSBLRVkuQ1RSTDpjYXNlIEtFWS5BTFQ6cmV0dXJuIHRydWU7fQppZihlLm1ldGFLZXkpcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO30saXNGdW5jdGlvbktleTpmdW5jdGlvbihrKXtrPWsud2hpY2g/ay53aGljaDprO3JldHVybiBrPj0xMTImJms8PTEyMzt9fSxNRUFTVVJFX1NDUk9MTEJBUl9URU1QTEFURT0iPGRpdiBjbGFzcz0nc2VsZWN0Mi1tZWFzdXJlLXNjcm9sbGJhcic+PC9kaXY+IixESUFDUklUSUNTPXsiXHUyNEI2IjoiQSIsIlx1RkYyMSI6IkEiLCJcdTAwQzAiOiJBIiwiXHUwMEMxIjoiQSIsIlx1MDBDMiI6IkEiLCJcdTFFQTYiOiJBIiwiXHUxRUE0IjoiQSIsIlx1MUVBQSI6IkEiLCJcdTFFQTgiOiJBIiwiXHUwMEMzIjoiQSIsIlx1MDEwMCI6IkEiLCJcdTAxMDIiOiJBIiwiXHUxRUIwIjoiQSIsIlx1MUVBRSI6IkEiLCJcdTFFQjQiOiJBIiwiXHUxRUIyIjoiQSIsIlx1MDIyNiI6IkEiLCJcdTAxRTAiOiJBIiwiXHUwMEM0IjoiQSIsIlx1MDFERSI6IkEiLCJcdTFFQTIiOiJBIiwiXHUwMEM1IjoiQSIsIlx1MDFGQSI6IkEiLCJcdTAxQ0QiOiJBIiwiXHUwMjAwIjoiQSIsIlx1MDIwMiI6IkEiLCJcdTFFQTAiOiJBIiwiXHUxRUFDIjoiQSIsIlx1MUVCNiI6IkEiLCJcdTFFMDAiOiJBIiwiXHUwMTA0IjoiQSIsIlx1MDIzQSI6IkEiLCJcdTJDNkYiOiJBIiwiXHVBNzMyIjoiQUEiLCJcdTAwQzYiOiJBRSIsIlx1MDFGQyI6IkFFIiwiXHUwMUUyIjoiQUUiLCJcdUE3MzQiOiJBTyIsIlx1QTczNiI6IkFVIiwiXHVBNzM4IjoiQVYiLCJcdUE3M0EiOiJBViIsIlx1QTczQyI6IkFZIiwiXHUyNEI3IjoiQiIsIlx1RkYyMiI6IkIiLCJcdTFFMDIiOiJCIiwiXHUxRTA0IjoiQiIsIlx1MUUwNiI6IkIiLCJcdTAyNDMiOiJCIiwiXHUwMTgyIjoiQiIsIlx1MDE4MSI6IkIiLCJcdTI0QjgiOiJDIiwiXHVGRjIzIjoiQyIsIlx1MDEwNiI6IkMiLCJcdTAxMDgiOiJDIiwiXHUwMTBBIjoiQyIsIlx1MDEwQyI6IkMiLCJcdTAwQzciOiJDIiwiXHUxRTA4IjoiQyIsIlx1MDE4NyI6IkMiLCJcdTAyM0IiOiJDIiwiXHVBNzNFIjoiQyIsIlx1MjRCOSI6IkQiLCJcdUZGMjQiOiJEIiwiXHUxRTBBIjoiRCIsIlx1MDEwRSI6IkQiLCJcdTFFMEMiOiJEIiwiXHUxRTEwIjoiRCIsIlx1MUUxMiI6IkQiLCJcdTFFMEUiOiJEIiwiXHUwMTEwIjoiRCIsIlx1MDE4QiI6IkQiLCJcdTAxOEEiOiJEIiwiXHUwMTg5IjoiRCIsIlx1QTc3OSI6IkQiLCJcdTAxRjEiOiJEWiIsIlx1MDFDNCI6IkRaIiwiXHUwMUYyIjoiRHoiLCJcdTAxQzUiOiJEeiIsIlx1MjRCQSI6IkUiLCJcdUZGMjUiOiJFIiwiXHUwMEM4IjoiRSIsIlx1MDBDOSI6IkUiLCJcdTAwQ0EiOiJFIiwiXHUxRUMwIjoiRSIsIlx1MUVCRSI6IkUiLCJcdTFFQzQiOiJFIiwiXHUxRUMyIjoiRSIsIlx1MUVCQyI6IkUiLCJcdTAxMTIiOiJFIiwiXHUxRTE0IjoiRSIsIlx1MUUxNiI6IkUiLCJcdTAxMTQiOiJFIiwiXHUwMTE2IjoiRSIsIlx1MDBDQiI6IkUiLCJcdTFFQkEiOiJFIiwiXHUwMTFBIjoiRSIsIlx1MDIwNCI6IkUiLCJcdTAyMDYiOiJFIiwiXHUxRUI4IjoiRSIsIlx1MUVDNiI6IkUiLCJcdTAyMjgiOiJFIiwiXHUxRTFDIjoiRSIsIlx1MDExOCI6IkUiLCJcdTFFMTgiOiJFIiwiXHUxRTFBIjoiRSIsIlx1MDE5MCI6IkUiLCJcdTAxOEUiOiJFIiwiXHUyNEJCIjoiRiIsIlx1RkYyNiI6IkYiLCJcdTFFMUUiOiJGIiwiXHUwMTkxIjoiRiIsIlx1QTc3QiI6IkYiLCJcdTI0QkMiOiJHIiwiXHVGRjI3IjoiRyIsIlx1MDFGNCI6IkciLCJcdTAxMUMiOiJHIiwiXHUxRTIwIjoiRyIsIlx1MDExRSI6IkciLCJcdTAxMjAiOiJHIiwiXHUwMUU2IjoiRyIsIlx1MDEyMiI6IkciLCJcdTAxRTQiOiJHIiwiXHUwMTkzIjoiRyIsIlx1QTdBMCI6IkciLCJcdUE3N0QiOiJHIiwiXHVBNzdFIjoiRyIsIlx1MjRCRCI6IkgiLCJcdUZGMjgiOiJIIiwiXHUwMTI0IjoiSCIsIlx1MUUyMiI6IkgiLCJcdTFFMjYiOiJIIiwiXHUwMjFFIjoiSCIsIlx1MUUyNCI6IkgiLCJcdTFFMjgiOiJIIiwiXHUxRTJBIjoiSCIsIlx1MDEyNiI6IkgiLCJcdTJDNjciOiJIIiwiXHUyQzc1IjoiSCIsIlx1QTc4RCI6IkgiLCJcdTI0QkUiOiJJIiwiXHVGRjI5IjoiSSIsIlx1MDBDQyI6IkkiLCJcdTAwQ0QiOiJJIiwiXHUwMENFIjoiSSIsIlx1MDEyOCI6IkkiLCJcdTAxMkEiOiJJIiwiXHUwMTJDIjoiSSIsIlx1MDEzMCI6IkkiLCJcdTAwQ0YiOiJJIiwiXHUxRTJFIjoiSSIsIlx1MUVDOCI6IkkiLCJcdTAxQ0YiOiJJIiwiXHUwMjA4IjoiSSIsIlx1MDIwQSI6IkkiLCJcdTFFQ0EiOiJJIiwiXHUwMTJFIjoiSSIsIlx1MUUyQyI6IkkiLCJcdTAxOTciOiJJIiwiXHUyNEJGIjoiSiIsIlx1RkYyQSI6IkoiLCJcdTAxMzQiOiJKIiwiXHUwMjQ4IjoiSiIsIlx1MjRDMCI6IksiLCJcdUZGMkIiOiJLIiwiXHUxRTMwIjoiSyIsIlx1MDFFOCI6IksiLCJcdTFFMzIiOiJLIiwiXHUwMTM2IjoiSyIsIlx1MUUzNCI6IksiLCJcdTAxOTgiOiJLIiwiXHUyQzY5IjoiSyIsIlx1QTc0MCI6IksiLCJcdUE3NDIiOiJLIiwiXHVBNzQ0IjoiSyIsIlx1QTdBMiI6IksiLCJcdTI0QzEiOiJMIiwiXHVGRjJDIjoiTCIsIlx1MDEzRiI6IkwiLCJcdTAxMzkiOiJMIiwiXHUwMTNEIjoiTCIsIlx1MUUzNiI6IkwiLCJcdTFFMzgiOiJMIiwiXHUwMTNCIjoiTCIsIlx1MUUzQyI6IkwiLCJcdTFFM0EiOiJMIiwiXHUwMTQxIjoiTCIsIlx1MDIzRCI6IkwiLCJcdTJDNjIiOiJMIiwiXHUyQzYwIjoiTCIsIlx1QTc0OCI6IkwiLCJcdUE3NDYiOiJMIiwiXHVBNzgwIjoiTCIsIlx1MDFDNyI6IkxKIiwiXHUwMUM4IjoiTGoiLCJcdTI0QzIiOiJNIiwiXHVGRjJEIjoiTSIsIlx1MUUzRSI6Ik0iLCJcdTFFNDAiOiJNIiwiXHUxRTQyIjoiTSIsIlx1MkM2RSI6Ik0iLCJcdTAxOUMiOiJNIiwiXHUyNEMzIjoiTiIsIlx1RkYyRSI6Ik4iLCJcdTAxRjgiOiJOIiwiXHUwMTQzIjoiTiIsIlx1MDBEMSI6Ik4iLCJcdTFFNDQiOiJOIiwiXHUwMTQ3IjoiTiIsIlx1MUU0NiI6Ik4iLCJcdTAxNDUiOiJOIiwiXHUxRTRBIjoiTiIsIlx1MUU0OCI6Ik4iLCJcdTAyMjAiOiJOIiwiXHUwMTlEIjoiTiIsIlx1QTc5MCI6Ik4iLCJcdUE3QTQiOiJOIiwiXHUwMUNBIjoiTkoiLCJcdTAxQ0IiOiJOaiIsIlx1MjRDNCI6Ik8iLCJcdUZGMkYiOiJPIiwiXHUwMEQyIjoiTyIsIlx1MDBEMyI6Ik8iLCJcdTAwRDQiOiJPIiwiXHUxRUQyIjoiTyIsIlx1MUVEMCI6Ik8iLCJcdTFFRDYiOiJPIiwiXHUxRUQ0IjoiTyIsIlx1MDBENSI6Ik8iLCJcdTFFNEMiOiJPIiwiXHUwMjJDIjoiTyIsIlx1MUU0RSI6Ik8iLCJcdTAxNEMiOiJPIiwiXHUxRTUwIjoiTyIsIlx1MUU1MiI6Ik8iLCJcdTAxNEUiOiJPIiwiXHUwMjJFIjoiTyIsIlx1MDIzMCI6Ik8iLCJcdTAwRDYiOiJPIiwiXHUwMjJBIjoiTyIsIlx1MUVDRSI6Ik8iLCJcdTAxNTAiOiJPIiwiXHUwMUQxIjoiTyIsIlx1MDIwQyI6Ik8iLCJcdTAyMEUiOiJPIiwiXHUwMUEwIjoiTyIsIlx1MUVEQyI6Ik8iLCJcdTFFREEiOiJPIiwiXHUxRUUwIjoiTyIsIlx1MUVERSI6Ik8iLCJcdTFFRTIiOiJPIiwiXHUxRUNDIjoiTyIsIlx1MUVEOCI6Ik8iLCJcdTAxRUEiOiJPIiwiXHUwMUVDIjoiTyIsIlx1MDBEOCI6Ik8iLCJcdTAxRkUiOiJPIiwiXHUwMTg2IjoiTyIsIlx1MDE5RiI6Ik8iLCJcdUE3NEEiOiJPIiwiXHVBNzRDIjoiTyIsIlx1MDFBMiI6Ik9JIiwiXHVBNzRFIjoiT08iLCJcdTAyMjIiOiJPVSIsIlx1MjRDNSI6IlAiLCJcdUZGMzAiOiJQIiwiXHUxRTU0IjoiUCIsIlx1MUU1NiI6IlAiLCJcdTAxQTQiOiJQIiwiXHUyQzYzIjoiUCIsIlx1QTc1MCI6IlAiLCJcdUE3NTIiOiJQIiwiXHVBNzU0IjoiUCIsIlx1MjRDNiI6IlEiLCJcdUZGMzEiOiJRIiwiXHVBNzU2IjoiUSIsIlx1QTc1OCI6IlEiLCJcdTAyNEEiOiJRIiwiXHUyNEM3IjoiUiIsIlx1RkYzMiI6IlIiLCJcdTAxNTQiOiJSIiwiXHUxRTU4IjoiUiIsIlx1MDE1OCI6IlIiLCJcdTAyMTAiOiJSIiwiXHUwMjEyIjoiUiIsIlx1MUU1QSI6IlIiLCJcdTFFNUMiOiJSIiwiXHUwMTU2IjoiUiIsIlx1MUU1RSI6IlIiLCJcdTAyNEMiOiJSIiwiXHUyQzY0IjoiUiIsIlx1QTc1QSI6IlIiLCJcdUE3QTYiOiJSIiwiXHVBNzgyIjoiUiIsIlx1MjRDOCI6IlMiLCJcdUZGMzMiOiJTIiwiXHUxRTlFIjoiUyIsIlx1MDE1QSI6IlMiLCJcdTFFNjQiOiJTIiwiXHUwMTVDIjoiUyIsIlx1MUU2MCI6IlMiLCJcdTAxNjAiOiJTIiwiXHUxRTY2IjoiUyIsIlx1MUU2MiI6IlMiLCJcdTFFNjgiOiJTIiwiXHUwMjE4IjoiUyIsIlx1MDE1RSI6IlMiLCJcdTJDN0UiOiJTIiwiXHVBN0E4IjoiUyIsIlx1QTc4NCI6IlMiLCJcdTI0QzkiOiJUIiwiXHVGRjM0IjoiVCIsIlx1MUU2QSI6IlQiLCJcdTAxNjQiOiJUIiwiXHUxRTZDIjoiVCIsIlx1MDIxQSI6IlQiLCJcdTAxNjIiOiJUIiwiXHUxRTcwIjoiVCIsIlx1MUU2RSI6IlQiLCJcdTAxNjYiOiJUIiwiXHUwMUFDIjoiVCIsIlx1MDFBRSI6IlQiLCJcdTAyM0UiOiJUIiwiXHVBNzg2IjoiVCIsIlx1QTcyOCI6IlRaIiwiXHUyNENBIjoiVSIsIlx1RkYzNSI6IlUiLCJcdTAwRDkiOiJVIiwiXHUwMERBIjoiVSIsIlx1MDBEQiI6IlUiLCJcdTAxNjgiOiJVIiwiXHUxRTc4IjoiVSIsIlx1MDE2QSI6IlUiLCJcdTFFN0EiOiJVIiwiXHUwMTZDIjoiVSIsIlx1MDBEQyI6IlUiLCJcdTAxREIiOiJVIiwiXHUwMUQ3IjoiVSIsIlx1MDFENSI6IlUiLCJcdTAxRDkiOiJVIiwiXHUxRUU2IjoiVSIsIlx1MDE2RSI6IlUiLCJcdTAxNzAiOiJVIiwiXHUwMUQzIjoiVSIsIlx1MDIxNCI6IlUiLCJcdTAyMTYiOiJVIiwiXHUwMUFGIjoiVSIsIlx1MUVFQSI6IlUiLCJcdTFFRTgiOiJVIiwiXHUxRUVFIjoiVSIsIlx1MUVFQyI6IlUiLCJcdTFFRjAiOiJVIiwiXHUxRUU0IjoiVSIsIlx1MUU3MiI6IlUiLCJcdTAxNzIiOiJVIiwiXHUxRTc2IjoiVSIsIlx1MUU3NCI6IlUiLCJcdTAyNDQiOiJVIiwiXHUyNENCIjoiViIsIlx1RkYzNiI6IlYiLCJcdTFFN0MiOiJWIiwiXHUxRTdFIjoiViIsIlx1MDFCMiI6IlYiLCJcdUE3NUUiOiJWIiwiXHUwMjQ1IjoiViIsIlx1QTc2MCI6IlZZIiwiXHUyNENDIjoiVyIsIlx1RkYzNyI6IlciLCJcdTFFODAiOiJXIiwiXHUxRTgyIjoiVyIsIlx1MDE3NCI6IlciLCJcdTFFODYiOiJXIiwiXHUxRTg0IjoiVyIsIlx1MUU4OCI6IlciLCJcdTJDNzIiOiJXIiwiXHUyNENEIjoiWCIsIlx1RkYzOCI6IlgiLCJcdTFFOEEiOiJYIiwiXHUxRThDIjoiWCIsIlx1MjRDRSI6IlkiLCJcdUZGMzkiOiJZIiwiXHUxRUYyIjoiWSIsIlx1MDBERCI6IlkiLCJcdTAxNzYiOiJZIiwiXHUxRUY4IjoiWSIsIlx1MDIzMiI6IlkiLCJcdTFFOEUiOiJZIiwiXHUwMTc4IjoiWSIsIlx1MUVGNiI6IlkiLCJcdTFFRjQiOiJZIiwiXHUwMUIzIjoiWSIsIlx1MDI0RSI6IlkiLCJcdTFFRkUiOiJZIiwiXHUyNENGIjoiWiIsIlx1RkYzQSI6IloiLCJcdTAxNzkiOiJaIiwiXHUxRTkwIjoiWiIsIlx1MDE3QiI6IloiLCJcdTAxN0QiOiJaIiwiXHUxRTkyIjoiWiIsIlx1MUU5NCI6IloiLCJcdTAxQjUiOiJaIiwiXHUwMjI0IjoiWiIsIlx1MkM3RiI6IloiLCJcdTJDNkIiOiJaIiwiXHVBNzYyIjoiWiIsIlx1MjREMCI6ImEiLCJcdUZGNDEiOiJhIiwiXHUxRTlBIjoiYSIsIlx1MDBFMCI6ImEiLCJcdTAwRTEiOiJhIiwiXHUwMEUyIjoiYSIsIlx1MUVBNyI6ImEiLCJcdTFFQTUiOiJhIiwiXHUxRUFCIjoiYSIsIlx1MUVBOSI6ImEiLCJcdTAwRTMiOiJhIiwiXHUwMTAxIjoiYSIsIlx1MDEwMyI6ImEiLCJcdTFFQjEiOiJhIiwiXHUxRUFGIjoiYSIsIlx1MUVCNSI6ImEiLCJcdTFFQjMiOiJhIiwiXHUwMjI3IjoiYSIsIlx1MDFFMSI6ImEiLCJcdTAwRTQiOiJhIiwiXHUwMURGIjoiYSIsIlx1MUVBMyI6ImEiLCJcdTAwRTUiOiJhIiwiXHUwMUZCIjoiYSIsIlx1MDFDRSI6ImEiLCJcdTAyMDEiOiJhIiwiXHUwMjAzIjoiYSIsIlx1MUVBMSI6ImEiLCJcdTFFQUQiOiJhIiwiXHUxRUI3IjoiYSIsIlx1MUUwMSI6ImEiLCJcdTAxMDUiOiJhIiwiXHUyQzY1IjoiYSIsIlx1MDI1MCI6ImEiLCJcdUE3MzMiOiJhYSIsIlx1MDBFNiI6ImFlIiwiXHUwMUZEIjoiYWUiLCJcdTAxRTMiOiJhZSIsIlx1QTczNSI6ImFvIiwiXHVBNzM3IjoiYXUiLCJcdUE3MzkiOiJhdiIsIlx1QTczQiI6ImF2IiwiXHVBNzNEIjoiYXkiLCJcdTI0RDEiOiJiIiwiXHVGRjQyIjoiYiIsIlx1MUUwMyI6ImIiLCJcdTFFMDUiOiJiIiwiXHUxRTA3IjoiYiIsIlx1MDE4MCI6ImIiLCJcdTAxODMiOiJiIiwiXHUwMjUzIjoiYiIsIlx1MjREMiI6ImMiLCJcdUZGNDMiOiJjIiwiXHUwMTA3IjoiYyIsIlx1MDEwOSI6ImMiLCJcdTAxMEIiOiJjIiwiXHUwMTBEIjoiYyIsIlx1MDBFNyI6ImMiLCJcdTFFMDkiOiJjIiwiXHUwMTg4IjoiYyIsIlx1MDIzQyI6ImMiLCJcdUE3M0YiOiJjIiwiXHUyMTg0IjoiYyIsIlx1MjREMyI6ImQiLCJcdUZGNDQiOiJkIiwiXHUxRTBCIjoiZCIsIlx1MDEwRiI6ImQiLCJcdTFFMEQiOiJkIiwiXHUxRTExIjoiZCIsIlx1MUUxMyI6ImQiLCJcdTFFMEYiOiJkIiwiXHUwMTExIjoiZCIsIlx1MDE4QyI6ImQiLCJcdTAyNTYiOiJkIiwiXHUwMjU3IjoiZCIsIlx1QTc3QSI6ImQiLCJcdTAxRjMiOiJkeiIsIlx1MDFDNiI6ImR6IiwiXHUyNEQ0IjoiZSIsIlx1RkY0NSI6ImUiLCJcdTAwRTgiOiJlIiwiXHUwMEU5IjoiZSIsIlx1MDBFQSI6ImUiLCJcdTFFQzEiOiJlIiwiXHUxRUJGIjoiZSIsIlx1MUVDNSI6ImUiLCJcdTFFQzMiOiJlIiwiXHUxRUJEIjoiZSIsIlx1MDExMyI6ImUiLCJcdTFFMTUiOiJlIiwiXHUxRTE3IjoiZSIsIlx1MDExNSI6ImUiLCJcdTAxMTciOiJlIiwiXHUwMEVCIjoiZSIsIlx1MUVCQiI6ImUiLCJcdTAxMUIiOiJlIiwiXHUwMjA1IjoiZSIsIlx1MDIwNyI6ImUiLCJcdTFFQjkiOiJlIiwiXHUxRUM3IjoiZSIsIlx1MDIyOSI6ImUiLCJcdTFFMUQiOiJlIiwiXHUwMTE5IjoiZSIsIlx1MUUxOSI6ImUiLCJcdTFFMUIiOiJlIiwiXHUwMjQ3IjoiZSIsIlx1MDI1QiI6ImUiLCJcdTAxREQiOiJlIiwiXHUyNEQ1IjoiZiIsIlx1RkY0NiI6ImYiLCJcdTFFMUYiOiJmIiwiXHUwMTkyIjoiZiIsIlx1QTc3QyI6ImYiLCJcdTI0RDYiOiJnIiwiXHVGRjQ3IjoiZyIsIlx1MDFGNSI6ImciLCJcdTAxMUQiOiJnIiwiXHUxRTIxIjoiZyIsIlx1MDExRiI6ImciLCJcdTAxMjEiOiJnIiwiXHUwMUU3IjoiZyIsIlx1MDEyMyI6ImciLCJcdTAxRTUiOiJnIiwiXHUwMjYwIjoiZyIsIlx1QTdBMSI6ImciLCJcdTFENzkiOiJnIiwiXHVBNzdGIjoiZyIsIlx1MjRENyI6ImgiLCJcdUZGNDgiOiJoIiwiXHUwMTI1IjoiaCIsIlx1MUUyMyI6ImgiLCJcdTFFMjciOiJoIiwiXHUwMjFGIjoiaCIsIlx1MUUyNSI6ImgiLCJcdTFFMjkiOiJoIiwiXHUxRTJCIjoiaCIsIlx1MUU5NiI6ImgiLCJcdTAxMjciOiJoIiwiXHUyQzY4IjoiaCIsIlx1MkM3NiI6ImgiLCJcdTAyNjUiOiJoIiwiXHUwMTk1IjoiaHYiLCJcdTI0RDgiOiJpIiwiXHVGRjQ5IjoiaSIsIlx1MDBFQyI6ImkiLCJcdTAwRUQiOiJpIiwiXHUwMEVFIjoiaSIsIlx1MDEyOSI6ImkiLCJcdTAxMkIiOiJpIiwiXHUwMTJEIjoiaSIsIlx1MDBFRiI6ImkiLCJcdTFFMkYiOiJpIiwiXHUxRUM5IjoiaSIsIlx1MDFEMCI6ImkiLCJcdTAyMDkiOiJpIiwiXHUwMjBCIjoiaSIsIlx1MUVDQiI6ImkiLCJcdTAxMkYiOiJpIiwiXHUxRTJEIjoiaSIsIlx1MDI2OCI6ImkiLCJcdTAxMzEiOiJpIiwiXHUyNEQ5IjoiaiIsIlx1RkY0QSI6ImoiLCJcdTAxMzUiOiJqIiwiXHUwMUYwIjoiaiIsIlx1MDI0OSI6ImoiLCJcdTI0REEiOiJrIiwiXHVGRjRCIjoiayIsIlx1MUUzMSI6ImsiLCJcdTAxRTkiOiJrIiwiXHUxRTMzIjoiayIsIlx1MDEzNyI6ImsiLCJcdTFFMzUiOiJrIiwiXHUwMTk5IjoiayIsIlx1MkM2QSI6ImsiLCJcdUE3NDEiOiJrIiwiXHVBNzQzIjoiayIsIlx1QTc0NSI6ImsiLCJcdUE3QTMiOiJrIiwiXHUyNERCIjoibCIsIlx1RkY0QyI6ImwiLCJcdTAxNDAiOiJsIiwiXHUwMTNBIjoibCIsIlx1MDEzRSI6ImwiLCJcdTFFMzciOiJsIiwiXHUxRTM5IjoibCIsIlx1MDEzQyI6ImwiLCJcdTFFM0QiOiJsIiwiXHUxRTNCIjoibCIsIlx1MDE3RiI6ImwiLCJcdTAxNDIiOiJsIiwiXHUwMTlBIjoibCIsIlx1MDI2QiI6ImwiLCJcdTJDNjEiOiJsIiwiXHVBNzQ5IjoibCIsIlx1QTc4MSI6ImwiLCJcdUE3NDciOiJsIiwiXHUwMUM5IjoibGoiLCJcdTI0REMiOiJtIiwiXHVGRjREIjoibSIsIlx1MUUzRiI6Im0iLCJcdTFFNDEiOiJtIiwiXHUxRTQzIjoibSIsIlx1MDI3MSI6Im0iLCJcdTAyNkYiOiJtIiwiXHUyNEREIjoibiIsIlx1RkY0RSI6Im4iLCJcdTAxRjkiOiJuIiwiXHUwMTQ0IjoibiIsIlx1MDBGMSI6Im4iLCJcdTFFNDUiOiJuIiwiXHUwMTQ4IjoibiIsIlx1MUU0NyI6Im4iLCJcdTAxNDYiOiJuIiwiXHUxRTRCIjoibiIsIlx1MUU0OSI6Im4iLCJcdTAxOUUiOiJuIiwiXHUwMjcyIjoibiIsIlx1MDE0OSI6Im4iLCJcdUE3OTEiOiJuIiwiXHVBN0E1IjoibiIsIlx1MDFDQyI6Im5qIiwiXHUyNERFIjoibyIsIlx1RkY0RiI6Im8iLCJcdTAwRjIiOiJvIiwiXHUwMEYzIjoibyIsIlx1MDBGNCI6Im8iLCJcdTFFRDMiOiJvIiwiXHUxRUQxIjoibyIsIlx1MUVENyI6Im8iLCJcdTFFRDUiOiJvIiwiXHUwMEY1IjoibyIsIlx1MUU0RCI6Im8iLCJcdTAyMkQiOiJvIiwiXHUxRTRGIjoibyIsIlx1MDE0RCI6Im8iLCJcdTFFNTEiOiJvIiwiXHUxRTUzIjoibyIsIlx1MDE0RiI6Im8iLCJcdTAyMkYiOiJvIiwiXHUwMjMxIjoibyIsIlx1MDBGNiI6Im8iLCJcdTAyMkIiOiJvIiwiXHUxRUNGIjoibyIsIlx1MDE1MSI6Im8iLCJcdTAxRDIiOiJvIiwiXHUwMjBEIjoibyIsIlx1MDIwRiI6Im8iLCJcdTAxQTEiOiJvIiwiXHUxRUREIjoibyIsIlx1MUVEQiI6Im8iLCJcdTFFRTEiOiJvIiwiXHUxRURGIjoibyIsIlx1MUVFMyI6Im8iLCJcdTFFQ0QiOiJvIiwiXHUxRUQ5IjoibyIsIlx1MDFFQiI6Im8iLCJcdTAxRUQiOiJvIiwiXHUwMEY4IjoibyIsIlx1MDFGRiI6Im8iLCJcdTAyNTQiOiJvIiwiXHVBNzRCIjoibyIsIlx1QTc0RCI6Im8iLCJcdTAyNzUiOiJvIiwiXHUwMUEzIjoib2kiLCJcdTAyMjMiOiJvdSIsIlx1QTc0RiI6Im9vIiwiXHUyNERGIjoicCIsIlx1RkY1MCI6InAiLCJcdTFFNTUiOiJwIiwiXHUxRTU3IjoicCIsIlx1MDFBNSI6InAiLCJcdTFEN0QiOiJwIiwiXHVBNzUxIjoicCIsIlx1QTc1MyI6InAiLCJcdUE3NTUiOiJwIiwiXHUyNEUwIjoicSIsIlx1RkY1MSI6InEiLCJcdTAyNEIiOiJxIiwiXHVBNzU3IjoicSIsIlx1QTc1OSI6InEiLCJcdTI0RTEiOiJyIiwiXHVGRjUyIjoiciIsIlx1MDE1NSI6InIiLCJcdTFFNTkiOiJyIiwiXHUwMTU5IjoiciIsIlx1MDIxMSI6InIiLCJcdTAyMTMiOiJyIiwiXHUxRTVCIjoiciIsIlx1MUU1RCI6InIiLCJcdTAxNTciOiJyIiwiXHUxRTVGIjoiciIsIlx1MDI0RCI6InIiLCJcdTAyN0QiOiJyIiwiXHVBNzVCIjoiciIsIlx1QTdBNyI6InIiLCJcdUE3ODMiOiJyIiwiXHUyNEUyIjoicyIsIlx1RkY1MyI6InMiLCJcdTAwREYiOiJzIiwiXHUwMTVCIjoicyIsIlx1MUU2NSI6InMiLCJcdTAxNUQiOiJzIiwiXHUxRTYxIjoicyIsIlx1MDE2MSI6InMiLCJcdTFFNjciOiJzIiwiXHUxRTYzIjoicyIsIlx1MUU2OSI6InMiLCJcdTAyMTkiOiJzIiwiXHUwMTVGIjoicyIsIlx1MDIzRiI6InMiLCJcdUE3QTkiOiJzIiwiXHVBNzg1IjoicyIsIlx1MUU5QiI6InMiLCJcdTI0RTMiOiJ0IiwiXHVGRjU0IjoidCIsIlx1MUU2QiI6InQiLCJcdTFFOTciOiJ0IiwiXHUwMTY1IjoidCIsIlx1MUU2RCI6InQiLCJcdTAyMUIiOiJ0IiwiXHUwMTYzIjoidCIsIlx1MUU3MSI6InQiLCJcdTFFNkYiOiJ0IiwiXHUwMTY3IjoidCIsIlx1MDFBRCI6InQiLCJcdTAyODgiOiJ0IiwiXHUyQzY2IjoidCIsIlx1QTc4NyI6InQiLCJcdUE3MjkiOiJ0eiIsIlx1MjRFNCI6InUiLCJcdUZGNTUiOiJ1IiwiXHUwMEY5IjoidSIsIlx1MDBGQSI6InUiLCJcdTAwRkIiOiJ1IiwiXHUwMTY5IjoidSIsIlx1MUU3OSI6InUiLCJcdTAxNkIiOiJ1IiwiXHUxRTdCIjoidSIsIlx1MDE2RCI6InUiLCJcdTAwRkMiOiJ1IiwiXHUwMURDIjoidSIsIlx1MDFEOCI6InUiLCJcdTAxRDYiOiJ1IiwiXHUwMURBIjoidSIsIlx1MUVFNyI6InUiLCJcdTAxNkYiOiJ1IiwiXHUwMTcxIjoidSIsIlx1MDFENCI6InUiLCJcdTAyMTUiOiJ1IiwiXHUwMjE3IjoidSIsIlx1MDFCMCI6InUiLCJcdTFFRUIiOiJ1IiwiXHUxRUU5IjoidSIsIlx1MUVFRiI6InUiLCJcdTFFRUQiOiJ1IiwiXHUxRUYxIjoidSIsIlx1MUVFNSI6InUiLCJcdTFFNzMiOiJ1IiwiXHUwMTczIjoidSIsIlx1MUU3NyI6InUiLCJcdTFFNzUiOiJ1IiwiXHUwMjg5IjoidSIsIlx1MjRFNSI6InYiLCJcdUZGNTYiOiJ2IiwiXHUxRTdEIjoidiIsIlx1MUU3RiI6InYiLCJcdTAyOEIiOiJ2IiwiXHVBNzVGIjoidiIsIlx1MDI4QyI6InYiLCJcdUE3NjEiOiJ2eSIsIlx1MjRFNiI6InciLCJcdUZGNTciOiJ3IiwiXHUxRTgxIjoidyIsIlx1MUU4MyI6InciLCJcdTAxNzUiOiJ3IiwiXHUxRTg3IjoidyIsIlx1MUU4NSI6InciLCJcdTFFOTgiOiJ3IiwiXHUxRTg5IjoidyIsIlx1MkM3MyI6InciLCJcdTI0RTciOiJ4IiwiXHVGRjU4IjoieCIsIlx1MUU4QiI6IngiLCJcdTFFOEQiOiJ4IiwiXHUyNEU4IjoieSIsIlx1RkY1OSI6InkiLCJcdTFFRjMiOiJ5IiwiXHUwMEZEIjoieSIsIlx1MDE3NyI6InkiLCJcdTFFRjkiOiJ5IiwiXHUwMjMzIjoieSIsIlx1MUU4RiI6InkiLCJcdTAwRkYiOiJ5IiwiXHUxRUY3IjoieSIsIlx1MUU5OSI6InkiLCJcdTFFRjUiOiJ5IiwiXHUwMUI0IjoieSIsIlx1MDI0RiI6InkiLCJcdTFFRkYiOiJ5IiwiXHUyNEU5IjoieiIsIlx1RkY1QSI6InoiLCJcdTAxN0EiOiJ6IiwiXHUxRTkxIjoieiIsIlx1MDE3QyI6InoiLCJcdTAxN0UiOiJ6IiwiXHUxRTkzIjoieiIsIlx1MUU5NSI6InoiLCJcdTAxQjYiOiJ6IiwiXHUwMjI1IjoieiIsIlx1MDI0MCI6InoiLCJcdTJDNkMiOiJ6IiwiXHVBNzYzIjoieiIsIlx1MDM4NiI6Ilx1MDM5MSIsIlx1MDM4OCI6Ilx1MDM5NSIsIlx1MDM4OSI6Ilx1MDM5NyIsIlx1MDM4QSI6Ilx1MDM5OSIsIlx1MDNBQSI6Ilx1MDM5OSIsIlx1MDM4QyI6Ilx1MDM5RiIsIlx1MDM4RSI6Ilx1MDNBNSIsIlx1MDNBQiI6Ilx1MDNBNSIsIlx1MDM4RiI6Ilx1MDNBOSIsIlx1MDNBQyI6Ilx1MDNCMSIsIlx1MDNBRCI6Ilx1MDNCNSIsIlx1MDNBRSI6Ilx1MDNCNyIsIlx1MDNBRiI6Ilx1MDNCOSIsIlx1MDNDQSI6Ilx1MDNCOSIsIlx1MDM5MCI6Ilx1MDNCOSIsIlx1MDNDQyI6Ilx1MDNCRiIsIlx1MDNDRCI6Ilx1MDNDNSIsIlx1MDNDQiI6Ilx1MDNDNSIsIlx1MDNCMCI6Ilx1MDNDNSIsIlx1MDNDOSI6Ilx1MDNDOSIsIlx1MDNDMiI6Ilx1MDNDMyJ9OyRkb2N1bWVudD0kKGRvY3VtZW50KTtuZXh0VWlkPShmdW5jdGlvbigpe3ZhciBjb3VudGVyPTE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNvdW50ZXIrKzt9O30oKSk7ZnVuY3Rpb24gcmVpbnNlcnRFbGVtZW50KGVsZW1lbnQpe3ZhciBwbGFjZWhvbGRlcj0kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7ZWxlbWVudC5iZWZvcmUocGxhY2Vob2xkZXIpO3BsYWNlaG9sZGVyLmJlZm9yZShlbGVtZW50KTtwbGFjZWhvbGRlci5yZW1vdmUoKTt9CmZ1bmN0aW9uIHN0cmlwRGlhY3JpdGljcyhzdHIpe2Z1bmN0aW9uIG1hdGNoKGEpe3JldHVybiBESUFDUklUSUNTW2FdfHxhO30KcmV0dXJuIHN0ci5yZXBsYWNlKC9bXlx1MDAwMC1cdTAwN0VdL2csbWF0Y2gpO30KZnVuY3Rpb24gaW5kZXhPZih2YWx1ZSxhcnJheSl7dmFyIGk9MCxsPWFycmF5Lmxlbmd0aDtmb3IoO2k8bDtpPWkrMSl7aWYoZXF1YWwodmFsdWUsYXJyYXlbaV0pKXJldHVybiBpO30KcmV0dXJuLTE7fQpmdW5jdGlvbiBtZWFzdXJlU2Nyb2xsYmFyKCl7dmFyICR0ZW1wbGF0ZT0kKE1FQVNVUkVfU0NST0xMQkFSX1RFTVBMQVRFKTskdGVtcGxhdGUuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7dmFyIGRpbT17d2lkdGg6JHRlbXBsYXRlLndpZHRoKCktJHRlbXBsYXRlWzBdLmNsaWVudFdpZHRoLGhlaWdodDokdGVtcGxhdGUuaGVpZ2h0KCktJHRlbXBsYXRlWzBdLmNsaWVudEhlaWdodH07JHRlbXBsYXRlLnJlbW92ZSgpO3JldHVybiBkaW07fQpmdW5jdGlvbiBlcXVhbChhLGIpe2lmKGE9PT1iKXJldHVybiB0cnVlO2lmKGE9PT11bmRlZmluZWR8fGI9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO2lmKGE9PT1udWxsfHxiPT09bnVsbClyZXR1cm4gZmFsc2U7aWYoYS5jb25zdHJ1Y3Rvcj09PVN0cmluZylyZXR1cm4gYSsnJz09PWIrJyc7aWYoYi5jb25zdHJ1Y3Rvcj09PVN0cmluZylyZXR1cm4gYisnJz09PWErJyc7cmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gc3BsaXRWYWwoc3RyaW5nLHNlcGFyYXRvcix0cmFuc2Zvcm0pe3ZhciB2YWwsaSxsO2lmKHN0cmluZz09PW51bGx8fHN0cmluZy5sZW5ndGg8MSlyZXR1cm5bXTt2YWw9c3RyaW5nLnNwbGl0KHNlcGFyYXRvcik7Zm9yKGk9MCxsPXZhbC5sZW5ndGg7aTxsO2k9aSsxKXZhbFtpXT10cmFuc2Zvcm0odmFsW2ldKTtyZXR1cm4gdmFsO30KZnVuY3Rpb24gZ2V0U2lkZUJvcmRlclBhZGRpbmcoZWxlbWVudCl7cmV0dXJuIGVsZW1lbnQub3V0ZXJXaWR0aChmYWxzZSktZWxlbWVudC53aWR0aCgpO30KZnVuY3Rpb24gaW5zdGFsbEtleVVwQ2hhbmdlRXZlbnQoZWxlbWVudCl7dmFyIGtleT0ia2V5dXAtY2hhbmdlLXZhbHVlIjtlbGVtZW50Lm9uKCJrZXlkb3duIixmdW5jdGlvbigpe2lmKCQuZGF0YShlbGVtZW50LGtleSk9PT11bmRlZmluZWQpeyQuZGF0YShlbGVtZW50LGtleSxlbGVtZW50LnZhbCgpKTt9fSk7ZWxlbWVudC5vbigia2V5dXAiLGZ1bmN0aW9uKCl7dmFyIHZhbD0kLmRhdGEoZWxlbWVudCxrZXkpO2lmKHZhbCE9PXVuZGVmaW5lZCYmZWxlbWVudC52YWwoKSE9PXZhbCl7JC5yZW1vdmVEYXRhKGVsZW1lbnQsa2V5KTtlbGVtZW50LnRyaWdnZXIoImtleXVwLWNoYW5nZSIpO319KTt9CmZ1bmN0aW9uIGluc3RhbGxGaWx0ZXJlZE1vdXNlTW92ZShlbGVtZW50KXtlbGVtZW50Lm9uKCJtb3VzZW1vdmUiLGZ1bmN0aW9uKGUpe3ZhciBsYXN0cG9zPWxhc3RNb3VzZVBvc2l0aW9uO2lmKGxhc3Rwb3M9PT11bmRlZmluZWR8fGxhc3Rwb3MueCE9PWUucGFnZVh8fGxhc3Rwb3MueSE9PWUucGFnZVkpeyQoZS50YXJnZXQpLnRyaWdnZXIoIm1vdXNlbW92ZS1maWx0ZXJlZCIsZSk7fX0pO30KZnVuY3Rpb24gZGVib3VuY2UocXVpZXRNaWxsaXMsZm4sY3R4KXtjdHg9Y3R4fHx1bmRlZmluZWQ7dmFyIHRpbWVvdXQ7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2ZuLmFwcGx5KGN0eCxhcmdzKTt9LHF1aWV0TWlsbGlzKTt9O30KZnVuY3Rpb24gaW5zdGFsbERlYm91bmNlZFNjcm9sbCh0aHJlc2hvbGQsZWxlbWVudCl7dmFyIG5vdGlmeT1kZWJvdW5jZSh0aHJlc2hvbGQsZnVuY3Rpb24oZSl7ZWxlbWVudC50cmlnZ2VyKCJzY3JvbGwtZGVib3VuY2VkIixlKTt9KTtlbGVtZW50Lm9uKCJzY3JvbGwiLGZ1bmN0aW9uKGUpe2lmKGluZGV4T2YoZS50YXJnZXQsZWxlbWVudC5nZXQoKSk+PTApbm90aWZ5KGUpO30pO30KZnVuY3Rpb24gZm9jdXMoJGVsKXtpZigkZWxbMF09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXJldHVybjt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlbD0kZWxbMF0scG9zPSRlbC52YWwoKS5sZW5ndGgscmFuZ2U7JGVsLmZvY3VzKCk7dmFyIGlzVmlzaWJsZT0oZWwub2Zmc2V0V2lkdGg+MHx8ZWwub2Zmc2V0SGVpZ2h0PjApO2lmKGlzVmlzaWJsZSYmZWw9PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXtpZihlbC5zZXRTZWxlY3Rpb25SYW5nZSkKe2VsLnNldFNlbGVjdGlvblJhbmdlKHBvcyxwb3MpO30KZWxzZSBpZihlbC5jcmVhdGVUZXh0UmFuZ2Upe3JhbmdlPWVsLmNyZWF0ZVRleHRSYW5nZSgpO3JhbmdlLmNvbGxhcHNlKGZhbHNlKTtyYW5nZS5zZWxlY3QoKTt9fX0sMCk7fQpmdW5jdGlvbiBnZXRDdXJzb3JJbmZvKGVsKXtlbD0kKGVsKVswXTt2YXIgb2Zmc2V0PTA7dmFyIGxlbmd0aD0wO2lmKCdzZWxlY3Rpb25TdGFydCdpbiBlbCl7b2Zmc2V0PWVsLnNlbGVjdGlvblN0YXJ0O2xlbmd0aD1lbC5zZWxlY3Rpb25FbmQtb2Zmc2V0O31lbHNlIGlmKCdzZWxlY3Rpb24naW4gZG9jdW1lbnQpe2VsLmZvY3VzKCk7dmFyIHNlbD1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtsZW5ndGg9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dC5sZW5ndGg7c2VsLm1vdmVTdGFydCgnY2hhcmFjdGVyJywtZWwudmFsdWUubGVuZ3RoKTtvZmZzZXQ9c2VsLnRleHQubGVuZ3RoLWxlbmd0aDt9CnJldHVybntvZmZzZXQ6b2Zmc2V0LGxlbmd0aDpsZW5ndGh9O30KZnVuY3Rpb24ga2lsbEV2ZW50KGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO30KZnVuY3Rpb24ga2lsbEV2ZW50SW1tZWRpYXRlbHkoZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7fQpmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRoKGUpe2lmKCFzaXplcil7dmFyIHN0eWxlPWVbMF0uY3VycmVudFN0eWxlfHx3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlWzBdLG51bGwpO3NpemVyPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiItMTAwMDBweCIsdG9wOiItMTAwMDBweCIsZGlzcGxheToibm9uZSIsZm9udFNpemU6c3R5bGUuZm9udFNpemUsZm9udEZhbWlseTpzdHlsZS5mb250RmFtaWx5LGZvbnRTdHlsZTpzdHlsZS5mb250U3R5bGUsZm9udFdlaWdodDpzdHlsZS5mb250V2VpZ2h0LGxldHRlclNwYWNpbmc6c3R5bGUubGV0dGVyU3BhY2luZyx0ZXh0VHJhbnNmb3JtOnN0eWxlLnRleHRUcmFuc2Zvcm0sd2hpdGVTcGFjZToibm93cmFwIn0pO3NpemVyLmF0dHIoImNsYXNzIiwic2VsZWN0Mi1zaXplciIpOyQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKHNpemVyKTt9CnNpemVyLnRleHQoZS52YWwoKSk7cmV0dXJuIHNpemVyLndpZHRoKCk7fQpmdW5jdGlvbiBzeW5jQ3NzQ2xhc3NlcyhkZXN0LHNyYyxhZGFwdGVyKXt2YXIgY2xhc3NlcyxyZXBsYWNlbWVudHM9W10sYWRhcHRlZDtjbGFzc2VzPSQudHJpbShkZXN0LmF0dHIoImNsYXNzIikpO2lmKGNsYXNzZXMpe2NsYXNzZXM9JycrY2xhc3NlczskKGNsYXNzZXMuc3BsaXQoL1xzKy8pKS5lYWNoMihmdW5jdGlvbigpe2lmKHRoaXMuaW5kZXhPZigic2VsZWN0Mi0iKT09PTApe3JlcGxhY2VtZW50cy5wdXNoKHRoaXMpO319KTt9CmNsYXNzZXM9JC50cmltKHNyYy5hdHRyKCJjbGFzcyIpKTtpZihjbGFzc2VzKXtjbGFzc2VzPScnK2NsYXNzZXM7JChjbGFzc2VzLnNwbGl0KC9ccysvKSkuZWFjaDIoZnVuY3Rpb24oKXtpZih0aGlzLmluZGV4T2YoInNlbGVjdDItIikhPT0wKXthZGFwdGVkPWFkYXB0ZXIodGhpcyk7aWYoYWRhcHRlZCl7cmVwbGFjZW1lbnRzLnB1c2goYWRhcHRlZCk7fX19KTt9CmRlc3QuYXR0cigiY2xhc3MiLHJlcGxhY2VtZW50cy5qb2luKCIgIikpO30KZnVuY3Rpb24gbWFya01hdGNoKHRleHQsdGVybSxtYXJrdXAsZXNjYXBlTWFya3VwKXt2YXIgbWF0Y2g9c3RyaXBEaWFjcml0aWNzKHRleHQudG9VcHBlckNhc2UoKSkuaW5kZXhPZihzdHJpcERpYWNyaXRpY3ModGVybS50b1VwcGVyQ2FzZSgpKSksdGw9dGVybS5sZW5ndGg7aWYobWF0Y2g8MCl7bWFya3VwLnB1c2goZXNjYXBlTWFya3VwKHRleHQpKTtyZXR1cm47fQptYXJrdXAucHVzaChlc2NhcGVNYXJrdXAodGV4dC5zdWJzdHJpbmcoMCxtYXRjaCkpKTttYXJrdXAucHVzaCgiPHNwYW4gY2xhc3M9J3NlbGVjdDItbWF0Y2gnPiIpO21hcmt1cC5wdXNoKGVzY2FwZU1hcmt1cCh0ZXh0LnN1YnN0cmluZyhtYXRjaCxtYXRjaCt0bCkpKTttYXJrdXAucHVzaCgiPC9zcGFuPiIpO21hcmt1cC5wdXNoKGVzY2FwZU1hcmt1cCh0ZXh0LnN1YnN0cmluZyhtYXRjaCt0bCx0ZXh0Lmxlbmd0aCkpKTt9CmZ1bmN0aW9uIGRlZmF1bHRFc2NhcGVNYXJrdXAobWFya3VwKXt2YXIgcmVwbGFjZV9tYXA9eydcXCc6JyYjOTI7JywnJic6JyZhbXA7JywnPCc6JyZsdDsnLCc+JzonJmd0OycsJyInOicmcXVvdDsnLCInIjonJiMzOTsnLCIvIjonJiM0NzsnfTtyZXR1cm4gU3RyaW5nKG1hcmt1cCkucmVwbGFjZSgvWyY8PiInXC9cXF0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHJlcGxhY2VfbWFwW21hdGNoXTt9KTt9CmZ1bmN0aW9uIGFqYXgob3B0aW9ucyl7dmFyIHRpbWVvdXQsaGFuZGxlcj1udWxsLHF1aWV0TWlsbGlzPW9wdGlvbnMucXVpZXRNaWxsaXN8fDEwMCxhamF4VXJsPW9wdGlvbnMudXJsLHNlbGY9dGhpcztyZXR1cm4gZnVuY3Rpb24ocXVlcnkpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBkYXRhPW9wdGlvbnMuZGF0YSx1cmw9YWpheFVybCx0cmFuc3BvcnQ9b3B0aW9ucy50cmFuc3BvcnR8fCQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHMudHJhbnNwb3J0LGRlcHJlY2F0ZWQ9e3R5cGU6b3B0aW9ucy50eXBlfHwnR0VUJyxjYWNoZTpvcHRpb25zLmNhY2hlfHxmYWxzZSxqc29ucENhbGxiYWNrOm9wdGlvbnMuanNvbnBDYWxsYmFja3x8dW5kZWZpbmVkLGRhdGFUeXBlOm9wdGlvbnMuZGF0YVR5cGV8fCJqc29uIn0scGFyYW1zPSQuZXh0ZW5kKHt9LCQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHMucGFyYW1zLGRlcHJlY2F0ZWQpO2RhdGE9ZGF0YT9kYXRhLmNhbGwoc2VsZixxdWVyeS50ZXJtLHF1ZXJ5LnBhZ2UscXVlcnkuY29udGV4dCk6bnVsbDt1cmw9KHR5cGVvZiB1cmw9PT0nZnVuY3Rpb24nKT91cmwuY2FsbChzZWxmLHF1ZXJ5LnRlcm0scXVlcnkucGFnZSxxdWVyeS5jb250ZXh0KTp1cmw7aWYoaGFuZGxlciYmdHlwZW9mIGhhbmRsZXIuYWJvcnQ9PT0iZnVuY3Rpb24iKXtoYW5kbGVyLmFib3J0KCk7fQppZihvcHRpb25zLnBhcmFtcyl7aWYoJC5pc0Z1bmN0aW9uKG9wdGlvbnMucGFyYW1zKSl7JC5leHRlbmQocGFyYW1zLG9wdGlvbnMucGFyYW1zLmNhbGwoc2VsZikpO31lbHNleyQuZXh0ZW5kKHBhcmFtcyxvcHRpb25zLnBhcmFtcyk7fX0KJC5leHRlbmQocGFyYW1zLHt1cmw6dXJsLGRhdGFUeXBlOm9wdGlvbnMuZGF0YVR5cGUsZGF0YTpkYXRhLHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7dmFyIHJlc3VsdHM9b3B0aW9ucy5yZXN1bHRzKGRhdGEscXVlcnkucGFnZSxxdWVyeSk7cXVlcnkuY2FsbGJhY2socmVzdWx0cyk7fSxlcnJvcjpmdW5jdGlvbihqcVhIUix0ZXh0U3RhdHVzLGVycm9yVGhyb3duKXt2YXIgcmVzdWx0cz17aGFzRXJyb3I6dHJ1ZSxqcVhIUjpqcVhIUix0ZXh0U3RhdHVzOnRleHRTdGF0dXMsZXJyb3JUaHJvd246ZXJyb3JUaHJvd259O3F1ZXJ5LmNhbGxiYWNrKHJlc3VsdHMpO319KTtoYW5kbGVyPXRyYW5zcG9ydC5jYWxsKHNlbGYscGFyYW1zKTt9LHF1aWV0TWlsbGlzKTt9O30KZnVuY3Rpb24gbG9jYWwob3B0aW9ucyl7dmFyIGRhdGE9b3B0aW9ucyxkYXRhVGV4dCx0bXAsdGV4dD1mdW5jdGlvbihpdGVtKXtyZXR1cm4iIitpdGVtLnRleHQ7fTtpZigkLmlzQXJyYXkoZGF0YSkpe3RtcD1kYXRhO2RhdGE9e3Jlc3VsdHM6dG1wfTt9CmlmKCQuaXNGdW5jdGlvbihkYXRhKT09PWZhbHNlKXt0bXA9ZGF0YTtkYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRtcDt9O30KdmFyIGRhdGFJdGVtPWRhdGEoKTtpZihkYXRhSXRlbS50ZXh0KXt0ZXh0PWRhdGFJdGVtLnRleHQ7aWYoISQuaXNGdW5jdGlvbih0ZXh0KSl7ZGF0YVRleHQ9ZGF0YUl0ZW0udGV4dDt0ZXh0PWZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtW2RhdGFUZXh0XTt9O319CnJldHVybiBmdW5jdGlvbihxdWVyeSl7dmFyIHQ9cXVlcnkudGVybSxmaWx0ZXJlZD17cmVzdWx0czpbXX0scHJvY2VzcztpZih0PT09IiIpe3F1ZXJ5LmNhbGxiYWNrKGRhdGEoKSk7cmV0dXJuO30KcHJvY2Vzcz1mdW5jdGlvbihkYXR1bSxjb2xsZWN0aW9uKXt2YXIgZ3JvdXAsYXR0cjtkYXR1bT1kYXR1bVswXTtpZihkYXR1bS5jaGlsZHJlbil7Z3JvdXA9e307Zm9yKGF0dHIgaW4gZGF0dW0pe2lmKGRhdHVtLmhhc093blByb3BlcnR5KGF0dHIpKWdyb3VwW2F0dHJdPWRhdHVtW2F0dHJdO30KZ3JvdXAuY2hpbGRyZW49W107JChkYXR1bS5jaGlsZHJlbikuZWFjaDIoZnVuY3Rpb24oaSxjaGlsZERhdHVtKXtwcm9jZXNzKGNoaWxkRGF0dW0sZ3JvdXAuY2hpbGRyZW4pO30pO2lmKGdyb3VwLmNoaWxkcmVuLmxlbmd0aHx8cXVlcnkubWF0Y2hlcih0LHRleHQoZ3JvdXApLGRhdHVtKSl7Y29sbGVjdGlvbi5wdXNoKGdyb3VwKTt9fWVsc2V7aWYocXVlcnkubWF0Y2hlcih0LHRleHQoZGF0dW0pLGRhdHVtKSl7Y29sbGVjdGlvbi5wdXNoKGRhdHVtKTt9fX07JChkYXRhKCkucmVzdWx0cykuZWFjaDIoZnVuY3Rpb24oaSxkYXR1bSl7cHJvY2VzcyhkYXR1bSxmaWx0ZXJlZC5yZXN1bHRzKTt9KTtxdWVyeS5jYWxsYmFjayhmaWx0ZXJlZCk7fTt9CmZ1bmN0aW9uIHRhZ3MoZGF0YSl7dmFyIGlzRnVuYz0kLmlzRnVuY3Rpb24oZGF0YSk7cmV0dXJuIGZ1bmN0aW9uKHF1ZXJ5KXt2YXIgdD1xdWVyeS50ZXJtLGZpbHRlcmVkPXtyZXN1bHRzOltdfTt2YXIgcmVzdWx0PWlzRnVuYz9kYXRhKHF1ZXJ5KTpkYXRhO2lmKCQuaXNBcnJheShyZXN1bHQpKXskKHJlc3VsdCkuZWFjaChmdW5jdGlvbigpe3ZhciBpc09iamVjdD10aGlzLnRleHQhPT11bmRlZmluZWQsdGV4dD1pc09iamVjdD90aGlzLnRleHQ6dGhpcztpZih0PT09IiJ8fHF1ZXJ5Lm1hdGNoZXIodCx0ZXh0KSl7ZmlsdGVyZWQucmVzdWx0cy5wdXNoKGlzT2JqZWN0P3RoaXM6e2lkOnRoaXMsdGV4dDp0aGlzfSk7fX0pO3F1ZXJ5LmNhbGxiYWNrKGZpbHRlcmVkKTt9fTt9CmZ1bmN0aW9uIGNoZWNrRm9ybWF0dGVyKGZvcm1hdHRlcixmb3JtYXR0ZXJOYW1lKXtpZigkLmlzRnVuY3Rpb24oZm9ybWF0dGVyKSlyZXR1cm4gdHJ1ZTtpZighZm9ybWF0dGVyKXJldHVybiBmYWxzZTtpZih0eXBlb2YoZm9ybWF0dGVyKT09PSdzdHJpbmcnKXJldHVybiB0cnVlO3Rocm93IG5ldyBFcnJvcihmb3JtYXR0ZXJOYW1lKyIgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIG9yIGZhbHN5IHZhbHVlIik7fQpmdW5jdGlvbiBldmFsdWF0ZSh2YWwsY29udGV4dCl7aWYoJC5pc0Z1bmN0aW9uKHZhbCkpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gdmFsLmFwcGx5KGNvbnRleHQsYXJncyk7fQpyZXR1cm4gdmFsO30KZnVuY3Rpb24gY291bnRSZXN1bHRzKHJlc3VsdHMpe3ZhciBjb3VudD0wOyQuZWFjaChyZXN1bHRzLGZ1bmN0aW9uKGksaXRlbSl7aWYoaXRlbS5jaGlsZHJlbil7Y291bnQrPWNvdW50UmVzdWx0cyhpdGVtLmNoaWxkcmVuKTt9ZWxzZXtjb3VudCsrO319KTtyZXR1cm4gY291bnQ7fQpmdW5jdGlvbiBkZWZhdWx0VG9rZW5pemVyKGlucHV0LHNlbGVjdGlvbixzZWxlY3RDYWxsYmFjayxvcHRzKXt2YXIgb3JpZ2luYWw9aW5wdXQsZHVwZT1mYWxzZSx0b2tlbixpbmRleCxpLGwsc2VwYXJhdG9yO2lmKCFvcHRzLmNyZWF0ZVNlYXJjaENob2ljZXx8IW9wdHMudG9rZW5TZXBhcmF0b3JzfHxvcHRzLnRva2VuU2VwYXJhdG9ycy5sZW5ndGg8MSlyZXR1cm4gdW5kZWZpbmVkO3doaWxlKHRydWUpe2luZGV4PS0xO2ZvcihpPTAsbD1vcHRzLnRva2VuU2VwYXJhdG9ycy5sZW5ndGg7aTxsO2krKyl7c2VwYXJhdG9yPW9wdHMudG9rZW5TZXBhcmF0b3JzW2ldO2luZGV4PWlucHV0LmluZGV4T2Yoc2VwYXJhdG9yKTtpZihpbmRleD49MClicmVhazt9CmlmKGluZGV4PDApYnJlYWs7dG9rZW49aW5wdXQuc3Vic3RyaW5nKDAsaW5kZXgpO2lucHV0PWlucHV0LnN1YnN0cmluZyhpbmRleCtzZXBhcmF0b3IubGVuZ3RoKTtpZih0b2tlbi5sZW5ndGg+MCl7dG9rZW49b3B0cy5jcmVhdGVTZWFyY2hDaG9pY2UuY2FsbCh0aGlzLHRva2VuLHNlbGVjdGlvbik7aWYodG9rZW4hPT11bmRlZmluZWQmJnRva2VuIT09bnVsbCYmb3B0cy5pZCh0b2tlbikhPT11bmRlZmluZWQmJm9wdHMuaWQodG9rZW4pIT09bnVsbCl7ZHVwZT1mYWxzZTtmb3IoaT0wLGw9c2VsZWN0aW9uLmxlbmd0aDtpPGw7aSsrKXtpZihlcXVhbChvcHRzLmlkKHRva2VuKSxvcHRzLmlkKHNlbGVjdGlvbltpXSkpKXtkdXBlPXRydWU7YnJlYWs7fX0KaWYoIWR1cGUpc2VsZWN0Q2FsbGJhY2sodG9rZW4pO319fQppZihvcmlnaW5hbCE9PWlucHV0KXJldHVybiBpbnB1dDt9CmZ1bmN0aW9uIGNsZWFudXBKUXVlcnlFbGVtZW50cygpe3ZhciBzZWxmPXRoaXM7JC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihpLGVsZW1lbnQpe3NlbGZbZWxlbWVudF0ucmVtb3ZlKCk7c2VsZltlbGVtZW50XT1udWxsO30pO30KZnVuY3Rpb24gY2xhenooU3VwZXJDbGFzcyxtZXRob2RzKXt2YXIgY29uc3RydWN0b3I9ZnVuY3Rpb24oKXt9O2NvbnN0cnVjdG9yLnByb3RvdHlwZT1uZXcgU3VwZXJDbGFzcztjb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3I9Y29uc3RydWN0b3I7Y29uc3RydWN0b3IucHJvdG90eXBlLnBhcmVudD1TdXBlckNsYXNzLnByb3RvdHlwZTtjb25zdHJ1Y3Rvci5wcm90b3R5cGU9JC5leHRlbmQoY29uc3RydWN0b3IucHJvdG90eXBlLG1ldGhvZHMpO3JldHVybiBjb25zdHJ1Y3Rvcjt9CkFic3RyYWN0U2VsZWN0Mj1jbGF6eihPYmplY3Qse2JpbmQ6ZnVuY3Rpb24oZnVuYyl7dmFyIHNlbGY9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtmdW5jLmFwcGx5KHNlbGYsYXJndW1lbnRzKTt9O30saW5pdDpmdW5jdGlvbihvcHRzKXt2YXIgcmVzdWx0cyxzZWFyY2gscmVzdWx0c1NlbGVjdG9yPSIuc2VsZWN0Mi1yZXN1bHRzIjt0aGlzLm9wdHM9b3B0cz10aGlzLnByZXBhcmVPcHRzKG9wdHMpO3RoaXMuaWQ9b3B0cy5pZDtpZihvcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpIT09dW5kZWZpbmVkJiZvcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpIT09bnVsbCl7b3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDIiKS5kZXN0cm95KCk7fQp0aGlzLmNvbnRhaW5lcj10aGlzLmNyZWF0ZUNvbnRhaW5lcigpO3RoaXMubGl2ZVJlZ2lvbj0kKCcuc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZScpO2lmKHRoaXMubGl2ZVJlZ2lvbi5sZW5ndGg9PTApe3RoaXMubGl2ZVJlZ2lvbj0kKCI8c3Bhbj4iLHtyb2xlOiJzdGF0dXMiLCJhcmlhLWxpdmUiOiJwb2xpdGUifSkuYWRkQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTt9CnRoaXMuY29udGFpbmVySWQ9InMyaWRfIisob3B0cy5lbGVtZW50LmF0dHIoImlkIil8fCJhdXRvZ2VuIituZXh0VWlkKCkpO3RoaXMuY29udGFpbmVyRXZlbnROYW1lPXRoaXMuY29udGFpbmVySWQucmVwbGFjZSgvKFsuXSkvZywnXycpLnJlcGxhY2UoLyhbOyYsXC1cLlwrXCpcfic6IlwhXF4jJCVAXFtcXVwoXCk9Plx8XSkvZywnXFwkMScpO3RoaXMuY29udGFpbmVyLmF0dHIoImlkIix0aGlzLmNvbnRhaW5lcklkKTt0aGlzLmNvbnRhaW5lci5hdHRyKCJ0aXRsZSIsb3B0cy5lbGVtZW50LmF0dHIoInRpdGxlIikpO3RoaXMuYm9keT0kKGRvY3VtZW50LmJvZHkpO3N5bmNDc3NDbGFzc2VzKHRoaXMuY29udGFpbmVyLHRoaXMub3B0cy5lbGVtZW50LHRoaXMub3B0cy5hZGFwdENvbnRhaW5lckNzc0NsYXNzKTt0aGlzLmNvbnRhaW5lci5hdHRyKCJzdHlsZSIsb3B0cy5lbGVtZW50LmF0dHIoInN0eWxlIikpO3RoaXMuY29udGFpbmVyLmNzcyhldmFsdWF0ZShvcHRzLmNvbnRhaW5lckNzcyx0aGlzLm9wdHMuZWxlbWVudCkpO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKGV2YWx1YXRlKG9wdHMuY29udGFpbmVyQ3NzQ2xhc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTt0aGlzLmVsZW1lbnRUYWJJbmRleD10aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJ0YWJpbmRleCIpO3RoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDIiLHRoaXMpLmF0dHIoInRhYmluZGV4IiwiLTEiKS5iZWZvcmUodGhpcy5jb250YWluZXIpLm9uKCJjbGljay5zZWxlY3QyIixraWxsRXZlbnQpO3RoaXMuY29udGFpbmVyLmRhdGEoInNlbGVjdDIiLHRoaXMpO3RoaXMuZHJvcGRvd249dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItZHJvcCIpO3N5bmNDc3NDbGFzc2VzKHRoaXMuZHJvcGRvd24sdGhpcy5vcHRzLmVsZW1lbnQsdGhpcy5vcHRzLmFkYXB0RHJvcGRvd25Dc3NDbGFzcyk7dGhpcy5kcm9wZG93bi5hZGRDbGFzcyhldmFsdWF0ZShvcHRzLmRyb3Bkb3duQ3NzQ2xhc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTt0aGlzLmRyb3Bkb3duLmRhdGEoInNlbGVjdDIiLHRoaXMpO3RoaXMuZHJvcGRvd24ub24oImNsaWNrIixraWxsRXZlbnQpO3RoaXMucmVzdWx0cz1yZXN1bHRzPXRoaXMuY29udGFpbmVyLmZpbmQocmVzdWx0c1NlbGVjdG9yKTt0aGlzLnNlYXJjaD1zZWFyY2g9dGhpcy5jb250YWluZXIuZmluZCgiaW5wdXQuc2VsZWN0Mi1pbnB1dCIpO3RoaXMucXVlcnlDb3VudD0wO3RoaXMucmVzdWx0c1BhZ2U9MDt0aGlzLmNvbnRleHQ9bnVsbDt0aGlzLmluaXRDb250YWluZXIoKTt0aGlzLmNvbnRhaW5lci5vbigiY2xpY2siLGtpbGxFdmVudCk7aW5zdGFsbEZpbHRlcmVkTW91c2VNb3ZlKHRoaXMucmVzdWx0cyk7dGhpcy5kcm9wZG93bi5vbigibW91c2Vtb3ZlLWZpbHRlcmVkIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMuaGlnaGxpZ2h0VW5kZXJFdmVudCkpO3RoaXMuZHJvcGRvd24ub24oInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKGZ1bmN0aW9uKGV2ZW50KXt0aGlzLl90b3VjaEV2ZW50PXRydWU7dGhpcy5oaWdobGlnaHRVbmRlckV2ZW50KGV2ZW50KTt9KSk7dGhpcy5kcm9wZG93bi5vbigidG91Y2htb3ZlIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMudG91Y2hNb3ZlZCkpO3RoaXMuZHJvcGRvd24ub24oInRvdWNoc3RhcnQgdG91Y2hlbmQiLHJlc3VsdHNTZWxlY3Rvcix0aGlzLmJpbmQodGhpcy5jbGVhclRvdWNoTW92ZWQpKTt0aGlzLmRyb3Bkb3duLm9uKCdjbGljaycsdGhpcy5iaW5kKGZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLl90b3VjaEV2ZW50KXt0aGlzLl90b3VjaEV2ZW50PWZhbHNlO3RoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoKTt9fSkpO2luc3RhbGxEZWJvdW5jZWRTY3JvbGwoODAsdGhpcy5yZXN1bHRzKTt0aGlzLmRyb3Bkb3duLm9uKCJzY3JvbGwtZGVib3VuY2VkIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMubG9hZE1vcmVJZk5lZWRlZCkpOyQodGhpcy5jb250YWluZXIpLm9uKCJjaGFuZ2UiLCIuc2VsZWN0Mi1pbnB1dCIsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9KTskKHRoaXMuZHJvcGRvd24pLm9uKCJjaGFuZ2UiLCIuc2VsZWN0Mi1pbnB1dCIsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9KTtpZigkLmZuLm1vdXNld2hlZWwpe3Jlc3VsdHMubW91c2V3aGVlbChmdW5jdGlvbihlLGRlbHRhLGRlbHRhWCxkZWx0YVkpe3ZhciB0b3A9cmVzdWx0cy5zY3JvbGxUb3AoKTtpZihkZWx0YVk+MCYmdG9wLWRlbHRhWTw9MCl7cmVzdWx0cy5zY3JvbGxUb3AoMCk7a2lsbEV2ZW50KGUpO31lbHNlIGlmKGRlbHRhWTwwJiZyZXN1bHRzLmdldCgwKS5zY3JvbGxIZWlnaHQtcmVzdWx0cy5zY3JvbGxUb3AoKStkZWx0YVk8PXJlc3VsdHMuaGVpZ2h0KCkpe3Jlc3VsdHMuc2Nyb2xsVG9wKHJlc3VsdHMuZ2V0KDApLnNjcm9sbEhlaWdodC1yZXN1bHRzLmhlaWdodCgpKTtraWxsRXZlbnQoZSk7fX0pO30KaW5zdGFsbEtleVVwQ2hhbmdlRXZlbnQoc2VhcmNoKTtzZWFyY2gub24oImtleXVwLWNoYW5nZSBpbnB1dCBwYXN0ZSIsdGhpcy5iaW5kKHRoaXMudXBkYXRlUmVzdWx0cykpO3NlYXJjaC5vbigiZm9jdXMiLGZ1bmN0aW9uKCl7c2VhcmNoLmFkZENsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKTt9KTtzZWFyY2gub24oImJsdXIiLGZ1bmN0aW9uKCl7c2VhcmNoLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKTt9KTt0aGlzLmRyb3Bkb3duLm9uKCJtb3VzZXVwIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCQoZS50YXJnZXQpLmNsb3Nlc3QoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIikubGVuZ3RoPjApe3RoaXMuaGlnaGxpZ2h0VW5kZXJFdmVudChlKTt0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKGUpO319KSk7dGhpcy5kcm9wZG93bi5vbigiY2xpY2sgbW91c2V1cCBtb3VzZWRvd24gdG91Y2hzdGFydCB0b3VjaGVuZCBmb2N1c2luIixmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO30pO3RoaXMubGFzdFNlYXJjaFRlcm09dW5kZWZpbmVkO2lmKCQuaXNGdW5jdGlvbih0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbikpe3RoaXMuaW5pdFNlbGVjdGlvbigpO3RoaXMubW9uaXRvclNvdXJjZSgpO30KaWYob3B0cy5tYXhpbXVtSW5wdXRMZW5ndGghPT1udWxsKXt0aGlzLnNlYXJjaC5hdHRyKCJtYXhsZW5ndGgiLG9wdHMubWF4aW11bUlucHV0TGVuZ3RoKTt9CnZhciBkaXNhYmxlZD1vcHRzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiKTtpZihkaXNhYmxlZD09PXVuZGVmaW5lZClkaXNhYmxlZD1mYWxzZTt0aGlzLmVuYWJsZSghZGlzYWJsZWQpO3ZhciByZWFkb25seT1vcHRzLmVsZW1lbnQucHJvcCgicmVhZG9ubHkiKTtpZihyZWFkb25seT09PXVuZGVmaW5lZClyZWFkb25seT1mYWxzZTt0aGlzLnJlYWRvbmx5KHJlYWRvbmx5KTtzY3JvbGxCYXJEaW1lbnNpb25zPXNjcm9sbEJhckRpbWVuc2lvbnN8fG1lYXN1cmVTY3JvbGxiYXIoKTt0aGlzLmF1dG9mb2N1cz1vcHRzLmVsZW1lbnQucHJvcCgiYXV0b2ZvY3VzIik7b3B0cy5lbGVtZW50LnByb3AoImF1dG9mb2N1cyIsZmFsc2UpO2lmKHRoaXMuYXV0b2ZvY3VzKXRoaXMuZm9jdXMoKTt0aGlzLnNlYXJjaC5hdHRyKCJwbGFjZWhvbGRlciIsb3B0cy5zZWFyY2hJbnB1dFBsYWNlaG9sZGVyKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZWxlbWVudD10aGlzLm9wdHMuZWxlbWVudCxzZWxlY3QyPWVsZW1lbnQuZGF0YSgic2VsZWN0MiIpLHNlbGY9dGhpczt0aGlzLmNsb3NlKCk7aWYoZWxlbWVudC5sZW5ndGgmJmVsZW1lbnRbMF0uZGV0YWNoRXZlbnQmJnNlbGYuX3N5bmMpe2VsZW1lbnQuZWFjaChmdW5jdGlvbigpe2lmKHNlbGYuX3N5bmMpe3RoaXMuZGV0YWNoRXZlbnQoIm9ucHJvcGVydHljaGFuZ2UiLHNlbGYuX3N5bmMpO319KTt9CmlmKHRoaXMucHJvcGVydHlPYnNlcnZlcil7dGhpcy5wcm9wZXJ0eU9ic2VydmVyLmRpc2Nvbm5lY3QoKTt0aGlzLnByb3BlcnR5T2JzZXJ2ZXI9bnVsbDt9CnRoaXMuX3N5bmM9bnVsbDtpZihzZWxlY3QyIT09dW5kZWZpbmVkKXtzZWxlY3QyLmNvbnRhaW5lci5yZW1vdmUoKTtzZWxlY3QyLmxpdmVSZWdpb24ucmVtb3ZlKCk7c2VsZWN0Mi5kcm9wZG93bi5yZW1vdmUoKTtlbGVtZW50LnJlbW92ZURhdGEoInNlbGVjdDIiKS5vZmYoIi5zZWxlY3QyIik7aWYoIWVsZW1lbnQuaXMoImlucHV0W3R5cGU9J2hpZGRlbiddIikpe2VsZW1lbnQuc2hvdygpLnByb3AoImF1dG9mb2N1cyIsdGhpcy5hdXRvZm9jdXN8fGZhbHNlKTtpZih0aGlzLmVsZW1lbnRUYWJJbmRleCl7ZWxlbWVudC5hdHRyKHt0YWJpbmRleDp0aGlzLmVsZW1lbnRUYWJJbmRleH0pO31lbHNle2VsZW1lbnQucmVtb3ZlQXR0cigidGFiaW5kZXgiKTt9CmVsZW1lbnQuc2hvdygpO31lbHNle2VsZW1lbnQuY3NzKCJkaXNwbGF5IiwiIik7fX0KY2xlYW51cEpRdWVyeUVsZW1lbnRzLmNhbGwodGhpcywiY29udGFpbmVyIiwibGl2ZVJlZ2lvbiIsImRyb3Bkb3duIiwicmVzdWx0cyIsInNlYXJjaCIpO30sb3B0aW9uVG9EYXRhOmZ1bmN0aW9uKGVsZW1lbnQpe2lmKGVsZW1lbnQuaXMoIm9wdGlvbiIpKXtyZXR1cm57aWQ6ZWxlbWVudC5wcm9wKCJ2YWx1ZSIpLHRleHQ6ZWxlbWVudC50ZXh0KCksZWxlbWVudDplbGVtZW50LmdldCgpLGNzczplbGVtZW50LmF0dHIoImNsYXNzIiksZGlzYWJsZWQ6ZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIpLGxvY2tlZDplcXVhbChlbGVtZW50LmF0dHIoImxvY2tlZCIpLCJsb2NrZWQiKXx8ZXF1YWwoZWxlbWVudC5kYXRhKCJsb2NrZWQiKSx0cnVlKX07fWVsc2UgaWYoZWxlbWVudC5pcygib3B0Z3JvdXAiKSl7cmV0dXJue3RleHQ6ZWxlbWVudC5hdHRyKCJsYWJlbCIpLGNoaWxkcmVuOltdLGVsZW1lbnQ6ZWxlbWVudC5nZXQoKSxjc3M6ZWxlbWVudC5hdHRyKCJjbGFzcyIpfTt9fSxwcmVwYXJlT3B0czpmdW5jdGlvbihvcHRzKXt2YXIgZWxlbWVudCxzZWxlY3QsaWRLZXksYWpheFVybCxzZWxmPXRoaXM7ZWxlbWVudD1vcHRzLmVsZW1lbnQ7aWYoZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe3RoaXMuc2VsZWN0PXNlbGVjdD1vcHRzLmVsZW1lbnQ7fQppZihzZWxlY3QpeyQuZWFjaChbImlkIiwibXVsdGlwbGUiLCJhamF4IiwicXVlcnkiLCJjcmVhdGVTZWFyY2hDaG9pY2UiLCJpbml0U2VsZWN0aW9uIiwiZGF0YSIsInRhZ3MiXSxmdW5jdGlvbigpe2lmKHRoaXMgaW4gb3B0cyl7dGhyb3cgbmV3IEVycm9yKCJPcHRpb24gJyIrdGhpcysiJyBpcyBub3QgYWxsb3dlZCBmb3IgU2VsZWN0MiB3aGVuIGF0dGFjaGVkIHRvIGEgPHNlbGVjdD4gZWxlbWVudC4iKTt9fSk7fQpvcHRzLmRlYnVnPW9wdHMuZGVidWd8fCQuZm4uc2VsZWN0Mi5kZWZhdWx0cy5kZWJ1ZztpZihvcHRzLmRlYnVnJiZjb25zb2xlJiZjb25zb2xlLndhcm4pe2lmKG9wdHMuaWQhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBpZGAgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWQgaW4gU2VsZWN0MiA0LjAuMCwgJysnY29uc2lkZXIgcmVuYW1pbmcgeW91ciBgaWRgIHByb3BlcnR5IG9yIG1hcHBpbmcgdGhlIHByb3BlcnR5IGJlZm9yZSB5b3VyIGRhdGEgbWFrZXMgaXQgdG8gU2VsZWN0Mi4gJysnWW91IGNhbiByZWFkIG1vcmUgYXQgaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pby9hbm5vdW5jZW1lbnRzLTQuMC5odG1sI2NoYW5nZWQtaWQnKTt9CmlmKG9wdHMudGV4dCE9bnVsbCl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYHRleHRgIG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkIGluIFNlbGVjdDIgNC4wLjAsICcrJ2NvbnNpZGVyIHJlbmFtaW5nIHlvdXIgYHRleHRgIHByb3BlcnR5IG9yIG1hcHBpbmcgdGhlIHByb3BlcnR5IGJlZm9yZSB5b3VyIGRhdGEgbWFrZXMgaXQgdG8gU2VsZWN0Mi4gJysnWW91IGNhbiByZWFkIG1vcmUgYXQgaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pby9hbm5vdW5jZW1lbnRzLTQuMC5odG1sI2NoYW5nZWQtaWQnKTt9CmlmKG9wdHMuc29ydFJlc3VsdHMhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogdGhlIGBzb3J0UmVzdWx0c2Agb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHNvcnRlcmAgaW4gU2VsZWN0MiA0LjAuMC4gJyk7fQppZihvcHRzLnNlbGVjdE9uQmx1ciE9bnVsbCl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYHNlbGVjdE9uQmx1cmAgb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHNlbGVjdE9uQ2xvc2VgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmFqYXghPW51bGwmJm9wdHMuYWpheC5yZXN1bHRzIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgYWpheC5yZXN1bHRzYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgYWpheC5wcm9jZXNzUmVzdWx0c2AgaW4gU2VsZWN0MiA0LjAuMC4nKTt9CmlmKG9wdHMuZm9ybWF0Tm9SZXN1bHRzIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0Tm9SZXN1bHRzYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2Uubm9SZXN1bHRzYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRTZWFyY2hpbmchPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRTZWFyY2hpbmdgIG9wdGlvbiBoYXMgYmVlbiByZW5hbWVkIHRvIGBsYW5ndWFnZS5zZWFyY2hpbmdgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmZvcm1hdElucHV0VG9vU2hvcnQhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRJbnB1dFRvb1Nob3J0YCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2UuaW5wdXRUb29TaG9ydGAgaW4gU2VsZWN0MiA0LjAuMC4nKTt9CmlmKG9wdHMuZm9ybWF0SW5wdXRUb29Mb25nIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0SW5wdXRUb29Mb25nYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2UuaW5wdXRUb29Mb25nYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRMb2FkaW5nIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0TG9hZGluZ2Agb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYGxhbmd1YWdlLmxvYWRpbmdNb3JlYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRTZWxlY3Rpb25Ub29CaWchPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRTZWxlY3Rpb25Ub29CaWdgIG9wdGlvbiBoYXMgYmVlbiByZW5hbWVkIHRvIGBsYW5ndWFnZS5tYXhpbXVtU2VsZWN0ZWRgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmVsZW1lbnQuZGF0YSgnc2VsZWN0MlRhZ3MnKSl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYGRhdGEtc2VsZWN0Mi10YWdzYCBhdHRyaWJ1dGUgaGFzIGJlZW4gcmVuYW1lZCB0byBgZGF0YS10YWdzYCBpbiBTZWxlY3QyIDQuMC4wLicpO319CmlmKG9wdHMuZWxlbWVudC5kYXRhKCd0YWdzJykhPW51bGwpe3ZhciBlbGVtVGFncz1vcHRzLmVsZW1lbnQuZGF0YSgndGFncycpO2lmKCEkLmlzQXJyYXkoZWxlbVRhZ3MpKXtlbGVtVGFncz1bXTt9Cm9wdHMuZWxlbWVudC5kYXRhKCdzZWxlY3QyVGFncycsZWxlbVRhZ3MpO30KaWYob3B0cy5zb3J0ZXIhPW51bGwpe29wdHMuc29ydFJlc3VsdHM9b3B0cy5zb3J0ZXI7fQppZihvcHRzLnNlbGVjdE9uQ2xvc2UhPW51bGwpe29wdHMuc2VsZWN0T25CbHVyPW9wdHMuc2VsZWN0T25DbG9zZTt9CmlmKG9wdHMuYWpheCE9bnVsbCl7aWYoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheC5wcm9jZXNzUmVzdWx0cykpe29wdHMuYWpheC5yZXN1bHRzPW9wdHMuYWpheC5wcm9jZXNzUmVzdWx0czt9fQppZihvcHRzLmxhbmd1YWdlIT1udWxsKXt2YXIgbGFuZz1vcHRzLmxhbmd1YWdlO2lmKCQuaXNGdW5jdGlvbihsYW5nLm5vTWF0Y2hlcykpe29wdHMuZm9ybWF0Tm9NYXRjaGVzPWxhbmcubm9NYXRjaGVzO30KaWYoJC5pc0Z1bmN0aW9uKGxhbmcuc2VhcmNoaW5nKSl7b3B0cy5mb3JtYXRTZWFyY2hpbmc9bGFuZy5zZWFyY2hpbmc7fQppZigkLmlzRnVuY3Rpb24obGFuZy5pbnB1dFRvb1Nob3J0KSl7b3B0cy5mb3JtYXRJbnB1dFRvb1Nob3J0PWxhbmcuaW5wdXRUb29TaG9ydDt9CmlmKCQuaXNGdW5jdGlvbihsYW5nLmlucHV0VG9vTG9uZykpe29wdHMuZm9ybWF0SW5wdXRUb29Mb25nPWxhbmcuaW5wdXRUb29Mb25nO30KaWYoJC5pc0Z1bmN0aW9uKGxhbmcubG9hZGluZ01vcmUpKXtvcHRzLmZvcm1hdExvYWRpbmc9bGFuZy5sb2FkaW5nTW9yZTt9CmlmKCQuaXNGdW5jdGlvbihsYW5nLm1heGltdW1TZWxlY3RlZCkpe29wdHMuZm9ybWF0U2VsZWN0aW9uVG9vQmlnPWxhbmcubWF4aW11bVNlbGVjdGVkO319Cm9wdHM9JC5leHRlbmQoe30se3BvcHVsYXRlUmVzdWx0czpmdW5jdGlvbihjb250YWluZXIscmVzdWx0cyxxdWVyeSl7dmFyIHBvcHVsYXRlLGlkPXRoaXMub3B0cy5pZCxsaXZlUmVnaW9uPXRoaXMubGl2ZVJlZ2lvbjtwb3B1bGF0ZT1mdW5jdGlvbihyZXN1bHRzLGNvbnRhaW5lcixkZXB0aCl7dmFyIGksbCxyZXN1bHQsc2VsZWN0YWJsZSxkaXNhYmxlZCxjb21wb3VuZCxub2RlLGxhYmVsLGlubmVyQ29udGFpbmVyLGZvcm1hdHRlZDtyZXN1bHRzPW9wdHMuc29ydFJlc3VsdHMocmVzdWx0cyxjb250YWluZXIscXVlcnkpO3ZhciBub2Rlcz1bXTtmb3IoaT0wLGw9cmVzdWx0cy5sZW5ndGg7aTxsO2k9aSsxKXtyZXN1bHQ9cmVzdWx0c1tpXTtkaXNhYmxlZD0ocmVzdWx0LmRpc2FibGVkPT09dHJ1ZSk7c2VsZWN0YWJsZT0oIWRpc2FibGVkKSYmKGlkKHJlc3VsdCkhPT11bmRlZmluZWQpO2NvbXBvdW5kPXJlc3VsdC5jaGlsZHJlbiYmcmVzdWx0LmNoaWxkcmVuLmxlbmd0aD4wO25vZGU9JCgiPGxpPjwvbGk+Iik7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHRzLWRlcHQtIitkZXB0aCk7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHQiKTtub2RlLmFkZENsYXNzKHNlbGVjdGFibGU/InNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGUiOiJzZWxlY3QyLXJlc3VsdC11bnNlbGVjdGFibGUiKTtpZihkaXNhYmxlZCl7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1kaXNhYmxlZCIpO30KaWYoY29tcG91bmQpe25vZGUuYWRkQ2xhc3MoInNlbGVjdDItcmVzdWx0LXdpdGgtY2hpbGRyZW4iKTt9Cm5vZGUuYWRkQ2xhc3Moc2VsZi5vcHRzLmZvcm1hdFJlc3VsdENzc0NsYXNzKHJlc3VsdCkpO25vZGUuYXR0cigicm9sZSIsInByZXNlbnRhdGlvbiIpO2xhYmVsPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2xhYmVsLmFkZENsYXNzKCJzZWxlY3QyLXJlc3VsdC1sYWJlbCIpO2xhYmVsLmF0dHIoImlkIiwic2VsZWN0Mi1yZXN1bHQtbGFiZWwtIituZXh0VWlkKCkpO2xhYmVsLmF0dHIoInJvbGUiLCJvcHRpb24iKTtmb3JtYXR0ZWQ9b3B0cy5mb3JtYXRSZXN1bHQocmVzdWx0LGxhYmVsLHF1ZXJ5LHNlbGYub3B0cy5lc2NhcGVNYXJrdXApO2lmKGZvcm1hdHRlZCE9PXVuZGVmaW5lZCl7bGFiZWwuaHRtbChmb3JtYXR0ZWQpO25vZGUuYXBwZW5kKGxhYmVsKTt9CmlmKGNvbXBvdW5kKXtpbm5lckNvbnRhaW5lcj0kKCI8dWw+PC91bD4iKTtpbm5lckNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHQtc3ViIik7cG9wdWxhdGUocmVzdWx0LmNoaWxkcmVuLGlubmVyQ29udGFpbmVyLGRlcHRoKzEpO25vZGUuYXBwZW5kKGlubmVyQ29udGFpbmVyKTt9Cm5vZGUuZGF0YSgic2VsZWN0Mi1kYXRhIixyZXN1bHQpO25vZGVzLnB1c2gobm9kZVswXSk7fQpjb250YWluZXIuYXBwZW5kKG5vZGVzKTtsaXZlUmVnaW9uLnRleHQob3B0cy5mb3JtYXRNYXRjaGVzKHJlc3VsdHMubGVuZ3RoKSk7fTtwb3B1bGF0ZShyZXN1bHRzLGNvbnRhaW5lciwwKTt9fSwkLmZuLnNlbGVjdDIuZGVmYXVsdHMsb3B0cyk7aWYodHlwZW9mKG9wdHMuaWQpIT09ImZ1bmN0aW9uIil7aWRLZXk9b3B0cy5pZDtvcHRzLmlkPWZ1bmN0aW9uKGUpe3JldHVybiBlW2lkS2V5XTt9O30KaWYoJC5pc0FycmF5KG9wdHMuZWxlbWVudC5kYXRhKCJzZWxlY3QyVGFncyIpKSl7aWYoInRhZ3MiaW4gb3B0cyl7dGhyb3cidGFncyBzcGVjaWZpZWQgYXMgYm90aCBhbiBhdHRyaWJ1dGUgJ2RhdGEtc2VsZWN0Mi10YWdzJyBhbmQgaW4gb3B0aW9ucyBvZiBTZWxlY3QyICIrb3B0cy5lbGVtZW50LmF0dHIoImlkIik7fQpvcHRzLnRhZ3M9b3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDJUYWdzIik7fQppZihzZWxlY3Qpe29wdHMucXVlcnk9dGhpcy5iaW5kKGZ1bmN0aW9uKHF1ZXJ5KXt2YXIgZGF0YT17cmVzdWx0czpbXSxtb3JlOmZhbHNlfSx0ZXJtPXF1ZXJ5LnRlcm0sY2hpbGRyZW4scGxhY2Vob2xkZXJPcHRpb24scHJvY2Vzcztwcm9jZXNzPWZ1bmN0aW9uKGVsZW1lbnQsY29sbGVjdGlvbil7dmFyIGdyb3VwO2lmKGVsZW1lbnQuaXMoIm9wdGlvbiIpKXtpZihxdWVyeS5tYXRjaGVyKHRlcm0sZWxlbWVudC50ZXh0KCksZWxlbWVudCkpe2NvbGxlY3Rpb24ucHVzaChzZWxmLm9wdGlvblRvRGF0YShlbGVtZW50KSk7fX1lbHNlIGlmKGVsZW1lbnQuaXMoIm9wdGdyb3VwIikpe2dyb3VwPXNlbGYub3B0aW9uVG9EYXRhKGVsZW1lbnQpO2VsZW1lbnQuY2hpbGRyZW4oKS5lYWNoMihmdW5jdGlvbihpLGVsbSl7cHJvY2VzcyhlbG0sZ3JvdXAuY2hpbGRyZW4pO30pO2lmKGdyb3VwLmNoaWxkcmVuLmxlbmd0aD4wKXtjb2xsZWN0aW9uLnB1c2goZ3JvdXApO319fTtjaGlsZHJlbj1lbGVtZW50LmNoaWxkcmVuKCk7aWYodGhpcy5nZXRQbGFjZWhvbGRlcigpIT09dW5kZWZpbmVkJiZjaGlsZHJlbi5sZW5ndGg+MCl7cGxhY2Vob2xkZXJPcHRpb249dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpO2lmKHBsYWNlaG9sZGVyT3B0aW9uKXtjaGlsZHJlbj1jaGlsZHJlbi5ub3QocGxhY2Vob2xkZXJPcHRpb24pO319CmNoaWxkcmVuLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtwcm9jZXNzKGVsbSxkYXRhLnJlc3VsdHMpO30pO3F1ZXJ5LmNhbGxiYWNrKGRhdGEpO30pO29wdHMuaWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ7fTt9ZWxzZXtpZighKCJxdWVyeSJpbiBvcHRzKSl7aWYoImFqYXgiaW4gb3B0cyl7YWpheFVybD1vcHRzLmVsZW1lbnQuZGF0YSgiYWpheC11cmwiKTtpZihhamF4VXJsJiZhamF4VXJsLmxlbmd0aD4wKXtvcHRzLmFqYXgudXJsPWFqYXhVcmw7fQpvcHRzLnF1ZXJ5PWFqYXguY2FsbChvcHRzLmVsZW1lbnQsb3B0cy5hamF4KTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLnF1ZXJ5PWxvY2FsKG9wdHMuZGF0YSk7fWVsc2UgaWYoInRhZ3MiaW4gb3B0cyl7b3B0cy5xdWVyeT10YWdzKG9wdHMudGFncyk7aWYob3B0cy5jcmVhdGVTZWFyY2hDaG9pY2U9PT11bmRlZmluZWQpe29wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlPWZ1bmN0aW9uKHRlcm0pe3JldHVybntpZDokLnRyaW0odGVybSksdGV4dDokLnRyaW0odGVybSl9O307fQppZihvcHRzLmluaXRTZWxlY3Rpb249PT11bmRlZmluZWQpe29wdHMuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgZGF0YT1bXTskKHNwbGl0VmFsKGVsZW1lbnQudmFsKCksb3B0cy5zZXBhcmF0b3Isb3B0cy50cmFuc2Zvcm1WYWwpKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG9iaj17aWQ6dGhpcyx0ZXh0OnRoaXN9LHRhZ3M9b3B0cy50YWdzO2lmKCQuaXNGdW5jdGlvbih0YWdzKSl0YWdzPXRhZ3MoKTskKHRhZ3MpLmVhY2goZnVuY3Rpb24oKXtpZihlcXVhbCh0aGlzLmlkLG9iai5pZCkpe29iaj10aGlzO3JldHVybiBmYWxzZTt9fSk7ZGF0YS5wdXNoKG9iaik7fSk7Y2FsbGJhY2soZGF0YSk7fTt9fX19CmlmKHR5cGVvZihvcHRzLnF1ZXJ5KSE9PSJmdW5jdGlvbiIpe3Rocm93InF1ZXJ5IGZ1bmN0aW9uIG5vdCBkZWZpbmVkIGZvciBTZWxlY3QyICIrb3B0cy5lbGVtZW50LmF0dHIoImlkIik7fQppZihvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uPT09J3RvcCcpe29wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb249ZnVuY3Rpb24obGlzdCxpdGVtKXtsaXN0LnVuc2hpZnQoaXRlbSk7fTt9CmVsc2UgaWYob3B0cy5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbj09PSdib3R0b20nKXtvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uPWZ1bmN0aW9uKGxpc3QsaXRlbSl7bGlzdC5wdXNoKGl0ZW0pO307fQplbHNlIGlmKHR5cGVvZihvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uKSE9PSJmdW5jdGlvbiIpe3Rocm93ImludmFsaWQgY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb24gb3B0aW9uIG11c3QgYmUgJ3RvcCcsICdib3R0b20nIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIjt9CnJldHVybiBvcHRzO30sbW9uaXRvclNvdXJjZTpmdW5jdGlvbigpe3ZhciBlbD10aGlzLm9wdHMuZWxlbWVudCxvYnNlcnZlcixzZWxmPXRoaXM7ZWwub24oImNoYW5nZS5zZWxlY3QyIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0Mi1jaGFuZ2UtdHJpZ2dlcmVkIikhPT10cnVlKXt0aGlzLmluaXRTZWxlY3Rpb24oKTt9fSkpO3RoaXMuX3N5bmM9dGhpcy5iaW5kKGZ1bmN0aW9uKCl7dmFyIGRpc2FibGVkPWVsLnByb3AoImRpc2FibGVkIik7aWYoZGlzYWJsZWQ9PT11bmRlZmluZWQpZGlzYWJsZWQ9ZmFsc2U7dGhpcy5lbmFibGUoIWRpc2FibGVkKTt2YXIgcmVhZG9ubHk9ZWwucHJvcCgicmVhZG9ubHkiKTtpZihyZWFkb25seT09PXVuZGVmaW5lZClyZWFkb25seT1mYWxzZTt0aGlzLnJlYWRvbmx5KHJlYWRvbmx5KTtpZih0aGlzLmNvbnRhaW5lcil7c3luY0Nzc0NsYXNzZXModGhpcy5jb250YWluZXIsdGhpcy5vcHRzLmVsZW1lbnQsdGhpcy5vcHRzLmFkYXB0Q29udGFpbmVyQ3NzQ2xhc3MpO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKGV2YWx1YXRlKHRoaXMub3B0cy5jb250YWluZXJDc3NDbGFzcyx0aGlzLm9wdHMuZWxlbWVudCkpO30KaWYodGhpcy5kcm9wZG93bil7c3luY0Nzc0NsYXNzZXModGhpcy5kcm9wZG93bix0aGlzLm9wdHMuZWxlbWVudCx0aGlzLm9wdHMuYWRhcHREcm9wZG93bkNzc0NsYXNzKTt0aGlzLmRyb3Bkb3duLmFkZENsYXNzKGV2YWx1YXRlKHRoaXMub3B0cy5kcm9wZG93bkNzc0NsYXNzLHRoaXMub3B0cy5lbGVtZW50KSk7fX0pO2lmKGVsLmxlbmd0aCYmZWxbMF0uYXR0YWNoRXZlbnQpe2VsLmVhY2goZnVuY3Rpb24oKXt0aGlzLmF0dGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIixzZWxmLl9zeW5jKTt9KTt9Cm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7aWYob2JzZXJ2ZXIhPT11bmRlZmluZWQpe2lmKHRoaXMucHJvcGVydHlPYnNlcnZlcil7ZGVsZXRlIHRoaXMucHJvcGVydHlPYnNlcnZlcjt0aGlzLnByb3BlcnR5T2JzZXJ2ZXI9bnVsbDt9CnRoaXMucHJvcGVydHlPYnNlcnZlcj1uZXcgb2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXskLmVhY2gobXV0YXRpb25zLHNlbGYuX3N5bmMpO30pO3RoaXMucHJvcGVydHlPYnNlcnZlci5vYnNlcnZlKGVsLmdldCgwKSx7YXR0cmlidXRlczp0cnVlLHN1YnRyZWU6ZmFsc2V9KTt9fSx0cmlnZ2VyU2VsZWN0OmZ1bmN0aW9uKGRhdGEpe3ZhciBldnQ9JC5FdmVudCgic2VsZWN0Mi1zZWxlY3RpbmciLHt2YWw6dGhpcy5pZChkYXRhKSxvYmplY3Q6ZGF0YSxjaG9pY2U6ZGF0YX0pO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoZXZ0KTtyZXR1cm4hZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO30sdHJpZ2dlckNoYW5nZTpmdW5jdGlvbihkZXRhaWxzKXtkZXRhaWxzPWRldGFpbHN8fHt9O2RldGFpbHM9JC5leHRlbmQoe30sZGV0YWlscyx7dHlwZToiY2hhbmdlIix2YWw6dGhpcy52YWwoKX0pO3RoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDItY2hhbmdlLXRyaWdnZXJlZCIsdHJ1ZSk7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcihkZXRhaWxzKTt0aGlzLm9wdHMuZWxlbWVudC5kYXRhKCJzZWxlY3QyLWNoYW5nZS10cmlnZ2VyZWQiLGZhbHNlKTt0aGlzLm9wdHMuZWxlbWVudC5jbGljaygpO2lmKHRoaXMub3B0cy5ibHVyT25DaGFuZ2UpCnRoaXMub3B0cy5lbGVtZW50LmJsdXIoKTt9LGlzSW50ZXJmYWNlRW5hYmxlZDpmdW5jdGlvbigpCntyZXR1cm4gdGhpcy5lbmFibGVkSW50ZXJmYWNlPT09dHJ1ZTt9LGVuYWJsZUludGVyZmFjZTpmdW5jdGlvbigpe3ZhciBlbmFibGVkPXRoaXMuX2VuYWJsZWQmJiF0aGlzLl9yZWFkb25seSxkaXNhYmxlZD0hZW5hYmxlZDtpZihlbmFibGVkPT09dGhpcy5lbmFibGVkSW50ZXJmYWNlKXJldHVybiBmYWxzZTt0aGlzLmNvbnRhaW5lci50b2dnbGVDbGFzcygic2VsZWN0Mi1jb250YWluZXItZGlzYWJsZWQiLGRpc2FibGVkKTt0aGlzLmNsb3NlKCk7dGhpcy5lbmFibGVkSW50ZXJmYWNlPWVuYWJsZWQ7cmV0dXJuIHRydWU7fSxlbmFibGU6ZnVuY3Rpb24oZW5hYmxlZCl7aWYoZW5hYmxlZD09PXVuZGVmaW5lZCllbmFibGVkPXRydWU7aWYodGhpcy5fZW5hYmxlZD09PWVuYWJsZWQpcmV0dXJuO3RoaXMuX2VuYWJsZWQ9ZW5hYmxlZDt0aGlzLm9wdHMuZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIsIWVuYWJsZWQpO3RoaXMuZW5hYmxlSW50ZXJmYWNlKCk7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGUoZmFsc2UpO30scmVhZG9ubHk6ZnVuY3Rpb24oZW5hYmxlZCl7aWYoZW5hYmxlZD09PXVuZGVmaW5lZCllbmFibGVkPWZhbHNlO2lmKHRoaXMuX3JlYWRvbmx5PT09ZW5hYmxlZClyZXR1cm47dGhpcy5fcmVhZG9ubHk9ZW5hYmxlZDt0aGlzLm9wdHMuZWxlbWVudC5wcm9wKCJyZWFkb25seSIsZW5hYmxlZCk7dGhpcy5lbmFibGVJbnRlcmZhY2UoKTt9LG9wZW5lZDpmdW5jdGlvbigpe3JldHVybih0aGlzLmNvbnRhaW5lcik/dGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItZHJvcGRvd24tb3BlbiIpOmZhbHNlO30scG9zaXRpb25Ecm9wZG93bjpmdW5jdGlvbigpe3ZhciAkZHJvcGRvd249dGhpcy5kcm9wZG93bixjb250YWluZXI9dGhpcy5jb250YWluZXIsb2Zmc2V0PWNvbnRhaW5lci5vZmZzZXQoKSxoZWlnaHQ9Y29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKSx3aWR0aD1jb250YWluZXIub3V0ZXJXaWR0aChmYWxzZSksZHJvcEhlaWdodD0kZHJvcGRvd24ub3V0ZXJIZWlnaHQoZmFsc2UpLCR3aW5kb3c9JCh3aW5kb3cpLHdpbmRvd1dpZHRoPSR3aW5kb3cud2lkdGgoKSx3aW5kb3dIZWlnaHQ9JHdpbmRvdy5oZWlnaHQoKSx2aWV3UG9ydFJpZ2h0PSR3aW5kb3cuc2Nyb2xsTGVmdCgpK3dpbmRvd1dpZHRoLHZpZXdwb3J0Qm90dG9tPSR3aW5kb3cuc2Nyb2xsVG9wKCkrd2luZG93SGVpZ2h0LGRyb3BUb3A9b2Zmc2V0LnRvcCtoZWlnaHQsZHJvcExlZnQ9b2Zmc2V0LmxlZnQsZW5vdWdoUm9vbUJlbG93PWRyb3BUb3ArZHJvcEhlaWdodDw9dmlld3BvcnRCb3R0b20sZW5vdWdoUm9vbUFib3ZlPShvZmZzZXQudG9wLWRyb3BIZWlnaHQpPj0kd2luZG93LnNjcm9sbFRvcCgpLGRyb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSksZW5vdWdoUm9vbU9uUmlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZHJvcExlZnQrZHJvcFdpZHRoPD12aWV3UG9ydFJpZ2h0O30sZW5vdWdoUm9vbU9uTGVmdD1mdW5jdGlvbigpe3JldHVybiBvZmZzZXQubGVmdCt2aWV3UG9ydFJpZ2h0K2NvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKT5kcm9wV2lkdGg7fSxhYm92ZU5vdz0kZHJvcGRvd24uaGFzQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpLGJvZHlPZmZzZXQsYWJvdmUsY2hhbmdlRGlyZWN0aW9uLGNzcyxyZXN1bHRzTGlzdE5vZGU7aWYoYWJvdmVOb3cpe2Fib3ZlPXRydWU7aWYoIWVub3VnaFJvb21BYm92ZSYmZW5vdWdoUm9vbUJlbG93KXtjaGFuZ2VEaXJlY3Rpb249dHJ1ZTthYm92ZT1mYWxzZTt9fWVsc2V7YWJvdmU9ZmFsc2U7aWYoIWVub3VnaFJvb21CZWxvdyYmZW5vdWdoUm9vbUFib3ZlKXtjaGFuZ2VEaXJlY3Rpb249dHJ1ZTthYm92ZT10cnVlO319CmlmKGNoYW5nZURpcmVjdGlvbil7JGRyb3Bkb3duLmhpZGUoKTtvZmZzZXQ9dGhpcy5jb250YWluZXIub2Zmc2V0KCk7aGVpZ2h0PXRoaXMuY29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKTt3aWR0aD10aGlzLmNvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKTtkcm9wSGVpZ2h0PSRkcm9wZG93bi5vdXRlckhlaWdodChmYWxzZSk7dmlld1BvcnRSaWdodD0kd2luZG93LnNjcm9sbExlZnQoKSt3aW5kb3dXaWR0aDt2aWV3cG9ydEJvdHRvbT0kd2luZG93LnNjcm9sbFRvcCgpK3dpbmRvd0hlaWdodDtkcm9wVG9wPW9mZnNldC50b3AraGVpZ2h0O2Ryb3BMZWZ0PW9mZnNldC5sZWZ0O2Ryb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSk7JGRyb3Bkb3duLnNob3coKTt0aGlzLmZvY3VzU2VhcmNoKCk7fQppZih0aGlzLm9wdHMuZHJvcGRvd25BdXRvV2lkdGgpe3Jlc3VsdHNMaXN0Tm9kZT0kKCcuc2VsZWN0Mi1yZXN1bHRzJywkZHJvcGRvd24pWzBdOyRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0Mi1kcm9wLWF1dG8td2lkdGgnKTskZHJvcGRvd24uY3NzKCd3aWR0aCcsJycpO2Ryb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSkrKHJlc3VsdHNMaXN0Tm9kZS5zY3JvbGxIZWlnaHQ9PT1yZXN1bHRzTGlzdE5vZGUuY2xpZW50SGVpZ2h0PzA6c2Nyb2xsQmFyRGltZW5zaW9ucy53aWR0aCk7ZHJvcFdpZHRoPndpZHRoP3dpZHRoPWRyb3BXaWR0aDpkcm9wV2lkdGg9d2lkdGg7ZHJvcEhlaWdodD0kZHJvcGRvd24ub3V0ZXJIZWlnaHQoZmFsc2UpO30KZWxzZXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1kcm9wLWF1dG8td2lkdGgnKTt9CmlmKHRoaXMuYm9keS5jc3MoJ3Bvc2l0aW9uJykhPT0nc3RhdGljJyl7Ym9keU9mZnNldD10aGlzLmJvZHkub2Zmc2V0KCk7ZHJvcFRvcC09Ym9keU9mZnNldC50b3A7ZHJvcExlZnQtPWJvZHlPZmZzZXQubGVmdDt9CmlmKCFlbm91Z2hSb29tT25SaWdodCgpJiZlbm91Z2hSb29tT25MZWZ0KCkpe2Ryb3BMZWZ0PW9mZnNldC5sZWZ0K3RoaXMuY29udGFpbmVyLm91dGVyV2lkdGgoZmFsc2UpLWRyb3BXaWR0aDt9CmNzcz17bGVmdDpkcm9wTGVmdCx3aWR0aDp3aWR0aH07aWYoYWJvdmUpe3RoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTskZHJvcGRvd24uYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpO2Ryb3BIZWlnaHQ9JGRyb3Bkb3duLm91dGVySGVpZ2h0KGZhbHNlKTtjc3MudG9wPW9mZnNldC50b3AtZHJvcEhlaWdodDtjc3MuYm90dG9tPSdhdXRvJzt9CmVsc2V7Y3NzLnRvcD1kcm9wVG9wO2Nzcy5ib3R0b209J2F1dG8nO3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTskZHJvcGRvd24ucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpO30KY3NzPSQuZXh0ZW5kKGNzcyxldmFsdWF0ZSh0aGlzLm9wdHMuZHJvcGRvd25Dc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTskZHJvcGRvd24uY3NzKGNzcyk7fSxzaG91bGRPcGVuOmZ1bmN0aW9uKCl7dmFyIGV2ZW50O2lmKHRoaXMub3BlbmVkKCkpcmV0dXJuIGZhbHNlO2lmKHRoaXMuX2VuYWJsZWQ9PT1mYWxzZXx8dGhpcy5fcmVhZG9ubHk9PT10cnVlKXJldHVybiBmYWxzZTtldmVudD0kLkV2ZW50KCJzZWxlY3QyLW9wZW5pbmciKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGV2ZW50KTtyZXR1cm4hZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCk7fSxjbGVhckRyb3Bkb3duQWxpZ25tZW50UHJlZmVyZW5jZTpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTt0aGlzLmRyb3Bkb3duLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTt9LG9wZW46ZnVuY3Rpb24oKXtpZighdGhpcy5zaG91bGRPcGVuKCkpcmV0dXJuIGZhbHNlO3RoaXMub3BlbmluZygpOyRkb2N1bWVudC5vbigibW91c2Vtb3ZlLnNlbGVjdDJFdmVudCIsZnVuY3Rpb24oZSl7bGFzdE1vdXNlUG9zaXRpb24ueD1lLnBhZ2VYO2xhc3RNb3VzZVBvc2l0aW9uLnk9ZS5wYWdlWTt9KTtyZXR1cm4gdHJ1ZTt9LG9wZW5pbmc6ZnVuY3Rpb24oKXt2YXIgY2lkPXRoaXMuY29udGFpbmVyRXZlbnROYW1lLHNjcm9sbD0ic2Nyb2xsLiIrY2lkLHJlc2l6ZT0icmVzaXplLiIrY2lkLG9yaWVudD0ib3JpZW50YXRpb25jaGFuZ2UuIitjaWQsbWFzazt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1kcm9wZG93bi1vcGVuIikuYWRkQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO3RoaXMuY2xlYXJEcm9wZG93bkFsaWdubWVudFByZWZlcmVuY2UoKTtpZih0aGlzLmRyb3Bkb3duWzBdIT09dGhpcy5ib2R5LmNoaWxkcmVuKCkubGFzdCgpWzBdKXt0aGlzLmRyb3Bkb3duLmRldGFjaCgpLmFwcGVuZFRvKHRoaXMuYm9keSk7fQptYXNrPSQoIiNzZWxlY3QyLWRyb3AtbWFzayIpO2lmKG1hc2subGVuZ3RoPT09MCl7bWFzaz0kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTttYXNrLmF0dHIoImlkIiwic2VsZWN0Mi1kcm9wLW1hc2siKS5hdHRyKCJjbGFzcyIsInNlbGVjdDItZHJvcC1tYXNrIik7bWFzay5oaWRlKCk7bWFzay5hcHBlbmRUbyh0aGlzLmJvZHkpO21hc2sub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IGNsaWNrIixmdW5jdGlvbihlKXtyZWluc2VydEVsZW1lbnQobWFzayk7dmFyIGRyb3Bkb3duPSQoIiNzZWxlY3QyLWRyb3AiKSxzZWxmO2lmKGRyb3Bkb3duLmxlbmd0aD4wKXtzZWxmPWRyb3Bkb3duLmRhdGEoInNlbGVjdDIiKTtpZihzZWxmLm9wdHMuc2VsZWN0T25CbHVyKXtzZWxmLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTt9CnNlbGYuY2xvc2UoKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTt9fSk7fQppZih0aGlzLmRyb3Bkb3duLnByZXYoKVswXSE9PW1hc2tbMF0pe3RoaXMuZHJvcGRvd24uYmVmb3JlKG1hc2spO30KJCgiI3NlbGVjdDItZHJvcCIpLnJlbW92ZUF0dHIoImlkIik7dGhpcy5kcm9wZG93bi5hdHRyKCJpZCIsInNlbGVjdDItZHJvcCIpO21hc2suc2hvdygpO3RoaXMucG9zaXRpb25Ecm9wZG93bigpO3RoaXMuZHJvcGRvd24uc2hvdygpO3RoaXMucG9zaXRpb25Ecm9wZG93bigpO3RoaXMuZHJvcGRvd24uYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hY3RpdmUiKTt2YXIgdGhhdD10aGlzO3RoaXMuY29udGFpbmVyLnBhcmVudHMoKS5hZGQod2luZG93KS5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5vbihyZXNpemUrIiAiK3Njcm9sbCsiICIrb3JpZW50LGZ1bmN0aW9uKGUpe2lmKHRoYXQub3BlbmVkKCkpdGhhdC5wb3NpdGlvbkRyb3Bkb3duKCk7fSk7fSk7fSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLm9wZW5lZCgpKXJldHVybjt2YXIgY2lkPXRoaXMuY29udGFpbmVyRXZlbnROYW1lLHNjcm9sbD0ic2Nyb2xsLiIrY2lkLHJlc2l6ZT0icmVzaXplLiIrY2lkLG9yaWVudD0ib3JpZW50YXRpb25jaGFuZ2UuIitjaWQ7dGhpcy5jb250YWluZXIucGFyZW50cygpLmFkZCh3aW5kb3cpLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLm9mZihzY3JvbGwpLm9mZihyZXNpemUpLm9mZihvcmllbnQpO30pO3RoaXMuY2xlYXJEcm9wZG93bkFsaWdubWVudFByZWZlcmVuY2UoKTskKCIjc2VsZWN0Mi1kcm9wLW1hc2siKS5oaWRlKCk7dGhpcy5kcm9wZG93bi5yZW1vdmVBdHRyKCJpZCIpO3RoaXMuZHJvcGRvd24uaGlkZSgpO3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3Bkb3duLW9wZW4iKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5yZXN1bHRzLmVtcHR5KCk7JGRvY3VtZW50Lm9mZigibW91c2Vtb3ZlLnNlbGVjdDJFdmVudCIpO3RoaXMuY2xlYXJTZWFyY2goKTt0aGlzLnNlYXJjaC5yZW1vdmVDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLnNlYXJjaC5yZW1vdmVBdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItY2xvc2UiKSk7fSxleHRlcm5hbFNlYXJjaDpmdW5jdGlvbih0ZXJtKXt0aGlzLm9wZW4oKTt0aGlzLnNlYXJjaC52YWwodGVybSk7dGhpcy51cGRhdGVSZXN1bHRzKGZhbHNlKTt9LGNsZWFyU2VhcmNoOmZ1bmN0aW9uKCl7fSxwcmVmaWxsTmV4dFNlYXJjaFRlcm06ZnVuY3Rpb24oKXtpZih0aGlzLnNlYXJjaC52YWwoKSE9PSIiKXtyZXR1cm4gZmFsc2U7fQp2YXIgbmV4dFNlYXJjaFRlcm09dGhpcy5vcHRzLm5leHRTZWFyY2hUZXJtKHRoaXMuZGF0YSgpLHRoaXMubGFzdFNlYXJjaFRlcm0pO2lmKG5leHRTZWFyY2hUZXJtIT09dW5kZWZpbmVkKXt0aGlzLnNlYXJjaC52YWwobmV4dFNlYXJjaFRlcm0pO3RoaXMuc2VhcmNoLnNlbGVjdCgpO3JldHVybiB0cnVlO30KcmV0dXJuIGZhbHNlO30sZ2V0TWF4aW11bVNlbGVjdGlvblNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZXZhbHVhdGUodGhpcy5vcHRzLm1heGltdW1TZWxlY3Rpb25TaXplLHRoaXMub3B0cy5lbGVtZW50KTt9LGVuc3VyZUhpZ2hsaWdodFZpc2libGU6ZnVuY3Rpb24oKXt2YXIgcmVzdWx0cz10aGlzLnJlc3VsdHMsY2hpbGRyZW4saW5kZXgsY2hpbGQsaGIscmIseSxtb3JlLHRvcE9mZnNldDtpbmRleD10aGlzLmhpZ2hsaWdodCgpO2lmKGluZGV4PDApcmV0dXJuO2lmKGluZGV4PT0wKXtyZXN1bHRzLnNjcm9sbFRvcCgwKTtyZXR1cm47fQpjaGlsZHJlbj10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmZpbmQoJy5zZWxlY3QyLXJlc3VsdC1sYWJlbCcpO2NoaWxkPSQoY2hpbGRyZW5baW5kZXhdKTt0b3BPZmZzZXQ9KGNoaWxkLm9mZnNldCgpfHx7fSkudG9wfHwwO2hiPXRvcE9mZnNldCtjaGlsZC5vdXRlckhlaWdodCh0cnVlKTtpZihpbmRleD09PWNoaWxkcmVuLmxlbmd0aC0xKXttb3JlPXJlc3VsdHMuZmluZCgibGkuc2VsZWN0Mi1tb3JlLXJlc3VsdHMiKTtpZihtb3JlLmxlbmd0aD4wKXtoYj1tb3JlLm9mZnNldCgpLnRvcCttb3JlLm91dGVySGVpZ2h0KHRydWUpO319CnJiPXJlc3VsdHMub2Zmc2V0KCkudG9wK3Jlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO2lmKGhiPnJiKXtyZXN1bHRzLnNjcm9sbFRvcChyZXN1bHRzLnNjcm9sbFRvcCgpKyhoYi1yYikpO30KeT10b3BPZmZzZXQtcmVzdWx0cy5vZmZzZXQoKS50b3A7aWYoeTwwJiZjaGlsZC5jc3MoJ2Rpc3BsYXknKSE9J25vbmUnKXtyZXN1bHRzLnNjcm9sbFRvcChyZXN1bHRzLnNjcm9sbFRvcCgpK3kpO319LGZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdHMuZmluZCgiLnNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGU6bm90KC5zZWxlY3QyLWRpc2FibGVkKTpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIik7fSxtb3ZlSGlnaGxpZ2h0OmZ1bmN0aW9uKGRlbHRhKXt2YXIgY2hvaWNlcz10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLGluZGV4PXRoaXMuaGlnaGxpZ2h0KCk7d2hpbGUoaW5kZXg+LTEmJmluZGV4PGNob2ljZXMubGVuZ3RoKXtpbmRleCs9ZGVsdGE7dmFyIGNob2ljZT0kKGNob2ljZXNbaW5kZXhdKTtpZihjaG9pY2UuaGFzQ2xhc3MoInNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGUiKSYmIWNob2ljZS5oYXNDbGFzcygic2VsZWN0Mi1kaXNhYmxlZCIpJiYhY2hvaWNlLmhhc0NsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIikpe3RoaXMuaGlnaGxpZ2h0KGluZGV4KTticmVhazt9fX0saGlnaGxpZ2h0OmZ1bmN0aW9uKGluZGV4KXt2YXIgY2hvaWNlcz10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLGNob2ljZSxkYXRhO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gaW5kZXhPZihjaG9pY2VzLmZpbHRlcigiLnNlbGVjdDItaGlnaGxpZ2h0ZWQiKVswXSxjaG9pY2VzLmdldCgpKTt9CmlmKGluZGV4Pj1jaG9pY2VzLmxlbmd0aClpbmRleD1jaG9pY2VzLmxlbmd0aC0xO2lmKGluZGV4PDApaW5kZXg9MDt0aGlzLnJlbW92ZUhpZ2hsaWdodCgpO2Nob2ljZT0kKGNob2ljZXNbaW5kZXhdKTtjaG9pY2UuYWRkQ2xhc3MoInNlbGVjdDItaGlnaGxpZ2h0ZWQiKTt0aGlzLnNlYXJjaC5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLGNob2ljZS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtbGFiZWwiKS5hdHRyKCJpZCIpKTt0aGlzLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTt0aGlzLmxpdmVSZWdpb24udGV4dChjaG9pY2UudGV4dCgpKTtkYXRhPWNob2ljZS5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHt0eXBlOiJzZWxlY3QyLWhpZ2hsaWdodCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt9fSxyZW1vdmVIaWdobGlnaHQ6ZnVuY3Rpb24oKXt0aGlzLnJlc3VsdHMuZmluZCgiLnNlbGVjdDItaGlnaGxpZ2h0ZWQiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1oaWdobGlnaHRlZCIpO30sdG91Y2hNb3ZlZDpmdW5jdGlvbigpe3RoaXMuX3RvdWNoTW92ZWQ9dHJ1ZTt9LGNsZWFyVG91Y2hNb3ZlZDpmdW5jdGlvbigpe3RoaXMuX3RvdWNoTW92ZWQ9ZmFsc2U7fSxjb3VudFNlbGVjdGFibGVSZXN1bHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCkubGVuZ3RoO30saGlnaGxpZ2h0VW5kZXJFdmVudDpmdW5jdGlvbihldmVudCl7dmFyIGVsPSQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpO2lmKGVsLmxlbmd0aD4wJiYhZWwuaXMoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIikpe3ZhciBjaG9pY2VzPXRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCk7dGhpcy5oaWdobGlnaHQoY2hvaWNlcy5pbmRleChlbCkpO31lbHNlIGlmKGVsLmxlbmd0aD09MCl7dGhpcy5yZW1vdmVIaWdobGlnaHQoKTt9fSxsb2FkTW9yZUlmTmVlZGVkOmZ1bmN0aW9uKCl7dmFyIHJlc3VsdHM9dGhpcy5yZXN1bHRzLG1vcmU9cmVzdWx0cy5maW5kKCJsaS5zZWxlY3QyLW1vcmUtcmVzdWx0cyIpLGJlbG93LHBhZ2U9dGhpcy5yZXN1bHRzUGFnZSsxLHNlbGY9dGhpcyx0ZXJtPXRoaXMuc2VhcmNoLnZhbCgpLGNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKG1vcmUubGVuZ3RoPT09MClyZXR1cm47YmVsb3c9bW9yZS5vZmZzZXQoKS50b3AtcmVzdWx0cy5vZmZzZXQoKS50b3AtcmVzdWx0cy5oZWlnaHQoKTtpZihiZWxvdzw9dGhpcy5vcHRzLmxvYWRNb3JlUGFkZGluZyl7bW9yZS5hZGRDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLm9wdHMucXVlcnkoe2VsZW1lbnQ6dGhpcy5vcHRzLmVsZW1lbnQsdGVybTp0ZXJtLHBhZ2U6cGFnZSxjb250ZXh0OmNvbnRleHQsbWF0Y2hlcjp0aGlzLm9wdHMubWF0Y2hlcixjYWxsYmFjazp0aGlzLmJpbmQoZnVuY3Rpb24oZGF0YSl7aWYoIXNlbGYub3BlbmVkKCkpcmV0dXJuO3NlbGYub3B0cy5wb3B1bGF0ZVJlc3VsdHMuY2FsbCh0aGlzLHJlc3VsdHMsZGF0YS5yZXN1bHRzLHt0ZXJtOnRlcm0scGFnZTpwYWdlLGNvbnRleHQ6Y29udGV4dH0pO3NlbGYucG9zdHByb2Nlc3NSZXN1bHRzKGRhdGEsZmFsc2UsZmFsc2UpO2lmKGRhdGEubW9yZT09PXRydWUpe21vcmUuZGV0YWNoKCkuYXBwZW5kVG8ocmVzdWx0cykuaHRtbChzZWxmLm9wdHMuZXNjYXBlTWFya3VwKGV2YWx1YXRlKHNlbGYub3B0cy5mb3JtYXRMb2FkTW9yZSxzZWxmLm9wdHMuZWxlbWVudCxwYWdlKzEpKSk7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmxvYWRNb3JlSWZOZWVkZWQoKTt9LDEwKTt9ZWxzZXttb3JlLnJlbW92ZSgpO30Kc2VsZi5wb3NpdGlvbkRyb3Bkb3duKCk7c2VsZi5yZXN1bHRzUGFnZT1wYWdlO3NlbGYuY29udGV4dD1kYXRhLmNvbnRleHQ7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih7dHlwZToic2VsZWN0Mi1sb2FkZWQiLGl0ZW1zOmRhdGF9KTt9KX0pO319LHRva2VuaXplOmZ1bmN0aW9uKCl7fSx1cGRhdGVSZXN1bHRzOmZ1bmN0aW9uKGluaXRpYWwpe3ZhciBzZWFyY2g9dGhpcy5zZWFyY2gscmVzdWx0cz10aGlzLnJlc3VsdHMsb3B0cz10aGlzLm9wdHMsZGF0YSxzZWxmPXRoaXMsaW5wdXQsdGVybT1zZWFyY2gudmFsKCksbGFzdFRlcm09JC5kYXRhKHRoaXMuY29udGFpbmVyLCJzZWxlY3QyLWxhc3QtdGVybSIpLHF1ZXJ5TnVtYmVyO2lmKGluaXRpYWwhPT10cnVlJiZsYXN0VGVybSYmZXF1YWwodGVybSxsYXN0VGVybSkpcmV0dXJuOyQuZGF0YSh0aGlzLmNvbnRhaW5lciwic2VsZWN0Mi1sYXN0LXRlcm0iLHRlcm0pO2lmKGluaXRpYWwhPT10cnVlJiYodGhpcy5zaG93U2VhcmNoSW5wdXQ9PT1mYWxzZXx8IXRoaXMub3BlbmVkKCkpKXtyZXR1cm47fQpmdW5jdGlvbiBwb3N0UmVuZGVyKCl7c2VhcmNoLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWFjdGl2ZSIpO3NlbGYucG9zaXRpb25Ecm9wZG93bigpO2lmKHJlc3VsdHMuZmluZCgnLnNlbGVjdDItbm8tcmVzdWx0cywuc2VsZWN0Mi1zZWxlY3Rpb24tbGltaXQsLnNlbGVjdDItc2VhcmNoaW5nJykubGVuZ3RoKXtzZWxmLmxpdmVSZWdpb24udGV4dChyZXN1bHRzLnRleHQoKSk7fQplbHNle3NlbGYubGl2ZVJlZ2lvbi50ZXh0KHNlbGYub3B0cy5mb3JtYXRNYXRjaGVzKHJlc3VsdHMuZmluZCgnLnNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGU6bm90KCIuc2VsZWN0Mi1zZWxlY3RlZCIpJykubGVuZ3RoKSk7fX0KZnVuY3Rpb24gcmVuZGVyKGh0bWwpe3Jlc3VsdHMuaHRtbChodG1sKTtwb3N0UmVuZGVyKCk7fQpxdWVyeU51bWJlcj0rK3RoaXMucXVlcnlDb3VudDt2YXIgbWF4U2VsU2l6ZT10aGlzLmdldE1heGltdW1TZWxlY3Rpb25TaXplKCk7aWYobWF4U2VsU2l6ZT49MSl7ZGF0YT10aGlzLmRhdGEoKTtpZigkLmlzQXJyYXkoZGF0YSkmJmRhdGEubGVuZ3RoPj1tYXhTZWxTaXplJiZjaGVja0Zvcm1hdHRlcihvcHRzLmZvcm1hdFNlbGVjdGlvblRvb0JpZywiZm9ybWF0U2VsZWN0aW9uVG9vQmlnIikpe3JlbmRlcigiPGxpIGNsYXNzPSdzZWxlY3QyLXNlbGVjdGlvbi1saW1pdCc+IitldmFsdWF0ZShvcHRzLmZvcm1hdFNlbGVjdGlvblRvb0JpZyxvcHRzLmVsZW1lbnQsbWF4U2VsU2l6ZSkrIjwvbGk+Iik7cmV0dXJuO319CmlmKHNlYXJjaC52YWwoKS5sZW5ndGg8b3B0cy5taW5pbXVtSW5wdXRMZW5ndGgpe2lmKGNoZWNrRm9ybWF0dGVyKG9wdHMuZm9ybWF0SW5wdXRUb29TaG9ydCwiZm9ybWF0SW5wdXRUb29TaG9ydCIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0SW5wdXRUb29TaG9ydCxvcHRzLmVsZW1lbnQsc2VhcmNoLnZhbCgpLG9wdHMubWluaW11bUlucHV0TGVuZ3RoKSsiPC9saT4iKTt9ZWxzZXtyZW5kZXIoIiIpO30KaWYoaW5pdGlhbCYmdGhpcy5zaG93U2VhcmNoKXRoaXMuc2hvd1NlYXJjaCh0cnVlKTtyZXR1cm47fQppZihvcHRzLm1heGltdW1JbnB1dExlbmd0aCYmc2VhcmNoLnZhbCgpLmxlbmd0aD5vcHRzLm1heGltdW1JbnB1dExlbmd0aCl7aWYoY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXRJbnB1dFRvb0xvbmcsImZvcm1hdElucHV0VG9vTG9uZyIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0SW5wdXRUb29Mb25nLG9wdHMuZWxlbWVudCxzZWFyY2gudmFsKCksb3B0cy5tYXhpbXVtSW5wdXRMZW5ndGgpKyI8L2xpPiIpO31lbHNle3JlbmRlcigiIik7fQpyZXR1cm47fQppZihvcHRzLmZvcm1hdFNlYXJjaGluZyYmdGhpcy5maW5kSGlnaGxpZ2h0YWJsZUNob2ljZXMoKS5sZW5ndGg9PT0wKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2hpbmcnPiIrZXZhbHVhdGUob3B0cy5mb3JtYXRTZWFyY2hpbmcsb3B0cy5lbGVtZW50KSsiPC9saT4iKTt9CnNlYXJjaC5hZGRDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLnJlbW92ZUhpZ2hsaWdodCgpO2lucHV0PXRoaXMudG9rZW5pemUoKTtpZihpbnB1dCE9dW5kZWZpbmVkJiZpbnB1dCE9bnVsbCl7c2VhcmNoLnZhbChpbnB1dCk7fQp0aGlzLnJlc3VsdHNQYWdlPTE7b3B0cy5xdWVyeSh7ZWxlbWVudDpvcHRzLmVsZW1lbnQsdGVybTpzZWFyY2gudmFsKCkscGFnZTp0aGlzLnJlc3VsdHNQYWdlLGNvbnRleHQ6bnVsbCxtYXRjaGVyOm9wdHMubWF0Y2hlcixjYWxsYmFjazp0aGlzLmJpbmQoZnVuY3Rpb24oZGF0YSl7dmFyIGRlZjtpZihxdWVyeU51bWJlciE9dGhpcy5xdWVyeUNvdW50KXtyZXR1cm47fQppZighdGhpcy5vcGVuZWQoKSl7dGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWN0aXZlIik7cmV0dXJuO30KaWYoZGF0YS5oYXNFcnJvciE9PXVuZGVmaW5lZCYmY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXRBamF4RXJyb3IsImZvcm1hdEFqYXhFcnJvciIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1hamF4LWVycm9yJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0QWpheEVycm9yLG9wdHMuZWxlbWVudCxkYXRhLmpxWEhSLGRhdGEudGV4dFN0YXR1cyxkYXRhLmVycm9yVGhyb3duKSsiPC9saT4iKTtyZXR1cm47fQp0aGlzLmNvbnRleHQ9KGRhdGEuY29udGV4dD09PXVuZGVmaW5lZCk/bnVsbDpkYXRhLmNvbnRleHQ7aWYodGhpcy5vcHRzLmNyZWF0ZVNlYXJjaENob2ljZSYmc2VhcmNoLnZhbCgpIT09IiIpe2RlZj10aGlzLm9wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlLmNhbGwoc2VsZixzZWFyY2gudmFsKCksZGF0YS5yZXN1bHRzKTtpZihkZWYhPT11bmRlZmluZWQmJmRlZiE9PW51bGwmJnNlbGYuaWQoZGVmKSE9PXVuZGVmaW5lZCYmc2VsZi5pZChkZWYpIT09bnVsbCl7aWYoJChkYXRhLnJlc3VsdHMpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlcXVhbChzZWxmLmlkKHRoaXMpLHNlbGYuaWQoZGVmKSk7fSkubGVuZ3RoPT09MCl7dGhpcy5vcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uKGRhdGEucmVzdWx0cyxkZWYpO319fQppZihkYXRhLnJlc3VsdHMubGVuZ3RoPT09MCYmY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXROb01hdGNoZXMsImZvcm1hdE5vTWF0Y2hlcyIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0Tm9NYXRjaGVzLG9wdHMuZWxlbWVudCxzZWFyY2gudmFsKCkpKyI8L2xpPiIpO2lmKHRoaXMuc2hvd1NlYXJjaCl7dGhpcy5zaG93U2VhcmNoKHNlYXJjaC52YWwoKSk7fQpyZXR1cm47fQpyZXN1bHRzLmVtcHR5KCk7c2VsZi5vcHRzLnBvcHVsYXRlUmVzdWx0cy5jYWxsKHRoaXMscmVzdWx0cyxkYXRhLnJlc3VsdHMse3Rlcm06c2VhcmNoLnZhbCgpLHBhZ2U6dGhpcy5yZXN1bHRzUGFnZSxjb250ZXh0Om51bGx9KTtpZihkYXRhLm1vcmU9PT10cnVlJiZjaGVja0Zvcm1hdHRlcihvcHRzLmZvcm1hdExvYWRNb3JlLCJmb3JtYXRMb2FkTW9yZSIpKXtyZXN1bHRzLmFwcGVuZCgiPGxpIGNsYXNzPSdzZWxlY3QyLW1vcmUtcmVzdWx0cyc+IitvcHRzLmVzY2FwZU1hcmt1cChldmFsdWF0ZShvcHRzLmZvcm1hdExvYWRNb3JlLG9wdHMuZWxlbWVudCx0aGlzLnJlc3VsdHNQYWdlKSkrIjwvbGk+Iik7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmxvYWRNb3JlSWZOZWVkZWQoKTt9LDEwKTt9CnRoaXMucG9zdHByb2Nlc3NSZXN1bHRzKGRhdGEsaW5pdGlhbCk7cG9zdFJlbmRlcigpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItbG9hZGVkIixpdGVtczpkYXRhfSk7fSl9KTt9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKTt9LGJsdXI6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdHMuc2VsZWN0T25CbHVyKQp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTt0aGlzLmNsb3NlKCk7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO2lmKHRoaXMuc2VhcmNoWzBdPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7dGhpcy5zZWFyY2guYmx1cigpO30KdGhpcy5jbGVhclNlYXJjaCgpO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIik7fSxmb2N1c1NlYXJjaDpmdW5jdGlvbigpe2ZvY3VzKHRoaXMuc2VhcmNoKTt9LHNlbGVjdEhpZ2hsaWdodGVkOmZ1bmN0aW9uKG9wdGlvbnMpe2lmKHRoaXMuX3RvdWNoTW92ZWQpe3RoaXMuY2xlYXJUb3VjaE1vdmVkKCk7cmV0dXJuO30KdmFyIGluZGV4PXRoaXMuaGlnaGxpZ2h0KCksaGlnaGxpZ2h0ZWQ9dGhpcy5yZXN1bHRzLmZpbmQoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIiksZGF0YT1oaWdobGlnaHRlZC5jbG9zZXN0KCcuc2VsZWN0Mi1yZXN1bHQnKS5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhKXt0aGlzLmhpZ2hsaWdodChpbmRleCk7dGhpcy5vblNlbGVjdChkYXRhLG9wdGlvbnMpO31lbHNlIGlmKG9wdGlvbnMmJm9wdGlvbnMubm9Gb2N1cyl7dGhpcy5jbG9zZSgpO319LGdldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7dmFyIHBsYWNlaG9sZGVyT3B0aW9uO3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJwbGFjZWhvbGRlciIpfHx0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJkYXRhLXBsYWNlaG9sZGVyIil8fHRoaXMub3B0cy5lbGVtZW50LmRhdGEoInBsYWNlaG9sZGVyIil8fHRoaXMub3B0cy5wbGFjZWhvbGRlcnx8KChwbGFjZWhvbGRlck9wdGlvbj10aGlzLmdldFBsYWNlaG9sZGVyT3B0aW9uKCkpIT09dW5kZWZpbmVkP3BsYWNlaG9sZGVyT3B0aW9uLnRleHQoKTp1bmRlZmluZWQpO30sZ2V0UGxhY2Vob2xkZXJPcHRpb246ZnVuY3Rpb24oKXtpZih0aGlzLnNlbGVjdCl7dmFyIGZpcnN0T3B0aW9uPXRoaXMuc2VsZWN0LmNoaWxkcmVuKCdvcHRpb24nKS5maXJzdCgpO2lmKHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbiE9PXVuZGVmaW5lZCl7cmV0dXJuKHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbj09PSJmaXJzdCImJmZpcnN0T3B0aW9uKXx8KHR5cGVvZiB0aGlzLm9wdHMucGxhY2Vob2xkZXJPcHRpb249PT0iZnVuY3Rpb24iJiZ0aGlzLm9wdHMucGxhY2Vob2xkZXJPcHRpb24odGhpcy5zZWxlY3QpKTt9ZWxzZSBpZigkLnRyaW0oZmlyc3RPcHRpb24udGV4dCgpKT09PSIiJiZmaXJzdE9wdGlvbi52YWwoKT09PSIiKXtyZXR1cm4gZmlyc3RPcHRpb247fX19LGluaXRDb250YWluZXJXaWR0aDpmdW5jdGlvbigpe2Z1bmN0aW9uIHJlc29sdmVDb250YWluZXJXaWR0aCgpe3ZhciBzdHlsZSxhdHRycyxtYXRjaGVzLGksbCxhdHRyO2lmKHRoaXMub3B0cy53aWR0aD09PSJvZmYiKXtyZXR1cm4gbnVsbDt9ZWxzZSBpZih0aGlzLm9wdHMud2lkdGg9PT0iZWxlbWVudCIpe3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC5vdXRlcldpZHRoKGZhbHNlKT09PTA/J2F1dG8nOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoZmFsc2UpKydweCc7fWVsc2UgaWYodGhpcy5vcHRzLndpZHRoPT09ImNvcHkifHx0aGlzLm9wdHMud2lkdGg9PT0icmVzb2x2ZSIpe3N0eWxlPXRoaXMub3B0cy5lbGVtZW50LmF0dHIoJ3N0eWxlJyk7aWYodHlwZW9mKHN0eWxlKT09PSJzdHJpbmciKXthdHRycz1zdHlsZS5zcGxpdCgnOycpO2ZvcihpPTAsbD1hdHRycy5sZW5ndGg7aTxsO2k9aSsxKXthdHRyPWF0dHJzW2ldLnJlcGxhY2UoL1xzL2csJycpO21hdGNoZXM9YXR0ci5tYXRjaCgvXndpZHRoOigoWy0rXT8oWzAtOV0qXC4pP1swLTldKykocHh8ZW18ZXh8JXxpbnxjbXxtbXxwdHxwYykpL2kpO2lmKG1hdGNoZXMhPT1udWxsJiZtYXRjaGVzLmxlbmd0aD49MSkKcmV0dXJuIG1hdGNoZXNbMV07fX0KaWYodGhpcy5vcHRzLndpZHRoPT09InJlc29sdmUiKXtzdHlsZT10aGlzLm9wdHMuZWxlbWVudC5jc3MoJ3dpZHRoJyk7aWYoc3R5bGUuaW5kZXhPZigiJSIpPjApcmV0dXJuIHN0eWxlO3JldHVybih0aGlzLm9wdHMuZWxlbWVudC5vdXRlcldpZHRoKGZhbHNlKT09PTA/J2F1dG8nOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoZmFsc2UpKydweCcpO30KcmV0dXJuIG51bGw7fWVsc2UgaWYoJC5pc0Z1bmN0aW9uKHRoaXMub3B0cy53aWR0aCkpe3JldHVybiB0aGlzLm9wdHMud2lkdGgoKTt9ZWxzZXtyZXR1cm4gdGhpcy5vcHRzLndpZHRoO319O3ZhciB3aWR0aD1yZXNvbHZlQ29udGFpbmVyV2lkdGguY2FsbCh0aGlzKTtpZih3aWR0aCE9PW51bGwpe3RoaXMuY29udGFpbmVyLmNzcygid2lkdGgiLHdpZHRoKTt9fX0pO1NpbmdsZVNlbGVjdDI9Y2xhenooQWJzdHJhY3RTZWxlY3QyLHtjcmVhdGVDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgY29udGFpbmVyPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmF0dHIoeyJjbGFzcyI6InNlbGVjdDItY29udGFpbmVyIn0pLmh0bWwoWyI8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzPSdzZWxlY3QyLWNob2ljZScgdGFiaW5kZXg9Jy0xJz4iLCIgICA8c3BhbiBjbGFzcz0nc2VsZWN0Mi1jaG9zZW4nPiYjMTYwOzwvc3Bhbj48YWJiciBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWNsb3NlJz48L2FiYnI+IiwiICAgPHNwYW4gY2xhc3M9J3NlbGVjdDItYXJyb3cnIHJvbGU9J3ByZXNlbnRhdGlvbic+PGIgcm9sZT0ncHJlc2VudGF0aW9uJz48L2I+PC9zcGFuPiIsIjwvYT4iLCI8bGFiZWwgZm9yPScnIGNsYXNzPSdzZWxlY3QyLW9mZnNjcmVlbic+PC9sYWJlbD4iLCI8aW5wdXQgY2xhc3M9J3NlbGVjdDItZm9jdXNzZXIgc2VsZWN0Mi1vZmZzY3JlZW4nIHR5cGU9J3RleHQnIGFyaWEtaGFzcG9wdXA9J3RydWUnIHJvbGU9J2J1dHRvbicgLz4iLCI8ZGl2IGNsYXNzPSdzZWxlY3QyLWRyb3Agc2VsZWN0Mi1kaXNwbGF5LW5vbmUnPiIsIiAgIDxkaXYgY2xhc3M9J3NlbGVjdDItc2VhcmNoJz4iLCIgICAgICAgPGxhYmVsIGZvcj0nJyBjbGFzcz0nc2VsZWN0Mi1vZmZzY3JlZW4nPjwvbGFiZWw+IiwiICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyBhdXRvY29tcGxldGU9J29mZicgYXV0b2NvcnJlY3Q9J29mZicgYXV0b2NhcGl0YWxpemU9J29mZicgc3BlbGxjaGVjaz0nZmFsc2UnIGNsYXNzPSdzZWxlY3QyLWlucHV0JyByb2xlPSdjb21ib2JveCcgYXJpYS1leHBhbmRlZD0ndHJ1ZSciLCIgICAgICAgYXJpYS1hdXRvY29tcGxldGU9J2xpc3QnIC8+IiwiICAgPC9kaXY+IiwiICAgPHVsIGNsYXNzPSdzZWxlY3QyLXJlc3VsdHMnIHJvbGU9J2xpc3Rib3gnPiIsIiAgIDwvdWw+IiwiPC9kaXY+Il0uam9pbigiIikpO3JldHVybiBjb250YWluZXI7fSxlbmFibGVJbnRlcmZhY2U6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudC5lbmFibGVJbnRlcmZhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIiwhdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSk7fX0sb3BlbmluZzpmdW5jdGlvbigpe3ZhciBlbCxyYW5nZSxsZW47aWYodGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPj0wKXt0aGlzLnNob3dTZWFyY2godHJ1ZSk7fQp0aGlzLnBhcmVudC5vcGVuaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLnNob3dTZWFyY2hJbnB1dCE9PWZhbHNlKXt0aGlzLnNlYXJjaC52YWwodGhpcy5mb2N1c3Nlci52YWwoKSk7fQppZih0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSl7dGhpcy5zZWFyY2guZm9jdXMoKTtlbD10aGlzLnNlYXJjaC5nZXQoMCk7aWYoZWwuY3JlYXRlVGV4dFJhbmdlKXtyYW5nZT1lbC5jcmVhdGVUZXh0UmFuZ2UoKTtyYW5nZS5jb2xsYXBzZShmYWxzZSk7cmFuZ2Uuc2VsZWN0KCk7fWVsc2UgaWYoZWwuc2V0U2VsZWN0aW9uUmFuZ2Upe2xlbj10aGlzLnNlYXJjaC52YWwoKS5sZW5ndGg7ZWwuc2V0U2VsZWN0aW9uUmFuZ2UobGVuLGxlbik7fX0KdGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKTt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIix0cnVlKS52YWwoIiIpO3RoaXMudXBkYXRlUmVzdWx0cyh0cnVlKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItb3BlbiIpKTt9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3BlbmVkKCkpcmV0dXJuO3RoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIixmYWxzZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9fSxmb2N1czpmdW5jdGlvbigpe2lmKHRoaXMub3BlbmVkKCkpe3RoaXMuY2xvc2UoKTt9ZWxzZXt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIixmYWxzZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9fX0saXNGb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKTt9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMucGFyZW50LmNhbmNlbC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5mb2N1c3Nlci5wcm9wKCJkaXNhYmxlZCIsZmFsc2UpO2lmKHRoaXMub3B0cy5zaG91bGRGb2N1c0lucHV0KHRoaXMpKXt0aGlzLmZvY3Vzc2VyLmZvY3VzKCk7fX0sZGVzdHJveTpmdW5jdGlvbigpeyQoImxhYmVsW2Zvcj0nIit0aGlzLmZvY3Vzc2VyLmF0dHIoJ2lkJykrIiddIikuYXR0cignZm9yJyx0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJpZCIpKTt0aGlzLnBhcmVudC5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjbGVhbnVwSlF1ZXJ5RWxlbWVudHMuY2FsbCh0aGlzLCJzZWxlY3Rpb24iLCJmb2N1c3NlciIpO30saW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBzZWxlY3Rpb24sY29udGFpbmVyPXRoaXMuY29udGFpbmVyLGRyb3Bkb3duPXRoaXMuZHJvcGRvd24saWRTdWZmaXg9bmV4dFVpZCgpLGVsZW1lbnRMYWJlbDtpZih0aGlzLm9wdHMubWluaW11bVJlc3VsdHNGb3JTZWFyY2g8MCl7dGhpcy5zaG93U2VhcmNoKGZhbHNlKTt9ZWxzZXt0aGlzLnNob3dTZWFyY2godHJ1ZSk7fQp0aGlzLnNlbGVjdGlvbj1zZWxlY3Rpb249Y29udGFpbmVyLmZpbmQoIi5zZWxlY3QyLWNob2ljZSIpO3RoaXMuZm9jdXNzZXI9Y29udGFpbmVyLmZpbmQoIi5zZWxlY3QyLWZvY3Vzc2VyIik7c2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLWNob3NlbiIpLmF0dHIoImlkIiwic2VsZWN0Mi1jaG9zZW4tIitpZFN1ZmZpeCk7dGhpcy5mb2N1c3Nlci5hdHRyKCJhcmlhLWxhYmVsbGVkYnkiLCJzZWxlY3QyLWNob3Nlbi0iK2lkU3VmZml4KTt0aGlzLnJlc3VsdHMuYXR0cigiaWQiLCJzZWxlY3QyLXJlc3VsdHMtIitpZFN1ZmZpeCk7dGhpcy5zZWFyY2guYXR0cigiYXJpYS1vd25zIiwic2VsZWN0Mi1yZXN1bHRzLSIraWRTdWZmaXgpO3RoaXMuZm9jdXNzZXIuYXR0cigiaWQiLCJzMmlkX2F1dG9nZW4iK2lkU3VmZml4KTtlbGVtZW50TGFiZWw9JCgibGFiZWxbZm9yPSciK3RoaXMub3B0cy5lbGVtZW50LmF0dHIoImlkIikrIiddIik7dGhpcy5vcHRzLmVsZW1lbnQub24oJ2ZvY3VzLnNlbGVjdDInLHRoaXMuYmluZChmdW5jdGlvbigpe3RoaXMuZm9jdXMoKTt9KSk7dGhpcy5mb2N1c3Nlci5wcmV2KCkudGV4dChlbGVtZW50TGFiZWwudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuZm9jdXNzZXIuYXR0cignaWQnKSk7dmFyIG9yaWdpbmFsVGl0bGU9dGhpcy5vcHRzLmVsZW1lbnQuYXR0cigidGl0bGUiKTt0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJ0aXRsZSIsKG9yaWdpbmFsVGl0bGV8fGVsZW1lbnRMYWJlbC50ZXh0KCkpKTt0aGlzLmZvY3Vzc2VyLmF0dHIoInRhYmluZGV4Iix0aGlzLmVsZW1lbnRUYWJJbmRleCk7dGhpcy5zZWFyY2guYXR0cigiaWQiLHRoaXMuZm9jdXNzZXIuYXR0cignaWQnKSsnX3NlYXJjaCcpO3RoaXMuc2VhcmNoLnByZXYoKS50ZXh0KCQoImxhYmVsW2Zvcj0nIit0aGlzLmZvY3Vzc2VyLmF0dHIoJ2lkJykrIiddIikudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuc2VhcmNoLmF0dHIoJ2lkJykpO3RoaXMuc2VhcmNoLm9uKCJrZXlkb3duIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpcmV0dXJuO2lmKDIyOT09ZS5rZXlDb2RlKXJldHVybjtpZihlLndoaWNoPT09S0VZLlBBR0VfVVB8fGUud2hpY2g9PT1LRVkuUEFHRV9ET1dOKXtraWxsRXZlbnQoZSk7cmV0dXJuO30Kc3dpdGNoKGUud2hpY2gpe2Nhc2UgS0VZLlVQOmNhc2UgS0VZLkRPV046dGhpcy5tb3ZlSGlnaGxpZ2h0KChlLndoaWNoPT09S0VZLlVQKT8tMToxKTtraWxsRXZlbnQoZSk7cmV0dXJuO2Nhc2UgS0VZLkVOVEVSOnRoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoKTtraWxsRXZlbnQoZSk7cmV0dXJuO2Nhc2UgS0VZLlRBQjp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTtyZXR1cm47Y2FzZSBLRVkuRVNDOnRoaXMuY2FuY2VsKGUpO2tpbGxFdmVudChlKTtyZXR1cm47fX0pKTt0aGlzLnNlYXJjaC5vbigiYmx1ciIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT10aGlzLmJvZHkuZ2V0KDApKXt3aW5kb3cuc2V0VGltZW91dCh0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLm9wZW5lZCgpJiZ0aGlzLnJlc3VsdHMmJnRoaXMucmVzdWx0cy5sZW5ndGg+MSl7dGhpcy5zZWFyY2guZm9jdXMoKTt9fSksMCk7fX0pKTt0aGlzLmZvY3Vzc2VyLm9uKCJrZXlkb3duIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpcmV0dXJuO2lmKGUud2hpY2g9PT1LRVkuVEFCfHxLRVkuaXNDb250cm9sKGUpfHxLRVkuaXNGdW5jdGlvbktleShlKXx8ZS53aGljaD09PUtFWS5FU0Mpe3JldHVybjt9CmlmKHRoaXMub3B0cy5vcGVuT25FbnRlcj09PWZhbHNlJiZlLndoaWNoPT09S0VZLkVOVEVSKXtraWxsRXZlbnQoZSk7cmV0dXJuO30KaWYoZS53aGljaD09S0VZLkRPV058fGUud2hpY2g9PUtFWS5VUHx8KGUud2hpY2g9PUtFWS5FTlRFUiYmdGhpcy5vcHRzLm9wZW5PbkVudGVyKSl7aWYoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5zaGlmdEtleXx8ZS5tZXRhS2V5KXJldHVybjt0aGlzLm9wZW4oKTtraWxsRXZlbnQoZSk7cmV0dXJuO30KaWYoZS53aGljaD09S0VZLkRFTEVURXx8ZS53aGljaD09S0VZLkJBQ0tTUEFDRSl7aWYodGhpcy5vcHRzLmFsbG93Q2xlYXIpe3RoaXMuY2xlYXIoKTt9CmtpbGxFdmVudChlKTtyZXR1cm47fX0pKTtpbnN0YWxsS2V5VXBDaGFuZ2VFdmVudCh0aGlzLmZvY3Vzc2VyKTt0aGlzLmZvY3Vzc2VyLm9uKCJrZXl1cC1jaGFuZ2UgaW5wdXQiLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZih0aGlzLm9wdHMubWluaW11bVJlc3VsdHNGb3JTZWFyY2g+PTApe2Uuc3RvcFByb3BhZ2F0aW9uKCk7aWYodGhpcy5vcGVuZWQoKSlyZXR1cm47dGhpcy5vcGVuKCk7fX0pKTtzZWxlY3Rpb24ub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IiwiYWJiciIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXtyZXR1cm47fQp0aGlzLmNsZWFyKCk7a2lsbEV2ZW50SW1tZWRpYXRlbHkoZSk7dGhpcy5jbG9zZSgpO2lmKHRoaXMuc2VsZWN0aW9uKXt0aGlzLnNlbGVjdGlvbi5mb2N1cygpO319KSk7c2VsZWN0aW9uLm9uKCJtb3VzZWRvd24gdG91Y2hzdGFydCIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe3JlaW5zZXJ0RWxlbWVudChzZWxlY3Rpb24pO2lmKCF0aGlzLmNvbnRhaW5lci5oYXNDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIikpe3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1mb2N1cyIpKTt9CmlmKHRoaXMub3BlbmVkKCkpe3RoaXMuY2xvc2UoKTt9ZWxzZSBpZih0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXt0aGlzLm9wZW4oKTt9CmtpbGxFdmVudChlKTt9KSk7ZHJvcGRvd24ub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0Iix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSl7dGhpcy5zZWFyY2guZm9jdXMoKTt9fSkpO3NlbGVjdGlvbi5vbigiZm9jdXMiLHRoaXMuYmluZChmdW5jdGlvbihlKXtraWxsRXZlbnQoZSk7fSkpO3RoaXMuZm9jdXNzZXIub24oImZvY3VzIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7fSkpLm9uKCJibHVyIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5vcGVuZWQoKSl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1ibHVyIikpO319KSk7dGhpcy5zZWFyY2gub24oImZvY3VzIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7fSkpO3RoaXMuaW5pdENvbnRhaW5lcldpZHRoKCk7dGhpcy5vcHRzLmVsZW1lbnQuaGlkZSgpO3RoaXMuc2V0UGxhY2Vob2xkZXIoKTt9LGNsZWFyOmZ1bmN0aW9uKHRyaWdnZXJDaGFuZ2Upe3ZhciBkYXRhPXRoaXMuc2VsZWN0aW9uLmRhdGEoInNlbGVjdDItZGF0YSIpO2lmKGRhdGEpe3ZhciBldnQ9JC5FdmVudCgic2VsZWN0Mi1jbGVhcmluZyIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoZXZ0KTtpZihldnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CnZhciBwbGFjZWhvbGRlck9wdGlvbj10aGlzLmdldFBsYWNlaG9sZGVyT3B0aW9uKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKHBsYWNlaG9sZGVyT3B0aW9uP3BsYWNlaG9sZGVyT3B0aW9uLnZhbCgpOiIiKTt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKS5lbXB0eSgpO3RoaXMuc2VsZWN0aW9uLnJlbW92ZURhdGEoInNlbGVjdDItZGF0YSIpO3RoaXMuc2V0UGxhY2Vob2xkZXIoKTtpZih0cmlnZ2VyQ2hhbmdlIT09ZmFsc2Upe3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItcmVtb3ZlZCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt0aGlzLnRyaWdnZXJDaGFuZ2Uoe3JlbW92ZWQ6ZGF0YX0pO319fSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHNlbGVjdGVkO2lmKHRoaXMuaXNQbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKCkpe3RoaXMudXBkYXRlU2VsZWN0aW9uKG51bGwpO3RoaXMuY2xvc2UoKTt0aGlzLnNldFBsYWNlaG9sZGVyKCk7fWVsc2V7dmFyIHNlbGY9dGhpczt0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsdGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oc2VsZWN0ZWQpe2lmKHNlbGVjdGVkIT09dW5kZWZpbmVkJiZzZWxlY3RlZCE9PW51bGwpe3NlbGYudXBkYXRlU2VsZWN0aW9uKHNlbGVjdGVkKTtzZWxmLmNsb3NlKCk7c2VsZi5zZXRQbGFjZWhvbGRlcigpO3NlbGYubGFzdFNlYXJjaFRlcm09c2VsZi5zZWFyY2gudmFsKCk7fX0pO319LGlzUGxhY2Vob2xkZXJPcHRpb25TZWxlY3RlZDpmdW5jdGlvbigpe3ZhciBwbGFjZWhvbGRlck9wdGlvbjtpZih0aGlzLmdldFBsYWNlaG9sZGVyKCk9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO3JldHVybigocGxhY2Vob2xkZXJPcHRpb249dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpKSE9PXVuZGVmaW5lZCYmcGxhY2Vob2xkZXJPcHRpb24ucHJvcCgic2VsZWN0ZWQiKSl8fCh0aGlzLm9wdHMuZWxlbWVudC52YWwoKT09PSIiKXx8KHRoaXMub3B0cy5lbGVtZW50LnZhbCgpPT09dW5kZWZpbmVkKXx8KHRoaXMub3B0cy5lbGVtZW50LnZhbCgpPT09bnVsbCk7fSxwcmVwYXJlT3B0czpmdW5jdGlvbigpe3ZhciBvcHRzPXRoaXMucGFyZW50LnByZXBhcmVPcHRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxzZWxmPXRoaXM7aWYob3B0cy5lbGVtZW50LmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0Iil7b3B0cy5pbml0U2VsZWN0aW9uPWZ1bmN0aW9uKGVsZW1lbnQsY2FsbGJhY2spe3ZhciBzZWxlY3RlZD1lbGVtZW50LmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkJiYhdGhpcy5kaXNhYmxlZH0pO2NhbGxiYWNrKHNlbGYub3B0aW9uVG9EYXRhKHNlbGVjdGVkKSk7fTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLmluaXRTZWxlY3Rpb249b3B0cy5pbml0U2VsZWN0aW9ufHxmdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgaWQ9ZWxlbWVudC52YWwoKTt2YXIgbWF0Y2g9bnVsbDtvcHRzLnF1ZXJ5KHttYXRjaGVyOmZ1bmN0aW9uKHRlcm0sdGV4dCxlbCl7dmFyIGlzX21hdGNoPWVxdWFsKGlkLG9wdHMuaWQoZWwpKTtpZihpc19tYXRjaCl7bWF0Y2g9ZWw7fQpyZXR1cm4gaXNfbWF0Y2g7fSxjYWxsYmFjazohJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKT8kLm5vb3A6ZnVuY3Rpb24oKXtjYWxsYmFjayhtYXRjaCk7fX0pO307fQpyZXR1cm4gb3B0czt9LGdldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5zZWxlY3Qpe2lmKHRoaXMuZ2V0UGxhY2Vob2xkZXJPcHRpb24oKT09PXVuZGVmaW5lZCl7cmV0dXJuIHVuZGVmaW5lZDt9fQpyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0UGxhY2Vob2xkZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sc2V0UGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXt2YXIgcGxhY2Vob2xkZXI9dGhpcy5nZXRQbGFjZWhvbGRlcigpO2lmKHRoaXMuaXNQbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKCkmJnBsYWNlaG9sZGVyIT09dW5kZWZpbmVkKXtpZih0aGlzLnNlbGVjdCYmdGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpPT09dW5kZWZpbmVkKXJldHVybjt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKS5odG1sKHRoaXMub3B0cy5lc2NhcGVNYXJrdXAocGxhY2Vob2xkZXIpKTt0aGlzLnNlbGVjdGlvbi5hZGRDbGFzcygic2VsZWN0Mi1kZWZhdWx0Iik7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWxsb3djbGVhciIpO319LHBvc3Rwcm9jZXNzUmVzdWx0czpmdW5jdGlvbihkYXRhLGluaXRpYWwsbm9IaWdobGlnaHRVcGRhdGUpe3ZhciBzZWxlY3RlZD0wLHNlbGY9dGhpcyxzaG93U2VhcmNoSW5wdXQ9dHJ1ZTt0aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtpZihlcXVhbChzZWxmLmlkKGVsbS5kYXRhKCJzZWxlY3QyLWRhdGEiKSksc2VsZi5vcHRzLmVsZW1lbnQudmFsKCkpKXtzZWxlY3RlZD1pO3JldHVybiBmYWxzZTt9fSk7aWYobm9IaWdobGlnaHRVcGRhdGUhPT1mYWxzZSl7aWYoaW5pdGlhbD09PXRydWUmJnNlbGVjdGVkPj0wKXt0aGlzLmhpZ2hsaWdodChzZWxlY3RlZCk7fWVsc2V7dGhpcy5oaWdobGlnaHQoMCk7fX0KaWYoaW5pdGlhbD09PXRydWUpe3ZhciBtaW49dGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoO2lmKG1pbj49MCl7dGhpcy5zaG93U2VhcmNoKGNvdW50UmVzdWx0cyhkYXRhLnJlc3VsdHMpPj1taW4pO319fSxzaG93U2VhcmNoOmZ1bmN0aW9uKHNob3dTZWFyY2hJbnB1dCl7aWYodGhpcy5zaG93U2VhcmNoSW5wdXQ9PT1zaG93U2VhcmNoSW5wdXQpcmV0dXJuO3RoaXMuc2hvd1NlYXJjaElucHV0PXNob3dTZWFyY2hJbnB1dDt0aGlzLmRyb3Bkb3duLmZpbmQoIi5zZWxlY3QyLXNlYXJjaCIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1oaWRkZW4iLCFzaG93U2VhcmNoSW5wdXQpO3RoaXMuZHJvcGRvd24uZmluZCgiLnNlbGVjdDItc2VhcmNoIikudG9nZ2xlQ2xhc3MoInNlbGVjdDItb2Zmc2NyZWVuIiwhc2hvd1NlYXJjaElucHV0KTskKHRoaXMuZHJvcGRvd24sdGhpcy5jb250YWluZXIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLXdpdGgtc2VhcmNoYm94IixzaG93U2VhcmNoSW5wdXQpO30sb25TZWxlY3Q6ZnVuY3Rpb24oZGF0YSxvcHRpb25zKXtpZighdGhpcy50cmlnZ2VyU2VsZWN0KGRhdGEpKXtyZXR1cm47fQp2YXIgb2xkPXRoaXMub3B0cy5lbGVtZW50LnZhbCgpLG9sZERhdGE9dGhpcy5kYXRhKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKHRoaXMuaWQoZGF0YSkpO3RoaXMudXBkYXRlU2VsZWN0aW9uKGRhdGEpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItc2VsZWN0ZWQiLHZhbDp0aGlzLmlkKGRhdGEpLGNob2ljZTpkYXRhfSk7dGhpcy5sYXN0U2VhcmNoVGVybT10aGlzLnNlYXJjaC52YWwoKTt0aGlzLmNsb3NlKCk7aWYoKCFvcHRpb25zfHwhb3B0aW9ucy5ub0ZvY3VzKSYmdGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9CmlmKCFlcXVhbChvbGQsdGhpcy5pZChkYXRhKSkpe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6ZGF0YSxyZW1vdmVkOm9sZERhdGF9KTt9fSx1cGRhdGVTZWxlY3Rpb246ZnVuY3Rpb24oZGF0YSl7dmFyIGNvbnRhaW5lcj10aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKSxmb3JtYXR0ZWQsY3NzQ2xhc3M7dGhpcy5zZWxlY3Rpb24uZGF0YSgic2VsZWN0Mi1kYXRhIixkYXRhKTtjb250YWluZXIuZW1wdHkoKTtpZihkYXRhIT09bnVsbCl7Zm9ybWF0dGVkPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb24oZGF0YSxjb250YWluZXIsdGhpcy5vcHRzLmVzY2FwZU1hcmt1cCk7fQppZihmb3JtYXR0ZWQhPT11bmRlZmluZWQpe2NvbnRhaW5lci5hcHBlbmQoZm9ybWF0dGVkKTt9CmNzc0NsYXNzPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb25Dc3NDbGFzcyhkYXRhLGNvbnRhaW5lcik7aWYoY3NzQ2xhc3MhPT11bmRlZmluZWQpe2NvbnRhaW5lci5hZGRDbGFzcyhjc3NDbGFzcyk7fQp0aGlzLnNlbGVjdGlvbi5yZW1vdmVDbGFzcygic2VsZWN0Mi1kZWZhdWx0Iik7aWYodGhpcy5vcHRzLmFsbG93Q2xlYXImJnRoaXMuZ2V0UGxhY2Vob2xkZXIoKSE9PXVuZGVmaW5lZCl7dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoInNlbGVjdDItYWxsb3djbGVhciIpO319LHZhbDpmdW5jdGlvbigpe3ZhciB2YWwsdHJpZ2dlckNoYW5nZT1mYWxzZSxkYXRhPW51bGwsc2VsZj10aGlzLG9sZERhdGE9dGhpcy5kYXRhKCk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC52YWwoKTt9CnZhbD1hcmd1bWVudHNbMF07aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt0cmlnZ2VyQ2hhbmdlPWFyZ3VtZW50c1sxXTtpZih0aGlzLm9wdHMuZGVidWcmJmNvbnNvbGUmJmNvbnNvbGUud2Fybil7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgc2Vjb25kIG9wdGlvbiB0byBgc2VsZWN0MigidmFsIilgIGlzIG5vdCBzdXBwb3J0ZWQgaW4gU2VsZWN0MiA0LjAuMC4gJysnVGhlIGBjaGFuZ2VgIGV2ZW50IHdpbGwgYWx3YXlzIGJlIHRyaWdnZXJlZCBpbiA0LjAuMC4nKTt9fQppZih0aGlzLnNlbGVjdCl7aWYodGhpcy5vcHRzLmRlYnVnJiZjb25zb2xlJiZjb25zb2xlLndhcm4pe2NvbnNvbGUud2FybignU2VsZWN0MjogU2V0dGluZyB0aGUgdmFsdWUgb24gYSA8c2VsZWN0PiB1c2luZyBgc2VsZWN0MigidmFsIilgIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgaW4gNC4wLjAuICcrJ1lvdSBjYW4gdXNlIHRoZSBgLnZhbChuZXdWYWx1ZSkudHJpZ2dlcigiY2hhbmdlIilgIG1ldGhvZCBwcm92aWRlZCBieSBqUXVlcnkgaW5zdGVhZC4nKTt9CnRoaXMuc2VsZWN0LnZhbCh2YWwpLmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkfSkuZWFjaDIoZnVuY3Rpb24oaSxlbG0pe2RhdGE9c2VsZi5vcHRpb25Ub0RhdGEoZWxtKTtyZXR1cm4gZmFsc2U7fSk7dGhpcy51cGRhdGVTZWxlY3Rpb24oZGF0YSk7dGhpcy5zZXRQbGFjZWhvbGRlcigpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6ZGF0YSxyZW1vdmVkOm9sZERhdGF9KTt9fWVsc2V7aWYoIXZhbCYmdmFsIT09MCl7dGhpcy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtyZXR1cm47fQppZih0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbj09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgY2FsbCB2YWwoKSBpZiBpbml0U2VsZWN0aW9uKCkgaXMgbm90IGRlZmluZWQiKTt9CnRoaXMub3B0cy5lbGVtZW50LnZhbCh2YWwpO3RoaXMub3B0cy5pbml0U2VsZWN0aW9uKHRoaXMub3B0cy5lbGVtZW50LGZ1bmN0aW9uKGRhdGEpe3NlbGYub3B0cy5lbGVtZW50LnZhbCghZGF0YT8iIjpzZWxmLmlkKGRhdGEpKTtzZWxmLnVwZGF0ZVNlbGVjdGlvbihkYXRhKTtzZWxmLnNldFBsYWNlaG9sZGVyKCk7aWYodHJpZ2dlckNoYW5nZSl7c2VsZi50cmlnZ2VyQ2hhbmdlKHthZGRlZDpkYXRhLHJlbW92ZWQ6b2xkRGF0YX0pO319KTt9fSxjbGVhclNlYXJjaDpmdW5jdGlvbigpe3RoaXMuc2VhcmNoLnZhbCgiIik7dGhpcy5mb2N1c3Nlci52YWwoIiIpO30sZGF0YTpmdW5jdGlvbih2YWx1ZSl7dmFyIGRhdGEsdHJpZ2dlckNoYW5nZT1mYWxzZTtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7ZGF0YT10aGlzLnNlbGVjdGlvbi5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhPT11bmRlZmluZWQpZGF0YT1udWxsO3JldHVybiBkYXRhO31lbHNle2lmKHRoaXMub3B0cy5kZWJ1ZyYmY29uc29sZSYmY29uc29sZS53YXJuKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MigiZGF0YSIpYCBtZXRob2QgY2FuIG5vIGxvbmdlciBzZXQgc2VsZWN0ZWQgdmFsdWVzIGluIDQuMC4wLCAnKydjb25zaWRlciB1c2luZyB0aGUgYC52YWwoKWAgbWV0aG9kIGluc3RlYWQuJyk7fQppZihhcmd1bWVudHMubGVuZ3RoPjEpe3RyaWdnZXJDaGFuZ2U9YXJndW1lbnRzWzFdO30KaWYoIXZhbHVlKXt0aGlzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO31lbHNle2RhdGE9dGhpcy5kYXRhKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKCF2YWx1ZT8iIjp0aGlzLmlkKHZhbHVlKSk7dGhpcy51cGRhdGVTZWxlY3Rpb24odmFsdWUpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6dmFsdWUscmVtb3ZlZDpkYXRhfSk7fX19fX0pO011bHRpU2VsZWN0Mj1jbGF6eihBYnN0cmFjdFNlbGVjdDIse2NyZWF0ZUNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBjb250YWluZXI9JChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuYXR0cih7ImNsYXNzIjoic2VsZWN0Mi1jb250YWluZXIgc2VsZWN0Mi1jb250YWluZXItbXVsdGkifSkuaHRtbChbIjx1bCBjbGFzcz0nc2VsZWN0Mi1jaG9pY2VzJz4iLCIgIDxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtZmllbGQnPiIsIiAgICA8bGFiZWwgZm9yPScnIGNsYXNzPSdzZWxlY3QyLW9mZnNjcmVlbic+PC9sYWJlbD4iLCIgICAgPGlucHV0IHR5cGU9J3RleHQnIGF1dG9jb21wbGV0ZT0nb2ZmJyBhdXRvY29ycmVjdD0nb2ZmJyBhdXRvY2FwaXRhbGl6ZT0nb2ZmJyBzcGVsbGNoZWNrPSdmYWxzZScgY2xhc3M9J3NlbGVjdDItaW5wdXQnPiIsIiAgPC9saT4iLCI8L3VsPiIsIjxkaXYgY2xhc3M9J3NlbGVjdDItZHJvcCBzZWxlY3QyLWRyb3AtbXVsdGkgc2VsZWN0Mi1kaXNwbGF5LW5vbmUnPiIsIiAgIDx1bCBjbGFzcz0nc2VsZWN0Mi1yZXN1bHRzJz4iLCIgICA8L3VsPiIsIjwvZGl2PiJdLmpvaW4oIiIpKTtyZXR1cm4gY29udGFpbmVyO30scHJlcGFyZU9wdHM6ZnVuY3Rpb24oKXt2YXIgb3B0cz10aGlzLnBhcmVudC5wcmVwYXJlT3B0cy5hcHBseSh0aGlzLGFyZ3VtZW50cyksc2VsZj10aGlzO2lmKG9wdHMuZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe29wdHMuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgZGF0YT1bXTtlbGVtZW50LmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkJiYhdGhpcy5kaXNhYmxlZH0pLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtkYXRhLnB1c2goc2VsZi5vcHRpb25Ub0RhdGEoZWxtKSk7fSk7Y2FsbGJhY2soZGF0YSk7fTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLmluaXRTZWxlY3Rpb249b3B0cy5pbml0U2VsZWN0aW9ufHxmdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgaWRzPXNwbGl0VmFsKGVsZW1lbnQudmFsKCksb3B0cy5zZXBhcmF0b3Isb3B0cy50cmFuc2Zvcm1WYWwpO3ZhciBtYXRjaGVzPVtdO29wdHMucXVlcnkoe21hdGNoZXI6ZnVuY3Rpb24odGVybSx0ZXh0LGVsKXt2YXIgaXNfbWF0Y2g9JC5ncmVwKGlkcyxmdW5jdGlvbihpZCl7cmV0dXJuIGVxdWFsKGlkLG9wdHMuaWQoZWwpKTt9KS5sZW5ndGg7aWYoaXNfbWF0Y2gpe21hdGNoZXMucHVzaChlbCk7fQpyZXR1cm4gaXNfbWF0Y2g7fSxjYWxsYmFjazohJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKT8kLm5vb3A6ZnVuY3Rpb24oKXt2YXIgb3JkZXJlZD1bXTtmb3IodmFyIGk9MDtpPGlkcy5sZW5ndGg7aSsrKXt2YXIgaWQ9aWRzW2ldO2Zvcih2YXIgaj0wO2o8bWF0Y2hlcy5sZW5ndGg7aisrKXt2YXIgbWF0Y2g9bWF0Y2hlc1tqXTtpZihlcXVhbChpZCxvcHRzLmlkKG1hdGNoKSkpe29yZGVyZWQucHVzaChtYXRjaCk7bWF0Y2hlcy5zcGxpY2UoaiwxKTticmVhazt9fX0KY2FsbGJhY2sob3JkZXJlZCk7fX0pO307fQpyZXR1cm4gb3B0czt9LHNlbGVjdENob2ljZTpmdW5jdGlvbihjaG9pY2Upe3ZhciBzZWxlY3RlZD10aGlzLmNvbnRhaW5lci5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIik7aWYoc2VsZWN0ZWQubGVuZ3RoJiZjaG9pY2UmJmNob2ljZVswXT09c2VsZWN0ZWRbMF0pe31lbHNle2lmKHNlbGVjdGVkLmxlbmd0aCl7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcigiY2hvaWNlLWRlc2VsZWN0ZWQiLHNlbGVjdGVkKTt9CnNlbGVjdGVkLnJlbW92ZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKTtpZihjaG9pY2UmJmNob2ljZS5sZW5ndGgpe3RoaXMuY2xvc2UoKTtjaG9pY2UuYWRkQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoImNob2ljZS1zZWxlY3RlZCIsY2hvaWNlKTt9fX0sZGVzdHJveTpmdW5jdGlvbigpeyQoImxhYmVsW2Zvcj0nIit0aGlzLnNlYXJjaC5hdHRyKCdpZCcpKyInXSIpLmF0dHIoJ2ZvcicsdGhpcy5vcHRzLmVsZW1lbnQuYXR0cigiaWQiKSk7dGhpcy5wYXJlbnQuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Y2xlYW51cEpRdWVyeUVsZW1lbnRzLmNhbGwodGhpcywic2VhcmNoQ29udGFpbmVyIiwic2VsZWN0aW9uIik7fSxpbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIHNlbGVjdG9yPSIuc2VsZWN0Mi1jaG9pY2VzIixzZWxlY3Rpb247dGhpcy5zZWFyY2hDb250YWluZXI9dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItc2VhcmNoLWZpZWxkIik7dGhpcy5zZWxlY3Rpb249c2VsZWN0aW9uPXRoaXMuY29udGFpbmVyLmZpbmQoc2VsZWN0b3IpO3ZhciBfdGhpcz10aGlzO3RoaXMuc2VsZWN0aW9uLm9uKCJjbGljayIsIi5zZWxlY3QyLWNvbnRhaW5lcjpub3QoLnNlbGVjdDItY29udGFpbmVyLWRpc2FibGVkKSAuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlOm5vdCguc2VsZWN0Mi1sb2NrZWQpIixmdW5jdGlvbihlKXtfdGhpcy5zZWFyY2hbMF0uZm9jdXMoKTtfdGhpcy5zZWxlY3RDaG9pY2UoJCh0aGlzKSk7fSk7dGhpcy5zZWFyY2guYXR0cigiaWQiLCJzMmlkX2F1dG9nZW4iK25leHRVaWQoKSk7dGhpcy5zZWFyY2gucHJldigpLnRleHQoJCgibGFiZWxbZm9yPSciK3RoaXMub3B0cy5lbGVtZW50LmF0dHIoImlkIikrIiddIikudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuc2VhcmNoLmF0dHIoJ2lkJykpO3RoaXMub3B0cy5lbGVtZW50Lm9uKCdmb2N1cy5zZWxlY3QyJyx0aGlzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCk7fSkpO3RoaXMuc2VhcmNoLm9uKCJpbnB1dCBwYXN0ZSIsdGhpcy5iaW5kKGZ1bmN0aW9uKCl7aWYodGhpcy5zZWFyY2guYXR0cigncGxhY2Vob2xkZXInKSYmdGhpcy5zZWFyY2gudmFsKCkubGVuZ3RoPT0wKXJldHVybjtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47aWYoIXRoaXMub3BlbmVkKCkpe3RoaXMub3BlbigpO319KSk7dGhpcy5zZWFyY2guYXR0cigidGFiaW5kZXgiLHRoaXMuZWxlbWVudFRhYkluZGV4KTt0aGlzLmtleWRvd25zPTA7dGhpcy5zZWFyY2gub24oImtleWRvd24iLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47Kyt0aGlzLmtleWRvd25zO3ZhciBzZWxlY3RlZD1zZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO3ZhciBwcmV2PXNlbGVjdGVkLnByZXYoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2U6bm90KC5zZWxlY3QyLWxvY2tlZCkiKTt2YXIgbmV4dD1zZWxlY3RlZC5uZXh0KCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlOm5vdCguc2VsZWN0Mi1sb2NrZWQpIik7dmFyIHBvcz1nZXRDdXJzb3JJbmZvKHRoaXMuc2VhcmNoKTtpZihzZWxlY3RlZC5sZW5ndGgmJihlLndoaWNoPT1LRVkuTEVGVHx8ZS53aGljaD09S0VZLlJJR0hUfHxlLndoaWNoPT1LRVkuQkFDS1NQQUNFfHxlLndoaWNoPT1LRVkuREVMRVRFfHxlLndoaWNoPT1LRVkuRU5URVIpKXt2YXIgc2VsZWN0ZWRDaG9pY2U9c2VsZWN0ZWQ7aWYoZS53aGljaD09S0VZLkxFRlQmJnByZXYubGVuZ3RoKXtzZWxlY3RlZENob2ljZT1wcmV2O30KZWxzZSBpZihlLndoaWNoPT1LRVkuUklHSFQpe3NlbGVjdGVkQ2hvaWNlPW5leHQubGVuZ3RoP25leHQ6bnVsbDt9CmVsc2UgaWYoZS53aGljaD09PUtFWS5CQUNLU1BBQ0Upe2lmKHRoaXMudW5zZWxlY3Qoc2VsZWN0ZWQuZmlyc3QoKSkpe3RoaXMuc2VhcmNoLndpZHRoKDEwKTtzZWxlY3RlZENob2ljZT1wcmV2Lmxlbmd0aD9wcmV2Om5leHQ7fX1lbHNlIGlmKGUud2hpY2g9PUtFWS5ERUxFVEUpe2lmKHRoaXMudW5zZWxlY3Qoc2VsZWN0ZWQuZmlyc3QoKSkpe3RoaXMuc2VhcmNoLndpZHRoKDEwKTtzZWxlY3RlZENob2ljZT1uZXh0Lmxlbmd0aD9uZXh0Om51bGw7fX1lbHNlIGlmKGUud2hpY2g9PUtFWS5FTlRFUil7c2VsZWN0ZWRDaG9pY2U9bnVsbDt9CnRoaXMuc2VsZWN0Q2hvaWNlKHNlbGVjdGVkQ2hvaWNlKTtraWxsRXZlbnQoZSk7aWYoIXNlbGVjdGVkQ2hvaWNlfHwhc2VsZWN0ZWRDaG9pY2UubGVuZ3RoKXt0aGlzLm9wZW4oKTt9CnJldHVybjt9ZWxzZSBpZigoKGUud2hpY2g9PT1LRVkuQkFDS1NQQUNFJiZ0aGlzLmtleWRvd25zPT0xKXx8ZS53aGljaD09S0VZLkxFRlQpJiYocG9zLm9mZnNldD09MCYmIXBvcy5sZW5ndGgpKXt0aGlzLnNlbGVjdENob2ljZShzZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZTpub3QoLnNlbGVjdDItbG9ja2VkKSIpLmxhc3QoKSk7a2lsbEV2ZW50KGUpO3JldHVybjt9ZWxzZXt0aGlzLnNlbGVjdENob2ljZShudWxsKTt9CmlmKHRoaXMub3BlbmVkKCkpe3N3aXRjaChlLndoaWNoKXtjYXNlIEtFWS5VUDpjYXNlIEtFWS5ET1dOOnRoaXMubW92ZUhpZ2hsaWdodCgoZS53aGljaD09PUtFWS5VUCk/LTE6MSk7a2lsbEV2ZW50KGUpO3JldHVybjtjYXNlIEtFWS5FTlRFUjp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKCk7a2lsbEV2ZW50KGUpO3JldHVybjtjYXNlIEtFWS5UQUI6dGhpcy5zZWxlY3RIaWdobGlnaHRlZCh7bm9Gb2N1czp0cnVlfSk7dGhpcy5jbG9zZSgpO3JldHVybjtjYXNlIEtFWS5FU0M6dGhpcy5jYW5jZWwoZSk7a2lsbEV2ZW50KGUpO3JldHVybjt9fQppZihlLndoaWNoPT09S0VZLlRBQnx8S0VZLmlzQ29udHJvbChlKXx8S0VZLmlzRnVuY3Rpb25LZXkoZSl8fGUud2hpY2g9PT1LRVkuQkFDS1NQQUNFfHxlLndoaWNoPT09S0VZLkVTQyl7cmV0dXJuO30KaWYoZS53aGljaD09PUtFWS5FTlRFUil7aWYodGhpcy5vcHRzLm9wZW5PbkVudGVyPT09ZmFsc2Upe3JldHVybjt9ZWxzZSBpZihlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLnNoaWZ0S2V5fHxlLm1ldGFLZXkpe3JldHVybjt9fQp0aGlzLm9wZW4oKTtpZihlLndoaWNoPT09S0VZLlBBR0VfVVB8fGUud2hpY2g9PT1LRVkuUEFHRV9ET1dOKXtraWxsRXZlbnQoZSk7fQppZihlLndoaWNoPT09S0VZLkVOVEVSKXtraWxsRXZlbnQoZSk7fX0pKTt0aGlzLnNlYXJjaC5vbigia2V5dXAiLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmtleWRvd25zPTA7dGhpcy5yZXNpemVTZWFyY2goKTt9KSk7dGhpcy5zZWFyY2gub24oImJsdXIiLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpO3RoaXMuc2VsZWN0Q2hvaWNlKG51bGwpO2lmKCF0aGlzLm9wZW5lZCgpKXRoaXMuY2xlYXJTZWFyY2goKTtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1ibHVyIikpO30pKTt0aGlzLmNvbnRhaW5lci5vbigiY2xpY2siLHNlbGVjdG9yLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47aWYoJChlLnRhcmdldCkuY2xvc2VzdCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZSIpLmxlbmd0aD4wKXtyZXR1cm47fQp0aGlzLnNlbGVjdENob2ljZShudWxsKTt0aGlzLmNsZWFyUGxhY2Vob2xkZXIoKTtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLm9wZW4oKTt0aGlzLmZvY3VzU2VhcmNoKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO30pKTt0aGlzLmNvbnRhaW5lci5vbigiZm9jdXMiLHNlbGVjdG9yLHRoaXMuYmluZChmdW5jdGlvbigpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5kcm9wZG93bi5hZGRDbGFzcygic2VsZWN0Mi1kcm9wLWFjdGl2ZSIpO3RoaXMuY2xlYXJQbGFjZWhvbGRlcigpO30pKTt0aGlzLmluaXRDb250YWluZXJXaWR0aCgpO3RoaXMub3B0cy5lbGVtZW50LmhpZGUoKTt0aGlzLmNsZWFyU2VhcmNoKCk7fSxlbmFibGVJbnRlcmZhY2U6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudC5lbmFibGVJbnRlcmZhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt0aGlzLnNlYXJjaC5wcm9wKCJkaXNhYmxlZCIsIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpO319LGluaXRTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZGF0YTtpZih0aGlzLm9wdHMuZWxlbWVudC52YWwoKT09PSIiJiZ0aGlzLm9wdHMuZWxlbWVudC50ZXh0KCk9PT0iIil7dGhpcy51cGRhdGVTZWxlY3Rpb24oW10pO3RoaXMuY2xvc2UoKTt0aGlzLmNsZWFyU2VhcmNoKCk7fQppZih0aGlzLnNlbGVjdHx8dGhpcy5vcHRzLmVsZW1lbnQudmFsKCkhPT0iIil7dmFyIHNlbGY9dGhpczt0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsdGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oZGF0YSl7aWYoZGF0YSE9PXVuZGVmaW5lZCYmZGF0YSE9PW51bGwpe3NlbGYudXBkYXRlU2VsZWN0aW9uKGRhdGEpO3NlbGYuY2xvc2UoKTtzZWxmLmNsZWFyU2VhcmNoKCk7fX0pO319LGNsZWFyU2VhcmNoOmZ1bmN0aW9uKCl7dmFyIHBsYWNlaG9sZGVyPXRoaXMuZ2V0UGxhY2Vob2xkZXIoKSxtYXhXaWR0aD10aGlzLmdldE1heFNlYXJjaFdpZHRoKCk7aWYocGxhY2Vob2xkZXIhPT11bmRlZmluZWQmJnRoaXMuZ2V0VmFsKCkubGVuZ3RoPT09MCYmdGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpPT09ZmFsc2Upe3RoaXMuc2VhcmNoLnZhbChwbGFjZWhvbGRlcikuYWRkQ2xhc3MoInNlbGVjdDItZGVmYXVsdCIpO3RoaXMuc2VhcmNoLndpZHRoKG1heFdpZHRoPjA/bWF4V2lkdGg6dGhpcy5jb250YWluZXIuY3NzKCJ3aWR0aCIpKTt9ZWxzZXt0aGlzLnNlYXJjaC52YWwoIiIpLndpZHRoKDEwKTt9fSxjbGVhclBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZGVmYXVsdCIpKXt0aGlzLnNlYXJjaC52YWwoIiIpLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRlZmF1bHQiKTt9fSxvcGVuaW5nOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclBsYWNlaG9sZGVyKCk7dGhpcy5yZXNpemVTZWFyY2goKTt0aGlzLnBhcmVudC5vcGVuaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvY3VzU2VhcmNoKCk7dGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKTt0aGlzLnVwZGF0ZVJlc3VsdHModHJ1ZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuc2VhcmNoLmZvY3VzKCk7fQp0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItb3BlbiIpKTt9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3BlbmVkKCkpcmV0dXJuO3RoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpO3RoaXMuc2VhcmNoLmZvY3VzKCk7fSxpc0ZvY3VzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpO30sdXBkYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKGRhdGEpe3ZhciBpZHM9e30sZmlsdGVyZWQ9W10sc2VsZj10aGlzOyQoZGF0YSkuZWFjaChmdW5jdGlvbigpe2lmKCEoc2VsZi5pZCh0aGlzKWluIGlkcykpe2lkc1tzZWxmLmlkKHRoaXMpXT0wO2ZpbHRlcmVkLnB1c2godGhpcyk7fX0pO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5yZW1vdmUoKTt0aGlzLmFkZFNlbGVjdGVkQ2hvaWNlKGZpbHRlcmVkKTtzZWxmLnBvc3Rwcm9jZXNzUmVzdWx0cygpO30sdG9rZW5pemU6ZnVuY3Rpb24oKXt2YXIgaW5wdXQ9dGhpcy5zZWFyY2gudmFsKCk7aW5wdXQ9dGhpcy5vcHRzLnRva2VuaXplci5jYWxsKHRoaXMsaW5wdXQsdGhpcy5kYXRhKCksdGhpcy5iaW5kKHRoaXMub25TZWxlY3QpLHRoaXMub3B0cyk7aWYoaW5wdXQhPW51bGwmJmlucHV0IT11bmRlZmluZWQpe3RoaXMuc2VhcmNoLnZhbChpbnB1dCk7aWYoaW5wdXQubGVuZ3RoPjApe3RoaXMub3BlbigpO319fSxvblNlbGVjdDpmdW5jdGlvbihkYXRhLG9wdGlvbnMpe2lmKCF0aGlzLnRyaWdnZXJTZWxlY3QoZGF0YSl8fGRhdGEudGV4dD09PSIiKXtyZXR1cm47fQp0aGlzLmFkZFNlbGVjdGVkQ2hvaWNlKGRhdGEpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdGVkIix2YWw6dGhpcy5pZChkYXRhKSxjaG9pY2U6ZGF0YX0pO3RoaXMubGFzdFNlYXJjaFRlcm09dGhpcy5zZWFyY2gudmFsKCk7dGhpcy5jbGVhclNlYXJjaCgpO3RoaXMudXBkYXRlUmVzdWx0cygpO2lmKHRoaXMuc2VsZWN0fHwhdGhpcy5vcHRzLmNsb3NlT25TZWxlY3QpdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMoZGF0YSxmYWxzZSx0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD09PXRydWUpO2lmKHRoaXMub3B0cy5jbG9zZU9uU2VsZWN0KXt0aGlzLmNsb3NlKCk7dGhpcy5zZWFyY2gud2lkdGgoMTApO31lbHNle2lmKHRoaXMuY291bnRTZWxlY3RhYmxlUmVzdWx0cygpPjApe3RoaXMuc2VhcmNoLndpZHRoKDEwKTt0aGlzLnJlc2l6ZVNlYXJjaCgpO2lmKHRoaXMuZ2V0TWF4aW11bVNlbGVjdGlvblNpemUoKT4wJiZ0aGlzLnZhbCgpLmxlbmd0aD49dGhpcy5nZXRNYXhpbXVtU2VsZWN0aW9uU2l6ZSgpKXt0aGlzLnVwZGF0ZVJlc3VsdHModHJ1ZSk7fWVsc2V7aWYodGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKSl7dGhpcy51cGRhdGVSZXN1bHRzKCk7fX0KdGhpcy5wb3NpdGlvbkRyb3Bkb3duKCk7fWVsc2V7dGhpcy5jbG9zZSgpO3RoaXMuc2VhcmNoLndpZHRoKDEwKTt9fQp0aGlzLnRyaWdnZXJDaGFuZ2Uoe2FkZGVkOmRhdGF9KTtpZighb3B0aW9uc3x8IW9wdGlvbnMubm9Gb2N1cykKdGhpcy5mb2N1c1NlYXJjaCgpO30sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpO3RoaXMuZm9jdXNTZWFyY2goKTt9LGFkZFNlbGVjdGVkQ2hvaWNlOmZ1bmN0aW9uKGRhdGEpe3ZhciB2YWw9dGhpcy5nZXRWYWwoKSxzZWxmPXRoaXM7JChkYXRhKS5lYWNoKGZ1bmN0aW9uKCl7dmFsLnB1c2goc2VsZi5jcmVhdGVDaG9pY2UodGhpcykpO30pO3RoaXMuc2V0VmFsKHZhbCk7fSxjcmVhdGVDaG9pY2U6ZnVuY3Rpb24oZGF0YSl7dmFyIGVuYWJsZUNob2ljZT0hZGF0YS5sb2NrZWQsZW5hYmxlZEl0ZW09JCgiPGxpIGNsYXNzPSdzZWxlY3QyLXNlYXJjaC1jaG9pY2UnPiIrIiAgICA8ZGl2PjwvZGl2PiIrIiAgICA8YSBocmVmPScjJyBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWNsb3NlJyB0YWJpbmRleD0nLTEnPjwvYT4iKyI8L2xpPiIpLGRpc2FibGVkSXRlbT0kKCI8bGkgY2xhc3M9J3NlbGVjdDItc2VhcmNoLWNob2ljZSBzZWxlY3QyLWxvY2tlZCc+IisiPGRpdj48L2Rpdj4iKyI8L2xpPiIpO3ZhciBjaG9pY2U9ZW5hYmxlQ2hvaWNlP2VuYWJsZWRJdGVtOmRpc2FibGVkSXRlbSxpZD10aGlzLmlkKGRhdGEpLGZvcm1hdHRlZCxjc3NDbGFzcztmb3JtYXR0ZWQ9dGhpcy5vcHRzLmZvcm1hdFNlbGVjdGlvbihkYXRhLGNob2ljZS5maW5kKCJkaXYiKSx0aGlzLm9wdHMuZXNjYXBlTWFya3VwKTtpZihmb3JtYXR0ZWQhPXVuZGVmaW5lZCl7Y2hvaWNlLmZpbmQoImRpdiIpLnJlcGxhY2VXaXRoKCQoIjxkaXY+PC9kaXY+IikuaHRtbChmb3JtYXR0ZWQpKTt9CmNzc0NsYXNzPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb25Dc3NDbGFzcyhkYXRhLGNob2ljZS5maW5kKCJkaXYiKSk7aWYoY3NzQ2xhc3MhPXVuZGVmaW5lZCl7Y2hvaWNlLmFkZENsYXNzKGNzc0NsYXNzKTt9CmlmKGVuYWJsZUNob2ljZSl7Y2hvaWNlLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtY2xvc2UiKS5vbigibW91c2Vkb3duIixraWxsRXZlbnQpLm9uKCJjbGljayBkYmxjbGljayIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjt0aGlzLnVuc2VsZWN0KCQoZS50YXJnZXQpKTt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIikucmVtb3ZlQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO2tpbGxFdmVudChlKTt0aGlzLmNsb3NlKCk7dGhpcy5mb2N1c1NlYXJjaCgpO30pKS5vbigiZm9jdXMiLHRoaXMuYmluZChmdW5jdGlvbigpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5kcm9wZG93bi5hZGRDbGFzcygic2VsZWN0Mi1kcm9wLWFjdGl2ZSIpO30pKTt9CmNob2ljZS5kYXRhKCJzZWxlY3QyLWRhdGEiLGRhdGEpO2Nob2ljZS5pbnNlcnRCZWZvcmUodGhpcy5zZWFyY2hDb250YWluZXIpO3JldHVybiBpZDt9LHVuc2VsZWN0OmZ1bmN0aW9uKHNlbGVjdGVkKXt2YXIgdmFsPXRoaXMuZ2V0VmFsKCksZGF0YSxpbmRleDtzZWxlY3RlZD1zZWxlY3RlZC5jbG9zZXN0KCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlIik7aWYoc2VsZWN0ZWQubGVuZ3RoPT09MCl7dGhyb3ciSW52YWxpZCBhcmd1bWVudDogIitzZWxlY3RlZCsiLiBNdXN0IGJlIC5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiO30KZGF0YT1zZWxlY3RlZC5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZighZGF0YSl7cmV0dXJuO30KdmFyIGV2dD0kLkV2ZW50KCJzZWxlY3QyLXJlbW92aW5nIik7ZXZ0LnZhbD10aGlzLmlkKGRhdGEpO2V2dC5jaG9pY2U9ZGF0YTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGV2dCk7aWYoZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm4gZmFsc2U7fQp3aGlsZSgoaW5kZXg9aW5kZXhPZih0aGlzLmlkKGRhdGEpLHZhbCkpPj0wKXt2YWwuc3BsaWNlKGluZGV4LDEpO3RoaXMuc2V0VmFsKHZhbCk7aWYodGhpcy5zZWxlY3QpdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMoKTt9CnNlbGVjdGVkLnJlbW92ZSgpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItcmVtb3ZlZCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt0aGlzLnRyaWdnZXJDaGFuZ2Uoe3JlbW92ZWQ6ZGF0YX0pO3JldHVybiB0cnVlO30scG9zdHByb2Nlc3NSZXN1bHRzOmZ1bmN0aW9uKGRhdGEsaW5pdGlhbCxub0hpZ2hsaWdodFVwZGF0ZSl7dmFyIHZhbD10aGlzLmdldFZhbCgpLGNob2ljZXM9dGhpcy5yZXN1bHRzLmZpbmQoIi5zZWxlY3QyLXJlc3VsdCIpLGNvbXBvdW5kPXRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtd2l0aC1jaGlsZHJlbiIpLHNlbGY9dGhpcztjaG9pY2VzLmVhY2gyKGZ1bmN0aW9uKGksY2hvaWNlKXt2YXIgaWQ9c2VsZi5pZChjaG9pY2UuZGF0YSgic2VsZWN0Mi1kYXRhIikpO2lmKGluZGV4T2YoaWQsdmFsKT49MCl7Y2hvaWNlLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIik7Y2hvaWNlLmZpbmQoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIikuYWRkQ2xhc3MoInNlbGVjdDItc2VsZWN0ZWQiKTt9fSk7Y29tcG91bmQuZWFjaDIoZnVuY3Rpb24oaSxjaG9pY2Upe2lmKCFjaG9pY2UuaXMoJy5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlJykmJmNob2ljZS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZTpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIikubGVuZ3RoPT09MCl7Y2hvaWNlLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIik7fX0pO2lmKHRoaXMuaGlnaGxpZ2h0KCk9PS0xJiZub0hpZ2hsaWdodFVwZGF0ZSE9PWZhbHNlJiZ0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD09PXRydWUpe3NlbGYuaGlnaGxpZ2h0KDApO30KaWYoIXRoaXMub3B0cy5jcmVhdGVTZWFyY2hDaG9pY2UmJiFjaG9pY2VzLmZpbHRlcignLnNlbGVjdDItcmVzdWx0Om5vdCguc2VsZWN0Mi1zZWxlY3RlZCknKS5sZW5ndGg+MCl7aWYoIWRhdGF8fGRhdGEmJiFkYXRhLm1vcmUmJnRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1uby1yZXN1bHRzIikubGVuZ3RoPT09MCl7aWYoY2hlY2tGb3JtYXR0ZXIoc2VsZi5vcHRzLmZvcm1hdE5vTWF0Y2hlcywiZm9ybWF0Tm9NYXRjaGVzIikpe3RoaXMucmVzdWx0cy5hcHBlbmQoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKHNlbGYub3B0cy5mb3JtYXROb01hdGNoZXMsc2VsZi5vcHRzLmVsZW1lbnQsc2VsZi5zZWFyY2gudmFsKCkpKyI8L2xpPiIpO319fX0sZ2V0TWF4U2VhcmNoV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ud2lkdGgoKS1nZXRTaWRlQm9yZGVyUGFkZGluZyh0aGlzLnNlYXJjaCk7fSxyZXNpemVTZWFyY2g6ZnVuY3Rpb24oKXt2YXIgbWluaW11bVdpZHRoLGxlZnQsbWF4V2lkdGgsY29udGFpbmVyTGVmdCxzZWFyY2hXaWR0aCxzaWRlQm9yZGVyUGFkZGluZz1nZXRTaWRlQm9yZGVyUGFkZGluZyh0aGlzLnNlYXJjaCk7bWluaW11bVdpZHRoPW1lYXN1cmVUZXh0V2lkdGgodGhpcy5zZWFyY2gpKzEwO2xlZnQ9dGhpcy5zZWFyY2gub2Zmc2V0KCkubGVmdDttYXhXaWR0aD10aGlzLnNlbGVjdGlvbi53aWR0aCgpO2NvbnRhaW5lckxlZnQ9dGhpcy5zZWxlY3Rpb24ub2Zmc2V0KCkubGVmdDtzZWFyY2hXaWR0aD1tYXhXaWR0aC0obGVmdC1jb250YWluZXJMZWZ0KS1zaWRlQm9yZGVyUGFkZGluZztpZihzZWFyY2hXaWR0aDxtaW5pbXVtV2lkdGgpe3NlYXJjaFdpZHRoPW1heFdpZHRoLXNpZGVCb3JkZXJQYWRkaW5nO30KaWYoc2VhcmNoV2lkdGg8NDApe3NlYXJjaFdpZHRoPW1heFdpZHRoLXNpZGVCb3JkZXJQYWRkaW5nO30KaWYoc2VhcmNoV2lkdGg8PTApe3NlYXJjaFdpZHRoPW1pbmltdW1XaWR0aDt9CnRoaXMuc2VhcmNoLndpZHRoKE1hdGguZmxvb3Ioc2VhcmNoV2lkdGgpKTt9LGdldFZhbDpmdW5jdGlvbigpe3ZhciB2YWw7aWYodGhpcy5zZWxlY3Qpe3ZhbD10aGlzLnNlbGVjdC52YWwoKTtyZXR1cm4gdmFsPT09bnVsbD9bXTp2YWw7fWVsc2V7dmFsPXRoaXMub3B0cy5lbGVtZW50LnZhbCgpO3JldHVybiBzcGxpdFZhbCh2YWwsdGhpcy5vcHRzLnNlcGFyYXRvcix0aGlzLm9wdHMudHJhbnNmb3JtVmFsKTt9fSxzZXRWYWw6ZnVuY3Rpb24odmFsKXtpZih0aGlzLnNlbGVjdCl7dGhpcy5zZWxlY3QudmFsKHZhbCk7fWVsc2V7dmFyIHVuaXF1ZT1bXSx2YWxNYXA9e307JCh2YWwpLmVhY2goZnVuY3Rpb24oKXtpZighKHRoaXMgaW4gdmFsTWFwKSl7dW5pcXVlLnB1c2godGhpcyk7dmFsTWFwW3RoaXNdPTA7fX0pO3RoaXMub3B0cy5lbGVtZW50LnZhbCh1bmlxdWUubGVuZ3RoPT09MD8iIjp1bmlxdWUuam9pbih0aGlzLm9wdHMuc2VwYXJhdG9yKSk7fX0sYnVpbGRDaGFuZ2VEZXRhaWxzOmZ1bmN0aW9uKG9sZCxjdXJyZW50KXt2YXIgY3VycmVudD1jdXJyZW50LnNsaWNlKDApLG9sZD1vbGQuc2xpY2UoMCk7Zm9yKHZhciBpPTA7aTxjdXJyZW50Lmxlbmd0aDtpKyspe2Zvcih2YXIgaj0wO2o8b2xkLmxlbmd0aDtqKyspe2lmKGVxdWFsKHRoaXMub3B0cy5pZChjdXJyZW50W2ldKSx0aGlzLm9wdHMuaWQob2xkW2pdKSkpe2N1cnJlbnQuc3BsaWNlKGksMSk7aS0tO29sZC5zcGxpY2UoaiwxKTticmVhazt9fX0KcmV0dXJue2FkZGVkOmN1cnJlbnQscmVtb3ZlZDpvbGR9O30sdmFsOmZ1bmN0aW9uKHZhbCx0cmlnZ2VyQ2hhbmdlKXt2YXIgb2xkRGF0YSxzZWxmPXRoaXM7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLmdldFZhbCgpO30Kb2xkRGF0YT10aGlzLmRhdGEoKTtpZighb2xkRGF0YS5sZW5ndGgpb2xkRGF0YT1bXTtpZighdmFsJiZ2YWwhPT0wKXt0aGlzLm9wdHMuZWxlbWVudC52YWwoIiIpO3RoaXMudXBkYXRlU2VsZWN0aW9uKFtdKTt0aGlzLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7dGhpcy50cmlnZ2VyQ2hhbmdlKHthZGRlZDp0aGlzLmRhdGEoKSxyZW1vdmVkOm9sZERhdGF9KTt9CnJldHVybjt9CnRoaXMuc2V0VmFsKHZhbCk7aWYodGhpcy5zZWxlY3Qpe3RoaXMub3B0cy5pbml0U2VsZWN0aW9uKHRoaXMuc2VsZWN0LHRoaXMuYmluZCh0aGlzLnVwZGF0ZVNlbGVjdGlvbikpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh0aGlzLmJ1aWxkQ2hhbmdlRGV0YWlscyhvbGREYXRhLHRoaXMuZGF0YSgpKSk7fX1lbHNle2lmKHRoaXMub3B0cy5pbml0U2VsZWN0aW9uPT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoInZhbCgpIGNhbm5vdCBiZSBjYWxsZWQgaWYgaW5pdFNlbGVjdGlvbigpIGlzIG5vdCBkZWZpbmVkIik7fQp0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbih0aGlzLm9wdHMuZWxlbWVudCxmdW5jdGlvbihkYXRhKXt2YXIgaWRzPSQubWFwKGRhdGEsc2VsZi5pZCk7c2VsZi5zZXRWYWwoaWRzKTtzZWxmLnVwZGF0ZVNlbGVjdGlvbihkYXRhKTtzZWxmLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7c2VsZi50cmlnZ2VyQ2hhbmdlKHNlbGYuYnVpbGRDaGFuZ2VEZXRhaWxzKG9sZERhdGEsc2VsZi5kYXRhKCkpKTt9fSk7fQp0aGlzLmNsZWFyU2VhcmNoKCk7fSxvblNvcnRTdGFydDpmdW5jdGlvbigpe2lmKHRoaXMuc2VsZWN0KXt0aHJvdyBuZXcgRXJyb3IoIlNvcnRpbmcgb2YgZWxlbWVudHMgaXMgbm90IHN1cHBvcnRlZCB3aGVuIGF0dGFjaGVkIHRvIDxzZWxlY3Q+LiBBdHRhY2ggdG8gPGlucHV0IHR5cGU9J2hpZGRlbicvPiBpbnN0ZWFkLiIpO30KdGhpcy5zZWFyY2gud2lkdGgoMCk7dGhpcy5zZWFyY2hDb250YWluZXIuaGlkZSgpO30sb25Tb3J0RW5kOmZ1bmN0aW9uKCl7dmFyIHZhbD1bXSxzZWxmPXRoaXM7dGhpcy5zZWFyY2hDb250YWluZXIuc2hvdygpO3RoaXMuc2VhcmNoQ29udGFpbmVyLmFwcGVuZFRvKHRoaXMuc2VhcmNoQ29udGFpbmVyLnBhcmVudCgpKTt0aGlzLnJlc2l6ZVNlYXJjaCgpO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5lYWNoKGZ1bmN0aW9uKCl7dmFsLnB1c2goc2VsZi5vcHRzLmlkKCQodGhpcykuZGF0YSgic2VsZWN0Mi1kYXRhIikpKTt9KTt0aGlzLnNldFZhbCh2YWwpO3RoaXMudHJpZ2dlckNoYW5nZSgpO30sZGF0YTpmdW5jdGlvbih2YWx1ZXMsdHJpZ2dlckNoYW5nZSl7dmFyIHNlbGY9dGhpcyxpZHMsb2xkO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24uY2hpbGRyZW4oIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS5kYXRhKCJzZWxlY3QyLWRhdGEiKTt9KS5nZXQoKTt9ZWxzZXtvbGQ9dGhpcy5kYXRhKCk7aWYoIXZhbHVlcyl7dmFsdWVzPVtdO30KaWRzPSQubWFwKHZhbHVlcyxmdW5jdGlvbihlKXtyZXR1cm4gc2VsZi5vcHRzLmlkKGUpO30pO3RoaXMuc2V0VmFsKGlkcyk7dGhpcy51cGRhdGVTZWxlY3Rpb24odmFsdWVzKTt0aGlzLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7dGhpcy50cmlnZ2VyQ2hhbmdlKHRoaXMuYnVpbGRDaGFuZ2VEZXRhaWxzKG9sZCx0aGlzLmRhdGEoKSkpO319fX0pOyQuZm4uc2VsZWN0Mj1mdW5jdGlvbigpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxvcHRzLHNlbGVjdDIsbWV0aG9kLHZhbHVlLG11bHRpcGxlLGFsbG93ZWRNZXRob2RzPVsidmFsIiwiZGVzdHJveSIsIm9wZW5lZCIsIm9wZW4iLCJjbG9zZSIsImZvY3VzIiwiaXNGb2N1c2VkIiwiY29udGFpbmVyIiwiZHJvcGRvd24iLCJvblNvcnRTdGFydCIsIm9uU29ydEVuZCIsImVuYWJsZSIsImRpc2FibGUiLCJyZWFkb25seSIsInBvc2l0aW9uRHJvcGRvd24iLCJkYXRhIiwic2VhcmNoIl0sdmFsdWVNZXRob2RzPVsib3BlbmVkIiwiaXNGb2N1c2VkIiwiY29udGFpbmVyIiwiZHJvcGRvd24iXSxwcm9wZXJ0eU1ldGhvZHM9WyJ2YWwiLCJkYXRhIl0sbWV0aG9kc01hcD17c2VhcmNoOiJleHRlcm5hbFNlYXJjaCJ9O3RoaXMuZWFjaChmdW5jdGlvbigpe2lmKGFyZ3MubGVuZ3RoPT09MHx8dHlwZW9mKGFyZ3NbMF0pPT09Im9iamVjdCIpe29wdHM9YXJncy5sZW5ndGg9PT0wP3t9OiQuZXh0ZW5kKHt9LGFyZ3NbMF0pO29wdHMuZWxlbWVudD0kKHRoaXMpO2lmKG9wdHMuZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe211bHRpcGxlPW9wdHMuZWxlbWVudC5wcm9wKCJtdWx0aXBsZSIpO31lbHNle211bHRpcGxlPW9wdHMubXVsdGlwbGV8fGZhbHNlO2lmKCJ0YWdzImluIG9wdHMpe29wdHMubXVsdGlwbGU9bXVsdGlwbGU9dHJ1ZTt9fQpzZWxlY3QyPW11bHRpcGxlP25ldyB3aW5kb3cuU2VsZWN0MlsiY2xhc3MiXS5tdWx0aSgpOm5ldyB3aW5kb3cuU2VsZWN0MlsiY2xhc3MiXS5zaW5nbGUoKTtzZWxlY3QyLmluaXQob3B0cyk7fWVsc2UgaWYodHlwZW9mKGFyZ3NbMF0pPT09InN0cmluZyIpe2lmKGluZGV4T2YoYXJnc1swXSxhbGxvd2VkTWV0aG9kcyk8MCl7dGhyb3ciVW5rbm93biBtZXRob2Q6ICIrYXJnc1swXTt9CnZhbHVlPXVuZGVmaW5lZDtzZWxlY3QyPSQodGhpcykuZGF0YSgic2VsZWN0MiIpO2lmKHNlbGVjdDI9PT11bmRlZmluZWQpcmV0dXJuO21ldGhvZD1hcmdzWzBdO2lmKG1ldGhvZD09PSJjb250YWluZXIiKXt2YWx1ZT1zZWxlY3QyLmNvbnRhaW5lcjt9ZWxzZSBpZihtZXRob2Q9PT0iZHJvcGRvd24iKXt2YWx1ZT1zZWxlY3QyLmRyb3Bkb3duO31lbHNle2lmKG1ldGhvZHNNYXBbbWV0aG9kXSltZXRob2Q9bWV0aG9kc01hcFttZXRob2RdO3ZhbHVlPXNlbGVjdDJbbWV0aG9kXS5hcHBseShzZWxlY3QyLGFyZ3Muc2xpY2UoMSkpO30KaWYoaW5kZXhPZihhcmdzWzBdLHZhbHVlTWV0aG9kcyk+PTB8fChpbmRleE9mKGFyZ3NbMF0scHJvcGVydHlNZXRob2RzKT49MCYmYXJncy5sZW5ndGg9PTEpKXtyZXR1cm4gZmFsc2U7fX1lbHNle3Rocm93IkludmFsaWQgYXJndW1lbnRzIHRvIHNlbGVjdDIgcGx1Z2luOiAiK2FyZ3M7fX0pO3JldHVybih2YWx1ZT09PXVuZGVmaW5lZCk/dGhpczp2YWx1ZTt9OyQuZm4uc2VsZWN0Mi5kZWZhdWx0cz17ZGVidWc6ZmFsc2Usd2lkdGg6ImNvcHkiLGxvYWRNb3JlUGFkZGluZzowLGNsb3NlT25TZWxlY3Q6dHJ1ZSxvcGVuT25FbnRlcjp0cnVlLGNvbnRhaW5lckNzczp7fSxkcm9wZG93bkNzczp7fSxjb250YWluZXJDc3NDbGFzczoiIixkcm9wZG93bkNzc0NsYXNzOiIiLGZvcm1hdFJlc3VsdDpmdW5jdGlvbihyZXN1bHQsY29udGFpbmVyLHF1ZXJ5LGVzY2FwZU1hcmt1cCl7dmFyIG1hcmt1cD1bXTttYXJrTWF0Y2godGhpcy50ZXh0KHJlc3VsdCkscXVlcnkudGVybSxtYXJrdXAsZXNjYXBlTWFya3VwKTtyZXR1cm4gbWFya3VwLmpvaW4oIiIpO30sdHJhbnNmb3JtVmFsOmZ1bmN0aW9uKHZhbCl7cmV0dXJuICQudHJpbSh2YWwpO30sZm9ybWF0U2VsZWN0aW9uOmZ1bmN0aW9uKGRhdGEsY29udGFpbmVyLGVzY2FwZU1hcmt1cCl7cmV0dXJuIGRhdGE/ZXNjYXBlTWFya3VwKHRoaXMudGV4dChkYXRhKSk6dW5kZWZpbmVkO30sc29ydFJlc3VsdHM6ZnVuY3Rpb24ocmVzdWx0cyxjb250YWluZXIscXVlcnkpe3JldHVybiByZXN1bHRzO30sZm9ybWF0UmVzdWx0Q3NzQ2xhc3M6ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIGRhdGEuY3NzO30sZm9ybWF0U2VsZWN0aW9uQ3NzQ2xhc3M6ZnVuY3Rpb24oZGF0YSxjb250YWluZXIpe3JldHVybiB1bmRlZmluZWQ7fSxtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDowLG1pbmltdW1JbnB1dExlbmd0aDowLG1heGltdW1JbnB1dExlbmd0aDpudWxsLG1heGltdW1TZWxlY3Rpb25TaXplOjAsaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXVuZGVmaW5lZD9udWxsOmUuaWQ7fSx0ZXh0OmZ1bmN0aW9uKGUpe2lmKGUmJnRoaXMuZGF0YSYmdGhpcy5kYXRhLnRleHQpe2lmKCQuaXNGdW5jdGlvbih0aGlzLmRhdGEudGV4dCkpe3JldHVybiB0aGlzLmRhdGEudGV4dChlKTt9ZWxzZXtyZXR1cm4gZVt0aGlzLmRhdGEudGV4dF07fX1lbHNle3JldHVybiBlLnRleHQ7fX0sbWF0Y2hlcjpmdW5jdGlvbih0ZXJtLHRleHQpe3JldHVybiBzdHJpcERpYWNyaXRpY3MoJycrdGV4dCkudG9VcHBlckNhc2UoKS5pbmRleE9mKHN0cmlwRGlhY3JpdGljcygnJyt0ZXJtKS50b1VwcGVyQ2FzZSgpKT49MDt9LHNlcGFyYXRvcjoiLCIsdG9rZW5TZXBhcmF0b3JzOltdLHRva2VuaXplcjpkZWZhdWx0VG9rZW5pemVyLGVzY2FwZU1hcmt1cDpkZWZhdWx0RXNjYXBlTWFya3VwLGJsdXJPbkNoYW5nZTpmYWxzZSxzZWxlY3RPbkJsdXI6ZmFsc2UsYWRhcHRDb250YWluZXJDc3NDbGFzczpmdW5jdGlvbihjKXtyZXR1cm4gYzt9LGFkYXB0RHJvcGRvd25Dc3NDbGFzczpmdW5jdGlvbihjKXtyZXR1cm4gbnVsbDt9LG5leHRTZWFyY2hUZXJtOmZ1bmN0aW9uKHNlbGVjdGVkT2JqZWN0LGN1cnJlbnRTZWFyY2hUZXJtKXtyZXR1cm4gdW5kZWZpbmVkO30sc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjonJyxjcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbjondG9wJyxzaG91bGRGb2N1c0lucHV0OmZ1bmN0aW9uKGluc3RhbmNlKXt2YXIgc3VwcG9ydHNUb3VjaEV2ZW50cz0oKCdvbnRvdWNoc3RhcnQnaW4gd2luZG93KXx8KG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzPjApKTtpZighc3VwcG9ydHNUb3VjaEV2ZW50cyl7cmV0dXJuIHRydWU7fQppZihpbnN0YW5jZS5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPDApe3JldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO319OyQuZm4uc2VsZWN0Mi5sb2NhbGVzPVtdOyQuZm4uc2VsZWN0Mi5sb2NhbGVzWydlbiddPXtmb3JtYXRNYXRjaGVzOmZ1bmN0aW9uKG1hdGNoZXMpe2lmKG1hdGNoZXM9PT0xKXtyZXR1cm4iT25lIHJlc3VsdCBpcyBhdmFpbGFibGUsIHByZXNzIGVudGVyIHRvIHNlbGVjdCBpdC4iO31yZXR1cm4gbWF0Y2hlcysiIHJlc3VsdHMgYXJlIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIjt9LGZvcm1hdE5vTWF0Y2hlczpmdW5jdGlvbigpe3JldHVybiJObyBtYXRjaGVzIGZvdW5kIjt9LGZvcm1hdEFqYXhFcnJvcjpmdW5jdGlvbihqcVhIUix0ZXh0U3RhdHVzLGVycm9yVGhyb3duKXtyZXR1cm4iTG9hZGluZyBmYWlsZWQiO30sZm9ybWF0SW5wdXRUb29TaG9ydDpmdW5jdGlvbihpbnB1dCxtaW4pe3ZhciBuPW1pbi1pbnB1dC5sZW5ndGg7cmV0dXJuIlBsZWFzZSBlbnRlciAiK24rIiBvciBtb3JlIGNoYXJhY3RlciIrKG49PTE/IiI6InMiKTt9LGZvcm1hdElucHV0VG9vTG9uZzpmdW5jdGlvbihpbnB1dCxtYXgpe3ZhciBuPWlucHV0Lmxlbmd0aC1tYXg7cmV0dXJuIlBsZWFzZSBkZWxldGUgIituKyIgY2hhcmFjdGVyIisobj09MT8iIjoicyIpO30sZm9ybWF0U2VsZWN0aW9uVG9vQmlnOmZ1bmN0aW9uKGxpbWl0KXtyZXR1cm4iWW91IGNhbiBvbmx5IHNlbGVjdCAiK2xpbWl0KyIgaXRlbSIrKGxpbWl0PT0xPyIiOiJzIik7fSxmb3JtYXRMb2FkTW9yZTpmdW5jdGlvbihwYWdlTnVtYmVyKXtyZXR1cm4iTG9hZGluZyBtb3JlIHJlc3VsdHPigKYiO30sZm9ybWF0U2VhcmNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIlNlYXJjaGluZ+KApiI7fX07JC5leHRlbmQoJC5mbi5zZWxlY3QyLmRlZmF1bHRzLCQuZm4uc2VsZWN0Mi5sb2NhbGVzWydlbiddKTskLmZuLnNlbGVjdDIuYWpheERlZmF1bHRzPXt0cmFuc3BvcnQ6JC5hamF4LHBhcmFtczp7dHlwZToiR0VUIixjYWNoZTpmYWxzZSxkYXRhVHlwZToianNvbiJ9fTt3aW5kb3cuU2VsZWN0Mj17cXVlcnk6e2FqYXg6YWpheCxsb2NhbDpsb2NhbCx0YWdzOnRhZ3N9LHV0aWw6e2RlYm91bmNlOmRlYm91bmNlLG1hcmtNYXRjaDptYXJrTWF0Y2gsZXNjYXBlTWFya3VwOmRlZmF1bHRFc2NhcGVNYXJrdXAsc3RyaXBEaWFjcml0aWNzOnN0cmlwRGlhY3JpdGljc30sImNsYXNzIjp7ImFic3RyYWN0IjpBYnN0cmFjdFNlbGVjdDIsInNpbmdsZSI6U2luZ2xlU2VsZWN0MiwibXVsdGkiOk11bHRpU2VsZWN0Mn19O30oalF1ZXJ5KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2NsaXBib2FyZC9jbGlwYm9hcmQuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LGZhY3Rvcnkpe2lmKHR5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGU9PT0nb2JqZWN0JykKbW9kdWxlLmV4cG9ydHM9ZmFjdG9yeSgpO2Vsc2UgaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpCmRlZmluZShbXSxmYWN0b3J5KTtlbHNlIGlmKHR5cGVvZiBleHBvcnRzPT09J29iamVjdCcpCmV4cG9ydHNbIkNsaXBib2FyZEpTIl09ZmFjdG9yeSgpO2Vsc2UKcm9vdFsiQ2xpcGJvYXJkSlMiXT1mYWN0b3J5KCk7fSkodGhpcyxmdW5jdGlvbigpe3JldHVybihmdW5jdGlvbihtb2R1bGVzKXt2YXIgaW5zdGFsbGVkTW9kdWxlcz17fTtmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKXtpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSl7cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7fQp2YXIgbW9kdWxlPWluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdPXtpOm1vZHVsZUlkLGw6ZmFsc2UsZXhwb3J0czp7fX07bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyk7bW9kdWxlLmw9dHJ1ZTtyZXR1cm4gbW9kdWxlLmV4cG9ydHM7fQpfX3dlYnBhY2tfcmVxdWlyZV9fLm09bW9kdWxlcztfX3dlYnBhY2tfcmVxdWlyZV9fLmM9aW5zdGFsbGVkTW9kdWxlcztfX3dlYnBhY2tfcmVxdWlyZV9fLmk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZTt9O19fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsbmFtZSkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLG5hbWUse2NvbmZpZ3VyYWJsZTpmYWxzZSxlbnVtZXJhYmxlOnRydWUsZ2V0OmdldHRlcn0pO319O19fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihtb2R1bGUpe3ZhciBnZXR0ZXI9bW9kdWxlJiZtb2R1bGUuX19lc01vZHVsZT9mdW5jdGlvbiBnZXREZWZhdWx0KCl7cmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddO306ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpe3JldHVybiBtb2R1bGU7fTtfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCdhJyxnZXR0ZXIpO3JldHVybiBnZXR0ZXI7fTtfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSk7fTtfX3dlYnBhY2tfcmVxdWlyZV9fLnA9IiI7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTMpO30pCihbKGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyxfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsoZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe2lmKHRydWUpeyEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXz1bbW9kdWxlLF9fd2VicGFja19yZXF1aXJlX18oNyldLF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXz0oZmFjdG9yeSksX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX189KHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX189PT0nZnVuY3Rpb24nPyhfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cyxfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSk6X19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSxfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyE9PXVuZGVmaW5lZCYmKG1vZHVsZS5leHBvcnRzPV9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7fWVsc2UgaWYodHlwZW9mIGV4cG9ydHMhPT0idW5kZWZpbmVkIil7ZmFjdG9yeShtb2R1bGUscmVxdWlyZSgnc2VsZWN0JykpO31lbHNle3ZhciBtb2Q9e2V4cG9ydHM6e319O2ZhY3RvcnkobW9kLGdsb2JhbC5zZWxlY3QpO2dsb2JhbC5jbGlwYm9hcmRBY3Rpb249bW9kLmV4cG9ydHM7fX0pKHRoaXMsZnVuY3Rpb24obW9kdWxlLF9zZWxlY3Qpeyd1c2Ugc3RyaWN0Jzt2YXIgX3NlbGVjdDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VsZWN0KTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fQp2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PSJzeW1ib2wiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7fX0KdmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KcmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO3ZhciBDbGlwYm9hcmRBY3Rpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBDbGlwYm9hcmRBY3Rpb24ob3B0aW9ucyl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsQ2xpcGJvYXJkQWN0aW9uKTt0aGlzLnJlc29sdmVPcHRpb25zKG9wdGlvbnMpO3RoaXMuaW5pdFNlbGVjdGlvbigpO30KX2NyZWF0ZUNsYXNzKENsaXBib2FyZEFjdGlvbixbe2tleToncmVzb2x2ZU9wdGlvbnMnLHZhbHVlOmZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKCl7dmFyIG9wdGlvbnM9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzBdOnt9O3RoaXMuYWN0aW9uPW9wdGlvbnMuYWN0aW9uO3RoaXMuY29udGFpbmVyPW9wdGlvbnMuY29udGFpbmVyO3RoaXMuZW1pdHRlcj1vcHRpb25zLmVtaXR0ZXI7dGhpcy50YXJnZXQ9b3B0aW9ucy50YXJnZXQ7dGhpcy50ZXh0PW9wdGlvbnMudGV4dDt0aGlzLnRyaWdnZXI9b3B0aW9ucy50cmlnZ2VyO3RoaXMuc2VsZWN0ZWRUZXh0PScnO319LHtrZXk6J2luaXRTZWxlY3Rpb24nLHZhbHVlOmZ1bmN0aW9uIGluaXRTZWxlY3Rpb24oKXtpZih0aGlzLnRleHQpe3RoaXMuc2VsZWN0RmFrZSgpO31lbHNlIGlmKHRoaXMudGFyZ2V0KXt0aGlzLnNlbGVjdFRhcmdldCgpO319fSx7a2V5OidzZWxlY3RGYWtlJyx2YWx1ZTpmdW5jdGlvbiBzZWxlY3RGYWtlKCl7dmFyIF90aGlzPXRoaXM7dmFyIGlzUlRMPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpPT0ncnRsJzt0aGlzLnJlbW92ZUZha2UoKTt0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMucmVtb3ZlRmFrZSgpO307dGhpcy5mYWtlSGFuZGxlcj10aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKXx8dHJ1ZTt0aGlzLmZha2VFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7dGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZT0nMTJwdCc7dGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXI9JzAnO3RoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZz0nMCc7dGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW49JzAnO3RoaXMuZmFrZUVsZW0uc3R5bGUucG9zaXRpb249J2Fic29sdXRlJzt0aGlzLmZha2VFbGVtLnN0eWxlW2lzUlRMPydyaWdodCc6J2xlZnQnXT0nLTk5OTlweCc7dmFyIHlQb3NpdGlvbj13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7dGhpcy5mYWtlRWxlbS5zdHlsZS50b3A9eVBvc2l0aW9uKydweCc7dGhpcy5mYWtlRWxlbS5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywnJyk7dGhpcy5mYWtlRWxlbS52YWx1ZT10aGlzLnRleHQ7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5mYWtlRWxlbSk7dGhpcy5zZWxlY3RlZFRleHQ9KDAsX3NlbGVjdDIuZGVmYXVsdCkodGhpcy5mYWtlRWxlbSk7dGhpcy5jb3B5VGV4dCgpO319LHtrZXk6J3JlbW92ZUZha2UnLHZhbHVlOmZ1bmN0aW9uIHJlbW92ZUZha2UoKXtpZih0aGlzLmZha2VIYW5kbGVyKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKTt0aGlzLmZha2VIYW5kbGVyPW51bGw7dGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPW51bGw7fQppZih0aGlzLmZha2VFbGVtKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKTt0aGlzLmZha2VFbGVtPW51bGw7fX19LHtrZXk6J3NlbGVjdFRhcmdldCcsdmFsdWU6ZnVuY3Rpb24gc2VsZWN0VGFyZ2V0KCl7dGhpcy5zZWxlY3RlZFRleHQ9KDAsX3NlbGVjdDIuZGVmYXVsdCkodGhpcy50YXJnZXQpO3RoaXMuY29weVRleHQoKTt9fSx7a2V5Oidjb3B5VGV4dCcsdmFsdWU6ZnVuY3Rpb24gY29weVRleHQoKXt2YXIgc3VjY2VlZGVkPXZvaWQgMDt0cnl7c3VjY2VlZGVkPWRvY3VtZW50LmV4ZWNDb21tYW5kKHRoaXMuYWN0aW9uKTt9Y2F0Y2goZXJyKXtzdWNjZWVkZWQ9ZmFsc2U7fQp0aGlzLmhhbmRsZVJlc3VsdChzdWNjZWVkZWQpO319LHtrZXk6J2hhbmRsZVJlc3VsdCcsdmFsdWU6ZnVuY3Rpb24gaGFuZGxlUmVzdWx0KHN1Y2NlZWRlZCl7dGhpcy5lbWl0dGVyLmVtaXQoc3VjY2VlZGVkPydzdWNjZXNzJzonZXJyb3InLHthY3Rpb246dGhpcy5hY3Rpb24sdGV4dDp0aGlzLnNlbGVjdGVkVGV4dCx0cmlnZ2VyOnRoaXMudHJpZ2dlcixjbGVhclNlbGVjdGlvbjp0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcyl9KTt9fSx7a2V5OidjbGVhclNlbGVjdGlvbicsdmFsdWU6ZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb24oKXtpZih0aGlzLnRyaWdnZXIpe3RoaXMudHJpZ2dlci5mb2N1cygpO30Kd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO319LHtrZXk6J2Rlc3Ryb3knLHZhbHVlOmZ1bmN0aW9uIGRlc3Ryb3koKXt0aGlzLnJlbW92ZUZha2UoKTt9fSx7a2V5OidhY3Rpb24nLHNldDpmdW5jdGlvbiBzZXQoKXt2YXIgYWN0aW9uPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTonY29weSc7dGhpcy5fYWN0aW9uPWFjdGlvbjtpZih0aGlzLl9hY3Rpb24hPT0nY29weScmJnRoaXMuX2FjdGlvbiE9PSdjdXQnKXt0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgImFjdGlvbiIgdmFsdWUsIHVzZSBlaXRoZXIgImNvcHkiIG9yICJjdXQiJyk7fX0sZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl9hY3Rpb247fX0se2tleTondGFyZ2V0JyxzZXQ6ZnVuY3Rpb24gc2V0KHRhcmdldCl7aWYodGFyZ2V0IT09dW5kZWZpbmVkKXtpZih0YXJnZXQmJih0eXBlb2YgdGFyZ2V0PT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZih0YXJnZXQpKT09PSdvYmplY3QnJiZ0YXJnZXQubm9kZVR5cGU9PT0xKXtpZih0aGlzLmFjdGlvbj09PSdjb3B5JyYmdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSl7dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSAicmVhZG9ubHkiIGluc3RlYWQgb2YgImRpc2FibGVkIiBhdHRyaWJ1dGUnKTt9CmlmKHRoaXMuYWN0aW9uPT09J2N1dCcmJih0YXJnZXQuaGFzQXR0cmlidXRlKCdyZWFkb25seScpfHx0YXJnZXQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSl7dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gWW91IGNhblwndCBjdXQgdGV4dCBmcm9tIGVsZW1lbnRzIHdpdGggInJlYWRvbmx5IiBvciAiZGlzYWJsZWQiIGF0dHJpYnV0ZXMnKTt9CnRoaXMuX3RhcmdldD10YXJnZXQ7fWVsc2V7dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIHZhbHVlLCB1c2UgYSB2YWxpZCBFbGVtZW50Jyk7fX19LGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fdGFyZ2V0O319XSk7cmV0dXJuIENsaXBib2FyZEFjdGlvbjt9KCk7bW9kdWxlLmV4cG9ydHM9Q2xpcGJvYXJkQWN0aW9uO30pO30pLChmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXM9X193ZWJwYWNrX3JlcXVpcmVfXyg2KTt2YXIgZGVsZWdhdGU9X193ZWJwYWNrX3JlcXVpcmVfXyg1KTtmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LHR5cGUsY2FsbGJhY2spe2lmKCF0YXJnZXQmJiF0eXBlJiYhY2FsbGJhY2spe3Rocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCBhcmd1bWVudHMnKTt9CmlmKCFpcy5zdHJpbmcodHlwZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1NlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nJyk7fQppZighaXMuZm4oY2FsbGJhY2spKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlyZCBhcmd1bWVudCBtdXN0IGJlIGEgRnVuY3Rpb24nKTt9CmlmKGlzLm5vZGUodGFyZ2V0KSl7cmV0dXJuIGxpc3Rlbk5vZGUodGFyZ2V0LHR5cGUsY2FsbGJhY2spO30KZWxzZSBpZihpcy5ub2RlTGlzdCh0YXJnZXQpKXtyZXR1cm4gbGlzdGVuTm9kZUxpc3QodGFyZ2V0LHR5cGUsY2FsbGJhY2spO30KZWxzZSBpZihpcy5zdHJpbmcodGFyZ2V0KSl7cmV0dXJuIGxpc3RlblNlbGVjdG9yKHRhcmdldCx0eXBlLGNhbGxiYWNrKTt9CmVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZywgSFRNTEVsZW1lbnQsIEhUTUxDb2xsZWN0aW9uLCBvciBOb2RlTGlzdCcpO319CmZ1bmN0aW9uIGxpc3Rlbk5vZGUobm9kZSx0eXBlLGNhbGxiYWNrKXtub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSxjYWxsYmFjayk7cmV0dXJue2Rlc3Ryb3k6ZnVuY3Rpb24oKXtub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxjYWxsYmFjayk7fX19CmZ1bmN0aW9uIGxpc3Rlbk5vZGVMaXN0KG5vZGVMaXN0LHR5cGUsY2FsbGJhY2spe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsZnVuY3Rpb24obm9kZSl7bm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsY2FsbGJhY2spO30pO3JldHVybntkZXN0cm95OmZ1bmN0aW9uKCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChub2RlTGlzdCxmdW5jdGlvbihub2RlKXtub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxjYWxsYmFjayk7fSk7fX19CmZ1bmN0aW9uIGxpc3RlblNlbGVjdG9yKHNlbGVjdG9yLHR5cGUsY2FsbGJhY2spe3JldHVybiBkZWxlZ2F0ZShkb2N1bWVudC5ib2R5LHNlbGVjdG9yLHR5cGUsY2FsbGJhY2spO30KbW9kdWxlLmV4cG9ydHM9bGlzdGVuO30pLChmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7ZnVuY3Rpb24gRSgpe30KRS5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKG5hbWUsY2FsbGJhY2ssY3R4KXt2YXIgZT10aGlzLmV8fCh0aGlzLmU9e30pOyhlW25hbWVdfHwoZVtuYW1lXT1bXSkpLnB1c2goe2ZuOmNhbGxiYWNrLGN0eDpjdHh9KTtyZXR1cm4gdGhpczt9LG9uY2U6ZnVuY3Rpb24obmFtZSxjYWxsYmFjayxjdHgpe3ZhciBzZWxmPXRoaXM7ZnVuY3Rpb24gbGlzdGVuZXIoKXtzZWxmLm9mZihuYW1lLGxpc3RlbmVyKTtjYWxsYmFjay5hcHBseShjdHgsYXJndW1lbnRzKTt9O2xpc3RlbmVyLl89Y2FsbGJhY2sKcmV0dXJuIHRoaXMub24obmFtZSxsaXN0ZW5lcixjdHgpO30sZW1pdDpmdW5jdGlvbihuYW1lKXt2YXIgZGF0YT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt2YXIgZXZ0QXJyPSgodGhpcy5lfHwodGhpcy5lPXt9KSlbbmFtZV18fFtdKS5zbGljZSgpO3ZhciBpPTA7dmFyIGxlbj1ldnRBcnIubGVuZ3RoO2ZvcihpO2k8bGVuO2krKyl7ZXZ0QXJyW2ldLmZuLmFwcGx5KGV2dEFycltpXS5jdHgsZGF0YSk7fQpyZXR1cm4gdGhpczt9LG9mZjpmdW5jdGlvbihuYW1lLGNhbGxiYWNrKXt2YXIgZT10aGlzLmV8fCh0aGlzLmU9e30pO3ZhciBldnRzPWVbbmFtZV07dmFyIGxpdmVFdmVudHM9W107aWYoZXZ0cyYmY2FsbGJhY2spe2Zvcih2YXIgaT0wLGxlbj1ldnRzLmxlbmd0aDtpPGxlbjtpKyspe2lmKGV2dHNbaV0uZm4hPT1jYWxsYmFjayYmZXZ0c1tpXS5mbi5fIT09Y2FsbGJhY2spCmxpdmVFdmVudHMucHVzaChldnRzW2ldKTt9fQoobGl2ZUV2ZW50cy5sZW5ndGgpP2VbbmFtZV09bGl2ZUV2ZW50czpkZWxldGUgZVtuYW1lXTtyZXR1cm4gdGhpczt9fTttb2R1bGUuZXhwb3J0cz1FO30pLChmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187KGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXtpZih0cnVlKXshKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX189W21vZHVsZSxfX3dlYnBhY2tfcmVxdWlyZV9fKDApLF9fd2VicGFja19yZXF1aXJlX18oMiksX193ZWJwYWNrX3JlcXVpcmVfXygxKV0sX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fPShmYWN0b3J5KSxfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXz0odHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXz09PSdmdW5jdGlvbic/KF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKTpfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIT09dW5kZWZpbmVkJiYobW9kdWxlLmV4cG9ydHM9X19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTt9ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyE9PSJ1bmRlZmluZWQiKXtmYWN0b3J5KG1vZHVsZSxyZXF1aXJlKCcuL2NsaXBib2FyZC1hY3Rpb24nKSxyZXF1aXJlKCd0aW55LWVtaXR0ZXInKSxyZXF1aXJlKCdnb29kLWxpc3RlbmVyJykpO31lbHNle3ZhciBtb2Q9e2V4cG9ydHM6e319O2ZhY3RvcnkobW9kLGdsb2JhbC5jbGlwYm9hcmRBY3Rpb24sZ2xvYmFsLnRpbnlFbWl0dGVyLGdsb2JhbC5nb29kTGlzdGVuZXIpO2dsb2JhbC5jbGlwYm9hcmQ9bW9kLmV4cG9ydHM7fX0pKHRoaXMsZnVuY3Rpb24obW9kdWxlLF9jbGlwYm9hcmRBY3Rpb24sX3RpbnlFbWl0dGVyLF9nb29kTGlzdGVuZXIpeyd1c2Ugc3RyaWN0Jzt2YXIgX2NsaXBib2FyZEFjdGlvbjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xpcGJvYXJkQWN0aW9uKTt2YXIgX3RpbnlFbWl0dGVyMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90aW55RW1pdHRlcik7dmFyIF9nb29kTGlzdGVuZXIyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2RMaXN0ZW5lcik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O30KdmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT0ic3ltYm9sIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmo7fTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319CnZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CnJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTtmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLGNhbGwpe2lmKCFzZWxmKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO30KcmV0dXJuIGNhbGwmJih0eXBlb2YgY2FsbD09PSJvYmplY3QifHx0eXBlb2YgY2FsbD09PSJmdW5jdGlvbiIpP2NhbGw6c2VsZjt9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PSJmdW5jdGlvbiImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHN1cGVyQ2xhc3MpO30Kc3ViQ2xhc3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyYmc3VwZXJDbGFzcy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpzdWJDbGFzcyxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSk7aWYoc3VwZXJDbGFzcylPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLHN1cGVyQ2xhc3MpOnN1YkNsYXNzLl9fcHJvdG9fXz1zdXBlckNsYXNzO30KdmFyIENsaXBib2FyZD1mdW5jdGlvbihfRW1pdHRlcil7X2luaGVyaXRzKENsaXBib2FyZCxfRW1pdHRlcik7ZnVuY3Rpb24gQ2xpcGJvYXJkKHRyaWdnZXIsb3B0aW9ucyl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsQ2xpcGJvYXJkKTt2YXIgX3RoaXM9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoQ2xpcGJvYXJkLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKENsaXBib2FyZCkpLmNhbGwodGhpcykpO190aGlzLnJlc29sdmVPcHRpb25zKG9wdGlvbnMpO190aGlzLmxpc3RlbkNsaWNrKHRyaWdnZXIpO3JldHVybiBfdGhpczt9Cl9jcmVhdGVDbGFzcyhDbGlwYm9hcmQsW3trZXk6J3Jlc29sdmVPcHRpb25zJyx2YWx1ZTpmdW5jdGlvbiByZXNvbHZlT3B0aW9ucygpe3ZhciBvcHRpb25zPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTp7fTt0aGlzLmFjdGlvbj10eXBlb2Ygb3B0aW9ucy5hY3Rpb249PT0nZnVuY3Rpb24nP29wdGlvbnMuYWN0aW9uOnRoaXMuZGVmYXVsdEFjdGlvbjt0aGlzLnRhcmdldD10eXBlb2Ygb3B0aW9ucy50YXJnZXQ9PT0nZnVuY3Rpb24nP29wdGlvbnMudGFyZ2V0OnRoaXMuZGVmYXVsdFRhcmdldDt0aGlzLnRleHQ9dHlwZW9mIG9wdGlvbnMudGV4dD09PSdmdW5jdGlvbic/b3B0aW9ucy50ZXh0OnRoaXMuZGVmYXVsdFRleHQ7dGhpcy5jb250YWluZXI9X3R5cGVvZihvcHRpb25zLmNvbnRhaW5lcik9PT0nb2JqZWN0Jz9vcHRpb25zLmNvbnRhaW5lcjpkb2N1bWVudC5ib2R5O319LHtrZXk6J2xpc3RlbkNsaWNrJyx2YWx1ZTpmdW5jdGlvbiBsaXN0ZW5DbGljayh0cmlnZ2VyKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy5saXN0ZW5lcj0oMCxfZ29vZExpc3RlbmVyMi5kZWZhdWx0KSh0cmlnZ2VyLCdjbGljaycsZnVuY3Rpb24oZSl7cmV0dXJuIF90aGlzMi5vbkNsaWNrKGUpO30pO319LHtrZXk6J29uQ2xpY2snLHZhbHVlOmZ1bmN0aW9uIG9uQ2xpY2soZSl7dmFyIHRyaWdnZXI9ZS5kZWxlZ2F0ZVRhcmdldHx8ZS5jdXJyZW50VGFyZ2V0O2lmKHRoaXMuY2xpcGJvYXJkQWN0aW9uKXt0aGlzLmNsaXBib2FyZEFjdGlvbj1udWxsO30KdGhpcy5jbGlwYm9hcmRBY3Rpb249bmV3IF9jbGlwYm9hcmRBY3Rpb24yLmRlZmF1bHQoe2FjdGlvbjp0aGlzLmFjdGlvbih0cmlnZ2VyKSx0YXJnZXQ6dGhpcy50YXJnZXQodHJpZ2dlciksdGV4dDp0aGlzLnRleHQodHJpZ2dlciksY29udGFpbmVyOnRoaXMuY29udGFpbmVyLHRyaWdnZXI6dHJpZ2dlcixlbWl0dGVyOnRoaXN9KTt9fSx7a2V5OidkZWZhdWx0QWN0aW9uJyx2YWx1ZTpmdW5jdGlvbiBkZWZhdWx0QWN0aW9uKHRyaWdnZXIpe3JldHVybiBnZXRBdHRyaWJ1dGVWYWx1ZSgnYWN0aW9uJyx0cmlnZ2VyKTt9fSx7a2V5OidkZWZhdWx0VGFyZ2V0Jyx2YWx1ZTpmdW5jdGlvbiBkZWZhdWx0VGFyZ2V0KHRyaWdnZXIpe3ZhciBzZWxlY3Rvcj1nZXRBdHRyaWJ1dGVWYWx1ZSgndGFyZ2V0Jyx0cmlnZ2VyKTtpZihzZWxlY3Rvcil7cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO319fSx7a2V5OidkZWZhdWx0VGV4dCcsdmFsdWU6ZnVuY3Rpb24gZGVmYXVsdFRleHQodHJpZ2dlcil7cmV0dXJuIGdldEF0dHJpYnV0ZVZhbHVlKCd0ZXh0Jyx0cmlnZ2VyKTt9fSx7a2V5OidkZXN0cm95Jyx2YWx1ZTpmdW5jdGlvbiBkZXN0cm95KCl7dGhpcy5saXN0ZW5lci5kZXN0cm95KCk7aWYodGhpcy5jbGlwYm9hcmRBY3Rpb24pe3RoaXMuY2xpcGJvYXJkQWN0aW9uLmRlc3Ryb3koKTt0aGlzLmNsaXBib2FyZEFjdGlvbj1udWxsO319fV0sW3trZXk6J2lzU3VwcG9ydGVkJyx2YWx1ZTpmdW5jdGlvbiBpc1N1cHBvcnRlZCgpe3ZhciBhY3Rpb249YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzBdOlsnY29weScsJ2N1dCddO3ZhciBhY3Rpb25zPXR5cGVvZiBhY3Rpb249PT0nc3RyaW5nJz9bYWN0aW9uXTphY3Rpb247dmFyIHN1cHBvcnQ9ISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQ7YWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGFjdGlvbil7c3VwcG9ydD1zdXBwb3J0JiYhIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChhY3Rpb24pO30pO3JldHVybiBzdXBwb3J0O319XSk7cmV0dXJuIENsaXBib2FyZDt9KF90aW55RW1pdHRlcjIuZGVmYXVsdCk7ZnVuY3Rpb24gZ2V0QXR0cmlidXRlVmFsdWUoc3VmZml4LGVsZW1lbnQpe3ZhciBhdHRyaWJ1dGU9J2RhdGEtY2xpcGJvYXJkLScrc3VmZml4O2lmKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpKXtyZXR1cm47fQpyZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTt9Cm1vZHVsZS5leHBvcnRzPUNsaXBib2FyZDt9KTt9KSwoZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBET0NVTUVOVF9OT0RFX1RZUEU9OTtpZih0eXBlb2YgRWxlbWVudCE9PSd1bmRlZmluZWQnJiYhRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyl7dmFyIHByb3RvPUVsZW1lbnQucHJvdG90eXBlO3Byb3RvLm1hdGNoZXM9cHJvdG8ubWF0Y2hlc1NlbGVjdG9yfHxwcm90by5tb3pNYXRjaGVzU2VsZWN0b3J8fHByb3RvLm1zTWF0Y2hlc1NlbGVjdG9yfHxwcm90by5vTWF0Y2hlc1NlbGVjdG9yfHxwcm90by53ZWJraXRNYXRjaGVzU2VsZWN0b3I7fQpmdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsc2VsZWN0b3Ipe3doaWxlKGVsZW1lbnQmJmVsZW1lbnQubm9kZVR5cGUhPT1ET0NVTUVOVF9OT0RFX1RZUEUpe2lmKHR5cGVvZiBlbGVtZW50Lm1hdGNoZXM9PT0nZnVuY3Rpb24nJiZlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKXtyZXR1cm4gZWxlbWVudDt9CmVsZW1lbnQ9ZWxlbWVudC5wYXJlbnROb2RlO319Cm1vZHVsZS5leHBvcnRzPWNsb3Nlc3Q7fSksKGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBjbG9zZXN0PV9fd2VicGFja19yZXF1aXJlX18oNCk7ZnVuY3Rpb24gX2RlbGVnYXRlKGVsZW1lbnQsc2VsZWN0b3IsdHlwZSxjYWxsYmFjayx1c2VDYXB0dXJlKXt2YXIgbGlzdGVuZXJGbj1saXN0ZW5lci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsbGlzdGVuZXJGbix1c2VDYXB0dXJlKTtyZXR1cm57ZGVzdHJveTpmdW5jdGlvbigpe2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLGxpc3RlbmVyRm4sdXNlQ2FwdHVyZSk7fX19CmZ1bmN0aW9uIGRlbGVnYXRlKGVsZW1lbnRzLHNlbGVjdG9yLHR5cGUsY2FsbGJhY2ssdXNlQ2FwdHVyZSl7aWYodHlwZW9mIGVsZW1lbnRzLmFkZEV2ZW50TGlzdGVuZXI9PT0nZnVuY3Rpb24nKXtyZXR1cm4gX2RlbGVnYXRlLmFwcGx5KG51bGwsYXJndW1lbnRzKTt9CmlmKHR5cGVvZiB0eXBlPT09J2Z1bmN0aW9uJyl7cmV0dXJuIF9kZWxlZ2F0ZS5iaW5kKG51bGwsZG9jdW1lbnQpLmFwcGx5KG51bGwsYXJndW1lbnRzKTt9CmlmKHR5cGVvZiBlbGVtZW50cz09PSdzdHJpbmcnKXtlbGVtZW50cz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTt9CnJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZWxlbWVudHMsZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuIF9kZWxlZ2F0ZShlbGVtZW50LHNlbGVjdG9yLHR5cGUsY2FsbGJhY2ssdXNlQ2FwdHVyZSk7fSk7fQpmdW5jdGlvbiBsaXN0ZW5lcihlbGVtZW50LHNlbGVjdG9yLHR5cGUsY2FsbGJhY2spe3JldHVybiBmdW5jdGlvbihlKXtlLmRlbGVnYXRlVGFyZ2V0PWNsb3Nlc3QoZS50YXJnZXQsc2VsZWN0b3IpO2lmKGUuZGVsZWdhdGVUYXJnZXQpe2NhbGxiYWNrLmNhbGwoZWxlbWVudCxlKTt9fX0KbW9kdWxlLmV4cG9ydHM9ZGVsZWdhdGU7fSksKGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXtleHBvcnRzLm5vZGU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmdmFsdWUubm9kZVR5cGU9PT0xO307ZXhwb3J0cy5ub2RlTGlzdD1mdW5jdGlvbih2YWx1ZSl7dmFyIHR5cGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQmJih0eXBlPT09J1tvYmplY3QgTm9kZUxpc3RdJ3x8dHlwZT09PSdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpJiYoJ2xlbmd0aCdpbiB2YWx1ZSkmJih2YWx1ZS5sZW5ndGg9PT0wfHxleHBvcnRzLm5vZGUodmFsdWVbMF0pKTt9O2V4cG9ydHMuc3RyaW5nPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlPT09J3N0cmluZyd8fHZhbHVlIGluc3RhbmNlb2YgU3RyaW5nO307ZXhwb3J0cy5mbj1mdW5jdGlvbih2YWx1ZSl7dmFyIHR5cGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtyZXR1cm4gdHlwZT09PSdbb2JqZWN0IEZ1bmN0aW9uXSc7fTt9KSwoZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2Z1bmN0aW9uIHNlbGVjdChlbGVtZW50KXt2YXIgc2VsZWN0ZWRUZXh0O2lmKGVsZW1lbnQubm9kZU5hbWU9PT0nU0VMRUNUJyl7ZWxlbWVudC5mb2N1cygpO3NlbGVjdGVkVGV4dD1lbGVtZW50LnZhbHVlO30KZWxzZSBpZihlbGVtZW50Lm5vZGVOYW1lPT09J0lOUFVUJ3x8ZWxlbWVudC5ub2RlTmFtZT09PSdURVhUQVJFQScpe3ZhciBpc1JlYWRPbmx5PWVsZW1lbnQuaGFzQXR0cmlidXRlKCdyZWFkb25seScpO2lmKCFpc1JlYWRPbmx5KXtlbGVtZW50LnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCcnKTt9CmVsZW1lbnQuc2VsZWN0KCk7ZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLGVsZW1lbnQudmFsdWUubGVuZ3RoKTtpZighaXNSZWFkT25seSl7ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyk7fQpzZWxlY3RlZFRleHQ9ZWxlbWVudC52YWx1ZTt9CmVsc2V7aWYoZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpKXtlbGVtZW50LmZvY3VzKCk7fQp2YXIgc2VsZWN0aW9uPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTt2YXIgcmFuZ2U9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWxlbWVudCk7c2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO3NlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7c2VsZWN0ZWRUZXh0PXNlbGVjdGlvbi50b1N0cmluZygpO30KcmV0dXJuIHNlbGVjdGVkVGV4dDt9Cm1vZHVsZS5leHBvcnRzPXNlbGVjdDt9KV0pO30pOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qU2lnbmF0dXJlL2pTaWduYXR1cmVDdXN0b20uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCjsoZnVuY3Rpb24oKXt2YXIgYXBpbmFtZXNwYWNlPSdqU2lnbmF0dXJlJwp2YXIgS2lja1RpbWVyQ2xhc3M9ZnVuY3Rpb24odGltZSxjYWxsYmFjayl7dmFyIHRpbWVyO3RoaXMua2ljaz1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aW1lcik7dGltZXI9c2V0VGltZW91dChjYWxsYmFjayx0aW1lKTt9CnRoaXMuY2xlYXI9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGltZXIpO30KcmV0dXJuIHRoaXM7fQp2YXIgUHViU3ViQ2xhc3M9ZnVuY3Rpb24oY29udGV4dCl7J3VzZSBzdHJpY3QnCnRoaXMudG9waWNzPXt9O3RoaXMuY29udGV4dD1jb250ZXh0P2NvbnRleHQ6dGhpczt0aGlzLnB1Ymxpc2g9ZnVuY3Rpb24odG9waWMsYXJnMSxhcmcyLGV0Yyl7J3VzZSBzdHJpY3QnCmlmKHRoaXMudG9waWNzW3RvcGljXSl7dmFyIGN1cnJlbnRUb3BpYz10aGlzLnRvcGljc1t0b3BpY10sYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksdG9yZW1vdmU9W10sdG9ydW49W10sZm4saSxsLHBhaXI7Zm9yKGk9MCxsPWN1cnJlbnRUb3BpYy5sZW5ndGg7aTxsO2krKyl7cGFpcj1jdXJyZW50VG9waWNbaV07Zm49cGFpclswXTtpZihwYWlyWzFdKXtwYWlyWzBdPWZ1bmN0aW9uKCl7fTt0b3JlbW92ZS5wdXNoKGkpO30KdG9ydW4ucHVzaChmbik7fQpmb3IoaT0wLGw9dG9yZW1vdmUubGVuZ3RoO2k8bDtpKyspe2N1cnJlbnRUb3BpYy5zcGxpY2UodG9yZW1vdmVbaV0sMSk7fQpmb3IoaT0wLGw9dG9ydW4ubGVuZ3RoO2k8bDtpKyspe3RvcnVuW2ldLmFwcGx5KHRoaXMuY29udGV4dCxhcmdzKTt9fX0KdGhpcy5zdWJzY3JpYmU9ZnVuY3Rpb24odG9waWMsY2FsbGJhY2ssb25jZSl7J3VzZSBzdHJpY3QnCmlmKCF0aGlzLnRvcGljc1t0b3BpY10pe3RoaXMudG9waWNzW3RvcGljXT1bW2NhbGxiYWNrLG9uY2VdXTt9ZWxzZXt0aGlzLnRvcGljc1t0b3BpY10ucHVzaChbY2FsbGJhY2ssb25jZV0pO30KcmV0dXJueyJ0b3BpYyI6dG9waWMsImNhbGxiYWNrIjpjYWxsYmFja307fTt0aGlzLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKHRva2VuKXtpZih0aGlzLnRvcGljc1t0b2tlbi50b3BpY10pe3ZhciBjdXJyZW50VG9waWM9dGhpcy50b3BpY3NbdG9rZW4udG9waWNdO2Zvcih2YXIgaT0wLGw9Y3VycmVudFRvcGljLmxlbmd0aDtpPGw7aSsrKXtpZihjdXJyZW50VG9waWNbaV0mJmN1cnJlbnRUb3BpY1tpXVswXT09PXRva2VuLmNhbGxiYWNrKXtjdXJyZW50VG9waWMuc3BsaWNlKGksMSk7fX19fX0KZnVuY3Rpb24gZ2V0Q29sb3JzKCRlKXt2YXIgdG1wLHVuZGVmLGZyb250Y29sb3I9JGUuY3NzKCdjb2xvcicpLGJhY2tjb2xvcixlPSRlWzBdO3ZhciB0b09mRE9NPWZhbHNlO3doaWxlKGUmJiFiYWNrY29sb3ImJiF0b09mRE9NKXt0cnl7dG1wPSQoZSkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7fWNhdGNoKGV4KXt0bXA9J3RyYW5zcGFyZW50Jzt9CmlmKHRtcCE9PSd0cmFuc3BhcmVudCcmJnRtcCE9PSdyZ2JhKDAsIDAsIDAsIDApJyl7YmFja2NvbG9yPXRtcDt9CnRvT2ZET009ZS5ib2R5O2U9ZS5wYXJlbnROb2RlO30KdmFyIHJnYmFyZWdleD0vcmdiW2FdKlwoKFxkKyksXHMqKFxkKyksXHMqKFxkKykvLGhleHJlZ2V4PS8jKFtBYUJiQ2NEZEVlRmZcZF17Mn0pKFtBYUJiQ2NEZEVlRmZcZF17Mn0pKFtBYUJiQ2NEZEVlRmZcZF17Mn0pLyxmcm9udGNvbG9yY29tcG9uZW50czt0bXA9dW5kZWY7dG1wPWZyb250Y29sb3IubWF0Y2gocmdiYXJlZ2V4KTtpZih0bXApe2Zyb250Y29sb3Jjb21wb25lbnRzPXsncic6cGFyc2VJbnQodG1wWzFdLDEwKSwnZyc6cGFyc2VJbnQodG1wWzJdLDEwKSwnYic6cGFyc2VJbnQodG1wWzNdLDEwKX07fWVsc2V7dG1wPWZyb250Y29sb3IubWF0Y2goaGV4cmVnZXgpO2lmKHRtcCl7ZnJvbnRjb2xvcmNvbXBvbmVudHM9eydyJzpwYXJzZUludCh0bXBbMV0sMTYpLCdnJzpwYXJzZUludCh0bXBbMl0sMTYpLCdiJzpwYXJzZUludCh0bXBbM10sMTYpfTt9fQp2YXIgYmFja2NvbG9yY29tcG9uZW50cwppZighYmFja2NvbG9yKXtpZihmcm9udGNvbG9yY29tcG9uZW50cyl7aWYoTWF0aC5tYXguYXBwbHkobnVsbCxbZnJvbnRjb2xvcmNvbXBvbmVudHMucixmcm9udGNvbG9yY29tcG9uZW50cy5nLGZyb250Y29sb3Jjb21wb25lbnRzLmJdKT4xMjcpe2JhY2tjb2xvcmNvbXBvbmVudHM9eydyJzowLCdnJzowLCdiJzowfTt9ZWxzZXtiYWNrY29sb3Jjb21wb25lbnRzPXsncic6MjU1LCdnJzoyNTUsJ2InOjI1NX07fX1lbHNle2JhY2tjb2xvcmNvbXBvbmVudHM9eydyJzoyNTUsJ2cnOjI1NSwnYic6MjU1fTt9fWVsc2V7dG1wPXVuZGVmO3RtcD1iYWNrY29sb3IubWF0Y2gocmdiYXJlZ2V4KTtpZih0bXApe2JhY2tjb2xvcmNvbXBvbmVudHM9eydyJzpwYXJzZUludCh0bXBbMV0sMTApLCdnJzpwYXJzZUludCh0bXBbMl0sMTApLCdiJzpwYXJzZUludCh0bXBbM10sMTApfTt9ZWxzZXt0bXA9YmFja2NvbG9yLm1hdGNoKGhleHJlZ2V4KTtpZih0bXApe2JhY2tjb2xvcmNvbXBvbmVudHM9eydyJzpwYXJzZUludCh0bXBbMV0sMTYpLCdnJzpwYXJzZUludCh0bXBbMl0sMTYpLCdiJzpwYXJzZUludCh0bXBbM10sMTYpfTt9fX0KdmFyIHRvUkdCZm49ZnVuY3Rpb24obyl7cmV0dXJuJ3JnYignK1tvLnIsby5nLG8uYl0uam9pbignLCAnKSsnKSd9LGRlY29yY29sb3Jjb21wb25lbnRzLGZyb250Y29sb3JicmlnaHRuZXNzLGFkanVzdGVkO2lmKGZyb250Y29sb3Jjb21wb25lbnRzJiZiYWNrY29sb3Jjb21wb25lbnRzKXt2YXIgYmFja2NvbG9yYnJpZ2h0bmVzcz1NYXRoLm1heC5hcHBseShudWxsLFtmcm9udGNvbG9yY29tcG9uZW50cy5yLGZyb250Y29sb3Jjb21wb25lbnRzLmcsZnJvbnRjb2xvcmNvbXBvbmVudHMuYl0pO2Zyb250Y29sb3JicmlnaHRuZXNzPU1hdGgubWF4LmFwcGx5KG51bGwsW2JhY2tjb2xvcmNvbXBvbmVudHMucixiYWNrY29sb3Jjb21wb25lbnRzLmcsYmFja2NvbG9yY29tcG9uZW50cy5iXSk7YWRqdXN0ZWQ9TWF0aC5yb3VuZChmcm9udGNvbG9yYnJpZ2h0bmVzcysoLTEqKGZyb250Y29sb3JicmlnaHRuZXNzLWJhY2tjb2xvcmJyaWdodG5lc3MpKjAuNzUpKTtkZWNvcmNvbG9yY29tcG9uZW50cz17J3InOmFkanVzdGVkLCdnJzphZGp1c3RlZCwnYic6YWRqdXN0ZWR9O31lbHNlIGlmKGZyb250Y29sb3Jjb21wb25lbnRzKXtmcm9udGNvbG9yYnJpZ2h0bmVzcz1NYXRoLm1heC5hcHBseShudWxsLFtmcm9udGNvbG9yY29tcG9uZW50cy5yLGZyb250Y29sb3Jjb21wb25lbnRzLmcsZnJvbnRjb2xvcmNvbXBvbmVudHMuYl0pO3ZhciBwb2xhcml0eT0rMTtpZihmcm9udGNvbG9yYnJpZ2h0bmVzcz4xMjcpe3BvbGFyaXR5PS0xO30KYWRqdXN0ZWQ9TWF0aC5yb3VuZChmcm9udGNvbG9yYnJpZ2h0bmVzcysocG9sYXJpdHkqOTYpKTtkZWNvcmNvbG9yY29tcG9uZW50cz17J3InOmFkanVzdGVkLCdnJzphZGp1c3RlZCwnYic6YWRqdXN0ZWR9O31lbHNle2RlY29yY29sb3Jjb21wb25lbnRzPXsncic6MTkxLCdnJzoxOTEsJ2InOjE5MX07fQpyZXR1cm57J2NvbG9yJzpmcm9udGNvbG9yLCdiYWNrZ3JvdW5kLWNvbG9yJzpiYWNrY29sb3Jjb21wb25lbnRzP3RvUkdCZm4oYmFja2NvbG9yY29tcG9uZW50cyk6YmFja2NvbG9yLCdkZWNvci1jb2xvcic6dG9SR0JmbihkZWNvcmNvbG9yY29tcG9uZW50cyl9O30KZnVuY3Rpb24gVmVjdG9yKHgseSl7dGhpcy54PXg7dGhpcy55PXk7dGhpcy5yZXZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCotMSx0aGlzLnkqLTEpO307dGhpcy5fbGVuZ3RoPW51bGw7dGhpcy5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtpZighdGhpcy5fbGVuZ3RoKXt0aGlzLl9sZW5ndGg9TWF0aC5zcXJ0KE1hdGgucG93KHRoaXMueCwyKStNYXRoLnBvdyh0aGlzLnksMikpO30KcmV0dXJuIHRoaXMuX2xlbmd0aDt9O3ZhciBwb2xhcml0eT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5yb3VuZChlL01hdGguYWJzKGUpKTt9O3RoaXMucmVzaXplVG89ZnVuY3Rpb24obGVuZ3RoKXtpZih0aGlzLng9PT0wJiZ0aGlzLnk9PT0wKXt0aGlzLl9sZW5ndGg9MDt9ZWxzZSBpZih0aGlzLng9PT0wKXt0aGlzLl9sZW5ndGg9bGVuZ3RoO3RoaXMueT1sZW5ndGgqcG9sYXJpdHkodGhpcy55KTt9ZWxzZSBpZih0aGlzLnk9PT0wKXt0aGlzLl9sZW5ndGg9bGVuZ3RoO3RoaXMueD1sZW5ndGgqcG9sYXJpdHkodGhpcy54KTt9ZWxzZXt2YXIgcHJvcG9ydGlvbj1NYXRoLmFicyh0aGlzLnkvdGhpcy54KSx4PU1hdGguc3FydChNYXRoLnBvdyhsZW5ndGgsMikvKDErTWF0aC5wb3cocHJvcG9ydGlvbiwyKSkpLHk9cHJvcG9ydGlvbip4O3RoaXMuX2xlbmd0aD1sZW5ndGg7dGhpcy54PXgqcG9sYXJpdHkodGhpcy54KTt0aGlzLnk9eSpwb2xhcml0eSh0aGlzLnkpO30KcmV0dXJuIHRoaXM7fTt0aGlzLmFuZ2xlVG89ZnVuY3Rpb24odmVjdG9yQil7dmFyIGRpdmlzb3I9dGhpcy5nZXRMZW5ndGgoKSp2ZWN0b3JCLmdldExlbmd0aCgpO2lmKGRpdmlzb3I9PT0wKXtyZXR1cm4gMDt9ZWxzZXtyZXR1cm4gTWF0aC5hY29zKE1hdGgubWluKE1hdGgubWF4KCh0aGlzLngqdmVjdG9yQi54K3RoaXMueSp2ZWN0b3JCLnkpL2Rpdmlzb3IsLTEuMCksMS4wKSkvTWF0aC5QSTt9fTt9CmZ1bmN0aW9uIFBvaW50KHgseSl7dGhpcy54PXg7dGhpcy55PXk7dGhpcy5nZXRWZWN0b3JUb0Nvb3JkaW5hdGVzPWZ1bmN0aW9uKHgseSl7cmV0dXJuIG5ldyBWZWN0b3IoeC10aGlzLngseS10aGlzLnkpO307dGhpcy5nZXRWZWN0b3JGcm9tQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oeCx5KXtyZXR1cm4gdGhpcy5nZXRWZWN0b3JUb0Nvb3JkaW5hdGVzKHgseSkucmV2ZXJzZSgpO307dGhpcy5nZXRWZWN0b3JUb1BvaW50PWZ1bmN0aW9uKHBvaW50KXtyZXR1cm4gbmV3IFZlY3Rvcihwb2ludC54LXRoaXMueCxwb2ludC55LXRoaXMueSk7fTt0aGlzLmdldFZlY3RvckZyb21Qb2ludD1mdW5jdGlvbihwb2ludCl7cmV0dXJuIHRoaXMuZ2V0VmVjdG9yVG9Qb2ludChwb2ludCkucmV2ZXJzZSgpO307fQpmdW5jdGlvbiBEYXRhRW5naW5lKHN0b3JhZ2VPYmplY3QsY29udGV4dCxzdGFydFN0cm9rZUZuLGFkZFRvU3Ryb2tlRm4sZW5kU3Ryb2tlRm4pe3RoaXMuZGF0YT1zdG9yYWdlT2JqZWN0O3RoaXMuY29udGV4dD1jb250ZXh0O2lmKHN0b3JhZ2VPYmplY3QubGVuZ3RoKXt2YXIgbnVtb2ZzdHJva2VzPXN0b3JhZ2VPYmplY3QubGVuZ3RoLHN0cm9rZSxudW1vZnBvaW50cztmb3IodmFyIGk9MDtpPG51bW9mc3Ryb2tlcztpKyspe3N0cm9rZT1zdG9yYWdlT2JqZWN0W2ldO251bW9mcG9pbnRzPXN0cm9rZS54Lmxlbmd0aDtzdGFydFN0cm9rZUZuLmNhbGwoY29udGV4dCxzdHJva2UpO2Zvcih2YXIgaj0xO2o8bnVtb2Zwb2ludHM7aisrKXthZGRUb1N0cm9rZUZuLmNhbGwoY29udGV4dCxzdHJva2Usaik7fQplbmRTdHJva2VGbi5jYWxsKGNvbnRleHQsc3Ryb2tlKTt9fQp0aGlzLmNoYW5nZWQ9ZnVuY3Rpb24oKXt9O3RoaXMuc3RhcnRTdHJva2VGbj1zdGFydFN0cm9rZUZuO3RoaXMuYWRkVG9TdHJva2VGbj1hZGRUb1N0cm9rZUZuO3RoaXMuZW5kU3Ryb2tlRm49ZW5kU3Ryb2tlRm47dGhpcy5pblN0cm9rZT1mYWxzZTt0aGlzLl9sYXN0UG9pbnQ9bnVsbDt0aGlzLl9zdHJva2U9bnVsbDt0aGlzLnN0YXJ0U3Ryb2tlPWZ1bmN0aW9uKHBvaW50KXtpZihwb2ludCYmdHlwZW9mKHBvaW50LngpPT0ibnVtYmVyIiYmdHlwZW9mKHBvaW50LnkpPT0ibnVtYmVyIil7dGhpcy5fc3Ryb2tlPXsneCc6W3BvaW50LnhdLCd5JzpbcG9pbnQueV19O3RoaXMuZGF0YS5wdXNoKHRoaXMuX3N0cm9rZSk7dGhpcy5fbGFzdFBvaW50PXBvaW50O3RoaXMuaW5TdHJva2U9dHJ1ZTt2YXIgc3Ryb2tlPXRoaXMuX3N0cm9rZSxmbj10aGlzLnN0YXJ0U3Ryb2tlRm4sY29udGV4dD10aGlzLmNvbnRleHQ7c2V0VGltZW91dChmdW5jdGlvbigpe2ZuLmNhbGwoY29udGV4dCxzdHJva2UpfSwzKTtyZXR1cm4gcG9pbnQ7fWVsc2V7cmV0dXJuIG51bGw7fX07dGhpcy5hZGRUb1N0cm9rZT1mdW5jdGlvbihwb2ludCl7aWYodGhpcy5pblN0cm9rZSYmdHlwZW9mKHBvaW50LngpPT09Im51bWJlciImJnR5cGVvZihwb2ludC55KT09PSJudW1iZXIiJiYoTWF0aC5hYnMocG9pbnQueC10aGlzLl9sYXN0UG9pbnQueCkrTWF0aC5hYnMocG9pbnQueS10aGlzLl9sYXN0UG9pbnQueSkpPjQpe3ZhciBwb3NpdGlvbkluU3Ryb2tlPXRoaXMuX3N0cm9rZS54Lmxlbmd0aDt0aGlzLl9zdHJva2UueC5wdXNoKHBvaW50LngpO3RoaXMuX3N0cm9rZS55LnB1c2gocG9pbnQueSk7dGhpcy5fbGFzdFBvaW50PXBvaW50O3ZhciBzdHJva2U9dGhpcy5fc3Ryb2tlLGZuPXRoaXMuYWRkVG9TdHJva2VGbixjb250ZXh0PXRoaXMuY29udGV4dDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm4uY2FsbChjb250ZXh0LHN0cm9rZSxwb3NpdGlvbkluU3Ryb2tlKX0sMyk7cmV0dXJuIHBvaW50O31lbHNle3JldHVybiBudWxsO319O3RoaXMuZW5kU3Ryb2tlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5pblN0cm9rZTt0aGlzLmluU3Ryb2tlPWZhbHNlO3RoaXMuX2xhc3RQb2ludD1udWxsO2lmKGMpe3ZhciBzdHJva2U9dGhpcy5fc3Ryb2tlLGZuPXRoaXMuZW5kU3Ryb2tlRm4sY29udGV4dD10aGlzLmNvbnRleHQsY2hhbmdlZGZuPXRoaXMuY2hhbmdlZDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm4uY2FsbChjb250ZXh0LHN0cm9rZSk7Y2hhbmdlZGZuLmNhbGwoY29udGV4dCk7fSwzKTtyZXR1cm4gdHJ1ZTt9ZWxzZXtyZXR1cm4gbnVsbDt9fTt9CnZhciBiYXNpY0RvdD1mdW5jdGlvbihjdHgseCx5LHNpemUpe3ZhciBmaWxsU3R5bGU9Y3R4LmZpbGxTdHlsZTtjdHguZmlsbFN0eWxlPWN0eC5zdHJva2VTdHlsZTtjdHguZmlsbFJlY3QoeCtzaXplLy0yLHkrc2l6ZS8tMixzaXplLHNpemUpO2N0eC5maWxsU3R5bGU9ZmlsbFN0eWxlO30sYmFzaWNMaW5lPWZ1bmN0aW9uKGN0eCxzdGFydHgsc3RhcnR5LGVuZHgsZW5keSl7Y3R4LmJlZ2luUGF0aCgpO2N0eC5tb3ZlVG8oc3RhcnR4LHN0YXJ0eSk7Y3R4LmxpbmVUbyhlbmR4LGVuZHkpO2N0eC5jbG9zZVBhdGgoKTtjdHguc3Ryb2tlKCk7fSxiYXNpY0N1cnZlPWZ1bmN0aW9uKGN0eCxzdGFydHgsc3RhcnR5LGVuZHgsZW5keSxjcDF4LGNwMXksY3AyeCxjcDJ5KXtjdHguYmVnaW5QYXRoKCk7Y3R4Lm1vdmVUbyhzdGFydHgsc3RhcnR5KTtjdHguYmV6aWVyQ3VydmVUbyhjcDF4LGNwMXksY3AyeCxjcDJ5LGVuZHgsZW5keSk7Y3R4LmNsb3NlUGF0aCgpO2N0eC5zdHJva2UoKTt9LHN0cm9rZVN0YXJ0Q2FsbGJhY2s9ZnVuY3Rpb24oc3Ryb2tlKXtiYXNpY0RvdCh0aGlzLmNhbnZhc0NvbnRleHQsc3Ryb2tlLnhbMF0sc3Ryb2tlLnlbMF0sdGhpcy5zZXR0aW5ncy5saW5lV2lkdGgpO30sc3Ryb2tlQWRkQ2FsbGJhY2s9ZnVuY3Rpb24oc3Ryb2tlLHBvc2l0aW9uSW5TdHJva2Upe3ZhciBDcG9pbnQ9bmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2UtMV0sc3Ryb2tlLnlbcG9zaXRpb25JblN0cm9rZS0xXSksRHBvaW50PW5ldyBQb2ludChzdHJva2UueFtwb3NpdGlvbkluU3Ryb2tlXSxzdHJva2UueVtwb3NpdGlvbkluU3Ryb2tlXSksQ0R2ZWN0b3I9Q3BvaW50LmdldFZlY3RvclRvUG9pbnQoRHBvaW50KTtpZihwb3NpdGlvbkluU3Ryb2tlPjEpe3ZhciBCcG9pbnQ9bmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2UtMl0sc3Ryb2tlLnlbcG9zaXRpb25JblN0cm9rZS0yXSksQkN2ZWN0b3I9QnBvaW50LmdldFZlY3RvclRvUG9pbnQoQ3BvaW50KSxBQnZlY3RvcjtpZihCQ3ZlY3Rvci5nZXRMZW5ndGgoKT50aGlzLmxpbmVDdXJ2ZVRocmVzaG9sZCl7aWYocG9zaXRpb25JblN0cm9rZT4yKXtBQnZlY3Rvcj0obmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2UtM10sc3Ryb2tlLnlbcG9zaXRpb25JblN0cm9rZS0zXSkpLmdldFZlY3RvclRvUG9pbnQoQnBvaW50KTt9ZWxzZXtBQnZlY3Rvcj1uZXcgVmVjdG9yKDAsMCk7fQp2YXIgbWlubGVuZnJhY3Rpb249MC4wNSxtYXhsZW49QkN2ZWN0b3IuZ2V0TGVuZ3RoKCkqMC4zNSxBQkNhbmdsZT1CQ3ZlY3Rvci5hbmdsZVRvKEFCdmVjdG9yLnJldmVyc2UoKSksQkNEYW5nbGU9Q0R2ZWN0b3IuYW5nbGVUbyhCQ3ZlY3Rvci5yZXZlcnNlKCkpLEJDUDF2ZWN0b3I9bmV3IFZlY3RvcihBQnZlY3Rvci54K0JDdmVjdG9yLngsQUJ2ZWN0b3IueStCQ3ZlY3Rvci55KS5yZXNpemVUbyhNYXRoLm1heChtaW5sZW5mcmFjdGlvbixBQkNhbmdsZSkqbWF4bGVuKSxDQ1AydmVjdG9yPShuZXcgVmVjdG9yKEJDdmVjdG9yLngrQ0R2ZWN0b3IueCxCQ3ZlY3Rvci55K0NEdmVjdG9yLnkpKS5yZXZlcnNlKCkucmVzaXplVG8oTWF0aC5tYXgobWlubGVuZnJhY3Rpb24sQkNEYW5nbGUpKm1heGxlbik7YmFzaWNDdXJ2ZSh0aGlzLmNhbnZhc0NvbnRleHQsQnBvaW50LngsQnBvaW50LnksQ3BvaW50LngsQ3BvaW50LnksQnBvaW50LngrQkNQMXZlY3Rvci54LEJwb2ludC55K0JDUDF2ZWN0b3IueSxDcG9pbnQueCtDQ1AydmVjdG9yLngsQ3BvaW50LnkrQ0NQMnZlY3Rvci55KTt9fQppZihDRHZlY3Rvci5nZXRMZW5ndGgoKTw9dGhpcy5saW5lQ3VydmVUaHJlc2hvbGQpe2Jhc2ljTGluZSh0aGlzLmNhbnZhc0NvbnRleHQsQ3BvaW50LngsQ3BvaW50LnksRHBvaW50LngsRHBvaW50LnkpO319LHN0cm9rZUVuZENhbGxiYWNrPWZ1bmN0aW9uKHN0cm9rZSl7dmFyIHBvc2l0aW9uSW5TdHJva2U9c3Ryb2tlLngubGVuZ3RoLTE7aWYocG9zaXRpb25JblN0cm9rZT4wKXt2YXIgQ3BvaW50PW5ldyBQb2ludChzdHJva2UueFtwb3NpdGlvbkluU3Ryb2tlXSxzdHJva2UueVtwb3NpdGlvbkluU3Ryb2tlXSksQnBvaW50PW5ldyBQb2ludChzdHJva2UueFtwb3NpdGlvbkluU3Ryb2tlLTFdLHN0cm9rZS55W3Bvc2l0aW9uSW5TdHJva2UtMV0pLEJDdmVjdG9yPUJwb2ludC5nZXRWZWN0b3JUb1BvaW50KENwb2ludCksQUJ2ZWN0b3I7aWYoQkN2ZWN0b3IuZ2V0TGVuZ3RoKCk+dGhpcy5saW5lQ3VydmVUaHJlc2hvbGQpe2lmKHBvc2l0aW9uSW5TdHJva2U+MSl7QUJ2ZWN0b3I9KG5ldyBQb2ludChzdHJva2UueFtwb3NpdGlvbkluU3Ryb2tlLTJdLHN0cm9rZS55W3Bvc2l0aW9uSW5TdHJva2UtMl0pKS5nZXRWZWN0b3JUb1BvaW50KEJwb2ludCk7dmFyIEJDUDF2ZWN0b3I9bmV3IFZlY3RvcihBQnZlY3Rvci54K0JDdmVjdG9yLngsQUJ2ZWN0b3IueStCQ3ZlY3Rvci55KS5yZXNpemVUbyhCQ3ZlY3Rvci5nZXRMZW5ndGgoKS8yKTtiYXNpY0N1cnZlKHRoaXMuY2FudmFzQ29udGV4dCxCcG9pbnQueCxCcG9pbnQueSxDcG9pbnQueCxDcG9pbnQueSxCcG9pbnQueCtCQ1AxdmVjdG9yLngsQnBvaW50LnkrQkNQMXZlY3Rvci55LENwb2ludC54LENwb2ludC55KTt9ZWxzZXtiYXNpY0xpbmUodGhpcy5jYW52YXNDb250ZXh0LEJwb2ludC54LEJwb2ludC55LENwb2ludC54LENwb2ludC55KTt9fX19CmZ1bmN0aW9uIGNvbmRpdGlvbmFsbHlMaW5rQ2FudmFzUmVzaXplVG9XaW5kb3dSZXNpemUoalNpZ25hdHVyZUluc3RhbmNlLHNldHRpbmdzV2lkdGgsYXBpbmFtZXNwYWNlLGdsb2JhbEV2ZW50cyl7J3VzZSBzdHJpY3QnCmlmKHNldHRpbmdzV2lkdGg9PT0ncmF0aW8nfHxzZXR0aW5nc1dpZHRoLnNwbGl0KCcnKVtzZXR0aW5nc1dpZHRoLmxlbmd0aC0xXT09PSclJyl7dGhpcy5ldmVudFRva2Vuc1thcGluYW1lc3BhY2UrJy5wYXJlbnRyZXNpemVkJ109Z2xvYmFsRXZlbnRzLnN1YnNjcmliZShhcGluYW1lc3BhY2UrJy5wYXJlbnRyZXNpemVkJywoZnVuY3Rpb24oZXZlbnRUb2tlbnMsJHBhcmVudCxvcmlnaW5hbFBhcmVudFdpZHRoLHNpemVSYXRpbyl7J3VzZSBzdHJpY3QnCnJldHVybiBmdW5jdGlvbigpeyd1c2Ugc3RyaWN0Jwp2YXIgdz0kcGFyZW50LndpZHRoKCk7aWYodyE9PW9yaWdpbmFsUGFyZW50V2lkdGgpe2Zvcih2YXIga2V5IGluIGV2ZW50VG9rZW5zKXtpZihldmVudFRva2Vucy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtnbG9iYWxFdmVudHMudW5zdWJzY3JpYmUoZXZlbnRUb2tlbnNba2V5XSk7ZGVsZXRlIGV2ZW50VG9rZW5zW2tleV07fX0KdmFyIHNldHRpbmdzPWpTaWduYXR1cmVJbnN0YW5jZS5zZXR0aW5ncztqU2lnbmF0dXJlSW5zdGFuY2UuJHBhcmVudC5jaGlsZHJlbigpLnJlbW92ZSgpO2Zvcih2YXIga2V5IGluIGpTaWduYXR1cmVJbnN0YW5jZSl7aWYoalNpZ25hdHVyZUluc3RhbmNlLmhhc093blByb3BlcnR5KGtleSkpe2RlbGV0ZSBqU2lnbmF0dXJlSW5zdGFuY2Vba2V5XTt9fQpzZXR0aW5ncy5kYXRhPShmdW5jdGlvbihkYXRhLHNjYWxlKXt2YXIgbmV3RGF0YT1bXTt2YXIgbyxpLGwsaixtLHN0cm9rZTtmb3IoaT0wLGw9ZGF0YS5sZW5ndGg7aTxsO2krKyl7c3Ryb2tlPWRhdGFbaV07bz17J3gnOltdLCd5JzpbXX07Zm9yKGo9MCxtPXN0cm9rZS54Lmxlbmd0aDtqPG07aisrKXtvLngucHVzaChzdHJva2UueFtqXSpzY2FsZSk7by55LnB1c2goc3Ryb2tlLnlbal0qc2NhbGUpO30KbmV3RGF0YS5wdXNoKG8pO30KcmV0dXJuIG5ld0RhdGE7fSkoc2V0dGluZ3MuZGF0YSx3KjEuMC9vcmlnaW5hbFBhcmVudFdpZHRoKQokcGFyZW50W2FwaW5hbWVzcGFjZV0oc2V0dGluZ3MpO319fSkodGhpcy5ldmVudFRva2Vucyx0aGlzLiRwYXJlbnQsdGhpcy4kcGFyZW50LndpZHRoKCksdGhpcy5jYW52YXMud2lkdGgqMS4wL3RoaXMuY2FudmFzLmhlaWdodCkpfX07ZnVuY3Rpb24galNpZ25hdHVyZUNsYXNzKHBhcmVudCxvcHRpb25zLGluc3RhbmNlRXh0ZW5zaW9ucyl7dmFyICRwYXJlbnQ9dGhpcy4kcGFyZW50PSQocGFyZW50KSxldmVudFRva2Vucz10aGlzLmV2ZW50VG9rZW5zPXt9LGV2ZW50cz10aGlzLmV2ZW50cz1uZXcgUHViU3ViQ2xhc3ModGhpcyksZ2xvYmFsRXZlbnRzPSQuZm5bYXBpbmFtZXNwYWNlXSgnZ2xvYmFsRXZlbnRzJyksc2V0dGluZ3M9eyd3aWR0aCc6J3JhdGlvJywnaGVpZ2h0JzoncmF0aW8nLCdzaXplUmF0aW8nOjQsJ2NvbG9yJzonIzAwMCcsJ2JhY2tncm91bmQtY29sb3InOicjZmZmJywnZGVjb3ItY29sb3InOicjZWVlJywnbGluZVdpZHRoJzowLCdtaW5GYXRGaW5nZXJDb21wZW5zYXRpb24nOi0xMCwnc2hvd1VuZG9CdXR0b24nOmZhbHNlLCdyZWFkT25seSc6ZmFsc2UsJ2RhdGEnOltdfTskLmV4dGVuZChzZXR0aW5ncyxnZXRDb2xvcnMoJHBhcmVudCkpO2lmKG9wdGlvbnMpeyQuZXh0ZW5kKHNldHRpbmdzLG9wdGlvbnMpO30KdGhpcy5zZXR0aW5ncz1zZXR0aW5ncztmb3IodmFyIGV4dGVuc2lvbk5hbWUgaW4gaW5zdGFuY2VFeHRlbnNpb25zKXtpZihpbnN0YW5jZUV4dGVuc2lvbnMuaGFzT3duUHJvcGVydHkoZXh0ZW5zaW9uTmFtZSkpe2luc3RhbmNlRXh0ZW5zaW9uc1tleHRlbnNpb25OYW1lXS5jYWxsKHRoaXMsZXh0ZW5zaW9uTmFtZSk7fX0KdGhpcy5ldmVudHMucHVibGlzaChhcGluYW1lc3BhY2UrJy5pbml0aWFsaXppbmcnKTt0aGlzLiRjb250cm9sYmFyVXBwZXI9KGZ1bmN0aW9uKCl7dmFyIGNvbnRyb2xiYXJzdHlsZT0ncGFkZGluZzowICFpbXBvcnRhbnQ7IG1hcmdpbjowICFpbXBvcnRhbnQ7Jysnd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgaGVpZ2h0OiAwICFpbXBvcnRhbnQ7IC1tcy10b3VjaC1hY3Rpb246IG5vbmU7IHRvdWNoLWFjdGlvbjogbm9uZTsnKydtYXJnaW4tdG9wOi0xZW0gIWltcG9ydGFudDsgbWFyZ2luLWJvdHRvbToxZW0gIWltcG9ydGFudDsnO3JldHVybiAkKCc8ZGl2IHN0eWxlPSInK2NvbnRyb2xiYXJzdHlsZSsnIj48L2Rpdj4nKS5hcHBlbmRUbygkcGFyZW50KTt9KSgpO3RoaXMuaXNDYW52YXNFbXVsYXRvcj1mYWxzZTt2YXIgY2FudmFzPXRoaXMuY2FudmFzPXRoaXMuaW5pdGlhbGl6ZUNhbnZhcyhzZXR0aW5ncyksJGNhbnZhcz0kKGNhbnZhcyk7dGhpcy4kY29udHJvbGJhckxvd2VyPShmdW5jdGlvbigpe3ZhciBjb250cm9sYmFyc3R5bGU9J3BhZGRpbmc6MCAhaW1wb3J0YW50OyBtYXJnaW46MCAhaW1wb3J0YW50OycrJ3dpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IGhlaWdodDogMCAhaW1wb3J0YW50OyAtbXMtdG91Y2gtYWN0aW9uOiBub25lOyB0b3VjaC1hY3Rpb246IG5vbmU7JysnbWFyZ2luLXRvcDotMS41ZW0gIWltcG9ydGFudDsgbWFyZ2luLWJvdHRvbToxLjVlbSAhaW1wb3J0YW50OyBwb3NpdGlvbjogcmVsYXRpdmU7JztyZXR1cm4gJCgnPGRpdiBzdHlsZT0iJytjb250cm9sYmFyc3R5bGUrJyI+PC9kaXY+JykuYXBwZW5kVG8oJHBhcmVudCk7fSkoKTt0aGlzLmNhbnZhc0NvbnRleHQ9Y2FudmFzLmdldENvbnRleHQoIjJkIik7JGNhbnZhcy5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnLHRoaXMpO3NldHRpbmdzLmxpbmVXaWR0aD0oZnVuY3Rpb24oZGVmYXVsdExpbmVXaWR0aCxjYW52YXNXaWR0aCl7aWYoIWRlZmF1bHRMaW5lV2lkdGgpe3JldHVybiBNYXRoLm1heChNYXRoLnJvdW5kKGNhbnZhc1dpZHRoLzQwMCksMik7fWVsc2V7cmV0dXJuIGRlZmF1bHRMaW5lV2lkdGg7fX0pKHNldHRpbmdzLmxpbmVXaWR0aCxjYW52YXMud2lkdGgpO3RoaXMubGluZUN1cnZlVGhyZXNob2xkPXNldHRpbmdzLmxpbmVXaWR0aCozO2lmKHNldHRpbmdzLmNzc2NsYXNzJiYkLnRyaW0oc2V0dGluZ3MuY3NzY2xhc3MpIT0iIil7JGNhbnZhcy5hZGRDbGFzcyhzZXR0aW5ncy5jc3NjbGFzcyk7fQp0aGlzLmZhdEZpbmdlckNvbXBlbnNhdGlvbj0wO3ZhciBtb3ZlbWVudEhhbmRsZXJzPShmdW5jdGlvbihqU2lnbmF0dXJlSW5zdGFuY2Upe3ZhciBzaGlmdFgsc2hpZnRZLHNldFN0YXJ0VmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHRvcz0kKGpTaWduYXR1cmVJbnN0YW5jZS5jYW52YXMpLm9mZnNldCgpCnNoaWZ0WD10b3MubGVmdCotMQpzaGlmdFk9dG9zLnRvcCotMX0sZ2V0UG9pbnRGcm9tRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIGZpcnN0RXZlbnQ9KGUuY2hhbmdlZFRvdWNoZXMmJmUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoPjA/ZS5jaGFuZ2VkVG91Y2hlc1swXTplKTtyZXR1cm4gbmV3IFBvaW50KE1hdGgucm91bmQoZmlyc3RFdmVudC5wYWdlWCtzaGlmdFgpLE1hdGgucm91bmQoZmlyc3RFdmVudC5wYWdlWStzaGlmdFkpK2pTaWduYXR1cmVJbnN0YW5jZS5mYXRGaW5nZXJDb21wZW5zYXRpb24pO30sdGltZXI9bmV3IEtpY2tUaW1lckNsYXNzKDc1MCxmdW5jdGlvbigpe2pTaWduYXR1cmVJbnN0YW5jZS5kYXRhRW5naW5lLmVuZFN0cm9rZSgpO30pO3RoaXMuZHJhd0VuZEhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoIWpTaWduYXR1cmVJbnN0YW5jZS5zZXR0aW5ncy5yZWFkT25seSl7dHJ5e2UucHJldmVudERlZmF1bHQoKTt9Y2F0Y2goZXgpe30KdGltZXIuY2xlYXIoKTtqU2lnbmF0dXJlSW5zdGFuY2UuZGF0YUVuZ2luZS5lbmRTdHJva2UoKTt9fTt0aGlzLmRyYXdTdGFydEhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoIWpTaWduYXR1cmVJbnN0YW5jZS5zZXR0aW5ncy5yZWFkT25seSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3NldFN0YXJ0VmFsdWVzKCk7alNpZ25hdHVyZUluc3RhbmNlLmRhdGFFbmdpbmUuc3RhcnRTdHJva2UoZ2V0UG9pbnRGcm9tRXZlbnQoZSkpO3RpbWVyLmtpY2soKTt9fTt0aGlzLmRyYXdNb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXtpZighalNpZ25hdHVyZUluc3RhbmNlLnNldHRpbmdzLnJlYWRPbmx5KXtlLnByZXZlbnREZWZhdWx0KCk7aWYoIWpTaWduYXR1cmVJbnN0YW5jZS5kYXRhRW5naW5lLmluU3Ryb2tlKXtyZXR1cm47fQpqU2lnbmF0dXJlSW5zdGFuY2UuZGF0YUVuZ2luZS5hZGRUb1N0cm9rZShnZXRQb2ludEZyb21FdmVudChlKSk7dGltZXIua2ljaygpO319O3JldHVybiB0aGlzO30pLmNhbGwoe30sdGhpcyk7KGZ1bmN0aW9uKGRyYXdFbmRIYW5kbGVyLGRyYXdTdGFydEhhbmRsZXIsZHJhd01vdmVIYW5kbGVyKXt2YXIgY2FudmFzPXRoaXMuY2FudmFzLCRjYW52YXM9JChjYW52YXMpLHVuZGVmO2lmKHRoaXMuaXNDYW52YXNFbXVsYXRvcil7JGNhbnZhcy5iaW5kKCdtb3VzZW1vdmUuJythcGluYW1lc3BhY2UsZHJhd01vdmVIYW5kbGVyKTskY2FudmFzLmJpbmQoJ21vdXNldXAuJythcGluYW1lc3BhY2UsZHJhd0VuZEhhbmRsZXIpOyRjYW52YXMuYmluZCgnbW91c2Vkb3duLicrYXBpbmFtZXNwYWNlLGRyYXdTdGFydEhhbmRsZXIpO31lbHNle2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxmdW5jdGlvbihlKXtjYW52YXMub25tb3VzZWRvd249Y2FudmFzLm9ubW91c2V1cD1jYW52YXMub25tb3VzZW1vdmU9dW5kZWY7dGhpcy5mYXRGaW5nZXJDb21wZW5zYXRpb249KHNldHRpbmdzLm1pbkZhdEZpbmdlckNvbXBlbnNhdGlvbiYmc2V0dGluZ3MubGluZVdpZHRoKi0zPnNldHRpbmdzLm1pbkZhdEZpbmdlckNvbXBlbnNhdGlvbik/c2V0dGluZ3MubGluZVdpZHRoKi0zOnNldHRpbmdzLm1pbkZhdEZpbmdlckNvbXBlbnNhdGlvbjtkcmF3U3RhcnRIYW5kbGVyKGUpO2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsZHJhd0VuZEhhbmRsZXIpO2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxkcmF3U3RhcnRIYW5kbGVyKTtjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJyxkcmF3TW92ZUhhbmRsZXIpO30pO2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uKGUpe2NhbnZhcy5vbnRvdWNoc3RhcnQ9Y2FudmFzLm9udG91Y2hlbmQ9Y2FudmFzLm9udG91Y2htb3ZlPXVuZGVmO2RyYXdTdGFydEhhbmRsZXIoZSk7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZHJhd1N0YXJ0SGFuZGxlcik7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLGRyYXdFbmRIYW5kbGVyKTtjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxkcmF3TW92ZUhhbmRsZXIpO30pO2lmKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCl7Y2FudmFzLm9ubXNwb2ludGVyZG93bj1kcmF3U3RhcnRIYW5kbGVyO2NhbnZhcy5vbm1zcG9pbnRlcnVwPWRyYXdFbmRIYW5kbGVyO2NhbnZhcy5vbm1zcG9pbnRlcm1vdmU9ZHJhd01vdmVIYW5kbGVyO319fSkuY2FsbCh0aGlzLG1vdmVtZW50SGFuZGxlcnMuZHJhd0VuZEhhbmRsZXIsbW92ZW1lbnRIYW5kbGVycy5kcmF3U3RhcnRIYW5kbGVyLG1vdmVtZW50SGFuZGxlcnMuZHJhd01vdmVIYW5kbGVyKQpldmVudFRva2Vuc1thcGluYW1lc3BhY2UrJy53aW5kb3dtb3VzZXVwJ109Z2xvYmFsRXZlbnRzLnN1YnNjcmliZShhcGluYW1lc3BhY2UrJy53aW5kb3dtb3VzZXVwJyxtb3ZlbWVudEhhbmRsZXJzLmRyYXdFbmRIYW5kbGVyKTt0aGlzLmV2ZW50cy5wdWJsaXNoKGFwaW5hbWVzcGFjZSsnLmF0dGFjaGluZ0V2ZW50SGFuZGxlcnMnKTtjb25kaXRpb25hbGx5TGlua0NhbnZhc1Jlc2l6ZVRvV2luZG93UmVzaXplLmNhbGwodGhpcyx0aGlzLHNldHRpbmdzLndpZHRoLnRvU3RyaW5nKDEwKSxhcGluYW1lc3BhY2UsZ2xvYmFsRXZlbnRzKTt0aGlzLnJlc2V0Q2FudmFzKHNldHRpbmdzLmRhdGEpO3RoaXMuZXZlbnRzLnB1Ymxpc2goYXBpbmFtZXNwYWNlKycuaW5pdGlhbGl6ZWQnKTtyZXR1cm4gdGhpczt9CmpTaWduYXR1cmVDbGFzcy5wcm90b3R5cGUucmVzZXRDYW52YXM9ZnVuY3Rpb24oZGF0YSxkb250Q2xlYXIpe3ZhciBjYW52YXM9dGhpcy5jYW52YXMsc2V0dGluZ3M9dGhpcy5zZXR0aW5ncyxjdHg9dGhpcy5jYW52YXNDb250ZXh0LGlzQ2FudmFzRW11bGF0b3I9dGhpcy5pc0NhbnZhc0VtdWxhdG9yLGN3PWNhbnZhcy53aWR0aCxjaD1jYW52YXMuaGVpZ2h0O2lmKCFkb250Q2xlYXIpe2N0eC5jbGVhclJlY3QoMCwwLGN3KzMwLGNoKzMwKTt9CmN0eC5zaGFkb3dDb2xvcj1jdHguZmlsbFN0eWxlPXNldHRpbmdzWydiYWNrZ3JvdW5kLWNvbG9yJ10KaWYoaXNDYW52YXNFbXVsYXRvcil7Y3R4LmZpbGxSZWN0KDAsMCxjdyszMCxjaCszMCk7fQpjdHgubGluZVdpZHRoPU1hdGguY2VpbChwYXJzZUludChzZXR0aW5ncy5saW5lV2lkdGgsMTApKTtjdHgubGluZUNhcD1jdHgubGluZUpvaW49InJvdW5kIjtpZihudWxsIT1zZXR0aW5nc1snZGVjb3ItY29sb3InXSl7Y3R4LnN0cm9rZVN0eWxlPXNldHRpbmdzWydkZWNvci1jb2xvciddO2N0eC5zaGFkb3dPZmZzZXRYPTA7Y3R4LnNoYWRvd09mZnNldFk9MDt2YXIgbGluZW9mZnNldD1NYXRoLnJvdW5kKGNoLzUpO2Jhc2ljTGluZShjdHgsbGluZW9mZnNldCoxLjUsY2gtbGluZW9mZnNldCxjdy0obGluZW9mZnNldCoxLjUpLGNoLWxpbmVvZmZzZXQpO30KY3R4LnN0cm9rZVN0eWxlPXNldHRpbmdzLmNvbG9yO2lmKCFpc0NhbnZhc0VtdWxhdG9yKXtjdHguc2hhZG93Q29sb3I9Y3R4LnN0cm9rZVN0eWxlO2N0eC5zaGFkb3dPZmZzZXRYPWN0eC5saW5lV2lkdGgqMC41O2N0eC5zaGFkb3dPZmZzZXRZPWN0eC5saW5lV2lkdGgqLTAuNjtjdHguc2hhZG93Qmx1cj0wO30KaWYoIWRhdGEpe2RhdGE9W107fQp2YXIgZGF0YUVuZ2luZT10aGlzLmRhdGFFbmdpbmU9bmV3IERhdGFFbmdpbmUoZGF0YSx0aGlzLHN0cm9rZVN0YXJ0Q2FsbGJhY2ssc3Ryb2tlQWRkQ2FsbGJhY2ssc3Ryb2tlRW5kQ2FsbGJhY2spO3NldHRpbmdzLmRhdGE9ZGF0YTskKGNhbnZhcykuZGF0YShhcGluYW1lc3BhY2UrJy5kYXRhJyxkYXRhKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnNldHRpbmdzJyxzZXR0aW5ncyk7ZGF0YUVuZ2luZS5jaGFuZ2VkPShmdW5jdGlvbih0YXJnZXQsZXZlbnRzLGFwaW5hbWVzcGFjZSl7J3VzZSBzdHJpY3QnCnJldHVybiBmdW5jdGlvbigpe2V2ZW50cy5wdWJsaXNoKGFwaW5hbWVzcGFjZSsnLmNoYW5nZScpO3RhcmdldC50cmlnZ2VyKCdjaGFuZ2UnKTt9fSkodGhpcy4kcGFyZW50LHRoaXMuZXZlbnRzLGFwaW5hbWVzcGFjZSk7ZGF0YUVuZ2luZS5jaGFuZ2VkKCk7cmV0dXJuIHRydWU7fTtmdW5jdGlvbiBpbml0aWFsaXplQ2FudmFzRW11bGF0b3IoY2FudmFzKXtpZihjYW52YXMuZ2V0Q29udGV4dCl7cmV0dXJuIGZhbHNlO31lbHNle3ZhciB3aW5kb3c9Y2FudmFzLm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93O3ZhciBGQz13aW5kb3cuRmxhc2hDYW52YXM/Y2FudmFzLm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93LkZsYXNoQ2FudmFzOih0eXBlb2YgRmxhc2hDYW52YXM9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6Rmxhc2hDYW52YXMpO2lmKEZDKXtjYW52YXM9RkMuaW5pdEVsZW1lbnQoY2FudmFzKTt2YXIgem9vbT0xO2lmKHdpbmRvdyYmd2luZG93LnNjcmVlbiYmd2luZG93LnNjcmVlbi5kZXZpY2VYRFBJJiZ3aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJKXt6b29tPXdpbmRvdy5zY3JlZW4uZGV2aWNlWERQSSoxLjAvd2luZG93LnNjcmVlbi5sb2dpY2FsWERQSTt9CmlmKHpvb20hPT0xKXt0cnl7JChjYW52YXMpLmNoaWxkcmVuKCdvYmplY3QnKS5nZXQoMCkucmVzaXplKE1hdGguY2VpbChjYW52YXMud2lkdGgqem9vbSksTWF0aC5jZWlsKGNhbnZhcy5oZWlnaHQqem9vbSkpO2NhbnZhcy5nZXRDb250ZXh0KCcyZCcpLnNjYWxlKHpvb20sem9vbSk7fWNhdGNoKGV4KXt9fQpyZXR1cm4gdHJ1ZTt9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkNhbnZhcyBlbGVtZW50IGRvZXMgbm90IHN1cHBvcnQgMmQgY29udGV4dC4galNpZ25hdHVyZSBjYW5ub3QgcHJvY2VlZC4iKTt9fX0KalNpZ25hdHVyZUNsYXNzLnByb3RvdHlwZS5pbml0aWFsaXplQ2FudmFzPWZ1bmN0aW9uKHNldHRpbmdzKXt2YXIgY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLCRjYW52YXM9JChjYW52YXMpO2lmKHNldHRpbmdzLndpZHRoPT09c2V0dGluZ3MuaGVpZ2h0JiZzZXR0aW5ncy5oZWlnaHQ9PT0ncmF0aW8nKXtzZXR0aW5ncy53aWR0aD0nMTAwJSc7fQokY2FudmFzLmNzcyh7J21hcmdpbic6MCwncGFkZGluZyc6MCwnYm9yZGVyJzonbm9uZScsJ2hlaWdodCc6c2V0dGluZ3MuaGVpZ2h0PT09J3JhdGlvJ3x8IXNldHRpbmdzLmhlaWdodD8xOnNldHRpbmdzLmhlaWdodC50b1N0cmluZygxMCksJ3dpZHRoJzpzZXR0aW5ncy53aWR0aD09PSdyYXRpbyd8fCFzZXR0aW5ncy53aWR0aD8xOnNldHRpbmdzLndpZHRoLnRvU3RyaW5nKDEwKSwnLW1zLXRvdWNoLWFjdGlvbic6J25vbmUnLCd0b3VjaC1hY3Rpb24nOidub25lJywnYmFja2dyb3VuZC1jb2xvcic6c2V0dGluZ3NbJ2JhY2tncm91bmQtY29sb3InXSx9KTskY2FudmFzLmFwcGVuZFRvKHRoaXMuJHBhcmVudCk7aWYoc2V0dGluZ3MuaGVpZ2h0PT09J3JhdGlvJyl7JGNhbnZhcy5jc3MoJ2hlaWdodCcsTWF0aC5yb3VuZCgkY2FudmFzLndpZHRoKCkvc2V0dGluZ3Muc2l6ZVJhdGlvKSk7fWVsc2UgaWYoc2V0dGluZ3Mud2lkdGg9PT0ncmF0aW8nKXskY2FudmFzLmNzcygnd2lkdGgnLE1hdGgucm91bmQoJGNhbnZhcy5oZWlnaHQoKSpzZXR0aW5ncy5zaXplUmF0aW8pKTt9CiRjYW52YXMuYWRkQ2xhc3MoYXBpbmFtZXNwYWNlKTtjYW52YXMud2lkdGg9JGNhbnZhcy53aWR0aCgpO2NhbnZhcy5oZWlnaHQ9JGNhbnZhcy5oZWlnaHQoKTt0aGlzLmlzQ2FudmFzRW11bGF0b3I9aW5pdGlhbGl6ZUNhbnZhc0VtdWxhdG9yKGNhbnZhcyk7Y2FudmFzLm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfTtpZihlJiZlLnN0b3BQcm9wYWdhdGlvbil7ZS5zdG9wUHJvcGFnYXRpb24oKX07cmV0dXJuIGZhbHNlO307cmV0dXJuIGNhbnZhczt9CnZhciBHbG9iYWxKU2lnbmF0dXJlT2JqZWN0SW5pdGlhbGl6ZXI9ZnVuY3Rpb24od2luZG93KXt2YXIgZ2xvYmFsRXZlbnRzPW5ldyBQdWJTdWJDbGFzcygpOzsoZnVuY3Rpb24oZ2xvYmFsRXZlbnRzLGFwaW5hbWVzcGFjZSwkLHdpbmRvdyl7J3VzZSBzdHJpY3QnCnZhciByZXNpemV0aW1lcixydW5uZXI9ZnVuY3Rpb24oKXtnbG9iYWxFdmVudHMucHVibGlzaChhcGluYW1lc3BhY2UrJy5wYXJlbnRyZXNpemVkJyl9OyQod2luZG93KS5iaW5kKCdyZXNpemUuJythcGluYW1lc3BhY2UsZnVuY3Rpb24oKXtpZihyZXNpemV0aW1lcil7Y2xlYXJUaW1lb3V0KHJlc2l6ZXRpbWVyKTt9CnJlc2l6ZXRpbWVyPXNldFRpbWVvdXQocnVubmVyLDUwMCk7fSkuYmluZCgnbW91c2V1cC4nK2FwaW5hbWVzcGFjZSxmdW5jdGlvbihlKXtnbG9iYWxFdmVudHMucHVibGlzaChhcGluYW1lc3BhY2UrJy53aW5kb3dtb3VzZXVwJyl9KTt9KShnbG9iYWxFdmVudHMsYXBpbmFtZXNwYWNlLCQsd2luZG93KQp2YXIgalNpZ25hdHVyZUluc3RhbmNlRXh0ZW5zaW9ucz17fTt2YXIgZXhwb3J0cGx1Z2lucz17J2RlZmF1bHQnOmZ1bmN0aW9uKGRhdGEpe3JldHVybiB0aGlzLnRvRGF0YVVSTCgpfSwnbmF0aXZlJzpmdW5jdGlvbihkYXRhKXtyZXR1cm4gZGF0YX0sJ2ltYWdlJzpmdW5jdGlvbihkYXRhKXt2YXIgaW1hZ2VzdHJpbmc9dGhpcy50b0RhdGFVUkwoKTtpZih0eXBlb2YgaW1hZ2VzdHJpbmc9PT0nc3RyaW5nJyYmaW1hZ2VzdHJpbmcubGVuZ3RoPjQmJmltYWdlc3RyaW5nLnNsaWNlKDAsNSk9PT0nZGF0YTonJiZpbWFnZXN0cmluZy5pbmRleE9mKCcsJykhPT0tMSl7dmFyIHNwbGl0dGVycG9zPWltYWdlc3RyaW5nLmluZGV4T2YoJywnKTtyZXR1cm5baW1hZ2VzdHJpbmcuc2xpY2UoNSxzcGxpdHRlcnBvcyksaW1hZ2VzdHJpbmcuc3Vic3RyKHNwbGl0dGVycG9zKzEpXTt9CnJldHVybltdO319O2Z1bmN0aW9uIF9yZW5kZXJJbWFnZU9uQ2FudmFzKGRhdGEsZm9ybWF0dHlwZSxyZXJlbmRlcmNhbGxhYmxlKXsndXNlIHN0cmljdCcKdmFyIGltZz1uZXcgSW1hZ2UoKSxjPXRoaXM7aW1nLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBjdHg9Yy5nZXRDb250ZXh0KCIyZCIpO3ZhciBvbGRTaGFkb3dDb2xvcj1jdHguc2hhZG93Q29sb3I7Y3R4LnNoYWRvd0NvbG9yPSJ0cmFuc3BhcmVudCI7Y3R4LmRyYXdJbWFnZShpbWcsMCwwLChpbWcud2lkdGg8Yy53aWR0aCk/aW1nLndpZHRoOmMud2lkdGgsKGltZy5oZWlnaHQ8Yy5oZWlnaHQpP2ltZy5oZWlnaHQ6Yy5oZWlnaHQpO2N0eC5zaGFkb3dDb2xvcj1vbGRTaGFkb3dDb2xvcjt9O2ltZy5zcmM9J2RhdGE6Jytmb3JtYXR0eXBlKycsJytkYXRhO30KdmFyIGltcG9ydHBsdWdpbnM9eyduYXRpdmUnOmZ1bmN0aW9uKGRhdGEsZm9ybWF0dHlwZSxyZXJlbmRlcmNhbGxhYmxlKXtyZXJlbmRlcmNhbGxhYmxlKGRhdGEpO30sJ2ltYWdlJzpfcmVuZGVySW1hZ2VPbkNhbnZhcywnaW1hZ2UvcG5nO2Jhc2U2NCc6X3JlbmRlckltYWdlT25DYW52YXMsJ2ltYWdlL2pwZWc7YmFzZTY0JzpfcmVuZGVySW1hZ2VPbkNhbnZhcywnaW1hZ2UvanBnO2Jhc2U2NCc6X3JlbmRlckltYWdlT25DYW52YXN9O2Z1bmN0aW9uIF9jbGVhckRyYXdpbmdBcmVhKGRhdGEsZG9udENsZWFyKXt0aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5yZXNldENhbnZhcyhkYXRhLGRvbnRDbGVhcik7cmV0dXJuIHRoaXM7fQpmdW5jdGlvbiBfc2V0RHJhd2luZ0RhdGEoZGF0YSxmb3JtYXR0eXBlKXt2YXIgdW5kZWY7aWYoZm9ybWF0dHlwZT09PXVuZGVmJiZ0eXBlb2YgZGF0YT09PSdzdHJpbmcnJiZkYXRhLnN1YnN0cigwLDUpPT09J2RhdGE6Jyl7Zm9ybWF0dHlwZT1kYXRhLnNsaWNlKDUpLnNwbGl0KCcsJylbMF07ZGF0YT1kYXRhLnNsaWNlKDYrZm9ybWF0dHlwZS5sZW5ndGgpO2lmKGZvcm1hdHR5cGU9PT1kYXRhKXtyZXR1cm47fX0KdmFyICRjYW52YXM9dGhpcy5maW5kKCdjYW52YXMuJythcGluYW1lc3BhY2UpLmFkZCh0aGlzLmZpbHRlcignY2FudmFzLicrYXBpbmFtZXNwYWNlKSk7aWYoIWltcG9ydHBsdWdpbnMuaGFzT3duUHJvcGVydHkoZm9ybWF0dHlwZSkpe3Rocm93IG5ldyBFcnJvcihhcGluYW1lc3BhY2UrIiBpcyB1bmFibGUgdG8gZmluZCBpbXBvcnQgcGx1Z2luIHdpdGggZm9yIGZvcm1hdCAnIitTdHJpbmcoZm9ybWF0dHlwZSkrIiciKTt9ZWxzZSBpZigkY2FudmFzLmxlbmd0aCE9PTApe2ltcG9ydHBsdWdpbnNbZm9ybWF0dHlwZV0uY2FsbCgkY2FudmFzWzBdLGRhdGEsZm9ybWF0dHlwZSwoZnVuY3Rpb24oalNpZ25hdHVyZUluc3RhbmNlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4galNpZ25hdHVyZUluc3RhbmNlLnJlc2V0Q2FudmFzLmFwcGx5KGpTaWduYXR1cmVJbnN0YW5jZSxhcmd1bWVudHMpfX0pKCRjYW52YXMuZGF0YShhcGluYW1lc3BhY2UrJy50aGlzJykpKTt9CnJldHVybiB0aGlzO30KdmFyIGVsZW1lbnRJc09ycGhhbj1mdW5jdGlvbihlKXt2YXIgdG9wT2ZET009ZmFsc2U7ZT1lLnBhcmVudE5vZGU7d2hpbGUoZSYmIXRvcE9mRE9NKXt0b3BPZkRPTT1lLmJvZHk7ZT1lLnBhcmVudE5vZGU7fQpyZXR1cm4hdG9wT2ZET007fQp2YXIgcGx1Z2lucz17J2V4cG9ydCc6ZXhwb3J0cGx1Z2lucywnaW1wb3J0JzppbXBvcnRwbHVnaW5zLCdpbnN0YW5jZSc6alNpZ25hdHVyZUluc3RhbmNlRXh0ZW5zaW9uc30sbWV0aG9kcz17J2luaXQnOmZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZighZWxlbWVudElzT3JwaGFuKHRoaXMpKXtuZXcgalNpZ25hdHVyZUNsYXNzKHRoaXMsb3B0aW9ucyxqU2lnbmF0dXJlSW5zdGFuY2VFeHRlbnNpb25zKTt9fSl9LCdnZXRTZXR0aW5ncyc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maW5kKCdjYW52YXMuJythcGluYW1lc3BhY2UpLmFkZCh0aGlzLmZpbHRlcignY2FudmFzLicrYXBpbmFtZXNwYWNlKSkuZGF0YShhcGluYW1lc3BhY2UrJy50aGlzJykuc2V0dGluZ3M7fSwnaXNNb2RpZmllZCc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maW5kKCdjYW52YXMuJythcGluYW1lc3BhY2UpLmFkZCh0aGlzLmZpbHRlcignY2FudmFzLicrYXBpbmFtZXNwYWNlKSkuZGF0YShhcGluYW1lc3BhY2UrJy50aGlzJykuZGF0YUVuZ2luZS5fc3Ryb2tlIT09bnVsbDt9LCd1cGRhdGVTZXR0aW5nJzpmdW5jdGlvbihwYXJhbSx2YWwsZm9yRnV0dXJlKXt2YXIgJGNhbnZhcz10aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKTskY2FudmFzLnNldHRpbmdzW3BhcmFtXT12YWw7JGNhbnZhcy5yZXNldENhbnZhcygoZm9yRnV0dXJlP251bGw6JGNhbnZhcy5zZXR0aW5ncy5kYXRhKSx0cnVlKTtyZXR1cm4gJGNhbnZhcy5zZXR0aW5nc1twYXJhbV07fSwnY2xlYXInOl9jbGVhckRyYXdpbmdBcmVhLCdyZXNldCc6X2NsZWFyRHJhd2luZ0FyZWEsJ2FkZFBsdWdpbic6ZnVuY3Rpb24ocGx1Z2luVHlwZSxwbHVnaW5OYW1lLGNhbGxhYmxlKXtpZihwbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpblR5cGUpKXtwbHVnaW5zW3BsdWdpblR5cGVdW3BsdWdpbk5hbWVdPWNhbGxhYmxlO30KcmV0dXJuIHRoaXM7fSwnbGlzdFBsdWdpbnMnOmZ1bmN0aW9uKHBsdWdpblR5cGUpe3ZhciBhbnN3ZXI9W107aWYocGx1Z2lucy5oYXNPd25Qcm9wZXJ0eShwbHVnaW5UeXBlKSl7dmFyIG89cGx1Z2luc1twbHVnaW5UeXBlXTtmb3IodmFyIGsgaW4gbyl7aWYoby5oYXNPd25Qcm9wZXJ0eShrKSl7YW5zd2VyLnB1c2goayk7fX19CnJldHVybiBhbnN3ZXI7fSwnZ2V0RGF0YSc6ZnVuY3Rpb24oZm9ybWF0dHlwZSl7dmFyIHVuZGVmLCRjYW52YXM9dGhpcy5maW5kKCdjYW52YXMuJythcGluYW1lc3BhY2UpLmFkZCh0aGlzLmZpbHRlcignY2FudmFzLicrYXBpbmFtZXNwYWNlKSk7aWYoZm9ybWF0dHlwZT09PXVuZGVmKXtmb3JtYXR0eXBlPSdkZWZhdWx0Jzt9CmlmKCRjYW52YXMubGVuZ3RoIT09MCYmZXhwb3J0cGx1Z2lucy5oYXNPd25Qcm9wZXJ0eShmb3JtYXR0eXBlKSl7cmV0dXJuIGV4cG9ydHBsdWdpbnNbZm9ybWF0dHlwZV0uY2FsbCgkY2FudmFzLmdldCgwKSwkY2FudmFzLmRhdGEoYXBpbmFtZXNwYWNlKycuZGF0YScpLCRjYW52YXMuZGF0YShhcGluYW1lc3BhY2UrJy5zZXR0aW5ncycpKTt9fSwnaW1wb3J0RGF0YSc6X3NldERyYXdpbmdEYXRhLCdzZXREYXRhJzpfc2V0RHJhd2luZ0RhdGEsJ2dsb2JhbEV2ZW50cyc6ZnVuY3Rpb24oKXtyZXR1cm4gZ2xvYmFsRXZlbnRzfSwnZGlzYWJsZSc6ZnVuY3Rpb24oKXt0aGlzLmZpbmQoImlucHV0IikuYXR0cigiZGlzYWJsZWQiLDEpO3RoaXMuZmluZCgnY2FudmFzLicrYXBpbmFtZXNwYWNlKS5hZGRDbGFzcygiZGlzYWJsZWQiKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5zZXR0aW5ncy5yZWFkT25seT10cnVlO30sJ2VuYWJsZSc6ZnVuY3Rpb24oKXt0aGlzLmZpbmQoImlucHV0IikucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTt0aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkucmVtb3ZlQ2xhc3MoImRpc2FibGVkIikuZGF0YShhcGluYW1lc3BhY2UrJy50aGlzJykuc2V0dGluZ3MucmVhZE9ubHk9ZmFsc2U7fSwnZXZlbnRzJzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5ldmVudHM7fX0KJC5mblthcGluYW1lc3BhY2VdPWZ1bmN0aW9uKG1ldGhvZCl7J3VzZSBzdHJpY3QnCmlmKCFtZXRob2R8fHR5cGVvZiBtZXRob2Q9PT0nb2JqZWN0Jyl7cmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWVsc2UgaWYodHlwZW9mIG1ldGhvZD09PSdzdHJpbmcnJiZtZXRob2RzW21ldGhvZF0pe3JldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO31lbHNleyQuZXJyb3IoJ01ldGhvZCAnK1N0cmluZyhtZXRob2QpKycgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LicrYXBpbmFtZXNwYWNlKTt9fX0KR2xvYmFsSlNpZ25hdHVyZU9iamVjdEluaXRpYWxpemVyKHdpbmRvdyl9KSgpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9xd2ViL3F3ZWIyLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwp2YXIgUVdlYjI9e2V4cHJlc3Npb25zX2NhY2hlOnt9LFJFU0VSVkVEX1dPUkRTOid0cnVlLGZhbHNlLE5hTixudWxsLHVuZGVmaW5lZCxkZWJ1Z2dlcixjb25zb2xlLHdpbmRvdyxpbixpbnN0YW5jZW9mLG5ldyxmdW5jdGlvbixyZXR1cm4sdGhpcyx0eXBlb2YsZXZhbCx2b2lkLE1hdGgsUmVnRXhwLEFycmF5LE9iamVjdCxEYXRlJy5zcGxpdCgnLCcpLEFDVElPTlNfUFJFQ0VERU5DRTonZm9yZWFjaCxpZixlbGlmLGVsc2UsY2FsbCxzZXQsdGFnLGVzYyxyYXcsanMsZGVidWcsbG9nJy5zcGxpdCgnLCcpLFdPUkRfUkVQTEFDRU1FTlQ6eydhbmQnOicmJicsJ29yJzonfHwnLCdndCc6Jz4nLCdndGUnOic+PScsJ2x0JzonPCcsJ2x0ZSc6Jzw9J30sVk9JRF9FTEVNRU5UUzonYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxocixpbWcsaW5wdXQsa2V5Z2VuLGxpbmssbWVudWl0ZW0sbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJy5zcGxpdCgnLCcpLHRvb2xzOntleGNlcHRpb246ZnVuY3Rpb24obWVzc2FnZSxjb250ZXh0KXtjb250ZXh0PWNvbnRleHR8fHt9O3ZhciBwcmVmaXg9J1FXZWIyJztpZihjb250ZXh0LnRlbXBsYXRlKXtwcmVmaXgrPSIgLSB0ZW1wbGF0ZVsnIitjb250ZXh0LnRlbXBsYXRlKyInXSI7fQp0aHJvdyBuZXcgRXJyb3IocHJlZml4KyI6ICIrbWVzc2FnZSk7fSx3YXJuaW5nOmZ1bmN0aW9uKG1lc3NhZ2Upe2lmKHR5cGVvZih3aW5kb3cpIT09J3VuZGVmaW5lZCcmJndpbmRvdy5jb25zb2xlKXt3aW5kb3cuY29uc29sZS53YXJuKG1lc3NhZ2UpO319LHRyaW06ZnVuY3Rpb24ocyxtb2RlKXtzd2l0Y2gobW9kZSl7Y2FzZSJsZWZ0IjpyZXR1cm4gcy5yZXBsYWNlKC9eXHMqLywiIik7Y2FzZSJyaWdodCI6cmV0dXJuIHMucmVwbGFjZSgvXHMqJC8sIiIpO2RlZmF1bHQ6cmV0dXJuIHMucmVwbGFjZSgvXlxzKnxccyokL2csIiIpO319LGpzX2VzY2FwZTpmdW5jdGlvbihzLG5vcXVvdGVzKXtyZXR1cm4obm9xdW90ZXM/Jyc6IiciKStzLnJlcGxhY2UoL1xyP1xuL2csIlxcbiIpLnJlcGxhY2UoLycvZywiXFwnIikrKG5vcXVvdGVzPycnOiInIik7fSxodG1sX2VzY2FwZTpmdW5jdGlvbihzLGF0dHJpYnV0ZSl7aWYocz09bnVsbCl7cmV0dXJuJyc7fQpzPVN0cmluZyhzKS5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7aWYoYXR0cmlidXRlKXtzPXMucmVwbGFjZSgvIi9nLCcmcXVvdDsnKTt9CnJldHVybiBzO30sZ2VuX2F0dHJpYnV0ZTpmdW5jdGlvbihvKXtpZihvIT09bnVsbCYmbyE9PXVuZGVmaW5lZCl7aWYoby5jb25zdHJ1Y3Rvcj09PUFycmF5KXtpZihvWzFdIT09bnVsbCYmb1sxXSE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZm9ybWF0X2F0dHJpYnV0ZShvWzBdLG9bMV0pO319ZWxzZSBpZih0eXBlb2Ygbz09PSdvYmplY3QnKXt2YXIgcj0nJztmb3IodmFyIGsgaW4gbyl7aWYoby5oYXNPd25Qcm9wZXJ0eShrKSl7cis9dGhpcy5nZW5fYXR0cmlidXRlKFtrLG9ba11dKTt9fQpyZXR1cm4gcjt9fQpyZXR1cm4nJzt9LGZvcm1hdF9hdHRyaWJ1dGU6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuJyAnK25hbWUrJz0iJyt0aGlzLmh0bWxfZXNjYXBlKHZhbHVlLHRydWUpKyciJzt9LGV4dGVuZDpmdW5jdGlvbihkc3Qsc3JjLGV4Y2x1ZGUpe2Zvcih2YXIgcCBpbiBzcmMpe2lmKHNyYy5oYXNPd25Qcm9wZXJ0eShwKSYmIShleGNsdWRlJiZ0aGlzLmFycmF5SW5kZXhPZihleGNsdWRlLHApIT09LTEpKXtkc3RbcF09c3JjW3BdO319CnJldHVybiBkc3Q7fSxhcnJheUluZGV4T2Y6ZnVuY3Rpb24oYXJyYXksaXRlbSl7Zm9yKHZhciBpPTAsaWxlbj1hcnJheS5sZW5ndGg7aTxpbGVuO2krKyl7aWYoYXJyYXlbaV09PT1pdGVtKXtyZXR1cm4gaTt9fQpyZXR1cm4tMTt9LGdldF9lbGVtZW50X3NpYmxpbmc6ZnVuY3Rpb24obm9kZSxkb21fYXR0cil7dmFyIHNpYmxpbmc9bm9kZVtkb21fYXR0cl07d2hpbGUoc2libGluZyYmc2libGluZy5ub2RlVHlwZSE9PTEpe3NpYmxpbmc9c2libGluZ1tkb21fYXR0cl07fQpyZXR1cm4gc2libGluZzt9LHhtbF9ub2RlX3RvX3N0cmluZzpmdW5jdGlvbihub2RlLGNoaWxkc19vbmx5KXtpZihjaGlsZHNfb25seSl7dmFyIGNoaWxkcz1ub2RlLmNoaWxkTm9kZXMscj1bXTtmb3IodmFyIGk9MCxpbGVuPWNoaWxkcy5sZW5ndGg7aTxpbGVuO2krKyl7ci5wdXNoKHRoaXMueG1sX25vZGVfdG9fc3RyaW5nKGNoaWxkc1tpXSkpO30KcmV0dXJuIHIuam9pbignJyk7fWVsc2V7aWYobm9kZS5ub2RlVHlwZT09Myl7cmV0dXJuIG5vZGUuZGF0YTt9CmlmKHR5cGVvZiBYTUxTZXJpYWxpemVyIT09J3VuZGVmaW5lZCcpe3JldHVybihuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhub2RlKTt9ZWxzZXtzd2l0Y2gobm9kZS5ub2RlVHlwZSl7Y2FzZSAxOnJldHVybiBub2RlLm91dGVySFRNTDtjYXNlIDQ6cmV0dXJuJzwhW0NEQVRBWycrbm9kZS5kYXRhKyddXT4nO2Nhc2UgODpyZXR1cm4nPCEtLSAnK25vZGUuZGF0YSsnLS0+Jzt9CnRocm93IG5ldyBFcnJvcignVW5rbm93biBub2RlIHR5cGUgJytub2RlLm5vZGVUeXBlKTt9fX0sY2FsbDpmdW5jdGlvbihjb250ZXh0LHRlbXBsYXRlLG9sZF9kaWN0LF9pbXBvcnQsY2FsbGJhY2spe3ZhciBuZXdfZGljdD10aGlzLmV4dGVuZCh7fSxvbGRfZGljdCk7bmV3X2RpY3RbJ19fY2FsbGVyX18nXT1vbGRfZGljdFsnX190ZW1wbGF0ZV9fJ107aWYoY2FsbGJhY2spe25ld19kaWN0WzBdPWNhbGxiYWNrKGNvbnRleHQsbmV3X2RpY3QpO30KcmV0dXJuIGNvbnRleHQuZW5naW5lLl9yZW5kZXIodGVtcGxhdGUsbmV3X2RpY3QpO30sZm9yZWFjaDpmdW5jdGlvbihjb250ZXh0LGVudSxhcyxvbGRfZGljdCxjYWxsYmFjayl7aWYoZW51IT1udWxsKXt2YXIgaW5kZXgsamxlbixjdXI7dmFyIG5ld19kaWN0PXRoaXMuZXh0ZW5kKHt9LG9sZF9kaWN0KTtuZXdfZGljdFthcysiX2FsbCJdPWVudTt2YXIgYXNfdmFsdWU9YXMrIl92YWx1ZSIsYXNfaW5kZXg9YXMrIl9pbmRleCIsYXNfZmlyc3Q9YXMrIl9maXJzdCIsYXNfbGFzdD1hcysiX2xhc3QiLGFzX3Bhcml0eT1hcysiX3Bhcml0eSI7aWYoZW51IGluc3RhbmNlb2YgQXJyYXkpe3ZhciBzaXplPWVudS5sZW5ndGg7bmV3X2RpY3RbYXMrIl9zaXplIl09c2l6ZTtmb3IoaW5kZXg9MCxqbGVuPWVudS5sZW5ndGg7aW5kZXg8amxlbjtpbmRleCsrKXtjdXI9ZW51W2luZGV4XTtuZXdfZGljdFthc192YWx1ZV09Y3VyO25ld19kaWN0W2FzX2luZGV4XT1pbmRleDtuZXdfZGljdFthc19maXJzdF09aW5kZXg9PT0wO25ld19kaWN0W2FzX2xhc3RdPWluZGV4KzE9PT1zaXplO25ld19kaWN0W2FzX3Bhcml0eV09KGluZGV4JTI9PTE/J29kZCc6J2V2ZW4nKTtpZihjdXImJmN1ci5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7dGhpcy5leHRlbmQobmV3X2RpY3QsY3VyKTt9Cm5ld19kaWN0W2FzXT1jdXI7Y2FsbGJhY2soY29udGV4dCxuZXdfZGljdCk7fX1lbHNlIGlmKGVudS5jb25zdHJ1Y3Rvcj09TnVtYmVyKXt2YXIgX2VudT1bXTtmb3IodmFyIGk9MDtpPGVudTtpKyspe19lbnUucHVzaChpKTt9CnRoaXMuZm9yZWFjaChjb250ZXh0LF9lbnUsYXMsb2xkX2RpY3QsY2FsbGJhY2spO31lbHNle2luZGV4PTA7Zm9yKHZhciBrIGluIGVudSl7aWYoZW51Lmhhc093blByb3BlcnR5KGspKXtjdXI9ZW51W2tdO25ld19kaWN0W2FzX3ZhbHVlXT1jdXI7bmV3X2RpY3RbYXNfaW5kZXhdPWluZGV4O25ld19kaWN0W2FzX2ZpcnN0XT1pbmRleD09PTA7bmV3X2RpY3RbYXNfcGFyaXR5XT0oaW5kZXglMj09MT8nb2RkJzonZXZlbicpO25ld19kaWN0W2FzXT1rO2NhbGxiYWNrKGNvbnRleHQsbmV3X2RpY3QpO2luZGV4Kz0xO319fQpfLmVhY2goT2JqZWN0LmtleXMob2xkX2RpY3QpLGZ1bmN0aW9uKHope29sZF9kaWN0W3pdPW5ld19kaWN0W3pdO30pO31lbHNle3RoaXMuZXhjZXB0aW9uKCJObyBlbnVtZXJhdG9yIGdpdmVuIHRvIGZvcmVhY2giLGNvbnRleHQpO319fX07UVdlYjIuRW5naW5lPShmdW5jdGlvbigpe2Z1bmN0aW9uIEVuZ2luZSgpe3RoaXMucHJlZml4PSd0Jzt0aGlzLmRlYnVnPWZhbHNlO3RoaXMudGVtcGxhdGVzX3Jlc291cmNlcz1bXTt0aGlzLnRlbXBsYXRlcz17fTt0aGlzLmNvbXBpbGVkX3RlbXBsYXRlcz17fTt0aGlzLmV4dGVuZF90ZW1wbGF0ZXM9e307dGhpcy5kZWZhdWx0X2RpY3Q9e307dGhpcy50b29scz1RV2ViMi50b29sczt0aGlzLmpRdWVyeT13aW5kb3cualF1ZXJ5O3RoaXMucmVzZXJ2ZWRfd29yZHM9UVdlYjIuUkVTRVJWRURfV09SRFMuc2xpY2UoMCk7dGhpcy5hY3Rpb25zX3ByZWNlZGVuY2U9UVdlYjIuQUNUSU9OU19QUkVDRURFTkNFLnNsaWNlKDApO3RoaXMudm9pZF9lbGVtZW50cz1RV2ViMi5WT0lEX0VMRU1FTlRTLnNsaWNlKDApO3RoaXMud29yZF9yZXBsYWNlbWVudD1RV2ViMi50b29scy5leHRlbmQoe30sUVdlYjIuV09SRF9SRVBMQUNFTUVOVCk7dGhpcy5wcmVwcm9jZXNzX25vZGU9bnVsbDtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt0aGlzLmFkZF90ZW1wbGF0ZShhcmd1bWVudHNbaV0pO319ClFXZWIyLnRvb2xzLmV4dGVuZChFbmdpbmUucHJvdG90eXBlLHthZGRfdGVtcGxhdGU6ZnVuY3Rpb24odGVtcGxhdGUsY2FsbGJhY2spe3ZhciBzZWxmPXRoaXM7dGhpcy50ZW1wbGF0ZXNfcmVzb3VyY2VzLnB1c2godGVtcGxhdGUpO2lmKHRlbXBsYXRlLmNvbnN0cnVjdG9yPT09U3RyaW5nKXtyZXR1cm4gdGhpcy5sb2FkX3htbCh0ZW1wbGF0ZSxmdW5jdGlvbihlcnIseERvYyl7aWYoZXJyKXtpZihjYWxsYmFjayl7cmV0dXJuIGNhbGxiYWNrKGVycik7fWVsc2V7dGhyb3cgZXJyO319CnNlbGYuYWRkX3RlbXBsYXRlKHhEb2MsY2FsbGJhY2spO30pO30KdGVtcGxhdGU9dGhpcy5wcmVwcm9jZXNzKHRlbXBsYXRlKTt2YXIgZWM9KHRlbXBsYXRlLmRvY3VtZW50RWxlbWVudCYmdGVtcGxhdGUuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpfHx0ZW1wbGF0ZS5jaGlsZE5vZGVzfHxbXTtmb3IodmFyIGk9MDtpPGVjLmxlbmd0aDtpKyspe3ZhciBub2RlPWVjW2ldO2lmKG5vZGUubm9kZVR5cGU9PT0xKXt2YXIgbmFtZT1ub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnByZWZpeCsnLW5hbWUnKTt2YXIgZXh0ZW5kPW5vZGUuZ2V0QXR0cmlidXRlKHRoaXMucHJlZml4KyctZXh0ZW5kJyk7aWYobmFtZSYmZXh0ZW5kKXtpZighdGhpcy50ZW1wbGF0ZXNbZXh0ZW5kXSl7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJDYW4ndCBjbG9uZSB1bmRlZmluZWQgdGVtcGxhdGUgIitleHRlbmQpO30KdGhpcy50ZW1wbGF0ZXNbbmFtZV09dGhpcy50ZW1wbGF0ZXNbZXh0ZW5kXS5jbG9uZU5vZGUodHJ1ZSk7ZXh0ZW5kPW5hbWU7bmFtZT11bmRlZmluZWQ7fQppZihuYW1lKXt0aGlzLnRlbXBsYXRlc1tuYW1lXT1ub2RlO3RoaXMuY29tcGlsZWRfdGVtcGxhdGVzW25hbWVdPW51bGw7fWVsc2UgaWYoZXh0ZW5kKXtkZWxldGUodGhpcy5jb21waWxlZF90ZW1wbGF0ZXNbZXh0ZW5kXSk7aWYodGhpcy5leHRlbmRfdGVtcGxhdGVzW2V4dGVuZF0pe3RoaXMuZXh0ZW5kX3RlbXBsYXRlc1tleHRlbmRdLnB1c2gobm9kZSk7fWVsc2V7dGhpcy5leHRlbmRfdGVtcGxhdGVzW2V4dGVuZF09W25vZGVdO319fX0KaWYoY2FsbGJhY2spe2NhbGxiYWNrKG51bGwsdGVtcGxhdGUpO30KcmV0dXJuIHRydWU7fSxwcmVwcm9jZXNzOmZ1bmN0aW9uKGRvYyl7dmFyIHNlbGY9dGhpczt2YXIgY2hpbGRzPShkb2MuZG9jdW1lbnRFbGVtZW50JiZkb2MuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpfHxkb2MuY2hpbGROb2Rlc3x8W107Zm9yKHZhciBpPTA7aTxjaGlsZHMubGVuZ3RoO2krKyl7dmFyIG5vZGU9Y2hpbGRzW2ldO2lmKG5vZGUubm9kZVR5cGU9PT0xJiZub2RlLm5vZGVOYW1lPT0ncGFyc2VyZXJyb3InKXtyZXR1cm4gdGhpcy50b29scy5leGNlcHRpb24obm9kZS5pbm5lclRleHQpO319CnZhciB0YnJhbmNoPWRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbdC1lbGlmXSwgW3QtZWxzZV0nKTtmb3IodmFyIGk9MCxpbGVuPXRicmFuY2gubGVuZ3RoO2k8aWxlbjtpKyspe3ZhciBub2RlPXRicmFuY2hbaV07dmFyIHByZXZfZWxlbT1zZWxmLnRvb2xzLmdldF9lbGVtZW50X3NpYmxpbmcobm9kZSwncHJldmlvdXNTaWJsaW5nJyk7dmFyIHBhdHRyPWZ1bmN0aW9uKG5hbWUpe3JldHVybiBwcmV2X2VsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO30KdmFyIG5hdHRyPWZ1bmN0aW9uKG5hbWUpe3JldHVybishIW5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO30KaWYocHJldl9lbGVtJiYocGF0dHIoJ3QtaWYnKXx8cGF0dHIoJ3QtZWxpZicpKSl7aWYocGF0dHIoJ3QtZm9yZWFjaCcpKXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiB0LWlmIGNhbm5vdCBzdGF5IGF0IHRoZSBzYW1lIGxldmVsIGFzIHQtZm9yZWFjaCB3aGVuIHVzaW5nIHQtZWxpZiBvciB0LWVsc2UiKTt9CmlmKFsndC1pZicsJ3QtZWxpZicsJ3QtZWxzZSddLm1hcChuYXR0cikucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYjt9KT4xKXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiBvbmx5IG9uZSBjb25kaXRpb25hbCBicmFuY2hpbmcgZGlyZWN0aXZlIGlzIGFsbG93ZWQgcGVyIG5vZGUiKTt9CnZhciB0ZXh0X25vZGU7d2hpbGUoKHRleHRfbm9kZT1ub2RlLnByZXZpb3VzU2libGluZykhPT1wcmV2X2VsZW0pe2lmKHNlbGYudG9vbHMudHJpbSh0ZXh0X25vZGUubm9kZVZhbHVlKSl7cmV0dXJuIHNlbGYudG9vbHMuZXhjZXB0aW9uKCJFcnJvcjogdGV4dCBpcyBub3QgYWxsb3dlZCBiZXR3ZWVuIGJyYW5jaGluZyBkaXJlY3RpdmVzIik7fQp0ZXh0X25vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZXh0X25vZGUpO319ZWxzZXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiB0LWVsaWYgYW5kIHQtZWxzZSBkaXJlY3RpdmVzIG11c3QgYmUgcHJlY2VkZWQgYnkgYSB0LWlmIG9yIHQtZWxpZiBkaXJlY3RpdmUiKTt9fQpyZXR1cm4gZG9jO30sbG9hZF94bWw6ZnVuY3Rpb24ocyxjYWxsYmFjayl7dmFyIHNlbGY9dGhpczt2YXIgYXN5bmM9ISFjYWxsYmFjaztzPXRoaXMudG9vbHMudHJpbShzKTtpZihzLmNoYXJBdCgwKT09PSc8Jyl7dmFyIHRwbD10aGlzLmxvYWRfeG1sX3N0cmluZyhzKTtpZihjYWxsYmFjayl7Y2FsbGJhY2sobnVsbCx0cGwpO30KcmV0dXJuIHRwbDt9ZWxzZXt2YXIgcmVxPXRoaXMuZ2V0X3hocigpO2lmKHRoaXMuZGVidWcpe3MrPSc/ZGVidWc9JysobmV3IERhdGUoKSkuZ2V0VGltZSgpO30KcmVxLm9wZW4oJ0dFVCcscyxhc3luYyk7aWYoYXN5bmMpe3JlcS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixmdW5jdGlvbigpe2lmKHJlcS5zdGF0dXM9PTIwMHx8cmVxLnN0YXR1cz09MCl7Y2FsbGJhY2sobnVsbCxzZWxmLl9wYXJzZV9mcm9tX3JlcXVlc3QocmVxKSk7fWVsc2V7Y2FsbGJhY2sobmV3IEVycm9yKCJDYW4ndCBsb2FkIHRlbXBsYXRlICIrcysiLCBodHRwIHN0YXR1cyAiK3JlcS5zdGF0dXMpKTt9fSk7fQpyZXEuc2VuZChudWxsKTtpZighYXN5bmMpe3JldHVybiB0aGlzLl9wYXJzZV9mcm9tX3JlcXVlc3QocmVxKTt9fX0sX3BhcnNlX2Zyb21fcmVxdWVzdDpmdW5jdGlvbihyZXEpe3ZhciB4RG9jPXJlcS5yZXNwb25zZVhNTDtpZih4RG9jKXtpZigheERvYy5kb2N1bWVudEVsZW1lbnQpe3Rocm93IG5ldyBFcnJvcigiUVdlYjI6IFRoaXMgeG1sIGRvY3VtZW50IGhhcyBubyByb290IGRvY3VtZW50IDogIit4RG9jLnJlc3BvbnNlVGV4dCk7fQppZih4RG9jLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZT09InBhcnNlcmVycm9yIil7dGhyb3cgbmV3IEVycm9yKCJRV2ViMjogQ291bGQgbm90IHBhcnNlIGRvY3VtZW50IDoiK3hEb2MuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlKTt9CnJldHVybiB4RG9jO31lbHNle3JldHVybiB0aGlzLmxvYWRfeG1sX3N0cmluZyhyZXEucmVzcG9uc2VUZXh0KTt9fSxsb2FkX3htbF9zdHJpbmc6ZnVuY3Rpb24ocyl7aWYod2luZG93LkRPTVBhcnNlcil7dmFyIGRwPW5ldyBET01QYXJzZXIoKTt2YXIgcj1kcC5wYXJzZUZyb21TdHJpbmcocywidGV4dC94bWwiKTtpZihyLmJvZHkmJnIuYm9keS5maXJzdENoaWxkJiZyLmJvZHkuZmlyc3RDaGlsZC5ub2RlTmFtZT09J3BhcnNlcmVycm9yJyl7dGhyb3cgbmV3IEVycm9yKCJRV2ViMjogQ291bGQgbm90IHBhcnNlIGRvY3VtZW50IDoiK3IuYm9keS5pbm5lclRleHQpO30KcmV0dXJuIHI7fQp2YXIgeERvYzt0cnl7eERvYz1uZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLkRPTURvY3VtZW50Iik7fWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGZpbmQgYSBET00gUGFyc2VyOiAiK2UubWVzc2FnZSk7fQp4RG9jLmFzeW5jPWZhbHNlO3hEb2MucHJlc2VydmVXaGl0ZVNwYWNlPXRydWU7eERvYy5sb2FkWE1MKHMpO3JldHVybiB4RG9jO30saGFzX3RlbXBsYXRlOmZ1bmN0aW9uKHRlbXBsYXRlKXtyZXR1cm4hIXRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXTt9LGdldF94aHI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuWE1MSHR0cFJlcXVlc3Qpe3JldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7fQp0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNU1hNTDIuWE1MSFRUUC4zLjAnKTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZ2V0IFhIUiIpO319LGNvbXBpbGU6ZnVuY3Rpb24obm9kZSl7dmFyIGU9bmV3IFFXZWIyLkVsZW1lbnQodGhpcyxub2RlKTt2YXIgdGVtcGxhdGU9bm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5wcmVmaXgrJy1uYW1lJyk7cmV0dXJuIiAgIC8qICd0aGlzJyByZWZlcnMgdG8gUXdlYjIuRW5naW5lIGluc3RhbmNlICovXG4iKyIgICB2YXIgY29udGV4dCA9IHsgZW5naW5lIDogdGhpcywgdGVtcGxhdGUgOiAiKyh0aGlzLnRvb2xzLmpzX2VzY2FwZSh0ZW1wbGF0ZSkpKyIgfTtcbiIrIiAgIGRpY3QgPSBkaWN0IHx8IHt9O1xuIisiICAgZGljdFsnX190ZW1wbGF0ZV9fJ10gPSAnIit0ZW1wbGF0ZSsiJztcbiIrIiAgIHZhciByID0gW107XG4iKyIgICAvKiBTVEFSVCBURU1QTEFURSAqLyIrCih0aGlzLmRlYnVnPyIiOiIgdHJ5IHtcbiIpKwooZS5jb21waWxlKCkpKyJcbiIrIiAgIC8qIEVORCBPRiBURU1QTEFURSAqLyIrCih0aGlzLmRlYnVnPyIiOiIgfSBjYXRjaChlcnJvcikge1xuIisiICAgICAgIGlmIChjb25zb2xlICYmIGNvbnNvbGUuZXhjZXB0aW9uKSBjb25zb2xlLmV4Y2VwdGlvbihlcnJvcik7XG4iKyIgICAgICAgY29udGV4dC5lbmdpbmUudG9vbHMuZXhjZXB0aW9uKCdSdW50aW1lIEVycm9yOiAnICsgZXJyb3IsIGNvbnRleHQpO1xuIikrCih0aGlzLmRlYnVnPyIiOiIgICB9XG4iKSsiICAgcmV0dXJuIHIuam9pbignJyk7Ijt9LHJlbmRlcjpmdW5jdGlvbih0ZW1wbGF0ZSxkaWN0KXtkaWN0PWRpY3R8fHt9O1FXZWIyLnRvb2xzLmV4dGVuZChkaWN0LHRoaXMuZGVmYXVsdF9kaWN0KTt2YXIgcj10aGlzLl9yZW5kZXIodGVtcGxhdGUsZGljdCk7cmV0dXJuIHI7fSxfcmVuZGVyOmZ1bmN0aW9uKHRlbXBsYXRlLGRpY3Qpe2lmKHRoaXMuY29tcGlsZWRfdGVtcGxhdGVzW3RlbXBsYXRlXSl7cmV0dXJuIHRoaXMuY29tcGlsZWRfdGVtcGxhdGVzW3RlbXBsYXRlXS5hcHBseSh0aGlzLFtkaWN0fHx7fV0pO31lbHNlIGlmKHRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXSl7dmFyIGV4dDtpZihleHQ9dGhpcy5leHRlbmRfdGVtcGxhdGVzW3RlbXBsYXRlXSl7dmFyIGV4dGVuZF9ub2RlO3doaWxlKGV4dGVuZF9ub2RlPWV4dC5zaGlmdCgpKXt0aGlzLmV4dGVuZCh0ZW1wbGF0ZSxleHRlbmRfbm9kZSk7fX0KdmFyIGNvZGU9dGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXSksdGNvbXBpbGVkO3RyeXt0Y29tcGlsZWQ9bmV3IEZ1bmN0aW9uKFsnZGljdCddLGNvZGUpO31jYXRjaChlcnJvcil7aWYodGhpcy5kZWJ1ZyYmd2luZG93LmNvbnNvbGUpe2NvbnNvbGUubG9nKGNvZGUpO30KdGhpcy50b29scy5leGNlcHRpb24oIkVycm9yIGV2YWx1YXRpbmcgdGVtcGxhdGU6ICIrZXJyb3Ise3RlbXBsYXRlOnRlbXBsYXRlfSk7fQppZighdGNvbXBpbGVkKXt0aGlzLnRvb2xzLmV4Y2VwdGlvbigiRXJyb3IgZXZhbHVhdGluZyB0ZW1wbGF0ZTogKElFPykiK2Vycm9yLHt0ZW1wbGF0ZTp0ZW1wbGF0ZX0pO30KdGhpcy5jb21waWxlZF90ZW1wbGF0ZXNbdGVtcGxhdGVdPXRjb21waWxlZDtyZXR1cm4gdGhpcy5yZW5kZXIodGVtcGxhdGUsZGljdCk7fWVsc2V7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJUZW1wbGF0ZSAnIit0ZW1wbGF0ZSsiJyBub3QgZm91bmQiKTt9fSxleHRlbmQ6ZnVuY3Rpb24odGVtcGxhdGUsZXh0ZW5kX25vZGUpe3ZhciBqUXVlcnk9dGhpcy5qUXVlcnk7aWYoIWpRdWVyeSl7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJDYW4ndCBleHRlbmQgdGVtcGxhdGUgIit0ZW1wbGF0ZSsiIHdpdGhvdXQgalF1ZXJ5Iik7fQp2YXIgdGVtcGxhdGVfZGVzdD10aGlzLnRlbXBsYXRlc1t0ZW1wbGF0ZV07Zm9yKHZhciBpPTAsaWxlbj1leHRlbmRfbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtpPGlsZW47aSsrKXt2YXIgY2hpbGQ9ZXh0ZW5kX25vZGUuY2hpbGROb2Rlc1tpXTtpZihjaGlsZC5ub2RlVHlwZT09PTEpe3ZhciBqcXVlcnk9Y2hpbGQuZ2V0QXR0cmlidXRlKHRoaXMucHJlZml4KyctanF1ZXJ5Jyksb3BlcmF0aW9uPWNoaWxkLmdldEF0dHJpYnV0ZSh0aGlzLnByZWZpeCsnLW9wZXJhdGlvbicpLHRhcmdldCxlcnJvcl9tc2c9IkVycm9yIHdoaWxlIGV4dGVuZGluZyB0ZW1wbGF0ZSAnIit0ZW1wbGF0ZTtpZihqcXVlcnkpe3RhcmdldD1qUXVlcnkoanF1ZXJ5LHRlbXBsYXRlX2Rlc3QpO2lmKCF0YXJnZXQubGVuZ3RoJiZ3aW5kb3cuY29uc29sZSl7Y29uc29sZS5kZWJ1ZygnQ2FuXCd0IGZpbmQgIicranF1ZXJ5KyciIHdoZW4gZXh0ZW5kaW5nIHRlbXBsYXRlICcrdGVtcGxhdGUpO319ZWxzZXt0aGlzLnRvb2xzLmV4Y2VwdGlvbihlcnJvcl9tc2crIk5vIGV4cHJlc3Npb24gZ2l2ZW4iKTt9CmVycm9yX21zZys9IicgKGV4cHJlc3Npb249JyIranF1ZXJ5KyInKSA6ICI7aWYob3BlcmF0aW9uKXt2YXIgYWxsb3dlZF9vcGVyYXRpb25zPSJhcHBlbmQscHJlcGVuZCxiZWZvcmUsYWZ0ZXIscmVwbGFjZSxpbm5lcixhdHRyaWJ1dGVzIi5zcGxpdCgnLCcpO2lmKHRoaXMudG9vbHMuYXJyYXlJbmRleE9mKGFsbG93ZWRfb3BlcmF0aW9ucyxvcGVyYXRpb24pPT0tMSl7dGhpcy50b29scy5leGNlcHRpb24oZXJyb3JfbXNnKyJJbnZhbGlkIG9wZXJhdGlvbiA6ICciK29wZXJhdGlvbisiJyIpO30Kb3BlcmF0aW9uPXsncmVwbGFjZSc6J3JlcGxhY2VXaXRoJywnaW5uZXInOidodG1sJ31bb3BlcmF0aW9uXXx8b3BlcmF0aW9uO2lmKG9wZXJhdGlvbj09PSdhdHRyaWJ1dGVzJyl7alF1ZXJ5KCdhdHRyaWJ1dGUnLGNoaWxkKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGF0dHJpYj1qUXVlcnkodGhpcyk7dGFyZ2V0LmF0dHIoYXR0cmliLmF0dHIoJ25hbWUnKSxhdHRyaWIudGV4dCgpfHxhdHRyaWIuYXR0cigndmFsdWUnKSk7fSk7fWVsc2V7dGFyZ2V0W29wZXJhdGlvbl0oY2hpbGQuY2xvbmVOb2RlKHRydWUpLmNoaWxkTm9kZXMpO319ZWxzZXt0cnl7dmFyIGY9bmV3IEZ1bmN0aW9uKFsnJCcsJ2RvY3VtZW50J10sdGhpcy50b29scy54bWxfbm9kZV90b19zdHJpbmcoY2hpbGQsdHJ1ZSkpO31jYXRjaChlcnJvcil7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJQYXJzZSAiK2Vycm9yX21zZytlcnJvcik7fQp0cnl7Zi5hcHBseSh0YXJnZXQsW2pRdWVyeSx0ZW1wbGF0ZV9kZXN0Lm93bmVyRG9jdW1lbnRdKTt9Y2F0Y2goZXJyb3Ipe3JldHVybiB0aGlzLnRvb2xzLmV4Y2VwdGlvbigiUnVudGltZSAiK2Vycm9yX21zZytlcnJvcik7fX19fX19KTtyZXR1cm4gRW5naW5lO30pKCk7UVdlYjIuRWxlbWVudD0oZnVuY3Rpb24oKXtmdW5jdGlvbiBFbGVtZW50KGVuZ2luZSxub2RlKXt0aGlzLmVuZ2luZT1lbmdpbmU7dGhpcy5ub2RlPW5vZGU7dGhpcy50YWc9bm9kZS50YWdOYW1lO3RoaXMuYWN0aW9ucz17dGFnOnRoaXMudGFnfTt0aGlzLmFjdGlvbnNfZG9uZT1bXTt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5jaGlsZHJlbj1bXTt0aGlzLl90b3A9W107dGhpcy5fYm90dG9tPVtdO3RoaXMuX2luZGVudD0xO3RoaXMucHJvY2Vzc19jaGlsZHJlbj10cnVlO3RoaXMuaXNfdm9pZF9lbGVtZW50PX5RV2ViMi50b29scy5hcnJheUluZGV4T2YodGhpcy5lbmdpbmUudm9pZF9lbGVtZW50cyx0aGlzLnRhZyk7dmFyIGNoaWxkcz10aGlzLm5vZGUuY2hpbGROb2RlcztpZihjaGlsZHMpe2Zvcih2YXIgaT0wLGlsZW49Y2hpbGRzLmxlbmd0aDtpPGlsZW47aSsrKXt0aGlzLmNoaWxkcmVuLnB1c2gobmV3IFFXZWIyLkVsZW1lbnQodGhpcy5lbmdpbmUsY2hpbGRzW2ldKSk7fX0KdmFyIGF0dHJzPXRoaXMubm9kZS5hdHRyaWJ1dGVzO2lmKGF0dHJzKXtmb3IodmFyIGo9MCxqbGVuPWF0dHJzLmxlbmd0aDtqPGpsZW47aisrKXt2YXIgYXR0cj1hdHRyc1tqXTt2YXIgbmFtZT1hdHRyLm5hbWU7dmFyIG09bmFtZS5tYXRjaChuZXcgUmVnRXhwKCJeIit0aGlzLmVuZ2luZS5wcmVmaXgrIi0oLispIikpO2lmKG0pe25hbWU9bVsxXTtpZihuYW1lPT09J25hbWUnKXtjb250aW51ZTt9CmlmKG5hbWUubWF0Y2goL15hdHRmPygtLiopPy8pKXt0aGlzLmF0dHJpYnV0ZXNbbVswXV09YXR0ci52YWx1ZTt9ZWxzZXt0aGlzLmFjdGlvbnNbbmFtZV09YXR0ci52YWx1ZTt9fWVsc2V7dGhpcy5hdHRyaWJ1dGVzW25hbWVdPWF0dHIudmFsdWU7fX19CmlmKHRoaXMuZW5naW5lLnByZXByb2Nlc3Nfbm9kZSl7dGhpcy5lbmdpbmUucHJlcHJvY2Vzc19ub2RlLmNhbGwodGhpcyk7fX0KUVdlYjIudG9vbHMuZXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLHtjb21waWxlOmZ1bmN0aW9uKCl7dmFyIHI9W10saW5zdHJpbmc9ZmFsc2UsbGluZXM9dGhpcy5fY29tcGlsZSgpLnNwbGl0KCdcbicpO2Zvcih2YXIgaT0wLGlsZW49bGluZXMubGVuZ3RoO2k8aWxlbjtpKyspe3ZhciBtLGxpbmU9bGluZXNbaV07aWYobT1saW5lLm1hdGNoKC9eKFxzKilcL1wvQHN0cmluZz0oLiopLykpe2lmKGluc3RyaW5nKXtpZih0aGlzLmVuZ2luZS5kZWJ1Zyl7ci5wdXNoKChtWzJdLmluZGV4T2YoIlxcbiIpIT0tMT8iJyxcblx0IittWzFdKyInIjonJykrbVsyXSk7fWVsc2V7ci5wdXNoKG1bMl0pO319ZWxzZXtyLnB1c2gobVsxXSsici5wdXNoKCciK21bMl0pO2luc3RyaW5nPXRydWU7fX1lbHNle2lmKGluc3RyaW5nKXtyLnB1c2goIicpO1xuIik7fQppbnN0cmluZz1mYWxzZTtyLnB1c2gobGluZSsnXG4nKTt9fQpyZXR1cm4gci5qb2luKCcnKTt9LF9jb21waWxlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMubm9kZS5ub2RlVHlwZSl7Y2FzZSAzOmNhc2UgNDp0aGlzLnRvcF9zdHJpbmcodGhpcy5ub2RlLmRhdGEpO2JyZWFrO2Nhc2UgMTp0aGlzLmNvbXBpbGVfZWxlbWVudCgpO30KdmFyIHI9dGhpcy5fdG9wLmpvaW4oJycpO2lmKHRoaXMucHJvY2Vzc19jaGlsZHJlbil7Zm9yKHZhciBpPTAsaWxlbj10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPGlsZW47aSsrKXt2YXIgY2hpbGQ9dGhpcy5jaGlsZHJlbltpXTtjaGlsZC5faW5kZW50PXRoaXMuX2luZGVudDtyKz1jaGlsZC5fY29tcGlsZSgpO319CnIrPXRoaXMuX2JvdHRvbS5qb2luKCcnKTtyZXR1cm4gcjt9LGZvcm1hdF9leHByZXNzaW9uOmZ1bmN0aW9uKGUpe2lmKFFXZWIyLmV4cHJlc3Npb25zX2NhY2hlW2VdKXtyZXR1cm4gUVdlYjIuZXhwcmVzc2lvbnNfY2FjaGVbZV07fQp2YXIgY2hhcnM9ZS5zcGxpdCgnJyksaW5zdHJpbmc9JycsaW52YXI9JycsaW52YXJfcG9zPTAscj0nJztjaGFycy5wdXNoKCcgJyk7Zm9yKHZhciBpPTAsaWxlbj1jaGFycy5sZW5ndGg7aTxpbGVuO2krKyl7dmFyIGM9Y2hhcnNbaV07aWYoaW5zdHJpbmcubGVuZ3RoKXtpZihjPT09aW5zdHJpbmcmJmNoYXJzW2ktMV0hPT0iXFwiKXtpbnN0cmluZz0nJzt9fWVsc2UgaWYoYz09PSciJ3x8Yz09PSInIil7aW5zdHJpbmc9Yzt9ZWxzZSBpZihjLm1hdGNoKC9bYS16QS1aX1wkXS8pJiYhaW52YXIubGVuZ3RoKXtpbnZhcj1jO2ludmFyX3Bvcz1pO2NvbnRpbnVlO31lbHNlIGlmKGMubWF0Y2goL1xXLykmJmludmFyLmxlbmd0aCl7aWYoY2hhcnNbaW52YXJfcG9zLTFdIT09Jy4nJiZRV2ViMi50b29scy5hcnJheUluZGV4T2YodGhpcy5lbmdpbmUucmVzZXJ2ZWRfd29yZHMsaW52YXIpPDApe2ludmFyPXRoaXMuZW5naW5lLndvcmRfcmVwbGFjZW1lbnRbaW52YXJdfHwoImRpY3RbJyIraW52YXIrIiddIik7fQpyKz1pbnZhcjtpbnZhcj0nJzt9ZWxzZSBpZihpbnZhci5sZW5ndGgpe2ludmFyKz1jO2NvbnRpbnVlO30Kcis9Yzt9CnI9ci5zbGljZSgwLC0xKTtRV2ViMi5leHByZXNzaW9uc19jYWNoZVtlXT1yO3JldHVybiByO30sZm9ybWF0X3N0cjpmdW5jdGlvbihlKXtpZihlPT0nMCcpe3JldHVybidkaWN0WzBdJzt9CnJldHVybiB0aGlzLmZvcm1hdF9leHByZXNzaW9uKGUpO30sc3RyaW5nX2ludGVycG9sYXRpb246ZnVuY3Rpb24ocyl7dmFyIF90aGlzPXRoaXM7aWYoIXMpe3JldHVybiInJyI7fQpmdW5jdGlvbiBhcHBlbmRfbGl0ZXJhbChzKXtzJiZyLnB1c2goX3RoaXMuZW5naW5lLnRvb2xzLmpzX2VzY2FwZShzKSk7fQp2YXIgcmU9Lyg/OiN7KC4rPyl9fHt7KC4rPyl9fSkvZyxzdGFydD0wLHI9W10sbTt3aGlsZShtPXJlLmV4ZWMocykpe2FwcGVuZF9saXRlcmFsKHMuc2xpY2Uoc3RhcnQscmUubGFzdEluZGV4LW1bMF0ubGVuZ3RoKSk7ci5wdXNoKCcoJyt0aGlzLmZvcm1hdF9zdHIobVsyXXx8bVsxXSkrJyknKTtzdGFydD1yZS5sYXN0SW5kZXg7fQphcHBlbmRfbGl0ZXJhbChzLnNsaWNlKHN0YXJ0KSk7cmV0dXJuIHIuam9pbignICsgJyk7fSxpbmRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kZW50Kys7fSxkZWRlbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9pbmRlbnQhPT0wKXtyZXR1cm4gdGhpcy5faW5kZW50LS07fX0sZ2V0X2luZGVudDpmdW5jdGlvbigpe3JldHVybiBuZXcgQXJyYXkodGhpcy5faW5kZW50KzEpLmpvaW4oIlx0Iik7fSx0b3A6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX3RvcC5wdXNoKHRoaXMuZ2V0X2luZGVudCgpK3MrJ1xuJyk7fSx0b3Bfc3RyaW5nOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl90b3AucHVzaCh0aGlzLmdldF9pbmRlbnQoKSsiLy9Ac3RyaW5nPSIrdGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHMsdHJ1ZSkrJ1xuJyk7fSxib3R0b206ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2JvdHRvbS51bnNoaWZ0KHRoaXMuZ2V0X2luZGVudCgpK3MrJ1xuJyk7fSxib3R0b21fc3RyaW5nOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl9ib3R0b20udW5zaGlmdCh0aGlzLmdldF9pbmRlbnQoKSsiLy9Ac3RyaW5nPSIrdGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHMsdHJ1ZSkrJ1xuJyk7fSxjb21waWxlX2VsZW1lbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxpbGVuPXRoaXMuZW5naW5lLmFjdGlvbnNfcHJlY2VkZW5jZS5sZW5ndGg7aTxpbGVuO2krKyl7dmFyIGE9dGhpcy5lbmdpbmUuYWN0aW9uc19wcmVjZWRlbmNlW2ldO2lmKGEgaW4gdGhpcy5hY3Rpb25zKXt2YXIgdmFsdWU9dGhpcy5hY3Rpb25zW2FdO3ZhciBrZXk9J2NvbXBpbGVfYWN0aW9uXycrYTtpZih0aGlzW2tleV0pe3RoaXNba2V5XSh2YWx1ZSk7fWVsc2UgaWYodGhpcy5lbmdpbmVba2V5XSl7dGhpcy5lbmdpbmVba2V5XS5jYWxsKHRoaXMsdmFsdWUpO31lbHNle3RoaXMuZW5naW5lLnRvb2xzLmV4Y2VwdGlvbigiTm8gaGFuZGxlciBtZXRob2QgZm9yIGFjdGlvbiAnIithKyInIik7fX19fSxjb21waWxlX2FjdGlvbl90YWc6ZnVuY3Rpb24oKXtpZih0aGlzLnRhZy50b0xvd2VyQ2FzZSgpIT09dGhpcy5lbmdpbmUucHJlZml4KXt0aGlzLnRvcF9zdHJpbmcoIjwiK3RoaXMudGFnKTtmb3IodmFyIGEgaW4gdGhpcy5hdHRyaWJ1dGVzKXt2YXIgdj10aGlzLmF0dHJpYnV0ZXNbYV07dmFyIGQ9YS5zcGxpdCgnLScpO2lmKGRbMF09PT10aGlzLmVuZ2luZS5wcmVmaXgmJmQubGVuZ3RoPjEpe2lmKGQubGVuZ3RoPT09Mil7dGhpcy50b3AoInIucHVzaChjb250ZXh0LmVuZ2luZS50b29scy5nZW5fYXR0cmlidXRlKCIrKHRoaXMuZm9ybWF0X2V4cHJlc3Npb24odikpKyIpKTsiKTt9ZWxzZXt0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmdlbl9hdHRyaWJ1dGUoWyciK2Quc2xpY2UoMikuam9pbignLScpKyInLCAoIisKKGRbMV09PT0nYXR0Jz90aGlzLmZvcm1hdF9leHByZXNzaW9uKHYpOnRoaXMuc3RyaW5nX2ludGVycG9sYXRpb24odikpKyIpXSkpOyIpO319ZWxzZXt0aGlzLnRvcF9zdHJpbmcodGhpcy5lbmdpbmUudG9vbHMuZ2VuX2F0dHJpYnV0ZShbYSx2XSkpO319CmlmKHRoaXMuYWN0aW9ucy5vcGVudGFnPT09J3RydWUnfHwoIXRoaXMuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLmlzX3ZvaWRfZWxlbWVudCkpe3RoaXMudG9wX3N0cmluZygiLz4iKTt9ZWxzZXt0aGlzLnRvcF9zdHJpbmcoIj4iKTt0aGlzLmJvdHRvbV9zdHJpbmcoIjwvIit0aGlzLnRhZysiPiIpO319fSxjb21waWxlX2FjdGlvbl9pZjpmdW5jdGlvbih2YWx1ZSl7dGhpcy50b3AoImlmICgiKyh0aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKSkrIikgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2VsaWY6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJlbHNlIGlmICgiKyh0aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKSkrIikgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2Vsc2U6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJlbHNlIHsiKTt0aGlzLmJvdHRvbSgifSIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9mb3JlYWNoOmZ1bmN0aW9uKHZhbHVlKXt2YXIgYXM9dGhpcy5hY3Rpb25zWydhcyddfHx2YWx1ZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpO3RoaXMudG9wKCJjb250ZXh0LmVuZ2luZS50b29scy5mb3JlYWNoKGNvbnRleHQsICIrKHRoaXMuZm9ybWF0X2V4cHJlc3Npb24odmFsdWUpKSsiLCAiKyh0aGlzLmVuZ2luZS50b29scy5qc19lc2NhcGUoYXMpKSsiLCBkaWN0LCBmdW5jdGlvbihjb250ZXh0LCBkaWN0KSB7Iik7dGhpcy5ib3R0b20oIn0pOyIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9jYWxsOmZ1bmN0aW9uKHZhbHVlKXtpZih0aGlzLmNoaWxkcmVuLmxlbmd0aD09PTApe3JldHVybiB0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmNhbGwoY29udGV4dCwgIisodGhpcy5zdHJpbmdfaW50ZXJwb2xhdGlvbih2YWx1ZSkpKyIsIGRpY3QpKTsiKTt9ZWxzZXt0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmNhbGwoY29udGV4dCwgIisodGhpcy5zdHJpbmdfaW50ZXJwb2xhdGlvbih2YWx1ZSkpKyIsIGRpY3QsIG51bGwsIGZ1bmN0aW9uKGNvbnRleHQsIGRpY3QpIHsiKTt0aGlzLmJvdHRvbSgifSkpOyIpO3RoaXMuaW5kZW50KCk7dGhpcy50b3AoInZhciByID0gW107Iik7cmV0dXJuIHRoaXMuYm90dG9tKCJyZXR1cm4gci5qb2luKCcnKTsiKTt9fSxjb21waWxlX2FjdGlvbl9zZXQ6ZnVuY3Rpb24odmFsdWUpe3ZhciB2YXJpYWJsZT10aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKTtpZih0aGlzLmFjdGlvbnNbJ3ZhbHVlJ10pe2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoKXt0aGlzLmVuZ2luZS50b29scy53YXJuaW5nKCJAc2V0IHdpdGggQHZhbHVlIHBsdXMgbm9kZSBjaGlkcmVuIGZvdW5kLiBDaGlsZHJlbiBhcmUgaWdub3JlZC4iKTt9CnRoaXMudG9wKHZhcmlhYmxlKyIgPSAoIisodGhpcy5mb3JtYXRfZXhwcmVzc2lvbih0aGlzLmFjdGlvbnNbJ3ZhbHVlJ10pKSsiKTsiKTt0aGlzLnByb2Nlc3NfY2hpbGRyZW49ZmFsc2U7fWVsc2V7aWYodGhpcy5jaGlsZHJlbi5sZW5ndGg9PT0wKXt0aGlzLnRvcCh2YXJpYWJsZSsiID0gJyc7Iik7fWVsc2UgaWYodGhpcy5jaGlsZHJlbi5sZW5ndGg9PT0xJiZ0aGlzLmNoaWxkcmVuWzBdLm5vZGUubm9kZVR5cGU9PT0zKXt0aGlzLnRvcCh2YXJpYWJsZSsiID0gIisodGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHRoaXMuY2hpbGRyZW5bMF0ubm9kZS5kYXRhKSkrIjsiKTt0aGlzLnByb2Nlc3NfY2hpbGRyZW49ZmFsc2U7fWVsc2V7dGhpcy50b3AodmFyaWFibGUrIiA9IChmdW5jdGlvbihkaWN0KSB7Iik7dGhpcy5ib3R0b20oIn0pKGRpY3QpOyIpO3RoaXMuaW5kZW50KCk7dGhpcy50b3AoInZhciByID0gW107Iik7dGhpcy5ib3R0b20oInJldHVybiByLmpvaW4oJycpOyIpO319fSxjb21waWxlX2FjdGlvbl9lc2M6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJ2YXIgdCA9ICIrdGhpcy5mb3JtYXRfc3RyKHZhbHVlKSsiOyIpO3RoaXMudG9wKCJpZiAodCAhPSBudWxsKSByLnB1c2goY29udGV4dC5lbmdpbmUudG9vbHMuaHRtbF9lc2NhcGUodCkpOyIpO3RoaXMudG9wKCJlbHNlIHsiKTt0aGlzLmJvdHRvbSgifSIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9yYXc6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJ2YXIgdCA9ICIrdGhpcy5mb3JtYXRfc3RyKHZhbHVlKSsiOyIpO3RoaXMudG9wKCJpZiAodCAhPSBudWxsKSByLnB1c2godCk7Iik7dGhpcy50b3AoImVsc2UgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2pzOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRvcCgiKGZ1bmN0aW9uKCIrdmFsdWUrIikgeyIpO3RoaXMuYm90dG9tKCJ9KShkaWN0KTsiKTt0aGlzLmluZGVudCgpO3ZhciBsaW5lcz10aGlzLmVuZ2luZS50b29scy54bWxfbm9kZV90b19zdHJpbmcodGhpcy5ub2RlLHRydWUpLnNwbGl0KC9ccj9cbi8pO2Zvcih2YXIgaT0wLGlsZW49bGluZXMubGVuZ3RoO2k8aWxlbjtpKyspe3RoaXMudG9wKGxpbmVzW2ldKTt9CnRoaXMucHJvY2Vzc19jaGlsZHJlbj1mYWxzZTt9LGNvbXBpbGVfYWN0aW9uX2RlYnVnOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRvcCgiZGVidWdnZXI7Iik7fSxjb21waWxlX2FjdGlvbl9sb2c6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJjb25zb2xlLmxvZygiK3RoaXMuZm9ybWF0X2V4cHJlc3Npb24odmFsdWUpKyIpOyIpO319KTtyZXR1cm4gRWxlbWVudDt9KSgpOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9saWJzL2F1dG9jb21wbGV0ZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5hdXRvY29tcGxldGUuZXh0ZW5zaW9ucycsZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7dmFyIHByb3RvPSQudWkuYXV0b2NvbXBsZXRlLnByb3RvdHlwZTt2YXIgaW5pdFNvdXJjZT1wcm90by5faW5pdFNvdXJjZTtmdW5jdGlvbiBmaWx0ZXIoYXJyYXksdGVybSl7dmFyIG1hdGNoZXI9bmV3IFJlZ0V4cCgkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCh0ZXJtKSwiaSIpO3JldHVybiAkLmdyZXAoYXJyYXksZnVuY3Rpb24odmFsdWVfKXtyZXR1cm4gbWF0Y2hlci50ZXN0KCQoIjxkaXY+IikuaHRtbCh2YWx1ZV8ubGFiZWx8fHZhbHVlXy52YWx1ZXx8dmFsdWVfKS50ZXh0KCkpO30pO30KJC5leHRlbmQocHJvdG8se19pbml0U291cmNlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmh0bWwmJiQuaXNBcnJheSh0aGlzLm9wdGlvbnMuc291cmNlKSl7dGhpcy5zb3VyY2U9ZnVuY3Rpb24ocmVxdWVzdCxyZXNwb25zZSl7cmVzcG9uc2UoZmlsdGVyKHRoaXMub3B0aW9ucy5zb3VyY2UscmVxdWVzdC50ZXJtKSk7fTt9ZWxzZXtpbml0U291cmNlLmNhbGwodGhpcyk7fX0sX3JlbmRlckl0ZW06ZnVuY3Rpb24odWwsaXRlbSl7cmV0dXJuICQoIjxsaT48L2xpPiIpLmRhdGEoIml0ZW0uYXV0b2NvbXBsZXRlIixpdGVtKS5hcHBlbmQoJCgiPGE+PC9hPiIpW3RoaXMub3B0aW9ucy5odG1sPyJodG1sIjoidGV4dCJdKGl0ZW0ubGFiZWwpKS5hcHBlbmRUbyh1bCkuYWRkQ2xhc3MoaXRlbS5jbGFzc25hbWUpO30sfSk7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2xpYnMvYm9vdHN0cmFwLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmJvb3RzdHJhcC5leHRlbnNpb25zJyxmdW5jdGlvbigpeyd1c2Ugc3RyaWN0Jzt2YXIgYnNTYW5pdGl6ZVdoaXRlTGlzdD0kLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC53aGl0ZUxpc3Q7YnNTYW5pdGl6ZVdoaXRlTGlzdFsnKiddLnB1c2goJ3RpdGxlJywnc3R5bGUnLC9eZGF0YS1bXHctXSsvKTtic1Nhbml0aXplV2hpdGVMaXN0LmhlYWRlcj1bXTtic1Nhbml0aXplV2hpdGVMaXN0Lm1haW49W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5mb290ZXI9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5jYXB0aW9uPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QuY29sPVsnc3BhbiddO2JzU2FuaXRpemVXaGl0ZUxpc3QuY29sZ3JvdXA9WydzcGFuJ107YnNTYW5pdGl6ZVdoaXRlTGlzdC50YWJsZT1bXTtic1Nhbml0aXplV2hpdGVMaXN0LnRoZWFkPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QudGJvZHk9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC50Zm9vdGVyPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QudHI9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC50aD1bJ2NvbHNwYW4nLCdyb3dzcGFuJ107YnNTYW5pdGl6ZVdoaXRlTGlzdC50ZD1bJ2NvbHNwYW4nLCdyb3dzcGFuJ107YnNTYW5pdGl6ZVdoaXRlTGlzdC5hZGRyZXNzPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QuYXJ0aWNsZT1bXTtic1Nhbml0aXplV2hpdGVMaXN0LmFzaWRlPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QuYmxvY2txdW90ZT1bXTtic1Nhbml0aXplV2hpdGVMaXN0LnNlY3Rpb249W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5idXR0b249Wyd0eXBlJ107YnNTYW5pdGl6ZVdoaXRlTGlzdC5kZWw9W107ZnVuY3Rpb24gbWFrZUV4dGVuZGVkU2FuaXRpemVXaGl0ZUxpc3QoZXh0ZW5zaW9ucyl7dmFyIHdoaXRlTGlzdD1fLmNsb25lKCQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LndoaXRlTGlzdCk7T2JqZWN0LmtleXMoZXh0ZW5zaW9ucykuZm9yRWFjaChrZXk9Pnt3aGl0ZUxpc3Rba2V5XT0od2hpdGVMaXN0W2tleV18fFtdKS5jb25jYXQoZXh0ZW5zaW9uc1trZXldKTt9KTtyZXR1cm4gd2hpdGVMaXN0O30KJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRlZmF1bHQucGxhY2VtZW50PSdhdXRvJzskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC5mYWxsYmFja1BsYWNlbWVudD1bJ2JvdHRvbScsJ3JpZ2h0JywnbGVmdCcsJ3RvcCddOyQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0Lmh0bWw9dHJ1ZTskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC50cmlnZ2VyPSdob3Zlcic7JC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRlZmF1bHQuY29udGFpbmVyPSdib2R5JzskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC5ib3VuZGFyeT0nd2luZG93JzskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC5kZWxheT17c2hvdzoxMDAwLGhpZGU6MH07dmFyIGJvb3RzdHJhcFNob3dGdW5jdGlvbj0kLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlLnNob3c7JC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7JCgnLnRvb2x0aXAnKS5yZW1vdmUoKTtyZXR1cm4gYm9vdHN0cmFwU2hvd0Z1bmN0aW9uLmNhbGwodGhpcyk7fTtyZXR1cm57bWFrZUV4dGVuZGVkU2FuaXRpemVXaGl0ZUxpc3Q6bWFrZUV4dGVuZGVkU2FuaXRpemVXaGl0ZUxpc3QsfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvbGlicy9qcXVlcnkuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuanF1ZXJ5LmV4dGVuc2lvbnMnLGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnOyQuZXh0ZW5kKCQuZXhwclsnOiddLHtjb250YWluc0xpa2U6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gZWxlbWVudC5pbm5lckhUTUwudG9VcHBlckNhc2UoKS5pbmRleE9mKG1hdGNoZXNbM10udG9VcHBlckNhc2UoKSk+PTA7fSxjb250YWluc1RleHRMaWtlOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuIGVsZW1lbnQuaW5uZXJUZXh0LnRvVXBwZXJDYXNlKCkuaW5kZXhPZihtYXRjaGVzWzNdLnRvVXBwZXJDYXNlKCkpPj0wO30sY29udGFpbnNFeGFjdDpmdW5jdGlvbihlbGVtZW50LGluZGV4LG1hdGNoZXMpe3JldHVybiAkLnRyaW0oZWxlbWVudC5pbm5lckhUTUwpPT09bWF0Y2hlc1szXTt9LGNvbnRhaW5zUmVnZXg6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgcmVncmVnPS9eXC8oKD86XFxcL3xbXlwvXSkrKVwvKFttaWddezAsM30pJC8scmVnPXJlZ3JlZy5leGVjKG1hdGNoZXNbM10pO3JldHVybiByZWc/bmV3IFJlZ0V4cChyZWdbMV0scmVnWzJdKS50ZXN0KCQudHJpbShlbGVtZW50LmlubmVySFRNTCkpOmZhbHNlO30scHJvcENoZWNrZWQ6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gJChlbGVtZW50KS5wcm9wKCJjaGVja2VkIik9PT10cnVlO30scHJvcFNlbGVjdGVkOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkucHJvcCgic2VsZWN0ZWQiKT09PXRydWU7fSxwcm9wVmFsdWU6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gJChlbGVtZW50KS5wcm9wKCJ2YWx1ZSIpPT09bWF0Y2hlc1szXTt9LHByb3BWYWx1ZUNvbnRhaW5zOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkucHJvcCgidmFsdWUiKSYmJChlbGVtZW50KS5wcm9wKCJ2YWx1ZSIpLmluZGV4T2YobWF0Y2hlc1szXSkhPT0tMTt9LGhhc0RhdGE6ZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuISFfLnRvQXJyYXkoZWxlbWVudC5kYXRhc2V0KS5sZW5ndGg7fSxkYXRhOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkuZGF0YShtYXRjaGVzWzNdKTt9LGhhc1Zpc2liaWxpdHk6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgJGVsZW1lbnQ9JChlbGVtZW50KTtpZigkKGVsZW1lbnQpLmNzcygndmlzaWJpbGl0eScpPT09J2hpZGRlbicpe3JldHVybiBmYWxzZTt9CnZhciAkcGFyZW50PSRlbGVtZW50LnBhcmVudCgpO2lmKCEkcGFyZW50Lmxlbmd0aHx8JGVsZW1lbnQuaXMoJ2h0bWwnKSl7cmV0dXJuIHRydWU7fQpyZXR1cm4gJHBhcmVudC5pcygnOmhhc1Zpc2liaWxpdHknKTt9LGhhc09wYWNpdHk6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgJGVsZW1lbnQ9JChlbGVtZW50KTtpZihwYXJzZUZsb2F0KCQoZWxlbWVudCkuY3NzKCdvcGFjaXR5JykpPD0wLjAxKXtyZXR1cm4gZmFsc2U7fQp2YXIgJHBhcmVudD0kZWxlbWVudC5wYXJlbnQoKTtpZighJHBhcmVudC5sZW5ndGh8fCRlbGVtZW50LmlzKCdodG1sJykpe3JldHVybiB0cnVlO30KcmV0dXJuICRwYXJlbnQuaXMoJzpoYXNPcGFjaXR5Jyk7fSx9KTskLmZuLmV4dGVuZCh7Z2V0QXR0cmlidXRlczpmdW5jdGlvbigpe3ZhciBvPXt9O2lmKHRoaXMubGVuZ3RoKXt2YXIgYXR0cnM9dGhpc1swXS5hdHRyaWJ1dGVzO2Zvcih2YXIgaT0wLGw9YXR0cnMubGVuZ3RoO2k8bDtpKyspe3ZhciBhdHRyPWF0dHJzLml0ZW0oaSk7b1thdHRyLm5hbWVdPWF0dHIudmFsdWU7fX0KcmV0dXJuIG87fSxvZG9vQm91bmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciAkZWw9JCh0aGlzKTskZWwuYWRkQ2xhc3MoJ29fY2F0Y2hfYXR0ZW50aW9uJyk7c2V0VGltZW91dChmdW5jdGlvbigpeyRlbC5yZW1vdmVDbGFzcygnb19jYXRjaF9hdHRlbnRpb24nKTt9LDQwMCk7fSk7fSxwcmVwZW5kRXZlbnQ6ZnVuY3Rpb24oZXZlbnRzLHNlbGVjdG9yLGRhdGEsaGFuZGxlcil7dGhpcy5vbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZXZlbnRzPWV2ZW50cy5zcGxpdCgnICcpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZWw9dGhpcztfLmVhY2goZXZlbnRzLGZ1bmN0aW9uKGV2TmFtZU5hbWVzcGFjZWQpe3ZhciBldk5hbWU9ZXZOYW1lTmFtZXNwYWNlZC5zcGxpdCgnLicpWzBdO3ZhciBoYW5kbGVyPSQuX2RhdGEoZWwsJ2V2ZW50cycpW2V2TmFtZV0ucG9wKCk7JC5fZGF0YShlbCwnZXZlbnRzJylbZXZOYW1lXS51bnNoaWZ0KGhhbmRsZXIpO30pO30pO30sfSk7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2xpYnMvZG93bmxvYWQuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuZG93bmxvYWQnLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGRvd25sb2FkKGRhdGEsZmlsZW5hbWUsbWltZXR5cGUpe3ZhciBzZWxmPXdpbmRvdyxkZWZhdWx0TWltZT0iYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIixtaW1lVHlwZT1taW1ldHlwZXx8ZGVmYXVsdE1pbWUscGF5bG9hZD1kYXRhLHVybD0hZmlsZW5hbWUmJiFtaW1ldHlwZSYmcGF5bG9hZCxhbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLHRvU3RyaW5nPWZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSk7fSxteUJsb2I9KHNlbGYuQmxvYnx8c2VsZi5Nb3pCbG9ifHxzZWxmLldlYktpdEJsb2J8fHRvU3RyaW5nKSxmaWxlTmFtZT1maWxlbmFtZXx8ImRvd25sb2FkIixibG9iLHJlYWRlcjtteUJsb2I9bXlCbG9iLmNhbGw/bXlCbG9iLmJpbmQoc2VsZik6QmxvYjtpZihTdHJpbmcodGhpcyk9PT0idHJ1ZSIpe3BheWxvYWQ9W3BheWxvYWQsbWltZVR5cGVdO21pbWVUeXBlPXBheWxvYWRbMF07cGF5bG9hZD1wYXlsb2FkWzFdO30KaWYodXJsJiZ1cmwubGVuZ3RoPDIwNDgpe2ZpbGVOYW1lPXVybC5zcGxpdCgiLyIpLnBvcCgpLnNwbGl0KCI/IilbMF07YW5jaG9yLmhyZWY9dXJsO2lmKGFuY2hvci5ocmVmLmluZGV4T2YodXJsKSE9PS0xKXt2YXIgYWpheD1uZXcgWE1MSHR0cFJlcXVlc3QoKTthamF4Lm9wZW4oIkdFVCIsdXJsLHRydWUpO2FqYXgucmVzcG9uc2VUeXBlPSdibG9iJzthamF4Lm9ubG9hZD1mdW5jdGlvbihlKXtkb3dubG9hZChlLnRhcmdldC5yZXNwb25zZSxmaWxlTmFtZSxkZWZhdWx0TWltZSk7fTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YWpheC5zZW5kKCk7fSwwKTtyZXR1cm4gYWpheDt9fQppZigvXmRhdGE6W1x3K1wtXStcL1tcdytcLV0rWyw7XS8udGVzdChwYXlsb2FkKSl7aWYocGF5bG9hZC5sZW5ndGg+KDEwMjQqMTAyNCoxLjk5OSkmJm15QmxvYiE9PXRvU3RyaW5nKXtwYXlsb2FkPWRhdGFVcmxUb0Jsb2IocGF5bG9hZCk7bWltZVR5cGU9cGF5bG9hZC50eXBlfHxkZWZhdWx0TWltZTt9ZWxzZXtyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2I/bmF2aWdhdG9yLm1zU2F2ZUJsb2IoZGF0YVVybFRvQmxvYihwYXlsb2FkKSxmaWxlTmFtZSk6c2F2ZXIocGF5bG9hZCk7fX0KYmxvYj1wYXlsb2FkIGluc3RhbmNlb2YgbXlCbG9iP3BheWxvYWQ6bmV3IG15QmxvYihbcGF5bG9hZF0se3R5cGU6bWltZVR5cGV9KTtmdW5jdGlvbiBkYXRhVXJsVG9CbG9iKHN0clVybCl7dmFyIHBhcnRzPXN0clVybC5zcGxpdCgvWzo7LF0vKSx0eXBlPXBhcnRzWzFdLGRlY29kZXI9cGFydHNbMl09PT0iYmFzZTY0Ij9hdG9iOmRlY29kZVVSSUNvbXBvbmVudCxiaW5EYXRhPWRlY29kZXIocGFydHMucG9wKCkpLG14PWJpbkRhdGEubGVuZ3RoLGk9MCx1aUFycj1uZXcgVWludDhBcnJheShteCk7Zm9yKGk7aTxteDsrK2kpdWlBcnJbaV09YmluRGF0YS5jaGFyQ29kZUF0KGkpO3JldHVybiBuZXcgbXlCbG9iKFt1aUFycl0se3R5cGU6dHlwZX0pO30KZnVuY3Rpb24gc2F2ZXIodXJsLHdpbk1vZGUpe2lmKCdkb3dubG9hZCdpbiBhbmNob3Ipe2FuY2hvci5ocmVmPXVybDthbmNob3Iuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsZmlsZU5hbWUpO2FuY2hvci5jbGFzc05hbWU9ImRvd25sb2FkLWpzLWxpbmsiO2FuY2hvci5pbm5lckhUTUw9ImRvd25sb2FkaW5nLi4uIjthbmNob3Iuc3R5bGUuZGlzcGxheT0ibm9uZSI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthbmNob3IuY2xpY2soKTtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFuY2hvcik7aWYod2luTW9kZT09PXRydWUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLlVSTC5yZXZva2VPYmplY3RVUkwoYW5jaG9yLmhyZWYpO30sMjUwKTt9fSw2Nik7cmV0dXJuIHRydWU7fQppZigvKFZlcnNpb24pXC8oXGQrKVwuKFxkKykoPzpcLihcZCspKT8uKlNhZmFyaVwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXt1cmw9dXJsLnJlcGxhY2UoL15kYXRhOihbXHdcL1wtK10rKS8sZGVmYXVsdE1pbWUpO2lmKCF3aW5kb3cub3Blbih1cmwpKXtpZihjb25maXJtKCJEaXNwbGF5aW5nIE5ldyBEb2N1bWVudFxuXG5Vc2UgU2F2ZSBBcy4uLiB0byBkb3dubG9hZCwgdGhlbiBjbGljayBiYWNrIHRvIHJldHVybiB0byB0aGlzIHBhZ2UuIikpe2xvY2F0aW9uLmhyZWY9dXJsO319CnJldHVybiB0cnVlO30KdmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmKTtpZighd2luTW9kZSl7dXJsPSJkYXRhOiIrdXJsLnJlcGxhY2UoL15kYXRhOihbXHdcL1wtK10rKS8sZGVmYXVsdE1pbWUpO30KZi5zcmM9dXJsO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGYpO30sMzMzKTt9CmlmKG5hdmlnYXRvci5tc1NhdmVCbG9iKXtyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYixmaWxlTmFtZSk7fQppZihzZWxmLlVSTCl7c2F2ZXIoc2VsZi5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLHRydWUpO31lbHNle2lmKHR5cGVvZiBibG9iPT09InN0cmluZyJ8fGJsb2IuY29uc3RydWN0b3I9PT10b1N0cmluZyl7dHJ5e3JldHVybiBzYXZlcigiZGF0YToiK21pbWVUeXBlKyI7YmFzZTY0LCIrc2VsZi5idG9hKGJsb2IpKTt9Y2F0Y2goeSl7cmV0dXJuIHNhdmVyKCJkYXRhOiIrbWltZVR5cGUrIiwiK2VuY29kZVVSSUNvbXBvbmVudChibG9iKSk7fX0KcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7cmVhZGVyLm9ubG9hZD1mdW5jdGlvbigpe3NhdmVyKHRoaXMucmVzdWx0KTt9O3JlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO30KcmV0dXJuIHRydWU7fTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvbGlicy9jb250ZW50LWRpc3Bvc2l0aW9uLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmNvbnRlbnRkaXNwb3NpdGlvbicsZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7dmFyIEhFWF9FU0NBUEVfUkVQTEFDRV9SRUdFWFA9LyUoWzAtOUEtRmEtZl17Mn0pL2c7dmFyIE5PTl9MQVRJTjFfUkVHRVhQPS9bXlx4MjAtXHg3ZVx4YTAtXHhmZl0vZzt2YXIgUUVTQ19SRUdFWFA9L1xcKFtcdTAwMDAtXHUwMDdmXSkvZzt2YXIgUEFSQU1fUkVHRVhQPS87W1x4MDlceDIwXSooWyEjJCUmJyorLjAtOUEtWl5fYGEtenx+LV0rKVtceDA5XHgyMF0qPVtceDA5XHgyMF0qKCIoPzpbXHgyMCFceDIzLVx4NWJceDVkLVx4N2VceDgwLVx4ZmZdfFxcW1x4MjAtXHg3ZV0pKiJ8WyEjJCUmJyorLjAtOUEtWl5fYGEtenx+LV0rKVtceDA5XHgyMF0qL2c7dmFyIEVYVF9WQUxVRV9SRUdFWFA9L14oW0EtWmEtejAtOSEjJCUmK1wtXl9ge31+XSspJyg/OltBLVphLXpdezIsM30oPzotW0EtWmEtel17M30pezAsM318W0EtWmEtel17NCw4fXwpJygoPzolWzAtOUEtRmEtZl17Mn18W0EtWmEtejAtOSEjJCYrLl5fYHx+LV0pKykkLzt2YXIgRElTUE9TSVRJT05fVFlQRV9SRUdFWFA9L14oWyEjJCUmJyorLjAtOUEtWl5fYGEtenx+LV0rKVtceDA5XHgyMF0qKD86JHw7KS87ZnVuY3Rpb24gZGVjb2RlZmllbGQoc3RyKXt2YXIgbWF0Y2g9RVhUX1ZBTFVFX1JFR0VYUC5leGVjKHN0cik7aWYoIW1hdGNoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGV4dGVuZGVkIGZpZWxkIHZhbHVlJyl9CnZhciBjaGFyc2V0PW1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7dmFyIGVuY29kZWQ9bWF0Y2hbMl07c3dpdGNoKGNoYXJzZXQpe2Nhc2UnaXNvLTg4NTktMSc6cmV0dXJuIGVuY29kZWQucmVwbGFjZShIRVhfRVNDQVBFX1JFUExBQ0VfUkVHRVhQLHBkZWNvZGUpLnJlcGxhY2UoTk9OX0xBVElOMV9SRUdFWFAsJz8nKTtjYXNlJ3V0Zi04JzpyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWQpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgY2hhcnNldCBpbiBleHRlbmRlZCBmaWVsZCcpfX0KZnVuY3Rpb24gcGFyc2Uoc3RyaW5nKXtpZighc3RyaW5nfHx0eXBlb2Ygc3RyaW5nIT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IHN0cmluZyBpcyByZXF1aXJlZCcpfQp2YXIgbWF0Y2g9RElTUE9TSVRJT05fVFlQRV9SRUdFWFAuZXhlYyhzdHJpbmcpO2lmKCFtYXRjaCl7dGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCB0eXBlIGZvcm1hdCcpfQp2YXIgaW5kZXg9bWF0Y2hbMF0ubGVuZ3RoO3ZhciB0eXBlPW1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7dmFyIGtleTt2YXIgbmFtZXM9W107dmFyIHBhcmFtcz17fTt2YXIgdmFsdWU7aW5kZXg9UEFSQU1fUkVHRVhQLmxhc3RJbmRleD1tYXRjaFswXS5zdWJzdHIoLTEpPT09JzsnP2luZGV4LTE6aW5kZXg7d2hpbGUoKG1hdGNoPVBBUkFNX1JFR0VYUC5leGVjKHN0cmluZykpKXtpZihtYXRjaC5pbmRleCE9PWluZGV4KXt0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHBhcmFtZXRlciBmb3JtYXQnKX0KaW5kZXgrPW1hdGNoWzBdLmxlbmd0aDtrZXk9bWF0Y2hbMV0udG9Mb3dlckNhc2UoKTt2YWx1ZT1tYXRjaFsyXTtpZihuYW1lcy5pbmRleE9mKGtleSkhPT0tMSl7dGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBkdXBsaWNhdGUgcGFyYW1ldGVyJyl9Cm5hbWVzLnB1c2goa2V5KTtpZihrZXkuaW5kZXhPZignKicpKzE9PT1rZXkubGVuZ3RoKXtrZXk9a2V5LnNsaWNlKDAsLTEpO3ZhbHVlPWRlY29kZWZpZWxkKHZhbHVlKTtwYXJhbXNba2V5XT12YWx1ZTtjb250aW51ZX0KaWYodHlwZW9mIHBhcmFtc1trZXldPT09J3N0cmluZycpe2NvbnRpbnVlfQppZih2YWx1ZVswXT09PSciJyl7dmFsdWU9dmFsdWUuc3Vic3RyKDEsdmFsdWUubGVuZ3RoLTIpLnJlcGxhY2UoUUVTQ19SRUdFWFAsJyQxJyl9CnBhcmFtc1trZXldPXZhbHVlfQppZihpbmRleCE9PS0xJiZpbmRleCE9PXN0cmluZy5sZW5ndGgpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGFyYW1ldGVyIGZvcm1hdCcpfQpyZXR1cm4gbmV3IENvbnRlbnREaXNwb3NpdGlvbih0eXBlLHBhcmFtcyl9CmZ1bmN0aW9uIHBkZWNvZGUoc3RyLGhleCl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LDE2KSl9CmZ1bmN0aW9uIENvbnRlbnREaXNwb3NpdGlvbih0eXBlLHBhcmFtZXRlcnMpe3RoaXMudHlwZT10eXBlO3RoaXMucGFyYW1ldGVycz1wYXJhbWV0ZXJzfQpyZXR1cm57cGFyc2U6cGFyc2UsfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvbGlicy91bmRlcnNjb3JlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpfLmNhbmNlbGxhYmxlVGhyb3R0bGVSZW1vdmVNZVNvb249ZnVuY3Rpb24oZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciB0aW1lb3V0LGNvbnRleHQsYXJncyxyZXN1bHQ7dmFyIHByZXZpb3VzPTA7aWYoIW9wdGlvbnMpb3B0aW9ucz17fTt2YXIgbGF0ZXI9ZnVuY3Rpb24oKXtwcmV2aW91cz1vcHRpb25zLmxlYWRpbmc9PT1mYWxzZT8wOl8ubm93KCk7dGltZW91dD1udWxsO3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fTt2YXIgdGhyb3R0bGVkPWZ1bmN0aW9uKCl7dmFyIG5vdz1fLm5vdygpO2lmKCFwcmV2aW91cyYmb3B0aW9ucy5sZWFkaW5nPT09ZmFsc2UpcHJldmlvdXM9bm93O3ZhciByZW1haW5pbmc9d2FpdC0obm93LXByZXZpb3VzKTtjb250ZXh0PXRoaXM7YXJncz1hcmd1bWVudHM7aWYocmVtYWluaW5nPD0wfHxyZW1haW5pbmc+d2FpdCl7aWYodGltZW91dCl7Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO3RpbWVvdXQ9bnVsbDt9CnByZXZpb3VzPW5vdztyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO2lmKCF0aW1lb3V0KWNvbnRleHQ9YXJncz1udWxsO31lbHNlIGlmKCF0aW1lb3V0JiZvcHRpb25zLnRyYWlsaW5nIT09ZmFsc2Upe3RpbWVvdXQ9c2V0VGltZW91dChsYXRlcixyZW1haW5pbmcpO30KcmV0dXJuIHJlc3VsdDt9O3Rocm90dGxlZC5jYW5jZWw9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGltZW91dCk7cHJldmlvdXM9MDt0aW1lb3V0PWNvbnRleHQ9YXJncz1udWxsO307cmV0dXJuIHRocm90dGxlZDt9OzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2Fic3RyYWN0X3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuQWJzdHJhY3RTZXJ2aWNlJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciBNaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciBTZXJ2aWNlc01peGluPXJlcXVpcmUoJ3dlYi5TZXJ2aWNlc01peGluJyk7dmFyIEFic3RyYWN0U2VydmljZT1DbGFzcy5leHRlbmQoTWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLFNlcnZpY2VzTWl4aW4se2RlcGVuZGVuY2llczpbXSxpbml0OmZ1bmN0aW9uKHBhcmVudCl7TWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLmluaXQuY2FsbCh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRQYXJlbnQocGFyZW50KTt9LHN0YXJ0OmZ1bmN0aW9uKCl7fSx9KTtyZXR1cm4gQWJzdHJhY3RTZXJ2aWNlO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2Fic3RyYWN0X3N0b3JhZ2Vfc2VydmljZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5BYnN0cmFjdFN0b3JhZ2VTZXJ2aWNlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIEFic3RyYWN0U2VydmljZT1yZXF1aXJlKCd3ZWIuQWJzdHJhY3RTZXJ2aWNlJyk7dmFyIEFic3RyYWN0U3RvcmFnZVNlcnZpY2U9QWJzdHJhY3RTZXJ2aWNlLmV4dGVuZCh7c3RvcmFnZTpudWxsLGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZigodGhpcy5zdG9yYWdlfHx7fSkuZGVzdHJveSl7dGhpcy5zdG9yYWdlLmRlc3Ryb3koKTt9CnRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5zdG9yYWdlLmNsZWFyKCk7fSxnZXRJdGVtOmZ1bmN0aW9uKGtleSxkZWZhdWx0VmFsdWUpe3ZhciB2YWw9dGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtyZXR1cm4gdmFsP0pTT04ucGFyc2UodmFsKTpkZWZhdWx0VmFsdWU7fSxrZXk6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiB0aGlzLnN0b3JhZ2Uua2V5KGluZGV4KTt9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JhZ2UubGVuZ3RoO30scmVtb3ZlSXRlbTpmdW5jdGlvbihrZXkpe3RoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7fSxzZXRJdGVtOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7fSxvblN0b3JhZ2U6ZnVuY3Rpb24oKXt0aGlzLnN0b3JhZ2Uub24uYXBwbHkodGhpcy5zdG9yYWdlLFsic3RvcmFnZSJdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7fSx9KTtyZXR1cm4gQWJzdHJhY3RTdG9yYWdlU2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9hamF4LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmFqYXgnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgY29uY3VycmVuY3k9cmVxdWlyZSgnd2ViLmNvbmN1cnJlbmN5Jyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgdGltZT1yZXF1aXJlKCd3ZWIudGltZScpO3ZhciBkb3dubG9hZD1yZXF1aXJlKCd3ZWIuZG93bmxvYWQnKTt2YXIgY29udGVudGRpc3Bvc2l0aW9uPXJlcXVpcmUoJ3dlYi5jb250ZW50ZGlzcG9zaXRpb24nKTt2YXIgX3Q9Y29yZS5fdDt2YXIgYWpheD17fTtmdW5jdGlvbiBfZ2VuZXJpY0pzb25ScGMoZmN0X25hbWUscGFyYW1zLHNldHRpbmdzLGZjdCl7dmFyIHNoYWRvdz1zZXR0aW5ncy5zaGFkb3d8fGZhbHNlO2RlbGV0ZSBzZXR0aW5ncy5zaGFkb3c7aWYoIXNoYWRvdyl7Y29yZS5idXMudHJpZ2dlcigncnBjX3JlcXVlc3QnKTt9CnZhciBkYXRhPXtqc29ucnBjOiIyLjAiLG1ldGhvZDpmY3RfbmFtZSxwYXJhbXM6cGFyYW1zLGlkOk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKjEwMDAqMTAwMCl9O3ZhciB4aHI9ZmN0KGRhdGEpO3ZhciByZXN1bHQ9eGhyLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGM6cmVzdWx0JyxkYXRhLHJlc3VsdCk7aWYocmVzdWx0LmVycm9yIT09dW5kZWZpbmVkKXtpZihyZXN1bHQuZXJyb3IuZGF0YS5hcmd1bWVudHNbMF0hPT0iYnVzLkJ1cyBub3QgYXZhaWxhYmxlIGluIHRlc3QgbW9kZSIpe2NvbnNvbGUuZGVidWcoIlNlcnZlciBhcHBsaWNhdGlvbiBlcnJvclxuIiwiRXJyb3IgY29kZToiLHJlc3VsdC5lcnJvci5jb2RlLCJcbiIsIkVycm9yIG1lc3NhZ2U6IixyZXN1bHQuZXJyb3IubWVzc2FnZSwiXG4iLCJFcnJvciBkYXRhIG1lc3NhZ2U6XG4iLHJlc3VsdC5lcnJvci5kYXRhLm1lc3NhZ2UsIlxuIiwiRXJyb3IgZGF0YSBkZWJ1ZzpcbiIscmVzdWx0LmVycm9yLmRhdGEuZGVidWcpO30KcmV0dXJuIFByb21pc2UucmVqZWN0KHt0eXBlOiJzZXJ2ZXIiLGVycm9yOnJlc3VsdC5lcnJvcn0pO31lbHNle3JldHVybiByZXN1bHQucmVzdWx0O319LGZ1bmN0aW9uKCl7dmFyIHJlYXNvbj17dHlwZTonY29tbXVuaWNhdGlvbicsZXJyb3I6YXJndW1lbnRzWzBdLHRleHRTdGF0dXM6YXJndW1lbnRzWzFdLGVycm9yVGhyb3duOmFyZ3VtZW50c1syXSx9O3JldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO30pO3ZhciByZWplY3Rpb247dmFyIHByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3JlamVjdGlvbj1yZWplY3Q7cmVzdWx0LnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZighc2hhZG93KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGNfcmVzcG9uc2UnKTt9CnJlc29sdmUocmVzdWx0KTt9LGZ1bmN0aW9uKHJlYXNvbil7dmFyIHR5cGU9cmVhc29uLnR5cGU7dmFyIGVycm9yPXJlYXNvbi5lcnJvcjt2YXIgdGV4dFN0YXR1cz1yZWFzb24udGV4dFN0YXR1czt2YXIgZXJyb3JUaHJvd249cmVhc29uLmVycm9yVGhyb3duO2lmKHR5cGU9PT0ic2VydmVyIil7aWYoIXNoYWRvdyl7Y29yZS5idXMudHJpZ2dlcigncnBjX3Jlc3BvbnNlJyk7fQppZihlcnJvci5jb2RlPT09MTAwKXtjb3JlLmJ1cy50cmlnZ2VyKCdpbnZhbGlkYXRlX3Nlc3Npb24nKTt9CnJlamVjdCh7bWVzc2FnZTplcnJvcixldmVudDokLkV2ZW50KCl9KTt9ZWxzZXtpZighc2hhZG93KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGNfcmVzcG9uc2VfZmFpbGVkJyk7fQp2YXIgbmVycm9yPXtjb2RlOi0zMjA5OCxtZXNzYWdlOiJYbWxIdHRwUmVxdWVzdEVycm9yICIrZXJyb3JUaHJvd24sZGF0YTp7dHlwZToieGhyIit0ZXh0U3RhdHVzLGRlYnVnOmVycm9yLnJlc3BvbnNlVGV4dCxvYmplY3RzOltlcnJvcixlcnJvclRocm93bl19LH07cmVqZWN0KHttZXNzYWdlOm5lcnJvcixldmVudDokLkV2ZW50KCl9KTt9fSk7fSk7cHJvbWlzZS5hYm9ydD1mdW5jdGlvbigpe3JlamVjdGlvbih7bWVzc2FnZToiWG1sSHR0cFJlcXVlc3RFcnJvciBhYm9ydCIsZXZlbnQ6JC5FdmVudCgnYWJvcnQnKX0pO2lmKHhoci5hYm9ydCl7eGhyLmFib3J0KCk7fX07cHJvbWlzZS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24ocmVhc29uKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoIXJlYXNvbi5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7Y29yZS5idXMudHJpZ2dlcigncnBjX2Vycm9yJyxyZWFzb24ubWVzc2FnZSxyZWFzb24uZXZlbnQpO319LDApO30pO3JldHVybiBwcm9taXNlO307ZnVuY3Rpb24ganNvblJwYyh1cmwsZmN0X25hbWUscGFyYW1zLHNldHRpbmdzKXtzZXR0aW5ncz1zZXR0aW5nc3x8e307cmV0dXJuIF9nZW5lcmljSnNvblJwYyhmY3RfbmFtZSxwYXJhbXMsc2V0dGluZ3MsZnVuY3Rpb24oZGF0YSl7cmV0dXJuICQuYWpheCh1cmwsXy5leHRlbmQoe30sc2V0dGluZ3Mse3VybDp1cmwsZGF0YVR5cGU6J2pzb24nLHR5cGU6J1BPU1QnLGRhdGE6SlNPTi5zdHJpbmdpZnkoZGF0YSx0aW1lLmRhdGVfdG9fdXRjKSxjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbid9KSk7fSk7fQpmdW5jdGlvbiBycGModXJsLHBhcmFtcyxzZXR0aW5ncyl7cmV0dXJuIGpzb25ScGModXJsLCdjYWxsJyxwYXJhbXMsc2V0dGluZ3MpO30KdmFyIGxvYWRDU1M9KGZ1bmN0aW9uKCl7dmFyIHVybERlZnM9e307cmV0dXJuIGZ1bmN0aW9uIGxvYWRDU1ModXJsKXtpZih1cmwgaW4gdXJsRGVmcyl7fWVsc2UgaWYoJCgnbGlua1tocmVmPSInK3VybCsnIl0nKS5sZW5ndGgpe3VybERlZnNbdXJsXT1Qcm9taXNlLnJlc29sdmUoKTt9ZWxzZXt2YXIgJGxpbms9JCgnPGxpbms+Jyx7J2hyZWYnOnVybCwncmVsJzonc3R5bGVzaGVldCcsJ3R5cGUnOid0ZXh0L2Nzcyd9KTt1cmxEZWZzW3VybF09bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3QpeyRsaW5rLm9uKCdsb2FkJyxmdW5jdGlvbigpe3Jlc29sdmUoKTt9KTt9KTskKCdoZWFkJykuYXBwZW5kKCRsaW5rKTt9CnJldHVybiB1cmxEZWZzW3VybF07fTt9KSgpO3ZhciBsb2FkSlM9KGZ1bmN0aW9uKCl7dmFyIGRlcGVuZGVuY2llc1Byb21pc2U9e307dmFyIGxvYWQ9ZnVuY3Rpb24gbG9hZEpTKHVybCl7dmFyIGFscmVhZHlSZXF1aXJlZD0oJCgnc2NyaXB0W3NyYz0iJyt1cmwrJyJdJykubGVuZ3RoPjApO2lmKHVybCBpbiBkZXBlbmRlbmNpZXNQcm9taXNlKXtyZXR1cm4gZGVwZW5kZW5jaWVzUHJvbWlzZVt1cmxdO30KdmFyIHNjcmlwdExvYWRlZFByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2lmKGFscmVhZHlSZXF1aXJlZCl7cmVzb2x2ZSgpO31lbHNle3ZhciBzY3JpcHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7c2NyaXB0LnR5cGU9J3RleHQvamF2YXNjcmlwdCc7c2NyaXB0LnNyYz11cmw7c2NyaXB0Lm9ubG9hZD1zY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoKHNjcmlwdC5yZWFkeVN0YXRlJiZzY3JpcHQucmVhZHlTdGF0ZSE9PSJsb2FkZWQiJiZzY3JpcHQucmVhZHlTdGF0ZSE9PSJjb21wbGV0ZSIpfHxzY3JpcHQub25sb2FkX2RvbmUpe3JldHVybjt9CnNjcmlwdC5vbmxvYWRfZG9uZT10cnVlO3Jlc29sdmUodXJsKTt9O3NjcmlwdC5vbmVycm9yPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcigiRXJyb3IgbG9hZGluZyBmaWxlIixzY3JpcHQuc3JjKTtyZWplY3QodXJsKTt9O3ZhciBoZWFkPWRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO319KTtkZXBlbmRlbmNpZXNQcm9taXNlW3VybF09c2NyaXB0TG9hZGVkUHJvbWlzZTtyZXR1cm4gc2NyaXB0TG9hZGVkUHJvbWlzZTt9O3JldHVybiBsb2FkO30pKCk7ZnVuY3Rpb24gZ2V0X2ZpbGUob3B0aW9ucyl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3QoKTt2YXIgZGF0YTtpZihvcHRpb25zLmZvcm0pe3hoci5vcGVuKG9wdGlvbnMuZm9ybS5tZXRob2Qsb3B0aW9ucy5mb3JtLmFjdGlvbik7ZGF0YT1uZXcgRm9ybURhdGEob3B0aW9ucy5mb3JtKTt9ZWxzZXt4aHIub3BlbignUE9TVCcsb3B0aW9ucy51cmwpO2RhdGE9bmV3IEZvcm1EYXRhKCk7Xy5lYWNoKG9wdGlvbnMuZGF0YXx8e30sZnVuY3Rpb24odixrKXtkYXRhLmFwcGVuZChrLHYpO30pO30KZGF0YS5hcHBlbmQoJ3Rva2VuJywnZHVtbXktYmVjYXVzZS1hcGktZXhwZWN0cy1vbmUnKTtpZihjb3JlLmNzcmZfdG9rZW4pe2RhdGEuYXBwZW5kKCdjc3JmX3Rva2VuJyxjb3JlLmNzcmZfdG9rZW4pO30KeGhyLnJlc3BvbnNlVHlwZT0nYmxvYic7eGhyLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBtaW1ldHlwZT14aHIucmVzcG9uc2UudHlwZTtpZih4aHIuc3RhdHVzPT09MjAwJiZtaW1ldHlwZSE9PSd0ZXh0L2h0bWwnKXt2YXIgaGVhZGVyPSh4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb24nKXx8JycpLnJlcGxhY2UoLzskLywnJyk7dmFyIGZpbGVuYW1lPWhlYWRlcj9jb250ZW50ZGlzcG9zaXRpb24ucGFyc2UoaGVhZGVyKS5wYXJhbWV0ZXJzLmZpbGVuYW1lOm51bGw7ZG93bmxvYWQoeGhyLnJlc3BvbnNlLGZpbGVuYW1lLG1pbWV0eXBlKTtpZihvcHRpb25zLnN1Y2Nlc3Mpe29wdGlvbnMuc3VjY2VzcygpO30KcmV0dXJuIHRydWU7fQppZighb3B0aW9ucy5lcnJvcil7cmV0dXJuIHRydWU7fQp2YXIgZGVjb2Rlcj1uZXcgRmlsZVJlYWRlcigpO2RlY29kZXIub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGNvbnRlbnRzPWRlY29kZXIucmVzdWx0O3ZhciBlcnI7dmFyIGRvYz1uZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGNvbnRlbnRzLCd0ZXh0L2h0bWwnKTt2YXIgbm9kZXM9ZG9jLmJvZHkuY2hpbGRyZW4ubGVuZ3RoPT09MD9kb2MuYm9keS5jaGlsZE5vZGVzOmRvYy5ib2R5LmNoaWxkcmVuO3RyeXt2YXIgbm9kZT1ub2Rlc1sxXXx8bm9kZXNbMF07ZXJyPUpTT04ucGFyc2Uobm9kZS50ZXh0Q29udGVudCk7fWNhdGNoKGUpe2Vycj17bWVzc2FnZTpub2Rlcy5sZW5ndGg+MT9ub2Rlc1sxXS50ZXh0Q29udGVudDonJyxkYXRhOntuYW1lOlN0cmluZyh4aHIuc3RhdHVzKSx0aXRsZTpub2Rlcy5sZW5ndGg+MD9ub2Rlc1swXS50ZXh0Q29udGVudDonJyx9fTt9Cm9wdGlvbnMuZXJyb3IoZXJyKTt9O2RlY29kZXIucmVhZEFzVGV4dCh4aHIucmVzcG9uc2UpO307eGhyLm9uZXJyb3I9ZnVuY3Rpb24oKXtpZihvcHRpb25zLmVycm9yKXtvcHRpb25zLmVycm9yKHttZXNzYWdlOl8oIlNvbWV0aGluZyBoYXBwZW5lZCB3aGlsZSB0cnlpbmcgdG8gY29udGFjdCB0aGUgc2VydmVyLCBjaGVjayB0aGF0IHRoZSBzZXJ2ZXIgaXMgb25saW5lIGFuZCB0aGF0IHlvdSBzdGlsbCBoYXZlIGEgd29ya2luZyBuZXR3b3JrIGNvbm5lY3Rpb24uIiksZGF0YTp7dGl0bGU6X3QoIkNvdWxkIG5vdCBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIiKX19KTt9fTtpZihvcHRpb25zLmNvbXBsZXRlKXt4aHIub25sb2FkZW5kPWZ1bmN0aW9uKCl7b3B0aW9ucy5jb21wbGV0ZSgpO307fQp4aHIuc2VuZChkYXRhKTtyZXR1cm4gdHJ1ZTt9CmZ1bmN0aW9uIHBvc3QoY29udHJvbGxlcl91cmwsZGF0YSl7dmFyIHBvc3REYXRhPW5ldyBGb3JtRGF0YSgpOyQuZWFjaChkYXRhLGZ1bmN0aW9uKGksdmFsKXtwb3N0RGF0YS5hcHBlbmQoaSx2YWwpO30pO2lmKGNvcmUuY3NyZl90b2tlbil7cG9zdERhdGEuYXBwZW5kKCdjc3JmX3Rva2VuJyxjb3JlLmNzcmZfdG9rZW4pO30KcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXskLmFqYXgoY29udHJvbGxlcl91cmwse2RhdGE6cG9zdERhdGEscHJvY2Vzc0RhdGE6ZmFsc2UsY29udGVudFR5cGU6ZmFsc2UsdHlwZTonUE9TVCd9KS50aGVuKHJlc29sdmUpLmZhaWwocmVqZWN0KTt9KTt9CnZhciBsb2FkWE1MPShmdW5jdGlvbigpe3ZhciBpc0xvYWRpbmc9ZmFsc2U7dmFyIGxvYWRpbmdzRGF0YT1bXTt2YXIgc2VlblVSTHM9W107cmV0dXJuIGZ1bmN0aW9uKHVybCxxd2ViKXtmdW5jdGlvbiBfbG9hZCgpe2lzTG9hZGluZz10cnVlO2lmKGxvYWRpbmdzRGF0YS5sZW5ndGgpe3ZhciBsb2FkaW5nRGF0YT1sb2FkaW5nc0RhdGFbMF07bG9hZGluZ0RhdGEucXdlYi5hZGRfdGVtcGxhdGUobG9hZGluZ0RhdGEudXJsLGZ1bmN0aW9uKCl7bG9hZGluZ3NEYXRhLnNoaWZ0KCk7bG9hZGluZ0RhdGEucmVzb2x2ZSgpO19sb2FkKCk7fSk7fWVsc2V7aXNMb2FkaW5nPWZhbHNlO319CmlmKCF1cmx8fCFxd2ViKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7fQppZihfLmNvbnRhaW5zKHNlZW5VUkxzLHVybCkpe3ZhciBvbGRMb2FkaW5nRGF0YT1fLmZpbmRXaGVyZShsb2FkaW5nc0RhdGEse3VybDp1cmx9KTtyZXR1cm4gb2xkTG9hZGluZ0RhdGE/b2xkTG9hZGluZ0RhdGEuZGVmOlByb21pc2UucmVzb2x2ZSgpO30Kc2VlblVSTHMucHVzaCh1cmwpO3ZhciBuZXdMb2FkaW5nRGF0YT17dXJsOnVybCxxd2ViOnF3ZWIsfTtuZXdMb2FkaW5nRGF0YS5kZWY9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe25ld0xvYWRpbmdEYXRhLnJlc29sdmU9cmVzb2x2ZTtuZXdMb2FkaW5nRGF0YS5yZWplY3Q9cmVqZWN0O30pO2xvYWRpbmdzRGF0YS5wdXNoKG5ld0xvYWRpbmdEYXRhKTtpZighaXNMb2FkaW5nKXtfbG9hZCgpO30KcmV0dXJuIG5ld0xvYWRpbmdEYXRhLmRlZjt9O30pKCk7dmFyIGxvYWRBc3NldD0oZnVuY3Rpb24oKXt2YXIgY2FjaGU9e307dmFyIGxvYWQ9ZnVuY3Rpb24gbG9hZEFzc2V0KHhtbElkKXtpZihjYWNoZVt4bWxJZF0pe3JldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVbeG1sSWRdKTt9CnZhciBwYXJhbXM9e2FyZ3M6W3htbElkLHtkZWJ1Zzpjb25maWcuaXNEZWJ1ZygpfV0sa3dhcmdzOntjb250ZXh0Om9kb28uc2Vzc2lvbl9pbmZvLnVzZXJfY29udGV4dCx9LG1ldGhvZDoncmVuZGVyX3RlbXBsYXRlJyxtb2RlbDonaXIudWkudmlldycsfTtyZXR1cm4gcnBjKCcvd2ViL2RhdGFzZXQvY2FsbF9rdy9pci51aS52aWV3L3JlbmRlcl90ZW1wbGF0ZScscGFyYW1zKS50aGVuKGZ1bmN0aW9uKHhtbCl7dmFyICR4bWw9JCh4bWwpO2NhY2hlW3htbElkXT17Y3NzTGliczokeG1sLmZpbHRlcignbGlua1tocmVmXTpub3QoW3R5cGU9ImltYWdlL3gtaWNvbiJdKScpLm1hcChmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmF0dHIoJ2hyZWYnKTt9KS5nZXQoKSxjc3NDb250ZW50czokeG1sLmZpbHRlcignc3R5bGUnKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS5odG1sKCk7fSkuZ2V0KCksanNMaWJzOiR4bWwuZmlsdGVyKCdzY3JpcHRbc3JjXScpLm1hcChmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmF0dHIoJ3NyYycpO30pLmdldCgpLGpzQ29udGVudHM6JHhtbC5maWx0ZXIoJ3NjcmlwdDpub3QoW3NyY10pJykubWFwKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykuaHRtbCgpO30pLmdldCgpLH07cmV0dXJuIGNhY2hlW3htbElkXTt9KTt9O3JldHVybiBsb2FkO30pKCk7ZnVuY3Rpb24gbG9hZExpYnMobGlicyl7dmFyIG11dGV4PW5ldyBjb25jdXJyZW5jeS5NdXRleCgpO211dGV4LmV4ZWMoZnVuY3Rpb24oKXt2YXIgZGVmcz1bXTt2YXIgY3NzTGlicz1bbGlicy5jc3NMaWJzfHxbXV07ZGVmcy5wdXNoKF9sb2FkQXJyYXkoY3NzTGlicyxhamF4LmxvYWRDU1MpLnRoZW4oZnVuY3Rpb24oKXtpZihsaWJzLmNzc0NvbnRlbnRzJiZsaWJzLmNzc0NvbnRlbnRzLmxlbmd0aCl7JCgnaGVhZCcpLmFwcGVuZCgkKCc8c3R5bGUvPicse2h0bWw6bGlicy5jc3NDb250ZW50cy5qb2luKCdcbicpLH0pKTt9fSkpO2RlZnMucHVzaChfbG9hZEFycmF5KGxpYnMuanNMaWJzfHxbXSxhamF4LmxvYWRKUykudGhlbihmdW5jdGlvbigpe2lmKGxpYnMuanNDb250ZW50cyYmbGlicy5qc0NvbnRlbnRzLmxlbmd0aCl7JCgnaGVhZCcpLmFwcGVuZCgkKCc8c2NyaXB0Lz4nLHtodG1sOmxpYnMuanNDb250ZW50cy5qb2luKCdcbicpLH0pKTt9fSkpO3JldHVybiBQcm9taXNlLmFsbChkZWZzKTt9KTttdXRleC5leGVjKGZ1bmN0aW9uKCl7cmV0dXJuIF9sb2FkQXJyYXkobGlicy5hc3NldExpYnN8fFtdLGZ1bmN0aW9uKHhtbElEKXtyZXR1cm4gYWpheC5sb2FkQXNzZXQoeG1sSUQpLnRoZW4oZnVuY3Rpb24oYXNzZXQpe3JldHVybiBhamF4LmxvYWRMaWJzKGFzc2V0KTt9KTt9KTt9KTtmdW5jdGlvbiBfbG9hZEFycmF5KGFycmF5LGxvYWRDYWxsYmFjayl7dmFyIF9tdXRleD1uZXcgY29uY3VycmVuY3kuTXV0ZXgoKTthcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHVybERhdGEpe19tdXRleC5leGVjKGZ1bmN0aW9uKCl7aWYodHlwZW9mIHVybERhdGE9PT0nc3RyaW5nJyl7cmV0dXJuIGxvYWRDYWxsYmFjayh1cmxEYXRhKTt9CnJldHVybiBQcm9taXNlLmFsbCh1cmxEYXRhLm1hcChsb2FkQ2FsbGJhY2spKTt9KTt9KTtyZXR1cm4gX211dGV4LmdldFVubG9ja2VkRGVmKCk7fQpyZXR1cm4gbXV0ZXguZ2V0VW5sb2NrZWREZWYoKTt9Cl8uZXh0ZW5kKGFqYXgse2pzb25ScGM6anNvblJwYyxycGM6cnBjLGxvYWRDU1M6bG9hZENTUyxsb2FkSlM6bG9hZEpTLGxvYWRYTUw6bG9hZFhNTCxsb2FkQXNzZXQ6bG9hZEFzc2V0LGxvYWRMaWJzOmxvYWRMaWJzLGdldF9maWxlOmdldF9maWxlLHBvc3Q6cG9zdCx9KTtyZXR1cm4gYWpheDt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9idXMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuQnVzJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3JldHVybiBDbGFzcy5leHRlbmQobWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLHtpbml0OmZ1bmN0aW9uKHBhcmVudCl7bWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLmluaXQuY2FsbCh0aGlzKTt0aGlzLnNldFBhcmVudChwYXJlbnQpO30sfSk7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvY2xhc3MuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuQ2xhc3MnLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIE9kb29DbGFzcygpe30KdmFyIGluaXRpYWxpemluZz1mYWxzZTt2YXIgZm5UZXN0PS94eXovLnRlc3QoZnVuY3Rpb24oKXt4eXooKTt9KT8vXGJfc3VwZXJcYi86Ly4qLztPZG9vQ2xhc3MuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIF9zdXBlcj10aGlzLnByb3RvdHlwZTt2YXIgYXJncz1fLnRvQXJyYXkoYXJndW1lbnRzKTthcmdzLnVuc2hpZnQoe30pO3ZhciBwcm9wPV8uZXh0ZW5kLmFwcGx5KF8sYXJncyk7aW5pdGlhbGl6aW5nPXRydWU7dmFyIFRoaXM9dGhpczt2YXIgcHJvdG90eXBlPW5ldyBUaGlzKCk7aW5pdGlhbGl6aW5nPWZhbHNlO18uZWFjaChwcm9wLGZ1bmN0aW9uKHZhbCxuYW1lKXtwcm90b3R5cGVbbmFtZV09dHlwZW9mIHByb3BbbmFtZV09PSJmdW5jdGlvbiImJmZuVGVzdC50ZXN0KHByb3BbbmFtZV0pPyhmdW5jdGlvbihuYW1lLGZuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdG1wPXRoaXMuX3N1cGVyO3RoaXMuX3N1cGVyPV9zdXBlcltuYW1lXTt2YXIgcmV0PWZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9zdXBlcj10bXA7cmV0dXJuIHJldDt9O30pKG5hbWUscHJvcFtuYW1lXSk6cHJvcFtuYW1lXTt9KTtmdW5jdGlvbiBDbGFzcygpe2lmKHRoaXMuY29uc3RydWN0b3IhPT1PZG9vQ2xhc3Mpe3Rocm93IG5ldyBFcnJvcigiWW91IGNhbiBvbmx5IGluc3RhbmNpYXRlIG9iamVjdHMgd2l0aCB0aGUgJ25ldycgb3BlcmF0b3IiKTt9CnRoaXMuX3N1cGVyPW51bGw7aWYoIWluaXRpYWxpemluZyYmdGhpcy5pbml0KXt2YXIgcmV0PXRoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocmV0KXtyZXR1cm4gcmV0O319CnJldHVybiB0aGlzO30KQ2xhc3MuaW5jbHVkZT1mdW5jdGlvbihwcm9wZXJ0aWVzKXtfLmVhY2gocHJvcGVydGllcyxmdW5jdGlvbih2YWwsbmFtZSl7aWYodHlwZW9mIHByb3BlcnRpZXNbbmFtZV0hPT0nZnVuY3Rpb24nfHwhZm5UZXN0LnRlc3QocHJvcGVydGllc1tuYW1lXSkpe3Byb3RvdHlwZVtuYW1lXT1wcm9wZXJ0aWVzW25hbWVdO31lbHNlIGlmKHR5cGVvZiBwcm90b3R5cGVbbmFtZV09PT0nZnVuY3Rpb24nJiZwcm90b3R5cGUuaGFzT3duUHJvcGVydHkobmFtZSkpe3Byb3RvdHlwZVtuYW1lXT0oZnVuY3Rpb24obmFtZSxmbixwcmV2aW91cyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHRtcD10aGlzLl9zdXBlcjt0aGlzLl9zdXBlcj1wcmV2aW91czt2YXIgcmV0PWZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9zdXBlcj10bXA7cmV0dXJuIHJldDt9O30pKG5hbWUscHJvcGVydGllc1tuYW1lXSxwcm90b3R5cGVbbmFtZV0pO31lbHNlIGlmKHR5cGVvZiBfc3VwZXJbbmFtZV09PT0nZnVuY3Rpb24nKXtwcm90b3R5cGVbbmFtZV09KGZ1bmN0aW9uKG5hbWUsZm4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0bXA9dGhpcy5fc3VwZXI7dGhpcy5fc3VwZXI9X3N1cGVyW25hbWVdO3ZhciByZXQ9Zm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3N1cGVyPXRtcDtyZXR1cm4gcmV0O307fSkobmFtZSxwcm9wZXJ0aWVzW25hbWVdKTt9fSk7fTtDbGFzcy5wcm90b3R5cGU9cHJvdG90eXBlO0NsYXNzLmNvbnN0cnVjdG9yPUNsYXNzO0NsYXNzLmV4dGVuZD10aGlzLmV4dGVuZDtyZXR1cm4gQ2xhc3M7fTtyZXR1cm4gT2Rvb0NsYXNzO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2NvbGxlY3Rpb25zLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgid2ViLmNvbGxlY3Rpb25zIixmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoIndlYi5DbGFzcyIpO3ZhciBUcmVlPUNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihkYXRhKXt0aGlzLl9kYXRhPWRhdGE7dGhpcy5fY2hpbGRyZW49W107fSxnZXREYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGE7fSxhZGRDaGlsZDpmdW5jdGlvbih0cmVlKXt0aGlzLl9jaGlsZHJlbi5wdXNoKHRyZWUpO30sfSk7cmV0dXJue1RyZWU6VHJlZSx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2NvbmN1cnJlbmN5LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmNvbmN1cnJlbmN5JyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3JldHVybntkZWxheTpmdW5jdGlvbih3YWl0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7c2V0VGltZW91dChyZXNvbHZlLHdhaXQpO30pO30sRHJvcE1pc29yZGVyZWQ6Q2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGZhaWxNaXNvcmRlcmVkKXt0aGlzLmxzbj0wO3RoaXMucnNuPS0xO3RoaXMuZmFpbE1pc29yZGVyZWQ9ZmFpbE1pc29yZGVyZWR8fGZhbHNlO30sYWRkOmZ1bmN0aW9uKHByb21pc2Upe3ZhciBzZWxmPXRoaXM7dmFyIHNlcT10aGlzLmxzbisrO3ZhciByZXM9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Byb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpe2lmKHNlcT5zZWxmLnJzbil7c2VsZi5yc249c2VxO3Jlc29sdmUocmVzdWx0KTt9ZWxzZSBpZihzZWxmLmZhaWxNaXNvcmRlcmVkKXtyZWplY3QoKTt9fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKHJlc3VsdCl7cmVqZWN0KHJlc3VsdCk7fSk7fSk7cmV0dXJuIHJlczt9LH0pLERyb3BQcmV2aW91czpDbGFzcy5leHRlbmQoe2FkZDpmdW5jdGlvbihwcm9taXNlKXtpZih0aGlzLmN1cnJlbnREZWYpe3RoaXMuY3VycmVudERlZi5yZWplY3QoKTt9CnZhciByZWplY3Rpb247dmFyIHJlcz1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cmVqZWN0aW9uPXJlamVjdDtwcm9taXNlLnRoZW4ocmVzb2x2ZSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9KTt0aGlzLmN1cnJlbnREZWY9cmVzO3RoaXMuY3VycmVudERlZi5yZWplY3Q9cmVqZWN0aW9uO3JldHVybiByZXM7fX0pLE11dGV4OkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMubG9jaz1Qcm9taXNlLnJlc29sdmUoKTt0aGlzLnF1ZXVlU2l6ZT0wO3RoaXMudW5sb2NrZWRQcm9tPXVuZGVmaW5lZDt0aGlzLl91bmxvY2s9dW5kZWZpbmVkO30sZXhlYzpmdW5jdGlvbihhY3Rpb24pe3ZhciBzZWxmPXRoaXM7dmFyIGN1cnJlbnRMb2NrPXRoaXMubG9jazt2YXIgcmVzdWx0O3RoaXMucXVldWVTaXplKys7dGhpcy51bmxvY2tlZFByb209dGhpcy51bmxvY2tlZFByb218fG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe3NlbGYuX3VubG9jaz1yZXNvbHZlO30pO3RoaXMubG9jaz1uZXcgUHJvbWlzZShmdW5jdGlvbih1bmxvY2tDdXJyZW50KXtjdXJyZW50TG9jay50aGVuKGZ1bmN0aW9uKCl7cmVzdWx0PWFjdGlvbigpO3ZhciBhbHdheXM9ZnVuY3Rpb24ocmV0dXJuZWRSZXN1bHQpe3VubG9ja0N1cnJlbnQoKTtzZWxmLnF1ZXVlU2l6ZS0tO2lmKHNlbGYucXVldWVTaXplPT09MCl7c2VsZi51bmxvY2tlZFByb209dW5kZWZpbmVkO3NlbGYuX3VubG9jaygpO30KcmV0dXJuIHJldHVybmVkUmVzdWx0O307UHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihhbHdheXMpLmd1YXJkZWRDYXRjaChhbHdheXMpO30pO30pO3JldHVybiB0aGlzLmxvY2sudGhlbihmdW5jdGlvbigpe3JldHVybiByZXN1bHQ7fSk7fSxnZXRVbmxvY2tlZERlZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVubG9ja2VkUHJvbXx8UHJvbWlzZS5yZXNvbHZlKCk7fSx9KSxNdXRleGVkRHJvcFByZXZpb3VzOkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlO3RoaXMuY3VycmVudFByb209bnVsbDt0aGlzLnBlbmRpbmdBY3Rpb249bnVsbDt0aGlzLnBlbmRpbmdQcm9tPW51bGw7fSxleGVjOmZ1bmN0aW9uKGFjdGlvbil7dmFyIHNlbGY9dGhpczt2YXIgcmVzb2x1dGlvbjt2YXIgcmVqZWN0aW9uO2lmKHRoaXMubG9ja2VkKXt0aGlzLnBlbmRpbmdBY3Rpb249YWN0aW9uO3ZhciBvbGRQZW5kaW5nRGVmPXRoaXMucGVuZGluZ1Byb207dGhpcy5wZW5kaW5nUHJvbT1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cmVzb2x1dGlvbj1yZXNvbHZlO3JlamVjdGlvbj1yZWplY3Q7aWYob2xkUGVuZGluZ0RlZil7b2xkUGVuZGluZ0RlZi5yZWplY3QoKTt9CnNlbGYuY3VycmVudFByb20ucmVqZWN0KCk7fSk7dGhpcy5wZW5kaW5nUHJvbS5yZXNvbHZlPXJlc29sdXRpb247dGhpcy5wZW5kaW5nUHJvbS5yZWplY3Q9cmVqZWN0aW9uO3JldHVybiB0aGlzLnBlbmRpbmdQcm9tO31lbHNle3RoaXMubG9ja2VkPXRydWU7dGhpcy5jdXJyZW50UHJvbT1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cmVzb2x1dGlvbj1yZXNvbHZlO3JlamVjdGlvbj1yZWplY3Q7ZnVuY3Rpb24gdW5sb2NrKCl7c2VsZi5sb2NrZWQ9ZmFsc2U7aWYoc2VsZi5wZW5kaW5nQWN0aW9uKXt2YXIgYWN0aW9uPXNlbGYucGVuZGluZ0FjdGlvbjt2YXIgcHJvbT1zZWxmLnBlbmRpbmdQcm9tO3NlbGYucGVuZGluZ0FjdGlvbj1udWxsO3NlbGYucGVuZGluZ1Byb209bnVsbDtzZWxmLmV4ZWMoYWN0aW9uKS50aGVuKHByb20ucmVzb2x2ZSkuZ3VhcmRlZENhdGNoKHByb20ucmVqZWN0KTt9fQpQcm9taXNlLnJlc29sdmUoYWN0aW9uKCkpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtyZXNvbHZlKHJlc3VsdCk7dW5sb2NrKCk7fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7dW5sb2NrKCk7fSk7fSk7dGhpcy5jdXJyZW50UHJvbS5yZXNvbHZlPXJlc29sdXRpb247dGhpcy5jdXJyZW50UHJvbS5yZWplY3Q9cmVqZWN0aW9uO3JldHVybiB0aGlzLmN1cnJlbnRQcm9tO319fSkscmVqZWN0QWZ0ZXI6ZnVuY3Rpb24odGFyZ2V0X2RlZixyZWZlcmVuY2VfZGVmKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RhcmdldF9kZWYudGhlbihyZXNvbHZlKS5ndWFyZGVkQ2F0Y2gocmVqZWN0KTtyZWZlcmVuY2VfZGVmLnRoZW4ocmVqZWN0KS5ndWFyZGVkQ2F0Y2gocmVqZWN0KTt9KTt9fTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9kaWFsb2cuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuRGlhbG9nJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgZG9tPXJlcXVpcmUoJ3dlYi5kb20nKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgUVdlYj1jb3JlLnF3ZWI7dmFyIF90PWNvcmUuX3Q7dmFyIERpYWxvZz1XaWRnZXQuZXh0ZW5kKHt0YWdOYW1lOidtYWluJyx4bWxEZXBlbmRlbmNpZXM6Wycvd2ViL3N0YXRpYy9zcmMveG1sL2RpYWxvZy54bWwnXSxjdXN0b21fZXZlbnRzOl8uZXh0ZW5kKHt9LFdpZGdldC5wcm90b3R5cGUuY3VzdG9tX2V2ZW50cyx7Zm9jdXNfY29udHJvbF9idXR0b246J19vbkZvY3VzQ29udHJvbEJ1dHRvbicsY2xvc2VfZGlhbG9nOidfb25DbG9zZURpYWxvZycsfSksZXZlbnRzOl8uZXh0ZW5kKHt9LFdpZGdldC5wcm90b3R5cGUuZXZlbnRzLHsna2V5ZG93biAubW9kYWwtZm9vdGVyIGJ1dHRvbic6J19vbkZvb3RlckJ1dHRvbktleURvd24nLH0pLGluaXQ6ZnVuY3Rpb24ocGFyZW50LG9wdGlvbnMpe3ZhciBzZWxmPXRoaXM7dGhpcy5fc3VwZXIocGFyZW50KTt0aGlzLl9vcGVuZWQ9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7c2VsZi5fb3BlbmVkUmVzb2x2ZXI9cmVzb2x2ZTt9KTtvcHRpb25zPV8uZGVmYXVsdHMob3B0aW9uc3x8e30se3RpdGxlOl90KCdPZG9vJyksc3VidGl0bGU6Jycsc2l6ZTonbGFyZ2UnLGZ1bGxzY3JlZW46ZmFsc2UsZGlhbG9nQ2xhc3M6JycsJGNvbnRlbnQ6ZmFsc2UsYnV0dG9uczpbe3RleHQ6X3QoIk9rIiksY2xvc2U6dHJ1ZX1dLHRlY2huaWNhbDp0cnVlLCRwYXJlbnROb2RlOmZhbHNlLGJhY2tkcm9wOidzdGF0aWMnLHJlbmRlckhlYWRlcjp0cnVlLHJlbmRlckZvb3Rlcjp0cnVlLG9uRm9yY2VDbG9zZTpmYWxzZSx9KTt0aGlzLiRjb250ZW50PW9wdGlvbnMuJGNvbnRlbnQ7dGhpcy50aXRsZT1vcHRpb25zLnRpdGxlO3RoaXMuc3VidGl0bGU9b3B0aW9ucy5zdWJ0aXRsZTt0aGlzLmZ1bGxzY3JlZW49b3B0aW9ucy5mdWxsc2NyZWVuO3RoaXMuZGlhbG9nQ2xhc3M9b3B0aW9ucy5kaWFsb2dDbGFzczt0aGlzLnNpemU9b3B0aW9ucy5zaXplO3RoaXMuYnV0dG9ucz1vcHRpb25zLmJ1dHRvbnM7dGhpcy50ZWNobmljYWw9b3B0aW9ucy50ZWNobmljYWw7dGhpcy4kcGFyZW50Tm9kZT1vcHRpb25zLiRwYXJlbnROb2RlO3RoaXMuYmFja2Ryb3A9b3B0aW9ucy5iYWNrZHJvcDt0aGlzLnJlbmRlckhlYWRlcj1vcHRpb25zLnJlbmRlckhlYWRlcjt0aGlzLnJlbmRlckZvb3Rlcj1vcHRpb25zLnJlbmRlckZvb3Rlcjt0aGlzLm9uRm9yY2VDbG9zZT1vcHRpb25zLm9uRm9yY2VDbG9zZTtjb3JlLmJ1cy5vbignY2xvc2VfZGlhbG9ncycsdGhpcyx0aGlzLmRlc3Ryb3kuYmluZCh0aGlzKSk7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbigpe3NlbGYuJG1vZGFsPSQoUVdlYi5yZW5kZXIoJ0RpYWxvZycse2Z1bGxzY3JlZW46c2VsZi5mdWxsc2NyZWVuLHRpdGxlOnNlbGYudGl0bGUsc3VidGl0bGU6c2VsZi5zdWJ0aXRsZSx0ZWNobmljYWw6c2VsZi50ZWNobmljYWwscmVuZGVySGVhZGVyOnNlbGYucmVuZGVySGVhZGVyLHJlbmRlckZvb3RlcjpzZWxmLnJlbmRlckZvb3Rlcix9KSk7c3dpdGNoKHNlbGYuc2l6ZSl7Y2FzZSdleHRyYS1sYXJnZSc6c2VsZi4kbW9kYWwuZmluZCgnLm1vZGFsLWRpYWxvZycpLmFkZENsYXNzKCdtb2RhbC14bCcpO2JyZWFrO2Nhc2UnbGFyZ2UnOnNlbGYuJG1vZGFsLmZpbmQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygnbW9kYWwtbGcnKTticmVhaztjYXNlJ3NtYWxsJzpzZWxmLiRtb2RhbC5maW5kKCcubW9kYWwtZGlhbG9nJykuYWRkQ2xhc3MoJ21vZGFsLXNtJyk7YnJlYWs7fQppZihzZWxmLnJlbmRlckZvb3Rlcil7c2VsZi4kZm9vdGVyPXNlbGYuJG1vZGFsLmZpbmQoIi5tb2RhbC1mb290ZXIiKTtzZWxmLnNldF9idXR0b25zKHNlbGYuYnV0dG9ucyk7fQpzZWxmLiRtb2RhbC5vbignaGlkZGVuLmJzLm1vZGFsJyxfLmJpbmQoc2VsZi5kZXN0cm95LHNlbGYpKTt9KTt9LHJlbmRlckVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpO2lmKHRoaXMuJGNvbnRlbnQpe3RoaXMuc2V0RWxlbWVudCh0aGlzLiRjb250ZW50KTt9CnRoaXMuJGVsLmFkZENsYXNzKCdtb2RhbC1ib2R5ICcrdGhpcy5kaWFsb2dDbGFzcyk7fSxzZXRfYnV0dG9uczpmdW5jdGlvbihidXR0b25zKXt0aGlzLl9zZXRCdXR0b25zVG8odGhpcy4kZm9vdGVyLGJ1dHRvbnMpO30sc2V0X3RpdGxlOmZ1bmN0aW9uKHRpdGxlLHN1YnRpdGxlKXt0aGlzLnRpdGxlPXRpdGxlfHwiIjtpZihzdWJ0aXRsZSE9PXVuZGVmaW5lZCl7dGhpcy5zdWJ0aXRsZT1zdWJ0aXRsZXx8IiI7fQp2YXIgJHRpdGxlPXRoaXMuJG1vZGFsLmZpbmQoJy5tb2RhbC10aXRsZScpLmZpcnN0KCk7dmFyICRzdWJ0aXRsZT0kdGl0bGUuZmluZCgnLm9fc3VidGl0bGUnKS5kZXRhY2goKTskdGl0bGUuaHRtbCh0aGlzLnRpdGxlKTskc3VidGl0bGUuaHRtbCh0aGlzLnN1YnRpdGxlKS5hcHBlbmRUbygkdGl0bGUpO3JldHVybiB0aGlzO30sb3BlbmVkOmZ1bmN0aW9uKGhhbmRsZXIpe3JldHVybihoYW5kbGVyKT90aGlzLl9vcGVuZWQudGhlbihoYW5kbGVyKTp0aGlzLl9vcGVuZWQ7fSxvcGVuOmZ1bmN0aW9uKG9wdGlvbnMpeyQoJy50b29sdGlwJykucmVtb3ZlKCk7dmFyIHNlbGY9dGhpczt0aGlzLmFwcGVuZFRvKCQoJzxkaXYvPicpKS50aGVuKGZ1bmN0aW9uKCl7c2VsZi4kbW9kYWwuZmluZCgiLm1vZGFsLWJvZHkiKS5yZXBsYWNlV2l0aChzZWxmLiRlbCk7c2VsZi4kbW9kYWwuYXR0cignb3BlbicsdHJ1ZSk7c2VsZi4kbW9kYWwucmVtb3ZlQXR0cigiYXJpYS1oaWRkZW4iKTtpZihzZWxmLiRwYXJlbnROb2RlKXtzZWxmLiRtb2RhbC5hcHBlbmRUbyhzZWxmLiRwYXJlbnROb2RlKTt9CnNlbGYuJG1vZGFsLm1vZGFsKHtzaG93OnRydWUsYmFja2Ryb3A6c2VsZi5iYWNrZHJvcCx9KTtzZWxmLl9vcGVuZWRSZXNvbHZlcigpO2lmKG9wdGlvbnMmJm9wdGlvbnMuc2hvdWxkRm9jdXNCdXR0b25zKXtzZWxmLl9vbkZvY3VzQ29udHJvbEJ1dHRvbigpO319KTtyZXR1cm4gc2VsZjt9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCk7fSxkZXN0cm95OmZ1bmN0aW9uKG9wdGlvbnMpe2lmKCF0aGlzLl9fY2xvc2VkKXt0aGlzLl9fY2xvc2VkPXRydWU7dGhpcy50cmlnZ2VyKCdjbG9zZWQnLG9wdGlvbnMpO30KaWYodGhpcy5pc0Rlc3Ryb3llZCgpKXtyZXR1cm47fQppZih0aGlzLm9uRm9yY2VDbG9zZSl7dGhpcy5vbkZvcmNlQ2xvc2UoKTt9CnZhciBpc0ZvY3VzU2V0PXRoaXMuX2ZvY3VzT25DbG9zZSgpO3RoaXMuX3N1cGVyKCk7JCgnLnRvb2x0aXAnKS5yZW1vdmUoKTtpZih0aGlzLiRtb2RhbCl7dGhpcy4kbW9kYWwubW9kYWwoJ2hpZGUnKTt0aGlzLiRtb2RhbC5yZW1vdmUoKTt9CnZhciBtb2RhbHM9JCgnYm9keSA+IC5tb2RhbCcpLmZpbHRlcignOnZpc2libGUnKTtpZihtb2RhbHMubGVuZ3RoKXtpZighaXNGb2N1c1NldCl7bW9kYWxzLmxhc3QoKS5mb2N1cygpO30KJCgnYm9keScpLmFkZENsYXNzKCdtb2RhbC1vcGVuJyk7fX0scmViaW5kQnV0dG9uQmVoYXZpb3I6ZnVuY3Rpb24oKXt0aGlzLiRmb290ZXIub24oJ2tleWRvd24nLHRoaXMuX29uRm9vdGVyQnV0dG9uS2V5RG93bik7fSxfZm9jdXNPbkNsb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO30sX3NldEJ1dHRvbnNUbygkdGFyZ2V0LGJ1dHRvbnMpe3ZhciBzZWxmPXRoaXM7JHRhcmdldC5lbXB0eSgpO18uZWFjaChidXR0b25zLGZ1bmN0aW9uKGJ1dHRvbkRhdGEpe3ZhciAkYnV0dG9uPWRvbS5yZW5kZXJCdXR0b24oe2F0dHJzOntjbGFzczpidXR0b25EYXRhLmNsYXNzZXN8fChidXR0b25zLmxlbmd0aD4xPydidG4tc2Vjb25kYXJ5JzonYnRuLXByaW1hcnknKSxkaXNhYmxlZDpidXR0b25EYXRhLmRpc2FibGVkLH0saWNvbjpidXR0b25EYXRhLmljb24sdGV4dDpidXR0b25EYXRhLnRleHQsfSk7JGJ1dHRvbi5vbignY2xpY2snLGZ1bmN0aW9uKGUpe3ZhciBkZWY7aWYoYnV0dG9uRGF0YS5jbGljayl7ZGVmPWJ1dHRvbkRhdGEuY2xpY2suY2FsbChzZWxmLGUpO30KaWYoYnV0dG9uRGF0YS5jbG9zZSl7c2VsZi5vbkZvcmNlQ2xvc2U9ZmFsc2U7UHJvbWlzZS5yZXNvbHZlKGRlZikudGhlbihzZWxmLmNsb3NlLmJpbmQoc2VsZikpLmd1YXJkZWRDYXRjaChzZWxmLmNsb3NlLmJpbmQoc2VsZikpO319KTtpZihzZWxmLnRlY2huaWNhbCl7JHRhcmdldC5hcHBlbmQoJGJ1dHRvbik7fWVsc2V7JHRhcmdldC5wcmVwZW5kKCRidXR0b24pO319KTt9LF9vbkNsb3NlRGlhbG9nOmZ1bmN0aW9uKGV2KXtldi5zdG9wUHJvcGFnYXRpb24oKTt0aGlzLmNsb3NlKCk7fSxfb25Gb2N1c0NvbnRyb2xCdXR0b246ZnVuY3Rpb24oZSl7aWYodGhpcy4kZm9vdGVyKXtpZihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO30KdGhpcy4kZm9vdGVyLmZpbmQoJy5idG4tcHJpbWFyeTp2aXNpYmxlOmZpcnN0KCknKS5mb2N1cygpO319LF9vbkZvb3RlckJ1dHRvbktleURvd246ZnVuY3Rpb24oZSl7c3dpdGNoKGUud2hpY2gpe2Nhc2UgJC51aS5rZXlDb2RlLlRBQjppZighZS5zaGlmdEtleSYmZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJidG4tcHJpbWFyeSIpKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyICRwcmltYXJ5QnV0dG9uPSQoZS50YXJnZXQpOyRwcmltYXJ5QnV0dG9uLnRvb2x0aXAoe2RlbGF5OntzaG93OjIwMCxoaWRlOjB9LHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIFFXZWIucmVuZGVyKCdGb3JtQnV0dG9uLnRvb2x0aXAnLHt0aXRsZTokcHJpbWFyeUJ1dHRvbi50ZXh0KCkudG9VcHBlckNhc2UoKX0pO30sdHJpZ2dlcjonbWFudWFsJyx9KTskcHJpbWFyeUJ1dHRvbi50b29sdGlwKCdzaG93Jyk7fQpicmVhazt9fX0pO0RpYWxvZy5hbGVydD1mdW5jdGlvbihvd25lcixtZXNzYWdlLG9wdGlvbnMpe3ZhciBidXR0b25zPVt7dGV4dDpfdCgiT2siKSxjbG9zZTp0cnVlLGNsaWNrOm9wdGlvbnMmJm9wdGlvbnMuY29uZmlybV9jYWxsYmFjayx9XTtyZXR1cm4gbmV3IERpYWxvZyhvd25lcixfLmV4dGVuZCh7c2l6ZTonbWVkaXVtJyxidXR0b25zOmJ1dHRvbnMsJGNvbnRlbnQ6JCgnPG1haW4vPicse3JvbGU6J2FsZXJ0Jyx0ZXh0Om1lc3NhZ2UsfSksdGl0bGU6X3QoIkFsZXJ0Iiksb25Gb3JjZUNsb3NlOm9wdGlvbnMmJihvcHRpb25zLm9uRm9yY2VDbG9zZXx8b3B0aW9ucy5jb25maXJtX2NhbGxiYWNrKSx9LG9wdGlvbnMpKS5vcGVuKHtzaG91bGRGb2N1c0J1dHRvbnM6dHJ1ZX0pO307RGlhbG9nLmNvbmZpcm09ZnVuY3Rpb24ob3duZXIsbWVzc2FnZSxvcHRpb25zKXt2YXIgYnV0dG9ucz1be3RleHQ6X3QoIk9rIiksY2xhc3NlczonYnRuLXByaW1hcnknLGNsb3NlOnRydWUsY2xpY2s6b3B0aW9ucyYmb3B0aW9ucy5jb25maXJtX2NhbGxiYWNrLH0se3RleHQ6X3QoIkNhbmNlbCIpLGNsb3NlOnRydWUsY2xpY2s6b3B0aW9ucyYmb3B0aW9ucy5jYW5jZWxfY2FsbGJhY2t9XTtyZXR1cm4gbmV3IERpYWxvZyhvd25lcixfLmV4dGVuZCh7c2l6ZTonbWVkaXVtJyxidXR0b25zOmJ1dHRvbnMsJGNvbnRlbnQ6JCgnPG1haW4vPicse3JvbGU6J2FsZXJ0Jyx0ZXh0Om1lc3NhZ2UsfSksdGl0bGU6X3QoIkNvbmZpcm1hdGlvbiIpLG9uRm9yY2VDbG9zZTpvcHRpb25zJiYob3B0aW9ucy5vbkZvcmNlQ2xvc2V8fG9wdGlvbnMuY2FuY2VsX2NhbGxiYWNrKSx9LG9wdGlvbnMpKS5vcGVuKHtzaG91bGRGb2N1c0J1dHRvbnM6dHJ1ZX0pO307RGlhbG9nLnNhZmVDb25maXJtPWZ1bmN0aW9uKG93bmVyLG1lc3NhZ2Usb3B0aW9ucyl7dmFyICRjaGVja2JveD1kb20ucmVuZGVyQ2hlY2tib3goe3RleHQ6b3B0aW9ucyYmb3B0aW9ucy5zZWN1cml0eU1lc3NhZ2V8fF90KCJJIGFtIHN1cmUgYWJvdXQgdGhpcy4iKSx9KS5hZGRDbGFzcygnbWIwJyk7dmFyICRzZWN1cml0eUNoZWNrPSQoJzxkaXYvPicse2NsYXNzOidhbGVydCBhbGVydC0nKyhvcHRpb25zJiZvcHRpb25zLnNlY3VyaXR5TGV2ZWx8fCd3YXJuaW5nJykrJyBtdDggbWIwJyx9KS5wcmVwZW5kKCRjaGVja2JveCk7dmFyICRjb250ZW50O2lmKG9wdGlvbnMmJm9wdGlvbnMuJGNvbnRlbnQpeyRjb250ZW50PW9wdGlvbnMuJGNvbnRlbnQ7ZGVsZXRlIG9wdGlvbnMuJGNvbnRlbnQ7fWVsc2V7JGNvbnRlbnQ9JCgnPGRpdj4nLHt0ZXh0Om1lc3NhZ2UsfSk7fQokY29udGVudD0kKCc8bWFpbi8+Jyx7cm9sZTonYWxlcnQnfSkuYXBwZW5kKCRjb250ZW50LCRzZWN1cml0eUNoZWNrKTt2YXIgYnV0dG9ucz1be3RleHQ6X3QoIk9rIiksY2xhc3NlczonYnRuLXByaW1hcnkgb19zYWZlX2NvbmZpcm1fYnV0dG9uJyxjbG9zZTp0cnVlLGNsaWNrOm9wdGlvbnMmJm9wdGlvbnMuY29uZmlybV9jYWxsYmFjayxkaXNhYmxlZDp0cnVlLH0se3RleHQ6X3QoIkNhbmNlbCIpLGNsb3NlOnRydWUsY2xpY2s6b3B0aW9ucyYmb3B0aW9ucy5jYW5jZWxfY2FsbGJhY2t9XTt2YXIgZGlhbG9nPW5ldyBEaWFsb2cob3duZXIsXy5leHRlbmQoe3NpemU6J21lZGl1bScsYnV0dG9uczpidXR0b25zLCRjb250ZW50OiRjb250ZW50LHRpdGxlOl90KCJDb25maXJtYXRpb24iKSxvbkZvcmNlQ2xvc2U6b3B0aW9ucyYmKG9wdGlvbnMub25Gb3JjZUNsb3NlfHxvcHRpb25zLmNhbmNlbF9jYWxsYmFjayksfSxvcHRpb25zKSk7ZGlhbG9nLm9wZW5lZChmdW5jdGlvbigpe3ZhciAkYnV0dG9uPWRpYWxvZy4kZm9vdGVyLmZpbmQoJy5vX3NhZmVfY29uZmlybV9idXR0b24nKTskc2VjdXJpdHlDaGVjay5vbignY2xpY2snLCdpbnB1dFt0eXBlPSJjaGVja2JveCJdJyxmdW5jdGlvbihldil7JGJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsISQoZXYuY3VycmVudFRhcmdldCkucHJvcCgnY2hlY2tlZCcpKTt9KTt9KTtyZXR1cm4gZGlhbG9nLm9wZW4oKTt9O3JldHVybiBEaWFsb2c7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvZG9tLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmRvbV9yZWFkeScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7JChyZXNvbHZlKTt9KTt9KTtvZG9vLmRlZmluZSgnd2ViLmRvbScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb25jdXJyZW5jeT1yZXF1aXJlKCd3ZWIuY29uY3VycmVuY3knKTt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBfdD1jb3JlLl90O2Z1bmN0aW9uIF9ub3RpZnkoY29udGVudCxjYWxsYmFja3Mpe2NhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2lmKGMud2lkZ2V0JiZjLndpZGdldC5vbl9hdHRhY2hfY2FsbGJhY2spe2Mud2lkZ2V0Lm9uX2F0dGFjaF9jYWxsYmFjayhjLmNhbGxiYWNrX2FyZ3MpO319KTtjb3JlLmJ1cy50cmlnZ2VyKCdET01fdXBkYXRlZCcsY29udGVudCk7fQp2YXIgZG9tPXtERUJPVU5DRTo0MDAsYXBwZW5kOmZ1bmN0aW9uKCR0YXJnZXQsY29udGVudCxvcHRpb25zKXskdGFyZ2V0LmFwcGVuZChjb250ZW50KTtpZihvcHRpb25zJiZvcHRpb25zLmluX0RPTSl7X25vdGlmeShjb250ZW50LG9wdGlvbnMuY2FsbGJhY2tzKTt9fSxhdXRvcmVzaXplOmZ1bmN0aW9uKCR0ZXh0YXJlYSxvcHRpb25zKXtpZigkdGV4dGFyZWEuZGF0YSgiYXV0b19yZXNpemUiKSl7cmV0dXJuO30KdmFyICRmaXhlZFRleHRhcmVhO3ZhciBtaW5IZWlnaHQ7ZnVuY3Rpb24gcmVzaXplKCl7JGZpeGVkVGV4dGFyZWEuaW5zZXJ0QWZ0ZXIoJHRleHRhcmVhKTt2YXIgaGVpZ2h0T2Zmc2V0PTA7dmFyIHN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0ZXh0YXJlYVswXSxudWxsKTtpZihzdHlsZS5ib3hTaXppbmc9PT0nYm9yZGVyLWJveCcpe3ZhciBwYWRkaW5nSGVpZ2h0PXBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ1RvcCkrcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nQm90dG9tKTt2YXIgYm9yZGVySGVpZ2h0PXBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpK3BhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpO2hlaWdodE9mZnNldD1ib3JkZXJIZWlnaHQrcGFkZGluZ0hlaWdodDt9CiRmaXhlZFRleHRhcmVhLndpZHRoKCR0ZXh0YXJlYS53aWR0aCgpKTskZml4ZWRUZXh0YXJlYS52YWwoJHRleHRhcmVhLnZhbCgpKTt2YXIgaGVpZ2h0PSRmaXhlZFRleHRhcmVhWzBdLnNjcm9sbEhlaWdodDskdGV4dGFyZWEuY3NzKHtoZWlnaHQ6TWF0aC5tYXgoaGVpZ2h0K2hlaWdodE9mZnNldCxtaW5IZWlnaHQpfSk7fQpmdW5jdGlvbiByZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpe3ZhciBzdHlsZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkdGV4dGFyZWFbMF0sbnVsbCk7aWYoc3R5bGUucmVzaXplPT09J3ZlcnRpY2FsJyl7JHRleHRhcmVhWzBdLnN0eWxlLnJlc2l6ZT0nbm9uZSc7fWVsc2UgaWYoc3R5bGUucmVzaXplPT09J2JvdGgnKXskdGV4dGFyZWFbMF0uc3R5bGUucmVzaXplPSdob3Jpem9udGFsJzt9fQpvcHRpb25zPW9wdGlvbnN8fHt9O21pbkhlaWdodD0nbWluX2hlaWdodCdpbiBvcHRpb25zP29wdGlvbnMubWluX2hlaWdodDo1MDskZml4ZWRUZXh0YXJlYT0kKCc8dGV4dGFyZWEgZGlzYWJsZWQ+Jyx7Y2xhc3M6JHRleHRhcmVhWzBdLmNsYXNzTmFtZSx9KTskZml4ZWRUZXh0YXJlYS5jc3Moe29wYWNpdHk6MCxoZWlnaHQ6MCxib3JkZXJUb3BXaWR0aDowLGJvcmRlckJvdHRvbVdpZHRoOjAscGFkZGluZzowLG92ZXJmbG93OidoaWRkZW4nLH0pOyRmaXhlZFRleHRhcmVhLmRhdGEoImF1dG9fcmVzaXplIix0cnVlKTskdGV4dGFyZWEuY3NzKHsnb3ZlcmZsb3cteSc6J2hpZGRlbid9KTtyZXNpemUoKTtyZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpOyR0ZXh0YXJlYS5kYXRhKCJhdXRvX3Jlc2l6ZSIsdHJ1ZSk7JHRleHRhcmVhLm9uKCdpbnB1dCBmb2N1cyBjaGFuZ2UnLHJlc2l6ZSk7aWYob3B0aW9ucy5wYXJlbnQpe2NvcmUuYnVzLm9uKCdET01fdXBkYXRlZCcsb3B0aW9ucy5wYXJlbnQsZnVuY3Rpb24oKXtyZXNpemUoKTtyZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpO30pO319LGNzc0ZpbmQ6ZnVuY3Rpb24oJGZyb20sc2VsZWN0b3IsYWRkQmFjayl7dmFyICRyZXN1bHRzO3ZhciBtdWx0aVBhcnRzPXNlbGVjdG9yLmluZGV4T2YoJyAnKT49MDtpZihtdWx0aVBhcnRzKXskcmVzdWx0cz0kZnJvbS5maW5kKCcqJykuZmlsdGVyKHNlbGVjdG9yKTt9ZWxzZXskcmVzdWx0cz0kZnJvbS5maW5kKHNlbGVjdG9yKTt9CmlmKGFkZEJhY2smJiRmcm9tLmlzKHNlbGVjdG9yKSl7JHJlc3VsdHM9JHJlc3VsdHMuYWRkKCRmcm9tKTt9CnJldHVybiAkcmVzdWx0czt9LGRldGFjaDpmdW5jdGlvbih0b19kZXRhY2gsb3B0aW9ucyl7dG9fZGV0YWNoLmZvckVhY2goZnVuY3Rpb24oZCl7aWYoZC53aWRnZXQub25fZGV0YWNoX2NhbGxiYWNrKXtkLndpZGdldC5vbl9kZXRhY2hfY2FsbGJhY2soZC5jYWxsYmFja19hcmdzKTt9fSk7dmFyICR0b19kZXRhY2g9b3B0aW9ucyYmb3B0aW9ucy4kdG9fZGV0YWNoO2lmKCEkdG9fZGV0YWNoKXskdG9fZGV0YWNoPSQodG9fZGV0YWNoLm1hcChmdW5jdGlvbihkKXtyZXR1cm4gZC53aWRnZXQuZWw7fSkpO30KcmV0dXJuICR0b19kZXRhY2guZGV0YWNoKCk7fSxnZXRTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbihub2RlKXtyZXR1cm57c3RhcnQ6bm9kZS5zZWxlY3Rpb25TdGFydCxlbmQ6bm9kZS5zZWxlY3Rpb25FbmQsfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciBwb3NpdGlvbj17bGVmdDowLHRvcDowfTt3aGlsZShlKXtwb3NpdGlvbi5sZWZ0Kz1lLm9mZnNldExlZnQ7cG9zaXRpb24udG9wKz1lLm9mZnNldFRvcDtlPWUub2Zmc2V0UGFyZW50O30KcmV0dXJuIHBvc2l0aW9uO30sbWFrZUFzeW5jSGFuZGxlcjpmdW5jdGlvbihmY3QscHJldmVudERlZmF1bHQsc3RvcFByb3BhZ2F0aW9uKXt2YXIgcGVuZGluZz1mYWxzZTtmdW5jdGlvbiBfaXNMb2NrZWQoKXtyZXR1cm4gcGVuZGluZzt9CmZ1bmN0aW9uIF9sb2NrKCl7cGVuZGluZz10cnVlO30KZnVuY3Rpb24gX3VubG9jaygpe3BlbmRpbmc9ZmFsc2U7fQpyZXR1cm4gZnVuY3Rpb24oZXYpe2lmKHByZXZlbnREZWZhdWx0PT09dHJ1ZXx8cHJldmVudERlZmF1bHQmJnByZXZlbnREZWZhdWx0KCkpe2V2LnByZXZlbnREZWZhdWx0KCk7fQppZihzdG9wUHJvcGFnYXRpb249PT10cnVlfHxzdG9wUHJvcGFnYXRpb24mJnN0b3BQcm9wYWdhdGlvbigpKXtldi5zdG9wUHJvcGFnYXRpb24oKTt9CmlmKF9pc0xvY2tlZCgpKXtyZXR1cm47fQpfbG9jaygpO3ZhciByZXN1bHQ9ZmN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKF91bmxvY2spLmd1YXJkZWRDYXRjaChfdW5sb2NrKTtyZXR1cm4gcmVzdWx0O307fSxtYWtlQnV0dG9uSGFuZGxlcjpmdW5jdGlvbihmY3Qpe2ZjdD1kb20ubWFrZUFzeW5jSGFuZGxlcihmY3QpO3JldHVybiBmdW5jdGlvbihldil7dmFyIHJlc3VsdD1mY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciAkYnV0dG9uPSQoZXYudGFyZ2V0KS5jbG9zZXN0KCcuYnRuJyk7aWYoISRidXR0b24ubGVuZ3RoKXtyZXR1cm4gcmVzdWx0O30KJGJ1dHRvbi5hZGRDbGFzcygnb19kZWJvdW5jZV9kaXNhYmxlZCcpO1Byb21pc2UucmVzb2x2ZShkb20uREVCT1VOQ0UmJmNvbmN1cnJlbmN5LmRlbGF5KGRvbS5ERUJPVU5DRSkpLnRoZW4oZnVuY3Rpb24oKXskYnV0dG9uLmFkZENsYXNzKCdkaXNhYmxlZCcpLnByb3AoJ2Rpc2FibGVkJyx0cnVlKTskYnV0dG9uLnJlbW92ZUNsYXNzKCdvX2RlYm91bmNlX2Rpc2FibGVkJyk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oZnVuY3Rpb24oKXskYnV0dG9uLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpLnByb3AoJ2Rpc2FibGVkJyxmYWxzZSk7fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKCl7JGJ1dHRvbi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO30pO30pO3JldHVybiByZXN1bHQ7fTt9LHByZXBlbmQ6ZnVuY3Rpb24oJHRhcmdldCxjb250ZW50LG9wdGlvbnMpeyR0YXJnZXQucHJlcGVuZChjb250ZW50KTtpZihvcHRpb25zJiZvcHRpb25zLmluX0RPTSl7X25vdGlmeShjb250ZW50LG9wdGlvbnMuY2FsbGJhY2tzKTt9fSxyZW5kZXJCdXR0b246ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGpRdWVyeVBhcmFtcz1fLmV4dGVuZCh7dHlwZTonYnV0dG9uJyx9LG9wdGlvbnMuYXR0cnN8fHt9KTt2YXIgZXh0cmFDbGFzc2VzPWpRdWVyeVBhcmFtcy5jbGFzcztpZihleHRyYUNsYXNzZXMpe2V4dHJhQ2xhc3Nlcz1leHRyYUNsYXNzZXMucmVwbGFjZSgvXGJvZV9oaWdobGlnaHRcYi9nLCdidG4tcHJpbWFyeScpLnJlcGxhY2UoL1xib2VfbGlua1xiL2csJ2J0bi1saW5rJyk7fQpqUXVlcnlQYXJhbXMuY2xhc3M9J2J0bic7aWYob3B0aW9ucy5zaXplKXtqUXVlcnlQYXJhbXMuY2xhc3MrPSgnIGJ0bi0nK29wdGlvbnMuc2l6ZSk7fQpqUXVlcnlQYXJhbXMuY2xhc3MrPSgnICcrKGV4dHJhQ2xhc3Nlc3x8J2J0bi1zZWNvbmRhcnknKSk7dmFyICRidXR0b249JCgnPGJ1dHRvbi8+JyxqUXVlcnlQYXJhbXMpO2lmKG9wdGlvbnMuaWNvbil7aWYob3B0aW9ucy5pY29uLnN1YnN0cigwLDMpPT09J2ZhLScpeyRidXR0b24uYXBwZW5kKCQoJzxpLz4nLHtjbGFzczonZmEgZmEtZncgb19idXR0b25faWNvbiAnK29wdGlvbnMuaWNvbix9KSk7fWVsc2V7JGJ1dHRvbi5hcHBlbmQoJCgnPGltZy8+Jyx7c3JjOm9wdGlvbnMuaWNvbix9KSk7fX0KaWYob3B0aW9ucy50ZXh0KXskYnV0dG9uLmFwcGVuZCgkKCc8c3Bhbi8+Jyx7dGV4dDpvcHRpb25zLnRleHQsfSkpO30KcmV0dXJuICRidXR0b247fSxyZW5kZXJDaGVja2JveDpmdW5jdGlvbihvcHRpb25zKXt2YXIgaWQ9Xy51bmlxdWVJZCgnY2hlY2tib3gtJyk7dmFyICRjb250YWluZXI9JCgnPGRpdi8+Jyx7Y2xhc3M6J2N1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCcsfSk7dmFyICRpbnB1dD0kKCc8aW5wdXQvPicse3R5cGU6J2NoZWNrYm94JyxpZDppZCxjbGFzczonY3VzdG9tLWNvbnRyb2wtaW5wdXQnLH0pO3ZhciAkbGFiZWw9JCgnPGxhYmVsLz4nLHtmb3I6aWQsY2xhc3M6J2N1c3RvbS1jb250cm9sLWxhYmVsJyx0ZXh0Om9wdGlvbnMmJm9wdGlvbnMudGV4dHx8JycsfSk7aWYoIW9wdGlvbnN8fCFvcHRpb25zLnRleHQpeyRsYWJlbC5odG1sKCcmIzgyMDM7Jyk7fQppZihvcHRpb25zJiZvcHRpb25zLnByb3ApeyRpbnB1dC5wcm9wKG9wdGlvbnMucHJvcCk7fQpyZXR1cm4gJGNvbnRhaW5lci5hcHBlbmQoJGlucHV0LCRsYWJlbCk7fSxzZXRTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbihub2RlLHJhbmdlKXtpZihub2RlLnNldFNlbGVjdGlvblJhbmdlKXtub2RlLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlLnN0YXJ0LHJhbmdlLmVuZCk7fWVsc2UgaWYobm9kZS5jcmVhdGVUZXh0UmFuZ2Upe25vZGUuY3JlYXRlVGV4dFJhbmdlKCkuY29sbGFwc2UodHJ1ZSkubW92ZUVuZCgnY2hhcmFjdGVyJyxyYW5nZS5zdGFydCkubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLHJhbmdlLmVuZCkuc2VsZWN0KCk7fX0saW5pdEF1dG9Nb3JlTWVudTpmdW5jdGlvbigkZWwsb3B0aW9ucyl7b3B0aW9ucz1fLmV4dGVuZCh7dW5mb2xkYWJsZTonbm9uZScsbWF4V2lkdGg6ZmFsc2Usc2l6ZUNsYXNzOidTTScsfSxvcHRpb25zfHx7fSk7dmFyICRleHRyYUl0ZW1zVG9nZ2xlPW51bGw7dmFyIGRlYm91bmNlZEFkYXB0PV8uZGVib3VuY2UoX2FkYXB0LDI1MCk7Y29yZS5idXMub24oJ3Jlc2l6ZScsbnVsbCxkZWJvdW5jZWRBZGFwdCk7X2FkYXB0KCk7JGVsLmRhdGEoJ2RvbTphdXRvTW9yZU1lbnU6ZGVzdHJveScsZnVuY3Rpb24oKXtfcmVzdG9yZSgpO2NvcmUuYnVzLm9mZigncmVzaXplJyxudWxsLGRlYm91bmNlZEFkYXB0KTskZWwucmVtb3ZlRGF0YSgnZG9tOmF1dG9Nb3JlTWVudTpkZXN0cm95Jyk7fSk7ZnVuY3Rpb24gX3Jlc3RvcmUoKXtpZigkZXh0cmFJdGVtc1RvZ2dsZT09PW51bGwpe3JldHVybjt9CnZhciAkaXRlbXM9JGV4dHJhSXRlbXNUb2dnbGUuY2hpbGRyZW4oJy5kcm9wZG93bi1tZW51JykuY2hpbGRyZW4oKTskaXRlbXMuYWRkQ2xhc3MoJ25hdi1pdGVtJyk7JGl0ZW1zLmNoaWxkcmVuKCcuZHJvcGRvd24taXRlbSwgYScpLnJlbW92ZUNsYXNzKCdkcm9wZG93bi1pdGVtJykuYWRkQ2xhc3MoJ25hdi1saW5rJyk7JGl0ZW1zLmluc2VydEJlZm9yZSgkZXh0cmFJdGVtc1RvZ2dsZSk7JGV4dHJhSXRlbXNUb2dnbGUucmVtb3ZlKCk7JGV4dHJhSXRlbXNUb2dnbGU9bnVsbDt9CmZ1bmN0aW9uIF9hZGFwdCgpe2lmKCEkZWwuaXMoJzp2aXNpYmxlJykpe3JldHVybjt9Cl9yZXN0b3JlKCk7aWYoY29uZmlnLmRldmljZS5zaXplX2NsYXNzPD1jb25maWcuZGV2aWNlLlNJWkVTW29wdGlvbnMuc2l6ZUNsYXNzXSl7cmV0dXJuO30KdmFyICRhbGxJdGVtcz0kZWwuY2hpbGRyZW4oKTt2YXIgJHVuZm9sZGFibGVJdGVtcz0kYWxsSXRlbXMuZmlsdGVyKG9wdGlvbnMudW5mb2xkYWJsZSk7dmFyICRpdGVtcz0kYWxsSXRlbXMubm90KCR1bmZvbGRhYmxlSXRlbXMpO3ZhciBtYXhXaWR0aD0wO2lmKG9wdGlvbnMubWF4V2lkdGgpe21heFdpZHRoPW9wdGlvbnMubWF4V2lkdGgoKTt9ZWxzZXt2YXIgbUxlZnQ9JGVsLmlzKCcubWwtYXV0bywgLm14LWF1dG8sIC5tLWF1dG8nKTt2YXIgbVJpZ2h0PSRlbC5pcygnLm1yLWF1dG8sIC5teC1hdXRvLCAubS1hdXRvJyk7bWF4V2lkdGg9Y29tcHV0ZUZsb2F0T3V0ZXJXaWR0aFdpdGhNYXJnaW5zKCRlbFswXSxtTGVmdCxtUmlnaHQpO3ZhciBzdHlsZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkZWxbMF0pO21heFdpZHRoLT0ocGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nUmlnaHQpK3BhcnNlRmxvYXQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKStwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpKTttYXhXaWR0aC09Xy5yZWR1Y2UoJHVuZm9sZGFibGVJdGVtcyxmdW5jdGlvbihzdW0sZWwpe3JldHVybiBzdW0rY29tcHV0ZUZsb2F0T3V0ZXJXaWR0aFdpdGhNYXJnaW5zKGVsKTt9LDApO30KdmFyIG5iSXRlbXM9JGl0ZW1zLmxlbmd0aDt2YXIgbWVudUl0ZW1zV2lkdGg9Xy5yZWR1Y2UoJGl0ZW1zLGZ1bmN0aW9uKHN1bSxlbCl7cmV0dXJuIHN1bStjb21wdXRlRmxvYXRPdXRlcldpZHRoV2l0aE1hcmdpbnMoZWwpO30sMCk7aWYobWF4V2lkdGgtbWVudUl0ZW1zV2lkdGg+PS0wLjAwMSl7cmV0dXJuO30KdmFyICRkcm9wZG93bk1lbnU9JCgnPHVsLz4nLHtjbGFzczonZHJvcGRvd24tbWVudSd9KTskZXh0cmFJdGVtc1RvZ2dsZT0kKCc8bGkvPicse2NsYXNzOiduYXYtaXRlbSBkcm9wZG93biBvX2V4dHJhX21lbnVfaXRlbXMnfSkuYXBwZW5kKCQoJzxhLz4nLHtyb2xlOididXR0b24nLGhyZWY6JyMnLGNsYXNzOiduYXYtbGluayBkcm9wZG93bi10b2dnbGUgby1uby1jYXJldCcsJ2RhdGEtdG9nZ2xlJzonZHJvcGRvd24nLCdhcmlhLWV4cGFuZGVkJzpmYWxzZX0pLmFwcGVuZCgkKCc8aS8+Jyx7Y2xhc3M6J2ZhIGZhLXBsdXMnfSkpKS5hcHBlbmQoJGRyb3Bkb3duTWVudSk7JGV4dHJhSXRlbXNUb2dnbGUuaW5zZXJ0QWZ0ZXIoJGl0ZW1zLmxhc3QoKSk7bWVudUl0ZW1zV2lkdGgrPWNvbXB1dGVGbG9hdE91dGVyV2lkdGhXaXRoTWFyZ2lucygkZXh0cmFJdGVtc1RvZ2dsZVswXSk7ZG97bWVudUl0ZW1zV2lkdGgtPWNvbXB1dGVGbG9hdE91dGVyV2lkdGhXaXRoTWFyZ2lucygkaXRlbXMuZXEoLS1uYkl0ZW1zKVswXSk7fXdoaWxlKCEobWF4V2lkdGgtbWVudUl0ZW1zV2lkdGg+PS0wLjAwMSkmJihuYkl0ZW1zPjApKTt2YXIgJGV4dHJhSXRlbXM9JGl0ZW1zLnNsaWNlKG5iSXRlbXMpLmRldGFjaCgpOyRleHRyYUl0ZW1zLnJlbW92ZUNsYXNzKCduYXYtaXRlbScpOyRleHRyYUl0ZW1zLmNoaWxkcmVuKCcubmF2LWxpbmssIGEnKS5yZW1vdmVDbGFzcygnbmF2LWxpbmsnKS5hZGRDbGFzcygnZHJvcGRvd24taXRlbScpOyRkcm9wZG93bk1lbnUuYXBwZW5kKCRleHRyYUl0ZW1zKTskZXh0cmFJdGVtc1RvZ2dsZS5maW5kKCcubmF2LWxpbmsnKS50b2dnbGVDbGFzcygnYWN0aXZlJywkZXh0cmFJdGVtcy5jaGlsZHJlbigpLmhhc0NsYXNzKCdhY3RpdmUnKSk7fQpmdW5jdGlvbiBjb21wdXRlRmxvYXRPdXRlcldpZHRoV2l0aE1hcmdpbnMoZWwsbUxlZnQsbVJpZ2h0KXt2YXIgcmVjdD1lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2YXIgc3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO3ZhciBvdXRlcldpZHRoPXJlY3QucmlnaHQtcmVjdC5sZWZ0O2lmKG1MZWZ0IT09ZmFsc2Upe291dGVyV2lkdGgrPXBhcnNlRmxvYXQoc3R5bGUubWFyZ2luTGVmdCk7fQppZihtUmlnaHQhPT1mYWxzZSl7b3V0ZXJXaWR0aCs9cGFyc2VGbG9hdChzdHlsZS5tYXJnaW5SaWdodCk7fQpyZXR1cm4gb3V0ZXJXaWR0aDt9fSxkZXN0cm95QXV0b01vcmVNZW51OmZ1bmN0aW9uKCRlbCl7dmFyIGRlc3Ryb3lGdW5jPSRlbC5kYXRhKCdkb206YXV0b01vcmVNZW51OmRlc3Ryb3knKTtpZihkZXN0cm95RnVuYyl7ZGVzdHJveUZ1bmMuY2FsbChudWxsKTt9fSx9O3JldHVybiBkb207fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvbG9jYWxfc3RvcmFnZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5sb2NhbF9zdG9yYWdlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIFJhbVN0b3JhZ2U9cmVxdWlyZSgnd2ViLlJhbVN0b3JhZ2UnKTt2YXIgbWl4aW5zPXJlcXVpcmUoJ3dlYi5taXhpbnMnKTt2YXIgc3RvcmFnZTt2YXIgbG9jYWxTdG9yYWdlPXdpbmRvdy5sb2NhbFN0b3JhZ2U7dHJ5e3ZhciB1aWQ9bmV3IERhdGUoKTtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh1aWQsdWlkKTtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh1aWQpO3N0b3JhZ2U9KGZ1bmN0aW9uKCl7dmFyIHN0b3JhZ2U9T2JqZWN0LmNyZWF0ZShfLmV4dGVuZCh7Z2V0SXRlbTpsb2NhbFN0b3JhZ2UuZ2V0SXRlbS5iaW5kKGxvY2FsU3RvcmFnZSksc2V0SXRlbTpsb2NhbFN0b3JhZ2Uuc2V0SXRlbS5iaW5kKGxvY2FsU3RvcmFnZSkscmVtb3ZlSXRlbTpsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbS5iaW5kKGxvY2FsU3RvcmFnZSksY2xlYXI6bG9jYWxTdG9yYWdlLmNsZWFyLmJpbmQobG9jYWxTdG9yYWdlKSx9LG1peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbikpO3N0b3JhZ2UuaW5pdCgpOyQod2luZG93KS5vbignc3RvcmFnZScsZnVuY3Rpb24oZSl7dmFyIGtleT1lLm9yaWdpbmFsRXZlbnQua2V5O3ZhciBuZXdWYWx1ZT1lLm9yaWdpbmFsRXZlbnQubmV3VmFsdWU7dHJ5e0pTT04ucGFyc2UobmV3VmFsdWUpO3N0b3JhZ2UudHJpZ2dlcignc3RvcmFnZScse2tleTprZXksbmV3VmFsdWU6bmV3VmFsdWUsfSk7fWNhdGNoKGVycm9yKXt9fSk7cmV0dXJuIHN0b3JhZ2U7fSkoKTt9Y2F0Y2goZXhjZXB0aW9uKXtjb25zb2xlLndhcm4oJ0ZhaWwgdG8gbG9hZCBsb2NhbFN0b3JhZ2UnKTtzdG9yYWdlPW5ldyBSYW1TdG9yYWdlKCk7fQpyZXR1cm4gc3RvcmFnZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9taXhpbnMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIubWl4aW5zJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgUGFyZW50ZWRNaXhpbj17X19wYXJlbnRlZE1peGluOnRydWUsaW5pdDpmdW5jdGlvbigpe3RoaXMuX19wYXJlbnRlZERlc3Ryb3llZD1mYWxzZTt0aGlzLl9fcGFyZW50ZWRDaGlsZHJlbj1bXTt0aGlzLl9fcGFyZW50ZWRQYXJlbnQ9bnVsbDt9LHNldFBhcmVudDpmdW5jdGlvbihwYXJlbnQpe2lmKHRoaXMuZ2V0UGFyZW50KCkpe2lmKHRoaXMuZ2V0UGFyZW50KCkuX19wYXJlbnRlZE1peGluKXt0aGlzLmdldFBhcmVudCgpLl9fcGFyZW50ZWRDaGlsZHJlbj1fLndpdGhvdXQodGhpcy5nZXRQYXJlbnQoKS5nZXRDaGlsZHJlbigpLHRoaXMpO319CnRoaXMuX19wYXJlbnRlZFBhcmVudD1wYXJlbnQ7aWYocGFyZW50JiZwYXJlbnQuX19wYXJlbnRlZE1peGluKXtwYXJlbnQuX19wYXJlbnRlZENoaWxkcmVuLnB1c2godGhpcyk7fX0sZ2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19wYXJlbnRlZFBhcmVudDt9LGdldENoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIF8uY2xvbmUodGhpcy5fX3BhcmVudGVkQ2hpbGRyZW4pO30saXNEZXN0cm95ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX3BhcmVudGVkRGVzdHJveWVkO30sYWxpdmU6ZnVuY3Rpb24ocHJvbWlzZSxzaG91bGRSZWplY3Qpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZighc2VsZi5pc0Rlc3Ryb3llZCgpKXtyZXNvbHZlKHJlc3VsdCk7fWVsc2UgaWYoc2hvdWxkUmVqZWN0KXtyZWplY3QoKTt9fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKHJlYXNvbil7aWYoIXNlbGYuaXNEZXN0cm95ZWQoKSl7cmVqZWN0KHJlYXNvbik7fWVsc2UgaWYoc2hvdWxkUmVqZWN0KXtyZWplY3QoKTt9fSk7fSk7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5nZXRDaGlsZHJlbigpLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpe2NoaWxkLmRlc3Ryb3koKTt9KTt0aGlzLnNldFBhcmVudCh1bmRlZmluZWQpO3RoaXMuX19wYXJlbnRlZERlc3Ryb3llZD10cnVlO30sZmluZEFuY2VzdG9yOmZ1bmN0aW9uKHByZWRpY2F0ZSl7dmFyIGFuY2VzdG9yPXRoaXM7d2hpbGUoYW5jZXN0b3ImJiEocHJlZGljYXRlKGFuY2VzdG9yKSkmJmFuY2VzdG9yLmdldFBhcmVudCl7YW5jZXN0b3I9YW5jZXN0b3IuZ2V0UGFyZW50KCk7fQpyZXR1cm4gYW5jZXN0b3I7fSx9O2Z1bmN0aW9uIE9kb29FdmVudCh0YXJnZXQsbmFtZSxkYXRhKXt0aGlzLnRhcmdldD10YXJnZXQ7dGhpcy5uYW1lPW5hbWU7dGhpcy5kYXRhPU9iamVjdC5jcmVhdGUobnVsbCk7Xy5leHRlbmQodGhpcy5kYXRhLGRhdGEpO3RoaXMuc3RvcHBlZD1mYWxzZTt9Ck9kb29FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5zdG9wcGVkPXRydWU7fTtPZG9vRXZlbnQucHJvdG90eXBlLmlzX3N0b3BwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wcGVkO307dmFyIEV2ZW50cz1DbGFzcy5leHRlbmQoe29uOmZ1bmN0aW9uKGV2ZW50cyxjYWxsYmFjayxjb250ZXh0KXt2YXIgZXY7ZXZlbnRzPWV2ZW50cy5zcGxpdCgvXHMrLyk7dmFyIGNhbGxzPXRoaXMuX2NhbGxiYWNrc3x8KHRoaXMuX2NhbGxiYWNrcz17fSk7d2hpbGUoKGV2PWV2ZW50cy5zaGlmdCgpKSl7dmFyIGxpc3Q9Y2FsbHNbZXZdfHwoY2FsbHNbZXZdPXt9KTt2YXIgdGFpbD1saXN0LnRhaWx8fChsaXN0LnRhaWw9bGlzdC5uZXh0PXt9KTt0YWlsLmNhbGxiYWNrPWNhbGxiYWNrO3RhaWwuY29udGV4dD1jb250ZXh0O2xpc3QudGFpbD10YWlsLm5leHQ9e307fQpyZXR1cm4gdGhpczt9LG9mZjpmdW5jdGlvbihldmVudHMsY2FsbGJhY2ssY29udGV4dCl7dmFyIGV2LGNhbGxzLG5vZGU7aWYoIWV2ZW50cyl7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrczt9ZWxzZSBpZigoY2FsbHM9dGhpcy5fY2FsbGJhY2tzKSl7ZXZlbnRzPWV2ZW50cy5zcGxpdCgvXHMrLyk7d2hpbGUoKGV2PWV2ZW50cy5zaGlmdCgpKSl7bm9kZT1jYWxsc1tldl07ZGVsZXRlIGNhbGxzW2V2XTtpZighY2FsbGJhY2t8fCFub2RlKQpjb250aW51ZTt3aGlsZSgobm9kZT1ub2RlLm5leHQpJiZub2RlLm5leHQpe2lmKG5vZGUuY2FsbGJhY2s9PT1jYWxsYmFjayYmKCFjb250ZXh0fHxub2RlLmNvbnRleHQ9PT1jb250ZXh0KSkKY29udGludWU7dGhpcy5vbihldixub2RlLmNhbGxiYWNrLG5vZGUuY29udGV4dCk7fX19CnJldHVybiB0aGlzO30sY2FsbGJhY2tMaXN0OmZ1bmN0aW9uKCl7dmFyIGxzdD1bXTtfLmVhY2godGhpcy5fY2FsbGJhY2tzfHx7fSxmdW5jdGlvbihlbCxldmVudE5hbWUpe3ZhciBub2RlPWVsO3doaWxlKChub2RlPW5vZGUubmV4dCkmJm5vZGUubmV4dCl7bHN0LnB1c2goW2V2ZW50TmFtZSxub2RlLmNhbGxiYWNrLG5vZGUuY29udGV4dF0pO319KTtyZXR1cm4gbHN0O30sdHJpZ2dlcjpmdW5jdGlvbihldmVudHMpe3ZhciBldmVudCxub2RlLGNhbGxzLHRhaWwsYXJncyxhbGwscmVzdDtpZighKGNhbGxzPXRoaXMuX2NhbGxiYWNrcykpCnJldHVybiB0aGlzO2FsbD1jYWxscy5hbGw7KGV2ZW50cz1ldmVudHMuc3BsaXQoL1xzKy8pKS5wdXNoKG51bGwpO3doaWxlKChldmVudD1ldmVudHMuc2hpZnQoKSkpe2lmKGFsbCkKZXZlbnRzLnB1c2goe25leHQ6YWxsLm5leHQsdGFpbDphbGwudGFpbCxldmVudDpldmVudH0pO2lmKCEobm9kZT1jYWxsc1tldmVudF0pKQpjb250aW51ZTtldmVudHMucHVzaCh7bmV4dDpub2RlLm5leHQsdGFpbDpub2RlLnRhaWx9KTt9CnJlc3Q9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3doaWxlKChub2RlPWV2ZW50cy5wb3AoKSkpe3RhaWw9bm9kZS50YWlsO2FyZ3M9bm9kZS5ldmVudD9bbm9kZS5ldmVudF0uY29uY2F0KHJlc3QpOnJlc3Q7d2hpbGUoKG5vZGU9bm9kZS5uZXh0KSE9PXRhaWwpe25vZGUuY2FsbGJhY2suYXBwbHkobm9kZS5jb250ZXh0fHx0aGlzLGFyZ3MpO319CnJldHVybiB0aGlzO319KTt2YXIgRXZlbnREaXNwYXRjaGVyTWl4aW49Xy5leHRlbmQoe30sUGFyZW50ZWRNaXhpbix7X19ldmVudERpc3BhdGNoZXJNaXhpbjp0cnVlLGN1c3RvbV9ldmVudHM6e30saW5pdDpmdW5jdGlvbigpe1BhcmVudGVkTWl4aW4uaW5pdC5jYWxsKHRoaXMpO3RoaXMuX19lZGlzcGF0Y2hlckV2ZW50cz1uZXcgRXZlbnRzKCk7dGhpcy5fX2VkaXNwYXRjaGVyUmVnaXN0ZXJlZEV2ZW50cz1bXTt0aGlzLl9kZWxlZ2F0ZUN1c3RvbUV2ZW50cygpO30scHJveHk6ZnVuY3Rpb24obWV0aG9kKXt2YXIgc2VsZj10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBmbj0odHlwZW9mIG1ldGhvZD09PSdzdHJpbmcnKT9zZWxmW21ldGhvZF06bWV0aG9kO2lmKGZuPT09dm9pZCAwKXt0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGZpbmQgbWV0aG9kICciK21ldGhvZCsiJyBpbiB3aWRnZXQgIitzZWxmKTt9CnJldHVybiBmbi5hcHBseShzZWxmLGFyZ3VtZW50cyk7fTt9LF9kZWxlZ2F0ZUN1c3RvbUV2ZW50czpmdW5jdGlvbigpe2lmKF8uaXNFbXB0eSh0aGlzLmN1c3RvbV9ldmVudHMpKXtyZXR1cm47fQpmb3IodmFyIGtleSBpbiB0aGlzLmN1c3RvbV9ldmVudHMpe2lmKCF0aGlzLmN1c3RvbV9ldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSl7Y29udGludWU7fQp2YXIgbWV0aG9kPXRoaXMucHJveHkodGhpcy5jdXN0b21fZXZlbnRzW2tleV0pO3RoaXMub24oa2V5LHRoaXMsbWV0aG9kKTt9fSxvbjpmdW5jdGlvbihldmVudHMsZGVzdCxmdW5jKXt2YXIgc2VsZj10aGlzO2lmKHR5cGVvZiBmdW5jIT09ImZ1bmN0aW9uIil7dGhyb3cgbmV3IEVycm9yKCJFdmVudCBoYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt9CmV2ZW50cz1ldmVudHMuc3BsaXQoL1xzKy8pO18uZWFjaChldmVudHMsZnVuY3Rpb24oZXZlbnROYW1lKXtzZWxmLl9fZWRpc3BhdGNoZXJFdmVudHMub24oZXZlbnROYW1lLGZ1bmMsZGVzdCk7aWYoZGVzdCYmZGVzdC5fX2V2ZW50RGlzcGF0Y2hlck1peGluKXtkZXN0Ll9fZWRpc3BhdGNoZXJSZWdpc3RlcmVkRXZlbnRzLnB1c2goe25hbWU6ZXZlbnROYW1lLGZ1bmM6ZnVuYyxzb3VyY2U6c2VsZn0pO319KTtyZXR1cm4gdGhpczt9LG9mZjpmdW5jdGlvbihldmVudHMsZGVzdCxmdW5jKXt2YXIgc2VsZj10aGlzO2V2ZW50cz1ldmVudHMuc3BsaXQoL1xzKy8pO18uZWFjaChldmVudHMsZnVuY3Rpb24oZXZlbnROYW1lKXtzZWxmLl9fZWRpc3BhdGNoZXJFdmVudHMub2ZmKGV2ZW50TmFtZSxmdW5jLGRlc3QpO2lmKGRlc3QmJmRlc3QuX19ldmVudERpc3BhdGNoZXJNaXhpbil7ZGVzdC5fX2VkaXNwYXRjaGVyUmVnaXN0ZXJlZEV2ZW50cz1fLmZpbHRlcihkZXN0Ll9fZWRpc3BhdGNoZXJSZWdpc3RlcmVkRXZlbnRzLGZ1bmN0aW9uKGVsKXtyZXR1cm4hKGVsLm5hbWU9PT1ldmVudE5hbWUmJmVsLmZ1bmM9PT1mdW5jJiZlbC5zb3VyY2U9PT1zZWxmKTt9KTt9fSk7cmV0dXJuIHRoaXM7fSxvbmNlOmZ1bmN0aW9uKGV2ZW50cyxkZXN0LGZ1bmMpe3ZhciBzZWxmPXRoaXM7aWYodHlwZW9mIGZ1bmMhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgRXJyb3IoIkV2ZW50IGhhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO30Kc2VsZi5vbihldmVudHMsZGVzdCxmdW5jdGlvbiB3aGF0KCl7ZnVuYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7c2VsZi5vZmYoZXZlbnRzLGRlc3Qsd2hhdCk7fSk7fSx0cmlnZ2VyOmZ1bmN0aW9uKCl7dGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzLnRyaWdnZXIuYXBwbHkodGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSx0cmlnZ2VyX3VwOmZ1bmN0aW9uKG5hbWUsaW5mbyl7dmFyIGV2ZW50PW5ldyBPZG9vRXZlbnQodGhpcyxuYW1lLGluZm8pO3RoaXMuX3RyaWdnZXJfdXAoZXZlbnQpO3JldHVybiBldmVudDt9LF90cmlnZ2VyX3VwOmZ1bmN0aW9uKGV2ZW50KXt2YXIgcGFyZW50O3RoaXMuX19lZGlzcGF0Y2hlckV2ZW50cy50cmlnZ2VyKGV2ZW50Lm5hbWUsZXZlbnQpO2lmKCFldmVudC5pc19zdG9wcGVkKCkmJihwYXJlbnQ9dGhpcy5nZXRQYXJlbnQoKSkpe3BhcmVudC5fdHJpZ2dlcl91cChldmVudCk7fX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7Xy5lYWNoKHRoaXMuX19lZGlzcGF0Y2hlclJlZ2lzdGVyZWRFdmVudHMsZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnNvdXJjZS5fX2VkaXNwYXRjaGVyRXZlbnRzLm9mZihldmVudC5uYW1lLGV2ZW50LmZ1bmMsc2VsZik7fSk7dGhpcy5fX2VkaXNwYXRjaGVyUmVnaXN0ZXJlZEV2ZW50cz1bXTtfLmVhY2godGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzLmNhbGxiYWNrTGlzdCgpLGZ1bmN0aW9uKGNhbCl7dGhpcy5vZmYoY2FsWzBdLGNhbFsyXSxjYWxbMV0pO30sdGhpcyk7dGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzLm9mZigpO1BhcmVudGVkTWl4aW4uZGVzdHJveS5jYWxsKHRoaXMpO319KTt2YXIgUHJvcGVydGllc01peGluPV8uZXh0ZW5kKHt9LEV2ZW50RGlzcGF0Y2hlck1peGluLHtpbml0OmZ1bmN0aW9uKCl7RXZlbnREaXNwYXRjaGVyTWl4aW4uaW5pdC5jYWxsKHRoaXMpO3RoaXMuX19nZXR0ZXJTZXR0ZXJJbnRlcm5hbE1hcD17fTt9LHNldDpmdW5jdGlvbihhcmcxLGFyZzIsYXJnMyl7dmFyIG1hcDt2YXIgb3B0aW9ucztpZih0eXBlb2YgYXJnMT09PSJzdHJpbmciKXttYXA9e307bWFwW2FyZzFdPWFyZzI7b3B0aW9ucz1hcmczfHx7fTt9ZWxzZXttYXA9YXJnMTtvcHRpb25zPWFyZzJ8fHt9O30KdmFyIHNlbGY9dGhpczt2YXIgY2hhbmdlZD1mYWxzZTtfLmVhY2gobWFwLGZ1bmN0aW9uKHZhbCxrZXkpe3ZhciB0bXA9c2VsZi5fX2dldHRlclNldHRlckludGVybmFsTWFwW2tleV07aWYodG1wPT09dmFsKQpyZXR1cm47aWYoa2V5PT09J3ZhbHVlJyYmc2VsZi5maWVsZCYmc2VsZi5maWVsZC50eXBlPT09J2Zsb2F0JyYmdG1wJiZ2YWwpe3ZhciBkaWdpdHM9c2VsZi5maWVsZC5kaWdpdHM7aWYoXy5pc0FycmF5KGRpZ2l0cykpe2lmKHV0aWxzLmZsb2F0X2lzX3plcm8odG1wLXZhbCxkaWdpdHNbMV0pKXtyZXR1cm47fX19CmNoYW5nZWQ9dHJ1ZTtzZWxmLl9fZ2V0dGVyU2V0dGVySW50ZXJuYWxNYXBba2V5XT12YWw7aWYoIW9wdGlvbnMuc2lsZW50KQpzZWxmLnRyaWdnZXIoImNoYW5nZToiK2tleSxzZWxmLHtvbGRWYWx1ZTp0bXAsbmV3VmFsdWU6dmFsfSk7fSk7aWYoY2hhbmdlZCkKc2VsZi50cmlnZ2VyKCJjaGFuZ2UiLHNlbGYpO30sZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMuX19nZXR0ZXJTZXR0ZXJJbnRlcm5hbE1hcFtrZXldO319KTtyZXR1cm57UGFyZW50ZWRNaXhpbjpQYXJlbnRlZE1peGluLEV2ZW50RGlzcGF0Y2hlck1peGluOkV2ZW50RGlzcGF0Y2hlck1peGluLFByb3BlcnRpZXNNaXhpbjpQcm9wZXJ0aWVzTWl4aW4sfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9xd2ViLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLlFXZWInLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdHJhbnNsYXRpb249cmVxdWlyZSgnd2ViLnRyYW5zbGF0aW9uJyk7dmFyIF90PXRyYW5zbGF0aW9uLl90O2Z1bmN0aW9uIFFXZWIoZGVidWcsZGVmYXVsdF9kaWN0LGVuYWJsZVRyYW5zbGF0aW9uKXtpZihlbmFibGVUcmFuc2xhdGlvbj09PXVuZGVmaW5lZCl7ZW5hYmxlVHJhbnNsYXRpb249dHJ1ZTt9CnZhciBxd2ViPW5ldyBRV2ViMi5FbmdpbmUoKTtxd2ViLmRlZmF1bHRfZGljdD1fLmV4dGVuZCh7fSxkZWZhdWx0X2RpY3R8fHt9LHsnXyc6XywnSlNPTic6SlNPTiwnX3QnOnRyYW5zbGF0aW9uLl90LCdfX2RlYnVnX18nOmRlYnVnLCdtb21lbnQnOmZ1bmN0aW9uKGRhdGUpe3JldHVybiBuZXcgbW9tZW50KGRhdGUpO30sJ2NzcmZfdG9rZW4nOm9kb28uY3NyZl90b2tlbix9KTtxd2ViLmRlYnVnPWRlYnVnO3F3ZWIucHJlcHJvY2Vzc19ub2RlPWVuYWJsZVRyYW5zbGF0aW9uP3ByZXByb2Nlc3Nfbm9kZTpmdW5jdGlvbigpe307cmV0dXJuIHF3ZWI7fQpmdW5jdGlvbiBwcmVwcm9jZXNzX25vZGUoKXtzd2l0Y2godGhpcy5ub2RlLm5vZGVUeXBlKXtjYXNlIE5vZGUuVEVYVF9OT0RFOmNhc2UgTm9kZS5DREFUQV9TRUNUSU9OX05PREU6dmFyIHRyYW5zbGF0aW9uPXRoaXMubm9kZS5wYXJlbnROb2RlLmF0dHJpYnV0ZXNbJ3QtdHJhbnNsYXRpb24nXTtpZih0cmFuc2xhdGlvbiYmdHJhbnNsYXRpb24udmFsdWU9PT0nb2ZmJyl7cmV0dXJuO30KdmFyIG1hdGNoPS9eKFxzKikoW1xzXFNdKz8pKFxzKikkLy5leGVjKHRoaXMubm9kZS5kYXRhKTtpZihtYXRjaCl7dGhpcy5ub2RlLmRhdGE9bWF0Y2hbMV0rX3QobWF0Y2hbMl0pK21hdGNoWzNdO30KYnJlYWs7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTp2YXIgYXR0cixhdHRycz1bJ2xhYmVsJywndGl0bGUnLCdhbHQnLCdwbGFjZWhvbGRlciddO3doaWxlKChhdHRyPWF0dHJzLnBvcCgpKSl7aWYodGhpcy5hdHRyaWJ1dGVzW2F0dHJdKXt0aGlzLmF0dHJpYnV0ZXNbYXR0cl09X3QodGhpcy5hdHRyaWJ1dGVzW2F0dHJdKTt9fX19CnJldHVybiBRV2ViO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3JhbV9zdG9yYWdlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLlJhbVN0b3JhZ2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgQ2xhc3M9cmVxdWlyZSgnd2ViLkNsYXNzJyk7dmFyIG1peGlucz1yZXF1aXJlKCd3ZWIubWl4aW5zJyk7dmFyIFJhbVN0b3JhZ2U9Q2xhc3MuZXh0ZW5kKG1peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbix7aW5pdDpmdW5jdGlvbigpe21peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbi5pbml0LmNhbGwodGhpcyk7aWYoIXRoaXMuc3RvcmFnZSl7dGhpcy5jbGVhcigpO319LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5zdG9yYWdlPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5sZW5ndGg9MDt9LGdldEl0ZW06ZnVuY3Rpb24oa2V5KXtyZXR1cm4gdGhpcy5zdG9yYWdlW2tleV07fSxrZXk6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiBfLmtleXModGhpcy5zdG9yYWdlKVtpbmRleF07fSxyZW1vdmVJdGVtOmZ1bmN0aW9uKGtleSl7aWYoa2V5IGluIHRoaXMuc3RvcmFnZSl7dGhpcy5sZW5ndGgtLTt9CmRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTt0aGlzLnRyaWdnZXIoJ3N0b3JhZ2UnLHtrZXk6a2V5LG5ld1ZhbHVlOm51bGx9KTt9LHNldEl0ZW06ZnVuY3Rpb24oa2V5LHZhbHVlKXtpZighKGtleSBpbiB0aGlzLnN0b3JhZ2UpKXt0aGlzLmxlbmd0aCsrO30KdGhpcy5zdG9yYWdlW2tleV09dmFsdWU7dGhpcy50cmlnZ2VyKCdzdG9yYWdlJyx7a2V5OmtleSxuZXdWYWx1ZTp2YWx1ZX0pO30sfSk7cmV0dXJuIFJhbVN0b3JhZ2U7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvcmVnaXN0cnkuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuUmVnaXN0cnknLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQ2xhc3M9cmVxdWlyZSgnd2ViLkNsYXNzJyk7dmFyIFJlZ2lzdHJ5PUNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihtYXBwaW5nKXt0aGlzLm1hcD1PYmplY3QuY3JlYXRlKG1hcHBpbmd8fG51bGwpO3RoaXMuX3Njb3JlTWFwcGluZz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuX3NvcnRlZEtleXM9bnVsbDt0aGlzLmxpc3RlbmVycz1bXTt9LGFkZDpmdW5jdGlvbihrZXksdmFsdWUsc2NvcmUpe3RoaXMuX3Njb3JlTWFwcGluZ1trZXldPXNjb3JlPT09dW5kZWZpbmVkP2tleTpzY29yZTt0aGlzLl9zb3J0ZWRLZXlzPW51bGw7dGhpcy5tYXBba2V5XT12YWx1ZTtfLmVhY2godGhpcy5saXN0ZW5lcnMsZnVuY3Rpb24oY2FsbGJhY2spe2NhbGxiYWNrKGtleSx2YWx1ZSk7fSk7cmV0dXJuIHRoaXM7fSxjb250YWluczpmdW5jdGlvbihrZXkpe3JldHVybihrZXkgaW4gdGhpcy5tYXApO30sZW50cmllczpmdW5jdGlvbigpe3JldHVybiBPYmplY3QuY3JlYXRlKHRoaXMubWFwKTt9LGdldDpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLm1hcFtrZXldO30sZ2V0QW55OmZ1bmN0aW9uKGtleXMpe2Zvcih2YXIgaT0wO2k8a2V5cy5sZW5ndGg7aSsrKXtpZihrZXlzW2ldaW4gdGhpcy5tYXApe3JldHVybiB0aGlzLm1hcFtrZXlzW2ldXTt9fQpyZXR1cm4gbnVsbDt9LGtleXM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO2lmKCF0aGlzLl9zb3J0ZWRLZXlzKXt0aGlzLl9zb3J0ZWRLZXlzPV8uc29ydEJ5KE9iamVjdC5rZXlzKHRoaXMubWFwKSxmdW5jdGlvbihrZXkpe3JldHVybiBzZWxmLl9zY29yZU1hcHBpbmdba2V5XXx8MDt9KTt9CnJldHVybiB0aGlzLl9zb3J0ZWRLZXlzO30sb25BZGQ6ZnVuY3Rpb24oY2FsbGJhY2spe3RoaXMubGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO30sdmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy5rZXlzKCkubWFwKGZ1bmN0aW9uKGtleSl7cmV0dXJuIHNlbGYubWFwW2tleV07fSk7fSx9KTtyZXR1cm4gUmVnaXN0cnk7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvcnBjLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLnJwYycsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBhamF4PXJlcXVpcmUoJ3dlYi5hamF4Jyk7cmV0dXJue3F1ZXJ5OmZ1bmN0aW9uKHBhcmFtcyxvcHRpb25zKXt2YXIgcXVlcnk9dGhpcy5idWlsZFF1ZXJ5KHBhcmFtcyk7cmV0dXJuIGFqYXgucnBjKHF1ZXJ5LnJvdXRlLHF1ZXJ5LnBhcmFtcyxvcHRpb25zKTt9LGJ1aWxkUXVlcnk6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIHJvdXRlO3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXN8fHt9O3ZhciBvcmRlckJ5O2lmKG9wdGlvbnMucm91dGUpe3JvdXRlPW9wdGlvbnMucm91dGU7fWVsc2UgaWYob3B0aW9ucy5tb2RlbCYmb3B0aW9ucy5tZXRob2Qpe3JvdXRlPScvd2ViL2RhdGFzZXQvY2FsbF9rdy8nK29wdGlvbnMubW9kZWwrJy8nK29wdGlvbnMubWV0aG9kO30KaWYob3B0aW9ucy5tZXRob2Qpe3BhcmFtcy5hcmdzPW9wdGlvbnMuYXJnc3x8W107cGFyYW1zLm1vZGVsPW9wdGlvbnMubW9kZWw7cGFyYW1zLm1ldGhvZD1vcHRpb25zLm1ldGhvZDtwYXJhbXMua3dhcmdzPV8uZXh0ZW5kKHBhcmFtcy5rd2FyZ3N8fHt9LG9wdGlvbnMua3dhcmdzKTtwYXJhbXMua3dhcmdzLmNvbnRleHQ9b3B0aW9ucy5jb250ZXh0fHxwYXJhbXMuY29udGV4dHx8cGFyYW1zLmt3YXJncy5jb250ZXh0O30KaWYob3B0aW9ucy5tZXRob2Q9PT0ncmVhZF9ncm91cCd8fG9wdGlvbnMubWV0aG9kPT09J3dlYl9yZWFkX2dyb3VwJyl7aWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMF0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmRvbWFpbj1vcHRpb25zLmRvbWFpbnx8cGFyYW1zLmRvbWFpbnx8cGFyYW1zLmt3YXJncy5kb21haW58fFtdO30KaWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMV0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkc3x8cGFyYW1zLmt3YXJncy5maWVsZHN8fFtdO30KaWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMl0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmdyb3VwYnk9b3B0aW9ucy5ncm91cEJ5fHxwYXJhbXMuZ3JvdXBCeXx8cGFyYW1zLmt3YXJncy5ncm91cGJ5fHxbXTt9CnBhcmFtcy5rd2FyZ3Mub2Zmc2V0PW9wdGlvbnMub2Zmc2V0fHxwYXJhbXMub2Zmc2V0fHxwYXJhbXMua3dhcmdzLm9mZnNldDtwYXJhbXMua3dhcmdzLmxpbWl0PW9wdGlvbnMubGltaXR8fHBhcmFtcy5saW1pdHx8cGFyYW1zLmt3YXJncy5saW1pdDtvcmRlckJ5PW9wdGlvbnMub3JkZXJCeXx8cGFyYW1zLm9yZGVyQnl8fHBhcmFtcy5rd2FyZ3Mub3JkZXJieTtwYXJhbXMua3dhcmdzLm9yZGVyYnk9b3JkZXJCeT90aGlzLl9zZXJpYWxpemVTb3J0KG9yZGVyQnkpOm9yZGVyQnk7cGFyYW1zLmt3YXJncy5sYXp5PSdsYXp5J2luIG9wdGlvbnM/b3B0aW9ucy5sYXp5OnBhcmFtcy5sYXp5O2lmKG9wdGlvbnMubWV0aG9kPT09J3dlYl9yZWFkX2dyb3VwJyl7cGFyYW1zLmt3YXJncy5leHBhbmQ9b3B0aW9ucy5leHBhbmR8fHBhcmFtcy5leHBhbmR8fHBhcmFtcy5rd2FyZ3MuZXhwYW5kO3BhcmFtcy5rd2FyZ3MuZXhwYW5kX2xpbWl0PW9wdGlvbnMuZXhwYW5kX2xpbWl0fHxwYXJhbXMuZXhwYW5kX2xpbWl0fHxwYXJhbXMua3dhcmdzLmV4cGFuZF9saW1pdDt2YXIgZXhwYW5kT3JkZXJCeT1vcHRpb25zLmV4cGFuZF9vcmRlcmJ5fHxwYXJhbXMuZXhwYW5kX29yZGVyYnl8fHBhcmFtcy5rd2FyZ3MuZXhwYW5kX29yZGVyYnk7cGFyYW1zLmt3YXJncy5leHBhbmRfb3JkZXJieT1leHBhbmRPcmRlckJ5P3RoaXMuX3NlcmlhbGl6ZVNvcnQoZXhwYW5kT3JkZXJCeSk6ZXhwYW5kT3JkZXJCeTt9fQppZihvcHRpb25zLm1ldGhvZD09PSdzZWFyY2hfcmVhZCcpe3BhcmFtcy5rd2FyZ3MuZG9tYWluPW9wdGlvbnMuZG9tYWlufHxwYXJhbXMuZG9tYWlufHxwYXJhbXMua3dhcmdzLmRvbWFpbjtwYXJhbXMua3dhcmdzLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkc3x8cGFyYW1zLmt3YXJncy5maWVsZHM7cGFyYW1zLmt3YXJncy5vZmZzZXQ9b3B0aW9ucy5vZmZzZXR8fHBhcmFtcy5vZmZzZXR8fHBhcmFtcy5rd2FyZ3Mub2Zmc2V0O3BhcmFtcy5rd2FyZ3MubGltaXQ9b3B0aW9ucy5saW1pdHx8cGFyYW1zLmxpbWl0fHxwYXJhbXMua3dhcmdzLmxpbWl0O29yZGVyQnk9b3B0aW9ucy5vcmRlckJ5fHxwYXJhbXMub3JkZXJCeXx8cGFyYW1zLmt3YXJncy5vcmRlcjtwYXJhbXMua3dhcmdzLm9yZGVyPW9yZGVyQnk/dGhpcy5fc2VyaWFsaXplU29ydChvcmRlckJ5KTpvcmRlckJ5O30KaWYob3B0aW9ucy5yb3V0ZT09PScvd2ViL2RhdGFzZXQvc2VhcmNoX3JlYWQnKXtwYXJhbXMubW9kZWw9b3B0aW9ucy5tb2RlbHx8cGFyYW1zLm1vZGVsO3BhcmFtcy5kb21haW49b3B0aW9ucy5kb21haW58fHBhcmFtcy5kb21haW47cGFyYW1zLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkcztwYXJhbXMubGltaXQ9b3B0aW9ucy5saW1pdHx8cGFyYW1zLmxpbWl0O3BhcmFtcy5vZmZzZXQ9b3B0aW9ucy5vZmZzZXR8fHBhcmFtcy5vZmZzZXQ7b3JkZXJCeT1vcHRpb25zLm9yZGVyQnl8fHBhcmFtcy5vcmRlckJ5O3BhcmFtcy5zb3J0PW9yZGVyQnk/dGhpcy5fc2VyaWFsaXplU29ydChvcmRlckJ5KTpvcmRlckJ5O3BhcmFtcy5jb250ZXh0PW9wdGlvbnMuY29udGV4dHx8cGFyYW1zLmNvbnRleHR8fHt9O30KcmV0dXJue3JvdXRlOnJvdXRlLHBhcmFtczpKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpLH07fSxfc2VyaWFsaXplU29ydDpmdW5jdGlvbihvcmRlckJ5KXtyZXR1cm4gXy5tYXAob3JkZXJCeSxmdW5jdGlvbihvcmRlcil7cmV0dXJuIG9yZGVyLm5hbWUrKG9yZGVyLmFzYyE9PWZhbHNlPycgQVNDJzonIERFU0MnKTt9KS5qb2luKCcsICcpO30sfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9zZXJ2aWNlX21peGlucy5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5TZXJ2aWNlUHJvdmlkZXJNaXhpbicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIFNlcnZpY2VQcm92aWRlck1peGluPXtzZXJ2aWNlczp7fSxVbmRlcGxveWVkU2VydmljZXM6e30saW5pdDpmdW5jdGlvbihwYXJlbnQpe3ZhciBzZWxmPXRoaXM7dGhpcy5vbignY2FsbF9zZXJ2aWNlJyx0aGlzLHRoaXMuX2NhbGxfc2VydmljZS5iaW5kKHRoaXMpKTtfLmVhY2goY29yZS5zZXJ2aWNlUmVnaXN0cnkubWFwLGZ1bmN0aW9uKFNlcnZpY2Usc2VydmljZU5hbWUpe2lmKHNlcnZpY2VOYW1lIGluIHNlbGYuVW5kZXBsb3llZFNlcnZpY2VzKXt0aHJvdyBuZXcgRXJyb3IoJ1NlcnZpY2UgIicrc2VydmljZU5hbWUrJyIgaXMgYWxyZWFkeSBsb2FkZWQuJyk7fQpzZWxmLlVuZGVwbG95ZWRTZXJ2aWNlc1tzZXJ2aWNlTmFtZV09U2VydmljZTt9KTt0aGlzLl9kZXBsb3lTZXJ2aWNlcygpO2NvcmUuc2VydmljZVJlZ2lzdHJ5Lm9uQWRkKGZ1bmN0aW9uKHNlcnZpY2VOYW1lLFNlcnZpY2Upe2lmKHNlcnZpY2VOYW1lIGluIHNlbGYuc2VydmljZXN8fHNlcnZpY2VOYW1lIGluIHNlbGYuVW5kZXBsb3llZFNlcnZpY2VzKXt0aHJvdyBuZXcgRXJyb3IoJ1NlcnZpY2UgIicrc2VydmljZU5hbWUrJyIgaXMgYWxyZWFkeSBsb2FkZWQuJyk7fQpzZWxmLlVuZGVwbG95ZWRTZXJ2aWNlc1tzZXJ2aWNlTmFtZV09U2VydmljZTtzZWxmLl9kZXBsb3lTZXJ2aWNlcygpO30pO30sX2RlcGxveVNlcnZpY2VzOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgZG9uZT1mYWxzZTt3aGlsZSghZG9uZSl7dmFyIHNlcnZpY2VOYW1lPV8uZmluZEtleSh0aGlzLlVuZGVwbG95ZWRTZXJ2aWNlcyxmdW5jdGlvbihTZXJ2aWNlKXtyZXR1cm4hXy5zb21lKFNlcnZpY2UucHJvdG90eXBlLmRlcGVuZGVuY2llcyxmdW5jdGlvbihkZXBOYW1lKXtyZXR1cm4hc2VsZi5zZXJ2aWNlc1tkZXBOYW1lXTt9KTt9KTtpZihzZXJ2aWNlTmFtZSl7dmFyIHNlcnZpY2U9bmV3IHRoaXMuVW5kZXBsb3llZFNlcnZpY2VzW3NlcnZpY2VOYW1lXSh0aGlzKTt0aGlzLnNlcnZpY2VzW3NlcnZpY2VOYW1lXT1zZXJ2aWNlO2RlbGV0ZSB0aGlzLlVuZGVwbG95ZWRTZXJ2aWNlc1tzZXJ2aWNlTmFtZV07c2VydmljZS5zdGFydCgpO31lbHNle2RvbmU9dHJ1ZTt9fX0sX2NhbGxfc2VydmljZTpmdW5jdGlvbihldmVudCl7dmFyIGFyZ3M9ZXZlbnQuZGF0YS5hcmdzfHxbXTtpZihldmVudC5kYXRhLnNlcnZpY2U9PT0nYWpheCcmJmV2ZW50LmRhdGEubWV0aG9kPT09J3JwYycpe2FyZ3M9YXJncy5jb25jYXQoZXZlbnQudGFyZ2V0KTt9CnZhciBzZXJ2aWNlPXRoaXMuc2VydmljZXNbZXZlbnQuZGF0YS5zZXJ2aWNlXTt2YXIgcmVzdWx0PXNlcnZpY2VbZXZlbnQuZGF0YS5tZXRob2RdLmFwcGx5KHNlcnZpY2UsYXJncyk7ZXZlbnQuZGF0YS5jYWxsYmFjayhyZXN1bHQpO30sfTtyZXR1cm4gU2VydmljZVByb3ZpZGVyTWl4aW47fSk7b2Rvby5kZWZpbmUoJ3dlYi5TZXJ2aWNlc01peGluJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIHJwYz1yZXF1aXJlKCd3ZWIucnBjJyk7dmFyIFNlcnZpY2VzTWl4aW49e2NhbGw6ZnVuY3Rpb24oc2VydmljZSxtZXRob2Qpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTt2YXIgcmVzdWx0O3RoaXMudHJpZ2dlcl91cCgnY2FsbF9zZXJ2aWNlJyx7c2VydmljZTpzZXJ2aWNlLG1ldGhvZDptZXRob2QsYXJnczphcmdzLGNhbGxiYWNrOmZ1bmN0aW9uKHIpe3Jlc3VsdD1yO30sfSk7cmV0dXJuIHJlc3VsdDt9LF9ycGM6ZnVuY3Rpb24ocGFyYW1zLG9wdGlvbnMpe3ZhciBxdWVyeT1ycGMuYnVpbGRRdWVyeShwYXJhbXMpO3ZhciBwcm9tPXRoaXMuY2FsbCgnYWpheCcsJ3JwYycscXVlcnkucm91dGUscXVlcnkucGFyYW1zLG9wdGlvbnMsdGhpcyk7aWYoIXByb20pe3Byb209bmV3IFByb21pc2UoZnVuY3Rpb24oKXt9KTtwcm9tLmFib3J0PWZ1bmN0aW9uKCl7fTt9CnZhciBhYm9ydD1wcm9tLmFib3J0P3Byb20uYWJvcnQ6cHJvbS5yZWplY3Q7aWYoIWFib3J0KXt0aHJvdyBuZXcgRXJyb3IoImEgcnBjIHByb21pc2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGEgcmVqZWN0IGZ1bmN0aW9uIik7fQpwcm9tLmFib3J0PWFib3J0LmJpbmQocHJvbSk7cmV0dXJuIHByb207fSxsb2FkRmllbGRWaWV3OmZ1bmN0aW9uKG1vZGVsTmFtZSxjb250ZXh0LHZpZXdfaWQsdmlld190eXBlLG9wdGlvbnMpe3JldHVybiB0aGlzLmxvYWRWaWV3cyhtb2RlbE5hbWUsY29udGV4dCxbW3ZpZXdfaWQsdmlld190eXBlXV0sb3B0aW9ucykudGhlbihmdW5jdGlvbihyZXN1bHQpe3JldHVybiByZXN1bHRbdmlld190eXBlXTt9KTt9LGxvYWRWaWV3czpmdW5jdGlvbihtb2RlbE5hbWUsY29udGV4dCx2aWV3cyxvcHRpb25zKXt2YXIgc2VsZj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtzZWxmLnRyaWdnZXJfdXAoJ2xvYWRfdmlld3MnLHttb2RlbE5hbWU6bW9kZWxOYW1lLGNvbnRleHQ6Y29udGV4dCx2aWV3czp2aWV3cyxvcHRpb25zOm9wdGlvbnMsb25fc3VjY2VzczpyZXNvbHZlLH0pO30pO30sbG9hZEZpbHRlcnM6ZnVuY3Rpb24obW9kZWxOYW1lLGFjdGlvbklkLGNvbnRleHQpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtzZWxmLnRyaWdnZXJfdXAoJ2xvYWRfZmlsdGVycycse21vZGVsTmFtZTptb2RlbE5hbWUsYWN0aW9uSWQ6YWN0aW9uSWQsY29udGV4dDpjb250ZXh0LG9uX3N1Y2Nlc3M6cmVzb2x2ZSx9KTt9KTt9LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihmaWx0ZXIpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtzZWxmLnRyaWdnZXJfdXAoJ2NyZWF0ZV9maWx0ZXInLHtmaWx0ZXI6ZmlsdGVyLG9uX3N1Y2Nlc3M6cmVzb2x2ZSx9KTt9KTt9LGRlbGV0ZUZpbHRlcjpmdW5jdGlvbihmaWx0ZXJJZCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3NlbGYudHJpZ2dlcl91cCgnZGVsZXRlX2ZpbHRlcicse2ZpbHRlcklkOmZpbHRlcklkLG9uX3N1Y2Nlc3M6cmVzb2x2ZSx9KTt9KTt9LGdldFNlc3Npb246ZnVuY3Rpb24oKXt2YXIgc2Vzc2lvbjt0aGlzLnRyaWdnZXJfdXAoJ2dldF9zZXNzaW9uJyx7Y2FsbGJhY2s6ZnVuY3Rpb24ocmVzdWx0KXtzZXNzaW9uPXJlc3VsdDt9fSk7cmV0dXJuIHNlc3Npb247fSxkb19hY3Rpb246ZnVuY3Rpb24oYWN0aW9uLG9wdGlvbnMpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtzZWxmLnRyaWdnZXJfdXAoJ2RvX2FjdGlvbicse2FjdGlvbjphY3Rpb24sb3B0aW9uczpvcHRpb25zLG9uX3N1Y2Nlc3M6cmVzb2x2ZSxvbl9mYWlsOnJlamVjdCx9KTt9KTt9LGRpc3BsYXlOb3RpZmljYXRpb246ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIHRoaXMuY2FsbCgnbm90aWZpY2F0aW9uJywnbm90aWZ5JyxvcHRpb25zKTt9LGRvX25vdGlmeTpmdW5jdGlvbih0aXRsZSxtZXNzYWdlLHN0aWNreSxjbGFzc05hbWUpe3JldHVybiB0aGlzLmRpc3BsYXlOb3RpZmljYXRpb24oe3R5cGU6J3dhcm5pbmcnLHRpdGxlOnRpdGxlLG1lc3NhZ2U6bWVzc2FnZSxzdGlja3k6c3RpY2t5LGNsYXNzTmFtZTpjbGFzc05hbWUsfSk7fSxkb193YXJuOmZ1bmN0aW9uKHRpdGxlLG1lc3NhZ2Usc3RpY2t5LGNsYXNzTmFtZSl7Y29uc29sZS53YXJuKHRpdGxlLG1lc3NhZ2UpO3JldHVybiB0aGlzLmRpc3BsYXlOb3RpZmljYXRpb24oe3R5cGU6J2RhbmdlcicsdGl0bGU6dGl0bGUsbWVzc2FnZTptZXNzYWdlLHN0aWNreTpzdGlja3ksY2xhc3NOYW1lOmNsYXNzTmFtZSx9KTt9LH07cmV0dXJuIFNlcnZpY2VzTWl4aW47fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvc2Vzc2lvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5TZXNzaW9uJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGFqYXg9cmVxdWlyZSgnd2ViLmFqYXgnKTt2YXIgY29uY3VycmVuY3k9cmVxdWlyZSgnd2ViLmNvbmN1cnJlbmN5Jyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgbG9jYWxfc3RvcmFnZT1yZXF1aXJlKCd3ZWIubG9jYWxfc3RvcmFnZScpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgcXdlYj1jb3JlLnF3ZWI7dmFyIFNlc3Npb249Y29yZS5DbGFzcy5leHRlbmQobWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLHtpbml0OmZ1bmN0aW9uKHBhcmVudCxvcmlnaW4sb3B0aW9ucyl7bWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLmluaXQuY2FsbCh0aGlzKTt0aGlzLnNldFBhcmVudChwYXJlbnQpO29wdGlvbnM9b3B0aW9uc3x8e307dGhpcy5tb2R1bGVfbGlzdD0ob3B0aW9ucy5tb2R1bGVzJiZvcHRpb25zLm1vZHVsZXMuc2xpY2UoKSl8fCh3aW5kb3cub2Rvby5fbW9kdWxlcyYmd2luZG93Lm9kb28uX21vZHVsZXMuc2xpY2UoKSl8fFtdO3RoaXMuc2VydmVyPW51bGw7dGhpcy5hdm9pZF9yZWN1cnNpb249ZmFsc2U7dGhpcy51c2VfY29ycz1vcHRpb25zLnVzZV9jb3JzfHxmYWxzZTt0aGlzLnNldHVwKG9yaWdpbik7dGhpcy5uYW1lPSJpbnN0YW5jZTAiO3RoaXMucXdlYl9tdXRleD1uZXcgY29uY3VycmVuY3kuTXV0ZXgoKTt0aGlzLmN1cnJlbmNpZXM9e307dGhpcy5fZ3JvdXBzX2RlZj17fTtjb3JlLmJ1cy5vbignaW52YWxpZGF0ZV9zZXNzaW9uJyx0aGlzLHRoaXMuX29uSW52YWxpZGF0ZVNlc3Npb24pO30sc2V0dXA6ZnVuY3Rpb24ob3JpZ2luLG9wdGlvbnMpe3ZhciB3aW5kb3dfb3JpZ2luPWxvY2F0aW9uLnByb3RvY29sKyIvLyIrbG9jYXRpb24uaG9zdDtvcmlnaW49b3JpZ2luP29yaWdpbi5yZXBsYWNlKC9cLyskLywnJyk6d2luZG93X29yaWdpbjtpZighXy5pc1VuZGVmaW5lZCh0aGlzLm9yaWdpbikmJnRoaXMub3JpZ2luIT09b3JpZ2luKQp0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gYWxyZWFkeSBib3VuZCB0byAnK3RoaXMub3JpZ2luKTtlbHNlCnRoaXMub3JpZ2luPW9yaWdpbjt0aGlzLnByZWZpeD10aGlzLm9yaWdpbjt0aGlzLnNlcnZlcj10aGlzLm9yaWdpbjtvcHRpb25zPW9wdGlvbnN8fHt9O2lmKCd1c2VfY29ycydpbiBvcHRpb25zKXt0aGlzLnVzZV9jb3JzPW9wdGlvbnMudXNlX2NvcnM7fX0sc2Vzc2lvbl9iaW5kOmZ1bmN0aW9uKG9yaWdpbil7dGhpcy5zZXR1cChvcmlnaW4pO3F3ZWIuZGVmYXVsdF9kaWN0Ll9zPXRoaXMub3JpZ2luO3RoaXMudWlkPW51bGw7dGhpcy51c2VybmFtZT1udWxsO3RoaXMudXNlcl9jb250ZXh0PXt9O3RoaXMuZGI9bnVsbDt0aGlzLmFjdGl2ZV9pZD1udWxsO3JldHVybiB0aGlzLnNlc3Npb25faW5pdCgpO30sc2Vzc2lvbl9pbml0OmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgcHJvbT10aGlzLnNlc3Npb25fcmVsb2FkKCk7aWYodGhpcy5pc19mcm9udGVuZCl7cmV0dXJuIHByb20udGhlbihmdW5jdGlvbigpe3JldHVybiBzZWxmLmxvYWRfdHJhbnNsYXRpb25zKCk7fSk7fQpyZXR1cm4gcHJvbS50aGVuKGZ1bmN0aW9uKCl7dmFyIG1vZHVsZXM9c2VsZi5tb2R1bGVfbGlzdC5qb2luKCcsJyk7dmFyIHByb21pc2U9c2VsZi5sb2FkX3F3ZWIobW9kdWxlcyk7aWYoc2VsZi5zZXNzaW9uX2lzX3ZhbGlkKCkpe3JldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gc2VsZi5sb2FkX21vZHVsZXMoKTt9KTt9CnJldHVybiBQcm9taXNlLmFsbChbcHJvbWlzZSxzZWxmLnJwYygnL3dlYi93ZWJjbGllbnQvYm9vdHN0cmFwX3RyYW5zbGF0aW9ucycse21vZHM6c2VsZi5tb2R1bGVfbGlzdH0pLnRoZW4oZnVuY3Rpb24odHJhbnMpe190LmRhdGFiYXNlLnNldF9idW5kbGUodHJhbnMpO30pXSk7fSk7fSxzZXNzaW9uX2lzX3ZhbGlkOmZ1bmN0aW9uKCl7dmFyIGRiPSQuZGVwYXJhbS5xdWVyeXN0cmluZygpLmRiO2lmKGRiJiZ0aGlzLmRiIT09ZGIpe3JldHVybiBmYWxzZTt9CnJldHVybiEhdGhpcy51aWQ7fSxzZXNzaW9uX2F1dGhlbnRpY2F0ZTpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zZXNzaW9uX2F1dGhlbnRpY2F0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gc2VsZi5sb2FkX21vZHVsZXMoKTt9KTt9LF9zZXNzaW9uX2F1dGhlbnRpY2F0ZTpmdW5jdGlvbihkYixsb2dpbixwYXNzd29yZCl7dmFyIHNlbGY9dGhpczt2YXIgcGFyYW1zPXtkYjpkYixsb2dpbjpsb2dpbixwYXNzd29yZDpwYXNzd29yZH07cmV0dXJuIHRoaXMucnBjKCIvd2ViL3Nlc3Npb24vYXV0aGVudGljYXRlIixwYXJhbXMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZighcmVzdWx0LnVpZCl7cmV0dXJuIFByb21pc2UucmVqZWN0KCk7fQpfLmV4dGVuZChzZWxmLHJlc3VsdCk7fSk7fSxzZXNzaW9uX2xvZ291dDpmdW5jdGlvbigpeyQuYmJxLnJlbW92ZVN0YXRlKCk7cmV0dXJuIHRoaXMucnBjKCIvd2ViL3Nlc3Npb24vZGVzdHJveSIse30pO30sdXNlcl9oYXNfZ3JvdXA6ZnVuY3Rpb24oZ3JvdXApe2lmKCF0aGlzLnVpZCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7fQp2YXIgZGVmPXRoaXMuX2dyb3Vwc19kZWZbZ3JvdXBdO2lmKCFkZWYpe2RlZj10aGlzLl9ncm91cHNfZGVmW2dyb3VwXT10aGlzLnJwYygnL3dlYi9kYXRhc2V0L2NhbGxfa3cvcmVzLnVzZXJzL2hhc19ncm91cCcseyJtb2RlbCI6InJlcy51c2VycyIsIm1ldGhvZCI6Imhhc19ncm91cCIsImFyZ3MiOltncm91cF0sImt3YXJncyI6e319KTt9CnJldHVybiBkZWY7fSxnZXRfY29va2llOmZ1bmN0aW9uKG5hbWUpe2lmKCF0aGlzLm5hbWUpe3JldHVybiBudWxsO30KdmFyIG5hbWVFUT10aGlzLm5hbWUrJ3wnK25hbWUrJz0nO3ZhciBjb29raWVzPWRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO2Zvcih2YXIgaT0wO2k8Y29va2llcy5sZW5ndGg7KytpKXt2YXIgY29va2llPWNvb2tpZXNbaV0ucmVwbGFjZSgvXlxzKi8sJycpO2lmKGNvb2tpZS5pbmRleE9mKG5hbWVFUSk9PT0wKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCkpKTt9Y2F0Y2goZXJyKXt0aGlzLnNldF9jb29raWUobmFtZSwnJywtMSk7fX19CnJldHVybiBudWxsO30sc2V0X2Nvb2tpZTpmdW5jdGlvbihuYW1lLHZhbHVlLHR0bCl7aWYoIXRoaXMubmFtZSl7cmV0dXJuO30KdHRsPXR0bHx8MjQqNjAqNjAqMzY1O3V0aWxzLnNldF9jb29raWUodGhpcy5uYW1lKyd8JytuYW1lLHZhbHVlLHR0bCk7fSxsb2FkX21vZHVsZXM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciBtb2R1bGVzPW9kb28uX21vZHVsZXM7dmFyIGFsbF9tb2R1bGVzPV8udW5pcShzZWxmLm1vZHVsZV9saXN0LmNvbmNhdChtb2R1bGVzKSk7dmFyIHRvX2xvYWQ9Xy5kaWZmZXJlbmNlKG1vZHVsZXMsc2VsZi5tb2R1bGVfbGlzdCkuam9pbignLCcpO3RoaXMubW9kdWxlX2xpc3Q9YWxsX21vZHVsZXM7dmFyIGxvYWRlZD1Qcm9taXNlLnJlc29sdmUoc2VsZi5sb2FkX3RyYW5zbGF0aW9ucygpKTt2YXIgbG9jYWxlPSIvd2ViL3dlYmNsaWVudC9sb2NhbGUvIitzZWxmLnVzZXJfY29udGV4dC5sYW5nfHwnZW5fVVMnO3ZhciBmaWxlX2xpc3Q9W2xvY2FsZV07aWYodG9fbG9hZC5sZW5ndGgpe2xvYWRlZD1Qcm9taXNlLmFsbChbbG9hZGVkLHNlbGYucnBjKCcvd2ViL3dlYmNsaWVudC9jc3NsaXN0Jyx7bW9kczp0b19sb2FkfSkudGhlbihzZWxmLmxvYWRfY3NzLmJpbmQoc2VsZikpLHNlbGYubG9hZF9xd2ViKHRvX2xvYWQpLHNlbGYucnBjKCcvd2ViL3dlYmNsaWVudC9qc2xpc3QnLHttb2RzOnRvX2xvYWR9KS50aGVuKGZ1bmN0aW9uKGZpbGVzKXtmaWxlX2xpc3Q9ZmlsZV9saXN0LmNvbmNhdChmaWxlcyk7fSldKTt9CnJldHVybiBsb2FkZWQudGhlbihmdW5jdGlvbigpe3JldHVybiBzZWxmLmxvYWRfanMoZmlsZV9saXN0KTt9KTt9LGxvYWRfdHJhbnNsYXRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIF90LmRhdGFiYXNlLmxvYWRfdHJhbnNsYXRpb25zKHRoaXMsdGhpcy5tb2R1bGVfbGlzdCx0aGlzLnVzZXJfY29udGV4dC5sYW5nLHRoaXMudHJhbnNsYXRpb25VUkwpO30sbG9hZF9jc3M6ZnVuY3Rpb24oZmlsZXMpe3ZhciBzZWxmPXRoaXM7Xy5lYWNoKGZpbGVzLGZ1bmN0aW9uKGZpbGUpe2FqYXgubG9hZENTUyhzZWxmLnVybChmaWxlLG51bGwpKTt9KTt9LGxvYWRfanM6ZnVuY3Rpb24oZmlsZXMpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtpZihmaWxlcy5sZW5ndGghPT0wKXt2YXIgZmlsZT1maWxlcy5zaGlmdCgpO3ZhciB1cmw9c2VsZi51cmwoZmlsZSxudWxsKTthamF4LmxvYWRKUyh1cmwpLnRoZW4ocmVzb2x2ZSk7fWVsc2V7cmVzb2x2ZSgpO319KTt9LGxvYWRfcXdlYjpmdW5jdGlvbihtb2RzKXt2YXIgc2VsZj10aGlzO3ZhciBsb2NrPXRoaXMucXdlYl9tdXRleC5leGVjKGZ1bmN0aW9uKCl7dmFyIGNhY2hlSWQ9c2VsZi5jYWNoZV9oYXNoZXMmJnNlbGYuY2FjaGVfaGFzaGVzLnF3ZWI7dmFyIHJvdXRlPScvd2ViL3dlYmNsaWVudC9xd2ViLycrKGNhY2hlSWQ/Y2FjaGVJZDpEYXRlLm5vdygpKSsnP21vZHM9Jyttb2RzO3JldHVybiAkLmdldChyb3V0ZSkudGhlbihmdW5jdGlvbihkb2Mpe2lmKCFkb2Mpe3JldHVybjt9CnF3ZWIuYWRkX3RlbXBsYXRlKGRvYyk7fSk7fSk7cmV0dXJuIGxvY2s7fSxnZXRfY3VycmVuY3k6ZnVuY3Rpb24oY3VycmVuY3lfaWQpe3JldHVybiB0aGlzLmN1cnJlbmNpZXNbY3VycmVuY3lfaWRdO30sZ2V0X2ZpbGU6ZnVuY3Rpb24ob3B0aW9ucyl7b3B0aW9ucy5zZXNzaW9uPXRoaXM7cmV0dXJuIGFqYXguZ2V0X2ZpbGUob3B0aW9ucyk7fSxzZXNzaW9uX3JlbG9hZDpmdW5jdGlvbigpe3ZhciByZXN1bHQ9Xy5leHRlbmQoe30sd2luZG93Lm9kb28uc2Vzc2lvbl9pbmZvKTtfLmV4dGVuZCh0aGlzLHJlc3VsdCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30scnBjOmZ1bmN0aW9uKHVybCxwYXJhbXMsb3B0aW9ucyl7dmFyIHNlbGY9dGhpcztvcHRpb25zPV8uY2xvbmUob3B0aW9uc3x8e30pO29wdGlvbnMuaGVhZGVycz1fLmV4dGVuZCh7fSxvcHRpb25zLmhlYWRlcnMpO2lmKHBhcmFtcyYmcGFyYW1zLmt3YXJncyl7cGFyYW1zLmt3YXJncy5jb250ZXh0PV8uZXh0ZW5kKHBhcmFtcy5rd2FyZ3MuY29udGV4dHx8e30sdGhpcy51c2VyX2NvbnRleHQpO30KaWYoIV8uaXNTdHJpbmcodXJsKSl7Xy5leHRlbmQob3B0aW9ucyx1cmwpO3VybD11cmwudXJsO30KaWYoc2VsZi51c2VfY29ycyl7dXJsPXNlbGYudXJsKHVybCxudWxsKTt9CnJldHVybiBhamF4Lmpzb25ScGModXJsLCJjYWxsIixwYXJhbXMsb3B0aW9ucyk7fSx1cmw6ZnVuY3Rpb24ocGF0aCxwYXJhbXMpe3BhcmFtcz1fLmV4dGVuZChwYXJhbXN8fHt9KTt2YXIgcXM9JC5wYXJhbShwYXJhbXMpO2lmKHFzLmxlbmd0aD4wKQpxcz0iPyIrcXM7dmFyIHByZWZpeD1fLmFueShbJ2h0dHA6Ly8nLCdodHRwczovLycsJy8vJ10sZnVuY3Rpb24oZWwpe3JldHVybiBwYXRoLmxlbmd0aD49ZWwubGVuZ3RoJiZwYXRoLnNsaWNlKDAsZWwubGVuZ3RoKT09PWVsO30pPycnOnRoaXMucHJlZml4O3JldHVybiBwcmVmaXgrcGF0aCtxczt9LGdldFRaT2Zmc2V0OmZ1bmN0aW9uKGRhdGUpe3JldHVybi1uZXcgRGF0ZShkYXRlKS5nZXRUaW1lem9uZU9mZnNldCgpO30saW52YWxpZGF0ZUNhY2hlS2V5OmZ1bmN0aW9uKGtleSl7aWYodGhpcy5jYWNoZV9oYXNoZXMmJnRoaXMuY2FjaGVfaGFzaGVzW2tleV0pe3RoaXMuY2FjaGVfaGFzaGVzW2tleV09RGF0ZS5ub3coKTt9fSxyZWxvYWRDdXJyZW5jaWVzOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy5ycGMoJy93ZWIvc2Vzc2lvbi9nZXRfc2Vzc2lvbl9pbmZvJykudGhlbihmdW5jdGlvbihyZXN1bHQpe3NlbGYuY3VycmVuY2llcz1yZXN1bHQuY3VycmVuY2llczt9KTt9LHNldENvbXBhbmllczpmdW5jdGlvbihtYWluX2NvbXBhbnlfaWQsY29tcGFueV9pZHMpe3ZhciBoYXNoPSQuYmJxLmdldFN0YXRlKCkKaGFzaC5jaWRzPWNvbXBhbnlfaWRzLnNvcnQoZnVuY3Rpb24oYSxiKXtpZihhPT09bWFpbl9jb21wYW55X2lkKXtyZXR1cm4tMTt9ZWxzZSBpZihiPT09bWFpbl9jb21wYW55X2lkKXtyZXR1cm4gMTt9ZWxzZXtyZXR1cm4gYS1iO319KS5qb2luKCcsJyk7dXRpbHMuc2V0X2Nvb2tpZSgnY2lkcycsaGFzaC5jaWRzfHxTdHJpbmcobWFpbl9jb21wYW55X2lkKSk7JC5iYnEucHVzaFN0YXRlKHsnY2lkcyc6aGFzaC5jaWRzfSwwKTtsb2NhdGlvbi5yZWxvYWQoKTt9LF9vbkludmFsaWRhdGVTZXNzaW9uOmZ1bmN0aW9uKCl7dGhpcy51aWQ9ZmFsc2U7fSx9KTtyZXR1cm4gU2Vzc2lvbjt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9zZXNzaW9uX3N0b3JhZ2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuc2Vzc2lvblN0b3JhZ2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgUmFtU3RvcmFnZT1yZXF1aXJlKCd3ZWIuUmFtU3RvcmFnZScpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciBzdG9yYWdlO3ZhciBzZXNzaW9uU3RvcmFnZT13aW5kb3cuc2Vzc2lvblN0b3JhZ2U7dHJ5e3ZhciB1aWQ9bmV3IERhdGUoKTtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHVpZCx1aWQpO3Nlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0odWlkKTtzdG9yYWdlPShmdW5jdGlvbigpe3ZhciBzdG9yYWdlPU9iamVjdC5jcmVhdGUoXy5leHRlbmQoe2dldEl0ZW06c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbS5iaW5kKHNlc3Npb25TdG9yYWdlKSxzZXRJdGVtOnNlc3Npb25TdG9yYWdlLnNldEl0ZW0uYmluZChzZXNzaW9uU3RvcmFnZSkscmVtb3ZlSXRlbTpzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtLmJpbmQoc2Vzc2lvblN0b3JhZ2UpLGNsZWFyOnNlc3Npb25TdG9yYWdlLmNsZWFyLmJpbmQoc2Vzc2lvblN0b3JhZ2UpLH0sbWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluKSk7c3RvcmFnZS5pbml0KCk7JCh3aW5kb3cpLm9uKCdzdG9yYWdlJyxmdW5jdGlvbihlKXt2YXIga2V5PWUub3JpZ2luYWxFdmVudC5rZXk7dmFyIG5ld1ZhbHVlPWUub3JpZ2luYWxFdmVudC5uZXdWYWx1ZTt0cnl7SlNPTi5wYXJzZShuZXdWYWx1ZSk7aWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpPT09bmV3VmFsdWUpe3N0b3JhZ2UudHJpZ2dlcignc3RvcmFnZScse2tleTprZXksbmV3VmFsdWU6bmV3VmFsdWUsfSk7fX1jYXRjaChlcnJvcil7fX0pO3JldHVybiBzdG9yYWdlO30pKCk7fWNhdGNoKGV4Y2VwdGlvbil7Y29uc29sZS53YXJuKCdGYWlsIHRvIGxvYWQgc2Vzc2lvblN0b3JhZ2UnKTtzdG9yYWdlPW5ldyBSYW1TdG9yYWdlKCk7fQpyZXR1cm4gc3RvcmFnZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS90aW1lLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLnRpbWUnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdHJhbnNsYXRpb249cmVxdWlyZSgnd2ViLnRyYW5zbGF0aW9uJyk7dmFyIHV0aWxzPXJlcXVpcmUoJ3dlYi51dGlscycpO3ZhciBscGFkPXV0aWxzLmxwYWQ7dmFyIHJwYWQ9dXRpbHMucnBhZDt2YXIgX3Q9dHJhbnNsYXRpb24uX3Q7ZnVuY3Rpb24gZGF0ZV90b191dGMoayx2KXt2YXIgdmFsdWU9dGhpc1trXTtpZighKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpe3JldHVybiB2O30KcmV0dXJuIGRhdGV0aW1lX3RvX3N0cih2YWx1ZSk7fQpmdW5jdGlvbiBzdHJfdG9fZGF0ZXRpbWUoc3RyKXtpZighc3RyKXtyZXR1cm4gc3RyO30KdmFyIHJlZ2V4PS9eKFxkXGRcZFxkKS0oXGRcZCktKFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQoPzpcLihcZCspKT8pJC87dmFyIHJlcz1yZWdleC5leGVjKHN0cik7aWYoIXJlcyl7dGhyb3cgbmV3IEVycm9yKCInIitzdHIrIicgaXMgbm90IGEgdmFsaWQgZGF0ZXRpbWUiKTt9CnZhciB0bXA9bmV3IERhdGUoMjAwMCwwLDEpO3RtcC5zZXRVVENNb250aCgxOTcwKTt0bXAuc2V0VVRDTW9udGgoMCk7dG1wLnNldFVUQ0RhdGUoMSk7dG1wLnNldFVUQ0Z1bGxZZWFyKHBhcnNlRmxvYXQocmVzWzFdKSk7dG1wLnNldFVUQ01vbnRoKHBhcnNlRmxvYXQocmVzWzJdKS0xKTt0bXAuc2V0VVRDRGF0ZShwYXJzZUZsb2F0KHJlc1szXSkpO3RtcC5zZXRVVENIb3VycyhwYXJzZUZsb2F0KHJlc1s0XSkpO3RtcC5zZXRVVENNaW51dGVzKHBhcnNlRmxvYXQocmVzWzVdKSk7dG1wLnNldFVUQ1NlY29uZHMocGFyc2VGbG9hdChyZXNbNl0pKTt0bXAuc2V0VVRDU2Vjb25kcyhwYXJzZUZsb2F0KHJlc1s2XSkpO3RtcC5zZXRVVENNaWxsaXNlY29uZHMocGFyc2VGbG9hdCh1dGlscy5ycGFkKChyZXNbN118fCIiKS5zbGljZSgwLDMpLDMpKSk7cmV0dXJuIHRtcDt9CmZ1bmN0aW9uIHN0cl90b19kYXRlKHN0cil7aWYoIXN0cil7cmV0dXJuIHN0cjt9CnZhciByZWdleD0vXihcZFxkXGRcZCktKFxkXGQpLShcZFxkKSQvO3ZhciByZXM9cmVnZXguZXhlYyhzdHIpO2lmKCFyZXMpe3Rocm93IG5ldyBFcnJvcigiJyIrc3RyKyInIGlzIG5vdCBhIHZhbGlkIGRhdGUiKTt9CnZhciB0bXA9bmV3IERhdGUoMjAwMCwwLDEpO3RtcC5zZXRGdWxsWWVhcihwYXJzZUZsb2F0KHJlc1sxXSkpO3RtcC5zZXRNb250aChwYXJzZUZsb2F0KHJlc1syXSktMSk7dG1wLnNldERhdGUocGFyc2VGbG9hdChyZXNbM10pKTt0bXAuc2V0SG91cnMoMCk7dG1wLnNldE1pbnV0ZXMoMCk7dG1wLnNldFNlY29uZHMoMCk7cmV0dXJuIHRtcDt9CmZ1bmN0aW9uIHN0cl90b190aW1lKHN0cil7aWYoIXN0cil7cmV0dXJuIHN0cjt9CnZhciByZWdleD0vXihcZFxkKTooXGRcZCk6KFxkXGQoPzpcLihcZCspKT8pJC87dmFyIHJlcz1yZWdleC5leGVjKHN0cik7aWYoIXJlcyl7dGhyb3cgbmV3IEVycm9yKCInIitzdHIrIicgaXMgbm90IGEgdmFsaWQgdGltZSIpO30KdmFyIHRtcD1uZXcgRGF0ZSgpO3RtcC5zZXRGdWxsWWVhcigxOTcwKTt0bXAuc2V0TW9udGgoMCk7dG1wLnNldERhdGUoMSk7dG1wLnNldEhvdXJzKHBhcnNlRmxvYXQocmVzWzFdKSk7dG1wLnNldE1pbnV0ZXMocGFyc2VGbG9hdChyZXNbMl0pKTt0bXAuc2V0U2Vjb25kcyhwYXJzZUZsb2F0KHJlc1szXSkpO3RtcC5zZXRNaWxsaXNlY29uZHMocGFyc2VGbG9hdChycGFkKChyZXNbNF18fCIiKS5zbGljZSgwLDMpLDMpKSk7cmV0dXJuIHRtcDt9CmZ1bmN0aW9uIGRhdGV0aW1lX3RvX3N0cihvYmope2lmKCFvYmope3JldHVybiBmYWxzZTt9CnJldHVybiBscGFkKG9iai5nZXRVVENGdWxsWWVhcigpLDQpKyItIitscGFkKG9iai5nZXRVVENNb250aCgpKzEsMikrIi0iCitscGFkKG9iai5nZXRVVENEYXRlKCksMikrIiAiK2xwYWQob2JqLmdldFVUQ0hvdXJzKCksMikrIjoiCitscGFkKG9iai5nZXRVVENNaW51dGVzKCksMikrIjoiK2xwYWQob2JqLmdldFVUQ1NlY29uZHMoKSwyKTt9CmZ1bmN0aW9uIGRhdGVfdG9fc3RyKG9iail7aWYoIW9iail7cmV0dXJuIGZhbHNlO30KcmV0dXJuIGxwYWQob2JqLmdldEZ1bGxZZWFyKCksNCkrIi0iK2xwYWQob2JqLmdldE1vbnRoKCkrMSwyKSsiLSIKK2xwYWQob2JqLmdldERhdGUoKSwyKTt9CmZ1bmN0aW9uIHRpbWVfdG9fc3RyKG9iail7aWYoIW9iail7cmV0dXJuIGZhbHNlO30KcmV0dXJuIGxwYWQob2JqLmdldEhvdXJzKCksMikrIjoiK2xwYWQob2JqLmdldE1pbnV0ZXMoKSwyKSsiOiIKK2xwYWQob2JqLmdldFNlY29uZHMoKSwyKTt9CmZ1bmN0aW9uIGF1dG9fc3RyX3RvX2RhdGUodmFsdWUpe3RyeXtyZXR1cm4gc3RyX3RvX2RhdGV0aW1lKHZhbHVlKTt9Y2F0Y2goZSl7fQp0cnl7cmV0dXJuIHN0cl90b19kYXRlKHZhbHVlKTt9Y2F0Y2goZSl7fQp0cnl7cmV0dXJuIHN0cl90b190aW1lKHZhbHVlKTt9Y2F0Y2goZSl7fQp0aHJvdyBuZXcgRXJyb3IoXy5zdHIuc3ByaW50ZihfdCgiJyVzJyBpcyBub3QgYSBjb3JyZWN0IGRhdGUsIGRhdGV0aW1lIG5vciB0aW1lIiksdmFsdWUpKTt9CmZ1bmN0aW9uIGF1dG9fZGF0ZV90b19zdHIodmFsdWUsdHlwZSl7c3dpdGNoKHR5cGUpe2Nhc2UnZGF0ZXRpbWUnOnJldHVybiBkYXRldGltZV90b19zdHIodmFsdWUpO2Nhc2UnZGF0ZSc6cmV0dXJuIGRhdGVfdG9fc3RyKHZhbHVlKTtjYXNlJ3RpbWUnOnJldHVybiB0aW1lX3RvX3N0cih2YWx1ZSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXy5zdHIuc3ByaW50ZihfdCgiJyVzJyBpcyBub3QgY29udmVydGlibGUgdG8gZGF0ZSwgZGF0ZXRpbWUgbm9yIHRpbWUiKSx0eXBlKSk7fX0KZnVuY3Rpb24gc3RyZnRpbWVfdG9fbW9tZW50X2Zvcm1hdCh2YWx1ZSl7aWYoX25vcm1hbGl6ZV9mb3JtYXRfY2FjaGVbdmFsdWVdPT09dW5kZWZpbmVkKXt2YXIgaXNsZXR0ZXI9L1thLXpBLVpdLyxvdXRwdXQ9W10saW5Ub2tlbj1mYWxzZTtmb3IodmFyIGluZGV4PTA7aW5kZXg8dmFsdWUubGVuZ3RoOysraW5kZXgpe3ZhciBjaGFyYWN0ZXI9dmFsdWVbaW5kZXhdO2lmKGNoYXJhY3Rlcj09PSclJyYmIWluVG9rZW4pe2luVG9rZW49dHJ1ZTtjb250aW51ZTt9CmlmKGlzbGV0dGVyLnRlc3QoY2hhcmFjdGVyKSl7aWYoaW5Ub2tlbiYmbm9ybWFsaXplX2Zvcm1hdF90YWJsZVtjaGFyYWN0ZXJdIT09dW5kZWZpbmVkKXtjaGFyYWN0ZXI9bm9ybWFsaXplX2Zvcm1hdF90YWJsZVtjaGFyYWN0ZXJdO31lbHNle2NoYXJhY3Rlcj0nWycrY2hhcmFjdGVyKyddJzt9fQpvdXRwdXQucHVzaChjaGFyYWN0ZXIpO2luVG9rZW49ZmFsc2U7fQpfbm9ybWFsaXplX2Zvcm1hdF9jYWNoZVt2YWx1ZV09b3V0cHV0LmpvaW4oJycpO30KcmV0dXJuIF9ub3JtYWxpemVfZm9ybWF0X2NhY2hlW3ZhbHVlXTt9CmZ1bmN0aW9uIG1vbWVudF90b19zdHJmdGltZV9mb3JtYXQodmFsdWUpe3ZhciByZWdleD0vKE1NTU18RERERHxkZGRkfFlZWVl8TU1NfGRkZHxtbXxzc3x3d3xXV3xNTXxZWXxoaHxISHxERHxBfGQpL2c7cmV0dXJuIHZhbHVlLnJlcGxhY2UocmVnZXgsZnVuY3Rpb24odmFsKXtyZXR1cm4nJScraW52ZXJzZV9ub3JtYWxpemVfZm9ybWF0X3RhYmxlW3ZhbF07fSk7fQp2YXIgX25vcm1hbGl6ZV9mb3JtYXRfY2FjaGU9e307dmFyIG5vcm1hbGl6ZV9mb3JtYXRfdGFibGU9eydhJzonZGRkJywnQSc6J2RkZGQnLCdiJzonTU1NJywnQic6J01NTU0nLCdkJzonREQnLCdIJzonSEgnLCdJJzonaGgnLCdqJzonRERERCcsJ20nOidNTScsJ00nOidtbScsJ3AnOidBJywnUyc6J3NzJywnVSc6J3d3JywnVyc6J1dXJywndyc6J2QnLCd5JzonWVknLCdZJzonWVlZWScsJ2MnOidkZGQgTU1NIEQgSEg6bW06c3MgWVlZWScsJ3gnOidNTS9ERC9ZWScsJ1gnOidISDptbTpzcyd9O3ZhciBpbnZlcnNlX25vcm1hbGl6ZV9mb3JtYXRfdGFibGU9Xy5pbnZlcnQobm9ybWFsaXplX2Zvcm1hdF90YWJsZSk7ZnVuY3Rpb24gZ2V0TGFuZ0RhdGVGb3JtYXQoKXtyZXR1cm4gdGhpcy5zdHJmdGltZV90b19tb21lbnRfZm9ybWF0KF90LmRhdGFiYXNlLnBhcmFtZXRlcnMuZGF0ZV9mb3JtYXQpO30KZnVuY3Rpb24gZ2V0TGFuZ1RpbWVGb3JtYXQoKXtyZXR1cm4gdGhpcy5zdHJmdGltZV90b19tb21lbnRfZm9ybWF0KF90LmRhdGFiYXNlLnBhcmFtZXRlcnMudGltZV9mb3JtYXQpO30KZnVuY3Rpb24gZ2V0TGFuZ0RhdGV0aW1lRm9ybWF0KCl7cmV0dXJuIHRoaXMuc3RyZnRpbWVfdG9fbW9tZW50X2Zvcm1hdChfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLmRhdGVfZm9ybWF0KyIgIitfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLnRpbWVfZm9ybWF0KTt9CnJldHVybntkYXRlX3RvX3V0YzpkYXRlX3RvX3V0YyxzdHJfdG9fZGF0ZXRpbWU6c3RyX3RvX2RhdGV0aW1lLHN0cl90b19kYXRlOnN0cl90b19kYXRlLHN0cl90b190aW1lOnN0cl90b190aW1lLGRhdGV0aW1lX3RvX3N0cjpkYXRldGltZV90b19zdHIsZGF0ZV90b19zdHI6ZGF0ZV90b19zdHIsdGltZV90b19zdHI6dGltZV90b19zdHIsYXV0b19zdHJfdG9fZGF0ZTphdXRvX3N0cl90b19kYXRlLGF1dG9fZGF0ZV90b19zdHI6YXV0b19kYXRlX3RvX3N0cixzdHJmdGltZV90b19tb21lbnRfZm9ybWF0OnN0cmZ0aW1lX3RvX21vbWVudF9mb3JtYXQsbW9tZW50X3RvX3N0cmZ0aW1lX2Zvcm1hdDptb21lbnRfdG9fc3RyZnRpbWVfZm9ybWF0LGdldExhbmdEYXRlRm9ybWF0OmdldExhbmdEYXRlRm9ybWF0LGdldExhbmdUaW1lRm9ybWF0OmdldExhbmdUaW1lRm9ybWF0LGdldExhbmdEYXRldGltZUZvcm1hdDpnZXRMYW5nRGF0ZXRpbWVGb3JtYXQsfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS90cmFuc2xhdGlvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi50cmFuc2xhdGlvbicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTt2YXIgVHJhbnNsYXRpb25EYXRhQmFzZT1DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmRiPXt9O3RoaXMubXVsdGlfbGFuZz1mYWxzZQp0aGlzLnBhcmFtZXRlcnM9eyJkaXJlY3Rpb24iOidsdHInLCJkYXRlX2Zvcm1hdCI6JyVtLyVkLyVZJywidGltZV9mb3JtYXQiOiclSDolTTolUycsImdyb3VwaW5nIjpbXSwiZGVjaW1hbF9wb2ludCI6Ii4iLCJ0aG91c2FuZHNfc2VwIjoiLCIsImNvZGUiOiJlbl9VUyJ9O30sc2V0X2J1bmRsZTpmdW5jdGlvbih0cmFuc2xhdGlvbl9idW5kbGUpe3ZhciBzZWxmPXRoaXM7dGhpcy5tdWx0aV9sYW5nPXRyYW5zbGF0aW9uX2J1bmRsZS5tdWx0aV9sYW5nCnZhciBtb2R1bGVzPV8ua2V5cyh0cmFuc2xhdGlvbl9idW5kbGUubW9kdWxlcyk7bW9kdWxlcy5zb3J0KCk7aWYoXy5pbmNsdWRlKG1vZHVsZXMsIndlYiIpKXttb2R1bGVzPVsid2ViIl0uY29uY2F0KF8ud2l0aG91dChtb2R1bGVzLCJ3ZWIiKSk7fQpfLmVhY2gobW9kdWxlcyxmdW5jdGlvbihuYW1lKXtzZWxmLmFkZF9tb2R1bGVfdHJhbnNsYXRpb24odHJhbnNsYXRpb25fYnVuZGxlLm1vZHVsZXNbbmFtZV0pO30pO2lmKHRyYW5zbGF0aW9uX2J1bmRsZS5sYW5nX3BhcmFtZXRlcnMpe3RoaXMucGFyYW1ldGVycz10cmFuc2xhdGlvbl9idW5kbGUubGFuZ19wYXJhbWV0ZXJzO3RoaXMucGFyYW1ldGVycy5ncm91cGluZz1KU09OLnBhcnNlKHRoaXMucGFyYW1ldGVycy5ncm91cGluZyk7fX0sYWRkX21vZHVsZV90cmFuc2xhdGlvbjpmdW5jdGlvbihtb2Qpe3ZhciBzZWxmPXRoaXM7Xy5lYWNoKG1vZC5tZXNzYWdlcyxmdW5jdGlvbihtZXNzYWdlKXtzZWxmLmRiW21lc3NhZ2UuaWRdPW1lc3NhZ2Uuc3RyaW5nO30pO30sYnVpbGRfdHJhbnNsYXRpb25fZnVuY3Rpb246ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciBmY250PWZ1bmN0aW9uKHN0cil7dmFyIHRtcD1zZWxmLmdldChzdHIpO3JldHVybiB0bXA9PT11bmRlZmluZWQ/c3RyOnRtcDt9O2ZjbnQuZGF0YWJhc2U9dGhpcztyZXR1cm4gZmNudDt9LGdldDpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLmRiW2tleV07fSxsb2FkX3RyYW5zbGF0aW9uczpmdW5jdGlvbihzZXNzaW9uLG1vZHVsZXMsbGFuZyx1cmwpe3ZhciBzZWxmPXRoaXM7dmFyIGNhY2hlSWQ9c2Vzc2lvbi5jYWNoZV9oYXNoZXMmJnNlc3Npb24uY2FjaGVfaGFzaGVzLnRyYW5zbGF0aW9uczt1cmw9dXJsfHwnL3dlYi93ZWJjbGllbnQvdHJhbnNsYXRpb25zJzt1cmwrPScvJysoY2FjaGVJZD9jYWNoZUlkOkRhdGUubm93KCkpO3JldHVybiAkLmdldCh1cmwse21vZHM6bW9kdWxlcz9tb2R1bGVzLmpvaW4oJywnKTpudWxsLGxhbmc6bGFuZ3x8bnVsbCx9KS50aGVuKGZ1bmN0aW9uKHRyYW5zKXtzZWxmLnNldF9idW5kbGUodHJhbnMpO30pO319KTt2YXIgX3Q9bmV3IFRyYW5zbGF0aW9uRGF0YUJhc2UoKS5idWlsZF90cmFuc2xhdGlvbl9mdW5jdGlvbigpO3ZhciBfbHQ9ZnVuY3Rpb24ocyl7cmV0dXJue3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIF90KHMpO319O307e190KCdsZXNzIHRoYW4gYSBtaW51dGUgYWdvJyk7X3QoJ2Fib3V0IGEgbWludXRlIGFnbycpO190KCclZCBtaW51dGVzIGFnbycpO190KCdhYm91dCBhbiBob3VyIGFnbycpO190KCclZCBob3VycyBhZ28nKTtfdCgnYSBkYXkgYWdvJyk7X3QoJyVkIGRheXMgYWdvJyk7X3QoJ2Fib3V0IGEgbW9udGggYWdvJyk7X3QoJyVkIG1vbnRocyBhZ28nKTtfdCgnYWJvdXQgYSB5ZWFyIGFnbycpO190KCclZCB5ZWFycyBhZ28nKTt9CnJldHVybntfdDpfdCxfbHQ6X2x0LFRyYW5zbGF0aW9uRGF0YUJhc2U6VHJhbnNsYXRpb25EYXRhQmFzZSx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3V0aWxzLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLnV0aWxzJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIHRyYW5zbGF0aW9uPXJlcXVpcmUoJ3dlYi50cmFuc2xhdGlvbicpO3ZhciBfdD10cmFuc2xhdGlvbi5fdDt2YXIgaWQ9LTE7dmFyIGRpYWNyaXRpY3NNYXA9eydcdTAwNDEnOidBJywnXHUyNEI2JzonQScsJ1x1RkYyMSc6J0EnLCdcdTAwQzAnOidBJywnXHUwMEMxJzonQScsJ1x1MDBDMic6J0EnLCdcdTFFQTYnOidBJywnXHUxRUE0JzonQScsJ1x1MUVBQSc6J0EnLCdcdTFFQTgnOidBJywnXHUwMEMzJzonQScsJ1x1MDEwMCc6J0EnLCdcdTAxMDInOidBJywnXHUxRUIwJzonQScsJ1x1MUVBRSc6J0EnLCdcdTFFQjQnOidBJywnXHUxRUIyJzonQScsJ1x1MDIyNic6J0EnLCdcdTAxRTAnOidBJywnXHUwMEM0JzonQScsJ1x1MDFERSc6J0EnLCdcdTFFQTInOidBJywnXHUwMEM1JzonQScsJ1x1MDFGQSc6J0EnLCdcdTAxQ0QnOidBJywnXHUwMjAwJzonQScsJ1x1MDIwMic6J0EnLCdcdTFFQTAnOidBJywnXHUxRUFDJzonQScsJ1x1MUVCNic6J0EnLCdcdTFFMDAnOidBJywnXHUwMTA0JzonQScsJ1x1MDIzQSc6J0EnLCdcdTJDNkYnOidBJywnXHVBNzMyJzonQUEnLCdcdTAwQzYnOidBRScsJ1x1MDFGQyc6J0FFJywnXHUwMUUyJzonQUUnLCdcdUE3MzQnOidBTycsJ1x1QTczNic6J0FVJywnXHVBNzM4JzonQVYnLCdcdUE3M0EnOidBVicsJ1x1QTczQyc6J0FZJywnXHUwMDQyJzonQicsJ1x1MjRCNyc6J0InLCdcdUZGMjInOidCJywnXHUxRTAyJzonQicsJ1x1MUUwNCc6J0InLCdcdTFFMDYnOidCJywnXHUwMjQzJzonQicsJ1x1MDE4Mic6J0InLCdcdTAxODEnOidCJywnXHUwMDQzJzonQycsJ1x1MjRCOCc6J0MnLCdcdUZGMjMnOidDJywnXHUwMTA2JzonQycsJ1x1MDEwOCc6J0MnLCdcdTAxMEEnOidDJywnXHUwMTBDJzonQycsJ1x1MDBDNyc6J0MnLCdcdTFFMDgnOidDJywnXHUwMTg3JzonQycsJ1x1MDIzQic6J0MnLCdcdUE3M0UnOidDJywnXHUwMDQ0JzonRCcsJ1x1MjRCOSc6J0QnLCdcdUZGMjQnOidEJywnXHUxRTBBJzonRCcsJ1x1MDEwRSc6J0QnLCdcdTFFMEMnOidEJywnXHUxRTEwJzonRCcsJ1x1MUUxMic6J0QnLCdcdTFFMEUnOidEJywnXHUwMTEwJzonRCcsJ1x1MDE4Qic6J0QnLCdcdTAxOEEnOidEJywnXHUwMTg5JzonRCcsJ1x1QTc3OSc6J0QnLCdcdTAxRjEnOidEWicsJ1x1MDFDNCc6J0RaJywnXHUwMUYyJzonRHonLCdcdTAxQzUnOidEeicsJ1x1MDA0NSc6J0UnLCdcdTI0QkEnOidFJywnXHVGRjI1JzonRScsJ1x1MDBDOCc6J0UnLCdcdTAwQzknOidFJywnXHUwMENBJzonRScsJ1x1MUVDMCc6J0UnLCdcdTFFQkUnOidFJywnXHUxRUM0JzonRScsJ1x1MUVDMic6J0UnLCdcdTFFQkMnOidFJywnXHUwMTEyJzonRScsJ1x1MUUxNCc6J0UnLCdcdTFFMTYnOidFJywnXHUwMTE0JzonRScsJ1x1MDExNic6J0UnLCdcdTAwQ0InOidFJywnXHUxRUJBJzonRScsJ1x1MDExQSc6J0UnLCdcdTAyMDQnOidFJywnXHUwMjA2JzonRScsJ1x1MUVCOCc6J0UnLCdcdTFFQzYnOidFJywnXHUwMjI4JzonRScsJ1x1MUUxQyc6J0UnLCdcdTAxMTgnOidFJywnXHUxRTE4JzonRScsJ1x1MUUxQSc6J0UnLCdcdTAxOTAnOidFJywnXHUwMThFJzonRScsJ1x1MDA0Nic6J0YnLCdcdTI0QkInOidGJywnXHVGRjI2JzonRicsJ1x1MUUxRSc6J0YnLCdcdTAxOTEnOidGJywnXHVBNzdCJzonRicsJ1x1MDA0Nyc6J0cnLCdcdTI0QkMnOidHJywnXHVGRjI3JzonRycsJ1x1MDFGNCc6J0cnLCdcdTAxMUMnOidHJywnXHUxRTIwJzonRycsJ1x1MDExRSc6J0cnLCdcdTAxMjAnOidHJywnXHUwMUU2JzonRycsJ1x1MDEyMic6J0cnLCdcdTAxRTQnOidHJywnXHUwMTkzJzonRycsJ1x1QTdBMCc6J0cnLCdcdUE3N0QnOidHJywnXHVBNzdFJzonRycsJ1x1MDA0OCc6J0gnLCdcdTI0QkQnOidIJywnXHVGRjI4JzonSCcsJ1x1MDEyNCc6J0gnLCdcdTFFMjInOidIJywnXHUxRTI2JzonSCcsJ1x1MDIxRSc6J0gnLCdcdTFFMjQnOidIJywnXHUxRTI4JzonSCcsJ1x1MUUyQSc6J0gnLCdcdTAxMjYnOidIJywnXHUyQzY3JzonSCcsJ1x1MkM3NSc6J0gnLCdcdUE3OEQnOidIJywnXHUwMDQ5JzonSScsJ1x1MjRCRSc6J0knLCdcdUZGMjknOidJJywnXHUwMENDJzonSScsJ1x1MDBDRCc6J0knLCdcdTAwQ0UnOidJJywnXHUwMTI4JzonSScsJ1x1MDEyQSc6J0knLCdcdTAxMkMnOidJJywnXHUwMTMwJzonSScsJ1x1MDBDRic6J0knLCdcdTFFMkUnOidJJywnXHUxRUM4JzonSScsJ1x1MDFDRic6J0knLCdcdTAyMDgnOidJJywnXHUwMjBBJzonSScsJ1x1MUVDQSc6J0knLCdcdTAxMkUnOidJJywnXHUxRTJDJzonSScsJ1x1MDE5Nyc6J0knLCdcdTAwNEEnOidKJywnXHUyNEJGJzonSicsJ1x1RkYyQSc6J0onLCdcdTAxMzQnOidKJywnXHUwMjQ4JzonSicsJ1x1MDA0Qic6J0snLCdcdTI0QzAnOidLJywnXHVGRjJCJzonSycsJ1x1MUUzMCc6J0snLCdcdTAxRTgnOidLJywnXHUxRTMyJzonSycsJ1x1MDEzNic6J0snLCdcdTFFMzQnOidLJywnXHUwMTk4JzonSycsJ1x1MkM2OSc6J0snLCdcdUE3NDAnOidLJywnXHVBNzQyJzonSycsJ1x1QTc0NCc6J0snLCdcdUE3QTInOidLJywnXHUwMDRDJzonTCcsJ1x1MjRDMSc6J0wnLCdcdUZGMkMnOidMJywnXHUwMTNGJzonTCcsJ1x1MDEzOSc6J0wnLCdcdTAxM0QnOidMJywnXHUxRTM2JzonTCcsJ1x1MUUzOCc6J0wnLCdcdTAxM0InOidMJywnXHUxRTNDJzonTCcsJ1x1MUUzQSc6J0wnLCdcdTAxNDEnOidMJywnXHUwMjNEJzonTCcsJ1x1MkM2Mic6J0wnLCdcdTJDNjAnOidMJywnXHVBNzQ4JzonTCcsJ1x1QTc0Nic6J0wnLCdcdUE3ODAnOidMJywnXHUwMUM3JzonTEonLCdcdTAxQzgnOidMaicsJ1x1MDA0RCc6J00nLCdcdTI0QzInOidNJywnXHVGRjJEJzonTScsJ1x1MUUzRSc6J00nLCdcdTFFNDAnOidNJywnXHUxRTQyJzonTScsJ1x1MkM2RSc6J00nLCdcdTAxOUMnOidNJywnXHUwMDRFJzonTicsJ1x1MjRDMyc6J04nLCdcdUZGMkUnOidOJywnXHUwMUY4JzonTicsJ1x1MDE0Myc6J04nLCdcdTAwRDEnOidOJywnXHUxRTQ0JzonTicsJ1x1MDE0Nyc6J04nLCdcdTFFNDYnOidOJywnXHUwMTQ1JzonTicsJ1x1MUU0QSc6J04nLCdcdTFFNDgnOidOJywnXHUwMjIwJzonTicsJ1x1MDE5RCc6J04nLCdcdUE3OTAnOidOJywnXHVBN0E0JzonTicsJ1x1MDFDQSc6J05KJywnXHUwMUNCJzonTmonLCdcdTAwNEYnOidPJywnXHUyNEM0JzonTycsJ1x1RkYyRic6J08nLCdcdTAwRDInOidPJywnXHUwMEQzJzonTycsJ1x1MDBENCc6J08nLCdcdTFFRDInOidPJywnXHUxRUQwJzonTycsJ1x1MUVENic6J08nLCdcdTFFRDQnOidPJywnXHUwMEQ1JzonTycsJ1x1MUU0Qyc6J08nLCdcdTAyMkMnOidPJywnXHUxRTRFJzonTycsJ1x1MDE0Qyc6J08nLCdcdTFFNTAnOidPJywnXHUxRTUyJzonTycsJ1x1MDE0RSc6J08nLCdcdTAyMkUnOidPJywnXHUwMjMwJzonTycsJ1x1MDBENic6J08nLCdcdTAyMkEnOidPJywnXHUxRUNFJzonTycsJ1x1MDE1MCc6J08nLCdcdTAxRDEnOidPJywnXHUwMjBDJzonTycsJ1x1MDIwRSc6J08nLCdcdTAxQTAnOidPJywnXHUxRURDJzonTycsJ1x1MUVEQSc6J08nLCdcdTFFRTAnOidPJywnXHUxRURFJzonTycsJ1x1MUVFMic6J08nLCdcdTFFQ0MnOidPJywnXHUxRUQ4JzonTycsJ1x1MDFFQSc6J08nLCdcdTAxRUMnOidPJywnXHUwMEQ4JzonTycsJ1x1MDFGRSc6J08nLCdcdTAxODYnOidPJywnXHUwMTlGJzonTycsJ1x1QTc0QSc6J08nLCdcdUE3NEMnOidPJywnXHUwMUEyJzonT0knLCdcdUE3NEUnOidPTycsJ1x1MDIyMic6J09VJywnXHUwMDUwJzonUCcsJ1x1MjRDNSc6J1AnLCdcdUZGMzAnOidQJywnXHUxRTU0JzonUCcsJ1x1MUU1Nic6J1AnLCdcdTAxQTQnOidQJywnXHUyQzYzJzonUCcsJ1x1QTc1MCc6J1AnLCdcdUE3NTInOidQJywnXHVBNzU0JzonUCcsJ1x1MDA1MSc6J1EnLCdcdTI0QzYnOidRJywnXHVGRjMxJzonUScsJ1x1QTc1Nic6J1EnLCdcdUE3NTgnOidRJywnXHUwMjRBJzonUScsJ1x1MDA1Mic6J1InLCdcdTI0QzcnOidSJywnXHVGRjMyJzonUicsJ1x1MDE1NCc6J1InLCdcdTFFNTgnOidSJywnXHUwMTU4JzonUicsJ1x1MDIxMCc6J1InLCdcdTAyMTInOidSJywnXHUxRTVBJzonUicsJ1x1MUU1Qyc6J1InLCdcdTAxNTYnOidSJywnXHUxRTVFJzonUicsJ1x1MDI0Qyc6J1InLCdcdTJDNjQnOidSJywnXHVBNzVBJzonUicsJ1x1QTdBNic6J1InLCdcdUE3ODInOidSJywnXHUwMDUzJzonUycsJ1x1MjRDOCc6J1MnLCdcdUZGMzMnOidTJywnXHUxRTlFJzonUycsJ1x1MDE1QSc6J1MnLCdcdTFFNjQnOidTJywnXHUwMTVDJzonUycsJ1x1MUU2MCc6J1MnLCdcdTAxNjAnOidTJywnXHUxRTY2JzonUycsJ1x1MUU2Mic6J1MnLCdcdTFFNjgnOidTJywnXHUwMjE4JzonUycsJ1x1MDE1RSc6J1MnLCdcdTJDN0UnOidTJywnXHVBN0E4JzonUycsJ1x1QTc4NCc6J1MnLCdcdTAwNTQnOidUJywnXHUyNEM5JzonVCcsJ1x1RkYzNCc6J1QnLCdcdTFFNkEnOidUJywnXHUwMTY0JzonVCcsJ1x1MUU2Qyc6J1QnLCdcdTAyMUEnOidUJywnXHUwMTYyJzonVCcsJ1x1MUU3MCc6J1QnLCdcdTFFNkUnOidUJywnXHUwMTY2JzonVCcsJ1x1MDFBQyc6J1QnLCdcdTAxQUUnOidUJywnXHUwMjNFJzonVCcsJ1x1QTc4Nic6J1QnLCdcdUE3MjgnOidUWicsJ1x1MDA1NSc6J1UnLCdcdTI0Q0EnOidVJywnXHVGRjM1JzonVScsJ1x1MDBEOSc6J1UnLCdcdTAwREEnOidVJywnXHUwMERCJzonVScsJ1x1MDE2OCc6J1UnLCdcdTFFNzgnOidVJywnXHUwMTZBJzonVScsJ1x1MUU3QSc6J1UnLCdcdTAxNkMnOidVJywnXHUwMERDJzonVScsJ1x1MDFEQic6J1UnLCdcdTAxRDcnOidVJywnXHUwMUQ1JzonVScsJ1x1MDFEOSc6J1UnLCdcdTFFRTYnOidVJywnXHUwMTZFJzonVScsJ1x1MDE3MCc6J1UnLCdcdTAxRDMnOidVJywnXHUwMjE0JzonVScsJ1x1MDIxNic6J1UnLCdcdTAxQUYnOidVJywnXHUxRUVBJzonVScsJ1x1MUVFOCc6J1UnLCdcdTFFRUUnOidVJywnXHUxRUVDJzonVScsJ1x1MUVGMCc6J1UnLCdcdTFFRTQnOidVJywnXHUxRTcyJzonVScsJ1x1MDE3Mic6J1UnLCdcdTFFNzYnOidVJywnXHUxRTc0JzonVScsJ1x1MDI0NCc6J1UnLCdcdTAwNTYnOidWJywnXHUyNENCJzonVicsJ1x1RkYzNic6J1YnLCdcdTFFN0MnOidWJywnXHUxRTdFJzonVicsJ1x1MDFCMic6J1YnLCdcdUE3NUUnOidWJywnXHUwMjQ1JzonVicsJ1x1QTc2MCc6J1ZZJywnXHUwMDU3JzonVycsJ1x1MjRDQyc6J1cnLCdcdUZGMzcnOidXJywnXHUxRTgwJzonVycsJ1x1MUU4Mic6J1cnLCdcdTAxNzQnOidXJywnXHUxRTg2JzonVycsJ1x1MUU4NCc6J1cnLCdcdTFFODgnOidXJywnXHUyQzcyJzonVycsJ1x1MDA1OCc6J1gnLCdcdTI0Q0QnOidYJywnXHVGRjM4JzonWCcsJ1x1MUU4QSc6J1gnLCdcdTFFOEMnOidYJywnXHUwMDU5JzonWScsJ1x1MjRDRSc6J1knLCdcdUZGMzknOidZJywnXHUxRUYyJzonWScsJ1x1MDBERCc6J1knLCdcdTAxNzYnOidZJywnXHUxRUY4JzonWScsJ1x1MDIzMic6J1knLCdcdTFFOEUnOidZJywnXHUwMTc4JzonWScsJ1x1MUVGNic6J1knLCdcdTFFRjQnOidZJywnXHUwMUIzJzonWScsJ1x1MDI0RSc6J1knLCdcdTFFRkUnOidZJywnXHUwMDVBJzonWicsJ1x1MjRDRic6J1onLCdcdUZGM0EnOidaJywnXHUwMTc5JzonWicsJ1x1MUU5MCc6J1onLCdcdTAxN0InOidaJywnXHUwMTdEJzonWicsJ1x1MUU5Mic6J1onLCdcdTFFOTQnOidaJywnXHUwMUI1JzonWicsJ1x1MDIyNCc6J1onLCdcdTJDN0YnOidaJywnXHUyQzZCJzonWicsJ1x1QTc2Mic6J1onLCdcdTAwNjEnOidhJywnXHUyNEQwJzonYScsJ1x1RkY0MSc6J2EnLCdcdTFFOUEnOidhJywnXHUwMEUwJzonYScsJ1x1MDBFMSc6J2EnLCdcdTAwRTInOidhJywnXHUxRUE3JzonYScsJ1x1MUVBNSc6J2EnLCdcdTFFQUInOidhJywnXHUxRUE5JzonYScsJ1x1MDBFMyc6J2EnLCdcdTAxMDEnOidhJywnXHUwMTAzJzonYScsJ1x1MUVCMSc6J2EnLCdcdTFFQUYnOidhJywnXHUxRUI1JzonYScsJ1x1MUVCMyc6J2EnLCdcdTAyMjcnOidhJywnXHUwMUUxJzonYScsJ1x1MDBFNCc6J2EnLCdcdTAxREYnOidhJywnXHUxRUEzJzonYScsJ1x1MDBFNSc6J2EnLCdcdTAxRkInOidhJywnXHUwMUNFJzonYScsJ1x1MDIwMSc6J2EnLCdcdTAyMDMnOidhJywnXHUxRUExJzonYScsJ1x1MUVBRCc6J2EnLCdcdTFFQjcnOidhJywnXHUxRTAxJzonYScsJ1x1MDEwNSc6J2EnLCdcdTJDNjUnOidhJywnXHUwMjUwJzonYScsJ1x1QTczMyc6J2FhJywnXHUwMEU2JzonYWUnLCdcdTAxRkQnOidhZScsJ1x1MDFFMyc6J2FlJywnXHVBNzM1JzonYW8nLCdcdUE3MzcnOidhdScsJ1x1QTczOSc6J2F2JywnXHVBNzNCJzonYXYnLCdcdUE3M0QnOidheScsJ1x1MDA2Mic6J2InLCdcdTI0RDEnOidiJywnXHVGRjQyJzonYicsJ1x1MUUwMyc6J2InLCdcdTFFMDUnOidiJywnXHUxRTA3JzonYicsJ1x1MDE4MCc6J2InLCdcdTAxODMnOidiJywnXHUwMjUzJzonYicsJ1x1MDA2Myc6J2MnLCdcdTI0RDInOidjJywnXHVGRjQzJzonYycsJ1x1MDEwNyc6J2MnLCdcdTAxMDknOidjJywnXHUwMTBCJzonYycsJ1x1MDEwRCc6J2MnLCdcdTAwRTcnOidjJywnXHUxRTA5JzonYycsJ1x1MDE4OCc6J2MnLCdcdTAyM0MnOidjJywnXHVBNzNGJzonYycsJ1x1MjE4NCc6J2MnLCdcdTAwNjQnOidkJywnXHUyNEQzJzonZCcsJ1x1RkY0NCc6J2QnLCdcdTFFMEInOidkJywnXHUwMTBGJzonZCcsJ1x1MUUwRCc6J2QnLCdcdTFFMTEnOidkJywnXHUxRTEzJzonZCcsJ1x1MUUwRic6J2QnLCdcdTAxMTEnOidkJywnXHUwMThDJzonZCcsJ1x1MDI1Nic6J2QnLCdcdTAyNTcnOidkJywnXHVBNzdBJzonZCcsJ1x1MDFGMyc6J2R6JywnXHUwMUM2JzonZHonLCdcdTAwNjUnOidlJywnXHUyNEQ0JzonZScsJ1x1RkY0NSc6J2UnLCdcdTAwRTgnOidlJywnXHUwMEU5JzonZScsJ1x1MDBFQSc6J2UnLCdcdTFFQzEnOidlJywnXHUxRUJGJzonZScsJ1x1MUVDNSc6J2UnLCdcdTFFQzMnOidlJywnXHUxRUJEJzonZScsJ1x1MDExMyc6J2UnLCdcdTFFMTUnOidlJywnXHUxRTE3JzonZScsJ1x1MDExNSc6J2UnLCdcdTAxMTcnOidlJywnXHUwMEVCJzonZScsJ1x1MUVCQic6J2UnLCdcdTAxMUInOidlJywnXHUwMjA1JzonZScsJ1x1MDIwNyc6J2UnLCdcdTFFQjknOidlJywnXHUxRUM3JzonZScsJ1x1MDIyOSc6J2UnLCdcdTFFMUQnOidlJywnXHUwMTE5JzonZScsJ1x1MUUxOSc6J2UnLCdcdTFFMUInOidlJywnXHUwMjQ3JzonZScsJ1x1MDI1Qic6J2UnLCdcdTAxREQnOidlJywnXHUwMDY2JzonZicsJ1x1MjRENSc6J2YnLCdcdUZGNDYnOidmJywnXHUxRTFGJzonZicsJ1x1MDE5Mic6J2YnLCdcdUE3N0MnOidmJywnXHUwMDY3JzonZycsJ1x1MjRENic6J2cnLCdcdUZGNDcnOidnJywnXHUwMUY1JzonZycsJ1x1MDExRCc6J2cnLCdcdTFFMjEnOidnJywnXHUwMTFGJzonZycsJ1x1MDEyMSc6J2cnLCdcdTAxRTcnOidnJywnXHUwMTIzJzonZycsJ1x1MDFFNSc6J2cnLCdcdTAyNjAnOidnJywnXHVBN0ExJzonZycsJ1x1MUQ3OSc6J2cnLCdcdUE3N0YnOidnJywnXHUwMDY4JzonaCcsJ1x1MjRENyc6J2gnLCdcdUZGNDgnOidoJywnXHUwMTI1JzonaCcsJ1x1MUUyMyc6J2gnLCdcdTFFMjcnOidoJywnXHUwMjFGJzonaCcsJ1x1MUUyNSc6J2gnLCdcdTFFMjknOidoJywnXHUxRTJCJzonaCcsJ1x1MUU5Nic6J2gnLCdcdTAxMjcnOidoJywnXHUyQzY4JzonaCcsJ1x1MkM3Nic6J2gnLCdcdTAyNjUnOidoJywnXHUwMTk1JzonaHYnLCdcdTAwNjknOidpJywnXHUyNEQ4JzonaScsJ1x1RkY0OSc6J2knLCdcdTAwRUMnOidpJywnXHUwMEVEJzonaScsJ1x1MDBFRSc6J2knLCdcdTAxMjknOidpJywnXHUwMTJCJzonaScsJ1x1MDEyRCc6J2knLCdcdTAwRUYnOidpJywnXHUxRTJGJzonaScsJ1x1MUVDOSc6J2knLCdcdTAxRDAnOidpJywnXHUwMjA5JzonaScsJ1x1MDIwQic6J2knLCdcdTFFQ0InOidpJywnXHUwMTJGJzonaScsJ1x1MUUyRCc6J2knLCdcdTAyNjgnOidpJywnXHUwMTMxJzonaScsJ1x1MDA2QSc6J2onLCdcdTI0RDknOidqJywnXHVGRjRBJzonaicsJ1x1MDEzNSc6J2onLCdcdTAxRjAnOidqJywnXHUwMjQ5JzonaicsJ1x1MDA2Qic6J2snLCdcdTI0REEnOidrJywnXHVGRjRCJzonaycsJ1x1MUUzMSc6J2snLCdcdTAxRTknOidrJywnXHUxRTMzJzonaycsJ1x1MDEzNyc6J2snLCdcdTFFMzUnOidrJywnXHUwMTk5JzonaycsJ1x1MkM2QSc6J2snLCdcdUE3NDEnOidrJywnXHVBNzQzJzonaycsJ1x1QTc0NSc6J2snLCdcdUE3QTMnOidrJywnXHUwMDZDJzonbCcsJ1x1MjREQic6J2wnLCdcdUZGNEMnOidsJywnXHUwMTQwJzonbCcsJ1x1MDEzQSc6J2wnLCdcdTAxM0UnOidsJywnXHUxRTM3JzonbCcsJ1x1MUUzOSc6J2wnLCdcdTAxM0MnOidsJywnXHUxRTNEJzonbCcsJ1x1MUUzQic6J2wnLCdcdTAxN0YnOidsJywnXHUwMTQyJzonbCcsJ1x1MDE5QSc6J2wnLCdcdTAyNkInOidsJywnXHUyQzYxJzonbCcsJ1x1QTc0OSc6J2wnLCdcdUE3ODEnOidsJywnXHVBNzQ3JzonbCcsJ1x1MDFDOSc6J2xqJywnXHUwMDZEJzonbScsJ1x1MjREQyc6J20nLCdcdUZGNEQnOidtJywnXHUxRTNGJzonbScsJ1x1MUU0MSc6J20nLCdcdTFFNDMnOidtJywnXHUwMjcxJzonbScsJ1x1MDI2Ric6J20nLCdcdTAwNkUnOiduJywnXHUyNEREJzonbicsJ1x1RkY0RSc6J24nLCdcdTAxRjknOiduJywnXHUwMTQ0JzonbicsJ1x1MDBGMSc6J24nLCdcdTFFNDUnOiduJywnXHUwMTQ4JzonbicsJ1x1MUU0Nyc6J24nLCdcdTAxNDYnOiduJywnXHUxRTRCJzonbicsJ1x1MUU0OSc6J24nLCdcdTAxOUUnOiduJywnXHUwMjcyJzonbicsJ1x1MDE0OSc6J24nLCdcdUE3OTEnOiduJywnXHVBN0E1JzonbicsJ1x1MDFDQyc6J25qJywnXHUwMDZGJzonbycsJ1x1MjRERSc6J28nLCdcdUZGNEYnOidvJywnXHUwMEYyJzonbycsJ1x1MDBGMyc6J28nLCdcdTAwRjQnOidvJywnXHUxRUQzJzonbycsJ1x1MUVEMSc6J28nLCdcdTFFRDcnOidvJywnXHUxRUQ1JzonbycsJ1x1MDBGNSc6J28nLCdcdTFFNEQnOidvJywnXHUwMjJEJzonbycsJ1x1MUU0Ric6J28nLCdcdTAxNEQnOidvJywnXHUxRTUxJzonbycsJ1x1MUU1Myc6J28nLCdcdTAxNEYnOidvJywnXHUwMjJGJzonbycsJ1x1MDIzMSc6J28nLCdcdTAwRjYnOidvJywnXHUwMjJCJzonbycsJ1x1MUVDRic6J28nLCdcdTAxNTEnOidvJywnXHUwMUQyJzonbycsJ1x1MDIwRCc6J28nLCdcdTAyMEYnOidvJywnXHUwMUExJzonbycsJ1x1MUVERCc6J28nLCdcdTFFREInOidvJywnXHUxRUUxJzonbycsJ1x1MUVERic6J28nLCdcdTFFRTMnOidvJywnXHUxRUNEJzonbycsJ1x1MUVEOSc6J28nLCdcdTAxRUInOidvJywnXHUwMUVEJzonbycsJ1x1MDBGOCc6J28nLCdcdTAxRkYnOidvJywnXHUwMjU0JzonbycsJ1x1QTc0Qic6J28nLCdcdUE3NEQnOidvJywnXHUwMjc1JzonbycsJ1x1MDFBMyc6J29pJywnXHUwMjIzJzonb3UnLCdcdUE3NEYnOidvbycsJ1x1MDA3MCc6J3AnLCdcdTI0REYnOidwJywnXHVGRjUwJzoncCcsJ1x1MUU1NSc6J3AnLCdcdTFFNTcnOidwJywnXHUwMUE1JzoncCcsJ1x1MUQ3RCc6J3AnLCdcdUE3NTEnOidwJywnXHVBNzUzJzoncCcsJ1x1QTc1NSc6J3AnLCdcdTAwNzEnOidxJywnXHUyNEUwJzoncScsJ1x1RkY1MSc6J3EnLCdcdTAyNEInOidxJywnXHVBNzU3JzoncScsJ1x1QTc1OSc6J3EnLCdcdTAwNzInOidyJywnXHUyNEUxJzoncicsJ1x1RkY1Mic6J3InLCdcdTAxNTUnOidyJywnXHUxRTU5JzoncicsJ1x1MDE1OSc6J3InLCdcdTAyMTEnOidyJywnXHUwMjEzJzoncicsJ1x1MUU1Qic6J3InLCdcdTFFNUQnOidyJywnXHUwMTU3JzoncicsJ1x1MUU1Ric6J3InLCdcdTAyNEQnOidyJywnXHUwMjdEJzoncicsJ1x1QTc1Qic6J3InLCdcdUE3QTcnOidyJywnXHVBNzgzJzoncicsJ1x1MDA3Myc6J3MnLCdcdTI0RTInOidzJywnXHVGRjUzJzoncycsJ1x1MDBERic6J3MnLCdcdTAxNUInOidzJywnXHUxRTY1JzoncycsJ1x1MDE1RCc6J3MnLCdcdTFFNjEnOidzJywnXHUwMTYxJzoncycsJ1x1MUU2Nyc6J3MnLCdcdTFFNjMnOidzJywnXHUxRTY5JzoncycsJ1x1MDIxOSc6J3MnLCdcdTAxNUYnOidzJywnXHUwMjNGJzoncycsJ1x1QTdBOSc6J3MnLCdcdUE3ODUnOidzJywnXHUxRTlCJzoncycsJ1x1MDA3NCc6J3QnLCdcdTI0RTMnOid0JywnXHVGRjU0JzondCcsJ1x1MUU2Qic6J3QnLCdcdTFFOTcnOid0JywnXHUwMTY1JzondCcsJ1x1MUU2RCc6J3QnLCdcdTAyMUInOid0JywnXHUwMTYzJzondCcsJ1x1MUU3MSc6J3QnLCdcdTFFNkYnOid0JywnXHUwMTY3JzondCcsJ1x1MDFBRCc6J3QnLCdcdTAyODgnOid0JywnXHUyQzY2JzondCcsJ1x1QTc4Nyc6J3QnLCdcdUE3MjknOid0eicsJ1x1MDA3NSc6J3UnLCdcdTI0RTQnOid1JywnXHVGRjU1JzondScsJ1x1MDBGOSc6J3UnLCdcdTAwRkEnOid1JywnXHUwMEZCJzondScsJ1x1MDE2OSc6J3UnLCdcdTFFNzknOid1JywnXHUwMTZCJzondScsJ1x1MUU3Qic6J3UnLCdcdTAxNkQnOid1JywnXHUwMEZDJzondScsJ1x1MDFEQyc6J3UnLCdcdTAxRDgnOid1JywnXHUwMUQ2JzondScsJ1x1MDFEQSc6J3UnLCdcdTFFRTcnOid1JywnXHUwMTZGJzondScsJ1x1MDE3MSc6J3UnLCdcdTAxRDQnOid1JywnXHUwMjE1JzondScsJ1x1MDIxNyc6J3UnLCdcdTAxQjAnOid1JywnXHUxRUVCJzondScsJ1x1MUVFOSc6J3UnLCdcdTFFRUYnOid1JywnXHUxRUVEJzondScsJ1x1MUVGMSc6J3UnLCdcdTFFRTUnOid1JywnXHUxRTczJzondScsJ1x1MDE3Myc6J3UnLCdcdTFFNzcnOid1JywnXHUxRTc1JzondScsJ1x1MDI4OSc6J3UnLCdcdTAwNzYnOid2JywnXHUyNEU1JzondicsJ1x1RkY1Nic6J3YnLCdcdTFFN0QnOid2JywnXHUxRTdGJzondicsJ1x1MDI4Qic6J3YnLCdcdUE3NUYnOid2JywnXHUwMjhDJzondicsJ1x1QTc2MSc6J3Z5JywnXHUwMDc3JzondycsJ1x1MjRFNic6J3cnLCdcdUZGNTcnOid3JywnXHUxRTgxJzondycsJ1x1MUU4Myc6J3cnLCdcdTAxNzUnOid3JywnXHUxRTg3JzondycsJ1x1MUU4NSc6J3cnLCdcdTFFOTgnOid3JywnXHUxRTg5JzondycsJ1x1MkM3Myc6J3cnLCdcdTAwNzgnOid4JywnXHUyNEU3JzoneCcsJ1x1RkY1OCc6J3gnLCdcdTFFOEInOid4JywnXHUxRThEJzoneCcsJ1x1MDA3OSc6J3knLCdcdTI0RTgnOid5JywnXHVGRjU5JzoneScsJ1x1MUVGMyc6J3knLCdcdTAwRkQnOid5JywnXHUwMTc3JzoneScsJ1x1MUVGOSc6J3knLCdcdTAyMzMnOid5JywnXHUxRThGJzoneScsJ1x1MDBGRic6J3knLCdcdTFFRjcnOid5JywnXHUxRTk5JzoneScsJ1x1MUVGNSc6J3knLCdcdTAxQjQnOid5JywnXHUwMjRGJzoneScsJ1x1MUVGRic6J3knLCdcdTAwN0EnOid6JywnXHUyNEU5JzoneicsJ1x1RkY1QSc6J3onLCdcdTAxN0EnOid6JywnXHUxRTkxJzoneicsJ1x1MDE3Qyc6J3onLCdcdTAxN0UnOid6JywnXHUxRTkzJzoneicsJ1x1MUU5NSc6J3onLCdcdTAxQjYnOid6JywnXHUwMjI1JzoneicsJ1x1MDI0MCc6J3onLCdcdTJDNkMnOid6JywnXHVBNzYzJzoneicsfTt2YXIgdXRpbHM9e2Fzc2VydDpmdW5jdGlvbihib29sKXtpZighYm9vbCl7dGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb25FcnJvciIpO319LGJpbmFyeVRvQmluc2l6ZTpmdW5jdGlvbih2YWx1ZSl7aWYoIXRoaXMuaXNfYmluX3NpemUodmFsdWUpKXtyZXR1cm4gdGhpcy5odW1hbl9zaXplKHZhbHVlLmxlbmd0aC8xLjM3KTt9CnJldHVybiB2YWx1ZTt9LGNvbmZpbmU6ZnVuY3Rpb24odmFsLG1pbixtYXgpe3JldHVybiBNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHZhbCkpO30sZmxvYXRfaXNfemVybzpmdW5jdGlvbih2YWx1ZSxkZWNpbWFscyl7dmFyIGVwc2lsb249TWF0aC5wb3coMTAsLWRlY2ltYWxzKTtyZXR1cm4gTWF0aC5hYnModXRpbHMucm91bmRfcHJlY2lzaW9uKHZhbHVlLGVwc2lsb24pKTxlcHNpbG9uO30sZ2VuZXJhdGVJRDpmdW5jdGlvbigpe3JldHVybisraWQ7fSxnZXRfY29va2llOmZ1bmN0aW9uKGNfbmFtZSl7dmFyIGNvb2tpZXM9ZG9jdW1lbnQuY29va2llP2RvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKTpbXTtmb3IodmFyIGk9MCxsPWNvb2tpZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBwYXJ0cz1jb29raWVzW2ldLnNwbGl0KCc9Jyk7dmFyIG5hbWU9cGFydHMuc2hpZnQoKTt2YXIgY29va2llPXBhcnRzLmpvaW4oJz0nKTtpZihjX25hbWUmJmNfbmFtZT09PW5hbWUpe3JldHVybiBjb29raWU7fX0KcmV0dXJuIiI7fSxnZXREYXRhVVJMRnJvbUZpbGU6ZnVuY3Rpb24oZmlsZSl7aWYoIWZpbGUpe3JldHVybiBQcm9taXNlLnJlamVjdCgpO30KcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt2YXIgcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7cmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGZ1bmN0aW9uKCl7cmVzb2x2ZShyZWFkZXIucmVzdWx0KTt9KTtyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLHJlamVjdCk7cmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxyZWplY3QpO3JlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO30pO30saHVtYW5fbnVtYmVyOmZ1bmN0aW9uKG51bWJlcixkZWNpbWFscyxtaW5EaWdpdHMsZm9ybWF0dGVyQ2FsbGJhY2spe251bWJlcj1NYXRoLnJvdW5kKG51bWJlcik7ZGVjaW1hbHM9ZGVjaW1hbHN8MDttaW5EaWdpdHM9bWluRGlnaXRzfHwxO2Zvcm1hdHRlckNhbGxiYWNrPWZvcm1hdHRlckNhbGxiYWNrfHx1dGlscy5pbnNlcnRfdGhvdXNhbmRfc2Vwczt2YXIgZDI9TWF0aC5wb3coMTAsZGVjaW1hbHMpO3ZhciB2YWw9X3QoJ2tNR1RQRScpO3ZhciBzeW1ib2w9Jyc7dmFyIG51bWJlck1hZ25pdHVkZT1udW1iZXIudG9FeHBvbmVudGlhbCgpLnNwbGl0KCdlJylbMV07aWYobnVtYmVyTWFnbml0dWRlPj0yMSl7bnVtYmVyPU1hdGgucm91bmQobnVtYmVyKk1hdGgucG93KDEwLGRlY2ltYWxzLW51bWJlck1hZ25pdHVkZSkpL2QyO3JldHVybiBudW1iZXIrJ2UnK251bWJlck1hZ25pdHVkZTt9CmZvcih2YXIgaT12YWwubGVuZ3RoO2k+MDtpLS0pe3ZhciBzPU1hdGgucG93KDEwLGkqMyk7aWYoczw9bnVtYmVyL01hdGgucG93KDEwLG1pbkRpZ2l0cy0xKSl7bnVtYmVyPU1hdGgucm91bmQobnVtYmVyKmQyL3MpL2QyO3N5bWJvbD12YWxbaS0xXTticmVhazt9fQpyZXR1cm4gZm9ybWF0dGVyQ2FsbGJhY2soJycrbnVtYmVyKStzeW1ib2w7fSxodW1hbl9zaXplOmZ1bmN0aW9uKHNpemUpe3ZhciB1bml0cz1fdCgiQnl0ZXN8S2J8TWJ8R2J8VGJ8UGJ8RWJ8WmJ8WWIiKS5zcGxpdCgnfCcpO3ZhciBpPTA7d2hpbGUoc2l6ZT49MTAyNCl7c2l6ZS89MTAyNDsrK2k7fQpyZXR1cm4gc2l6ZS50b0ZpeGVkKDIpKycgJyt1bml0c1tpXS50cmltKCk7fSxpbnNlcnRfdGhvdXNhbmRfc2VwczpmdW5jdGlvbihudW0pe3ZhciBuZWdhdGl2ZT1udW1bMF09PT0nLSc7bnVtPShuZWdhdGl2ZT9udW0uc2xpY2UoMSk6bnVtKTtyZXR1cm4obmVnYXRpdmU/Jy0nOicnKSt1dGlscy5pbnRlcnNwZXJzZShudW0sX3QuZGF0YWJhc2UucGFyYW1ldGVycy5ncm91cGluZyxfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLnRob3VzYW5kc19zZXApO30saW50ZXJzcGVyc2U6ZnVuY3Rpb24oc3RyLGluZGljZXMsc2VwYXJhdG9yKXtzZXBhcmF0b3I9c2VwYXJhdG9yfHwnJzt2YXIgcmVzdWx0PVtdLGxhc3Q9c3RyLmxlbmd0aDtmb3IodmFyIGk9MDtpPGluZGljZXMubGVuZ3RoOysraSl7dmFyIHNlY3Rpb249aW5kaWNlc1tpXTtpZihzZWN0aW9uPT09LTF8fGxhc3Q8PTApe2JyZWFrO31lbHNlIGlmKHNlY3Rpb249PT0wJiZpPT09MCl7YnJlYWs7fWVsc2UgaWYoc2VjdGlvbj09PTApe3NlY3Rpb249aW5kaWNlc1stLWldO30KcmVzdWx0LnB1c2goc3RyLnN1YnN0cmluZyhsYXN0LXNlY3Rpb24sbGFzdCkpO2xhc3QtPXNlY3Rpb247fQp2YXIgcz1zdHIuc3Vic3RyaW5nKDAsbGFzdCk7aWYocyl7cmVzdWx0LnB1c2gocyk7fQpyZXR1cm4gcmVzdWx0LnJldmVyc2UoKS5qb2luKHNlcGFyYXRvcik7fSxpbnRvOmZ1bmN0aW9uKG9iamVjdCxwYXRoKXtpZighXyhwYXRoKS5pc0FycmF5KCkpe3BhdGg9cGF0aC5zcGxpdCgnLicpO30KZm9yKHZhciBpPTA7aTxwYXRoLmxlbmd0aDtpKyspe29iamVjdD1vYmplY3RbcGF0aFtpXV07fQpyZXR1cm4gb2JqZWN0O30saXNfYmluX3NpemU6ZnVuY3Rpb24odil7cmV0dXJuKC9eXGQrKFwuXGQqKT8gW14wLTldKyQvKS50ZXN0KHYpO30saXNWYWxpZEFuY2hvcjpmdW5jdGlvbihhbmNob3Ipe3JldHVybi9eI1tcdy1dKyQvLnRlc3QoYW5jaG9yKTt9LGpzb25fbm9kZV90b194bWw6ZnVuY3Rpb24obm9kZSxodW1hbl9yZWFkYWJsZSxpbmRlbnQpe2luZGVudD1pbmRlbnR8fDA7dmFyIHNpbmRlbnQ9KGh1bWFuX3JlYWRhYmxlPyhuZXcgQXJyYXkoaW5kZW50KzEpLmpvaW4oJ1x0JykpOicnKSxyPXNpbmRlbnQrJzwnK25vZGUudGFnLGNyPWh1bWFuX3JlYWRhYmxlPydcbic6Jyc7aWYodHlwZW9mKG5vZGUpPT09J3N0cmluZycpe3JldHVybiBzaW5kZW50K25vZGUucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7fWVsc2UgaWYodHlwZW9mKG5vZGUudGFnKSE9PSdzdHJpbmcnfHwhbm9kZS5jaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5fHwhbm9kZS5hdHRycyBpbnN0YW5jZW9mIE9iamVjdCl7dGhyb3cgbmV3IEVycm9yKF8uc3RyLnNwcmludGYoX3QoIk5vZGUgWyVzXSBpcyBub3QgYSBKU09OaWZpZWQgWE1MIG5vZGUiKSxKU09OLnN0cmluZ2lmeShub2RlKSkpO30KZm9yKHZhciBhdHRyIGluIG5vZGUuYXR0cnMpe3ZhciB2YXR0cj1ub2RlLmF0dHJzW2F0dHJdO2lmKHR5cGVvZih2YXR0cikhPT0nc3RyaW5nJyl7dmF0dHI9SlNPTi5zdHJpbmdpZnkodmF0dHIpO30KdmF0dHI9dmF0dHIucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7aWYoaHVtYW5fcmVhZGFibGUpe3ZhdHRyPXZhdHRyLnJlcGxhY2UoLyZxdW90Oy9nLCInIik7fQpyKz0nICcrYXR0cisnPSInK3ZhdHRyKyciJzt9CmlmKG5vZGUuY2hpbGRyZW4mJm5vZGUuY2hpbGRyZW4ubGVuZ3RoKXtyKz0nPicrY3I7dmFyIGNoaWxkcz1bXTtmb3IodmFyIGk9MCxpaT1ub2RlLmNoaWxkcmVuLmxlbmd0aDtpPGlpO2krKyl7Y2hpbGRzLnB1c2godXRpbHMuanNvbl9ub2RlX3RvX3htbChub2RlLmNoaWxkcmVuW2ldLGh1bWFuX3JlYWRhYmxlLGluZGVudCsxKSk7fQpyKz1jaGlsZHMuam9pbihjcik7cis9Y3Irc2luZGVudCsnPC8nK25vZGUudGFnKyc+JztyZXR1cm4gcjt9ZWxzZXtyZXR1cm4gcisnLz4nO319LGxwYWQ6ZnVuY3Rpb24oc3RyLHNpemUpe3N0cj0iIitzdHI7cmV0dXJuIG5ldyBBcnJheShzaXplLXN0ci5sZW5ndGgrMSkuam9pbignMCcpK3N0cjt9LHJvdW5kX2RlY2ltYWxzOmZ1bmN0aW9uKHZhbHVlLGRlY2ltYWxzKXtyZXR1cm4gdXRpbHMucm91bmRfcHJlY2lzaW9uKHZhbHVlLE1hdGgucG93KDEwLC1kZWNpbWFscykpO30scm91bmRfcHJlY2lzaW9uOmZ1bmN0aW9uKHZhbHVlLHByZWNpc2lvbil7aWYoIXZhbHVlKXtyZXR1cm4gMDt9ZWxzZSBpZighcHJlY2lzaW9ufHxwcmVjaXNpb248MCl7cHJlY2lzaW9uPTE7fQp2YXIgbm9ybWFsaXplZF92YWx1ZT12YWx1ZS9wcmVjaXNpb247dmFyIGVwc2lsb25fbWFnbml0dWRlPU1hdGgubG9nKE1hdGguYWJzKG5vcm1hbGl6ZWRfdmFsdWUpKS9NYXRoLmxvZygyKTt2YXIgZXBzaWxvbj1NYXRoLnBvdygyLGVwc2lsb25fbWFnbml0dWRlLTUyKTtub3JtYWxpemVkX3ZhbHVlKz1ub3JtYWxpemVkX3ZhbHVlPj0wP2Vwc2lsb246LWVwc2lsb247dmFyIHNpZ249bm9ybWFsaXplZF92YWx1ZTwwPy0xLjA6MS4wO3ZhciByb3VuZGVkX3ZhbHVlPXNpZ24qTWF0aC5yb3VuZChNYXRoLmFicyhub3JtYWxpemVkX3ZhbHVlKSk7cmV0dXJuIHJvdW5kZWRfdmFsdWUqcHJlY2lzaW9uO30scnBhZDpmdW5jdGlvbihzdHIsc2l6ZSl7c3RyPSIiK3N0cjtyZXR1cm4gc3RyK25ldyBBcnJheShzaXplLXN0ci5sZW5ndGgrMSkuam9pbignMCcpO30sc2V0X2Nvb2tpZTpmdW5jdGlvbihuYW1lLHZhbHVlLHR0bCl7dHRsPXR0bHx8MjQqNjAqNjAqMzY1O2RvY3VtZW50LmNvb2tpZT1bbmFtZSsnPScrdmFsdWUsJ3BhdGg9LycsJ21heC1hZ2U9Jyt0dGwsJ2V4cGlyZXM9JytuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSt0dGwqMTAwMCkudG9HTVRTdHJpbmcoKV0uam9pbignOycpO30sc3RhYmxlU29ydDpmdW5jdGlvbihhcnJheSxpdGVyYXRlZSl7dmFyIHN0YWJsZT1hcnJheS5zbGljZSgpO3JldHVybiBhcnJheS5zb3J0KGZ1bmN0aW9uIHN0YWJsZUNvbXBhcmUoYSxiKXt2YXIgb3JkZXI9aXRlcmF0ZWUoYSxiKTtpZihvcmRlciE9PTApe3JldHVybiBvcmRlcjt9ZWxzZXtyZXR1cm4gc3RhYmxlLmluZGV4T2YoYSktc3RhYmxlLmluZGV4T2YoYik7fX0pO30sc3dhcDpmdW5jdGlvbihhcnJheSxlbGVtMSxlbGVtMil7dmFyIGkxPWFycmF5LmluZGV4T2YoZWxlbTEpO3ZhciBpMj1hcnJheS5pbmRleE9mKGVsZW0yKTthcnJheVtpMl09ZWxlbTE7YXJyYXlbaTFdPWVsZW0yO30saXNfZW1haWw6ZnVuY3Rpb24odmFsdWUsYWxsb3dfbWFpbHRvKXt2YXIgcmU7aWYoYWxsb3dfbWFpbHRvKXtyZT0vXihtYWlsdG86KT8oKFtePD4oKVxbXF1cLiw7OlxzQFwiXSsoXC5bXjw+KClcW1xdXC4sOzpcc0BcIl0rKSopfChcIi4rXCIpKUAoKFtePD4oKVtcXVwuLDs6XHNAXCJdK1wuKStbXjw+KClbXF1cLiw7OlxzQFwiXXsyLH0pJC9pO31lbHNle3JlPS9eKChbXjw+KClcW1xdXC4sOzpcc0BcIl0rKFwuW148PigpXFtcXVwuLDs6XHNAXCJdKykqKXwoXCIuK1wiKSlAKChbXjw+KClbXF1cLiw7OlxzQFwiXStcLikrW148PigpW1xdXC4sOzpcc0BcIl17Mix9KSQvaTt9CnJldHVybiByZS50ZXN0KHZhbHVlKTt9LHRvQm9vbEVsc2U6ZnVuY3Rpb24oc3RyLGVsc2VWYWx1ZXMsdHJ1ZVZhbHVlcyxmYWxzZVZhbHVlcyl7dmFyIHJldD1fLnN0ci50b0Jvb2woc3RyLHRydWVWYWx1ZXMsZmFsc2VWYWx1ZXMpO2lmKF8uaXNVbmRlZmluZWQocmV0KSl7cmV0dXJuIGVsc2VWYWx1ZXM7fQpyZXR1cm4gcmV0O30sdHJhdmVyc2VfcmVjb3JkczpmdW5jdGlvbihkYXRhLGYpe2lmKGRhdGEudHlwZT09PSdyZWNvcmQnKXtmKGRhdGEpO31lbHNlIGlmKGRhdGEuZGF0YSl7Zm9yKHZhciBpPTA7aTxkYXRhLmRhdGEubGVuZ3RoO2krKyl7dXRpbHMudHJhdmVyc2VfcmVjb3JkcyhkYXRhLmRhdGFbaV0sZik7fX19LHVuYWNjZW50OmZ1bmN0aW9uKHN0cixjYXNlc2Vuc2V0aXZlKXtzdHI9c3RyLnJlcGxhY2UoL1teXHUwMDAwLVx1MDA3RV0vZyxmdW5jdGlvbihhY2NlbnRlZCl7cmV0dXJuIGRpYWNyaXRpY3NNYXBbYWNjZW50ZWRdfHxhY2NlbnRlZDt9KTtyZXR1cm4gY2FzZXNlbnNldGl2ZT9zdHI6c3RyLnRvTG93ZXJDYXNlKCk7fSx4bWxfdG9fanNvbjpmdW5jdGlvbihub2RlLHN0cmlwX3doaXRlc3BhY2Upe3N3aXRjaChub2RlLm5vZGVUeXBlKXtjYXNlIDk6cmV0dXJuIHV0aWxzLnhtbF90b19qc29uKG5vZGUuZG9jdW1lbnRFbGVtZW50LHN0cmlwX3doaXRlc3BhY2UpO2Nhc2UgMzpjYXNlIDQ6cmV0dXJuKHN0cmlwX3doaXRlc3BhY2UmJm5vZGUuZGF0YS50cmltKCk9PT0nJyk/dW5kZWZpbmVkOm5vZGUuZGF0YTtjYXNlIDE6dmFyIGF0dHJzPSQobm9kZSkuZ2V0QXR0cmlidXRlcygpO3JldHVybnt0YWc6bm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksYXR0cnM6YXR0cnMsY2hpbGRyZW46Xy5jb21wYWN0KF8ubWFwKG5vZGUuY2hpbGROb2RlcyxmdW5jdGlvbihub2RlKXtyZXR1cm4gdXRpbHMueG1sX3RvX2pzb24obm9kZSxzdHJpcF93aGl0ZXNwYWNlKTt9KSksfTt9fSx4bWxfdG9fc3RyOmZ1bmN0aW9uKG5vZGUpe3ZhciBzdHI9IiI7aWYod2luZG93LlhNTFNlcmlhbGl6ZXIpe3N0cj0obmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7fWVsc2UgaWYod2luZG93LkFjdGl2ZVhPYmplY3Qpe3N0cj1ub2RlLnhtbDt9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoX3QoIkNvdWxkIG5vdCBzZXJpYWxpemUgWE1MIikpO30KdmFyIHZvaWRfZWxlbWVudHM9J2FyZWEgYmFzZSBiciBjb2wgY29tbWFuZCBlbWJlZCBociBpbWcgaW5wdXQga2V5Z2VuIGxpbmsgbWV0YSBwYXJhbSBzb3VyY2UgdHJhY2sgd2JyJy5zcGxpdCgnICcpO3N0cj1zdHIucmVwbGFjZSgvPChbYS16XSspKFtePD5dKilccypcL1xzKj4vZyxmdW5jdGlvbihtYXRjaCx0YWcsYXR0cnMpe2lmKHZvaWRfZWxlbWVudHMuaW5kZXhPZih0YWcpPDApe3JldHVybiI8Iit0YWcrYXR0cnMrIj48LyIrdGFnKyI+Ijt9ZWxzZXtyZXR1cm4gbWF0Y2g7fX0pO3JldHVybiBzdHI7fSx0cmF2ZXJzZTpmdW5jdGlvbih0cmVlLGYpe2lmKGYodHJlZSkpe18uZWFjaCh0cmVlLmNoaWxkcmVuLGZ1bmN0aW9uKGMpe3V0aWxzLnRyYXZlcnNlKGMsZik7fSk7fX0sdHJhdmVyc2VQYXRoOmZ1bmN0aW9uKHRyZWUsZixwYXRoKXtwYXRoPXBhdGh8fFtdO2YodHJlZSxwYXRoKTtfLmVhY2godHJlZS5jaGlsZHJlbixmdW5jdGlvbihub2RlKXt1dGlscy50cmF2ZXJzZVBhdGgobm9kZSxmLHBhdGguY29uY2F0KHRyZWUpKTt9KTt9LGRlZXBGcmVlemU6ZnVuY3Rpb24ob2JqKXt2YXIgcHJvcE5hbWVzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaik7cHJvcE5hbWVzLmZvckVhY2goZnVuY3Rpb24obmFtZSl7dmFyIHByb3A9b2JqW25hbWVdO2lmKHR5cGVvZiBwcm9wPT0nb2JqZWN0JyYmcHJvcCE9PW51bGwpCnV0aWxzLmRlZXBGcmVlemUocHJvcCk7fSk7cmV0dXJuIE9iamVjdC5mcmVlemUob2JqKTt9LGNsb3Nlc3ROdW1iZXI6ZnVuY3Rpb24obnVtLGFycil7dmFyIGN1cnI9YXJyWzBdO3ZhciBkaWZmPU1hdGguYWJzKG51bS1jdXJyKTtmb3IodmFyIHZhbD0wO3ZhbDxhcnIubGVuZ3RoO3ZhbCsrKXt2YXIgbmV3ZGlmZj1NYXRoLmFicyhudW0tYXJyW3ZhbF0pO2lmKG5ld2RpZmY8ZGlmZil7ZGlmZj1uZXdkaWZmO2N1cnI9YXJyW3ZhbF07fX0KcmV0dXJuIGN1cnI7fSxhc3NldHNEb21haW46ZnVuY3Rpb24oKXtyZXR1cm5bJyYnLFsncmVzX21vZGVsJywnPScsJ2lyLnVpLnZpZXcnXSxbJ25hbWUnLCdsaWtlJywnYXNzZXRzXyddXTt9LH07cmV0dXJuIHV0aWxzO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3dpZGdldC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5XaWRnZXQnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYWpheD1yZXF1aXJlKCd3ZWIuYWpheCcpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIG1peGlucz1yZXF1aXJlKCd3ZWIubWl4aW5zJyk7dmFyIFNlcnZpY2VzTWl4aW49cmVxdWlyZSgnd2ViLlNlcnZpY2VzTWl4aW4nKTt2YXIgV2lkZ2V0PWNvcmUuQ2xhc3MuZXh0ZW5kKG1peGlucy5Qcm9wZXJ0aWVzTWl4aW4sU2VydmljZXNNaXhpbix7dGFnTmFtZTonZGl2JyxpZDpudWxsLGNsYXNzTmFtZTpudWxsLGF0dHJpYnV0ZXM6e30sZXZlbnRzOnt9LHRlbXBsYXRlOm51bGwseG1sRGVwZW5kZW5jaWVzOm51bGwsY3NzTGliczpudWxsLGpzTGliczpudWxsLGFzc2V0TGliczpudWxsLGluaXQ6ZnVuY3Rpb24ocGFyZW50KXttaXhpbnMuUHJvcGVydGllc01peGluLmluaXQuY2FsbCh0aGlzKTt0aGlzLnNldFBhcmVudChwYXJlbnQpO2Zvcih2YXIgbmFtZSBpbiB0aGlzKXtpZih0eXBlb2YodGhpc1tuYW1lXSk9PT0iZnVuY3Rpb24iKXtpZigoL15vbl98XmRvXy8pLnRlc3QobmFtZSkpe3RoaXNbbmFtZV09dGhpc1tuYW1lXS5iaW5kKHRoaXMpO319fX0sd2lsbFN0YXJ0OmZ1bmN0aW9uKCl7dmFyIHByb21zPVtdO2lmKHRoaXMueG1sRGVwZW5kZW5jaWVzKXtwcm9tcy5wdXNoLmFwcGx5KHByb21zLF8ubWFwKHRoaXMueG1sRGVwZW5kZW5jaWVzLGZ1bmN0aW9uKHhtbFBhdGgpe3JldHVybiBhamF4LmxvYWRYTUwoeG1sUGF0aCxjb3JlLnF3ZWIpO30pKTt9CmlmKHRoaXMuanNMaWJzfHx0aGlzLmNzc0xpYnN8fHRoaXMuYXNzZXRMaWJzKXtwcm9tcy5wdXNoKGFqYXgubG9hZExpYnModGhpcykpO30KcmV0dXJuIFByb21pc2UuYWxsKHByb21zKTt9LHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30sZGVzdHJveTpmdW5jdGlvbigpe21peGlucy5Qcm9wZXJ0aWVzTWl4aW4uZGVzdHJveS5jYWxsKHRoaXMpO2lmKHRoaXMuJGVsKXt0aGlzLiRlbC5yZW1vdmUoKTt9fSxhcHBlbmRUbzpmdW5jdGlvbih0YXJnZXQpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIHRoaXMuX3dpZGdldFJlbmRlckFuZEluc2VydChmdW5jdGlvbih0KXtzZWxmLiRlbC5hcHBlbmRUbyh0KTt9LHRhcmdldCk7fSxhdHRhY2hUbzpmdW5jdGlvbih0YXJnZXQpe3ZhciBzZWxmPXRoaXM7dGhpcy5zZXRFbGVtZW50KHRhcmdldC4kZWx8fHRhcmdldCk7cmV0dXJuIHRoaXMud2lsbFN0YXJ0KCkudGhlbihmdW5jdGlvbigpe3JldHVybiBzZWxmLnN0YXJ0KCk7fSk7fSxkb19oaWRlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuYWRkQ2xhc3MoJ29faGlkZGVuJyk7fSxkb19zaG93OmZ1bmN0aW9uKCl7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ29faGlkZGVuJyk7fSxkb190b2dnbGU6ZnVuY3Rpb24oZGlzcGxheSl7aWYoXy5pc0Jvb2xlYW4oZGlzcGxheSkpe2Rpc3BsYXk/dGhpcy5kb19zaG93KCk6dGhpcy5kb19oaWRlKCk7fWVsc2V7dGhpcy4kZWwuaGFzQ2xhc3MoJ29faGlkZGVuJyk/dGhpcy5kb19zaG93KCk6dGhpcy5kb19oaWRlKCk7fX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24odGFyZ2V0KXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLl93aWRnZXRSZW5kZXJBbmRJbnNlcnQoZnVuY3Rpb24odCl7c2VsZi4kZWwuaW5zZXJ0QWZ0ZXIodCk7fSx0YXJnZXQpO30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHRhcmdldCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy5fd2lkZ2V0UmVuZGVyQW5kSW5zZXJ0KGZ1bmN0aW9uKHQpe3NlbGYuJGVsLmluc2VydEJlZm9yZSh0KTt9LHRhcmdldCk7fSxwcmVwZW5kVG86ZnVuY3Rpb24odGFyZ2V0KXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLl93aWRnZXRSZW5kZXJBbmRJbnNlcnQoZnVuY3Rpb24odCl7c2VsZi4kZWwucHJlcGVuZFRvKHQpO30sdGFyZ2V0KTt9LHJlbmRlckVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgJGVsO2lmKHRoaXMudGVtcGxhdGUpeyRlbD0kKGNvcmUucXdlYi5yZW5kZXIodGhpcy50ZW1wbGF0ZSx7d2lkZ2V0OnRoaXN9KS50cmltKCkpO31lbHNleyRlbD10aGlzLl9tYWtlRGVzY3JpcHRpdmUoKTt9CnRoaXMuX3JlcGxhY2VFbGVtZW50KCRlbCk7fSxyZXBsYWNlOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIHRoaXMuX3dpZGdldFJlbmRlckFuZEluc2VydChfLmJpbmQoZnVuY3Rpb24odCl7dGhpcy4kZWwucmVwbGFjZUFsbCh0KTt9LHRoaXMpLHRhcmdldCk7fSxzZXRFbGVtZW50OmZ1bmN0aW9uKGVsZW1lbnQpe2lmKHRoaXMuJGVsKXt0aGlzLl91bmRlbGVnYXRlRXZlbnRzKCk7fQp0aGlzLiRlbD0oZWxlbWVudCBpbnN0YW5jZW9mICQpP2VsZW1lbnQ6JChlbGVtZW50KTt0aGlzLmVsPXRoaXMuJGVsWzBdO3RoaXMuX2RlbGVnYXRlRXZlbnRzKCk7cmV0dXJuIHRoaXM7fSwkOmZ1bmN0aW9uKHNlbGVjdG9yKXtpZihzZWxlY3Rvcj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuJGVsO30KcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO30sX2RlbGVnYXRlRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGV2ZW50cz10aGlzLmV2ZW50cztpZihfLmlzRW1wdHkoZXZlbnRzKSl7cmV0dXJuO30KZm9yKHZhciBrZXkgaW4gZXZlbnRzKXtpZighZXZlbnRzLmhhc093blByb3BlcnR5KGtleSkpe2NvbnRpbnVlO30KdmFyIG1ldGhvZD10aGlzLnByb3h5KGV2ZW50c1trZXldKTt2YXIgbWF0Y2g9L14oXFMrKShccysoLiopKT8kLy5leGVjKGtleSk7dmFyIGV2ZW50PW1hdGNoWzFdO3ZhciBzZWxlY3Rvcj1tYXRjaFszXTtldmVudCs9Jy53aWRnZXRfZXZlbnRzJztpZighc2VsZWN0b3Ipe3RoaXMuJGVsLm9uKGV2ZW50LG1ldGhvZCk7fWVsc2V7dGhpcy4kZWwub24oZXZlbnQsc2VsZWN0b3IsbWV0aG9kKTt9fX0sX21ha2VEZXNjcmlwdGl2ZTpmdW5jdGlvbigpe3ZhciBhdHRycz1fLmV4dGVuZCh7fSx0aGlzLmF0dHJpYnV0ZXN8fHt9KTtpZih0aGlzLmlkKXthdHRycy5pZD10aGlzLmlkO30KaWYodGhpcy5jbGFzc05hbWUpe2F0dHJzWydjbGFzcyddPXRoaXMuY2xhc3NOYW1lO30KdmFyICRlbD0kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWdOYW1lKSk7aWYoIV8uaXNFbXB0eShhdHRycykpeyRlbC5hdHRyKGF0dHJzKTt9CnJldHVybiAkZWw7fSxfcmVwbGFjZUVsZW1lbnQ6ZnVuY3Rpb24oJGVsKXt2YXIgJG9sZGVsPXRoaXMuJGVsO3RoaXMuc2V0RWxlbWVudCgkZWwpO2lmKCRvbGRlbCYmISRvbGRlbC5pcyh0aGlzLiRlbCkpe2lmKCRvbGRlbC5sZW5ndGg+MSl7JG9sZGVsLndyYXBBbGwoJzxkaXYvPicpOyRvbGRlbC5wYXJlbnQoKS5yZXBsYWNlV2l0aCh0aGlzLiRlbCk7fWVsc2V7JG9sZGVsLnJlcGxhY2VXaXRoKHRoaXMuJGVsKTt9fQpyZXR1cm4gdGhpczt9LF91bmRlbGVnYXRlRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy4kZWwub2ZmKCcud2lkZ2V0X2V2ZW50cycpO30sX3dpZGdldFJlbmRlckFuZEluc2VydDpmdW5jdGlvbihpbnNlcnRpb24sdGFyZ2V0KXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLndpbGxTdGFydCgpLnRoZW4oZnVuY3Rpb24oKXtpZihzZWxmLl9fcGFyZW50ZWREZXN0cm95ZWQpe3JldHVybjt9CnNlbGYucmVuZGVyRWxlbWVudCgpO2luc2VydGlvbih0YXJnZXQpO3JldHVybiBzZWxmLnN0YXJ0KCk7fSk7fSx9KTtyZXR1cm4gV2lkZ2V0O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9zZXJ2aWNlcy9hamF4X3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuQWpheFNlcnZpY2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQWJzdHJhY3RTZXJ2aWNlPXJlcXVpcmUoJ3dlYi5BYnN0cmFjdFNlcnZpY2UnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBzZXNzaW9uPXJlcXVpcmUoJ3dlYi5zZXNzaW9uJyk7dmFyIEFqYXhTZXJ2aWNlPUFic3RyYWN0U2VydmljZS5leHRlbmQoe3JwYzpmdW5jdGlvbihyb3V0ZSxhcmdzLG9wdGlvbnMsdGFyZ2V0KXt2YXIgcnBjUHJvbWlzZTt2YXIgcHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cnBjUHJvbWlzZT1zZXNzaW9uLnJwYyhyb3V0ZSxhcmdzLG9wdGlvbnMpO3JwY1Byb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpe2lmKCF0YXJnZXQuaXNEZXN0cm95ZWQoKSl7cmVzb2x2ZShyZXN1bHQpO319KS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24ocmVhc29uKXtpZighdGFyZ2V0LmlzRGVzdHJveWVkKCkpe3JlamVjdChyZWFzb24pO319KTt9KTtwcm9taXNlLmFib3J0PXJwY1Byb21pc2UuYWJvcnQuYmluZChycGNQcm9taXNlKTtyZXR1cm4gcHJvbWlzZTt9LH0pO2NvcmUuc2VydmljZVJlZ2lzdHJ5LmFkZCgnYWpheCcsQWpheFNlcnZpY2UpO3JldHVybiBBamF4U2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvY29uZmlnLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLmNvbmZpZycsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGNvbmZpZz17ZGV2aWNlOnt0b3VjaDonb250b3VjaHN0YXJ0J2luIHdpbmRvd3x8J29ubXNnZXN0dXJlY2hhbmdlJ2luIHdpbmRvdyxzaXplX2NsYXNzOm51bGwsaXNNb2JpbGU6bnVsbCxTSVpFUzp7WFM6MCxWU006MSxTTToyLE1EOjMsTEc6NCxYTDo1LFhYTDo2fSx9LGlzRGVidWc6ZnVuY3Rpb24oZGVidWdNb2RlKXtpZihkZWJ1Z01vZGUpe3JldHVybiBvZG9vLmRlYnVnJiZvZG9vLmRlYnVnLmluZGV4T2YoZGVidWdNb2RlKSE9PS0xO30KcmV0dXJuIG9kb28uZGVidWc7fSx9O3ZhciBtZWRpYXM9W3dpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0NzRweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNDc1cHgpIGFuZCAobWF4LXdpZHRoOiA1NzVweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNTc2cHgpIGFuZCAobWF4LXdpZHRoOiA3NjdweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiA5OTFweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogOTkycHgpIGFuZCAobWF4LXdpZHRoOiAxMTk5cHgpJyksd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEyMDBweCkgYW5kIChtYXgtd2lkdGg6IDE1MzNweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTUzNHB4KScpLF07ZnVuY3Rpb24gX2dldFNpemVDbGFzcygpe2Zvcih2YXIgaT0wO2k8bWVkaWFzLmxlbmd0aDtpKyspe2lmKG1lZGlhc1tpXS5tYXRjaGVzKXtyZXR1cm4gaTt9fX0KZnVuY3Rpb24gX3VwZGF0ZVNpemVQcm9wcygpe3ZhciBzYz1fZ2V0U2l6ZUNsYXNzKCk7aWYoc2MhPT1jb25maWcuZGV2aWNlLnNpemVfY2xhc3Mpe2NvbmZpZy5kZXZpY2Uuc2l6ZV9jbGFzcz1zYztjb25maWcuZGV2aWNlLmlzTW9iaWxlPWNvbmZpZy5kZXZpY2Uuc2l6ZV9jbGFzczw9Y29uZmlnLmRldmljZS5TSVpFUy5TTTt9fQpfLmludm9rZShtZWRpYXMsJ2FkZExpc3RlbmVyJyxfdXBkYXRlU2l6ZVByb3BzKTtfdXBkYXRlU2l6ZVByb3BzKCk7cmV0dXJuIGNvbmZpZzt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvY29yZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5jb3JlJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIEJ1cz1yZXF1aXJlKCd3ZWIuQnVzJyk7dmFyIGNvbmZpZz1yZXF1aXJlKCd3ZWIuY29uZmlnJyk7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciBRV2ViPXJlcXVpcmUoJ3dlYi5RV2ViJyk7dmFyIFJlZ2lzdHJ5PXJlcXVpcmUoJ3dlYi5SZWdpc3RyeScpO3ZhciB0cmFuc2xhdGlvbj1yZXF1aXJlKCd3ZWIudHJhbnNsYXRpb24nKTt2YXIgYnVzPW5ldyBCdXMoKTtfLmVhY2goJ2NsaWNrLGRibGNsaWNrLGtleWRvd24sa2V5cHJlc3Msa2V5dXAnLnNwbGl0KCcsJyksZnVuY3Rpb24oZXZ0eXBlKXskKCdodG1sJykub24oZXZ0eXBlLGZ1bmN0aW9uKGV2KXtidXMudHJpZ2dlcihldnR5cGUsZXYpO30pO30pO18uZWFjaCgncmVzaXplLHNjcm9sbCcuc3BsaXQoJywnKSxmdW5jdGlvbihldnR5cGUpeyQod2luZG93KS5vbihldnR5cGUsZnVuY3Rpb24oZXYpe2J1cy50cmlnZ2VyKGV2dHlwZSxldik7fSk7fSk7cmV0dXJue3F3ZWI6bmV3IFFXZWIoY29uZmlnLmlzRGVidWcoKSksQ2xhc3M6Q2xhc3MsYnVzOmJ1cyxtYWluX2J1czpuZXcgQnVzKCksX3Q6dHJhbnNsYXRpb24uX3QsX2x0OnRyYW5zbGF0aW9uLl9sdCxhY3Rpb25fcmVnaXN0cnk6bmV3IFJlZ2lzdHJ5KCksY3Jhc2hfcmVnaXN0cnk6bmV3IFJlZ2lzdHJ5KCksc2VydmljZVJlZ2lzdHJ5Om5ldyBSZWdpc3RyeSgpLGNzcmZfdG9rZW46b2Rvby5jc3JmX3Rva2VuLH07fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3NlcnZpY2VzL2xvY2FsX3N0b3JhZ2Vfc2VydmljZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5Mb2NhbFN0b3JhZ2VTZXJ2aWNlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIEFic3RyYWN0U3RvcmFnZVNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U3RvcmFnZVNlcnZpY2UnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBsb2NhbFN0b3JhZ2U9cmVxdWlyZSgnd2ViLmxvY2FsX3N0b3JhZ2UnKTt2YXIgTG9jYWxTdG9yYWdlU2VydmljZT1BYnN0cmFjdFN0b3JhZ2VTZXJ2aWNlLmV4dGVuZCh7c3RvcmFnZTpsb2NhbFN0b3JhZ2UsfSk7Y29yZS5zZXJ2aWNlUmVnaXN0cnkuYWRkKCdsb2NhbF9zdG9yYWdlJyxMb2NhbFN0b3JhZ2VTZXJ2aWNlKTtyZXR1cm4gTG9jYWxTdG9yYWdlU2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvbm90aWZpY2F0aW9uX3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuTm90aWZpY2F0aW9uU2VydmljZScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBBYnN0cmFjdFNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U2VydmljZScpO3ZhciBOb3RpZmljYXRpb249cmVxdWlyZSgnd2ViLk5vdGlmaWNhdGlvbicpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIGlkPTA7dmFyIE5vdGlmaWNhdGlvblNlcnZpY2U9QWJzdHJhY3RTZXJ2aWNlLmV4dGVuZCh7Y3VzdG9tX2V2ZW50czp7Y2xvc2U6J19vbkNsb3NlTm90aWZpY2F0aW9uJyx9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubm90aWZpY2F0aW9ucz17fTt9LGNsb3NlOmZ1bmN0aW9uKG5vdGlmaWNhdGlvbklkLHNpbGVudCl7dmFyIG5vdGlmaWNhdGlvbj10aGlzLm5vdGlmaWNhdGlvbnNbbm90aWZpY2F0aW9uSWRdO2lmKCFub3RpZmljYXRpb24pe3JldHVybjt9Cm5vdGlmaWNhdGlvbi5jbG9zZShzaWxlbnQpO30sbm90aWZ5OmZ1bmN0aW9uKHBhcmFtcyl7aWYoIXRoaXMuJGVsKXt0aGlzLiRlbD0kKCc8ZGl2IGNsYXNzPSJvX25vdGlmaWNhdGlvbl9tYW5hZ2VyIi8+Jyk7dGhpcy4kZWwucHJlcGVuZFRvKCdib2R5Jyk7fQp2YXIgTm90aWZpY2F0aW9uV2lkZ2V0PXBhcmFtcy5Ob3RpZmljYXRpb258fE5vdGlmaWNhdGlvbjt2YXIgbm90aWZpY2F0aW9uPXRoaXMubm90aWZpY2F0aW9uc1srK2lkXT1uZXcgTm90aWZpY2F0aW9uV2lkZ2V0KHRoaXMscGFyYW1zKTtub3RpZmljYXRpb24uYXBwZW5kVG8odGhpcy4kZWwpO3JldHVybiBpZDt9LF9vbkNsb3NlTm90aWZpY2F0aW9uOmZ1bmN0aW9uKGV2KXtldi5zdG9wUHJvcGFnYXRpb24oKTtmb3IodmFyIG5vdGlmaWNhdGlvbklkIGluIHRoaXMubm90aWZpY2F0aW9ucyl7aWYodGhpcy5ub3RpZmljYXRpb25zW25vdGlmaWNhdGlvbklkXT09PWV2LnRhcmdldCl7ZGVsZXRlIHRoaXMubm90aWZpY2F0aW9uc1tub3RpZmljYXRpb25JZF07YnJlYWs7fX19LH0pO2NvcmUuc2VydmljZVJlZ2lzdHJ5LmFkZCgnbm90aWZpY2F0aW9uJyxOb3RpZmljYXRpb25TZXJ2aWNlKTtyZXR1cm4gTm90aWZpY2F0aW9uU2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvY3Jhc2hfbWFuYWdlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5DcmFzaE1hbmFnZXInLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijtjb25zdCBBYnN0cmFjdFNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U2VydmljZScpO3ZhciBhamF4PXJlcXVpcmUoJ3dlYi5hamF4Jyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgRGlhbG9nPXJlcXVpcmUoJ3dlYi5EaWFsb2cnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgX2x0PWNvcmUuX2x0O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLGV2PT5jb3JlLmJ1cy50cmlnZ2VyKCdjcmFzaF9tYW5hZ2VyX3VuaGFuZGxlZHJlamVjdGlvbicsZXYpKTtsZXQgYWN0aXZlPXRydWU7dmFyIENyYXNoTWFuYWdlckRpYWxvZz1EaWFsb2cuZXh0ZW5kKHt4bWxEZXBlbmRlbmNpZXM6KERpYWxvZy5wcm90b3R5cGUueG1sRGVwZW5kZW5jaWVzfHxbXSkuY29uY2F0KFsnL3dlYi9zdGF0aWMvc3JjL3htbC9jcmFzaF9tYW5hZ2VyLnhtbCddKSxpbml0OmZ1bmN0aW9uKHBhcmVudCxvcHRpb25zLGVycm9yKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLFtwYXJlbnQsb3B0aW9uc10pO3RoaXMubWVzc2FnZT1lcnJvci5tZXNzYWdlO3RoaXMudHJhY2ViYWNrPWVycm9yLnRyYWNlYmFjazt9LH0pO3ZhciBFcnJvckRpYWxvZz1DcmFzaE1hbmFnZXJEaWFsb2cuZXh0ZW5kKHt0ZW1wbGF0ZTonQ3Jhc2hNYW5hZ2VyLmVycm9yJyx9KTt2YXIgV2FybmluZ0RpYWxvZz1DcmFzaE1hbmFnZXJEaWFsb2cuZXh0ZW5kKHt0ZW1wbGF0ZTonQ3Jhc2hNYW5hZ2VyLndhcm5pbmcnLGluaXQ6ZnVuY3Rpb24ocGFyZW50LG9wdGlvbnMsZXJyb3Ipe3RoaXMuX3N1cGVyKHBhcmVudCxfLmV4dGVuZCh7c2l6ZTonbWVkaXVtJyx9LG9wdGlvbnMpLGVycm9yKTt9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcih7c2hvdWxkRm9jdXNCdXR0b25zOnRydWV9KTt9LH0pO3ZhciBDcmFzaE1hbmFnZXI9QWJzdHJhY3RTZXJ2aWNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7YWN0aXZlPXRydWU7dGhpcy5pc0Nvbm5lY3RlZD10cnVlO3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb3JlLmJ1cy5vbigncnBjX2Vycm9yJyx0aGlzLHRoaXMucnBjX2Vycm9yKTt3aW5kb3cub25lcnJvcj1mdW5jdGlvbihtZXNzYWdlLGZpbGUsbGluZSxjb2wsZXJyb3Ipe2lmKCFmaWxlJiYhbGluZSYmIWNvbCl7aWYod2luZG93Lm9uT3JpZ2luRXJyb3Ipe3dpbmRvdy5vbk9yaWdpbkVycm9yKCk7ZGVsZXRlIHdpbmRvdy5vbk9yaWdpbkVycm9yO31lbHNle3NlbGYuc2hvd19lcnJvcih7dHlwZTpfdCgiT2RvbyBDbGllbnQgRXJyb3IiKSxtZXNzYWdlOl90KCJVbmtub3duIENPUlMgZXJyb3IiKSxkYXRhOntkZWJ1ZzpfdCgiQW4gdW5rbm93biBDT1JTIGVycm9yIG9jY3VyZWQuIFRoZSBlcnJvciBwcm9iYWJseSBvcmlnaW5hdGVzIGZyb20gYSBKYXZhU2NyaXB0IGZpbGUgc2VydmVkIGZyb20gYSBkaWZmZXJlbnQgb3JpZ2luLiAoT3BlbmluZyB5b3VyIGJyb3dzZXIgY29uc29sZSBtaWdodCBnaXZlIHlvdSBhIGhpbnQgb24gdGhlIGVycm9yLikiKX0sfSk7fX1lbHNle2lmKCFlcnJvciYmbWVzc2FnZT09PSdSZXNpemVPYnNlcnZlciBsb29wIGxpbWl0IGV4Y2VlZGVkJyl7cmV0dXJuO30KdmFyIHRyYWNlYmFjaz1lcnJvcj9lcnJvci5zdGFjazonJztzZWxmLnNob3dfZXJyb3Ioe3R5cGU6X3QoIk9kb28gQ2xpZW50IEVycm9yIiksbWVzc2FnZTptZXNzYWdlLGRhdGE6e2RlYnVnOmZpbGUrJzonK2xpbmUrIlxuIitfdCgnVHJhY2ViYWNrOicpKyJcbiIrdHJhY2ViYWNrfSx9KTt9fTtjb3JlLmJ1cy5vbignY3Jhc2hfbWFuYWdlcl91bmhhbmRsZWRyZWplY3Rpb24nLHRoaXMsZnVuY3Rpb24oZXYpe2lmKGV2LnJlYXNvbiYmZXYucmVhc29uIGluc3RhbmNlb2YgRXJyb3Ipe3ZhciB0cmFjZWJhY2s9ZXYucmVhc29uLnN0YWNrO3NlbGYuc2hvd19lcnJvcih7dHlwZTpfdCgiT2RvbyBDbGllbnQgRXJyb3IiKSxtZXNzYWdlOicnLGRhdGE6e2RlYnVnOl90KCdUcmFjZWJhY2s6JykrIlxuIit0cmFjZWJhY2t9LH0pO31lbHNle2V2LnN0b3BQcm9wYWdhdGlvbigpO2V2LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO2V2LnByZXZlbnREZWZhdWx0KCk7fX0pO30sZW5hYmxlOmZ1bmN0aW9uKCl7YWN0aXZlPXRydWU7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7YWN0aXZlPWZhbHNlO30saGFuZGxlTG9zdENvbm5lY3Rpb246ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO2lmKCF0aGlzLmlzQ29ubmVjdGVkKXtyZXR1cm47fQp0aGlzLmlzQ29ubmVjdGVkPWZhbHNlO3ZhciBkZWxheT0yMDAwO2NvcmUuYnVzLnRyaWdnZXIoJ2Nvbm5lY3Rpb25fbG9zdCcpO3NldFRpbWVvdXQoZnVuY3Rpb24gY2hlY2tDb25uZWN0aW9uKCl7YWpheC5qc29uUnBjKCcvd2ViL3dlYmNsaWVudC92ZXJzaW9uX2luZm8nLCdjYWxsJyx7fSx7c2hhZG93OnRydWV9KS50aGVuKGZ1bmN0aW9uKCl7Y29yZS5idXMudHJpZ2dlcignY29ubmVjdGlvbl9yZXN0b3JlZCcpO3NlbGYuaXNDb25uZWN0ZWQ9dHJ1ZTt9KS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24oKXtkZWxheT0oZGVsYXkqMS41KSs1MDAqTWF0aC5yYW5kb20oKTtzZXRUaW1lb3V0KGNoZWNrQ29ubmVjdGlvbixkZWxheSk7fSk7fSxkZWxheSk7fSxycGNfZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe2lmKCFkb2N1bWVudC5ib2R5KXtyZXR1cm47fQp2YXIgbWFwX3RpdGxlPXthY2Nlc3NfZGVuaWVkOl9sdCgiQWNjZXNzIERlbmllZCIpLGFjY2Vzc19lcnJvcjpfbHQoIkFjY2VzcyBFcnJvciIpLGV4Y2VwdF9vcm06X2x0KCJHbG9iYWwgQnVzaW5lc3MgRXJyb3IiKSxtaXNzaW5nX2Vycm9yOl9sdCgiTWlzc2luZyBSZWNvcmQiKSx1c2VyX2Vycm9yOl9sdCgiVXNlciBFcnJvciIpLHZhbGlkYXRpb25fZXJyb3I6X2x0KCJWYWxpZGF0aW9uIEVycm9yIiksd2FybmluZzpfbHQoIldhcm5pbmciKSx9O2lmKCFhY3RpdmUpe3JldHVybjt9CmlmKHRoaXMuY29ubmVjdGlvbl9sb3N0KXtyZXR1cm47fQppZihlcnJvci5jb2RlPT09LTMyMDk4KXt0aGlzLmhhbmRsZUxvc3RDb25uZWN0aW9uKCk7cmV0dXJuO30KdmFyIGhhbmRsZXI9Y29yZS5jcmFzaF9yZWdpc3RyeS5nZXQoZXJyb3IuZGF0YS5uYW1lLHRydWUpO2lmKGhhbmRsZXIpe25ldyhoYW5kbGVyKSh0aGlzLGVycm9yKS5kaXNwbGF5KCk7cmV0dXJuO30KaWYoXy5oYXMobWFwX3RpdGxlLGVycm9yLmRhdGEuZXhjZXB0aW9uX3R5cGUpKXtpZihlcnJvci5kYXRhLmV4Y2VwdGlvbl90eXBlPT09J2V4Y2VwdF9vcm0nKXtpZihlcnJvci5kYXRhLmFyZ3VtZW50c1sxXSl7ZXJyb3I9Xy5leHRlbmQoe30sZXJyb3Ise2RhdGE6Xy5leHRlbmQoe30sZXJyb3IuZGF0YSx7bWVzc2FnZTplcnJvci5kYXRhLmFyZ3VtZW50c1sxXSx0aXRsZTplcnJvci5kYXRhLmFyZ3VtZW50c1swXSE9PSdXYXJuaW5nJz9lcnJvci5kYXRhLmFyZ3VtZW50c1swXTonJyx9KX0pO30KZWxzZXtlcnJvcj1fLmV4dGVuZCh7fSxlcnJvcix7ZGF0YTpfLmV4dGVuZCh7fSxlcnJvci5kYXRhLHttZXNzYWdlOmVycm9yLmRhdGEuYXJndW1lbnRzWzBdLHRpdGxlOicnLH0pfSk7fX0KZWxzZXtlcnJvcj1fLmV4dGVuZCh7fSxlcnJvcix7ZGF0YTpfLmV4dGVuZCh7fSxlcnJvci5kYXRhLHttZXNzYWdlOmVycm9yLmRhdGEuYXJndW1lbnRzWzBdLHRpdGxlOm1hcF90aXRsZVtlcnJvci5kYXRhLmV4Y2VwdGlvbl90eXBlXSE9PSdXYXJuaW5nJz9tYXBfdGl0bGVbZXJyb3IuZGF0YS5leGNlcHRpb25fdHlwZV06JycsfSl9KTt9CnRoaXMuc2hvd193YXJuaW5nKGVycm9yKTt9ZWxzZXt0aGlzLnNob3dfZXJyb3IoZXJyb3IpO319LHNob3dfd2FybmluZzpmdW5jdGlvbihlcnJvcixvcHRpb25zKXtpZighYWN0aXZlKXtyZXR1cm47fQp2YXIgbWVzc2FnZT1lcnJvci5kYXRhP2Vycm9yLmRhdGEubWVzc2FnZTplcnJvci5tZXNzYWdlO3ZhciB0aXRsZT1fLnN0ci5jYXBpdGFsaXplKGVycm9yLnR5cGUpfHxfdCgiU29tZXRoaW5nIHdlbnQgd3JvbmcgISIpO3JldHVybiB0aGlzLl9kaXNwbGF5V2FybmluZyhtZXNzYWdlLHRpdGxlLG9wdGlvbnMpO30sc2hvd19lcnJvcjpmdW5jdGlvbihlcnJvcil7aWYoIWFjdGl2ZSl7cmV0dXJuO30KdmFyIGRpYWxvZz1uZXcgRXJyb3JEaWFsb2codGhpcyx7dGl0bGU6Xy5zdHIuY2FwaXRhbGl6ZShlcnJvci50eXBlKXx8X3QoIk9kb28gRXJyb3IiKSx9LHttZXNzYWdlOmVycm9yLm1lc3NhZ2UsdHJhY2ViYWNrOmVycm9yLmRhdGEuZGVidWcsfSk7dmFyICRjbGlwYm9hcmRCdG47dmFyIGNsaXBib2FyZDtkaWFsb2cub3BlbmVkKGZ1bmN0aW9uKCl7ZGlhbG9nLiQoIi5vX2Vycm9yX2RldGFpbCIpLm9uKCJzaG93bi5icy5jb2xsYXBzZSIsZnVuY3Rpb24oZSl7ZS50YXJnZXQuc2Nyb2xsVG9wPWUudGFyZ2V0LnNjcm9sbEhlaWdodDt9KTskY2xpcGJvYXJkQnRuPWRpYWxvZy4kKCIub19jbGlwYm9hcmRfYnV0dG9uIik7JGNsaXBib2FyZEJ0bi50b29sdGlwKHt0aXRsZTpfdCgiQ29waWVkICEiKSx0cmlnZ2VyOiJtYW51YWwiLHBsYWNlbWVudDoibGVmdCJ9KTtjbGlwYm9hcmQ9bmV3IHdpbmRvdy5DbGlwYm9hcmRKUygkY2xpcGJvYXJkQnRuWzBdLHt0ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuKF90KCJFcnJvciIpKyI6XG4iK2Vycm9yLm1lc3NhZ2UrIlxuXG4iK2Vycm9yLmRhdGEuZGVidWcpLnRyaW0oKTt9LGNvbnRhaW5lcjpkaWFsb2cuZWwsfSk7Y2xpcGJvYXJkLm9uKCJzdWNjZXNzIixmdW5jdGlvbihlKXtfLmRlZmVyKGZ1bmN0aW9uKCl7JGNsaXBib2FyZEJ0bi50b29sdGlwKCJzaG93Iik7Xy5kZWxheShmdW5jdGlvbigpeyRjbGlwYm9hcmRCdG4udG9vbHRpcCgiaGlkZSIpO30sODAwKTt9KTt9KTt9KTtkaWFsb2cub24oImNsb3NlZCIsdGhpcyxmdW5jdGlvbigpeyRjbGlwYm9hcmRCdG4udG9vbHRpcCgnZGlzcG9zZScpO2NsaXBib2FyZC5kZXN0cm95KCk7fSk7cmV0dXJuIGRpYWxvZy5vcGVuKCk7fSxzaG93X21lc3NhZ2U6ZnVuY3Rpb24oZXhjZXB0aW9uKXtyZXR1cm4gdGhpcy5zaG93X2Vycm9yKHt0eXBlOl90KCJPZG9vIENsaWVudCBFcnJvciIpLG1lc3NhZ2U6ZXhjZXB0aW9uLGRhdGE6e2RlYnVnOiIifX0pO30sX2Rpc3BsYXlXYXJuaW5nOmZ1bmN0aW9uKG1lc3NhZ2UsdGl0bGUsb3B0aW9ucyl7cmV0dXJuIG5ldyBXYXJuaW5nRGlhbG9nKHRoaXMsT2JqZWN0LmFzc2lnbih7fSxvcHRpb25zLHt0aXRsZSx9KSx7bWVzc2FnZSx9KS5vcGVuKCk7fSx9KTt2YXIgRXhjZXB0aW9uSGFuZGxlcj17aW5pdDpmdW5jdGlvbihwYXJlbnQsZXJyb3Ipe30sZGlzcGxheTpmdW5jdGlvbigpe30sfTt2YXIgUmVkaXJlY3RXYXJuaW5nSGFuZGxlcj1XaWRnZXQuZXh0ZW5kKEV4Y2VwdGlvbkhhbmRsZXIse2luaXQ6ZnVuY3Rpb24ocGFyZW50LGVycm9yKXt0aGlzLl9zdXBlcihwYXJlbnQpO3RoaXMuZXJyb3I9ZXJyb3I7fSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgZXJyb3I9dGhpcy5lcnJvcjtuZXcgV2FybmluZ0RpYWxvZyh0aGlzLHt0aXRsZTpfLnN0ci5jYXBpdGFsaXplKGVycm9yLnR5cGUpfHxfdCgiT2RvbyBXYXJuaW5nIiksYnV0dG9uczpbe3RleHQ6ZXJyb3IuZGF0YS5hcmd1bWVudHNbMl0sY2xhc3NlczoiYnRuLXByaW1hcnkiLGNsaWNrOmZ1bmN0aW9uKCl7JC5iYnEucHVzaFN0YXRlKHsnYWN0aW9uJzplcnJvci5kYXRhLmFyZ3VtZW50c1sxXSwnY2lkcyc6JC5iYnEuZ2V0U3RhdGUoKS5jaWRzLH0sMik7c2VsZi5kZXN0cm95KCk7bG9jYXRpb24ucmVsb2FkKCk7fX0se3RleHQ6X3QoIkNhbmNlbCIpLGNsaWNrOmZ1bmN0aW9uKCl7c2VsZi5kZXN0cm95KCk7fSxjbG9zZTp0cnVlfV19LHttZXNzYWdlOmVycm9yLmRhdGEuYXJndW1lbnRzWzBdLH0pLm9wZW4oKTt9fSk7Y29yZS5jcmFzaF9yZWdpc3RyeS5hZGQoJ29kb28uZXhjZXB0aW9ucy5SZWRpcmVjdFdhcm5pbmcnLFJlZGlyZWN0V2FybmluZ0hhbmRsZXIpO2Z1bmN0aW9uIHNlc3Npb25fZXhwaXJlZChjbSl7cmV0dXJue2Rpc3BsYXk6ZnVuY3Rpb24oKXtjbS5zaG93X3dhcm5pbmcoe3R5cGU6X3QoIk9kb28gU2Vzc2lvbiBFeHBpcmVkIiksbWVzc2FnZTpfdCgiWW91ciBPZG9vIHNlc3Npb24gZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggdGhlIGN1cnJlbnQgd2ViIHBhZ2UuIil9KTt9fTt9CmNvcmUuY3Jhc2hfcmVnaXN0cnkuYWRkKCdvZG9vLmh0dHAuU2Vzc2lvbkV4cGlyZWRFeGNlcHRpb24nLHNlc3Npb25fZXhwaXJlZCk7Y29yZS5jcmFzaF9yZWdpc3RyeS5hZGQoJ3dlcmt6ZXVnLmV4Y2VwdGlvbnMuRm9yYmlkZGVuJyxzZXNzaW9uX2V4cGlyZWQpO2NvcmUuY3Jhc2hfcmVnaXN0cnkuYWRkKCc1MDQnLGZ1bmN0aW9uKGNtKXtyZXR1cm57ZGlzcGxheTpmdW5jdGlvbigpe2NtLnNob3dfd2FybmluZyh7dHlwZTpfdCgiUmVxdWVzdCB0aW1lb3V0IiksbWVzc2FnZTpfdCgiVGhlIG9wZXJhdGlvbiB3YXMgaW50ZXJydXB0ZWQuIFRoaXMgdXN1YWxseSBtZWFucyB0aGF0IHRoZSBjdXJyZW50IG9wZXJhdGlvbiBpcyB0YWtpbmcgdG9vIG11Y2ggdGltZS4iKX0pO319O30pO3JldHVybntDcmFzaE1hbmFnZXI6Q3Jhc2hNYW5hZ2VyLEVycm9yRGlhbG9nOkVycm9yRGlhbG9nLFdhcm5pbmdEaWFsb2c6V2FybmluZ0RpYWxvZyxkaXNhYmxlOigpPT5hY3RpdmU9ZmFsc2UsfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvc2Vzc2lvbl9zdG9yYWdlX3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIEFic3RyYWN0U3RvcmFnZVNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U3RvcmFnZVNlcnZpY2UnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBzZXNzaW9uU3RvcmFnZT1yZXF1aXJlKCd3ZWIuc2Vzc2lvblN0b3JhZ2UnKTt2YXIgU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlPUFic3RyYWN0U3RvcmFnZVNlcnZpY2UuZXh0ZW5kKHtzdG9yYWdlOnNlc3Npb25TdG9yYWdlLH0pO2NvcmUuc2VydmljZVJlZ2lzdHJ5LmFkZCgnc2Vzc2lvbl9zdG9yYWdlJyxTZXNzaW9uU3RvcmFnZVNlcnZpY2UpO3JldHVybiBTZXNzaW9uU3RvcmFnZVNlcnZpY2U7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3Rvb2xzL2RlYnVnX21hbmFnZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuRGVidWdNYW5hZ2VyJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgc2Vzc2lvbj1yZXF1aXJlKCd3ZWIuc2Vzc2lvbicpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgUVdlYj1jb3JlLnF3ZWI7dmFyIERlYnVnTWFuYWdlcj1XaWRnZXQuZXh0ZW5kKHt0ZW1wbGF0ZToiV2ViQ2xpZW50LkRlYnVnTWFuYWdlciIseG1sRGVwZW5kZW5jaWVzOlsnL3dlYi9zdGF0aWMvc3JjL3htbC9kZWJ1Zy54bWwnXSxldmVudHM6eyJjbGljayBhW2RhdGEtYWN0aW9uXSI6InBlcmZvcm1fY2FsbGJhY2siLH0saW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9ldmVudHM9bnVsbDt2YXIgZGVidWc9b2Rvby5kZWJ1Zzt0aGlzLmRlYnVnX21vZGU9ZGVidWc7dGhpcy5kZWJ1Z19tb2RlX2hlbHA9ZGVidWcmJmRlYnVnIT09JzEnPycgKCcrZGVidWcrJyknOicnO30sc3RhcnQ6ZnVuY3Rpb24oKXtjb3JlLmJ1cy5vbigncnBjOnJlc3VsdCcsdGhpcyxmdW5jdGlvbihyZXEscmVzcCl7dGhpcy5fZGVidWdfZXZlbnRzKHJlc3AuZGVidWcpO30pO3RoaXMuJGRyb3Bkb3duPXRoaXMuJCgiLm9fZGVidWdfZHJvcGRvd24iKTt0aGlzLl9pc19hZG1pbj1zZXNzaW9uLmlzX3N5c3RlbTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N1cGVyKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGUoKTt9LmJpbmQodGhpcykpO30scGVyZm9ybV9jYWxsYmFjazpmdW5jdGlvbihldnQpe2V2dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBwYXJhbXM9JChldnQudGFyZ2V0KS5kYXRhKCk7dmFyIGNhbGxiYWNrPXBhcmFtcy5hY3Rpb247aWYoY2FsbGJhY2smJnRoaXNbY2FsbGJhY2tdKXt0aGlzW2NhbGxiYWNrXShwYXJhbXMsZXZ0KTt9ZWxzZXtjb25zb2xlLndhcm4oIk5vIGhhbmRsZXIgZm9yICIsY2FsbGJhY2spO319LF9kZWJ1Z19ldmVudHM6ZnVuY3Rpb24oZXZlbnRzKXtpZighdGhpcy5fZXZlbnRzKXtyZXR1cm47fQppZihldmVudHMmJmV2ZW50cy5sZW5ndGgpe3RoaXMuX2V2ZW50cy5wdXNoKGV2ZW50cyk7fQp0aGlzLnRyaWdnZXIoJ3VwZGF0ZS1zdGF0cycsdGhpcy5fZXZlbnRzKTt9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuJGRyb3Bkb3duLmVtcHR5KCkuYXBwZW5kKFFXZWIucmVuZGVyKCdXZWJDbGllbnQuRGVidWdNYW5hZ2VyLkdsb2JhbCcse21hbmFnZXI6dGhpcyx9KSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30sc3BsaXRfYXNzZXRzOmZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uPSQucGFyYW0ucXVlcnlzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYsJ2RlYnVnPWFzc2V0cycpO30sdGVzdHNfYXNzZXRzOmZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uPSQucGFyYW0ucXVlcnlzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYsJ2RlYnVnPWFzc2V0cyx0ZXN0cycpO30scmVnZW5lcmF0ZUFzc2V0czpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGRvbWFpbj11dGlscy5hc3NldHNEb21haW4oKTt0aGlzLl9ycGMoe21vZGVsOidpci5hdHRhY2htZW50JyxtZXRob2Q6J3NlYXJjaCcsYXJnczpbZG9tYWluXSx9KS50aGVuKGZ1bmN0aW9uKGlkcyl7c2VsZi5fcnBjKHttb2RlbDonaXIuYXR0YWNobWVudCcsbWV0aG9kOid1bmxpbmsnLGFyZ3M6W2lkc10sfSkudGhlbih3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkpO30pO30sbGVhdmVfZGVidWdfbW9kZTpmdW5jdGlvbigpe3ZhciBxcz0kLmRlcGFyYW0ucXVlcnlzdHJpbmcoKTtxcy5kZWJ1Zz0nJzt3aW5kb3cubG9jYXRpb24uc2VhcmNoPSc/JyskLnBhcmFtKHFzKTt9LH0pO3JldHVybiBEZWJ1Z01hbmFnZXI7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3dpZGdldHMvbmFtZV9hbmRfc2lnbmF0dXJlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLm5hbWVfYW5kX3NpZ25hdHVyZScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIHV0aWxzPXJlcXVpcmUoJ3dlYi51dGlscycpO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBfdD1jb3JlLl90O3ZhciBOYW1lQW5kU2lnbmF0dXJlPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOid3ZWIuc2lnbl9uYW1lX2FuZF9zaWduYXR1cmUnLHhtbERlcGVuZGVuY2llczpbJy93ZWIvc3RhdGljL3NyYy94bWwvbmFtZV9hbmRfc2lnbmF0dXJlLnhtbCddLGV2ZW50czp7J2lucHV0IC5vX3dlYl9zaWduX25hbWVfaW5wdXQnOidfb25JbnB1dFNpZ25OYW1lJywnY2xpY2sgLm9fd2ViX3NpZ25fc2lnbmF0dXJlJzonX29uQ2xpY2tTaWduYXR1cmUnLCdjaGFuZ2UgLm9fd2ViX3NpZ25fc2lnbmF0dXJlJzonX29uQ2hhbmdlU2lnbmF0dXJlJywnY2xpY2sgLm9fd2ViX3NpZ25fZHJhd19idXR0b24nOidfb25DbGlja1NpZ25EcmF3QnV0dG9uJywnY2xpY2sgLm9fd2ViX3NpZ25fZHJhd19jbGVhciBhJzonX29uQ2xpY2tTaWduRHJhd0NsZWFyJywnY2xpY2sgLm9fd2ViX3NpZ25fYXV0b19idXR0b24nOidfb25DbGlja1NpZ25BdXRvQnV0dG9uJywnY2xpY2sgLm9fd2ViX3NpZ25fYXV0b19zZWxlY3Rfc3R5bGUgYSc6J19vbkNsaWNrU2lnbkF1dG9TZWxlY3RTdHlsZScsJ2NsaWNrIC5vX3dlYl9zaWduX2F1dG9fZm9udF9zZWxlY3Rpb24gYSc6J19vbkNsaWNrU2lnbkF1dG9Gb250U2VsZWN0aW9uJywnbW91c2VvdmVyIC5vX3dlYl9zaWduX2F1dG9fZm9udF9zZWxlY3Rpb24gYSc6J19vbk1vdXNlT3ZlclNpZ25BdXRvRm9udFNlbGVjdGlvbicsJ3RvdWNobW92ZSAub193ZWJfc2lnbl9hdXRvX2ZvbnRfc2VsZWN0aW9uIGEnOidfb25Ub3VjaFN0YXJ0U2lnbkF1dG9Gb250U2VsZWN0aW9uJywnY2xpY2sgLm9fd2ViX3NpZ25fbG9hZF9idXR0b24nOidfb25DbGlja1NpZ25Mb2FkQnV0dG9uJywnY2hhbmdlIC5vX3dlYl9zaWduX2xvYWRfZmlsZSBpbnB1dCc6J19vbkNoYW5nZVNpZ25Mb2FkSW5wdXQnLH0saW5pdDpmdW5jdGlvbihwYXJlbnQsb3B0aW9ucyl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO29wdGlvbnM9b3B0aW9uc3x8e307dGhpcy5odG1sSWQ9Xy51bmlxdWVJZCgpO3RoaXMuZGVmYXVsdE5hbWU9b3B0aW9ucy5kZWZhdWx0TmFtZXx8Jyc7dGhpcy5kZWZhdWx0Rm9udD1vcHRpb25zLmRlZmF1bHRGb250fHwnJzt0aGlzLmRpc3BsYXlTaWduYXR1cmVSYXRpbz1vcHRpb25zLmRpc3BsYXlTaWduYXR1cmVSYXRpb3x8My4wO3RoaXMuc2lnbmF0dXJlVHlwZT1vcHRpb25zLnNpZ25hdHVyZVR5cGV8fCdzaWduYXR1cmUnO3RoaXMuc2lnbk1vZGU9b3B0aW9ucy5tb2RlfHwnZHJhdyc7dGhpcy5ub0lucHV0TmFtZT1vcHRpb25zLm5vSW5wdXROYW1lfHxmYWxzZTt0aGlzLmN1cnJlbnRGb250PTA7dGhpcy5kcmF3VGltZW91dD1udWxsO3RoaXMuZHJhd1ByZXZpZXdUaW1lb3V0PW51bGw7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3JldHVybiBQcm9taXNlLmFsbChbdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3JwYyh7cm91dGU6Jy93ZWIvc2lnbi9nZXRfZm9udHMvJytzZWxmLmRlZmF1bHRGb250fSkudGhlbihmdW5jdGlvbihkYXRhKXtzZWxmLmZvbnRzPWRhdGE7fSldKTt9LHN0YXJ0OmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt0aGlzLiRzaWduYXR1cmVHcm91cD10aGlzLiQoJy5vX3dlYl9zaWduX3NpZ25hdHVyZV9ncm91cCcpO3RoaXMuJHNpZ25hdHVyZUZpZWxkPXRoaXMuJCgnLm9fd2ViX3NpZ25fc2lnbmF0dXJlJyk7dGhpcy4kbmFtZUlucHV0PXRoaXMuJCgnLm9fd2ViX3NpZ25fbmFtZV9pbnB1dCcpO3RoaXMuJG5hbWVJbnB1dEdyb3VwPXRoaXMuJCgnLm9fd2ViX3NpZ25fbmFtZV9ncm91cCcpO3RoaXMuJGRyYXdCdXR0b249dGhpcy4kKCdhLm9fd2ViX3NpZ25fZHJhd19idXR0b24nKTt0aGlzLiRhdXRvQnV0dG9uPXRoaXMuJCgnYS5vX3dlYl9zaWduX2F1dG9fYnV0dG9uJyk7dGhpcy4kbG9hZEJ1dHRvbj10aGlzLiQoJ2Eub193ZWJfc2lnbl9sb2FkX2J1dHRvbicpO3RoaXMuJGRyYXdDbGVhcj10aGlzLiQoJy5vX3dlYl9zaWduX2RyYXdfY2xlYXInKTt0aGlzLiRhdXRvU2VsZWN0U3R5bGU9dGhpcy4kKCcub193ZWJfc2lnbl9hdXRvX3NlbGVjdF9zdHlsZScpO3RoaXMuJGF1dG9Gb250U2VsZWN0aW9uPXRoaXMuJCgnLm9fd2ViX3NpZ25fYXV0b19mb250X3NlbGVjdGlvbicpO3RoaXMuJGF1dG9Gb250TGlzdD10aGlzLiQoJy5vX3dlYl9zaWduX2F1dG9fZm9udF9saXN0Jyk7Zm9yKHZhciBpIGluIHRoaXMuZm9udHMpe3ZhciAkaW1nPSQoJzxpbWcvPicpLmFkZENsYXNzKCdpbWctZmx1aWQnKTt2YXIgJGE9JCgnPGEvPicpLmFkZENsYXNzKCdidG4gcC0wJykuYXBwZW5kKCRpbWcpLmRhdGEoJ2ZvbnROYicsaSk7dGhpcy4kYXV0b0ZvbnRMaXN0LmFwcGVuZCgkYSk7fQp0aGlzLiRsb2FkRmlsZT10aGlzLiQoJy5vX3dlYl9zaWduX2xvYWRfZmlsZScpO3RoaXMuJGxvYWRJbnZhbGlkPXRoaXMuJCgnLm9fd2ViX3NpZ25fbG9hZF9pbnZhbGlkJyk7aWYodGhpcy5mb250cyYmdGhpcy5mb250cy5sZW5ndGg8Mil7dGhpcy4kYXV0b1NlbGVjdFN0eWxlLmhpZGUoKTt9CmlmKHRoaXMubm9JbnB1dE5hbWUpe2lmKHRoaXMuZGVmYXVsdE5hbWU9PT0iIil7dGhpcy4kYXV0b0J1dHRvbi5oaWRlKCk7fQp0aGlzLiRuYW1lSW5wdXRHcm91cC5oaWRlKCk7fQokKHdpbmRvdykub24oJ3Jlc2l6ZS5vX3dlYl9zaWduX25hbWVfYW5kX3NpZ25hdHVyZScsXy5kZWJvdW5jZShmdW5jdGlvbigpe2lmKHNlbGYuaXNEZXN0cm95ZWQoKSl7cmV0dXJuO30Kc2VsZi5yZXNldFNpZ25hdHVyZSgpO30sMjUwKSk7cmV0dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7JCh3aW5kb3cpLm9mZigncmVzaXplLm9fd2ViX3NpZ25fbmFtZV9hbmRfc2lnbmF0dXJlJyk7fSxmb2N1c05hbWU6ZnVuY3Rpb24oKXt0aGlzLiRuYW1lSW5wdXQuZm9jdXMoKTt9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbmFtZUlucHV0LnZhbCgpO30sZ2V0U2lnbmF0dXJlSW1hZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgnZ2V0RGF0YScsJ2ltYWdlJyk7fSxnZXRTaWduYXR1cmVJbWFnZVNyYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdnZXREYXRhJyk7fSxpc1NpZ25hdHVyZUVtcHR5OmZ1bmN0aW9uKCl7dmFyIHNpZ25hdHVyZT10aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdnZXREYXRhJyk7cmV0dXJuIHNpZ25hdHVyZSYmdGhpcy5lbXB0eVNpZ25hdHVyZT90aGlzLmVtcHR5U2lnbmF0dXJlPT09c2lnbmF0dXJlOnRydWU7fSxyZXNldFNpZ25hdHVyZTpmdW5jdGlvbigpe2lmKCF0aGlzLiRzaWduYXR1cmVGaWVsZCl7cmV0dXJuIFByb21pc2UucmVqZWN0KCk7fQp0aGlzLiRzaWduYXR1cmVGaWVsZC5jc3Moe3dpZHRoOid1bnNldCd9KTt2YXIgd2lkdGg9dGhpcy4kc2lnbmF0dXJlRmllbGQud2lkdGgoKTt2YXIgaGVpZ2h0PXBhcnNlSW50KHdpZHRoL3RoaXMuZGlzcGxheVNpZ25hdHVyZVJhdGlvKTt0aGlzLiRzaWduYXR1cmVGaWVsZC5jc3Moe3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsfSk7dGhpcy4kc2lnbmF0dXJlRmllbGQuZW1wdHkoKS5qU2lnbmF0dXJlKHsnZGVjb3ItY29sb3InOicjRDFEMENFJywnYmFja2dyb3VuZC1jb2xvcic6JyNGRkYnLCdjb2xvcic6JyMwMDAnLCdsaW5lV2lkdGgnOjIsJ3dpZHRoJzp3aWR0aCwnaGVpZ2h0JzpoZWlnaHQsfSk7dGhpcy5lbXB0eVNpZ25hdHVyZT10aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdnZXREYXRhJyk7dGhpcy5zZXRNb2RlKHRoaXMuc2lnbk1vZGUsdHJ1ZSk7dGhpcy5mb2N1c05hbWUoKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7fSxzZXRNb2RlOmZ1bmN0aW9uKG1vZGUscmVzZXQpe2lmKHJlc2V0IT09dHJ1ZSYmbW9kZT09PXRoaXMuc2lnbk1vZGUpe3JldHVybjt9CnRoaXMuc2lnbk1vZGU9bW9kZTt0aGlzLiRkcmF3Q2xlYXIudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdGhpcy5zaWduTW9kZSE9PSdkcmF3Jyk7dGhpcy4kYXV0b1NlbGVjdFN0eWxlLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuc2lnbk1vZGUhPT0nYXV0bycpO3RoaXMuJGxvYWRGaWxlLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuc2lnbk1vZGUhPT0nbG9hZCcpO3RoaXMuJGRyYXdCdXR0b24udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsdGhpcy5zaWduTW9kZT09PSdkcmF3Jyk7dGhpcy4kYXV0b0J1dHRvbi50b2dnbGVDbGFzcygnYWN0aXZlJyx0aGlzLnNpZ25Nb2RlPT09J2F1dG8nKTt0aGlzLiRsb2FkQnV0dG9uLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLHRoaXMuc2lnbk1vZGU9PT0nbG9hZCcpO3RoaXMuJHNpZ25hdHVyZUZpZWxkLmpTaWduYXR1cmUodGhpcy5zaWduTW9kZT09PSdkcmF3Jz8nZW5hYmxlJzonZGlzYWJsZScpO3RoaXMuJHNpZ25hdHVyZUZpZWxkLmpTaWduYXR1cmUoJ3Jlc2V0Jyk7aWYodGhpcy5zaWduTW9kZT09PSdhdXRvJyl7dGhpcy5fZHJhd0N1cnJlbnROYW1lKCk7fWVsc2V7dGhpcy4kYXV0b0ZvbnRTZWxlY3Rpb24uYWRkQ2xhc3MoJ2Qtbm9uZScpO30KaWYodGhpcy5zaWduTW9kZSE9PSdsb2FkJyl7dGhpcy4kbG9hZEludmFsaWQuYWRkQ2xhc3MoJ2Qtbm9uZScpO319LHZhbGlkYXRlU2lnbmF0dXJlOmZ1bmN0aW9uKCl7dmFyIG5hbWU9dGhpcy5nZXROYW1lKCk7dmFyIGlzU2lnbmF0dXJlRW1wdHk9dGhpcy5pc1NpZ25hdHVyZUVtcHR5KCk7dGhpcy4kbmFtZUlucHV0LnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdvX2hhc19lcnJvcicsIW5hbWUpLmZpbmQoJy5mb3JtLWNvbnRyb2wsIC5jdXN0b20tc2VsZWN0JykudG9nZ2xlQ2xhc3MoJ2lzLWludmFsaWQnLCFuYW1lKTt0aGlzLiRzaWduYXR1cmVHcm91cC50b2dnbGVDbGFzcygnYm9yZGVyLWRhbmdlcicsaXNTaWduYXR1cmVFbXB0eSk7cmV0dXJuIG5hbWUmJiFpc1NpZ25hdHVyZUVtcHR5O30sX2RyYXdDdXJyZW50TmFtZTpmdW5jdGlvbigpe3ZhciBmb250PXRoaXMuZm9udHNbdGhpcy5jdXJyZW50Rm9udF07dmFyIHRleHQ9dGhpcy5fZ2V0Q2xlYW5lZE5hbWUoKTt2YXIgY2FudmFzPXRoaXMuJHNpZ25hdHVyZUZpZWxkLmZpbmQoJ2NhbnZhcycpWzBdO3ZhciBpbWc9dGhpcy5fZ2V0U1ZHVGV4dChmb250LHRleHQsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO3JldHVybiB0aGlzLl9wcmludEltYWdlKGltZyk7fSxfZ2V0Q2xlYW5lZE5hbWU6ZnVuY3Rpb24oKXt2YXIgcmVnZXhSZW1vdmVTcGVjaWFsQ2hhcmFjdGVycz0vW15cd1x1MDBFMC1cdTAwRkMtJyIgXS9nO3ZhciB0ZXh0PXRoaXMuZ2V0TmFtZSgpLnJlcGxhY2UocmVnZXhSZW1vdmVTcGVjaWFsQ2hhcmFjdGVycywnJyk7aWYodGhpcy5zaWduYXR1cmVUeXBlPT09J2luaXRpYWwnKXtyZXR1cm4odGV4dC5zcGxpdCgnICcpLm1hcChmdW5jdGlvbih3KXtyZXR1cm4gd1swXTt9KS5qb2luKCcuJykrJy4nKTt9CnJldHVybiB0ZXh0O30sX2dldFNWR1RleHQ6ZnVuY3Rpb24oZm9udCx0ZXh0LHdpZHRoLGhlaWdodCl7dmFyICRzdmc9JChjb3JlLnF3ZWIucmVuZGVyKCd3ZWIuc2lnbl9zdmdfdGV4dCcse3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsZm9udDpmb250LHRleHQ6dGV4dCx0eXBlOnRoaXMuc2lnbmF0dXJlVHlwZSx9KSk7JHN2Zy5hdHRyKHsneG1sbnMnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsJ3htbG5zOnhsaW5rJzoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsfSk7cmV0dXJuImRhdGE6aW1hZ2Uvc3ZnK3htbCwiK2VuY29kZVVSSSgkc3ZnWzBdLm91dGVySFRNTCk7fSxfcHJpbnRJbWFnZTpmdW5jdGlvbihpbWdTcmMpe3ZhciBzZWxmPXRoaXM7dmFyIGltYWdlPW5ldyBJbWFnZTtpbWFnZS5vbmxvYWQ9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoc2VsZi5kcmF3VGltZW91dCk7c2VsZi5kcmF3VGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHdpZHRoPTA7dmFyIGhlaWdodD0wO3ZhciByYXRpbz1pbWFnZS53aWR0aC9pbWFnZS5oZWlnaHQ7dmFyICRjYW52YXM9c2VsZi4kc2lnbmF0dXJlRmllbGQuZmluZCgnY2FudmFzJyk7dmFyIGNvbnRleHQ9JGNhbnZhc1swXS5nZXRDb250ZXh0KCcyZCcpO2lmKGltYWdlLndpZHRoLyRjYW52YXNbMF0ud2lkdGg+aW1hZ2UuaGVpZ2h0LyRjYW52YXNbMF0uaGVpZ2h0KXt3aWR0aD0kY2FudmFzWzBdLndpZHRoO2hlaWdodD1wYXJzZUludCh3aWR0aC9yYXRpbyk7fWVsc2V7aGVpZ2h0PSRjYW52YXNbMF0uaGVpZ2h0O3dpZHRoPXBhcnNlSW50KGhlaWdodCpyYXRpbyk7fQpzZWxmLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdyZXNldCcpO3ZhciBpZ25vcmVkQ29udGV4dD1fLnBpY2soY29udGV4dCxbJ3NoYWRvd09mZnNldFgnLCdzaGFkb3dPZmZzZXRZJ10pO18uZXh0ZW5kKGNvbnRleHQse3NoYWRvd09mZnNldFg6MCxzaGFkb3dPZmZzZXRZOjB9KTtjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwwLDAsaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0LCgkY2FudmFzWzBdLndpZHRoLXdpZHRoKS8yLCgkY2FudmFzWzBdLmhlaWdodC1oZWlnaHQpLzIsd2lkdGgsaGVpZ2h0KTtfLmV4dGVuZChjb250ZXh0LGlnbm9yZWRDb250ZXh0KTtzZWxmLnRyaWdnZXJfdXAoJ3NpZ25hdHVyZV9jaGFuZ2VkJyk7fSwwKTt9O2ltYWdlLnNyYz1pbWdTcmM7fSxfc2V0Rm9udDpmdW5jdGlvbihpbmRleCl7aWYoaW5kZXghPT10aGlzLmN1cnJlbnRGb250KXt0aGlzLmN1cnJlbnRGb250PWluZGV4O3RoaXMuX2RyYXdDdXJyZW50TmFtZSgpO319LF91cGRhdGVQcmV2aWV3QnV0dG9uczpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMuZHJhd1ByZXZpZXdUaW1lb3V0KTt0aGlzLmRyYXdQcmV2aWV3VGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGhlaWdodD0xMDA7dmFyIHdpZHRoPXBhcnNlSW50KGhlaWdodCpzZWxmLmRpc3BsYXlTaWduYXR1cmVSYXRpbyk7dmFyICRleGlzdGluZ0J1dHRvbnM9c2VsZi4kYXV0b0ZvbnRMaXN0LmZpbmQoJ2EnKTtmb3IodmFyIGk9MDtpPHNlbGYuZm9udHMubGVuZ3RoO2krKyl7dmFyIGltZ1NyYz1zZWxmLl9nZXRTVkdUZXh0KHNlbGYuZm9udHNbaV0sc2VsZi5fZ2V0Q2xlYW5lZE5hbWUoKXx8X3QoIllvdXIgbmFtZSIpLHdpZHRoLGhlaWdodCk7JGV4aXN0aW5nQnV0dG9ucy5lcShpKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLGltZ1NyYyk7fX0sMCk7fSxfd2FpdEZvclNpZ25hdHVyZU5vdEVtcHR5OmZ1bmN0aW9uKGRlZil7ZGVmPWRlZnx8JC5EZWZlcnJlZCgpO2lmKCF0aGlzLmlzU2lnbmF0dXJlRW1wdHkoKSl7dGhpcy50cmlnZ2VyX3VwKCdzaWduYXR1cmVfY2hhbmdlZCcpO2RlZi5yZXNvbHZlKCk7fWVsc2V7c2V0VGltZW91dCh0aGlzLl93YWl0Rm9yU2lnbmF0dXJlTm90RW1wdHkuYmluZCh0aGlzLGRlZiksMTApO30KcmV0dXJuIGRlZjt9LF9vbkNsaWNrU2lnbmF0dXJlOmZ1bmN0aW9uKGV2KXt0aGlzLiRhdXRvRm9udFNlbGVjdGlvbi5hZGRDbGFzcygnZC1ub25lJyk7fSxfb25DbGlja1NpZ25BdXRvQnV0dG9uOmZ1bmN0aW9uKGV2KXtldi5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuc2V0TW9kZSgnYXV0bycpO30sX29uQ2xpY2tTaWduQXV0b0ZvbnRTZWxlY3Rpb246ZnVuY3Rpb24oZXYpe3RoaXMuJGF1dG9Gb250U2VsZWN0aW9uLmFkZENsYXNzKCdkLW5vbmUnKS5yZW1vdmVDbGFzcygnZC1mbGV4JykuY3NzKCd3aWR0aCcsMCk7dGhpcy5fc2V0Rm9udChwYXJzZUludCgkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2ZvbnQtbmInKSkpO30sX29uQ2xpY2tTaWduQXV0b1NlbGVjdFN0eWxlOmZ1bmN0aW9uKGV2KXt2YXIgc2VsZj10aGlzO3ZhciB3aWR0aD1NYXRoLm1pbihzZWxmLiRhdXRvRm9udFNlbGVjdGlvbi5maW5kKCdhJykuZmlyc3QoKS5oZWlnaHQoKSpzZWxmLmRpc3BsYXlTaWduYXR1cmVSYXRpbyoxLjI1LHRoaXMuJHNpZ25hdHVyZUZpZWxkLndpZHRoKCkpO2V2LnByZXZlbnREZWZhdWx0KCk7c2VsZi5fdXBkYXRlUHJldmlld0J1dHRvbnMoKTt0aGlzLiRhdXRvRm9udFNlbGVjdGlvbi5yZW1vdmVDbGFzcygnZC1ub25lJykuYWRkQ2xhc3MoJ2QtZmxleCcpO3RoaXMuJGF1dG9Gb250U2VsZWN0aW9uLnNob3coKS5hbmltYXRlKHsnd2lkdGgnOndpZHRofSw1MDAsZnVuY3Rpb24oKXt9KTt9LF9vbkNsaWNrU2lnbkRyYXdCdXR0b246ZnVuY3Rpb24oZXYpe2V2LnByZXZlbnREZWZhdWx0KCk7dGhpcy5zZXRNb2RlKCdkcmF3Jyk7fSxfb25DbGlja1NpZ25EcmF3Q2xlYXI6ZnVuY3Rpb24oZXYpe2V2LnByZXZlbnREZWZhdWx0KCk7dGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgncmVzZXQnKTt9LF9vbkNsaWNrU2lnbkxvYWRCdXR0b246ZnVuY3Rpb24oZXYpe2V2LnByZXZlbnREZWZhdWx0KCk7dGhpcy4kbG9hZEZpbGUuZmluZCgnaW5wdXQnKS5jbGljaygpO3RoaXMuc2V0TW9kZSgnbG9hZCcpO30sX29uQ2hhbmdlU2lnbmF0dXJlOmZ1bmN0aW9uKGV2KXt0aGlzLnRyaWdnZXJfdXAoJ3NpZ25hdHVyZV9jaGFuZ2VkJyk7fSxfb25DaGFuZ2VTaWduTG9hZElucHV0OmZ1bmN0aW9uKGV2KXt2YXIgc2VsZj10aGlzO3ZhciBmPWV2LnRhcmdldC5maWxlc1swXTtpZihmPT09dW5kZWZpbmVkKXtyZXR1cm4gZmFsc2U7fQppZihmLnR5cGUuc3Vic3RyKDAsNSkhPT0naW1hZ2UnKXt0aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdyZXNldCcpO3RoaXMuJGxvYWRJbnZhbGlkLnJlbW92ZUNsYXNzKCdkLW5vbmUnKTtyZXR1cm4gZmFsc2U7fQp0aGlzLiRsb2FkSW52YWxpZC5hZGRDbGFzcygnZC1ub25lJyk7dXRpbHMuZ2V0RGF0YVVSTEZyb21GaWxlKGYpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtzZWxmLl9wcmludEltYWdlKHJlc3VsdCk7fSk7fSxfb25JbnB1dFNpZ25OYW1lOmZ1bmN0aW9uKGV2KXtpZih0aGlzLnNpZ25Nb2RlIT09J2F1dG8nKXtyZXR1cm47fQp0aGlzLl9kcmF3Q3VycmVudE5hbWUoKTtpZighdGhpcy4kYXV0b0ZvbnRTZWxlY3Rpb24uaGFzQ2xhc3MoJ2Qtbm9uZScpKXt0aGlzLl91cGRhdGVQcmV2aWV3QnV0dG9ucygpO319LF9vbk1vdXNlT3ZlclNpZ25BdXRvRm9udFNlbGVjdGlvbjpmdW5jdGlvbihldil7dGhpcy5fc2V0Rm9udChwYXJzZUludCgkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2ZvbnQtbmInKSkpO30sX29uVG91Y2hTdGFydFNpZ25BdXRvRm9udFNlbGVjdGlvbjpmdW5jdGlvbihldil7dGhpcy5fc2V0Rm9udChwYXJzZUludCgkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2ZvbnQtbmInKSkpO30sfSk7cmV0dXJue05hbWVBbmRTaWduYXR1cmU6TmFtZUFuZFNpZ25hdHVyZSx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy93aWRnZXRzL25vdGlmaWNhdGlvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5Ob3RpZmljYXRpb24nLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgTm90aWZpY2F0aW9uPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOidOb3RpZmljYXRpb24nLGV2ZW50czp7J2hpZGRlbi5icy50b2FzdCc6J19vbkNsb3NlJywnY2xpY2sgLm9fbm90aWZpY2F0aW9uX2J1dHRvbnMgYnV0dG9uJzonX29uQ2xpY2tCdXR0b24nLCdtb3VzZWVudGVyJzonX29uTW91c2VFbnRlcicsJ21vdXNlbGVhdmUnOidfb25Nb3VzZUxlYXZlJyx9LF9hdXRvQ2xvc2VEZWxheToyNTAwLF9hbmltYXRpb246dHJ1ZSxpbml0OmZ1bmN0aW9uKHBhcmVudCxwYXJhbXMpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnRpdGxlPXBhcmFtcy50aXRsZTt0aGlzLnN1YnRpdGxlPXBhcmFtcy5zdWJ0aXRsZTt0aGlzLm1lc3NhZ2U9cGFyYW1zLm1lc3NhZ2U7dGhpcy5idXR0b25zPXBhcmFtcy5idXR0b25zfHxbXTt0aGlzLnN0aWNreT0hIXRoaXMuYnV0dG9ucy5sZW5ndGh8fCEhcGFyYW1zLnN0aWNreTt0aGlzLnR5cGU9cGFyYW1zLnR5cGU9PT11bmRlZmluZWQ/J3dhcm5pbmcnOnBhcmFtcy50eXBlO3RoaXMuY2xhc3NOYW1lPXBhcmFtcy5jbGFzc05hbWV8fCcnO3RoaXMuX2Nsb3NlQ2FsbGJhY2s9cGFyYW1zLm9uQ2xvc2U7aWYodGhpcy50eXBlPT09J2Rhbmdlcicpe3RoaXMuaWNvbj0nZmEtZXhjbGFtYXRpb24nO3RoaXMuY2xhc3NOYW1lKz0nIGJnLWRhbmdlcic7fWVsc2UgaWYodGhpcy50eXBlPT09J3dhcm5pbmcnKXt0aGlzLmljb249J2ZhLWxpZ2h0YnVsYi1vJzt0aGlzLmNsYXNzTmFtZSs9JyBiZy13YXJuaW5nJzt9ZWxzZSBpZih0aGlzLnR5cGU9PT0nc3VjY2Vzcycpe3RoaXMuaWNvbj0nZmEtY2hlY2snO3RoaXMuY2xhc3NOYW1lKz0nIGJnLXN1Y2Nlc3MnO31lbHNlIGlmKHRoaXMudHlwZT09PSdpbmZvJyl7dGhpcy5pY29uPSdmYS1pbmZvJzt0aGlzLmNsYXNzTmFtZSs9JyBiZy1pbmZvJzt9CmlmKHRoaXMuYnV0dG9ucyYmdGhpcy5idXR0b25zLmxlbmd0aCl7dGhpcy5pY29uPSdmYS1xdWVzdGlvbi1jaXJjbGUtbyc7fX0sc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLiRlbC50b2FzdCh7YW5pbWF0aW9uOnRoaXMuX2FuaW1hdGlvbixhdXRvaGlkZTpmYWxzZSx9KTt2b2lkIHRoaXMuJGVsWzBdLm9mZnNldFdpZHRoO2lmKCF0aGlzLnN0aWNreSl7dGhpcy5hdXRvaGlkZT1fLmNhbmNlbGxhYmxlVGhyb3R0bGVSZW1vdmVNZVNvb24odGhpcy5jbG9zZSx0aGlzLl9hdXRvQ2xvc2VEZWxheSx7bGVhZGluZzpmYWxzZX0pO3RoaXMuJGVsLm9uKCdzaG93bi5icy50b2FzdCcsKCk9Pnt0aGlzLmF1dG9oaWRlKCk7fSk7fQp0aGlzLiRlbC50b2FzdCgnc2hvdycpO3JldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy4kZWwudG9hc3QoJ2Rpc3Bvc2UnKTt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxjbG9zZTpmdW5jdGlvbihzaWxlbnQpe3RoaXMuc2lsZW50PXNpbGVudDt0aGlzLiRlbC50b2FzdCgnaGlkZScpO3ZhciBzZWxmPXRoaXM7dGhpcy4kZWwub25lKCdzaG93bi5icy50b2FzdCcsZnVuY3Rpb24oKXtzZWxmLiRlbC50b2FzdCgnaGlkZScpO30pO30sX29uQ2xpY2tCdXR0b246ZnVuY3Rpb24oZXYpe2V2LnByZXZlbnREZWZhdWx0KCk7aWYodGhpcy5fYnV0dG9uQ2xpY2tlZCl7cmV0dXJuO30KdGhpcy5fYnV0dG9uQ2xpY2tlZD10cnVlO3ZhciBpbmRleD0kKGV2LmN1cnJlbnRUYXJnZXQpLmluZGV4KCk7dmFyIGJ1dHRvbj10aGlzLmJ1dHRvbnNbaW5kZXhdO2lmKGJ1dHRvbi5jbGljayl7YnV0dG9uLmNsaWNrKCk7fQp0aGlzLmNsb3NlKHRydWUpO30sX29uQ2xvc2U6ZnVuY3Rpb24oZXYpe3RoaXMudHJpZ2dlcl91cCgnY2xvc2UnKTtpZighdGhpcy5zaWxlbnQmJiF0aGlzLl9idXR0b25DbGlja2VkKXtpZih0aGlzLl9jbG9zZUNhbGxiYWNrKXt0aGlzLl9jbG9zZUNhbGxiYWNrKCk7fX0KdGhpcy5kZXN0cm95KCk7fSxfb25Nb3VzZUVudGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc3RpY2t5KXt0aGlzLmF1dG9oaWRlLmNhbmNlbCgpO319LF9vbk1vdXNlTGVhdmU6ZnVuY3Rpb24oKXtpZighdGhpcy5zdGlja3kpe3RoaXMuYXV0b2hpZGUoKTt9fSx9KTtyZXR1cm4gTm90aWZpY2F0aW9uO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy93aWRnZXRzL3JhaW5ib3dfbWFuLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLlJhaW5ib3dNYW4nLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBfdD1jb3JlLl90O3ZhciBSYWluYm93TWFuPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOidyYWluYm93X21hbi5ub3RpZmljYXRpb24nLHhtbERlcGVuZGVuY2llczpbJy93ZWIvc3RhdGljL3NyYy94bWwvcmFpbmJvd19tYW4ueG1sJ10saW5pdDpmdW5jdGlvbihvcHRpb25zKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHJhaW5ib3dEZWxheT17c2xvdzo0NTAwLG1lZGl1bTozNTAwLGZhc3Q6MjAwMCxubzpmYWxzZX07dGhpcy5vcHRpb25zPV8uZGVmYXVsdHMob3B0aW9uc3x8e30se2ZhZGVvdXQ6J21lZGl1bScsaW1nX3VybDonL3dlYi9zdGF0aWMvc3JjL2ltZy9zbWlsZS5zdmcnLG1lc3NhZ2U6X3QoJ1dlbGwgRG9uZSEnKSx9KTt0aGlzLmRlbGF5PXJhaW5ib3dEZWxheVt0aGlzLm9wdGlvbnMuZmFkZW91dF07fSxzdGFydDpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2NvcmUuYnVzLm9uKCdjbGljaycsc2VsZixmdW5jdGlvbihldil7aWYoZXYub3JpZ2luYWxFdmVudCYmZXYudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdvX3Jld2FyZCcpPT09LTEpe3RoaXMuZGVzdHJveSgpO319KTt9KTtpZih0aGlzLmRlbGF5KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi4kZWwuYWRkQ2xhc3MoJ29fcmV3YXJkX2ZhZGluZycpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmRlc3Ryb3koKTt9LDYwMCk7fSx0aGlzLmRlbGF5KTt9CnRoaXMuJCgnLm9fcmV3YXJkX21zZ19jb250ZW50JykuYXBwZW5kKHRoaXMub3B0aW9ucy5tZXNzYWdlKTtyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO319KTtyZXR1cm4gUmFpbmJvd01hbjt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvd2lkZ2V0cy9jb2xvcnBpY2tlcl9kaWFsb2cuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuQ29sb3JwaWNrZXJEaWFsb2cnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgRGlhbG9nPXJlcXVpcmUoJ3dlYi5EaWFsb2cnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgQ29sb3JwaWNrZXJEaWFsb2c9RGlhbG9nLmV4dGVuZCh7eG1sRGVwZW5kZW5jaWVzOihEaWFsb2cucHJvdG90eXBlLnhtbERlcGVuZGVuY2llc3x8W10pLmNvbmNhdChbJy93ZWIvc3RhdGljL3NyYy94bWwvY29sb3JwaWNrZXJfZGlhbG9nLnhtbCddKSx0ZW1wbGF0ZTonQ29sb3JwaWNrZXJEaWFsb2cnLGV2ZW50czpfLmV4dGVuZCh7fSxEaWFsb2cucHJvdG90eXBlLmV2ZW50c3x8e30seydtb3VzZWRvd24gLm9fY29sb3JfcGlja19hcmVhJzonX29uTW91c2VEb3duUGlja2VyJywnbW91c2Vkb3duIC5vX2NvbG9yX3NsaWRlcic6J19vbk1vdXNlRG93blNsaWRlcicsJ21vdXNlZG93biAub19vcGFjaXR5X3NsaWRlcic6J19vbk1vdXNlRG93bk9wYWNpdHlTbGlkZXInLCdjaGFuZ2UgLm9fY29sb3JfcGlja2VyX2lucHV0cyc6J19vbkNoYW5nZUlucHV0cycsfSksaW5pdDpmdW5jdGlvbihwYXJlbnQsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt0aGlzLl9zdXBlcihwYXJlbnQsXy5leHRlbmQoe3NpemU6J21lZGl1bScsdGl0bGU6X3QoJ1BpY2sgYSBjb2xvcicpLGJ1dHRvbnM6W3t0ZXh0Ol90KCdDaG9vc2UnKSxjbGFzc2VzOididG4tcHJpbWFyeScsY2xvc2U6dHJ1ZSxjbGljazp0aGlzLl9vbkZpbmFsUGljay5iaW5kKHRoaXMpfSx7dGV4dDpfdCgnRGlzY2FyZCcpLGNsb3NlOnRydWV9LF0sfSxvcHRpb25zKSk7dGhpcy50cmlnZ2VyX3VwKCdnZXRSZWNvcmRJbmZvJyx7cmVjb3JkSW5mbzpvcHRpb25zLGNhbGxiYWNrOmZ1bmN0aW9uKHJlY29yZEluZm8pe18uZGVmYXVsdHMob3B0aW9ucyxyZWNvcmRJbmZvKTt9LH0pO3RoaXMucGlja2VyRmxhZz1mYWxzZTt0aGlzLnNsaWRlckZsYWc9ZmFsc2U7dGhpcy5vcGFjaXR5U2xpZGVyRmxhZz1mYWxzZTt0aGlzLmNvbG9yQ29tcG9uZW50cz17fTt2YXIgc2VsZj10aGlzO3ZhciAkYm9keT0kKGRvY3VtZW50LmJvZHkpOyRib2R5Lm9uKCdtb3VzZW1vdmUuY29sb3JwaWNrZXInLF8udGhyb3R0bGUoZnVuY3Rpb24oZXYpe3NlbGYuX29uTW91c2VNb3ZlUGlja2VyKGV2KTtzZWxmLl9vbk1vdXNlTW92ZVNsaWRlcihldik7c2VsZi5fb25Nb3VzZU1vdmVPcGFjaXR5U2xpZGVyKGV2KTt9LDEwKSk7JGJvZHkub24oJ21vdXNldXAuY29sb3JwaWNrZXInLF8udGhyb3R0bGUoZnVuY3Rpb24oZXYpe3NlbGYucGlja2VyRmxhZz1mYWxzZTtzZWxmLnNsaWRlckZsYWc9ZmFsc2U7c2VsZi5vcGFjaXR5U2xpZGVyRmxhZz1mYWxzZTt9LDEwKSk7dGhpcy5vcHRpb25zPV8uY2xvbmUob3B0aW9ucyk7fSxzdGFydDpmdW5jdGlvbigpe3RoaXMuJGNvbG9ycGlja2VyQXJlYT10aGlzLiQoJy5vX2NvbG9yX3BpY2tfYXJlYScpO3RoaXMuJGNvbG9ycGlja2VyUG9pbnRlcj10aGlzLiQoJy5vX3BpY2tlcl9wb2ludGVyJyk7dGhpcy4kY29sb3JTbGlkZXI9dGhpcy4kKCcub19jb2xvcl9zbGlkZXInKTt0aGlzLiRjb2xvclNsaWRlclBvaW50ZXI9dGhpcy4kKCcub19zbGlkZXJfcG9pbnRlcicpO3RoaXMuJG9wYWNpdHlTbGlkZXI9dGhpcy4kKCcub19vcGFjaXR5X3NsaWRlcicpO3RoaXMuJG9wYWNpdHlTbGlkZXJQb2ludGVyPXRoaXMuJCgnLm9fb3BhY2l0eV9wb2ludGVyJyk7dmFyIGRlZmF1bHRDb2xvcj10aGlzLm9wdGlvbnMuZGVmYXVsdENvbG9yfHwnI0ZGMDAwMCc7dmFyIHJnYmE9Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydENvbG9yVG9SZ2JhKGRlZmF1bHRDb2xvcik7aWYocmdiYSl7dGhpcy5fdXBkYXRlUmdiYShyZ2JhLnJlZCxyZ2JhLmdyZWVuLHJnYmEuYmx1ZSxyZ2JhLm9wYWNpdHkpO30KdGhpcy5vcGVuZWQoKS50aGVuKHRoaXMuX3VwZGF0ZVVJLmJpbmQodGhpcykpO3JldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOyQoZG9jdW1lbnQuYm9keSkub2ZmKCcuY29sb3JwaWNrZXInKTt9LF91cGRhdGVVSTpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7Xy5lYWNoKHRoaXMuY29sb3JDb21wb25lbnRzLGZ1bmN0aW9uKHZhbHVlLGNvbG9yKXtzZWxmLiQoXy5zdHIuc3ByaW50ZignLm9fJXNfaW5wdXQnLGNvbG9yKSkudmFsKHZhbHVlKTt9KTt0aGlzLiQoJy5vX2NvbG9yX3ByZXZpZXcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLHRoaXMuY29sb3JDb21wb25lbnRzLmNzc0NvbG9yKTt0aGlzLiRjb2xvcnBpY2tlckFyZWEuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyxfLnN0ci5zcHJpbnRmKCdoc2woJXMsIDEwMCUlLCA1MCUlKScsdGhpcy5jb2xvckNvbXBvbmVudHMuaHVlKSk7dmFyIHRvcD0oMTAwLXRoaXMuY29sb3JDb21wb25lbnRzLmxpZ2h0bmVzcykqdGhpcy4kY29sb3JwaWNrZXJBcmVhLmhlaWdodCgpLzEwMDt2YXIgbGVmdD10aGlzLmNvbG9yQ29tcG9uZW50cy5zYXR1cmF0aW9uKnRoaXMuJGNvbG9ycGlja2VyQXJlYS53aWR0aCgpLzEwMDt0aGlzLiRjb2xvcnBpY2tlclBvaW50ZXIuY3NzKHt0b3A6KHRvcC01KSsncHgnLGxlZnQ6KGxlZnQtNSkrJ3B4Jyx9KTt2YXIgaGVpZ2h0PXRoaXMuJGNvbG9yU2xpZGVyLmhlaWdodCgpO3ZhciB5PXRoaXMuY29sb3JDb21wb25lbnRzLmh1ZSpoZWlnaHQvMzYwO3RoaXMuJGNvbG9yU2xpZGVyUG9pbnRlci5jc3MoJ3RvcCcsTWF0aC5yb3VuZCh5LTIpKTtpZighdGhpcy5vcHRpb25zLm5vVHJhbnNwYXJlbmN5KXt2YXIgaGVpZ2h0T3BhY2l0eT10aGlzLiRvcGFjaXR5U2xpZGVyLmhlaWdodCgpO3ZhciB6PWhlaWdodE9wYWNpdHkqKDEtdGhpcy5jb2xvckNvbXBvbmVudHMub3BhY2l0eS8xMDAuMCk7dGhpcy4kb3BhY2l0eVNsaWRlclBvaW50ZXIuY3NzKCd0b3AnLE1hdGgucm91bmQoei0yKSk7dGhpcy4kb3BhY2l0eVNsaWRlci5jc3MoJ2JhY2tncm91bmQnLCdsaW5lYXItZ3JhZGllbnQoJyt0aGlzLmNvbG9yQ29tcG9uZW50cy5oZXgrJyAwJSwgdHJhbnNwYXJlbnQgMTAwJSknKTt9fSxfdXBkYXRlSGV4OmZ1bmN0aW9uKGhleCl7dmFyIHJnYj1Db2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0SGV4VG9SZ2JhKGhleCk7aWYoIXJnYil7cmV0dXJuO30KXy5leHRlbmQodGhpcy5jb2xvckNvbXBvbmVudHMse2hleDpoZXh9LHJnYixDb2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0UmdiVG9Ic2wocmdiLnJlZCxyZ2IuZ3JlZW4scmdiLmJsdWUpKTt0aGlzLl91cGRhdGVDc3NDb2xvcigpO30sX3VwZGF0ZVJnYmE6ZnVuY3Rpb24ocixnLGIsYSl7dmFyIGhleD1Db2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0UmdiVG9IZXgocixnLGIpO2lmKCFoZXgpe3JldHVybjt9Cl8uZXh0ZW5kKHRoaXMuY29sb3JDb21wb25lbnRzLHtyZWQ6cixncmVlbjpnLGJsdWU6Yn0sYT09PXVuZGVmaW5lZD97fTp7b3BhY2l0eTphfSxoZXgsQ29sb3JwaWNrZXJEaWFsb2cuY29udmVydFJnYlRvSHNsKHIsZyxiKSk7dGhpcy5fdXBkYXRlQ3NzQ29sb3IoKTt9LF91cGRhdGVIc2w6ZnVuY3Rpb24oaCxzLGwpe3ZhciByZ2I9Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydEhzbFRvUmdiKGgscyxsKTtpZighcmdiKXtyZXR1cm47fQpfLmV4dGVuZCh0aGlzLmNvbG9yQ29tcG9uZW50cyx7aHVlOmgsc2F0dXJhdGlvbjpzLGxpZ2h0bmVzczpsfSxyZ2IsQ29sb3JwaWNrZXJEaWFsb2cuY29udmVydFJnYlRvSGV4KHJnYi5yZWQscmdiLmdyZWVuLHJnYi5ibHVlKSk7dGhpcy5fdXBkYXRlQ3NzQ29sb3IoKTt9LF91cGRhdGVPcGFjaXR5OmZ1bmN0aW9uKGEpe2lmKGE8MHx8YT4xMDApe3JldHVybjt9Cl8uZXh0ZW5kKHRoaXMuY29sb3JDb21wb25lbnRzLHtvcGFjaXR5OmF9KTt0aGlzLl91cGRhdGVDc3NDb2xvcigpO30sX3VwZGF0ZUNzc0NvbG9yOmZ1bmN0aW9uKCl7Xy5leHRlbmQodGhpcy5jb2xvckNvbXBvbmVudHMse2Nzc0NvbG9yOkNvbG9ycGlja2VyRGlhbG9nLmZvcm1hdENvbG9yKHRoaXMuY29sb3JDb21wb25lbnRzKX0pO30sX29uTW91c2VEb3duUGlja2VyOmZ1bmN0aW9uKGV2KXt0aGlzLnBpY2tlckZsYWc9dHJ1ZTt0aGlzLl9vbk1vdXNlTW92ZVBpY2tlcihldik7fSxfb25Nb3VzZU1vdmVQaWNrZXI6ZnVuY3Rpb24oZXYpe2lmKCF0aGlzLnBpY2tlckZsYWcpe3JldHVybjt9CnZhciBvZmZzZXQ9dGhpcy4kY29sb3JwaWNrZXJBcmVhLm9mZnNldCgpO3ZhciB0b3A9ZXYucGFnZVktb2Zmc2V0LnRvcDt2YXIgbGVmdD1ldi5wYWdlWC1vZmZzZXQubGVmdDt2YXIgc2F0dXJhdGlvbj1NYXRoLnJvdW5kKDEwMCpsZWZ0L3RoaXMuJGNvbG9ycGlja2VyQXJlYS53aWR0aCgpKTt2YXIgbGlnaHRuZXNzPU1hdGgucm91bmQoMTAwKih0aGlzLiRjb2xvcnBpY2tlckFyZWEuaGVpZ2h0KCktdG9wKS90aGlzLiRjb2xvcnBpY2tlckFyZWEuaGVpZ2h0KCkpO3NhdHVyYXRpb249dXRpbHMuY29uZmluZShzYXR1cmF0aW9uLDAsMTAwKTtsaWdodG5lc3M9dXRpbHMuY29uZmluZShsaWdodG5lc3MsMCwxMDApO3RoaXMuX3VwZGF0ZUhzbCh0aGlzLmNvbG9yQ29tcG9uZW50cy5odWUsc2F0dXJhdGlvbixsaWdodG5lc3MpO3RoaXMuX3VwZGF0ZVVJKCk7fSxfb25Nb3VzZURvd25TbGlkZXI6ZnVuY3Rpb24oZXYpe3RoaXMuc2xpZGVyRmxhZz10cnVlO3RoaXMuX29uTW91c2VNb3ZlU2xpZGVyKGV2KTt9LF9vbk1vdXNlTW92ZVNsaWRlcjpmdW5jdGlvbihldil7aWYoIXRoaXMuc2xpZGVyRmxhZyl7cmV0dXJuO30KdmFyIHk9ZXYucGFnZVktdGhpcy4kY29sb3JTbGlkZXIub2Zmc2V0KCkudG9wO3ZhciBodWU9TWF0aC5yb3VuZCgzNjAqeS90aGlzLiRjb2xvclNsaWRlci5oZWlnaHQoKSk7aHVlPXV0aWxzLmNvbmZpbmUoaHVlLDAsMzYwKTt0aGlzLl91cGRhdGVIc2woaHVlLHRoaXMuY29sb3JDb21wb25lbnRzLnNhdHVyYXRpb24sdGhpcy5jb2xvckNvbXBvbmVudHMubGlnaHRuZXNzKTt0aGlzLl91cGRhdGVVSSgpO30sX29uTW91c2VEb3duT3BhY2l0eVNsaWRlcjpmdW5jdGlvbihldil7dGhpcy5vcGFjaXR5U2xpZGVyRmxhZz10cnVlO3RoaXMuX29uTW91c2VNb3ZlT3BhY2l0eVNsaWRlcihldik7fSxfb25Nb3VzZU1vdmVPcGFjaXR5U2xpZGVyOmZ1bmN0aW9uKGV2KXtpZighdGhpcy5vcGFjaXR5U2xpZGVyRmxhZ3x8dGhpcy5vcHRpb25zLm5vVHJhbnNwYXJlbmN5KXtyZXR1cm47fQp2YXIgeT1ldi5wYWdlWS10aGlzLiRvcGFjaXR5U2xpZGVyLm9mZnNldCgpLnRvcDt2YXIgb3BhY2l0eT1NYXRoLnJvdW5kKDEwMCooMS15L3RoaXMuJG9wYWNpdHlTbGlkZXIuaGVpZ2h0KCkpKTtvcGFjaXR5PXV0aWxzLmNvbmZpbmUob3BhY2l0eSwwLDEwMCk7dGhpcy5fdXBkYXRlT3BhY2l0eShvcGFjaXR5KTt0aGlzLl91cGRhdGVVSSgpO30sX29uQ2hhbmdlSW5wdXRzOmZ1bmN0aW9uKGV2KXtzd2l0Y2goJChldi50YXJnZXQpLmRhdGEoJ2NvbG9yTWV0aG9kJykpe2Nhc2UnaGV4Jzp0aGlzLl91cGRhdGVIZXgodGhpcy4kKCcub19oZXhfaW5wdXQnKS52YWwoKSk7YnJlYWs7Y2FzZSdyZ2InOnRoaXMuX3VwZGF0ZVJnYmEocGFyc2VJbnQodGhpcy4kKCcub19yZWRfaW5wdXQnKS52YWwoKSkscGFyc2VJbnQodGhpcy4kKCcub19ncmVlbl9pbnB1dCcpLnZhbCgpKSxwYXJzZUludCh0aGlzLiQoJy5vX2JsdWVfaW5wdXQnKS52YWwoKSkpO2JyZWFrO2Nhc2UnaHNsJzp0aGlzLl91cGRhdGVIc2wocGFyc2VJbnQodGhpcy4kKCcub19odWVfaW5wdXQnKS52YWwoKSkscGFyc2VJbnQodGhpcy4kKCcub19zYXR1cmF0aW9uX2lucHV0JykudmFsKCkpLHBhcnNlSW50KHRoaXMuJCgnLm9fbGlnaHRuZXNzX2lucHV0JykudmFsKCkpKTticmVhaztjYXNlJ29wYWNpdHknOnRoaXMuX3VwZGF0ZU9wYWNpdHkocGFyc2VJbnQodGhpcy4kKCcub19vcGFjaXR5X2lucHV0JykudmFsKCkpKTticmVhazt9CnRoaXMuX3VwZGF0ZVVJKCk7fSxfb25GaW5hbFBpY2s6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJfdXAoJ2NvbG9ycGlja2VyOnNhdmVkJyx0aGlzLmNvbG9yQ29tcG9uZW50cyk7fSx9KTtDb2xvcnBpY2tlckRpYWxvZy5mb3JtYXRDb2xvcj1mdW5jdGlvbihjb2xvcil7aWYodHlwZW9mIGNvbG9yPT09J3N0cmluZycpe2NvbG9yPUNvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRDb2xvclRvUmdiYShjb2xvcik7fQppZighY29sb3Ipe3JldHVybicnO30KaWYoY29sb3Iub3BhY2l0eT09PTEwMCl7cmV0dXJuIENvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRSZ2JUb0hleChjb2xvci5yZWQsY29sb3IuZ3JlZW4sY29sb3IuYmx1ZSkuaGV4O30KcmV0dXJuIF8uc3RyLnNwcmludGYoJ3JnYmEoJXMsICVzLCAlcywgJXMpJyxjb2xvci5yZWQsY29sb3IuZ3JlZW4sY29sb3IuYmx1ZSxjb2xvci5vcGFjaXR5LzEwMCk7fTtDb2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0Q29sb3JUb1JnYmE9ZnVuY3Rpb24oY29sb3Ipe3ZhciByZ2JhPWNvbG9yLm1hdGNoKC9ecmdiYT9cKChcZCspLFxzKihcZCspLFxzKihcZCspKD86LFxzKihcZCsoPzpcLlxkKyk/KSk/XCkkLyk7aWYocmdiYSl7aWYocmdiYVs0XT09PXVuZGVmaW5lZCl7cmdiYVs0XT0xO30KcmV0dXJue3JlZDpwYXJzZUludChyZ2JhWzFdKSxncmVlbjpwYXJzZUludChyZ2JhWzJdKSxibHVlOnBhcnNlSW50KHJnYmFbM10pLG9wYWNpdHk6TWF0aC5yb3VuZChwYXJzZUZsb2F0KHJnYmFbNF0pKjEwMCksfTt9ZWxzZXtyZXR1cm4gQ29sb3JwaWNrZXJEaWFsb2cuY29udmVydEhleFRvUmdiYShjb2xvcik7fX07Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydEhleFRvUmdiYT1mdW5jdGlvbihoZXgpe2lmKCEvXiMoWzAtOUEtRl17Nn18WzAtOUEtRl17OH0pJC9pLnRlc3QoaGV4KSl7cmV0dXJuIGZhbHNlO30KcmV0dXJue3JlZDpwYXJzZUludChoZXguc3Vic3RyKDEsMiksMTYpLGdyZWVuOnBhcnNlSW50KGhleC5zdWJzdHIoMywyKSwxNiksYmx1ZTpwYXJzZUludChoZXguc3Vic3RyKDUsMiksMTYpLG9wYWNpdHk6aGV4Lmxlbmd0aD09PTk/cGFyc2VJbnQoaGV4LnN1YnN0cig3LDIpLDE2KToxMDAsfTt9O0NvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRSZ2JUb0hzbD1mdW5jdGlvbihyLGcsYil7aWYodHlwZW9mKHIpIT09J251bWJlcid8fGlzTmFOKHIpfHxyPDB8fHI+MjU1fHx0eXBlb2YoZykhPT0nbnVtYmVyJ3x8aXNOYU4oZyl8fGc8MHx8Zz4yNTV8fHR5cGVvZihiKSE9PSdudW1iZXInfHxpc05hTihiKXx8YjwwfHxiPjI1NSl7cmV0dXJuIGZhbHNlO30KdmFyIHJlZD1yLzI1NTt2YXIgZ3JlZW49Zy8yNTU7dmFyIGJsdWU9Yi8yNTU7dmFyIG1heENvbG9yPU1hdGgubWF4KHJlZCxncmVlbixibHVlKTt2YXIgbWluQ29sb3I9TWF0aC5taW4ocmVkLGdyZWVuLGJsdWUpO3ZhciBkZWx0YT1tYXhDb2xvci1taW5Db2xvcjt2YXIgaHVlPTA7dmFyIHNhdHVyYXRpb249MDt2YXIgbGlnaHRuZXNzPShtYXhDb2xvcittaW5Db2xvcikvMjtpZihkZWx0YSl7aWYobWF4Q29sb3I9PT1yZWQpe2h1ZT0oZ3JlZW4tYmx1ZSkvZGVsdGE7fQppZihtYXhDb2xvcj09PWdyZWVuKXtodWU9MisoYmx1ZS1yZWQpL2RlbHRhO30KaWYobWF4Q29sb3I9PT1ibHVlKXtodWU9NCsocmVkLWdyZWVuKS9kZWx0YTt9CmlmKG1heENvbG9yKXtzYXR1cmF0aW9uPWRlbHRhLygxLU1hdGguYWJzKDIqbGlnaHRuZXNzLTEpKTt9fQpodWU9NjAqaHVlfDA7cmV0dXJue2h1ZTpodWU8MD9odWUrPTM2MDpodWUsc2F0dXJhdGlvbjooc2F0dXJhdGlvbioxMDApfDAsbGlnaHRuZXNzOihsaWdodG5lc3MqMTAwKXwwLH07fTtDb2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0SHNsVG9SZ2I9ZnVuY3Rpb24oaCxzLGwpe2lmKHR5cGVvZihoKSE9PSdudW1iZXInfHxpc05hTihoKXx8aDwwfHxoPjM2MHx8dHlwZW9mKHMpIT09J251bWJlcid8fGlzTmFOKHMpfHxzPDB8fHM+MTAwfHx0eXBlb2YobCkhPT0nbnVtYmVyJ3x8aXNOYU4obCl8fGw8MHx8bD4xMDApe3JldHVybiBmYWxzZTt9CnZhciBodWVQcmltZT1oLzYwO3ZhciBzYXR1cmF0aW9uPXMvMTAwO3ZhciBsaWdodG5lc3M9bC8xMDA7dmFyIGNocm9tYT1zYXR1cmF0aW9uKigxLU1hdGguYWJzKDIqbGlnaHRuZXNzLTEpKTt2YXIgc2Vjb25kQ29tcG9uZW50PWNocm9tYSooMS1NYXRoLmFicyhodWVQcmltZSUyLTEpKTt2YXIgbGlnaHRuZXNzQWRqdXN0bWVudD1saWdodG5lc3MtY2hyb21hLzI7dmFyIHByZWNpc2lvbj0yNTU7Y2hyb21hPShjaHJvbWErbGlnaHRuZXNzQWRqdXN0bWVudCkqcHJlY2lzaW9ufDA7c2Vjb25kQ29tcG9uZW50PShzZWNvbmRDb21wb25lbnQrbGlnaHRuZXNzQWRqdXN0bWVudCkqcHJlY2lzaW9ufDA7bGlnaHRuZXNzQWRqdXN0bWVudD1saWdodG5lc3NBZGp1c3RtZW50KnByZWNpc2lvbnwwO2lmKGh1ZVByaW1lPj0wJiZodWVQcmltZTwxKXtyZXR1cm57cmVkOmNocm9tYSxncmVlbjpzZWNvbmRDb21wb25lbnQsYmx1ZTpsaWdodG5lc3NBZGp1c3RtZW50LH07fQppZihodWVQcmltZT49MSYmaHVlUHJpbWU8Mil7cmV0dXJue3JlZDpzZWNvbmRDb21wb25lbnQsZ3JlZW46Y2hyb21hLGJsdWU6bGlnaHRuZXNzQWRqdXN0bWVudCx9O30KaWYoaHVlUHJpbWU+PTImJmh1ZVByaW1lPDMpe3JldHVybntyZWQ6bGlnaHRuZXNzQWRqdXN0bWVudCxncmVlbjpjaHJvbWEsYmx1ZTpzZWNvbmRDb21wb25lbnQsfTt9CmlmKGh1ZVByaW1lPj0zJiZodWVQcmltZTw0KXtyZXR1cm57cmVkOmxpZ2h0bmVzc0FkanVzdG1lbnQsZ3JlZW46c2Vjb25kQ29tcG9uZW50LGJsdWU6Y2hyb21hLH07fQppZihodWVQcmltZT49NCYmaHVlUHJpbWU8NSl7cmV0dXJue3JlZDpzZWNvbmRDb21wb25lbnQsZ3JlZW46bGlnaHRuZXNzQWRqdXN0bWVudCxibHVlOmNocm9tYSx9O30KaWYoaHVlUHJpbWU+PTUmJmh1ZVByaW1lPD02KXtyZXR1cm57cmVkOmNocm9tYSxncmVlbjpsaWdodG5lc3NBZGp1c3RtZW50LGJsdWU6c2Vjb25kQ29tcG9uZW50LH07fX07Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydFJnYlRvSGV4PWZ1bmN0aW9uKHIsZyxiKXtpZih0eXBlb2YocikhPT0nbnVtYmVyJ3x8aXNOYU4ocil8fHI8MHx8cj4yNTV8fHR5cGVvZihnKSE9PSdudW1iZXInfHxpc05hTihnKXx8ZzwwfHxnPjI1NXx8dHlwZW9mKGIpIT09J251bWJlcid8fGlzTmFOKGIpfHxiPDB8fGI+MjU1KXtyZXR1cm4gZmFsc2U7fQp2YXIgcmVkPXI8MTY/JzAnK3IudG9TdHJpbmcoMTYpOnIudG9TdHJpbmcoMTYpO3ZhciBncmVlbj1nPDE2PycwJytnLnRvU3RyaW5nKDE2KTpnLnRvU3RyaW5nKDE2KTt2YXIgYmx1ZT1iPDE2PycwJytiLnRvU3RyaW5nKDE2KTpiLnRvU3RyaW5nKDE2KTtyZXR1cm57aGV4Ol8uc3RyLnNwcmludGYoJyMlcyVzJXMnLHJlZCxncmVlbixibHVlKX07fTtyZXR1cm4gQ29sb3JwaWNrZXJEaWFsb2c7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3dpZGdldHMvdHJhbnNsYXRpb25fZGlhbG9nLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViLlRyYW5zbGF0aW9uRGlhbG9nJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgRGlhbG9nPXJlcXVpcmUoJ3dlYi5EaWFsb2cnKTt2YXIgc2Vzc2lvbj1yZXF1aXJlKCd3ZWIuc2Vzc2lvbicpO3ZhciBfdD1jb3JlLl90O3ZhciBUcmFuc2xhdGlvbkRpYWxvZz1EaWFsb2cuZXh0ZW5kKHt4bWxEZXBlbmRlbmNpZXM6KERpYWxvZy5wcm90b3R5cGUueG1sRGVwZW5kZW5jaWVzfHxbXSkuY29uY2F0KFsnL3dlYi9zdGF0aWMvc3JjL3htbC90cmFuc2xhdGlvbl9kaWFsb2cueG1sJ10pLHRlbXBsYXRlOidUcmFuc2xhdGlvbkRpYWxvZycsaW5pdDpmdW5jdGlvbihwYXJlbnQsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt0aGlzLmZpZWxkTmFtZT1vcHRpb25zLmZpZWxkTmFtZTt0aGlzLmRvbWFpbj1vcHRpb25zLmRvbWFpbjt0aGlzLnNlYXJjaE5hbWU9b3B0aW9ucy5zZWFyY2hOYW1lO3RoaXMudXNlckxhbmd1YWdlVmFsdWU9b3B0aW9ucy51c2VyTGFuZ3VhZ2VWYWx1ZTt0aGlzLmRvbWFpbi5wdXNoKFsnbmFtZScsIj0iLGAke3RoaXMuc2VhcmNoTmFtZX1gXSk7dGhpcy5kYXRhUG9pbnRJRD1vcHRpb25zLmRhdGFQb2ludElEO3RoaXMuaXNDb21pbmdGcm9tVHJhbnNsYXRpb25BbGVydD1vcHRpb25zLmlzQ29taW5nRnJvbVRyYW5zbGF0aW9uQWxlcnQ7dGhpcy5jdXJyZW50SW50ZXJmYWNlTGFuZ3VhZ2U9c2Vzc2lvbi51c2VyX2NvbnRleHQubGFuZzt0aGlzLmlzVGV4dD1vcHRpb25zLmlzVGV4dDt0aGlzLnNob3dTcmM9b3B0aW9ucy5zaG93U3JjO3RoaXMuX3N1cGVyKHBhcmVudCxfLmV4dGVuZCh7c2l6ZTonbGFyZ2UnLHRpdGxlOl90KCdUcmFuc2xhdGU6ICcpK2Ake3RoaXMuZmllbGROYW1lfWAsYnV0dG9uczpbe3RleHQ6X3QoJ1NhdmUnKSxjbGFzc2VzOididG4tcHJpbWFyeScsY2xvc2U6dHJ1ZSxjbGljazp0aGlzLl9vblNhdmUuYmluZCh0aGlzKX0se3RleHQ6X3QoJ0Rpc2NhcmQnKSxjbG9zZTp0cnVlfSxdLH0sb3B0aW9ucykpO30sd2lsbFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9zdXBlcigpLHRoaXMuX2xvYWRMYW5ndWFnZXMoKS50aGVuKChsKT0+e3RoaXMubGFuZ3VhZ2VzPWw7fSksdGhpcy5fbG9hZFRyYW5zbGF0aW9ucygpLnRoZW4oKHQpPT57dGhpcy50cmFuc2xhdGlvbnM9dDt9KV0pLnRoZW4oKCk9Pnt0aGlzLmRhdGE9dGhpcy50cmFuc2xhdGlvbnMubWFwKCh0ZXJtKT0+e2xldCByZWxhdGVkTGFuZ3VhZ2U9dGhpcy5sYW5ndWFnZXMuZmluZCgobGFuZ3VhZ2UpPT5sYW5ndWFnZVswXT09PXRlcm0ubGFuZyk7cmV0dXJue2lkOnRlcm0uaWQsbGFuZzp0ZXJtLmxhbmcsbGFuZ05hbWU6cmVsYXRlZExhbmd1YWdlWzFdLHNvdXJjZTp0ZXJtLnNyYyx2YWx1ZToodGVybS5sYW5nPT09dGhpcy5jdXJyZW50SW50ZXJmYWNlTGFuZ3VhZ2UmJiF0aGlzLnNob3dTcmMmJiF0aGlzLmlzQ29taW5nRnJvbVRyYW5zbGF0aW9uQWxlcnQpP3RoaXMudXNlckxhbmd1YWdlVmFsdWU6dGVybS52YWx1ZXx8Jyd9O30pO3RoaXMuZGF0YS5zb3J0KChsZWZ0LHJpZ2h0KT0+KGxlZnQubGFuZ05hbWU8cmlnaHQubGFuZ05hbWV8fChsZWZ0LmxhbmdOYW1lPT09cmlnaHQubGFuZ05hbWUmJmxlZnQuc291cmNlPHJpZ2h0LnNvdXJjZSkpPy0xOjEpO30pO30sX2xvYWRUcmFuc2xhdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnBjKHttb2RlbDonaXIudHJhbnNsYXRpb24nLG1ldGhvZDonc2VhcmNoX3JlYWQnLGZpZWxkczpbJ2xhbmcnLCdzcmMnLCd2YWx1ZSddLGRvbWFpbjp0aGlzLmRvbWFpbix9KTt9LF9sb2FkTGFuZ3VhZ2VzOmZ1bmN0aW9uKCl7aWYoVHJhbnNsYXRpb25EaWFsb2cucHJvdG90eXBlLmluc3RhbGxlZExhbmd1YWdlc0NhY2hlKQpyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFRyYW5zbGF0aW9uRGlhbG9nLnByb3RvdHlwZS5pbnN0YWxsZWRMYW5ndWFnZXNDYWNoZSk7cmV0dXJuIHRoaXMuX3JwYyh7bW9kZWw6J3Jlcy5sYW5nJyxtZXRob2Q6J2dldF9pbnN0YWxsZWQnLGZpZWxkczpbJ2NvZGUnLCduYW1lJywnaXNvX2NvZGUnXSx9KS50aGVuKChpbnN0YWxsZWRMYW5ndWFnZXMpPT57VHJhbnNsYXRpb25EaWFsb2cucHJvdG90eXBlLmluc3RhbGxlZExhbmd1YWdlc0NhY2hlPWluc3RhbGxlZExhbmd1YWdlcztyZXR1cm4gVHJhbnNsYXRpb25EaWFsb2cucHJvdG90eXBlLmluc3RhbGxlZExhbmd1YWdlc0NhY2hlfSk7fSxfb25TYXZlOmZ1bmN0aW9uKCl7dmFyIHVwZGF0ZWRUZXJtPXt9O3ZhciB1cGRhdGVGb3JtVmlld0ZpZWxkO3RoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT10ZXh0XSx0ZXh0YXJlYScpLmZvckVhY2goKHQpPT57dmFyIGluaXRpYWxWYWx1ZT10aGlzLmRhdGEuZmluZCgoZCk9PmQuaWQ9PXQuZGF0YXNldC5pZCk7aWYoaW5pdGlhbFZhbHVlLnZhbHVlIT09dC52YWx1ZSl7dXBkYXRlZFRlcm1bdC5kYXRhc2V0LmlkXT10LnZhbHVlO2lmKGluaXRpYWxWYWx1ZS5sYW5nPT09dGhpcy5jdXJyZW50SW50ZXJmYWNlTGFuZ3VhZ2UmJiF0aGlzLnNob3dTcmMpe3ZhciBjaGFuZ2VzPXt9O2NoYW5nZXNbdGhpcy5maWVsZE5hbWVdPXVwZGF0ZWRUZXJtW2luaXRpYWxWYWx1ZS5pZF07dXBkYXRlRm9ybVZpZXdGaWVsZD17ZGF0YVBvaW50SUQ6dGhpcy5kYXRhUG9pbnRJRCxjaGFuZ2VzOmNoYW5nZXMsZG9Ob3RTZXREaXJ0eTpmYWxzZSx9O319fSk7dmFyIHNhdmVVcGRhdGVkVGVybXNQcm9tcz1PYmplY3Qua2V5cyh1cGRhdGVkVGVybSkubWFwKChpZCk9Pnt2YXIgd3JpdGVUcmFuc2xhdGlvbj17bW9kZWw6J2lyLnRyYW5zbGF0aW9uJyxtZXRob2Q6J3dyaXRlJyxjb250ZXh0OnRoaXMuY29udGV4dCxhcmdzOltbcGFyc2VJbnQoaWQsMTApXSx7dmFsdWU6dXBkYXRlZFRlcm1baWRdfV19O3JldHVybiB0aGlzLl9ycGMod3JpdGVUcmFuc2xhdGlvbik7fSk7cmV0dXJuIFByb21pc2UuYWxsKHNhdmVVcGRhdGVkVGVybXNQcm9tcykudGhlbigoKT0+e2lmKHVwZGF0ZUZvcm1WaWV3RmllbGQpe3RoaXMudHJpZ2dlcl91cCgnZmllbGRfY2hhbmdlZCcsdXBkYXRlRm9ybVZpZXdGaWVsZCk7fX0pO319KTtyZXR1cm4gVHJhbnNsYXRpb25EaWFsb2c7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2xpYnMvem9vbW9kb28uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWIuem9vbW9kb28nLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgZHcsZGgscncscmgsbHgsbHk7dmFyIGRlZmF1bHRzPXtsaW5rVGFnOidhJyxsaW5rQXR0cmlidXRlOidkYXRhLXpvb20taW1hZ2UnLGV2ZW50OidjbGljaycscHJldmVudENsaWNrczp0cnVlLGRpc2FibGVkT25Nb2JpbGU6dHJ1ZSxiZWZvcmVTaG93OiQubm9vcCxiZWZvcmVIaWRlOiQubm9vcCxvblNob3c6JC5ub29wLG9uSGlkZTokLm5vb3Asb25Nb3ZlOiQubm9vcCxiZWZvcmVBdHRhY2g6JC5ub29wfTtmdW5jdGlvbiBab29tT2Rvbyh0YXJnZXQsb3B0aW9ucyl7dGhpcy4kdGFyZ2V0PSQodGFyZ2V0KTt0aGlzLm9wdHM9JC5leHRlbmQoe30sZGVmYXVsdHMsb3B0aW9ucyx0aGlzLiR0YXJnZXQuZGF0YSgpKTtpZih0aGlzLmlzT3Blbj09PXVuZGVmaW5lZCl7dGhpcy5faW5pdCgpO319Clpvb21PZG9vLnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbigpe2lmKHdpbmRvdy5vdXRlcldpZHRoPjQ2N3x8IXRoaXMub3B0cy5kaXNhYmxlZE9uTW9iaWxlKXt0aGlzLiRsaW5rPXRoaXMuJHRhcmdldC5maW5kKHRoaXMub3B0cy5saW5rVGFnKS5sZW5ndGgmJnRoaXMuJHRhcmdldC5maW5kKHRoaXMub3B0cy5saW5rVGFnKXx8dGhpcy4kdGFyZ2V0O3RoaXMuJGltYWdlPXRoaXMuJHRhcmdldC5maW5kKCdpbWcnKS5sZW5ndGgmJnRoaXMuJHRhcmdldC5maW5kKCdpbWcnKXx8dGhpcy4kdGFyZ2V0O3RoaXMuJGZseW91dD0kKCc8ZGl2IGNsYXNzPSJ6b29tb2Rvby1mbHlvdXQiIC8+Jyk7dmFyICRhdHRhY2g9dGhpcy4kdGFyZ2V0O2lmKHRoaXMub3B0cy5hdHRhY2ghPT11bmRlZmluZWQmJnRoaXMuJHRhcmdldC5wYXJlbnRzKHRoaXMub3B0cy5hdHRhY2gpLmxlbmd0aCl7JGF0dGFjaD10aGlzLiR0YXJnZXQucGFyZW50cyh0aGlzLm9wdHMuYXR0YWNoKTt9CiRhdHRhY2gucGFyZW50KCkub24oJ21vdXNlbW92ZS56b29tb2RvbyB0b3VjaG1vdmUuem9vbW9kb28nLCQucHJveHkodGhpcy5fb25Nb3ZlLHRoaXMpKTskYXR0YWNoLnBhcmVudCgpLm9uKCdtb3VzZWxlYXZlLnpvb21vZG9vIHRvdWNoZW5kLnpvb21vZG9vJywkLnByb3h5KHRoaXMuX29uTGVhdmUsdGhpcykpO3RoaXMuJHRhcmdldC5vbih0aGlzLm9wdHMuZXZlbnQrJy56b29tb2RvbyB0b3VjaHN0YXJ0Lnpvb21vZG9vJywkLnByb3h5KHRoaXMuX29uRW50ZXIsdGhpcykpO2lmKHRoaXMub3B0cy5wcmV2ZW50Q2xpY2tzKXt0aGlzLiR0YXJnZXQub24oJ2NsaWNrLnpvb21vZG9vJyxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7fSk7fWVsc2V7dmFyIHNlbGY9dGhpczt0aGlzLiR0YXJnZXQub24oJ2NsaWNrLnpvb21vZG9vJyxmdW5jdGlvbigpe3NlbGYuaGlkZSgpO3NlbGYuJHRhcmdldC51bmJpbmQoKTt9KTt9fX07Wm9vbU9kb28ucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oZSx0ZXN0TW91c2VPdmVyKXt2YXIgdzEsaDEsdzIsaDI7dmFyIHNlbGY9dGhpcztpZih0aGlzLm9wdHMuYmVmb3JlU2hvdy5jYWxsKHRoaXMpPT09ZmFsc2UpcmV0dXJuO2lmKCF0aGlzLmlzUmVhZHkpe3JldHVybiB0aGlzLl9sb2FkSW1hZ2UodGhpcy4kbGluay5hdHRyKHRoaXMub3B0cy5saW5rQXR0cmlidXRlKSxmdW5jdGlvbigpe2lmKHNlbGYuaXNNb3VzZU92ZXJ8fCF0ZXN0TW91c2VPdmVyKXtzZWxmLnNob3coZSk7fX0pO30KdmFyICRhdHRhY2g9dGhpcy4kdGFyZ2V0O2lmKHRoaXMub3B0cy5hdHRhY2ghPT11bmRlZmluZWQmJnRoaXMuJHRhcmdldC5wYXJlbnRzKHRoaXMub3B0cy5hdHRhY2gpLmxlbmd0aCl7JGF0dGFjaD10aGlzLiR0YXJnZXQucGFyZW50cyh0aGlzLm9wdHMuYXR0YWNoKTt9CiRhdHRhY2gucGFyZW50KCkuZmluZCgnLnpvb21vZG9vLWZseW91dCcpLnJlbW92ZSgpO3RoaXMuJGZseW91dC5yZW1vdmVBdHRyKCdzdHlsZScpOyRhdHRhY2gucGFyZW50KCkuYXBwZW5kKHRoaXMuJGZseW91dCk7aWYodGhpcy5vcHRzLmF0dGFjaFRvVGFyZ2V0KXt0aGlzLm9wdHMuYmVmb3JlQXR0YWNoLmNhbGwodGhpcyk7aWYodGhpcy4kem9vbS5oZWlnaHQoKTx0aGlzLiRmbHlvdXQuaGVpZ2h0KCkpe3RoaXMuJGZseW91dC5jc3MoJ2hlaWdodCcsdGhpcy4kem9vbS5oZWlnaHQoKSsncHgnKTt9CmlmKHRoaXMuJHpvb20ud2lkdGgoKTx0aGlzLiRmbHlvdXQud2lkdGgoKSl7dGhpcy4kZmx5b3V0LmNzcygnd2lkdGgnLHRoaXMuJHpvb20ud2lkdGgoKSsncHgnKTt9CnZhciBvZmZzZXQ9dGhpcy4kdGFyZ2V0Lm9mZnNldCgpO3ZhciBsZWZ0PW9mZnNldC5sZWZ0LXRoaXMuJGZseW91dC53aWR0aCgpO3ZhciB0b3A9b2Zmc2V0LnRvcDtpZihsZWZ0PDApe2lmKG9mZnNldC5sZWZ0PCgkKGRvY3VtZW50KS53aWR0aCgpLzIpKXtsZWZ0PW9mZnNldC5sZWZ0K3RoaXMuJHRhcmdldC53aWR0aCgpO31lbHNle2xlZnQ9MDt9fQppZihsZWZ0K3RoaXMuJGZseW91dC53aWR0aCgpPiQoZG9jdW1lbnQpLndpZHRoKCkpe3RoaXMuJGZseW91dC5jc3MoJ3dpZHRoJywkKGRvY3VtZW50KS53aWR0aCgpLWxlZnQrJ3B4Jyk7fWVsc2UgaWYobGVmdD09PTApe3RoaXMuJGZseW91dC5jc3MoJ3dpZHRoJyxvZmZzZXQubGVmdCsncHgnKTt9CmlmKCh0b3ArdGhpcy4kZmx5b3V0LmhlaWdodCgpKT4kKGRvY3VtZW50KS5oZWlnaHQoKSl7dG9wPSQoZG9jdW1lbnQpLmhlaWdodCgpLXRoaXMuJGZseW91dC5oZWlnaHQoKTt9CnRoaXMuJGZseW91dC5jc3MoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZTNkKCcrbGVmdCsncHgsICcrdG9wKydweCwgMHB4KScpO30KdzE9dGhpcy4kdGFyZ2V0LndpZHRoKCk7aDE9dGhpcy4kdGFyZ2V0LmhlaWdodCgpO3cyPXRoaXMuJGZseW91dC53aWR0aCgpO2gyPXRoaXMuJGZseW91dC5oZWlnaHQoKTtkdz10aGlzLiR6b29tLndpZHRoKCktdzI7ZGg9dGhpcy4kem9vbS5oZWlnaHQoKS1oMjtpZihkdzwwKWR3PTA7aWYoZGg8MClkaD0wO3J3PWR3L3cxO3JoPWRoL2gxO3RoaXMuaXNPcGVuPXRydWU7dGhpcy5vcHRzLm9uU2hvdy5jYWxsKHRoaXMpO2lmKGUpe3RoaXMuX21vdmUoZSk7fX07Wm9vbU9kb28ucHJvdG90eXBlLl9vbkVudGVyPWZ1bmN0aW9uKGUpe3ZhciB0b3VjaGVzPWUub3JpZ2luYWxFdmVudC50b3VjaGVzO3RoaXMuaXNNb3VzZU92ZXI9dHJ1ZTtpZighdG91Y2hlc3x8dG91Y2hlcy5sZW5ndGg9PT0xKXtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5zaG93KGUsdHJ1ZSk7fX07Wm9vbU9kb28ucHJvdG90eXBlLl9vbk1vdmU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNPcGVuKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5fbW92ZShlKTt9O1pvb21PZG9vLnByb3RvdHlwZS5fb25MZWF2ZT1mdW5jdGlvbigpe3RoaXMuaXNNb3VzZU92ZXI9ZmFsc2U7aWYodGhpcy5pc09wZW4pe3RoaXMuaGlkZSgpO319O1pvb21PZG9vLnByb3RvdHlwZS5fb25Mb2FkPWZ1bmN0aW9uKGUpe2lmKCFlLmN1cnJlbnRUYXJnZXQud2lkdGgpcmV0dXJuO3RoaXMuaXNSZWFkeT10cnVlO3RoaXMuJGZseW91dC5odG1sKHRoaXMuJHpvb20pO2lmKGUuZGF0YS5jYWxsKXtlLmRhdGEoKTt9fTtab29tT2Rvby5wcm90b3R5cGUuX2xvYWRJbWFnZT1mdW5jdGlvbihocmVmLGNhbGxiYWNrKXt2YXIgem9vbT1uZXcgSW1hZ2UoKTt0aGlzLiR6b29tPSQoem9vbSkub24oJ2xvYWQnLGNhbGxiYWNrLCQucHJveHkodGhpcy5fb25Mb2FkLHRoaXMpKTt6b29tLnN0eWxlLnBvc2l0aW9uPSdhYnNvbHV0ZSc7em9vbS5zcmM9aHJlZjt9O1pvb21PZG9vLnByb3RvdHlwZS5fbW92ZT1mdW5jdGlvbihlKXtpZihlLnR5cGUuaW5kZXhPZigndG91Y2gnKT09PTApe3ZhciB0b3VjaGxpc3Q9ZS50b3VjaGVzfHxlLm9yaWdpbmFsRXZlbnQudG91Y2hlcztseD10b3VjaGxpc3RbMF0ucGFnZVg7bHk9dG91Y2hsaXN0WzBdLnBhZ2VZO31lbHNle2x4PWUucGFnZVh8fGx4O2x5PWUucGFnZVl8fGx5O30KdmFyIG9mZnNldD10aGlzLiR0YXJnZXQub2Zmc2V0KCk7dmFyIHB0PWx5LW9mZnNldC50b3A7dmFyIHBsPWx4LW9mZnNldC5sZWZ0O3ZhciB4dD1NYXRoLmNlaWwocHQqcmgpO3ZhciB4bD1NYXRoLmNlaWwocGwqcncpO2lmKHhsPDB8fHh0PDB8fHhsPmR3fHx4dD5kaHx8bHg+KG9mZnNldC5sZWZ0K3RoaXMuJHRhcmdldC53aWR0aCgpKSl7dGhpcy5oaWRlKCk7fWVsc2V7dmFyIHRvcD14dCotMTt2YXIgbGVmdD14bCotMTt0aGlzLiR6b29tLmNzcyh7dG9wOnRvcCxsZWZ0OmxlZnR9KTt0aGlzLm9wdHMub25Nb3ZlLmNhbGwodGhpcyx0b3AsbGVmdCk7fX07Wm9vbU9kb28ucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc09wZW4pcmV0dXJuO2lmKHRoaXMub3B0cy5iZWZvcmVIaWRlLmNhbGwodGhpcyk9PT1mYWxzZSlyZXR1cm47dGhpcy4kZmx5b3V0LmRldGFjaCgpO3RoaXMuaXNPcGVuPWZhbHNlO3RoaXMub3B0cy5vbkhpZGUuY2FsbCh0aGlzKTt9OyQuZm4uem9vbU9kb289ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhcGk9JC5kYXRhKHRoaXMsJ3pvb21PZG9vJyk7aWYoIWFwaSl7JC5kYXRhKHRoaXMsJ3pvb21PZG9vJyxuZXcgWm9vbU9kb28odGhpcyxvcHRpb25zKSk7fWVsc2UgaWYoYXBpLmlzT3Blbj09PXVuZGVmaW5lZCl7YXBpLl9pbml0KCk7fX0pO307fSk7OwoKLyogL3dlYl9lZGl0b3Ivc3RhdGljL2xpYi92a2JlYXV0aWZ5L3ZrYmVhdXRpZnkuMC45OS4wMC5iZXRhLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBjcmVhdGVTaGlmdEFycihzdGVwKXt2YXIgc3BhY2U9JyAgICAnO2lmKGlzTmFOKHBhcnNlSW50KHN0ZXApKSl7c3BhY2U9c3RlcDt9ZWxzZXtzd2l0Y2goc3RlcCl7Y2FzZSAxOnNwYWNlPScgJzticmVhaztjYXNlIDI6c3BhY2U9JyAgJzticmVhaztjYXNlIDM6c3BhY2U9JyAgICc7YnJlYWs7Y2FzZSA0OnNwYWNlPScgICAgJzticmVhaztjYXNlIDU6c3BhY2U9JyAgICAgJzticmVhaztjYXNlIDY6c3BhY2U9JyAgICAgICc7YnJlYWs7Y2FzZSA3OnNwYWNlPScgICAgICAgJzticmVhaztjYXNlIDg6c3BhY2U9JyAgICAgICAgJzticmVhaztjYXNlIDk6c3BhY2U9JyAgICAgICAgICc7YnJlYWs7Y2FzZSAxMDpzcGFjZT0nICAgICAgICAgICc7YnJlYWs7Y2FzZSAxMTpzcGFjZT0nICAgICAgICAgICAnO2JyZWFrO2Nhc2UgMTI6c3BhY2U9JyAgICAgICAgICAgICc7YnJlYWs7fX0KdmFyIHNoaWZ0PVsnXG4nXTtmb3IoaXg9MDtpeDwxMDA7aXgrKyl7c2hpZnQucHVzaChzaGlmdFtpeF0rc3BhY2UpO30KcmV0dXJuIHNoaWZ0O30KZnVuY3Rpb24gdmtiZWF1dGlmeSgpe3RoaXMuc3RlcD0nICAgICc7dGhpcy5zaGlmdD1jcmVhdGVTaGlmdEFycih0aGlzLnN0ZXApO307dmtiZWF1dGlmeS5wcm90b3R5cGUueG1sPWZ1bmN0aW9uKHRleHQsc3RlcCl7dmFyIGFyPXRleHQucmVwbGFjZSgvPlxzezAsfTwvZywiPjwiKS5yZXBsYWNlKC88L2csIn46On48IikucmVwbGFjZSgvXHMqeG1sbnNcOi9nLCJ+Ojp+eG1sbnM6IikucmVwbGFjZSgvXHMqeG1sbnNcPS9nLCJ+Ojp+eG1sbnM9Iikuc3BsaXQoJ346On4nKSxsZW49YXIubGVuZ3RoLGluQ29tbWVudD1mYWxzZSxkZWVwPTAsc3RyPScnLGl4PTAsc2hpZnQ9c3RlcD9jcmVhdGVTaGlmdEFycihzdGVwKTp0aGlzLnNoaWZ0O2ZvcihpeD0wO2l4PGxlbjtpeCsrKXtpZihhcltpeF0uc2VhcmNoKC88IS8pPi0xKXtzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTtpbkNvbW1lbnQ9dHJ1ZTtpZihhcltpeF0uc2VhcmNoKC8tLT4vKT4tMXx8YXJbaXhdLnNlYXJjaCgvXF0+Lyk+LTF8fGFyW2l4XS5zZWFyY2goLyFET0NUWVBFLyk+LTEpe2luQ29tbWVudD1mYWxzZTt9fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvLS0+Lyk+LTF8fGFyW2l4XS5zZWFyY2goL1xdPi8pPi0xKXtzdHIrPWFyW2l4XTtpbkNvbW1lbnQ9ZmFsc2U7fWVsc2UKaWYoL148XHcvLmV4ZWMoYXJbaXgtMV0pJiYvXjxcL1x3Ly5leGVjKGFyW2l4XSkmJi9ePFtcdzpcLVwuXCxdKy8uZXhlYyhhcltpeC0xXSk9PS9ePFwvW1x3OlwtXC5cLF0rLy5leGVjKGFyW2l4XSlbMF0ucmVwbGFjZSgnLycsJycpKXtzdHIrPWFyW2l4XTtpZighaW5Db21tZW50KWRlZXAtLTt9ZWxzZQppZihhcltpeF0uc2VhcmNoKC88XHcvKT4tMSYmYXJbaXhdLnNlYXJjaCgvPFwvLyk9PS0xJiZhcltpeF0uc2VhcmNoKC9cLz4vKT09LTEpe3N0cj0haW5Db21tZW50P3N0cis9c2hpZnRbZGVlcCsrXSthcltpeF06c3RyKz1hcltpeF07fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvPFx3Lyk+LTEmJmFyW2l4XS5zZWFyY2goLzxcLy8pPi0xKXtzdHI9IWluQ29tbWVudD9zdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTpzdHIrPWFyW2l4XTt9ZWxzZQppZihhcltpeF0uc2VhcmNoKC88XC8vKT4tMSl7c3RyPSFpbkNvbW1lbnQ/c3RyKz1zaGlmdFstLWRlZXBdK2FyW2l4XTpzdHIrPWFyW2l4XTt9ZWxzZQppZihhcltpeF0uc2VhcmNoKC9cLz4vKT4tMSl7c3RyPSFpbkNvbW1lbnQ/c3RyKz1zaGlmdFtkZWVwXSthcltpeF06c3RyKz1hcltpeF07fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvPFw/Lyk+LTEpe3N0cis9c2hpZnRbZGVlcF0rYXJbaXhdO31lbHNlCmlmKGFyW2l4XS5zZWFyY2goL3htbG5zXDovKT4tMXx8YXJbaXhdLnNlYXJjaCgveG1sbnNcPS8pPi0xKXtzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTt9CmVsc2V7c3RyKz1hcltpeF07fX0KcmV0dXJuKHN0clswXT09J1xuJyk/c3RyLnNsaWNlKDEpOnN0cjt9CnZrYmVhdXRpZnkucHJvdG90eXBlLmpzb249ZnVuY3Rpb24odGV4dCxzdGVwKXt2YXIgc3RlcD1zdGVwP3N0ZXA6dGhpcy5zdGVwO2lmKHR5cGVvZiBKU09OPT09J3VuZGVmaW5lZCcpcmV0dXJuIHRleHQ7aWYodHlwZW9mIHRleHQ9PT0ic3RyaW5nIilyZXR1cm4gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZSh0ZXh0KSxudWxsLHN0ZXApO2lmKHR5cGVvZiB0ZXh0PT09Im9iamVjdCIpcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRleHQsbnVsbCxzdGVwKTtyZXR1cm4gdGV4dDt9CnZrYmVhdXRpZnkucHJvdG90eXBlLmNzcz1mdW5jdGlvbih0ZXh0LHN0ZXApe3ZhciBhcj10ZXh0LnJlcGxhY2UoL1xzezEsfS9nLCcgJykucmVwbGFjZSgvXHsvZywie346On4iKS5yZXBsYWNlKC9cfS9nLCJ+Ojp+fX46On4iKS5yZXBsYWNlKC9cOy9nLCI7fjo6fiIpLnJlcGxhY2UoL1wvXCovZywifjo6fi8qIikucmVwbGFjZSgvXCpcLy9nLCIqL346On4iKS5yZXBsYWNlKC9+Ojp+XHN7MCx9fjo6fi9nLCJ+Ojp+Iikuc3BsaXQoJ346On4nKSxsZW49YXIubGVuZ3RoLGRlZXA9MCxzdHI9JycsaXg9MCxzaGlmdD1zdGVwP2NyZWF0ZVNoaWZ0QXJyKHN0ZXApOnRoaXMuc2hpZnQ7Zm9yKGl4PTA7aXg8bGVuO2l4Kyspe2lmKC9cey8uZXhlYyhhcltpeF0pKXtzdHIrPXNoaWZ0W2RlZXArK10rYXJbaXhdO31lbHNlCmlmKC9cfS8uZXhlYyhhcltpeF0pKXtzdHIrPXNoaWZ0Wy0tZGVlcF0rYXJbaXhdO31lbHNlCmlmKC9cKlxcLy5leGVjKGFyW2l4XSkpe3N0cis9c2hpZnRbZGVlcF0rYXJbaXhdO30KZWxzZXtzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTt9fQpyZXR1cm4gc3RyLnJlcGxhY2UoL15cbnsxLH0vLCcnKTt9CmZ1bmN0aW9uIGlzU3VicXVlcnkoc3RyLHBhcmVudGhlc2lzTGV2ZWwpe3JldHVybiBwYXJlbnRoZXNpc0xldmVsLShzdHIucmVwbGFjZSgvXCgvZywnJykubGVuZ3RoLXN0ci5yZXBsYWNlKC9cKS9nLCcnKS5sZW5ndGgpfQpmdW5jdGlvbiBzcGxpdF9zcWwoc3RyLHRhYil7cmV0dXJuIHN0ci5yZXBsYWNlKC9cc3sxLH0vZywiICIpLnJlcGxhY2UoLyBBTkQgL2lnLCJ+Ojp+Iit0YWIrdGFiKyJBTkQgIikucmVwbGFjZSgvIEJFVFdFRU4gL2lnLCJ+Ojp+Iit0YWIrIkJFVFdFRU4gIikucmVwbGFjZSgvIENBU0UgL2lnLCJ+Ojp+Iit0YWIrIkNBU0UgIikucmVwbGFjZSgvIEVMU0UgL2lnLCJ+Ojp+Iit0YWIrIkVMU0UgIikucmVwbGFjZSgvIEVORCAvaWcsIn46On4iK3RhYisiRU5EICIpLnJlcGxhY2UoLyBGUk9NIC9pZywifjo6fkZST00gIikucmVwbGFjZSgvIEdST1VQXHN7MSx9QlkvaWcsIn46On5HUk9VUCBCWSAiKS5yZXBsYWNlKC8gSEFWSU5HIC9pZywifjo6fkhBVklORyAiKS5yZXBsYWNlKC8gSU4gL2lnLCIgSU4gIikucmVwbGFjZSgvIEpPSU4gL2lnLCJ+Ojp+Sk9JTiAiKS5yZXBsYWNlKC8gQ1JPU1N+Ojp+ezEsfUpPSU4gL2lnLCJ+Ojp+Q1JPU1MgSk9JTiAiKS5yZXBsYWNlKC8gSU5ORVJ+Ojp+ezEsfUpPSU4gL2lnLCJ+Ojp+SU5ORVIgSk9JTiAiKS5yZXBsYWNlKC8gTEVGVH46On57MSx9Sk9JTiAvaWcsIn46On5MRUZUIEpPSU4gIikucmVwbGFjZSgvIFJJR0hUfjo6fnsxLH1KT0lOIC9pZywifjo6flJJR0hUIEpPSU4gIikucmVwbGFjZSgvIE9OIC9pZywifjo6fiIrdGFiKyJPTiAiKS5yZXBsYWNlKC8gT1IgL2lnLCJ+Ojp+Iit0YWIrdGFiKyJPUiAiKS5yZXBsYWNlKC8gT1JERVJcc3sxLH1CWS9pZywifjo6fk9SREVSIEJZICIpLnJlcGxhY2UoLyBPVkVSIC9pZywifjo6fiIrdGFiKyJPVkVSICIpLnJlcGxhY2UoL1woXHN7MCx9U0VMRUNUIC9pZywifjo6fihTRUxFQ1QgIikucmVwbGFjZSgvXClcc3swLH1TRUxFQ1QgL2lnLCIpfjo6flNFTEVDVCAiKS5yZXBsYWNlKC8gVEhFTiAvaWcsIiBUSEVOfjo6fiIrdGFiKyIiKS5yZXBsYWNlKC8gVU5JT04gL2lnLCJ+Ojp+VU5JT05+Ojp+IikucmVwbGFjZSgvIFVTSU5HIC9pZywifjo6flVTSU5HICIpLnJlcGxhY2UoLyBXSEVOIC9pZywifjo6fiIrdGFiKyJXSEVOICIpLnJlcGxhY2UoLyBXSEVSRSAvaWcsIn46On5XSEVSRSAiKS5yZXBsYWNlKC8gV0lUSCAvaWcsIn46On5XSVRIICIpLnJlcGxhY2UoLyBBTEwgL2lnLCIgQUxMICIpLnJlcGxhY2UoLyBBUyAvaWcsIiBBUyAiKS5yZXBsYWNlKC8gQVNDIC9pZywiIEFTQyAiKS5yZXBsYWNlKC8gREVTQyAvaWcsIiBERVNDICIpLnJlcGxhY2UoLyBESVNUSU5DVCAvaWcsIiBESVNUSU5DVCAiKS5yZXBsYWNlKC8gRVhJU1RTIC9pZywiIEVYSVNUUyAiKS5yZXBsYWNlKC8gTk9UIC9pZywiIE5PVCAiKS5yZXBsYWNlKC8gTlVMTCAvaWcsIiBOVUxMICIpLnJlcGxhY2UoLyBMSUtFIC9pZywiIExJS0UgIikucmVwbGFjZSgvXHN7MCx9U0VMRUNUIC9pZywiU0VMRUNUICIpLnJlcGxhY2UoL1xzezAsfVVQREFURSAvaWcsIlVQREFURSAiKS5yZXBsYWNlKC8gU0VUIC9pZywiIFNFVCAiKS5yZXBsYWNlKC9+Ojp+ezEsfS9nLCJ+Ojp+Iikuc3BsaXQoJ346On4nKTt9CnZrYmVhdXRpZnkucHJvdG90eXBlLnNxbD1mdW5jdGlvbih0ZXh0LHN0ZXApe3ZhciBhcl9ieV9xdW90ZT10ZXh0LnJlcGxhY2UoL1xzezEsfS9nLCIgIikucmVwbGFjZSgvXCcvaWcsIn46On5cJyIpLnNwbGl0KCd+Ojp+JyksbGVuPWFyX2J5X3F1b3RlLmxlbmd0aCxhcj1bXSxkZWVwPTAsdGFiPXRoaXMuc3RlcCxpbkNvbW1lbnQ9dHJ1ZSxpblF1b3RlPWZhbHNlLHBhcmVudGhlc2lzTGV2ZWw9MCxzdHI9JycsaXg9MCxzaGlmdD1zdGVwP2NyZWF0ZVNoaWZ0QXJyKHN0ZXApOnRoaXMuc2hpZnQ7O2ZvcihpeD0wO2l4PGxlbjtpeCsrKXtpZihpeCUyKXthcj1hci5jb25jYXQoYXJfYnlfcXVvdGVbaXhdKTt9ZWxzZXthcj1hci5jb25jYXQoc3BsaXRfc3FsKGFyX2J5X3F1b3RlW2l4XSx0YWIpKTt9fQpsZW49YXIubGVuZ3RoO2ZvcihpeD0wO2l4PGxlbjtpeCsrKXtwYXJlbnRoZXNpc0xldmVsPWlzU3VicXVlcnkoYXJbaXhdLHBhcmVudGhlc2lzTGV2ZWwpO2lmKC9cc3swLH1cc3swLH1TRUxFQ1Rcc3swLH0vLmV4ZWMoYXJbaXhdKSl7YXJbaXhdPWFyW2l4XS5yZXBsYWNlKC9cLC9nLCIsXG4iK3RhYit0YWIrIiIpfQppZigvXHN7MCx9XHN7MCx9U0VUXHN7MCx9Ly5leGVjKGFyW2l4XSkpe2FyW2l4XT1hcltpeF0ucmVwbGFjZSgvXCwvZywiLFxuIit0YWIrdGFiKyIiKX0KaWYoL1xzezAsfVwoXHN7MCx9U0VMRUNUXHN7MCx9Ly5leGVjKGFyW2l4XSkpe2RlZXArKztzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTt9ZWxzZQppZigvXCcvLmV4ZWMoYXJbaXhdKSl7aWYocGFyZW50aGVzaXNMZXZlbDwxJiZkZWVwKXtkZWVwLS07fQpzdHIrPWFyW2l4XTt9CmVsc2V7c3RyKz1zaGlmdFtkZWVwXSthcltpeF07aWYocGFyZW50aGVzaXNMZXZlbDwxJiZkZWVwKXtkZWVwLS07fX0KdmFyIGp1bms9MDt9CnN0cj1zdHIucmVwbGFjZSgvXlxuezEsfS8sJycpLnJlcGxhY2UoL1xuezEsfS9nLCJcbiIpO3JldHVybiBzdHI7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS54bWxtaW49ZnVuY3Rpb24odGV4dCxwcmVzZXJ2ZUNvbW1lbnRzKXt2YXIgc3RyPXByZXNlcnZlQ29tbWVudHM/dGV4dDp0ZXh0LnJlcGxhY2UoL1w8IVsgXHJcblx0XSooLS0oW15cLV18W1xyXG5dfC1bXlwtXSkqLS1bIFxyXG5cdF0qKVw+L2csIiIpLnJlcGxhY2UoL1sgXHJcblx0XXsxLH14bWxucy9nLCcgeG1sbnMnKTtyZXR1cm4gc3RyLnJlcGxhY2UoLz5cc3swLH08L2csIj48Iik7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5qc29ubWluPWZ1bmN0aW9uKHRleHQpe2lmKHR5cGVvZiBKU09OPT09J3VuZGVmaW5lZCcpcmV0dXJuIHRleHQ7cmV0dXJuIEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UodGV4dCksbnVsbCwwKTt9CnZrYmVhdXRpZnkucHJvdG90eXBlLmNzc21pbj1mdW5jdGlvbih0ZXh0LHByZXNlcnZlQ29tbWVudHMpe3ZhciBzdHI9cHJlc2VydmVDb21tZW50cz90ZXh0OnRleHQucmVwbGFjZSgvXC9cKihbXipdfFtcclxuXXwoXCorKFteKi9dfFtcclxuXSkpKSpcKitcLy9nLCIiKTtyZXR1cm4gc3RyLnJlcGxhY2UoL1xzezEsfS9nLCcgJykucmVwbGFjZSgvXHtcc3sxLH0vZywieyIpLnJlcGxhY2UoL1x9XHN7MSx9L2csIn0iKS5yZXBsYWNlKC9cO1xzezEsfS9nLCI7IikucmVwbGFjZSgvXC9cKlxzezEsfS9nLCIvKiIpLnJlcGxhY2UoL1wqXC9cc3sxLH0vZywiKi8iKTt9CnZrYmVhdXRpZnkucHJvdG90eXBlLnNxbG1pbj1mdW5jdGlvbih0ZXh0KXtyZXR1cm4gdGV4dC5yZXBsYWNlKC9cc3sxLH0vZywiICIpLnJlcGxhY2UoL1xzezEsfVwoLywiKCIpLnJlcGxhY2UoL1xzezEsfVwpLywiKSIpO30Kd2luZG93LnZrYmVhdXRpZnk9bmV3IHZrYmVhdXRpZnkoKTt9KSgpOzsKCi8qIC93ZWJfZWRpdG9yL3N0YXRpYy9zcmMvanMvY29tbW9uL2FjZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYl9lZGl0b3IuYWNlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIGFqYXg9cmVxdWlyZSgnd2ViLmFqYXgnKTt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgY29uY3VycmVuY3k9cmVxdWlyZSgnd2ViLmNvbmN1cnJlbmN5Jyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgRGlhbG9nPXJlcXVpcmUoJ3dlYi5EaWFsb2cnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgbG9jYWxTdG9yYWdlPXJlcXVpcmUoJ3dlYi5sb2NhbF9zdG9yYWdlJyk7dmFyIF90PWNvcmUuX3Q7ZnVuY3Rpb24gX2dldENoZWNrUmV0dXJuKGlzVmFsaWQsZXJyb3JMaW5lLGVycm9yTWVzc2FnZSl7cmV0dXJue2lzVmFsaWQ6aXNWYWxpZCxlcnJvcjppc1ZhbGlkP251bGw6e2xpbmU6ZXJyb3JMaW5lLG1lc3NhZ2U6ZXJyb3JNZXNzYWdlLH0sfTt9CmZ1bmN0aW9uIGNoZWNrWE1MKHhtbCl7aWYodHlwZW9mIHdpbmRvdy5ET01QYXJzZXIhPSd1bmRlZmluZWQnKXt2YXIgeG1sRG9jPShuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO3ZhciBlcnJvcj14bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlcmVycm9yJyk7aWYoZXJyb3IubGVuZ3RoPjApe3JldHVybiBfZ2V0Q2hlY2tSZXR1cm4oZmFsc2UscGFyc2VJbnQoZXJyb3JbMF0uaW5uZXJIVE1MLm1hdGNoKC9bTGxdaW5lW15cZF0rKFxkKykvKVsxXSwxMCksZXJyb3JbMF0uaW5uZXJIVE1MKTt9fWVsc2UgaWYodHlwZW9mIHdpbmRvdy5BY3RpdmVYT2JqZWN0IT0ndW5kZWZpbmVkJyYmbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJykpe3ZhciB4bWxEb2NJRT1uZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxET00nKTt4bWxEb2NJRS5hc3luYz0nZmFsc2UnO3htbERvY0lFLmxvYWRYTUwoeG1sKTtpZih4bWxEb2NJRS5wYXJzZUVycm9yLmxpbmU+MCl7cmV0dXJuIF9nZXRDaGVja1JldHVybihmYWxzZSx4bWxEb2NJRS5wYXJzZUVycm9yLmxpbmUseG1sRG9jSUUucGFyc2VFcnJvci5yZWFzb24pO319CnJldHVybiBfZ2V0Q2hlY2tSZXR1cm4odHJ1ZSk7fQpmdW5jdGlvbiBmb3JtYXRYTUwoeG1sKXtpZigvPHNjcmlwdCg/OiBbXj5dKik/PltePF1bXHNcU10qPFwvc2NyaXB0Pi9pLnRlc3QoeG1sKSl7cmV0dXJuIHhtbDt9CnJldHVybiB3aW5kb3cudmtiZWF1dGlmeS54bWwoeG1sLDQpO30KdmFyIGNoZWNrU0NTUz0oZnVuY3Rpb24oKXt2YXIgbWFwcGluZz17J3snOid9JywnfSc6J3snLCcoJzonKScsJyknOicoJywnWyc6J10nLCddJzonWycsfTt2YXIgb3BlbmluZ3M9Wyd7JywnKCcsJ1snXTt2YXIgY2xvc2luZ3M9Wyd9JywnKScsJ10nXTtyZXR1cm4gZnVuY3Rpb24oc2Nzcyl7dmFyIHN0YWNrPVtdO3ZhciBsaW5lPTE7Zm9yKHZhciBpPTA7aTxzY3NzLmxlbmd0aDtpKyspe2lmKF8uY29udGFpbnMob3BlbmluZ3Msc2Nzc1tpXSkpe3N0YWNrLnB1c2goc2Nzc1tpXSk7fWVsc2UgaWYoXy5jb250YWlucyhjbG9zaW5ncyxzY3NzW2ldKSl7aWYoc3RhY2sucG9wKCkhPT1tYXBwaW5nW3Njc3NbaV1dKXtyZXR1cm4gX2dldENoZWNrUmV0dXJuKGZhbHNlLGxpbmUsX3QoIlVuZXhwZWN0ZWQgIikrc2Nzc1tpXSk7fX1lbHNlIGlmKHNjc3NbaV09PT0nXG4nKXtsaW5lKys7fX0KaWYoc3RhY2subGVuZ3RoPjApe3JldHVybiBfZ2V0Q2hlY2tSZXR1cm4oZmFsc2UsbGluZSxfdCgiRXhwZWN0ZWQgIikrbWFwcGluZ1tzdGFjay5wb3AoKV0pO30KcmV0dXJuIF9nZXRDaGVja1JldHVybih0cnVlKTt9O30pKCk7ZnVuY3Rpb24gZm9ybWF0U0NTUyhzY3NzKXtyZXR1cm4gc2Nzczt9CnZhciBWaWV3RWRpdG9yPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOid3ZWJfZWRpdG9yLmFjZV92aWV3X2VkaXRvcicseG1sRGVwZW5kZW5jaWVzOlsnL3dlYl9lZGl0b3Ivc3RhdGljL3NyYy94bWwvYWNlLnhtbCddLGpzTGliczpbJy93ZWIvc3RhdGljL2xpYi9hY2UvYWNlLmpzJyxbJy93ZWIvc3RhdGljL2xpYi9hY2UvamF2YXNjcmlwdF9oaWdobGlnaHRfcnVsZXMuanMnLCcvd2ViL3N0YXRpYy9saWIvYWNlL21vZGUteG1sLmpzJywnL3dlYi9zdGF0aWMvbGliL2FjZS9tb2RlLXNjc3MuanMnLCcvd2ViL3N0YXRpYy9saWIvYWNlL21vZGUtanMuanMnLCcvd2ViL3N0YXRpYy9saWIvYWNlL3RoZW1lLW1vbm9rYWkuanMnXV0sZXZlbnRzOnsnY2xpY2sgLm9fYWNlX3R5cGVfc3dpdGNoZXJfY2hvaWNlJzonX29uVHlwZUNob2ljZScsJ2NoYW5nZSAub19yZXNfbGlzdCc6J19vblJlc0NoYW5nZScsJ2NsaWNrIC5vX2FjZV9maWx0ZXInOidfb25GaWx0ZXJDaGFuZ2UnLCdjbGljayBidXR0b25bZGF0YS1hY3Rpb249c2F2ZV0nOidfb25TYXZlQ2xpY2snLCdjbGljayBidXR0b25bZGF0YS1hY3Rpb249cmVzZXRdJzonX29uUmVzZXRDbGljaycsJ2NsaWNrIGJ1dHRvbltkYXRhLWFjdGlvbj1mb3JtYXRdJzonX29uRm9ybWF0Q2xpY2snLCdjbGljayBidXR0b25bZGF0YS1hY3Rpb249Y2xvc2VdJzonX29uQ2xvc2VDbGljaycsJ2NsaWNrICNhY2Utdmlldy1pZCA+IC5hbGVydC13YXJuaW5nIC5jbG9zZSc6J19vbkNsb3NlV2FybmluZ0NsaWNrJ30saW5pdDpmdW5jdGlvbihwYXJlbnQsdmlld0tleSxvcHRpb25zKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb250ZXh0PW9wdGlvbnMuY29udGV4dDt0aGlzLnZpZXdLZXk9dmlld0tleTt0aGlzLm9wdGlvbnM9Xy5kZWZhdWx0cyh7fSxvcHRpb25zLHtwb3NpdGlvbjoncmlnaHQnLGRvTm90TG9hZFZpZXdzOmZhbHNlLGRvTm90TG9hZFNDU1M6ZmFsc2UsZG9Ob3RMb2FkSlM6ZmFsc2UsaW5jbHVkZUJ1bmRsZXM6ZmFsc2UsZmlsZXNGaWx0ZXI6J2N1c3RvbScsZGVmYXVsdEJ1bmRsZXNSZXN0cmljdGlvbjpbXSx9KTt0aGlzLnJlc291cmNlcz17eG1sOnt9LHNjc3M6e30sanM6e319O3RoaXMuZWRpdGluZ1Nlc3Npb25zPXt4bWw6e30sc2Nzczp7fSxqczp7fX07dGhpcy5jdXJyZW50VHlwZT0neG1sJzt0aGlzLnZpZXdzPXRoaXMucmVzb3VyY2VzLnhtbDt0aGlzLnNjc3M9dGhpcy5yZXNvdXJjZXMuc2Nzczt0aGlzLmpzPXRoaXMucmVzb3VyY2VzLmpzO30sd2lsbFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fbG9hZFJlc291cmNlcygpXSk7fSxzdGFydDpmdW5jdGlvbigpe3RoaXMuJHZpZXdFZGl0b3I9dGhpcy4kKCcjYWNlLXZpZXctZWRpdG9yJyk7dGhpcy4kdHlwZVN3aXRjaGVyQ2hvaWNlcz10aGlzLiQoJy5vX2FjZV90eXBlX3N3aXRjaGVyX2Nob2ljZScpO3RoaXMuJHR5cGVTd2l0Y2hlckJ0bj10aGlzLiQoJy5vX2FjZV90eXBlX3N3aXRjaGVyID4gLmRyb3Bkb3duLXRvZ2dsZScpO3RoaXMuJGxpc3RzPXt4bWw6dGhpcy4kKCcjYWNlLXZpZXctbGlzdCcpLHNjc3M6dGhpcy4kKCcjYWNlLXNjc3MtbGlzdCcpLGpzOnRoaXMuJCgnI2FjZS1qcy1saXN0JyksfTt0aGlzLiRpbmNsdWRlQnVuZGxlc0FyZWE9dGhpcy4kKCcub2VfaW5jbHVkZV9idW5kbGVzJyk7dGhpcy4kaW5jbHVkZUFsbFNDU1NBcmVhPXRoaXMuJCgnLm9faW5jbHVkZV9hbGxfc2NzcycpO3RoaXMuJHZpZXdJRD10aGlzLiQoJyNhY2Utdmlldy1pZCA+IHNwYW4nKTt0aGlzLiR3YXJuaW5nTWVzc2FnZT10aGlzLiQoJyNhY2Utdmlldy1pZCA+IC5hbGVydC13YXJuaW5nJyk7dGhpcy4kZm9ybWF0QnV0dG9uPXRoaXMuJCgnYnV0dG9uW2RhdGEtYWN0aW9uPWZvcm1hdF0nKTt0aGlzLiRyZXNldEJ1dHRvbj10aGlzLiQoJ2J1dHRvbltkYXRhLWFjdGlvbj1yZXNldF0nKTt0aGlzLmFjZUVkaXRvcj13aW5kb3cuYWNlLmVkaXQodGhpcy4kdmlld0VkaXRvclswXSk7dGhpcy5hY2VFZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7dGhpcy4kZWRpdG9yPXRoaXMuJCgnLmFjZV9lZGl0b3InKTt2YXIgcmVmWD0wO3ZhciByZXNpemluZz1mYWxzZTt2YXIgbWluV2lkdGg9NDAwO3ZhciBkZWJvdW5jZVN0b3JlRWRpdG9yV2lkdGg9Xy5kZWJvdW5jZShzdG9yZUVkaXRvcldpZHRoLDUwMCk7dGhpcy5fdXBkYXRlVmlld1NlbGVjdERPTSgpO3ZhciBpbml0UmVzSUQ7dmFyIGluaXRUeXBlO2lmKHRoaXMub3B0aW9ucy5pbml0aWFsUmVzSUQpe2luaXRSZXNJRD10aGlzLm9wdGlvbnMuaW5pdGlhbFJlc0lEO2lmKF8uaXNTdHJpbmcoaW5pdFJlc0lEKSYmaW5pdFJlc0lEWzBdPT09Jy8nKXtpZihfLnN0ci5lbmRzV2l0aChpbml0UmVzSUQsJy5zY3NzJykpe2luaXRUeXBlPSdzY3NzJzt9ZWxzZXtpbml0VHlwZT0nanMnO319ZWxzZXtpbml0VHlwZT0neG1sJzt9fWVsc2V7aWYoIXRoaXMub3B0aW9ucy5kb05vdExvYWRTQ1NTKXtpbml0UmVzSUQ9dGhpcy5zb3J0ZWRTQ1NTWzBdWzFdWzBdLnVybDtpbml0VHlwZT0nc2Nzcyc7fQppZighdGhpcy5vcHRpb25zLmRvTm90TG9hZEpTKXtpbml0UmVzSUQ9dGhpcy5zb3J0ZWRKU1swXVsxXVswXS51cmw7aW5pdFR5cGU9J2pzJzt9CmlmKCF0aGlzLm9wdGlvbnMuZG9Ob3RMb2FkVmlld3Mpe2lmKHR5cGVvZiB0aGlzLnZpZXdLZXk9PT0ibnVtYmVyIil7aW5pdFJlc0lEPXRoaXMudmlld0tleTt9ZWxzZXt2YXIgdmlldz1fLmZpbmRXaGVyZSh0aGlzLnZpZXdzLHt4bWxfaWQ6dGhpcy52aWV3S2V5fSk7aWYoIXZpZXcpe3ZpZXc9Xy5maW5kV2hlcmUodGhpcy52aWV3cyx7a2V5OnRoaXMudmlld0tleX0pO30KaW5pdFJlc0lEPXZpZXcuaWQ7fQppbml0VHlwZT0neG1sJzt9fQppZihpbml0UmVzSUQpe3RoaXMuX2Rpc3BsYXlSZXNvdXJjZShpbml0UmVzSUQsaW5pdFR5cGUpO30KaWYoIXRoaXMuc29ydGVkVmlld3MubGVuZ3RofHwhdGhpcy5zb3J0ZWRTQ1NTLmxlbmd0aCl7Xy5kZWZlcigoZnVuY3Rpb24oKXt0aGlzLl9zd2l0Y2hUeXBlKHRoaXMuc29ydGVkVmlld3MubGVuZ3RoPyd4bWwnOidzY3NzJyk7dGhpcy4kdHlwZVN3aXRjaGVyQnRuLnBhcmVudCgnLmJ0bi1ncm91cCcpLmFkZENsYXNzKCdkLW5vbmUnKTt9KS5iaW5kKHRoaXMpKTt9CiQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwLlZpZXdFZGl0b3InLHN0b3BSZXNpemluZy5iaW5kKHRoaXMpKS5vbignbW91c2Vtb3ZlLlZpZXdFZGl0b3InLHVwZGF0ZVdpZHRoLmJpbmQodGhpcykpO2lmKHRoaXMub3B0aW9ucy5wb3NpdGlvbj09PSdsZWZ0Jyl7dGhpcy4kKCcuYWNlX3Njcm9sbGVyJykuYWZ0ZXIoJCgnPGRpdj4nKS5hZGRDbGFzcygnYWNlX3Jlc2l6ZV9iYXInKSk7dGhpcy4kKCcuYWNlX2d1dHRlcicpLmNzcyh7J2N1cnNvcic6J2RlZmF1bHQnfSk7dGhpcy4kZWwub24oJ21vdXNlZG93bi5WaWV3RWRpdG9yJywnLmFjZV9yZXNpemVfYmFyJyxzdGFydFJlc2l6aW5nLmJpbmQodGhpcykpO31lbHNle3RoaXMuJGVsLm9uKCdtb3VzZWRvd24uVmlld0VkaXRvcicsJy5hY2VfZ3V0dGVyJyxzdGFydFJlc2l6aW5nLmJpbmQodGhpcykpO30KcmVzaXplRWRpdG9yLmNhbGwodGhpcyxyZWFkRWRpdG9yV2lkdGguY2FsbCh0aGlzKSk7cmV0dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmdW5jdGlvbiByZXNpemVFZGl0b3IodGFyZ2V0KXt2YXIgd2lkdGg9TWF0aC5taW4oZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCxNYXRoLm1heChwYXJzZUludCh0YXJnZXQsMTApLG1pbldpZHRoKSk7dGhpcy4kZWRpdG9yLndpZHRoKHdpZHRoKTt0aGlzLmFjZUVkaXRvci5yZXNpemUoKTt0aGlzLiRlbC53aWR0aCh3aWR0aCk7fQpmdW5jdGlvbiBzdG9yZUVkaXRvcldpZHRoKCl7bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjZV9lZGl0b3Jfd2lkdGgnLHRoaXMuJGVsLndpZHRoKCkpO30KZnVuY3Rpb24gcmVhZEVkaXRvcldpZHRoKCl7dmFyIHdpZHRoPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2VfZWRpdG9yX3dpZHRoJyk7cmV0dXJuIHBhcnNlSW50KHdpZHRofHw3MjAsMTApO30KZnVuY3Rpb24gc3RhcnRSZXNpemluZyhlKXtyZWZYPWUucGFnZVg7cmVzaXppbmc9dHJ1ZTt9CmZ1bmN0aW9uIHN0b3BSZXNpemluZygpe3Jlc2l6aW5nPWZhbHNlO30KZnVuY3Rpb24gdXBkYXRlV2lkdGgoZSl7aWYoIXJlc2l6aW5nKXJldHVybjt2YXIgb2Zmc2V0PWUucGFnZVgtcmVmWDtpZih0aGlzLm9wdGlvbnMucG9zaXRpb249PT0nbGVmdCcpe29mZnNldD0tb2Zmc2V0O30KdmFyIHdpZHRoPXRoaXMuJGVsLndpZHRoKCktb2Zmc2V0O3JlZlg9ZS5wYWdlWDtyZXNpemVFZGl0b3IuY2FsbCh0aGlzLHdpZHRoKTtkZWJvdW5jZVN0b3JlRWRpdG9yV2lkdGguY2FsbCh0aGlzKTt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJGVsLm9mZignLlZpZXdFZGl0b3InKTskKGRvY3VtZW50KS5vZmYoJy5WaWV3RWRpdG9yJyk7fSxfYnVpbGRFZGl0aW5nU2Vzc2lvbjpmdW5jdGlvbihyZXNJRCx0eXBlKXt2YXIgc2VsZj10aGlzO3R5cGU9dHlwZXx8dGhpcy5jdXJyZW50VHlwZTt2YXIgZWRpdGluZ1Nlc3Npb249bmV3IHdpbmRvdy5hY2UuRWRpdFNlc3Npb24odGhpcy5yZXNvdXJjZXNbdHlwZV1bcmVzSURdLmFyY2gpO2VkaXRpbmdTZXNzaW9uLnNldFVzZVdvcmtlcihmYWxzZSk7ZWRpdGluZ1Nlc3Npb24uc2V0TW9kZSgnYWNlL21vZGUvJysodHlwZXx8dGhpcy5jdXJyZW50VHlwZSkpO2VkaXRpbmdTZXNzaW9uLnNldFVuZG9NYW5hZ2VyKG5ldyB3aW5kb3cuYWNlLlVuZG9NYW5hZ2VyKCkpO2VkaXRpbmdTZXNzaW9uLm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKCl7Xy5kZWZlcihmdW5jdGlvbigpe3NlbGYuX3RvZ2dsZURpcnR5SW5mbyhyZXNJRCk7c2VsZi5fc2hvd0Vycm9yTGluZSgpO30pO30pO3JldHVybiBlZGl0aW5nU2Vzc2lvbjt9LF9kaXNwbGF5UmVzb3VyY2U6ZnVuY3Rpb24ocmVzSUQsdHlwZSl7aWYodHlwZSl7dGhpcy5fc3dpdGNoVHlwZSh0eXBlKTt9CnZhciBlZGl0aW5nU2Vzc2lvbj10aGlzLmVkaXRpbmdTZXNzaW9uc1t0aGlzLmN1cnJlbnRUeXBlXVtyZXNJRF07aWYoIWVkaXRpbmdTZXNzaW9uKXtlZGl0aW5nU2Vzc2lvbj10aGlzLmVkaXRpbmdTZXNzaW9uc1t0aGlzLmN1cnJlbnRUeXBlXVtyZXNJRF09dGhpcy5fYnVpbGRFZGl0aW5nU2Vzc2lvbihyZXNJRCk7fQp0aGlzLmFjZUVkaXRvci5zZXRTZXNzaW9uKGVkaXRpbmdTZXNzaW9uKTt2YXIgaXNDdXN0b21pemVkPWZhbHNlO2lmKHRoaXMuY3VycmVudFR5cGU9PT0neG1sJyl7dGhpcy4kdmlld0lELnRleHQoXy5zdHIuc3ByaW50ZihfdCgiVGVtcGxhdGUgSUQ6ICVzIiksdGhpcy52aWV3c1tyZXNJRF0ua2V5KSk7fWVsc2UgaWYodGhpcy5jdXJyZW50VHlwZT09PSdzY3NzJyl7aXNDdXN0b21pemVkPXRoaXMuc2Nzc1tyZXNJRF0uY3VzdG9taXplZDt0aGlzLiR2aWV3SUQudGV4dChfLnN0ci5zcHJpbnRmKF90KCJTQ1NTIGZpbGU6ICVzIikscmVzSUQpKTt9ZWxzZXtpc0N1c3RvbWl6ZWQ9dGhpcy5qc1tyZXNJRF0uY3VzdG9taXplZDt0aGlzLiR2aWV3SUQudGV4dChfLnN0ci5zcHJpbnRmKF90KCJKUyBmaWxlOiAlcyIpLHJlc0lEKSk7fQp0aGlzLiRsaXN0c1t0aGlzLmN1cnJlbnRUeXBlXS5zZWxlY3QyKCd2YWwnLHJlc0lEKTt0aGlzLiRyZXNldEJ1dHRvbi50b2dnbGVDbGFzcygnZC1ub25lJyx0aGlzLmN1cnJlbnRUeXBlPT09J3htbCd8fCFpc0N1c3RvbWl6ZWQpO3RoaXMuJHdhcm5pbmdNZXNzYWdlLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuY3VycmVudFR5cGUhPT0neG1sJyYmKHJlc0lELmluZGV4T2YoJy91c2VyX2N1c3RvbV8nKT49MHx8aXNDdXN0b21pemVkKSk7dGhpcy5hY2VFZGl0b3IucmVzaXplKHRydWUpO30sX2Zvcm1hdFJlc291cmNlOmZ1bmN0aW9uKCl7dmFyIHJlcz10aGlzLmFjZUVkaXRvci5nZXRWYWx1ZSgpO3ZhciBjaGVjaz0odGhpcy5jdXJyZW50VHlwZT09PSd4bWwnP2NoZWNrWE1MOmNoZWNrU0NTUykocmVzKTtpZihjaGVjay5pc1ZhbGlkKXt0aGlzLmFjZUVkaXRvci5zZXRWYWx1ZSgodGhpcy5jdXJyZW50VHlwZT09PSd4bWwnP2Zvcm1hdFhNTDpmb3JtYXRTQ1NTKShyZXMpKTt9ZWxzZXt0aGlzLl9zaG93RXJyb3JMaW5lKGNoZWNrLmVycm9yLmxpbmUsY2hlY2suZXJyb3IubWVzc2FnZSx0aGlzLl9nZXRTZWxlY3RlZFJlc291cmNlKCkpO319LF9nZXRTZWxlY3RlZFJlc291cmNlOmZ1bmN0aW9uKCl7dmFyIHZhbHVlPXRoaXMuJGxpc3RzW3RoaXMuY3VycmVudFR5cGVdLnNlbGVjdDIoJ3ZhbCcpO3JldHVybiBwYXJzZUludCh2YWx1ZSwxMCl8fHZhbHVlO30sX2xvYWRSZXNvdXJjZXM6ZnVuY3Rpb24oKXt0aGlzLnJlc291cmNlcz17eG1sOnt9LHNjc3M6e30sanM6e319O3RoaXMuZWRpdGluZ1Nlc3Npb25zPXt4bWw6e30sc2Nzczp7fSxqczp7fX07dGhpcy52aWV3cz10aGlzLnJlc291cmNlcy54bWw7dGhpcy5zY3NzPXRoaXMucmVzb3VyY2VzLnNjc3M7dGhpcy5qcz10aGlzLnJlc291cmNlcy5qcztyZXR1cm4gdGhpcy5fcnBjKHtyb3V0ZTonL3dlYl9lZGl0b3IvZ2V0X2Fzc2V0c19lZGl0b3JfcmVzb3VyY2VzJyxwYXJhbXM6e2tleTp0aGlzLnZpZXdLZXksZ2V0X3ZpZXdzOiF0aGlzLm9wdGlvbnMuZG9Ob3RMb2FkVmlld3MsZ2V0X3Njc3M6IXRoaXMub3B0aW9ucy5kb05vdExvYWRTQ1NTLGdldF9qczohdGhpcy5vcHRpb25zLmRvTm90TG9hZEpTLGJ1bmRsZXM6dGhpcy5vcHRpb25zLmluY2x1ZGVCdW5kbGVzLGJ1bmRsZXNfcmVzdHJpY3Rpb246dGhpcy5vcHRpb25zLmZpbGVzRmlsdGVyPT09J2FsbCc/W106dGhpcy5vcHRpb25zLmRlZmF1bHRCdW5kbGVzUmVzdHJpY3Rpb24sb25seV91c2VyX2N1c3RvbV9maWxlczp0aGlzLm9wdGlvbnMuZmlsZXNGaWx0ZXI9PT0nY3VzdG9tJyx9LH0pLnRoZW4oKGZ1bmN0aW9uKHJlc291cmNlcyl7X3Byb2Nlc3NWaWV3cy5jYWxsKHRoaXMscmVzb3VyY2VzLnZpZXdzfHxbXSk7X3Byb2Nlc3NKU29yU0NTUy5jYWxsKHRoaXMscmVzb3VyY2VzLnNjc3N8fFtdLCdzY3NzJyk7X3Byb2Nlc3NKU29yU0NTUy5jYWxsKHRoaXMscmVzb3VyY2VzLmpzfHxbXSwnanMnKTt9KS5iaW5kKHRoaXMpKTtmdW5jdGlvbiBfcHJvY2Vzc1ZpZXdzKHZpZXdzKXtfLmV4dGVuZCh0aGlzLnZpZXdzLF8uaW5kZXhCeShfLmZpbHRlcih2aWV3cyxmdW5jdGlvbih2aWV3KXtyZXR1cm4gdmlldy5hY3RpdmU7fSksJ2lkJykpO3ZhciBzZWxmPXRoaXM7dmFyIHJvb3RzPVtdO18uZWFjaCh0aGlzLnZpZXdzLGZ1bmN0aW9uKHZpZXcpe3ZpZXcubGV2ZWw9MDt2aWV3LmNoaWxkcmVuPVtdO30pO18uZWFjaCh0aGlzLnZpZXdzLGZ1bmN0aW9uKHZpZXcpe3ZhciBwYXJlbnRJZD12aWV3LmluaGVyaXRfaWRbMF07dmFyIHBhcmVudD1wYXJlbnRJZCYmc2VsZi52aWV3c1twYXJlbnRJZF07aWYocGFyZW50KXtwYXJlbnQuY2hpbGRyZW4ucHVzaCh2aWV3KTt9ZWxzZXtyb290cy5wdXNoKHZpZXcpO319KTt0aGlzLnNvcnRlZFZpZXdzPVtdO2Z1bmN0aW9uIHZpc2l0KHZpZXcsbGV2ZWwpe3ZpZXcubGV2ZWw9bGV2ZWw7c2VsZi5zb3J0ZWRWaWV3cy5wdXNoKHZpZXcpO18uZWFjaCh2aWV3LmNoaWxkcmVuLGZ1bmN0aW9uKGNoaWxkKXt2aXNpdChjaGlsZCxsZXZlbCsxKTt9KTt9Cl8uZWFjaChyb290cyxmdW5jdGlvbihyb290KXt2aXNpdChyb290LDApO30pO30KZnVuY3Rpb24gX3Byb2Nlc3NKU29yU0NTUyhkYXRhLHR5cGUpe2lmKHR5cGU9PT0nc2Nzcycpe3RoaXMuc29ydGVkU0NTUz1kYXRhO31lbHNle3RoaXMuc29ydGVkSlM9ZGF0YTt9CnZhciByZXNvdXJjZXM9dHlwZT09PSdzY3NzJz90aGlzLnNjc3M6dGhpcy5qcztfLmVhY2goZGF0YSxmdW5jdGlvbihidW5kbGVJbmZvcyl7Xy5lYWNoKGJ1bmRsZUluZm9zWzFdLGZ1bmN0aW9uKGluZm8pe2luZm8uYnVuZGxlX3htbGlkPWJ1bmRsZUluZm9zWzBdLnhtbGlkO30pO18uZXh0ZW5kKHJlc291cmNlcyxfLmluZGV4QnkoYnVuZGxlSW5mb3NbMV0sJ3VybCcpKTt9KTt9fSxfcmVzZXRSZXNvdXJjZTpmdW5jdGlvbihyZXNJRCx0eXBlKXtyZXNJRD1yZXNJRHx8dGhpcy5fZ2V0U2VsZWN0ZWRSZXNvdXJjZSgpO3R5cGU9dHlwZXx8dGhpcy5jdXJyZW50VHlwZTtpZih0aGlzLmN1cnJlbnRUeXBlPT09J3htbCcpe3JldHVybiBQcm9taXNlLnJlamVjdChfdCgiUmVzZXRpbmcgdmlld3MgaXMgbm90IHN1cHBvcnRlZCB5ZXQiKSk7fWVsc2V7dmFyIHJlc291cmNlPXR5cGU9PT0nc2Nzcyc/dGhpcy5zY3NzW3Jlc0lEXTp0aGlzLmpzW3Jlc0lEXTtyZXR1cm4gdGhpcy5fcnBjKHtyb3V0ZTonL3dlYl9lZGl0b3IvcmVzZXRfYXNzZXQnLHBhcmFtczp7dXJsOnJlc0lELGJ1bmRsZV94bWxpZDpyZXNvdXJjZS5idW5kbGVfeG1saWQsfSx9KTt9fSxfc2F2ZVNDU1NvckpTOmZ1bmN0aW9uKHNlc3Npb24pe3ZhciBzZWxmPXRoaXM7dmFyIHNlc3Npb25JZEVuZHNXaXRoSlM9Xy5zdHJpbmcuZW5kc1dpdGgoc2Vzc2lvbi5pZCwnLmpzJyk7dmFyIGJ1bmRsZVhtbElEPXNlc3Npb25JZEVuZHNXaXRoSlM/dGhpcy5qc1tzZXNzaW9uLmlkXS5idW5kbGVfeG1saWQ6dGhpcy5zY3NzW3Nlc3Npb24uaWRdLmJ1bmRsZV94bWxpZDt2YXIgZmlsZVR5cGU9c2Vzc2lvbklkRW5kc1dpdGhKUz8nanMnOidzY3NzJztyZXR1cm4gc2VsZi5fcnBjKHtyb3V0ZTonL3dlYl9lZGl0b3Ivc2F2ZV9hc3NldCcscGFyYW1zOnt1cmw6c2Vzc2lvbi5pZCxidW5kbGVfeG1saWQ6YnVuZGxlWG1sSUQsY29udGVudDpzZXNzaW9uLnRleHQsZmlsZV90eXBlOmZpbGVUeXBlLH0sfSkudGhlbihmdW5jdGlvbigpe3NlbGYuX3RvZ2dsZURpcnR5SW5mbyhzZXNzaW9uLmlkLGZpbGVUeXBlLGZhbHNlKTt9KTt9LF9zYXZlUmVzb3VyY2VzOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgdG9TYXZlPXt9O3ZhciBlcnJvckZvdW5kPWZhbHNlO18uZWFjaCh0aGlzLmVkaXRpbmdTZXNzaW9ucywoZnVuY3Rpb24oZWRpdGluZ1Nlc3Npb25zLHR5cGUpe2lmKGVycm9yRm91bmQpcmV0dXJuO3ZhciBkaXJ0eVNlc3Npb25zPV8ucGljayhlZGl0aW5nU2Vzc2lvbnMsZnVuY3Rpb24oc2Vzc2lvbil7cmV0dXJuIHNlc3Npb24uZ2V0VW5kb01hbmFnZXIoKS5oYXNVbmRvKCk7fSk7dG9TYXZlW3R5cGVdPV8ubWFwKGRpcnR5U2Vzc2lvbnMsZnVuY3Rpb24oc2Vzc2lvbixyZXNJRCl7cmV0dXJue2lkOnBhcnNlSW50KHJlc0lELDEwKXx8cmVzSUQsdGV4dDpzZXNzaW9uLmdldFZhbHVlKCksfTt9KTt0aGlzLl9zaG93RXJyb3JMaW5lKCk7Zm9yKHZhciBpPTA7aTx0b1NhdmVbdHlwZV0ubGVuZ3RoJiYhZXJyb3JGb3VuZDtpKyspe3ZhciBjaGVjaz0odHlwZT09PSd4bWwnP2NoZWNrWE1MOmNoZWNrU0NTUykodG9TYXZlW3R5cGVdW2ldLnRleHQpO2lmKCFjaGVjay5pc1ZhbGlkKXt0aGlzLl9zaG93RXJyb3JMaW5lKGNoZWNrLmVycm9yLmxpbmUsY2hlY2suZXJyb3IubWVzc2FnZSx0b1NhdmVbdHlwZV1baV0uaWQsdHlwZSk7ZXJyb3JGb3VuZD10b1NhdmVbdHlwZV1baV07fX19KS5iaW5kKHRoaXMpKTtpZihlcnJvckZvdW5kKXJldHVybiBQcm9taXNlLnJlamVjdChlcnJvckZvdW5kKTt2YXIgZGVmcz1bXTt2YXIgbXV0ZXg9bmV3IGNvbmN1cnJlbmN5Lk11dGV4KCk7Xy5lYWNoKHRvU2F2ZSwoZnVuY3Rpb24oX3RvU2F2ZSx0eXBlKXtfdG9TYXZlPV8uc29ydEJ5KF90b1NhdmUsJ2lkJykucmV2ZXJzZSgpO18uZWFjaChfdG9TYXZlLGZ1bmN0aW9uKHNlc3Npb24pe2RlZnMucHVzaChtdXRleC5leGVjKGZ1bmN0aW9uKCl7cmV0dXJuKHR5cGU9PT0neG1sJz9zZWxmLl9zYXZlVmlldyhzZXNzaW9uKTpzZWxmLl9zYXZlU0NTU29ySlMoc2Vzc2lvbikpO30pKTt9KTt9KS5iaW5kKHRoaXMpKTt2YXIgc2VsZj10aGlzO3JldHVybiBQcm9taXNlLmFsbChkZWZzKS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24ocmVzdWx0cyl7dmFyIGVycm9yPXJlc3VsdHNbMV07RGlhbG9nLmFsZXJ0KHNlbGYsJycse3RpdGxlOl90KCJTZXJ2ZXIgZXJyb3IiKSwkY29udGVudDokKCc8ZGl2Lz4nKS5odG1sKF90KCJBIHNlcnZlciBlcnJvciBvY2N1cmVkLiBQbGVhc2UgY2hlY2sgeW91IGNvcnJlY3RseSBzaWduZWQgaW4gYW5kIHRoYXQgdGhlIGZpbGUgeW91IGFyZSBzYXZpbmcgaXMgY29ycmVjdGx5IGZvcm1hdHRlZC4iKQorJzxici8+JworZXJyb3IpfSk7fSk7fSxfc2F2ZVZpZXc6ZnVuY3Rpb24oc2Vzc2lvbil7dmFyIHNlbGY9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3NlbGYuX3JwYyh7bW9kZWw6J2lyLnVpLnZpZXcnLG1ldGhvZDond3JpdGUnLGFyZ3M6W1tzZXNzaW9uLmlkXSx7YXJjaDpzZXNzaW9uLnRleHR9XSx9LHtub0NvbnRleHRLZXlzOidsYW5nJyx9KS50aGVuKGZ1bmN0aW9uKCl7c2VsZi5fdG9nZ2xlRGlydHlJbmZvKHNlc3Npb24uaWQsJ3htbCcsZmFsc2UpO3Jlc29sdmUoKTt9LGZ1bmN0aW9uKHNvdXJjZSxlcnJvcil7cmVqZWN0KHNlc3Npb24sZXJyb3IpO30pO30pO30sX3Nob3dFcnJvckxpbmU6ZnVuY3Rpb24obGluZSxtZXNzYWdlLHJlc0lELHR5cGUpe2lmKGxpbmU9PT11bmRlZmluZWR8fGxpbmU8PTApe2lmKHRoaXMuJGVycm9yTGluZSl7dGhpcy4kZXJyb3JMaW5lLnJlbW92ZUNsYXNzKCdvX2Vycm9yJyk7dGhpcy4kZXJyb3JMaW5lLm9mZignLm9fZXJyb3InKTt0aGlzLiRlcnJvckxpbmU9dW5kZWZpbmVkO3RoaXMuJGVycm9yQ29udGVudC5yZW1vdmVDbGFzcygnb19lcnJvcicpO3RoaXMuJGVycm9yQ29udGVudD11bmRlZmluZWQ7fQpyZXR1cm47fQppZih0eXBlKXRoaXMuX3N3aXRjaFR5cGUodHlwZSk7aWYodGhpcy5fZ2V0U2VsZWN0ZWRSZXNvdXJjZSgpPT09cmVzSUQpe19fc2hvd0Vycm9yTGluZS5jYWxsKHRoaXMsbGluZSk7fWVsc2V7dmFyIG9uQ2hhbmdlU2Vzc2lvbj0oZnVuY3Rpb24oKXt0aGlzLmFjZUVkaXRvci5vZmYoJ2NoYW5nZVNlc3Npb24nLG9uQ2hhbmdlU2Vzc2lvbik7Xy5kZWxheShfX3Nob3dFcnJvckxpbmUuYmluZCh0aGlzLGxpbmUpLDQwMCk7fSkuYmluZCh0aGlzKTt0aGlzLmFjZUVkaXRvci5vbignY2hhbmdlU2Vzc2lvbicsb25DaGFuZ2VTZXNzaW9uKTt0aGlzLl9kaXNwbGF5UmVzb3VyY2UocmVzSUQsdGhpcy5jdXJyZW50VHlwZSk7fQpmdW5jdGlvbiBfX3Nob3dFcnJvckxpbmUobGluZSl7dGhpcy5hY2VFZGl0b3IuZ290b0xpbmUobGluZSk7dGhpcy4kZXJyb3JMaW5lPXRoaXMuJHZpZXdFZGl0b3IuZmluZCgnLmFjZV9ndXR0ZXItY2VsbCcpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCgkKHRoaXMpLnRleHQoKSk9PT1saW5lO30pLmFkZENsYXNzKCdvX2Vycm9yJyk7dGhpcy4kZXJyb3JMaW5lLmFkZENsYXNzKCdvX2Vycm9yJykub24oJ2NsaWNrLm9fZXJyb3InLGZ1bmN0aW9uKCl7dmFyICRtZXNzYWdlPSQoJzxkaXYvPicpLmh0bWwobWVzc2FnZSk7JG1lc3NhZ2UudGV4dCgkbWVzc2FnZS50ZXh0KCkpO0RpYWxvZy5hbGVydCh0aGlzLCIiLHskY29udGVudDokbWVzc2FnZX0pO30pO3RoaXMuJGVycm9yQ29udGVudD10aGlzLiR2aWV3RWRpdG9yLmZpbmQoJy5hY2Vfc2Nyb2xsZXInKS5hZGRDbGFzcygnb19lcnJvcicpO319LF9zd2l0Y2hUeXBlOmZ1bmN0aW9uKHR5cGUpe3RoaXMuY3VycmVudFR5cGU9dHlwZTt0aGlzLiR0eXBlU3dpdGNoZXJCdG4uaHRtbCh0aGlzLiR0eXBlU3dpdGNoZXJDaG9pY2VzLmZpbHRlcignW2RhdGEtdHlwZT0nK3R5cGUrJ10nKS5odG1sKCkpO18uZWFjaCh0aGlzLiRsaXN0cyxmdW5jdGlvbigkbGlzdCxfdHlwZSl7JGxpc3QudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdHlwZSE9PV90eXBlKTt9KTt0aGlzLiRsaXN0c1t0eXBlXS5jaGFuZ2UoKTt0aGlzLiRpbmNsdWRlQnVuZGxlc0FyZWEudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdGhpcy5jdXJyZW50VHlwZSE9PSd4bWwnfHwhY29uZmlnLmlzRGVidWcoKSk7dGhpcy4kaW5jbHVkZUFsbFNDU1NBcmVhLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuY3VycmVudFR5cGUhPT0nc2Nzcyd8fCFjb25maWcuaXNEZWJ1ZygpKTt0aGlzLiRpbmNsdWRlQWxsU0NTU0FyZWEuZmluZCgnW2RhdGEtdmFsdWU9InJlc3RyaWN0ZWQiXScpLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMub3B0aW9ucy5kZWZhdWx0QnVuZGxlc1Jlc3RyaWN0aW9uLmxlbmd0aD09PTApO3RoaXMuJGZvcm1hdEJ1dHRvbi50b2dnbGVDbGFzcygnZC1ub25lJyx0aGlzLmN1cnJlbnRUeXBlIT09J3htbCcpO30sX3RvZ2dsZURpcnR5SW5mbzpmdW5jdGlvbihyZXNJRCx0eXBlLGlzRGlydHkpe3R5cGU9dHlwZXx8dGhpcy5jdXJyZW50VHlwZTtpZighcmVzSUR8fCF0aGlzLmVkaXRpbmdTZXNzaW9uc1t0eXBlXVtyZXNJRF0pcmV0dXJuO3ZhciAkb3B0aW9uPXRoaXMuJGxpc3RzW3R5cGVdLmZpbmQoJ1t2YWx1ZT0iJytyZXNJRCsnIl0nKTtpZihpc0RpcnR5PT09dW5kZWZpbmVkKXtpc0RpcnR5PXRoaXMuZWRpdGluZ1Nlc3Npb25zW3R5cGVdW3Jlc0lEXS5nZXRVbmRvTWFuYWdlcigpLmhhc1VuZG8oKTt9CiRvcHRpb24uZGF0YSgnZGlydHknLGlzRGlydHkpO30sX3VwZGF0ZVZpZXdTZWxlY3RET006ZnVuY3Rpb24oKXt2YXIgY3VycmVudElkPXRoaXMuX2dldFNlbGVjdGVkUmVzb3VyY2UoKTt2YXIgc2VsZj10aGlzO3RoaXMuJGxpc3RzLnhtbC5lbXB0eSgpO18uZWFjaCh0aGlzLnNvcnRlZFZpZXdzLGZ1bmN0aW9uKHZpZXcpe3NlbGYuJGxpc3RzLnhtbC5hcHBlbmQoJCgnPG9wdGlvbi8+Jyx7dmFsdWU6dmlldy5pZCx0ZXh0OnZpZXcubmFtZSxzZWxlY3RlZDpjdXJyZW50SWQ9PT12aWV3LmlkLCdkYXRhLWxldmVsJzp2aWV3LmxldmVsLCdkYXRhLWRlYnVnJzp2aWV3LnhtbF9pZCx9KSk7fSk7dGhpcy4kbGlzdHMuc2Nzcy5lbXB0eSgpO19wb3B1bGF0ZUxpc3QodGhpcy5zb3J0ZWRTQ1NTLHRoaXMuJGxpc3RzLnNjc3MsNSk7dGhpcy4kbGlzdHMuanMuZW1wdHkoKTtfcG9wdWxhdGVMaXN0KHRoaXMuc29ydGVkSlMsdGhpcy4kbGlzdHMuanMsMyk7dGhpcy4kbGlzdHMueG1sLnNlbGVjdDIoJ2Rlc3Ryb3knKTt0aGlzLiRsaXN0cy54bWwuc2VsZWN0Mih7Zm9ybWF0UmVzdWx0Ol9mb3JtYXREaXNwbGF5LmJpbmQodGhpcyxmYWxzZSksZm9ybWF0U2VsZWN0aW9uOl9mb3JtYXREaXNwbGF5LmJpbmQodGhpcyx0cnVlKSx9KTt0aGlzLiRsaXN0cy54bWwuZGF0YSgnc2VsZWN0MicpLmRyb3Bkb3duLmFkZENsYXNzKCdvX2FjZV9zZWxlY3QyX2Ryb3Bkb3duJyk7dGhpcy4kbGlzdHMuc2Nzcy5zZWxlY3QyKCdkZXN0cm95Jyk7dGhpcy4kbGlzdHMuc2Nzcy5zZWxlY3QyKHtmb3JtYXRSZXN1bHQ6X2Zvcm1hdERpc3BsYXkuYmluZCh0aGlzLGZhbHNlKSxmb3JtYXRTZWxlY3Rpb246X2Zvcm1hdERpc3BsYXkuYmluZCh0aGlzLHRydWUpLH0pO3RoaXMuJGxpc3RzLnNjc3MuZGF0YSgnc2VsZWN0MicpLmRyb3Bkb3duLmFkZENsYXNzKCdvX2FjZV9zZWxlY3QyX2Ryb3Bkb3duJyk7dGhpcy4kbGlzdHMuanMuc2VsZWN0MignZGVzdHJveScpO3RoaXMuJGxpc3RzLmpzLnNlbGVjdDIoe2Zvcm1hdFJlc3VsdDpfZm9ybWF0RGlzcGxheS5iaW5kKHRoaXMsZmFsc2UpLGZvcm1hdFNlbGVjdGlvbjpfZm9ybWF0RGlzcGxheS5iaW5kKHRoaXMsdHJ1ZSksfSk7dGhpcy4kbGlzdHMuanMuZGF0YSgnc2VsZWN0MicpLmRyb3Bkb3duLmFkZENsYXNzKCdvX2FjZV9zZWxlY3QyX2Ryb3Bkb3duJyk7ZnVuY3Rpb24gX3BvcHVsYXRlTGlzdChzb3J0ZWREYXRhLCRsaXN0LGxldHRlcnNUb1JlbW92ZSl7Xy5lYWNoKHNvcnRlZERhdGEsZnVuY3Rpb24oYnVuZGxlSW5mb3Mpe3ZhciAkb3B0Z3JvdXA9JCgnPG9wdGdyb3VwLz4nLHtsYWJlbDpidW5kbGVJbmZvc1swXS5uYW1lLH0pLmFwcGVuZFRvKCRsaXN0KTtfLmVhY2goYnVuZGxlSW5mb3NbMV0sZnVuY3Rpb24oZGF0YUluZm8pe3ZhciBuYW1lPWRhdGFJbmZvLnVybC5zdWJzdHJpbmcoXy5sYXN0SW5kZXhPZihkYXRhSW5mby51cmwsJy8nKSsxLGRhdGFJbmZvLnVybC5sZW5ndGgtbGV0dGVyc1RvUmVtb3ZlKTskb3B0Z3JvdXAuYXBwZW5kKCQoJzxvcHRpb24vPicse3ZhbHVlOmRhdGFJbmZvLnVybCx0ZXh0Om5hbWUsc2VsZWN0ZWQ6Y3VycmVudElkPT09ZGF0YUluZm8udXJsLCdkYXRhLWRlYnVnJzpkYXRhSW5mby51cmwsJ2RhdGEtY3VzdG9taXplZCc6ZGF0YUluZm8uY3VzdG9taXplZH0pKTt9KTt9KTt9CmZ1bmN0aW9uIF9mb3JtYXREaXNwbGF5KGlzU2VsZWN0ZWQsZGF0YSl7dmFyICRlbGVtPSQoZGF0YS5lbGVtZW50KTt2YXIgdGV4dD1kYXRhLnRleHR8fCcnO2lmKCFpc1NlbGVjdGVkKXt0ZXh0PUFycmF5KCgkZWxlbS5kYXRhKCdsZXZlbCcpfHwwKSsxKS5qb2luKCctJykrJyAnK3RleHQ7fQp2YXIgJGRpdj0kKCc8ZGl2Lz4nLHt0ZXh0OnRleHQsY2xhc3M6J29fYWNlX3NlbGVjdDJfcmVzdWx0Jyx9KTtpZigkZWxlbS5kYXRhKCdkaXJ0eScpfHwkZWxlbS5kYXRhKCdjdXN0b21pemVkJykpeyRkaXYucHJlcGVuZCgkKCc8c3Bhbi8+Jyx7Y2xhc3M6J21yOCBmYSBmYS1mbG9wcHktbyAnKygkZWxlbS5kYXRhKCdkaXJ0eScpPyd0ZXh0LXdhcm5pbmcnOid0ZXh0LXN1Y2Nlc3MnKSx9KSk7fQppZighaXNTZWxlY3RlZCYmY29uZmlnLmlzRGVidWcoKSYmJGVsZW0uZGF0YSgnZGVidWcnKSl7JGRpdi5hcHBlbmQoJCgnPHNwYW4vPicse3RleHQ6JyAoJyskZWxlbS5kYXRhKCdkZWJ1ZycpKycpJyxjbGFzczonbWw0IHNtYWxsIHRleHQtbXV0ZWQnLH0pKTt9CnJldHVybiAkZGl2O319LF9vbkNsb3NlQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmRvX2hpZGUoKTt9LF9vbkZvcm1hdENsaWNrOmZ1bmN0aW9uKCl7dGhpcy5fZm9ybWF0UmVzb3VyY2UoKTt9LF9vbkZpbHRlckNoYW5nZTpmdW5jdGlvbihldil7dmFyICRpdGVtPSQoZXYudGFyZ2V0KTskaXRlbS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7aWYoJGl0ZW0uZGF0YSgndHlwZScpPT09J3htbCcpe3RoaXMub3B0aW9ucy5pbmNsdWRlQnVuZGxlcz0kKGV2LnRhcmdldCkuZGF0YSgndmFsdWUnKT09PSdhbGwnO31lbHNle3RoaXMub3B0aW9ucy5maWxlc0ZpbHRlcj0kaXRlbS5kYXRhKCd2YWx1ZScpO30KdGhpcy5fbG9hZFJlc291cmNlcygpLnRoZW4odGhpcy5fdXBkYXRlVmlld1NlbGVjdERPTS5iaW5kKHRoaXMpKTt9LF9vblJlc0NoYW5nZTpmdW5jdGlvbigpe3RoaXMuX2Rpc3BsYXlSZXNvdXJjZSh0aGlzLl9nZXRTZWxlY3RlZFJlc291cmNlKCkpO30sX29uUmVzZXRDbGljazpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7RGlhbG9nLmNvbmZpcm0odGhpcyxfdCgiSWYgeW91IHJlc2V0IHRoaXMgZmlsZSwgYWxsIHlvdXIgY3VzdG9taXphdGlvbnMgd2lsbCBiZSBsb3N0IGFzIGl0IHdpbGwgYmUgcmV2ZXJ0ZWQgdG8gdGhlIGRlZmF1bHQgZmlsZS4iKSx7dGl0bGU6X3QoIkNhcmVmdWwgISIpLGNvbmZpcm1fY2FsbGJhY2s6ZnVuY3Rpb24oKXtzZWxmLl9yZXNldFJlc291cmNlKHNlbGYuX2dldFNlbGVjdGVkUmVzb3VyY2UoKSk7fSx9KTt9LF9vblNhdmVDbGljazpmdW5jdGlvbigpe3RoaXMuX3NhdmVSZXNvdXJjZXMoKTt9LF9vblR5cGVDaG9pY2U6ZnVuY3Rpb24oZXYpe2V2LnByZXZlbnREZWZhdWx0KCk7dGhpcy5fc3dpdGNoVHlwZSgkKGV2LnRhcmdldCkuZGF0YSgndHlwZScpKTt9LF9vbkNsb3NlV2FybmluZ0NsaWNrOmZ1bmN0aW9uKCl7dGhpcy4kd2FybmluZ01lc3NhZ2UuYWRkQ2xhc3MoJ2Qtbm9uZScpO30sfSk7cmV0dXJuIFZpZXdFZGl0b3I7fSk7OwoKLyogL3dlYl9lZGl0b3Ivc3RhdGljL3NyYy9qcy93eXNpd3lnL3Jvb3QuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWJfZWRpdG9yLnd5c2l3eWcucm9vdCcsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBhc3NldHNMb2FkZWQ9ZmFsc2U7dmFyIFd5c2l3eWdSb290PVdpZGdldC5leHRlbmQoe2Fzc2V0TGliczpbJ3dlYl9lZGl0b3IuY29tcGlsZWRfYXNzZXRzX3d5c2l3eWcnXSxwdWJsaWNNZXRob2RzOlsnaXNEaXJ0eScsJ3NhdmUnLCdnZXRWYWx1ZScsJ3NldFZhbHVlJywnZ2V0RWRpdGFibGUnLCdvbicsJ3RyaWdnZXInLCdmb2N1cyddLGluaXQ6ZnVuY3Rpb24ocGFyZW50LHBhcmFtcyl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3BhcmFtcz1wYXJhbXM7dGhpcy4kZWRpdG9yPW51bGw7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciAkdGFyZ2V0PXRoaXMuJGVsO3RoaXMuJGVsPW51bGw7cmV0dXJuIHRoaXMuX3N1cGVyKCkudGhlbihmdW5jdGlvbigpe2lmKCFhc3NldHNMb2FkZWQpe3ZhciBXeXNpd3lnPW9kb28uX19ERUJVR19fLnNlcnZpY2VzWyd3ZWJfZWRpdG9yLnd5c2l3eWcnXTtfLmVhY2goWydnZXRSYW5nZScsJ3NldFJhbmdlJywnc2V0UmFuZ2VGcm9tTm9kZSddLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe1d5c2l3eWdSb290W21ldGhvZE5hbWVdPVd5c2l3eWdbbWV0aG9kTmFtZV0uYmluZChXeXNpd3lnKTt9KTthc3NldHNMb2FkZWQ9dHJ1ZTt9CnZhciBXeXNpd3lnPXNlbGYuX2dldFd5c2l3eWdDb250cnVjdG9yKCk7dmFyIGluc3RhbmNlPW5ldyBXeXNpd3lnKHNlbGYsc2VsZi5fcGFyYW1zKTtzZWxmLl9wYXJhbXM9bnVsbDtfLmVhY2goc2VsZi5wdWJsaWNNZXRob2RzLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe3NlbGZbbWV0aG9kTmFtZV09aW5zdGFuY2VbbWV0aG9kTmFtZV0uYmluZChpbnN0YW5jZSk7fSk7cmV0dXJuIGluc3RhbmNlLmF0dGFjaFRvKCR0YXJnZXQpLnRoZW4oZnVuY3Rpb24oKXtzZWxmLiRlZGl0b3I9aW5zdGFuY2UuJGVkaXRvcnx8aW5zdGFuY2UuJGVsO30pO30pO30sX2dldFd5c2l3eWdDb250cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIG9kb28uX19ERUJVR19fLnNlcnZpY2VzWyd3ZWJfZWRpdG9yLnd5c2l3eWcnXTt9fSk7cmV0dXJuIFd5c2l3eWdSb290O30pO29kb28uZGVmaW5lKCd3ZWJfZWRpdG9yLnd5c2l3eWcuZGVmYXVsdF9vcHRpb25zJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgX2x0PWNvcmUuX2x0O3JldHVybntzdHlsZVRhZ3M6WydwJywncHJlJywnc21hbGwnLCdoMScsJ2gyJywnaDMnLCdoNCcsJ2g1JywnaDYnLCdibG9ja3F1b3RlJ10sZm9udFNpemVzOltfbHQoJ0RlZmF1bHQnKSw4LDksMTAsMTEsMTIsMTQsMTgsMjQsMzYsNDgsNjJdLH07fSk7OwoKLyogL3dlYl90b3VyL3N0YXRpYy9zcmMvanMvdGlwLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbl9sYXp5JyAqLwpvZG9vLmRlZmluZSgnd2ViX3RvdXIuVGlwJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvbmZpZz1yZXF1aXJlKCd3ZWIuY29uZmlnJyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgVGlwPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOiJUaXAiLHhtbERlcGVuZGVuY2llczpbJy93ZWJfdG91ci9zdGF0aWMvc3JjL3htbC90aXAueG1sJ10sZXZlbnRzOntjbGljazonX29uVGlwQ2xpY2tlZCcsbW91c2VlbnRlcjoiX3RvX2luZm9fbW9kZSIsbW91c2VsZWF2ZToiX3RvX2J1YmJsZV9tb2RlIix9LGluaXQ6ZnVuY3Rpb24ocGFyZW50LGluZm8pe3RoaXMuX3N1cGVyKHBhcmVudCk7dGhpcy5pbmZvPV8uZGVmYXVsdHMoaW5mbyx7cG9zaXRpb246InJpZ2h0Iix3aWR0aDoyNzAsc3BhY2U6MTAsb3ZlcmxheTp7eDo1MCx5OjUwLH0sfSk7dGhpcy5wb3NpdGlvbj17dG9wOiI1MCUiLGxlZnQ6IjUwJSIsfTt9LGF0dGFjaF90bzpmdW5jdGlvbigkYW5jaG9yKXt0aGlzLiRhbmNob3I9JGFuY2hvcjt0aGlzLiRpZGVhbF9sb2NhdGlvbj10aGlzLl9nZXRfaWRlYWxfbG9jYXRpb24oKTt2YXIgcG9zaXRpb249dGhpcy4kaWRlYWxfbG9jYXRpb24uY3NzKCJwb3NpdGlvbiIpO2lmKHBvc2l0aW9uPT09InN0YXRpYyJ8fHBvc2l0aW9uPT09InJlbGF0aXZlIil7dGhpcy4kaWRlYWxfbG9jYXRpb24uYWRkQ2xhc3MoIm9fdG9vbHRpcF9wYXJlbnQiKTt9CnJldHVybiB0aGlzLmFwcGVuZFRvKHRoaXMuJGlkZWFsX2xvY2F0aW9uKTt9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy4kdG9vbHRpcF9vdmVybGF5PXRoaXMuJCgiLm9fdG9vbHRpcF9vdmVybGF5Iik7dGhpcy4kdG9vbHRpcF9jb250ZW50PXRoaXMuJCgiLm9fdG9vbHRpcF9jb250ZW50Iik7dGhpcy5pbml0X3dpZHRoPXRoaXMuJGVsLmlubmVyV2lkdGgoKTt0aGlzLmluaXRfaGVpZ2h0PXRoaXMuJGVsLmlubmVySGVpZ2h0KCk7dGhpcy5kb3VibGVfYm9yZGVyX3dpZHRoPXRoaXMuJGVsLm91dGVyV2lkdGgoKS10aGlzLmluaXRfd2lkdGg7dGhpcy5jb250ZW50X3dpZHRoPXRoaXMuJHRvb2x0aXBfY29udGVudC5vdXRlcldpZHRoKHRydWUpO3RoaXMuY29udGVudF9oZWlnaHQ9dGhpcy4kdG9vbHRpcF9jb250ZW50Lm91dGVySGVpZ2h0KHRydWUpO3RoaXMuJHdpbmRvdz0kKHdpbmRvdyk7dGhpcy4kdG9vbHRpcF9jb250ZW50LmNzcyh7d2lkdGg6IjEwMCUiLGhlaWdodDoiMTAwJSIsfSk7Xy5lYWNoKHRoaXMuaW5mby5ldmVudF9oYW5kbGVycywoZnVuY3Rpb24oZGF0YSl7dGhpcy4kdG9vbHRpcF9jb250ZW50Lm9uKGRhdGEuZXZlbnQsZGF0YS5zZWxlY3RvcixkYXRhLmhhbmRsZXIpO30pLmJpbmQodGhpcykpO3RoaXMuX2JpbmRfYW5jaG9yX2V2ZW50cygpO3RoaXMuX3JlcG9zaXRpb24oKTt0aGlzLiRlbC5jc3MoIm9wYWNpdHkiLDEpO2NvcmUuYnVzLm9uKCJyZXNpemUiLHRoaXMsXy5kZWJvdW5jZShmdW5jdGlvbigpe2lmKHRoaXMudGlwX29wZW5lZCl7dGhpcy5fdG9fYnViYmxlX21vZGUodHJ1ZSk7fQp0aGlzLl9yZXBvc2l0aW9uKCk7fSw1MDApKTt0aGlzLiRlbC5vbigidHJhbnNpdGlvbmVuZCBvVHJhbnNpdGlvbkVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIiwoZnVuY3Rpb24oKXtpZighdGhpcy50aXBfb3BlbmVkJiZ0aGlzLiRlbC5wYXJlbnQoKVswXT09PWRvY3VtZW50LmJvZHkpe3RoaXMuJGVsLmRldGFjaCgpO3RoaXMuJGVsLmNzcyh0aGlzLnBvc2l0aW9uKTt0aGlzLiRlbC5hcHBlbmRUbyh0aGlzLiRpZGVhbF9sb2NhdGlvbik7fX0pLmJpbmQodGhpcykpO3JldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fdW5iaW5kX2FuY2hvcl9ldmVudHMoKTtjbGVhclRpbWVvdXQodGhpcy50aW1lckluKTtjbGVhclRpbWVvdXQodGhpcy50aW1lck91dCk7aWYodGhpcy4kaWRlYWxfbG9jYXRpb24uY2hpbGRyZW4oIi5vX3Rvb2x0aXAiKS5ub3QodGhpcy4kZWxbMF0pLmxlbmd0aD09PTApe3RoaXMuJGlkZWFsX2xvY2F0aW9uLnJlbW92ZUNsYXNzKCJvX3Rvb2x0aXBfcGFyZW50Iik7fQpyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sdXBkYXRlOmZ1bmN0aW9uKCRhbmNob3Ipe2lmKCEkYW5jaG9yLmlzKHRoaXMuJGFuY2hvcikpe3RoaXMuX3VuYmluZF9hbmNob3JfZXZlbnRzKCk7dGhpcy4kYW5jaG9yPSRhbmNob3I7dGhpcy4kaWRlYWxfbG9jYXRpb249dGhpcy5fZ2V0X2lkZWFsX2xvY2F0aW9uKCk7aWYodGhpcy4kZWwucGFyZW50KClbMF0hPT1kb2N1bWVudC5ib2R5KXt0aGlzLiRlbC5hcHBlbmRUbyh0aGlzLiRpZGVhbF9sb2NhdGlvbik7fQp0aGlzLl9iaW5kX2FuY2hvcl9ldmVudHMoKTt9CnRoaXMuX3JlcG9zaXRpb24oKTt9LF9nZXRfaWRlYWxfbG9jYXRpb246ZnVuY3Rpb24oKXt2YXIgJGxvY2F0aW9uPXRoaXMuJGFuY2hvcjtpZigkbG9jYXRpb24uaXMoImh0bWwsYm9keSIpKXtyZXR1cm4gJChkb2N1bWVudC5ib2R5KTt9CnZhciBvO3ZhciBwO2RveyRsb2NhdGlvbj0kbG9jYXRpb24ucGFyZW50KCk7bz0kbG9jYXRpb24uY3NzKCJvdmVyZmxvdyIpO3A9JGxvY2F0aW9uLmNzcygicG9zaXRpb24iKTt9d2hpbGUoJGxvY2F0aW9uLmhhc0NsYXNzKCdkcm9wZG93bi1tZW51Jyl8fCgobz09PSJ2aXNpYmxlInx8bz09PSJoaWRkZW4iKSYmcCE9PSJmaXhlZCImJiRsb2NhdGlvblswXS50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPT0nQk9EWScpKTtyZXR1cm4gJGxvY2F0aW9uO30sX3JlcG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLnRpcF9vcGVuZWQpcmV0dXJuO2lmKCF0aGlzLiRlbClyZXR1cm47dGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm9fYW5pbWF0ZWQiKTt2YXIgYXBwZW5kQXQ9dGhpcy5pbmZvLnBvc2l0aW9uO2lmKF90LmRhdGFiYXNlLnBhcmFtZXRlcnMuZGlyZWN0aW9uPT09J3J0bCcpe2FwcGVuZEF0PWFwcGVuZEF0PT09J3JpZ2h0Jz8nbGVmdCc6J3JpZ2h0Jzt9CnRoaXMuJGVsLnBvc2l0aW9uKHtteTp0aGlzLl9nZXRfc3BhY2VkX2ludmVydGVkX3Bvc2l0aW9uKGFwcGVuZEF0KSxhdDphcHBlbmRBdCxvZjp0aGlzLiRhbmNob3IsY29sbGlzaW9uOiJub25lIix9KTt2YXIgcG9zaXRpb25SaWdodD1fdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLmRpcmVjdGlvbj09PSdydGwnPyJyaWdodCI6ImxlZnQiO3ZhciBwb3NpdGlvbkxlZnQ9X3QuZGF0YWJhc2UucGFyYW1ldGVycy5kaXJlY3Rpb249PT0ncnRsJz8ibGVmdCI6InJpZ2h0Ijt2YXIgb2Zmc2V0PXRoaXMuJGVsLm9mZnNldCgpO3RoaXMuJHRvb2x0aXBfb3ZlcmxheS5jc3Moe3RvcDotTWF0aC5taW4oKHRoaXMuaW5mby5wb3NpdGlvbj09PSJib3R0b20iP3RoaXMuaW5mby5zcGFjZTp0aGlzLmluZm8ub3ZlcmxheS55KSxvZmZzZXQudG9wKSxyaWdodDotTWF0aC5taW4oKHRoaXMuaW5mby5wb3NpdGlvbj09PXBvc2l0aW9uUmlnaHQ/dGhpcy5pbmZvLnNwYWNlOnRoaXMuaW5mby5vdmVybGF5LngpLHRoaXMuJHdpbmRvdy53aWR0aCgpLShvZmZzZXQubGVmdCt0aGlzLmluaXRfd2lkdGgrdGhpcy5kb3VibGVfYm9yZGVyX3dpZHRoKSksYm90dG9tOi1NYXRoLm1pbigodGhpcy5pbmZvLnBvc2l0aW9uPT09InRvcCI/dGhpcy5pbmZvLnNwYWNlOnRoaXMuaW5mby5vdmVybGF5LnkpLHRoaXMuJHdpbmRvdy5oZWlnaHQoKS0ob2Zmc2V0LnRvcCt0aGlzLmluaXRfaGVpZ2h0K3RoaXMuZG91YmxlX2JvcmRlcl93aWR0aCkpLGxlZnQ6LU1hdGgubWluKCh0aGlzLmluZm8ucG9zaXRpb249PT1wb3NpdGlvbkxlZnQ/dGhpcy5pbmZvLnNwYWNlOnRoaXMuaW5mby5vdmVybGF5LngpLG9mZnNldC5sZWZ0KSx9KTt0aGlzLnBvc2l0aW9uPXRoaXMuJGVsLnBvc2l0aW9uKCk7dGhpcy4kZWwuYWRkQ2xhc3MoIm9fYW5pbWF0ZWQiKTt9LF9iaW5kX2FuY2hvcl9ldmVudHM6ZnVuY3Rpb24oKXt0aGlzLmNvbnN1bWVfZXZlbnQ9VGlwLmdldENvbnN1bWVFdmVudFR5cGUodGhpcy4kYW5jaG9yKTt0aGlzLiRhbmNob3Iub24odGhpcy5jb25zdW1lX2V2ZW50KyIuYW5jaG9yIiwoZnVuY3Rpb24oZSl7aWYoZS50eXBlIT09Im1vdXNlZG93biJ8fGUud2hpY2g9PT0xKXt0aGlzLnRyaWdnZXIoInRpcF9jb25zdW1lZCIpO3RoaXMuX3VuYmluZF9hbmNob3JfZXZlbnRzKCk7fX0pLmJpbmQodGhpcykpO3RoaXMuJGFuY2hvci5vbignbW91c2VlbnRlci5hbmNob3InLHRoaXMuX3RvX2luZm9fbW9kZS5iaW5kKHRoaXMpKTt0aGlzLiRhbmNob3Iub24oJ21vdXNlbGVhdmUuYW5jaG9yJyx0aGlzLl90b19idWJibGVfbW9kZS5iaW5kKHRoaXMpKTt9LF91bmJpbmRfYW5jaG9yX2V2ZW50czpmdW5jdGlvbigpe3RoaXMuJGFuY2hvci5vZmYoIi5hbmNob3IiKTt9LF9nZXRfc3BhY2VkX2ludmVydGVkX3Bvc2l0aW9uOmZ1bmN0aW9uKHBvc2l0aW9uKXtpZihwb3NpdGlvbj09PSJyaWdodCIpcmV0dXJuImxlZnQrIit0aGlzLmluZm8uc3BhY2U7aWYocG9zaXRpb249PT0ibGVmdCIpcmV0dXJuInJpZ2h0LSIrdGhpcy5pbmZvLnNwYWNlO2lmKHBvc2l0aW9uPT09ImJvdHRvbSIpcmV0dXJuInRvcCsiK3RoaXMuaW5mby5zcGFjZTtyZXR1cm4iYm90dG9tLSIrdGhpcy5pbmZvLnNwYWNlO30sX3RvX2luZm9fbW9kZTpmdW5jdGlvbihmb3JjZSl7aWYodGhpcy50aW1lck91dCE9PXVuZGVmaW5lZCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJPdXQpO3RoaXMudGltZXJPdXQ9dW5kZWZpbmVkO3JldHVybjt9CmlmKHRoaXMudGlwX29wZW5lZCl7cmV0dXJuO30KaWYoZm9yY2U9PT10cnVlKXt0aGlzLl9idWlsZF9pbmZvX21vZGUoKTt9ZWxzZXt0aGlzLnRpbWVySW49c2V0VGltZW91dCh0aGlzLl9idWlsZF9pbmZvX21vZGUuYmluZCh0aGlzKSwxMDApO319LF9idWlsZF9pbmZvX21vZGU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lckluKTt0aGlzLnRpbWVySW49dW5kZWZpbmVkO3RoaXMudGlwX29wZW5lZD10cnVlO3ZhciBvZmZzZXQ9dGhpcy4kZWwub2Zmc2V0KCk7aWYodGhpcy4kZWwucGFyZW50KClbMF0hPT1kb2N1bWVudC5ib2R5KXt0aGlzLiRlbC5kZXRhY2goKTt0aGlzLiRlbC5jc3Mob2Zmc2V0KTt0aGlzLiRlbC5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTt9CnZhciBtYkxlZnQ9MDt2YXIgbWJUb3A9MDt2YXIgb3ZlcmZsb3c9ZmFsc2U7dmFyIHBvc1ZlcnRpY2FsPSh0aGlzLmluZm8ucG9zaXRpb249PT0idG9wInx8dGhpcy5pbmZvLnBvc2l0aW9uPT09ImJvdHRvbSIpO2lmKHBvc1ZlcnRpY2FsKXtvdmVyZmxvdz0ob2Zmc2V0LmxlZnQrdGhpcy5jb250ZW50X3dpZHRoK3RoaXMuZG91YmxlX2JvcmRlcl93aWR0aCt0aGlzLmluZm8ub3ZlcmxheS54PnRoaXMuJHdpbmRvdy53aWR0aCgpKTt9ZWxzZXtvdmVyZmxvdz0ob2Zmc2V0LnRvcCt0aGlzLmNvbnRlbnRfaGVpZ2h0K3RoaXMuZG91YmxlX2JvcmRlcl93aWR0aCt0aGlzLmluZm8ub3ZlcmxheS55PnRoaXMuJHdpbmRvdy5oZWlnaHQoKSk7fQppZihwb3NWZXJ0aWNhbCYmb3ZlcmZsb3d8fHRoaXMuaW5mby5wb3NpdGlvbj09PSJsZWZ0Inx8KF90LmRhdGFiYXNlLnBhcmFtZXRlcnMuZGlyZWN0aW9uPT09J3J0bCcmJnRoaXMuaW5mby5wb3NpdGlvbj09InJpZ2h0Iikpe21iTGVmdC09KHRoaXMuY29udGVudF93aWR0aC10aGlzLmluaXRfd2lkdGgpO30KaWYoIXBvc1ZlcnRpY2FsJiZvdmVyZmxvd3x8dGhpcy5pbmZvLnBvc2l0aW9uPT09InRvcCIpe21iVG9wLT0odGhpcy5jb250ZW50X2hlaWdodC10aGlzLmluaXRfaGVpZ2h0KTt9CnRoaXMuJGVsLnRvZ2dsZUNsYXNzKCJpbnZlcnNlIixvdmVyZmxvdyk7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm9fYW5pbWF0ZWQiKS5hZGRDbGFzcygiYWN0aXZlIik7dGhpcy4kZWwuY3NzKHt3aWR0aDp0aGlzLmNvbnRlbnRfd2lkdGgsaGVpZ2h0OnRoaXMuY29udGVudF9oZWlnaHQsIm1hcmdpbi1sZWZ0IjptYkxlZnQsIm1hcmdpbi10b3AiOm1iVG9wLH0pO30sX3RvX2J1YmJsZV9tb2RlOmZ1bmN0aW9uKGZvcmNlKXtpZih0aGlzLnRpbWVySW4hPT11bmRlZmluZWQpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVySW4pO3RoaXMudGltZXJJbj11bmRlZmluZWQ7cmV0dXJuO30KaWYoIXRoaXMudGlwX29wZW5lZCl7cmV0dXJuO30KaWYoZm9yY2U9PT10cnVlKXt0aGlzLl9idWlsZF9idWJibGVfbW9kZSgpO31lbHNle3RoaXMudGltZXJPdXQ9c2V0VGltZW91dCh0aGlzLl9idWlsZF9idWJibGVfbW9kZS5iaW5kKHRoaXMpLDMwMCk7fX0sX2J1aWxkX2J1YmJsZV9tb2RlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJPdXQpO3RoaXMudGltZXJPdXQ9dW5kZWZpbmVkO3RoaXMudGlwX29wZW5lZD1mYWxzZTt0aGlzLiRlbC5yZW1vdmVDbGFzcygiYWN0aXZlIikuYWRkQ2xhc3MoIm9fYW5pbWF0ZWQiKTt0aGlzLiRlbC5jc3Moe3dpZHRoOnRoaXMuaW5pdF93aWR0aCxoZWlnaHQ6dGhpcy5pbml0X2hlaWdodCxtYXJnaW46MCx9KTt9LF9vblRpcENsaWNrZWQ6ZnVuY3Rpb24oKXtpZihjb25maWcuZGV2aWNlLnRvdWNoJiZ0aGlzLnRpcF9vcGVuZWQpe3RoaXMuX3RvX2J1YmJsZV9tb2RlKCk7fX0sfSk7VGlwLmdldENvbnN1bWVFdmVudFR5cGU9ZnVuY3Rpb24oJGVsZW1lbnQpe2lmKCRlbGVtZW50Lmhhc0NsYXNzKCdvX2ZpZWxkX21hbnkyb25lJyl8fCRlbGVtZW50Lmhhc0NsYXNzKCdvX2ZpZWxkX21hbnkybWFueXRhZ3MnKSl7cmV0dXJuJ2F1dG9jb21wbGV0ZXNlbGVjdCc7fWVsc2UgaWYoJGVsZW1lbnQuaXMoInRleHRhcmVhIil8fCRlbGVtZW50LmZpbHRlcigiaW5wdXQiKS5pcyhmdW5jdGlvbigpe3ZhciB0eXBlPSQodGhpcykuYXR0cigidHlwZSIpO3JldHVybiF0eXBlfHwhIXR5cGUubWF0Y2goL14oZW1haWx8bnVtYmVyfHBhc3N3b3JkfHNlYXJjaHx0ZWx8dGV4dHx1cmwpJC8pO30pKXtyZXR1cm4iaW5wdXQiO30KcmV0dXJuImNsaWNrIjt9O3JldHVybiBUaXA7fSk7OwoKLyogL3dlYl90b3VyL3N0YXRpYy9zcmMvanMvdG91cl91dGlscy5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYl90b3VyLnV0aWxzJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZ2V0X3N0ZXBfa2V5KG5hbWUpe3JldHVybid0b3VyXycrbmFtZSsnX3N0ZXAnO30KZnVuY3Rpb24gZ2V0X3J1bm5pbmdfa2V5KCl7cmV0dXJuJ3J1bm5pbmdfdG91cic7fQpmdW5jdGlvbiBnZXRfcnVubmluZ19kZWxheV9rZXkoKXtyZXR1cm4gZ2V0X3J1bm5pbmdfa2V5KCkrIl9kZWxheSI7fQpmdW5jdGlvbiBnZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50KCRlbGVtZW50cyl7Zm9yKHZhciBpPTA7aTwkZWxlbWVudHMubGVuZ3RoO2krKyl7dmFyICRpPSRlbGVtZW50cy5lcShpKTtpZigkaS5pcygnOnZpc2libGU6aGFzVmlzaWJpbGl0eScpKXtyZXR1cm4gJGk7fX0KcmV0dXJuICQoKTt9CmZ1bmN0aW9uIGRvX2JlZm9yZV91bmxvYWQoaWZfdW5sb2FkX2NhbGxiYWNrLGlmX25vdF91bmxvYWRfY2FsbGJhY2spe2lmX3VubG9hZF9jYWxsYmFjaz1pZl91bmxvYWRfY2FsbGJhY2t8fGZ1bmN0aW9uKCl7fTtpZl9ub3RfdW5sb2FkX2NhbGxiYWNrPWlmX25vdF91bmxvYWRfY2FsbGJhY2t8fGlmX3VubG9hZF9jYWxsYmFjazt2YXIgb2xkX2JlZm9yZT13aW5kb3cub25iZWZvcmV1bmxvYWQ7dmFyIHJlbG9hZF90aW1lb3V0O3dpbmRvdy5vbmJlZm9yZXVubG9hZD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyZWxvYWRfdGltZW91dCk7d2luZG93Lm9uYmVmb3JldW5sb2FkPW9sZF9iZWZvcmU7aWZfdW5sb2FkX2NhbGxiYWNrKCk7aWYob2xkX2JlZm9yZSlyZXR1cm4gb2xkX2JlZm9yZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtyZWxvYWRfdGltZW91dD1fLmRlZmVyKGZ1bmN0aW9uKCl7d2luZG93Lm9uYmVmb3JldW5sb2FkPW9sZF9iZWZvcmU7aWZfbm90X3VubG9hZF9jYWxsYmFjaygpO30pO30KZnVuY3Rpb24gZ2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3Ioc2VsZWN0b3Ipe2lmKF8uaXNTdHJpbmcoc2VsZWN0b3IpJiZzZWxlY3Rvci5pbmRleE9mKCdpZnJhbWUnKSE9PS0xKXt2YXIgJGlmcmFtZT0kKHNlbGVjdG9yLnNwbGl0KCdpZnJhbWUnKVswXSsnIGlmcmFtZScpO3ZhciAkZWw9JGlmcmFtZS5jb250ZW50cygpLmZpbmQoc2VsZWN0b3Iuc3BsaXQoJ2lmcmFtZScpWzFdKTskZWwuaWZyYW1lQ29udGFpbmVyPSRpZnJhbWVbMF07cmV0dXJuICRlbDt9ZWxzZXtyZXR1cm4gJChzZWxlY3Rvcik7fX0KcmV0dXJueydnZXRfc3RlcF9rZXknOmdldF9zdGVwX2tleSwnZ2V0X3J1bm5pbmdfa2V5JzpnZXRfcnVubmluZ19rZXksJ2dldF9ydW5uaW5nX2RlbGF5X2tleSc6Z2V0X3J1bm5pbmdfZGVsYXlfa2V5LCdnZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50JzpnZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50LCdkb19iZWZvcmVfdW5sb2FkJzpkb19iZWZvcmVfdW5sb2FkLCdnZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3Rvcic6Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IsfTt9KTs7CgovKiAvd2ViX3RvdXIvc3RhdGljL3NyYy9qcy9ydW5uaW5nX3RvdXJfYWN0aW9uX2hlbHBlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYl90b3VyLlJ1bm5pbmdUb3VyQWN0aW9uSGVscGVyJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgdXRpbHM9cmVxdWlyZSgnd2ViX3RvdXIudXRpbHMnKTt2YXIgVGlwPXJlcXVpcmUoJ3dlYl90b3VyLlRpcCcpO3ZhciBnZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50PXV0aWxzLmdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQ7dmFyIGdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yPXV0aWxzLmdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yO3ZhciBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcj1jb3JlLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0aXBfd2lkZ2V0KXt0aGlzLnRpcF93aWRnZXQ9dGlwX3dpZGdldDt9LGNsaWNrOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuX2NsaWNrKHRoaXMuX2dldF9hY3Rpb25fdmFsdWVzKGVsZW1lbnQpKTt9LGRibGNsaWNrOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuX2NsaWNrKHRoaXMuX2dldF9hY3Rpb25fdmFsdWVzKGVsZW1lbnQpLDIpO30sdHJpcGxlY2xpY2s6ZnVuY3Rpb24oZWxlbWVudCl7dGhpcy5fY2xpY2sodGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksMyk7fSxjbGlja25vbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCl7dGhpcy5fY2xpY2sodGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksMSxmYWxzZSk7fSx0ZXh0OmZ1bmN0aW9uKHRleHQsZWxlbWVudCl7dGhpcy5fdGV4dCh0aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KSx0ZXh0KTt9LGRyYWdfYW5kX2Ryb3A6ZnVuY3Rpb24odG8sZWxlbWVudCl7dGhpcy5fZHJhZ19hbmRfZHJvcCh0aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KSx0byk7fSxrZXlkb3duOmZ1bmN0aW9uKGtleUNvZGVzLGVsZW1lbnQpe3RoaXMuX2tleWRvd24odGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksa2V5Q29kZXMuc3BsaXQoL1ssXHNdKy8pKTt9LGF1dG86ZnVuY3Rpb24oZWxlbWVudCl7dmFyIHZhbHVlcz10aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KTtpZih2YWx1ZXMuY29uc3VtZV9ldmVudD09PSJpbnB1dCIpe3RoaXMuX3RleHQodmFsdWVzKTt9ZWxzZXt0aGlzLl9jbGljayh2YWx1ZXMpO319LF9nZXRfYWN0aW9uX3ZhbHVlczpmdW5jdGlvbihlbGVtZW50KXt2YXIgJGU9Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IoZWxlbWVudCk7dmFyICRlbGVtZW50PWVsZW1lbnQ/Z2V0X2ZpcnN0X3Zpc2libGVfZWxlbWVudCgkZSk6dGhpcy50aXBfd2lkZ2V0LiRhbmNob3I7aWYoJGVsZW1lbnQubGVuZ3RoPT09MCl7JGVsZW1lbnQ9JGUuZmlyc3QoKTt9CnZhciBjb25zdW1lX2V2ZW50PWVsZW1lbnQ/VGlwLmdldENvbnN1bWVFdmVudFR5cGUoJGVsZW1lbnQpOnRoaXMudGlwX3dpZGdldC5jb25zdW1lX2V2ZW50O3JldHVybnskZWxlbWVudDokZWxlbWVudCxjb25zdW1lX2V2ZW50OmNvbnN1bWVfZXZlbnQsfTt9LF9jbGljazpmdW5jdGlvbih2YWx1ZXMsbmIsbGVhdmUpe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJtb3VzZW92ZXIiKTt2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcigibW91c2VlbnRlciIpO2Zvcih2YXIgaT0xO2k8PShuYnx8MSk7aSsrKXt0cmlnZ2VyX21vdXNlX2V2ZW50KHZhbHVlcy4kZWxlbWVudCwibW91c2Vkb3duIik7dHJpZ2dlcl9tb3VzZV9ldmVudCh2YWx1ZXMuJGVsZW1lbnQsIm1vdXNldXAiKTt0cmlnZ2VyX21vdXNlX2V2ZW50KHZhbHVlcy4kZWxlbWVudCwiY2xpY2siLGkpO2lmKGklMj09PTApe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJkYmxjbGljayIpO319CmlmKGxlYXZlIT09ZmFsc2Upe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJtb3VzZW91dCIpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCJtb3VzZWxlYXZlIik7fQpmdW5jdGlvbiB0cmlnZ2VyX21vdXNlX2V2ZW50KCRlbGVtZW50LHR5cGUsY291bnQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpO2UuaW5pdE1vdXNlRXZlbnQodHlwZSx0cnVlLHRydWUsd2luZG93LGNvdW50fHwwLDAsMCwwLDAsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsMCwkZWxlbWVudFswXSk7JGVsZW1lbnRbMF0uZGlzcGF0Y2hFdmVudChlKTt9fSxfdGV4dDpmdW5jdGlvbih2YWx1ZXMsdGV4dCl7dGhpcy5fY2xpY2sodmFsdWVzKTt0ZXh0PXRleHR8fCJUZXN0IjtpZih2YWx1ZXMuY29uc3VtZV9ldmVudD09PSJpbnB1dCIpe3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCJrZXlkb3duIikudmFsKHRleHQpLnRyaWdnZXIoImtleXVwIikudHJpZ2dlcigiaW5wdXQiKTt9ZWxzZSBpZih2YWx1ZXMuJGVsZW1lbnQuaXMoInNlbGVjdCIpKXt2YXIgJG9wdGlvbnM9dmFsdWVzLiRlbGVtZW50LmNoaWxkcmVuKCJvcHRpb24iKTskb3B0aW9ucy5wcm9wKCJzZWxlY3RlZCIsZmFsc2UpLnJlbW92ZVByb3AoInNlbGVjdGVkIik7dmFyICRzZWxlY3RlZE9wdGlvbj0kb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS52YWwoKT09PXRleHQ7fSk7aWYoJHNlbGVjdGVkT3B0aW9uLmxlbmd0aD09PTApeyRzZWxlY3RlZE9wdGlvbj0kb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS50ZXh0KCkudHJpbSgpPT09dGV4dDt9KTt9CiRzZWxlY3RlZE9wdGlvbi5wcm9wKCJzZWxlY3RlZCIsdHJ1ZSk7dGhpcy5fY2xpY2sodmFsdWVzKTt9ZWxzZXt2YWx1ZXMuJGVsZW1lbnQuZm9jdXNJbigpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoImtleWRvd24iLHtrZXk6J18nLGtleUNvZGU6OTV9KSk7dmFsdWVzLiRlbGVtZW50LnRleHQodGV4dCkudHJpZ2dlcigiaW5wdXQiKTt2YWx1ZXMuJGVsZW1lbnQuZm9jdXNJbkVuZCgpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoImtleXVwIix7a2V5OidfJyxrZXlDb2RlOjk1fSkpO30KdmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoImNoYW5nZSIpO30sX2RyYWdfYW5kX2Ryb3A6ZnVuY3Rpb24odmFsdWVzLHRvKXt2YXIgJHRvO2lmKHRvKXskdG89Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IodG8pO31lbHNleyR0bz0kKGRvY3VtZW50LmJvZHkpO30KdmFyIGVsZW1lbnRDZW50ZXI9dmFsdWVzLiRlbGVtZW50Lm9mZnNldCgpO2VsZW1lbnRDZW50ZXIubGVmdCs9dmFsdWVzLiRlbGVtZW50Lm91dGVyV2lkdGgoKS8yO2VsZW1lbnRDZW50ZXIudG9wKz12YWx1ZXMuJGVsZW1lbnQub3V0ZXJIZWlnaHQoKS8yO3ZhciB0b0NlbnRlcj0kdG8ub2Zmc2V0KCk7aWYodG8mJnRvLmluZGV4T2YoJ2lmcmFtZScpIT09LTEpe3ZhciBpRnJhbWVPZmZzZXQ9JCgnaWZyYW1lJykub2Zmc2V0KCk7dG9DZW50ZXIubGVmdCs9aUZyYW1lT2Zmc2V0LmxlZnQ7dG9DZW50ZXIudG9wKz1pRnJhbWVPZmZzZXQudG9wO30KdG9DZW50ZXIubGVmdCs9JHRvLm91dGVyV2lkdGgoKS8yO3RvQ2VudGVyLnRvcCs9JHRvLm91dGVySGVpZ2h0KCkvMjt2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcigkLkV2ZW50KCJtb3VzZWVudGVyIikpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoIm1vdXNlZG93biIse3doaWNoOjEscGFnZVg6ZWxlbWVudENlbnRlci5sZWZ0LHBhZ2VZOmVsZW1lbnRDZW50ZXIudG9wfSkpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoIm1vdXNlbW92ZSIse3doaWNoOjEscGFnZVg6dG9DZW50ZXIubGVmdCxwYWdlWTp0b0NlbnRlci50b3B9KSk7dmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoJC5FdmVudCgibW91c2V1cCIse3doaWNoOjEscGFnZVg6dG9DZW50ZXIubGVmdCxwYWdlWTp0b0NlbnRlci50b3B9KSk7fSxfa2V5ZG93bjpmdW5jdGlvbih2YWx1ZXMsa2V5Q29kZXMpe3doaWxlKGtleUNvZGVzLmxlbmd0aCl7dmFyIGtleUNvZGU9K2tleUNvZGVzLnNoaWZ0KCk7dmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoe3R5cGU6ImtleWRvd24iLGtleUNvZGU6a2V5Q29kZX0pO2lmKChrZXlDb2RlPjQ3JiZrZXlDb2RlPDU4KXx8a2V5Q29kZT09PTMyfHwoa2V5Q29kZT42NCYma2V5Q29kZTw5MSl8fChrZXlDb2RlPjk1JiZrZXlDb2RlPDExMil8fChrZXlDb2RlPjE4NSYma2V5Q29kZTwxOTMpfHwoa2V5Q29kZT4yMTgmJmtleUNvZGU8MjIzKSl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoImluc2VydFRleHQiLDAsU3RyaW5nLmZyb21DaGFyQ29kZShrZXlDb2RlKSk7fQp2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcih7dHlwZToia2V5dXAiLGtleUNvZGU6a2V5Q29kZX0pO319LH0pO3JldHVybiBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcjt9KTs7CgovKiAvd2ViX3RvdXIvc3RhdGljL3NyYy9qcy90b3VyX21hbmFnZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWJfdG91ci5Ub3VyTWFuYWdlcicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIGxvY2FsX3N0b3JhZ2U9cmVxdWlyZSgnd2ViLmxvY2FsX3N0b3JhZ2UnKTt2YXIgbWl4aW5zPXJlcXVpcmUoJ3dlYi5taXhpbnMnKTt2YXIgdXRpbHM9cmVxdWlyZSgnd2ViX3RvdXIudXRpbHMnKTt2YXIgUmFpbmJvd01hbj1yZXF1aXJlKCd3ZWIuUmFpbmJvd01hbicpO3ZhciBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcj1yZXF1aXJlKCd3ZWJfdG91ci5SdW5uaW5nVG91ckFjdGlvbkhlbHBlcicpO3ZhciBTZXJ2aWNlc01peGluPXJlcXVpcmUoJ3dlYi5TZXJ2aWNlc01peGluJyk7dmFyIHNlc3Npb249cmVxdWlyZSgnd2ViLnNlc3Npb24nKTt2YXIgVGlwPXJlcXVpcmUoJ3dlYl90b3VyLlRpcCcpO3ZhciBfdD1jb3JlLl90O3ZhciBSVU5OSU5HX1RPVVJfVElNRU9VVD0xMDAwMDt2YXIgZ2V0X3N0ZXBfa2V5PXV0aWxzLmdldF9zdGVwX2tleTt2YXIgZ2V0X3J1bm5pbmdfa2V5PXV0aWxzLmdldF9ydW5uaW5nX2tleTt2YXIgZ2V0X3J1bm5pbmdfZGVsYXlfa2V5PXV0aWxzLmdldF9ydW5uaW5nX2RlbGF5X2tleTt2YXIgZ2V0X2ZpcnN0X3Zpc2libGVfZWxlbWVudD11dGlscy5nZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50O3ZhciBkb19iZWZvcmVfdW5sb2FkPXV0aWxzLmRvX2JlZm9yZV91bmxvYWQ7dmFyIGdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yPXV0aWxzLmdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yO3JldHVybiBjb3JlLkNsYXNzLmV4dGVuZChtaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4sU2VydmljZXNNaXhpbix7aW5pdDpmdW5jdGlvbihwYXJlbnQsY29uc3VtZWRfdG91cnMpe21peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbi5pbml0LmNhbGwodGhpcyk7dGhpcy5zZXRQYXJlbnQocGFyZW50KTt0aGlzLiRib2R5PSQoJ2JvZHknKTt0aGlzLmFjdGl2ZV90b29sdGlwcz17fTt0aGlzLnRvdXJzPXt9O3RoaXMuY29uc3VtZWRfdG91cnM9Y29uc3VtZWRfdG91cnN8fFtdO3RoaXMucnVubmluZ190b3VyPWxvY2FsX3N0b3JhZ2UuZ2V0SXRlbShnZXRfcnVubmluZ19rZXkoKSk7dGhpcy5ydW5uaW5nX3N0ZXBfZGVsYXk9cGFyc2VJbnQobG9jYWxfc3RvcmFnZS5nZXRJdGVtKGdldF9ydW5uaW5nX2RlbGF5X2tleSgpKSwxMCl8fDA7dGhpcy5lZGl0aW9uPShfLmxhc3Qoc2Vzc2lvbi5zZXJ2ZXJfdmVyc2lvbl9pbmZvKT09PSdlJyk/J2VudGVycHJpc2UnOidjb21tdW5pdHknO3RoaXMuX2xvZz1bXTtjb25zb2xlLmxvZygnVG91ciBNYW5hZ2VyIGlzIHJlYWR5LiAgcnVubmluZ190b3VyPScrdGhpcy5ydW5uaW5nX3RvdXIpO30scmVnaXN0ZXI6ZnVuY3Rpb24oKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3ZhciBsYXN0X2FyZz1hcmdzW2FyZ3MubGVuZ3RoLTFdO3ZhciBuYW1lPWFyZ3NbMF07aWYodGhpcy50b3Vyc1tuYW1lXSl7Y29uc29sZS53YXJuKF8uc3RyLnNwcmludGYoIlRvdXIgJXMgaXMgYWxyZWFkeSBkZWZpbmVkIixuYW1lKSk7cmV0dXJuO30KdmFyIG9wdGlvbnM9YXJncy5sZW5ndGg9PT0yP3t9OmFyZ3NbMV07dmFyIHN0ZXBzPWxhc3RfYXJnIGluc3RhbmNlb2YgQXJyYXk/bGFzdF9hcmc6W2xhc3RfYXJnXTt2YXIgdG91cj17bmFtZTpuYW1lLHN0ZXBzOnN0ZXBzLHVybDpvcHRpb25zLnVybCxyYWluYm93TWFuOm9wdGlvbnMucmFpbmJvd01hbj09PXVuZGVmaW5lZD90cnVlOiEhb3B0aW9ucy5yYWluYm93TWFuLHRlc3Q6b3B0aW9ucy50ZXN0LHdhaXRfZm9yOm9wdGlvbnMud2FpdF9mb3J8fFByb21pc2UucmVzb2x2ZSgpLH07aWYob3B0aW9ucy5za2lwX2VuYWJsZWQpe3RvdXIuc2tpcF9saW5rPSc8cD48c3BhbiBjbGFzcz0ib19za2lwX3RvdXIiPicrX3QoJ1NraXAgdG91cicpKyc8L3NwYW4+PC9wPic7dG91ci5za2lwX2hhbmRsZXI9ZnVuY3Rpb24odGlwKXt0aGlzLl9kZWFjdGl2YXRlX3RpcCh0aXApO3RoaXMuX2NvbnN1bWVfdG91cihuYW1lKTt9O30KdGhpcy50b3Vyc1tuYW1lXT10b3VyO30sX3dhaXRCZWZvcmVUb3VyU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7JChmdW5jdGlvbigpe3NldFRpbWVvdXQocmVzb2x2ZSk7fSk7fSk7fSxfcmVnaXN0ZXJfYWxsOmZ1bmN0aW9uKGRvX3VwZGF0ZSl7dmFyIHNlbGY9dGhpcztpZih0aGlzLl9hbGxSZWdpc3RlcmVkKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7fQp0aGlzLl9hbGxSZWdpc3RlcmVkPXRydWU7cmV0dXJuIHNlbGYuX3dhaXRCZWZvcmVUb3VyU3RhcnQoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKF8ubWFwKHNlbGYudG91cnMsZnVuY3Rpb24odG91cixuYW1lKXtyZXR1cm4gc2VsZi5fcmVnaXN0ZXIoZG9fdXBkYXRlLHRvdXIsbmFtZSk7fSkpO30pO30sX3JlZ2lzdGVyOmZ1bmN0aW9uKGRvX3VwZGF0ZSx0b3VyLG5hbWUpe2lmKHRvdXIucmVhZHkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciB0b3VyX2lzX2NvbnN1bWVkPV8uY29udGFpbnModGhpcy5jb25zdW1lZF90b3VycyxuYW1lKTtyZXR1cm4gdG91ci53YWl0X2Zvci50aGVuKChmdW5jdGlvbigpe3RvdXIuY3VycmVudF9zdGVwPXBhcnNlSW50KGxvY2FsX3N0b3JhZ2UuZ2V0SXRlbShnZXRfc3RlcF9rZXkobmFtZSkpKXx8MDt0b3VyLnN0ZXBzPV8uZmlsdGVyKHRvdXIuc3RlcHMsKGZ1bmN0aW9uKHN0ZXApe3JldHVybiFzdGVwLmVkaXRpb258fHN0ZXAuZWRpdGlvbj09PXRoaXMuZWRpdGlvbjt9KS5iaW5kKHRoaXMpKTtpZih0b3VyX2lzX2NvbnN1bWVkfHx0b3VyLmN1cnJlbnRfc3RlcD49dG91ci5zdGVwcy5sZW5ndGgpe2xvY2FsX3N0b3JhZ2UucmVtb3ZlSXRlbShnZXRfc3RlcF9rZXkobmFtZSkpO3RvdXIuY3VycmVudF9zdGVwPTA7fQp0b3VyLnJlYWR5PXRydWU7aWYoZG9fdXBkYXRlJiYodGhpcy5ydW5uaW5nX3RvdXI9PT1uYW1lfHwoIXRoaXMucnVubmluZ190b3VyJiYhdG91ci50ZXN0JiYhdG91cl9pc19jb25zdW1lZCkpKXt0aGlzLl90b19uZXh0X3N0ZXAobmFtZSwwKTt0aGlzLnVwZGF0ZShuYW1lKTt9fSkuYmluZCh0aGlzKSk7fSxydW46ZnVuY3Rpb24odG91cl9uYW1lLHN0ZXBfZGVsYXkpe2NvbnNvbGUubG9nKF8uc3RyLnNwcmludGYoIlByZXBhcmluZyB0b3VyICVzIix0b3VyX25hbWUpKTtpZih0aGlzLnJ1bm5pbmdfdG91cil7dGhpcy5fZGVhY3RpdmF0ZV90aXAodGhpcy5hY3RpdmVfdG9vbHRpcHNbdGhpcy5ydW5uaW5nX3RvdXJdKTt0aGlzLl9jb25zdW1lX3RvdXIodGhpcy5ydW5uaW5nX3RvdXIsXy5zdHIuc3ByaW50ZigiS2lsbGluZyB0b3VyICVzIix0aGlzLnJ1bm5pbmdfdG91cikpO3JldHVybjt9CnZhciB0b3VyPXRoaXMudG91cnNbdG91cl9uYW1lXTtpZighdG91cil7Y29uc29sZS53YXJuKF8uc3RyLnNwcmludGYoIlVua25vd24gVG91ciAlcyIsbmFtZSkpO3JldHVybjt9CmNvbnNvbGUubG9nKF8uc3RyLnNwcmludGYoIlJ1bm5pbmcgdG91ciAlcyIsdG91cl9uYW1lKSk7dGhpcy5ydW5uaW5nX3RvdXI9dG91cl9uYW1lO3RoaXMucnVubmluZ19zdGVwX2RlbGF5PXN0ZXBfZGVsYXl8fHRoaXMucnVubmluZ19zdGVwX2RlbGF5O2xvY2FsX3N0b3JhZ2Uuc2V0SXRlbShnZXRfcnVubmluZ19rZXkoKSx0aGlzLnJ1bm5pbmdfdG91cik7bG9jYWxfc3RvcmFnZS5zZXRJdGVtKGdldF9ydW5uaW5nX2RlbGF5X2tleSgpLHRoaXMucnVubmluZ19zdGVwX2RlbGF5KTt0aGlzLl9kZWFjdGl2YXRlX3RpcCh0aGlzLmFjdGl2ZV90b29sdGlwc1t0b3VyX25hbWVdKTt0b3VyLmN1cnJlbnRfc3RlcD0wO3RoaXMuX3RvX25leHRfc3RlcCh0b3VyX25hbWUsMCk7bG9jYWxfc3RvcmFnZS5zZXRJdGVtKGdldF9zdGVwX2tleSh0b3VyX25hbWUpLHRvdXIuY3VycmVudF9zdGVwKTtpZih0b3VyLnVybCl7dGhpcy5wYXVzZSgpO2RvX2JlZm9yZV91bmxvYWQobnVsbCwoZnVuY3Rpb24oKXt0aGlzLnBsYXkoKTt0aGlzLnVwZGF0ZSgpO30pLmJpbmQodGhpcykpO3dpbmRvdy5sb2NhdGlvbi5ocmVmPXdpbmRvdy5sb2NhdGlvbi5vcmlnaW4rdG91ci51cmw7fWVsc2V7dGhpcy51cGRhdGUoKTt9fSxwYXVzZTpmdW5jdGlvbigpe3RoaXMucGF1c2VkPXRydWU7fSxwbGF5OmZ1bmN0aW9uKCl7dGhpcy5wYXVzZWQ9ZmFsc2U7fSx1cGRhdGU6ZnVuY3Rpb24odG91cl9uYW1lKXtpZih0aGlzLnBhdXNlZClyZXR1cm47dGhpcy4kbW9kYWxfZGlzcGxheWVkPSQoJy5tb2RhbDp2aXNpYmxlJykubGFzdCgpO3RvdXJfbmFtZT10aGlzLnJ1bm5pbmdfdG91cnx8dG91cl9uYW1lO2lmKHRvdXJfbmFtZSl7dmFyIHRvdXI9dGhpcy50b3Vyc1t0b3VyX25hbWVdO2lmKCF0b3VyfHwhdG91ci5yZWFkeSlyZXR1cm47aWYodGhpcy5ydW5uaW5nX3RvdXImJnRoaXMucnVubmluZ190b3VyX3RpbWVvdXQ9PT11bmRlZmluZWQpe3RoaXMuX3NldF9ydW5uaW5nX3RvdXJfdGltZW91dCh0aGlzLnJ1bm5pbmdfdG91cix0aGlzLmFjdGl2ZV90b29sdGlwc1t0aGlzLnJ1bm5pbmdfdG91cl0pO30KdmFyIHNlbGY9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi5fY2hlY2tfZm9yX3Rvb2x0aXAoc2VsZi5hY3RpdmVfdG9vbHRpcHNbdG91cl9uYW1lXSx0b3VyX25hbWUpO30pO31lbHNle2Zvcih2YXIgdG91ck5hbWUgaW4gdGhpcy5hY3RpdmVfdG9vbHRpcHMpe3ZhciB0aXA9dGhpcy5hY3RpdmVfdG9vbHRpcHNbdG91ck5hbWVdO3ZhciBhY3RpdmF0ZWQ9dGhpcy5fY2hlY2tfZm9yX3Rvb2x0aXAodGlwLHRvdXJOYW1lKTtpZihhY3RpdmF0ZWQpe2JyZWFrO319fX0sX2NoZWNrX2Zvcl90b29sdGlwOmZ1bmN0aW9uKHRpcCx0b3VyX25hbWUpe2lmKHRpcD09PXVuZGVmaW5lZCl7cmV0dXJuIHRydWU7fQppZigkKCdib2R5JykuaGFzQ2xhc3MoJ29fdWlfYmxvY2tlZCcpKXt0aGlzLl9kZWFjdGl2YXRlX3RpcCh0aXApO3RoaXMuX2xvZy5wdXNoKCJibG9ja1VJIGlzIHByZXZlbnRpbmcgdGhlIHRpcCB0byBiZSBjb25zdW1lZCIpO3JldHVybiBmYWxzZTt9CnZhciAkdHJpZ2dlcjtpZih0aXAuaW5fbW9kYWwhPT1mYWxzZSYmdGhpcy4kbW9kYWxfZGlzcGxheWVkLmxlbmd0aCl7JHRyaWdnZXI9dGhpcy4kbW9kYWxfZGlzcGxheWVkLmZpbmQodGlwLnRyaWdnZXIpO31lbHNleyR0cmlnZ2VyPWdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yKHRpcC50cmlnZ2VyKTt9CnZhciAkdmlzaWJsZV90cmlnZ2VyPWdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQoJHRyaWdnZXIpO3ZhciBleHRyYV90cmlnZ2VyPXRydWU7dmFyICRleHRyYV90cmlnZ2VyO2lmKHRpcC5leHRyYV90cmlnZ2VyKXskZXh0cmFfdHJpZ2dlcj1nZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3Rvcih0aXAuZXh0cmFfdHJpZ2dlcik7ZXh0cmFfdHJpZ2dlcj1nZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50KCRleHRyYV90cmlnZ2VyKS5sZW5ndGg7fQp2YXIgdHJpZ2dlcmVkPSR2aXNpYmxlX3RyaWdnZXIubGVuZ3RoJiZleHRyYV90cmlnZ2VyO2lmKHRyaWdnZXJlZCl7aWYoIXRpcC53aWRnZXQpe3RoaXMuX2FjdGl2YXRlX3RpcCh0aXAsdG91cl9uYW1lLCR2aXNpYmxlX3RyaWdnZXIpO31lbHNle3RpcC53aWRnZXQudXBkYXRlKCR2aXNpYmxlX3RyaWdnZXIpO319ZWxzZXtpZigkdHJpZ2dlci5pZnJhbWVDb250YWluZXJ8fCgkZXh0cmFfdHJpZ2dlciYmJGV4dHJhX3RyaWdnZXIuaWZyYW1lQ29udGFpbmVyKSl7dmFyICRlbD0kKCk7aWYoJHRyaWdnZXIuaWZyYW1lQ29udGFpbmVyKXskZWw9JGVsLmFkZCgkdHJpZ2dlci5pZnJhbWVDb250YWluZXIpO30KaWYoKCRleHRyYV90cmlnZ2VyJiYkZXh0cmFfdHJpZ2dlci5pZnJhbWVDb250YWluZXIpJiYkdHJpZ2dlci5pZnJhbWVDb250YWluZXIhPT0kZXh0cmFfdHJpZ2dlci5pZnJhbWVDb250YWluZXIpeyRlbD0kZWwuYWRkKCRleHRyYV90cmlnZ2VyLmlmcmFtZUNvbnRhaW5lcik7fQp2YXIgc2VsZj10aGlzOyRlbC5vZmYoJ2xvYWQnKS5vbmUoJ2xvYWQnLGZ1bmN0aW9uKCl7JGVsLm9mZignbG9hZCcpO2lmKHNlbGYuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV09PT10aXApe3NlbGYudXBkYXRlKHRvdXJfbmFtZSk7fX0pO30KdGhpcy5fZGVhY3RpdmF0ZV90aXAodGlwKTtpZih0aGlzLnJ1bm5pbmdfdG91cj09PXRvdXJfbmFtZSl7dGhpcy5fbG9nLnB1c2goIl9jaGVja19mb3JfdG9vbHRpcCIpO3RoaXMuX2xvZy5wdXNoKCItIG1vZGFsX2Rpc3BsYXllZDogIit0aGlzLiRtb2RhbF9kaXNwbGF5ZWQubGVuZ3RoKTt0aGlzLl9sb2cucHVzaCgiLSB0cmlnZ2VyICciK3RpcC50cmlnZ2VyKyInOiAiKyR0cmlnZ2VyLmxlbmd0aCk7dGhpcy5fbG9nLnB1c2goIi0gdmlzaWJsZSB0cmlnZ2VyICciK3RpcC50cmlnZ2VyKyInOiAiKyR2aXNpYmxlX3RyaWdnZXIubGVuZ3RoKTtpZigkZXh0cmFfdHJpZ2dlciE9PXVuZGVmaW5lZCl7dGhpcy5fbG9nLnB1c2goIi0gZXh0cmFfdHJpZ2dlciAnIit0aXAuZXh0cmFfdHJpZ2dlcisiJzogIiskZXh0cmFfdHJpZ2dlci5sZW5ndGgpO3RoaXMuX2xvZy5wdXNoKCItIHZpc2libGUgZXh0cmFfdHJpZ2dlciAnIit0aXAuZXh0cmFfdHJpZ2dlcisiJzogIitleHRyYV90cmlnZ2VyKTt9fX0KcmV0dXJuISF0cmlnZ2VyZWQ7fSxfYWN0aXZhdGVfdGlwOmZ1bmN0aW9uKHRpcCx0b3VyX25hbWUsJGFuY2hvcil7dmFyIHRvdXI9dGhpcy50b3Vyc1t0b3VyX25hbWVdO3ZhciB0aXBfaW5mbz10aXA7aWYodG91ci5za2lwX2xpbmspe3RpcF9pbmZvPV8uZXh0ZW5kKF8ub21pdCh0aXBfaW5mbywnY29udGVudCcpLHtjb250ZW50OnRpcC5jb250ZW50K3RvdXIuc2tpcF9saW5rLGV2ZW50X2hhbmRsZXJzOlt7ZXZlbnQ6J2NsaWNrJyxzZWxlY3RvcjonLm9fc2tpcF90b3VyJyxoYW5kbGVyOnRvdXIuc2tpcF9oYW5kbGVyLmJpbmQodGhpcyx0aXApLH1dLH0pO30KdGlwLndpZGdldD1uZXcgVGlwKHRoaXMsdGlwX2luZm8pO2lmKHRoaXMucnVubmluZ190b3VyIT09dG91cl9uYW1lKXt0aXAud2lkZ2V0Lm9uKCd0aXBfY29uc3VtZWQnLHRoaXMsdGhpcy5fY29uc3VtZV90aXAuYmluZCh0aGlzLHRpcCx0b3VyX25hbWUpKTt9CnRpcC53aWRnZXQuYXR0YWNoX3RvKCRhbmNob3IpLnRoZW4odGhpcy5fdG9fbmV4dF9ydW5uaW5nX3N0ZXAuYmluZCh0aGlzLHRpcCx0b3VyX25hbWUpKTt9LF9kZWFjdGl2YXRlX3RpcDpmdW5jdGlvbih0aXApe2lmKHRpcCYmdGlwLndpZGdldCl7dGlwLndpZGdldC5kZXN0cm95KCk7ZGVsZXRlIHRpcC53aWRnZXQ7fX0sX2Rlc2NyaWJlVGlwOmZ1bmN0aW9uKHRpcCl7cmV0dXJuIHRpcC5jb250ZW50P3RpcC5jb250ZW50KycgKHRyaWdnZXI6ICcrdGlwLnRyaWdnZXIrJyknOnRpcC50cmlnZ2VyO30sX2NvbnN1bWVfdGlwOmZ1bmN0aW9uKHRpcCx0b3VyX25hbWUpe3RoaXMuX2RlYWN0aXZhdGVfdGlwKHRpcCk7dGhpcy5fdG9fbmV4dF9zdGVwKHRvdXJfbmFtZSk7dmFyIGlzX3J1bm5pbmc9KHRoaXMucnVubmluZ190b3VyPT09dG91cl9uYW1lKTtpZihpc19ydW5uaW5nKXt2YXIgc3RlcERlc2NyaXB0aW9uPXRoaXMuX2Rlc2NyaWJlVGlwKHRpcCk7Y29uc29sZS5sb2coXy5zdHIuc3ByaW50ZigiVG91ciAlczogc3RlcCAnJXMnIHN1Y2NlZWRlZCIsdG91cl9uYW1lLHN0ZXBEZXNjcmlwdGlvbikpO30KaWYodGhpcy5hY3RpdmVfdG9vbHRpcHNbdG91cl9uYW1lXSl7bG9jYWxfc3RvcmFnZS5zZXRJdGVtKGdldF9zdGVwX2tleSh0b3VyX25hbWUpLHRoaXMudG91cnNbdG91cl9uYW1lXS5jdXJyZW50X3N0ZXApO2lmKGlzX3J1bm5pbmcpe3RoaXMuX2xvZz1bXTt0aGlzLl9zZXRfcnVubmluZ190b3VyX3RpbWVvdXQodG91cl9uYW1lLHRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV0pO30KdGhpcy51cGRhdGUodG91cl9uYW1lKTt9ZWxzZXt0aGlzLl9jb25zdW1lX3RvdXIodG91cl9uYW1lKTt9fSxfdG9fbmV4dF9zdGVwOmZ1bmN0aW9uKHRvdXJfbmFtZSxpbmMpe3ZhciB0b3VyPXRoaXMudG91cnNbdG91cl9uYW1lXTt0b3VyLmN1cnJlbnRfc3RlcCs9KGluYyE9PXVuZGVmaW5lZD9pbmM6MSk7aWYodGhpcy5ydW5uaW5nX3RvdXIhPT10b3VyX25hbWUpe3ZhciBpbmRleD1fLmZpbmRJbmRleCh0b3VyLnN0ZXBzLnNsaWNlKHRvdXIuY3VycmVudF9zdGVwKSxmdW5jdGlvbih0aXApe3JldHVybiF0aXAuYXV0bzt9KTtpZihpbmRleD49MCl7dG91ci5jdXJyZW50X3N0ZXArPWluZGV4O31lbHNle3RvdXIuY3VycmVudF9zdGVwPXRvdXIuc3RlcHMubGVuZ3RoO319CnRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV09dG91ci5zdGVwc1t0b3VyLmN1cnJlbnRfc3RlcF07fSxfY29uc3VtZV90b3VyOmZ1bmN0aW9uKHRvdXJfbmFtZSxlcnJvcil7ZGVsZXRlIHRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV07aWYodGhpcy50b3Vyc1t0b3VyX25hbWVdLnJhaW5ib3dNYW4mJnRoaXMucnVubmluZ190b3VyIT09dG91cl9uYW1lJiZ0aGlzLnRvdXJzW3RvdXJfbmFtZV0uY3VycmVudF9zdGVwPT09dGhpcy50b3Vyc1t0b3VyX25hbWVdLnN0ZXBzLmxlbmd0aCl7dmFyICRyYWluYm93X21lc3NhZ2U9JCgnPHN0cm9uZz4nKyc8Yj5Hb29kIGpvYiE8L2I+JysnIFlvdSB3ZW50IHRocm91Z2ggYWxsIHN0ZXBzIG9mIHRoaXMgdG91ci4nKyc8L3N0cm9uZz4nKTtuZXcgUmFpbmJvd01hbih7bWVzc2FnZTokcmFpbmJvd19tZXNzYWdlfSkuYXBwZW5kVG8odGhpcy4kYm9keSk7fQp0aGlzLnRvdXJzW3RvdXJfbmFtZV0uY3VycmVudF9zdGVwPTA7bG9jYWxfc3RvcmFnZS5yZW1vdmVJdGVtKGdldF9zdGVwX2tleSh0b3VyX25hbWUpKTtpZih0aGlzLnJ1bm5pbmdfdG91cj09PXRvdXJfbmFtZSl7dGhpcy5fc3RvcF9ydW5uaW5nX3RvdXJfdGltZW91dCgpO2xvY2FsX3N0b3JhZ2UucmVtb3ZlSXRlbShnZXRfcnVubmluZ19rZXkoKSk7bG9jYWxfc3RvcmFnZS5yZW1vdmVJdGVtKGdldF9ydW5uaW5nX2RlbGF5X2tleSgpKTt0aGlzLnJ1bm5pbmdfdG91cj11bmRlZmluZWQ7dGhpcy5ydW5uaW5nX3N0ZXBfZGVsYXk9dW5kZWZpbmVkO2lmKGVycm9yKXtfLmVhY2godGhpcy5fbG9nLGZ1bmN0aW9uKGxvZyl7Y29uc29sZS5sb2cobG9nKTt9KTtjb25zb2xlLmxvZyhkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQub3V0ZXJIVE1MKTtjb25zb2xlLmVycm9yKGVycm9yKTtjb25zb2xlLmVycm9yKCJ0ZXN0IGZhaWxlZCIpO31lbHNle2NvbnNvbGUubG9nKF8uc3RyLnNwcmludGYoIlRvdXIgJXMgc3VjY2VlZGVkIix0b3VyX25hbWUpKTtjb25zb2xlLmxvZygidGVzdCBzdWNjZXNzZnVsIik7fQp0aGlzLl9sb2c9W107fWVsc2V7dmFyIHNlbGY9dGhpczt0aGlzLl9ycGMoe21vZGVsOid3ZWJfdG91ci50b3VyJyxtZXRob2Q6J2NvbnN1bWUnLGFyZ3M6W1t0b3VyX25hbWVdXSx9KS50aGVuKGZ1bmN0aW9uKCl7c2VsZi5jb25zdW1lZF90b3Vycy5wdXNoKHRvdXJfbmFtZSk7fSk7fX0sX3NldF9ydW5uaW5nX3RvdXJfdGltZW91dDpmdW5jdGlvbih0b3VyX25hbWUsc3RlcCl7dGhpcy5fc3RvcF9ydW5uaW5nX3RvdXJfdGltZW91dCgpO3RoaXMucnVubmluZ190b3VyX3RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgZGVzY3I9dGhpcy5fZGVzY3JpYmVUaXAoc3RlcCk7dGhpcy5fY29uc3VtZV90b3VyKHRvdXJfbmFtZSxfLnN0ci5zcHJpbnRmKCJUb3VyICVzIGZhaWxlZCBhdCBzdGVwICVzIix0b3VyX25hbWUsZGVzY3IpKTt9KS5iaW5kKHRoaXMpLChzdGVwLnRpbWVvdXR8fFJVTk5JTkdfVE9VUl9USU1FT1VUKSt0aGlzLnJ1bm5pbmdfc3RlcF9kZWxheSk7fSxfc3RvcF9ydW5uaW5nX3RvdXJfdGltZW91dDpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnJ1bm5pbmdfdG91cl90aW1lb3V0KTt0aGlzLnJ1bm5pbmdfdG91cl90aW1lb3V0PXVuZGVmaW5lZDt9LF90b19uZXh0X3J1bm5pbmdfc3RlcDpmdW5jdGlvbih0aXAsdG91cl9uYW1lKXtpZih0aGlzLnJ1bm5pbmdfdG91ciE9PXRvdXJfbmFtZSlyZXR1cm47dmFyIHNlbGY9dGhpczt0aGlzLl9zdG9wX3J1bm5pbmdfdG91cl90aW1lb3V0KCk7aWYodGhpcy5ydW5uaW5nX3N0ZXBfZGVsYXkpe18uZGVsYXkoZXhlYyx0aGlzLnJ1bm5pbmdfc3RlcF9kZWxheSk7fWVsc2V7ZXhlYygpO30KZnVuY3Rpb24gZXhlYygpe3ZhciBhY3Rpb25faGVscGVyPW5ldyBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcih0aXAud2lkZ2V0KTtkb19iZWZvcmVfdW5sb2FkKHNlbGYuX2NvbnN1bWVfdGlwLmJpbmQoc2VsZix0aXAsdG91cl9uYW1lKSk7aWYodHlwZW9mIHRpcC5ydW49PT0iZnVuY3Rpb24iKXt0aXAucnVuLmNhbGwodGlwLndpZGdldCxhY3Rpb25faGVscGVyKTt9ZWxzZSBpZih0aXAucnVuIT09dW5kZWZpbmVkKXt2YXIgbT10aXAucnVuLm1hdGNoKC9eKFthLXpBLVowLTlfXSspICooPzpcKD8gKiguKz8pICpcKT8pPyQvKTthY3Rpb25faGVscGVyW21bMV1dKG1bMl0pO31lbHNle2FjdGlvbl9oZWxwZXIuYXV0bygpO319fSxTVEVQUzp7U0hPV19BUFBTX01FTlVfSVRFTTp7ZWRpdGlvbjonY29tbXVuaXR5Jyx0cmlnZ2VyOicub19tZW51X2FwcHMgYScsYXV0bzp0cnVlLHBvc2l0aW9uOiJib3R0b20iLH0sVE9HR0xFX0hPTUVfTUVOVTp7ZWRpdGlvbjoiZW50ZXJwcmlzZSIsdHJpZ2dlcjoiLm9fbWFpbl9uYXZiYXIgLm9fbWVudV90b2dnbGUiLGNvbnRlbnQ6X3QoJ0NsaWNrIG9uIHRoZSA8aT5Ib21lIGljb248L2k+IHRvIG5hdmlnYXRlIGFjcm9zcyBhcHBzLicpLHBvc2l0aW9uOiJib3R0b20iLH0sV0VCU0lURV9ORVdfUEFHRTp7dHJpZ2dlcjoiI25ldy1jb250ZW50LW1lbnUgPiBhIixhdXRvOnRydWUscG9zaXRpb246ImJvdHRvbSIsfSx9LH0pO30pOzsKCi8qIC93ZWJfdG91ci9zdGF0aWMvc3JjL2pzL3RvdXJfc2VydmljZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb25fbGF6eScgKi8Kb2Rvby5kZWZpbmUoJ3dlYl90b3VyLnRvdXInLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgcm9vdFdpZGdldD1yZXF1aXJlKCdyb290LndpZGdldCcpO3ZhciBycGM9cmVxdWlyZSgnd2ViLnJwYycpO3ZhciBzZXNzaW9uPXJlcXVpcmUoJ3dlYi5zZXNzaW9uJyk7dmFyIFRvdXJNYW5hZ2VyPXJlcXVpcmUoJ3dlYl90b3VyLlRvdXJNYW5hZ2VyJyk7aWYoY29uZmlnLmRldmljZS5pc01vYmlsZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KCk7fQpyZXR1cm4gc2Vzc2lvbi5pc19ib3VuZC50aGVuKGZ1bmN0aW9uKCl7dmFyIGRlZnM9W107aWYoc2Vzc2lvbi5pc19mcm9udGVuZCYmc2Vzc2lvbi5pc19hZG1pbil7dmFyIGRlZj1ycGMucXVlcnkoe21vZGVsOid3ZWJfdG91ci50b3VyJyxtZXRob2Q6J2dldF9jb25zdW1lZF90b3VycycsfSk7ZGVmcy5wdXNoKGRlZik7fQpyZXR1cm4gUHJvbWlzZS5hbGwoZGVmcykudGhlbihmdW5jdGlvbihyZXN1bHRzKXt2YXIgY29uc3VtZWRfdG91cnM9c2Vzc2lvbi5pc19mcm9udGVuZD9yZXN1bHRzWzBdOnNlc3Npb24ud2ViX3RvdXJzO3ZhciB0b3VyX21hbmFnZXI9bmV3IFRvdXJNYW5hZ2VyKHJvb3RXaWRnZXQsY29uc3VtZWRfdG91cnMpO3ZhciB1bnRyYWNrZWRfY2xhc3NuYW1lcz1bIm9fdG9vbHRpcCIsIm9fdG9vbHRpcF9jb250ZW50Iiwib190b29sdGlwX292ZXJsYXkiXTt2YXIgY2hlY2tfdG9vbHRpcD1fLmRlYm91bmNlKGZ1bmN0aW9uKHJlY29yZHMpe3ZhciB1cGRhdGU9Xy5zb21lKHJlY29yZHMsZnVuY3Rpb24ocmVjb3JkKXtyZXR1cm4hKGlzX3VudHJhY2tlZChyZWNvcmQudGFyZ2V0KXx8Xy5zb21lKHJlY29yZC5hZGRlZE5vZGVzLGlzX3VudHJhY2tlZCl8fF8uc29tZShyZWNvcmQucmVtb3ZlZE5vZGVzLGlzX3VudHJhY2tlZCkpO2Z1bmN0aW9uIGlzX3VudHJhY2tlZChub2RlKXt2YXIgcmVjb3JkX2NsYXNzPW5vZGUuY2xhc3NOYW1lO3JldHVybihfLmlzU3RyaW5nKHJlY29yZF9jbGFzcykmJl8uaW50ZXJzZWN0aW9uKHJlY29yZF9jbGFzcy5zcGxpdCgnICcpLHVudHJhY2tlZF9jbGFzc25hbWVzKS5sZW5ndGghPT0wKTt9fSk7aWYodXBkYXRlKXt0b3VyX21hbmFnZXIudXBkYXRlKCk7fX0sNTAwKTt2YXIgb2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2hlY2tfdG9vbHRpcCk7dmFyIHN0YXJ0X3NlcnZpY2U9KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKG9ic2VydmUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7dG91cl9tYW5hZ2VyLl9yZWdpc3Rlcl9hbGwob2JzZXJ2ZSkudGhlbihmdW5jdGlvbigpe2lmKG9ic2VydmUpe29ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSx7YXR0cmlidXRlczp0cnVlLGNoaWxkTGlzdDp0cnVlLHN1YnRyZWU6dHJ1ZSx9KTt9CnJlc29sdmUoKTt9KTt9KTt9O30pKCk7c3RhcnRfc2VydmljZShzZXNzaW9uLmlzX2FkbWlufHx0b3VyX21hbmFnZXIucnVubmluZ190b3VyKTtpZighc2Vzc2lvbi5pc19hZG1pbil7dmFyIHJ1bj10b3VyX21hbmFnZXIucnVuO3RvdXJfbWFuYWdlci5ydW49ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciBhcmdzPWFyZ3VtZW50cztzdGFydF9zZXJ2aWNlKHRydWUpLnRoZW4oZnVuY3Rpb24oKXtydW4uYXBwbHkoc2VsZixhcmdzKTtpZighc2VsZi5ydW5uaW5nX3RvdXIpe29ic2VydmVyLmRpc2Nvbm5lY3QoKTt9fSk7fTt2YXIgX2NvbnN1bWVfdG91cj10b3VyX21hbmFnZXIuX2NvbnN1bWVfdG91cjt0b3VyX21hbmFnZXIuX2NvbnN1bWVfdG91cj1mdW5jdGlvbigpe19jb25zdW1lX3RvdXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO29ic2VydmVyLmRpc2Nvbm5lY3QoKTt9O30Kb2Rvby5zdGFydFRvdXI9dG91cl9tYW5hZ2VyLnJ1bi5iaW5kKHRvdXJfbWFuYWdlcik7cmV0dXJuIHRvdXJfbWFuYWdlcjt9KTt9KTt9KTs7CgovKiAvd2ViX3RvdXIvc3RhdGljL3NyYy9qcy90b3VyX2Rpc2FibGUuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uX2xhenknICovCm9kb28uZGVmaW5lKCd3ZWJfdG91ci5EaXNhYmxlVG91cicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBUb3VyTWFuYWdlcj1yZXF1aXJlKCd3ZWJfdG91ci5Ub3VyTWFuYWdlcicpO1RvdXJNYW5hZ2VyLmluY2x1ZGUoe19yZWdpc3RlcjpmdW5jdGlvbihkb191cGRhdGUsdG91cixuYW1lKXtpZighdGhpcy5ydW5uaW5nX3RvdXIpe3RoaXMuY29uc3VtZWRfdG91cnMucHVzaChuYW1lKTt9CnJldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSx9KTt9KTs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="257335140" offset="0" length="410" />
        <PacketInfo time="257335171" offset="410" length="16344" />
        <PacketInfo time="257335218" offset="16754" length="11396" />
        <PacketInfo time="257335234" offset="28150" length="1460" />
        <PacketInfo time="257335234" offset="29610" length="16344" />
        <PacketInfo time="257335265" offset="45954" length="16344" />
        <PacketInfo time="257335296" offset="62298" length="14032" />
        <PacketInfo time="257335312" offset="76330" length="1460" />
        <PacketInfo time="257335312" offset="77790" length="16344" />
        <PacketInfo time="257335328" offset="94134" length="8476" />
        <PacketInfo time="257335359" offset="102610" length="1460" />
        <PacketInfo time="257335375" offset="104070" length="16060" />
        <PacketInfo time="257335390" offset="120130" length="16344" />
        <PacketInfo time="257335421" offset="136474" length="11396" />
        <PacketInfo time="257335437" offset="147870" length="1460" />
        <PacketInfo time="257335453" offset="149330" length="16344" />
        <PacketInfo time="257335468" offset="165674" length="16344" />
        <PacketInfo time="257335484" offset="182018" length="9652" />
        <PacketInfo time="257335500" offset="191670" length="11680" />
        <PacketInfo time="257335515" offset="203350" length="1460" />
        <PacketInfo time="257335531" offset="204810" length="16344" />
        <PacketInfo time="257335546" offset="221154" length="15776" />
        <PacketInfo time="257335703" offset="236930" length="1460" />
        <PacketInfo time="257335703" offset="238390" length="16384" />
        <PacketInfo time="257335718" offset="254774" length="16304" />
        <PacketInfo time="257335718" offset="271078" length="16384" />
        <PacketInfo time="257335734" offset="287462" length="16384" />
        <PacketInfo time="257335734" offset="303846" length="16264" />
        <PacketInfo time="257335734" offset="320110" length="14640" />
        <PacketInfo time="257335750" offset="334750" length="1460" />
        <PacketInfo time="257335750" offset="336210" length="16344" />
        <PacketInfo time="257335781" offset="352554" length="16344" />
        <PacketInfo time="257335781" offset="368898" length="16344" />
        <PacketInfo time="257335796" offset="385242" length="608" />
        <PacketInfo time="257335812" offset="385850" length="1460" />
        <PacketInfo time="257335812" offset="387310" length="16344" />
        <PacketInfo time="257335843" offset="403654" length="9936" />
        <PacketInfo time="257335921" offset="413590" length="1460" />
        <PacketInfo time="257335921" offset="415050" length="16344" />
        <PacketInfo time="257335921" offset="431394" length="16344" />
        <PacketInfo time="257335921" offset="447738" length="16344" />
        <PacketInfo time="257335921" offset="464082" length="16384" />
        <PacketInfo time="257335937" offset="480466" length="16304" />
        <PacketInfo time="257335937" offset="496770" length="40" />
        <PacketInfo time="257336000" offset="496810" length="1460" />
        <PacketInfo time="257336000" offset="498270" length="16344" />
        <PacketInfo time="257336000" offset="514614" length="16384" />
        <PacketInfo time="257336015" offset="530998" length="16304" />
        <PacketInfo time="257336015" offset="547302" length="4988" />
        <PacketInfo time="257336046" offset="552290" length="1460" />
        <PacketInfo time="257336062" offset="553750" length="1460" />
        <PacketInfo time="257336093" offset="555210" length="14600" />
        <PacketInfo time="257336109" offset="569810" length="1460" />
        <PacketInfo time="257336125" offset="571270" length="16344" />
        <PacketInfo time="257336140" offset="587614" length="13890" />
        <PacketInfo time="257336218" offset="601504" length="1460" />
        <PacketInfo time="257336218" offset="602964" length="16344" />
        <PacketInfo time="257336234" offset="619308" length="16384" />
        <PacketInfo time="257336250" offset="635692" length="16384" />
        <PacketInfo time="257336250" offset="652076" length="16384" />
        <PacketInfo time="257336265" offset="668460" length="7504" />
        <PacketInfo time="257336281" offset="675964" length="13140" />
        <PacketInfo time="257336312" offset="689104" length="1460" />
        <PacketInfo time="257336328" offset="690564" length="10220" />
        <PacketInfo time="257336359" offset="700784" length="1460" />
        <PacketInfo time="257336359" offset="702244" length="16344" />
        <PacketInfo time="257336375" offset="718588" length="16344" />
        <PacketInfo time="257336375" offset="734932" length="892" />
        <PacketInfo time="257336453" offset="735824" length="1460" />
        <PacketInfo time="257336468" offset="737284" length="1460" />
        <PacketInfo time="257336484" offset="738744" length="16344" />
        <PacketInfo time="257336484" offset="755088" length="13504" />
        <PacketInfo time="257336484" offset="768592" length="16384" />
        <PacketInfo time="257336500" offset="784976" length="16384" />
        <PacketInfo time="257336500" offset="801360" length="16384" />
        <PacketInfo time="257336500" offset="817744" length="1340" />
        <PacketInfo time="257336500" offset="819084" length="2388" />
        <PacketInfo time="257336578" offset="821472" length="1460" />
        <PacketInfo time="257336578" offset="822932" length="1460" />
        <PacketInfo time="257336609" offset="824392" length="16344" />
        <PacketInfo time="257336640" offset="840736" length="16344" />
        <PacketInfo time="257336656" offset="857080" length="16344" />
        <PacketInfo time="257336671" offset="873424" length="11968" />
        <PacketInfo time="257336703" offset="885392" length="1460" />
        <PacketInfo time="257336703" offset="886852" length="16344" />
        <PacketInfo time="257336703" offset="903196" length="16344" />
        <PacketInfo time="257336718" offset="919540" length="16344" />
        <PacketInfo time="257336750" offset="935884" length="13740" />
        <PacketInfo time="257336765" offset="949624" length="1460" />
        <PacketInfo time="257336765" offset="951084" length="16344" />
        <PacketInfo time="257336781" offset="967428" length="16344" />
        <PacketInfo time="257336796" offset="983772" length="8192" />
        <PacketInfo time="257336812" offset="991964" length="1460" />
        <PacketInfo time="257336812" offset="993424" length="16344" />
        <PacketInfo time="257336843" offset="1009768" length="16344" />
        <PacketInfo time="257336859" offset="1026112" length="16344" />
        <PacketInfo time="257336859" offset="1042456" length="16344" />
        <PacketInfo time="257336875" offset="1058800" length="324" />
        <PacketInfo time="257336875" offset="1059124" length="1460" />
        <PacketInfo time="257336890" offset="1060584" length="16344" />
        <PacketInfo time="257336937" offset="1076928" length="15415" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>