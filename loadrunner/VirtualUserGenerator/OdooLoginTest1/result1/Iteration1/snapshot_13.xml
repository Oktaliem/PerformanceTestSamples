<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="13">
  <HTTPTask id="14" hostname="192.168.1.66" path="/web/content/437-3c01eea/web.assets_common.js" url="http://192.168.1.66/web/content/437-3c01eea/web.assets_common.js" ip="192.168.1.66" port="80" client_ip="192.168.1.112" client_port="22610" connectionId="2412" origin="Primary" encodingType="ANSI" startDateTime="2020-01-19T11:40:16.296+08:00" startTime="2822" endTime="3935" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMS42Ni93ZWI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMTcgU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4xLjY2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbl9pZD02YjU4MzE2NjQxOWYxZWUxZGVlZTg3YTE2ZjAwMzRkNjJiMTNhYjVi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC93ZWIvY29udGVudC80MzctM2MwMWVlYS93ZWIuYXNzZXRzX2NvbW1vbi5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovLzE5Mi4xNjguMS42Ni93ZWINClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjM5NDUuMTE3IFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IDE5Mi4xNjguMS42Ng0KQ29va2llOiBzZXNzaW9uX2lkPTZiNTgzMTY2NDE5ZjFlZTFkZWVlODdhMTZmMDAzNGQ2MmIxM2FiNWINCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="session_id" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NmI1ODMxNjY0MTlmMWVlMWRlZWU4N2ExNmYwMDM0ZDYyYjEzYWI1Yg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>1111148</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NzI2NmE0OGRmZDY3YjA4YTYwZjUwOTg5ZThmODBlZmYxZGJmZWIzZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTExMTE0OA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbl9pZD02YjU4MzE2NjQxOWYxZWUxZGVlZTg3YTE2ZjAwMzRkNjJiMTNhYjViOyBFeHBpcmVzPVdlZCwgMTUtQXByLTIwMjAgMDE6MzQ6MTggR01UOyBNYXgtQWdlPTc3NzYwMDA7IEh0dHBPbmx5OyBQYXRoPS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2Vya3pldWcvMC4xNC4xIFB5dGhvbi8zLjYuOQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNiBKYW4gMjAyMCAwMTozNDoxOCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjAgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNClgtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYNCkVUYWc6IDcyNjZhNDhkZmQ2N2IwOGE2MGY1MDk4OWU4ZjgwZWZmMWRiZmViM2YNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MzE1MzYwMDANCkNvbnRlbnQtTGVuZ3RoOiAxMTExMTQ4DQpTZXQtQ29va2llOiBzZXNzaW9uX2lkPTZiNTgzMTY2NDE5ZjFlZTFkZWVlODdhMTZmMDAzNGQ2MmIxM2FiNWI7IEV4cGlyZXM9V2VkLCAxNS1BcHItMjAyMCAwMTozNDoxOCBHTVQ7IE1heC1BZ2U9Nzc3NjAwMDsgSHR0cE9ubHk7IFBhdGg9Lw0KU2VydmVyOiBXZXJremV1Zy8wLjE0LjEgUHl0aG9uLzMuNi45DQpEYXRlOiBUaHUsIDE2IEphbiAyMDIwIDAxOjM0OjE4IEdNVA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Ci8qIC93ZWIvc3RhdGljL2xpYi9lczYtcHJvbWlzZS9lczYtcHJvbWlzZS1wb2x5ZmlsbC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkoKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoZmFjdG9yeSk6KGdsb2JhbC5FUzZQcm9taXNlPWZhY3RvcnkoKSk7fSh0aGlzLChmdW5jdGlvbigpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpe3ZhciB0eXBlPXR5cGVvZiB4O3JldHVybiB4IT09bnVsbCYmKHR5cGU9PT0nb2JqZWN0J3x8dHlwZT09PSdmdW5jdGlvbicpO30KZnVuY3Rpb24gaXNGdW5jdGlvbih4KXtyZXR1cm4gdHlwZW9mIHg9PT0nZnVuY3Rpb24nO30KdmFyIF9pc0FycmF5PXZvaWQgMDtpZihBcnJheS5pc0FycmF5KXtfaXNBcnJheT1BcnJheS5pc0FycmF5O31lbHNle19pc0FycmF5PWZ1bmN0aW9uKHgpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCk9PT0nW29iamVjdCBBcnJheV0nO307fQp2YXIgaXNBcnJheT1faXNBcnJheTt2YXIgbGVuPTA7dmFyIHZlcnR4TmV4dD12b2lkIDA7dmFyIGN1c3RvbVNjaGVkdWxlckZuPXZvaWQgMDt2YXIgYXNhcD1mdW5jdGlvbiBhc2FwKGNhbGxiYWNrLGFyZyl7cXVldWVbbGVuXT1jYWxsYmFjaztxdWV1ZVtsZW4rMV09YXJnO2xlbis9MjtpZihsZW49PT0yKXtpZihjdXN0b21TY2hlZHVsZXJGbil7Y3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO31lbHNle3NjaGVkdWxlRmx1c2goKTt9fX07ZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pe2N1c3RvbVNjaGVkdWxlckZuPXNjaGVkdWxlRm47fQpmdW5jdGlvbiBzZXRBc2FwKGFzYXBGbil7YXNhcD1hc2FwRm47fQp2YXIgYnJvd3NlcldpbmRvdz10eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCc/d2luZG93OnVuZGVmaW5lZDt2YXIgYnJvd3Nlckdsb2JhbD1icm93c2VyV2luZG93fHx7fTt2YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXI9YnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyfHxicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7dmFyIGlzTm9kZT1mYWxzZTt2YXIgaXNXb3JrZXI9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5IT09J3VuZGVmaW5lZCcmJnR5cGVvZiBpbXBvcnRTY3JpcHRzIT09J3VuZGVmaW5lZCcmJnR5cGVvZiBNZXNzYWdlQ2hhbm5lbCE9PSd1bmRlZmluZWQnO2Z1bmN0aW9uIHVzZU5leHRUaWNrKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO307fQpmdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCl7aWYodHlwZW9mIHZlcnR4TmV4dCE9PSd1bmRlZmluZWQnKXtyZXR1cm4gZnVuY3Rpb24oKXt2ZXJ0eE5leHQoZmx1c2gpO307fQpyZXR1cm4gdXNlU2V0VGltZW91dCgpO30KZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpe3ZhciBpdGVyYXRpb25zPTA7dmFyIG9ic2VydmVyPW5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7dmFyIG5vZGU9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO29ic2VydmVyLm9ic2VydmUobm9kZSx7Y2hhcmFjdGVyRGF0YTp0cnVlfSk7cmV0dXJuIGZ1bmN0aW9uKCl7bm9kZS5kYXRhPWl0ZXJhdGlvbnM9KytpdGVyYXRpb25zJTI7fTt9CmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCl7dmFyIGNoYW5uZWw9bmV3IE1lc3NhZ2VDaGFubmVsKCk7Y2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2U9Zmx1c2g7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7fTt9CmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKXt2YXIgZ2xvYmFsU2V0VGltZW91dD1zZXRUaW1lb3V0O3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLDEpO307fQp2YXIgcXVldWU9bmV3IEFycmF5KDEwMDApO2Z1bmN0aW9uIGZsdXNoKCl7Zm9yKHZhciBpPTA7aTxsZW47aSs9Mil7dmFyIGNhbGxiYWNrPXF1ZXVlW2ldO3ZhciBhcmc9cXVldWVbaSsxXTtjYWxsYmFjayhhcmcpO3F1ZXVlW2ldPXVuZGVmaW5lZDtxdWV1ZVtpKzFdPXVuZGVmaW5lZDt9Cmxlbj0wO30KZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCl7dHJ5e3ZhciB2ZXJ0eD1GdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpLnJlcXVpcmUoJ3ZlcnR4Jyk7dmVydHhOZXh0PXZlcnR4LnJ1bk9uTG9vcHx8dmVydHgucnVuT25Db250ZXh0O3JldHVybiB1c2VWZXJ0eFRpbWVyKCk7fWNhdGNoKGUpe3JldHVybiB1c2VTZXRUaW1lb3V0KCk7fX0KdmFyIHNjaGVkdWxlRmx1c2g9dm9pZCAwO2lmKGlzTm9kZSl7c2NoZWR1bGVGbHVzaD11c2VOZXh0VGljaygpO31lbHNlIGlmKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKXtzY2hlZHVsZUZsdXNoPXVzZU11dGF0aW9uT2JzZXJ2ZXIoKTt9ZWxzZSBpZihpc1dvcmtlcil7c2NoZWR1bGVGbHVzaD11c2VNZXNzYWdlQ2hhbm5lbCgpO31lbHNlIGlmKGJyb3dzZXJXaW5kb3c9PT11bmRlZmluZWQmJnR5cGVvZiByZXF1aXJlPT09J2Z1bmN0aW9uJyl7c2NoZWR1bGVGbHVzaD1hdHRlbXB0VmVydHgoKTt9ZWxzZXtzY2hlZHVsZUZsdXNoPXVzZVNldFRpbWVvdXQoKTt9CmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCxvblJlamVjdGlvbil7dmFyIHBhcmVudD10aGlzO3ZhciBjaGlsZD1uZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtpZihjaGlsZFtQUk9NSVNFX0lEXT09PXVuZGVmaW5lZCl7bWFrZVByb21pc2UoY2hpbGQpO30KdmFyIF9zdGF0ZT1wYXJlbnQuX3N0YXRlO2lmKF9zdGF0ZSl7dmFyIGNhbGxiYWNrPWFyZ3VtZW50c1tfc3RhdGUtMV07YXNhcChmdW5jdGlvbigpe3JldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsY2hpbGQsY2FsbGJhY2sscGFyZW50Ll9yZXN1bHQpO30pO31lbHNle3N1YnNjcmliZShwYXJlbnQsY2hpbGQsb25GdWxmaWxsbWVudCxvblJlamVjdGlvbik7fQpyZXR1cm4gY2hpbGQ7fQpmdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KXt2YXIgQ29uc3RydWN0b3I9dGhpcztpZihvYmplY3QmJnR5cGVvZiBvYmplY3Q9PT0nb2JqZWN0JyYmb2JqZWN0LmNvbnN0cnVjdG9yPT09Q29uc3RydWN0b3Ipe3JldHVybiBvYmplY3Q7fQp2YXIgcHJvbWlzZT1uZXcgQ29uc3RydWN0b3Iobm9vcCk7cmVzb2x2ZShwcm9taXNlLG9iamVjdCk7cmV0dXJuIHByb21pc2U7fQp2YXIgUFJPTUlTRV9JRD1NYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7ZnVuY3Rpb24gbm9vcCgpe30KdmFyIFBFTkRJTkc9dm9pZCAwO3ZhciBGVUxGSUxMRUQ9MTt2YXIgUkVKRUNURUQ9Mjt2YXIgVFJZX0NBVENIX0VSUk9SPXtlcnJvcjpudWxsfTtmdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcigiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZiIpO30KZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCl7cmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTt9CmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSl7dHJ5e3JldHVybiBwcm9taXNlLnRoZW47fWNhdGNoKGVycm9yKXtUUllfQ0FUQ0hfRVJST1IuZXJyb3I9ZXJyb3I7cmV0dXJuIFRSWV9DQVRDSF9FUlJPUjt9fQpmdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsdmFsdWUsZnVsZmlsbG1lbnRIYW5kbGVyLHJlamVjdGlvbkhhbmRsZXIpe3RyeXt0aGVuJCQxLmNhbGwodmFsdWUsZnVsZmlsbG1lbnRIYW5kbGVyLHJlamVjdGlvbkhhbmRsZXIpO31jYXRjaChlKXtyZXR1cm4gZTt9fQpmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSx0aGVuYWJsZSx0aGVuJCQxKXthc2FwKGZ1bmN0aW9uKHByb21pc2Upe3ZhciBzZWFsZWQ9ZmFsc2U7dmFyIGVycm9yPXRyeVRoZW4odGhlbiQkMSx0aGVuYWJsZSxmdW5jdGlvbih2YWx1ZSl7aWYoc2VhbGVkKXtyZXR1cm47fQpzZWFsZWQ9dHJ1ZTtpZih0aGVuYWJsZSE9PXZhbHVlKXtyZXNvbHZlKHByb21pc2UsdmFsdWUpO31lbHNle2Z1bGZpbGwocHJvbWlzZSx2YWx1ZSk7fX0sZnVuY3Rpb24ocmVhc29uKXtpZihzZWFsZWQpe3JldHVybjt9CnNlYWxlZD10cnVlO3JlamVjdChwcm9taXNlLHJlYXNvbik7fSwnU2V0dGxlOiAnKyhwcm9taXNlLl9sYWJlbHx8JyB1bmtub3duIHByb21pc2UnKSk7aWYoIXNlYWxlZCYmZXJyb3Ipe3NlYWxlZD10cnVlO3JlamVjdChwcm9taXNlLGVycm9yKTt9fSxwcm9taXNlKTt9CmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsdGhlbmFibGUpe2lmKHRoZW5hYmxlLl9zdGF0ZT09PUZVTEZJTExFRCl7ZnVsZmlsbChwcm9taXNlLHRoZW5hYmxlLl9yZXN1bHQpO31lbHNlIGlmKHRoZW5hYmxlLl9zdGF0ZT09PVJFSkVDVEVEKXtyZWplY3QocHJvbWlzZSx0aGVuYWJsZS5fcmVzdWx0KTt9ZWxzZXtzdWJzY3JpYmUodGhlbmFibGUsdW5kZWZpbmVkLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gcmVzb2x2ZShwcm9taXNlLHZhbHVlKTt9LGZ1bmN0aW9uKHJlYXNvbil7cmV0dXJuIHJlamVjdChwcm9taXNlLHJlYXNvbik7fSk7fX0KZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLG1heWJlVGhlbmFibGUsdGhlbiQkMSl7aWYobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvcj09PXByb21pc2UuY29uc3RydWN0b3ImJnRoZW4kJDE9PT10aGVuJiZtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmU9PT1yZXNvbHZlJDEpe2hhbmRsZU93blRoZW5hYmxlKHByb21pc2UsbWF5YmVUaGVuYWJsZSk7fWVsc2V7aWYodGhlbiQkMT09PVRSWV9DQVRDSF9FUlJPUil7cmVqZWN0KHByb21pc2UsVFJZX0NBVENIX0VSUk9SLmVycm9yKTtUUllfQ0FUQ0hfRVJST1IuZXJyb3I9bnVsbDt9ZWxzZSBpZih0aGVuJCQxPT09dW5kZWZpbmVkKXtmdWxmaWxsKHByb21pc2UsbWF5YmVUaGVuYWJsZSk7fWVsc2UgaWYoaXNGdW5jdGlvbih0aGVuJCQxKSl7aGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsbWF5YmVUaGVuYWJsZSx0aGVuJCQxKTt9ZWxzZXtmdWxmaWxsKHByb21pc2UsbWF5YmVUaGVuYWJsZSk7fX19CmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSx2YWx1ZSl7aWYocHJvbWlzZT09PXZhbHVlKXtyZWplY3QocHJvbWlzZSxzZWxmRnVsZmlsbG1lbnQoKSk7fWVsc2UgaWYob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpe2hhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSx2YWx1ZSxnZXRUaGVuKHZhbHVlKSk7fWVsc2V7ZnVsZmlsbChwcm9taXNlLHZhbHVlKTt9fQpmdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2Upe2lmKHByb21pc2UuX29uZXJyb3Ipe3Byb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTt9CnB1Ymxpc2gocHJvbWlzZSk7fQpmdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsdmFsdWUpe2lmKHByb21pc2UuX3N0YXRlIT09UEVORElORyl7cmV0dXJuO30KcHJvbWlzZS5fcmVzdWx0PXZhbHVlO3Byb21pc2UuX3N0YXRlPUZVTEZJTExFRDtpZihwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGghPT0wKXthc2FwKHB1Ymxpc2gscHJvbWlzZSk7fX0KZnVuY3Rpb24gcmVqZWN0KHByb21pc2UscmVhc29uKXtpZihwcm9taXNlLl9zdGF0ZSE9PVBFTkRJTkcpe3JldHVybjt9CnByb21pc2UuX3N0YXRlPVJFSkVDVEVEO3Byb21pc2UuX3Jlc3VsdD1yZWFzb247YXNhcChwdWJsaXNoUmVqZWN0aW9uLHByb21pc2UpO30KZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCxjaGlsZCxvbkZ1bGZpbGxtZW50LG9uUmVqZWN0aW9uKXt2YXIgX3N1YnNjcmliZXJzPXBhcmVudC5fc3Vic2NyaWJlcnM7dmFyIGxlbmd0aD1fc3Vic2NyaWJlcnMubGVuZ3RoO3BhcmVudC5fb25lcnJvcj1udWxsO19zdWJzY3JpYmVyc1tsZW5ndGhdPWNoaWxkO19zdWJzY3JpYmVyc1tsZW5ndGgrRlVMRklMTEVEXT1vbkZ1bGZpbGxtZW50O19zdWJzY3JpYmVyc1tsZW5ndGgrUkVKRUNURURdPW9uUmVqZWN0aW9uO2lmKGxlbmd0aD09PTAmJnBhcmVudC5fc3RhdGUpe2FzYXAocHVibGlzaCxwYXJlbnQpO319CmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSl7dmFyIHN1YnNjcmliZXJzPXByb21pc2UuX3N1YnNjcmliZXJzO3ZhciBzZXR0bGVkPXByb21pc2UuX3N0YXRlO2lmKHN1YnNjcmliZXJzLmxlbmd0aD09PTApe3JldHVybjt9CnZhciBjaGlsZD12b2lkIDAsY2FsbGJhY2s9dm9pZCAwLGRldGFpbD1wcm9taXNlLl9yZXN1bHQ7Zm9yKHZhciBpPTA7aTxzdWJzY3JpYmVycy5sZW5ndGg7aSs9Myl7Y2hpbGQ9c3Vic2NyaWJlcnNbaV07Y2FsbGJhY2s9c3Vic2NyaWJlcnNbaStzZXR0bGVkXTtpZihjaGlsZCl7aW52b2tlQ2FsbGJhY2soc2V0dGxlZCxjaGlsZCxjYWxsYmFjayxkZXRhaWwpO31lbHNle2NhbGxiYWNrKGRldGFpbCk7fX0KcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoPTA7fQpmdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjayxkZXRhaWwpe3RyeXtyZXR1cm4gY2FsbGJhY2soZGV0YWlsKTt9Y2F0Y2goZSl7VFJZX0NBVENIX0VSUk9SLmVycm9yPWU7cmV0dXJuIFRSWV9DQVRDSF9FUlJPUjt9fQpmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLHByb21pc2UsY2FsbGJhY2ssZGV0YWlsKXt2YXIgaGFzQ2FsbGJhY2s9aXNGdW5jdGlvbihjYWxsYmFjayksdmFsdWU9dm9pZCAwLGVycm9yPXZvaWQgMCxzdWNjZWVkZWQ9dm9pZCAwLGZhaWxlZD12b2lkIDA7aWYoaGFzQ2FsbGJhY2spe3ZhbHVlPXRyeUNhdGNoKGNhbGxiYWNrLGRldGFpbCk7aWYodmFsdWU9PT1UUllfQ0FUQ0hfRVJST1Ipe2ZhaWxlZD10cnVlO2Vycm9yPXZhbHVlLmVycm9yO3ZhbHVlLmVycm9yPW51bGw7fWVsc2V7c3VjY2VlZGVkPXRydWU7fQppZihwcm9taXNlPT09dmFsdWUpe3JlamVjdChwcm9taXNlLGNhbm5vdFJldHVybk93bigpKTtyZXR1cm47fX1lbHNle3ZhbHVlPWRldGFpbDtzdWNjZWVkZWQ9dHJ1ZTt9CmlmKHByb21pc2UuX3N0YXRlIT09UEVORElORyl7fWVsc2UgaWYoaGFzQ2FsbGJhY2smJnN1Y2NlZWRlZCl7cmVzb2x2ZShwcm9taXNlLHZhbHVlKTt9ZWxzZSBpZihmYWlsZWQpe3JlamVjdChwcm9taXNlLGVycm9yKTt9ZWxzZSBpZihzZXR0bGVkPT09RlVMRklMTEVEKXtmdWxmaWxsKHByb21pc2UsdmFsdWUpO31lbHNlIGlmKHNldHRsZWQ9PT1SRUpFQ1RFRCl7cmVqZWN0KHByb21pc2UsdmFsdWUpO319CmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UscmVzb2x2ZXIpe3RyeXtyZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7cmVzb2x2ZShwcm9taXNlLHZhbHVlKTt9LGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKXtyZWplY3QocHJvbWlzZSxyZWFzb24pO30pO31jYXRjaChlKXtyZWplY3QocHJvbWlzZSxlKTt9fQp2YXIgaWQ9MDtmdW5jdGlvbiBuZXh0SWQoKXtyZXR1cm4gaWQrKzt9CmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2Upe3Byb21pc2VbUFJPTUlTRV9JRF09aWQrKztwcm9taXNlLl9zdGF0ZT11bmRlZmluZWQ7cHJvbWlzZS5fcmVzdWx0PXVuZGVmaW5lZDtwcm9taXNlLl9zdWJzY3JpYmVycz1bXTt9CmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpe3JldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO30KdmFyIEVudW1lcmF0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLGlucHV0KXt0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yPUNvbnN0cnVjdG9yO3RoaXMucHJvbWlzZT1uZXcgQ29uc3RydWN0b3Iobm9vcCk7aWYoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSl7bWFrZVByb21pc2UodGhpcy5wcm9taXNlKTt9CmlmKGlzQXJyYXkoaW5wdXQpKXt0aGlzLmxlbmd0aD1pbnB1dC5sZW5ndGg7dGhpcy5fcmVtYWluaW5nPWlucHV0Lmxlbmd0aDt0aGlzLl9yZXN1bHQ9bmV3IEFycmF5KHRoaXMubGVuZ3RoKTtpZih0aGlzLmxlbmd0aD09PTApe2Z1bGZpbGwodGhpcy5wcm9taXNlLHRoaXMuX3Jlc3VsdCk7fWVsc2V7dGhpcy5sZW5ndGg9dGhpcy5sZW5ndGh8fDA7dGhpcy5fZW51bWVyYXRlKGlucHV0KTtpZih0aGlzLl9yZW1haW5pbmc9PT0wKXtmdWxmaWxsKHRoaXMucHJvbWlzZSx0aGlzLl9yZXN1bHQpO319fWVsc2V7cmVqZWN0KHRoaXMucHJvbWlzZSx2YWxpZGF0aW9uRXJyb3IoKSk7fX0KRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZT1mdW5jdGlvbiBfZW51bWVyYXRlKGlucHV0KXtmb3IodmFyIGk9MDt0aGlzLl9zdGF0ZT09PVBFTkRJTkcmJmk8aW5wdXQubGVuZ3RoO2krKyl7dGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLGkpO319O0VudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnk9ZnVuY3Rpb24gX2VhY2hFbnRyeShlbnRyeSxpKXt2YXIgYz10aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO3ZhciByZXNvbHZlJCQxPWMucmVzb2x2ZTtpZihyZXNvbHZlJCQxPT09cmVzb2x2ZSQxKXt2YXIgX3RoZW49Z2V0VGhlbihlbnRyeSk7aWYoX3RoZW49PT10aGVuJiZlbnRyeS5fc3RhdGUhPT1QRU5ESU5HKXt0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLGksZW50cnkuX3Jlc3VsdCk7fWVsc2UgaWYodHlwZW9mIF90aGVuIT09J2Z1bmN0aW9uJyl7dGhpcy5fcmVtYWluaW5nLS07dGhpcy5fcmVzdWx0W2ldPWVudHJ5O31lbHNlIGlmKGM9PT1Qcm9taXNlJDIpe3ZhciBwcm9taXNlPW5ldyBjKG5vb3ApO2hhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSxlbnRyeSxfdGhlbik7dGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsaSk7fWVsc2V7dGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uKHJlc29sdmUkJDEpe3JldHVybiByZXNvbHZlJCQxKGVudHJ5KTt9KSxpKTt9fWVsc2V7dGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJDEoZW50cnkpLGkpO319O0VudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQ9ZnVuY3Rpb24gX3NldHRsZWRBdChzdGF0ZSxpLHZhbHVlKXt2YXIgcHJvbWlzZT10aGlzLnByb21pc2U7aWYocHJvbWlzZS5fc3RhdGU9PT1QRU5ESU5HKXt0aGlzLl9yZW1haW5pbmctLTtpZihzdGF0ZT09PVJFSkVDVEVEKXtyZWplY3QocHJvbWlzZSx2YWx1ZSk7fWVsc2V7dGhpcy5fcmVzdWx0W2ldPXZhbHVlO319CmlmKHRoaXMuX3JlbWFpbmluZz09PTApe2Z1bGZpbGwocHJvbWlzZSx0aGlzLl9yZXN1bHQpO319O0VudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQ9ZnVuY3Rpb24gX3dpbGxTZXR0bGVBdChwcm9taXNlLGkpe3ZhciBlbnVtZXJhdG9yPXRoaXM7c3Vic2NyaWJlKHByb21pc2UsdW5kZWZpbmVkLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCxpLHZhbHVlKTt9LGZ1bmN0aW9uKHJlYXNvbil7cmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCxpLHJlYXNvbik7fSk7fTtyZXR1cm4gRW51bWVyYXRvcjt9KCk7ZnVuY3Rpb24gYWxsKGVudHJpZXMpe3JldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLGVudHJpZXMpLnByb21pc2U7fQpmdW5jdGlvbiByYWNlKGVudHJpZXMpe3ZhciBDb25zdHJ1Y3Rvcj10aGlzO2lmKCFpc0FycmF5KGVudHJpZXMpKXtyZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKF8scmVqZWN0KXtyZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7fSk7fWVsc2V7cmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7dmFyIGxlbmd0aD1lbnRyaWVzLmxlbmd0aDtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe0NvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLHJlamVjdCk7fX0pO319CmZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbil7dmFyIENvbnN0cnVjdG9yPXRoaXM7dmFyIHByb21pc2U9bmV3IENvbnN0cnVjdG9yKG5vb3ApO3JlamVjdChwcm9taXNlLHJlYXNvbik7cmV0dXJuIHByb21pc2U7fQpmdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCl7dGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO30KZnVuY3Rpb24gbmVlZHNOZXcoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt9CnZhciBQcm9taXNlJDI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKXt0aGlzW1BST01JU0VfSURdPW5leHRJZCgpO3RoaXMuX3Jlc3VsdD10aGlzLl9zdGF0ZT11bmRlZmluZWQ7dGhpcy5fc3Vic2NyaWJlcnM9W107aWYobm9vcCE9PXJlc29sdmVyKXt0eXBlb2YgcmVzb2x2ZXIhPT0nZnVuY3Rpb24nJiZuZWVkc1Jlc29sdmVyKCk7dGhpcyBpbnN0YW5jZW9mIFByb21pc2U/aW5pdGlhbGl6ZVByb21pc2UodGhpcyxyZXNvbHZlcik6bmVlZHNOZXcoKTt9fQpQcm9taXNlLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pe3JldHVybiB0aGlzLnRoZW4obnVsbCxvblJlamVjdGlvbik7fTtQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5PWZ1bmN0aW9uIF9maW5hbGx5KGNhbGxiYWNrKXt2YXIgcHJvbWlzZT10aGlzO3ZhciBjb25zdHJ1Y3Rvcj1wcm9taXNlLmNvbnN0cnVjdG9yO2lmKGlzRnVuY3Rpb24oY2FsbGJhY2spKXtyZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO30pO30sZnVuY3Rpb24ocmVhc29uKXtyZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgcmVhc29uO30pO30pO30KcmV0dXJuIHByb21pc2UudGhlbihjYWxsYmFjayxjYWxsYmFjayk7fTtyZXR1cm4gUHJvbWlzZTt9KCk7UHJvbWlzZSQyLnByb3RvdHlwZS50aGVuPXRoZW47UHJvbWlzZSQyLmFsbD1hbGw7UHJvbWlzZSQyLnJhY2U9cmFjZTtQcm9taXNlJDIucmVzb2x2ZT1yZXNvbHZlJDE7UHJvbWlzZSQyLnJlamVjdD1yZWplY3QkMTtQcm9taXNlJDIuX3NldFNjaGVkdWxlcj1zZXRTY2hlZHVsZXI7UHJvbWlzZSQyLl9zZXRBc2FwPXNldEFzYXA7UHJvbWlzZSQyLl9hc2FwPWFzYXA7ZnVuY3Rpb24gcG9seWZpbGwoKXt2YXIgbG9jYWw9dm9pZCAwO3RyeXtsb2NhbD1GdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO31jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO30KdmFyIFA9bG9jYWwuUHJvbWlzZTtpZihQKXt2YXIgcHJvbWlzZVRvU3RyaW5nPW51bGw7dHJ5e3Byb21pc2VUb1N0cmluZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO31jYXRjaChlKXt9CmlmKHByb21pc2VUb1N0cmluZz09PSdbb2JqZWN0IFByb21pc2VdJyYmIVAuY2FzdCl7cmV0dXJuO319CmxvY2FsLlByb21pc2U9UHJvbWlzZSQyO30KUHJvbWlzZSQyLnBvbHlmaWxsPXBvbHlmaWxsO1Byb21pc2UkMi5Qcm9taXNlPVByb21pc2UkMjtQcm9taXNlJDIucG9seWZpbGwoKTtyZXR1cm4gUHJvbWlzZSQyO30pKSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL3VuaGFuZGxlZC1yZWplY3Rpb24tcG9seWZpbGwvdW5oYW5kbGVkLXJlamVjdGlvbi1wb2x5ZmlsbC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgc2VsZj13aW5kb3c7dmFyIE9yaWdpbmFsUHJvbWlzZT1zZWxmLlByb21pc2U7ZnVuY3Rpb24gZGlzcGF0Y2hVbmhhbmRsZWRSZWplY3Rpb25FdmVudChwcm9taXNlLHJlYXNvbil7dmFyIGV2ZW50PWRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV2ZW50LHtwcm9taXNlOnt2YWx1ZTpwcm9taXNlLHdyaXRhYmxlOmZhbHNlLH0scmVhc29uOnt2YWx1ZTpyZWFzb24sd3JpdGFibGU6ZmFsc2UsfSx9KTtldmVudC5pbml0RXZlbnQoJ3VuaGFuZGxlZHJlamVjdGlvbicsZmFsc2UsdHJ1ZSk7d2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO30KZnVuY3Rpb24gTXlQcm9taXNlKHJlc29sdmVyKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNeVByb21pc2UpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTt9CnZhciBwcm9taXNlPW5ldyBPcmlnaW5hbFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3ZhciBjdXN0b21SZWplY3Q9ZnVuY3Rpb24ocmVhc29uKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYocHJvbWlzZS5oYW5kbGVkIT09dHJ1ZSl7ZGlzcGF0Y2hVbmhhbmRsZWRSZWplY3Rpb25FdmVudChwcm9taXNlLHJlYXNvbik7fX0sMCk7cmV0dXJuIHJlamVjdChyZWFzb24pO307dHJ5e3JldHVybiByZXNvbHZlcihyZXNvbHZlLGN1c3RvbVJlamVjdCk7fWNhdGNoKGVycil7cmV0dXJuIGN1c3RvbVJlamVjdChlcnIpO319KTtwcm9taXNlLl9fcHJvdG9fXz1NeVByb21pc2UucHJvdG90eXBlO3JldHVybiBwcm9taXNlO30KTXlQcm9taXNlLl9fcHJvdG9fXz1PcmlnaW5hbFByb21pc2U7TXlQcm9taXNlLnByb3RvdHlwZS5fX3Byb3RvX189T3JpZ2luYWxQcm9taXNlLnByb3RvdHlwZTtNeVByb21pc2UucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIE9yaWdpbmFsUHJvbWlzZS5wcm90b3R5cGUudGhlbi5jYWxsKHRoaXMscmVzb2x2ZSxyZWplY3QmJihmdW5jdGlvbihyZWFzb24pe3NlbGYuaGFuZGxlZD10cnVlO3JldHVybiByZWplY3QocmVhc29uKTt9KSk7fTtNeVByb21pc2UucHJvdG90eXBlLmNhdGNoPWZ1bmN0aW9uKHJlamVjdCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gT3JpZ2luYWxQcm9taXNlLnByb3RvdHlwZS5jYXRjaC5jYWxsKHRoaXMscmVqZWN0JiYoZnVuY3Rpb24ocmVhc29uKXtzZWxmLmhhbmRsZWQ9dHJ1ZTtyZXR1cm4gcmVqZWN0KHJlYXNvbik7fSkpO307TXlQcm9taXNlLnBvbHlmaWxsPWZ1bmN0aW9uKCl7aWYodHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudD09PSd1bmRlZmluZWQnKXt3aW5kb3cuUHJvbWlzZT1NeVByb21pc2U7fX07TXlQcm9taXNlLnBvbHlmaWxsKCk7fSkoKTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvcHJvbWlzZV9leHRlbnNpb24uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24oKXt2YXIgX2NhdGNoPVByb21pc2UucHJvdG90eXBlLmNhdGNoO1Byb21pc2UucHJvdG90eXBlLmd1YXJkZWRDYXRjaD1mdW5jdGlvbihvblJlamVjdGVkKXtyZXR1cm4gX2NhdGNoLmNhbGwodGhpcyxmdW5jdGlvbihyZWFzb24pe2lmKCFyZWFzb258fCEocmVhc29uIGluc3RhbmNlb2YgRXJyb3IpKXtpZihvblJlamVjdGVkKXtvblJlamVjdGVkLmNhbGwodGhpcyxyZWFzb24pO319CnJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO30pO307fSkoKTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvYm9vdC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgam9iVUlEPURhdGUubm93KCk7dmFyIGpvYnM9W107dmFyIGZhY3Rvcmllcz1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBqb2JEZXBzPVtdO3ZhciBqb2JQcm9taXNlcz1bXTt2YXIgc2VydmljZXM9T2JqZWN0LmNyZWF0ZSh7fSk7dmFyIGNvbW1lbnRSZWdFeHA9LyhcL1wqKFtcc1xTXSo/KVwqXC98KFteOl18XilcL1wvKC4qKSQpL21nO3ZhciBjanNSZXF1aXJlUmVnRXhwPS9bXi5dXHMqcmVxdWlyZVxzKlwoXHMqWyInXShbXiciXHNdKylbIiddXHMqXCkvZztpZighd2luZG93Lm9kb28pe3dpbmRvdy5vZG9vPXt9O30KdmFyIG9kb289d2luZG93Lm9kb287dmFyIGRpZExvZ0luZm9SZXNvbHZlO3ZhciBkaWRMb2dJbmZvUHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtkaWRMb2dJbmZvUmVzb2x2ZT1yZXNvbHZlO30pO29kb28udGVzdGluZz10eXBlb2YgUVVuaXQ9PT0nb2JqZWN0JztvZG9vLnJlbWFpbmluZ0pvYnM9am9icztvZG9vLl9fREVCVUdfXz17ZGlkTG9nSW5mbzpkaWRMb2dJbmZvUHJvbWlzZSxnZXREZXBlbmRlbmNpZXM6ZnVuY3Rpb24obmFtZSx0cmFuc2l0aXZlKXt2YXIgZGVwcz1uYW1lIGluc3RhbmNlb2YgQXJyYXk/bmFtZTpbbmFtZV07dmFyIGNoYW5nZWQ7ZG97Y2hhbmdlZD1mYWxzZTtqb2JEZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtpZihkZXBzLmluZGV4T2YoZGVwLnRvKT49MCYmZGVwcy5pbmRleE9mKGRlcC5mcm9tKTwwKXtkZXBzLnB1c2goZGVwLmZyb20pO2NoYW5nZWQ9dHJ1ZTt9fSk7fXdoaWxlKGNoYW5nZWQmJnRyYW5zaXRpdmUpO3JldHVybiBkZXBzO30sZ2V0RGVwZW5kZW50czpmdW5jdGlvbihuYW1lKXtyZXR1cm4gam9iRGVwcy5maWx0ZXIoZnVuY3Rpb24oZGVwKXtyZXR1cm4gZGVwLmZyb209PT1uYW1lO30pLm1hcChmdW5jdGlvbihkZXApe3JldHVybiBkZXAudG87fSk7fSxnZXRXYWl0ZWRKb2JzOmZ1bmN0aW9uKCl7cmV0dXJuIGpvYnMubWFwKGZ1bmN0aW9uKGpvYil7cmV0dXJuIGpvYi5uYW1lO30pLmZpbHRlcihmdW5jdGlvbihpdGVtLGluZGV4LHNlbGYpe3JldHVybiBzZWxmLmluZGV4T2YoaXRlbSk9PT1pbmRleDt9KTt9LGdldE1pc3NpbmdKb2JzOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgd2FpdGVkPXRoaXMuZ2V0V2FpdGVkSm9icygpO3ZhciBtaXNzaW5nPVtdO3dhaXRlZC5mb3JFYWNoKGZ1bmN0aW9uKGpvYil7c2VsZi5nZXREZXBlbmRlbmNpZXMoam9iKS5mb3JFYWNoKGZ1bmN0aW9uKGpvYil7aWYoIShqb2IgaW4gc2VsZi5zZXJ2aWNlcykpe21pc3NpbmcucHVzaChqb2IpO319KTt9KTtyZXR1cm4gbWlzc2luZy5maWx0ZXIoZnVuY3Rpb24oaXRlbSxpbmRleCxzZWxmKXtyZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pPT09aW5kZXg7fSkuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiB3YWl0ZWQuaW5kZXhPZihpdGVtKTwwO30pLmZpbHRlcihmdW5jdGlvbihqb2Ipe3JldHVybiFqb2IuZXJyb3I7fSk7fSxnZXRGYWlsZWRKb2JzOmZ1bmN0aW9uKCl7cmV0dXJuIGpvYnMuZmlsdGVyKGZ1bmN0aW9uKGpvYil7cmV0dXJuISFqb2IuZXJyb3I7fSk7fSxmYWN0b3JpZXM6ZmFjdG9yaWVzLHNlcnZpY2VzOnNlcnZpY2VzLH07b2Rvby5kZWZpbmU9ZnVuY3Rpb24oKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3ZhciBuYW1lPXR5cGVvZiBhcmdzWzBdPT09J3N0cmluZyc/YXJncy5zaGlmdCgpOignX19vZG9vX2pvYicrKGpvYlVJRCsrKSk7dmFyIGZhY3Rvcnk9YXJnc1thcmdzLmxlbmd0aC0xXTt2YXIgZGVwcztpZihhcmdzWzBdaW5zdGFuY2VvZiBBcnJheSl7ZGVwcz1hcmdzWzBdO31lbHNle2RlcHM9W107ZmFjdG9yeS50b1N0cmluZygpLnJlcGxhY2UoY29tbWVudFJlZ0V4cCwnJykucmVwbGFjZShjanNSZXF1aXJlUmVnRXhwLGZ1bmN0aW9uKG1hdGNoLGRlcCl7ZGVwcy5wdXNoKGRlcCk7fSk7fQppZihvZG9vLmRlYnVnKXtpZighKGRlcHMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBFcnJvcignRGVwZW5kZW5jaWVzIHNob3VsZCBiZSBkZWZpbmVkIGJ5IGFuIGFycmF5JyxkZXBzKTt9CmlmKHR5cGVvZiBmYWN0b3J5IT09J2Z1bmN0aW9uJyl7dGhyb3cgbmV3IEVycm9yKCdGYWN0b3J5IHNob3VsZCBiZSBkZWZpbmVkIGJ5IGEgZnVuY3Rpb24nLGZhY3RvcnkpO30KaWYodHlwZW9mIG5hbWUhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG5hbWUgZGVmaW5pdGlvbiAoc2hvdWxkIGJlIGEgc3RyaW5nIixuYW1lKTt9CmlmKG5hbWUgaW4gZmFjdG9yaWVzKXt0aHJvdyBuZXcgRXJyb3IoIlNlcnZpY2UgIituYW1lKyIgYWxyZWFkeSBkZWZpbmVkIik7fX0KZmFjdG9yeS5kZXBzPWRlcHM7ZmFjdG9yaWVzW25hbWVdPWZhY3Rvcnk7am9icy5wdXNoKHtuYW1lOm5hbWUsZmFjdG9yeTpmYWN0b3J5LGRlcHM6ZGVwcyx9KTtkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtqb2JEZXBzLnB1c2goe2Zyb206ZGVwLHRvOm5hbWV9KTt9KTt0aGlzLnByb2Nlc3NKb2JzKGpvYnMsc2VydmljZXMpO307b2Rvby5sb2c9ZnVuY3Rpb24oKXt2YXIgbWlzc2luZz1bXTt2YXIgZmFpbGVkPVtdO2lmKGpvYnMubGVuZ3RoKXt2YXIgZGVidWdKb2JzPXt9O3ZhciByZWplY3RlZD1bXTt2YXIgcmVqZWN0ZWRMaW5rZWQ9W107dmFyIGpvYjt2YXIgam9iZGVwO2Zvcih2YXIgaz0wO2s8am9icy5sZW5ndGg7aysrKXtkZWJ1Z0pvYnNbam9ic1trXS5uYW1lXT1qb2I9e2RlcGVuZGVuY2llczpqb2JzW2tdLmRlcHMsZGVwZW5kZW50czpvZG9vLl9fREVCVUdfXy5nZXREZXBlbmRlbnRzKGpvYnNba10ubmFtZSksbmFtZTpqb2JzW2tdLm5hbWV9O2lmKGpvYnNba10uZXJyb3Ipe2pvYi5lcnJvcj1qb2JzW2tdLmVycm9yO30KaWYoam9ic1trXS5yZWplY3RlZCl7am9iLnJlamVjdGVkPWpvYnNba10ucmVqZWN0ZWQ7cmVqZWN0ZWQucHVzaChqb2IubmFtZSk7fQp2YXIgZGVwcz1vZG9vLl9fREVCVUdfXy5nZXREZXBlbmRlbmNpZXMoam9iLm5hbWUpO2Zvcih2YXIgaT0wO2k8ZGVwcy5sZW5ndGg7aSsrKXtpZihqb2IubmFtZSE9PWRlcHNbaV0mJiEoZGVwc1tpXWluIHNlcnZpY2VzKSl7am9iZGVwPWRlYnVnSm9ic1tkZXBzW2ldXTtpZigham9iZGVwJiZkZXBzW2ldaW4gZmFjdG9yaWVzKXtmb3IodmFyIGo9MDtqPGpvYnMubGVuZ3RoO2orKyl7aWYoam9ic1tqXS5uYW1lPT09ZGVwc1tpXSl7am9iZGVwPWpvYnNbal07YnJlYWs7fX19CmlmKGpvYmRlcCYmam9iZGVwLnJlamVjdGVkKXtpZigham9iLnJlamVjdGVkKXtqb2IucmVqZWN0ZWQ9W107cmVqZWN0ZWRMaW5rZWQucHVzaChqb2IubmFtZSk7fQpqb2IucmVqZWN0ZWQucHVzaChkZXBzW2ldKTt9ZWxzZXtpZigham9iLm1pc3Npbmcpe2pvYi5taXNzaW5nPVtdO30Kam9iLm1pc3NpbmcucHVzaChkZXBzW2ldKTt9fX19Cm1pc3Npbmc9b2Rvby5fX0RFQlVHX18uZ2V0TWlzc2luZ0pvYnMoKTtmYWlsZWQ9b2Rvby5fX0RFQlVHX18uZ2V0RmFpbGVkSm9icygpO3ZhciB1bmxvYWRlZD1PYmplY3Qua2V5cyhkZWJ1Z0pvYnMpLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBkZWJ1Z0pvYnNba2V5XTt9KS5maWx0ZXIoZnVuY3Rpb24oam9iKXtyZXR1cm4gam9iLm1pc3Npbmc7fSk7aWYob2Rvby5kZWJ1Z3x8ZmFpbGVkLmxlbmd0aHx8dW5sb2FkZWQubGVuZ3RoKXt2YXIgbG9nPXdpbmRvdy5jb25zb2xlWyFmYWlsZWQubGVuZ3RofHwhdW5sb2FkZWQubGVuZ3RoPydpbmZvJzonZXJyb3InXS5iaW5kKHdpbmRvdy5jb25zb2xlKTtsb2coKGZhaWxlZC5sZW5ndGg/J2Vycm9yJzoodW5sb2FkZWQubGVuZ3RoPyd3YXJuaW5nJzonaW5mbycpKSsnOiBTb21lIG1vZHVsZXMgY291bGQgbm90IGJlIHN0YXJ0ZWQnKTtpZihtaXNzaW5nLmxlbmd0aCl7bG9nKCdNaXNzaW5nIGRlcGVuZGVuY2llczogICAgJyxtaXNzaW5nKTt9CmlmKGZhaWxlZC5sZW5ndGgpe2xvZygnRmFpbGVkIG1vZHVsZXM6ICAgICAgICAgICcsZmFpbGVkLm1hcChmdW5jdGlvbihmYWlsKXtyZXR1cm4gZmFpbC5uYW1lO30pKTt9CmlmKHJlamVjdGVkLmxlbmd0aCl7bG9nKCdSZWplY3RlZCBtb2R1bGVzOiAgICAgICAgJyxyZWplY3RlZCk7fQppZihyZWplY3RlZExpbmtlZC5sZW5ndGgpe2xvZygnUmVqZWN0ZWQgbGlua2VkIG1vZHVsZXM6ICcscmVqZWN0ZWRMaW5rZWQpO30KaWYodW5sb2FkZWQubGVuZ3RoKXtsb2coJ05vbiBsb2FkZWQgbW9kdWxlczogICAgICAnLHVubG9hZGVkLm1hcChmdW5jdGlvbih1bmxvYWQpe3JldHVybiB1bmxvYWQubmFtZTt9KSk7fQppZihvZG9vLmRlYnVnJiZPYmplY3Qua2V5cyhkZWJ1Z0pvYnMpLmxlbmd0aCl7bG9nKCdEZWJ1ZzogICAgICAgICAgICAgICAgICAgJyxkZWJ1Z0pvYnMpO319fQpvZG9vLl9fREVCVUdfXy5qc01vZHVsZXM9e21pc3Npbmc6bWlzc2luZyxmYWlsZWQ6ZmFpbGVkLm1hcChmdW5jdGlvbihmYWlsKXtyZXR1cm4gZmFpbC5uYW1lO30pLH07ZGlkTG9nSW5mb1Jlc29sdmUoKTt9O29kb28ucHJvY2Vzc0pvYnM9ZnVuY3Rpb24oam9icyxzZXJ2aWNlcyl7dmFyIGpvYjtmdW5jdGlvbiBwcm9jZXNzSm9iKGpvYil7dmFyIHJlcXVpcmU9bWFrZVJlcXVpcmUoam9iKTt2YXIgam9iRXhlYzt2YXIgZGVmPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe3RyeXtqb2JFeGVjPWpvYi5mYWN0b3J5LmNhbGwobnVsbCxyZXF1aXJlKTtqb2JzLnNwbGljZShqb2JzLmluZGV4T2Yoam9iKSwxKTt9Y2F0Y2goZSl7am9iLmVycm9yPWU7Y29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgbG9hZGluZyAnK2pvYi5uYW1lKTtjb25zb2xlLmVycm9yKGUuc3RhY2spO30KaWYoIWpvYi5lcnJvcil7UHJvbWlzZS5yZXNvbHZlKGpvYkV4ZWMpLnRoZW4oZnVuY3Rpb24oZGF0YSl7c2VydmljZXNbam9iLm5hbWVdPWRhdGE7cmVzb2x2ZSgpO29kb28ucHJvY2Vzc0pvYnMoam9icyxzZXJ2aWNlcyk7fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKGUpe2pvYi5yZWplY3RlZD1lfHx0cnVlO2pvYnMucHVzaChqb2IpO3Jlc29sdmUoKTt9KTt9fSk7am9iUHJvbWlzZXMucHVzaChkZWYpO30KZnVuY3Rpb24gaXNSZWFkeShqb2Ipe3JldHVybiFqb2IuZXJyb3ImJiFqb2IucmVqZWN0ZWQmJmpvYi5mYWN0b3J5LmRlcHMuZXZlcnkoZnVuY3Rpb24obmFtZSl7cmV0dXJuIG5hbWUgaW4gc2VydmljZXM7fSk7fQpmdW5jdGlvbiBtYWtlUmVxdWlyZShqb2Ipe3ZhciBkZXBzPXt9O09iamVjdC5rZXlzKHNlcnZpY2VzKS5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGpvYi5kZXBzLmluZGV4T2YoaXRlbSk+PTA7fSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2RlcHNba2V5XT1zZXJ2aWNlc1trZXldO30pO3JldHVybiBmdW5jdGlvbiByZXF1aXJlKG5hbWUpe2lmKCEobmFtZSBpbiBkZXBzKSl7Y29uc29sZS5lcnJvcignVW5kZWZpbmVkIGRlcGVuZGVuY3k6ICcsbmFtZSk7fQpyZXR1cm4gZGVwc1tuYW1lXTt9O30Kd2hpbGUoam9icy5sZW5ndGgpe2pvYj11bmRlZmluZWQ7Zm9yKHZhciBpPTA7aTxqb2JzLmxlbmd0aDtpKyspe2lmKGlzUmVhZHkoam9ic1tpXSkpe2pvYj1qb2JzW2ldO2JyZWFrO319CmlmKCFqb2Ipe2JyZWFrO30KcHJvY2Vzc0pvYihqb2IpO30KcmV0dXJuIHNlcnZpY2VzO307d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGZ1bmN0aW9uIGxvZ1doZW5Mb2FkZWQoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGxlbj1qb2JQcm9taXNlcy5sZW5ndGg7UHJvbWlzZS5hbGwoam9iUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKXtpZihsZW49PT1qb2JQcm9taXNlcy5sZW5ndGgpe29kb28ubG9nKCk7fWVsc2V7bG9nV2hlbkxvYWRlZCgpO319KTt9LDk5OTkpO30pO30pKCk7OwoKLyogL3dlYi9zdGF0aWMvbGliL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbigpe3ZhciByb290PXRoaXM7dmFyIHByZXZpb3VzVW5kZXJzY29yZT1yb290Ll87dmFyIEFycmF5UHJvdG89QXJyYXkucHJvdG90eXBlLE9ialByb3RvPU9iamVjdC5wcm90b3R5cGUsRnVuY1Byb3RvPUZ1bmN0aW9uLnByb3RvdHlwZTt2YXIKcHVzaD1BcnJheVByb3RvLnB1c2gsc2xpY2U9QXJyYXlQcm90by5zbGljZSx0b1N0cmluZz1PYmpQcm90by50b1N0cmluZyxoYXNPd25Qcm9wZXJ0eT1PYmpQcm90by5oYXNPd25Qcm9wZXJ0eTt2YXIKbmF0aXZlSXNBcnJheT1BcnJheS5pc0FycmF5LG5hdGl2ZUtleXM9T2JqZWN0LmtleXMsbmF0aXZlQmluZD1GdW5jUHJvdG8uYmluZCxuYXRpdmVDcmVhdGU9T2JqZWN0LmNyZWF0ZTt2YXIgQ3Rvcj1mdW5jdGlvbigpe307dmFyIF89ZnVuY3Rpb24ob2JqKXtpZihvYmogaW5zdGFuY2VvZiBfKXJldHVybiBvYmo7aWYoISh0aGlzIGluc3RhbmNlb2YgXykpcmV0dXJuIG5ldyBfKG9iaik7dGhpcy5fd3JhcHBlZD1vYmo7fTtpZih0eXBlb2YgZXhwb3J0cyE9PSd1bmRlZmluZWQnKXtpZih0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCcmJm1vZHVsZS5leHBvcnRzKXtleHBvcnRzPW1vZHVsZS5leHBvcnRzPV87fQpleHBvcnRzLl89Xzt9ZWxzZXtyb290Ll89Xzt9Cl8uVkVSU0lPTj0nMS44LjInO3ZhciBvcHRpbWl6ZUNiPWZ1bmN0aW9uKGZ1bmMsY29udGV4dCxhcmdDb3VudCl7aWYoY29udGV4dD09PXZvaWQgMClyZXR1cm4gZnVuYztzd2l0Y2goYXJnQ291bnQ9PW51bGw/MzphcmdDb3VudCl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LHZhbHVlKTt9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24odmFsdWUsb3RoZXIpe3JldHVybiBmdW5jLmNhbGwoY29udGV4dCx2YWx1ZSxvdGhlcik7fTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pe3JldHVybiBmdW5jLmNhbGwoY29udGV4dCx2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTt9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsdmFsdWUsaW5kZXgsY29sbGVjdGlvbil7cmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LGFjY3VtdWxhdG9yLHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pO307fQpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LGFyZ3VtZW50cyk7fTt9O3ZhciBjYj1mdW5jdGlvbih2YWx1ZSxjb250ZXh0LGFyZ0NvdW50KXtpZih2YWx1ZT09bnVsbClyZXR1cm4gXy5pZGVudGl0eTtpZihfLmlzRnVuY3Rpb24odmFsdWUpKXJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLGNvbnRleHQsYXJnQ291bnQpO2lmKF8uaXNPYmplY3QodmFsdWUpKXJldHVybiBfLm1hdGNoZXIodmFsdWUpO3JldHVybiBfLnByb3BlcnR5KHZhbHVlKTt9O18uaXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsY29udGV4dCl7cmV0dXJuIGNiKHZhbHVlLGNvbnRleHQsSW5maW5pdHkpO307dmFyIGNyZWF0ZUFzc2lnbmVyPWZ1bmN0aW9uKGtleXNGdW5jLHVuZGVmaW5lZE9ubHkpe3JldHVybiBmdW5jdGlvbihvYmope3ZhciBsZW5ndGg9YXJndW1lbnRzLmxlbmd0aDtpZihsZW5ndGg8Mnx8b2JqPT1udWxsKXJldHVybiBvYmo7Zm9yKHZhciBpbmRleD0xO2luZGV4PGxlbmd0aDtpbmRleCsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpbmRleF0sa2V5cz1rZXlzRnVuYyhzb3VyY2UpLGw9a2V5cy5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIGtleT1rZXlzW2ldO2lmKCF1bmRlZmluZWRPbmx5fHxvYmpba2V5XT09PXZvaWQgMClvYmpba2V5XT1zb3VyY2Vba2V5XTt9fQpyZXR1cm4gb2JqO307fTt2YXIgYmFzZUNyZWF0ZT1mdW5jdGlvbihwcm90b3R5cGUpe2lmKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpcmV0dXJue307aWYobmF0aXZlQ3JlYXRlKXJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtDdG9yLnByb3RvdHlwZT1wcm90b3R5cGU7dmFyIHJlc3VsdD1uZXcgQ3RvcjtDdG9yLnByb3RvdHlwZT1udWxsO3JldHVybiByZXN1bHQ7fTt2YXIgTUFYX0FSUkFZX0lOREVYPU1hdGgucG93KDIsNTMpLTE7dmFyIGlzQXJyYXlMaWtlPWZ1bmN0aW9uKGNvbGxlY3Rpb24pe3ZhciBsZW5ndGg9Y29sbGVjdGlvbiYmY29sbGVjdGlvbi5sZW5ndGg7cmV0dXJuIHR5cGVvZiBsZW5ndGg9PSdudW1iZXInJiZsZW5ndGg+PTAmJmxlbmd0aDw9TUFYX0FSUkFZX0lOREVYO307Xy5lYWNoPV8uZm9yRWFjaD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aXRlcmF0ZWU9b3B0aW1pemVDYihpdGVyYXRlZSxjb250ZXh0KTt2YXIgaSxsZW5ndGg7aWYoaXNBcnJheUxpa2Uob2JqKSl7Zm9yKGk9MCxsZW5ndGg9b2JqLmxlbmd0aDtpPGxlbmd0aDtpKyspe2l0ZXJhdGVlKG9ialtpXSxpLG9iaik7fX1lbHNle3ZhciBrZXlzPV8ua2V5cyhvYmopO2ZvcihpPTAsbGVuZ3RoPWtleXMubGVuZ3RoO2k8bGVuZ3RoO2krKyl7aXRlcmF0ZWUob2JqW2tleXNbaV1dLGtleXNbaV0sb2JqKTt9fQpyZXR1cm4gb2JqO307Xy5tYXA9Xy5jb2xsZWN0PWZ1bmN0aW9uKG9iaixpdGVyYXRlZSxjb250ZXh0KXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aCxyZXN1bHRzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXt2YXIgY3VycmVudEtleT1rZXlzP2tleXNbaW5kZXhdOmluZGV4O3Jlc3VsdHNbaW5kZXhdPWl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaik7fQpyZXR1cm4gcmVzdWx0czt9O2Z1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpe2Z1bmN0aW9uIGl0ZXJhdG9yKG9iaixpdGVyYXRlZSxtZW1vLGtleXMsaW5kZXgsbGVuZ3RoKXtmb3IoO2luZGV4Pj0wJiZpbmRleDxsZW5ndGg7aW5kZXgrPWRpcil7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDttZW1vPWl0ZXJhdGVlKG1lbW8sb2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKTt9CnJldHVybiBtZW1vO30KcmV0dXJuIGZ1bmN0aW9uKG9iaixpdGVyYXRlZSxtZW1vLGNvbnRleHQpe2l0ZXJhdGVlPW9wdGltaXplQ2IoaXRlcmF0ZWUsY29udGV4dCw0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aCxpbmRleD1kaXI+MD8wOmxlbmd0aC0xO2lmKGFyZ3VtZW50cy5sZW5ndGg8Myl7bWVtbz1vYmpba2V5cz9rZXlzW2luZGV4XTppbmRleF07aW5kZXgrPWRpcjt9CnJldHVybiBpdGVyYXRvcihvYmosaXRlcmF0ZWUsbWVtbyxrZXlzLGluZGV4LGxlbmd0aCk7fTt9Cl8ucmVkdWNlPV8uZm9sZGw9Xy5pbmplY3Q9Y3JlYXRlUmVkdWNlKDEpO18ucmVkdWNlUmlnaHQ9Xy5mb2xkcj1jcmVhdGVSZWR1Y2UoLTEpO18uZmluZD1fLmRldGVjdD1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ZhciBrZXk7aWYoaXNBcnJheUxpa2Uob2JqKSl7a2V5PV8uZmluZEluZGV4KG9iaixwcmVkaWNhdGUsY29udGV4dCk7fWVsc2V7a2V5PV8uZmluZEtleShvYmoscHJlZGljYXRlLGNvbnRleHQpO30KaWYoa2V5IT09dm9pZCAwJiZrZXkhPT0tMSlyZXR1cm4gb2JqW2tleV07fTtfLmZpbHRlcj1fLnNlbGVjdD1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ZhciByZXN1bHRzPVtdO3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsbGlzdCkpcmVzdWx0cy5wdXNoKHZhbHVlKTt9KTtyZXR1cm4gcmVzdWx0czt9O18ucmVqZWN0PWZ1bmN0aW9uKG9iaixwcmVkaWNhdGUsY29udGV4dCl7cmV0dXJuIF8uZmlsdGVyKG9iaixfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSxjb250ZXh0KTt9O18uZXZlcnk9Xy5hbGw9ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBrZXlzPSFpc0FycmF5TGlrZShvYmopJiZfLmtleXMob2JqKSxsZW5ndGg9KGtleXN8fG9iaikubGVuZ3RoO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDtpZighcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaikpcmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fTtfLnNvbWU9Xy5hbnk9ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBrZXlzPSFpc0FycmF5TGlrZShvYmopJiZfLmtleXMob2JqKSxsZW5ndGg9KGtleXN8fG9iaikubGVuZ3RoO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDtpZihwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKSlyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O18uY29udGFpbnM9Xy5pbmNsdWRlcz1fLmluY2x1ZGU9ZnVuY3Rpb24ob2JqLHRhcmdldCxmcm9tSW5kZXgpe2lmKCFpc0FycmF5TGlrZShvYmopKW9iaj1fLnZhbHVlcyhvYmopO3JldHVybiBfLmluZGV4T2Yob2JqLHRhcmdldCx0eXBlb2YgZnJvbUluZGV4PT0nbnVtYmVyJyYmZnJvbUluZGV4KT49MDt9O18uaW52b2tlPWZ1bmN0aW9uKG9iaixtZXRob2Qpe3ZhciBhcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3ZhciBpc0Z1bmM9Xy5pc0Z1bmN0aW9uKG1ldGhvZCk7cmV0dXJuIF8ubWFwKG9iaixmdW5jdGlvbih2YWx1ZSl7dmFyIGZ1bmM9aXNGdW5jP21ldGhvZDp2YWx1ZVttZXRob2RdO3JldHVybiBmdW5jPT1udWxsP2Z1bmM6ZnVuYy5hcHBseSh2YWx1ZSxhcmdzKTt9KTt9O18ucGx1Y2s9ZnVuY3Rpb24ob2JqLGtleSl7cmV0dXJuIF8ubWFwKG9iaixfLnByb3BlcnR5KGtleSkpO307Xy53aGVyZT1mdW5jdGlvbihvYmosYXR0cnMpe3JldHVybiBfLmZpbHRlcihvYmosXy5tYXRjaGVyKGF0dHJzKSk7fTtfLmZpbmRXaGVyZT1mdW5jdGlvbihvYmosYXR0cnMpe3JldHVybiBfLmZpbmQob2JqLF8ubWF0Y2hlcihhdHRycykpO307Xy5tYXg9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9LUluZmluaXR5LGxhc3RDb21wdXRlZD0tSW5maW5pdHksdmFsdWUsY29tcHV0ZWQ7aWYoaXRlcmF0ZWU9PW51bGwmJm9iaiE9bnVsbCl7b2JqPWlzQXJyYXlMaWtlKG9iaik/b2JqOl8udmFsdWVzKG9iaik7Zm9yKHZhciBpPTAsbGVuZ3RoPW9iai5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YWx1ZT1vYmpbaV07aWYodmFsdWU+cmVzdWx0KXtyZXN1bHQ9dmFsdWU7fX19ZWxzZXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTtfLmVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGluZGV4LGxpc3Qpe2NvbXB1dGVkPWl0ZXJhdGVlKHZhbHVlLGluZGV4LGxpc3QpO2lmKGNvbXB1dGVkPmxhc3RDb21wdXRlZHx8Y29tcHV0ZWQ9PT0tSW5maW5pdHkmJnJlc3VsdD09PS1JbmZpbml0eSl7cmVzdWx0PXZhbHVlO2xhc3RDb21wdXRlZD1jb21wdXRlZDt9fSk7fQpyZXR1cm4gcmVzdWx0O307Xy5taW49ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9SW5maW5pdHksbGFzdENvbXB1dGVkPUluZmluaXR5LHZhbHVlLGNvbXB1dGVkO2lmKGl0ZXJhdGVlPT1udWxsJiZvYmohPW51bGwpe29iaj1pc0FycmF5TGlrZShvYmopP29iajpfLnZhbHVlcyhvYmopO2Zvcih2YXIgaT0wLGxlbmd0aD1vYmoubGVuZ3RoO2k8bGVuZ3RoO2krKyl7dmFsdWU9b2JqW2ldO2lmKHZhbHVlPHJlc3VsdCl7cmVzdWx0PXZhbHVlO319fWVsc2V7aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtjb21wdXRlZD1pdGVyYXRlZSh2YWx1ZSxpbmRleCxsaXN0KTtpZihjb21wdXRlZDxsYXN0Q29tcHV0ZWR8fGNvbXB1dGVkPT09SW5maW5pdHkmJnJlc3VsdD09PUluZmluaXR5KXtyZXN1bHQ9dmFsdWU7bGFzdENvbXB1dGVkPWNvbXB1dGVkO319KTt9CnJldHVybiByZXN1bHQ7fTtfLnNodWZmbGU9ZnVuY3Rpb24ob2JqKXt2YXIgc2V0PWlzQXJyYXlMaWtlKG9iaik/b2JqOl8udmFsdWVzKG9iaik7dmFyIGxlbmd0aD1zZXQubGVuZ3RoO3ZhciBzaHVmZmxlZD1BcnJheShsZW5ndGgpO2Zvcih2YXIgaW5kZXg9MCxyYW5kO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyYW5kPV8ucmFuZG9tKDAsaW5kZXgpO2lmKHJhbmQhPT1pbmRleClzaHVmZmxlZFtpbmRleF09c2h1ZmZsZWRbcmFuZF07c2h1ZmZsZWRbcmFuZF09c2V0W2luZGV4XTt9CnJldHVybiBzaHVmZmxlZDt9O18uc2FtcGxlPWZ1bmN0aW9uKG9iaixuLGd1YXJkKXtpZihuPT1udWxsfHxndWFyZCl7aWYoIWlzQXJyYXlMaWtlKG9iaikpb2JqPV8udmFsdWVzKG9iaik7cmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoLTEpXTt9CnJldHVybiBfLnNodWZmbGUob2JqKS5zbGljZSgwLE1hdGgubWF4KDAsbikpO307Xy5zb3J0Qnk9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe2l0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3JldHVybiBfLnBsdWNrKF8ubWFwKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtyZXR1cm57dmFsdWU6dmFsdWUsaW5kZXg6aW5kZXgsY3JpdGVyaWE6aXRlcmF0ZWUodmFsdWUsaW5kZXgsbGlzdCl9O30pLnNvcnQoZnVuY3Rpb24obGVmdCxyaWdodCl7dmFyIGE9bGVmdC5jcml0ZXJpYTt2YXIgYj1yaWdodC5jcml0ZXJpYTtpZihhIT09Yil7aWYoYT5ifHxhPT09dm9pZCAwKXJldHVybiAxO2lmKGE8Ynx8Yj09PXZvaWQgMClyZXR1cm4tMTt9CnJldHVybiBsZWZ0LmluZGV4LXJpZ2h0LmluZGV4O30pLCd2YWx1ZScpO307dmFyIGdyb3VwPWZ1bmN0aW9uKGJlaGF2aW9yKXtyZXR1cm4gZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9e307aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCl7dmFyIGtleT1pdGVyYXRlZSh2YWx1ZSxpbmRleCxvYmopO2JlaGF2aW9yKHJlc3VsdCx2YWx1ZSxrZXkpO30pO3JldHVybiByZXN1bHQ7fTt9O18uZ3JvdXBCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihfLmhhcyhyZXN1bHQsa2V5KSlyZXN1bHRba2V5XS5wdXNoKHZhbHVlKTtlbHNlIHJlc3VsdFtrZXldPVt2YWx1ZV07fSk7Xy5pbmRleEJ5PWdyb3VwKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe3Jlc3VsdFtrZXldPXZhbHVlO30pO18uY291bnRCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihfLmhhcyhyZXN1bHQsa2V5KSlyZXN1bHRba2V5XSsrO2Vsc2UgcmVzdWx0W2tleV09MTt9KTtfLnRvQXJyYXk9ZnVuY3Rpb24ob2JqKXtpZighb2JqKXJldHVybltdO2lmKF8uaXNBcnJheShvYmopKXJldHVybiBzbGljZS5jYWxsKG9iaik7aWYoaXNBcnJheUxpa2Uob2JqKSlyZXR1cm4gXy5tYXAob2JqLF8uaWRlbnRpdHkpO3JldHVybiBfLnZhbHVlcyhvYmopO307Xy5zaXplPWZ1bmN0aW9uKG9iail7aWYob2JqPT1udWxsKXJldHVybiAwO3JldHVybiBpc0FycmF5TGlrZShvYmopP29iai5sZW5ndGg6Xy5rZXlzKG9iaikubGVuZ3RoO307Xy5wYXJ0aXRpb249ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBwYXNzPVtdLGZhaWw9W107Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXksb2JqKXsocHJlZGljYXRlKHZhbHVlLGtleSxvYmopP3Bhc3M6ZmFpbCkucHVzaCh2YWx1ZSk7fSk7cmV0dXJuW3Bhc3MsZmFpbF07fTtfLmZpcnN0PV8uaGVhZD1fLnRha2U9ZnVuY3Rpb24oYXJyYXksbixndWFyZCl7aWYoYXJyYXk9PW51bGwpcmV0dXJuIHZvaWQgMDtpZihuPT1udWxsfHxndWFyZClyZXR1cm4gYXJyYXlbMF07cmV0dXJuIF8uaW5pdGlhbChhcnJheSxhcnJheS5sZW5ndGgtbik7fTtfLmluaXRpYWw9ZnVuY3Rpb24oYXJyYXksbixndWFyZCl7cmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksMCxNYXRoLm1heCgwLGFycmF5Lmxlbmd0aC0obj09bnVsbHx8Z3VhcmQ/MTpuKSkpO307Xy5sYXN0PWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe2lmKGFycmF5PT1udWxsKXJldHVybiB2b2lkIDA7aWYobj09bnVsbHx8Z3VhcmQpcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aC0xXTtyZXR1cm4gXy5yZXN0KGFycmF5LE1hdGgubWF4KDAsYXJyYXkubGVuZ3RoLW4pKTt9O18ucmVzdD1fLnRhaWw9Xy5kcm9wPWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe3JldHVybiBzbGljZS5jYWxsKGFycmF5LG49PW51bGx8fGd1YXJkPzE6bik7fTtfLmNvbXBhY3Q9ZnVuY3Rpb24oYXJyYXkpe3JldHVybiBfLmZpbHRlcihhcnJheSxfLmlkZW50aXR5KTt9O3ZhciBmbGF0dGVuPWZ1bmN0aW9uKGlucHV0LHNoYWxsb3csc3RyaWN0LHN0YXJ0SW5kZXgpe3ZhciBvdXRwdXQ9W10saWR4PTA7Zm9yKHZhciBpPXN0YXJ0SW5kZXh8fDAsbGVuZ3RoPWlucHV0JiZpbnB1dC5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIgdmFsdWU9aW5wdXRbaV07aWYoaXNBcnJheUxpa2UodmFsdWUpJiYoXy5pc0FycmF5KHZhbHVlKXx8Xy5pc0FyZ3VtZW50cyh2YWx1ZSkpKXtpZighc2hhbGxvdyl2YWx1ZT1mbGF0dGVuKHZhbHVlLHNoYWxsb3csc3RyaWN0KTt2YXIgaj0wLGxlbj12YWx1ZS5sZW5ndGg7b3V0cHV0Lmxlbmd0aCs9bGVuO3doaWxlKGo8bGVuKXtvdXRwdXRbaWR4KytdPXZhbHVlW2orK107fX1lbHNlIGlmKCFzdHJpY3Qpe291dHB1dFtpZHgrK109dmFsdWU7fX0KcmV0dXJuIG91dHB1dDt9O18uZmxhdHRlbj1mdW5jdGlvbihhcnJheSxzaGFsbG93KXtyZXR1cm4gZmxhdHRlbihhcnJheSxzaGFsbG93LGZhbHNlKTt9O18ud2l0aG91dD1mdW5jdGlvbihhcnJheSl7cmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSxzbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7fTtfLnVuaXE9Xy51bmlxdWU9ZnVuY3Rpb24oYXJyYXksaXNTb3J0ZWQsaXRlcmF0ZWUsY29udGV4dCl7aWYoYXJyYXk9PW51bGwpcmV0dXJuW107aWYoIV8uaXNCb29sZWFuKGlzU29ydGVkKSl7Y29udGV4dD1pdGVyYXRlZTtpdGVyYXRlZT1pc1NvcnRlZDtpc1NvcnRlZD1mYWxzZTt9CmlmKGl0ZXJhdGVlIT1udWxsKWl0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3ZhciByZXN1bHQ9W107dmFyIHNlZW49W107Zm9yKHZhciBpPTAsbGVuZ3RoPWFycmF5Lmxlbmd0aDtpPGxlbmd0aDtpKyspe3ZhciB2YWx1ZT1hcnJheVtpXSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSxpLGFycmF5KTp2YWx1ZTtpZihpc1NvcnRlZCl7aWYoIWl8fHNlZW4hPT1jb21wdXRlZClyZXN1bHQucHVzaCh2YWx1ZSk7c2Vlbj1jb21wdXRlZDt9ZWxzZSBpZihpdGVyYXRlZSl7aWYoIV8uY29udGFpbnMoc2Vlbixjb21wdXRlZCkpe3NlZW4ucHVzaChjb21wdXRlZCk7cmVzdWx0LnB1c2godmFsdWUpO319ZWxzZSBpZighXy5jb250YWlucyhyZXN1bHQsdmFsdWUpKXtyZXN1bHQucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHJlc3VsdDt9O18udW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLHRydWUsdHJ1ZSkpO307Xy5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oYXJyYXkpe2lmKGFycmF5PT1udWxsKXJldHVybltdO3ZhciByZXN1bHQ9W107dmFyIGFyZ3NMZW5ndGg9YXJndW1lbnRzLmxlbmd0aDtmb3IodmFyIGk9MCxsZW5ndGg9YXJyYXkubGVuZ3RoO2k8bGVuZ3RoO2krKyl7dmFyIGl0ZW09YXJyYXlbaV07aWYoXy5jb250YWlucyhyZXN1bHQsaXRlbSkpY29udGludWU7Zm9yKHZhciBqPTE7ajxhcmdzTGVuZ3RoO2orKyl7aWYoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLGl0ZW0pKWJyZWFrO30KaWYoaj09PWFyZ3NMZW5ndGgpcmVzdWx0LnB1c2goaXRlbSk7fQpyZXR1cm4gcmVzdWx0O307Xy5kaWZmZXJlbmNlPWZ1bmN0aW9uKGFycmF5KXt2YXIgcmVzdD1mbGF0dGVuKGFyZ3VtZW50cyx0cnVlLHRydWUsMSk7cmV0dXJuIF8uZmlsdGVyKGFycmF5LGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hXy5jb250YWlucyhyZXN0LHZhbHVlKTt9KTt9O18uemlwPWZ1bmN0aW9uKCl7cmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTt9O18udW56aXA9ZnVuY3Rpb24oYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXkmJl8ubWF4KGFycmF5LCdsZW5ndGgnKS5sZW5ndGh8fDA7dmFyIHJlc3VsdD1BcnJheShsZW5ndGgpO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cmVzdWx0W2luZGV4XT1fLnBsdWNrKGFycmF5LGluZGV4KTt9CnJldHVybiByZXN1bHQ7fTtfLm9iamVjdD1mdW5jdGlvbihsaXN0LHZhbHVlcyl7dmFyIHJlc3VsdD17fTtmb3IodmFyIGk9MCxsZW5ndGg9bGlzdCYmbGlzdC5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZih2YWx1ZXMpe3Jlc3VsdFtsaXN0W2ldXT12YWx1ZXNbaV07fWVsc2V7cmVzdWx0W2xpc3RbaV1bMF1dPWxpc3RbaV1bMV07fX0KcmV0dXJuIHJlc3VsdDt9O18uaW5kZXhPZj1mdW5jdGlvbihhcnJheSxpdGVtLGlzU29ydGVkKXt2YXIgaT0wLGxlbmd0aD1hcnJheSYmYXJyYXkubGVuZ3RoO2lmKHR5cGVvZiBpc1NvcnRlZD09J251bWJlcicpe2k9aXNTb3J0ZWQ8MD9NYXRoLm1heCgwLGxlbmd0aCtpc1NvcnRlZCk6aXNTb3J0ZWQ7fWVsc2UgaWYoaXNTb3J0ZWQmJmxlbmd0aCl7aT1fLnNvcnRlZEluZGV4KGFycmF5LGl0ZW0pO3JldHVybiBhcnJheVtpXT09PWl0ZW0/aTotMTt9CmlmKGl0ZW0hPT1pdGVtKXtyZXR1cm4gXy5maW5kSW5kZXgoc2xpY2UuY2FsbChhcnJheSxpKSxfLmlzTmFOKTt9CmZvcig7aTxsZW5ndGg7aSsrKWlmKGFycmF5W2ldPT09aXRlbSlyZXR1cm4gaTtyZXR1cm4tMTt9O18ubGFzdEluZGV4T2Y9ZnVuY3Rpb24oYXJyYXksaXRlbSxmcm9tKXt2YXIgaWR4PWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKHR5cGVvZiBmcm9tPT0nbnVtYmVyJyl7aWR4PWZyb208MD9pZHgrZnJvbSsxOk1hdGgubWluKGlkeCxmcm9tKzEpO30KaWYoaXRlbSE9PWl0ZW0pe3JldHVybiBfLmZpbmRMYXN0SW5kZXgoc2xpY2UuY2FsbChhcnJheSwwLGlkeCksXy5pc05hTik7fQp3aGlsZSgtLWlkeD49MClpZihhcnJheVtpZHhdPT09aXRlbSlyZXR1cm4gaWR4O3JldHVybi0xO307ZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyKXtyZXR1cm4gZnVuY3Rpb24oYXJyYXkscHJlZGljYXRlLGNvbnRleHQpe3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7dmFyIGxlbmd0aD1hcnJheSE9bnVsbCYmYXJyYXkubGVuZ3RoO3ZhciBpbmRleD1kaXI+MD8wOmxlbmd0aC0xO2Zvcig7aW5kZXg+PTAmJmluZGV4PGxlbmd0aDtpbmRleCs9ZGlyKXtpZihwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSlyZXR1cm4gaW5kZXg7fQpyZXR1cm4tMTt9O30KXy5maW5kSW5kZXg9Y3JlYXRlSW5kZXhGaW5kZXIoMSk7Xy5maW5kTGFzdEluZGV4PWNyZWF0ZUluZGV4RmluZGVyKC0xKTtfLnNvcnRlZEluZGV4PWZ1bmN0aW9uKGFycmF5LG9iaixpdGVyYXRlZSxjb250ZXh0KXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0LDEpO3ZhciB2YWx1ZT1pdGVyYXRlZShvYmopO3ZhciBsb3c9MCxoaWdoPWFycmF5Lmxlbmd0aDt3aGlsZShsb3c8aGlnaCl7dmFyIG1pZD1NYXRoLmZsb29yKChsb3craGlnaCkvMik7aWYoaXRlcmF0ZWUoYXJyYXlbbWlkXSk8dmFsdWUpbG93PW1pZCsxO2Vsc2UgaGlnaD1taWQ7fQpyZXR1cm4gbG93O307Xy5yYW5nZT1mdW5jdGlvbihzdGFydCxzdG9wLHN0ZXApe2lmKGFyZ3VtZW50cy5sZW5ndGg8PTEpe3N0b3A9c3RhcnR8fDA7c3RhcnQ9MDt9CnN0ZXA9c3RlcHx8MTt2YXIgbGVuZ3RoPU1hdGgubWF4KE1hdGguY2VpbCgoc3RvcC1zdGFydCkvc3RlcCksMCk7dmFyIHJhbmdlPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpZHg9MDtpZHg8bGVuZ3RoO2lkeCsrLHN0YXJ0Kz1zdGVwKXtyYW5nZVtpZHhdPXN0YXJ0O30KcmV0dXJuIHJhbmdlO307dmFyIGV4ZWN1dGVCb3VuZD1mdW5jdGlvbihzb3VyY2VGdW5jLGJvdW5kRnVuYyxjb250ZXh0LGNhbGxpbmdDb250ZXh0LGFyZ3Mpe2lmKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKXJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7dmFyIHNlbGY9YmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7dmFyIHJlc3VsdD1zb3VyY2VGdW5jLmFwcGx5KHNlbGYsYXJncyk7aWYoXy5pc09iamVjdChyZXN1bHQpKXJldHVybiByZXN1bHQ7cmV0dXJuIHNlbGY7fTtfLmJpbmQ9ZnVuY3Rpb24oZnVuYyxjb250ZXh0KXtpZihuYXRpdmVCaW5kJiZmdW5jLmJpbmQ9PT1uYXRpdmVCaW5kKXJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO2lmKCFfLmlzRnVuY3Rpb24oZnVuYykpdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7dmFyIGFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMsMik7dmFyIGJvdW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLGNvbnRleHQsdGhpcyxhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTt9O3JldHVybiBib3VuZDt9O18ucGFydGlhbD1mdW5jdGlvbihmdW5jKXt2YXIgYm91bmRBcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3ZhciBib3VuZD1mdW5jdGlvbigpe3ZhciBwb3NpdGlvbj0wLGxlbmd0aD1ib3VuZEFyZ3MubGVuZ3RoO3ZhciBhcmdzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXthcmdzW2ldPWJvdW5kQXJnc1tpXT09PV8/YXJndW1lbnRzW3Bvc2l0aW9uKytdOmJvdW5kQXJnc1tpXTt9CndoaWxlKHBvc2l0aW9uPGFyZ3VtZW50cy5sZW5ndGgpYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLHRoaXMsdGhpcyxhcmdzKTt9O3JldHVybiBib3VuZDt9O18uYmluZEFsbD1mdW5jdGlvbihvYmope3ZhciBpLGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGtleTtpZihsZW5ndGg8PTEpdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7Zm9yKGk9MTtpPGxlbmd0aDtpKyspe2tleT1hcmd1bWVudHNbaV07b2JqW2tleV09Xy5iaW5kKG9ialtrZXldLG9iaik7fQpyZXR1cm4gb2JqO307Xy5tZW1vaXplPWZ1bmN0aW9uKGZ1bmMsaGFzaGVyKXt2YXIgbWVtb2l6ZT1mdW5jdGlvbihrZXkpe3ZhciBjYWNoZT1tZW1vaXplLmNhY2hlO3ZhciBhZGRyZXNzPScnKyhoYXNoZXI/aGFzaGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTprZXkpO2lmKCFfLmhhcyhjYWNoZSxhZGRyZXNzKSljYWNoZVthZGRyZXNzXT1mdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gY2FjaGVbYWRkcmVzc107fTttZW1vaXplLmNhY2hlPXt9O3JldHVybiBtZW1vaXplO307Xy5kZWxheT1mdW5jdGlvbihmdW5jLHdhaXQpe3ZhciBhcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmMuYXBwbHkobnVsbCxhcmdzKTt9LHdhaXQpO307Xy5kZWZlcj1fLnBhcnRpYWwoXy5kZWxheSxfLDEpO18udGhyb3R0bGU9ZnVuY3Rpb24oZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciBjb250ZXh0LGFyZ3MscmVzdWx0O3ZhciB0aW1lb3V0PW51bGw7dmFyIHByZXZpb3VzPTA7aWYoIW9wdGlvbnMpb3B0aW9ucz17fTt2YXIgbGF0ZXI9ZnVuY3Rpb24oKXtwcmV2aW91cz1vcHRpb25zLmxlYWRpbmc9PT1mYWxzZT8wOl8ubm93KCk7dGltZW91dD1udWxsO3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbm93PV8ubm93KCk7aWYoIXByZXZpb3VzJiZvcHRpb25zLmxlYWRpbmc9PT1mYWxzZSlwcmV2aW91cz1ub3c7dmFyIHJlbWFpbmluZz13YWl0LShub3ctcHJldmlvdXMpO2NvbnRleHQ9dGhpczthcmdzPWFyZ3VtZW50cztpZihyZW1haW5pbmc8PTB8fHJlbWFpbmluZz53YWl0KXtpZih0aW1lb3V0KXtjbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD1udWxsO30KcHJldmlvdXM9bm93O3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fWVsc2UgaWYoIXRpbWVvdXQmJm9wdGlvbnMudHJhaWxpbmchPT1mYWxzZSl7dGltZW91dD1zZXRUaW1lb3V0KGxhdGVyLHJlbWFpbmluZyk7fQpyZXR1cm4gcmVzdWx0O307fTtfLmRlYm91bmNlPWZ1bmN0aW9uKGZ1bmMsd2FpdCxpbW1lZGlhdGUpe3ZhciB0aW1lb3V0LGFyZ3MsY29udGV4dCx0aW1lc3RhbXAscmVzdWx0O3ZhciBsYXRlcj1mdW5jdGlvbigpe3ZhciBsYXN0PV8ubm93KCktdGltZXN0YW1wO2lmKGxhc3Q8d2FpdCYmbGFzdD49MCl7dGltZW91dD1zZXRUaW1lb3V0KGxhdGVyLHdhaXQtbGFzdCk7fWVsc2V7dGltZW91dD1udWxsO2lmKCFpbW1lZGlhdGUpe3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fX19O3JldHVybiBmdW5jdGlvbigpe2NvbnRleHQ9dGhpczthcmdzPWFyZ3VtZW50czt0aW1lc3RhbXA9Xy5ub3coKTt2YXIgY2FsbE5vdz1pbW1lZGlhdGUmJiF0aW1lb3V0O2lmKCF0aW1lb3V0KXRpbWVvdXQ9c2V0VGltZW91dChsYXRlcix3YWl0KTtpZihjYWxsTm93KXtyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO2NvbnRleHQ9YXJncz1udWxsO30KcmV0dXJuIHJlc3VsdDt9O307Xy53cmFwPWZ1bmN0aW9uKGZ1bmMsd3JhcHBlcil7cmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLGZ1bmMpO307Xy5uZWdhdGU9ZnVuY3Rpb24ocHJlZGljYXRlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hcHJlZGljYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O307Xy5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO3ZhciBzdGFydD1hcmdzLmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe3ZhciBpPXN0YXJ0O3ZhciByZXN1bHQ9YXJnc1tzdGFydF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3doaWxlKGktLSlyZXN1bHQ9YXJnc1tpXS5jYWxsKHRoaXMscmVzdWx0KTtyZXR1cm4gcmVzdWx0O307fTtfLmFmdGVyPWZ1bmN0aW9uKHRpbWVzLGZ1bmMpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tdGltZXM8MSl7cmV0dXJuIGZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O307Xy5iZWZvcmU9ZnVuY3Rpb24odGltZXMsZnVuYyl7dmFyIG1lbW87cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10aW1lcz4wKXttZW1vPWZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO30KaWYodGltZXM8PTEpZnVuYz1udWxsO3JldHVybiBtZW1vO307fTtfLm9uY2U9Xy5wYXJ0aWFsKF8uYmVmb3JlLDIpO3ZhciBoYXNFbnVtQnVnPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7dmFyIG5vbkVudW1lcmFibGVQcm9wcz1bJ3ZhbHVlT2YnLCdpc1Byb3RvdHlwZU9mJywndG9TdHJpbmcnLCdwcm9wZXJ0eUlzRW51bWVyYWJsZScsJ2hhc093blByb3BlcnR5JywndG9Mb2NhbGVTdHJpbmcnXTtmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaixrZXlzKXt2YXIgbm9uRW51bUlkeD1ub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO3ZhciBjb25zdHJ1Y3Rvcj1vYmouY29uc3RydWN0b3I7dmFyIHByb3RvPShfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpJiZjb25zdHJ1Y3Rvci5wcm90b3R5cGUpfHxPYmpQcm90bzt2YXIgcHJvcD0nY29uc3RydWN0b3InO2lmKF8uaGFzKG9iaixwcm9wKSYmIV8uY29udGFpbnMoa2V5cyxwcm9wKSlrZXlzLnB1c2gocHJvcCk7d2hpbGUobm9uRW51bUlkeC0tKXtwcm9wPW5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtpZihwcm9wIGluIG9iaiYmb2JqW3Byb3BdIT09cHJvdG9bcHJvcF0mJiFfLmNvbnRhaW5zKGtleXMscHJvcCkpe2tleXMucHVzaChwcm9wKTt9fX0KXy5rZXlzPWZ1bmN0aW9uKG9iail7aWYoIV8uaXNPYmplY3Qob2JqKSlyZXR1cm5bXTtpZihuYXRpdmVLZXlzKXJldHVybiBuYXRpdmVLZXlzKG9iaik7dmFyIGtleXM9W107Zm9yKHZhciBrZXkgaW4gb2JqKWlmKF8uaGFzKG9iaixrZXkpKWtleXMucHVzaChrZXkpO2lmKGhhc0VudW1CdWcpY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosa2V5cyk7cmV0dXJuIGtleXM7fTtfLmFsbEtleXM9ZnVuY3Rpb24ob2JqKXtpZighXy5pc09iamVjdChvYmopKXJldHVybltdO3ZhciBrZXlzPVtdO2Zvcih2YXIga2V5IGluIG9iailrZXlzLnB1c2goa2V5KTtpZihoYXNFbnVtQnVnKWNvbGxlY3ROb25FbnVtUHJvcHMob2JqLGtleXMpO3JldHVybiBrZXlzO307Xy52YWx1ZXM9ZnVuY3Rpb24ob2JqKXt2YXIga2V5cz1fLmtleXMob2JqKTt2YXIgbGVuZ3RoPWtleXMubGVuZ3RoO3ZhciB2YWx1ZXM9QXJyYXkobGVuZ3RoKTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhbHVlc1tpXT1vYmpba2V5c1tpXV07fQpyZXR1cm4gdmFsdWVzO307Xy5tYXBPYmplY3Q9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe2l0ZXJhdGVlPWNiKGl0ZXJhdGVlLGNvbnRleHQpO3ZhciBrZXlzPV8ua2V5cyhvYmopLGxlbmd0aD1rZXlzLmxlbmd0aCxyZXN1bHRzPXt9LGN1cnJlbnRLZXk7Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtjdXJyZW50S2V5PWtleXNbaW5kZXhdO3Jlc3VsdHNbY3VycmVudEtleV09aXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLGN1cnJlbnRLZXksb2JqKTt9CnJldHVybiByZXN1bHRzO307Xy5wYWlycz1mdW5jdGlvbihvYmope3ZhciBrZXlzPV8ua2V5cyhvYmopO3ZhciBsZW5ndGg9a2V5cy5sZW5ndGg7dmFyIHBhaXJzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXtwYWlyc1tpXT1ba2V5c1tpXSxvYmpba2V5c1tpXV1dO30KcmV0dXJuIHBhaXJzO307Xy5pbnZlcnQ9ZnVuY3Rpb24ob2JqKXt2YXIgcmVzdWx0PXt9O3ZhciBrZXlzPV8ua2V5cyhvYmopO2Zvcih2YXIgaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe3Jlc3VsdFtvYmpba2V5c1tpXV1dPWtleXNbaV07fQpyZXR1cm4gcmVzdWx0O307Xy5mdW5jdGlvbnM9Xy5tZXRob2RzPWZ1bmN0aW9uKG9iail7dmFyIG5hbWVzPVtdO2Zvcih2YXIga2V5IGluIG9iail7aWYoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSluYW1lcy5wdXNoKGtleSk7fQpyZXR1cm4gbmFtZXMuc29ydCgpO307Xy5leHRlbmQ9Y3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtfLmV4dGVuZE93bj1fLmFzc2lnbj1jcmVhdGVBc3NpZ25lcihfLmtleXMpO18uZmluZEtleT1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7dmFyIGtleXM9Xy5rZXlzKG9iaiksa2V5O2Zvcih2YXIgaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe2tleT1rZXlzW2ldO2lmKHByZWRpY2F0ZShvYmpba2V5XSxrZXksb2JqKSlyZXR1cm4ga2V5O319O18ucGljaz1mdW5jdGlvbihvYmplY3Qsb2l0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9e30sb2JqPW9iamVjdCxpdGVyYXRlZSxrZXlzO2lmKG9iaj09bnVsbClyZXR1cm4gcmVzdWx0O2lmKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKXtrZXlzPV8uYWxsS2V5cyhvYmopO2l0ZXJhdGVlPW9wdGltaXplQ2Iob2l0ZXJhdGVlLGNvbnRleHQpO31lbHNle2tleXM9ZmxhdHRlbihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSk7aXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsa2V5LG9iail7cmV0dXJuIGtleSBpbiBvYmo7fTtvYmo9T2JqZWN0KG9iaik7fQpmb3IodmFyIGk9MCxsZW5ndGg9a2V5cy5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIga2V5PWtleXNbaV07dmFyIHZhbHVlPW9ialtrZXldO2lmKGl0ZXJhdGVlKHZhbHVlLGtleSxvYmopKXJlc3VsdFtrZXldPXZhbHVlO30KcmV0dXJuIHJlc3VsdDt9O18ub21pdD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aWYoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSl7aXRlcmF0ZWU9Xy5uZWdhdGUoaXRlcmF0ZWUpO31lbHNle3ZhciBrZXlzPV8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpLFN0cmluZyk7aXRlcmF0ZWU9ZnVuY3Rpb24odmFsdWUsa2V5KXtyZXR1cm4hXy5jb250YWlucyhrZXlzLGtleSk7fTt9CnJldHVybiBfLnBpY2sob2JqLGl0ZXJhdGVlLGNvbnRleHQpO307Xy5kZWZhdWx0cz1jcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsdHJ1ZSk7Xy5jbG9uZT1mdW5jdGlvbihvYmope2lmKCFfLmlzT2JqZWN0KG9iaikpcmV0dXJuIG9iajtyZXR1cm4gXy5pc0FycmF5KG9iaik/b2JqLnNsaWNlKCk6Xy5leHRlbmQoe30sb2JqKTt9O18udGFwPWZ1bmN0aW9uKG9iaixpbnRlcmNlcHRvcil7aW50ZXJjZXB0b3Iob2JqKTtyZXR1cm4gb2JqO307Xy5pc01hdGNoPWZ1bmN0aW9uKG9iamVjdCxhdHRycyl7dmFyIGtleXM9Xy5rZXlzKGF0dHJzKSxsZW5ndGg9a2V5cy5sZW5ndGg7aWYob2JqZWN0PT1udWxsKXJldHVybiFsZW5ndGg7dmFyIG9iaj1PYmplY3Qob2JqZWN0KTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhciBrZXk9a2V5c1tpXTtpZihhdHRyc1trZXldIT09b2JqW2tleV18fCEoa2V5IGluIG9iaikpcmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fTt2YXIgZXE9ZnVuY3Rpb24oYSxiLGFTdGFjayxiU3RhY2spe2lmKGE9PT1iKXJldHVybiBhIT09MHx8MS9hPT09MS9iO2lmKGE9PW51bGx8fGI9PW51bGwpcmV0dXJuIGE9PT1iO2lmKGEgaW5zdGFuY2VvZiBfKWE9YS5fd3JhcHBlZDtpZihiIGluc3RhbmNlb2YgXyliPWIuX3dyYXBwZWQ7dmFyIGNsYXNzTmFtZT10b1N0cmluZy5jYWxsKGEpO2lmKGNsYXNzTmFtZSE9PXRvU3RyaW5nLmNhbGwoYikpcmV0dXJuIGZhbHNlO3N3aXRjaChjbGFzc05hbWUpe2Nhc2UnW29iamVjdCBSZWdFeHBdJzpjYXNlJ1tvYmplY3QgU3RyaW5nXSc6cmV0dXJuJycrYT09PScnK2I7Y2FzZSdbb2JqZWN0IE51bWJlcl0nOmlmKCthIT09K2EpcmV0dXJuK2IhPT0rYjtyZXR1cm4rYT09PTA/MS8rYT09PTEvYjorYT09PStiO2Nhc2UnW29iamVjdCBEYXRlXSc6Y2FzZSdbb2JqZWN0IEJvb2xlYW5dJzpyZXR1cm4rYT09PStiO30KdmFyIGFyZUFycmF5cz1jbGFzc05hbWU9PT0nW29iamVjdCBBcnJheV0nO2lmKCFhcmVBcnJheXMpe2lmKHR5cGVvZiBhIT0nb2JqZWN0J3x8dHlwZW9mIGIhPSdvYmplY3QnKXJldHVybiBmYWxzZTt2YXIgYUN0b3I9YS5jb25zdHJ1Y3RvcixiQ3Rvcj1iLmNvbnN0cnVjdG9yO2lmKGFDdG9yIT09YkN0b3ImJiEoXy5pc0Z1bmN0aW9uKGFDdG9yKSYmYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciYmXy5pc0Z1bmN0aW9uKGJDdG9yKSYmYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcikmJignY29uc3RydWN0b3InaW4gYSYmJ2NvbnN0cnVjdG9yJ2luIGIpKXtyZXR1cm4gZmFsc2U7fX0KYVN0YWNrPWFTdGFja3x8W107YlN0YWNrPWJTdGFja3x8W107dmFyIGxlbmd0aD1hU3RhY2subGVuZ3RoO3doaWxlKGxlbmd0aC0tKXtpZihhU3RhY2tbbGVuZ3RoXT09PWEpcmV0dXJuIGJTdGFja1tsZW5ndGhdPT09Yjt9CmFTdGFjay5wdXNoKGEpO2JTdGFjay5wdXNoKGIpO2lmKGFyZUFycmF5cyl7bGVuZ3RoPWEubGVuZ3RoO2lmKGxlbmd0aCE9PWIubGVuZ3RoKXJldHVybiBmYWxzZTt3aGlsZShsZW5ndGgtLSl7aWYoIWVxKGFbbGVuZ3RoXSxiW2xlbmd0aF0sYVN0YWNrLGJTdGFjaykpcmV0dXJuIGZhbHNlO319ZWxzZXt2YXIga2V5cz1fLmtleXMoYSksa2V5O2xlbmd0aD1rZXlzLmxlbmd0aDtpZihfLmtleXMoYikubGVuZ3RoIT09bGVuZ3RoKXJldHVybiBmYWxzZTt3aGlsZShsZW5ndGgtLSl7a2V5PWtleXNbbGVuZ3RoXTtpZighKF8uaGFzKGIsa2V5KSYmZXEoYVtrZXldLGJba2V5XSxhU3RhY2ssYlN0YWNrKSkpcmV0dXJuIGZhbHNlO319CmFTdGFjay5wb3AoKTtiU3RhY2sucG9wKCk7cmV0dXJuIHRydWU7fTtfLmlzRXF1YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZXEoYSxiKTt9O18uaXNFbXB0eT1mdW5jdGlvbihvYmope2lmKG9iaj09bnVsbClyZXR1cm4gdHJ1ZTtpZihpc0FycmF5TGlrZShvYmopJiYoXy5pc0FycmF5KG9iail8fF8uaXNTdHJpbmcob2JqKXx8Xy5pc0FyZ3VtZW50cyhvYmopKSlyZXR1cm4gb2JqLmxlbmd0aD09PTA7cmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aD09PTA7fTtfLmlzRWxlbWVudD1mdW5jdGlvbihvYmope3JldHVybiEhKG9iaiYmb2JqLm5vZGVUeXBlPT09MSk7fTtfLmlzQXJyYXk9bmF0aXZlSXNBcnJheXx8ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopPT09J1tvYmplY3QgQXJyYXldJzt9O18uaXNPYmplY3Q9ZnVuY3Rpb24ob2JqKXt2YXIgdHlwZT10eXBlb2Ygb2JqO3JldHVybiB0eXBlPT09J2Z1bmN0aW9uJ3x8dHlwZT09PSdvYmplY3QnJiYhIW9iajt9O18uZWFjaChbJ0FyZ3VtZW50cycsJ0Z1bmN0aW9uJywnU3RyaW5nJywnTnVtYmVyJywnRGF0ZScsJ1JlZ0V4cCcsJ0Vycm9yJ10sZnVuY3Rpb24obmFtZSl7X1snaXMnK25hbWVdPWZ1bmN0aW9uKG9iail7cmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0ICcrbmFtZSsnXSc7fTt9KTtpZighXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKXtfLmlzQXJndW1lbnRzPWZ1bmN0aW9uKG9iail7cmV0dXJuIF8uaGFzKG9iaiwnY2FsbGVlJyk7fTt9CmlmKHR5cGVvZi8uLyE9J2Z1bmN0aW9uJyYmdHlwZW9mIEludDhBcnJheSE9J29iamVjdCcpe18uaXNGdW5jdGlvbj1mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT0nZnVuY3Rpb24nfHxmYWxzZTt9O30KXy5pc0Zpbml0ZT1mdW5jdGlvbihvYmope3JldHVybiBpc0Zpbml0ZShvYmopJiYhaXNOYU4ocGFyc2VGbG9hdChvYmopKTt9O18uaXNOYU49ZnVuY3Rpb24ob2JqKXtyZXR1cm4gXy5pc051bWJlcihvYmopJiZvYmohPT0rb2JqO307Xy5pc0Jvb2xlYW49ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqPT09dHJ1ZXx8b2JqPT09ZmFsc2V8fHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0IEJvb2xlYW5dJzt9O18uaXNOdWxsPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PW51bGw7fTtfLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PXZvaWQgMDt9O18uaGFzPWZ1bmN0aW9uKG9iaixrZXkpe3JldHVybiBvYmohPW51bGwmJmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSk7fTtfLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyb290Ll89cHJldmlvdXNVbmRlcnNjb3JlO3JldHVybiB0aGlzO307Xy5pZGVudGl0eT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlO307Xy5jb25zdGFudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fTtfLm5vb3A9ZnVuY3Rpb24oKXt9O18ucHJvcGVydHk9ZnVuY3Rpb24oa2V5KXtyZXR1cm4gZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqPT1udWxsP3ZvaWQgMDpvYmpba2V5XTt9O307Xy5wcm9wZXJ0eU9mPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09bnVsbD9mdW5jdGlvbigpe306ZnVuY3Rpb24oa2V5KXtyZXR1cm4gb2JqW2tleV07fTt9O18ubWF0Y2hlcj1fLm1hdGNoZXM9ZnVuY3Rpb24oYXR0cnMpe2F0dHJzPV8uZXh0ZW5kT3duKHt9LGF0dHJzKTtyZXR1cm4gZnVuY3Rpb24ob2JqKXtyZXR1cm4gXy5pc01hdGNoKG9iaixhdHRycyk7fTt9O18udGltZXM9ZnVuY3Rpb24obixpdGVyYXRlZSxjb250ZXh0KXt2YXIgYWNjdW09QXJyYXkoTWF0aC5tYXgoMCxuKSk7aXRlcmF0ZWU9b3B0aW1pemVDYihpdGVyYXRlZSxjb250ZXh0LDEpO2Zvcih2YXIgaT0wO2k8bjtpKyspYWNjdW1baV09aXRlcmF0ZWUoaSk7cmV0dXJuIGFjY3VtO307Xy5yYW5kb209ZnVuY3Rpb24obWluLG1heCl7aWYobWF4PT1udWxsKXttYXg9bWluO21pbj0wO30KcmV0dXJuIG1pbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKG1heC1taW4rMSkpO307Xy5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO307dmFyIGVzY2FwZU1hcD17JyYnOicmYW1wOycsJzwnOicmbHQ7JywnPic6JyZndDsnLCciJzonJnF1b3Q7JywiJyI6JyYjeDI3OycsJ2AnOicmI3g2MDsnfTt2YXIgdW5lc2NhcGVNYXA9Xy5pbnZlcnQoZXNjYXBlTWFwKTt2YXIgY3JlYXRlRXNjYXBlcj1mdW5jdGlvbihtYXApe3ZhciBlc2NhcGVyPWZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbWFwW21hdGNoXTt9O3ZhciBzb3VyY2U9Jyg/OicrXy5rZXlzKG1hcCkuam9pbignfCcpKycpJzt2YXIgdGVzdFJlZ2V4cD1SZWdFeHAoc291cmNlKTt2YXIgcmVwbGFjZVJlZ2V4cD1SZWdFeHAoc291cmNlLCdnJyk7cmV0dXJuIGZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nPXN0cmluZz09bnVsbD8nJzonJytzdHJpbmc7cmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpP3N0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsZXNjYXBlcik6c3RyaW5nO307fTtfLmVzY2FwZT1jcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7Xy51bmVzY2FwZT1jcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtfLnJlc3VsdD1mdW5jdGlvbihvYmplY3QscHJvcGVydHksZmFsbGJhY2spe3ZhciB2YWx1ZT1vYmplY3Q9PW51bGw/dm9pZCAwOm9iamVjdFtwcm9wZXJ0eV07aWYodmFsdWU9PT12b2lkIDApe3ZhbHVlPWZhbGxiYWNrO30KcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSk/dmFsdWUuY2FsbChvYmplY3QpOnZhbHVlO307dmFyIGlkQ291bnRlcj0wO18udW5pcXVlSWQ9ZnVuY3Rpb24ocHJlZml4KXt2YXIgaWQ9KytpZENvdW50ZXIrJyc7cmV0dXJuIHByZWZpeD9wcmVmaXgraWQ6aWQ7fTtfLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgbm9NYXRjaD0vKC4pXi87dmFyIGVzY2FwZXM9eyInIjoiJyIsJ1xcJzonXFwnLCdccic6J3InLCdcbic6J24nLCdcdTIwMjgnOid1MjAyOCcsJ1x1MjAyOSc6J3UyMDI5J307dmFyIGVzY2FwZXI9L1xcfCd8XHJ8XG58XHUyMDI4fFx1MjAyOS9nO3ZhciBlc2NhcGVDaGFyPWZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4nXFwnK2VzY2FwZXNbbWF0Y2hdO307Xy50ZW1wbGF0ZT1mdW5jdGlvbih0ZXh0LHNldHRpbmdzLG9sZFNldHRpbmdzKXtpZighc2V0dGluZ3MmJm9sZFNldHRpbmdzKXNldHRpbmdzPW9sZFNldHRpbmdzO3NldHRpbmdzPV8uZGVmYXVsdHMoe30sc2V0dGluZ3MsXy50ZW1wbGF0ZVNldHRpbmdzKTt2YXIgbWF0Y2hlcj1SZWdFeHAoWyhzZXR0aW5ncy5lc2NhcGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuaW50ZXJwb2xhdGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuZXZhbHVhdGV8fG5vTWF0Y2gpLnNvdXJjZV0uam9pbignfCcpKyd8JCcsJ2cnKTt2YXIgaW5kZXg9MDt2YXIgc291cmNlPSJfX3ArPSciO3RleHQucmVwbGFjZShtYXRjaGVyLGZ1bmN0aW9uKG1hdGNoLGVzY2FwZSxpbnRlcnBvbGF0ZSxldmFsdWF0ZSxvZmZzZXQpe3NvdXJjZSs9dGV4dC5zbGljZShpbmRleCxvZmZzZXQpLnJlcGxhY2UoZXNjYXBlcixlc2NhcGVDaGFyKTtpbmRleD1vZmZzZXQrbWF0Y2gubGVuZ3RoO2lmKGVzY2FwZSl7c291cmNlKz0iJytcbigoX190PSgiK2VzY2FwZSsiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIjt9ZWxzZSBpZihpbnRlcnBvbGF0ZSl7c291cmNlKz0iJytcbigoX190PSgiK2ludGVycG9sYXRlKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI7fWVsc2UgaWYoZXZhbHVhdGUpe3NvdXJjZSs9Iic7XG4iK2V2YWx1YXRlKyJcbl9fcCs9JyI7fQpyZXR1cm4gbWF0Y2g7fSk7c291cmNlKz0iJztcbiI7aWYoIXNldHRpbmdzLnZhcmlhYmxlKXNvdXJjZT0nd2l0aChvYmp8fHt9KXtcbicrc291cmNlKyd9XG4nO3NvdXJjZT0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIrInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iKwpzb3VyY2UrJ3JldHVybiBfX3A7XG4nO3RyeXt2YXIgcmVuZGVyPW5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZXx8J29iaicsJ18nLHNvdXJjZSk7fWNhdGNoKGUpe2Uuc291cmNlPXNvdXJjZTt0aHJvdyBlO30KdmFyIHRlbXBsYXRlPWZ1bmN0aW9uKGRhdGEpe3JldHVybiByZW5kZXIuY2FsbCh0aGlzLGRhdGEsXyk7fTt2YXIgYXJndW1lbnQ9c2V0dGluZ3MudmFyaWFibGV8fCdvYmonO3RlbXBsYXRlLnNvdXJjZT0nZnVuY3Rpb24oJythcmd1bWVudCsnKXtcbicrc291cmNlKyd9JztyZXR1cm4gdGVtcGxhdGU7fTtfLmNoYWluPWZ1bmN0aW9uKG9iail7dmFyIGluc3RhbmNlPV8ob2JqKTtpbnN0YW5jZS5fY2hhaW49dHJ1ZTtyZXR1cm4gaW5zdGFuY2U7fTt2YXIgcmVzdWx0PWZ1bmN0aW9uKGluc3RhbmNlLG9iail7cmV0dXJuIGluc3RhbmNlLl9jaGFpbj9fKG9iaikuY2hhaW4oKTpvYmo7fTtfLm1peGluPWZ1bmN0aW9uKG9iail7Xy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksZnVuY3Rpb24obmFtZSl7dmFyIGZ1bmM9X1tuYW1lXT1vYmpbbmFtZV07Xy5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oKXt2YXIgYXJncz1bdGhpcy5fd3JhcHBlZF07cHVzaC5hcHBseShhcmdzLGFyZ3VtZW50cyk7cmV0dXJuIHJlc3VsdCh0aGlzLGZ1bmMuYXBwbHkoXyxhcmdzKSk7fTt9KTt9O18ubWl4aW4oXyk7Xy5lYWNoKFsncG9wJywncHVzaCcsJ3JldmVyc2UnLCdzaGlmdCcsJ3NvcnQnLCdzcGxpY2UnLCd1bnNoaWZ0J10sZnVuY3Rpb24obmFtZSl7dmFyIG1ldGhvZD1BcnJheVByb3RvW25hbWVdO18ucHJvdG90eXBlW25hbWVdPWZ1bmN0aW9uKCl7dmFyIG9iaj10aGlzLl93cmFwcGVkO21ldGhvZC5hcHBseShvYmosYXJndW1lbnRzKTtpZigobmFtZT09PSdzaGlmdCd8fG5hbWU9PT0nc3BsaWNlJykmJm9iai5sZW5ndGg9PT0wKWRlbGV0ZSBvYmpbMF07cmV0dXJuIHJlc3VsdCh0aGlzLG9iaik7fTt9KTtfLmVhY2goWydjb25jYXQnLCdqb2luJywnc2xpY2UnXSxmdW5jdGlvbihuYW1lKXt2YXIgbWV0aG9kPUFycmF5UHJvdG9bbmFtZV07Xy5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oKXtyZXR1cm4gcmVzdWx0KHRoaXMsbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsYXJndW1lbnRzKSk7fTt9KTtfLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkO307Xy5wcm90b3R5cGUudmFsdWVPZj1fLnByb3RvdHlwZS50b0pTT049Xy5wcm90b3R5cGUudmFsdWU7Xy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4nJyt0aGlzLl93cmFwcGVkO307aWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZSgndW5kZXJzY29yZScsW10sZnVuY3Rpb24oKXtyZXR1cm4gXzt9KTt9fS5jYWxsKHRoaXMpKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvdW5kZXJzY29yZS5zdHJpbmcvbGliL3VuZGVyc2NvcmUuc3RyaW5nLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KIWZ1bmN0aW9uKHJvb3QsU3RyaW5nKXsndXNlIHN0cmljdCc7dmFyIG5hdGl2ZVRyaW09U3RyaW5nLnByb3RvdHlwZS50cmltO3ZhciBuYXRpdmVUcmltUmlnaHQ9U3RyaW5nLnByb3RvdHlwZS50cmltUmlnaHQ7dmFyIG5hdGl2ZVRyaW1MZWZ0PVN0cmluZy5wcm90b3R5cGUudHJpbUxlZnQ7dmFyIHBhcnNlTnVtYmVyPWZ1bmN0aW9uKHNvdXJjZSl7cmV0dXJuIHNvdXJjZSoxfHwwO307dmFyIHN0clJlcGVhdD1mdW5jdGlvbihzdHIscXR5KXtpZihxdHk8MSlyZXR1cm4nJzt2YXIgcmVzdWx0PScnO3doaWxlKHF0eT4wKXtpZihxdHkmMSlyZXN1bHQrPXN0cjtxdHk+Pj0xLHN0cis9c3RyO30KcmV0dXJuIHJlc3VsdDt9O3ZhciBzbGljZT1bXS5zbGljZTt2YXIgZGVmYXVsdFRvV2hpdGVTcGFjZT1mdW5jdGlvbihjaGFyYWN0ZXJzKXtpZihjaGFyYWN0ZXJzPT1udWxsKQpyZXR1cm4nXFxzJztlbHNlIGlmKGNoYXJhY3RlcnMuc291cmNlKQpyZXR1cm4gY2hhcmFjdGVycy5zb3VyY2U7ZWxzZQpyZXR1cm4nWycrX3MuZXNjYXBlUmVnRXhwKGNoYXJhY3RlcnMpKyddJzt9O2Z1bmN0aW9uIGJvb2xNYXRjaChzLG1hdGNoZXJzKXt2YXIgaSxtYXRjaGVyLGRvd249cy50b0xvd2VyQ2FzZSgpO21hdGNoZXJzPVtdLmNvbmNhdChtYXRjaGVycyk7Zm9yKGk9MDtpPG1hdGNoZXJzLmxlbmd0aDtpKz0xKXttYXRjaGVyPW1hdGNoZXJzW2ldO2lmKCFtYXRjaGVyKWNvbnRpbnVlO2lmKG1hdGNoZXIudGVzdCYmbWF0Y2hlci50ZXN0KHMpKXJldHVybiB0cnVlO2lmKG1hdGNoZXIudG9Mb3dlckNhc2UoKT09PWRvd24pcmV0dXJuIHRydWU7fX0KdmFyIGVzY2FwZUNoYXJzPXtsdDonPCcsZ3Q6Jz4nLHF1b3Q6JyInLGFtcDonJicsYXBvczoiJyJ9O3ZhciByZXZlcnNlZEVzY2FwZUNoYXJzPXt9O2Zvcih2YXIga2V5IGluIGVzY2FwZUNoYXJzKXJldmVyc2VkRXNjYXBlQ2hhcnNbZXNjYXBlQ2hhcnNba2V5XV09a2V5O3JldmVyc2VkRXNjYXBlQ2hhcnNbIiciXT0nIzM5Jzt2YXIgc3ByaW50Zj0oZnVuY3Rpb24oKXtmdW5jdGlvbiBnZXRfdHlwZSh2YXJpYWJsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKTt9CnZhciBzdHJfcmVwZWF0PXN0clJlcGVhdDt2YXIgc3RyX2Zvcm1hdD1mdW5jdGlvbigpe2lmKCFzdHJfZm9ybWF0LmNhY2hlLmhhc093blByb3BlcnR5KGFyZ3VtZW50c1swXSkpe3N0cl9mb3JtYXQuY2FjaGVbYXJndW1lbnRzWzBdXT1zdHJfZm9ybWF0LnBhcnNlKGFyZ3VtZW50c1swXSk7fQpyZXR1cm4gc3RyX2Zvcm1hdC5mb3JtYXQuY2FsbChudWxsLHN0cl9mb3JtYXQuY2FjaGVbYXJndW1lbnRzWzBdXSxhcmd1bWVudHMpO307c3RyX2Zvcm1hdC5mb3JtYXQ9ZnVuY3Rpb24ocGFyc2VfdHJlZSxhcmd2KXt2YXIgY3Vyc29yPTEsdHJlZV9sZW5ndGg9cGFyc2VfdHJlZS5sZW5ndGgsbm9kZV90eXBlPScnLGFyZyxvdXRwdXQ9W10saSxrLG1hdGNoLHBhZCxwYWRfY2hhcmFjdGVyLHBhZF9sZW5ndGg7Zm9yKGk9MDtpPHRyZWVfbGVuZ3RoO2krKyl7bm9kZV90eXBlPWdldF90eXBlKHBhcnNlX3RyZWVbaV0pO2lmKG5vZGVfdHlwZT09PSdzdHJpbmcnKXtvdXRwdXQucHVzaChwYXJzZV90cmVlW2ldKTt9CmVsc2UgaWYobm9kZV90eXBlPT09J2FycmF5Jyl7bWF0Y2g9cGFyc2VfdHJlZVtpXTtpZihtYXRjaFsyXSl7YXJnPWFyZ3ZbY3Vyc29yXTtmb3Ioaz0wO2s8bWF0Y2hbMl0ubGVuZ3RoO2srKyl7aWYoIWFyZy5oYXNPd25Qcm9wZXJ0eShtYXRjaFsyXVtrXSkpe3Rocm93IG5ldyBFcnJvcihzcHJpbnRmKCdbXy5zcHJpbnRmXSBwcm9wZXJ0eSAiJXMiIGRvZXMgbm90IGV4aXN0JyxtYXRjaFsyXVtrXSkpO30KYXJnPWFyZ1ttYXRjaFsyXVtrXV07fX1lbHNlIGlmKG1hdGNoWzFdKXthcmc9YXJndlttYXRjaFsxXV07fQplbHNle2FyZz1hcmd2W2N1cnNvcisrXTt9CmlmKC9bXnNdLy50ZXN0KG1hdGNoWzhdKSYmKGdldF90eXBlKGFyZykhPSdudW1iZXInKSl7dGhyb3cgbmV3IEVycm9yKHNwcmludGYoJ1tfLnNwcmludGZdIGV4cGVjdGluZyBudW1iZXIgYnV0IGZvdW5kICVzJyxnZXRfdHlwZShhcmcpKSk7fQpzd2l0Y2gobWF0Y2hbOF0pe2Nhc2UnYic6YXJnPWFyZy50b1N0cmluZygyKTticmVhaztjYXNlJ2MnOmFyZz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFyZyk7YnJlYWs7Y2FzZSdkJzphcmc9cGFyc2VJbnQoYXJnLDEwKTticmVhaztjYXNlJ2UnOmFyZz1tYXRjaFs3XT9hcmcudG9FeHBvbmVudGlhbChtYXRjaFs3XSk6YXJnLnRvRXhwb25lbnRpYWwoKTticmVhaztjYXNlJ2YnOmFyZz1tYXRjaFs3XT9wYXJzZUZsb2F0KGFyZykudG9GaXhlZChtYXRjaFs3XSk6cGFyc2VGbG9hdChhcmcpO2JyZWFrO2Nhc2Unbyc6YXJnPWFyZy50b1N0cmluZyg4KTticmVhaztjYXNlJ3MnOmFyZz0oKGFyZz1TdHJpbmcoYXJnKSkmJm1hdGNoWzddP2FyZy5zdWJzdHJpbmcoMCxtYXRjaFs3XSk6YXJnKTticmVhaztjYXNlJ3UnOmFyZz1NYXRoLmFicyhhcmcpO2JyZWFrO2Nhc2UneCc6YXJnPWFyZy50b1N0cmluZygxNik7YnJlYWs7Y2FzZSdYJzphcmc9YXJnLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO2JyZWFrO30KYXJnPSgvW2RlZl0vLnRlc3QobWF0Y2hbOF0pJiZtYXRjaFszXSYmYXJnPj0wPycrJythcmc6YXJnKTtwYWRfY2hhcmFjdGVyPW1hdGNoWzRdP21hdGNoWzRdPT0nMCc/JzAnOm1hdGNoWzRdLmNoYXJBdCgxKTonICc7cGFkX2xlbmd0aD1tYXRjaFs2XS1TdHJpbmcoYXJnKS5sZW5ndGg7cGFkPW1hdGNoWzZdP3N0cl9yZXBlYXQocGFkX2NoYXJhY3RlcixwYWRfbGVuZ3RoKTonJztvdXRwdXQucHVzaChtYXRjaFs1XT9hcmcrcGFkOnBhZCthcmcpO319CnJldHVybiBvdXRwdXQuam9pbignJyk7fTtzdHJfZm9ybWF0LmNhY2hlPXt9O3N0cl9mb3JtYXQucGFyc2U9ZnVuY3Rpb24oZm10KXt2YXIgX2ZtdD1mbXQsbWF0Y2g9W10scGFyc2VfdHJlZT1bXSxhcmdfbmFtZXM9MDt3aGlsZShfZm10KXtpZigobWF0Y2g9L15bXlx4MjVdKy8uZXhlYyhfZm10KSkhPT1udWxsKXtwYXJzZV90cmVlLnB1c2gobWF0Y2hbMF0pO30KZWxzZSBpZigobWF0Y2g9L15ceDI1ezJ9Ly5leGVjKF9mbXQpKSE9PW51bGwpe3BhcnNlX3RyZWUucHVzaCgnJScpO30KZWxzZSBpZigobWF0Y2g9L15ceDI1KD86KFsxLTldXGQqKVwkfFwoKFteXCldKylcKSk/KFwrKT8oMHwnW14kXSk/KC0pPyhcZCspPyg/OlwuKFxkKykpPyhbYi1mb3N1eFhdKS8uZXhlYyhfZm10KSkhPT1udWxsKXtpZihtYXRjaFsyXSl7YXJnX25hbWVzfD0xO3ZhciBmaWVsZF9saXN0PVtdLHJlcGxhY2VtZW50X2ZpZWxkPW1hdGNoWzJdLGZpZWxkX21hdGNoPVtdO2lmKChmaWVsZF9tYXRjaD0vXihbYS16X11bYS16X1xkXSopL2kuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpIT09bnVsbCl7ZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKTt3aGlsZSgocmVwbGFjZW1lbnRfZmllbGQ9cmVwbGFjZW1lbnRfZmllbGQuc3Vic3RyaW5nKGZpZWxkX21hdGNoWzBdLmxlbmd0aCkpIT09Jycpe2lmKChmaWVsZF9tYXRjaD0vXlwuKFthLXpfXVthLXpfXGRdKikvaS5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkhPT1udWxsKXtmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pO30KZWxzZSBpZigoZmllbGRfbWF0Y2g9L15cWyhcZCspXF0vLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSE9PW51bGwpe2ZpZWxkX2xpc3QucHVzaChmaWVsZF9tYXRjaFsxXSk7fQplbHNle3Rocm93IG5ldyBFcnJvcignW18uc3ByaW50Zl0gaHVoPycpO319fQplbHNle3Rocm93IG5ldyBFcnJvcignW18uc3ByaW50Zl0gaHVoPycpO30KbWF0Y2hbMl09ZmllbGRfbGlzdDt9CmVsc2V7YXJnX25hbWVzfD0yO30KaWYoYXJnX25hbWVzPT09Myl7dGhyb3cgbmV3IEVycm9yKCdbXy5zcHJpbnRmXSBtaXhpbmcgcG9zaXRpb25hbCBhbmQgbmFtZWQgcGxhY2Vob2xkZXJzIGlzIG5vdCAoeWV0KSBzdXBwb3J0ZWQnKTt9CnBhcnNlX3RyZWUucHVzaChtYXRjaCk7fQplbHNle3Rocm93IG5ldyBFcnJvcignW18uc3ByaW50Zl0gaHVoPycpO30KX2ZtdD1fZm10LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO30KcmV0dXJuIHBhcnNlX3RyZWU7fTtyZXR1cm4gc3RyX2Zvcm1hdDt9KSgpO3ZhciBfcz17VkVSU0lPTjonMi4zLjAnLGlzQmxhbms6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpc3RyPScnO3JldHVybigvXlxzKiQvKS50ZXN0KHN0cik7fSxzdHJpcFRhZ3M6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7cmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLzxcLz9bXj5dKz4vZywnJyk7fSxjYXBpdGFsaXplOmZ1bmN0aW9uKHN0cil7c3RyPXN0cj09bnVsbD8nJzpTdHJpbmcoc3RyKTtyZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3N0ci5zbGljZSgxKTt9LGNob3A6ZnVuY3Rpb24oc3RyLHN0ZXApe2lmKHN0cj09bnVsbClyZXR1cm5bXTtzdHI9U3RyaW5nKHN0cik7c3RlcD1+fnN0ZXA7cmV0dXJuIHN0ZXA+MD9zdHIubWF0Y2gobmV3IFJlZ0V4cCgnLnsxLCcrc3RlcCsnfScsJ2cnKSk6W3N0cl07fSxjbGVhbjpmdW5jdGlvbihzdHIpe3JldHVybiBfcy5zdHJpcChzdHIpLnJlcGxhY2UoL1xzKy9nLCcgJyk7fSxjb3VudDpmdW5jdGlvbihzdHIsc3Vic3RyKXtpZihzdHI9PW51bGx8fHN1YnN0cj09bnVsbClyZXR1cm4gMDtzdHI9U3RyaW5nKHN0cik7c3Vic3RyPVN0cmluZyhzdWJzdHIpO3ZhciBjb3VudD0wLHBvcz0wLGxlbmd0aD1zdWJzdHIubGVuZ3RoO3doaWxlKHRydWUpe3Bvcz1zdHIuaW5kZXhPZihzdWJzdHIscG9zKTtpZihwb3M9PT0tMSlicmVhaztjb3VudCsrO3Bvcys9bGVuZ3RoO30KcmV0dXJuIGNvdW50O30sY2hhcnM6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuW107cmV0dXJuIFN0cmluZyhzdHIpLnNwbGl0KCcnKTt9LHN3YXBDYXNlOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC9cUy9nLGZ1bmN0aW9uKGMpe3JldHVybiBjPT09Yy50b1VwcGVyQ2FzZSgpP2MudG9Mb3dlckNhc2UoKTpjLnRvVXBwZXJDYXNlKCk7fSk7fSxlc2NhcGVIVE1MOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC9bJjw+IiddL2csZnVuY3Rpb24obSl7cmV0dXJuJyYnK3JldmVyc2VkRXNjYXBlQ2hhcnNbbV0rJzsnO30pO30sdW5lc2NhcGVIVE1MOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3JldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC9cJihbXjtdKyk7L2csZnVuY3Rpb24oZW50aXR5LGVudGl0eUNvZGUpe3ZhciBtYXRjaDtpZihlbnRpdHlDb2RlIGluIGVzY2FwZUNoYXJzKXtyZXR1cm4gZXNjYXBlQ2hhcnNbZW50aXR5Q29kZV07fWVsc2UgaWYobWF0Y2g9ZW50aXR5Q29kZS5tYXRjaCgvXiN4KFtcZGEtZkEtRl0rKSQvKSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobWF0Y2hbMV0sMTYpKTt9ZWxzZSBpZihtYXRjaD1lbnRpdHlDb2RlLm1hdGNoKC9eIyhcZCspJC8pKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh+fm1hdGNoWzFdKTt9ZWxzZXtyZXR1cm4gZW50aXR5O319KTt9LGVzY2FwZVJlZ0V4cDpmdW5jdGlvbihzdHIpe2lmKHN0cj09bnVsbClyZXR1cm4nJztyZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCdcXCQxJyk7fSxzcGxpY2U6ZnVuY3Rpb24oc3RyLGksaG93bWFueSxzdWJzdHIpe3ZhciBhcnI9X3MuY2hhcnMoc3RyKTthcnIuc3BsaWNlKH5+aSx+fmhvd21hbnksc3Vic3RyKTtyZXR1cm4gYXJyLmpvaW4oJycpO30saW5zZXJ0OmZ1bmN0aW9uKHN0cixpLHN1YnN0cil7cmV0dXJuIF9zLnNwbGljZShzdHIsaSwwLHN1YnN0cik7fSxpbmNsdWRlOmZ1bmN0aW9uKHN0cixuZWVkbGUpe2lmKG5lZWRsZT09PScnKXJldHVybiB0cnVlO2lmKHN0cj09bnVsbClyZXR1cm4gZmFsc2U7cmV0dXJuIFN0cmluZyhzdHIpLmluZGV4T2YobmVlZGxlKSE9PS0xO30sam9pbjpmdW5jdGlvbigpe3ZhciBhcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzKSxzZXBhcmF0b3I9YXJncy5zaGlmdCgpO2lmKHNlcGFyYXRvcj09bnVsbClzZXBhcmF0b3I9Jyc7cmV0dXJuIGFyZ3Muam9pbihzZXBhcmF0b3IpO30sbGluZXM6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuW107cmV0dXJuIFN0cmluZyhzdHIpLnNwbGl0KCJcbiIpO30scmV2ZXJzZTpmdW5jdGlvbihzdHIpe3JldHVybiBfcy5jaGFycyhzdHIpLnJldmVyc2UoKS5qb2luKCcnKTt9LHN0YXJ0c1dpdGg6ZnVuY3Rpb24oc3RyLHN0YXJ0cyl7aWYoc3RhcnRzPT09JycpcmV0dXJuIHRydWU7aWYoc3RyPT1udWxsfHxzdGFydHM9PW51bGwpcmV0dXJuIGZhbHNlO3N0cj1TdHJpbmcoc3RyKTtzdGFydHM9U3RyaW5nKHN0YXJ0cyk7cmV0dXJuIHN0ci5sZW5ndGg+PXN0YXJ0cy5sZW5ndGgmJnN0ci5zbGljZSgwLHN0YXJ0cy5sZW5ndGgpPT09c3RhcnRzO30sZW5kc1dpdGg6ZnVuY3Rpb24oc3RyLGVuZHMpe2lmKGVuZHM9PT0nJylyZXR1cm4gdHJ1ZTtpZihzdHI9PW51bGx8fGVuZHM9PW51bGwpcmV0dXJuIGZhbHNlO3N0cj1TdHJpbmcoc3RyKTtlbmRzPVN0cmluZyhlbmRzKTtyZXR1cm4gc3RyLmxlbmd0aD49ZW5kcy5sZW5ndGgmJnN0ci5zbGljZShzdHIubGVuZ3RoLWVuZHMubGVuZ3RoKT09PWVuZHM7fSxzdWNjOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cj1TdHJpbmcoc3RyKTtyZXR1cm4gc3RyLnNsaWNlKDAsLTEpK1N0cmluZy5mcm9tQ2hhckNvZGUoc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aC0xKSsxKTt9LHRpdGxlaXplOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cj1TdHJpbmcoc3RyKS50b0xvd2VyQ2FzZSgpO3JldHVybiBzdHIucmVwbGFjZSgvKD86Xnxcc3wtKVxTL2csZnVuY3Rpb24oYyl7cmV0dXJuIGMudG9VcHBlckNhc2UoKTt9KTt9LGNhbWVsaXplOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLnRyaW0oc3RyKS5yZXBsYWNlKC9bLV9cc10rKC4pPy9nLGZ1bmN0aW9uKG1hdGNoLGMpe3JldHVybiBjP2MudG9VcHBlckNhc2UoKToiIjt9KTt9LHVuZGVyc2NvcmVkOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLnRyaW0oc3RyKS5yZXBsYWNlKC8oW2EtelxkXSkoW0EtWl0rKS9nLCckMV8kMicpLnJlcGxhY2UoL1stXHNdKy9nLCdfJykudG9Mb3dlckNhc2UoKTt9LGRhc2hlcml6ZTpmdW5jdGlvbihzdHIpe3JldHVybiBfcy50cmltKHN0cikucmVwbGFjZSgvKFtBLVpdKS9nLCctJDEnKS5yZXBsYWNlKC9bLV9cc10rL2csJy0nKS50b0xvd2VyQ2FzZSgpO30sY2xhc3NpZnk6ZnVuY3Rpb24oc3RyKXtyZXR1cm4gX3MudGl0bGVpemUoU3RyaW5nKHN0cikucmVwbGFjZSgvW1xXX10vZywnICcpKS5yZXBsYWNlKC9ccy9nLCcnKTt9LGh1bWFuaXplOmZ1bmN0aW9uKHN0cil7cmV0dXJuIF9zLmNhcGl0YWxpemUoX3MudW5kZXJzY29yZWQoc3RyKS5yZXBsYWNlKC9faWQkLywnJykucmVwbGFjZSgvXy9nLCcgJykpO30sdHJpbTpmdW5jdGlvbihzdHIsY2hhcmFjdGVycyl7aWYoc3RyPT1udWxsKXJldHVybicnO2lmKCFjaGFyYWN0ZXJzJiZuYXRpdmVUcmltKXJldHVybiBuYXRpdmVUcmltLmNhbGwoc3RyKTtjaGFyYWN0ZXJzPWRlZmF1bHRUb1doaXRlU3BhY2UoY2hhcmFjdGVycyk7cmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UobmV3IFJlZ0V4cCgnXF4nK2NoYXJhY3RlcnMrJyt8JytjaGFyYWN0ZXJzKycrJCcsJ2cnKSwnJyk7fSxsdHJpbTpmdW5jdGlvbihzdHIsY2hhcmFjdGVycyl7aWYoc3RyPT1udWxsKXJldHVybicnO2lmKCFjaGFyYWN0ZXJzJiZuYXRpdmVUcmltTGVmdClyZXR1cm4gbmF0aXZlVHJpbUxlZnQuY2FsbChzdHIpO2NoYXJhY3RlcnM9ZGVmYXVsdFRvV2hpdGVTcGFjZShjaGFyYWN0ZXJzKTtyZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZShuZXcgUmVnRXhwKCdeJytjaGFyYWN0ZXJzKycrJyksJycpO30scnRyaW06ZnVuY3Rpb24oc3RyLGNoYXJhY3RlcnMpe2lmKHN0cj09bnVsbClyZXR1cm4nJztpZighY2hhcmFjdGVycyYmbmF0aXZlVHJpbVJpZ2h0KXJldHVybiBuYXRpdmVUcmltUmlnaHQuY2FsbChzdHIpO2NoYXJhY3RlcnM9ZGVmYXVsdFRvV2hpdGVTcGFjZShjaGFyYWN0ZXJzKTtyZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZShuZXcgUmVnRXhwKGNoYXJhY3RlcnMrJyskJyksJycpO30sdHJ1bmNhdGU6ZnVuY3Rpb24oc3RyLGxlbmd0aCx0cnVuY2F0ZVN0cil7aWYoc3RyPT1udWxsKXJldHVybicnO3N0cj1TdHJpbmcoc3RyKTt0cnVuY2F0ZVN0cj10cnVuY2F0ZVN0cnx8Jy4uLic7bGVuZ3RoPX5+bGVuZ3RoO3JldHVybiBzdHIubGVuZ3RoPmxlbmd0aD9zdHIuc2xpY2UoMCxsZW5ndGgpK3RydW5jYXRlU3RyOnN0cjt9LHBydW5lOmZ1bmN0aW9uKHN0cixsZW5ndGgscHJ1bmVTdHIpe2lmKHN0cj09bnVsbClyZXR1cm4nJztzdHI9U3RyaW5nKHN0cik7bGVuZ3RoPX5+bGVuZ3RoO3BydW5lU3RyPXBydW5lU3RyIT1udWxsP1N0cmluZyhwcnVuZVN0cik6Jy4uLic7aWYoc3RyLmxlbmd0aDw9bGVuZ3RoKXJldHVybiBzdHI7dmFyIHRtcGw9ZnVuY3Rpb24oYyl7cmV0dXJuIGMudG9VcHBlckNhc2UoKSE9PWMudG9Mb3dlckNhc2UoKT8nQSc6JyAnO30sdGVtcGxhdGU9c3RyLnNsaWNlKDAsbGVuZ3RoKzEpLnJlcGxhY2UoLy4oPz1cVypcdyokKS9nLHRtcGwpO2lmKHRlbXBsYXRlLnNsaWNlKHRlbXBsYXRlLmxlbmd0aC0yKS5tYXRjaCgvXHdcdy8pKQp0ZW1wbGF0ZT10ZW1wbGF0ZS5yZXBsYWNlKC9ccypcUyskLywnJyk7ZWxzZQp0ZW1wbGF0ZT1fcy5ydHJpbSh0ZW1wbGF0ZS5zbGljZSgwLHRlbXBsYXRlLmxlbmd0aC0xKSk7cmV0dXJuKHRlbXBsYXRlK3BydW5lU3RyKS5sZW5ndGg+c3RyLmxlbmd0aD9zdHI6c3RyLnNsaWNlKDAsdGVtcGxhdGUubGVuZ3RoKStwcnVuZVN0cjt9LHdvcmRzOmZ1bmN0aW9uKHN0cixkZWxpbWl0ZXIpe2lmKF9zLmlzQmxhbmsoc3RyKSlyZXR1cm5bXTtyZXR1cm4gX3MudHJpbShzdHIsZGVsaW1pdGVyKS5zcGxpdChkZWxpbWl0ZXJ8fC9ccysvKTt9LHBhZDpmdW5jdGlvbihzdHIsbGVuZ3RoLHBhZFN0cix0eXBlKXtzdHI9c3RyPT1udWxsPycnOlN0cmluZyhzdHIpO2xlbmd0aD1+fmxlbmd0aDt2YXIgcGFkbGVuPTA7aWYoIXBhZFN0cikKcGFkU3RyPScgJztlbHNlIGlmKHBhZFN0ci5sZW5ndGg+MSkKcGFkU3RyPXBhZFN0ci5jaGFyQXQoMCk7c3dpdGNoKHR5cGUpe2Nhc2UncmlnaHQnOnBhZGxlbj1sZW5ndGgtc3RyLmxlbmd0aDtyZXR1cm4gc3RyK3N0clJlcGVhdChwYWRTdHIscGFkbGVuKTtjYXNlJ2JvdGgnOnBhZGxlbj1sZW5ndGgtc3RyLmxlbmd0aDtyZXR1cm4gc3RyUmVwZWF0KHBhZFN0cixNYXRoLmNlaWwocGFkbGVuLzIpKStzdHIKK3N0clJlcGVhdChwYWRTdHIsTWF0aC5mbG9vcihwYWRsZW4vMikpO2RlZmF1bHQ6cGFkbGVuPWxlbmd0aC1zdHIubGVuZ3RoO3JldHVybiBzdHJSZXBlYXQocGFkU3RyLHBhZGxlbikrc3RyO319LGxwYWQ6ZnVuY3Rpb24oc3RyLGxlbmd0aCxwYWRTdHIpe3JldHVybiBfcy5wYWQoc3RyLGxlbmd0aCxwYWRTdHIpO30scnBhZDpmdW5jdGlvbihzdHIsbGVuZ3RoLHBhZFN0cil7cmV0dXJuIF9zLnBhZChzdHIsbGVuZ3RoLHBhZFN0ciwncmlnaHQnKTt9LGxycGFkOmZ1bmN0aW9uKHN0cixsZW5ndGgscGFkU3RyKXtyZXR1cm4gX3MucGFkKHN0cixsZW5ndGgscGFkU3RyLCdib3RoJyk7fSxzcHJpbnRmOnNwcmludGYsdnNwcmludGY6ZnVuY3Rpb24oZm10LGFyZ3Ype2FyZ3YudW5zaGlmdChmbXQpO3JldHVybiBzcHJpbnRmLmFwcGx5KG51bGwsYXJndik7fSx0b051bWJlcjpmdW5jdGlvbihzdHIsZGVjaW1hbHMpe2lmKCFzdHIpcmV0dXJuIDA7c3RyPV9zLnRyaW0oc3RyKTtpZighc3RyLm1hdGNoKC9eLT9cZCsoPzpcLlxkKyk/JC8pKXJldHVybiBOYU47cmV0dXJuIHBhcnNlTnVtYmVyKHBhcnNlTnVtYmVyKHN0cikudG9GaXhlZCh+fmRlY2ltYWxzKSk7fSxudW1iZXJGb3JtYXQ6ZnVuY3Rpb24obnVtYmVyLGRlYyxkc2VwLHRzZXApe2lmKGlzTmFOKG51bWJlcil8fG51bWJlcj09bnVsbClyZXR1cm4nJztudW1iZXI9bnVtYmVyLnRvRml4ZWQofn5kZWMpO3RzZXA9dHlwZW9mIHRzZXA9PSdzdHJpbmcnP3RzZXA6JywnO3ZhciBwYXJ0cz1udW1iZXIuc3BsaXQoJy4nKSxmbnVtcz1wYXJ0c1swXSxkZWNpbWFscz1wYXJ0c1sxXT8oZHNlcHx8Jy4nKStwYXJ0c1sxXTonJztyZXR1cm4gZm51bXMucmVwbGFjZSgvKFxkKSg/PSg/OlxkezN9KSskKS9nLCckMScrdHNlcCkrZGVjaW1hbHM7fSxzdHJSaWdodDpmdW5jdGlvbihzdHIsc2VwKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7c3RyPVN0cmluZyhzdHIpO3NlcD1zZXAhPW51bGw/U3RyaW5nKHNlcCk6c2VwO3ZhciBwb3M9IXNlcD8tMTpzdHIuaW5kZXhPZihzZXApO3JldHVybn5wb3M/c3RyLnNsaWNlKHBvcytzZXAubGVuZ3RoLHN0ci5sZW5ndGgpOnN0cjt9LHN0clJpZ2h0QmFjazpmdW5jdGlvbihzdHIsc2VwKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7c3RyPVN0cmluZyhzdHIpO3NlcD1zZXAhPW51bGw/U3RyaW5nKHNlcCk6c2VwO3ZhciBwb3M9IXNlcD8tMTpzdHIubGFzdEluZGV4T2Yoc2VwKTtyZXR1cm5+cG9zP3N0ci5zbGljZShwb3Mrc2VwLmxlbmd0aCxzdHIubGVuZ3RoKTpzdHI7fSxzdHJMZWZ0OmZ1bmN0aW9uKHN0cixzZXApe2lmKHN0cj09bnVsbClyZXR1cm4nJztzdHI9U3RyaW5nKHN0cik7c2VwPXNlcCE9bnVsbD9TdHJpbmcoc2VwKTpzZXA7dmFyIHBvcz0hc2VwPy0xOnN0ci5pbmRleE9mKHNlcCk7cmV0dXJufnBvcz9zdHIuc2xpY2UoMCxwb3MpOnN0cjt9LHN0ckxlZnRCYWNrOmZ1bmN0aW9uKHN0cixzZXApe2lmKHN0cj09bnVsbClyZXR1cm4nJztzdHIrPScnO3NlcD1zZXAhPW51bGw/Jycrc2VwOnNlcDt2YXIgcG9zPXN0ci5sYXN0SW5kZXhPZihzZXApO3JldHVybn5wb3M/c3RyLnNsaWNlKDAscG9zKTpzdHI7fSx0b1NlbnRlbmNlOmZ1bmN0aW9uKGFycmF5LHNlcGFyYXRvcixsYXN0U2VwYXJhdG9yLHNlcmlhbCl7c2VwYXJhdG9yPXNlcGFyYXRvcnx8JywgJztsYXN0U2VwYXJhdG9yPWxhc3RTZXBhcmF0b3J8fCcgYW5kICc7dmFyIGE9YXJyYXkuc2xpY2UoKSxsYXN0TWVtYmVyPWEucG9wKCk7aWYoYXJyYXkubGVuZ3RoPjImJnNlcmlhbClsYXN0U2VwYXJhdG9yPV9zLnJ0cmltKHNlcGFyYXRvcikrbGFzdFNlcGFyYXRvcjtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKHNlcGFyYXRvcikrbGFzdFNlcGFyYXRvcitsYXN0TWVtYmVyOmxhc3RNZW1iZXI7fSx0b1NlbnRlbmNlU2VyaWFsOmZ1bmN0aW9uKCl7dmFyIGFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMpO2FyZ3NbM109dHJ1ZTtyZXR1cm4gX3MudG9TZW50ZW5jZS5hcHBseShfcyxhcmdzKTt9LHNsdWdpZnk6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PW51bGwpcmV0dXJuJyc7dmFyIGZyb209IsSFw6DDocOkw6LDo8Olw6bEg8SHxJnDqMOpw6vDqsOsw63Dr8OuxYLFhMOyw7PDtsO0w7XDuMWbyJnIm8O5w7rDvMO7w7HDp8W8xboiLHRvPSJhYWFhYWFhYWFjZWVlZWVpaWlpbG5vb29vb29zc3R1dXV1bmN6eiIscmVnZXg9bmV3IFJlZ0V4cChkZWZhdWx0VG9XaGl0ZVNwYWNlKGZyb20pLCdnJyk7c3RyPVN0cmluZyhzdHIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZShyZWdleCxmdW5jdGlvbihjKXt2YXIgaW5kZXg9ZnJvbS5pbmRleE9mKGMpO3JldHVybiB0by5jaGFyQXQoaW5kZXgpfHwnLSc7fSk7cmV0dXJuIF9zLmRhc2hlcml6ZShzdHIucmVwbGFjZSgvW15cd1xzLV0vZywnJykpO30sc3Vycm91bmQ6ZnVuY3Rpb24oc3RyLHdyYXBwZXIpe3JldHVyblt3cmFwcGVyLHN0cix3cmFwcGVyXS5qb2luKCcnKTt9LHF1b3RlOmZ1bmN0aW9uKHN0cixxdW90ZUNoYXIpe3JldHVybiBfcy5zdXJyb3VuZChzdHIscXVvdGVDaGFyfHwnIicpO30sdW5xdW90ZTpmdW5jdGlvbihzdHIscXVvdGVDaGFyKXtxdW90ZUNoYXI9cXVvdGVDaGFyfHwnIic7aWYoc3RyWzBdPT09cXVvdGVDaGFyJiZzdHJbc3RyLmxlbmd0aC0xXT09PXF1b3RlQ2hhcikKcmV0dXJuIHN0ci5zbGljZSgxLHN0ci5sZW5ndGgtMSk7ZWxzZSByZXR1cm4gc3RyO30sZXhwb3J0czpmdW5jdGlvbigpe3ZhciByZXN1bHQ9e307Zm9yKHZhciBwcm9wIGluIHRoaXMpe2lmKCF0aGlzLmhhc093blByb3BlcnR5KHByb3ApfHxwcm9wLm1hdGNoKC9eKD86aW5jbHVkZXxjb250YWluc3xyZXZlcnNlKSQvKSljb250aW51ZTtyZXN1bHRbcHJvcF09dGhpc1twcm9wXTt9CnJldHVybiByZXN1bHQ7fSxyZXBlYXQ6ZnVuY3Rpb24oc3RyLHF0eSxzZXBhcmF0b3Ipe2lmKHN0cj09bnVsbClyZXR1cm4nJztxdHk9fn5xdHk7aWYoc2VwYXJhdG9yPT1udWxsKXJldHVybiBzdHJSZXBlYXQoU3RyaW5nKHN0cikscXR5KTtmb3IodmFyIHJlcGVhdD1bXTtxdHk+MDtyZXBlYXRbLS1xdHldPXN0cil7fQpyZXR1cm4gcmVwZWF0LmpvaW4oc2VwYXJhdG9yKTt9LG5hdHVyYWxDbXA6ZnVuY3Rpb24oc3RyMSxzdHIyKXtpZihzdHIxPT1zdHIyKXJldHVybiAwO2lmKCFzdHIxKXJldHVybi0xO2lmKCFzdHIyKXJldHVybiAxO3ZhciBjbXBSZWdleD0vKFwuXGQrKXwoXGQrKXwoXEQrKS9nLHRva2VuczE9U3RyaW5nKHN0cjEpLnRvTG93ZXJDYXNlKCkubWF0Y2goY21wUmVnZXgpLHRva2VuczI9U3RyaW5nKHN0cjIpLnRvTG93ZXJDYXNlKCkubWF0Y2goY21wUmVnZXgpLGNvdW50PU1hdGgubWluKHRva2VuczEubGVuZ3RoLHRva2VuczIubGVuZ3RoKTtmb3IodmFyIGk9MDtpPGNvdW50O2krKyl7dmFyIGE9dG9rZW5zMVtpXSxiPXRva2VuczJbaV07aWYoYSE9PWIpe3ZhciBudW0xPXBhcnNlSW50KGEsMTApO2lmKCFpc05hTihudW0xKSl7dmFyIG51bTI9cGFyc2VJbnQoYiwxMCk7aWYoIWlzTmFOKG51bTIpJiZudW0xLW51bTIpCnJldHVybiBudW0xLW51bTI7fQpyZXR1cm4gYTxiPy0xOjE7fX0KaWYodG9rZW5zMS5sZW5ndGg9PT10b2tlbnMyLmxlbmd0aCkKcmV0dXJuIHRva2VuczEubGVuZ3RoLXRva2VuczIubGVuZ3RoO3JldHVybiBzdHIxPHN0cjI/LTE6MTt9LGxldmVuc2h0ZWluOmZ1bmN0aW9uKHN0cjEsc3RyMil7aWYoc3RyMT09bnVsbCYmc3RyMj09bnVsbClyZXR1cm4gMDtpZihzdHIxPT1udWxsKXJldHVybiBTdHJpbmcoc3RyMikubGVuZ3RoO2lmKHN0cjI9PW51bGwpcmV0dXJuIFN0cmluZyhzdHIxKS5sZW5ndGg7c3RyMT1TdHJpbmcoc3RyMSk7c3RyMj1TdHJpbmcoc3RyMik7dmFyIGN1cnJlbnQ9W10scHJldix2YWx1ZTtmb3IodmFyIGk9MDtpPD1zdHIyLmxlbmd0aDtpKyspCmZvcih2YXIgaj0wO2o8PXN0cjEubGVuZ3RoO2orKyl7aWYoaSYmaikKaWYoc3RyMS5jaGFyQXQoai0xKT09PXN0cjIuY2hhckF0KGktMSkpCnZhbHVlPXByZXY7ZWxzZQp2YWx1ZT1NYXRoLm1pbihjdXJyZW50W2pdLGN1cnJlbnRbai0xXSxwcmV2KSsxO2Vsc2UKdmFsdWU9aStqO3ByZXY9Y3VycmVudFtqXTtjdXJyZW50W2pdPXZhbHVlO30KcmV0dXJuIGN1cnJlbnQucG9wKCk7fSx0b0Jvb2xlYW46ZnVuY3Rpb24oc3RyLHRydWVWYWx1ZXMsZmFsc2VWYWx1ZXMpe2lmKHR5cGVvZiBzdHI9PT0ibnVtYmVyIilzdHI9IiIrc3RyO2lmKHR5cGVvZiBzdHIhPT0ic3RyaW5nIilyZXR1cm4hIXN0cjtzdHI9X3MudHJpbShzdHIpO2lmKGJvb2xNYXRjaChzdHIsdHJ1ZVZhbHVlc3x8WyJ0cnVlIiwiMSJdKSlyZXR1cm4gdHJ1ZTtpZihib29sTWF0Y2goc3RyLGZhbHNlVmFsdWVzfHxbImZhbHNlIiwiMCJdKSlyZXR1cm4gZmFsc2U7fX07X3Muc3RyaXA9X3MudHJpbTtfcy5sc3RyaXA9X3MubHRyaW07X3MucnN0cmlwPV9zLnJ0cmltO19zLmNlbnRlcj1fcy5scnBhZDtfcy5yanVzdD1fcy5scGFkO19zLmxqdXN0PV9zLnJwYWQ7X3MuY29udGFpbnM9X3MuaW5jbHVkZTtfcy5xPV9zLnF1b3RlO19zLnRvQm9vbD1fcy50b0Jvb2xlYW47aWYodHlwZW9mIGV4cG9ydHMhPT0ndW5kZWZpbmVkJyl7aWYodHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnJiZtb2R1bGUuZXhwb3J0cykKbW9kdWxlLmV4cG9ydHM9X3M7ZXhwb3J0cy5fcz1fczt9CmlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKQpkZWZpbmUoJ3VuZGVyc2NvcmUuc3RyaW5nJyxbXSxmdW5jdGlvbigpe3JldHVybiBfczt9KTtyb290Ll89cm9vdC5ffHx7fTtyb290Ll8uc3RyaW5nPXJvb3QuXy5zdHI9X3M7fSh0aGlzLFN0cmluZyk7OwoKLyogL3dlYi9zdGF0aWMvbGliL21vbWVudC9tb21lbnQuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwo7KGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeSgpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShmYWN0b3J5KTpnbG9iYWwubW9tZW50PWZhY3RvcnkoKX0odGhpcywoZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7dmFyIGhvb2tDYWxsYmFjaztmdW5jdGlvbiBob29rcygpe3JldHVybiBob29rQ2FsbGJhY2suYXBwbHkobnVsbCxhcmd1bWVudHMpO30KZnVuY3Rpb24gc2V0SG9va0NhbGxiYWNrKGNhbGxiYWNrKXtob29rQ2FsbGJhY2s9Y2FsbGJhY2s7fQpmdW5jdGlvbiBpc0FycmF5KGlucHV0KXtyZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBBcnJheXx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KT09PSdbb2JqZWN0IEFycmF5XSc7fQpmdW5jdGlvbiBpc09iamVjdChpbnB1dCl7cmV0dXJuIGlucHV0IT1udWxsJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpPT09J1tvYmplY3QgT2JqZWN0XSc7fQpmdW5jdGlvbiBpc09iamVjdEVtcHR5KG9iail7dmFyIGs7Zm9yKGsgaW4gb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9CmZ1bmN0aW9uIGlzTnVtYmVyKGlucHV0KXtyZXR1cm4gdHlwZW9mIGlucHV0PT09J251bWJlcid8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCk9PT0nW29iamVjdCBOdW1iZXJdJzt9CmZ1bmN0aW9uIGlzRGF0ZShpbnB1dCl7cmV0dXJuIGlucHV0IGluc3RhbmNlb2YgRGF0ZXx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KT09PSdbb2JqZWN0IERhdGVdJzt9CmZ1bmN0aW9uIG1hcChhcnIsZm4pe3ZhciByZXM9W10saTtmb3IoaT0wO2k8YXJyLmxlbmd0aDsrK2kpe3Jlcy5wdXNoKGZuKGFycltpXSxpKSk7fQpyZXR1cm4gcmVzO30KZnVuY3Rpb24gaGFzT3duUHJvcChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKTt9CmZ1bmN0aW9uIGV4dGVuZChhLGIpe2Zvcih2YXIgaSBpbiBiKXtpZihoYXNPd25Qcm9wKGIsaSkpe2FbaV09YltpXTt9fQppZihoYXNPd25Qcm9wKGIsJ3RvU3RyaW5nJykpe2EudG9TdHJpbmc9Yi50b1N0cmluZzt9CmlmKGhhc093blByb3AoYiwndmFsdWVPZicpKXthLnZhbHVlT2Y9Yi52YWx1ZU9mO30KcmV0dXJuIGE7fQpmdW5jdGlvbiBjcmVhdGVVVEMoaW5wdXQsZm9ybWF0LGxvY2FsZSxzdHJpY3Qpe3JldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0LHRydWUpLnV0YygpO30KZnVuY3Rpb24gZGVmYXVsdFBhcnNpbmdGbGFncygpe3JldHVybntlbXB0eTpmYWxzZSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDpmYWxzZSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OmZhbHNlLHVzZXJJbnZhbGlkYXRlZDpmYWxzZSxpc286ZmFsc2UscGFyc2VkRGF0ZVBhcnRzOltdLG1lcmlkaWVtOm51bGx9O30KZnVuY3Rpb24gZ2V0UGFyc2luZ0ZsYWdzKG0pe2lmKG0uX3BmPT1udWxsKXttLl9wZj1kZWZhdWx0UGFyc2luZ0ZsYWdzKCk7fQpyZXR1cm4gbS5fcGY7fQp2YXIgc29tZTtpZihBcnJheS5wcm90b3R5cGUuc29tZSl7c29tZT1BcnJheS5wcm90b3R5cGUuc29tZTt9ZWxzZXtzb21lPWZ1bmN0aW9uKGZ1bil7dmFyIHQ9T2JqZWN0KHRoaXMpO3ZhciBsZW49dC5sZW5ndGg+Pj4wO2Zvcih2YXIgaT0wO2k8bGVuO2krKyl7aWYoaSBpbiB0JiZmdW4uY2FsbCh0aGlzLHRbaV0saSx0KSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO307fQp2YXIgc29tZSQxPXNvbWU7ZnVuY3Rpb24gaXNWYWxpZChtKXtpZihtLl9pc1ZhbGlkPT1udWxsKXt2YXIgZmxhZ3M9Z2V0UGFyc2luZ0ZsYWdzKG0pO3ZhciBwYXJzZWRQYXJ0cz1zb21lJDEuY2FsbChmbGFncy5wYXJzZWREYXRlUGFydHMsZnVuY3Rpb24oaSl7cmV0dXJuIGkhPW51bGw7fSk7dmFyIGlzTm93VmFsaWQ9IWlzTmFOKG0uX2QuZ2V0VGltZSgpKSYmZmxhZ3Mub3ZlcmZsb3c8MCYmIWZsYWdzLmVtcHR5JiYhZmxhZ3MuaW52YWxpZE1vbnRoJiYhZmxhZ3MuaW52YWxpZFdlZWtkYXkmJiFmbGFncy5udWxsSW5wdXQmJiFmbGFncy5pbnZhbGlkRm9ybWF0JiYhZmxhZ3MudXNlckludmFsaWRhdGVkJiYoIWZsYWdzLm1lcmlkaWVtfHwoZmxhZ3MubWVyaWRpZW0mJnBhcnNlZFBhcnRzKSk7aWYobS5fc3RyaWN0KXtpc05vd1ZhbGlkPWlzTm93VmFsaWQmJmZsYWdzLmNoYXJzTGVmdE92ZXI9PT0wJiZmbGFncy51bnVzZWRUb2tlbnMubGVuZ3RoPT09MCYmZmxhZ3MuYmlnSG91cj09PXVuZGVmaW5lZDt9CmlmKE9iamVjdC5pc0Zyb3plbj09bnVsbHx8IU9iamVjdC5pc0Zyb3plbihtKSl7bS5faXNWYWxpZD1pc05vd1ZhbGlkO30KZWxzZXtyZXR1cm4gaXNOb3dWYWxpZDt9fQpyZXR1cm4gbS5faXNWYWxpZDt9CmZ1bmN0aW9uIGNyZWF0ZUludmFsaWQoZmxhZ3Mpe3ZhciBtPWNyZWF0ZVVUQyhOYU4pO2lmKGZsYWdzIT1udWxsKXtleHRlbmQoZ2V0UGFyc2luZ0ZsYWdzKG0pLGZsYWdzKTt9CmVsc2V7Z2V0UGFyc2luZ0ZsYWdzKG0pLnVzZXJJbnZhbGlkYXRlZD10cnVlO30KcmV0dXJuIG07fQpmdW5jdGlvbiBpc1VuZGVmaW5lZChpbnB1dCl7cmV0dXJuIGlucHV0PT09dm9pZCAwO30KdmFyIG1vbWVudFByb3BlcnRpZXM9aG9va3MubW9tZW50UHJvcGVydGllcz1bXTtmdW5jdGlvbiBjb3B5Q29uZmlnKHRvLGZyb20pe3ZhciBpLHByb3AsdmFsO2lmKCFpc1VuZGVmaW5lZChmcm9tLl9pc0FNb21lbnRPYmplY3QpKXt0by5faXNBTW9tZW50T2JqZWN0PWZyb20uX2lzQU1vbWVudE9iamVjdDt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9pKSl7dG8uX2k9ZnJvbS5faTt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9mKSl7dG8uX2Y9ZnJvbS5fZjt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9sKSl7dG8uX2w9ZnJvbS5fbDt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9zdHJpY3QpKXt0by5fc3RyaWN0PWZyb20uX3N0cmljdDt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl90em0pKXt0by5fdHptPWZyb20uX3R6bTt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9pc1VUQykpe3RvLl9pc1VUQz1mcm9tLl9pc1VUQzt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9vZmZzZXQpKXt0by5fb2Zmc2V0PWZyb20uX29mZnNldDt9CmlmKCFpc1VuZGVmaW5lZChmcm9tLl9wZikpe3RvLl9wZj1nZXRQYXJzaW5nRmxhZ3MoZnJvbSk7fQppZighaXNVbmRlZmluZWQoZnJvbS5fbG9jYWxlKSl7dG8uX2xvY2FsZT1mcm9tLl9sb2NhbGU7fQppZihtb21lbnRQcm9wZXJ0aWVzLmxlbmd0aD4wKXtmb3IoaSBpbiBtb21lbnRQcm9wZXJ0aWVzKXtwcm9wPW1vbWVudFByb3BlcnRpZXNbaV07dmFsPWZyb21bcHJvcF07aWYoIWlzVW5kZWZpbmVkKHZhbCkpe3RvW3Byb3BdPXZhbDt9fX0KcmV0dXJuIHRvO30KdmFyIHVwZGF0ZUluUHJvZ3Jlc3M9ZmFsc2U7ZnVuY3Rpb24gTW9tZW50KGNvbmZpZyl7Y29weUNvbmZpZyh0aGlzLGNvbmZpZyk7dGhpcy5fZD1uZXcgRGF0ZShjb25maWcuX2QhPW51bGw/Y29uZmlnLl9kLmdldFRpbWUoKTpOYU4pO2lmKCF0aGlzLmlzVmFsaWQoKSl7dGhpcy5fZD1uZXcgRGF0ZShOYU4pO30KaWYodXBkYXRlSW5Qcm9ncmVzcz09PWZhbHNlKXt1cGRhdGVJblByb2dyZXNzPXRydWU7aG9va3MudXBkYXRlT2Zmc2V0KHRoaXMpO3VwZGF0ZUluUHJvZ3Jlc3M9ZmFsc2U7fX0KZnVuY3Rpb24gaXNNb21lbnQob2JqKXtyZXR1cm4gb2JqIGluc3RhbmNlb2YgTW9tZW50fHwob2JqIT1udWxsJiZvYmouX2lzQU1vbWVudE9iamVjdCE9bnVsbCk7fQpmdW5jdGlvbiBhYnNGbG9vcihudW1iZXIpe2lmKG51bWJlcjwwKXtyZXR1cm4gTWF0aC5jZWlsKG51bWJlcil8fDA7fWVsc2V7cmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTt9fQpmdW5jdGlvbiB0b0ludChhcmd1bWVudEZvckNvZXJjaW9uKXt2YXIgY29lcmNlZE51bWJlcj0rYXJndW1lbnRGb3JDb2VyY2lvbix2YWx1ZT0wO2lmKGNvZXJjZWROdW1iZXIhPT0wJiZpc0Zpbml0ZShjb2VyY2VkTnVtYmVyKSl7dmFsdWU9YWJzRmxvb3IoY29lcmNlZE51bWJlcik7fQpyZXR1cm4gdmFsdWU7fQpmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycmF5MSxhcnJheTIsZG9udENvbnZlcnQpe3ZhciBsZW49TWF0aC5taW4oYXJyYXkxLmxlbmd0aCxhcnJheTIubGVuZ3RoKSxsZW5ndGhEaWZmPU1hdGguYWJzKGFycmF5MS5sZW5ndGgtYXJyYXkyLmxlbmd0aCksZGlmZnM9MCxpO2ZvcihpPTA7aTxsZW47aSsrKXtpZigoZG9udENvbnZlcnQmJmFycmF5MVtpXSE9PWFycmF5MltpXSl8fCghZG9udENvbnZlcnQmJnRvSW50KGFycmF5MVtpXSkhPT10b0ludChhcnJheTJbaV0pKSl7ZGlmZnMrKzt9fQpyZXR1cm4gZGlmZnMrbGVuZ3RoRGlmZjt9CmZ1bmN0aW9uIHdhcm4obXNnKXtpZihob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9PT1mYWxzZSYmKHR5cGVvZiBjb25zb2xlIT09J3VuZGVmaW5lZCcpJiZjb25zb2xlLndhcm4pe2NvbnNvbGUud2FybignRGVwcmVjYXRpb24gd2FybmluZzogJyttc2cpO319CmZ1bmN0aW9uIGRlcHJlY2F0ZShtc2csZm4pe3ZhciBmaXJzdFRpbWU9dHJ1ZTtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCl7aWYoaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyIT1udWxsKXtob29rcy5kZXByZWNhdGlvbkhhbmRsZXIobnVsbCxtc2cpO30KaWYoZmlyc3RUaW1lKXt2YXIgYXJncz1bXTt2YXIgYXJnO2Zvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2FyZz0nJztpZih0eXBlb2YgYXJndW1lbnRzW2ldPT09J29iamVjdCcpe2FyZys9J1xuWycraSsnXSAnO2Zvcih2YXIga2V5IGluIGFyZ3VtZW50c1swXSl7YXJnKz1rZXkrJzogJythcmd1bWVudHNbMF1ba2V5XSsnLCAnO30KYXJnPWFyZy5zbGljZSgwLC0yKTt9ZWxzZXthcmc9YXJndW1lbnRzW2ldO30KYXJncy5wdXNoKGFyZyk7fQp3YXJuKG1zZysnXG5Bcmd1bWVudHM6ICcrQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykuam9pbignJykrJ1xuJysobmV3IEVycm9yKCkpLnN0YWNrKTtmaXJzdFRpbWU9ZmFsc2U7fQpyZXR1cm4gZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO30sZm4pO30KdmFyIGRlcHJlY2F0aW9ucz17fTtmdW5jdGlvbiBkZXByZWNhdGVTaW1wbGUobmFtZSxtc2cpe2lmKGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciE9bnVsbCl7aG9va3MuZGVwcmVjYXRpb25IYW5kbGVyKG5hbWUsbXNnKTt9CmlmKCFkZXByZWNhdGlvbnNbbmFtZV0pe3dhcm4obXNnKTtkZXByZWNhdGlvbnNbbmFtZV09dHJ1ZTt9fQpob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9ZmFsc2U7aG9va3MuZGVwcmVjYXRpb25IYW5kbGVyPW51bGw7ZnVuY3Rpb24gaXNGdW5jdGlvbihpbnB1dCl7cmV0dXJuIGlucHV0IGluc3RhbmNlb2YgRnVuY3Rpb258fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCk9PT0nW29iamVjdCBGdW5jdGlvbl0nO30KZnVuY3Rpb24gc2V0KGNvbmZpZyl7dmFyIHByb3AsaTtmb3IoaSBpbiBjb25maWcpe3Byb3A9Y29uZmlnW2ldO2lmKGlzRnVuY3Rpb24ocHJvcCkpe3RoaXNbaV09cHJvcDt9ZWxzZXt0aGlzWydfJytpXT1wcm9wO319CnRoaXMuX2NvbmZpZz1jb25maWc7dGhpcy5fb3JkaW5hbFBhcnNlTGVuaWVudD1uZXcgUmVnRXhwKHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UrJ3wnKygvXGR7MSwyfS8pLnNvdXJjZSk7fQpmdW5jdGlvbiBtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLGNoaWxkQ29uZmlnKXt2YXIgcmVzPWV4dGVuZCh7fSxwYXJlbnRDb25maWcpLHByb3A7Zm9yKHByb3AgaW4gY2hpbGRDb25maWcpe2lmKGhhc093blByb3AoY2hpbGRDb25maWcscHJvcCkpe2lmKGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkmJmlzT2JqZWN0KGNoaWxkQ29uZmlnW3Byb3BdKSl7cmVzW3Byb3BdPXt9O2V4dGVuZChyZXNbcHJvcF0scGFyZW50Q29uZmlnW3Byb3BdKTtleHRlbmQocmVzW3Byb3BdLGNoaWxkQ29uZmlnW3Byb3BdKTt9ZWxzZSBpZihjaGlsZENvbmZpZ1twcm9wXSE9bnVsbCl7cmVzW3Byb3BdPWNoaWxkQ29uZmlnW3Byb3BdO31lbHNle2RlbGV0ZSByZXNbcHJvcF07fX19CmZvcihwcm9wIGluIHBhcmVudENvbmZpZyl7aWYoaGFzT3duUHJvcChwYXJlbnRDb25maWcscHJvcCkmJiFoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLHByb3ApJiZpc09iamVjdChwYXJlbnRDb25maWdbcHJvcF0pKXtyZXNbcHJvcF09ZXh0ZW5kKHt9LHJlc1twcm9wXSk7fX0KcmV0dXJuIHJlczt9CmZ1bmN0aW9uIExvY2FsZShjb25maWcpe2lmKGNvbmZpZyE9bnVsbCl7dGhpcy5zZXQoY29uZmlnKTt9fQp2YXIga2V5cztpZihPYmplY3Qua2V5cyl7a2V5cz1PYmplY3Qua2V5czt9ZWxzZXtrZXlzPWZ1bmN0aW9uKG9iail7dmFyIGkscmVzPVtdO2ZvcihpIGluIG9iail7aWYoaGFzT3duUHJvcChvYmosaSkpe3Jlcy5wdXNoKGkpO319CnJldHVybiByZXM7fTt9CnZhciBrZXlzJDE9a2V5czt2YXIgZGVmYXVsdENhbGVuZGFyPXtzYW1lRGF5OidbVG9kYXkgYXRdIExUJyxuZXh0RGF5OidbVG9tb3Jyb3cgYXRdIExUJyxuZXh0V2VlazonZGRkZCBbYXRdIExUJyxsYXN0RGF5OidbWWVzdGVyZGF5IGF0XSBMVCcsbGFzdFdlZWs6J1tMYXN0XSBkZGRkIFthdF0gTFQnLHNhbWVFbHNlOidMJ307ZnVuY3Rpb24gY2FsZW5kYXIoa2V5LG1vbSxub3cpe3ZhciBvdXRwdXQ9dGhpcy5fY2FsZW5kYXJba2V5XXx8dGhpcy5fY2FsZW5kYXJbJ3NhbWVFbHNlJ107cmV0dXJuIGlzRnVuY3Rpb24ob3V0cHV0KT9vdXRwdXQuY2FsbChtb20sbm93KTpvdXRwdXQ7fQp2YXIgZGVmYXVsdExvbmdEYXRlRm9ybWF0PXtMVFM6J2g6bW06c3MgQScsTFQ6J2g6bW0gQScsTDonTU0vREQvWVlZWScsTEw6J01NTU0gRCwgWVlZWScsTExMOidNTU1NIEQsIFlZWVkgaDptbSBBJyxMTExMOidkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBJ307ZnVuY3Rpb24gbG9uZ0RhdGVGb3JtYXQoa2V5KXt2YXIgZm9ybWF0PXRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0sZm9ybWF0VXBwZXI9dGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5LnRvVXBwZXJDYXNlKCldO2lmKGZvcm1hdHx8IWZvcm1hdFVwcGVyKXtyZXR1cm4gZm9ybWF0O30KdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XT1mb3JtYXRVcHBlci5yZXBsYWNlKC9NTU1NfE1NfEREfGRkZGQvZyxmdW5jdGlvbih2YWwpe3JldHVybiB2YWwuc2xpY2UoMSk7fSk7cmV0dXJuIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV07fQp2YXIgZGVmYXVsdEludmFsaWREYXRlPSdJbnZhbGlkIGRhdGUnO2Z1bmN0aW9uIGludmFsaWREYXRlKCl7cmV0dXJuIHRoaXMuX2ludmFsaWREYXRlO30KdmFyIGRlZmF1bHRPcmRpbmFsPSclZCc7dmFyIGRlZmF1bHRPcmRpbmFsUGFyc2U9L1xkezEsMn0vO2Z1bmN0aW9uIG9yZGluYWwobnVtYmVyKXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKCclZCcsbnVtYmVyKTt9CnZhciBkZWZhdWx0UmVsYXRpdmVUaW1lPXtmdXR1cmU6J2luICVzJyxwYXN0OiclcyBhZ28nLHM6J2EgZmV3IHNlY29uZHMnLG06J2EgbWludXRlJyxtbTonJWQgbWludXRlcycsaDonYW4gaG91cicsaGg6JyVkIGhvdXJzJyxkOidhIGRheScsZGQ6JyVkIGRheXMnLE06J2EgbW9udGgnLE1NOiclZCBtb250aHMnLHk6J2EgeWVhcicseXk6JyVkIHllYXJzJ307ZnVuY3Rpb24gcmVsYXRpdmVUaW1lKG51bWJlcix3aXRob3V0U3VmZml4LHN0cmluZyxpc0Z1dHVyZSl7dmFyIG91dHB1dD10aGlzLl9yZWxhdGl2ZVRpbWVbc3RyaW5nXTtyZXR1cm4oaXNGdW5jdGlvbihvdXRwdXQpKT9vdXRwdXQobnVtYmVyLHdpdGhvdXRTdWZmaXgsc3RyaW5nLGlzRnV0dXJlKTpvdXRwdXQucmVwbGFjZSgvJWQvaSxudW1iZXIpO30KZnVuY3Rpb24gcGFzdEZ1dHVyZShkaWZmLG91dHB1dCl7dmFyIGZvcm1hdD10aGlzLl9yZWxhdGl2ZVRpbWVbZGlmZj4wPydmdXR1cmUnOidwYXN0J107cmV0dXJuIGlzRnVuY3Rpb24oZm9ybWF0KT9mb3JtYXQob3V0cHV0KTpmb3JtYXQucmVwbGFjZSgvJXMvaSxvdXRwdXQpO30KdmFyIGFsaWFzZXM9e307ZnVuY3Rpb24gYWRkVW5pdEFsaWFzKHVuaXQsc2hvcnRoYW5kKXt2YXIgbG93ZXJDYXNlPXVuaXQudG9Mb3dlckNhc2UoKTthbGlhc2VzW2xvd2VyQ2FzZV09YWxpYXNlc1tsb3dlckNhc2UrJ3MnXT1hbGlhc2VzW3Nob3J0aGFuZF09dW5pdDt9CmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXRzKHVuaXRzKXtyZXR1cm4gdHlwZW9mIHVuaXRzPT09J3N0cmluZyc/YWxpYXNlc1t1bml0c118fGFsaWFzZXNbdW5pdHMudG9Mb3dlckNhc2UoKV06dW5kZWZpbmVkO30KZnVuY3Rpb24gbm9ybWFsaXplT2JqZWN0VW5pdHMoaW5wdXRPYmplY3Qpe3ZhciBub3JtYWxpemVkSW5wdXQ9e30sbm9ybWFsaXplZFByb3AscHJvcDtmb3IocHJvcCBpbiBpbnB1dE9iamVjdCl7aWYoaGFzT3duUHJvcChpbnB1dE9iamVjdCxwcm9wKSl7bm9ybWFsaXplZFByb3A9bm9ybWFsaXplVW5pdHMocHJvcCk7aWYobm9ybWFsaXplZFByb3Ape25vcm1hbGl6ZWRJbnB1dFtub3JtYWxpemVkUHJvcF09aW5wdXRPYmplY3RbcHJvcF07fX19CnJldHVybiBub3JtYWxpemVkSW5wdXQ7fQp2YXIgcHJpb3JpdGllcz17fTtmdW5jdGlvbiBhZGRVbml0UHJpb3JpdHkodW5pdCxwcmlvcml0eSl7cHJpb3JpdGllc1t1bml0XT1wcmlvcml0eTt9CmZ1bmN0aW9uIGdldFByaW9yaXRpemVkVW5pdHModW5pdHNPYmope3ZhciB1bml0cz1bXTtmb3IodmFyIHUgaW4gdW5pdHNPYmope3VuaXRzLnB1c2goe3VuaXQ6dSxwcmlvcml0eTpwcmlvcml0aWVzW3VdfSk7fQp1bml0cy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucHJpb3JpdHktYi5wcmlvcml0eTt9KTtyZXR1cm4gdW5pdHM7fQpmdW5jdGlvbiBtYWtlR2V0U2V0KHVuaXQsa2VlcFRpbWUpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7aWYodmFsdWUhPW51bGwpe3NldCQxKHRoaXMsdW5pdCx2YWx1ZSk7aG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsa2VlcFRpbWUpO3JldHVybiB0aGlzO31lbHNle3JldHVybiBnZXQodGhpcyx1bml0KTt9fTt9CmZ1bmN0aW9uIGdldChtb20sdW5pdCl7cmV0dXJuIG1vbS5pc1ZhbGlkKCk/bW9tLl9kWydnZXQnKyhtb20uX2lzVVRDPydVVEMnOicnKSt1bml0XSgpOk5hTjt9CmZ1bmN0aW9uIHNldCQxKG1vbSx1bml0LHZhbHVlKXtpZihtb20uaXNWYWxpZCgpKXttb20uX2RbJ3NldCcrKG1vbS5faXNVVEM/J1VUQyc6JycpK3VuaXRdKHZhbHVlKTt9fQpmdW5jdGlvbiBzdHJpbmdHZXQodW5pdHMpe3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtpZihpc0Z1bmN0aW9uKHRoaXNbdW5pdHNdKSl7cmV0dXJuIHRoaXNbdW5pdHNdKCk7fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIHN0cmluZ1NldCh1bml0cyx2YWx1ZSl7aWYodHlwZW9mIHVuaXRzPT09J29iamVjdCcpe3VuaXRzPW5vcm1hbGl6ZU9iamVjdFVuaXRzKHVuaXRzKTt2YXIgcHJpb3JpdGl6ZWQ9Z2V0UHJpb3JpdGl6ZWRVbml0cyh1bml0cyk7Zm9yKHZhciBpPTA7aTxwcmlvcml0aXplZC5sZW5ndGg7aSsrKXt0aGlzW3ByaW9yaXRpemVkW2ldLnVuaXRdKHVuaXRzW3ByaW9yaXRpemVkW2ldLnVuaXRdKTt9fWVsc2V7dW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpO2lmKGlzRnVuY3Rpb24odGhpc1t1bml0c10pKXtyZXR1cm4gdGhpc1t1bml0c10odmFsdWUpO319CnJldHVybiB0aGlzO30KZnVuY3Rpb24gemVyb0ZpbGwobnVtYmVyLHRhcmdldExlbmd0aCxmb3JjZVNpZ24pe3ZhciBhYnNOdW1iZXI9JycrTWF0aC5hYnMobnVtYmVyKSx6ZXJvc1RvRmlsbD10YXJnZXRMZW5ndGgtYWJzTnVtYmVyLmxlbmd0aCxzaWduPW51bWJlcj49MDtyZXR1cm4oc2lnbj8oZm9yY2VTaWduPycrJzonJyk6Jy0nKSsKTWF0aC5wb3coMTAsTWF0aC5tYXgoMCx6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpK2Fic051bWJlcjt9CnZhciBmb3JtYXR0aW5nVG9rZW5zPS8oXFtbXlxbXSpcXSl8KFxcKT8oW0hoXW1tKHNzKT98TW98TU0/TT9NP3xEb3xERERvfEREP0Q/RD98ZGRkP2Q/fGRvP3x3W298d10/fFdbb3xXXT98UW8/fFlZWVlZWXxZWVlZWXxZWVlZfFlZfGdnKGdnZz8pP3xHRyhHR0c/KT98ZXxFfGF8QXxoaD98SEg/fGtrP3xtbT98c3M/fFN7MSw5fXx4fFh8eno/fFpaP3wuKS9nO3ZhciBsb2NhbEZvcm1hdHRpbmdUb2tlbnM9LyhcW1teXFtdKlxdKXwoXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2c7dmFyIGZvcm1hdEZ1bmN0aW9ucz17fTt2YXIgZm9ybWF0VG9rZW5GdW5jdGlvbnM9e307ZnVuY3Rpb24gYWRkRm9ybWF0VG9rZW4odG9rZW4scGFkZGVkLG9yZGluYWwsY2FsbGJhY2spe3ZhciBmdW5jPWNhbGxiYWNrO2lmKHR5cGVvZiBjYWxsYmFjaz09PSdzdHJpbmcnKXtmdW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbY2FsbGJhY2tdKCk7fTt9CmlmKHRva2VuKXtmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl09ZnVuYzt9CmlmKHBhZGRlZCl7Zm9ybWF0VG9rZW5GdW5jdGlvbnNbcGFkZGVkWzBdXT1mdW5jdGlvbigpe3JldHVybiB6ZXJvRmlsbChmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxwYWRkZWRbMV0scGFkZGVkWzJdKTt9O30KaWYob3JkaW5hbCl7Zm9ybWF0VG9rZW5GdW5jdGlvbnNbb3JkaW5hbF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkub3JkaW5hbChmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0b2tlbik7fTt9fQpmdW5jdGlvbiByZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGlucHV0KXtpZihpbnB1dC5tYXRjaCgvXFtbXHNcU10vKSl7cmV0dXJuIGlucHV0LnJlcGxhY2UoL15cW3xcXSQvZywnJyk7fQpyZXR1cm4gaW5wdXQucmVwbGFjZSgvXFwvZywnJyk7fQpmdW5jdGlvbiBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KXt2YXIgYXJyYXk9Zm9ybWF0Lm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpLGksbGVuZ3RoO2ZvcihpPTAsbGVuZ3RoPWFycmF5Lmxlbmd0aDtpPGxlbmd0aDtpKyspe2lmKGZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXSl7YXJyYXlbaV09Zm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dO31lbHNle2FycmF5W2ldPXJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoYXJyYXlbaV0pO319CnJldHVybiBmdW5jdGlvbihtb20pe3ZhciBvdXRwdXQ9JycsaTtmb3IoaT0wO2k8bGVuZ3RoO2krKyl7b3V0cHV0Kz1hcnJheVtpXWluc3RhbmNlb2YgRnVuY3Rpb24/YXJyYXlbaV0uY2FsbChtb20sZm9ybWF0KTphcnJheVtpXTt9CnJldHVybiBvdXRwdXQ7fTt9CmZ1bmN0aW9uIGZvcm1hdE1vbWVudChtLGZvcm1hdCl7aWYoIW0uaXNWYWxpZCgpKXtyZXR1cm4gbS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTt9CmZvcm1hdD1leHBhbmRGb3JtYXQoZm9ybWF0LG0ubG9jYWxlRGF0YSgpKTtmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XT1mb3JtYXRGdW5jdGlvbnNbZm9ybWF0XXx8bWFrZUZvcm1hdEZ1bmN0aW9uKGZvcm1hdCk7cmV0dXJuIGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdKG0pO30KZnVuY3Rpb24gZXhwYW5kRm9ybWF0KGZvcm1hdCxsb2NhbGUpe3ZhciBpPTU7ZnVuY3Rpb24gcmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKGlucHV0KXtyZXR1cm4gbG9jYWxlLmxvbmdEYXRlRm9ybWF0KGlucHV0KXx8aW5wdXQ7fQpsb2NhbEZvcm1hdHRpbmdUb2tlbnMubGFzdEluZGV4PTA7d2hpbGUoaT49MCYmbG9jYWxGb3JtYXR0aW5nVG9rZW5zLnRlc3QoZm9ybWF0KSl7Zm9ybWF0PWZvcm1hdC5yZXBsYWNlKGxvY2FsRm9ybWF0dGluZ1Rva2VucyxyZXBsYWNlTG9uZ0RhdGVGb3JtYXRUb2tlbnMpO2xvY2FsRm9ybWF0dGluZ1Rva2Vucy5sYXN0SW5kZXg9MDtpLT0xO30KcmV0dXJuIGZvcm1hdDt9CnZhciBtYXRjaDE9L1xkLzt2YXIgbWF0Y2gyPS9cZFxkLzt2YXIgbWF0Y2gzPS9cZHszfS87dmFyIG1hdGNoND0vXGR7NH0vO3ZhciBtYXRjaDY9L1srLV0/XGR7Nn0vO3ZhciBtYXRjaDF0bzI9L1xkXGQ/Lzt2YXIgbWF0Y2gzdG80PS9cZFxkXGRcZD8vO3ZhciBtYXRjaDV0bzY9L1xkXGRcZFxkXGRcZD8vO3ZhciBtYXRjaDF0bzM9L1xkezEsM30vO3ZhciBtYXRjaDF0bzQ9L1xkezEsNH0vO3ZhciBtYXRjaDF0bzY9L1srLV0/XGR7MSw2fS87dmFyIG1hdGNoVW5zaWduZWQ9L1xkKy87dmFyIG1hdGNoU2lnbmVkPS9bKy1dP1xkKy87dmFyIG1hdGNoT2Zmc2V0PS9afFsrLV1cZFxkOj9cZFxkL2dpO3ZhciBtYXRjaFNob3J0T2Zmc2V0PS9afFsrLV1cZFxkKD86Oj9cZFxkKT8vZ2k7dmFyIG1hdGNoVGltZXN0YW1wPS9bKy1dP1xkKyhcLlxkezEsM30pPy87dmFyIG1hdGNoV29yZD0vWzAtOV0qWydhLXpcdTAwQTAtXHUwNUZGXHUwNzAwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSt8W1x1MDYwMC1cdTA2RkZcL10rKFxzKj9bXHUwNjAwLVx1MDZGRl0rKXsxLDJ9L2k7dmFyIHJlZ2V4ZXM9e307ZnVuY3Rpb24gYWRkUmVnZXhUb2tlbih0b2tlbixyZWdleCxzdHJpY3RSZWdleCl7cmVnZXhlc1t0b2tlbl09aXNGdW5jdGlvbihyZWdleCk/cmVnZXg6ZnVuY3Rpb24oaXNTdHJpY3QsbG9jYWxlRGF0YSl7cmV0dXJuKGlzU3RyaWN0JiZzdHJpY3RSZWdleCk/c3RyaWN0UmVnZXg6cmVnZXg7fTt9CmZ1bmN0aW9uIGdldFBhcnNlUmVnZXhGb3JUb2tlbih0b2tlbixjb25maWcpe2lmKCFoYXNPd25Qcm9wKHJlZ2V4ZXMsdG9rZW4pKXtyZXR1cm4gbmV3IFJlZ0V4cCh1bmVzY2FwZUZvcm1hdCh0b2tlbikpO30KcmV0dXJuIHJlZ2V4ZXNbdG9rZW5dKGNvbmZpZy5fc3RyaWN0LGNvbmZpZy5fbG9jYWxlKTt9CmZ1bmN0aW9uIHVuZXNjYXBlRm9ybWF0KHMpe3JldHVybiByZWdleEVzY2FwZShzLnJlcGxhY2UoJ1xcJywnJykucmVwbGFjZSgvXFwoXFspfFxcKFxdKXxcWyhbXlxdXFtdKilcXXxcXCguKS9nLGZ1bmN0aW9uKG1hdGNoZWQscDEscDIscDMscDQpe3JldHVybiBwMXx8cDJ8fHAzfHxwNDt9KSk7fQpmdW5jdGlvbiByZWdleEVzY2FwZShzKXtyZXR1cm4gcy5yZXBsYWNlKC9bLVwvXFxeJCorPy4oKXxbXF17fV0vZywnXFwkJicpO30KdmFyIHRva2Vucz17fTtmdW5jdGlvbiBhZGRQYXJzZVRva2VuKHRva2VuLGNhbGxiYWNrKXt2YXIgaSxmdW5jPWNhbGxiYWNrO2lmKHR5cGVvZiB0b2tlbj09PSdzdHJpbmcnKXt0b2tlbj1bdG9rZW5dO30KaWYoaXNOdW1iZXIoY2FsbGJhY2spKXtmdW5jPWZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtjYWxsYmFja109dG9JbnQoaW5wdXQpO307fQpmb3IoaT0wO2k8dG9rZW4ubGVuZ3RoO2krKyl7dG9rZW5zW3Rva2VuW2ldXT1mdW5jO319CmZ1bmN0aW9uIGFkZFdlZWtQYXJzZVRva2VuKHRva2VuLGNhbGxiYWNrKXthZGRQYXJzZVRva2VuKHRva2VuLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyx0b2tlbil7Y29uZmlnLl93PWNvbmZpZy5fd3x8e307Y2FsbGJhY2soaW5wdXQsY29uZmlnLl93LGNvbmZpZyx0b2tlbik7fSk7fQpmdW5jdGlvbiBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbixpbnB1dCxjb25maWcpe2lmKGlucHV0IT1udWxsJiZoYXNPd25Qcm9wKHRva2Vucyx0b2tlbikpe3Rva2Vuc1t0b2tlbl0oaW5wdXQsY29uZmlnLl9hLGNvbmZpZyx0b2tlbik7fX0KdmFyIFlFQVI9MDt2YXIgTU9OVEg9MTt2YXIgREFURT0yO3ZhciBIT1VSPTM7dmFyIE1JTlVURT00O3ZhciBTRUNPTkQ9NTt2YXIgTUlMTElTRUNPTkQ9Njt2YXIgV0VFSz03O3ZhciBXRUVLREFZPTg7dmFyIGluZGV4T2Y7aWYoQXJyYXkucHJvdG90eXBlLmluZGV4T2Ype2luZGV4T2Y9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y7fWVsc2V7aW5kZXhPZj1mdW5jdGlvbihvKXt2YXIgaTtmb3IoaT0wO2k8dGhpcy5sZW5ndGg7KytpKXtpZih0aGlzW2ldPT09byl7cmV0dXJuIGk7fX0KcmV0dXJuLTE7fTt9CnZhciBpbmRleE9mJDE9aW5kZXhPZjtmdW5jdGlvbiBkYXlzSW5Nb250aCh5ZWFyLG1vbnRoKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeWVhcixtb250aCsxLDApKS5nZXRVVENEYXRlKCk7fQphZGRGb3JtYXRUb2tlbignTScsWydNTScsMl0sJ01vJyxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbnRoKCkrMTt9KTthZGRGb3JtYXRUb2tlbignTU1NJywwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcyxmb3JtYXQpO30pO2FkZEZvcm1hdFRva2VuKCdNTU1NJywwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsZm9ybWF0KTt9KTthZGRVbml0QWxpYXMoJ21vbnRoJywnTScpO2FkZFVuaXRQcmlvcml0eSgnbW9udGgnLDgpO2FkZFJlZ2V4VG9rZW4oJ00nLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignTU0nLG1hdGNoMXRvMixtYXRjaDIpO2FkZFJlZ2V4VG9rZW4oJ01NTScsZnVuY3Rpb24oaXNTdHJpY3QsbG9jYWxlKXtyZXR1cm4gbG9jYWxlLm1vbnRoc1Nob3J0UmVnZXgoaXNTdHJpY3QpO30pO2FkZFJlZ2V4VG9rZW4oJ01NTU0nLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5tb250aHNSZWdleChpc1N0cmljdCk7fSk7YWRkUGFyc2VUb2tlbihbJ00nLCdNTSddLGZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtNT05USF09dG9JbnQoaW5wdXQpLTE7fSk7YWRkUGFyc2VUb2tlbihbJ01NTScsJ01NTU0nXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcsdG9rZW4pe3ZhciBtb250aD1jb25maWcuX2xvY2FsZS5tb250aHNQYXJzZShpbnB1dCx0b2tlbixjb25maWcuX3N0cmljdCk7aWYobW9udGghPW51bGwpe2FycmF5W01PTlRIXT1tb250aDt9ZWxzZXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkTW9udGg9aW5wdXQ7fX0pO3ZhciBNT05USFNfSU5fRk9STUFUPS9EW29EXT8oXFtbXlxbXF1dKlxdfFxzKStNTU1NPy87dmFyIGRlZmF1bHRMb2NhbGVNb250aHM9J0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyk7ZnVuY3Rpb24gbG9jYWxlTW9udGhzKG0sZm9ybWF0KXtpZighbSl7cmV0dXJuIHRoaXMuX21vbnRoczt9CnJldHVybiBpc0FycmF5KHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW20ubW9udGgoKV06dGhpcy5fbW9udGhzWyh0aGlzLl9tb250aHMuaXNGb3JtYXR8fE1PTlRIU19JTl9GT1JNQVQpLnRlc3QoZm9ybWF0KT8nZm9ybWF0Jzonc3RhbmRhbG9uZSddW20ubW9udGgoKV07fQp2YXIgZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0PSdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKTtmdW5jdGlvbiBsb2NhbGVNb250aHNTaG9ydChtLGZvcm1hdCl7aWYoIW0pe3JldHVybiB0aGlzLl9tb250aHNTaG9ydDt9CnJldHVybiBpc0FycmF5KHRoaXMuX21vbnRoc1Nob3J0KT90aGlzLl9tb250aHNTaG9ydFttLm1vbnRoKCldOnRoaXMuX21vbnRoc1Nob3J0W01PTlRIU19JTl9GT1JNQVQudGVzdChmb3JtYXQpPydmb3JtYXQnOidzdGFuZGFsb25lJ11bbS5tb250aCgpXTt9CmZ1bmN0aW9uIGhhbmRsZVN0cmljdFBhcnNlKG1vbnRoTmFtZSxmb3JtYXQsc3RyaWN0KXt2YXIgaSxpaSxtb20sbGxjPW1vbnRoTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO2lmKCF0aGlzLl9tb250aHNQYXJzZSl7dGhpcy5fbW9udGhzUGFyc2U9W107dGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdO3RoaXMuX3Nob3J0TW9udGhzUGFyc2U9W107Zm9yKGk9MDtpPDEyOysraSl7bW9tPWNyZWF0ZVVUQyhbMjAwMCxpXSk7dGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXT10aGlzLm1vbnRoc1Nob3J0KG1vbSwnJykudG9Mb2NhbGVMb3dlckNhc2UoKTt0aGlzLl9sb25nTW9udGhzUGFyc2VbaV09dGhpcy5tb250aHMobW9tLCcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO319CmlmKHN0cmljdCl7aWYoZm9ybWF0PT09J01NTScpe2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0TW9udGhzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO31lbHNle2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fX1lbHNle2lmKGZvcm1hdD09PSdNTU0nKXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYyk7aWYoaWkhPT0tMSl7cmV0dXJuIGlpO30KaWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGxsYyk7cmV0dXJuIGlpIT09LTE/aWk6bnVsbDt9ZWxzZXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYyk7cmV0dXJuIGlpIT09LTE/aWk6bnVsbDt9fX0KZnVuY3Rpb24gbG9jYWxlTW9udGhzUGFyc2UobW9udGhOYW1lLGZvcm1hdCxzdHJpY3Qpe3ZhciBpLG1vbSxyZWdleDtpZih0aGlzLl9tb250aHNQYXJzZUV4YWN0KXtyZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UuY2FsbCh0aGlzLG1vbnRoTmFtZSxmb3JtYXQsc3RyaWN0KTt9CmlmKCF0aGlzLl9tb250aHNQYXJzZSl7dGhpcy5fbW9udGhzUGFyc2U9W107dGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdO3RoaXMuX3Nob3J0TW9udGhzUGFyc2U9W107fQpmb3IoaT0wO2k8MTI7aSsrKXttb209Y3JlYXRlVVRDKFsyMDAwLGldKTtpZihzdHJpY3QmJiF0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0pe3RoaXMuX2xvbmdNb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKCdeJyt0aGlzLm1vbnRocyhtb20sJycpLnJlcGxhY2UoJy4nLCcnKSsnJCcsJ2knKTt0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2ldPW5ldyBSZWdFeHAoJ14nK3RoaXMubW9udGhzU2hvcnQobW9tLCcnKS5yZXBsYWNlKCcuJywnJykrJyQnLCdpJyk7fQppZighc3RyaWN0JiYhdGhpcy5fbW9udGhzUGFyc2VbaV0pe3JlZ2V4PSdeJyt0aGlzLm1vbnRocyhtb20sJycpKyd8XicrdGhpcy5tb250aHNTaG9ydChtb20sJycpO3RoaXMuX21vbnRoc1BhcnNlW2ldPW5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsJycpLCdpJyk7fQppZihzdHJpY3QmJmZvcm1hdD09PSdNTU1NJyYmdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSl7cmV0dXJuIGk7fWVsc2UgaWYoc3RyaWN0JiZmb3JtYXQ9PT0nTU1NJyYmdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpe3JldHVybiBpO31lbHNlIGlmKCFzdHJpY3QmJnRoaXMuX21vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSl7cmV0dXJuIGk7fX19CmZ1bmN0aW9uIHNldE1vbnRoKG1vbSx2YWx1ZSl7dmFyIGRheU9mTW9udGg7aWYoIW1vbS5pc1ZhbGlkKCkpe3JldHVybiBtb207fQppZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyl7aWYoL15cZCskLy50ZXN0KHZhbHVlKSl7dmFsdWU9dG9JbnQodmFsdWUpO31lbHNle3ZhbHVlPW1vbS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UodmFsdWUpO2lmKCFpc051bWJlcih2YWx1ZSkpe3JldHVybiBtb207fX19CmRheU9mTW9udGg9TWF0aC5taW4obW9tLmRhdGUoKSxkYXlzSW5Nb250aChtb20ueWVhcigpLHZhbHVlKSk7bW9tLl9kWydzZXQnKyhtb20uX2lzVVRDPydVVEMnOicnKSsnTW9udGgnXSh2YWx1ZSxkYXlPZk1vbnRoKTtyZXR1cm4gbW9tO30KZnVuY3Rpb24gZ2V0U2V0TW9udGgodmFsdWUpe2lmKHZhbHVlIT1udWxsKXtzZXRNb250aCh0aGlzLHZhbHVlKTtob29rcy51cGRhdGVPZmZzZXQodGhpcyx0cnVlKTtyZXR1cm4gdGhpczt9ZWxzZXtyZXR1cm4gZ2V0KHRoaXMsJ01vbnRoJyk7fX0KZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgoKXtyZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyKCksdGhpcy5tb250aCgpKTt9CnZhciBkZWZhdWx0TW9udGhzU2hvcnRSZWdleD1tYXRjaFdvcmQ7ZnVuY3Rpb24gbW9udGhzU2hvcnRSZWdleChpc1N0cmljdCl7aWYodGhpcy5fbW9udGhzUGFyc2VFeGFjdCl7aWYoIWhhc093blByb3AodGhpcywnX21vbnRoc1JlZ2V4Jykpe2NvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO30KaWYoaXNTdHJpY3Qpe3JldHVybiB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4O31lbHNle3JldHVybiB0aGlzLl9tb250aHNTaG9ydFJlZ2V4O319ZWxzZXtpZighaGFzT3duUHJvcCh0aGlzLCdfbW9udGhzU2hvcnRSZWdleCcpKXt0aGlzLl9tb250aHNTaG9ydFJlZ2V4PWRlZmF1bHRNb250aHNTaG9ydFJlZ2V4O30KcmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzU2hvcnRSZWdleDt9fQp2YXIgZGVmYXVsdE1vbnRoc1JlZ2V4PW1hdGNoV29yZDtmdW5jdGlvbiBtb250aHNSZWdleChpc1N0cmljdCl7aWYodGhpcy5fbW9udGhzUGFyc2VFeGFjdCl7aWYoIWhhc093blByb3AodGhpcywnX21vbnRoc1JlZ2V4Jykpe2NvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO30KaWYoaXNTdHJpY3Qpe3JldHVybiB0aGlzLl9tb250aHNTdHJpY3RSZWdleDt9ZWxzZXtyZXR1cm4gdGhpcy5fbW9udGhzUmVnZXg7fX1lbHNle2lmKCFoYXNPd25Qcm9wKHRoaXMsJ19tb250aHNSZWdleCcpKXt0aGlzLl9tb250aHNSZWdleD1kZWZhdWx0TW9udGhzUmVnZXg7fQpyZXR1cm4gdGhpcy5fbW9udGhzU3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4O319CmZ1bmN0aW9uIGNvbXB1dGVNb250aHNQYXJzZSgpe2Z1bmN0aW9uIGNtcExlblJldihhLGIpe3JldHVybiBiLmxlbmd0aC1hLmxlbmd0aDt9CnZhciBzaG9ydFBpZWNlcz1bXSxsb25nUGllY2VzPVtdLG1peGVkUGllY2VzPVtdLGksbW9tO2ZvcihpPTA7aTwxMjtpKyspe21vbT1jcmVhdGVVVEMoWzIwMDAsaV0pO3Nob3J0UGllY2VzLnB1c2godGhpcy5tb250aHNTaG9ydChtb20sJycpKTtsb25nUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCcnKSk7bWl4ZWRQaWVjZXMucHVzaCh0aGlzLm1vbnRocyhtb20sJycpKTttaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCcnKSk7fQpzaG9ydFBpZWNlcy5zb3J0KGNtcExlblJldik7bG9uZ1BpZWNlcy5zb3J0KGNtcExlblJldik7bWl4ZWRQaWVjZXMuc29ydChjbXBMZW5SZXYpO2ZvcihpPTA7aTwxMjtpKyspe3Nob3J0UGllY2VzW2ldPXJlZ2V4RXNjYXBlKHNob3J0UGllY2VzW2ldKTtsb25nUGllY2VzW2ldPXJlZ2V4RXNjYXBlKGxvbmdQaWVjZXNbaV0pO30KZm9yKGk9MDtpPDI0O2krKyl7bWl4ZWRQaWVjZXNbaV09cmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO30KdGhpcy5fbW9udGhzUmVnZXg9bmV3IFJlZ0V4cCgnXignK21peGVkUGllY2VzLmpvaW4oJ3wnKSsnKScsJ2knKTt0aGlzLl9tb250aHNTaG9ydFJlZ2V4PXRoaXMuX21vbnRoc1JlZ2V4O3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4PW5ldyBSZWdFeHAoJ14oJytsb25nUGllY2VzLmpvaW4oJ3wnKSsnKScsJ2knKTt0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoJ14oJytzaG9ydFBpZWNlcy5qb2luKCd8JykrJyknLCdpJyk7fQphZGRGb3JtYXRUb2tlbignWScsMCwwLGZ1bmN0aW9uKCl7dmFyIHk9dGhpcy55ZWFyKCk7cmV0dXJuIHk8PTk5OTk/JycreTonKycreTt9KTthZGRGb3JtYXRUb2tlbigwLFsnWVknLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55ZWFyKCklMTAwO30pO2FkZEZvcm1hdFRva2VuKDAsWydZWVlZJyw0XSwwLCd5ZWFyJyk7YWRkRm9ybWF0VG9rZW4oMCxbJ1lZWVlZJyw1XSwwLCd5ZWFyJyk7YWRkRm9ybWF0VG9rZW4oMCxbJ1lZWVlZWScsNix0cnVlXSwwLCd5ZWFyJyk7YWRkVW5pdEFsaWFzKCd5ZWFyJywneScpO2FkZFVuaXRQcmlvcml0eSgneWVhcicsMSk7YWRkUmVnZXhUb2tlbignWScsbWF0Y2hTaWduZWQpO2FkZFJlZ2V4VG9rZW4oJ1lZJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdZWVlZJyxtYXRjaDF0bzQsbWF0Y2g0KTthZGRSZWdleFRva2VuKCdZWVlZWScsbWF0Y2gxdG82LG1hdGNoNik7YWRkUmVnZXhUb2tlbignWVlZWVlZJyxtYXRjaDF0bzYsbWF0Y2g2KTthZGRQYXJzZVRva2VuKFsnWVlZWVknLCdZWVlZWVknXSxZRUFSKTthZGRQYXJzZVRva2VuKCdZWVlZJyxmdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbWUVBUl09aW5wdXQubGVuZ3RoPT09Mj9ob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCk6dG9JbnQoaW5wdXQpO30pO2FkZFBhcnNlVG9rZW4oJ1lZJyxmdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbWUVBUl09aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO30pO2FkZFBhcnNlVG9rZW4oJ1knLGZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtZRUFSXT1wYXJzZUludChpbnB1dCwxMCk7fSk7ZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKXtyZXR1cm4gaXNMZWFwWWVhcih5ZWFyKT8zNjY6MzY1O30KZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKXtyZXR1cm4oeWVhciU0PT09MCYmeWVhciUxMDAhPT0wKXx8eWVhciU0MDA9PT0wO30KaG9va3MucGFyc2VUd29EaWdpdFllYXI9ZnVuY3Rpb24oaW5wdXQpe3JldHVybiB0b0ludChpbnB1dCkrKHRvSW50KGlucHV0KT42OD8xOTAwOjIwMDApO307dmFyIGdldFNldFllYXI9bWFrZUdldFNldCgnRnVsbFllYXInLHRydWUpO2Z1bmN0aW9uIGdldElzTGVhcFllYXIoKXtyZXR1cm4gaXNMZWFwWWVhcih0aGlzLnllYXIoKSk7fQpmdW5jdGlvbiBjcmVhdGVEYXRlKHksbSxkLGgsTSxzLG1zKXt2YXIgZGF0ZT1uZXcgRGF0ZSh5LG0sZCxoLE0scyxtcyk7aWYoeTwxMDAmJnk+PTAmJmlzRmluaXRlKGRhdGUuZ2V0RnVsbFllYXIoKSkpe2RhdGUuc2V0RnVsbFllYXIoeSk7fQpyZXR1cm4gZGF0ZTt9CmZ1bmN0aW9uIGNyZWF0ZVVUQ0RhdGUoeSl7dmFyIGRhdGU9bmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCxhcmd1bWVudHMpKTtpZih5PDEwMCYmeT49MCYmaXNGaW5pdGUoZGF0ZS5nZXRVVENGdWxsWWVhcigpKSl7ZGF0ZS5zZXRVVENGdWxsWWVhcih5KTt9CnJldHVybiBkYXRlO30KZnVuY3Rpb24gZmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSl7dmFyCmZ3ZD03K2Rvdy1kb3ksZndkbHc9KDcrY3JlYXRlVVRDRGF0ZSh5ZWFyLDAsZndkKS5nZXRVVENEYXkoKS1kb3cpJTc7cmV0dXJuLWZ3ZGx3K2Z3ZC0xO30KZnVuY3Rpb24gZGF5T2ZZZWFyRnJvbVdlZWtzKHllYXIsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpe3ZhciBsb2NhbFdlZWtkYXk9KDcrd2Vla2RheS1kb3cpJTcsd2Vla09mZnNldD1maXJzdFdlZWtPZmZzZXQoeWVhcixkb3csZG95KSxkYXlPZlllYXI9MSs3Kih3ZWVrLTEpK2xvY2FsV2Vla2RheSt3ZWVrT2Zmc2V0LHJlc1llYXIscmVzRGF5T2ZZZWFyO2lmKGRheU9mWWVhcjw9MCl7cmVzWWVhcj15ZWFyLTE7cmVzRGF5T2ZZZWFyPWRheXNJblllYXIocmVzWWVhcikrZGF5T2ZZZWFyO31lbHNlIGlmKGRheU9mWWVhcj5kYXlzSW5ZZWFyKHllYXIpKXtyZXNZZWFyPXllYXIrMTtyZXNEYXlPZlllYXI9ZGF5T2ZZZWFyLWRheXNJblllYXIoeWVhcik7fWVsc2V7cmVzWWVhcj15ZWFyO3Jlc0RheU9mWWVhcj1kYXlPZlllYXI7fQpyZXR1cm57eWVhcjpyZXNZZWFyLGRheU9mWWVhcjpyZXNEYXlPZlllYXJ9O30KZnVuY3Rpb24gd2Vla09mWWVhcihtb20sZG93LGRveSl7dmFyIHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KG1vbS55ZWFyKCksZG93LGRveSksd2Vlaz1NYXRoLmZsb29yKChtb20uZGF5T2ZZZWFyKCktd2Vla09mZnNldC0xKS83KSsxLHJlc1dlZWsscmVzWWVhcjtpZih3ZWVrPDEpe3Jlc1llYXI9bW9tLnllYXIoKS0xO3Jlc1dlZWs9d2Vlayt3ZWVrc0luWWVhcihyZXNZZWFyLGRvdyxkb3kpO31lbHNlIGlmKHdlZWs+d2Vla3NJblllYXIobW9tLnllYXIoKSxkb3csZG95KSl7cmVzV2Vlaz13ZWVrLXdlZWtzSW5ZZWFyKG1vbS55ZWFyKCksZG93LGRveSk7cmVzWWVhcj1tb20ueWVhcigpKzE7fWVsc2V7cmVzWWVhcj1tb20ueWVhcigpO3Jlc1dlZWs9d2Vlazt9CnJldHVybnt3ZWVrOnJlc1dlZWsseWVhcjpyZXNZZWFyfTt9CmZ1bmN0aW9uIHdlZWtzSW5ZZWFyKHllYXIsZG93LGRveSl7dmFyIHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSksd2Vla09mZnNldE5leHQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIrMSxkb3csZG95KTtyZXR1cm4oZGF5c0luWWVhcih5ZWFyKS13ZWVrT2Zmc2V0K3dlZWtPZmZzZXROZXh0KS83O30KYWRkRm9ybWF0VG9rZW4oJ3cnLFsnd3cnLDJdLCd3bycsJ3dlZWsnKTthZGRGb3JtYXRUb2tlbignVycsWydXVycsMl0sJ1dvJywnaXNvV2VlaycpO2FkZFVuaXRBbGlhcygnd2VlaycsJ3cnKTthZGRVbml0QWxpYXMoJ2lzb1dlZWsnLCdXJyk7YWRkVW5pdFByaW9yaXR5KCd3ZWVrJyw1KTthZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWsnLDUpO2FkZFJlZ2V4VG9rZW4oJ3cnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignd3cnLG1hdGNoMXRvMixtYXRjaDIpO2FkZFJlZ2V4VG9rZW4oJ1cnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignV1cnLG1hdGNoMXRvMixtYXRjaDIpO2FkZFdlZWtQYXJzZVRva2VuKFsndycsJ3d3JywnVycsJ1dXJ10sZnVuY3Rpb24oaW5wdXQsd2Vlayxjb25maWcsdG9rZW4pe3dlZWtbdG9rZW4uc3Vic3RyKDAsMSldPXRvSW50KGlucHV0KTt9KTtmdW5jdGlvbiBsb2NhbGVXZWVrKG1vbSl7cmV0dXJuIHdlZWtPZlllYXIobW9tLHRoaXMuX3dlZWsuZG93LHRoaXMuX3dlZWsuZG95KS53ZWVrO30KdmFyIGRlZmF1bHRMb2NhbGVXZWVrPXtkb3c6MCxkb3k6Nn07ZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZldlZWsoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3c7fQpmdW5jdGlvbiBsb2NhbGVGaXJzdERheU9mWWVhcigpe3JldHVybiB0aGlzLl93ZWVrLmRveTt9CmZ1bmN0aW9uIGdldFNldFdlZWsoaW5wdXQpe3ZhciB3ZWVrPXRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7cmV0dXJuIGlucHV0PT1udWxsP3dlZWs6dGhpcy5hZGQoKGlucHV0LXdlZWspKjcsJ2QnKTt9CmZ1bmN0aW9uIGdldFNldElTT1dlZWsoaW5wdXQpe3ZhciB3ZWVrPXdlZWtPZlllYXIodGhpcywxLDQpLndlZWs7cmV0dXJuIGlucHV0PT1udWxsP3dlZWs6dGhpcy5hZGQoKGlucHV0LXdlZWspKjcsJ2QnKTt9CmFkZEZvcm1hdFRva2VuKCdkJywwLCdkbycsJ2RheScpO2FkZEZvcm1hdFRva2VuKCdkZCcsMCwwLGZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsZm9ybWF0KTt9KTthZGRGb3JtYXRUb2tlbignZGRkJywwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLGZvcm1hdCk7fSk7YWRkRm9ybWF0VG9rZW4oJ2RkZGQnLDAsMCxmdW5jdGlvbihmb3JtYXQpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5cyh0aGlzLGZvcm1hdCk7fSk7YWRkRm9ybWF0VG9rZW4oJ2UnLDAsMCwnd2Vla2RheScpO2FkZEZvcm1hdFRva2VuKCdFJywwLDAsJ2lzb1dlZWtkYXknKTthZGRVbml0QWxpYXMoJ2RheScsJ2QnKTthZGRVbml0QWxpYXMoJ3dlZWtkYXknLCdlJyk7YWRkVW5pdEFsaWFzKCdpc29XZWVrZGF5JywnRScpO2FkZFVuaXRQcmlvcml0eSgnZGF5JywxMSk7YWRkVW5pdFByaW9yaXR5KCd3ZWVrZGF5JywxMSk7YWRkVW5pdFByaW9yaXR5KCdpc29XZWVrZGF5JywxMSk7YWRkUmVnZXhUb2tlbignZCcsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdlJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ0UnLG1hdGNoMXRvMik7YWRkUmVnZXhUb2tlbignZGQnLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS53ZWVrZGF5c01pblJlZ2V4KGlzU3RyaWN0KTt9KTthZGRSZWdleFRva2VuKCdkZGQnLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS53ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3QpO30pO2FkZFJlZ2V4VG9rZW4oJ2RkZGQnLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS53ZWVrZGF5c1JlZ2V4KGlzU3RyaWN0KTt9KTthZGRXZWVrUGFyc2VUb2tlbihbJ2RkJywnZGRkJywnZGRkZCddLGZ1bmN0aW9uKGlucHV0LHdlZWssY29uZmlnLHRva2VuKXt2YXIgd2Vla2RheT1jb25maWcuX2xvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0LHRva2VuLGNvbmZpZy5fc3RyaWN0KTtpZih3ZWVrZGF5IT1udWxsKXt3ZWVrLmQ9d2Vla2RheTt9ZWxzZXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkV2Vla2RheT1pbnB1dDt9fSk7YWRkV2Vla1BhcnNlVG9rZW4oWydkJywnZScsJ0UnXSxmdW5jdGlvbihpbnB1dCx3ZWVrLGNvbmZpZyx0b2tlbil7d2Vla1t0b2tlbl09dG9JbnQoaW5wdXQpO30pO2Z1bmN0aW9uIHBhcnNlV2Vla2RheShpbnB1dCxsb2NhbGUpe2lmKHR5cGVvZiBpbnB1dCE9PSdzdHJpbmcnKXtyZXR1cm4gaW5wdXQ7fQppZighaXNOYU4oaW5wdXQpKXtyZXR1cm4gcGFyc2VJbnQoaW5wdXQsMTApO30KaW5wdXQ9bG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQpO2lmKHR5cGVvZiBpbnB1dD09PSdudW1iZXInKXtyZXR1cm4gaW5wdXQ7fQpyZXR1cm4gbnVsbDt9CmZ1bmN0aW9uIHBhcnNlSXNvV2Vla2RheShpbnB1dCxsb2NhbGUpe2lmKHR5cGVvZiBpbnB1dD09PSdzdHJpbmcnKXtyZXR1cm4gbG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQpJTd8fDc7fQpyZXR1cm4gaXNOYU4oaW5wdXQpP251bGw6aW5wdXQ7fQp2YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzPSdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKTtmdW5jdGlvbiBsb2NhbGVXZWVrZGF5cyhtLGZvcm1hdCl7aWYoIW0pe3JldHVybiB0aGlzLl93ZWVrZGF5czt9CnJldHVybiBpc0FycmF5KHRoaXMuX3dlZWtkYXlzKT90aGlzLl93ZWVrZGF5c1ttLmRheSgpXTp0aGlzLl93ZWVrZGF5c1t0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGZvcm1hdCk/J2Zvcm1hdCc6J3N0YW5kYWxvbmUnXVttLmRheSgpXTt9CnZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydD0nU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpO2Z1bmN0aW9uIGxvY2FsZVdlZWtkYXlzU2hvcnQobSl7cmV0dXJuKG0pP3RoaXMuX3dlZWtkYXlzU2hvcnRbbS5kYXkoKV06dGhpcy5fd2Vla2RheXNTaG9ydDt9CnZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW49J1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpO2Z1bmN0aW9uIGxvY2FsZVdlZWtkYXlzTWluKG0pe3JldHVybihtKT90aGlzLl93ZWVrZGF5c01pblttLmRheSgpXTp0aGlzLl93ZWVrZGF5c01pbjt9CmZ1bmN0aW9uIGhhbmRsZVN0cmljdFBhcnNlJDEod2Vla2RheU5hbWUsZm9ybWF0LHN0cmljdCl7dmFyIGksaWksbW9tLGxsYz13ZWVrZGF5TmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO2lmKCF0aGlzLl93ZWVrZGF5c1BhcnNlKXt0aGlzLl93ZWVrZGF5c1BhcnNlPVtdO3RoaXMuX3Nob3J0V2Vla2RheXNQYXJzZT1bXTt0aGlzLl9taW5XZWVrZGF5c1BhcnNlPVtdO2ZvcihpPTA7aTw3OysraSl7bW9tPWNyZWF0ZVVUQyhbMjAwMCwxXSkuZGF5KGkpO3RoaXMuX21pbldlZWtkYXlzUGFyc2VbaV09dGhpcy53ZWVrZGF5c01pbihtb20sJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7dGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldPXRoaXMud2Vla2RheXNTaG9ydChtb20sJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7dGhpcy5fd2Vla2RheXNQYXJzZVtpXT10aGlzLndlZWtkYXlzKG1vbSwnJykudG9Mb2NhbGVMb3dlckNhc2UoKTt9fQppZihzdHJpY3Qpe2lmKGZvcm1hdD09PSdkZGRkJyl7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fWVsc2UgaWYoZm9ybWF0PT09J2RkZCcpe2lpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fWVsc2V7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fX1lbHNle2lmKGZvcm1hdD09PSdkZGRkJyl7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxsbGMpO2lmKGlpIT09LTEpe3JldHVybiBpaTt9CmlpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxsbGMpO2lmKGlpIT09LTEpe3JldHVybiBpaTt9CmlpPWluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO31lbHNlIGlmKGZvcm1hdD09PSdkZGQnKXtpaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLGxsYyk7aWYoaWkhPT0tMSl7cmV0dXJuIGlpO30KaWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxsbGMpO3JldHVybiBpaSE9PS0xP2lpOm51bGw7fWVsc2V7aWk9aW5kZXhPZiQxLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxsbGMpO2lmKGlpIT09LTEpe3JldHVybiBpaTt9CmlpPWluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKTtpZihpaSE9PS0xKXtyZXR1cm4gaWk7fQppaT1pbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsbGxjKTtyZXR1cm4gaWkhPT0tMT9paTpudWxsO319fQpmdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1BhcnNlKHdlZWtkYXlOYW1lLGZvcm1hdCxzdHJpY3Qpe3ZhciBpLG1vbSxyZWdleDtpZih0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Qpe3JldHVybiBoYW5kbGVTdHJpY3RQYXJzZSQxLmNhbGwodGhpcyx3ZWVrZGF5TmFtZSxmb3JtYXQsc3RyaWN0KTt9CmlmKCF0aGlzLl93ZWVrZGF5c1BhcnNlKXt0aGlzLl93ZWVrZGF5c1BhcnNlPVtdO3RoaXMuX21pbldlZWtkYXlzUGFyc2U9W107dGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdO3RoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlPVtdO30KZm9yKGk9MDtpPDc7aSsrKXttb209Y3JlYXRlVVRDKFsyMDAwLDFdKS5kYXkoaSk7aWYoc3RyaWN0JiYhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0pe3RoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldPW5ldyBSZWdFeHAoJ14nK3RoaXMud2Vla2RheXMobW9tLCcnKS5yZXBsYWNlKCcuJywnXC4/JykrJyQnLCdpJyk7dGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldPW5ldyBSZWdFeHAoJ14nK3RoaXMud2Vla2RheXNTaG9ydChtb20sJycpLnJlcGxhY2UoJy4nLCdcLj8nKSsnJCcsJ2knKTt0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldPW5ldyBSZWdFeHAoJ14nK3RoaXMud2Vla2RheXNNaW4obW9tLCcnKS5yZXBsYWNlKCcuJywnXC4/JykrJyQnLCdpJyk7fQppZighdGhpcy5fd2Vla2RheXNQYXJzZVtpXSl7cmVnZXg9J14nK3RoaXMud2Vla2RheXMobW9tLCcnKSsnfF4nK3RoaXMud2Vla2RheXNTaG9ydChtb20sJycpKyd8XicrdGhpcy53ZWVrZGF5c01pbihtb20sJycpO3RoaXMuX3dlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCcuJywnJyksJ2knKTt9CmlmKHN0cmljdCYmZm9ybWF0PT09J2RkZGQnJiZ0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSl7cmV0dXJuIGk7fWVsc2UgaWYoc3RyaWN0JiZmb3JtYXQ9PT0nZGRkJyYmdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKXtyZXR1cm4gaTt9ZWxzZSBpZihzdHJpY3QmJmZvcm1hdD09PSdkZCcmJnRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpe3JldHVybiBpO31lbHNlIGlmKCFzdHJpY3QmJnRoaXMuX3dlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpe3JldHVybiBpO319fQpmdW5jdGlvbiBnZXRTZXREYXlPZldlZWsoaW5wdXQpe2lmKCF0aGlzLmlzVmFsaWQoKSl7cmV0dXJuIGlucHV0IT1udWxsP3RoaXM6TmFOO30KdmFyIGRheT10aGlzLl9pc1VUQz90aGlzLl9kLmdldFVUQ0RheSgpOnRoaXMuX2QuZ2V0RGF5KCk7aWYoaW5wdXQhPW51bGwpe2lucHV0PXBhcnNlV2Vla2RheShpbnB1dCx0aGlzLmxvY2FsZURhdGEoKSk7cmV0dXJuIHRoaXMuYWRkKGlucHV0LWRheSwnZCcpO31lbHNle3JldHVybiBkYXk7fX0KZnVuY3Rpb24gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrKGlucHV0KXtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybiBpbnB1dCE9bnVsbD90aGlzOk5hTjt9CnZhciB3ZWVrZGF5PSh0aGlzLmRheSgpKzctdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93KSU3O3JldHVybiBpbnB1dD09bnVsbD93ZWVrZGF5OnRoaXMuYWRkKGlucHV0LXdlZWtkYXksJ2QnKTt9CmZ1bmN0aW9uIGdldFNldElTT0RheU9mV2VlayhpbnB1dCl7aWYoIXRoaXMuaXNWYWxpZCgpKXtyZXR1cm4gaW5wdXQhPW51bGw/dGhpczpOYU47fQppZihpbnB1dCE9bnVsbCl7dmFyIHdlZWtkYXk9cGFyc2VJc29XZWVrZGF5KGlucHV0LHRoaXMubG9jYWxlRGF0YSgpKTtyZXR1cm4gdGhpcy5kYXkodGhpcy5kYXkoKSU3P3dlZWtkYXk6d2Vla2RheS03KTt9ZWxzZXtyZXR1cm4gdGhpcy5kYXkoKXx8Nzt9fQp2YXIgZGVmYXVsdFdlZWtkYXlzUmVnZXg9bWF0Y2hXb3JkO2Z1bmN0aW9uIHdlZWtkYXlzUmVnZXgoaXNTdHJpY3Qpe2lmKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCl7aWYoIWhhc093blByb3AodGhpcywnX3dlZWtkYXlzUmVnZXgnKSl7Y29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTt9CmlmKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDt9ZWxzZXtyZXR1cm4gdGhpcy5fd2Vla2RheXNSZWdleDt9fWVsc2V7aWYoIWhhc093blByb3AodGhpcywnX3dlZWtkYXlzUmVnZXgnKSl7dGhpcy5fd2Vla2RheXNSZWdleD1kZWZhdWx0V2Vla2RheXNSZWdleDt9CnJldHVybiB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4JiZpc1N0cmljdD90aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzUmVnZXg7fX0KdmFyIGRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXg9bWF0Y2hXb3JkO2Z1bmN0aW9uIHdlZWtkYXlzU2hvcnRSZWdleChpc1N0cmljdCl7aWYodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KXtpZighaGFzT3duUHJvcCh0aGlzLCdfd2Vla2RheXNSZWdleCcpKXtjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpO30KaWYoaXNTdHJpY3Qpe3JldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg7fWVsc2V7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleDt9fWVsc2V7aWYoIWhhc093blByb3AodGhpcywnX3dlZWtkYXlzU2hvcnRSZWdleCcpKXt0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg9ZGVmYXVsdFdlZWtkYXlzU2hvcnRSZWdleDt9CnJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg7fX0KdmFyIGRlZmF1bHRXZWVrZGF5c01pblJlZ2V4PW1hdGNoV29yZDtmdW5jdGlvbiB3ZWVrZGF5c01pblJlZ2V4KGlzU3RyaWN0KXtpZih0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Qpe2lmKCFoYXNPd25Qcm9wKHRoaXMsJ193ZWVrZGF5c1JlZ2V4Jykpe2NvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7fQppZihpc1N0cmljdCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg7fWVsc2V7cmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluUmVnZXg7fX1lbHNle2lmKCFoYXNPd25Qcm9wKHRoaXMsJ193ZWVrZGF5c01pblJlZ2V4Jykpe3RoaXMuX3dlZWtkYXlzTWluUmVnZXg9ZGVmYXVsdFdlZWtkYXlzTWluUmVnZXg7fQpyZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCYmaXNTdHJpY3Q/dGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c01pblJlZ2V4O319CmZ1bmN0aW9uIGNvbXB1dGVXZWVrZGF5c1BhcnNlKCl7ZnVuY3Rpb24gY21wTGVuUmV2KGEsYil7cmV0dXJuIGIubGVuZ3RoLWEubGVuZ3RoO30KdmFyIG1pblBpZWNlcz1bXSxzaG9ydFBpZWNlcz1bXSxsb25nUGllY2VzPVtdLG1peGVkUGllY2VzPVtdLGksbW9tLG1pbnAsc2hvcnRwLGxvbmdwO2ZvcihpPTA7aTw3O2krKyl7bW9tPWNyZWF0ZVVUQyhbMjAwMCwxXSkuZGF5KGkpO21pbnA9dGhpcy53ZWVrZGF5c01pbihtb20sJycpO3Nob3J0cD10aGlzLndlZWtkYXlzU2hvcnQobW9tLCcnKTtsb25ncD10aGlzLndlZWtkYXlzKG1vbSwnJyk7bWluUGllY2VzLnB1c2gobWlucCk7c2hvcnRQaWVjZXMucHVzaChzaG9ydHApO2xvbmdQaWVjZXMucHVzaChsb25ncCk7bWl4ZWRQaWVjZXMucHVzaChtaW5wKTttaXhlZFBpZWNlcy5wdXNoKHNob3J0cCk7bWl4ZWRQaWVjZXMucHVzaChsb25ncCk7fQptaW5QaWVjZXMuc29ydChjbXBMZW5SZXYpO3Nob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KTtsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KTttaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldik7Zm9yKGk9MDtpPDc7aSsrKXtzaG9ydFBpZWNlc1tpXT1yZWdleEVzY2FwZShzaG9ydFBpZWNlc1tpXSk7bG9uZ1BpZWNlc1tpXT1yZWdleEVzY2FwZShsb25nUGllY2VzW2ldKTttaXhlZFBpZWNlc1tpXT1yZWdleEVzY2FwZShtaXhlZFBpZWNlc1tpXSk7fQp0aGlzLl93ZWVrZGF5c1JlZ2V4PW5ldyBSZWdFeHAoJ14oJyttaXhlZFBpZWNlcy5qb2luKCd8JykrJyknLCdpJyk7dGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PXRoaXMuX3dlZWtkYXlzUmVnZXg7dGhpcy5fd2Vla2RheXNNaW5SZWdleD10aGlzLl93ZWVrZGF5c1JlZ2V4O3RoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cCgnXignK2xvbmdQaWVjZXMuam9pbignfCcpKycpJywnaScpO3RoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCdeKCcrc2hvcnRQaWVjZXMuam9pbignfCcpKycpJywnaScpO3RoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cCgnXignK21pblBpZWNlcy5qb2luKCd8JykrJyknLCdpJyk7fQpmdW5jdGlvbiBoRm9ybWF0KCl7cmV0dXJuIHRoaXMuaG91cnMoKSUxMnx8MTI7fQpmdW5jdGlvbiBrRm9ybWF0KCl7cmV0dXJuIHRoaXMuaG91cnMoKXx8MjQ7fQphZGRGb3JtYXRUb2tlbignSCcsWydISCcsMl0sMCwnaG91cicpO2FkZEZvcm1hdFRva2VuKCdoJyxbJ2hoJywyXSwwLGhGb3JtYXQpO2FkZEZvcm1hdFRva2VuKCdrJyxbJ2trJywyXSwwLGtGb3JtYXQpO2FkZEZvcm1hdFRva2VuKCdobW0nLDAsMCxmdW5jdGlvbigpe3JldHVybicnK2hGb3JtYXQuYXBwbHkodGhpcykremVyb0ZpbGwodGhpcy5taW51dGVzKCksMik7fSk7YWRkRm9ybWF0VG9rZW4oJ2htbXNzJywwLDAsZnVuY3Rpb24oKXtyZXR1cm4nJytoRm9ybWF0LmFwcGx5KHRoaXMpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpKwp6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwyKTt9KTthZGRGb3JtYXRUb2tlbignSG1tJywwLDAsZnVuY3Rpb24oKXtyZXR1cm4nJyt0aGlzLmhvdXJzKCkremVyb0ZpbGwodGhpcy5taW51dGVzKCksMik7fSk7YWRkRm9ybWF0VG9rZW4oJ0htbXNzJywwLDAsZnVuY3Rpb24oKXtyZXR1cm4nJyt0aGlzLmhvdXJzKCkremVyb0ZpbGwodGhpcy5taW51dGVzKCksMikrCnplcm9GaWxsKHRoaXMuc2Vjb25kcygpLDIpO30pO2Z1bmN0aW9uIG1lcmlkaWVtKHRva2VuLGxvd2VyY2FzZSl7YWRkRm9ybWF0VG9rZW4odG9rZW4sMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSxsb3dlcmNhc2UpO30pO30KbWVyaWRpZW0oJ2EnLHRydWUpO21lcmlkaWVtKCdBJyxmYWxzZSk7YWRkVW5pdEFsaWFzKCdob3VyJywnaCcpO2FkZFVuaXRQcmlvcml0eSgnaG91cicsMTMpO2Z1bmN0aW9uIG1hdGNoTWVyaWRpZW0oaXNTdHJpY3QsbG9jYWxlKXtyZXR1cm4gbG9jYWxlLl9tZXJpZGllbVBhcnNlO30KYWRkUmVnZXhUb2tlbignYScsbWF0Y2hNZXJpZGllbSk7YWRkUmVnZXhUb2tlbignQScsbWF0Y2hNZXJpZGllbSk7YWRkUmVnZXhUb2tlbignSCcsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdoJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ0hIJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdoaCcsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUmVnZXhUb2tlbignaG1tJyxtYXRjaDN0bzQpO2FkZFJlZ2V4VG9rZW4oJ2htbXNzJyxtYXRjaDV0bzYpO2FkZFJlZ2V4VG9rZW4oJ0htbScsbWF0Y2gzdG80KTthZGRSZWdleFRva2VuKCdIbW1zcycsbWF0Y2g1dG82KTthZGRQYXJzZVRva2VuKFsnSCcsJ0hIJ10sSE9VUik7YWRkUGFyc2VUb2tlbihbJ2EnLCdBJ10sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXtjb25maWcuX2lzUG09Y29uZmlnLl9sb2NhbGUuaXNQTShpbnB1dCk7Y29uZmlnLl9tZXJpZGllbT1pbnB1dDt9KTthZGRQYXJzZVRva2VuKFsnaCcsJ2hoJ10sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXthcnJheVtIT1VSXT10b0ludChpbnB1dCk7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91cj10cnVlO30pO2FkZFBhcnNlVG9rZW4oJ2htbScsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXt2YXIgcG9zPWlucHV0Lmxlbmd0aC0yO2FycmF5W0hPVVJdPXRvSW50KGlucHV0LnN1YnN0cigwLHBvcykpO2FycmF5W01JTlVURV09dG9JbnQoaW5wdXQuc3Vic3RyKHBvcykpO2dldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXI9dHJ1ZTt9KTthZGRQYXJzZVRva2VuKCdobW1zcycsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXt2YXIgcG9zMT1pbnB1dC5sZW5ndGgtNDt2YXIgcG9zMj1pbnB1dC5sZW5ndGgtMjthcnJheVtIT1VSXT10b0ludChpbnB1dC5zdWJzdHIoMCxwb3MxKSk7YXJyYXlbTUlOVVRFXT10b0ludChpbnB1dC5zdWJzdHIocG9zMSwyKSk7YXJyYXlbU0VDT05EXT10b0ludChpbnB1dC5zdWJzdHIocG9zMikpO2dldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXI9dHJ1ZTt9KTthZGRQYXJzZVRva2VuKCdIbW0nLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7dmFyIHBvcz1pbnB1dC5sZW5ndGgtMjthcnJheVtIT1VSXT10b0ludChpbnB1dC5zdWJzdHIoMCxwb3MpKTthcnJheVtNSU5VVEVdPXRvSW50KGlucHV0LnN1YnN0cihwb3MpKTt9KTthZGRQYXJzZVRva2VuKCdIbW1zcycsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXt2YXIgcG9zMT1pbnB1dC5sZW5ndGgtNDt2YXIgcG9zMj1pbnB1dC5sZW5ndGgtMjthcnJheVtIT1VSXT10b0ludChpbnB1dC5zdWJzdHIoMCxwb3MxKSk7YXJyYXlbTUlOVVRFXT10b0ludChpbnB1dC5zdWJzdHIocG9zMSwyKSk7YXJyYXlbU0VDT05EXT10b0ludChpbnB1dC5zdWJzdHIocG9zMikpO30pO2Z1bmN0aW9uIGxvY2FsZUlzUE0oaW5wdXQpe3JldHVybigoaW5wdXQrJycpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09J3AnKTt9CnZhciBkZWZhdWx0TG9jYWxlTWVyaWRpZW1QYXJzZT0vW2FwXVwuP20/XC4/L2k7ZnVuY3Rpb24gbG9jYWxlTWVyaWRpZW0oaG91cnMsbWludXRlcyxpc0xvd2VyKXtpZihob3Vycz4xMSl7cmV0dXJuIGlzTG93ZXI/J3BtJzonUE0nO31lbHNle3JldHVybiBpc0xvd2VyPydhbSc6J0FNJzt9fQp2YXIgZ2V0U2V0SG91cj1tYWtlR2V0U2V0KCdIb3VycycsdHJ1ZSk7dmFyIGJhc2VDb25maWc9e2NhbGVuZGFyOmRlZmF1bHRDYWxlbmRhcixsb25nRGF0ZUZvcm1hdDpkZWZhdWx0TG9uZ0RhdGVGb3JtYXQsaW52YWxpZERhdGU6ZGVmYXVsdEludmFsaWREYXRlLG9yZGluYWw6ZGVmYXVsdE9yZGluYWwsb3JkaW5hbFBhcnNlOmRlZmF1bHRPcmRpbmFsUGFyc2UscmVsYXRpdmVUaW1lOmRlZmF1bHRSZWxhdGl2ZVRpbWUsbW9udGhzOmRlZmF1bHRMb2NhbGVNb250aHMsbW9udGhzU2hvcnQ6ZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0LHdlZWs6ZGVmYXVsdExvY2FsZVdlZWssd2Vla2RheXM6ZGVmYXVsdExvY2FsZVdlZWtkYXlzLHdlZWtkYXlzTWluOmRlZmF1bHRMb2NhbGVXZWVrZGF5c01pbix3ZWVrZGF5c1Nob3J0OmRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0LG1lcmlkaWVtUGFyc2U6ZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2V9O3ZhciBsb2NhbGVzPXt9O3ZhciBsb2NhbGVGYW1pbGllcz17fTt2YXIgZ2xvYmFsTG9jYWxlO2Z1bmN0aW9uIG5vcm1hbGl6ZUxvY2FsZShrZXkpe3JldHVybiBrZXk/a2V5LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnXycsJy0nKTprZXk7fQpmdW5jdGlvbiBjaG9vc2VMb2NhbGUobmFtZXMpe3ZhciBpPTAsaixuZXh0LGxvY2FsZSxzcGxpdDt3aGlsZShpPG5hbWVzLmxlbmd0aCl7c3BsaXQ9bm9ybWFsaXplTG9jYWxlKG5hbWVzW2ldKS5zcGxpdCgnLScpO2o9c3BsaXQubGVuZ3RoO25leHQ9bm9ybWFsaXplTG9jYWxlKG5hbWVzW2krMV0pO25leHQ9bmV4dD9uZXh0LnNwbGl0KCctJyk6bnVsbDt3aGlsZShqPjApe2xvY2FsZT1sb2FkTG9jYWxlKHNwbGl0LnNsaWNlKDAsaikuam9pbignLScpKTtpZihsb2NhbGUpe3JldHVybiBsb2NhbGU7fQppZihuZXh0JiZuZXh0Lmxlbmd0aD49aiYmY29tcGFyZUFycmF5cyhzcGxpdCxuZXh0LHRydWUpPj1qLTEpe2JyZWFrO30Kai0tO30KaSsrO30KcmV0dXJuIG51bGw7fQpmdW5jdGlvbiBsb2FkTG9jYWxlKG5hbWUpe3ZhciBvbGRMb2NhbGU9bnVsbDtpZighbG9jYWxlc1tuYW1lXSYmKHR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJykmJm1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpe3RyeXtvbGRMb2NhbGU9Z2xvYmFsTG9jYWxlLl9hYmJyO3JlcXVpcmUoJy4vbG9jYWxlLycrbmFtZSk7Z2V0U2V0R2xvYmFsTG9jYWxlKG9sZExvY2FsZSk7fWNhdGNoKGUpe319CnJldHVybiBsb2NhbGVzW25hbWVdO30KZnVuY3Rpb24gZ2V0U2V0R2xvYmFsTG9jYWxlKGtleSx2YWx1ZXMpe3ZhciBkYXRhO2lmKGtleSl7aWYoaXNVbmRlZmluZWQodmFsdWVzKSl7ZGF0YT1nZXRMb2NhbGUoa2V5KTt9CmVsc2V7ZGF0YT1kZWZpbmVMb2NhbGUoa2V5LHZhbHVlcyk7fQppZihkYXRhKXtnbG9iYWxMb2NhbGU9ZGF0YTt9fQpyZXR1cm4gZ2xvYmFsTG9jYWxlLl9hYmJyO30KZnVuY3Rpb24gZGVmaW5lTG9jYWxlKG5hbWUsY29uZmlnKXtpZihjb25maWchPT1udWxsKXt2YXIgcGFyZW50Q29uZmlnPWJhc2VDb25maWc7Y29uZmlnLmFiYnI9bmFtZTtpZihsb2NhbGVzW25hbWVdIT1udWxsKXtkZXByZWNhdGVTaW1wbGUoJ2RlZmluZUxvY2FsZU92ZXJyaWRlJywndXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgJysnYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsICcrJ2NvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlICcrJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uJyk7cGFyZW50Q29uZmlnPWxvY2FsZXNbbmFtZV0uX2NvbmZpZzt9ZWxzZSBpZihjb25maWcucGFyZW50TG9jYWxlIT1udWxsKXtpZihsb2NhbGVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdIT1udWxsKXtwYXJlbnRDb25maWc9bG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXS5fY29uZmlnO31lbHNle2lmKCFsb2NhbGVGYW1pbGllc1tjb25maWcucGFyZW50TG9jYWxlXSl7bG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV09W107fQpsb2NhbGVGYW1pbGllc1tjb25maWcucGFyZW50TG9jYWxlXS5wdXNoKHtuYW1lOm5hbWUsY29uZmlnOmNvbmZpZ30pO3JldHVybiBudWxsO319CmxvY2FsZXNbbmFtZV09bmV3IExvY2FsZShtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLGNvbmZpZykpO2lmKGxvY2FsZUZhbWlsaWVzW25hbWVdKXtsb2NhbGVGYW1pbGllc1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHgpe2RlZmluZUxvY2FsZSh4Lm5hbWUseC5jb25maWcpO30pO30KZ2V0U2V0R2xvYmFsTG9jYWxlKG5hbWUpO3JldHVybiBsb2NhbGVzW25hbWVdO31lbHNle2RlbGV0ZSBsb2NhbGVzW25hbWVdO3JldHVybiBudWxsO319CmZ1bmN0aW9uIHVwZGF0ZUxvY2FsZShuYW1lLGNvbmZpZyl7aWYoY29uZmlnIT1udWxsKXt2YXIgbG9jYWxlLHBhcmVudENvbmZpZz1iYXNlQ29uZmlnO2lmKGxvY2FsZXNbbmFtZV0hPW51bGwpe3BhcmVudENvbmZpZz1sb2NhbGVzW25hbWVdLl9jb25maWc7fQpjb25maWc9bWVyZ2VDb25maWdzKHBhcmVudENvbmZpZyxjb25maWcpO2xvY2FsZT1uZXcgTG9jYWxlKGNvbmZpZyk7bG9jYWxlLnBhcmVudExvY2FsZT1sb2NhbGVzW25hbWVdO2xvY2FsZXNbbmFtZV09bG9jYWxlO2dldFNldEdsb2JhbExvY2FsZShuYW1lKTt9ZWxzZXtpZihsb2NhbGVzW25hbWVdIT1udWxsKXtpZihsb2NhbGVzW25hbWVdLnBhcmVudExvY2FsZSE9bnVsbCl7bG9jYWxlc1tuYW1lXT1sb2NhbGVzW25hbWVdLnBhcmVudExvY2FsZTt9ZWxzZSBpZihsb2NhbGVzW25hbWVdIT1udWxsKXtkZWxldGUgbG9jYWxlc1tuYW1lXTt9fX0KcmV0dXJuIGxvY2FsZXNbbmFtZV07fQpmdW5jdGlvbiBnZXRMb2NhbGUoa2V5KXt2YXIgbG9jYWxlO2lmKGtleSYma2V5Ll9sb2NhbGUmJmtleS5fbG9jYWxlLl9hYmJyKXtrZXk9a2V5Ll9sb2NhbGUuX2FiYnI7fQppZigha2V5KXtyZXR1cm4gZ2xvYmFsTG9jYWxlO30KaWYoIWlzQXJyYXkoa2V5KSl7bG9jYWxlPWxvYWRMb2NhbGUoa2V5KTtpZihsb2NhbGUpe3JldHVybiBsb2NhbGU7fQprZXk9W2tleV07fQpyZXR1cm4gY2hvb3NlTG9jYWxlKGtleSk7fQpmdW5jdGlvbiBsaXN0TG9jYWxlcygpe3JldHVybiBrZXlzJDEobG9jYWxlcyk7fQpmdW5jdGlvbiBjaGVja092ZXJmbG93KG0pe3ZhciBvdmVyZmxvdzt2YXIgYT1tLl9hO2lmKGEmJmdldFBhcnNpbmdGbGFncyhtKS5vdmVyZmxvdz09PS0yKXtvdmVyZmxvdz1hW01PTlRIXTwwfHxhW01PTlRIXT4xMT9NT05USDphW0RBVEVdPDF8fGFbREFURV0+ZGF5c0luTW9udGgoYVtZRUFSXSxhW01PTlRIXSk/REFURTphW0hPVVJdPDB8fGFbSE9VUl0+MjR8fChhW0hPVVJdPT09MjQmJihhW01JTlVURV0hPT0wfHxhW1NFQ09ORF0hPT0wfHxhW01JTExJU0VDT05EXSE9PTApKT9IT1VSOmFbTUlOVVRFXTwwfHxhW01JTlVURV0+NTk/TUlOVVRFOmFbU0VDT05EXTwwfHxhW1NFQ09ORF0+NTk/U0VDT05EOmFbTUlMTElTRUNPTkRdPDB8fGFbTUlMTElTRUNPTkRdPjk5OT9NSUxMSVNFQ09ORDotMTtpZihnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93RGF5T2ZZZWFyJiYob3ZlcmZsb3c8WUVBUnx8b3ZlcmZsb3c+REFURSkpe292ZXJmbG93PURBVEU7fQppZihnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla3MmJm92ZXJmbG93PT09LTEpe292ZXJmbG93PVdFRUs7fQppZihnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla2RheSYmb3ZlcmZsb3c9PT0tMSl7b3ZlcmZsb3c9V0VFS0RBWTt9CmdldFBhcnNpbmdGbGFncyhtKS5vdmVyZmxvdz1vdmVyZmxvdzt9CnJldHVybiBtO30KdmFyIGV4dGVuZGVkSXNvUmVnZXg9L15ccyooKD86WystXVxkezZ9fFxkezR9KS0oPzpcZFxkLVxkXGR8V1xkXGQtXGR8V1xkXGR8XGRcZFxkfFxkXGQpKSg/OihUfCApKFxkXGQoPzo6XGRcZCg/OjpcZFxkKD86Wy4sXVxkKyk/KT8pPykoW1wrXC1dXGRcZCg/Ojo/XGRcZCk/fFxzKlopPyk/JC87dmFyIGJhc2ljSXNvUmVnZXg9L15ccyooKD86WystXVxkezZ9fFxkezR9KSg/OlxkXGRcZFxkfFdcZFxkXGR8V1xkXGR8XGRcZFxkfFxkXGQpKSg/OihUfCApKFxkXGQoPzpcZFxkKD86XGRcZCg/OlsuLF1cZCspPyk/KT8pKFtcK1wtXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvO3ZhciB0elJlZ2V4PS9afFsrLV1cZFxkKD86Oj9cZFxkKT8vO3ZhciBpc29EYXRlcz1bWydZWVlZWVktTU0tREQnLC9bKy1dXGR7Nn0tXGRcZC1cZFxkL10sWydZWVlZLU1NLUREJywvXGR7NH0tXGRcZC1cZFxkL10sWydHR0dHLVtXXVdXLUUnLC9cZHs0fS1XXGRcZC1cZC9dLFsnR0dHRy1bV11XVycsL1xkezR9LVdcZFxkLyxmYWxzZV0sWydZWVlZLURERCcsL1xkezR9LVxkezN9L10sWydZWVlZLU1NJywvXGR7NH0tXGRcZC8sZmFsc2VdLFsnWVlZWVlZTU1ERCcsL1srLV1cZHsxMH0vXSxbJ1lZWVlNTUREJywvXGR7OH0vXSxbJ0dHR0dbV11XV0UnLC9cZHs0fVdcZHszfS9dLFsnR0dHR1tXXVdXJywvXGR7NH1XXGR7Mn0vLGZhbHNlXSxbJ1lZWVlEREQnLC9cZHs3fS9dXTt2YXIgaXNvVGltZXM9W1snSEg6bW06c3MuU1NTUycsL1xkXGQ6XGRcZDpcZFxkXC5cZCsvXSxbJ0hIOm1tOnNzLFNTU1MnLC9cZFxkOlxkXGQ6XGRcZCxcZCsvXSxbJ0hIOm1tOnNzJywvXGRcZDpcZFxkOlxkXGQvXSxbJ0hIOm1tJywvXGRcZDpcZFxkL10sWydISG1tc3MuU1NTUycsL1xkXGRcZFxkXGRcZFwuXGQrL10sWydISG1tc3MsU1NTUycsL1xkXGRcZFxkXGRcZCxcZCsvXSxbJ0hIbW1zcycsL1xkXGRcZFxkXGRcZC9dLFsnSEhtbScsL1xkXGRcZFxkL10sWydISCcsL1xkXGQvXV07dmFyIGFzcE5ldEpzb25SZWdleD0vXlwvP0RhdGVcKChcLT9cZCspL2k7ZnVuY3Rpb24gY29uZmlnRnJvbUlTTyhjb25maWcpe3ZhciBpLGwsc3RyaW5nPWNvbmZpZy5faSxtYXRjaD1leHRlbmRlZElzb1JlZ2V4LmV4ZWMoc3RyaW5nKXx8YmFzaWNJc29SZWdleC5leGVjKHN0cmluZyksYWxsb3dUaW1lLGRhdGVGb3JtYXQsdGltZUZvcm1hdCx0ekZvcm1hdDtpZihtYXRjaCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaXNvPXRydWU7Zm9yKGk9MCxsPWlzb0RhdGVzLmxlbmd0aDtpPGw7aSsrKXtpZihpc29EYXRlc1tpXVsxXS5leGVjKG1hdGNoWzFdKSl7ZGF0ZUZvcm1hdD1pc29EYXRlc1tpXVswXTthbGxvd1RpbWU9aXNvRGF0ZXNbaV1bMl0hPT1mYWxzZTticmVhazt9fQppZihkYXRlRm9ybWF0PT1udWxsKXtjb25maWcuX2lzVmFsaWQ9ZmFsc2U7cmV0dXJuO30KaWYobWF0Y2hbM10pe2ZvcihpPTAsbD1pc29UaW1lcy5sZW5ndGg7aTxsO2krKyl7aWYoaXNvVGltZXNbaV1bMV0uZXhlYyhtYXRjaFszXSkpe3RpbWVGb3JtYXQ9KG1hdGNoWzJdfHwnICcpK2lzb1RpbWVzW2ldWzBdO2JyZWFrO319CmlmKHRpbWVGb3JtYXQ9PW51bGwpe2NvbmZpZy5faXNWYWxpZD1mYWxzZTtyZXR1cm47fX0KaWYoIWFsbG93VGltZSYmdGltZUZvcm1hdCE9bnVsbCl7Y29uZmlnLl9pc1ZhbGlkPWZhbHNlO3JldHVybjt9CmlmKG1hdGNoWzRdKXtpZih0elJlZ2V4LmV4ZWMobWF0Y2hbNF0pKXt0ekZvcm1hdD0nWic7fWVsc2V7Y29uZmlnLl9pc1ZhbGlkPWZhbHNlO3JldHVybjt9fQpjb25maWcuX2Y9ZGF0ZUZvcm1hdCsodGltZUZvcm1hdHx8JycpKyh0ekZvcm1hdHx8JycpO2NvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTt9ZWxzZXtjb25maWcuX2lzVmFsaWQ9ZmFsc2U7fX0KZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZyhjb25maWcpe3ZhciBtYXRjaGVkPWFzcE5ldEpzb25SZWdleC5leGVjKGNvbmZpZy5faSk7aWYobWF0Y2hlZCE9PW51bGwpe2NvbmZpZy5fZD1uZXcgRGF0ZSgrbWF0Y2hlZFsxXSk7cmV0dXJuO30KY29uZmlnRnJvbUlTTyhjb25maWcpO2lmKGNvbmZpZy5faXNWYWxpZD09PWZhbHNlKXtkZWxldGUgY29uZmlnLl9pc1ZhbGlkO2hvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGNvbmZpZyk7fX0KaG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2s9ZGVwcmVjYXRlKCd2YWx1ZSBwcm92aWRlZCBpcyBub3QgaW4gYSByZWNvZ25pemVkIElTTyBmb3JtYXQuIG1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlKCksICcrJ3doaWNoIGlzIG5vdCByZWxpYWJsZSBhY3Jvc3MgYWxsIGJyb3dzZXJzIGFuZCB2ZXJzaW9ucy4gTm9uIElTTyBkYXRlIGZvcm1hdHMgYXJlICcrJ2Rpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvICcrJ2h0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvanMtZGF0ZS8gZm9yIG1vcmUgaW5mby4nLGZ1bmN0aW9uKGNvbmZpZyl7Y29uZmlnLl9kPW5ldyBEYXRlKGNvbmZpZy5faSsoY29uZmlnLl91c2VVVEM/JyBVVEMnOicnKSk7fSk7ZnVuY3Rpb24gZGVmYXVsdHMoYSxiLGMpe2lmKGEhPW51bGwpe3JldHVybiBhO30KaWYoYiE9bnVsbCl7cmV0dXJuIGI7fQpyZXR1cm4gYzt9CmZ1bmN0aW9uIGN1cnJlbnREYXRlQXJyYXkoY29uZmlnKXt2YXIgbm93VmFsdWU9bmV3IERhdGUoaG9va3Mubm93KCkpO2lmKGNvbmZpZy5fdXNlVVRDKXtyZXR1cm5bbm93VmFsdWUuZ2V0VVRDRnVsbFllYXIoKSxub3dWYWx1ZS5nZXRVVENNb250aCgpLG5vd1ZhbHVlLmdldFVUQ0RhdGUoKV07fQpyZXR1cm5bbm93VmFsdWUuZ2V0RnVsbFllYXIoKSxub3dWYWx1ZS5nZXRNb250aCgpLG5vd1ZhbHVlLmdldERhdGUoKV07fQpmdW5jdGlvbiBjb25maWdGcm9tQXJyYXkoY29uZmlnKXt2YXIgaSxkYXRlLGlucHV0PVtdLGN1cnJlbnREYXRlLHllYXJUb1VzZTtpZihjb25maWcuX2Qpe3JldHVybjt9CmN1cnJlbnREYXRlPWN1cnJlbnREYXRlQXJyYXkoY29uZmlnKTtpZihjb25maWcuX3cmJmNvbmZpZy5fYVtEQVRFXT09bnVsbCYmY29uZmlnLl9hW01PTlRIXT09bnVsbCl7ZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZyk7fQppZihjb25maWcuX2RheU9mWWVhcil7eWVhclRvVXNlPWRlZmF1bHRzKGNvbmZpZy5fYVtZRUFSXSxjdXJyZW50RGF0ZVtZRUFSXSk7aWYoY29uZmlnLl9kYXlPZlllYXI+ZGF5c0luWWVhcih5ZWFyVG9Vc2UpKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dEYXlPZlllYXI9dHJ1ZTt9CmRhdGU9Y3JlYXRlVVRDRGF0ZSh5ZWFyVG9Vc2UsMCxjb25maWcuX2RheU9mWWVhcik7Y29uZmlnLl9hW01PTlRIXT1kYXRlLmdldFVUQ01vbnRoKCk7Y29uZmlnLl9hW0RBVEVdPWRhdGUuZ2V0VVRDRGF0ZSgpO30KZm9yKGk9MDtpPDMmJmNvbmZpZy5fYVtpXT09bnVsbDsrK2kpe2NvbmZpZy5fYVtpXT1pbnB1dFtpXT1jdXJyZW50RGF0ZVtpXTt9CmZvcig7aTw3O2krKyl7Y29uZmlnLl9hW2ldPWlucHV0W2ldPShjb25maWcuX2FbaV09PW51bGwpPyhpPT09Mj8xOjApOmNvbmZpZy5fYVtpXTt9CmlmKGNvbmZpZy5fYVtIT1VSXT09PTI0JiZjb25maWcuX2FbTUlOVVRFXT09PTAmJmNvbmZpZy5fYVtTRUNPTkRdPT09MCYmY29uZmlnLl9hW01JTExJU0VDT05EXT09PTApe2NvbmZpZy5fbmV4dERheT10cnVlO2NvbmZpZy5fYVtIT1VSXT0wO30KY29uZmlnLl9kPShjb25maWcuX3VzZVVUQz9jcmVhdGVVVENEYXRlOmNyZWF0ZURhdGUpLmFwcGx5KG51bGwsaW5wdXQpO2lmKGNvbmZpZy5fdHptIT1udWxsKXtjb25maWcuX2Quc2V0VVRDTWludXRlcyhjb25maWcuX2QuZ2V0VVRDTWludXRlcygpLWNvbmZpZy5fdHptKTt9CmlmKGNvbmZpZy5fbmV4dERheSl7Y29uZmlnLl9hW0hPVVJdPTI0O319CmZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpe3ZhciB3LHdlZWtZZWFyLHdlZWssd2Vla2RheSxkb3csZG95LHRlbXAsd2Vla2RheU92ZXJmbG93O3c9Y29uZmlnLl93O2lmKHcuR0chPW51bGx8fHcuVyE9bnVsbHx8dy5FIT1udWxsKXtkb3c9MTtkb3k9NDt3ZWVrWWVhcj1kZWZhdWx0cyh3LkdHLGNvbmZpZy5fYVtZRUFSXSx3ZWVrT2ZZZWFyKGNyZWF0ZUxvY2FsKCksMSw0KS55ZWFyKTt3ZWVrPWRlZmF1bHRzKHcuVywxKTt3ZWVrZGF5PWRlZmF1bHRzKHcuRSwxKTtpZih3ZWVrZGF5PDF8fHdlZWtkYXk+Nyl7d2Vla2RheU92ZXJmbG93PXRydWU7fX1lbHNle2Rvdz1jb25maWcuX2xvY2FsZS5fd2Vlay5kb3c7ZG95PWNvbmZpZy5fbG9jYWxlLl93ZWVrLmRveTt2YXIgY3VyV2Vlaz13ZWVrT2ZZZWFyKGNyZWF0ZUxvY2FsKCksZG93LGRveSk7d2Vla1llYXI9ZGVmYXVsdHMody5nZyxjb25maWcuX2FbWUVBUl0sY3VyV2Vlay55ZWFyKTt3ZWVrPWRlZmF1bHRzKHcudyxjdXJXZWVrLndlZWspO2lmKHcuZCE9bnVsbCl7d2Vla2RheT13LmQ7aWYod2Vla2RheTwwfHx3ZWVrZGF5PjYpe3dlZWtkYXlPdmVyZmxvdz10cnVlO319ZWxzZSBpZih3LmUhPW51bGwpe3dlZWtkYXk9dy5lK2RvdztpZih3LmU8MHx8dy5lPjYpe3dlZWtkYXlPdmVyZmxvdz10cnVlO319ZWxzZXt3ZWVrZGF5PWRvdzt9fQppZih3ZWVrPDF8fHdlZWs+d2Vla3NJblllYXIod2Vla1llYXIsZG93LGRveSkpe2dldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd1dlZWtzPXRydWU7fWVsc2UgaWYod2Vla2RheU92ZXJmbG93IT1udWxsKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrZGF5PXRydWU7fWVsc2V7dGVtcD1kYXlPZlllYXJGcm9tV2Vla3Mod2Vla1llYXIsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpO2NvbmZpZy5fYVtZRUFSXT10ZW1wLnllYXI7Y29uZmlnLl9kYXlPZlllYXI9dGVtcC5kYXlPZlllYXI7fX0KaG9va3MuSVNPXzg2MDE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKXtpZihjb25maWcuX2Y9PT1ob29rcy5JU09fODYwMSl7Y29uZmlnRnJvbUlTTyhjb25maWcpO3JldHVybjt9CmNvbmZpZy5fYT1bXTtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eT10cnVlO3ZhciBzdHJpbmc9JycrY29uZmlnLl9pLGkscGFyc2VkSW5wdXQsdG9rZW5zLHRva2VuLHNraXBwZWQsc3RyaW5nTGVuZ3RoPXN0cmluZy5sZW5ndGgsdG90YWxQYXJzZWRJbnB1dExlbmd0aD0wO3Rva2Vucz1leHBhbmRGb3JtYXQoY29uZmlnLl9mLGNvbmZpZy5fbG9jYWxlKS5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKXx8W107Zm9yKGk9MDtpPHRva2Vucy5sZW5ndGg7aSsrKXt0b2tlbj10b2tlbnNbaV07cGFyc2VkSW5wdXQ9KHN0cmluZy5tYXRjaChnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sY29uZmlnKSl8fFtdKVswXTtpZihwYXJzZWRJbnB1dCl7c2tpcHBlZD1zdHJpbmcuc3Vic3RyKDAsc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpKTtpZihza2lwcGVkLmxlbmd0aD4wKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHNraXBwZWQpO30Kc3RyaW5nPXN0cmluZy5zbGljZShzdHJpbmcuaW5kZXhPZihwYXJzZWRJbnB1dCkrcGFyc2VkSW5wdXQubGVuZ3RoKTt0b3RhbFBhcnNlZElucHV0TGVuZ3RoKz1wYXJzZWRJbnB1dC5sZW5ndGg7fQppZihmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0pe2lmKHBhcnNlZElucHV0KXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eT1mYWxzZTt9CmVsc2V7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO30KYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4scGFyc2VkSW5wdXQsY29uZmlnKTt9CmVsc2UgaWYoY29uZmlnLl9zdHJpY3QmJiFwYXJzZWRJbnB1dCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO319CmdldFBhcnNpbmdGbGFncyhjb25maWcpLmNoYXJzTGVmdE92ZXI9c3RyaW5nTGVuZ3RoLXRvdGFsUGFyc2VkSW5wdXRMZW5ndGg7aWYoc3RyaW5nLmxlbmd0aD4wKXtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHN0cmluZyk7fQppZihjb25maWcuX2FbSE9VUl08PTEyJiZnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPT09dHJ1ZSYmY29uZmlnLl9hW0hPVVJdPjApe2dldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXI9dW5kZWZpbmVkO30KZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykucGFyc2VkRGF0ZVBhcnRzPWNvbmZpZy5fYS5zbGljZSgwKTtnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5tZXJpZGllbT1jb25maWcuX21lcmlkaWVtO2NvbmZpZy5fYVtIT1VSXT1tZXJpZGllbUZpeFdyYXAoY29uZmlnLl9sb2NhbGUsY29uZmlnLl9hW0hPVVJdLGNvbmZpZy5fbWVyaWRpZW0pO2NvbmZpZ0Zyb21BcnJheShjb25maWcpO2NoZWNrT3ZlcmZsb3coY29uZmlnKTt9CmZ1bmN0aW9uIG1lcmlkaWVtRml4V3JhcChsb2NhbGUsaG91cixtZXJpZGllbSl7dmFyIGlzUG07aWYobWVyaWRpZW09PW51bGwpe3JldHVybiBob3VyO30KaWYobG9jYWxlLm1lcmlkaWVtSG91ciE9bnVsbCl7cmV0dXJuIGxvY2FsZS5tZXJpZGllbUhvdXIoaG91cixtZXJpZGllbSk7fWVsc2UgaWYobG9jYWxlLmlzUE0hPW51bGwpe2lzUG09bG9jYWxlLmlzUE0obWVyaWRpZW0pO2lmKGlzUG0mJmhvdXI8MTIpe2hvdXIrPTEyO30KaWYoIWlzUG0mJmhvdXI9PT0xMil7aG91cj0wO30KcmV0dXJuIGhvdXI7fWVsc2V7cmV0dXJuIGhvdXI7fX0KZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZ0FuZEFycmF5KGNvbmZpZyl7dmFyIHRlbXBDb25maWcsYmVzdE1vbWVudCxzY29yZVRvQmVhdCxpLGN1cnJlbnRTY29yZTtpZihjb25maWcuX2YubGVuZ3RoPT09MCl7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZEZvcm1hdD10cnVlO2NvbmZpZy5fZD1uZXcgRGF0ZShOYU4pO3JldHVybjt9CmZvcihpPTA7aTxjb25maWcuX2YubGVuZ3RoO2krKyl7Y3VycmVudFNjb3JlPTA7dGVtcENvbmZpZz1jb3B5Q29uZmlnKHt9LGNvbmZpZyk7aWYoY29uZmlnLl91c2VVVEMhPW51bGwpe3RlbXBDb25maWcuX3VzZVVUQz1jb25maWcuX3VzZVVUQzt9CnRlbXBDb25maWcuX2Y9Y29uZmlnLl9mW2ldO2NvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQodGVtcENvbmZpZyk7aWYoIWlzVmFsaWQodGVtcENvbmZpZykpe2NvbnRpbnVlO30KY3VycmVudFNjb3JlKz1nZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuY2hhcnNMZWZ0T3ZlcjtjdXJyZW50U2NvcmUrPWdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS51bnVzZWRUb2tlbnMubGVuZ3RoKjEwO2dldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5zY29yZT1jdXJyZW50U2NvcmU7aWYoc2NvcmVUb0JlYXQ9PW51bGx8fGN1cnJlbnRTY29yZTxzY29yZVRvQmVhdCl7c2NvcmVUb0JlYXQ9Y3VycmVudFNjb3JlO2Jlc3RNb21lbnQ9dGVtcENvbmZpZzt9fQpleHRlbmQoY29uZmlnLGJlc3RNb21lbnR8fHRlbXBDb25maWcpO30KZnVuY3Rpb24gY29uZmlnRnJvbU9iamVjdChjb25maWcpe2lmKGNvbmZpZy5fZCl7cmV0dXJuO30KdmFyIGk9bm9ybWFsaXplT2JqZWN0VW5pdHMoY29uZmlnLl9pKTtjb25maWcuX2E9bWFwKFtpLnllYXIsaS5tb250aCxpLmRheXx8aS5kYXRlLGkuaG91cixpLm1pbnV0ZSxpLnNlY29uZCxpLm1pbGxpc2Vjb25kXSxmdW5jdGlvbihvYmope3JldHVybiBvYmomJnBhcnNlSW50KG9iaiwxMCk7fSk7Y29uZmlnRnJvbUFycmF5KGNvbmZpZyk7fQpmdW5jdGlvbiBjcmVhdGVGcm9tQ29uZmlnKGNvbmZpZyl7dmFyIHJlcz1uZXcgTW9tZW50KGNoZWNrT3ZlcmZsb3cocHJlcGFyZUNvbmZpZyhjb25maWcpKSk7aWYocmVzLl9uZXh0RGF5KXtyZXMuYWRkKDEsJ2QnKTtyZXMuX25leHREYXk9dW5kZWZpbmVkO30KcmV0dXJuIHJlczt9CmZ1bmN0aW9uIHByZXBhcmVDb25maWcoY29uZmlnKXt2YXIgaW5wdXQ9Y29uZmlnLl9pLGZvcm1hdD1jb25maWcuX2Y7Y29uZmlnLl9sb2NhbGU9Y29uZmlnLl9sb2NhbGV8fGdldExvY2FsZShjb25maWcuX2wpO2lmKGlucHV0PT09bnVsbHx8KGZvcm1hdD09PXVuZGVmaW5lZCYmaW5wdXQ9PT0nJykpe3JldHVybiBjcmVhdGVJbnZhbGlkKHtudWxsSW5wdXQ6dHJ1ZX0pO30KaWYodHlwZW9mIGlucHV0PT09J3N0cmluZycpe2NvbmZpZy5faT1pbnB1dD1jb25maWcuX2xvY2FsZS5wcmVwYXJzZShpbnB1dCk7fQppZihpc01vbWVudChpbnB1dCkpe3JldHVybiBuZXcgTW9tZW50KGNoZWNrT3ZlcmZsb3coaW5wdXQpKTt9ZWxzZSBpZihpc0RhdGUoaW5wdXQpKXtjb25maWcuX2Q9aW5wdXQ7fWVsc2UgaWYoaXNBcnJheShmb3JtYXQpKXtjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKTt9ZWxzZSBpZihmb3JtYXQpe2NvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTt9ZWxzZXtjb25maWdGcm9tSW5wdXQoY29uZmlnKTt9CmlmKCFpc1ZhbGlkKGNvbmZpZykpe2NvbmZpZy5fZD1udWxsO30KcmV0dXJuIGNvbmZpZzt9CmZ1bmN0aW9uIGNvbmZpZ0Zyb21JbnB1dChjb25maWcpe3ZhciBpbnB1dD1jb25maWcuX2k7aWYoaW5wdXQ9PT11bmRlZmluZWQpe2NvbmZpZy5fZD1uZXcgRGF0ZShob29rcy5ub3coKSk7fWVsc2UgaWYoaXNEYXRlKGlucHV0KSl7Y29uZmlnLl9kPW5ldyBEYXRlKGlucHV0LnZhbHVlT2YoKSk7fWVsc2UgaWYodHlwZW9mIGlucHV0PT09J3N0cmluZycpe2NvbmZpZ0Zyb21TdHJpbmcoY29uZmlnKTt9ZWxzZSBpZihpc0FycmF5KGlucHV0KSl7Y29uZmlnLl9hPW1hcChpbnB1dC5zbGljZSgwKSxmdW5jdGlvbihvYmope3JldHVybiBwYXJzZUludChvYmosMTApO30pO2NvbmZpZ0Zyb21BcnJheShjb25maWcpO31lbHNlIGlmKHR5cGVvZihpbnB1dCk9PT0nb2JqZWN0Jyl7Y29uZmlnRnJvbU9iamVjdChjb25maWcpO31lbHNlIGlmKGlzTnVtYmVyKGlucHV0KSl7Y29uZmlnLl9kPW5ldyBEYXRlKGlucHV0KTt9ZWxzZXtob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO319CmZ1bmN0aW9uIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsZm9ybWF0LGxvY2FsZSxzdHJpY3QsaXNVVEMpe3ZhciBjPXt9O2lmKGxvY2FsZT09PXRydWV8fGxvY2FsZT09PWZhbHNlKXtzdHJpY3Q9bG9jYWxlO2xvY2FsZT11bmRlZmluZWQ7fQppZigoaXNPYmplY3QoaW5wdXQpJiZpc09iamVjdEVtcHR5KGlucHV0KSl8fChpc0FycmF5KGlucHV0KSYmaW5wdXQubGVuZ3RoPT09MCkpe2lucHV0PXVuZGVmaW5lZDt9CmMuX2lzQU1vbWVudE9iamVjdD10cnVlO2MuX3VzZVVUQz1jLl9pc1VUQz1pc1VUQztjLl9sPWxvY2FsZTtjLl9pPWlucHV0O2MuX2Y9Zm9ybWF0O2MuX3N0cmljdD1zdHJpY3Q7cmV0dXJuIGNyZWF0ZUZyb21Db25maWcoYyk7fQpmdW5jdGlvbiBjcmVhdGVMb2NhbChpbnB1dCxmb3JtYXQsbG9jYWxlLHN0cmljdCl7cmV0dXJuIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsZm9ybWF0LGxvY2FsZSxzdHJpY3QsZmFsc2UpO30KdmFyIHByb3RvdHlwZU1pbj1kZXByZWNhdGUoJ21vbWVudCgpLm1pbiBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1heCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvJyxmdW5jdGlvbigpe3ZhciBvdGhlcj1jcmVhdGVMb2NhbC5hcHBseShudWxsLGFyZ3VtZW50cyk7aWYodGhpcy5pc1ZhbGlkKCkmJm90aGVyLmlzVmFsaWQoKSl7cmV0dXJuIG90aGVyPHRoaXM/dGhpczpvdGhlcjt9ZWxzZXtyZXR1cm4gY3JlYXRlSW52YWxpZCgpO319KTt2YXIgcHJvdG90eXBlTWF4PWRlcHJlY2F0ZSgnbW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8nLGZ1bmN0aW9uKCl7dmFyIG90aGVyPWNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsYXJndW1lbnRzKTtpZih0aGlzLmlzVmFsaWQoKSYmb3RoZXIuaXNWYWxpZCgpKXtyZXR1cm4gb3RoZXI+dGhpcz90aGlzOm90aGVyO31lbHNle3JldHVybiBjcmVhdGVJbnZhbGlkKCk7fX0pO2Z1bmN0aW9uIHBpY2tCeShmbixtb21lbnRzKXt2YXIgcmVzLGk7aWYobW9tZW50cy5sZW5ndGg9PT0xJiZpc0FycmF5KG1vbWVudHNbMF0pKXttb21lbnRzPW1vbWVudHNbMF07fQppZighbW9tZW50cy5sZW5ndGgpe3JldHVybiBjcmVhdGVMb2NhbCgpO30KcmVzPW1vbWVudHNbMF07Zm9yKGk9MTtpPG1vbWVudHMubGVuZ3RoOysraSl7aWYoIW1vbWVudHNbaV0uaXNWYWxpZCgpfHxtb21lbnRzW2ldW2ZuXShyZXMpKXtyZXM9bW9tZW50c1tpXTt9fQpyZXR1cm4gcmVzO30KZnVuY3Rpb24gbWluKCl7dmFyIGFyZ3M9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIHBpY2tCeSgnaXNCZWZvcmUnLGFyZ3MpO30KZnVuY3Rpb24gbWF4KCl7dmFyIGFyZ3M9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIHBpY2tCeSgnaXNBZnRlcicsYXJncyk7fQp2YXIgbm93PWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93P0RhdGUubm93KCk6KyhuZXcgRGF0ZSgpKTt9O2Z1bmN0aW9uIER1cmF0aW9uKGR1cmF0aW9uKXt2YXIgbm9ybWFsaXplZElucHV0PW5vcm1hbGl6ZU9iamVjdFVuaXRzKGR1cmF0aW9uKSx5ZWFycz1ub3JtYWxpemVkSW5wdXQueWVhcnx8MCxxdWFydGVycz1ub3JtYWxpemVkSW5wdXQucXVhcnRlcnx8MCxtb250aHM9bm9ybWFsaXplZElucHV0Lm1vbnRofHwwLHdlZWtzPW5vcm1hbGl6ZWRJbnB1dC53ZWVrfHwwLGRheXM9bm9ybWFsaXplZElucHV0LmRheXx8MCxob3Vycz1ub3JtYWxpemVkSW5wdXQuaG91cnx8MCxtaW51dGVzPW5vcm1hbGl6ZWRJbnB1dC5taW51dGV8fDAsc2Vjb25kcz1ub3JtYWxpemVkSW5wdXQuc2Vjb25kfHwwLG1pbGxpc2Vjb25kcz1ub3JtYWxpemVkSW5wdXQubWlsbGlzZWNvbmR8fDA7dGhpcy5fbWlsbGlzZWNvbmRzPSttaWxsaXNlY29uZHMrCnNlY29uZHMqMWUzKwptaW51dGVzKjZlNCsKaG91cnMqMTAwMCo2MCo2MDt0aGlzLl9kYXlzPStkYXlzKwp3ZWVrcyo3O3RoaXMuX21vbnRocz0rbW9udGhzKwpxdWFydGVycyozKwp5ZWFycyoxMjt0aGlzLl9kYXRhPXt9O3RoaXMuX2xvY2FsZT1nZXRMb2NhbGUoKTt0aGlzLl9idWJibGUoKTt9CmZ1bmN0aW9uIGlzRHVyYXRpb24ob2JqKXtyZXR1cm4gb2JqIGluc3RhbmNlb2YgRHVyYXRpb247fQpmdW5jdGlvbiBhYnNSb3VuZChudW1iZXIpe2lmKG51bWJlcjwwKXtyZXR1cm4gTWF0aC5yb3VuZCgtMSpudW1iZXIpKi0xO31lbHNle3JldHVybiBNYXRoLnJvdW5kKG51bWJlcik7fX0KZnVuY3Rpb24gb2Zmc2V0KHRva2VuLHNlcGFyYXRvcil7YWRkRm9ybWF0VG9rZW4odG9rZW4sMCwwLGZ1bmN0aW9uKCl7dmFyIG9mZnNldD10aGlzLnV0Y09mZnNldCgpO3ZhciBzaWduPScrJztpZihvZmZzZXQ8MCl7b2Zmc2V0PS1vZmZzZXQ7c2lnbj0nLSc7fQpyZXR1cm4gc2lnbit6ZXJvRmlsbCh+fihvZmZzZXQvNjApLDIpK3NlcGFyYXRvcit6ZXJvRmlsbCh+fihvZmZzZXQpJTYwLDIpO30pO30Kb2Zmc2V0KCdaJywnOicpO29mZnNldCgnWlonLCcnKTthZGRSZWdleFRva2VuKCdaJyxtYXRjaFNob3J0T2Zmc2V0KTthZGRSZWdleFRva2VuKCdaWicsbWF0Y2hTaG9ydE9mZnNldCk7YWRkUGFyc2VUb2tlbihbJ1onLCdaWiddLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl91c2VVVEM9dHJ1ZTtjb25maWcuX3R6bT1vZmZzZXRGcm9tU3RyaW5nKG1hdGNoU2hvcnRPZmZzZXQsaW5wdXQpO30pO3ZhciBjaHVua09mZnNldD0vKFtcK1wtXXxcZFxkKS9naTtmdW5jdGlvbiBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoZXIsc3RyaW5nKXt2YXIgbWF0Y2hlcz0oc3RyaW5nfHwnJykubWF0Y2gobWF0Y2hlcik7aWYobWF0Y2hlcz09PW51bGwpe3JldHVybiBudWxsO30KdmFyIGNodW5rPW1hdGNoZXNbbWF0Y2hlcy5sZW5ndGgtMV18fFtdO3ZhciBwYXJ0cz0oY2h1bmsrJycpLm1hdGNoKGNodW5rT2Zmc2V0KXx8WyctJywwLDBdO3ZhciBtaW51dGVzPSsocGFydHNbMV0qNjApK3RvSW50KHBhcnRzWzJdKTtyZXR1cm4gbWludXRlcz09PTA/MDpwYXJ0c1swXT09PScrJz9taW51dGVzOi1taW51dGVzO30KZnVuY3Rpb24gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LG1vZGVsKXt2YXIgcmVzLGRpZmY7aWYobW9kZWwuX2lzVVRDKXtyZXM9bW9kZWwuY2xvbmUoKTtkaWZmPShpc01vbWVudChpbnB1dCl8fGlzRGF0ZShpbnB1dCk/aW5wdXQudmFsdWVPZigpOmNyZWF0ZUxvY2FsKGlucHV0KS52YWx1ZU9mKCkpLXJlcy52YWx1ZU9mKCk7cmVzLl9kLnNldFRpbWUocmVzLl9kLnZhbHVlT2YoKStkaWZmKTtob29rcy51cGRhdGVPZmZzZXQocmVzLGZhbHNlKTtyZXR1cm4gcmVzO31lbHNle3JldHVybiBjcmVhdGVMb2NhbChpbnB1dCkubG9jYWwoKTt9fQpmdW5jdGlvbiBnZXREYXRlT2Zmc2V0KG0pe3JldHVybi1NYXRoLnJvdW5kKG0uX2QuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSkqMTU7fQpob29rcy51cGRhdGVPZmZzZXQ9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIGdldFNldE9mZnNldChpbnB1dCxrZWVwTG9jYWxUaW1lKXt2YXIgb2Zmc2V0PXRoaXMuX29mZnNldHx8MCxsb2NhbEFkanVzdDtpZighdGhpcy5pc1ZhbGlkKCkpe3JldHVybiBpbnB1dCE9bnVsbD90aGlzOk5hTjt9CmlmKGlucHV0IT1udWxsKXtpZih0eXBlb2YgaW5wdXQ9PT0nc3RyaW5nJyl7aW5wdXQ9b2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LGlucHV0KTtpZihpbnB1dD09PW51bGwpe3JldHVybiB0aGlzO319ZWxzZSBpZihNYXRoLmFicyhpbnB1dCk8MTYpe2lucHV0PWlucHV0KjYwO30KaWYoIXRoaXMuX2lzVVRDJiZrZWVwTG9jYWxUaW1lKXtsb2NhbEFkanVzdD1nZXREYXRlT2Zmc2V0KHRoaXMpO30KdGhpcy5fb2Zmc2V0PWlucHV0O3RoaXMuX2lzVVRDPXRydWU7aWYobG9jYWxBZGp1c3QhPW51bGwpe3RoaXMuYWRkKGxvY2FsQWRqdXN0LCdtJyk7fQppZihvZmZzZXQhPT1pbnB1dCl7aWYoIWtlZXBMb2NhbFRpbWV8fHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3Mpe2FkZFN1YnRyYWN0KHRoaXMsY3JlYXRlRHVyYXRpb24oaW5wdXQtb2Zmc2V0LCdtJyksMSxmYWxzZSk7fWVsc2UgaWYoIXRoaXMuX2NoYW5nZUluUHJvZ3Jlc3Mpe3RoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9dHJ1ZTtob29rcy51cGRhdGVPZmZzZXQodGhpcyx0cnVlKTt0aGlzLl9jaGFuZ2VJblByb2dyZXNzPW51bGw7fX0KcmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIHRoaXMuX2lzVVRDP29mZnNldDpnZXREYXRlT2Zmc2V0KHRoaXMpO319CmZ1bmN0aW9uIGdldFNldFpvbmUoaW5wdXQsa2VlcExvY2FsVGltZSl7aWYoaW5wdXQhPW51bGwpe2lmKHR5cGVvZiBpbnB1dCE9PSdzdHJpbmcnKXtpbnB1dD0taW5wdXQ7fQp0aGlzLnV0Y09mZnNldChpbnB1dCxrZWVwTG9jYWxUaW1lKTtyZXR1cm4gdGhpczt9ZWxzZXtyZXR1cm4tdGhpcy51dGNPZmZzZXQoKTt9fQpmdW5jdGlvbiBzZXRPZmZzZXRUb1VUQyhrZWVwTG9jYWxUaW1lKXtyZXR1cm4gdGhpcy51dGNPZmZzZXQoMCxrZWVwTG9jYWxUaW1lKTt9CmZ1bmN0aW9uIHNldE9mZnNldFRvTG9jYWwoa2VlcExvY2FsVGltZSl7aWYodGhpcy5faXNVVEMpe3RoaXMudXRjT2Zmc2V0KDAsa2VlcExvY2FsVGltZSk7dGhpcy5faXNVVEM9ZmFsc2U7aWYoa2VlcExvY2FsVGltZSl7dGhpcy5zdWJ0cmFjdChnZXREYXRlT2Zmc2V0KHRoaXMpLCdtJyk7fX0KcmV0dXJuIHRoaXM7fQpmdW5jdGlvbiBzZXRPZmZzZXRUb1BhcnNlZE9mZnNldCgpe2lmKHRoaXMuX3R6bSE9bnVsbCl7dGhpcy51dGNPZmZzZXQodGhpcy5fdHptKTt9ZWxzZSBpZih0eXBlb2YgdGhpcy5faT09PSdzdHJpbmcnKXt2YXIgdFpvbmU9b2Zmc2V0RnJvbVN0cmluZyhtYXRjaE9mZnNldCx0aGlzLl9pKTtpZih0Wm9uZSE9bnVsbCl7dGhpcy51dGNPZmZzZXQodFpvbmUpO30KZWxzZXt0aGlzLnV0Y09mZnNldCgwLHRydWUpO319CnJldHVybiB0aGlzO30KZnVuY3Rpb24gaGFzQWxpZ25lZEhvdXJPZmZzZXQoaW5wdXQpe2lmKCF0aGlzLmlzVmFsaWQoKSl7cmV0dXJuIGZhbHNlO30KaW5wdXQ9aW5wdXQ/Y3JlYXRlTG9jYWwoaW5wdXQpLnV0Y09mZnNldCgpOjA7cmV0dXJuKHRoaXMudXRjT2Zmc2V0KCktaW5wdXQpJTYwPT09MDt9CmZ1bmN0aW9uIGlzRGF5bGlnaHRTYXZpbmdUaW1lKCl7cmV0dXJuKHRoaXMudXRjT2Zmc2V0KCk+dGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpfHx0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCg1KS51dGNPZmZzZXQoKSk7fQpmdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQoKXtpZighaXNVbmRlZmluZWQodGhpcy5faXNEU1RTaGlmdGVkKSl7cmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDt9CnZhciBjPXt9O2NvcHlDb25maWcoYyx0aGlzKTtjPXByZXBhcmVDb25maWcoYyk7aWYoYy5fYSl7dmFyIG90aGVyPWMuX2lzVVRDP2NyZWF0ZVVUQyhjLl9hKTpjcmVhdGVMb2NhbChjLl9hKTt0aGlzLl9pc0RTVFNoaWZ0ZWQ9dGhpcy5pc1ZhbGlkKCkmJmNvbXBhcmVBcnJheXMoYy5fYSxvdGhlci50b0FycmF5KCkpPjA7fWVsc2V7dGhpcy5faXNEU1RTaGlmdGVkPWZhbHNlO30KcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDt9CmZ1bmN0aW9uIGlzTG9jYWwoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/IXRoaXMuX2lzVVRDOmZhbHNlO30KZnVuY3Rpb24gaXNVdGNPZmZzZXQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy5faXNVVEM6ZmFsc2U7fQpmdW5jdGlvbiBpc1V0Yygpe3JldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLl9pc1VUQyYmdGhpcy5fb2Zmc2V0PT09MDpmYWxzZTt9CnZhciBhc3BOZXRSZWdleD0vXihcLSk/KD86KFxkKilbLiBdKT8oXGQrKVw6KFxkKykoPzpcOihcZCspKFwuXGQqKT8pPyQvO3ZhciBpc29SZWdleD0vXigtKT9QKD86KC0/WzAtOSwuXSopWSk/KD86KC0/WzAtOSwuXSopTSk/KD86KC0/WzAtOSwuXSopVyk/KD86KC0/WzAtOSwuXSopRCk/KD86VCg/OigtP1swLTksLl0qKUgpPyg/OigtP1swLTksLl0qKU0pPyg/OigtP1swLTksLl0qKVMpPyk/JC87ZnVuY3Rpb24gY3JlYXRlRHVyYXRpb24oaW5wdXQsa2V5KXt2YXIgZHVyYXRpb249aW5wdXQsbWF0Y2g9bnVsbCxzaWduLHJldCxkaWZmUmVzO2lmKGlzRHVyYXRpb24oaW5wdXQpKXtkdXJhdGlvbj17bXM6aW5wdXQuX21pbGxpc2Vjb25kcyxkOmlucHV0Ll9kYXlzLE06aW5wdXQuX21vbnRoc307fWVsc2UgaWYoaXNOdW1iZXIoaW5wdXQpKXtkdXJhdGlvbj17fTtpZihrZXkpe2R1cmF0aW9uW2tleV09aW5wdXQ7fWVsc2V7ZHVyYXRpb24ubWlsbGlzZWNvbmRzPWlucHV0O319ZWxzZSBpZighIShtYXRjaD1hc3BOZXRSZWdleC5leGVjKGlucHV0KSkpe3NpZ249KG1hdGNoWzFdPT09Jy0nKT8tMToxO2R1cmF0aW9uPXt5OjAsZDp0b0ludChtYXRjaFtEQVRFXSkqc2lnbixoOnRvSW50KG1hdGNoW0hPVVJdKSpzaWduLG06dG9JbnQobWF0Y2hbTUlOVVRFXSkqc2lnbixzOnRvSW50KG1hdGNoW1NFQ09ORF0pKnNpZ24sbXM6dG9JbnQoYWJzUm91bmQobWF0Y2hbTUlMTElTRUNPTkRdKjEwMDApKSpzaWdufTt9ZWxzZSBpZighIShtYXRjaD1pc29SZWdleC5leGVjKGlucHV0KSkpe3NpZ249KG1hdGNoWzFdPT09Jy0nKT8tMToxO2R1cmF0aW9uPXt5OnBhcnNlSXNvKG1hdGNoWzJdLHNpZ24pLE06cGFyc2VJc28obWF0Y2hbM10sc2lnbiksdzpwYXJzZUlzbyhtYXRjaFs0XSxzaWduKSxkOnBhcnNlSXNvKG1hdGNoWzVdLHNpZ24pLGg6cGFyc2VJc28obWF0Y2hbNl0sc2lnbiksbTpwYXJzZUlzbyhtYXRjaFs3XSxzaWduKSxzOnBhcnNlSXNvKG1hdGNoWzhdLHNpZ24pfTt9ZWxzZSBpZihkdXJhdGlvbj09bnVsbCl7ZHVyYXRpb249e307fWVsc2UgaWYodHlwZW9mIGR1cmF0aW9uPT09J29iamVjdCcmJignZnJvbSdpbiBkdXJhdGlvbnx8J3RvJ2luIGR1cmF0aW9uKSl7ZGlmZlJlcz1tb21lbnRzRGlmZmVyZW5jZShjcmVhdGVMb2NhbChkdXJhdGlvbi5mcm9tKSxjcmVhdGVMb2NhbChkdXJhdGlvbi50bykpO2R1cmF0aW9uPXt9O2R1cmF0aW9uLm1zPWRpZmZSZXMubWlsbGlzZWNvbmRzO2R1cmF0aW9uLk09ZGlmZlJlcy5tb250aHM7fQpyZXQ9bmV3IER1cmF0aW9uKGR1cmF0aW9uKTtpZihpc0R1cmF0aW9uKGlucHV0KSYmaGFzT3duUHJvcChpbnB1dCwnX2xvY2FsZScpKXtyZXQuX2xvY2FsZT1pbnB1dC5fbG9jYWxlO30KcmV0dXJuIHJldDt9CmNyZWF0ZUR1cmF0aW9uLmZuPUR1cmF0aW9uLnByb3RvdHlwZTtmdW5jdGlvbiBwYXJzZUlzbyhpbnAsc2lnbil7dmFyIHJlcz1pbnAmJnBhcnNlRmxvYXQoaW5wLnJlcGxhY2UoJywnLCcuJykpO3JldHVybihpc05hTihyZXMpPzA6cmVzKSpzaWduO30KZnVuY3Rpb24gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLG90aGVyKXt2YXIgcmVzPXttaWxsaXNlY29uZHM6MCxtb250aHM6MH07cmVzLm1vbnRocz1vdGhlci5tb250aCgpLWJhc2UubW9udGgoKSsKKG90aGVyLnllYXIoKS1iYXNlLnllYXIoKSkqMTI7aWYoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCdNJykuaXNBZnRlcihvdGhlcikpey0tcmVzLm1vbnRoczt9CnJlcy5taWxsaXNlY29uZHM9K290aGVyLSsoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCdNJykpO3JldHVybiByZXM7fQpmdW5jdGlvbiBtb21lbnRzRGlmZmVyZW5jZShiYXNlLG90aGVyKXt2YXIgcmVzO2lmKCEoYmFzZS5pc1ZhbGlkKCkmJm90aGVyLmlzVmFsaWQoKSkpe3JldHVybnttaWxsaXNlY29uZHM6MCxtb250aHM6MH07fQpvdGhlcj1jbG9uZVdpdGhPZmZzZXQob3RoZXIsYmFzZSk7aWYoYmFzZS5pc0JlZm9yZShvdGhlcikpe3Jlcz1wb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKGJhc2Usb3RoZXIpO31lbHNle3Jlcz1wb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKG90aGVyLGJhc2UpO3Jlcy5taWxsaXNlY29uZHM9LXJlcy5taWxsaXNlY29uZHM7cmVzLm1vbnRocz0tcmVzLm1vbnRoczt9CnJldHVybiByZXM7fQpmdW5jdGlvbiBjcmVhdGVBZGRlcihkaXJlY3Rpb24sbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKHZhbCxwZXJpb2Qpe3ZhciBkdXIsdG1wO2lmKHBlcmlvZCE9PW51bGwmJiFpc05hTigrcGVyaW9kKSl7ZGVwcmVjYXRlU2ltcGxlKG5hbWUsJ21vbWVudCgpLicrbmFtZSsnKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLicrbmFtZSsnKG51bWJlciwgcGVyaW9kKS4gJysnU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvYWRkLWludmVydGVkLXBhcmFtLyBmb3IgbW9yZSBpbmZvLicpO3RtcD12YWw7dmFsPXBlcmlvZDtwZXJpb2Q9dG1wO30KdmFsPXR5cGVvZiB2YWw9PT0nc3RyaW5nJz8rdmFsOnZhbDtkdXI9Y3JlYXRlRHVyYXRpb24odmFsLHBlcmlvZCk7YWRkU3VidHJhY3QodGhpcyxkdXIsZGlyZWN0aW9uKTtyZXR1cm4gdGhpczt9O30KZnVuY3Rpb24gYWRkU3VidHJhY3QobW9tLGR1cmF0aW9uLGlzQWRkaW5nLHVwZGF0ZU9mZnNldCl7dmFyIG1pbGxpc2Vjb25kcz1kdXJhdGlvbi5fbWlsbGlzZWNvbmRzLGRheXM9YWJzUm91bmQoZHVyYXRpb24uX2RheXMpLG1vbnRocz1hYnNSb3VuZChkdXJhdGlvbi5fbW9udGhzKTtpZighbW9tLmlzVmFsaWQoKSl7cmV0dXJuO30KdXBkYXRlT2Zmc2V0PXVwZGF0ZU9mZnNldD09bnVsbD90cnVlOnVwZGF0ZU9mZnNldDtpZihtaWxsaXNlY29uZHMpe21vbS5fZC5zZXRUaW1lKG1vbS5fZC52YWx1ZU9mKCkrbWlsbGlzZWNvbmRzKmlzQWRkaW5nKTt9CmlmKGRheXMpe3NldCQxKG1vbSwnRGF0ZScsZ2V0KG1vbSwnRGF0ZScpK2RheXMqaXNBZGRpbmcpO30KaWYobW9udGhzKXtzZXRNb250aChtb20sZ2V0KG1vbSwnTW9udGgnKSttb250aHMqaXNBZGRpbmcpO30KaWYodXBkYXRlT2Zmc2V0KXtob29rcy51cGRhdGVPZmZzZXQobW9tLGRheXN8fG1vbnRocyk7fX0KdmFyIGFkZD1jcmVhdGVBZGRlcigxLCdhZGQnKTt2YXIgc3VidHJhY3Q9Y3JlYXRlQWRkZXIoLTEsJ3N1YnRyYWN0Jyk7ZnVuY3Rpb24gZ2V0Q2FsZW5kYXJGb3JtYXQobXlNb21lbnQsbm93KXt2YXIgZGlmZj1teU1vbWVudC5kaWZmKG5vdywnZGF5cycsdHJ1ZSk7cmV0dXJuIGRpZmY8LTY/J3NhbWVFbHNlJzpkaWZmPC0xPydsYXN0V2Vlayc6ZGlmZjwwPydsYXN0RGF5JzpkaWZmPDE/J3NhbWVEYXknOmRpZmY8Mj8nbmV4dERheSc6ZGlmZjw3PyduZXh0V2Vlayc6J3NhbWVFbHNlJzt9CmZ1bmN0aW9uIGNhbGVuZGFyJDEodGltZSxmb3JtYXRzKXt2YXIgbm93PXRpbWV8fGNyZWF0ZUxvY2FsKCksc29kPWNsb25lV2l0aE9mZnNldChub3csdGhpcykuc3RhcnRPZignZGF5JyksZm9ybWF0PWhvb2tzLmNhbGVuZGFyRm9ybWF0KHRoaXMsc29kKXx8J3NhbWVFbHNlJzt2YXIgb3V0cHV0PWZvcm1hdHMmJihpc0Z1bmN0aW9uKGZvcm1hdHNbZm9ybWF0XSk/Zm9ybWF0c1tmb3JtYXRdLmNhbGwodGhpcyxub3cpOmZvcm1hdHNbZm9ybWF0XSk7cmV0dXJuIHRoaXMuZm9ybWF0KG91dHB1dHx8dGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIoZm9ybWF0LHRoaXMsY3JlYXRlTG9jYWwobm93KSkpO30KZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IE1vbWVudCh0aGlzKTt9CmZ1bmN0aW9uIGlzQWZ0ZXIoaW5wdXQsdW5pdHMpe3ZhciBsb2NhbElucHV0PWlzTW9tZW50KGlucHV0KT9pbnB1dDpjcmVhdGVMb2NhbChpbnB1dCk7aWYoISh0aGlzLmlzVmFsaWQoKSYmbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKXtyZXR1cm4gZmFsc2U7fQp1bml0cz1ub3JtYWxpemVVbml0cyghaXNVbmRlZmluZWQodW5pdHMpP3VuaXRzOidtaWxsaXNlY29uZCcpO2lmKHVuaXRzPT09J21pbGxpc2Vjb25kJyl7cmV0dXJuIHRoaXMudmFsdWVPZigpPmxvY2FsSW5wdXQudmFsdWVPZigpO31lbHNle3JldHVybiBsb2NhbElucHV0LnZhbHVlT2YoKTx0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpO319CmZ1bmN0aW9uIGlzQmVmb3JlKGlucHV0LHVuaXRzKXt2YXIgbG9jYWxJbnB1dD1pc01vbWVudChpbnB1dCk/aW5wdXQ6Y3JlYXRlTG9jYWwoaW5wdXQpO2lmKCEodGhpcy5pc1ZhbGlkKCkmJmxvY2FsSW5wdXQuaXNWYWxpZCgpKSl7cmV0dXJuIGZhbHNlO30KdW5pdHM9bm9ybWFsaXplVW5pdHMoIWlzVW5kZWZpbmVkKHVuaXRzKT91bml0czonbWlsbGlzZWNvbmQnKTtpZih1bml0cz09PSdtaWxsaXNlY29uZCcpe3JldHVybiB0aGlzLnZhbHVlT2YoKTxsb2NhbElucHV0LnZhbHVlT2YoKTt9ZWxzZXtyZXR1cm4gdGhpcy5jbG9uZSgpLmVuZE9mKHVuaXRzKS52YWx1ZU9mKCk8bG9jYWxJbnB1dC52YWx1ZU9mKCk7fX0KZnVuY3Rpb24gaXNCZXR3ZWVuKGZyb20sdG8sdW5pdHMsaW5jbHVzaXZpdHkpe2luY2x1c2l2aXR5PWluY2x1c2l2aXR5fHwnKCknO3JldHVybihpbmNsdXNpdml0eVswXT09PScoJz90aGlzLmlzQWZ0ZXIoZnJvbSx1bml0cyk6IXRoaXMuaXNCZWZvcmUoZnJvbSx1bml0cykpJiYoaW5jbHVzaXZpdHlbMV09PT0nKSc/dGhpcy5pc0JlZm9yZSh0byx1bml0cyk6IXRoaXMuaXNBZnRlcih0byx1bml0cykpO30KZnVuY3Rpb24gaXNTYW1lKGlucHV0LHVuaXRzKXt2YXIgbG9jYWxJbnB1dD1pc01vbWVudChpbnB1dCk/aW5wdXQ6Y3JlYXRlTG9jYWwoaW5wdXQpLGlucHV0TXM7aWYoISh0aGlzLmlzVmFsaWQoKSYmbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKXtyZXR1cm4gZmFsc2U7fQp1bml0cz1ub3JtYWxpemVVbml0cyh1bml0c3x8J21pbGxpc2Vjb25kJyk7aWYodW5pdHM9PT0nbWlsbGlzZWNvbmQnKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCk9PT1sb2NhbElucHV0LnZhbHVlT2YoKTt9ZWxzZXtpbnB1dE1zPWxvY2FsSW5wdXQudmFsdWVPZigpO3JldHVybiB0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpPD1pbnB1dE1zJiZpbnB1dE1zPD10aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKTt9fQpmdW5jdGlvbiBpc1NhbWVPckFmdGVyKGlucHV0LHVuaXRzKXtyZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsdW5pdHMpfHx0aGlzLmlzQWZ0ZXIoaW5wdXQsdW5pdHMpO30KZnVuY3Rpb24gaXNTYW1lT3JCZWZvcmUoaW5wdXQsdW5pdHMpe3JldHVybiB0aGlzLmlzU2FtZShpbnB1dCx1bml0cyl8fHRoaXMuaXNCZWZvcmUoaW5wdXQsdW5pdHMpO30KZnVuY3Rpb24gZGlmZihpbnB1dCx1bml0cyxhc0Zsb2F0KXt2YXIgdGhhdCx6b25lRGVsdGEsZGVsdGEsb3V0cHV0O2lmKCF0aGlzLmlzVmFsaWQoKSl7cmV0dXJuIE5hTjt9CnRoYXQ9Y2xvbmVXaXRoT2Zmc2V0KGlucHV0LHRoaXMpO2lmKCF0aGF0LmlzVmFsaWQoKSl7cmV0dXJuIE5hTjt9CnpvbmVEZWx0YT0odGhhdC51dGNPZmZzZXQoKS10aGlzLnV0Y09mZnNldCgpKSo2ZTQ7dW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpO2lmKHVuaXRzPT09J3llYXInfHx1bml0cz09PSdtb250aCd8fHVuaXRzPT09J3F1YXJ0ZXInKXtvdXRwdXQ9bW9udGhEaWZmKHRoaXMsdGhhdCk7aWYodW5pdHM9PT0ncXVhcnRlcicpe291dHB1dD1vdXRwdXQvMzt9ZWxzZSBpZih1bml0cz09PSd5ZWFyJyl7b3V0cHV0PW91dHB1dC8xMjt9fWVsc2V7ZGVsdGE9dGhpcy10aGF0O291dHB1dD11bml0cz09PSdzZWNvbmQnP2RlbHRhLzFlMzp1bml0cz09PSdtaW51dGUnP2RlbHRhLzZlNDp1bml0cz09PSdob3VyJz9kZWx0YS8zNmU1OnVuaXRzPT09J2RheSc/KGRlbHRhLXpvbmVEZWx0YSkvODY0ZTU6dW5pdHM9PT0nd2Vlayc/KGRlbHRhLXpvbmVEZWx0YSkvNjA0OGU1OmRlbHRhO30KcmV0dXJuIGFzRmxvYXQ/b3V0cHV0OmFic0Zsb29yKG91dHB1dCk7fQpmdW5jdGlvbiBtb250aERpZmYoYSxiKXt2YXIgd2hvbGVNb250aERpZmY9KChiLnllYXIoKS1hLnllYXIoKSkqMTIpKyhiLm1vbnRoKCktYS5tb250aCgpKSxhbmNob3I9YS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiwnbW9udGhzJyksYW5jaG9yMixhZGp1c3Q7aWYoYi1hbmNob3I8MCl7YW5jaG9yMj1hLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLTEsJ21vbnRocycpO2FkanVzdD0oYi1hbmNob3IpLyhhbmNob3ItYW5jaG9yMik7fWVsc2V7YW5jaG9yMj1hLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmKzEsJ21vbnRocycpO2FkanVzdD0oYi1hbmNob3IpLyhhbmNob3IyLWFuY2hvcik7fQpyZXR1cm4tKHdob2xlTW9udGhEaWZmK2FkanVzdCl8fDA7fQpob29rcy5kZWZhdWx0Rm9ybWF0PSdZWVlZLU1NLUREVEhIOm1tOnNzWic7aG9va3MuZGVmYXVsdEZvcm1hdFV0Yz0nWVlZWS1NTS1ERFRISDptbTpzc1taXSc7ZnVuY3Rpb24gdG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2RkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaJyk7fQpmdW5jdGlvbiB0b0lTT1N0cmluZygpe3ZhciBtPXRoaXMuY2xvbmUoKS51dGMoKTtpZigwPG0ueWVhcigpJiZtLnllYXIoKTw9OTk5OSl7aWYoaXNGdW5jdGlvbihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZykpe3JldHVybiB0aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk7fWVsc2V7cmV0dXJuIGZvcm1hdE1vbWVudChtLCdZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdJyk7fX1lbHNle3JldHVybiBmb3JtYXRNb21lbnQobSwnWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdJyk7fX0KZnVuY3Rpb24gaW5zcGVjdCgpe2lmKCF0aGlzLmlzVmFsaWQoKSl7cmV0dXJuJ21vbWVudC5pbnZhbGlkKC8qICcrdGhpcy5faSsnICovKSc7fQp2YXIgZnVuYz0nbW9tZW50Jzt2YXIgem9uZT0nJztpZighdGhpcy5pc0xvY2FsKCkpe2Z1bmM9dGhpcy51dGNPZmZzZXQoKT09PTA/J21vbWVudC51dGMnOidtb21lbnQucGFyc2Vab25lJzt6b25lPSdaJzt9CnZhciBwcmVmaXg9J1snK2Z1bmMrJygiXSc7dmFyIHllYXI9KDA8dGhpcy55ZWFyKCkmJnRoaXMueWVhcigpPD05OTk5KT8nWVlZWSc6J1lZWVlZWSc7dmFyIGRhdGV0aW1lPSctTU0tRERbVF1ISDptbTpzcy5TU1MnO3ZhciBzdWZmaXg9em9uZSsnWyIpXSc7cmV0dXJuIHRoaXMuZm9ybWF0KHByZWZpeCt5ZWFyK2RhdGV0aW1lK3N1ZmZpeCk7fQpmdW5jdGlvbiBmb3JtYXQoaW5wdXRTdHJpbmcpe2lmKCFpbnB1dFN0cmluZyl7aW5wdXRTdHJpbmc9dGhpcy5pc1V0YygpP2hvb2tzLmRlZmF1bHRGb3JtYXRVdGM6aG9va3MuZGVmYXVsdEZvcm1hdDt9CnZhciBvdXRwdXQ9Zm9ybWF0TW9tZW50KHRoaXMsaW5wdXRTdHJpbmcpO3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KG91dHB1dCk7fQpmdW5jdGlvbiBmcm9tKHRpbWUsd2l0aG91dFN1ZmZpeCl7aWYodGhpcy5pc1ZhbGlkKCkmJigoaXNNb21lbnQodGltZSkmJnRpbWUuaXNWYWxpZCgpKXx8Y3JlYXRlTG9jYWwodGltZSkuaXNWYWxpZCgpKSl7cmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHt0bzp0aGlzLGZyb206dGltZX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghd2l0aG91dFN1ZmZpeCk7fWVsc2V7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7fX0KZnVuY3Rpb24gZnJvbU5vdyh3aXRob3V0U3VmZml4KXtyZXR1cm4gdGhpcy5mcm9tKGNyZWF0ZUxvY2FsKCksd2l0aG91dFN1ZmZpeCk7fQpmdW5jdGlvbiB0byh0aW1lLHdpdGhvdXRTdWZmaXgpe2lmKHRoaXMuaXNWYWxpZCgpJiYoKGlzTW9tZW50KHRpbWUpJiZ0aW1lLmlzVmFsaWQoKSl8fGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpe3JldHVybiBjcmVhdGVEdXJhdGlvbih7ZnJvbTp0aGlzLHRvOnRpbWV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXdpdGhvdXRTdWZmaXgpO31lbHNle3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO319CmZ1bmN0aW9uIHRvTm93KHdpdGhvdXRTdWZmaXgpe3JldHVybiB0aGlzLnRvKGNyZWF0ZUxvY2FsKCksd2l0aG91dFN1ZmZpeCk7fQpmdW5jdGlvbiBsb2NhbGUoa2V5KXt2YXIgbmV3TG9jYWxlRGF0YTtpZihrZXk9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9sb2NhbGUuX2FiYnI7fWVsc2V7bmV3TG9jYWxlRGF0YT1nZXRMb2NhbGUoa2V5KTtpZihuZXdMb2NhbGVEYXRhIT1udWxsKXt0aGlzLl9sb2NhbGU9bmV3TG9jYWxlRGF0YTt9CnJldHVybiB0aGlzO319CnZhciBsYW5nPWRlcHJlY2F0ZSgnbW9tZW50KCkubGFuZygpIGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHVzZSBtb21lbnQoKS5sb2NhbGVEYXRhKCkgdG8gZ2V0IHRoZSBsYW5ndWFnZSBjb25maWd1cmF0aW9uLiBVc2UgbW9tZW50KCkubG9jYWxlKCkgdG8gY2hhbmdlIGxhbmd1YWdlcy4nLGZ1bmN0aW9uKGtleSl7aWYoa2V5PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCk7fWVsc2V7cmV0dXJuIHRoaXMubG9jYWxlKGtleSk7fX0pO2Z1bmN0aW9uIGxvY2FsZURhdGEoKXtyZXR1cm4gdGhpcy5fbG9jYWxlO30KZnVuY3Rpb24gc3RhcnRPZih1bml0cyl7dW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpO3N3aXRjaCh1bml0cyl7Y2FzZSd5ZWFyJzp0aGlzLm1vbnRoKDApO2Nhc2UncXVhcnRlcic6Y2FzZSdtb250aCc6dGhpcy5kYXRlKDEpO2Nhc2Und2Vlayc6Y2FzZSdpc29XZWVrJzpjYXNlJ2RheSc6Y2FzZSdkYXRlJzp0aGlzLmhvdXJzKDApO2Nhc2UnaG91cic6dGhpcy5taW51dGVzKDApO2Nhc2UnbWludXRlJzp0aGlzLnNlY29uZHMoMCk7Y2FzZSdzZWNvbmQnOnRoaXMubWlsbGlzZWNvbmRzKDApO30KaWYodW5pdHM9PT0nd2Vlaycpe3RoaXMud2Vla2RheSgwKTt9CmlmKHVuaXRzPT09J2lzb1dlZWsnKXt0aGlzLmlzb1dlZWtkYXkoMSk7fQppZih1bml0cz09PSdxdWFydGVyJyl7dGhpcy5tb250aChNYXRoLmZsb29yKHRoaXMubW9udGgoKS8zKSozKTt9CnJldHVybiB0aGlzO30KZnVuY3Rpb24gZW5kT2YodW5pdHMpe3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtpZih1bml0cz09PXVuZGVmaW5lZHx8dW5pdHM9PT0nbWlsbGlzZWNvbmQnKXtyZXR1cm4gdGhpczt9CmlmKHVuaXRzPT09J2RhdGUnKXt1bml0cz0nZGF5Jzt9CnJldHVybiB0aGlzLnN0YXJ0T2YodW5pdHMpLmFkZCgxLCh1bml0cz09PSdpc29XZWVrJz8nd2Vlayc6dW5pdHMpKS5zdWJ0cmFjdCgxLCdtcycpO30KZnVuY3Rpb24gdmFsdWVPZigpe3JldHVybiB0aGlzLl9kLnZhbHVlT2YoKS0oKHRoaXMuX29mZnNldHx8MCkqNjAwMDApO30KZnVuY3Rpb24gdW5peCgpe3JldHVybiBNYXRoLmZsb29yKHRoaXMudmFsdWVPZigpLzEwMDApO30KZnVuY3Rpb24gdG9EYXRlKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKTt9CmZ1bmN0aW9uIHRvQXJyYXkoKXt2YXIgbT10aGlzO3JldHVyblttLnllYXIoKSxtLm1vbnRoKCksbS5kYXRlKCksbS5ob3VyKCksbS5taW51dGUoKSxtLnNlY29uZCgpLG0ubWlsbGlzZWNvbmQoKV07fQpmdW5jdGlvbiB0b09iamVjdCgpe3ZhciBtPXRoaXM7cmV0dXJue3llYXJzOm0ueWVhcigpLG1vbnRoczptLm1vbnRoKCksZGF0ZTptLmRhdGUoKSxob3VyczptLmhvdXJzKCksbWludXRlczptLm1pbnV0ZXMoKSxzZWNvbmRzOm0uc2Vjb25kcygpLG1pbGxpc2Vjb25kczptLm1pbGxpc2Vjb25kcygpfTt9CmZ1bmN0aW9uIHRvSlNPTigpe3JldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLnRvSVNPU3RyaW5nKCk6bnVsbDt9CmZ1bmN0aW9uIGlzVmFsaWQkMSgpe3JldHVybiBpc1ZhbGlkKHRoaXMpO30KZnVuY3Rpb24gcGFyc2luZ0ZsYWdzKCl7cmV0dXJuIGV4dGVuZCh7fSxnZXRQYXJzaW5nRmxhZ3ModGhpcykpO30KZnVuY3Rpb24gaW52YWxpZEF0KCl7cmV0dXJuIGdldFBhcnNpbmdGbGFncyh0aGlzKS5vdmVyZmxvdzt9CmZ1bmN0aW9uIGNyZWF0aW9uRGF0YSgpe3JldHVybntpbnB1dDp0aGlzLl9pLGZvcm1hdDp0aGlzLl9mLGxvY2FsZTp0aGlzLl9sb2NhbGUsaXNVVEM6dGhpcy5faXNVVEMsc3RyaWN0OnRoaXMuX3N0cmljdH07fQphZGRGb3JtYXRUb2tlbigwLFsnZ2cnLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWVrWWVhcigpJTEwMDt9KTthZGRGb3JtYXRUb2tlbigwLFsnR0cnLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc29XZWVrWWVhcigpJTEwMDt9KTtmdW5jdGlvbiBhZGRXZWVrWWVhckZvcm1hdFRva2VuKHRva2VuLGdldHRlcil7YWRkRm9ybWF0VG9rZW4oMCxbdG9rZW4sdG9rZW4ubGVuZ3RoXSwwLGdldHRlcik7fQphZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnJywnd2Vla1llYXInKTthZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnZycsJ3dlZWtZZWFyJyk7YWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHRycsJ2lzb1dlZWtZZWFyJyk7YWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHR0cnLCdpc29XZWVrWWVhcicpO2FkZFVuaXRBbGlhcygnd2Vla1llYXInLCdnZycpO2FkZFVuaXRBbGlhcygnaXNvV2Vla1llYXInLCdHRycpO2FkZFVuaXRQcmlvcml0eSgnd2Vla1llYXInLDEpO2FkZFVuaXRQcmlvcml0eSgnaXNvV2Vla1llYXInLDEpO2FkZFJlZ2V4VG9rZW4oJ0cnLG1hdGNoU2lnbmVkKTthZGRSZWdleFRva2VuKCdnJyxtYXRjaFNpZ25lZCk7YWRkUmVnZXhUb2tlbignR0cnLG1hdGNoMXRvMixtYXRjaDIpO2FkZFJlZ2V4VG9rZW4oJ2dnJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdHR0dHJyxtYXRjaDF0bzQsbWF0Y2g0KTthZGRSZWdleFRva2VuKCdnZ2dnJyxtYXRjaDF0bzQsbWF0Y2g0KTthZGRSZWdleFRva2VuKCdHR0dHRycsbWF0Y2gxdG82LG1hdGNoNik7YWRkUmVnZXhUb2tlbignZ2dnZ2cnLG1hdGNoMXRvNixtYXRjaDYpO2FkZFdlZWtQYXJzZVRva2VuKFsnZ2dnZycsJ2dnZ2dnJywnR0dHRycsJ0dHR0dHJ10sZnVuY3Rpb24oaW5wdXQsd2Vlayxjb25maWcsdG9rZW4pe3dlZWtbdG9rZW4uc3Vic3RyKDAsMildPXRvSW50KGlucHV0KTt9KTthZGRXZWVrUGFyc2VUb2tlbihbJ2dnJywnR0cnXSxmdW5jdGlvbihpbnB1dCx3ZWVrLGNvbmZpZyx0b2tlbil7d2Vla1t0b2tlbl09aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO30pO2Z1bmN0aW9uIGdldFNldFdlZWtZZWFyKGlucHV0KXtyZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLGlucHV0LHRoaXMud2VlaygpLHRoaXMud2Vla2RheSgpLHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpO30KZnVuY3Rpb24gZ2V0U2V0SVNPV2Vla1llYXIoaW5wdXQpe3JldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsaW5wdXQsdGhpcy5pc29XZWVrKCksdGhpcy5pc29XZWVrZGF5KCksMSw0KTt9CmZ1bmN0aW9uIGdldElTT1dlZWtzSW5ZZWFyKCl7cmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLDEsNCk7fQpmdW5jdGlvbiBnZXRXZWVrc0luWWVhcigpe3ZhciB3ZWVrSW5mbz10aGlzLmxvY2FsZURhdGEoKS5fd2VlaztyZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksd2Vla0luZm8uZG93LHdlZWtJbmZvLmRveSk7fQpmdW5jdGlvbiBnZXRTZXRXZWVrWWVhckhlbHBlcihpbnB1dCx3ZWVrLHdlZWtkYXksZG93LGRveSl7dmFyIHdlZWtzVGFyZ2V0O2lmKGlucHV0PT1udWxsKXtyZXR1cm4gd2Vla09mWWVhcih0aGlzLGRvdyxkb3kpLnllYXI7fWVsc2V7d2Vla3NUYXJnZXQ9d2Vla3NJblllYXIoaW5wdXQsZG93LGRveSk7aWYod2Vlaz53ZWVrc1RhcmdldCl7d2Vlaz13ZWVrc1RhcmdldDt9CnJldHVybiBzZXRXZWVrQWxsLmNhbGwodGhpcyxpbnB1dCx3ZWVrLHdlZWtkYXksZG93LGRveSk7fX0KZnVuY3Rpb24gc2V0V2Vla0FsbCh3ZWVrWWVhcix3ZWVrLHdlZWtkYXksZG93LGRveSl7dmFyIGRheU9mWWVhckRhdGE9ZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLHdlZWssd2Vla2RheSxkb3csZG95KSxkYXRlPWNyZWF0ZVVUQ0RhdGUoZGF5T2ZZZWFyRGF0YS55ZWFyLDAsZGF5T2ZZZWFyRGF0YS5kYXlPZlllYXIpO3RoaXMueWVhcihkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpO3RoaXMubW9udGgoZGF0ZS5nZXRVVENNb250aCgpKTt0aGlzLmRhdGUoZGF0ZS5nZXRVVENEYXRlKCkpO3JldHVybiB0aGlzO30KYWRkRm9ybWF0VG9rZW4oJ1EnLDAsJ1FvJywncXVhcnRlcicpO2FkZFVuaXRBbGlhcygncXVhcnRlcicsJ1EnKTthZGRVbml0UHJpb3JpdHkoJ3F1YXJ0ZXInLDcpO2FkZFJlZ2V4VG9rZW4oJ1EnLG1hdGNoMSk7YWRkUGFyc2VUb2tlbignUScsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W01PTlRIXT0odG9JbnQoaW5wdXQpLTEpKjM7fSk7ZnVuY3Rpb24gZ2V0U2V0UXVhcnRlcihpbnB1dCl7cmV0dXJuIGlucHV0PT1udWxsP01hdGguY2VpbCgodGhpcy5tb250aCgpKzEpLzMpOnRoaXMubW9udGgoKGlucHV0LTEpKjMrdGhpcy5tb250aCgpJTMpO30KYWRkRm9ybWF0VG9rZW4oJ0QnLFsnREQnLDJdLCdEbycsJ2RhdGUnKTthZGRVbml0QWxpYXMoJ2RhdGUnLCdEJyk7YWRkVW5pdFByaW9yaXR5KCdkYXRlJyw5KTthZGRSZWdleFRva2VuKCdEJyxtYXRjaDF0bzIpO2FkZFJlZ2V4VG9rZW4oJ0REJyxtYXRjaDF0bzIsbWF0Y2gyKTthZGRSZWdleFRva2VuKCdEbycsZnVuY3Rpb24oaXNTdHJpY3QsbG9jYWxlKXtyZXR1cm4gaXNTdHJpY3Q/bG9jYWxlLl9vcmRpbmFsUGFyc2U6bG9jYWxlLl9vcmRpbmFsUGFyc2VMZW5pZW50O30pO2FkZFBhcnNlVG9rZW4oWydEJywnREQnXSxEQVRFKTthZGRQYXJzZVRva2VuKCdEbycsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W0RBVEVdPXRvSW50KGlucHV0Lm1hdGNoKG1hdGNoMXRvMilbMF0sMTApO30pO3ZhciBnZXRTZXREYXlPZk1vbnRoPW1ha2VHZXRTZXQoJ0RhdGUnLHRydWUpO2FkZEZvcm1hdFRva2VuKCdEREQnLFsnRERERCcsM10sJ0RERG8nLCdkYXlPZlllYXInKTthZGRVbml0QWxpYXMoJ2RheU9mWWVhcicsJ0RERCcpO2FkZFVuaXRQcmlvcml0eSgnZGF5T2ZZZWFyJyw0KTthZGRSZWdleFRva2VuKCdEREQnLG1hdGNoMXRvMyk7YWRkUmVnZXhUb2tlbignRERERCcsbWF0Y2gzKTthZGRQYXJzZVRva2VuKFsnREREJywnRERERCddLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl9kYXlPZlllYXI9dG9JbnQoaW5wdXQpO30pO2Z1bmN0aW9uIGdldFNldERheU9mWWVhcihpbnB1dCl7dmFyIGRheU9mWWVhcj1NYXRoLnJvdW5kKCh0aGlzLmNsb25lKCkuc3RhcnRPZignZGF5JyktdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ3llYXInKSkvODY0ZTUpKzE7cmV0dXJuIGlucHV0PT1udWxsP2RheU9mWWVhcjp0aGlzLmFkZCgoaW5wdXQtZGF5T2ZZZWFyKSwnZCcpO30KYWRkRm9ybWF0VG9rZW4oJ20nLFsnbW0nLDJdLDAsJ21pbnV0ZScpO2FkZFVuaXRBbGlhcygnbWludXRlJywnbScpO2FkZFVuaXRQcmlvcml0eSgnbWludXRlJywxNCk7YWRkUmVnZXhUb2tlbignbScsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdtbScsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUGFyc2VUb2tlbihbJ20nLCdtbSddLE1JTlVURSk7dmFyIGdldFNldE1pbnV0ZT1tYWtlR2V0U2V0KCdNaW51dGVzJyxmYWxzZSk7YWRkRm9ybWF0VG9rZW4oJ3MnLFsnc3MnLDJdLDAsJ3NlY29uZCcpO2FkZFVuaXRBbGlhcygnc2Vjb25kJywncycpO2FkZFVuaXRQcmlvcml0eSgnc2Vjb25kJywxNSk7YWRkUmVnZXhUb2tlbigncycsbWF0Y2gxdG8yKTthZGRSZWdleFRva2VuKCdzcycsbWF0Y2gxdG8yLG1hdGNoMik7YWRkUGFyc2VUb2tlbihbJ3MnLCdzcyddLFNFQ09ORCk7dmFyIGdldFNldFNlY29uZD1tYWtlR2V0U2V0KCdTZWNvbmRzJyxmYWxzZSk7YWRkRm9ybWF0VG9rZW4oJ1MnLDAsMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMDApO30pO2FkZEZvcm1hdFRva2VuKDAsWydTUycsMl0sMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMCk7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTUycsM10sMCwnbWlsbGlzZWNvbmQnKTthZGRGb3JtYXRUb2tlbigwLFsnU1NTUycsNF0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1NTJyw1XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSoxMDA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1NTUycsNl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTAwMDt9KTthZGRGb3JtYXRUb2tlbigwLFsnU1NTU1NTUycsN10sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTAwMDA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1NTU1NTJyw4XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSoxMDAwMDA7fSk7YWRkRm9ybWF0VG9rZW4oMCxbJ1NTU1NTU1NTUycsOV0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkqMTAwMDAwMDt9KTthZGRVbml0QWxpYXMoJ21pbGxpc2Vjb25kJywnbXMnKTthZGRVbml0UHJpb3JpdHkoJ21pbGxpc2Vjb25kJywxNik7YWRkUmVnZXhUb2tlbignUycsbWF0Y2gxdG8zLG1hdGNoMSk7YWRkUmVnZXhUb2tlbignU1MnLG1hdGNoMXRvMyxtYXRjaDIpO2FkZFJlZ2V4VG9rZW4oJ1NTUycsbWF0Y2gxdG8zLG1hdGNoMyk7dmFyIHRva2VuO2Zvcih0b2tlbj0nU1NTUyc7dG9rZW4ubGVuZ3RoPD05O3Rva2VuKz0nUycpe2FkZFJlZ2V4VG9rZW4odG9rZW4sbWF0Y2hVbnNpZ25lZCk7fQpmdW5jdGlvbiBwYXJzZU1zKGlucHV0LGFycmF5KXthcnJheVtNSUxMSVNFQ09ORF09dG9JbnQoKCcwLicraW5wdXQpKjEwMDApO30KZm9yKHRva2VuPSdTJzt0b2tlbi5sZW5ndGg8PTk7dG9rZW4rPSdTJyl7YWRkUGFyc2VUb2tlbih0b2tlbixwYXJzZU1zKTt9CnZhciBnZXRTZXRNaWxsaXNlY29uZD1tYWtlR2V0U2V0KCdNaWxsaXNlY29uZHMnLGZhbHNlKTthZGRGb3JtYXRUb2tlbigneicsMCwwLCd6b25lQWJicicpO2FkZEZvcm1hdFRva2VuKCd6eicsMCwwLCd6b25lTmFtZScpO2Z1bmN0aW9uIGdldFpvbmVBYmJyKCl7cmV0dXJuIHRoaXMuX2lzVVRDPydVVEMnOicnO30KZnVuY3Rpb24gZ2V0Wm9uZU5hbWUoKXtyZXR1cm4gdGhpcy5faXNVVEM/J0Nvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lJzonJzt9CnZhciBwcm90bz1Nb21lbnQucHJvdG90eXBlO3Byb3RvLmFkZD1hZGQ7cHJvdG8uY2FsZW5kYXI9Y2FsZW5kYXIkMTtwcm90by5jbG9uZT1jbG9uZTtwcm90by5kaWZmPWRpZmY7cHJvdG8uZW5kT2Y9ZW5kT2Y7cHJvdG8uZm9ybWF0PWZvcm1hdDtwcm90by5mcm9tPWZyb207cHJvdG8uZnJvbU5vdz1mcm9tTm93O3Byb3RvLnRvPXRvO3Byb3RvLnRvTm93PXRvTm93O3Byb3RvLmdldD1zdHJpbmdHZXQ7cHJvdG8uaW52YWxpZEF0PWludmFsaWRBdDtwcm90by5pc0FmdGVyPWlzQWZ0ZXI7cHJvdG8uaXNCZWZvcmU9aXNCZWZvcmU7cHJvdG8uaXNCZXR3ZWVuPWlzQmV0d2Vlbjtwcm90by5pc1NhbWU9aXNTYW1lO3Byb3RvLmlzU2FtZU9yQWZ0ZXI9aXNTYW1lT3JBZnRlcjtwcm90by5pc1NhbWVPckJlZm9yZT1pc1NhbWVPckJlZm9yZTtwcm90by5pc1ZhbGlkPWlzVmFsaWQkMTtwcm90by5sYW5nPWxhbmc7cHJvdG8ubG9jYWxlPWxvY2FsZTtwcm90by5sb2NhbGVEYXRhPWxvY2FsZURhdGE7cHJvdG8ubWF4PXByb3RvdHlwZU1heDtwcm90by5taW49cHJvdG90eXBlTWluO3Byb3RvLnBhcnNpbmdGbGFncz1wYXJzaW5nRmxhZ3M7cHJvdG8uc2V0PXN0cmluZ1NldDtwcm90by5zdGFydE9mPXN0YXJ0T2Y7cHJvdG8uc3VidHJhY3Q9c3VidHJhY3Q7cHJvdG8udG9BcnJheT10b0FycmF5O3Byb3RvLnRvT2JqZWN0PXRvT2JqZWN0O3Byb3RvLnRvRGF0ZT10b0RhdGU7cHJvdG8udG9JU09TdHJpbmc9dG9JU09TdHJpbmc7cHJvdG8uaW5zcGVjdD1pbnNwZWN0O3Byb3RvLnRvSlNPTj10b0pTT047cHJvdG8udG9TdHJpbmc9dG9TdHJpbmc7cHJvdG8udW5peD11bml4O3Byb3RvLnZhbHVlT2Y9dmFsdWVPZjtwcm90by5jcmVhdGlvbkRhdGE9Y3JlYXRpb25EYXRhO3Byb3RvLnllYXI9Z2V0U2V0WWVhcjtwcm90by5pc0xlYXBZZWFyPWdldElzTGVhcFllYXI7cHJvdG8ud2Vla1llYXI9Z2V0U2V0V2Vla1llYXI7cHJvdG8uaXNvV2Vla1llYXI9Z2V0U2V0SVNPV2Vla1llYXI7cHJvdG8ucXVhcnRlcj1wcm90by5xdWFydGVycz1nZXRTZXRRdWFydGVyO3Byb3RvLm1vbnRoPWdldFNldE1vbnRoO3Byb3RvLmRheXNJbk1vbnRoPWdldERheXNJbk1vbnRoO3Byb3RvLndlZWs9cHJvdG8ud2Vla3M9Z2V0U2V0V2Vlaztwcm90by5pc29XZWVrPXByb3RvLmlzb1dlZWtzPWdldFNldElTT1dlZWs7cHJvdG8ud2Vla3NJblllYXI9Z2V0V2Vla3NJblllYXI7cHJvdG8uaXNvV2Vla3NJblllYXI9Z2V0SVNPV2Vla3NJblllYXI7cHJvdG8uZGF0ZT1nZXRTZXREYXlPZk1vbnRoO3Byb3RvLmRheT1wcm90by5kYXlzPWdldFNldERheU9mV2Vlaztwcm90by53ZWVrZGF5PWdldFNldExvY2FsZURheU9mV2Vlaztwcm90by5pc29XZWVrZGF5PWdldFNldElTT0RheU9mV2Vlaztwcm90by5kYXlPZlllYXI9Z2V0U2V0RGF5T2ZZZWFyO3Byb3RvLmhvdXI9cHJvdG8uaG91cnM9Z2V0U2V0SG91cjtwcm90by5taW51dGU9cHJvdG8ubWludXRlcz1nZXRTZXRNaW51dGU7cHJvdG8uc2Vjb25kPXByb3RvLnNlY29uZHM9Z2V0U2V0U2Vjb25kO3Byb3RvLm1pbGxpc2Vjb25kPXByb3RvLm1pbGxpc2Vjb25kcz1nZXRTZXRNaWxsaXNlY29uZDtwcm90by51dGNPZmZzZXQ9Z2V0U2V0T2Zmc2V0O3Byb3RvLnV0Yz1zZXRPZmZzZXRUb1VUQztwcm90by5sb2NhbD1zZXRPZmZzZXRUb0xvY2FsO3Byb3RvLnBhcnNlWm9uZT1zZXRPZmZzZXRUb1BhcnNlZE9mZnNldDtwcm90by5oYXNBbGlnbmVkSG91ck9mZnNldD1oYXNBbGlnbmVkSG91ck9mZnNldDtwcm90by5pc0RTVD1pc0RheWxpZ2h0U2F2aW5nVGltZTtwcm90by5pc0xvY2FsPWlzTG9jYWw7cHJvdG8uaXNVdGNPZmZzZXQ9aXNVdGNPZmZzZXQ7cHJvdG8uaXNVdGM9aXNVdGM7cHJvdG8uaXNVVEM9aXNVdGM7cHJvdG8uem9uZUFiYnI9Z2V0Wm9uZUFiYnI7cHJvdG8uem9uZU5hbWU9Z2V0Wm9uZU5hbWU7cHJvdG8uZGF0ZXM9ZGVwcmVjYXRlKCdkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLicsZ2V0U2V0RGF5T2ZNb250aCk7cHJvdG8ubW9udGhzPWRlcHJlY2F0ZSgnbW9udGhzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb250aCBpbnN0ZWFkJyxnZXRTZXRNb250aCk7cHJvdG8ueWVhcnM9ZGVwcmVjYXRlKCd5ZWFycyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgeWVhciBpbnN0ZWFkJyxnZXRTZXRZZWFyKTtwcm90by56b25lPWRlcHJlY2F0ZSgnbW9tZW50KCkuem9uZSBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50KCkudXRjT2Zmc2V0IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3Mvem9uZS8nLGdldFNldFpvbmUpO3Byb3RvLmlzRFNUU2hpZnRlZD1kZXByZWNhdGUoJ2lzRFNUU2hpZnRlZCBpcyBkZXByZWNhdGVkLiBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9kc3Qtc2hpZnRlZC8gZm9yIG1vcmUgaW5mb3JtYXRpb24nLGlzRGF5bGlnaHRTYXZpbmdUaW1lU2hpZnRlZCk7ZnVuY3Rpb24gY3JlYXRlVW5peChpbnB1dCl7cmV0dXJuIGNyZWF0ZUxvY2FsKGlucHV0KjEwMDApO30KZnVuY3Rpb24gY3JlYXRlSW5ab25lKCl7cmV0dXJuIGNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsYXJndW1lbnRzKS5wYXJzZVpvbmUoKTt9CmZ1bmN0aW9uIHByZVBhcnNlUG9zdEZvcm1hdChzdHJpbmcpe3JldHVybiBzdHJpbmc7fQp2YXIgcHJvdG8kMT1Mb2NhbGUucHJvdG90eXBlO3Byb3RvJDEuY2FsZW5kYXI9Y2FsZW5kYXI7cHJvdG8kMS5sb25nRGF0ZUZvcm1hdD1sb25nRGF0ZUZvcm1hdDtwcm90byQxLmludmFsaWREYXRlPWludmFsaWREYXRlO3Byb3RvJDEub3JkaW5hbD1vcmRpbmFsO3Byb3RvJDEucHJlcGFyc2U9cHJlUGFyc2VQb3N0Rm9ybWF0O3Byb3RvJDEucG9zdGZvcm1hdD1wcmVQYXJzZVBvc3RGb3JtYXQ7cHJvdG8kMS5yZWxhdGl2ZVRpbWU9cmVsYXRpdmVUaW1lO3Byb3RvJDEucGFzdEZ1dHVyZT1wYXN0RnV0dXJlO3Byb3RvJDEuc2V0PXNldDtwcm90byQxLm1vbnRocz1sb2NhbGVNb250aHM7cHJvdG8kMS5tb250aHNTaG9ydD1sb2NhbGVNb250aHNTaG9ydDtwcm90byQxLm1vbnRoc1BhcnNlPWxvY2FsZU1vbnRoc1BhcnNlO3Byb3RvJDEubW9udGhzUmVnZXg9bW9udGhzUmVnZXg7cHJvdG8kMS5tb250aHNTaG9ydFJlZ2V4PW1vbnRoc1Nob3J0UmVnZXg7cHJvdG8kMS53ZWVrPWxvY2FsZVdlZWs7cHJvdG8kMS5maXJzdERheU9mWWVhcj1sb2NhbGVGaXJzdERheU9mWWVhcjtwcm90byQxLmZpcnN0RGF5T2ZXZWVrPWxvY2FsZUZpcnN0RGF5T2ZXZWVrO3Byb3RvJDEud2Vla2RheXM9bG9jYWxlV2Vla2RheXM7cHJvdG8kMS53ZWVrZGF5c01pbj1sb2NhbGVXZWVrZGF5c01pbjtwcm90byQxLndlZWtkYXlzU2hvcnQ9bG9jYWxlV2Vla2RheXNTaG9ydDtwcm90byQxLndlZWtkYXlzUGFyc2U9bG9jYWxlV2Vla2RheXNQYXJzZTtwcm90byQxLndlZWtkYXlzUmVnZXg9d2Vla2RheXNSZWdleDtwcm90byQxLndlZWtkYXlzU2hvcnRSZWdleD13ZWVrZGF5c1Nob3J0UmVnZXg7cHJvdG8kMS53ZWVrZGF5c01pblJlZ2V4PXdlZWtkYXlzTWluUmVnZXg7cHJvdG8kMS5pc1BNPWxvY2FsZUlzUE07cHJvdG8kMS5tZXJpZGllbT1sb2NhbGVNZXJpZGllbTtmdW5jdGlvbiBnZXQkMShmb3JtYXQsaW5kZXgsZmllbGQsc2V0dGVyKXt2YXIgbG9jYWxlPWdldExvY2FsZSgpO3ZhciB1dGM9Y3JlYXRlVVRDKCkuc2V0KHNldHRlcixpbmRleCk7cmV0dXJuIGxvY2FsZVtmaWVsZF0odXRjLGZvcm1hdCk7fQpmdW5jdGlvbiBsaXN0TW9udGhzSW1wbChmb3JtYXQsaW5kZXgsZmllbGQpe2lmKGlzTnVtYmVyKGZvcm1hdCkpe2luZGV4PWZvcm1hdDtmb3JtYXQ9dW5kZWZpbmVkO30KZm9ybWF0PWZvcm1hdHx8Jyc7aWYoaW5kZXghPW51bGwpe3JldHVybiBnZXQkMShmb3JtYXQsaW5kZXgsZmllbGQsJ21vbnRoJyk7fQp2YXIgaTt2YXIgb3V0PVtdO2ZvcihpPTA7aTwxMjtpKyspe291dFtpXT1nZXQkMShmb3JtYXQsaSxmaWVsZCwnbW9udGgnKTt9CnJldHVybiBvdXQ7fQpmdW5jdGlvbiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCxmb3JtYXQsaW5kZXgsZmllbGQpe2lmKHR5cGVvZiBsb2NhbGVTb3J0ZWQ9PT0nYm9vbGVhbicpe2lmKGlzTnVtYmVyKGZvcm1hdCkpe2luZGV4PWZvcm1hdDtmb3JtYXQ9dW5kZWZpbmVkO30KZm9ybWF0PWZvcm1hdHx8Jyc7fWVsc2V7Zm9ybWF0PWxvY2FsZVNvcnRlZDtpbmRleD1mb3JtYXQ7bG9jYWxlU29ydGVkPWZhbHNlO2lmKGlzTnVtYmVyKGZvcm1hdCkpe2luZGV4PWZvcm1hdDtmb3JtYXQ9dW5kZWZpbmVkO30KZm9ybWF0PWZvcm1hdHx8Jyc7fQp2YXIgbG9jYWxlPWdldExvY2FsZSgpLHNoaWZ0PWxvY2FsZVNvcnRlZD9sb2NhbGUuX3dlZWsuZG93OjA7aWYoaW5kZXghPW51bGwpe3JldHVybiBnZXQkMShmb3JtYXQsKGluZGV4K3NoaWZ0KSU3LGZpZWxkLCdkYXknKTt9CnZhciBpO3ZhciBvdXQ9W107Zm9yKGk9MDtpPDc7aSsrKXtvdXRbaV09Z2V0JDEoZm9ybWF0LChpK3NoaWZ0KSU3LGZpZWxkLCdkYXknKTt9CnJldHVybiBvdXQ7fQpmdW5jdGlvbiBsaXN0TW9udGhzKGZvcm1hdCxpbmRleCl7cmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCxpbmRleCwnbW9udGhzJyk7fQpmdW5jdGlvbiBsaXN0TW9udGhzU2hvcnQoZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LGluZGV4LCdtb250aHNTaG9ydCcpO30KZnVuY3Rpb24gbGlzdFdlZWtkYXlzKGxvY2FsZVNvcnRlZCxmb3JtYXQsaW5kZXgpe3JldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCxmb3JtYXQsaW5kZXgsJ3dlZWtkYXlzJyk7fQpmdW5jdGlvbiBsaXN0V2Vla2RheXNTaG9ydChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LCd3ZWVrZGF5c1Nob3J0Jyk7fQpmdW5jdGlvbiBsaXN0V2Vla2RheXNNaW4obG9jYWxlU29ydGVkLGZvcm1hdCxpbmRleCl7cmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLGZvcm1hdCxpbmRleCwnd2Vla2RheXNNaW4nKTt9CmdldFNldEdsb2JhbExvY2FsZSgnZW4nLHtvcmRpbmFsUGFyc2U6L1xkezEsMn0odGh8c3R8bmR8cmQpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGI9bnVtYmVyJTEwLG91dHB1dD0odG9JbnQobnVtYmVyJTEwMC8xMCk9PT0xKT8ndGgnOihiPT09MSk/J3N0JzooYj09PTIpPyduZCc6KGI9PT0zKT8ncmQnOid0aCc7cmV0dXJuIG51bWJlcitvdXRwdXQ7fX0pO2hvb2tzLmxhbmc9ZGVwcmVjYXRlKCdtb21lbnQubGFuZyBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZSBpbnN0ZWFkLicsZ2V0U2V0R2xvYmFsTG9jYWxlKTtob29rcy5sYW5nRGF0YT1kZXByZWNhdGUoJ21vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4nLGdldExvY2FsZSk7dmFyIG1hdGhBYnM9TWF0aC5hYnM7ZnVuY3Rpb24gYWJzKCl7dmFyIGRhdGE9dGhpcy5fZGF0YTt0aGlzLl9taWxsaXNlY29uZHM9bWF0aEFicyh0aGlzLl9taWxsaXNlY29uZHMpO3RoaXMuX2RheXM9bWF0aEFicyh0aGlzLl9kYXlzKTt0aGlzLl9tb250aHM9bWF0aEFicyh0aGlzLl9tb250aHMpO2RhdGEubWlsbGlzZWNvbmRzPW1hdGhBYnMoZGF0YS5taWxsaXNlY29uZHMpO2RhdGEuc2Vjb25kcz1tYXRoQWJzKGRhdGEuc2Vjb25kcyk7ZGF0YS5taW51dGVzPW1hdGhBYnMoZGF0YS5taW51dGVzKTtkYXRhLmhvdXJzPW1hdGhBYnMoZGF0YS5ob3Vycyk7ZGF0YS5tb250aHM9bWF0aEFicyhkYXRhLm1vbnRocyk7ZGF0YS55ZWFycz1tYXRoQWJzKGRhdGEueWVhcnMpO3JldHVybiB0aGlzO30KZnVuY3Rpb24gYWRkU3VidHJhY3QkMShkdXJhdGlvbixpbnB1dCx2YWx1ZSxkaXJlY3Rpb24pe3ZhciBvdGhlcj1jcmVhdGVEdXJhdGlvbihpbnB1dCx2YWx1ZSk7ZHVyYXRpb24uX21pbGxpc2Vjb25kcys9ZGlyZWN0aW9uKm90aGVyLl9taWxsaXNlY29uZHM7ZHVyYXRpb24uX2RheXMrPWRpcmVjdGlvbipvdGhlci5fZGF5cztkdXJhdGlvbi5fbW9udGhzKz1kaXJlY3Rpb24qb3RoZXIuX21vbnRocztyZXR1cm4gZHVyYXRpb24uX2J1YmJsZSgpO30KZnVuY3Rpb24gYWRkJDEoaW5wdXQsdmFsdWUpe3JldHVybiBhZGRTdWJ0cmFjdCQxKHRoaXMsaW5wdXQsdmFsdWUsMSk7fQpmdW5jdGlvbiBzdWJ0cmFjdCQxKGlucHV0LHZhbHVlKXtyZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLGlucHV0LHZhbHVlLC0xKTt9CmZ1bmN0aW9uIGFic0NlaWwobnVtYmVyKXtpZihudW1iZXI8MCl7cmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTt9ZWxzZXtyZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7fX0KZnVuY3Rpb24gYnViYmxlKCl7dmFyIG1pbGxpc2Vjb25kcz10aGlzLl9taWxsaXNlY29uZHM7dmFyIGRheXM9dGhpcy5fZGF5czt2YXIgbW9udGhzPXRoaXMuX21vbnRoczt2YXIgZGF0YT10aGlzLl9kYXRhO3ZhciBzZWNvbmRzLG1pbnV0ZXMsaG91cnMseWVhcnMsbW9udGhzRnJvbURheXM7aWYoISgobWlsbGlzZWNvbmRzPj0wJiZkYXlzPj0wJiZtb250aHM+PTApfHwobWlsbGlzZWNvbmRzPD0wJiZkYXlzPD0wJiZtb250aHM8PTApKSl7bWlsbGlzZWNvbmRzKz1hYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHMpK2RheXMpKjg2NGU1O2RheXM9MDttb250aHM9MDt9CmRhdGEubWlsbGlzZWNvbmRzPW1pbGxpc2Vjb25kcyUxMDAwO3NlY29uZHM9YWJzRmxvb3IobWlsbGlzZWNvbmRzLzEwMDApO2RhdGEuc2Vjb25kcz1zZWNvbmRzJTYwO21pbnV0ZXM9YWJzRmxvb3Ioc2Vjb25kcy82MCk7ZGF0YS5taW51dGVzPW1pbnV0ZXMlNjA7aG91cnM9YWJzRmxvb3IobWludXRlcy82MCk7ZGF0YS5ob3Vycz1ob3VycyUyNDtkYXlzKz1hYnNGbG9vcihob3Vycy8yNCk7bW9udGhzRnJvbURheXM9YWJzRmxvb3IoZGF5c1RvTW9udGhzKGRheXMpKTttb250aHMrPW1vbnRoc0Zyb21EYXlzO2RheXMtPWFic0NlaWwobW9udGhzVG9EYXlzKG1vbnRoc0Zyb21EYXlzKSk7eWVhcnM9YWJzRmxvb3IobW9udGhzLzEyKTttb250aHMlPTEyO2RhdGEuZGF5cz1kYXlzO2RhdGEubW9udGhzPW1vbnRocztkYXRhLnllYXJzPXllYXJzO3JldHVybiB0aGlzO30KZnVuY3Rpb24gZGF5c1RvTW9udGhzKGRheXMpe3JldHVybiBkYXlzKjQ4MDAvMTQ2MDk3O30KZnVuY3Rpb24gbW9udGhzVG9EYXlzKG1vbnRocyl7cmV0dXJuIG1vbnRocyoxNDYwOTcvNDgwMDt9CmZ1bmN0aW9uIGFzKHVuaXRzKXt2YXIgZGF5czt2YXIgbW9udGhzO3ZhciBtaWxsaXNlY29uZHM9dGhpcy5fbWlsbGlzZWNvbmRzO3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtpZih1bml0cz09PSdtb250aCd8fHVuaXRzPT09J3llYXInKXtkYXlzPXRoaXMuX2RheXMrbWlsbGlzZWNvbmRzLzg2NGU1O21vbnRocz10aGlzLl9tb250aHMrZGF5c1RvTW9udGhzKGRheXMpO3JldHVybiB1bml0cz09PSdtb250aCc/bW9udGhzOm1vbnRocy8xMjt9ZWxzZXtkYXlzPXRoaXMuX2RheXMrTWF0aC5yb3VuZChtb250aHNUb0RheXModGhpcy5fbW9udGhzKSk7c3dpdGNoKHVuaXRzKXtjYXNlJ3dlZWsnOnJldHVybiBkYXlzLzcrbWlsbGlzZWNvbmRzLzYwNDhlNTtjYXNlJ2RheSc6cmV0dXJuIGRheXMrbWlsbGlzZWNvbmRzLzg2NGU1O2Nhc2UnaG91cic6cmV0dXJuIGRheXMqMjQrbWlsbGlzZWNvbmRzLzM2ZTU7Y2FzZSdtaW51dGUnOnJldHVybiBkYXlzKjE0NDArbWlsbGlzZWNvbmRzLzZlNDtjYXNlJ3NlY29uZCc6cmV0dXJuIGRheXMqODY0MDArbWlsbGlzZWNvbmRzLzEwMDA7Y2FzZSdtaWxsaXNlY29uZCc6cmV0dXJuIE1hdGguZmxvb3IoZGF5cyo4NjRlNSkrbWlsbGlzZWNvbmRzO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHVuaXQgJyt1bml0cyk7fX19CmZ1bmN0aW9uIHZhbHVlT2YkMSgpe3JldHVybih0aGlzLl9taWxsaXNlY29uZHMrCnRoaXMuX2RheXMqODY0ZTUrCih0aGlzLl9tb250aHMlMTIpKjI1OTJlNisKdG9JbnQodGhpcy5fbW9udGhzLzEyKSozMTUzNmU2KTt9CmZ1bmN0aW9uIG1ha2VBcyhhbGlhcyl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoYWxpYXMpO307fQp2YXIgYXNNaWxsaXNlY29uZHM9bWFrZUFzKCdtcycpO3ZhciBhc1NlY29uZHM9bWFrZUFzKCdzJyk7dmFyIGFzTWludXRlcz1tYWtlQXMoJ20nKTt2YXIgYXNIb3Vycz1tYWtlQXMoJ2gnKTt2YXIgYXNEYXlzPW1ha2VBcygnZCcpO3ZhciBhc1dlZWtzPW1ha2VBcygndycpO3ZhciBhc01vbnRocz1tYWtlQXMoJ00nKTt2YXIgYXNZZWFycz1tYWtlQXMoJ3knKTtmdW5jdGlvbiBnZXQkMih1bml0cyl7dW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpO3JldHVybiB0aGlzW3VuaXRzKydzJ10oKTt9CmZ1bmN0aW9uIG1ha2VHZXR0ZXIobmFtZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFbbmFtZV07fTt9CnZhciBtaWxsaXNlY29uZHM9bWFrZUdldHRlcignbWlsbGlzZWNvbmRzJyk7dmFyIHNlY29uZHM9bWFrZUdldHRlcignc2Vjb25kcycpO3ZhciBtaW51dGVzPW1ha2VHZXR0ZXIoJ21pbnV0ZXMnKTt2YXIgaG91cnM9bWFrZUdldHRlcignaG91cnMnKTt2YXIgZGF5cz1tYWtlR2V0dGVyKCdkYXlzJyk7dmFyIG1vbnRocz1tYWtlR2V0dGVyKCdtb250aHMnKTt2YXIgeWVhcnM9bWFrZUdldHRlcigneWVhcnMnKTtmdW5jdGlvbiB3ZWVrcygpe3JldHVybiBhYnNGbG9vcih0aGlzLmRheXMoKS83KTt9CnZhciByb3VuZD1NYXRoLnJvdW5kO3ZhciB0aHJlc2hvbGRzPXtzOjQ1LG06NDUsaDoyMixkOjI2LE06MTF9O2Z1bmN0aW9uIHN1YnN0aXR1dGVUaW1lQWdvKHN0cmluZyxudW1iZXIsd2l0aG91dFN1ZmZpeCxpc0Z1dHVyZSxsb2NhbGUpe3JldHVybiBsb2NhbGUucmVsYXRpdmVUaW1lKG51bWJlcnx8MSwhIXdpdGhvdXRTdWZmaXgsc3RyaW5nLGlzRnV0dXJlKTt9CmZ1bmN0aW9uIHJlbGF0aXZlVGltZSQxKHBvc05lZ0R1cmF0aW9uLHdpdGhvdXRTdWZmaXgsbG9jYWxlKXt2YXIgZHVyYXRpb249Y3JlYXRlRHVyYXRpb24ocG9zTmVnRHVyYXRpb24pLmFicygpO3ZhciBzZWNvbmRzPXJvdW5kKGR1cmF0aW9uLmFzKCdzJykpO3ZhciBtaW51dGVzPXJvdW5kKGR1cmF0aW9uLmFzKCdtJykpO3ZhciBob3Vycz1yb3VuZChkdXJhdGlvbi5hcygnaCcpKTt2YXIgZGF5cz1yb3VuZChkdXJhdGlvbi5hcygnZCcpKTt2YXIgbW9udGhzPXJvdW5kKGR1cmF0aW9uLmFzKCdNJykpO3ZhciB5ZWFycz1yb3VuZChkdXJhdGlvbi5hcygneScpKTt2YXIgYT1zZWNvbmRzPHRocmVzaG9sZHMucyYmWydzJyxzZWNvbmRzXXx8bWludXRlczw9MSYmWydtJ118fG1pbnV0ZXM8dGhyZXNob2xkcy5tJiZbJ21tJyxtaW51dGVzXXx8aG91cnM8PTEmJlsnaCddfHxob3Vyczx0aHJlc2hvbGRzLmgmJlsnaGgnLGhvdXJzXXx8ZGF5czw9MSYmWydkJ118fGRheXM8dGhyZXNob2xkcy5kJiZbJ2RkJyxkYXlzXXx8bW9udGhzPD0xJiZbJ00nXXx8bW9udGhzPHRocmVzaG9sZHMuTSYmWydNTScsbW9udGhzXXx8eWVhcnM8PTEmJlsneSddfHxbJ3l5Jyx5ZWFyc107YVsyXT13aXRob3V0U3VmZml4O2FbM109K3Bvc05lZ0R1cmF0aW9uPjA7YVs0XT1sb2NhbGU7cmV0dXJuIHN1YnN0aXR1dGVUaW1lQWdvLmFwcGx5KG51bGwsYSk7fQpmdW5jdGlvbiBnZXRTZXRSZWxhdGl2ZVRpbWVSb3VuZGluZyhyb3VuZGluZ0Z1bmN0aW9uKXtpZihyb3VuZGluZ0Z1bmN0aW9uPT09dW5kZWZpbmVkKXtyZXR1cm4gcm91bmQ7fQppZih0eXBlb2Yocm91bmRpbmdGdW5jdGlvbik9PT0nZnVuY3Rpb24nKXtyb3VuZD1yb3VuZGluZ0Z1bmN0aW9uO3JldHVybiB0cnVlO30KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkKHRocmVzaG9sZCxsaW1pdCl7aWYodGhyZXNob2xkc1t0aHJlc2hvbGRdPT09dW5kZWZpbmVkKXtyZXR1cm4gZmFsc2U7fQppZihsaW1pdD09PXVuZGVmaW5lZCl7cmV0dXJuIHRocmVzaG9sZHNbdGhyZXNob2xkXTt9CnRocmVzaG9sZHNbdGhyZXNob2xkXT1saW1pdDtyZXR1cm4gdHJ1ZTt9CmZ1bmN0aW9uIGh1bWFuaXplKHdpdGhTdWZmaXgpe3ZhciBsb2NhbGU9dGhpcy5sb2NhbGVEYXRhKCk7dmFyIG91dHB1dD1yZWxhdGl2ZVRpbWUkMSh0aGlzLCF3aXRoU3VmZml4LGxvY2FsZSk7aWYod2l0aFN1ZmZpeCl7b3V0cHV0PWxvY2FsZS5wYXN0RnV0dXJlKCt0aGlzLG91dHB1dCk7fQpyZXR1cm4gbG9jYWxlLnBvc3Rmb3JtYXQob3V0cHV0KTt9CnZhciBhYnMkMT1NYXRoLmFicztmdW5jdGlvbiB0b0lTT1N0cmluZyQxKCl7dmFyIHNlY29uZHM9YWJzJDEodGhpcy5fbWlsbGlzZWNvbmRzKS8xMDAwO3ZhciBkYXlzPWFicyQxKHRoaXMuX2RheXMpO3ZhciBtb250aHM9YWJzJDEodGhpcy5fbW9udGhzKTt2YXIgbWludXRlcyxob3Vycyx5ZWFyczttaW51dGVzPWFic0Zsb29yKHNlY29uZHMvNjApO2hvdXJzPWFic0Zsb29yKG1pbnV0ZXMvNjApO3NlY29uZHMlPTYwO21pbnV0ZXMlPTYwO3llYXJzPWFic0Zsb29yKG1vbnRocy8xMik7bW9udGhzJT0xMjt2YXIgWT15ZWFyczt2YXIgTT1tb250aHM7dmFyIEQ9ZGF5czt2YXIgaD1ob3Vyczt2YXIgbT1taW51dGVzO3ZhciBzPXNlY29uZHM7dmFyIHRvdGFsPXRoaXMuYXNTZWNvbmRzKCk7aWYoIXRvdGFsKXtyZXR1cm4nUDBEJzt9CnJldHVybih0b3RhbDwwPyctJzonJykrJ1AnKwooWT9ZKydZJzonJykrCihNP00rJ00nOicnKSsKKEQ/RCsnRCc6JycpKwooKGh8fG18fHMpPydUJzonJykrCihoP2grJ0gnOicnKSsKKG0/bSsnTSc6JycpKwoocz9zKydTJzonJyk7fQp2YXIgcHJvdG8kMj1EdXJhdGlvbi5wcm90b3R5cGU7cHJvdG8kMi5hYnM9YWJzO3Byb3RvJDIuYWRkPWFkZCQxO3Byb3RvJDIuc3VidHJhY3Q9c3VidHJhY3QkMTtwcm90byQyLmFzPWFzO3Byb3RvJDIuYXNNaWxsaXNlY29uZHM9YXNNaWxsaXNlY29uZHM7cHJvdG8kMi5hc1NlY29uZHM9YXNTZWNvbmRzO3Byb3RvJDIuYXNNaW51dGVzPWFzTWludXRlcztwcm90byQyLmFzSG91cnM9YXNIb3Vycztwcm90byQyLmFzRGF5cz1hc0RheXM7cHJvdG8kMi5hc1dlZWtzPWFzV2Vla3M7cHJvdG8kMi5hc01vbnRocz1hc01vbnRocztwcm90byQyLmFzWWVhcnM9YXNZZWFycztwcm90byQyLnZhbHVlT2Y9dmFsdWVPZiQxO3Byb3RvJDIuX2J1YmJsZT1idWJibGU7cHJvdG8kMi5nZXQ9Z2V0JDI7cHJvdG8kMi5taWxsaXNlY29uZHM9bWlsbGlzZWNvbmRzO3Byb3RvJDIuc2Vjb25kcz1zZWNvbmRzO3Byb3RvJDIubWludXRlcz1taW51dGVzO3Byb3RvJDIuaG91cnM9aG91cnM7cHJvdG8kMi5kYXlzPWRheXM7cHJvdG8kMi53ZWVrcz13ZWVrcztwcm90byQyLm1vbnRocz1tb250aHM7cHJvdG8kMi55ZWFycz15ZWFycztwcm90byQyLmh1bWFuaXplPWh1bWFuaXplO3Byb3RvJDIudG9JU09TdHJpbmc9dG9JU09TdHJpbmckMTtwcm90byQyLnRvU3RyaW5nPXRvSVNPU3RyaW5nJDE7cHJvdG8kMi50b0pTT049dG9JU09TdHJpbmckMTtwcm90byQyLmxvY2FsZT1sb2NhbGU7cHJvdG8kMi5sb2NhbGVEYXRhPWxvY2FsZURhdGE7cHJvdG8kMi50b0lzb1N0cmluZz1kZXByZWNhdGUoJ3RvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpJyx0b0lTT1N0cmluZyQxKTtwcm90byQyLmxhbmc9bGFuZzthZGRGb3JtYXRUb2tlbignWCcsMCwwLCd1bml4Jyk7YWRkRm9ybWF0VG9rZW4oJ3gnLDAsMCwndmFsdWVPZicpO2FkZFJlZ2V4VG9rZW4oJ3gnLG1hdGNoU2lnbmVkKTthZGRSZWdleFRva2VuKCdYJyxtYXRjaFRpbWVzdGFtcCk7YWRkUGFyc2VUb2tlbignWCcsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXtjb25maWcuX2Q9bmV3IERhdGUocGFyc2VGbG9hdChpbnB1dCwxMCkqMTAwMCk7fSk7YWRkUGFyc2VUb2tlbigneCcsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXtjb25maWcuX2Q9bmV3IERhdGUodG9JbnQoaW5wdXQpKTt9KTtob29rcy52ZXJzaW9uPScyLjE3LjEnO3NldEhvb2tDYWxsYmFjayhjcmVhdGVMb2NhbCk7aG9va3MuZm49cHJvdG87aG9va3MubWluPW1pbjtob29rcy5tYXg9bWF4O2hvb2tzLm5vdz1ub3c7aG9va3MudXRjPWNyZWF0ZVVUQztob29rcy51bml4PWNyZWF0ZVVuaXg7aG9va3MubW9udGhzPWxpc3RNb250aHM7aG9va3MuaXNEYXRlPWlzRGF0ZTtob29rcy5sb2NhbGU9Z2V0U2V0R2xvYmFsTG9jYWxlO2hvb2tzLmludmFsaWQ9Y3JlYXRlSW52YWxpZDtob29rcy5kdXJhdGlvbj1jcmVhdGVEdXJhdGlvbjtob29rcy5pc01vbWVudD1pc01vbWVudDtob29rcy53ZWVrZGF5cz1saXN0V2Vla2RheXM7aG9va3MucGFyc2Vab25lPWNyZWF0ZUluWm9uZTtob29rcy5sb2NhbGVEYXRhPWdldExvY2FsZTtob29rcy5pc0R1cmF0aW9uPWlzRHVyYXRpb247aG9va3MubW9udGhzU2hvcnQ9bGlzdE1vbnRoc1Nob3J0O2hvb2tzLndlZWtkYXlzTWluPWxpc3RXZWVrZGF5c01pbjtob29rcy5kZWZpbmVMb2NhbGU9ZGVmaW5lTG9jYWxlO2hvb2tzLnVwZGF0ZUxvY2FsZT11cGRhdGVMb2NhbGU7aG9va3MubG9jYWxlcz1saXN0TG9jYWxlcztob29rcy53ZWVrZGF5c1Nob3J0PWxpc3RXZWVrZGF5c1Nob3J0O2hvb2tzLm5vcm1hbGl6ZVVuaXRzPW5vcm1hbGl6ZVVuaXRzO2hvb2tzLnJlbGF0aXZlVGltZVJvdW5kaW5nPWdldFNldFJlbGF0aXZlVGltZVJvdW5kaW5nO2hvb2tzLnJlbGF0aXZlVGltZVRocmVzaG9sZD1nZXRTZXRSZWxhdGl2ZVRpbWVUaHJlc2hvbGQ7aG9va3MuY2FsZW5kYXJGb3JtYXQ9Z2V0Q2FsZW5kYXJGb3JtYXQ7aG9va3MucHJvdG90eXBlPXByb3RvO3JldHVybiBob29rczt9KSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qcXVlcnkvanF1ZXJ5LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXsidXNlIHN0cmljdCI7aWYodHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZ0eXBlb2YgbW9kdWxlLmV4cG9ydHM9PT0ib2JqZWN0Iil7bW9kdWxlLmV4cG9ydHM9Z2xvYmFsLmRvY3VtZW50P2ZhY3RvcnkoZ2xvYmFsLHRydWUpOmZ1bmN0aW9uKHcpe2lmKCF3LmRvY3VtZW50KXt0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTt9CnJldHVybiBmYWN0b3J5KHcpO307fWVsc2V7ZmFjdG9yeShnbG9iYWwpO319KSh0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93OnRoaXMsZnVuY3Rpb24od2luZG93LG5vR2xvYmFsKXsidXNlIHN0cmljdCI7dmFyIGFycj1bXTt2YXIgZG9jdW1lbnQ9d2luZG93LmRvY3VtZW50O3ZhciBnZXRQcm90bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Y7dmFyIHNsaWNlPWFyci5zbGljZTt2YXIgY29uY2F0PWFyci5jb25jYXQ7dmFyIHB1c2g9YXJyLnB1c2g7dmFyIGluZGV4T2Y9YXJyLmluZGV4T2Y7dmFyIGNsYXNzMnR5cGU9e307dmFyIHRvU3RyaW5nPWNsYXNzMnR5cGUudG9TdHJpbmc7dmFyIGhhc093bj1jbGFzczJ0eXBlLmhhc093blByb3BlcnR5O3ZhciBmblRvU3RyaW5nPWhhc093bi50b1N0cmluZzt2YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmc9Zm5Ub1N0cmluZy5jYWxsKE9iamVjdCk7dmFyIHN1cHBvcnQ9e307dmFyIGlzRnVuY3Rpb249ZnVuY3Rpb24gaXNGdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIiYmdHlwZW9mIG9iai5ub2RlVHlwZSE9PSJudW1iZXIiO307dmFyIGlzV2luZG93PWZ1bmN0aW9uIGlzV2luZG93KG9iail7cmV0dXJuIG9iaiE9bnVsbCYmb2JqPT09b2JqLndpbmRvdzt9O3ZhciBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzPXt0eXBlOnRydWUsc3JjOnRydWUsbm9Nb2R1bGU6dHJ1ZX07ZnVuY3Rpb24gRE9NRXZhbChjb2RlLGRvYyxub2RlKXtkb2M9ZG9jfHxkb2N1bWVudDt2YXIgaSxzY3JpcHQ9ZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3NjcmlwdC50ZXh0PWNvZGU7aWYobm9kZSl7Zm9yKGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyl7aWYobm9kZVtpXSl7c2NyaXB0W2ldPW5vZGVbaV07fX19CmRvYy5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO30KZnVuY3Rpb24gdG9UeXBlKG9iail7aWYob2JqPT1udWxsKXtyZXR1cm4gb2JqKyIiO30KcmV0dXJuIHR5cGVvZiBvYmo9PT0ib2JqZWN0Inx8dHlwZW9mIG9iaj09PSJmdW5jdGlvbiI/Y2xhc3MydHlwZVt0b1N0cmluZy5jYWxsKG9iaildfHwib2JqZWN0Ijp0eXBlb2Ygb2JqO30KdmFyCnZlcnNpb249IjMuMy4xIixqUXVlcnk9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdChzZWxlY3Rvcixjb250ZXh0KTt9LHJ0cmltPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztqUXVlcnkuZm49alF1ZXJ5LnByb3RvdHlwZT17anF1ZXJ5OnZlcnNpb24sY29uc3RydWN0b3I6alF1ZXJ5LGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTt9LGdldDpmdW5jdGlvbihudW0pe2lmKG51bT09bnVsbCl7cmV0dXJuIHNsaWNlLmNhbGwodGhpcyk7fQpyZXR1cm4gbnVtPDA/dGhpc1tudW0rdGhpcy5sZW5ndGhdOnRoaXNbbnVtXTt9LHB1c2hTdGFjazpmdW5jdGlvbihlbGVtcyl7dmFyIHJldD1qUXVlcnkubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGVsZW1zKTtyZXQucHJldk9iamVjdD10aGlzO3JldHVybiByZXQ7fSxlYWNoOmZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmVhY2godGhpcyxjYWxsYmFjayk7fSxtYXA6ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkubWFwKHRoaXMsZnVuY3Rpb24oZWxlbSxpKXtyZXR1cm4gY2FsbGJhY2suY2FsbChlbGVtLGksZWxlbSk7fSkpO30sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soc2xpY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKTt9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCk7fSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpO30sZXE6ZnVuY3Rpb24oaSl7dmFyIGxlbj10aGlzLmxlbmd0aCxqPStpKyhpPDA/bGVuOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhqPj0wJiZqPGxlbj9bdGhpc1tqXV06W10pO30sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcigpO30scHVzaDpwdXNoLHNvcnQ6YXJyLnNvcnQsc3BsaWNlOmFyci5zcGxpY2V9O2pRdWVyeS5leHRlbmQ9alF1ZXJ5LmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBvcHRpb25zLG5hbWUsc3JjLGNvcHksY29weUlzQXJyYXksY2xvbmUsdGFyZ2V0PWFyZ3VtZW50c1swXXx8e30saT0xLGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGRlZXA9ZmFsc2U7aWYodHlwZW9mIHRhcmdldD09PSJib29sZWFuIil7ZGVlcD10YXJnZXQ7dGFyZ2V0PWFyZ3VtZW50c1tpXXx8e307aSsrO30KaWYodHlwZW9mIHRhcmdldCE9PSJvYmplY3QiJiYhaXNGdW5jdGlvbih0YXJnZXQpKXt0YXJnZXQ9e307fQppZihpPT09bGVuZ3RoKXt0YXJnZXQ9dGhpcztpLS07fQpmb3IoO2k8bGVuZ3RoO2krKyl7aWYoKG9wdGlvbnM9YXJndW1lbnRzW2ldKSE9bnVsbCl7Zm9yKG5hbWUgaW4gb3B0aW9ucyl7c3JjPXRhcmdldFtuYW1lXTtjb3B5PW9wdGlvbnNbbmFtZV07aWYodGFyZ2V0PT09Y29weSl7Y29udGludWU7fQppZihkZWVwJiZjb3B5JiYoalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29weSl8fChjb3B5SXNBcnJheT1BcnJheS5pc0FycmF5KGNvcHkpKSkpe2lmKGNvcHlJc0FycmF5KXtjb3B5SXNBcnJheT1mYWxzZTtjbG9uZT1zcmMmJkFycmF5LmlzQXJyYXkoc3JjKT9zcmM6W107fWVsc2V7Y2xvbmU9c3JjJiZqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpP3NyYzp7fTt9CnRhcmdldFtuYW1lXT1qUXVlcnkuZXh0ZW5kKGRlZXAsY2xvbmUsY29weSk7fWVsc2UgaWYoY29weSE9PXVuZGVmaW5lZCl7dGFyZ2V0W25hbWVdPWNvcHk7fX19fQpyZXR1cm4gdGFyZ2V0O307alF1ZXJ5LmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisodmVyc2lvbitNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OnRydWUsZXJyb3I6ZnVuY3Rpb24obXNnKXt0aHJvdyBuZXcgRXJyb3IobXNnKTt9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24ob2JqKXt2YXIgcHJvdG8sQ3RvcjtpZighb2JqfHx0b1N0cmluZy5jYWxsKG9iaikhPT0iW29iamVjdCBPYmplY3RdIil7cmV0dXJuIGZhbHNlO30KcHJvdG89Z2V0UHJvdG8ob2JqKTtpZighcHJvdG8pe3JldHVybiB0cnVlO30KQ3Rvcj1oYXNPd24uY2FsbChwcm90bywiY29uc3RydWN0b3IiKSYmcHJvdG8uY29uc3RydWN0b3I7cmV0dXJuIHR5cGVvZiBDdG9yPT09ImZ1bmN0aW9uIiYmZm5Ub1N0cmluZy5jYWxsKEN0b3IpPT09T2JqZWN0RnVuY3Rpb25TdHJpbmc7fSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKG9iail7dmFyIG5hbWU7Zm9yKG5hbWUgaW4gb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oY29kZSl7RE9NRXZhbChjb2RlKTt9LGVhY2g6ZnVuY3Rpb24ob2JqLGNhbGxiYWNrKXt2YXIgbGVuZ3RoLGk9MDtpZihpc0FycmF5TGlrZShvYmopKXtsZW5ndGg9b2JqLmxlbmd0aDtmb3IoO2k8bGVuZ3RoO2krKyl7aWYoY2FsbGJhY2suY2FsbChvYmpbaV0saSxvYmpbaV0pPT09ZmFsc2Upe2JyZWFrO319fWVsc2V7Zm9yKGkgaW4gb2JqKXtpZihjYWxsYmFjay5jYWxsKG9ialtpXSxpLG9ialtpXSk9PT1mYWxzZSl7YnJlYWs7fX19CnJldHVybiBvYmo7fSx0cmltOmZ1bmN0aW9uKHRleHQpe3JldHVybiB0ZXh0PT1udWxsPyIiOih0ZXh0KyIiKS5yZXBsYWNlKHJ0cmltLCIiKTt9LG1ha2VBcnJheTpmdW5jdGlvbihhcnIscmVzdWx0cyl7dmFyIHJldD1yZXN1bHRzfHxbXTtpZihhcnIhPW51bGwpe2lmKGlzQXJyYXlMaWtlKE9iamVjdChhcnIpKSl7alF1ZXJ5Lm1lcmdlKHJldCx0eXBlb2YgYXJyPT09InN0cmluZyI/W2Fycl06YXJyKTt9ZWxzZXtwdXNoLmNhbGwocmV0LGFycik7fX0KcmV0dXJuIHJldDt9LGluQXJyYXk6ZnVuY3Rpb24oZWxlbSxhcnIsaSl7cmV0dXJuIGFycj09bnVsbD8tMTppbmRleE9mLmNhbGwoYXJyLGVsZW0saSk7fSxtZXJnZTpmdW5jdGlvbihmaXJzdCxzZWNvbmQpe3ZhciBsZW49K3NlY29uZC5sZW5ndGgsaj0wLGk9Zmlyc3QubGVuZ3RoO2Zvcig7ajxsZW47aisrKXtmaXJzdFtpKytdPXNlY29uZFtqXTt9CmZpcnN0Lmxlbmd0aD1pO3JldHVybiBmaXJzdDt9LGdyZXA6ZnVuY3Rpb24oZWxlbXMsY2FsbGJhY2ssaW52ZXJ0KXt2YXIgY2FsbGJhY2tJbnZlcnNlLG1hdGNoZXM9W10saT0wLGxlbmd0aD1lbGVtcy5sZW5ndGgsY2FsbGJhY2tFeHBlY3Q9IWludmVydDtmb3IoO2k8bGVuZ3RoO2krKyl7Y2FsbGJhY2tJbnZlcnNlPSFjYWxsYmFjayhlbGVtc1tpXSxpKTtpZihjYWxsYmFja0ludmVyc2UhPT1jYWxsYmFja0V4cGVjdCl7bWF0Y2hlcy5wdXNoKGVsZW1zW2ldKTt9fQpyZXR1cm4gbWF0Y2hlczt9LG1hcDpmdW5jdGlvbihlbGVtcyxjYWxsYmFjayxhcmcpe3ZhciBsZW5ndGgsdmFsdWUsaT0wLHJldD1bXTtpZihpc0FycmF5TGlrZShlbGVtcykpe2xlbmd0aD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe3ZhbHVlPWNhbGxiYWNrKGVsZW1zW2ldLGksYXJnKTtpZih2YWx1ZSE9bnVsbCl7cmV0LnB1c2godmFsdWUpO319fWVsc2V7Zm9yKGkgaW4gZWxlbXMpe3ZhbHVlPWNhbGxiYWNrKGVsZW1zW2ldLGksYXJnKTtpZih2YWx1ZSE9bnVsbCl7cmV0LnB1c2godmFsdWUpO319fQpyZXR1cm4gY29uY2F0LmFwcGx5KFtdLHJldCk7fSxndWlkOjEsc3VwcG9ydDpzdXBwb3J0fSk7aWYodHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiIpe2pRdWVyeS5mbltTeW1ib2wuaXRlcmF0b3JdPWFycltTeW1ib2wuaXRlcmF0b3JdO30KalF1ZXJ5LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGksbmFtZSl7Y2xhc3MydHlwZVsiW29iamVjdCAiK25hbWUrIl0iXT1uYW1lLnRvTG93ZXJDYXNlKCk7fSk7ZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXt2YXIgbGVuZ3RoPSEhb2JqJiYibGVuZ3RoImluIG9iaiYmb2JqLmxlbmd0aCx0eXBlPXRvVHlwZShvYmopO2lmKGlzRnVuY3Rpb24ob2JqKXx8aXNXaW5kb3cob2JqKSl7cmV0dXJuIGZhbHNlO30KcmV0dXJuIHR5cGU9PT0iYXJyYXkifHxsZW5ndGg9PT0wfHx0eXBlb2YgbGVuZ3RoPT09Im51bWJlciImJmxlbmd0aD4wJiYobGVuZ3RoLTEpaW4gb2JqO30KdmFyIFNpenpsZT0oZnVuY3Rpb24od2luZG93KXt2YXIgaSxzdXBwb3J0LEV4cHIsZ2V0VGV4dCxpc1hNTCx0b2tlbml6ZSxjb21waWxlLHNlbGVjdCxvdXRlcm1vc3RDb250ZXh0LHNvcnRJbnB1dCxoYXNEdXBsaWNhdGUsc2V0RG9jdW1lbnQsZG9jdW1lbnQsZG9jRWxlbSxkb2N1bWVudElzSFRNTCxyYnVnZ3lRU0EscmJ1Z2d5TWF0Y2hlcyxtYXRjaGVzLGNvbnRhaW5zLGV4cGFuZG89InNpenpsZSIrMSpuZXcgRGF0ZSgpLHByZWZlcnJlZERvYz13aW5kb3cuZG9jdW1lbnQsZGlycnVucz0wLGRvbmU9MCxjbGFzc0NhY2hlPWNyZWF0ZUNhY2hlKCksdG9rZW5DYWNoZT1jcmVhdGVDYWNoZSgpLGNvbXBpbGVyQ2FjaGU9Y3JlYXRlQ2FjaGUoKSxzb3J0T3JkZXI9ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7fQpyZXR1cm4gMDt9LGhhc093bj0oe30pLmhhc093blByb3BlcnR5LGFycj1bXSxwb3A9YXJyLnBvcCxwdXNoX25hdGl2ZT1hcnIucHVzaCxwdXNoPWFyci5wdXNoLHNsaWNlPWFyci5zbGljZSxpbmRleE9mPWZ1bmN0aW9uKGxpc3QsZWxlbSl7dmFyIGk9MCxsZW49bGlzdC5sZW5ndGg7Zm9yKDtpPGxlbjtpKyspe2lmKGxpc3RbaV09PT1lbGVtKXtyZXR1cm4gaTt9fQpyZXR1cm4tMTt9LGJvb2xlYW5zPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsd2hpdGVzcGFjZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsaWRlbnRpZmllcj0iKD86XFxcXC58W1xcdy1dfFteXDAtXFx4YTBdKSsiLGF0dHJpYnV0ZXM9IlxcWyIrd2hpdGVzcGFjZSsiKigiK2lkZW50aWZpZXIrIikoPzoiK3doaXRlc3BhY2UrIiooWypeJHwhfl0/PSkiK3doaXRlc3BhY2UrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitpZGVudGlmaWVyKyIpKXwpIit3aGl0ZXNwYWNlKyIqXFxdIixwc2V1ZG9zPSI6KCIraWRlbnRpZmllcisiKSg/OlxcKCgiKyIoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCIrIigoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrYXR0cmlidXRlcysiKSopfCIrIi4qIisiKVxcKXwpIixyd2hpdGVzcGFjZT1uZXcgUmVnRXhwKHdoaXRlc3BhY2UrIisiLCJnIikscnRyaW09bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIit3aGl0ZXNwYWNlKyIrJCIsImciKSxyY29tbWE9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKiwiK3doaXRlc3BhY2UrIioiKSxyY29tYmluYXRvcnM9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKihbPit+XXwiK3doaXRlc3BhY2UrIikiK3doaXRlc3BhY2UrIioiKSxyYXR0cmlidXRlUXVvdGVzPW5ldyBSZWdFeHAoIj0iK3doaXRlc3BhY2UrIiooW15cXF0nXCJdKj8pIit3aGl0ZXNwYWNlKyIqXFxdIiwiZyIpLHJwc2V1ZG89bmV3IFJlZ0V4cChwc2V1ZG9zKSxyaWRlbnRpZmllcj1uZXcgUmVnRXhwKCJeIitpZGVudGlmaWVyKyIkIiksbWF0Y2hFeHByPXsiSUQiOm5ldyBSZWdFeHAoIl4jKCIraWRlbnRpZmllcisiKSIpLCJDTEFTUyI6bmV3IFJlZ0V4cCgiXlxcLigiK2lkZW50aWZpZXIrIikiKSwiVEFHIjpuZXcgUmVnRXhwKCJeKCIraWRlbnRpZmllcisifFsqXSkiKSwiQVRUUiI6bmV3IFJlZ0V4cCgiXiIrYXR0cmlidXRlcyksIlBTRVVETyI6bmV3IFJlZ0V4cCgiXiIrcHNldWRvcyksIkNISUxEIjpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK3doaXRlc3BhY2UrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK3doaXRlc3BhY2UrIiooPzooWystXXwpIit3aGl0ZXNwYWNlKyIqKFxcZCspfCkpIit3aGl0ZXNwYWNlKyIqXFwpfCkiLCJpIiksImJvb2wiOm5ldyBSZWdFeHAoIl4oPzoiK2Jvb2xlYW5zKyIpJCIsImkiKSwibmVlZHNDb250ZXh0IjpuZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiKwp3aGl0ZXNwYWNlKyIqKCg/Oi1cXGQpP1xcZCopIit3aGl0ZXNwYWNlKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxyaW5wdXRzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2kscmhlYWRlcj0vXmhcZCQvaSxybmF0aXZlPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxycXVpY2tFeHByPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8scnNpYmxpbmc9L1srfl0vLHJ1bmVzY2FwZT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK3doaXRlc3BhY2UrIj98KCIrd2hpdGVzcGFjZSsiKXwuKSIsImlnIiksZnVuZXNjYXBlPWZ1bmN0aW9uKF8sZXNjYXBlZCxlc2NhcGVkV2hpdGVzcGFjZSl7dmFyIGhpZ2g9IjB4Iitlc2NhcGVkLTB4MTAwMDA7cmV0dXJuIGhpZ2ghPT1oaWdofHxlc2NhcGVkV2hpdGVzcGFjZT9lc2NhcGVkOmhpZ2g8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKGhpZ2grMHgxMDAwMCk6U3RyaW5nLmZyb21DaGFyQ29kZShoaWdoPj4xMHwweEQ4MDAsaGlnaCYweDNGRnwweERDMDApO30scmNzc2VzY2FwZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxmY3NzZXNjYXBlPWZ1bmN0aW9uKGNoLGFzQ29kZVBvaW50KXtpZihhc0NvZGVQb2ludCl7aWYoY2g9PT0iXDAiKXtyZXR1cm4iXHVGRkZEIjt9CnJldHVybiBjaC5zbGljZSgwLC0xKSsiXFwiK2NoLmNoYXJDb2RlQXQoY2gubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI7fQpyZXR1cm4iXFwiK2NoO30sdW5sb2FkSGFuZGxlcj1mdW5jdGlvbigpe3NldERvY3VtZW50KCk7fSxkaXNhYmxlZEFuY2VzdG9yPWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT10cnVlJiYoImZvcm0iaW4gZWxlbXx8ImxhYmVsImluIGVsZW0pO30se2RpcjoicGFyZW50Tm9kZSIsbmV4dDoibGVnZW5kIn0pO3RyeXtwdXNoLmFwcGx5KChhcnI9c2xpY2UuY2FsbChwcmVmZXJyZWREb2MuY2hpbGROb2RlcykpLHByZWZlcnJlZERvYy5jaGlsZE5vZGVzKTthcnJbcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZTt9Y2F0Y2goZSl7cHVzaD17YXBwbHk6YXJyLmxlbmd0aD9mdW5jdGlvbih0YXJnZXQsZWxzKXtwdXNoX25hdGl2ZS5hcHBseSh0YXJnZXQsc2xpY2UuY2FsbChlbHMpKTt9OmZ1bmN0aW9uKHRhcmdldCxlbHMpe3ZhciBqPXRhcmdldC5sZW5ndGgsaT0wO3doaWxlKCh0YXJnZXRbaisrXT1lbHNbaSsrXSkpe30KdGFyZ2V0Lmxlbmd0aD1qLTE7fX07fQpmdW5jdGlvbiBTaXp6bGUoc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3ZhciBtLGksZWxlbSxuaWQsbWF0Y2gsZ3JvdXBzLG5ld1NlbGVjdG9yLG5ld0NvbnRleHQ9Y29udGV4dCYmY29udGV4dC5vd25lckRvY3VtZW50LG5vZGVUeXBlPWNvbnRleHQ/Y29udGV4dC5ub2RlVHlwZTo5O3Jlc3VsdHM9cmVzdWx0c3x8W107aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyJ8fCFzZWxlY3Rvcnx8bm9kZVR5cGUhPT0xJiZub2RlVHlwZSE9PTkmJm5vZGVUeXBlIT09MTEpe3JldHVybiByZXN1bHRzO30KaWYoIXNlZWQpe2lmKChjb250ZXh0P2NvbnRleHQub3duZXJEb2N1bWVudHx8Y29udGV4dDpwcmVmZXJyZWREb2MpIT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGNvbnRleHQpO30KY29udGV4dD1jb250ZXh0fHxkb2N1bWVudDtpZihkb2N1bWVudElzSFRNTCl7aWYobm9kZVR5cGUhPT0xMSYmKG1hdGNoPXJxdWlja0V4cHIuZXhlYyhzZWxlY3RvcikpKXtpZigobT1tYXRjaFsxXSkpe2lmKG5vZGVUeXBlPT09OSl7aWYoKGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChtKSkpe2lmKGVsZW0uaWQ9PT1tKXtyZXN1bHRzLnB1c2goZWxlbSk7cmV0dXJuIHJlc3VsdHM7fX1lbHNle3JldHVybiByZXN1bHRzO319ZWxzZXtpZihuZXdDb250ZXh0JiYoZWxlbT1uZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKG0pKSYmY29udGFpbnMoY29udGV4dCxlbGVtKSYmZWxlbS5pZD09PW0pe3Jlc3VsdHMucHVzaChlbGVtKTtyZXR1cm4gcmVzdWx0czt9fX1lbHNlIGlmKG1hdGNoWzJdKXtwdXNoLmFwcGx5KHJlc3VsdHMsY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3RvcikpO3JldHVybiByZXN1bHRzO31lbHNlIGlmKChtPW1hdGNoWzNdKSYmc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3B1c2guYXBwbHkocmVzdWx0cyxjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobSkpO3JldHVybiByZXN1bHRzO319CmlmKHN1cHBvcnQucXNhJiYhY29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdJiYoIXJidWdneVFTQXx8IXJidWdneVFTQS50ZXN0KHNlbGVjdG9yKSkpe2lmKG5vZGVUeXBlIT09MSl7bmV3Q29udGV4dD1jb250ZXh0O25ld1NlbGVjdG9yPXNlbGVjdG9yO31lbHNlIGlmKGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJvYmplY3QiKXtpZigobmlkPWNvbnRleHQuZ2V0QXR0cmlidXRlKCJpZCIpKSl7bmlkPW5pZC5yZXBsYWNlKHJjc3Nlc2NhcGUsZmNzc2VzY2FwZSk7fWVsc2V7Y29udGV4dC5zZXRBdHRyaWJ1dGUoImlkIiwobmlkPWV4cGFuZG8pKTt9Cmdyb3Vwcz10b2tlbml6ZShzZWxlY3Rvcik7aT1ncm91cHMubGVuZ3RoO3doaWxlKGktLSl7Z3JvdXBzW2ldPSIjIituaWQrIiAiK3RvU2VsZWN0b3IoZ3JvdXBzW2ldKTt9Cm5ld1NlbGVjdG9yPWdyb3Vwcy5qb2luKCIsIik7bmV3Q29udGV4dD1yc2libGluZy50ZXN0KHNlbGVjdG9yKSYmdGVzdENvbnRleHQoY29udGV4dC5wYXJlbnROb2RlKXx8Y29udGV4dDt9CmlmKG5ld1NlbGVjdG9yKXt0cnl7cHVzaC5hcHBseShyZXN1bHRzLG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbChuZXdTZWxlY3RvcikpO3JldHVybiByZXN1bHRzO31jYXRjaChxc2FFcnJvcil7fWZpbmFsbHl7aWYobmlkPT09ZXhwYW5kbyl7Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fX19fX19CnJldHVybiBzZWxlY3Qoc2VsZWN0b3IucmVwbGFjZShydHJpbSwiJDEiKSxjb250ZXh0LHJlc3VsdHMsc2VlZCk7fQpmdW5jdGlvbiBjcmVhdGVDYWNoZSgpe3ZhciBrZXlzPVtdO2Z1bmN0aW9uIGNhY2hlKGtleSx2YWx1ZSl7aWYoa2V5cy5wdXNoKGtleSsiICIpPkV4cHIuY2FjaGVMZW5ndGgpe2RlbGV0ZSBjYWNoZVtrZXlzLnNoaWZ0KCldO30KcmV0dXJuKGNhY2hlW2tleSsiICJdPXZhbHVlKTt9CnJldHVybiBjYWNoZTt9CmZ1bmN0aW9uIG1hcmtGdW5jdGlvbihmbil7Zm5bZXhwYW5kb109dHJ1ZTtyZXR1cm4gZm47fQpmdW5jdGlvbiBhc3NlcnQoZm4pe3ZhciBlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpO3RyeXtyZXR1cm4hIWZuKGVsKTt9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlO31maW5hbGx5e2lmKGVsLnBhcmVudE5vZGUpe2VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO30KZWw9bnVsbDt9fQpmdW5jdGlvbiBhZGRIYW5kbGUoYXR0cnMsaGFuZGxlcil7dmFyIGFycj1hdHRycy5zcGxpdCgifCIpLGk9YXJyLmxlbmd0aDt3aGlsZShpLS0pe0V4cHIuYXR0ckhhbmRsZVthcnJbaV1dPWhhbmRsZXI7fX0KZnVuY3Rpb24gc2libGluZ0NoZWNrKGEsYil7dmFyIGN1cj1iJiZhLGRpZmY9Y3VyJiZhLm5vZGVUeXBlPT09MSYmYi5ub2RlVHlwZT09PTEmJmEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihkaWZmKXtyZXR1cm4gZGlmZjt9CmlmKGN1cil7d2hpbGUoKGN1cj1jdXIubmV4dFNpYmxpbmcpKXtpZihjdXI9PT1iKXtyZXR1cm4tMTt9fX0KcmV0dXJuIGE/MTotMTt9CmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKHR5cGUpe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT10eXBlO307fQpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obmFtZT09PSJpbnB1dCJ8fG5hbWU9PT0iYnV0dG9uIikmJmVsZW0udHlwZT09PXR5cGU7fTt9CmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKGRpc2FibGVkKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7aWYoImZvcm0iaW4gZWxlbSl7aWYoZWxlbS5wYXJlbnROb2RlJiZlbGVtLmRpc2FibGVkPT09ZmFsc2Upe2lmKCJsYWJlbCJpbiBlbGVtKXtpZigibGFiZWwiaW4gZWxlbS5wYXJlbnROb2RlKXtyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkPT09ZGlzYWJsZWQ7fWVsc2V7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9fQpyZXR1cm4gZWxlbS5pc0Rpc2FibGVkPT09ZGlzYWJsZWR8fGVsZW0uaXNEaXNhYmxlZCE9PSFkaXNhYmxlZCYmZGlzYWJsZWRBbmNlc3RvcihlbGVtKT09PWRpc2FibGVkO30KcmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9ZWxzZSBpZigibGFiZWwiaW4gZWxlbSl7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmbil7cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihhcmd1bWVudCl7YXJndW1lbnQ9K2FyZ3VtZW50O3JldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzKXt2YXIgaixtYXRjaEluZGV4ZXM9Zm4oW10sc2VlZC5sZW5ndGgsYXJndW1lbnQpLGk9bWF0Y2hJbmRleGVzLmxlbmd0aDt3aGlsZShpLS0pe2lmKHNlZWRbKGo9bWF0Y2hJbmRleGVzW2ldKV0pe3NlZWRbal09IShtYXRjaGVzW2pdPXNlZWRbal0pO319fSk7fSk7fQpmdW5jdGlvbiB0ZXN0Q29udGV4dChjb250ZXh0KXtyZXR1cm4gY29udGV4dCYmdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT0idW5kZWZpbmVkIiYmY29udGV4dDt9CnN1cHBvcnQ9U2l6emxlLnN1cHBvcnQ9e307aXNYTUw9U2l6emxlLmlzWE1MPWZ1bmN0aW9uKGVsZW0pe3ZhciBkb2N1bWVudEVsZW1lbnQ9ZWxlbSYmKGVsZW0ub3duZXJEb2N1bWVudHx8ZWxlbSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBkb2N1bWVudEVsZW1lbnQ/ZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlO307c2V0RG9jdW1lbnQ9U2l6emxlLnNldERvY3VtZW50PWZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNDb21wYXJlLHN1YldpbmRvdyxkb2M9bm9kZT9ub2RlLm93bmVyRG9jdW1lbnR8fG5vZGU6cHJlZmVycmVkRG9jO2lmKGRvYz09PWRvY3VtZW50fHxkb2Mubm9kZVR5cGUhPT05fHwhZG9jLmRvY3VtZW50RWxlbWVudCl7cmV0dXJuIGRvY3VtZW50O30KZG9jdW1lbnQ9ZG9jO2RvY0VsZW09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2RvY3VtZW50SXNIVE1MPSFpc1hNTChkb2N1bWVudCk7aWYocHJlZmVycmVkRG9jIT09ZG9jdW1lbnQmJihzdWJXaW5kb3c9ZG9jdW1lbnQuZGVmYXVsdFZpZXcpJiZzdWJXaW5kb3cudG9wIT09c3ViV2luZG93KXtpZihzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsdW5sb2FkSGFuZGxlcixmYWxzZSk7fWVsc2UgaWYoc3ViV2luZG93LmF0dGFjaEV2ZW50KXtzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix1bmxvYWRIYW5kbGVyKTt9fQpzdXBwb3J0LmF0dHJpYnV0ZXM9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5jbGFzc05hbWU9ImkiO3JldHVybiFlbC5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7cmV0dXJuIWVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1ybmF0aXZlLnRlc3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSk7c3VwcG9ydC5nZXRCeUlkPWFzc2VydChmdW5jdGlvbihlbCl7ZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuaWQ9ZXhwYW5kbztyZXR1cm4hZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWV8fCFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShleHBhbmRvKS5sZW5ndGg7fSk7aWYoc3VwcG9ydC5nZXRCeUlkKXtFeHByLmZpbHRlclsiSUQiXT1mdW5jdGlvbihpZCl7dmFyIGF0dHJJZD1pZC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIik9PT1hdHRySWQ7fTt9O0V4cHIuZmluZFsiSUQiXT1mdW5jdGlvbihpZCxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudElzSFRNTCl7dmFyIGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChpZCk7cmV0dXJuIGVsZW0/W2VsZW1dOltdO319O31lbHNle0V4cHIuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGlkKXt2YXIgYXR0cklkPWlkLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBub2RlPXR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBub2RlJiZub2RlLnZhbHVlPT09YXR0cklkO307fTtFeHByLmZpbmRbIklEIl09ZnVuY3Rpb24oaWQsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3ZhciBub2RlLGksZWxlbXMsZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKGlkKTtpZihlbGVtKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXTt9CmVsZW1zPWNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoaWQpO2k9MDt3aGlsZSgoZWxlbT1lbGVtc1tpKytdKSl7bm9kZT1lbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7aWYobm9kZSYmbm9kZS52YWx1ZT09PWlkKXtyZXR1cm5bZWxlbV07fX19CnJldHVybltdO319O30KRXhwci5maW5kWyJUQUciXT1zdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKHRhZyxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpO31lbHNlIGlmKHN1cHBvcnQucXNhKXtyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHRhZyk7fX06ZnVuY3Rpb24odGFnLGNvbnRleHQpe3ZhciBlbGVtLHRtcD1bXSxpPTAscmVzdWx0cz1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyk7aWYodGFnPT09IioiKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtLm5vZGVUeXBlPT09MSl7dG1wLnB1c2goZWxlbSk7fX0KcmV0dXJuIHRtcDt9CnJldHVybiByZXN1bHRzO307RXhwci5maW5kWyJDTEFTUyJdPXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oY2xhc3NOYW1lLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTt9fTtyYnVnZ3lNYXRjaGVzPVtdO3JidWdneVFTQT1bXTtpZigoc3VwcG9ydC5xc2E9cm5hdGl2ZS50ZXN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpKSl7YXNzZXJ0KGZ1bmN0aW9uKGVsKXtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5pbm5lckhUTUw9IjxhIGlkPSciK2V4cGFuZG8rIic+PC9hPiIrIjxzZWxlY3QgaWQ9JyIrZXhwYW5kbysiLVxyXFwnIG1zYWxsb3djYXB0dXJlPScnPiIrIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlsqXiRdPSIrd2hpdGVzcGFjZSsiKig/OicnfFwiXCIpIik7fQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlxcWyIrd2hpdGVzcGFjZSsiKig/OnZhbHVlfCIrYm9vbGVhbnMrIikiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrZXhwYW5kbysiLV0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJ+PSIpO30KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrZXhwYW5kbysiKyoiKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCIuIy4rWyt+XSIpO319KTthc3NlcnQoZnVuY3Rpb24oZWwpe2VsLmlubmVySFRNTD0iPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT4iKyI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+Ijt2YXIgaW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKTtlbC5hcHBlbmRDaGlsZChpbnB1dCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpO2lmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgibmFtZSIrd2hpdGVzcGFjZSsiKlsqXiR8IX5dPz0iKTt9CmlmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoIT09Mil7cmJ1Z2d5UVNBLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIik7fQpkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5kaXNhYmxlZD10cnVlO2lmKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpkaXNhYmxlZCIpLmxlbmd0aCE9PTIpe3JidWdneVFTQS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpO30KZWwucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpO3JidWdneVFTQS5wdXNoKCIsLio6Iik7fSk7fQppZigoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3I9cm5hdGl2ZS50ZXN0KChtYXRjaGVzPWRvY0VsZW0ubWF0Y2hlc3x8ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3J8fGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpKSkpe2Fzc2VydChmdW5jdGlvbihlbCl7c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaD1tYXRjaGVzLmNhbGwoZWwsIioiKTttYXRjaGVzLmNhbGwoZWwsIltzIT0nJ106eCIpO3JidWdneU1hdGNoZXMucHVzaCgiIT0iLHBzZXVkb3MpO30pO30KcmJ1Z2d5UVNBPXJidWdneVFTQS5sZW5ndGgmJm5ldyBSZWdFeHAocmJ1Z2d5UVNBLmpvaW4oInwiKSk7cmJ1Z2d5TWF0Y2hlcz1yYnVnZ3lNYXRjaGVzLmxlbmd0aCYmbmV3IFJlZ0V4cChyYnVnZ3lNYXRjaGVzLmpvaW4oInwiKSk7aGFzQ29tcGFyZT1ybmF0aXZlLnRlc3QoZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik7Y29udGFpbnM9aGFzQ29tcGFyZXx8cm5hdGl2ZS50ZXN0KGRvY0VsZW0uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGFkb3duPWEubm9kZVR5cGU9PT05P2EuZG9jdW1lbnRFbGVtZW50OmEsYnVwPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWJ1cHx8ISEoYnVwJiZidXAubm9kZVR5cGU9PT0xJiYoYWRvd24uY29udGFpbnM/YWRvd24uY29udGFpbnMoYnVwKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGJ1cCkmMTYpKTt9OmZ1bmN0aW9uKGEsYil7aWYoYil7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSl7aWYoYj09PWEpe3JldHVybiB0cnVlO319fQpyZXR1cm4gZmFsc2U7fTtzb3J0T3JkZXI9aGFzQ29tcGFyZT9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZTtyZXR1cm4gMDt9CnZhciBjb21wYXJlPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO2lmKGNvbXBhcmUpe3JldHVybiBjb21wYXJlO30KY29tcGFyZT0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MTtpZihjb21wYXJlJjF8fCghc3VwcG9ydC5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1jb21wYXJlKSl7aWYoYT09PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQ9PT1wcmVmZXJyZWREb2MmJmNvbnRhaW5zKHByZWZlcnJlZERvYyxhKSl7cmV0dXJuLTE7fQppZihiPT09ZG9jdW1lbnR8fGIub3duZXJEb2N1bWVudD09PXByZWZlcnJlZERvYyYmY29udGFpbnMocHJlZmVycmVkRG9jLGIpKXtyZXR1cm4gMTt9CnJldHVybiBzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO30KcmV0dXJuIGNvbXBhcmUmND8tMToxO306ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7cmV0dXJuIDA7fQp2YXIgY3VyLGk9MCxhdXA9YS5wYXJlbnROb2RlLGJ1cD1iLnBhcmVudE5vZGUsYXA9W2FdLGJwPVtiXTtpZighYXVwfHwhYnVwKXtyZXR1cm4gYT09PWRvY3VtZW50Py0xOmI9PT1kb2N1bWVudD8xOmF1cD8tMTpidXA/MTpzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO31lbHNlIGlmKGF1cD09PWJ1cCl7cmV0dXJuIHNpYmxpbmdDaGVjayhhLGIpO30KY3VyPWE7d2hpbGUoKGN1cj1jdXIucGFyZW50Tm9kZSkpe2FwLnVuc2hpZnQoY3VyKTt9CmN1cj1iO3doaWxlKChjdXI9Y3VyLnBhcmVudE5vZGUpKXticC51bnNoaWZ0KGN1cik7fQp3aGlsZShhcFtpXT09PWJwW2ldKXtpKys7fQpyZXR1cm4gaT9zaWJsaW5nQ2hlY2soYXBbaV0sYnBbaV0pOmFwW2ldPT09cHJlZmVycmVkRG9jPy0xOmJwW2ldPT09cHJlZmVycmVkRG9jPzE6MDt9O3JldHVybiBkb2N1bWVudDt9O1NpenpsZS5tYXRjaGVzPWZ1bmN0aW9uKGV4cHIsZWxlbWVudHMpe3JldHVybiBTaXp6bGUoZXhwcixudWxsLG51bGwsZWxlbWVudHMpO307U2l6emxlLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlbGVtLGV4cHIpe2lmKChlbGVtLm93bmVyRG9jdW1lbnR8fGVsZW0pIT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO30KZXhwcj1leHByLnJlcGxhY2UocmF0dHJpYnV0ZVF1b3RlcywiPSckMSddIik7aWYoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3ImJmRvY3VtZW50SXNIVE1MJiYhY29tcGlsZXJDYWNoZVtleHByKyIgIl0mJighcmJ1Z2d5TWF0Y2hlc3x8IXJidWdneU1hdGNoZXMudGVzdChleHByKSkmJighcmJ1Z2d5UVNBfHwhcmJ1Z2d5UVNBLnRlc3QoZXhwcikpKXt0cnl7dmFyIHJldD1tYXRjaGVzLmNhbGwoZWxlbSxleHByKTtpZihyZXR8fHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2h8fGVsZW0uZG9jdW1lbnQmJmVsZW0uZG9jdW1lbnQubm9kZVR5cGUhPT0xMSl7cmV0dXJuIHJldDt9fWNhdGNoKGUpe319CnJldHVybiBTaXp6bGUoZXhwcixkb2N1bWVudCxudWxsLFtlbGVtXSkubGVuZ3RoPjA7fTtTaXp6bGUuY29udGFpbnM9ZnVuY3Rpb24oY29udGV4dCxlbGVtKXtpZigoY29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0KSE9PWRvY3VtZW50KXtzZXREb2N1bWVudChjb250ZXh0KTt9CnJldHVybiBjb250YWlucyhjb250ZXh0LGVsZW0pO307U2l6emxlLmF0dHI9ZnVuY3Rpb24oZWxlbSxuYW1lKXtpZigoZWxlbS5vd25lckRvY3VtZW50fHxlbGVtKSE9PWRvY3VtZW50KXtzZXREb2N1bWVudChlbGVtKTt9CnZhciBmbj1FeHByLmF0dHJIYW5kbGVbbmFtZS50b0xvd2VyQ2FzZSgpXSx2YWw9Zm4mJmhhc093bi5jYWxsKEV4cHIuYXR0ckhhbmRsZSxuYW1lLnRvTG93ZXJDYXNlKCkpP2ZuKGVsZW0sbmFtZSwhZG9jdW1lbnRJc0hUTUwpOnVuZGVmaW5lZDtyZXR1cm4gdmFsIT09dW5kZWZpbmVkP3ZhbDpzdXBwb3J0LmF0dHJpYnV0ZXN8fCFkb2N1bWVudElzSFRNTD9lbGVtLmdldEF0dHJpYnV0ZShuYW1lKToodmFsPWVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkmJnZhbC5zcGVjaWZpZWQ/dmFsLnZhbHVlOm51bGw7fTtTaXp6bGUuZXNjYXBlPWZ1bmN0aW9uKHNlbCl7cmV0dXJuKHNlbCsiIikucmVwbGFjZShyY3NzZXNjYXBlLGZjc3Nlc2NhcGUpO307U2l6emxlLmVycm9yPWZ1bmN0aW9uKG1zZyl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK21zZyk7fTtTaXp6bGUudW5pcXVlU29ydD1mdW5jdGlvbihyZXN1bHRzKXt2YXIgZWxlbSxkdXBsaWNhdGVzPVtdLGo9MCxpPTA7aGFzRHVwbGljYXRlPSFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7c29ydElucHV0PSFzdXBwb3J0LnNvcnRTdGFibGUmJnJlc3VsdHMuc2xpY2UoMCk7cmVzdWx0cy5zb3J0KHNvcnRPcmRlcik7aWYoaGFzRHVwbGljYXRlKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtPT09cmVzdWx0c1tpXSl7aj1kdXBsaWNhdGVzLnB1c2goaSk7fX0Kd2hpbGUoai0tKXtyZXN1bHRzLnNwbGljZShkdXBsaWNhdGVzW2pdLDEpO319CnNvcnRJbnB1dD1udWxsO3JldHVybiByZXN1bHRzO307Z2V0VGV4dD1TaXp6bGUuZ2V0VGV4dD1mdW5jdGlvbihlbGVtKXt2YXIgbm9kZSxyZXQ9IiIsaT0wLG5vZGVUeXBlPWVsZW0ubm9kZVR5cGU7aWYoIW5vZGVUeXBlKXt3aGlsZSgobm9kZT1lbGVtW2krK10pKXtyZXQrPWdldFRleHQobm9kZSk7fX1lbHNlIGlmKG5vZGVUeXBlPT09MXx8bm9kZVR5cGU9PT05fHxub2RlVHlwZT09PTExKXtpZih0eXBlb2YgZWxlbS50ZXh0Q29udGVudD09PSJzdHJpbmciKXtyZXR1cm4gZWxlbS50ZXh0Q29udGVudDt9ZWxzZXtmb3IoZWxlbT1lbGVtLmZpcnN0Q2hpbGQ7ZWxlbTtlbGVtPWVsZW0ubmV4dFNpYmxpbmcpe3JldCs9Z2V0VGV4dChlbGVtKTt9fX1lbHNlIGlmKG5vZGVUeXBlPT09M3x8bm9kZVR5cGU9PT00KXtyZXR1cm4gZWxlbS5ub2RlVmFsdWU7fQpyZXR1cm4gcmV0O307RXhwcj1TaXp6bGUuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bWFya0Z1bmN0aW9uLG1hdGNoOm1hdGNoRXhwcixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDp0cnVlfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OnRydWV9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOnsiQVRUUiI6ZnVuY3Rpb24obWF0Y2gpe21hdGNoWzFdPW1hdGNoWzFdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7bWF0Y2hbM109KG1hdGNoWzNdfHxtYXRjaFs0XXx8bWF0Y2hbNV18fCIiKS5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO2lmKG1hdGNoWzJdPT09In49Iil7bWF0Y2hbM109IiAiK21hdGNoWzNdKyIgIjt9CnJldHVybiBtYXRjaC5zbGljZSgwLDQpO30sIkNISUxEIjpmdW5jdGlvbihtYXRjaCl7bWF0Y2hbMV09bWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtpZihtYXRjaFsxXS5zbGljZSgwLDMpPT09Im50aCIpe2lmKCFtYXRjaFszXSl7U2l6emxlLmVycm9yKG1hdGNoWzBdKTt9Cm1hdGNoWzRdPSsobWF0Y2hbNF0/bWF0Y2hbNV0rKG1hdGNoWzZdfHwxKToyKihtYXRjaFszXT09PSJldmVuInx8bWF0Y2hbM109PT0ib2RkIikpO21hdGNoWzVdPSsoKG1hdGNoWzddK21hdGNoWzhdKXx8bWF0Y2hbM109PT0ib2RkIik7fWVsc2UgaWYobWF0Y2hbM10pe1NpenpsZS5lcnJvcihtYXRjaFswXSk7fQpyZXR1cm4gbWF0Y2g7fSwiUFNFVURPIjpmdW5jdGlvbihtYXRjaCl7dmFyIGV4Y2Vzcyx1bnF1b3RlZD0hbWF0Y2hbNl0mJm1hdGNoWzJdO2lmKG1hdGNoRXhwclsiQ0hJTEQiXS50ZXN0KG1hdGNoWzBdKSl7cmV0dXJuIG51bGw7fQppZihtYXRjaFszXSl7bWF0Y2hbMl09bWF0Y2hbNF18fG1hdGNoWzVdfHwiIjt9ZWxzZSBpZih1bnF1b3RlZCYmcnBzZXVkby50ZXN0KHVucXVvdGVkKSYmKGV4Y2Vzcz10b2tlbml6ZSh1bnF1b3RlZCx0cnVlKSkmJihleGNlc3M9dW5xdW90ZWQuaW5kZXhPZigiKSIsdW5xdW90ZWQubGVuZ3RoLWV4Y2VzcyktdW5xdW90ZWQubGVuZ3RoKSl7bWF0Y2hbMF09bWF0Y2hbMF0uc2xpY2UoMCxleGNlc3MpO21hdGNoWzJdPXVucXVvdGVkLnNsaWNlKDAsZXhjZXNzKTt9CnJldHVybiBtYXRjaC5zbGljZSgwLDMpO319LGZpbHRlcjp7IlRBRyI6ZnVuY3Rpb24obm9kZU5hbWVTZWxlY3Rvcil7dmFyIG5vZGVOYW1lPW5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKS50b0xvd2VyQ2FzZSgpO3JldHVybiBub2RlTmFtZVNlbGVjdG9yPT09IioiP2Z1bmN0aW9uKCl7cmV0dXJuIHRydWU7fTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5ub2RlTmFtZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bm9kZU5hbWU7fTt9LCJDTEFTUyI6ZnVuY3Rpb24oY2xhc3NOYW1lKXt2YXIgcGF0dGVybj1jbGFzc0NhY2hlW2NsYXNzTmFtZSsiICJdO3JldHVybiBwYXR0ZXJufHwocGF0dGVybj1uZXcgUmVnRXhwKCIoXnwiK3doaXRlc3BhY2UrIikiK2NsYXNzTmFtZSsiKCIrd2hpdGVzcGFjZSsifCQpIikpJiZjbGFzc0NhY2hlKGNsYXNzTmFtZSxmdW5jdGlvbihlbGVtKXtyZXR1cm4gcGF0dGVybi50ZXN0KHR5cGVvZiBlbGVtLmNsYXNzTmFtZT09PSJzdHJpbmciJiZlbGVtLmNsYXNzTmFtZXx8dHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlIT09InVuZGVmaW5lZCImJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIik7fSk7fSwiQVRUUiI6ZnVuY3Rpb24obmFtZSxvcGVyYXRvcixjaGVjayl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciByZXN1bHQ9U2l6emxlLmF0dHIoZWxlbSxuYW1lKTtpZihyZXN1bHQ9PW51bGwpe3JldHVybiBvcGVyYXRvcj09PSIhPSI7fQppZighb3BlcmF0b3Ipe3JldHVybiB0cnVlO30KcmVzdWx0Kz0iIjtyZXR1cm4gb3BlcmF0b3I9PT0iPSI/cmVzdWx0PT09Y2hlY2s6b3BlcmF0b3I9PT0iIT0iP3Jlc3VsdCE9PWNoZWNrOm9wZXJhdG9yPT09Il49Ij9jaGVjayYmcmVzdWx0LmluZGV4T2YoY2hlY2spPT09MDpvcGVyYXRvcj09PSIqPSI/Y2hlY2smJnJlc3VsdC5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSIkPSI/Y2hlY2smJnJlc3VsdC5zbGljZSgtY2hlY2subGVuZ3RoKT09PWNoZWNrOm9wZXJhdG9yPT09In49Ij8oIiAiK3Jlc3VsdC5yZXBsYWNlKHJ3aGl0ZXNwYWNlLCIgIikrIiAiKS5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSJ8PSI/cmVzdWx0PT09Y2hlY2t8fHJlc3VsdC5zbGljZSgwLGNoZWNrLmxlbmd0aCsxKT09PWNoZWNrKyItIjpmYWxzZTt9O30sIkNISUxEIjpmdW5jdGlvbih0eXBlLHdoYXQsYXJndW1lbnQsZmlyc3QsbGFzdCl7dmFyIHNpbXBsZT10eXBlLnNsaWNlKDAsMykhPT0ibnRoIixmb3J3YXJkPXR5cGUuc2xpY2UoLTQpIT09Imxhc3QiLG9mVHlwZT13aGF0PT09Im9mLXR5cGUiO3JldHVybiBmaXJzdD09PTEmJmxhc3Q9PT0wP2Z1bmN0aW9uKGVsZW0pe3JldHVybiEhZWxlbS5wYXJlbnROb2RlO306ZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIGNhY2hlLHVuaXF1ZUNhY2hlLG91dGVyQ2FjaGUsbm9kZSxub2RlSW5kZXgsc3RhcnQsZGlyPXNpbXBsZSE9PWZvcndhcmQ/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlLG5hbWU9b2ZUeXBlJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksdXNlQ2FjaGU9IXhtbCYmIW9mVHlwZSxkaWZmPWZhbHNlO2lmKHBhcmVudCl7aWYoc2ltcGxlKXt3aGlsZShkaXIpe25vZGU9ZWxlbTt3aGlsZSgobm9kZT1ub2RlW2Rpcl0pKXtpZihvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSl7cmV0dXJuIGZhbHNlO319CnN0YXJ0PWRpcj10eXBlPT09Im9ubHkiJiYhc3RhcnQmJiJuZXh0U2libGluZyI7fQpyZXR1cm4gdHJ1ZTt9CnN0YXJ0PVtmb3J3YXJkP3BhcmVudC5maXJzdENoaWxkOnBhcmVudC5sYXN0Q2hpbGRdO2lmKGZvcndhcmQmJnVzZUNhY2hlKXtub2RlPXBhcmVudDtvdXRlckNhY2hlPW5vZGVbZXhwYW5kb118fChub2RlW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW25vZGUudW5pcXVlSURdfHwob3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXT17fSk7Y2FjaGU9dW5pcXVlQ2FjaGVbdHlwZV18fFtdO25vZGVJbmRleD1jYWNoZVswXT09PWRpcnJ1bnMmJmNhY2hlWzFdO2RpZmY9bm9kZUluZGV4JiZjYWNoZVsyXTtub2RlPW5vZGVJbmRleCYmcGFyZW50LmNoaWxkTm9kZXNbbm9kZUluZGV4XTt3aGlsZSgobm9kZT0rK25vZGVJbmRleCYmbm9kZSYmbm9kZVtkaXJdfHwoZGlmZj1ub2RlSW5kZXg9MCl8fHN0YXJ0LnBvcCgpKSl7aWYobm9kZS5ub2RlVHlwZT09PTEmJisrZGlmZiYmbm9kZT09PWVsZW0pe3VuaXF1ZUNhY2hlW3R5cGVdPVtkaXJydW5zLG5vZGVJbmRleCxkaWZmXTticmVhazt9fX1lbHNle2lmKHVzZUNhY2hlKXtub2RlPWVsZW07b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleDt9CmlmKGRpZmY9PT1mYWxzZSl7d2hpbGUoKG5vZGU9Kytub2RlSW5kZXgmJm5vZGUmJm5vZGVbZGlyXXx8KGRpZmY9bm9kZUluZGV4PTApfHxzdGFydC5wb3AoKSkpe2lmKChvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSkmJisrZGlmZil7aWYodXNlQ2FjaGUpe291dGVyQ2FjaGU9bm9kZVtleHBhbmRvXXx8KG5vZGVbZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF18fChvdXRlckNhY2hlW25vZGUudW5pcXVlSURdPXt9KTt1bmlxdWVDYWNoZVt0eXBlXT1bZGlycnVucyxkaWZmXTt9CmlmKG5vZGU9PT1lbGVtKXticmVhazt9fX19fQpkaWZmLT1sYXN0O3JldHVybiBkaWZmPT09Zmlyc3R8fChkaWZmJWZpcnN0PT09MCYmZGlmZi9maXJzdD49MCk7fX07fSwiUFNFVURPIjpmdW5jdGlvbihwc2V1ZG8sYXJndW1lbnQpe3ZhciBhcmdzLGZuPUV4cHIucHNldWRvc1twc2V1ZG9dfHxFeHByLnNldEZpbHRlcnNbcHNldWRvLnRvTG93ZXJDYXNlKCldfHxTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitwc2V1ZG8pO2lmKGZuW2V4cGFuZG9dKXtyZXR1cm4gZm4oYXJndW1lbnQpO30KaWYoZm4ubGVuZ3RoPjEpe2FyZ3M9W3BzZXVkbyxwc2V1ZG8sIiIsYXJndW1lbnRdO3JldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkocHNldWRvLnRvTG93ZXJDYXNlKCkpP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBpZHgsbWF0Y2hlZD1mbihzZWVkLGFyZ3VtZW50KSxpPW1hdGNoZWQubGVuZ3RoO3doaWxlKGktLSl7aWR4PWluZGV4T2Yoc2VlZCxtYXRjaGVkW2ldKTtzZWVkW2lkeF09IShtYXRjaGVzW2lkeF09bWF0Y2hlZFtpXSk7fX0pOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBmbihlbGVtLDAsYXJncyk7fTt9CnJldHVybiBmbjt9fSxwc2V1ZG9zOnsibm90IjptYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBpbnB1dD1bXSxyZXN1bHRzPVtdLG1hdGNoZXI9Y29tcGlsZShzZWxlY3Rvci5yZXBsYWNlKHJ0cmltLCIkMSIpKTtyZXR1cm4gbWF0Y2hlcltleHBhbmRvXT9tYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzLGNvbnRleHQseG1sKXt2YXIgZWxlbSx1bm1hdGNoZWQ9bWF0Y2hlcihzZWVkLG51bGwseG1sLFtdKSxpPXNlZWQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7c2VlZFtpXT0hKG1hdGNoZXNbaV09ZWxlbSk7fX19KTpmdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXtpbnB1dFswXT1lbGVtO21hdGNoZXIoaW5wdXQsbnVsbCx4bWwscmVzdWx0cyk7aW5wdXRbMF09bnVsbDtyZXR1cm4hcmVzdWx0cy5wb3AoKTt9O30pLCJoYXMiOm1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3JldHVybiBTaXp6bGUoc2VsZWN0b3IsZWxlbSkubGVuZ3RoPjA7fTt9KSwiY29udGFpbnMiOm1hcmtGdW5jdGlvbihmdW5jdGlvbih0ZXh0KXt0ZXh0PXRleHQucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGVsZW0udGV4dENvbnRlbnR8fGVsZW0uaW5uZXJUZXh0fHxnZXRUZXh0KGVsZW0pKS5pbmRleE9mKHRleHQpPi0xO307fSksImxhbmciOm1hcmtGdW5jdGlvbihmdW5jdGlvbihsYW5nKXtpZighcmlkZW50aWZpZXIudGVzdChsYW5nfHwiIikpe1NpenpsZS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIitsYW5nKTt9Cmxhbmc9bGFuZy5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBlbGVtTGFuZztkb3tpZigoZWxlbUxhbmc9ZG9jdW1lbnRJc0hUTUw/ZWxlbS5sYW5nOmVsZW0uZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxlbGVtLmdldEF0dHJpYnV0ZSgibGFuZyIpKSl7ZWxlbUxhbmc9ZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtyZXR1cm4gZWxlbUxhbmc9PT1sYW5nfHxlbGVtTGFuZy5pbmRleE9mKGxhbmcrIi0iKT09PTA7fX13aGlsZSgoZWxlbT1lbGVtLnBhcmVudE5vZGUpJiZlbGVtLm5vZGVUeXBlPT09MSk7cmV0dXJuIGZhbHNlO307fSksInRhcmdldCI6ZnVuY3Rpb24oZWxlbSl7dmFyIGhhc2g9d2luZG93LmxvY2F0aW9uJiZ3aW5kb3cubG9jYXRpb24uaGFzaDtyZXR1cm4gaGFzaCYmaGFzaC5zbGljZSgxKT09PWVsZW0uaWQ7fSwicm9vdCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1kb2NFbGVtO30sImZvY3VzIjpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbT09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJighZG9jdW1lbnQuaGFzRm9jdXN8fGRvY3VtZW50Lmhhc0ZvY3VzKCkpJiYhIShlbGVtLnR5cGV8fGVsZW0uaHJlZnx8fmVsZW0udGFiSW5kZXgpO30sImVuYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKGZhbHNlKSwiZGlzYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKHRydWUpLCJjaGVja2VkIjpmdW5jdGlvbihlbGVtKXt2YXIgbm9kZU5hbWU9ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihub2RlTmFtZT09PSJpbnB1dCImJiEhZWxlbS5jaGVja2VkKXx8KG5vZGVOYW1lPT09Im9wdGlvbiImJiEhZWxlbS5zZWxlY3RlZCk7fSwic2VsZWN0ZWQiOmZ1bmN0aW9uKGVsZW0pe2lmKGVsZW0ucGFyZW50Tm9kZSl7ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fQpyZXR1cm4gZWxlbS5zZWxlY3RlZD09PXRydWU7fSwiZW1wdHkiOmZ1bmN0aW9uKGVsZW0pe2ZvcihlbGVtPWVsZW0uZmlyc3RDaGlsZDtlbGVtO2VsZW09ZWxlbS5uZXh0U2libGluZyl7aWYoZWxlbS5ub2RlVHlwZTw2KXtyZXR1cm4gZmFsc2U7fX0KcmV0dXJuIHRydWU7fSwicGFyZW50IjpmdW5jdGlvbihlbGVtKXtyZXR1cm4hRXhwci5wc2V1ZG9zWyJlbXB0eSJdKGVsZW0pO30sImhlYWRlciI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHJoZWFkZXIudGVzdChlbGVtLm5vZGVOYW1lKTt9LCJpbnB1dCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHJpbnB1dHMudGVzdChlbGVtLm5vZGVOYW1lKTt9LCJidXR0b24iOmZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gbmFtZT09PSJpbnB1dCImJmVsZW0udHlwZT09PSJidXR0b24ifHxuYW1lPT09ImJ1dHRvbiI7fSwidGV4dCI6ZnVuY3Rpb24oZWxlbSl7dmFyIGF0dHI7cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJmVsZW0udHlwZT09PSJ0ZXh0IiYmKChhdHRyPWVsZW0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpPT1udWxsfHxhdHRyLnRvTG93ZXJDYXNlKCk9PT0idGV4dCIpO30sImZpcnN0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCl7cmV0dXJuWzBdO30pLCJsYXN0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3JldHVybltsZW5ndGgtMV07fSksImVxIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3JldHVyblthcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudF07fSksImV2ZW4iOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24obWF0Y2hJbmRleGVzLGxlbmd0aCl7dmFyIGk9MDtmb3IoO2k8bGVuZ3RoO2krPTIpe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KSwib2RkIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3ZhciBpPTE7Zm9yKDtpPGxlbmd0aDtpKz0yKXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImx0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50O2Zvcig7LS1pPj0wOyl7bWF0Y2hJbmRleGVzLnB1c2goaSk7fQpyZXR1cm4gbWF0Y2hJbmRleGVzO30pLCJndCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihtYXRjaEluZGV4ZXMsbGVuZ3RoLGFyZ3VtZW50KXt2YXIgaT1hcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudDtmb3IoOysraTxsZW5ndGg7KXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSl9fTtFeHByLnBzZXVkb3NbIm50aCJdPUV4cHIucHNldWRvc1siZXEiXTtmb3IoaSBpbntyYWRpbzp0cnVlLGNoZWNrYm94OnRydWUsZmlsZTp0cnVlLHBhc3N3b3JkOnRydWUsaW1hZ2U6dHJ1ZX0pe0V4cHIucHNldWRvc1tpXT1jcmVhdGVJbnB1dFBzZXVkbyhpKTt9CmZvcihpIGlue3N1Ym1pdDp0cnVlLHJlc2V0OnRydWV9KXtFeHByLnBzZXVkb3NbaV09Y3JlYXRlQnV0dG9uUHNldWRvKGkpO30KZnVuY3Rpb24gc2V0RmlsdGVycygpe30Kc2V0RmlsdGVycy5wcm90b3R5cGU9RXhwci5maWx0ZXJzPUV4cHIucHNldWRvcztFeHByLnNldEZpbHRlcnM9bmV3IHNldEZpbHRlcnMoKTt0b2tlbml6ZT1TaXp6bGUudG9rZW5pemU9ZnVuY3Rpb24oc2VsZWN0b3IscGFyc2VPbmx5KXt2YXIgbWF0Y2hlZCxtYXRjaCx0b2tlbnMsdHlwZSxzb0Zhcixncm91cHMscHJlRmlsdGVycyxjYWNoZWQ9dG9rZW5DYWNoZVtzZWxlY3RvcisiICJdO2lmKGNhY2hlZCl7cmV0dXJuIHBhcnNlT25seT8wOmNhY2hlZC5zbGljZSgwKTt9CnNvRmFyPXNlbGVjdG9yO2dyb3Vwcz1bXTtwcmVGaWx0ZXJzPUV4cHIucHJlRmlsdGVyO3doaWxlKHNvRmFyKXtpZighbWF0Y2hlZHx8KG1hdGNoPXJjb21tYS5leGVjKHNvRmFyKSkpe2lmKG1hdGNoKXtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaFswXS5sZW5ndGgpfHxzb0Zhcjt9Cmdyb3Vwcy5wdXNoKCh0b2tlbnM9W10pKTt9Cm1hdGNoZWQ9ZmFsc2U7aWYoKG1hdGNoPXJjb21iaW5hdG9ycy5leGVjKHNvRmFyKSkpe21hdGNoZWQ9bWF0Y2guc2hpZnQoKTt0b2tlbnMucHVzaCh7dmFsdWU6bWF0Y2hlZCx0eXBlOm1hdGNoWzBdLnJlcGxhY2UocnRyaW0sIiAiKX0pO3NvRmFyPXNvRmFyLnNsaWNlKG1hdGNoZWQubGVuZ3RoKTt9CmZvcih0eXBlIGluIEV4cHIuZmlsdGVyKXtpZigobWF0Y2g9bWF0Y2hFeHByW3R5cGVdLmV4ZWMoc29GYXIpKSYmKCFwcmVGaWx0ZXJzW3R5cGVdfHwobWF0Y2g9cHJlRmlsdGVyc1t0eXBlXShtYXRjaCkpKSl7bWF0Y2hlZD1tYXRjaC5zaGlmdCgpO3Rva2Vucy5wdXNoKHt2YWx1ZTptYXRjaGVkLHR5cGU6dHlwZSxtYXRjaGVzOm1hdGNofSk7c29GYXI9c29GYXIuc2xpY2UobWF0Y2hlZC5sZW5ndGgpO319CmlmKCFtYXRjaGVkKXticmVhazt9fQpyZXR1cm4gcGFyc2VPbmx5P3NvRmFyLmxlbmd0aDpzb0Zhcj9TaXp6bGUuZXJyb3Ioc2VsZWN0b3IpOnRva2VuQ2FjaGUoc2VsZWN0b3IsZ3JvdXBzKS5zbGljZSgwKTt9O2Z1bmN0aW9uIHRvU2VsZWN0b3IodG9rZW5zKXt2YXIgaT0wLGxlbj10b2tlbnMubGVuZ3RoLHNlbGVjdG9yPSIiO2Zvcig7aTxsZW47aSsrKXtzZWxlY3Rvcis9dG9rZW5zW2ldLnZhbHVlO30KcmV0dXJuIHNlbGVjdG9yO30KZnVuY3Rpb24gYWRkQ29tYmluYXRvcihtYXRjaGVyLGNvbWJpbmF0b3IsYmFzZSl7dmFyIGRpcj1jb21iaW5hdG9yLmRpcixza2lwPWNvbWJpbmF0b3IubmV4dCxrZXk9c2tpcHx8ZGlyLGNoZWNrTm9uRWxlbWVudHM9YmFzZSYma2V5PT09InBhcmVudE5vZGUiLGRvbmVOYW1lPWRvbmUrKztyZXR1cm4gY29tYmluYXRvci5maXJzdD9mdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pKXtpZihlbGVtLm5vZGVUeXBlPT09MXx8Y2hlY2tOb25FbGVtZW50cyl7cmV0dXJuIG1hdGNoZXIoZWxlbSxjb250ZXh0LHhtbCk7fX0KcmV0dXJuIGZhbHNlO306ZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIG9sZENhY2hlLHVuaXF1ZUNhY2hlLG91dGVyQ2FjaGUsbmV3Q2FjaGU9W2RpcnJ1bnMsZG9uZU5hbWVdO2lmKHhtbCl7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSl7aWYoZWxlbS5ub2RlVHlwZT09PTF8fGNoZWNrTm9uRWxlbWVudHMpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0LHhtbCkpe3JldHVybiB0cnVlO319fX1lbHNle3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtvdXRlckNhY2hlPWVsZW1bZXhwYW5kb118fChlbGVtW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW2VsZW0udW5pcXVlSURdfHwob3V0ZXJDYWNoZVtlbGVtLnVuaXF1ZUlEXT17fSk7aWYoc2tpcCYmc2tpcD09PWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7ZWxlbT1lbGVtW2Rpcl18fGVsZW07fWVsc2UgaWYoKG9sZENhY2hlPXVuaXF1ZUNhY2hlW2tleV0pJiZvbGRDYWNoZVswXT09PWRpcnJ1bnMmJm9sZENhY2hlWzFdPT09ZG9uZU5hbWUpe3JldHVybihuZXdDYWNoZVsyXT1vbGRDYWNoZVsyXSk7fWVsc2V7dW5pcXVlQ2FjaGVba2V5XT1uZXdDYWNoZTtpZigobmV3Q2FjaGVbMl09bWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKSkpe3JldHVybiB0cnVlO319fX19CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpe3JldHVybiBtYXRjaGVycy5sZW5ndGg+MT9mdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt2YXIgaT1tYXRjaGVycy5sZW5ndGg7d2hpbGUoaS0tKXtpZighbWF0Y2hlcnNbaV0oZWxlbSxjb250ZXh0LHhtbCkpe3JldHVybiBmYWxzZTt9fQpyZXR1cm4gdHJ1ZTt9Om1hdGNoZXJzWzBdO30KZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyhzZWxlY3Rvcixjb250ZXh0cyxyZXN1bHRzKXt2YXIgaT0wLGxlbj1jb250ZXh0cy5sZW5ndGg7Zm9yKDtpPGxlbjtpKyspe1NpenpsZShzZWxlY3Rvcixjb250ZXh0c1tpXSxyZXN1bHRzKTt9CnJldHVybiByZXN1bHRzO30KZnVuY3Rpb24gY29uZGVuc2UodW5tYXRjaGVkLG1hcCxmaWx0ZXIsY29udGV4dCx4bWwpe3ZhciBlbGVtLG5ld1VubWF0Y2hlZD1bXSxpPTAsbGVuPXVubWF0Y2hlZC5sZW5ndGgsbWFwcGVkPW1hcCE9bnVsbDtmb3IoO2k8bGVuO2krKyl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7aWYoIWZpbHRlcnx8ZmlsdGVyKGVsZW0sY29udGV4dCx4bWwpKXtuZXdVbm1hdGNoZWQucHVzaChlbGVtKTtpZihtYXBwZWQpe21hcC5wdXNoKGkpO319fX0KcmV0dXJuIG5ld1VubWF0Y2hlZDt9CmZ1bmN0aW9uIHNldE1hdGNoZXIocHJlRmlsdGVyLHNlbGVjdG9yLG1hdGNoZXIscG9zdEZpbHRlcixwb3N0RmluZGVyLHBvc3RTZWxlY3Rvcil7aWYocG9zdEZpbHRlciYmIXBvc3RGaWx0ZXJbZXhwYW5kb10pe3Bvc3RGaWx0ZXI9c2V0TWF0Y2hlcihwb3N0RmlsdGVyKTt9CmlmKHBvc3RGaW5kZXImJiFwb3N0RmluZGVyW2V4cGFuZG9dKXtwb3N0RmluZGVyPXNldE1hdGNoZXIocG9zdEZpbmRlcixwb3N0U2VsZWN0b3IpO30KcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLHJlc3VsdHMsY29udGV4dCx4bWwpe3ZhciB0ZW1wLGksZWxlbSxwcmVNYXA9W10scG9zdE1hcD1bXSxwcmVleGlzdGluZz1yZXN1bHRzLmxlbmd0aCxlbGVtcz1zZWVkfHxtdWx0aXBsZUNvbnRleHRzKHNlbGVjdG9yfHwiKiIsY29udGV4dC5ub2RlVHlwZT9bY29udGV4dF06Y29udGV4dCxbXSksbWF0Y2hlckluPXByZUZpbHRlciYmKHNlZWR8fCFzZWxlY3Rvcik/Y29uZGVuc2UoZWxlbXMscHJlTWFwLHByZUZpbHRlcixjb250ZXh0LHhtbCk6ZWxlbXMsbWF0Y2hlck91dD1tYXRjaGVyP3Bvc3RGaW5kZXJ8fChzZWVkP3ByZUZpbHRlcjpwcmVleGlzdGluZ3x8cG9zdEZpbHRlcik/W106cmVzdWx0czptYXRjaGVySW47aWYobWF0Y2hlcil7bWF0Y2hlcihtYXRjaGVySW4sbWF0Y2hlck91dCxjb250ZXh0LHhtbCk7fQppZihwb3N0RmlsdGVyKXt0ZW1wPWNvbmRlbnNlKG1hdGNoZXJPdXQscG9zdE1hcCk7cG9zdEZpbHRlcih0ZW1wLFtdLGNvbnRleHQseG1sKTtpPXRlbXAubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09dGVtcFtpXSkpe21hdGNoZXJPdXRbcG9zdE1hcFtpXV09IShtYXRjaGVySW5bcG9zdE1hcFtpXV09ZWxlbSk7fX19CmlmKHNlZWQpe2lmKHBvc3RGaW5kZXJ8fHByZUZpbHRlcil7aWYocG9zdEZpbmRlcil7dGVtcD1bXTtpPW1hdGNoZXJPdXQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09bWF0Y2hlck91dFtpXSkpe3RlbXAucHVzaCgobWF0Y2hlckluW2ldPWVsZW0pKTt9fQpwb3N0RmluZGVyKG51bGwsKG1hdGNoZXJPdXQ9W10pLHRlbXAseG1sKTt9Cmk9bWF0Y2hlck91dC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT1tYXRjaGVyT3V0W2ldKSYmKHRlbXA9cG9zdEZpbmRlcj9pbmRleE9mKHNlZWQsZWxlbSk6cHJlTWFwW2ldKT4tMSl7c2VlZFt0ZW1wXT0hKHJlc3VsdHNbdGVtcF09ZWxlbSk7fX19fWVsc2V7bWF0Y2hlck91dD1jb25kZW5zZShtYXRjaGVyT3V0PT09cmVzdWx0cz9tYXRjaGVyT3V0LnNwbGljZShwcmVleGlzdGluZyxtYXRjaGVyT3V0Lmxlbmd0aCk6bWF0Y2hlck91dCk7aWYocG9zdEZpbmRlcil7cG9zdEZpbmRlcihudWxsLHJlc3VsdHMsbWF0Y2hlck91dCx4bWwpO31lbHNle3B1c2guYXBwbHkocmVzdWx0cyxtYXRjaGVyT3V0KTt9fX0pO30KZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zKXt2YXIgY2hlY2tDb250ZXh0LG1hdGNoZXIsaixsZW49dG9rZW5zLmxlbmd0aCxsZWFkaW5nUmVsYXRpdmU9RXhwci5yZWxhdGl2ZVt0b2tlbnNbMF0udHlwZV0saW1wbGljaXRSZWxhdGl2ZT1sZWFkaW5nUmVsYXRpdmV8fEV4cHIucmVsYXRpdmVbIiAiXSxpPWxlYWRpbmdSZWxhdGl2ZT8xOjAsbWF0Y2hDb250ZXh0PWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1jaGVja0NvbnRleHQ7fSxpbXBsaWNpdFJlbGF0aXZlLHRydWUpLG1hdGNoQW55Q29udGV4dD1hZGRDb21iaW5hdG9yKGZ1bmN0aW9uKGVsZW0pe3JldHVybiBpbmRleE9mKGNoZWNrQ29udGV4dCxlbGVtKT4tMTt9LGltcGxpY2l0UmVsYXRpdmUsdHJ1ZSksbWF0Y2hlcnM9W2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciByZXQ9KCFsZWFkaW5nUmVsYXRpdmUmJih4bWx8fGNvbnRleHQhPT1vdXRlcm1vc3RDb250ZXh0KSl8fCgoY2hlY2tDb250ZXh0PWNvbnRleHQpLm5vZGVUeXBlP21hdGNoQ29udGV4dChlbGVtLGNvbnRleHQseG1sKTptYXRjaEFueUNvbnRleHQoZWxlbSxjb250ZXh0LHhtbCkpO2NoZWNrQ29udGV4dD1udWxsO3JldHVybiByZXQ7fV07Zm9yKDtpPGxlbjtpKyspe2lmKChtYXRjaGVyPUV4cHIucmVsYXRpdmVbdG9rZW5zW2ldLnR5cGVdKSl7bWF0Y2hlcnM9W2FkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpLG1hdGNoZXIpXTt9ZWxzZXttYXRjaGVyPUV4cHIuZmlsdGVyW3Rva2Vuc1tpXS50eXBlXS5hcHBseShudWxsLHRva2Vuc1tpXS5tYXRjaGVzKTtpZihtYXRjaGVyW2V4cGFuZG9dKXtqPSsraTtmb3IoO2o8bGVuO2orKyl7aWYoRXhwci5yZWxhdGl2ZVt0b2tlbnNbal0udHlwZV0pe2JyZWFrO319CnJldHVybiBzZXRNYXRjaGVyKGk+MSYmZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpLGk+MSYmdG9TZWxlY3Rvcih0b2tlbnMuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6dG9rZW5zW2ktMl0udHlwZT09PSIgIj8iKiI6IiJ9KSkucmVwbGFjZShydHJpbSwiJDEiKSxtYXRjaGVyLGk8aiYmbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zLnNsaWNlKGksaikpLGo8bGVuJiZtYXRjaGVyRnJvbVRva2VucygodG9rZW5zPXRva2Vucy5zbGljZShqKSkpLGo8bGVuJiZ0b1NlbGVjdG9yKHRva2VucykpO30KbWF0Y2hlcnMucHVzaChtYXRjaGVyKTt9fQpyZXR1cm4gZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpO30KZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycyl7dmFyIGJ5U2V0PXNldE1hdGNoZXJzLmxlbmd0aD4wLGJ5RWxlbWVudD1lbGVtZW50TWF0Y2hlcnMubGVuZ3RoPjAsc3VwZXJNYXRjaGVyPWZ1bmN0aW9uKHNlZWQsY29udGV4dCx4bWwscmVzdWx0cyxvdXRlcm1vc3Qpe3ZhciBlbGVtLGosbWF0Y2hlcixtYXRjaGVkQ291bnQ9MCxpPSIwIix1bm1hdGNoZWQ9c2VlZCYmW10sc2V0TWF0Y2hlZD1bXSxjb250ZXh0QmFja3VwPW91dGVybW9zdENvbnRleHQsZWxlbXM9c2VlZHx8YnlFbGVtZW50JiZFeHByLmZpbmRbIlRBRyJdKCIqIixvdXRlcm1vc3QpLGRpcnJ1bnNVbmlxdWU9KGRpcnJ1bnMrPWNvbnRleHRCYWNrdXA9PW51bGw/MTpNYXRoLnJhbmRvbSgpfHwwLjEpLGxlbj1lbGVtcy5sZW5ndGg7aWYob3V0ZXJtb3N0KXtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHQ9PT1kb2N1bWVudHx8Y29udGV4dHx8b3V0ZXJtb3N0O30KZm9yKDtpIT09bGVuJiYoZWxlbT1lbGVtc1tpXSkhPW51bGw7aSsrKXtpZihieUVsZW1lbnQmJmVsZW0pe2o9MDtpZighY29udGV4dCYmZWxlbS5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO3htbD0hZG9jdW1lbnRJc0hUTUw7fQp3aGlsZSgobWF0Y2hlcj1lbGVtZW50TWF0Y2hlcnNbaisrXSkpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0fHxkb2N1bWVudCx4bWwpKXtyZXN1bHRzLnB1c2goZWxlbSk7YnJlYWs7fX0KaWYob3V0ZXJtb3N0KXtkaXJydW5zPWRpcnJ1bnNVbmlxdWU7fX0KaWYoYnlTZXQpe2lmKChlbGVtPSFtYXRjaGVyJiZlbGVtKSl7bWF0Y2hlZENvdW50LS07fQppZihzZWVkKXt1bm1hdGNoZWQucHVzaChlbGVtKTt9fX0KbWF0Y2hlZENvdW50Kz1pO2lmKGJ5U2V0JiZpIT09bWF0Y2hlZENvdW50KXtqPTA7d2hpbGUoKG1hdGNoZXI9c2V0TWF0Y2hlcnNbaisrXSkpe21hdGNoZXIodW5tYXRjaGVkLHNldE1hdGNoZWQsY29udGV4dCx4bWwpO30KaWYoc2VlZCl7aWYobWF0Y2hlZENvdW50PjApe3doaWxlKGktLSl7aWYoISh1bm1hdGNoZWRbaV18fHNldE1hdGNoZWRbaV0pKXtzZXRNYXRjaGVkW2ldPXBvcC5jYWxsKHJlc3VsdHMpO319fQpzZXRNYXRjaGVkPWNvbmRlbnNlKHNldE1hdGNoZWQpO30KcHVzaC5hcHBseShyZXN1bHRzLHNldE1hdGNoZWQpO2lmKG91dGVybW9zdCYmIXNlZWQmJnNldE1hdGNoZWQubGVuZ3RoPjAmJihtYXRjaGVkQ291bnQrc2V0TWF0Y2hlcnMubGVuZ3RoKT4xKXtTaXp6bGUudW5pcXVlU29ydChyZXN1bHRzKTt9fQppZihvdXRlcm1vc3Qpe2RpcnJ1bnM9ZGlycnVuc1VuaXF1ZTtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHRCYWNrdXA7fQpyZXR1cm4gdW5tYXRjaGVkO307cmV0dXJuIGJ5U2V0P21hcmtGdW5jdGlvbihzdXBlck1hdGNoZXIpOnN1cGVyTWF0Y2hlcjt9CmNvbXBpbGU9U2l6emxlLmNvbXBpbGU9ZnVuY3Rpb24oc2VsZWN0b3IsbWF0Y2gpe3ZhciBpLHNldE1hdGNoZXJzPVtdLGVsZW1lbnRNYXRjaGVycz1bXSxjYWNoZWQ9Y29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdO2lmKCFjYWNoZWQpe2lmKCFtYXRjaCl7bWF0Y2g9dG9rZW5pemUoc2VsZWN0b3IpO30KaT1tYXRjaC5sZW5ndGg7d2hpbGUoaS0tKXtjYWNoZWQ9bWF0Y2hlckZyb21Ub2tlbnMobWF0Y2hbaV0pO2lmKGNhY2hlZFtleHBhbmRvXSl7c2V0TWF0Y2hlcnMucHVzaChjYWNoZWQpO31lbHNle2VsZW1lbnRNYXRjaGVycy5wdXNoKGNhY2hlZCk7fX0KY2FjaGVkPWNvbXBpbGVyQ2FjaGUoc2VsZWN0b3IsbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycykpO2NhY2hlZC5zZWxlY3Rvcj1zZWxlY3Rvcjt9CnJldHVybiBjYWNoZWQ7fTtzZWxlY3Q9U2l6emxlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJlc3VsdHMsc2VlZCl7dmFyIGksdG9rZW5zLHRva2VuLHR5cGUsZmluZCxjb21waWxlZD10eXBlb2Ygc2VsZWN0b3I9PT0iZnVuY3Rpb24iJiZzZWxlY3RvcixtYXRjaD0hc2VlZCYmdG9rZW5pemUoKHNlbGVjdG9yPWNvbXBpbGVkLnNlbGVjdG9yfHxzZWxlY3RvcikpO3Jlc3VsdHM9cmVzdWx0c3x8W107aWYobWF0Y2gubGVuZ3RoPT09MSl7dG9rZW5zPW1hdGNoWzBdPW1hdGNoWzBdLnNsaWNlKDApO2lmKHRva2Vucy5sZW5ndGg+MiYmKHRva2VuPXRva2Vuc1swXSkudHlwZT09PSJJRCImJmNvbnRleHQubm9kZVR5cGU9PT05JiZkb2N1bWVudElzSFRNTCYmRXhwci5yZWxhdGl2ZVt0b2tlbnNbMV0udHlwZV0pe2NvbnRleHQ9KEV4cHIuZmluZFsiSUQiXSh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSksY29udGV4dCl8fFtdKVswXTtpZighY29udGV4dCl7cmV0dXJuIHJlc3VsdHM7fWVsc2UgaWYoY29tcGlsZWQpe2NvbnRleHQ9Y29udGV4dC5wYXJlbnROb2RlO30Kc2VsZWN0b3I9c2VsZWN0b3Iuc2xpY2UodG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoKTt9Cmk9bWF0Y2hFeHByWyJuZWVkc0NvbnRleHQiXS50ZXN0KHNlbGVjdG9yKT8wOnRva2Vucy5sZW5ndGg7d2hpbGUoaS0tKXt0b2tlbj10b2tlbnNbaV07aWYoRXhwci5yZWxhdGl2ZVsodHlwZT10b2tlbi50eXBlKV0pe2JyZWFrO30KaWYoKGZpbmQ9RXhwci5maW5kW3R5cGVdKSl7aWYoKHNlZWQ9ZmluZCh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkscnNpYmxpbmcudGVzdCh0b2tlbnNbMF0udHlwZSkmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpKSl7dG9rZW5zLnNwbGljZShpLDEpO3NlbGVjdG9yPXNlZWQubGVuZ3RoJiZ0b1NlbGVjdG9yKHRva2Vucyk7aWYoIXNlbGVjdG9yKXtwdXNoLmFwcGx5KHJlc3VsdHMsc2VlZCk7cmV0dXJuIHJlc3VsdHM7fQpicmVhazt9fX19Cihjb21waWxlZHx8Y29tcGlsZShzZWxlY3RvcixtYXRjaCkpKHNlZWQsY29udGV4dCwhZG9jdW1lbnRJc0hUTUwscmVzdWx0cywhY29udGV4dHx8cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpO3JldHVybiByZXN1bHRzO307c3VwcG9ydC5zb3J0U3RhYmxlPWV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoc29ydE9yZGVyKS5qb2luKCIiKT09PWV4cGFuZG87c3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzPSEhaGFzRHVwbGljYXRlO3NldERvY3VtZW50KCk7c3VwcG9ydC5zb3J0RGV0YWNoZWQ9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSkmMTt9KTtpZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09IiMiO30pKXthZGRIYW5kbGUoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7aWYoIWlzWE1MKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSxuYW1lLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKTt9fSk7fQppZighc3VwcG9ydC5hdHRyaWJ1dGVzfHwhYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxpbnB1dC8+IjtlbC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTtyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIjt9KSl7YWRkSGFuZGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZWxlbSxuYW1lLGlzWE1MKXtpZighaXNYTUwmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCIpe3JldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTt9fSk7fQppZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT1udWxsO30pKXthZGRIYW5kbGUoYm9vbGVhbnMsZnVuY3Rpb24oZWxlbSxuYW1lLGlzWE1MKXt2YXIgdmFsO2lmKCFpc1hNTCl7cmV0dXJuIGVsZW1bbmFtZV09PT10cnVlP25hbWUudG9Mb3dlckNhc2UoKToodmFsPWVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkmJnZhbC5zcGVjaWZpZWQ/dmFsLnZhbHVlOm51bGw7fX0pO30KcmV0dXJuIFNpenpsZTt9KSh3aW5kb3cpO2pRdWVyeS5maW5kPVNpenpsZTtqUXVlcnkuZXhwcj1TaXp6bGUuc2VsZWN0b3JzO2pRdWVyeS5leHByWyI6Il09alF1ZXJ5LmV4cHIucHNldWRvcztqUXVlcnkudW5pcXVlU29ydD1qUXVlcnkudW5pcXVlPVNpenpsZS51bmlxdWVTb3J0O2pRdWVyeS50ZXh0PVNpenpsZS5nZXRUZXh0O2pRdWVyeS5pc1hNTERvYz1TaXp6bGUuaXNYTUw7alF1ZXJ5LmNvbnRhaW5zPVNpenpsZS5jb250YWlucztqUXVlcnkuZXNjYXBlU2VsZWN0b3I9U2l6emxlLmVzY2FwZTt2YXIgZGlyPWZ1bmN0aW9uKGVsZW0sZGlyLHVudGlsKXt2YXIgbWF0Y2hlZD1bXSx0cnVuY2F0ZT11bnRpbCE9PXVuZGVmaW5lZDt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pJiZlbGVtLm5vZGVUeXBlIT09OSl7aWYoZWxlbS5ub2RlVHlwZT09PTEpe2lmKHRydW5jYXRlJiZqUXVlcnkoZWxlbSkuaXModW50aWwpKXticmVhazt9Cm1hdGNoZWQucHVzaChlbGVtKTt9fQpyZXR1cm4gbWF0Y2hlZDt9O3ZhciBzaWJsaW5ncz1mdW5jdGlvbihuLGVsZW0pe3ZhciBtYXRjaGVkPVtdO2Zvcig7bjtuPW4ubmV4dFNpYmxpbmcpe2lmKG4ubm9kZVR5cGU9PT0xJiZuIT09ZWxlbSl7bWF0Y2hlZC5wdXNoKG4pO319CnJldHVybiBtYXRjaGVkO307dmFyIHJuZWVkc0NvbnRleHQ9alF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O2Z1bmN0aW9uIG5vZGVOYW1lKGVsZW0sbmFtZSl7cmV0dXJuIGVsZW0ubm9kZU5hbWUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5hbWUudG9Mb3dlckNhc2UoKTt9O3ZhciByc2luZ2xlVGFnPSgvXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSk7ZnVuY3Rpb24gd2lubm93KGVsZW1lbnRzLHF1YWxpZmllcixub3Qpe2lmKGlzRnVuY3Rpb24ocXVhbGlmaWVyKSl7cmV0dXJuIGpRdWVyeS5ncmVwKGVsZW1lbnRzLGZ1bmN0aW9uKGVsZW0saSl7cmV0dXJuISFxdWFsaWZpZXIuY2FsbChlbGVtLGksZWxlbSkhPT1ub3Q7fSk7fQppZihxdWFsaWZpZXIubm9kZVR5cGUpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbT09PXF1YWxpZmllcikhPT1ub3Q7fSk7fQppZih0eXBlb2YgcXVhbGlmaWVyIT09InN0cmluZyIpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtKXtyZXR1cm4oaW5kZXhPZi5jYWxsKHF1YWxpZmllcixlbGVtKT4tMSkhPT1ub3Q7fSk7fQpyZXR1cm4galF1ZXJ5LmZpbHRlcihxdWFsaWZpZXIsZWxlbWVudHMsbm90KTt9CmpRdWVyeS5maWx0ZXI9ZnVuY3Rpb24oZXhwcixlbGVtcyxub3Qpe3ZhciBlbGVtPWVsZW1zWzBdO2lmKG5vdCl7ZXhwcj0iOm5vdCgiK2V4cHIrIikiO30KaWYoZWxlbXMubGVuZ3RoPT09MSYmZWxlbS5ub2RlVHlwZT09PTEpe3JldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZWxlbSxleHByKT9bZWxlbV06W107fQpyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyhleHByLGpRdWVyeS5ncmVwKGVsZW1zLGZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtLm5vZGVUeXBlPT09MTt9KSk7fTtqUXVlcnkuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgaSxyZXQsbGVuPXRoaXMubGVuZ3RoLHNlbGY9dGhpcztpZih0eXBlb2Ygc2VsZWN0b3IhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeShzZWxlY3RvcikuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGxlbjtpKyspe2lmKGpRdWVyeS5jb250YWlucyhzZWxmW2ldLHRoaXMpKXtyZXR1cm4gdHJ1ZTt9fX0pKTt9CnJldD10aGlzLnB1c2hTdGFjayhbXSk7Zm9yKGk9MDtpPGxlbjtpKyspe2pRdWVyeS5maW5kKHNlbGVjdG9yLHNlbGZbaV0scmV0KTt9CnJldHVybiBsZW4+MT9qUXVlcnkudW5pcXVlU29ydChyZXQpOnJldDt9LGZpbHRlcjpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHdpbm5vdyh0aGlzLHNlbGVjdG9yfHxbXSxmYWxzZSkpO30sbm90OmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sod2lubm93KHRoaXMsc2VsZWN0b3J8fFtdLHRydWUpKTt9LGlzOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4hIXdpbm5vdyh0aGlzLHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciJiZybmVlZHNDb250ZXh0LnRlc3Qoc2VsZWN0b3IpP2pRdWVyeShzZWxlY3Rvcik6c2VsZWN0b3J8fFtdLGZhbHNlKS5sZW5ndGg7fX0pO3ZhciByb290alF1ZXJ5LHJxdWlja0V4cHI9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLyxpbml0PWpRdWVyeS5mbi5pbml0PWZ1bmN0aW9uKHNlbGVjdG9yLGNvbnRleHQscm9vdCl7dmFyIG1hdGNoLGVsZW07aWYoIXNlbGVjdG9yKXtyZXR1cm4gdGhpczt9CnJvb3Q9cm9vdHx8cm9vdGpRdWVyeTtpZih0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIil7aWYoc2VsZWN0b3JbMF09PT0iPCImJnNlbGVjdG9yW3NlbGVjdG9yLmxlbmd0aC0xXT09PSI+IiYmc2VsZWN0b3IubGVuZ3RoPj0zKXttYXRjaD1bbnVsbCxzZWxlY3RvcixudWxsXTt9ZWxzZXttYXRjaD1ycXVpY2tFeHByLmV4ZWMoc2VsZWN0b3IpO30KaWYobWF0Y2gmJihtYXRjaFsxXXx8IWNvbnRleHQpKXtpZihtYXRjaFsxXSl7Y29udGV4dD1jb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5P2NvbnRleHRbMF06Y29udGV4dDtqUXVlcnkubWVyZ2UodGhpcyxqUXVlcnkucGFyc2VIVE1MKG1hdGNoWzFdLGNvbnRleHQmJmNvbnRleHQubm9kZVR5cGU/Y29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0OmRvY3VtZW50LHRydWUpKTtpZihyc2luZ2xlVGFnLnRlc3QobWF0Y2hbMV0pJiZqUXVlcnkuaXNQbGFpbk9iamVjdChjb250ZXh0KSl7Zm9yKG1hdGNoIGluIGNvbnRleHQpe2lmKGlzRnVuY3Rpb24odGhpc1ttYXRjaF0pKXt0aGlzW21hdGNoXShjb250ZXh0W21hdGNoXSk7fWVsc2V7dGhpcy5hdHRyKG1hdGNoLGNvbnRleHRbbWF0Y2hdKTt9fX0KcmV0dXJuIHRoaXM7fWVsc2V7ZWxlbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXRjaFsyXSk7aWYoZWxlbSl7dGhpc1swXT1lbGVtO3RoaXMubGVuZ3RoPTE7fQpyZXR1cm4gdGhpczt9fWVsc2UgaWYoIWNvbnRleHR8fGNvbnRleHQuanF1ZXJ5KXtyZXR1cm4oY29udGV4dHx8cm9vdCkuZmluZChzZWxlY3Rvcik7fWVsc2V7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoY29udGV4dCkuZmluZChzZWxlY3Rvcik7fX1lbHNlIGlmKHNlbGVjdG9yLm5vZGVUeXBlKXt0aGlzWzBdPXNlbGVjdG9yO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXM7fWVsc2UgaWYoaXNGdW5jdGlvbihzZWxlY3Rvcikpe3JldHVybiByb290LnJlYWR5IT09dW5kZWZpbmVkP3Jvb3QucmVhZHkoc2VsZWN0b3IpOnNlbGVjdG9yKGpRdWVyeSk7fQpyZXR1cm4galF1ZXJ5Lm1ha2VBcnJheShzZWxlY3Rvcix0aGlzKTt9O2luaXQucHJvdG90eXBlPWpRdWVyeS5mbjtyb290alF1ZXJ5PWpRdWVyeShkb2N1bWVudCk7dmFyIHJwYXJlbnRzcHJldj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxndWFyYW50ZWVkVW5pcXVlPXtjaGlsZHJlbjp0cnVlLGNvbnRlbnRzOnRydWUsbmV4dDp0cnVlLHByZXY6dHJ1ZX07alF1ZXJ5LmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKHRhcmdldCl7dmFyIHRhcmdldHM9alF1ZXJ5KHRhcmdldCx0aGlzKSxsPXRhcmdldHMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe3ZhciBpPTA7Zm9yKDtpPGw7aSsrKXtpZihqUXVlcnkuY29udGFpbnModGhpcyx0YXJnZXRzW2ldKSl7cmV0dXJuIHRydWU7fX19KTt9LGNsb3Nlc3Q6ZnVuY3Rpb24oc2VsZWN0b3JzLGNvbnRleHQpe3ZhciBjdXIsaT0wLGw9dGhpcy5sZW5ndGgsbWF0Y2hlZD1bXSx0YXJnZXRzPXR5cGVvZiBzZWxlY3RvcnMhPT0ic3RyaW5nIiYmalF1ZXJ5KHNlbGVjdG9ycyk7aWYoIXJuZWVkc0NvbnRleHQudGVzdChzZWxlY3RvcnMpKXtmb3IoO2k8bDtpKyspe2ZvcihjdXI9dGhpc1tpXTtjdXImJmN1ciE9PWNvbnRleHQ7Y3VyPWN1ci5wYXJlbnROb2RlKXtpZihjdXIubm9kZVR5cGU8MTEmJih0YXJnZXRzP3RhcmdldHMuaW5kZXgoY3VyKT4tMTpjdXIubm9kZVR5cGU9PT0xJiZqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoY3VyLHNlbGVjdG9ycykpKXttYXRjaGVkLnB1c2goY3VyKTticmVhazt9fX19CnJldHVybiB0aGlzLnB1c2hTdGFjayhtYXRjaGVkLmxlbmd0aD4xP2pRdWVyeS51bmlxdWVTb3J0KG1hdGNoZWQpOm1hdGNoZWQpO30saW5kZXg6ZnVuY3Rpb24oZWxlbSl7aWYoIWVsZW0pe3JldHVybih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xO30KaWYodHlwZW9mIGVsZW09PT0ic3RyaW5nIil7cmV0dXJuIGluZGV4T2YuY2FsbChqUXVlcnkoZWxlbSksdGhpc1swXSk7fQpyZXR1cm4gaW5kZXhPZi5jYWxsKHRoaXMsZWxlbS5qcXVlcnk/ZWxlbVswXTplbGVtKTt9LGFkZDpmdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soalF1ZXJ5LnVuaXF1ZVNvcnQoalF1ZXJ5Lm1lcmdlKHRoaXMuZ2V0KCksalF1ZXJ5KHNlbGVjdG9yLGNvbnRleHQpKSkpO30sYWRkQmFjazpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMuYWRkKHNlbGVjdG9yPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHNlbGVjdG9yKSk7fX0pO2Z1bmN0aW9uIHNpYmxpbmcoY3VyLGRpcil7d2hpbGUoKGN1cj1jdXJbZGlyXSkmJmN1ci5ub2RlVHlwZSE9PTEpe30KcmV0dXJuIGN1cjt9CmpRdWVyeS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7cmV0dXJuIHBhcmVudCYmcGFyZW50Lm5vZGVUeXBlIT09MTE/cGFyZW50Om51bGw7fSxwYXJlbnRzOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwicGFyZW50Tm9kZSIpO30scGFyZW50c1VudGlsOmZ1bmN0aW9uKGVsZW0saSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJwYXJlbnROb2RlIix1bnRpbCk7fSxuZXh0OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5nKGVsZW0sIm5leHRTaWJsaW5nIik7fSxwcmV2OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5nKGVsZW0sInByZXZpb3VzU2libGluZyIpO30sbmV4dEFsbDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIik7fSxwcmV2QWxsOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwicHJldmlvdXNTaWJsaW5nIik7fSxuZXh0VW50aWw6ZnVuY3Rpb24oZWxlbSxpLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIix1bnRpbCk7fSxwcmV2VW50aWw6ZnVuY3Rpb24oZWxlbSxpLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sInByZXZpb3VzU2libGluZyIsdW50aWwpO30sc2libGluZ3M6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmdzKChlbGVtLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGVsZW0pO30sY2hpbGRyZW46ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmdzKGVsZW0uZmlyc3RDaGlsZCk7fSxjb250ZW50czpmdW5jdGlvbihlbGVtKXtpZihub2RlTmFtZShlbGVtLCJpZnJhbWUiKSl7cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O30KaWYobm9kZU5hbWUoZWxlbSwidGVtcGxhdGUiKSl7ZWxlbT1lbGVtLmNvbnRlbnR8fGVsZW07fQpyZXR1cm4galF1ZXJ5Lm1lcmdlKFtdLGVsZW0uY2hpbGROb2Rlcyk7fX0sZnVuY3Rpb24obmFtZSxmbil7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHVudGlsLHNlbGVjdG9yKXt2YXIgbWF0Y2hlZD1qUXVlcnkubWFwKHRoaXMsZm4sdW50aWwpO2lmKG5hbWUuc2xpY2UoLTUpIT09IlVudGlsIil7c2VsZWN0b3I9dW50aWw7fQppZihzZWxlY3RvciYmdHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe21hdGNoZWQ9alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixtYXRjaGVkKTt9CmlmKHRoaXMubGVuZ3RoPjEpe2lmKCFndWFyYW50ZWVkVW5pcXVlW25hbWVdKXtqUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTt9CmlmKHJwYXJlbnRzcHJldi50ZXN0KG5hbWUpKXttYXRjaGVkLnJldmVyc2UoKTt9fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZCk7fTt9KTt2YXIgcm5vdGh0bWx3aGl0ZT0oL1teXHgyMFx0XHJcblxmXSsvZyk7ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhvcHRpb25zKXt2YXIgb2JqZWN0PXt9O2pRdWVyeS5lYWNoKG9wdGlvbnMubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdLGZ1bmN0aW9uKF8sZmxhZyl7b2JqZWN0W2ZsYWddPXRydWU7fSk7cmV0dXJuIG9iamVjdDt9CmpRdWVyeS5DYWxsYmFja3M9ZnVuY3Rpb24ob3B0aW9ucyl7b3B0aW9ucz10eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciP2NyZWF0ZU9wdGlvbnMob3B0aW9ucyk6alF1ZXJ5LmV4dGVuZCh7fSxvcHRpb25zKTt2YXIKZmlyaW5nLG1lbW9yeSxmaXJlZCxsb2NrZWQsbGlzdD1bXSxxdWV1ZT1bXSxmaXJpbmdJbmRleD0tMSxmaXJlPWZ1bmN0aW9uKCl7bG9ja2VkPWxvY2tlZHx8b3B0aW9ucy5vbmNlO2ZpcmVkPWZpcmluZz10cnVlO2Zvcig7cXVldWUubGVuZ3RoO2ZpcmluZ0luZGV4PS0xKXttZW1vcnk9cXVldWUuc2hpZnQoKTt3aGlsZSgrK2ZpcmluZ0luZGV4PGxpc3QubGVuZ3RoKXtpZihsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShtZW1vcnlbMF0sbWVtb3J5WzFdKT09PWZhbHNlJiZvcHRpb25zLnN0b3BPbkZhbHNlKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aDttZW1vcnk9ZmFsc2U7fX19CmlmKCFvcHRpb25zLm1lbW9yeSl7bWVtb3J5PWZhbHNlO30KZmlyaW5nPWZhbHNlO2lmKGxvY2tlZCl7aWYobWVtb3J5KXtsaXN0PVtdO31lbHNle2xpc3Q9IiI7fX19LHNlbGY9e2FkZDpmdW5jdGlvbigpe2lmKGxpc3Qpe2lmKG1lbW9yeSYmIWZpcmluZyl7ZmlyaW5nSW5kZXg9bGlzdC5sZW5ndGgtMTtxdWV1ZS5wdXNoKG1lbW9yeSk7fQooZnVuY3Rpb24gYWRkKGFyZ3Mpe2pRdWVyeS5lYWNoKGFyZ3MsZnVuY3Rpb24oXyxhcmcpe2lmKGlzRnVuY3Rpb24oYXJnKSl7aWYoIW9wdGlvbnMudW5pcXVlfHwhc2VsZi5oYXMoYXJnKSl7bGlzdC5wdXNoKGFyZyk7fX1lbHNlIGlmKGFyZyYmYXJnLmxlbmd0aCYmdG9UeXBlKGFyZykhPT0ic3RyaW5nIil7YWRkKGFyZyk7fX0pO30pKGFyZ3VtZW50cyk7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxyZW1vdmU6ZnVuY3Rpb24oKXtqUXVlcnkuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oXyxhcmcpe3ZhciBpbmRleDt3aGlsZSgoaW5kZXg9alF1ZXJ5LmluQXJyYXkoYXJnLGxpc3QsaW5kZXgpKT4tMSl7bGlzdC5zcGxpY2UoaW5kZXgsMSk7aWYoaW5kZXg8PWZpcmluZ0luZGV4KXtmaXJpbmdJbmRleC0tO319fSk7cmV0dXJuIHRoaXM7fSxoYXM6ZnVuY3Rpb24oZm4pe3JldHVybiBmbj9qUXVlcnkuaW5BcnJheShmbixsaXN0KT4tMTpsaXN0Lmxlbmd0aD4wO30sZW1wdHk6ZnVuY3Rpb24oKXtpZihsaXN0KXtsaXN0PVtdO30KcmV0dXJuIHRoaXM7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7bG9ja2VkPXF1ZXVlPVtdO2xpc3Q9bWVtb3J5PSIiO3JldHVybiB0aGlzO30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbGlzdDt9LGxvY2s6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107aWYoIW1lbW9yeSYmIWZpcmluZyl7bGlzdD1tZW1vcnk9IiI7fQpyZXR1cm4gdGhpczt9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhbG9ja2VkO30sZmlyZVdpdGg6ZnVuY3Rpb24oY29udGV4dCxhcmdzKXtpZighbG9ja2VkKXthcmdzPWFyZ3N8fFtdO2FyZ3M9W2NvbnRleHQsYXJncy5zbGljZT9hcmdzLnNsaWNlKCk6YXJnc107cXVldWUucHVzaChhcmdzKTtpZighZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxmaXJlOmZ1bmN0aW9uKCl7c2VsZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZmlyZWQ7fX07cmV0dXJuIHNlbGY7fTtmdW5jdGlvbiBJZGVudGl0eSh2KXtyZXR1cm4gdjt9CmZ1bmN0aW9uIFRocm93ZXIoZXgpe3Rocm93IGV4O30KZnVuY3Rpb24gYWRvcHRWYWx1ZSh2YWx1ZSxyZXNvbHZlLHJlamVjdCxub1ZhbHVlKXt2YXIgbWV0aG9kO3RyeXtpZih2YWx1ZSYmaXNGdW5jdGlvbigobWV0aG9kPXZhbHVlLnByb21pc2UpKSl7bWV0aG9kLmNhbGwodmFsdWUpLmRvbmUocmVzb2x2ZSkuZmFpbChyZWplY3QpO31lbHNlIGlmKHZhbHVlJiZpc0Z1bmN0aW9uKChtZXRob2Q9dmFsdWUudGhlbikpKXttZXRob2QuY2FsbCh2YWx1ZSxyZXNvbHZlLHJlamVjdCk7fWVsc2V7cmVzb2x2ZS5hcHBseSh1bmRlZmluZWQsW3ZhbHVlXS5zbGljZShub1ZhbHVlKSk7fX1jYXRjaCh2YWx1ZSl7cmVqZWN0LmFwcGx5KHVuZGVmaW5lZCxbdmFsdWVdKTt9fQpqUXVlcnkuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihmdW5jKXt2YXIgdHVwbGVzPVtbIm5vdGlmeSIsInByb2dyZXNzIixqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSwyXSxbInJlc29sdmUiLCJkb25lIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMCwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxzdGF0ZT0icGVuZGluZyIscHJvbWlzZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gc3RhdGU7fSxhbHdheXM6ZnVuY3Rpb24oKXtkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzO30sImNhdGNoIjpmdW5jdGlvbihmbil7cmV0dXJuIHByb21pc2UudGhlbihudWxsLGZuKTt9LHBpcGU6ZnVuY3Rpb24oKXt2YXIgZm5zPWFyZ3VtZW50cztyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKG5ld0RlZmVyKXtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGZuPWlzRnVuY3Rpb24oZm5zW3R1cGxlWzRdXSkmJmZuc1t0dXBsZVs0XV07ZGVmZXJyZWRbdHVwbGVbMV1dKGZ1bmN0aW9uKCl7dmFyIHJldHVybmVkPWZuJiZmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocmV0dXJuZWQmJmlzRnVuY3Rpb24ocmV0dXJuZWQucHJvbWlzZSkpe3JldHVybmVkLnByb21pc2UoKS5wcm9ncmVzcyhuZXdEZWZlci5ub3RpZnkpLmRvbmUobmV3RGVmZXIucmVzb2x2ZSkuZmFpbChuZXdEZWZlci5yZWplY3QpO31lbHNle25ld0RlZmVyW3R1cGxlWzBdKyJXaXRoIl0odGhpcyxmbj9bcmV0dXJuZWRdOmFyZ3VtZW50cyk7fX0pO30pO2Zucz1udWxsO30pLnByb21pc2UoKTt9LHRoZW46ZnVuY3Rpb24ob25GdWxmaWxsZWQsb25SZWplY3RlZCxvblByb2dyZXNzKXt2YXIgbWF4RGVwdGg9MDtmdW5jdGlvbiByZXNvbHZlKGRlcHRoLGRlZmVycmVkLGhhbmRsZXIsc3BlY2lhbCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpcyxhcmdzPWFyZ3VtZW50cyxtaWdodFRocm93PWZ1bmN0aW9uKCl7dmFyIHJldHVybmVkLHRoZW47aWYoZGVwdGg8bWF4RGVwdGgpe3JldHVybjt9CnJldHVybmVkPWhhbmRsZXIuYXBwbHkodGhhdCxhcmdzKTtpZihyZXR1cm5lZD09PWRlZmVycmVkLnByb21pc2UoKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uIik7fQp0aGVuPXJldHVybmVkJiYodHlwZW9mIHJldHVybmVkPT09Im9iamVjdCJ8fHR5cGVvZiByZXR1cm5lZD09PSJmdW5jdGlvbiIpJiZyZXR1cm5lZC50aGVuO2lmKGlzRnVuY3Rpb24odGhlbikpe2lmKHNwZWNpYWwpe3RoZW4uY2FsbChyZXR1cm5lZCxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLElkZW50aXR5LHNwZWNpYWwpLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsVGhyb3dlcixzcGVjaWFsKSk7fWVsc2V7bWF4RGVwdGgrKzt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxkZWZlcnJlZC5ub3RpZnlXaXRoKSk7fX1lbHNle2lmKGhhbmRsZXIhPT1JZGVudGl0eSl7dGhhdD11bmRlZmluZWQ7YXJncz1bcmV0dXJuZWRdO30KKHNwZWNpYWx8fGRlZmVycmVkLnJlc29sdmVXaXRoKSh0aGF0LGFyZ3MpO319LHByb2Nlc3M9c3BlY2lhbD9taWdodFRocm93OmZ1bmN0aW9uKCl7dHJ5e21pZ2h0VGhyb3coKTt9Y2F0Y2goZSl7aWYoalF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2spe2pRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGUscHJvY2Vzcy5zdGFja1RyYWNlKTt9CmlmKGRlcHRoKzE+PW1heERlcHRoKXtpZihoYW5kbGVyIT09VGhyb3dlcil7dGhhdD11bmRlZmluZWQ7YXJncz1bZV07fQpkZWZlcnJlZC5yZWplY3RXaXRoKHRoYXQsYXJncyk7fX19O2lmKGRlcHRoKXtwcm9jZXNzKCk7fWVsc2V7aWYoalF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vayl7cHJvY2Vzcy5zdGFja1RyYWNlPWpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2soKTt9CndpbmRvdy5zZXRUaW1lb3V0KHByb2Nlc3MpO319O30KcmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbihuZXdEZWZlcil7dHVwbGVzWzBdWzNdLmFkZChyZXNvbHZlKDAsbmV3RGVmZXIsaXNGdW5jdGlvbihvblByb2dyZXNzKT9vblByb2dyZXNzOklkZW50aXR5LG5ld0RlZmVyLm5vdGlmeVdpdGgpKTt0dXBsZXNbMV1bM10uYWRkKHJlc29sdmUoMCxuZXdEZWZlcixpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKT9vbkZ1bGZpbGxlZDpJZGVudGl0eSkpO3R1cGxlc1syXVszXS5hZGQocmVzb2x2ZSgwLG5ld0RlZmVyLGlzRnVuY3Rpb24ob25SZWplY3RlZCk/b25SZWplY3RlZDpUaHJvd2VyKSk7fSkucHJvbWlzZSgpO30scHJvbWlzZTpmdW5jdGlvbihvYmope3JldHVybiBvYmohPW51bGw/alF1ZXJ5LmV4dGVuZChvYmoscHJvbWlzZSk6cHJvbWlzZTt9fSxkZWZlcnJlZD17fTtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGxpc3Q9dHVwbGVbMl0sc3RhdGVTdHJpbmc9dHVwbGVbNV07cHJvbWlzZVt0dXBsZVsxXV09bGlzdC5hZGQ7aWYoc3RhdGVTdHJpbmcpe2xpc3QuYWRkKGZ1bmN0aW9uKCl7c3RhdGU9c3RhdGVTdHJpbmc7fSx0dXBsZXNbMy1pXVsyXS5kaXNhYmxlLHR1cGxlc1szLWldWzNdLmRpc2FibGUsdHVwbGVzWzBdWzJdLmxvY2ssdHVwbGVzWzBdWzNdLmxvY2spO30KbGlzdC5hZGQodHVwbGVbM10uZmlyZSk7ZGVmZXJyZWRbdHVwbGVbMF1dPWZ1bmN0aW9uKCl7ZGVmZXJyZWRbdHVwbGVbMF0rIldpdGgiXSh0aGlzPT09ZGVmZXJyZWQ/dW5kZWZpbmVkOnRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpczt9O2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl09bGlzdC5maXJlV2l0aDt9KTtwcm9taXNlLnByb21pc2UoZGVmZXJyZWQpO2lmKGZ1bmMpe2Z1bmMuY2FsbChkZWZlcnJlZCxkZWZlcnJlZCk7fQpyZXR1cm4gZGVmZXJyZWQ7fSx3aGVuOmZ1bmN0aW9uKHNpbmdsZVZhbHVlKXt2YXIKcmVtYWluaW5nPWFyZ3VtZW50cy5sZW5ndGgsaT1yZW1haW5pbmcscmVzb2x2ZUNvbnRleHRzPUFycmF5KGkpLHJlc29sdmVWYWx1ZXM9c2xpY2UuY2FsbChhcmd1bWVudHMpLG1hc3Rlcj1qUXVlcnkuRGVmZXJyZWQoKSx1cGRhdGVGdW5jPWZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmVzb2x2ZUNvbnRleHRzW2ldPXRoaXM7cmVzb2x2ZVZhbHVlc1tpXT1hcmd1bWVudHMubGVuZ3RoPjE/c2xpY2UuY2FsbChhcmd1bWVudHMpOnZhbHVlO2lmKCEoLS1yZW1haW5pbmcpKXttYXN0ZXIucmVzb2x2ZVdpdGgocmVzb2x2ZUNvbnRleHRzLHJlc29sdmVWYWx1ZXMpO319O307aWYocmVtYWluaW5nPD0xKXthZG9wdFZhbHVlKHNpbmdsZVZhbHVlLG1hc3Rlci5kb25lKHVwZGF0ZUZ1bmMoaSkpLnJlc29sdmUsbWFzdGVyLnJlamVjdCwhcmVtYWluaW5nKTtpZihtYXN0ZXIuc3RhdGUoKT09PSJwZW5kaW5nInx8aXNGdW5jdGlvbihyZXNvbHZlVmFsdWVzW2ldJiZyZXNvbHZlVmFsdWVzW2ldLnRoZW4pKXtyZXR1cm4gbWFzdGVyLnRoZW4oKTt9fQp3aGlsZShpLS0pe2Fkb3B0VmFsdWUocmVzb2x2ZVZhbHVlc1tpXSx1cGRhdGVGdW5jKGkpLG1hc3Rlci5yZWplY3QpO30KcmV0dXJuIG1hc3Rlci5wcm9taXNlKCk7fX0pO3ZhciByZXJyb3JOYW1lcz0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlcnJvcixzdGFjayl7aWYod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLndhcm4mJmVycm9yJiZyZXJyb3JOYW1lcy50ZXN0KGVycm9yLm5hbWUpKXt3aW5kb3cuY29uc29sZS53YXJuKCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiAiK2Vycm9yLm1lc3NhZ2UsZXJyb3Iuc3RhY2ssc3RhY2spO319O2pRdWVyeS5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlcnJvcil7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlcnJvcjt9KTt9O3ZhciByZWFkeUxpc3Q9alF1ZXJ5LkRlZmVycmVkKCk7alF1ZXJ5LmZuLnJlYWR5PWZ1bmN0aW9uKGZuKXtyZWFkeUxpc3QudGhlbihmbikuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2pRdWVyeS5yZWFkeUV4Y2VwdGlvbihlcnJvcik7fSk7cmV0dXJuIHRoaXM7fTtqUXVlcnkuZXh0ZW5kKHtpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKHdhaXQpe2lmKHdhaXQ9PT10cnVlPy0talF1ZXJ5LnJlYWR5V2FpdDpqUXVlcnkuaXNSZWFkeSl7cmV0dXJuO30KalF1ZXJ5LmlzUmVhZHk9dHJ1ZTtpZih3YWl0IT09dHJ1ZSYmLS1qUXVlcnkucmVhZHlXYWl0PjApe3JldHVybjt9CnJlYWR5TGlzdC5yZXNvbHZlV2l0aChkb2N1bWVudCxbalF1ZXJ5XSk7fX0pO2pRdWVyeS5yZWFkeS50aGVuPXJlYWR5TGlzdC50aGVuO2Z1bmN0aW9uIGNvbXBsZXRlZCgpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7alF1ZXJ5LnJlYWR5KCk7fQppZihkb2N1bWVudC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlInx8KGRvY3VtZW50LnJlYWR5U3RhdGUhPT0ibG9hZGluZyImJiFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpKXt3aW5kb3cuc2V0VGltZW91dChqUXVlcnkucmVhZHkpO31lbHNle2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7fQp2YXIgYWNjZXNzPWZ1bmN0aW9uKGVsZW1zLGZuLGtleSx2YWx1ZSxjaGFpbmFibGUsZW1wdHlHZXQscmF3KXt2YXIgaT0wLGxlbj1lbGVtcy5sZW5ndGgsYnVsaz1rZXk9PW51bGw7aWYodG9UeXBlKGtleSk9PT0ib2JqZWN0Iil7Y2hhaW5hYmxlPXRydWU7Zm9yKGkgaW4ga2V5KXthY2Nlc3MoZWxlbXMsZm4saSxrZXlbaV0sdHJ1ZSxlbXB0eUdldCxyYXcpO319ZWxzZSBpZih2YWx1ZSE9PXVuZGVmaW5lZCl7Y2hhaW5hYmxlPXRydWU7aWYoIWlzRnVuY3Rpb24odmFsdWUpKXtyYXc9dHJ1ZTt9CmlmKGJ1bGspe2lmKHJhdyl7Zm4uY2FsbChlbGVtcyx2YWx1ZSk7Zm49bnVsbDt9ZWxzZXtidWxrPWZuO2ZuPWZ1bmN0aW9uKGVsZW0sa2V5LHZhbHVlKXtyZXR1cm4gYnVsay5jYWxsKGpRdWVyeShlbGVtKSx2YWx1ZSk7fTt9fQppZihmbil7Zm9yKDtpPGxlbjtpKyspe2ZuKGVsZW1zW2ldLGtleSxyYXc/dmFsdWU6dmFsdWUuY2FsbChlbGVtc1tpXSxpLGZuKGVsZW1zW2ldLGtleSkpKTt9fX0KaWYoY2hhaW5hYmxlKXtyZXR1cm4gZWxlbXM7fQppZihidWxrKXtyZXR1cm4gZm4uY2FsbChlbGVtcyk7fQpyZXR1cm4gbGVuP2ZuKGVsZW1zWzBdLGtleSk6ZW1wdHlHZXQ7fTt2YXIgcm1zUHJlZml4PS9eLW1zLS8scmRhc2hBbHBoYT0vLShbYS16XSkvZztmdW5jdGlvbiBmY2FtZWxDYXNlKGFsbCxsZXR0ZXIpe3JldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTt9CmZ1bmN0aW9uIGNhbWVsQ2FzZShzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZShybXNQcmVmaXgsIm1zLSIpLnJlcGxhY2UocmRhc2hBbHBoYSxmY2FtZWxDYXNlKTt9CnZhciBhY2NlcHREYXRhPWZ1bmN0aW9uKG93bmVyKXtyZXR1cm4gb3duZXIubm9kZVR5cGU9PT0xfHxvd25lci5ub2RlVHlwZT09PTl8fCEoK293bmVyLm5vZGVUeXBlKTt9O2Z1bmN0aW9uIERhdGEoKXt0aGlzLmV4cGFuZG89alF1ZXJ5LmV4cGFuZG8rRGF0YS51aWQrKzt9CkRhdGEudWlkPTE7RGF0YS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKG93bmVyKXt2YXIgdmFsdWU9b3duZXJbdGhpcy5leHBhbmRvXTtpZighdmFsdWUpe3ZhbHVlPXt9O2lmKGFjY2VwdERhdGEob3duZXIpKXtpZihvd25lci5ub2RlVHlwZSl7b3duZXJbdGhpcy5leHBhbmRvXT12YWx1ZTt9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkob3duZXIsdGhpcy5leHBhbmRvLHt2YWx1ZTp2YWx1ZSxjb25maWd1cmFibGU6dHJ1ZX0pO319fQpyZXR1cm4gdmFsdWU7fSxzZXQ6ZnVuY3Rpb24ob3duZXIsZGF0YSx2YWx1ZSl7dmFyIHByb3AsY2FjaGU9dGhpcy5jYWNoZShvd25lcik7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7Y2FjaGVbY2FtZWxDYXNlKGRhdGEpXT12YWx1ZTt9ZWxzZXtmb3IocHJvcCBpbiBkYXRhKXtjYWNoZVtjYW1lbENhc2UocHJvcCldPWRhdGFbcHJvcF07fX0KcmV0dXJuIGNhY2hlO30sZ2V0OmZ1bmN0aW9uKG93bmVyLGtleSl7cmV0dXJuIGtleT09PXVuZGVmaW5lZD90aGlzLmNhY2hlKG93bmVyKTpvd25lclt0aGlzLmV4cGFuZG9dJiZvd25lclt0aGlzLmV4cGFuZG9dW2NhbWVsQ2FzZShrZXkpXTt9LGFjY2VzczpmdW5jdGlvbihvd25lcixrZXksdmFsdWUpe2lmKGtleT09PXVuZGVmaW5lZHx8KChrZXkmJnR5cGVvZiBrZXk9PT0ic3RyaW5nIikmJnZhbHVlPT09dW5kZWZpbmVkKSl7cmV0dXJuIHRoaXMuZ2V0KG93bmVyLGtleSk7fQp0aGlzLnNldChvd25lcixrZXksdmFsdWUpO3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZD92YWx1ZTprZXk7fSxyZW1vdmU6ZnVuY3Rpb24ob3duZXIsa2V5KXt2YXIgaSxjYWNoZT1vd25lclt0aGlzLmV4cGFuZG9dO2lmKGNhY2hlPT09dW5kZWZpbmVkKXtyZXR1cm47fQppZihrZXkhPT11bmRlZmluZWQpe2lmKEFycmF5LmlzQXJyYXkoa2V5KSl7a2V5PWtleS5tYXAoY2FtZWxDYXNlKTt9ZWxzZXtrZXk9Y2FtZWxDYXNlKGtleSk7a2V5PWtleSBpbiBjYWNoZT9ba2V5XTooa2V5Lm1hdGNoKHJub3RodG1sd2hpdGUpfHxbXSk7fQppPWtleS5sZW5ndGg7d2hpbGUoaS0tKXtkZWxldGUgY2FjaGVba2V5W2ldXTt9fQppZihrZXk9PT11bmRlZmluZWR8fGpRdWVyeS5pc0VtcHR5T2JqZWN0KGNhY2hlKSl7aWYob3duZXIubm9kZVR5cGUpe293bmVyW3RoaXMuZXhwYW5kb109dW5kZWZpbmVkO31lbHNle2RlbGV0ZSBvd25lclt0aGlzLmV4cGFuZG9dO319fSxoYXNEYXRhOmZ1bmN0aW9uKG93bmVyKXt2YXIgY2FjaGU9b3duZXJbdGhpcy5leHBhbmRvXTtyZXR1cm4gY2FjaGUhPT11bmRlZmluZWQmJiFqUXVlcnkuaXNFbXB0eU9iamVjdChjYWNoZSk7fX07dmFyIGRhdGFQcml2PW5ldyBEYXRhKCk7dmFyIGRhdGFVc2VyPW5ldyBEYXRhKCk7dmFyIHJicmFjZT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLHJtdWx0aURhc2g9L1tBLVpdL2c7ZnVuY3Rpb24gZ2V0RGF0YShkYXRhKXtpZihkYXRhPT09InRydWUiKXtyZXR1cm4gdHJ1ZTt9CmlmKGRhdGE9PT0iZmFsc2UiKXtyZXR1cm4gZmFsc2U7fQppZihkYXRhPT09Im51bGwiKXtyZXR1cm4gbnVsbDt9CmlmKGRhdGE9PT0rZGF0YSsiIil7cmV0dXJuK2RhdGE7fQppZihyYnJhY2UudGVzdChkYXRhKSl7cmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGRhdGFBdHRyKGVsZW0sa2V5LGRhdGEpe3ZhciBuYW1lO2lmKGRhdGE9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtuYW1lPSJkYXRhLSIra2V5LnJlcGxhY2Uocm11bHRpRGFzaCwiLSQmIikudG9Mb3dlckNhc2UoKTtkYXRhPWVsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO2lmKHR5cGVvZiBkYXRhPT09InN0cmluZyIpe3RyeXtkYXRhPWdldERhdGEoZGF0YSk7fWNhdGNoKGUpe30KZGF0YVVzZXIuc2V0KGVsZW0sa2V5LGRhdGEpO31lbHNle2RhdGE9dW5kZWZpbmVkO319CnJldHVybiBkYXRhO30KalF1ZXJ5LmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YShlbGVtKXx8ZGF0YVByaXYuaGFzRGF0YShlbGVtKTt9LGRhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhVXNlci5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihlbGVtLG5hbWUpe2RhdGFVc2VyLnJlbW92ZShlbGVtLG5hbWUpO30sX2RhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhUHJpdi5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxuYW1lKTt9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBpLG5hbWUsZGF0YSxlbGVtPXRoaXNbMF0sYXR0cnM9ZWxlbSYmZWxlbS5hdHRyaWJ1dGVzO2lmKGtleT09PXVuZGVmaW5lZCl7aWYodGhpcy5sZW5ndGgpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0pO2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYhZGF0YVByaXYuZ2V0KGVsZW0sImhhc0RhdGFBdHRycyIpKXtpPWF0dHJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKGF0dHJzW2ldKXtuYW1lPWF0dHJzW2ldLm5hbWU7aWYobmFtZS5pbmRleE9mKCJkYXRhLSIpPT09MCl7bmFtZT1jYW1lbENhc2UobmFtZS5zbGljZSg1KSk7ZGF0YUF0dHIoZWxlbSxuYW1lLGRhdGFbbmFtZV0pO319fQpkYXRhUHJpdi5zZXQoZWxlbSwiaGFzRGF0YUF0dHJzIix0cnVlKTt9fQpyZXR1cm4gZGF0YTt9CmlmKHR5cGVvZiBrZXk9PT0ib2JqZWN0Iil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSk7fSk7fQpyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3ZhciBkYXRhO2lmKGVsZW0mJnZhbHVlPT09dW5kZWZpbmVkKXtkYXRhPWRhdGFVc2VyLmdldChlbGVtLGtleSk7aWYoZGF0YSE9PXVuZGVmaW5lZCl7cmV0dXJuIGRhdGE7fQpkYXRhPWRhdGFBdHRyKGVsZW0sa2V5KTtpZihkYXRhIT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YTt9CnJldHVybjt9CnRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSx2YWx1ZSk7fSk7fSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLHRydWUpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkYXRhVXNlci5yZW1vdmUodGhpcyxrZXkpO30pO319KTtqUXVlcnkuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlbGVtLHR5cGUsZGF0YSl7dmFyIHF1ZXVlO2lmKGVsZW0pe3R5cGU9KHR5cGV8fCJmeCIpKyJxdWV1ZSI7cXVldWU9ZGF0YVByaXYuZ2V0KGVsZW0sdHlwZSk7aWYoZGF0YSl7aWYoIXF1ZXVlfHxBcnJheS5pc0FycmF5KGRhdGEpKXtxdWV1ZT1kYXRhUHJpdi5hY2Nlc3MoZWxlbSx0eXBlLGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkpO31lbHNle3F1ZXVlLnB1c2goZGF0YSk7fX0KcmV0dXJuIHF1ZXVlfHxbXTt9fSxkZXF1ZXVlOmZ1bmN0aW9uKGVsZW0sdHlwZSl7dHlwZT10eXBlfHwiZngiO3ZhciBxdWV1ZT1qUXVlcnkucXVldWUoZWxlbSx0eXBlKSxzdGFydExlbmd0aD1xdWV1ZS5sZW5ndGgsZm49cXVldWUuc2hpZnQoKSxob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSx0eXBlKSxuZXh0PWZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUoZWxlbSx0eXBlKTt9O2lmKGZuPT09ImlucHJvZ3Jlc3MiKXtmbj1xdWV1ZS5zaGlmdCgpO3N0YXJ0TGVuZ3RoLS07fQppZihmbil7aWYodHlwZT09PSJmeCIpe3F1ZXVlLnVuc2hpZnQoImlucHJvZ3Jlc3MiKTt9CmRlbGV0ZSBob29rcy5zdG9wO2ZuLmNhbGwoZWxlbSxuZXh0LGhvb2tzKTt9CmlmKCFzdGFydExlbmd0aCYmaG9va3Mpe2hvb2tzLmVtcHR5LmZpcmUoKTt9fSxfcXVldWVIb29rczpmdW5jdGlvbihlbGVtLHR5cGUpe3ZhciBrZXk9dHlwZSsicXVldWVIb29rcyI7cmV0dXJuIGRhdGFQcml2LmdldChlbGVtLGtleSl8fGRhdGFQcml2LmFjY2VzcyhlbGVtLGtleSx7ZW1wdHk6alF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxbdHlwZSsicXVldWUiLGtleV0pO30pfSk7fX0pO2pRdWVyeS5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIHNldHRlcj0yO2lmKHR5cGVvZiB0eXBlIT09InN0cmluZyIpe2RhdGE9dHlwZTt0eXBlPSJmeCI7c2V0dGVyLS07fQppZihhcmd1bWVudHMubGVuZ3RoPHNldHRlcil7cmV0dXJuIGpRdWVyeS5xdWV1ZSh0aGlzWzBdLHR5cGUpO30KcmV0dXJuIGRhdGE9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcXVldWU9alF1ZXJ5LnF1ZXVlKHRoaXMsdHlwZSxkYXRhKTtqUXVlcnkuX3F1ZXVlSG9va3ModGhpcyx0eXBlKTtpZih0eXBlPT09ImZ4IiYmcXVldWVbMF0hPT0iaW5wcm9ncmVzcyIpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsdHlwZSk7fX0pO30sZGVxdWV1ZTpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9KTt9LGNsZWFyUXVldWU6ZnVuY3Rpb24odHlwZSl7cmV0dXJuIHRoaXMucXVldWUodHlwZXx8ImZ4IixbXSk7fSxwcm9taXNlOmZ1bmN0aW9uKHR5cGUsb2JqKXt2YXIgdG1wLGNvdW50PTEsZGVmZXI9alF1ZXJ5LkRlZmVycmVkKCksZWxlbWVudHM9dGhpcyxpPXRoaXMubGVuZ3RoLHJlc29sdmU9ZnVuY3Rpb24oKXtpZighKC0tY291bnQpKXtkZWZlci5yZXNvbHZlV2l0aChlbGVtZW50cyxbZWxlbWVudHNdKTt9fTtpZih0eXBlb2YgdHlwZSE9PSJzdHJpbmciKXtvYmo9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CnR5cGU9dHlwZXx8ImZ4Ijt3aGlsZShpLS0pe3RtcD1kYXRhUHJpdi5nZXQoZWxlbWVudHNbaV0sdHlwZSsicXVldWVIb29rcyIpO2lmKHRtcCYmdG1wLmVtcHR5KXtjb3VudCsrO3RtcC5lbXB0eS5hZGQocmVzb2x2ZSk7fX0KcmVzb2x2ZSgpO3JldHVybiBkZWZlci5wcm9taXNlKG9iaik7fX0pO3ZhciBwbnVtPSgvWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvKS5zb3VyY2U7dmFyIHJjc3NOdW09bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3BudW0rIikoW2EteiVdKikkIiwiaSIpO3ZhciBjc3NFeHBhbmQ9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXTt2YXIgaXNIaWRkZW5XaXRoaW5UcmVlPWZ1bmN0aW9uKGVsZW0sZWwpe2VsZW09ZWx8fGVsZW07cmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheT09PSJub25lInx8ZWxlbS5zdHlsZS5kaXNwbGF5PT09IiImJmpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSkmJmpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpPT09Im5vbmUiO307dmFyIHN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrLGFyZ3Mpe3ZhciByZXQsbmFtZSxvbGQ9e307Zm9yKG5hbWUgaW4gb3B0aW9ucyl7b2xkW25hbWVdPWVsZW0uc3R5bGVbbmFtZV07ZWxlbS5zdHlsZVtuYW1lXT1vcHRpb25zW25hbWVdO30KcmV0PWNhbGxiYWNrLmFwcGx5KGVsZW0sYXJnc3x8W10pO2ZvcihuYW1lIGluIG9wdGlvbnMpe2VsZW0uc3R5bGVbbmFtZV09b2xkW25hbWVdO30KcmV0dXJuIHJldDt9O2Z1bmN0aW9uIGFkanVzdENTUyhlbGVtLHByb3AsdmFsdWVQYXJ0cyx0d2Vlbil7dmFyIGFkanVzdGVkLHNjYWxlLG1heEl0ZXJhdGlvbnM9MjAsY3VycmVudFZhbHVlPXR3ZWVuP2Z1bmN0aW9uKCl7cmV0dXJuIHR3ZWVuLmN1cigpO306ZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5LmNzcyhlbGVtLHByb3AsIiIpO30saW5pdGlhbD1jdXJyZW50VmFsdWUoKSx1bml0PXZhbHVlUGFydHMmJnZhbHVlUGFydHNbM118fChqUXVlcnkuY3NzTnVtYmVyW3Byb3BdPyIiOiJweCIpLGluaXRpYWxJblVuaXQ9KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF18fHVuaXQhPT0icHgiJiYraW5pdGlhbCkmJnJjc3NOdW0uZXhlYyhqUXVlcnkuY3NzKGVsZW0scHJvcCkpO2lmKGluaXRpYWxJblVuaXQmJmluaXRpYWxJblVuaXRbM10hPT11bml0KXtpbml0aWFsPWluaXRpYWwvMjt1bml0PXVuaXR8fGluaXRpYWxJblVuaXRbM107aW5pdGlhbEluVW5pdD0raW5pdGlhbHx8MTt3aGlsZShtYXhJdGVyYXRpb25zLS0pe2pRdWVyeS5zdHlsZShlbGVtLHByb3AsaW5pdGlhbEluVW5pdCt1bml0KTtpZigoMS1zY2FsZSkqKDEtKHNjYWxlPWN1cnJlbnRWYWx1ZSgpL2luaXRpYWx8fDAuNSkpPD0wKXttYXhJdGVyYXRpb25zPTA7fQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQvc2NhbGU7fQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQqMjtqUXVlcnkuc3R5bGUoZWxlbSxwcm9wLGluaXRpYWxJblVuaXQrdW5pdCk7dmFsdWVQYXJ0cz12YWx1ZVBhcnRzfHxbXTt9CmlmKHZhbHVlUGFydHMpe2luaXRpYWxJblVuaXQ9K2luaXRpYWxJblVuaXR8fCtpbml0aWFsfHwwO2FkanVzdGVkPXZhbHVlUGFydHNbMV0/aW5pdGlhbEluVW5pdCsodmFsdWVQYXJ0c1sxXSsxKSp2YWx1ZVBhcnRzWzJdOit2YWx1ZVBhcnRzWzJdO2lmKHR3ZWVuKXt0d2Vlbi51bml0PXVuaXQ7dHdlZW4uc3RhcnQ9aW5pdGlhbEluVW5pdDt0d2Vlbi5lbmQ9YWRqdXN0ZWQ7fX0KcmV0dXJuIGFkanVzdGVkO30KdmFyIGRlZmF1bHREaXNwbGF5TWFwPXt9O2Z1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KGVsZW0pe3ZhciB0ZW1wLGRvYz1lbGVtLm93bmVyRG9jdW1lbnQsbm9kZU5hbWU9ZWxlbS5ub2RlTmFtZSxkaXNwbGF5PWRlZmF1bHREaXNwbGF5TWFwW25vZGVOYW1lXTtpZihkaXNwbGF5KXtyZXR1cm4gZGlzcGxheTt9CnRlbXA9ZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZG9jLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpKTtkaXNwbGF5PWpRdWVyeS5jc3ModGVtcCwiZGlzcGxheSIpO3RlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZW1wKTtpZihkaXNwbGF5PT09Im5vbmUiKXtkaXNwbGF5PSJibG9jayI7fQpkZWZhdWx0RGlzcGxheU1hcFtub2RlTmFtZV09ZGlzcGxheTtyZXR1cm4gZGlzcGxheTt9CmZ1bmN0aW9uIHNob3dIaWRlKGVsZW1lbnRzLHNob3cpe3ZhciBkaXNwbGF5LGVsZW0sdmFsdWVzPVtdLGluZGV4PTAsbGVuZ3RoPWVsZW1lbnRzLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtlbGVtPWVsZW1lbnRzW2luZGV4XTtpZighZWxlbS5zdHlsZSl7Y29udGludWU7fQpkaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheTtpZihzaG93KXtpZihkaXNwbGF5PT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPWRhdGFQcml2LmdldChlbGVtLCJkaXNwbGF5Iil8fG51bGw7aWYoIXZhbHVlc1tpbmRleF0pe2VsZW0uc3R5bGUuZGlzcGxheT0iIjt9fQppZihlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNIaWRkZW5XaXRoaW5UcmVlKGVsZW0pKXt2YWx1ZXNbaW5kZXhdPWdldERlZmF1bHREaXNwbGF5KGVsZW0pO319ZWxzZXtpZihkaXNwbGF5IT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPSJub25lIjtkYXRhUHJpdi5zZXQoZWxlbSwiZGlzcGxheSIsZGlzcGxheSk7fX19CmZvcihpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtpZih2YWx1ZXNbaW5kZXhdIT1udWxsKXtlbGVtZW50c1tpbmRleF0uc3R5bGUuZGlzcGxheT12YWx1ZXNbaW5kZXhdO319CnJldHVybiBlbGVtZW50czt9CmpRdWVyeS5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyx0cnVlKTt9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyk7fSx0b2dnbGU6ZnVuY3Rpb24oc3RhdGUpe2lmKHR5cGVvZiBzdGF0ZT09PSJib29sZWFuIil7cmV0dXJuIHN0YXRlP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGlzSGlkZGVuV2l0aGluVHJlZSh0aGlzKSl7alF1ZXJ5KHRoaXMpLnNob3coKTt9ZWxzZXtqUXVlcnkodGhpcykuaGlkZSgpO319KTt9fSk7dmFyIHJjaGVja2FibGVUeXBlPSgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7dmFyIHJ0YWdOYW1lPSgvPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKykvaSk7dmFyIHJzY3JpcHRUeXBlPSgvXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kpO3ZhciB3cmFwTWFwPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbjt3cmFwTWFwLnRib2R5PXdyYXBNYXAudGZvb3Q9d3JhcE1hcC5jb2xncm91cD13cmFwTWFwLmNhcHRpb249d3JhcE1hcC50aGVhZDt3cmFwTWFwLnRoPXdyYXBNYXAudGQ7ZnVuY3Rpb24gZ2V0QWxsKGNvbnRleHQsdGFnKXt2YXIgcmV0O2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ3x8IioiKTt9ZWxzZSBpZih0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwodGFnfHwiKiIpO31lbHNle3JldD1bXTt9CmlmKHRhZz09PXVuZGVmaW5lZHx8dGFnJiZub2RlTmFtZShjb250ZXh0LHRhZykpe3JldHVybiBqUXVlcnkubWVyZ2UoW2NvbnRleHRdLHJldCk7fQpyZXR1cm4gcmV0O30KZnVuY3Rpb24gc2V0R2xvYmFsRXZhbChlbGVtcyxyZWZFbGVtZW50cyl7dmFyIGk9MCxsPWVsZW1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe2RhdGFQcml2LnNldChlbGVtc1tpXSwiZ2xvYmFsRXZhbCIsIXJlZkVsZW1lbnRzfHxkYXRhUHJpdi5nZXQocmVmRWxlbWVudHNbaV0sImdsb2JhbEV2YWwiKSk7fX0KdmFyIHJodG1sPS88fCYjP1x3KzsvO2Z1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoZWxlbXMsY29udGV4dCxzY3JpcHRzLHNlbGVjdGlvbixpZ25vcmVkKXt2YXIgZWxlbSx0bXAsdGFnLHdyYXAsY29udGFpbnMsaixmcmFnbWVudD1jb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxub2Rlcz1bXSxpPTAsbD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtlbGVtPWVsZW1zW2ldO2lmKGVsZW18fGVsZW09PT0wKXtpZih0b1R5cGUoZWxlbSk9PT0ib2JqZWN0Iil7alF1ZXJ5Lm1lcmdlKG5vZGVzLGVsZW0ubm9kZVR5cGU/W2VsZW1dOmVsZW0pO31lbHNlIGlmKCFyaHRtbC50ZXN0KGVsZW0pKXtub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoZWxlbSkpO31lbHNle3RtcD10bXB8fGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgiZGl2IikpO3RhZz0ocnRhZ05hbWUuZXhlYyhlbGVtKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTt3cmFwPXdyYXBNYXBbdGFnXXx8d3JhcE1hcC5fZGVmYXVsdDt0bXAuaW5uZXJIVE1MPXdyYXBbMV0ralF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoZWxlbSkrd3JhcFsyXTtqPXdyYXBbMF07d2hpbGUoai0tKXt0bXA9dG1wLmxhc3RDaGlsZDt9CmpRdWVyeS5tZXJnZShub2Rlcyx0bXAuY2hpbGROb2Rlcyk7dG1wPWZyYWdtZW50LmZpcnN0Q2hpbGQ7dG1wLnRleHRDb250ZW50PSIiO319fQpmcmFnbWVudC50ZXh0Q29udGVudD0iIjtpPTA7d2hpbGUoKGVsZW09bm9kZXNbaSsrXSkpe2lmKHNlbGVjdGlvbiYmalF1ZXJ5LmluQXJyYXkoZWxlbSxzZWxlY3Rpb24pPi0xKXtpZihpZ25vcmVkKXtpZ25vcmVkLnB1c2goZWxlbSk7fQpjb250aW51ZTt9CmNvbnRhaW5zPWpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSk7dG1wPWdldEFsbChmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtKSwic2NyaXB0Iik7aWYoY29udGFpbnMpe3NldEdsb2JhbEV2YWwodG1wKTt9CmlmKHNjcmlwdHMpe2o9MDt3aGlsZSgoZWxlbT10bXBbaisrXSkpe2lmKHJzY3JpcHRUeXBlLnRlc3QoZWxlbS50eXBlfHwiIikpe3NjcmlwdHMucHVzaChlbGVtKTt9fX19CnJldHVybiBmcmFnbWVudDt9CihmdW5jdGlvbigpe3ZhciBmcmFnbWVudD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZGl2PWZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIik7aW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpO2lucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKTtkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO3N1cHBvcnQuY2hlY2tDbG9uZT1kaXYuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDtkaXYuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IjtzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkPSEhZGl2LmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO30pKCk7dmFyIGRvY3VtZW50RWxlbWVudD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyCnJrZXlFdmVudD0vXmtleS8scm1vdXNlRXZlbnQ9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHJ0eXBlbmFtZXNwYWNlPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiByZXR1cm5UcnVlKCl7cmV0dXJuIHRydWU7fQpmdW5jdGlvbiByZXR1cm5GYWxzZSgpe3JldHVybiBmYWxzZTt9CmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCl7dHJ5e3JldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O31jYXRjaChlcnIpe319CmZ1bmN0aW9uIG9uKGVsZW0sdHlwZXMsc2VsZWN0b3IsZGF0YSxmbixvbmUpe3ZhciBvcmlnRm4sdHlwZTtpZih0eXBlb2YgdHlwZXM9PT0ib2JqZWN0Iil7aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyIpe2RhdGE9ZGF0YXx8c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkO30KZm9yKHR5cGUgaW4gdHlwZXMpe29uKGVsZW0sdHlwZSxzZWxlY3RvcixkYXRhLHR5cGVzW3R5cGVdLG9uZSk7fQpyZXR1cm4gZWxlbTt9CmlmKGRhdGE9PW51bGwmJmZuPT1udWxsKXtmbj1zZWxlY3RvcjtkYXRhPXNlbGVjdG9yPXVuZGVmaW5lZDt9ZWxzZSBpZihmbj09bnVsbCl7aWYodHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe2ZuPWRhdGE7ZGF0YT11bmRlZmluZWQ7fWVsc2V7Zm49ZGF0YTtkYXRhPXNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZDt9fQppZihmbj09PWZhbHNlKXtmbj1yZXR1cm5GYWxzZTt9ZWxzZSBpZighZm4pe3JldHVybiBlbGVtO30KaWYob25lPT09MSl7b3JpZ0ZuPWZuO2ZuPWZ1bmN0aW9uKGV2ZW50KXtqUXVlcnkoKS5vZmYoZXZlbnQpO3JldHVybiBvcmlnRm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO307Zm4uZ3VpZD1vcmlnRm4uZ3VpZHx8KG9yaWdGbi5ndWlkPWpRdWVyeS5ndWlkKyspO30KcmV0dXJuIGVsZW0uZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC5hZGQodGhpcyx0eXBlcyxmbixkYXRhLHNlbGVjdG9yKTt9KTt9CmpRdWVyeS5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlbGVtLHR5cGVzLGhhbmRsZXIsZGF0YSxzZWxlY3Rvcil7dmFyIGhhbmRsZU9iakluLGV2ZW50SGFuZGxlLHRtcCxldmVudHMsdCxoYW5kbGVPYmosc3BlY2lhbCxoYW5kbGVycyx0eXBlLG5hbWVzcGFjZXMsb3JpZ1R5cGUsZWxlbURhdGE9ZGF0YVByaXYuZ2V0KGVsZW0pO2lmKCFlbGVtRGF0YSl7cmV0dXJuO30KaWYoaGFuZGxlci5oYW5kbGVyKXtoYW5kbGVPYmpJbj1oYW5kbGVyO2hhbmRsZXI9aGFuZGxlT2JqSW4uaGFuZGxlcjtzZWxlY3Rvcj1oYW5kbGVPYmpJbi5zZWxlY3Rvcjt9CmlmKHNlbGVjdG9yKXtqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZG9jdW1lbnRFbGVtZW50LHNlbGVjdG9yKTt9CmlmKCFoYW5kbGVyLmd1aWQpe2hhbmRsZXIuZ3VpZD1qUXVlcnkuZ3VpZCsrO30KaWYoIShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7ZXZlbnRzPWVsZW1EYXRhLmV2ZW50cz17fTt9CmlmKCEoZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlKSl7ZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgalF1ZXJ5IT09InVuZGVmaW5lZCImJmpRdWVyeS5ldmVudC50cmlnZ2VyZWQhPT1lLnR5cGU/alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KGVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWQ7fTt9CnR5cGVzPSh0eXBlc3x8IiIpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO3Q9dHlwZXMubGVuZ3RoO3doaWxlKHQtLSl7dG1wPXJ0eXBlbmFtZXNwYWNlLmV4ZWModHlwZXNbdF0pfHxbXTt0eXBlPW9yaWdUeXBlPXRtcFsxXTtuYW1lc3BhY2VzPSh0bXBbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighdHlwZSl7Y29udGludWU7fQpzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTt0eXBlPShzZWxlY3Rvcj9zcGVjaWFsLmRlbGVnYXRlVHlwZTpzcGVjaWFsLmJpbmRUeXBlKXx8dHlwZTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtoYW5kbGVPYmo9alF1ZXJ5LmV4dGVuZCh7dHlwZTp0eXBlLG9yaWdUeXBlOm9yaWdUeXBlLGRhdGE6ZGF0YSxoYW5kbGVyOmhhbmRsZXIsZ3VpZDpoYW5kbGVyLmd1aWQsc2VsZWN0b3I6c2VsZWN0b3IsbmVlZHNDb250ZXh0OnNlbGVjdG9yJiZqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChzZWxlY3RvciksbmFtZXNwYWNlOm5hbWVzcGFjZXMuam9pbigiLiIpfSxoYW5kbGVPYmpJbik7aWYoIShoYW5kbGVycz1ldmVudHNbdHlwZV0pKXtoYW5kbGVycz1ldmVudHNbdHlwZV09W107aGFuZGxlcnMuZGVsZWdhdGVDb3VudD0wO2lmKCFzcGVjaWFsLnNldHVwfHxzcGVjaWFsLnNldHVwLmNhbGwoZWxlbSxkYXRhLG5hbWVzcGFjZXMsZXZlbnRIYW5kbGUpPT09ZmFsc2Upe2lmKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcil7ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZXZlbnRIYW5kbGUpO319fQppZihzcGVjaWFsLmFkZCl7c3BlY2lhbC5hZGQuY2FsbChlbGVtLGhhbmRsZU9iaik7aWYoIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQpe2hhbmRsZU9iai5oYW5kbGVyLmd1aWQ9aGFuZGxlci5ndWlkO319CmlmKHNlbGVjdG9yKXtoYW5kbGVycy5zcGxpY2UoaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLDAsaGFuZGxlT2JqKTt9ZWxzZXtoYW5kbGVycy5wdXNoKGhhbmRsZU9iaik7fQpqUXVlcnkuZXZlbnQuZ2xvYmFsW3R5cGVdPXRydWU7fX0scmVtb3ZlOmZ1bmN0aW9uKGVsZW0sdHlwZXMsaGFuZGxlcixzZWxlY3RvcixtYXBwZWRUeXBlcyl7dmFyIGosb3JpZ0NvdW50LHRtcCxldmVudHMsdCxoYW5kbGVPYmosc3BlY2lhbCxoYW5kbGVycyx0eXBlLG5hbWVzcGFjZXMsb3JpZ1R5cGUsZWxlbURhdGE9ZGF0YVByaXYuaGFzRGF0YShlbGVtKSYmZGF0YVByaXYuZ2V0KGVsZW0pO2lmKCFlbGVtRGF0YXx8IShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7cmV0dXJuO30KdHlwZXM9KHR5cGVzfHwiIikubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFsiIl07dD10eXBlcy5sZW5ndGg7d2hpbGUodC0tKXt0bXA9cnR5cGVuYW1lc3BhY2UuZXhlYyh0eXBlc1t0XSl8fFtdO3R5cGU9b3JpZ1R5cGU9dG1wWzFdO25hbWVzcGFjZXM9KHRtcFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCF0eXBlKXtmb3IodHlwZSBpbiBldmVudHMpe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlK3R5cGVzW3RdLGhhbmRsZXIsc2VsZWN0b3IsdHJ1ZSk7fQpjb250aW51ZTt9CnNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O3R5cGU9KHNlbGVjdG9yP3NwZWNpYWwuZGVsZWdhdGVUeXBlOnNwZWNpYWwuYmluZFR5cGUpfHx0eXBlO2hhbmRsZXJzPWV2ZW50c1t0eXBlXXx8W107dG1wPXRtcFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrbmFtZXNwYWNlcy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtvcmlnQ291bnQ9aj1oYW5kbGVycy5sZW5ndGg7d2hpbGUoai0tKXtoYW5kbGVPYmo9aGFuZGxlcnNbal07aWYoKG1hcHBlZFR5cGVzfHxvcmlnVHlwZT09PWhhbmRsZU9iai5vcmlnVHlwZSkmJighaGFuZGxlcnx8aGFuZGxlci5ndWlkPT09aGFuZGxlT2JqLmd1aWQpJiYoIXRtcHx8dG1wLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpJiYoIXNlbGVjdG9yfHxzZWxlY3Rvcj09PWhhbmRsZU9iai5zZWxlY3Rvcnx8c2VsZWN0b3I9PT0iKioiJiZoYW5kbGVPYmouc2VsZWN0b3IpKXtoYW5kbGVycy5zcGxpY2UoaiwxKTtpZihoYW5kbGVPYmouc2VsZWN0b3Ipe2hhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTt9CmlmKHNwZWNpYWwucmVtb3ZlKXtzcGVjaWFsLnJlbW92ZS5jYWxsKGVsZW0saGFuZGxlT2JqKTt9fX0KaWYob3JpZ0NvdW50JiYhaGFuZGxlcnMubGVuZ3RoKXtpZighc3BlY2lhbC50ZWFyZG93bnx8c3BlY2lhbC50ZWFyZG93bi5jYWxsKGVsZW0sbmFtZXNwYWNlcyxlbGVtRGF0YS5oYW5kbGUpPT09ZmFsc2Upe2pRdWVyeS5yZW1vdmVFdmVudChlbGVtLHR5cGUsZWxlbURhdGEuaGFuZGxlKTt9CmRlbGV0ZSBldmVudHNbdHlwZV07fX0KaWYoalF1ZXJ5LmlzRW1wdHlPYmplY3QoZXZlbnRzKSl7ZGF0YVByaXYucmVtb3ZlKGVsZW0sImhhbmRsZSBldmVudHMiKTt9fSxkaXNwYXRjaDpmdW5jdGlvbihuYXRpdmVFdmVudCl7dmFyIGV2ZW50PWpRdWVyeS5ldmVudC5maXgobmF0aXZlRXZlbnQpO3ZhciBpLGoscmV0LG1hdGNoZWQsaGFuZGxlT2JqLGhhbmRsZXJRdWV1ZSxhcmdzPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxoYW5kbGVycz0oZGF0YVByaXYuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZXZlbnQudHlwZV18fFtdLHNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbZXZlbnQudHlwZV18fHt9O2FyZ3NbMF09ZXZlbnQ7Zm9yKGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXthcmdzW2ldPWFyZ3VtZW50c1tpXTt9CmV2ZW50LmRlbGVnYXRlVGFyZ2V0PXRoaXM7aWYoc3BlY2lhbC5wcmVEaXNwYXRjaCYmc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZXZlbnQpPT09ZmFsc2Upe3JldHVybjt9CmhhbmRsZXJRdWV1ZT1qUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGV2ZW50LGhhbmRsZXJzKTtpPTA7d2hpbGUoKG1hdGNoZWQ9aGFuZGxlclF1ZXVlW2krK10pJiYhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZXZlbnQuY3VycmVudFRhcmdldD1tYXRjaGVkLmVsZW07aj0wO3doaWxlKChoYW5kbGVPYmo9bWF0Y2hlZC5oYW5kbGVyc1tqKytdKSYmIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFldmVudC5ybmFtZXNwYWNlfHxldmVudC5ybmFtZXNwYWNlLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpe2V2ZW50LmhhbmRsZU9iaj1oYW5kbGVPYmo7ZXZlbnQuZGF0YT1oYW5kbGVPYmouZGF0YTtyZXQ9KChqUXVlcnkuZXZlbnQuc3BlY2lhbFtoYW5kbGVPYmoub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxoYW5kbGVPYmouaGFuZGxlcikuYXBwbHkobWF0Y2hlZC5lbGVtLGFyZ3MpO2lmKHJldCE9PXVuZGVmaW5lZCl7aWYoKGV2ZW50LnJlc3VsdD1yZXQpPT09ZmFsc2Upe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX19fX0KaWYoc3BlY2lhbC5wb3N0RGlzcGF0Y2gpe3NwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxldmVudCk7fQpyZXR1cm4gZXZlbnQucmVzdWx0O30saGFuZGxlcnM6ZnVuY3Rpb24oZXZlbnQsaGFuZGxlcnMpe3ZhciBpLGhhbmRsZU9iaixzZWwsbWF0Y2hlZEhhbmRsZXJzLG1hdGNoZWRTZWxlY3RvcnMsaGFuZGxlclF1ZXVlPVtdLGRlbGVnYXRlQ291bnQ9aGFuZGxlcnMuZGVsZWdhdGVDb3VudCxjdXI9ZXZlbnQudGFyZ2V0O2lmKGRlbGVnYXRlQ291bnQmJmN1ci5ub2RlVHlwZSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmZXZlbnQuYnV0dG9uPj0xKSl7Zm9yKDtjdXIhPT10aGlzO2N1cj1jdXIucGFyZW50Tm9kZXx8dGhpcyl7aWYoY3VyLm5vZGVUeXBlPT09MSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmY3VyLmRpc2FibGVkPT09dHJ1ZSkpe21hdGNoZWRIYW5kbGVycz1bXTttYXRjaGVkU2VsZWN0b3JzPXt9O2ZvcihpPTA7aTxkZWxlZ2F0ZUNvdW50O2krKyl7aGFuZGxlT2JqPWhhbmRsZXJzW2ldO3NlbD1oYW5kbGVPYmouc2VsZWN0b3IrIiAiO2lmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXT09PXVuZGVmaW5lZCl7bWF0Y2hlZFNlbGVjdG9yc1tzZWxdPWhhbmRsZU9iai5uZWVkc0NvbnRleHQ/alF1ZXJ5KHNlbCx0aGlzKS5pbmRleChjdXIpPi0xOmpRdWVyeS5maW5kKHNlbCx0aGlzLG51bGwsW2N1cl0pLmxlbmd0aDt9CmlmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXSl7bWF0Y2hlZEhhbmRsZXJzLnB1c2goaGFuZGxlT2JqKTt9fQppZihtYXRjaGVkSGFuZGxlcnMubGVuZ3RoKXtoYW5kbGVyUXVldWUucHVzaCh7ZWxlbTpjdXIsaGFuZGxlcnM6bWF0Y2hlZEhhbmRsZXJzfSk7fX19fQpjdXI9dGhpcztpZihkZWxlZ2F0ZUNvdW50PGhhbmRsZXJzLmxlbmd0aCl7aGFuZGxlclF1ZXVlLnB1c2goe2VsZW06Y3VyLGhhbmRsZXJzOmhhbmRsZXJzLnNsaWNlKGRlbGVnYXRlQ291bnQpfSk7fQpyZXR1cm4gaGFuZGxlclF1ZXVlO30sYWRkUHJvcDpmdW5jdGlvbihuYW1lLGhvb2spe09iamVjdC5kZWZpbmVQcm9wZXJ0eShqUXVlcnkuRXZlbnQucHJvdG90eXBlLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSxnZXQ6aXNGdW5jdGlvbihob29rKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIGhvb2sodGhpcy5vcmlnaW5hbEV2ZW50KTt9fTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFtuYW1lXTt9fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlLHZhbHVlOnZhbHVlfSk7fX0pO30sZml4OmZ1bmN0aW9uKG9yaWdpbmFsRXZlbnQpe3JldHVybiBvcmlnaW5hbEV2ZW50W2pRdWVyeS5leHBhbmRvXT9vcmlnaW5hbEV2ZW50Om5ldyBqUXVlcnkuRXZlbnQob3JpZ2luYWxFdmVudCk7fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTp0cnVlfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1zYWZlQWN0aXZlRWxlbWVudCgpJiZ0aGlzLmZvY3VzKXt0aGlzLmZvY3VzKCk7cmV0dXJuIGZhbHNlO319LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzPT09c2FmZUFjdGl2ZUVsZW1lbnQoKSYmdGhpcy5ibHVyKXt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2U7fX0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT09ImNoZWNrYm94IiYmdGhpcy5jbGljayYmbm9kZU5hbWUodGhpcywiaW5wdXQiKSl7dGhpcy5jbGljaygpO3JldHVybiBmYWxzZTt9fSxfZGVmYXVsdDpmdW5jdGlvbihldmVudCl7cmV0dXJuIG5vZGVOYW1lKGV2ZW50LnRhcmdldCwiYSIpO319LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGV2ZW50KXtpZihldmVudC5yZXN1bHQhPT11bmRlZmluZWQmJmV2ZW50Lm9yaWdpbmFsRXZlbnQpe2V2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZXZlbnQucmVzdWx0O319fX19O2pRdWVyeS5yZW1vdmVFdmVudD1mdW5jdGlvbihlbGVtLHR5cGUsaGFuZGxlKXtpZihlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIpe2VsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLGhhbmRsZSk7fX07alF1ZXJ5LkV2ZW50PWZ1bmN0aW9uKHNyYyxwcm9wcyl7aWYoISh0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50KSl7cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoc3JjLHByb3BzKTt9CmlmKHNyYyYmc3JjLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1zcmM7dGhpcy50eXBlPXNyYy50eXBlO3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXNyYy5kZWZhdWx0UHJldmVudGVkfHxzcmMuZGVmYXVsdFByZXZlbnRlZD09PXVuZGVmaW5lZCYmc3JjLnJldHVyblZhbHVlPT09ZmFsc2U/cmV0dXJuVHJ1ZTpyZXR1cm5GYWxzZTt0aGlzLnRhcmdldD0oc3JjLnRhcmdldCYmc3JjLnRhcmdldC5ub2RlVHlwZT09PTMpP3NyYy50YXJnZXQucGFyZW50Tm9kZTpzcmMudGFyZ2V0O3RoaXMuY3VycmVudFRhcmdldD1zcmMuY3VycmVudFRhcmdldDt0aGlzLnJlbGF0ZWRUYXJnZXQ9c3JjLnJlbGF0ZWRUYXJnZXQ7fWVsc2V7dGhpcy50eXBlPXNyYzt9CmlmKHByb3BzKXtqUXVlcnkuZXh0ZW5kKHRoaXMscHJvcHMpO30KdGhpcy50aW1lU3RhbXA9c3JjJiZzcmMudGltZVN0YW1wfHxEYXRlLm5vdygpO3RoaXNbalF1ZXJ5LmV4cGFuZG9dPXRydWU7fTtqUXVlcnkuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpqUXVlcnkuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOnJldHVybkZhbHNlLGlzUHJvcGFnYXRpb25TdG9wcGVkOnJldHVybkZhbHNlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOnJldHVybkZhbHNlLGlzU2ltdWxhdGVkOmZhbHNlLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXJldHVyblRydWU7aWYoZSYmIXRoaXMuaXNTaW11bGF0ZWQpe2UucHJldmVudERlZmF1bHQoKTt9fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnN0b3BQcm9wYWdhdGlvbigpO319LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXJldHVyblRydWU7aWYoZSYmIXRoaXMuaXNTaW11bGF0ZWQpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7fQp0aGlzLnN0b3BQcm9wYWdhdGlvbigpO319O2pRdWVyeS5lYWNoKHthbHRLZXk6dHJ1ZSxidWJibGVzOnRydWUsY2FuY2VsYWJsZTp0cnVlLGNoYW5nZWRUb3VjaGVzOnRydWUsY3RybEtleTp0cnVlLGRldGFpbDp0cnVlLGV2ZW50UGhhc2U6dHJ1ZSxtZXRhS2V5OnRydWUscGFnZVg6dHJ1ZSxwYWdlWTp0cnVlLHNoaWZ0S2V5OnRydWUsdmlldzp0cnVlLCJjaGFyIjp0cnVlLGNoYXJDb2RlOnRydWUsa2V5OnRydWUsa2V5Q29kZTp0cnVlLGJ1dHRvbjp0cnVlLGJ1dHRvbnM6dHJ1ZSxjbGllbnRYOnRydWUsY2xpZW50WTp0cnVlLG9mZnNldFg6dHJ1ZSxvZmZzZXRZOnRydWUscG9pbnRlcklkOnRydWUscG9pbnRlclR5cGU6dHJ1ZSxzY3JlZW5YOnRydWUsc2NyZWVuWTp0cnVlLHRhcmdldFRvdWNoZXM6dHJ1ZSx0b0VsZW1lbnQ6dHJ1ZSx0b3VjaGVzOnRydWUsd2hpY2g6ZnVuY3Rpb24oZXZlbnQpe3ZhciBidXR0b249ZXZlbnQuYnV0dG9uO2lmKGV2ZW50LndoaWNoPT1udWxsJiZya2V5RXZlbnQudGVzdChldmVudC50eXBlKSl7cmV0dXJuIGV2ZW50LmNoYXJDb2RlIT1udWxsP2V2ZW50LmNoYXJDb2RlOmV2ZW50LmtleUNvZGU7fQppZighZXZlbnQud2hpY2gmJmJ1dHRvbiE9PXVuZGVmaW5lZCYmcm1vdXNlRXZlbnQudGVzdChldmVudC50eXBlKSl7aWYoYnV0dG9uJjEpe3JldHVybiAxO30KaWYoYnV0dG9uJjIpe3JldHVybiAzO30KaWYoYnV0dG9uJjQpe3JldHVybiAyO30KcmV0dXJuIDA7fQpyZXR1cm4gZXZlbnQud2hpY2g7fX0salF1ZXJ5LmV2ZW50LmFkZFByb3ApO2pRdWVyeS5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihvcmlnLGZpeCl7alF1ZXJ5LmV2ZW50LnNwZWNpYWxbb3JpZ109e2RlbGVnYXRlVHlwZTpmaXgsYmluZFR5cGU6Zml4LGhhbmRsZTpmdW5jdGlvbihldmVudCl7dmFyIHJldCx0YXJnZXQ9dGhpcyxyZWxhdGVkPWV2ZW50LnJlbGF0ZWRUYXJnZXQsaGFuZGxlT2JqPWV2ZW50LmhhbmRsZU9iajtpZighcmVsYXRlZHx8KHJlbGF0ZWQhPT10YXJnZXQmJiFqUXVlcnkuY29udGFpbnModGFyZ2V0LHJlbGF0ZWQpKSl7ZXZlbnQudHlwZT1oYW5kbGVPYmoub3JpZ1R5cGU7cmV0PWhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtldmVudC50eXBlPWZpeDt9CnJldHVybiByZXQ7fX07fSk7alF1ZXJ5LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil7cmV0dXJuIG9uKHRoaXMsdHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSxvbmU6ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil7cmV0dXJuIG9uKHRoaXMsdHlwZXMsc2VsZWN0b3IsZGF0YSxmbiwxKTt9LG9mZjpmdW5jdGlvbih0eXBlcyxzZWxlY3Rvcixmbil7dmFyIGhhbmRsZU9iaix0eXBlO2lmKHR5cGVzJiZ0eXBlcy5wcmV2ZW50RGVmYXVsdCYmdHlwZXMuaGFuZGxlT2JqKXtoYW5kbGVPYmo9dHlwZXMuaGFuZGxlT2JqO2pRdWVyeSh0eXBlcy5kZWxlZ2F0ZVRhcmdldCkub2ZmKGhhbmRsZU9iai5uYW1lc3BhY2U/aGFuZGxlT2JqLm9yaWdUeXBlKyIuIitoYW5kbGVPYmoubmFtZXNwYWNlOmhhbmRsZU9iai5vcmlnVHlwZSxoYW5kbGVPYmouc2VsZWN0b3IsaGFuZGxlT2JqLmhhbmRsZXIpO3JldHVybiB0aGlzO30KaWYodHlwZW9mIHR5cGVzPT09Im9iamVjdCIpe2Zvcih0eXBlIGluIHR5cGVzKXt0aGlzLm9mZih0eXBlLHNlbGVjdG9yLHR5cGVzW3R5cGVdKTt9CnJldHVybiB0aGlzO30KaWYoc2VsZWN0b3I9PT1mYWxzZXx8dHlwZW9mIHNlbGVjdG9yPT09ImZ1bmN0aW9uIil7Zm49c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkO30KaWYoZm49PT1mYWxzZSl7Zm49cmV0dXJuRmFsc2U7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnJlbW92ZSh0aGlzLHR5cGVzLGZuLHNlbGVjdG9yKTt9KTt9fSk7dmFyCnJ4aHRtbFRhZz0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKilbXj5dKilcLz4vZ2kscm5vSW5uZXJodG1sPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHJjaGVja2VkPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHJjbGVhblNjcmlwdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KGVsZW0sY29udGVudCl7aWYobm9kZU5hbWUoZWxlbSwidGFibGUiKSYmbm9kZU5hbWUoY29udGVudC5ub2RlVHlwZSE9PTExP2NvbnRlbnQ6Y29udGVudC5maXJzdENoaWxkLCJ0ciIpKXtyZXR1cm4galF1ZXJ5KGVsZW0pLmNoaWxkcmVuKCJ0Ym9keSIpWzBdfHxlbGVtO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBkaXNhYmxlU2NyaXB0KGVsZW0pe2VsZW0udHlwZT0oZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSE9PW51bGwpKyIvIitlbGVtLnR5cGU7cmV0dXJuIGVsZW07fQpmdW5jdGlvbiByZXN0b3JlU2NyaXB0KGVsZW0pe2lmKChlbGVtLnR5cGV8fCIiKS5zbGljZSgwLDUpPT09InRydWUvIil7ZWxlbS50eXBlPWVsZW0udHlwZS5zbGljZSg1KTt9ZWxzZXtlbGVtLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBjbG9uZUNvcHlFdmVudChzcmMsZGVzdCl7dmFyIGksbCx0eXBlLHBkYXRhT2xkLHBkYXRhQ3VyLHVkYXRhT2xkLHVkYXRhQ3VyLGV2ZW50cztpZihkZXN0Lm5vZGVUeXBlIT09MSl7cmV0dXJuO30KaWYoZGF0YVByaXYuaGFzRGF0YShzcmMpKXtwZGF0YU9sZD1kYXRhUHJpdi5hY2Nlc3Moc3JjKTtwZGF0YUN1cj1kYXRhUHJpdi5zZXQoZGVzdCxwZGF0YU9sZCk7ZXZlbnRzPXBkYXRhT2xkLmV2ZW50cztpZihldmVudHMpe2RlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7cGRhdGFDdXIuZXZlbnRzPXt9O2Zvcih0eXBlIGluIGV2ZW50cyl7Zm9yKGk9MCxsPWV2ZW50c1t0eXBlXS5sZW5ndGg7aTxsO2krKyl7alF1ZXJ5LmV2ZW50LmFkZChkZXN0LHR5cGUsZXZlbnRzW3R5cGVdW2ldKTt9fX19CmlmKGRhdGFVc2VyLmhhc0RhdGEoc3JjKSl7dWRhdGFPbGQ9ZGF0YVVzZXIuYWNjZXNzKHNyYyk7dWRhdGFDdXI9alF1ZXJ5LmV4dGVuZCh7fSx1ZGF0YU9sZCk7ZGF0YVVzZXIuc2V0KGRlc3QsdWRhdGFDdXIpO319CmZ1bmN0aW9uIGZpeElucHV0KHNyYyxkZXN0KXt2YXIgbm9kZU5hbWU9ZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT09ImlucHV0IiYmcmNoZWNrYWJsZVR5cGUudGVzdChzcmMudHlwZSkpe2Rlc3QuY2hlY2tlZD1zcmMuY2hlY2tlZDt9ZWxzZSBpZihub2RlTmFtZT09PSJpbnB1dCJ8fG5vZGVOYW1lPT09InRleHRhcmVhIil7ZGVzdC5kZWZhdWx0VmFsdWU9c3JjLmRlZmF1bHRWYWx1ZTt9fQpmdW5jdGlvbiBkb21NYW5pcChjb2xsZWN0aW9uLGFyZ3MsY2FsbGJhY2ssaWdub3JlZCl7YXJncz1jb25jYXQuYXBwbHkoW10sYXJncyk7dmFyIGZyYWdtZW50LGZpcnN0LHNjcmlwdHMsaGFzU2NyaXB0cyxub2RlLGRvYyxpPTAsbD1jb2xsZWN0aW9uLmxlbmd0aCxpTm9DbG9uZT1sLTEsdmFsdWU9YXJnc1swXSx2YWx1ZUlzRnVuY3Rpb249aXNGdW5jdGlvbih2YWx1ZSk7aWYodmFsdWVJc0Z1bmN0aW9ufHwobD4xJiZ0eXBlb2YgdmFsdWU9PT0ic3RyaW5nIiYmIXN1cHBvcnQuY2hlY2tDbG9uZSYmcmNoZWNrZWQudGVzdCh2YWx1ZSkpKXtyZXR1cm4gY29sbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGluZGV4KXt2YXIgc2VsZj1jb2xsZWN0aW9uLmVxKGluZGV4KTtpZih2YWx1ZUlzRnVuY3Rpb24pe2FyZ3NbMF09dmFsdWUuY2FsbCh0aGlzLGluZGV4LHNlbGYuaHRtbCgpKTt9CmRvbU1hbmlwKHNlbGYsYXJncyxjYWxsYmFjayxpZ25vcmVkKTt9KTt9CmlmKGwpe2ZyYWdtZW50PWJ1aWxkRnJhZ21lbnQoYXJncyxjb2xsZWN0aW9uWzBdLm93bmVyRG9jdW1lbnQsZmFsc2UsY29sbGVjdGlvbixpZ25vcmVkKTtmaXJzdD1mcmFnbWVudC5maXJzdENoaWxkO2lmKGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoPT09MSl7ZnJhZ21lbnQ9Zmlyc3Q7fQppZihmaXJzdHx8aWdub3JlZCl7c2NyaXB0cz1qUXVlcnkubWFwKGdldEFsbChmcmFnbWVudCwic2NyaXB0IiksZGlzYWJsZVNjcmlwdCk7aGFzU2NyaXB0cz1zY3JpcHRzLmxlbmd0aDtmb3IoO2k8bDtpKyspe25vZGU9ZnJhZ21lbnQ7aWYoaSE9PWlOb0Nsb25lKXtub2RlPWpRdWVyeS5jbG9uZShub2RlLHRydWUsdHJ1ZSk7aWYoaGFzU2NyaXB0cyl7alF1ZXJ5Lm1lcmdlKHNjcmlwdHMsZ2V0QWxsKG5vZGUsInNjcmlwdCIpKTt9fQpjYWxsYmFjay5jYWxsKGNvbGxlY3Rpb25baV0sbm9kZSxpKTt9CmlmKGhhc1NjcmlwdHMpe2RvYz1zY3JpcHRzW3NjcmlwdHMubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQ7alF1ZXJ5Lm1hcChzY3JpcHRzLHJlc3RvcmVTY3JpcHQpO2ZvcihpPTA7aTxoYXNTY3JpcHRzO2krKyl7bm9kZT1zY3JpcHRzW2ldO2lmKHJzY3JpcHRUeXBlLnRlc3Qobm9kZS50eXBlfHwiIikmJiFkYXRhUHJpdi5hY2Nlc3Mobm9kZSwiZ2xvYmFsRXZhbCIpJiZqUXVlcnkuY29udGFpbnMoZG9jLG5vZGUpKXtpZihub2RlLnNyYyYmKG5vZGUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCkhPT0ibW9kdWxlIil7aWYoalF1ZXJ5Ll9ldmFsVXJsKXtqUXVlcnkuX2V2YWxVcmwobm9kZS5zcmMpO319ZWxzZXtET01FdmFsKG5vZGUudGV4dENvbnRlbnQucmVwbGFjZShyY2xlYW5TY3JpcHQsIiIpLGRvYyxub2RlKTt9fX19fX0KcmV0dXJuIGNvbGxlY3Rpb247fQpmdW5jdGlvbiByZW1vdmUoZWxlbSxzZWxlY3RvcixrZWVwRGF0YSl7dmFyIG5vZGUsbm9kZXM9c2VsZWN0b3I/alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixlbGVtKTplbGVtLGk9MDtmb3IoOyhub2RlPW5vZGVzW2ldKSE9bnVsbDtpKyspe2lmKCFrZWVwRGF0YSYmbm9kZS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKG5vZGUpKTt9CmlmKG5vZGUucGFyZW50Tm9kZSl7aWYoa2VlcERhdGEmJmpRdWVyeS5jb250YWlucyhub2RlLm93bmVyRG9jdW1lbnQsbm9kZSkpe3NldEdsb2JhbEV2YWwoZ2V0QWxsKG5vZGUsInNjcmlwdCIpKTt9Cm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTt9fQpyZXR1cm4gZWxlbTt9CmpRdWVyeS5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oaHRtbCl7cmV0dXJuIGh0bWwucmVwbGFjZShyeGh0bWxUYWcsIjwkMT48LyQyPiIpO30sY2xvbmU6ZnVuY3Rpb24oZWxlbSxkYXRhQW5kRXZlbnRzLGRlZXBEYXRhQW5kRXZlbnRzKXt2YXIgaSxsLHNyY0VsZW1lbnRzLGRlc3RFbGVtZW50cyxjbG9uZT1lbGVtLmNsb25lTm9kZSh0cnVlKSxpblBhZ2U9alF1ZXJ5LmNvbnRhaW5zKGVsZW0ub3duZXJEb2N1bWVudCxlbGVtKTtpZighc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCYmKGVsZW0ubm9kZVR5cGU9PT0xfHxlbGVtLm5vZGVUeXBlPT09MTEpJiYhalF1ZXJ5LmlzWE1MRG9jKGVsZW0pKXtkZXN0RWxlbWVudHM9Z2V0QWxsKGNsb25lKTtzcmNFbGVtZW50cz1nZXRBbGwoZWxlbSk7Zm9yKGk9MCxsPXNyY0VsZW1lbnRzLmxlbmd0aDtpPGw7aSsrKXtmaXhJbnB1dChzcmNFbGVtZW50c1tpXSxkZXN0RWxlbWVudHNbaV0pO319CmlmKGRhdGFBbmRFdmVudHMpe2lmKGRlZXBEYXRhQW5kRXZlbnRzKXtzcmNFbGVtZW50cz1zcmNFbGVtZW50c3x8Z2V0QWxsKGVsZW0pO2Rlc3RFbGVtZW50cz1kZXN0RWxlbWVudHN8fGdldEFsbChjbG9uZSk7Zm9yKGk9MCxsPXNyY0VsZW1lbnRzLmxlbmd0aDtpPGw7aSsrKXtjbG9uZUNvcHlFdmVudChzcmNFbGVtZW50c1tpXSxkZXN0RWxlbWVudHNbaV0pO319ZWxzZXtjbG9uZUNvcHlFdmVudChlbGVtLGNsb25lKTt9fQpkZXN0RWxlbWVudHM9Z2V0QWxsKGNsb25lLCJzY3JpcHQiKTtpZihkZXN0RWxlbWVudHMubGVuZ3RoPjApe3NldEdsb2JhbEV2YWwoZGVzdEVsZW1lbnRzLCFpblBhZ2UmJmdldEFsbChlbGVtLCJzY3JpcHQiKSk7fQpyZXR1cm4gY2xvbmU7fSxjbGVhbkRhdGE6ZnVuY3Rpb24oZWxlbXMpe3ZhciBkYXRhLGVsZW0sdHlwZSxzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsLGk9MDtmb3IoOyhlbGVtPWVsZW1zW2ldKSE9PXVuZGVmaW5lZDtpKyspe2lmKGFjY2VwdERhdGEoZWxlbSkpe2lmKChkYXRhPWVsZW1bZGF0YVByaXYuZXhwYW5kb10pKXtpZihkYXRhLmV2ZW50cyl7Zm9yKHR5cGUgaW4gZGF0YS5ldmVudHMpe2lmKHNwZWNpYWxbdHlwZV0pe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlKTt9ZWxzZXtqUXVlcnkucmVtb3ZlRXZlbnQoZWxlbSx0eXBlLGRhdGEuaGFuZGxlKTt9fX0KZWxlbVtkYXRhUHJpdi5leHBhbmRvXT11bmRlZmluZWQ7fQppZihlbGVtW2RhdGFVc2VyLmV4cGFuZG9dKXtlbGVtW2RhdGFVc2VyLmV4cGFuZG9dPXVuZGVmaW5lZDt9fX19fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gcmVtb3ZlKHRoaXMsc2VsZWN0b3IsdHJ1ZSk7fSxyZW1vdmU6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiByZW1vdmUodGhpcyxzZWxlY3Rvcik7fSx0ZXh0OmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZT09PXVuZGVmaW5lZD9qUXVlcnkudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt0aGlzLnRleHRDb250ZW50PXZhbHVlO319KTt9LG51bGwsdmFsdWUsYXJndW1lbnRzLmxlbmd0aCk7fSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0YXJnZXQ9bWFuaXB1bGF0aW9uVGFyZ2V0KHRoaXMsZWxlbSk7dGFyZ2V0LmFwcGVuZENoaWxkKGVsZW0pO319KTt9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0YXJnZXQ9bWFuaXB1bGF0aW9uVGFyZ2V0KHRoaXMsZWxlbSk7dGFyZ2V0Lmluc2VydEJlZm9yZShlbGVtLHRhcmdldC5maXJzdENoaWxkKTt9fSk7fSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sdGhpcyk7fX0pO30sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sdGhpcy5uZXh0U2libGluZyk7fX0pO30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZWxlbSxpPTA7Zm9yKDsoZWxlbT10aGlzW2ldKSE9bnVsbDtpKyspe2lmKGVsZW0ubm9kZVR5cGU9PT0xKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbChlbGVtLGZhbHNlKSk7ZWxlbS50ZXh0Q29udGVudD0iIjt9fQpyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uKGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpe2RhdGFBbmRFdmVudHM9ZGF0YUFuZEV2ZW50cz09bnVsbD9mYWxzZTpkYXRhQW5kRXZlbnRzO2RlZXBEYXRhQW5kRXZlbnRzPWRlZXBEYXRhQW5kRXZlbnRzPT1udWxsP2RhdGFBbmRFdmVudHM6ZGVlcERhdGFBbmRFdmVudHM7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5jbG9uZSh0aGlzLGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpO30pO30saHRtbDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHZhbHVlKXt2YXIgZWxlbT10aGlzWzBdfHx7fSxpPTAsbD10aGlzLmxlbmd0aDtpZih2YWx1ZT09PXVuZGVmaW5lZCYmZWxlbS5ub2RlVHlwZT09PTEpe3JldHVybiBlbGVtLmlubmVySFRNTDt9CmlmKHR5cGVvZiB2YWx1ZT09PSJzdHJpbmciJiYhcm5vSW5uZXJodG1sLnRlc3QodmFsdWUpJiYhd3JhcE1hcFsocnRhZ05hbWUuZXhlYyh2YWx1ZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXt2YWx1ZT1qUXVlcnkuaHRtbFByZWZpbHRlcih2YWx1ZSk7dHJ5e2Zvcig7aTxsO2krKyl7ZWxlbT10aGlzW2ldfHx7fTtpZihlbGVtLm5vZGVUeXBlPT09MSl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwoZWxlbSxmYWxzZSkpO2VsZW0uaW5uZXJIVE1MPXZhbHVlO319CmVsZW09MDt9Y2F0Y2goZSl7fX0KaWYoZWxlbSl7dGhpcy5lbXB0eSgpLmFwcGVuZCh2YWx1ZSk7fX0sbnVsbCx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoKTt9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGlnbm9yZWQ9W107cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9dGhpcy5wYXJlbnROb2RlO2lmKGpRdWVyeS5pbkFycmF5KHRoaXMsaWdub3JlZCk8MCl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwodGhpcykpO2lmKHBhcmVudCl7cGFyZW50LnJlcGxhY2VDaGlsZChlbGVtLHRoaXMpO319fSxpZ25vcmVkKTt9fSk7alF1ZXJ5LmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihuYW1lLG9yaWdpbmFsKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBlbGVtcyxyZXQ9W10saW5zZXJ0PWpRdWVyeShzZWxlY3RvciksbGFzdD1pbnNlcnQubGVuZ3RoLTEsaT0wO2Zvcig7aTw9bGFzdDtpKyspe2VsZW1zPWk9PT1sYXN0P3RoaXM6dGhpcy5jbG9uZSh0cnVlKTtqUXVlcnkoaW5zZXJ0W2ldKVtvcmlnaW5hbF0oZWxlbXMpO3B1c2guYXBwbHkocmV0LGVsZW1zLmdldCgpKTt9CnJldHVybiB0aGlzLnB1c2hTdGFjayhyZXQpO307fSk7dmFyIHJudW1ub25weD1uZXcgUmVnRXhwKCJeKCIrcG51bSsiKSg/IXB4KVthLXolXSskIiwiaSIpO3ZhciBnZXRTdHlsZXM9ZnVuY3Rpb24oZWxlbSl7dmFyIHZpZXc9ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O2lmKCF2aWV3fHwhdmlldy5vcGVuZXIpe3ZpZXc9d2luZG93O30KcmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTt9O3ZhciByYm94U3R5bGU9bmV3IFJlZ0V4cChjc3NFeHBhbmQuam9pbigifCIpLCJpIik7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKXtpZighZGl2KXtyZXR1cm47fQpjb250YWluZXIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4OyIrIm1hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCI7ZGl2LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDsiKyJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4OyIrIndpZHRoOjYwJTt0b3A6MSUiO2RvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChjb250YWluZXIpLmFwcGVuZENoaWxkKGRpdik7dmFyIGRpdlN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRpdik7cGl4ZWxQb3NpdGlvblZhbD1kaXZTdHlsZS50b3AhPT0iMSUiO3JlbGlhYmxlTWFyZ2luTGVmdFZhbD1yb3VuZFBpeGVsTWVhc3VyZXMoZGl2U3R5bGUubWFyZ2luTGVmdCk9PT0xMjtkaXYuc3R5bGUucmlnaHQ9IjYwJSI7cGl4ZWxCb3hTdHlsZXNWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdlN0eWxlLnJpZ2h0KT09PTM2O2JveFNpemluZ1JlbGlhYmxlVmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXZTdHlsZS53aWR0aCk9PT0zNjtkaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjtzY3JvbGxib3hTaXplVmFsPWRpdi5vZmZzZXRXaWR0aD09PTM2fHwiYWJzb2x1dGUiO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO2Rpdj1udWxsO30KZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKG1lYXN1cmUpe3JldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQobWVhc3VyZSkpO30KdmFyIHBpeGVsUG9zaXRpb25WYWwsYm94U2l6aW5nUmVsaWFibGVWYWwsc2Nyb2xsYm94U2l6ZVZhbCxwaXhlbEJveFN0eWxlc1ZhbCxyZWxpYWJsZU1hcmdpbkxlZnRWYWwsY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGRpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZighZGl2LnN0eWxlKXtyZXR1cm47fQpkaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtkaXYuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3N1cHBvcnQuY2xlYXJDbG9uZVN0eWxlPWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD09PSJjb250ZW50LWJveCI7alF1ZXJ5LmV4dGVuZChzdXBwb3J0LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO30scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbEJveFN0eWxlc1ZhbDt9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbFBvc2l0aW9uVmFsO30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7Y29tcHV0ZVN0eWxlVGVzdHMoKTtyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7fX0pO30pKCk7ZnVuY3Rpb24gY3VyQ1NTKGVsZW0sbmFtZSxjb21wdXRlZCl7dmFyIHdpZHRoLG1pbldpZHRoLG1heFdpZHRoLHJldCxzdHlsZT1lbGVtLnN0eWxlO2NvbXB1dGVkPWNvbXB1dGVkfHxnZXRTdHlsZXMoZWxlbSk7aWYoY29tcHV0ZWQpe3JldD1jb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpfHxjb21wdXRlZFtuYW1lXTtpZihyZXQ9PT0iIiYmIWpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSkpe3JldD1qUXVlcnkuc3R5bGUoZWxlbSxuYW1lKTt9CmlmKCFzdXBwb3J0LnBpeGVsQm94U3R5bGVzKCkmJnJudW1ub25weC50ZXN0KHJldCkmJnJib3hTdHlsZS50ZXN0KG5hbWUpKXt3aWR0aD1zdHlsZS53aWR0aDttaW5XaWR0aD1zdHlsZS5taW5XaWR0aDttYXhXaWR0aD1zdHlsZS5tYXhXaWR0aDtzdHlsZS5taW5XaWR0aD1zdHlsZS5tYXhXaWR0aD1zdHlsZS53aWR0aD1yZXQ7cmV0PWNvbXB1dGVkLndpZHRoO3N0eWxlLndpZHRoPXdpZHRoO3N0eWxlLm1pbldpZHRoPW1pbldpZHRoO3N0eWxlLm1heFdpZHRoPW1heFdpZHRoO319CnJldHVybiByZXQhPT11bmRlZmluZWQ/cmV0KyIiOnJldDt9CmZ1bmN0aW9uIGFkZEdldEhvb2tJZihjb25kaXRpb25Gbixob29rRm4pe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZihjb25kaXRpb25GbigpKXtkZWxldGUgdGhpcy5nZXQ7cmV0dXJuO30KcmV0dXJuKHRoaXMuZ2V0PWhvb2tGbikuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O30KdmFyCnJkaXNwbGF5c3dhcD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scmN1c3RvbVByb3A9L14tLS8sY3NzU2hvdz17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sY3NzTm9ybWFsVHJhbnNmb3JtPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxjc3NQcmVmaXhlcz1bIldlYmtpdCIsIk1veiIsIm1zIl0sZW1wdHlTdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZShuYW1lKXtpZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO30KdmFyIGNhcE5hbWU9bmFtZVswXS50b1VwcGVyQ2FzZSgpK25hbWUuc2xpY2UoMSksaT1jc3NQcmVmaXhlcy5sZW5ndGg7d2hpbGUoaS0tKXtuYW1lPWNzc1ByZWZpeGVzW2ldK2NhcE5hbWU7aWYobmFtZSBpbiBlbXB0eVN0eWxlKXtyZXR1cm4gbmFtZTt9fX0KZnVuY3Rpb24gZmluYWxQcm9wTmFtZShuYW1lKXt2YXIgcmV0PWpRdWVyeS5jc3NQcm9wc1tuYW1lXTtpZighcmV0KXtyZXQ9alF1ZXJ5LmNzc1Byb3BzW25hbWVdPXZlbmRvclByb3BOYW1lKG5hbWUpfHxuYW1lO30KcmV0dXJuIHJldDt9CmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKGVsZW0sdmFsdWUsc3VidHJhY3Qpe3ZhciBtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSk7cmV0dXJuIG1hdGNoZXM/TWF0aC5tYXgoMCxtYXRjaGVzWzJdLShzdWJ0cmFjdHx8MCkpKyhtYXRjaGVzWzNdfHwicHgiKTp2YWx1ZTt9CmZ1bmN0aW9uIGJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixib3gsaXNCb3JkZXJCb3gsc3R5bGVzLGNvbXB1dGVkVmFsKXt2YXIgaT1kaW1lbnNpb249PT0id2lkdGgiPzE6MCxleHRyYT0wLGRlbHRhPTA7aWYoYm94PT09KGlzQm9yZGVyQm94PyJib3JkZXIiOiJjb250ZW50Iikpe3JldHVybiAwO30KZm9yKDtpPDQ7aSs9Mil7aWYoYm94PT09Im1hcmdpbiIpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sYm94K2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7fQppZighaXNCb3JkZXJCb3gpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sInBhZGRpbmciK2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7aWYoYm94IT09InBhZGRpbmciKXtkZWx0YSs9alF1ZXJ5LmNzcyhlbGVtLCJib3JkZXIiK2Nzc0V4cGFuZFtpXSsiV2lkdGgiLHRydWUsc3R5bGVzKTt9ZWxzZXtleHRyYSs9alF1ZXJ5LmNzcyhlbGVtLCJib3JkZXIiK2Nzc0V4cGFuZFtpXSsiV2lkdGgiLHRydWUsc3R5bGVzKTt9fWVsc2V7aWYoYm94PT09ImNvbnRlbnQiKXtkZWx0YS09alF1ZXJ5LmNzcyhlbGVtLCJwYWRkaW5nIitjc3NFeHBhbmRbaV0sdHJ1ZSxzdHlsZXMpO30KaWYoYm94IT09Im1hcmdpbiIpe2RlbHRhLT1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO319fQppZighaXNCb3JkZXJCb3gmJmNvbXB1dGVkVmFsPj0wKXtkZWx0YSs9TWF0aC5tYXgoMCxNYXRoLmNlaWwoZWxlbVsib2Zmc2V0IitkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKStkaW1lbnNpb24uc2xpY2UoMSldLQpjb21wdXRlZFZhbC0KZGVsdGEtCmV4dHJhLQowLjUpKTt9CnJldHVybiBkZWx0YTt9CmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoZWxlbSxkaW1lbnNpb24sZXh0cmEpe3ZhciBzdHlsZXM9Z2V0U3R5bGVzKGVsZW0pLHZhbD1jdXJDU1MoZWxlbSxkaW1lbnNpb24sc3R5bGVzKSxpc0JvcmRlckJveD1qUXVlcnkuY3NzKGVsZW0sImJveFNpemluZyIsZmFsc2Usc3R5bGVzKT09PSJib3JkZXItYm94Iix2YWx1ZUlzQm9yZGVyQm94PWlzQm9yZGVyQm94O2lmKHJudW1ub25weC50ZXN0KHZhbCkpe2lmKCFleHRyYSl7cmV0dXJuIHZhbDt9CnZhbD0iYXV0byI7fQp2YWx1ZUlzQm9yZGVyQm94PXZhbHVlSXNCb3JkZXJCb3gmJihzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCl8fHZhbD09PWVsZW0uc3R5bGVbZGltZW5zaW9uXSk7aWYodmFsPT09ImF1dG8ifHwhcGFyc2VGbG9hdCh2YWwpJiZqUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiLGZhbHNlLHN0eWxlcyk9PT0iaW5saW5lIil7dmFsPWVsZW1bIm9mZnNldCIrZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkrZGltZW5zaW9uLnNsaWNlKDEpXTt2YWx1ZUlzQm9yZGVyQm94PXRydWU7fQp2YWw9cGFyc2VGbG9hdCh2YWwpfHwwO3JldHVybih2YWwrCmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixleHRyYXx8KGlzQm9yZGVyQm94PyJib3JkZXIiOiJjb250ZW50IiksdmFsdWVJc0JvcmRlckJveCxzdHlsZXMsdmFsKSkrInB4Ijt9CmpRdWVyeS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZWxlbSxjb21wdXRlZCl7aWYoY29tcHV0ZWQpe3ZhciByZXQ9Y3VyQ1NTKGVsZW0sIm9wYWNpdHkiKTtyZXR1cm4gcmV0PT09IiI/IjEiOnJldDt9fX19LGNzc051bWJlcjp7ImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50Ijp0cnVlLCJjb2x1bW5Db3VudCI6dHJ1ZSwiZmlsbE9wYWNpdHkiOnRydWUsImZsZXhHcm93Ijp0cnVlLCJmbGV4U2hyaW5rIjp0cnVlLCJmb250V2VpZ2h0Ijp0cnVlLCJsaW5lSGVpZ2h0Ijp0cnVlLCJvcGFjaXR5Ijp0cnVlLCJvcmRlciI6dHJ1ZSwib3JwaGFucyI6dHJ1ZSwid2lkb3dzIjp0cnVlLCJ6SW5kZXgiOnRydWUsInpvb20iOnRydWV9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSxleHRyYSl7aWYoIWVsZW18fGVsZW0ubm9kZVR5cGU9PT0zfHxlbGVtLm5vZGVUeXBlPT09OHx8IWVsZW0uc3R5bGUpe3JldHVybjt9CnZhciByZXQsdHlwZSxob29rcyxvcmlnTmFtZT1jYW1lbENhc2UobmFtZSksaXNDdXN0b21Qcm9wPXJjdXN0b21Qcm9wLnRlc3QobmFtZSksc3R5bGU9ZWxlbS5zdHlsZTtpZighaXNDdXN0b21Qcm9wKXtuYW1lPWZpbmFsUHJvcE5hbWUob3JpZ05hbWUpO30KaG9va3M9alF1ZXJ5LmNzc0hvb2tzW25hbWVdfHxqUXVlcnkuY3NzSG9va3Nbb3JpZ05hbWVdO2lmKHZhbHVlIT09dW5kZWZpbmVkKXt0eXBlPXR5cGVvZiB2YWx1ZTtpZih0eXBlPT09InN0cmluZyImJihyZXQ9cmNzc051bS5leGVjKHZhbHVlKSkmJnJldFsxXSl7dmFsdWU9YWRqdXN0Q1NTKGVsZW0sbmFtZSxyZXQpO3R5cGU9Im51bWJlciI7fQppZih2YWx1ZT09bnVsbHx8dmFsdWUhPT12YWx1ZSl7cmV0dXJuO30KaWYodHlwZT09PSJudW1iZXIiKXt2YWx1ZSs9cmV0JiZyZXRbM118fChqUXVlcnkuY3NzTnVtYmVyW29yaWdOYW1lXT8iIjoicHgiKTt9CmlmKCFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSYmdmFsdWU9PT0iIiYmbmFtZS5pbmRleE9mKCJiYWNrZ3JvdW5kIik9PT0wKXtzdHlsZVtuYW1lXT0iaW5oZXJpdCI7fQppZighaG9va3N8fCEoInNldCJpbiBob29rcyl8fCh2YWx1ZT1ob29rcy5zZXQoZWxlbSx2YWx1ZSxleHRyYSkpIT09dW5kZWZpbmVkKXtpZihpc0N1c3RvbVByb3Ape3N0eWxlLnNldFByb3BlcnR5KG5hbWUsdmFsdWUpO31lbHNle3N0eWxlW25hbWVdPXZhbHVlO319fWVsc2V7aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sZmFsc2UsZXh0cmEpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJldDt9CnJldHVybiBzdHlsZVtuYW1lXTt9fSxjc3M6ZnVuY3Rpb24oZWxlbSxuYW1lLGV4dHJhLHN0eWxlcyl7dmFyIHZhbCxudW0saG9va3Msb3JpZ05hbWU9Y2FtZWxDYXNlKG5hbWUpLGlzQ3VzdG9tUHJvcD1yY3VzdG9tUHJvcC50ZXN0KG5hbWUpO2lmKCFpc0N1c3RvbVByb3Ape25hbWU9ZmluYWxQcm9wTmFtZShvcmlnTmFtZSk7fQpob29rcz1qUXVlcnkuY3NzSG9va3NbbmFtZV18fGpRdWVyeS5jc3NIb29rc1tvcmlnTmFtZV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3Mpe3ZhbD1ob29rcy5nZXQoZWxlbSx0cnVlLGV4dHJhKTt9CmlmKHZhbD09PXVuZGVmaW5lZCl7dmFsPWN1ckNTUyhlbGVtLG5hbWUsc3R5bGVzKTt9CmlmKHZhbD09PSJub3JtYWwiJiZuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSl7dmFsPWNzc05vcm1hbFRyYW5zZm9ybVtuYW1lXTt9CmlmKGV4dHJhPT09IiJ8fGV4dHJhKXtudW09cGFyc2VGbG9hdCh2YWwpO3JldHVybiBleHRyYT09PXRydWV8fGlzRmluaXRlKG51bSk/bnVtfHwwOnZhbDt9CnJldHVybiB2YWw7fX0pO2pRdWVyeS5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihpLGRpbWVuc2lvbil7alF1ZXJ5LmNzc0hvb2tzW2RpbWVuc2lvbl09e2dldDpmdW5jdGlvbihlbGVtLGNvbXB1dGVkLGV4dHJhKXtpZihjb21wdXRlZCl7cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KGpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpKSYmKCFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RofHwhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk/c3dhcChlbGVtLGNzc1Nob3csZnVuY3Rpb24oKXtyZXR1cm4gZ2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSk7fSk6Z2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSk7fX0sc2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsZXh0cmEpe3ZhciBtYXRjaGVzLHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksaXNCb3JkZXJCb3g9alF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsc3VidHJhY3Q9ZXh0cmEmJmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixleHRyYSxpc0JvcmRlckJveCxzdHlsZXMpO2lmKGlzQm9yZGVyQm94JiZzdXBwb3J0LnNjcm9sbGJveFNpemUoKT09PXN0eWxlcy5wb3NpdGlvbil7c3VidHJhY3QtPU1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tCnBhcnNlRmxvYXQoc3R5bGVzW2RpbWVuc2lvbl0pLQpib3hNb2RlbEFkanVzdG1lbnQoZWxlbSxkaW1lbnNpb24sImJvcmRlciIsZmFsc2Usc3R5bGVzKS0KMC41KTt9CmlmKHN1YnRyYWN0JiYobWF0Y2hlcz1yY3NzTnVtLmV4ZWModmFsdWUpKSYmKG1hdGNoZXNbM118fCJweCIpIT09InB4Iil7ZWxlbS5zdHlsZVtkaW1lbnNpb25dPXZhbHVlO3ZhbHVlPWpRdWVyeS5jc3MoZWxlbSxkaW1lbnNpb24pO30KcmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKGVsZW0sdmFsdWUsc3VidHJhY3QpO319O30pO2pRdWVyeS5jc3NIb29rcy5tYXJnaW5MZWZ0PWFkZEdldEhvb2tJZihzdXBwb3J0LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7cmV0dXJuKHBhcnNlRmxvYXQoY3VyQ1NTKGVsZW0sIm1hcmdpbkxlZnQiKSl8fGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC0Kc3dhcChlbGVtLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDt9KSkrInB4Ijt9fSk7alF1ZXJ5LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihwcmVmaXgsc3VmZml4KXtqUXVlcnkuY3NzSG9va3NbcHJlZml4K3N1ZmZpeF09e2V4cGFuZDpmdW5jdGlvbih2YWx1ZSl7dmFyIGk9MCxleHBhbmRlZD17fSxwYXJ0cz10eXBlb2YgdmFsdWU9PT0ic3RyaW5nIj92YWx1ZS5zcGxpdCgiICIpOlt2YWx1ZV07Zm9yKDtpPDQ7aSsrKXtleHBhbmRlZFtwcmVmaXgrY3NzRXhwYW5kW2ldK3N1ZmZpeF09cGFydHNbaV18fHBhcnRzW2ktMl18fHBhcnRzWzBdO30KcmV0dXJuIGV4cGFuZGVkO319O2lmKHByZWZpeCE9PSJtYXJnaW4iKXtqUXVlcnkuY3NzSG9va3NbcHJlZml4K3N1ZmZpeF0uc2V0PXNldFBvc2l0aXZlTnVtYmVyO319KTtqUXVlcnkuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSl7dmFyIHN0eWxlcyxsZW4sbWFwPXt9LGk9MDtpZihBcnJheS5pc0FycmF5KG5hbWUpKXtzdHlsZXM9Z2V0U3R5bGVzKGVsZW0pO2xlbj1uYW1lLmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7bWFwW25hbWVbaV1dPWpRdWVyeS5jc3MoZWxlbSxuYW1lW2ldLGZhbHNlLHN0eWxlcyk7fQpyZXR1cm4gbWFwO30KcmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkP2pRdWVyeS5zdHlsZShlbGVtLG5hbWUsdmFsdWUpOmpRdWVyeS5jc3MoZWxlbSxuYW1lKTt9LG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9fSk7ZnVuY3Rpb24gVHdlZW4oZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyl7cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdChlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nKTt9CmpRdWVyeS5Ud2Vlbj1Ud2VlbjtUd2Vlbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlR3ZWVuLGluaXQ6ZnVuY3Rpb24oZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyx1bml0KXt0aGlzLmVsZW09ZWxlbTt0aGlzLnByb3A9cHJvcDt0aGlzLmVhc2luZz1lYXNpbmd8fGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7dGhpcy5vcHRpb25zPW9wdGlvbnM7dGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpO3RoaXMuZW5kPWVuZDt0aGlzLnVuaXQ9dW5pdHx8KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF0/IiI6InB4Iik7fSxjdXI6ZnVuY3Rpb24oKXt2YXIgaG9va3M9VHdlZW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGhvb2tzJiZob29rcy5nZXQ/aG9va3MuZ2V0KHRoaXMpOlR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyk7fSxydW46ZnVuY3Rpb24ocGVyY2VudCl7dmFyIGVhc2VkLGhvb2tzPVR3ZWVuLnByb3BIb29rc1t0aGlzLnByb3BdO2lmKHRoaXMub3B0aW9ucy5kdXJhdGlvbil7dGhpcy5wb3M9ZWFzZWQ9alF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10ocGVyY2VudCx0aGlzLm9wdGlvbnMuZHVyYXRpb24qcGVyY2VudCwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTt9ZWxzZXt0aGlzLnBvcz1lYXNlZD1wZXJjZW50O30KdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmVhc2VkK3RoaXMuc3RhcnQ7aWYodGhpcy5vcHRpb25zLnN0ZXApe3RoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpO30KaWYoaG9va3MmJmhvb2tzLnNldCl7aG9va3Muc2V0KHRoaXMpO31lbHNle1R3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyk7fQpyZXR1cm4gdGhpczt9fTtUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9VHdlZW4ucHJvdG90eXBlO1R3ZWVuLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbih0d2Vlbil7dmFyIHJlc3VsdDtpZih0d2Vlbi5lbGVtLm5vZGVUeXBlIT09MXx8dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXSE9bnVsbCYmdHdlZW4uZWxlbS5zdHlsZVt0d2Vlbi5wcm9wXT09bnVsbCl7cmV0dXJuIHR3ZWVuLmVsZW1bdHdlZW4ucHJvcF07fQpyZXN1bHQ9alF1ZXJ5LmNzcyh0d2Vlbi5lbGVtLHR3ZWVuLnByb3AsIiIpO3JldHVybiFyZXN1bHR8fHJlc3VsdD09PSJhdXRvIj8wOnJlc3VsdDt9LHNldDpmdW5jdGlvbih0d2Vlbil7aWYoalF1ZXJ5LmZ4LnN0ZXBbdHdlZW4ucHJvcF0pe2pRdWVyeS5meC5zdGVwW3R3ZWVuLnByb3BdKHR3ZWVuKTt9ZWxzZSBpZih0d2Vlbi5lbGVtLm5vZGVUeXBlPT09MSYmKHR3ZWVuLmVsZW0uc3R5bGVbalF1ZXJ5LmNzc1Byb3BzW3R3ZWVuLnByb3BdXSE9bnVsbHx8alF1ZXJ5LmNzc0hvb2tzW3R3ZWVuLnByb3BdKSl7alF1ZXJ5LnN0eWxlKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCx0d2Vlbi5ub3crdHdlZW4udW5pdCk7fWVsc2V7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19fTtUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPVR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odHdlZW4pe2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUmJnR3ZWVuLmVsZW0ucGFyZW50Tm9kZSl7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19O2pRdWVyeS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihwKXtyZXR1cm4gcDt9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8yO30sX2RlZmF1bHQ6InN3aW5nIn07alF1ZXJ5LmZ4PVR3ZWVuLnByb3RvdHlwZS5pbml0O2pRdWVyeS5meC5zdGVwPXt9O3ZhcgpmeE5vdyxpblByb2dyZXNzLHJmeHR5cGVzPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxycnVuPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc2NoZWR1bGUoKXtpZihpblByb2dyZXNzKXtpZihkb2N1bWVudC5oaWRkZW49PT1mYWxzZSYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSl7d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY2hlZHVsZSk7fWVsc2V7d2luZG93LnNldFRpbWVvdXQoc2NoZWR1bGUsalF1ZXJ5LmZ4LmludGVydmFsKTt9CmpRdWVyeS5meC50aWNrKCk7fX0KZnVuY3Rpb24gY3JlYXRlRnhOb3coKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2Z4Tm93PXVuZGVmaW5lZDt9KTtyZXR1cm4oZnhOb3c9RGF0ZS5ub3coKSk7fQpmdW5jdGlvbiBnZW5GeCh0eXBlLGluY2x1ZGVXaWR0aCl7dmFyIHdoaWNoLGk9MCxhdHRycz17aGVpZ2h0OnR5cGV9O2luY2x1ZGVXaWR0aD1pbmNsdWRlV2lkdGg/MTowO2Zvcig7aTw0O2krPTItaW5jbHVkZVdpZHRoKXt3aGljaD1jc3NFeHBhbmRbaV07YXR0cnNbIm1hcmdpbiIrd2hpY2hdPWF0dHJzWyJwYWRkaW5nIit3aGljaF09dHlwZTt9CmlmKGluY2x1ZGVXaWR0aCl7YXR0cnMub3BhY2l0eT1hdHRycy53aWR0aD10eXBlO30KcmV0dXJuIGF0dHJzO30KZnVuY3Rpb24gY3JlYXRlVHdlZW4odmFsdWUscHJvcCxhbmltYXRpb24pe3ZhciB0d2Vlbixjb2xsZWN0aW9uPShBbmltYXRpb24udHdlZW5lcnNbcHJvcF18fFtdKS5jb25jYXQoQW5pbWF0aW9uLnR3ZWVuZXJzWyIqIl0pLGluZGV4PTAsbGVuZ3RoPWNvbGxlY3Rpb24ubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKCh0d2Vlbj1jb2xsZWN0aW9uW2luZGV4XS5jYWxsKGFuaW1hdGlvbixwcm9wLHZhbHVlKSkpe3JldHVybiB0d2Vlbjt9fX0KZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlcihlbGVtLHByb3BzLG9wdHMpe3ZhciBwcm9wLHZhbHVlLHRvZ2dsZSxob29rcyxvbGRmaXJlLHByb3BUd2VlbixyZXN0b3JlRGlzcGxheSxkaXNwbGF5LGlzQm94PSJ3aWR0aCJpbiBwcm9wc3x8ImhlaWdodCJpbiBwcm9wcyxhbmltPXRoaXMsb3JpZz17fSxzdHlsZT1lbGVtLnN0eWxlLGhpZGRlbj1lbGVtLm5vZGVUeXBlJiZpc0hpZGRlbldpdGhpblRyZWUoZWxlbSksZGF0YVNob3c9ZGF0YVByaXYuZ2V0KGVsZW0sImZ4c2hvdyIpO2lmKCFvcHRzLnF1ZXVlKXtob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSwiZngiKTtpZihob29rcy51bnF1ZXVlZD09bnVsbCl7aG9va3MudW5xdWV1ZWQ9MDtvbGRmaXJlPWhvb2tzLmVtcHR5LmZpcmU7aG9va3MuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2lmKCFob29rcy51bnF1ZXVlZCl7b2xkZmlyZSgpO319O30KaG9va3MudW5xdWV1ZWQrKzthbmltLmFsd2F5cyhmdW5jdGlvbigpe2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7aG9va3MudW5xdWV1ZWQtLTtpZighalF1ZXJ5LnF1ZXVlKGVsZW0sImZ4IikubGVuZ3RoKXtob29rcy5lbXB0eS5maXJlKCk7fX0pO30pO30KZm9yKHByb3AgaW4gcHJvcHMpe3ZhbHVlPXByb3BzW3Byb3BdO2lmKHJmeHR5cGVzLnRlc3QodmFsdWUpKXtkZWxldGUgcHJvcHNbcHJvcF07dG9nZ2xlPXRvZ2dsZXx8dmFsdWU9PT0idG9nZ2xlIjtpZih2YWx1ZT09PShoaWRkZW4/ImhpZGUiOiJzaG93Iikpe2lmKHZhbHVlPT09InNob3ciJiZkYXRhU2hvdyYmZGF0YVNob3dbcHJvcF0hPT11bmRlZmluZWQpe2hpZGRlbj10cnVlO31lbHNle2NvbnRpbnVlO319Cm9yaWdbcHJvcF09ZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdfHxqUXVlcnkuc3R5bGUoZWxlbSxwcm9wKTt9fQpwcm9wVHdlZW49IWpRdWVyeS5pc0VtcHR5T2JqZWN0KHByb3BzKTtpZighcHJvcFR3ZWVuJiZqUXVlcnkuaXNFbXB0eU9iamVjdChvcmlnKSl7cmV0dXJuO30KaWYoaXNCb3gmJmVsZW0ubm9kZVR5cGU9PT0xKXtvcHRzLm92ZXJmbG93PVtzdHlsZS5vdmVyZmxvdyxzdHlsZS5vdmVyZmxvd1gsc3R5bGUub3ZlcmZsb3dZXTtyZXN0b3JlRGlzcGxheT1kYXRhU2hvdyYmZGF0YVNob3cuZGlzcGxheTtpZihyZXN0b3JlRGlzcGxheT09bnVsbCl7cmVzdG9yZURpc3BsYXk9ZGF0YVByaXYuZ2V0KGVsZW0sImRpc3BsYXkiKTt9CmRpc3BsYXk9alF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik7aWYoZGlzcGxheT09PSJub25lIil7aWYocmVzdG9yZURpc3BsYXkpe2Rpc3BsYXk9cmVzdG9yZURpc3BsYXk7fWVsc2V7c2hvd0hpZGUoW2VsZW1dLHRydWUpO3Jlc3RvcmVEaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheXx8cmVzdG9yZURpc3BsYXk7ZGlzcGxheT1qUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiKTtzaG93SGlkZShbZWxlbV0pO319CmlmKGRpc3BsYXk9PT0iaW5saW5lInx8ZGlzcGxheT09PSJpbmxpbmUtYmxvY2siJiZyZXN0b3JlRGlzcGxheSE9bnVsbCl7aWYoalF1ZXJ5LmNzcyhlbGVtLCJmbG9hdCIpPT09Im5vbmUiKXtpZighcHJvcFR3ZWVuKXthbmltLmRvbmUoZnVuY3Rpb24oKXtzdHlsZS5kaXNwbGF5PXJlc3RvcmVEaXNwbGF5O30pO2lmKHJlc3RvcmVEaXNwbGF5PT1udWxsKXtkaXNwbGF5PXN0eWxlLmRpc3BsYXk7cmVzdG9yZURpc3BsYXk9ZGlzcGxheT09PSJub25lIj8iIjpkaXNwbGF5O319CnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7fX19CmlmKG9wdHMub3ZlcmZsb3cpe3N0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7c3R5bGUub3ZlcmZsb3c9b3B0cy5vdmVyZmxvd1swXTtzdHlsZS5vdmVyZmxvd1g9b3B0cy5vdmVyZmxvd1sxXTtzdHlsZS5vdmVyZmxvd1k9b3B0cy5vdmVyZmxvd1syXTt9KTt9CnByb3BUd2Vlbj1mYWxzZTtmb3IocHJvcCBpbiBvcmlnKXtpZighcHJvcFR3ZWVuKXtpZihkYXRhU2hvdyl7aWYoImhpZGRlbiJpbiBkYXRhU2hvdyl7aGlkZGVuPWRhdGFTaG93LmhpZGRlbjt9fWVsc2V7ZGF0YVNob3c9ZGF0YVByaXYuYWNjZXNzKGVsZW0sImZ4c2hvdyIse2Rpc3BsYXk6cmVzdG9yZURpc3BsYXl9KTt9CmlmKHRvZ2dsZSl7ZGF0YVNob3cuaGlkZGVuPSFoaWRkZW47fQppZihoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSx0cnVlKTt9CmFuaW0uZG9uZShmdW5jdGlvbigpe2lmKCFoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSk7fQpkYXRhUHJpdi5yZW1vdmUoZWxlbSwiZnhzaG93Iik7Zm9yKHByb3AgaW4gb3JpZyl7alF1ZXJ5LnN0eWxlKGVsZW0scHJvcCxvcmlnW3Byb3BdKTt9fSk7fQpwcm9wVHdlZW49Y3JlYXRlVHdlZW4oaGlkZGVuP2RhdGFTaG93W3Byb3BdOjAscHJvcCxhbmltKTtpZighKHByb3AgaW4gZGF0YVNob3cpKXtkYXRhU2hvd1twcm9wXT1wcm9wVHdlZW4uc3RhcnQ7aWYoaGlkZGVuKXtwcm9wVHdlZW4uZW5kPXByb3BUd2Vlbi5zdGFydDtwcm9wVHdlZW4uc3RhcnQ9MDt9fX19CmZ1bmN0aW9uIHByb3BGaWx0ZXIocHJvcHMsc3BlY2lhbEVhc2luZyl7dmFyIGluZGV4LG5hbWUsZWFzaW5nLHZhbHVlLGhvb2tzO2ZvcihpbmRleCBpbiBwcm9wcyl7bmFtZT1jYW1lbENhc2UoaW5kZXgpO2Vhc2luZz1zcGVjaWFsRWFzaW5nW25hbWVdO3ZhbHVlPXByb3BzW2luZGV4XTtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7ZWFzaW5nPXZhbHVlWzFdO3ZhbHVlPXByb3BzW2luZGV4XT12YWx1ZVswXTt9CmlmKGluZGV4IT09bmFtZSl7cHJvcHNbbmFtZV09dmFsdWU7ZGVsZXRlIHByb3BzW2luZGV4XTt9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXTtpZihob29rcyYmImV4cGFuZCJpbiBob29rcyl7dmFsdWU9aG9va3MuZXhwYW5kKHZhbHVlKTtkZWxldGUgcHJvcHNbbmFtZV07Zm9yKGluZGV4IGluIHZhbHVlKXtpZighKGluZGV4IGluIHByb3BzKSl7cHJvcHNbaW5kZXhdPXZhbHVlW2luZGV4XTtzcGVjaWFsRWFzaW5nW2luZGV4XT1lYXNpbmc7fX19ZWxzZXtzcGVjaWFsRWFzaW5nW25hbWVdPWVhc2luZzt9fX0KZnVuY3Rpb24gQW5pbWF0aW9uKGVsZW0scHJvcGVydGllcyxvcHRpb25zKXt2YXIgcmVzdWx0LHN0b3BwZWQsaW5kZXg9MCxsZW5ndGg9QW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLGRlZmVycmVkPWpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB0aWNrLmVsZW07fSksdGljaz1mdW5jdGlvbigpe2lmKHN0b3BwZWQpe3JldHVybiBmYWxzZTt9CnZhciBjdXJyZW50VGltZT1meE5vd3x8Y3JlYXRlRnhOb3coKSxyZW1haW5pbmc9TWF0aC5tYXgoMCxhbmltYXRpb24uc3RhcnRUaW1lK2FuaW1hdGlvbi5kdXJhdGlvbi1jdXJyZW50VGltZSksdGVtcD1yZW1haW5pbmcvYW5pbWF0aW9uLmR1cmF0aW9ufHwwLHBlcmNlbnQ9MS10ZW1wLGluZGV4PTAsbGVuZ3RoPWFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2FuaW1hdGlvbi50d2VlbnNbaW5kZXhdLnJ1bihwZXJjZW50KTt9CmRlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLHBlcmNlbnQscmVtYWluaW5nXSk7aWYocGVyY2VudDwxJiZsZW5ndGgpe3JldHVybiByZW1haW5pbmc7fQppZighbGVuZ3RoKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTt9CmRlZmVycmVkLnJlc29sdmVXaXRoKGVsZW0sW2FuaW1hdGlvbl0pO3JldHVybiBmYWxzZTt9LGFuaW1hdGlvbj1kZWZlcnJlZC5wcm9taXNlKHtlbGVtOmVsZW0scHJvcHM6alF1ZXJ5LmV4dGVuZCh7fSxwcm9wZXJ0aWVzKSxvcHRzOmpRdWVyeS5leHRlbmQodHJ1ZSx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6alF1ZXJ5LmVhc2luZy5fZGVmYXVsdH0sb3B0aW9ucyksb3JpZ2luYWxQcm9wZXJ0aWVzOnByb3BlcnRpZXMsb3JpZ2luYWxPcHRpb25zOm9wdGlvbnMsc3RhcnRUaW1lOmZ4Tm93fHxjcmVhdGVGeE5vdygpLGR1cmF0aW9uOm9wdGlvbnMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHByb3AsZW5kKXt2YXIgdHdlZW49alF1ZXJ5LlR3ZWVuKGVsZW0sYW5pbWF0aW9uLm9wdHMscHJvcCxlbmQsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1twcm9wXXx8YW5pbWF0aW9uLm9wdHMuZWFzaW5nKTthbmltYXRpb24udHdlZW5zLnB1c2godHdlZW4pO3JldHVybiB0d2Vlbjt9LHN0b3A6ZnVuY3Rpb24oZ290b0VuZCl7dmFyIGluZGV4PTAsbGVuZ3RoPWdvdG9FbmQ/YW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg6MDtpZihzdG9wcGVkKXtyZXR1cm4gdGhpczt9CnN0b3BwZWQ9dHJ1ZTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXthbmltYXRpb24udHdlZW5zW2luZGV4XS5ydW4oMSk7fQppZihnb3RvRW5kKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTtkZWZlcnJlZC5yZXNvbHZlV2l0aChlbGVtLFthbmltYXRpb24sZ290b0VuZF0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKTt9CnJldHVybiB0aGlzO319KSxwcm9wcz1hbmltYXRpb24ucHJvcHM7cHJvcEZpbHRlcihwcm9wcyxhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyZXN1bHQ9QW5pbWF0aW9uLnByZWZpbHRlcnNbaW5kZXhdLmNhbGwoYW5pbWF0aW9uLGVsZW0scHJvcHMsYW5pbWF0aW9uLm9wdHMpO2lmKHJlc3VsdCl7aWYoaXNGdW5jdGlvbihyZXN1bHQuc3RvcCkpe2pRdWVyeS5fcXVldWVIb29rcyhhbmltYXRpb24uZWxlbSxhbmltYXRpb24ub3B0cy5xdWV1ZSkuc3RvcD1yZXN1bHQuc3RvcC5iaW5kKHJlc3VsdCk7fQpyZXR1cm4gcmVzdWx0O319CmpRdWVyeS5tYXAocHJvcHMsY3JlYXRlVHdlZW4sYW5pbWF0aW9uKTtpZihpc0Z1bmN0aW9uKGFuaW1hdGlvbi5vcHRzLnN0YXJ0KSl7YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbChlbGVtLGFuaW1hdGlvbik7fQphbmltYXRpb24ucHJvZ3Jlc3MoYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYW5pbWF0aW9uLm9wdHMuZG9uZSxhbmltYXRpb24ub3B0cy5jb21wbGV0ZSkuZmFpbChhbmltYXRpb24ub3B0cy5mYWlsKS5hbHdheXMoYW5pbWF0aW9uLm9wdHMuYWx3YXlzKTtqUXVlcnkuZngudGltZXIoalF1ZXJ5LmV4dGVuZCh0aWNrLHtlbGVtOmVsZW0sYW5pbTphbmltYXRpb24scXVldWU6YW5pbWF0aW9uLm9wdHMucXVldWV9KSk7cmV0dXJuIGFuaW1hdGlvbjt9CmpRdWVyeS5BbmltYXRpb249alF1ZXJ5LmV4dGVuZChBbmltYXRpb24se3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKHByb3AsdmFsdWUpe3ZhciB0d2Vlbj10aGlzLmNyZWF0ZVR3ZWVuKHByb3AsdmFsdWUpO2FkanVzdENTUyh0d2Vlbi5lbGVtLHByb3AscmNzc051bS5leGVjKHZhbHVlKSx0d2Vlbik7cmV0dXJuIHR3ZWVuO31dfSx0d2VlbmVyOmZ1bmN0aW9uKHByb3BzLGNhbGxiYWNrKXtpZihpc0Z1bmN0aW9uKHByb3BzKSl7Y2FsbGJhY2s9cHJvcHM7cHJvcHM9WyIqIl07fWVsc2V7cHJvcHM9cHJvcHMubWF0Y2gocm5vdGh0bWx3aGl0ZSk7fQp2YXIgcHJvcCxpbmRleD0wLGxlbmd0aD1wcm9wcy5sZW5ndGg7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cHJvcD1wcm9wc1tpbmRleF07QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdPUFuaW1hdGlvbi50d2VlbmVyc1twcm9wXXx8W107QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdLnVuc2hpZnQoY2FsbGJhY2spO319LHByZWZpbHRlcnM6W2RlZmF1bHRQcmVmaWx0ZXJdLHByZWZpbHRlcjpmdW5jdGlvbihjYWxsYmFjayxwcmVwZW5kKXtpZihwcmVwZW5kKXtBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KGNhbGxiYWNrKTt9ZWxzZXtBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKGNhbGxiYWNrKTt9fX0pO2pRdWVyeS5zcGVlZD1mdW5jdGlvbihzcGVlZCxlYXNpbmcsZm4pe3ZhciBvcHQ9c3BlZWQmJnR5cGVvZiBzcGVlZD09PSJvYmplY3QiP2pRdWVyeS5leHRlbmQoe30sc3BlZWQpOntjb21wbGV0ZTpmbnx8IWZuJiZlYXNpbmd8fGlzRnVuY3Rpb24oc3BlZWQpJiZzcGVlZCxkdXJhdGlvbjpzcGVlZCxlYXNpbmc6Zm4mJmVhc2luZ3x8ZWFzaW5nJiYhaXNGdW5jdGlvbihlYXNpbmcpJiZlYXNpbmd9O2lmKGpRdWVyeS5meC5vZmYpe29wdC5kdXJhdGlvbj0wO31lbHNle2lmKHR5cGVvZiBvcHQuZHVyYXRpb24hPT0ibnVtYmVyIil7aWYob3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMpe29wdC5kdXJhdGlvbj1qUXVlcnkuZnguc3BlZWRzW29wdC5kdXJhdGlvbl07fWVsc2V7b3B0LmR1cmF0aW9uPWpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7fX19CmlmKG9wdC5xdWV1ZT09bnVsbHx8b3B0LnF1ZXVlPT09dHJ1ZSl7b3B0LnF1ZXVlPSJmeCI7fQpvcHQub2xkPW9wdC5jb21wbGV0ZTtvcHQuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihpc0Z1bmN0aW9uKG9wdC5vbGQpKXtvcHQub2xkLmNhbGwodGhpcyk7fQppZihvcHQucXVldWUpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsb3B0LnF1ZXVlKTt9fTtyZXR1cm4gb3B0O307alF1ZXJ5LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHNwZWVkLHRvLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuZmlsdGVyKGlzSGlkZGVuV2l0aGluVHJlZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0b30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9LGFuaW1hdGU6ZnVuY3Rpb24ocHJvcCxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3ZhciBlbXB0eT1qUXVlcnkuaXNFbXB0eU9iamVjdChwcm9wKSxvcHRhbGw9alF1ZXJ5LnNwZWVkKHNwZWVkLGVhc2luZyxjYWxsYmFjayksZG9BbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYW5pbT1BbmltYXRpb24odGhpcyxqUXVlcnkuZXh0ZW5kKHt9LHByb3ApLG9wdGFsbCk7aWYoZW1wdHl8fGRhdGFQcml2LmdldCh0aGlzLCJmaW5pc2giKSl7YW5pbS5zdG9wKHRydWUpO319O2RvQW5pbWF0aW9uLmZpbmlzaD1kb0FuaW1hdGlvbjtyZXR1cm4gZW1wdHl8fG9wdGFsbC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChkb0FuaW1hdGlvbik6dGhpcy5xdWV1ZShvcHRhbGwucXVldWUsZG9BbmltYXRpb24pO30sc3RvcDpmdW5jdGlvbih0eXBlLGNsZWFyUXVldWUsZ290b0VuZCl7dmFyIHN0b3BRdWV1ZT1mdW5jdGlvbihob29rcyl7dmFyIHN0b3A9aG9va3Muc3RvcDtkZWxldGUgaG9va3Muc3RvcDtzdG9wKGdvdG9FbmQpO307aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7Z290b0VuZD1jbGVhclF1ZXVlO2NsZWFyUXVldWU9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CmlmKGNsZWFyUXVldWUmJnR5cGUhPT1mYWxzZSl7dGhpcy5xdWV1ZSh0eXBlfHwiZngiLFtdKTt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGVxdWV1ZT10cnVlLGluZGV4PXR5cGUhPW51bGwmJnR5cGUrInF1ZXVlSG9va3MiLHRpbWVycz1qUXVlcnkudGltZXJzLGRhdGE9ZGF0YVByaXYuZ2V0KHRoaXMpO2lmKGluZGV4KXtpZihkYXRhW2luZGV4XSYmZGF0YVtpbmRleF0uc3RvcCl7c3RvcFF1ZXVlKGRhdGFbaW5kZXhdKTt9fWVsc2V7Zm9yKGluZGV4IGluIGRhdGEpe2lmKGRhdGFbaW5kZXhdJiZkYXRhW2luZGV4XS5zdG9wJiZycnVuLnRlc3QoaW5kZXgpKXtzdG9wUXVldWUoZGF0YVtpbmRleF0pO319fQpmb3IoaW5kZXg9dGltZXJzLmxlbmd0aDtpbmRleC0tOyl7aWYodGltZXJzW2luZGV4XS5lbGVtPT09dGhpcyYmKHR5cGU9PW51bGx8fHRpbWVyc1tpbmRleF0ucXVldWU9PT10eXBlKSl7dGltZXJzW2luZGV4XS5hbmltLnN0b3AoZ290b0VuZCk7ZGVxdWV1ZT1mYWxzZTt0aW1lcnMuc3BsaWNlKGluZGV4LDEpO319CmlmKGRlcXVldWV8fCFnb3RvRW5kKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpO319KTt9LGZpbmlzaDpmdW5jdGlvbih0eXBlKXtpZih0eXBlIT09ZmFsc2Upe3R5cGU9dHlwZXx8ImZ4Ijt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaW5kZXgsZGF0YT1kYXRhUHJpdi5nZXQodGhpcykscXVldWU9ZGF0YVt0eXBlKyJxdWV1ZSJdLGhvb2tzPWRhdGFbdHlwZSsicXVldWVIb29rcyJdLHRpbWVycz1qUXVlcnkudGltZXJzLGxlbmd0aD1xdWV1ZT9xdWV1ZS5sZW5ndGg6MDtkYXRhLmZpbmlzaD10cnVlO2pRdWVyeS5xdWV1ZSh0aGlzLHR5cGUsW10pO2lmKGhvb2tzJiZob29rcy5zdG9wKXtob29rcy5zdG9wLmNhbGwodGhpcyx0cnVlKTt9CmZvcihpbmRleD10aW1lcnMubGVuZ3RoO2luZGV4LS07KXtpZih0aW1lcnNbaW5kZXhdLmVsZW09PT10aGlzJiZ0aW1lcnNbaW5kZXhdLnF1ZXVlPT09dHlwZSl7dGltZXJzW2luZGV4XS5hbmltLnN0b3AodHJ1ZSk7dGltZXJzLnNwbGljZShpbmRleCwxKTt9fQpmb3IoaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7aWYocXVldWVbaW5kZXhdJiZxdWV1ZVtpbmRleF0uZmluaXNoKXtxdWV1ZVtpbmRleF0uZmluaXNoLmNhbGwodGhpcyk7fX0KZGVsZXRlIGRhdGEuZmluaXNoO30pO319KTtqUXVlcnkuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oaSxuYW1lKXt2YXIgY3NzRm49alF1ZXJ5LmZuW25hbWVdO2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3JldHVybiBzcGVlZD09bnVsbHx8dHlwZW9mIHNwZWVkPT09ImJvb2xlYW4iP2Nzc0ZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoZ2VuRngobmFtZSx0cnVlKSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spO307fSk7alF1ZXJ5LmVhY2goe3NsaWRlRG93bjpnZW5GeCgic2hvdyIpLHNsaWRlVXA6Z2VuRngoImhpZGUiKSxzbGlkZVRvZ2dsZTpnZW5GeCgidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihuYW1lLHByb3BzKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtyZXR1cm4gdGhpcy5hbmltYXRlKHByb3BzLHNwZWVkLGVhc2luZyxjYWxsYmFjayk7fTt9KTtqUXVlcnkudGltZXJzPVtdO2pRdWVyeS5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIHRpbWVyLGk9MCx0aW1lcnM9alF1ZXJ5LnRpbWVycztmeE5vdz1EYXRlLm5vdygpO2Zvcig7aTx0aW1lcnMubGVuZ3RoO2krKyl7dGltZXI9dGltZXJzW2ldO2lmKCF0aW1lcigpJiZ0aW1lcnNbaV09PT10aW1lcil7dGltZXJzLnNwbGljZShpLS0sMSk7fX0KaWYoIXRpbWVycy5sZW5ndGgpe2pRdWVyeS5meC5zdG9wKCk7fQpmeE5vdz11bmRlZmluZWQ7fTtqUXVlcnkuZngudGltZXI9ZnVuY3Rpb24odGltZXIpe2pRdWVyeS50aW1lcnMucHVzaCh0aW1lcik7alF1ZXJ5LmZ4LnN0YXJ0KCk7fTtqUXVlcnkuZnguaW50ZXJ2YWw9MTM7alF1ZXJ5LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7aWYoaW5Qcm9ncmVzcyl7cmV0dXJuO30KaW5Qcm9ncmVzcz10cnVlO3NjaGVkdWxlKCk7fTtqUXVlcnkuZnguc3RvcD1mdW5jdGlvbigpe2luUHJvZ3Jlc3M9bnVsbDt9O2pRdWVyeS5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH07alF1ZXJ5LmZuLmRlbGF5PWZ1bmN0aW9uKHRpbWUsdHlwZSl7dGltZT1qUXVlcnkuZng/alF1ZXJ5LmZ4LnNwZWVkc1t0aW1lXXx8dGltZTp0aW1lO3R5cGU9dHlwZXx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZSh0eXBlLGZ1bmN0aW9uKG5leHQsaG9va3Mpe3ZhciB0aW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KG5leHQsdGltZSk7aG9va3Muc3RvcD1mdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7fTt9KTt9OyhmdW5jdGlvbigpe3ZhciBpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHNlbGVjdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSxvcHQ9c2VsZWN0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtpbnB1dC50eXBlPSJjaGVja2JveCI7c3VwcG9ydC5jaGVja09uPWlucHV0LnZhbHVlIT09IiI7c3VwcG9ydC5vcHRTZWxlY3RlZD1vcHQuc2VsZWN0ZWQ7aW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC52YWx1ZT0idCI7aW5wdXQudHlwZT0icmFkaW8iO3N1cHBvcnQucmFkaW9WYWx1ZT1pbnB1dC52YWx1ZT09PSJ0Ijt9KSgpO3ZhciBib29sSG9vayxhdHRySGFuZGxlPWpRdWVyeS5leHByLmF0dHJIYW5kbGU7alF1ZXJ5LmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsalF1ZXJ5LmF0dHIsbmFtZSx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoPjEpO30scmVtb3ZlQXR0cjpmdW5jdGlvbihuYW1lKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LnJlbW92ZUF0dHIodGhpcyxuYW1lKTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZih0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGU9PT0idW5kZWZpbmVkIil7cmV0dXJuIGpRdWVyeS5wcm9wKGVsZW0sbmFtZSx2YWx1ZSk7fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe2hvb2tzPWpRdWVyeS5hdHRySG9va3NbbmFtZS50b0xvd2VyQ2FzZSgpXXx8KGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdChuYW1lKT9ib29sSG9vazp1bmRlZmluZWQpO30KaWYodmFsdWUhPT11bmRlZmluZWQpe2lmKHZhbHVlPT09bnVsbCl7alF1ZXJ5LnJlbW92ZUF0dHIoZWxlbSxuYW1lKTtyZXR1cm47fQppZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQplbGVtLnNldEF0dHJpYnV0ZShuYW1lLHZhbHVlKyIiKTtyZXR1cm4gdmFsdWU7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0PWpRdWVyeS5maW5kLmF0dHIoZWxlbSxuYW1lKTtyZXR1cm4gcmV0PT1udWxsP3VuZGVmaW5lZDpyZXQ7fSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZighc3VwcG9ydC5yYWRpb1ZhbHVlJiZ2YWx1ZT09PSJyYWRpbyImJm5vZGVOYW1lKGVsZW0sImlucHV0Iikpe3ZhciB2YWw9ZWxlbS52YWx1ZTtlbGVtLnNldEF0dHJpYnV0ZSgidHlwZSIsdmFsdWUpO2lmKHZhbCl7ZWxlbS52YWx1ZT12YWw7fQpyZXR1cm4gdmFsdWU7fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGVsZW0sdmFsdWUpe3ZhciBuYW1lLGk9MCxhdHRyTmFtZXM9dmFsdWUmJnZhbHVlLm1hdGNoKHJub3RodG1sd2hpdGUpO2lmKGF0dHJOYW1lcyYmZWxlbS5ub2RlVHlwZT09PTEpe3doaWxlKChuYW1lPWF0dHJOYW1lc1tpKytdKSl7ZWxlbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7fX19fSk7Ym9vbEhvb2s9e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlLG5hbWUpe2lmKHZhbHVlPT09ZmFsc2Upe2pRdWVyeS5yZW1vdmVBdHRyKGVsZW0sbmFtZSk7fWVsc2V7ZWxlbS5zZXRBdHRyaWJ1dGUobmFtZSxuYW1lKTt9CnJldHVybiBuYW1lO319O2pRdWVyeS5lYWNoKGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oaSxuYW1lKXt2YXIgZ2V0dGVyPWF0dHJIYW5kbGVbbmFtZV18fGpRdWVyeS5maW5kLmF0dHI7YXR0ckhhbmRsZVtuYW1lXT1mdW5jdGlvbihlbGVtLG5hbWUsaXNYTUwpe3ZhciByZXQsaGFuZGxlLGxvd2VyY2FzZU5hbWU9bmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFpc1hNTCl7aGFuZGxlPWF0dHJIYW5kbGVbbG93ZXJjYXNlTmFtZV07YXR0ckhhbmRsZVtsb3dlcmNhc2VOYW1lXT1yZXQ7cmV0PWdldHRlcihlbGVtLG5hbWUsaXNYTUwpIT1udWxsP2xvd2VyY2FzZU5hbWU6bnVsbDthdHRySGFuZGxlW2xvd2VyY2FzZU5hbWVdPWhhbmRsZTt9CnJldHVybiByZXQ7fTt9KTt2YXIgcmZvY3VzYWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHJjbGlja2FibGU9L14oPzphfGFyZWEpJC9pO2pRdWVyeS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5wcm9wLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9LHJlbW92ZVByb3A6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW2pRdWVyeS5wcm9wRml4W25hbWVdfHxuYW1lXTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe25hbWU9alF1ZXJ5LnByb3BGaXhbbmFtZV18fG5hbWU7aG9va3M9alF1ZXJ5LnByb3BIb29rc1tuYW1lXTt9CmlmKHZhbHVlIT09dW5kZWZpbmVkKXtpZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4oZWxlbVtuYW1lXT12YWx1ZSk7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0dXJuIGVsZW1bbmFtZV07fSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHRhYmluZGV4PWpRdWVyeS5maW5kLmF0dHIoZWxlbSwidGFiaW5kZXgiKTtpZih0YWJpbmRleCl7cmV0dXJuIHBhcnNlSW50KHRhYmluZGV4LDEwKTt9CmlmKHJmb2N1c2FibGUudGVzdChlbGVtLm5vZGVOYW1lKXx8cmNsaWNrYWJsZS50ZXN0KGVsZW0ubm9kZU5hbWUpJiZlbGVtLmhyZWYpe3JldHVybiAwO30KcmV0dXJuLTE7fX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pO2lmKCFzdXBwb3J0Lm9wdFNlbGVjdGVkKXtqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQucGFyZW50Tm9kZSl7cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDt9CnJldHVybiBudWxsO30sc2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO2lmKHBhcmVudCl7cGFyZW50LnNlbGVjdGVkSW5kZXg7aWYocGFyZW50LnBhcmVudE5vZGUpe3BhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fX19fTt9CmpRdWVyeS5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtqUXVlcnkucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXM7fSk7ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSh2YWx1ZSl7dmFyIHRva2Vucz12YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107cmV0dXJuIHRva2Vucy5qb2luKCIgIik7fQpmdW5jdGlvbiBnZXRDbGFzcyhlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUmJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIjt9CmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuIHZhbHVlO30KaWYodHlwZW9mIHZhbHVlPT09InN0cmluZyIpe3JldHVybiB2YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107fQpyZXR1cm5bXTt9CmpRdWVyeS5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5hZGRDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KY2xhc3Nlcz1jbGFzc2VzVG9BcnJheSh2YWx1ZSk7aWYoY2xhc3Nlcy5sZW5ndGgpe3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2N1clZhbHVlPWdldENsYXNzKGVsZW0pO2N1cj1lbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGN1clZhbHVlKSsiICIpO2lmKGN1cil7aj0wO3doaWxlKChjbGF6ej1jbGFzc2VzW2orK10pKXtpZihjdXIuaW5kZXhPZigiICIrY2xhenorIiAiKTwwKXtjdXIrPWNsYXp6KyIgIjt9fQpmaW5hbFZhbHVlPXN0cmlwQW5kQ29sbGFwc2UoY3VyKTtpZihjdXJWYWx1ZSE9PWZpbmFsVmFsdWUpe2VsZW0uc2V0QXR0cmlidXRlKCJjbGFzcyIsZmluYWxWYWx1ZSk7fX19fQpyZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KaWYoIWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiB0aGlzLmF0dHIoImNsYXNzIiwiIik7fQpjbGFzc2VzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTtpZihjbGFzc2VzLmxlbmd0aCl7d2hpbGUoKGVsZW09dGhpc1tpKytdKSl7Y3VyVmFsdWU9Z2V0Q2xhc3MoZWxlbSk7Y3VyPWVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoY3VyVmFsdWUpKyIgIik7aWYoY3VyKXtqPTA7d2hpbGUoKGNsYXp6PWNsYXNzZXNbaisrXSkpe3doaWxlKGN1ci5pbmRleE9mKCIgIitjbGF6eisiICIpPi0xKXtjdXI9Y3VyLnJlcGxhY2UoIiAiK2NsYXp6KyIgIiwiICIpO319CmZpbmFsVmFsdWU9c3RyaXBBbmRDb2xsYXBzZShjdXIpO2lmKGN1clZhbHVlIT09ZmluYWxWYWx1ZSl7ZWxlbS5zZXRBdHRyaWJ1dGUoImNsYXNzIixmaW5hbFZhbHVlKTt9fX19CnJldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odmFsdWUsc3RhdGVWYWwpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZSxpc1ZhbGlkVmFsdWU9dHlwZT09PSJzdHJpbmcifHxBcnJheS5pc0FycmF5KHZhbHVlKTtpZih0eXBlb2Ygc3RhdGVWYWw9PT0iYm9vbGVhbiImJmlzVmFsaWRWYWx1ZSl7cmV0dXJuIHN0YXRlVmFsP3RoaXMuYWRkQ2xhc3ModmFsdWUpOnRoaXMucmVtb3ZlQ2xhc3ModmFsdWUpO30KaWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKHZhbHVlLmNhbGwodGhpcyxpLGdldENsYXNzKHRoaXMpLHN0YXRlVmFsKSxzdGF0ZVZhbCk7fSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNsYXNzTmFtZSxpLHNlbGYsY2xhc3NOYW1lcztpZihpc1ZhbGlkVmFsdWUpe2k9MDtzZWxmPWpRdWVyeSh0aGlzKTtjbGFzc05hbWVzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTt3aGlsZSgoY2xhc3NOYW1lPWNsYXNzTmFtZXNbaSsrXSkpe2lmKHNlbGYuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7c2VsZi5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO31lbHNle3NlbGYuYWRkQ2xhc3MoY2xhc3NOYW1lKTt9fX1lbHNlIGlmKHZhbHVlPT09dW5kZWZpbmVkfHx0eXBlPT09ImJvb2xlYW4iKXtjbGFzc05hbWU9Z2V0Q2xhc3ModGhpcyk7aWYoY2xhc3NOYW1lKXtkYXRhUHJpdi5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsY2xhc3NOYW1lKTt9CmlmKHRoaXMuc2V0QXR0cmlidXRlKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNsYXNzTmFtZXx8dmFsdWU9PT1mYWxzZT8iIjpkYXRhUHJpdi5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIik7fX19KTt9LGhhc0NsYXNzOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgY2xhc3NOYW1lLGVsZW0saT0wO2NsYXNzTmFtZT0iICIrc2VsZWN0b3IrIiAiO3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoZ2V0Q2xhc3MoZWxlbSkpKyIgIikuaW5kZXhPZihjbGFzc05hbWUpPi0xKXtyZXR1cm4gdHJ1ZTt9fQpyZXR1cm4gZmFsc2U7fX0pO3ZhciBycmV0dXJuPS9cci9nO2pRdWVyeS5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2YWx1ZSl7dmFyIGhvb2tzLHJldCx2YWx1ZUlzRnVuY3Rpb24sZWxlbT10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihlbGVtKXtob29rcz1qUXVlcnkudmFsSG9va3NbZWxlbS50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW2VsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sInZhbHVlIikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcmV0O30KcmV0PWVsZW0udmFsdWU7aWYodHlwZW9mIHJldD09PSJzdHJpbmciKXtyZXR1cm4gcmV0LnJlcGxhY2UocnJldHVybiwiIik7fQpyZXR1cm4gcmV0PT1udWxsPyIiOnJldDt9CnJldHVybjt9CnZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciB2YWw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybjt9CmlmKHZhbHVlSXNGdW5jdGlvbil7dmFsPXZhbHVlLmNhbGwodGhpcyxpLGpRdWVyeSh0aGlzKS52YWwoKSk7fWVsc2V7dmFsPXZhbHVlO30KaWYodmFsPT1udWxsKXt2YWw9IiI7fWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWwrPSIiO31lbHNlIGlmKEFycmF5LmlzQXJyYXkodmFsKSl7dmFsPWpRdWVyeS5tYXAodmFsLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PW51bGw/IiI6dmFsdWUrIiI7fSk7fQpob29rcz1qUXVlcnkudmFsSG9va3NbdGhpcy50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHxob29rcy5zZXQodGhpcyx2YWwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9dmFsO319KTt9fSk7alF1ZXJ5LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWw9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLCJ2YWx1ZSIpO3JldHVybiB2YWwhPW51bGw/dmFsOnN0cmlwQW5kQ29sbGFwc2UoalF1ZXJ5LnRleHQoZWxlbSkpO319LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWx1ZSxvcHRpb24saSxvcHRpb25zPWVsZW0ub3B0aW9ucyxpbmRleD1lbGVtLnNlbGVjdGVkSW5kZXgsb25lPWVsZW0udHlwZT09PSJzZWxlY3Qtb25lIix2YWx1ZXM9b25lP251bGw6W10sbWF4PW9uZT9pbmRleCsxOm9wdGlvbnMubGVuZ3RoO2lmKGluZGV4PDApe2k9bWF4O31lbHNle2k9b25lP2luZGV4OjA7fQpmb3IoO2k8bWF4O2krKyl7b3B0aW9uPW9wdGlvbnNbaV07aWYoKG9wdGlvbi5zZWxlY3RlZHx8aT09PWluZGV4KSYmIW9wdGlvbi5kaXNhYmxlZCYmKCFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW5vZGVOYW1lKG9wdGlvbi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dmFsdWU9alF1ZXJ5KG9wdGlvbikudmFsKCk7aWYob25lKXtyZXR1cm4gdmFsdWU7fQp2YWx1ZXMucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHZhbHVlczt9LHNldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgb3B0aW9uU2V0LG9wdGlvbixvcHRpb25zPWVsZW0ub3B0aW9ucyx2YWx1ZXM9alF1ZXJ5Lm1ha2VBcnJheSh2YWx1ZSksaT1vcHRpb25zLmxlbmd0aDt3aGlsZShpLS0pe29wdGlvbj1vcHRpb25zW2ldO2lmKG9wdGlvbi5zZWxlY3RlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldChvcHRpb24pLHZhbHVlcyk+LTEpe29wdGlvblNldD10cnVlO319CmlmKCFvcHRpb25TZXQpe2VsZW0uc2VsZWN0ZWRJbmRleD0tMTt9CnJldHVybiB2YWx1ZXM7fX19fSk7alF1ZXJ5LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtqUXVlcnkudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuKGVsZW0uY2hlY2tlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkoZWxlbSkudmFsKCksdmFsdWUpPi0xKTt9fX07aWYoIXN1cHBvcnQuY2hlY2tPbil7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6ZWxlbS52YWx1ZTt9O319KTtzdXBwb3J0LmZvY3VzaW49Im9uZm9jdXNpbiJpbiB3aW5kb3c7dmFyIHJmb2N1c01vcnBoPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxzdG9wUHJvcGFnYXRpb25DYWxsYmFjaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO307alF1ZXJ5LmV4dGVuZChqUXVlcnkuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZXZlbnQsZGF0YSxlbGVtLG9ubHlIYW5kbGVycyl7dmFyIGksY3VyLHRtcCxidWJibGVUeXBlLG9udHlwZSxoYW5kbGUsc3BlY2lhbCxsYXN0RWxlbWVudCxldmVudFBhdGg9W2VsZW18fGRvY3VtZW50XSx0eXBlPWhhc093bi5jYWxsKGV2ZW50LCJ0eXBlIik/ZXZlbnQudHlwZTpldmVudCxuYW1lc3BhY2VzPWhhc093bi5jYWxsKGV2ZW50LCJuYW1lc3BhY2UiKT9ldmVudC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtjdXI9bGFzdEVsZW1lbnQ9dG1wPWVsZW09ZWxlbXx8ZG9jdW1lbnQ7aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT04KXtyZXR1cm47fQppZihyZm9jdXNNb3JwaC50ZXN0KHR5cGUralF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCkpe3JldHVybjt9CmlmKHR5cGUuaW5kZXhPZigiLiIpPi0xKXtuYW1lc3BhY2VzPXR5cGUuc3BsaXQoIi4iKTt0eXBlPW5hbWVzcGFjZXMuc2hpZnQoKTtuYW1lc3BhY2VzLnNvcnQoKTt9Cm9udHlwZT10eXBlLmluZGV4T2YoIjoiKTwwJiYib24iK3R5cGU7ZXZlbnQ9ZXZlbnRbalF1ZXJ5LmV4cGFuZG9dP2V2ZW50Om5ldyBqUXVlcnkuRXZlbnQodHlwZSx0eXBlb2YgZXZlbnQ9PT0ib2JqZWN0IiYmZXZlbnQpO2V2ZW50LmlzVHJpZ2dlcj1vbmx5SGFuZGxlcnM/MjozO2V2ZW50Lm5hbWVzcGFjZT1uYW1lc3BhY2VzLmpvaW4oIi4iKTtldmVudC5ybmFtZXNwYWNlPWV2ZW50Lm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7ZXZlbnQucmVzdWx0PXVuZGVmaW5lZDtpZighZXZlbnQudGFyZ2V0KXtldmVudC50YXJnZXQ9ZWxlbTt9CmRhdGE9ZGF0YT09bnVsbD9bZXZlbnRdOmpRdWVyeS5tYWtlQXJyYXkoZGF0YSxbZXZlbnRdKTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtpZighb25seUhhbmRsZXJzJiZzcGVjaWFsLnRyaWdnZXImJnNwZWNpYWwudHJpZ2dlci5hcHBseShlbGVtLGRhdGEpPT09ZmFsc2Upe3JldHVybjt9CmlmKCFvbmx5SGFuZGxlcnMmJiFzcGVjaWFsLm5vQnViYmxlJiYhaXNXaW5kb3coZWxlbSkpe2J1YmJsZVR5cGU9c3BlY2lhbC5kZWxlZ2F0ZVR5cGV8fHR5cGU7aWYoIXJmb2N1c01vcnBoLnRlc3QoYnViYmxlVHlwZSt0eXBlKSl7Y3VyPWN1ci5wYXJlbnROb2RlO30KZm9yKDtjdXI7Y3VyPWN1ci5wYXJlbnROb2RlKXtldmVudFBhdGgucHVzaChjdXIpO3RtcD1jdXI7fQppZih0bXA9PT0oZWxlbS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkpe2V2ZW50UGF0aC5wdXNoKHRtcC5kZWZhdWx0Vmlld3x8dG1wLnBhcmVudFdpbmRvd3x8d2luZG93KTt9fQppPTA7d2hpbGUoKGN1cj1ldmVudFBhdGhbaSsrXSkmJiFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudD1jdXI7ZXZlbnQudHlwZT1pPjE/YnViYmxlVHlwZTpzcGVjaWFsLmJpbmRUeXBlfHx0eXBlO2hhbmRsZT0oZGF0YVByaXYuZ2V0KGN1ciwiZXZlbnRzIil8fHt9KVtldmVudC50eXBlXSYmZGF0YVByaXYuZ2V0KGN1ciwiaGFuZGxlIik7aWYoaGFuZGxlKXtoYW5kbGUuYXBwbHkoY3VyLGRhdGEpO30KaGFuZGxlPW9udHlwZSYmY3VyW29udHlwZV07aWYoaGFuZGxlJiZoYW5kbGUuYXBwbHkmJmFjY2VwdERhdGEoY3VyKSl7ZXZlbnQucmVzdWx0PWhhbmRsZS5hcHBseShjdXIsZGF0YSk7aWYoZXZlbnQucmVzdWx0PT09ZmFsc2Upe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fX19CmV2ZW50LnR5cGU9dHlwZTtpZighb25seUhhbmRsZXJzJiYhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKCghc3BlY2lhbC5fZGVmYXVsdHx8c3BlY2lhbC5fZGVmYXVsdC5hcHBseShldmVudFBhdGgucG9wKCksZGF0YSk9PT1mYWxzZSkmJmFjY2VwdERhdGEoZWxlbSkpe2lmKG9udHlwZSYmaXNGdW5jdGlvbihlbGVtW3R5cGVdKSYmIWlzV2luZG93KGVsZW0pKXt0bXA9ZWxlbVtvbnR5cGVdO2lmKHRtcCl7ZWxlbVtvbnR5cGVdPW51bGw7fQpqUXVlcnkuZXZlbnQudHJpZ2dlcmVkPXR5cGU7aWYoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrKTt9CmVsZW1bdHlwZV0oKTtpZihldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2spO30KalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZD11bmRlZmluZWQ7aWYodG1wKXtlbGVtW29udHlwZV09dG1wO319fX0KcmV0dXJuIGV2ZW50LnJlc3VsdDt9LHNpbXVsYXRlOmZ1bmN0aW9uKHR5cGUsZWxlbSxldmVudCl7dmFyIGU9alF1ZXJ5LmV4dGVuZChuZXcgalF1ZXJ5LkV2ZW50KCksZXZlbnQse3R5cGU6dHlwZSxpc1NpbXVsYXRlZDp0cnVlfSk7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoZSxudWxsLGVsZW0pO319KTtqUXVlcnkuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKHR5cGUsZGF0YSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC50cmlnZ2VyKHR5cGUsZGF0YSx0aGlzKTt9KTt9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIGVsZW09dGhpc1swXTtpZihlbGVtKXtyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLGVsZW0sdHJ1ZSk7fX19KTtpZighc3VwcG9ydC5mb2N1c2luKXtqUXVlcnkuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24ob3JpZyxmaXgpe3ZhciBoYW5kbGVyPWZ1bmN0aW9uKGV2ZW50KXtqUXVlcnkuZXZlbnQuc2ltdWxhdGUoZml4LGV2ZW50LnRhcmdldCxqUXVlcnkuZXZlbnQuZml4KGV2ZW50KSk7fTtqUXVlcnkuZXZlbnQuc3BlY2lhbFtmaXhdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkb2M9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGF0dGFjaGVzPWRhdGFQcml2LmFjY2Vzcyhkb2MsZml4KTtpZighYXR0YWNoZXMpe2RvYy5hZGRFdmVudExpc3RlbmVyKG9yaWcsaGFuZGxlcix0cnVlKTt9CmRhdGFQcml2LmFjY2Vzcyhkb2MsZml4LChhdHRhY2hlc3x8MCkrMSk7fSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkb2M9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGF0dGFjaGVzPWRhdGFQcml2LmFjY2Vzcyhkb2MsZml4KS0xO2lmKCFhdHRhY2hlcyl7ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIob3JpZyxoYW5kbGVyLHRydWUpO2RhdGFQcml2LnJlbW92ZShkb2MsZml4KTt9ZWxzZXtkYXRhUHJpdi5hY2Nlc3MoZG9jLGZpeCxhdHRhY2hlcyk7fX19O30pO30KdmFyIGxvY2F0aW9uPXdpbmRvdy5sb2NhdGlvbjt2YXIgbm9uY2U9RGF0ZS5ub3coKTt2YXIgcnF1ZXJ5PSgvXD8vKTtqUXVlcnkucGFyc2VYTUw9ZnVuY3Rpb24oZGF0YSl7dmFyIHhtbDtpZighZGF0YXx8dHlwZW9mIGRhdGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fQp0cnl7eG1sPShuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoZGF0YSwidGV4dC94bWwiKTt9Y2F0Y2goZSl7eG1sPXVuZGVmaW5lZDt9CmlmKCF4bWx8fHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpe2pRdWVyeS5lcnJvcigiSW52YWxpZCBYTUw6ICIrZGF0YSk7fQpyZXR1cm4geG1sO307dmFyCnJicmFja2V0PS9cW1xdJC8sckNSTEY9L1xyP1xuL2cscnN1Ym1pdHRlclR5cGVzPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxyc3VibWl0dGFibGU9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIGJ1aWxkUGFyYW1zKHByZWZpeCxvYmosdHJhZGl0aW9uYWwsYWRkKXt2YXIgbmFtZTtpZihBcnJheS5pc0FycmF5KG9iaikpe2pRdWVyeS5lYWNoKG9iaixmdW5jdGlvbihpLHYpe2lmKHRyYWRpdGlvbmFsfHxyYnJhY2tldC50ZXN0KHByZWZpeCkpe2FkZChwcmVmaXgsdik7fWVsc2V7YnVpbGRQYXJhbXMocHJlZml4KyJbIisodHlwZW9mIHY9PT0ib2JqZWN0IiYmdiE9bnVsbD9pOiIiKSsiXSIsdix0cmFkaXRpb25hbCxhZGQpO319KTt9ZWxzZSBpZighdHJhZGl0aW9uYWwmJnRvVHlwZShvYmopPT09Im9iamVjdCIpe2ZvcihuYW1lIGluIG9iail7YnVpbGRQYXJhbXMocHJlZml4KyJbIituYW1lKyJdIixvYmpbbmFtZV0sdHJhZGl0aW9uYWwsYWRkKTt9fWVsc2V7YWRkKHByZWZpeCxvYmopO319CmpRdWVyeS5wYXJhbT1mdW5jdGlvbihhLHRyYWRpdGlvbmFsKXt2YXIgcHJlZml4LHM9W10sYWRkPWZ1bmN0aW9uKGtleSx2YWx1ZU9yRnVuY3Rpb24pe3ZhciB2YWx1ZT1pc0Z1bmN0aW9uKHZhbHVlT3JGdW5jdGlvbik/dmFsdWVPckZ1bmN0aW9uKCk6dmFsdWVPckZ1bmN0aW9uO3Nbcy5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChrZXkpKyI9IisKZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlPT1udWxsPyIiOnZhbHVlKTt9O2lmKEFycmF5LmlzQXJyYXkoYSl8fChhLmpxdWVyeSYmIWpRdWVyeS5pc1BsYWluT2JqZWN0KGEpKSl7alF1ZXJ5LmVhY2goYSxmdW5jdGlvbigpe2FkZCh0aGlzLm5hbWUsdGhpcy52YWx1ZSk7fSk7fWVsc2V7Zm9yKHByZWZpeCBpbiBhKXtidWlsZFBhcmFtcyhwcmVmaXgsYVtwcmVmaXhdLHRyYWRpdGlvbmFsLGFkZCk7fX0KcmV0dXJuIHMuam9pbigiJiIpO307alF1ZXJ5LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpO30sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZWxlbWVudHM9alF1ZXJ5LnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZWxlbWVudHM/alF1ZXJ5Lm1ha2VBcnJheShlbGVtZW50cyk6dGhpczt9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdHlwZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWpRdWVyeSh0aGlzKS5pcygiOmRpc2FibGVkIikmJnJzdWJtaXR0YWJsZS50ZXN0KHRoaXMubm9kZU5hbWUpJiYhcnN1Ym1pdHRlclR5cGVzLnRlc3QodHlwZSkmJih0aGlzLmNoZWNrZWR8fCFyY2hlY2thYmxlVHlwZS50ZXN0KHR5cGUpKTt9KS5tYXAoZnVuY3Rpb24oaSxlbGVtKXt2YXIgdmFsPWpRdWVyeSh0aGlzKS52YWwoKTtpZih2YWw9PW51bGwpe3JldHVybiBudWxsO30KaWYoQXJyYXkuaXNBcnJheSh2YWwpKXtyZXR1cm4galF1ZXJ5Lm1hcCh2YWwsZnVuY3Rpb24odmFsKXtyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSk7fQpyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSkuZ2V0KCk7fX0pO3ZhcgpyMjA9LyUyMC9nLHJoYXNoPS8jLiokLyxyYW50aUNhY2hlPS8oWz8mXSlfPVteJl0qLyxyaGVhZGVycz0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL21nLHJsb2NhbFByb3RvY29sPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHJub0NvbnRlbnQ9L14oPzpHRVR8SEVBRCkkLyxycHJvdG9jb2w9L15cL1wvLyxwcmVmaWx0ZXJzPXt9LHRyYW5zcG9ydHM9e30sYWxsVHlwZXM9IiovIi5jb25jYXQoIioiKSxvcmlnaW5BbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO29yaWdpbkFuY2hvci5ocmVmPWxvY2F0aW9uLmhyZWY7ZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSl7cmV0dXJuIGZ1bmN0aW9uKGRhdGFUeXBlRXhwcmVzc2lvbixmdW5jKXtpZih0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uIT09InN0cmluZyIpe2Z1bmM9ZGF0YVR5cGVFeHByZXNzaW9uO2RhdGFUeXBlRXhwcmVzc2lvbj0iKiI7fQp2YXIgZGF0YVR5cGUsaT0wLGRhdGFUeXBlcz1kYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107aWYoaXNGdW5jdGlvbihmdW5jKSl7d2hpbGUoKGRhdGFUeXBlPWRhdGFUeXBlc1tpKytdKSl7aWYoZGF0YVR5cGVbMF09PT0iKyIpe2RhdGFUeXBlPWRhdGFUeXBlLnNsaWNlKDEpfHwiKiI7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnVuc2hpZnQoZnVuYyk7fWVsc2V7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnB1c2goZnVuYyk7fX19fTt9CmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSxvcHRpb25zLG9yaWdpbmFsT3B0aW9ucyxqcVhIUil7dmFyIGluc3BlY3RlZD17fSxzZWVraW5nVHJhbnNwb3J0PShzdHJ1Y3R1cmU9PT10cmFuc3BvcnRzKTtmdW5jdGlvbiBpbnNwZWN0KGRhdGFUeXBlKXt2YXIgc2VsZWN0ZWQ7aW5zcGVjdGVkW2RhdGFUeXBlXT10cnVlO2pRdWVyeS5lYWNoKHN0cnVjdHVyZVtkYXRhVHlwZV18fFtdLGZ1bmN0aW9uKF8scHJlZmlsdGVyT3JGYWN0b3J5KXt2YXIgZGF0YVR5cGVPclRyYW5zcG9ydD1wcmVmaWx0ZXJPckZhY3Rvcnkob3B0aW9ucyxvcmlnaW5hbE9wdGlvbnMsanFYSFIpO2lmKHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0PT09InN0cmluZyImJiFzZWVraW5nVHJhbnNwb3J0JiYhaW5zcGVjdGVkW2RhdGFUeXBlT3JUcmFuc3BvcnRdKXtvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KGRhdGFUeXBlT3JUcmFuc3BvcnQpO2luc3BlY3QoZGF0YVR5cGVPclRyYW5zcG9ydCk7cmV0dXJuIGZhbHNlO31lbHNlIGlmKHNlZWtpbmdUcmFuc3BvcnQpe3JldHVybiEoc2VsZWN0ZWQ9ZGF0YVR5cGVPclRyYW5zcG9ydCk7fX0pO3JldHVybiBzZWxlY3RlZDt9CnJldHVybiBpbnNwZWN0KG9wdGlvbnMuZGF0YVR5cGVzWzBdKXx8IWluc3BlY3RlZFsiKiJdJiZpbnNwZWN0KCIqIik7fQpmdW5jdGlvbiBhamF4RXh0ZW5kKHRhcmdldCxzcmMpe3ZhciBrZXksZGVlcCxmbGF0T3B0aW9ucz1qUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3Ioa2V5IGluIHNyYyl7aWYoc3JjW2tleV0hPT11bmRlZmluZWQpeyhmbGF0T3B0aW9uc1trZXldP3RhcmdldDooZGVlcHx8KGRlZXA9e30pKSlba2V5XT1zcmNba2V5XTt9fQppZihkZWVwKXtqUXVlcnkuZXh0ZW5kKHRydWUsdGFyZ2V0LGRlZXApO30KcmV0dXJuIHRhcmdldDt9CmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpe3ZhciBjdCx0eXBlLGZpbmFsRGF0YVR5cGUsZmlyc3REYXRhVHlwZSxjb250ZW50cz1zLmNvbnRlbnRzLGRhdGFUeXBlcz1zLmRhdGFUeXBlczt3aGlsZShkYXRhVHlwZXNbMF09PT0iKiIpe2RhdGFUeXBlcy5zaGlmdCgpO2lmKGN0PT09dW5kZWZpbmVkKXtjdD1zLm1pbWVUeXBlfHxqcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7fX0KaWYoY3Qpe2Zvcih0eXBlIGluIGNvbnRlbnRzKXtpZihjb250ZW50c1t0eXBlXSYmY29udGVudHNbdHlwZV0udGVzdChjdCkpe2RhdGFUeXBlcy51bnNoaWZ0KHR5cGUpO2JyZWFrO319fQppZihkYXRhVHlwZXNbMF1pbiByZXNwb25zZXMpe2ZpbmFsRGF0YVR5cGU9ZGF0YVR5cGVzWzBdO31lbHNle2Zvcih0eXBlIGluIHJlc3BvbnNlcyl7aWYoIWRhdGFUeXBlc1swXXx8cy5jb252ZXJ0ZXJzW3R5cGUrIiAiK2RhdGFUeXBlc1swXV0pe2ZpbmFsRGF0YVR5cGU9dHlwZTticmVhazt9CmlmKCFmaXJzdERhdGFUeXBlKXtmaXJzdERhdGFUeXBlPXR5cGU7fX0KZmluYWxEYXRhVHlwZT1maW5hbERhdGFUeXBlfHxmaXJzdERhdGFUeXBlO30KaWYoZmluYWxEYXRhVHlwZSl7aWYoZmluYWxEYXRhVHlwZSE9PWRhdGFUeXBlc1swXSl7ZGF0YVR5cGVzLnVuc2hpZnQoZmluYWxEYXRhVHlwZSk7fQpyZXR1cm4gcmVzcG9uc2VzW2ZpbmFsRGF0YVR5cGVdO319CmZ1bmN0aW9uIGFqYXhDb252ZXJ0KHMscmVzcG9uc2UsanFYSFIsaXNTdWNjZXNzKXt2YXIgY29udjIsY3VycmVudCxjb252LHRtcCxwcmV2LGNvbnZlcnRlcnM9e30sZGF0YVR5cGVzPXMuZGF0YVR5cGVzLnNsaWNlKCk7aWYoZGF0YVR5cGVzWzFdKXtmb3IoY29udiBpbiBzLmNvbnZlcnRlcnMpe2NvbnZlcnRlcnNbY29udi50b0xvd2VyQ2FzZSgpXT1zLmNvbnZlcnRlcnNbY29udl07fX0KY3VycmVudD1kYXRhVHlwZXMuc2hpZnQoKTt3aGlsZShjdXJyZW50KXtpZihzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdKXtqcVhIUltzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdXT1yZXNwb25zZTt9CmlmKCFwcmV2JiZpc1N1Y2Nlc3MmJnMuZGF0YUZpbHRlcil7cmVzcG9uc2U9cy5kYXRhRmlsdGVyKHJlc3BvbnNlLHMuZGF0YVR5cGUpO30KcHJldj1jdXJyZW50O2N1cnJlbnQ9ZGF0YVR5cGVzLnNoaWZ0KCk7aWYoY3VycmVudCl7aWYoY3VycmVudD09PSIqIil7Y3VycmVudD1wcmV2O31lbHNlIGlmKHByZXYhPT0iKiImJnByZXYhPT1jdXJyZW50KXtjb252PWNvbnZlcnRlcnNbcHJldisiICIrY3VycmVudF18fGNvbnZlcnRlcnNbIiogIitjdXJyZW50XTtpZighY29udil7Zm9yKGNvbnYyIGluIGNvbnZlcnRlcnMpe3RtcD1jb252Mi5zcGxpdCgiICIpO2lmKHRtcFsxXT09PWN1cnJlbnQpe2NvbnY9Y29udmVydGVyc1twcmV2KyIgIit0bXBbMF1dfHxjb252ZXJ0ZXJzWyIqICIrdG1wWzBdXTtpZihjb252KXtpZihjb252PT09dHJ1ZSl7Y29udj1jb252ZXJ0ZXJzW2NvbnYyXTt9ZWxzZSBpZihjb252ZXJ0ZXJzW2NvbnYyXSE9PXRydWUpe2N1cnJlbnQ9dG1wWzBdO2RhdGFUeXBlcy51bnNoaWZ0KHRtcFsxXSk7fQpicmVhazt9fX19CmlmKGNvbnYhPT10cnVlKXtpZihjb252JiZzLnRocm93cyl7cmVzcG9uc2U9Y29udihyZXNwb25zZSk7fWVsc2V7dHJ5e3Jlc3BvbnNlPWNvbnYocmVzcG9uc2UpO31jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpjb252P2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3ByZXYrIiB0byAiK2N1cnJlbnR9O319fX19fQpyZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6cmVzcG9uc2V9O30KalF1ZXJ5LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6cmxvY2FsUHJvdG9jb2wudGVzdChsb2NhdGlvbi5wcm90b2NvbCksZ2xvYmFsOnRydWUscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjphbGxUeXBlcyx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjp0cnVlLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpqUXVlcnkucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6dHJ1ZSxjb250ZXh0OnRydWV9fSxhamF4U2V0dXA6ZnVuY3Rpb24odGFyZ2V0LHNldHRpbmdzKXtyZXR1cm4gc2V0dGluZ3M/YWpheEV4dGVuZChhamF4RXh0ZW5kKHRhcmdldCxqUXVlcnkuYWpheFNldHRpbmdzKSxzZXR0aW5ncyk6YWpheEV4dGVuZChqUXVlcnkuYWpheFNldHRpbmdzLHRhcmdldCk7fSxhamF4UHJlZmlsdGVyOmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyhwcmVmaWx0ZXJzKSxhamF4VHJhbnNwb3J0OmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyh0cmFuc3BvcnRzKSxhamF4OmZ1bmN0aW9uKHVybCxvcHRpb25zKXtpZih0eXBlb2YgdXJsPT09Im9iamVjdCIpe29wdGlvbnM9dXJsO3VybD11bmRlZmluZWQ7fQpvcHRpb25zPW9wdGlvbnN8fHt9O3ZhciB0cmFuc3BvcnQsY2FjaGVVUkwscmVzcG9uc2VIZWFkZXJzU3RyaW5nLHJlc3BvbnNlSGVhZGVycyx0aW1lb3V0VGltZXIsdXJsQW5jaG9yLGNvbXBsZXRlZCxmaXJlR2xvYmFscyxpLHVuY2FjaGVkLHM9alF1ZXJ5LmFqYXhTZXR1cCh7fSxvcHRpb25zKSxjYWxsYmFja0NvbnRleHQ9cy5jb250ZXh0fHxzLGdsb2JhbEV2ZW50Q29udGV4dD1zLmNvbnRleHQmJihjYWxsYmFja0NvbnRleHQubm9kZVR5cGV8fGNhbGxiYWNrQ29udGV4dC5qcXVlcnkpP2pRdWVyeShjYWxsYmFja0NvbnRleHQpOmpRdWVyeS5ldmVudCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKSxjb21wbGV0ZURlZmVycmVkPWpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksc3RhdHVzQ29kZT1zLnN0YXR1c0NvZGV8fHt9LHJlcXVlc3RIZWFkZXJzPXt9LHJlcXVlc3RIZWFkZXJzTmFtZXM9e30sc3RyQWJvcnQ9ImNhbmNlbGVkIixqcVhIUj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGtleSl7dmFyIG1hdGNoO2lmKGNvbXBsZXRlZCl7aWYoIXJlc3BvbnNlSGVhZGVycyl7cmVzcG9uc2VIZWFkZXJzPXt9O3doaWxlKChtYXRjaD1yaGVhZGVycy5leGVjKHJlc3BvbnNlSGVhZGVyc1N0cmluZykpKXtyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKV09bWF0Y2hbMl07fX0KbWF0Y2g9cmVzcG9uc2VIZWFkZXJzW2tleS50b0xvd2VyQ2FzZSgpXTt9CnJldHVybiBtYXRjaD09bnVsbD9udWxsOm1hdGNoO30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbXBsZXRlZD9yZXNwb25zZUhlYWRlcnNTdHJpbmc6bnVsbDt9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7aWYoY29tcGxldGVkPT1udWxsKXtuYW1lPXJlcXVlc3RIZWFkZXJzTmFtZXNbbmFtZS50b0xvd2VyQ2FzZSgpXT1yZXF1ZXN0SGVhZGVyc05hbWVzW25hbWUudG9Mb3dlckNhc2UoKV18fG5hbWU7cmVxdWVzdEhlYWRlcnNbbmFtZV09dmFsdWU7fQpyZXR1cm4gdGhpczt9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24odHlwZSl7aWYoY29tcGxldGVkPT1udWxsKXtzLm1pbWVUeXBlPXR5cGU7fQpyZXR1cm4gdGhpczt9LHN0YXR1c0NvZGU6ZnVuY3Rpb24obWFwKXt2YXIgY29kZTtpZihtYXApe2lmKGNvbXBsZXRlZCl7anFYSFIuYWx3YXlzKG1hcFtqcVhIUi5zdGF0dXNdKTt9ZWxzZXtmb3IoY29kZSBpbiBtYXApe3N0YXR1c0NvZGVbY29kZV09W3N0YXR1c0NvZGVbY29kZV0sbWFwW2NvZGVdXTt9fX0KcmV0dXJuIHRoaXM7fSxhYm9ydDpmdW5jdGlvbihzdGF0dXNUZXh0KXt2YXIgZmluYWxUZXh0PXN0YXR1c1RleHR8fHN0ckFib3J0O2lmKHRyYW5zcG9ydCl7dHJhbnNwb3J0LmFib3J0KGZpbmFsVGV4dCk7fQpkb25lKDAsZmluYWxUZXh0KTtyZXR1cm4gdGhpczt9fTtkZWZlcnJlZC5wcm9taXNlKGpxWEhSKTtzLnVybD0oKHVybHx8cy51cmx8fGxvY2F0aW9uLmhyZWYpKyIiKS5yZXBsYWNlKHJwcm90b2NvbCxsb2NhdGlvbi5wcm90b2NvbCsiLy8iKTtzLnR5cGU9b3B0aW9ucy5tZXRob2R8fG9wdGlvbnMudHlwZXx8cy5tZXRob2R8fHMudHlwZTtzLmRhdGFUeXBlcz0ocy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO2lmKHMuY3Jvc3NEb21haW49PW51bGwpe3VybEFuY2hvcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e3VybEFuY2hvci5ocmVmPXMudXJsO3VybEFuY2hvci5ocmVmPXVybEFuY2hvci5ocmVmO3MuY3Jvc3NEb21haW49b3JpZ2luQW5jaG9yLnByb3RvY29sKyIvLyIrb3JpZ2luQW5jaG9yLmhvc3QhPT11cmxBbmNob3IucHJvdG9jb2wrIi8vIit1cmxBbmNob3IuaG9zdDt9Y2F0Y2goZSl7cy5jcm9zc0RvbWFpbj10cnVlO319CmlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmdHlwZW9mIHMuZGF0YSE9PSJzdHJpbmciKXtzLmRhdGE9alF1ZXJ5LnBhcmFtKHMuZGF0YSxzLnRyYWRpdGlvbmFsKTt9Cmluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHByZWZpbHRlcnMscyxvcHRpb25zLGpxWEhSKTtpZihjb21wbGV0ZWQpe3JldHVybiBqcVhIUjt9CmZpcmVHbG9iYWxzPWpRdWVyeS5ldmVudCYmcy5nbG9iYWw7aWYoZmlyZUdsb2JhbHMmJmpRdWVyeS5hY3RpdmUrKz09PTApe2pRdWVyeS5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKTt9CnMudHlwZT1zLnR5cGUudG9VcHBlckNhc2UoKTtzLmhhc0NvbnRlbnQ9IXJub0NvbnRlbnQudGVzdChzLnR5cGUpO2NhY2hlVVJMPXMudXJsLnJlcGxhY2Uocmhhc2gsIiIpO2lmKCFzLmhhc0NvbnRlbnQpe3VuY2FjaGVkPXMudXJsLnNsaWNlKGNhY2hlVVJMLmxlbmd0aCk7aWYocy5kYXRhJiYocy5wcm9jZXNzRGF0YXx8dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciKSl7Y2FjaGVVUkwrPShycXVlcnkudGVzdChjYWNoZVVSTCk/IiYiOiI/Iikrcy5kYXRhO2RlbGV0ZSBzLmRhdGE7fQppZihzLmNhY2hlPT09ZmFsc2Upe2NhY2hlVVJMPWNhY2hlVVJMLnJlcGxhY2UocmFudGlDYWNoZSwiJDEiKTt1bmNhY2hlZD0ocnF1ZXJ5LnRlc3QoY2FjaGVVUkwpPyImIjoiPyIpKyJfPSIrKG5vbmNlKyspK3VuY2FjaGVkO30Kcy51cmw9Y2FjaGVVUkwrdW5jYWNoZWQ7fWVsc2UgaWYocy5kYXRhJiZzLnByb2Nlc3NEYXRhJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCl7cy5kYXRhPXMuZGF0YS5yZXBsYWNlKHIyMCwiKyIpO30KaWYocy5pZk1vZGlmaWVkKXtpZihqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGpRdWVyeS5sYXN0TW9kaWZpZWRbY2FjaGVVUkxdKTt9CmlmKGpRdWVyeS5ldGFnW2NhY2hlVVJMXSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsalF1ZXJ5LmV0YWdbY2FjaGVVUkxdKTt9fQppZihzLmRhdGEmJnMuaGFzQ29udGVudCYmcy5jb250ZW50VHlwZSE9PWZhbHNlfHxvcHRpb25zLmNvbnRlbnRUeXBlKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHMuY29udGVudFR5cGUpO30KanFYSFIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixzLmRhdGFUeXBlc1swXSYmcy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXT9zLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dKwoocy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIithbGxUeXBlcysiOyBxPTAuMDEiOiIiKTpzLmFjY2VwdHNbIioiXSk7Zm9yKGkgaW4gcy5oZWFkZXJzKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKGkscy5oZWFkZXJzW2ldKTt9CmlmKHMuYmVmb3JlU2VuZCYmKHMuYmVmb3JlU2VuZC5jYWxsKGNhbGxiYWNrQ29udGV4dCxqcVhIUixzKT09PWZhbHNlfHxjb21wbGV0ZWQpKXtyZXR1cm4ganFYSFIuYWJvcnQoKTt9CnN0ckFib3J0PSJhYm9ydCI7Y29tcGxldGVEZWZlcnJlZC5hZGQocy5jb21wbGV0ZSk7anFYSFIuZG9uZShzLnN1Y2Nlc3MpO2pxWEhSLmZhaWwocy5lcnJvcik7dHJhbnNwb3J0PWluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHRyYW5zcG9ydHMscyxvcHRpb25zLGpxWEhSKTtpZighdHJhbnNwb3J0KXtkb25lKC0xLCJObyBUcmFuc3BvcnQiKTt9ZWxzZXtqcVhIUi5yZWFkeVN0YXRlPTE7aWYoZmlyZUdsb2JhbHMpe2dsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCJhamF4U2VuZCIsW2pxWEhSLHNdKTt9CmlmKGNvbXBsZXRlZCl7cmV0dXJuIGpxWEhSO30KaWYocy5hc3luYyYmcy50aW1lb3V0PjApe3RpbWVvdXRUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2pxWEhSLmFib3J0KCJ0aW1lb3V0Iik7fSxzLnRpbWVvdXQpO30KdHJ5e2NvbXBsZXRlZD1mYWxzZTt0cmFuc3BvcnQuc2VuZChyZXF1ZXN0SGVhZGVycyxkb25lKTt9Y2F0Y2goZSl7aWYoY29tcGxldGVkKXt0aHJvdyBlO30KZG9uZSgtMSxlKTt9fQpmdW5jdGlvbiBkb25lKHN0YXR1cyxuYXRpdmVTdGF0dXNUZXh0LHJlc3BvbnNlcyxoZWFkZXJzKXt2YXIgaXNTdWNjZXNzLHN1Y2Nlc3MsZXJyb3IscmVzcG9uc2UsbW9kaWZpZWQsc3RhdHVzVGV4dD1uYXRpdmVTdGF0dXNUZXh0O2lmKGNvbXBsZXRlZCl7cmV0dXJuO30KY29tcGxldGVkPXRydWU7aWYodGltZW91dFRpbWVyKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcik7fQp0cmFuc3BvcnQ9dW5kZWZpbmVkO3Jlc3BvbnNlSGVhZGVyc1N0cmluZz1oZWFkZXJzfHwiIjtqcVhIUi5yZWFkeVN0YXRlPXN0YXR1cz4wPzQ6MDtpc1N1Y2Nlc3M9c3RhdHVzPj0yMDAmJnN0YXR1czwzMDB8fHN0YXR1cz09PTMwNDtpZihyZXNwb25zZXMpe3Jlc3BvbnNlPWFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpO30KcmVzcG9uc2U9YWpheENvbnZlcnQocyxyZXNwb25zZSxqcVhIUixpc1N1Y2Nlc3MpO2lmKGlzU3VjY2Vzcyl7aWYocy5pZk1vZGlmaWVkKXttb2RpZmllZD1qcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpO2lmKG1vZGlmaWVkKXtqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXT1tb2RpZmllZDt9Cm1vZGlmaWVkPWpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIik7aWYobW9kaWZpZWQpe2pRdWVyeS5ldGFnW2NhY2hlVVJMXT1tb2RpZmllZDt9fQppZihzdGF0dXM9PT0yMDR8fHMudHlwZT09PSJIRUFEIil7c3RhdHVzVGV4dD0ibm9jb250ZW50Ijt9ZWxzZSBpZihzdGF0dXM9PT0zMDQpe3N0YXR1c1RleHQ9Im5vdG1vZGlmaWVkIjt9ZWxzZXtzdGF0dXNUZXh0PXJlc3BvbnNlLnN0YXRlO3N1Y2Nlc3M9cmVzcG9uc2UuZGF0YTtlcnJvcj1yZXNwb25zZS5lcnJvcjtpc1N1Y2Nlc3M9IWVycm9yO319ZWxzZXtlcnJvcj1zdGF0dXNUZXh0O2lmKHN0YXR1c3x8IXN0YXR1c1RleHQpe3N0YXR1c1RleHQ9ImVycm9yIjtpZihzdGF0dXM8MCl7c3RhdHVzPTA7fX19CmpxWEhSLnN0YXR1cz1zdGF0dXM7anFYSFIuc3RhdHVzVGV4dD0obmF0aXZlU3RhdHVzVGV4dHx8c3RhdHVzVGV4dCkrIiI7aWYoaXNTdWNjZXNzKXtkZWZlcnJlZC5yZXNvbHZlV2l0aChjYWxsYmFja0NvbnRleHQsW3N1Y2Nlc3Msc3RhdHVzVGV4dCxqcVhIUl0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoY2FsbGJhY2tDb250ZXh0LFtqcVhIUixzdGF0dXNUZXh0LGVycm9yXSk7fQpqcVhIUi5zdGF0dXNDb2RlKHN0YXR1c0NvZGUpO3N0YXR1c0NvZGU9dW5kZWZpbmVkO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcihpc1N1Y2Nlc3M/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbanFYSFIscyxpc1N1Y2Nlc3M/c3VjY2VzczplcnJvcl0pO30KY29tcGxldGVEZWZlcnJlZC5maXJlV2l0aChjYWxsYmFja0NvbnRleHQsW2pxWEhSLHN0YXR1c1RleHRdKTtpZihmaXJlR2xvYmFscyl7Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW2pxWEhSLHNdKTtpZighKC0talF1ZXJ5LmFjdGl2ZSkpe2pRdWVyeS5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpO319fQpyZXR1cm4ganFYSFI7fSxnZXRKU09OOmZ1bmN0aW9uKHVybCxkYXRhLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsZGF0YSxjYWxsYmFjaywianNvbiIpO30sZ2V0U2NyaXB0OmZ1bmN0aW9uKHVybCxjYWxsYmFjayl7cmV0dXJuIGpRdWVyeS5nZXQodXJsLHVuZGVmaW5lZCxjYWxsYmFjaywic2NyaXB0Iik7fX0pO2pRdWVyeS5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGksbWV0aG9kKXtqUXVlcnlbbWV0aG9kXT1mdW5jdGlvbih1cmwsZGF0YSxjYWxsYmFjayx0eXBlKXtpZihpc0Z1bmN0aW9uKGRhdGEpKXt0eXBlPXR5cGV8fGNhbGxiYWNrO2NhbGxiYWNrPWRhdGE7ZGF0YT11bmRlZmluZWQ7fQpyZXR1cm4galF1ZXJ5LmFqYXgoalF1ZXJ5LmV4dGVuZCh7dXJsOnVybCx0eXBlOm1ldGhvZCxkYXRhVHlwZTp0eXBlLGRhdGE6ZGF0YSxzdWNjZXNzOmNhbGxiYWNrfSxqUXVlcnkuaXNQbGFpbk9iamVjdCh1cmwpJiZ1cmwpKTt9O30pO2pRdWVyeS5fZXZhbFVybD1mdW5jdGlvbih1cmwpe3JldHVybiBqUXVlcnkuYWpheCh7dXJsOnVybCx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOnRydWUsYXN5bmM6ZmFsc2UsZ2xvYmFsOmZhbHNlLCJ0aHJvd3MiOnRydWV9KTt9O2pRdWVyeS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oaHRtbCl7dmFyIHdyYXA7aWYodGhpc1swXSl7aWYoaXNGdW5jdGlvbihodG1sKSl7aHRtbD1odG1sLmNhbGwodGhpc1swXSk7fQp3cmFwPWpRdWVyeShodG1sLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7aWYodGhpc1swXS5wYXJlbnROb2RlKXt3cmFwLmluc2VydEJlZm9yZSh0aGlzWzBdKTt9CndyYXAubWFwKGZ1bmN0aW9uKCl7dmFyIGVsZW09dGhpczt3aGlsZShlbGVtLmZpcnN0RWxlbWVudENoaWxkKXtlbGVtPWVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7fQpyZXR1cm4gZWxlbTt9KS5hcHBlbmQodGhpcyk7fQpyZXR1cm4gdGhpczt9LHdyYXBJbm5lcjpmdW5jdGlvbihodG1sKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeSh0aGlzKS53cmFwSW5uZXIoaHRtbC5jYWxsKHRoaXMsaSkpO30pO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxmPWpRdWVyeSh0aGlzKSxjb250ZW50cz1zZWxmLmNvbnRlbnRzKCk7aWYoY29udGVudHMubGVuZ3RoKXtjb250ZW50cy53cmFwQWxsKGh0bWwpO31lbHNle3NlbGYuYXBwZW5kKGh0bWwpO319KTt9LHdyYXA6ZnVuY3Rpb24oaHRtbCl7dmFyIGh0bWxJc0Z1bmN0aW9uPWlzRnVuY3Rpb24oaHRtbCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkodGhpcykud3JhcEFsbChodG1sSXNGdW5jdGlvbj9odG1sLmNhbGwodGhpcyxpKTpodG1sKTt9KTt9LHVud3JhcDpmdW5jdGlvbihzZWxlY3Rvcil7dGhpcy5wYXJlbnQoc2VsZWN0b3IpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKTt9KTtyZXR1cm4gdGhpczt9fSk7alF1ZXJ5LmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZShlbGVtKTt9O2pRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlbGVtKXtyZXR1cm4hIShlbGVtLm9mZnNldFdpZHRofHxlbGVtLm9mZnNldEhlaWdodHx8ZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7fTtqUXVlcnkuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO31jYXRjaChlKXt9fTt2YXIgeGhyU3VjY2Vzc1N0YXR1cz17MDoyMDAsMTIyMzoyMDR9LHhoclN1cHBvcnRlZD1qUXVlcnkuYWpheFNldHRpbmdzLnhocigpO3N1cHBvcnQuY29ycz0hIXhoclN1cHBvcnRlZCYmKCJ3aXRoQ3JlZGVudGlhbHMiaW4geGhyU3VwcG9ydGVkKTtzdXBwb3J0LmFqYXg9eGhyU3VwcG9ydGVkPSEheGhyU3VwcG9ydGVkO2pRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBjYWxsYmFjayxlcnJvckNhbGxiYWNrO2lmKHN1cHBvcnQuY29yc3x8eGhyU3VwcG9ydGVkJiYhb3B0aW9ucy5jcm9zc0RvbWFpbil7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaGVhZGVycyxjb21wbGV0ZSl7dmFyIGkseGhyPW9wdGlvbnMueGhyKCk7eGhyLm9wZW4ob3B0aW9ucy50eXBlLG9wdGlvbnMudXJsLG9wdGlvbnMuYXN5bmMsb3B0aW9ucy51c2VybmFtZSxvcHRpb25zLnBhc3N3b3JkKTtpZihvcHRpb25zLnhockZpZWxkcyl7Zm9yKGkgaW4gb3B0aW9ucy54aHJGaWVsZHMpe3hocltpXT1vcHRpb25zLnhockZpZWxkc1tpXTt9fQppZihvcHRpb25zLm1pbWVUeXBlJiZ4aHIub3ZlcnJpZGVNaW1lVHlwZSl7eGhyLm92ZXJyaWRlTWltZVR5cGUob3B0aW9ucy5taW1lVHlwZSk7fQppZighb3B0aW9ucy5jcm9zc0RvbWFpbiYmIWhlYWRlcnNbIlgtUmVxdWVzdGVkLVdpdGgiXSl7aGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCI7fQpmb3IoaSBpbiBoZWFkZXJzKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihpLGhlYWRlcnNbaV0pO30KY2FsbGJhY2s9ZnVuY3Rpb24odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrPWVycm9yQ2FsbGJhY2s9eGhyLm9ubG9hZD14aHIub25lcnJvcj14aHIub25hYm9ydD14aHIub250aW1lb3V0PXhoci5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtpZih0eXBlPT09ImFib3J0Iil7eGhyLmFib3J0KCk7fWVsc2UgaWYodHlwZT09PSJlcnJvciIpe2lmKHR5cGVvZiB4aHIuc3RhdHVzIT09Im51bWJlciIpe2NvbXBsZXRlKDAsImVycm9yIik7fWVsc2V7Y29tcGxldGUoeGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCk7fX1lbHNle2NvbXBsZXRlKHhoclN1Y2Nlc3NTdGF0dXNbeGhyLnN0YXR1c118fHhoci5zdGF0dXMseGhyLnN0YXR1c1RleHQsKHhoci5yZXNwb25zZVR5cGV8fCJ0ZXh0IikhPT0idGV4dCJ8fHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0IT09InN0cmluZyI/e2JpbmFyeTp4aHIucmVzcG9uc2V9Ont0ZXh0Onhoci5yZXNwb25zZVRleHR9LHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7fX19O307eGhyLm9ubG9hZD1jYWxsYmFjaygpO2Vycm9yQ2FsbGJhY2s9eGhyLm9uZXJyb3I9eGhyLm9udGltZW91dD1jYWxsYmFjaygiZXJyb3IiKTtpZih4aHIub25hYm9ydCE9PXVuZGVmaW5lZCl7eGhyLm9uYWJvcnQ9ZXJyb3JDYWxsYmFjazt9ZWxzZXt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeGhyLnJlYWR5U3RhdGU9PT00KXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGNhbGxiYWNrKXtlcnJvckNhbGxiYWNrKCk7fX0pO319O30KY2FsbGJhY2s9Y2FsbGJhY2soImFib3J0Iik7dHJ5e3hoci5zZW5kKG9wdGlvbnMuaGFzQ29udGVudCYmb3B0aW9ucy5kYXRhfHxudWxsKTt9Y2F0Y2goZSl7aWYoY2FsbGJhY2spe3Rocm93IGU7fX19LGFib3J0OmZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX19O319KTtqUXVlcnkuYWpheFByZWZpbHRlcihmdW5jdGlvbihzKXtpZihzLmNyb3NzRG9tYWluKXtzLmNvbnRlbnRzLnNjcmlwdD1mYWxzZTt9fSk7alF1ZXJ5LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIrImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbih0ZXh0KXtqUXVlcnkuZ2xvYmFsRXZhbCh0ZXh0KTtyZXR1cm4gdGV4dDt9fX0pO2pRdWVyeS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY2FjaGU9PT11bmRlZmluZWQpe3MuY2FjaGU9ZmFsc2U7fQppZihzLmNyb3NzRG9tYWluKXtzLnR5cGU9IkdFVCI7fX0pO2pRdWVyeS5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW4pe3ZhciBzY3JpcHQsY2FsbGJhY2s7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oXyxjb21wbGV0ZSl7c2NyaXB0PWpRdWVyeSgiPHNjcmlwdD4iKS5wcm9wKHtjaGFyc2V0OnMuc2NyaXB0Q2hhcnNldCxzcmM6cy51cmx9KS5vbigibG9hZCBlcnJvciIsY2FsbGJhY2s9ZnVuY3Rpb24oZXZ0KXtzY3JpcHQucmVtb3ZlKCk7Y2FsbGJhY2s9bnVsbDtpZihldnQpe2NvbXBsZXRlKGV2dC50eXBlPT09ImVycm9yIj80MDQ6MjAwLGV2dC50eXBlKTt9fSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRbMF0pO30sYWJvcnQ6ZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fX07fX0pO3ZhciBvbGRDYWxsYmFja3M9W10scmpzb25wPS8oPSlcPyg/PSZ8JCl8XD9cPy87alF1ZXJ5LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGNhbGxiYWNrPW9sZENhbGxiYWNrcy5wb3AoKXx8KGpRdWVyeS5leHBhbmRvKyJfIisobm9uY2UrKykpO3RoaXNbY2FsbGJhY2tdPXRydWU7cmV0dXJuIGNhbGxiYWNrO319KTtqUXVlcnkuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24ocyxvcmlnaW5hbFNldHRpbmdzLGpxWEhSKXt2YXIgY2FsbGJhY2tOYW1lLG92ZXJ3cml0dGVuLHJlc3BvbnNlQ29udGFpbmVyLGpzb25Qcm9wPXMuanNvbnAhPT1mYWxzZSYmKHJqc29ucC50ZXN0KHMudXJsKT8idXJsIjp0eXBlb2Ygcy5kYXRhPT09InN0cmluZyImJihzLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik9PT0wJiZyanNvbnAudGVzdChzLmRhdGEpJiYiZGF0YSIpO2lmKGpzb25Qcm9wfHxzLmRhdGFUeXBlc1swXT09PSJqc29ucCIpe2NhbGxiYWNrTmFtZT1zLmpzb25wQ2FsbGJhY2s9aXNGdW5jdGlvbihzLmpzb25wQ2FsbGJhY2spP3MuanNvbnBDYWxsYmFjaygpOnMuanNvbnBDYWxsYmFjaztpZihqc29uUHJvcCl7c1tqc29uUHJvcF09c1tqc29uUHJvcF0ucmVwbGFjZShyanNvbnAsIiQxIitjYWxsYmFja05hbWUpO31lbHNlIGlmKHMuanNvbnAhPT1mYWxzZSl7cy51cmwrPShycXVlcnkudGVzdChzLnVybCk/IiYiOiI/Iikrcy5qc29ucCsiPSIrY2FsbGJhY2tOYW1lO30Kcy5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7aWYoIXJlc3BvbnNlQ29udGFpbmVyKXtqUXVlcnkuZXJyb3IoY2FsbGJhY2tOYW1lKyIgd2FzIG5vdCBjYWxsZWQiKTt9CnJldHVybiByZXNwb25zZUNvbnRhaW5lclswXTt9O3MuZGF0YVR5cGVzWzBdPSJqc29uIjtvdmVyd3JpdHRlbj13aW5kb3dbY2FsbGJhY2tOYW1lXTt3aW5kb3dbY2FsbGJhY2tOYW1lXT1mdW5jdGlvbigpe3Jlc3BvbnNlQ29udGFpbmVyPWFyZ3VtZW50czt9O2pxWEhSLmFsd2F5cyhmdW5jdGlvbigpe2lmKG92ZXJ3cml0dGVuPT09dW5kZWZpbmVkKXtqUXVlcnkod2luZG93KS5yZW1vdmVQcm9wKGNhbGxiYWNrTmFtZSk7fWVsc2V7d2luZG93W2NhbGxiYWNrTmFtZV09b3ZlcndyaXR0ZW47fQppZihzW2NhbGxiYWNrTmFtZV0pe3MuanNvbnBDYWxsYmFjaz1vcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7b2xkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2tOYW1lKTt9CmlmKHJlc3BvbnNlQ29udGFpbmVyJiZpc0Z1bmN0aW9uKG92ZXJ3cml0dGVuKSl7b3ZlcndyaXR0ZW4ocmVzcG9uc2VDb250YWluZXJbMF0pO30KcmVzcG9uc2VDb250YWluZXI9b3ZlcndyaXR0ZW49dW5kZWZpbmVkO30pO3JldHVybiJzY3JpcHQiO319KTtzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudD0oZnVuY3Rpb24oKXt2YXIgYm9keT1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLmJvZHk7Ym9keS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IjtyZXR1cm4gYm9keS5jaGlsZE5vZGVzLmxlbmd0aD09PTI7fSkoKTtqUXVlcnkucGFyc2VIVE1MPWZ1bmN0aW9uKGRhdGEsY29udGV4dCxrZWVwU2NyaXB0cyl7aWYodHlwZW9mIGRhdGEhPT0ic3RyaW5nIil7cmV0dXJuW107fQppZih0eXBlb2YgY29udGV4dD09PSJib29sZWFuIil7a2VlcFNjcmlwdHM9Y29udGV4dDtjb250ZXh0PWZhbHNlO30KdmFyIGJhc2UscGFyc2VkLHNjcmlwdHM7aWYoIWNvbnRleHQpe2lmKHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50KXtjb250ZXh0PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7YmFzZT1jb250ZXh0LmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtiYXNlLmhyZWY9ZG9jdW1lbnQubG9jYXRpb24uaHJlZjtjb250ZXh0LmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7fWVsc2V7Y29udGV4dD1kb2N1bWVudDt9fQpwYXJzZWQ9cnNpbmdsZVRhZy5leGVjKGRhdGEpO3NjcmlwdHM9IWtlZXBTY3JpcHRzJiZbXTtpZihwYXJzZWQpe3JldHVybltjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV07fQpwYXJzZWQ9YnVpbGRGcmFnbWVudChbZGF0YV0sY29udGV4dCxzY3JpcHRzKTtpZihzY3JpcHRzJiZzY3JpcHRzLmxlbmd0aCl7alF1ZXJ5KHNjcmlwdHMpLnJlbW92ZSgpO30KcmV0dXJuIGpRdWVyeS5tZXJnZShbXSxwYXJzZWQuY2hpbGROb2Rlcyk7fTtqUXVlcnkuZm4ubG9hZD1mdW5jdGlvbih1cmwscGFyYW1zLGNhbGxiYWNrKXt2YXIgc2VsZWN0b3IsdHlwZSxyZXNwb25zZSxzZWxmPXRoaXMsb2ZmPXVybC5pbmRleE9mKCIgIik7aWYob2ZmPi0xKXtzZWxlY3Rvcj1zdHJpcEFuZENvbGxhcHNlKHVybC5zbGljZShvZmYpKTt1cmw9dXJsLnNsaWNlKDAsb2ZmKTt9CmlmKGlzRnVuY3Rpb24ocGFyYW1zKSl7Y2FsbGJhY2s9cGFyYW1zO3BhcmFtcz11bmRlZmluZWQ7fWVsc2UgaWYocGFyYW1zJiZ0eXBlb2YgcGFyYW1zPT09Im9iamVjdCIpe3R5cGU9IlBPU1QiO30KaWYoc2VsZi5sZW5ndGg+MCl7alF1ZXJ5LmFqYXgoe3VybDp1cmwsdHlwZTp0eXBlfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTpwYXJhbXN9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlVGV4dCl7cmVzcG9uc2U9YXJndW1lbnRzO3NlbGYuaHRtbChzZWxlY3Rvcj9qUXVlcnkoIjxkaXY+IikuYXBwZW5kKGpRdWVyeS5wYXJzZUhUTUwocmVzcG9uc2VUZXh0KSkuZmluZChzZWxlY3Rvcik6cmVzcG9uc2VUZXh0KTt9KS5hbHdheXMoY2FsbGJhY2smJmZ1bmN0aW9uKGpxWEhSLHN0YXR1cyl7c2VsZi5lYWNoKGZ1bmN0aW9uKCl7Y2FsbGJhY2suYXBwbHkodGhpcyxyZXNwb25zZXx8W2pxWEhSLnJlc3BvbnNlVGV4dCxzdGF0dXMsanFYSFJdKTt9KTt9KTt9CnJldHVybiB0aGlzO307alF1ZXJ5LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihpLHR5cGUpe2pRdWVyeS5mblt0eXBlXT1mdW5jdGlvbihmbil7cmV0dXJuIHRoaXMub24odHlwZSxmbik7fTt9KTtqUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGVsZW0pe3JldHVybiBqUXVlcnkuZ3JlcChqUXVlcnkudGltZXJzLGZ1bmN0aW9uKGZuKXtyZXR1cm4gZWxlbT09PWZuLmVsZW07fSkubGVuZ3RoO307alF1ZXJ5Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGVsZW0sb3B0aW9ucyxpKXt2YXIgY3VyUG9zaXRpb24sY3VyTGVmdCxjdXJDU1NUb3AsY3VyVG9wLGN1ck9mZnNldCxjdXJDU1NMZWZ0LGNhbGN1bGF0ZVBvc2l0aW9uLHBvc2l0aW9uPWpRdWVyeS5jc3MoZWxlbSwicG9zaXRpb24iKSxjdXJFbGVtPWpRdWVyeShlbGVtKSxwcm9wcz17fTtpZihwb3NpdGlvbj09PSJzdGF0aWMiKXtlbGVtLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7fQpjdXJPZmZzZXQ9Y3VyRWxlbS5vZmZzZXQoKTtjdXJDU1NUb3A9alF1ZXJ5LmNzcyhlbGVtLCJ0b3AiKTtjdXJDU1NMZWZ0PWpRdWVyeS5jc3MoZWxlbSwibGVmdCIpO2NhbGN1bGF0ZVBvc2l0aW9uPShwb3NpdGlvbj09PSJhYnNvbHV0ZSJ8fHBvc2l0aW9uPT09ImZpeGVkIikmJihjdXJDU1NUb3ArY3VyQ1NTTGVmdCkuaW5kZXhPZigiYXV0byIpPi0xO2lmKGNhbGN1bGF0ZVBvc2l0aW9uKXtjdXJQb3NpdGlvbj1jdXJFbGVtLnBvc2l0aW9uKCk7Y3VyVG9wPWN1clBvc2l0aW9uLnRvcDtjdXJMZWZ0PWN1clBvc2l0aW9uLmxlZnQ7fWVsc2V7Y3VyVG9wPXBhcnNlRmxvYXQoY3VyQ1NTVG9wKXx8MDtjdXJMZWZ0PXBhcnNlRmxvYXQoY3VyQ1NTTGVmdCl8fDA7fQppZihpc0Z1bmN0aW9uKG9wdGlvbnMpKXtvcHRpb25zPW9wdGlvbnMuY2FsbChlbGVtLGksalF1ZXJ5LmV4dGVuZCh7fSxjdXJPZmZzZXQpKTt9CmlmKG9wdGlvbnMudG9wIT1udWxsKXtwcm9wcy50b3A9KG9wdGlvbnMudG9wLWN1ck9mZnNldC50b3ApK2N1clRvcDt9CmlmKG9wdGlvbnMubGVmdCE9bnVsbCl7cHJvcHMubGVmdD0ob3B0aW9ucy5sZWZ0LWN1ck9mZnNldC5sZWZ0KStjdXJMZWZ0O30KaWYoInVzaW5nImluIG9wdGlvbnMpe29wdGlvbnMudXNpbmcuY2FsbChlbGVtLHByb3BzKTt9ZWxzZXtjdXJFbGVtLmNzcyhwcm9wcyk7fX19O2pRdWVyeS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihvcHRpb25zKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gb3B0aW9ucz09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkub2Zmc2V0LnNldE9mZnNldCh0aGlzLG9wdGlvbnMsaSk7fSk7fQp2YXIgcmVjdCx3aW4sZWxlbT10aGlzWzBdO2lmKCFlbGVtKXtyZXR1cm47fQppZighZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl7cmV0dXJue3RvcDowLGxlZnQ6MH07fQpyZWN0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7d2luPWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm57dG9wOnJlY3QudG9wK3dpbi5wYWdlWU9mZnNldCxsZWZ0OnJlY3QubGVmdCt3aW4ucGFnZVhPZmZzZXR9O30scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJuO30KdmFyIG9mZnNldFBhcmVudCxvZmZzZXQsZG9jLGVsZW09dGhpc1swXSxwYXJlbnRPZmZzZXQ9e3RvcDowLGxlZnQ6MH07aWYoalF1ZXJ5LmNzcyhlbGVtLCJwb3NpdGlvbiIpPT09ImZpeGVkIil7b2Zmc2V0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7fWVsc2V7b2Zmc2V0PXRoaXMub2Zmc2V0KCk7ZG9jPWVsZW0ub3duZXJEb2N1bWVudDtvZmZzZXRQYXJlbnQ9ZWxlbS5vZmZzZXRQYXJlbnR8fGRvYy5kb2N1bWVudEVsZW1lbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiYob2Zmc2V0UGFyZW50PT09ZG9jLmJvZHl8fG9mZnNldFBhcmVudD09PWRvYy5kb2N1bWVudEVsZW1lbnQpJiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7fQppZihvZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudCE9PWVsZW0mJm9mZnNldFBhcmVudC5ub2RlVHlwZT09PTEpe3BhcmVudE9mZnNldD1qUXVlcnkob2Zmc2V0UGFyZW50KS5vZmZzZXQoKTtwYXJlbnRPZmZzZXQudG9wKz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyVG9wV2lkdGgiLHRydWUpO3BhcmVudE9mZnNldC5sZWZ0Kz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyTGVmdFdpZHRoIix0cnVlKTt9fQpyZXR1cm57dG9wOm9mZnNldC50b3AtcGFyZW50T2Zmc2V0LnRvcC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpblRvcCIsdHJ1ZSksbGVmdDpvZmZzZXQubGVmdC1wYXJlbnRPZmZzZXQubGVmdC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpbkxlZnQiLHRydWUpfTt9LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBvZmZzZXRQYXJlbnQ9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDt9CnJldHVybiBvZmZzZXRQYXJlbnR8fGRvY3VtZW50RWxlbWVudDt9KTt9fSk7alF1ZXJ5LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24obWV0aG9kLHByb3Ape3ZhciB0b3A9InBhZ2VZT2Zmc2V0Ij09PXByb3A7alF1ZXJ5LmZuW21ldGhvZF09ZnVuY3Rpb24odmFsKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxtZXRob2QsdmFsKXt2YXIgd2luO2lmKGlzV2luZG93KGVsZW0pKXt3aW49ZWxlbTt9ZWxzZSBpZihlbGVtLm5vZGVUeXBlPT09OSl7d2luPWVsZW0uZGVmYXVsdFZpZXc7fQppZih2YWw9PT11bmRlZmluZWQpe3JldHVybiB3aW4/d2luW3Byb3BdOmVsZW1bbWV0aG9kXTt9CmlmKHdpbil7d2luLnNjcm9sbFRvKCF0b3A/dmFsOndpbi5wYWdlWE9mZnNldCx0b3A/dmFsOndpbi5wYWdlWU9mZnNldCk7fWVsc2V7ZWxlbVttZXRob2RdPXZhbDt9fSxtZXRob2QsdmFsLGFyZ3VtZW50cy5sZW5ndGgpO307fSk7alF1ZXJ5LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oaSxwcm9wKXtqUXVlcnkuY3NzSG9va3NbcHJvcF09YWRkR2V0SG9va0lmKHN1cHBvcnQucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7Y29tcHV0ZWQ9Y3VyQ1NTKGVsZW0scHJvcCk7cmV0dXJuIHJudW1ub25weC50ZXN0KGNvbXB1dGVkKT9qUXVlcnkoZWxlbSkucG9zaXRpb24oKVtwcm9wXSsicHgiOmNvbXB1dGVkO319KTt9KTtqUXVlcnkuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG5hbWUsdHlwZSl7alF1ZXJ5LmVhY2goe3BhZGRpbmc6ImlubmVyIituYW1lLGNvbnRlbnQ6dHlwZSwiIjoib3V0ZXIiK25hbWV9LGZ1bmN0aW9uKGRlZmF1bHRFeHRyYSxmdW5jTmFtZSl7alF1ZXJ5LmZuW2Z1bmNOYW1lXT1mdW5jdGlvbihtYXJnaW4sdmFsdWUpe3ZhciBjaGFpbmFibGU9YXJndW1lbnRzLmxlbmd0aCYmKGRlZmF1bHRFeHRyYXx8dHlwZW9mIG1hcmdpbiE9PSJib29sZWFuIiksZXh0cmE9ZGVmYXVsdEV4dHJhfHwobWFyZ2luPT09dHJ1ZXx8dmFsdWU9PT10cnVlPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSx0eXBlLHZhbHVlKXt2YXIgZG9jO2lmKGlzV2luZG93KGVsZW0pKXtyZXR1cm4gZnVuY05hbWUuaW5kZXhPZigib3V0ZXIiKT09PTA/ZWxlbVsiaW5uZXIiK25hbWVdOmVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK25hbWVdO30KaWYoZWxlbS5ub2RlVHlwZT09PTkpe2RvYz1lbGVtLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gTWF0aC5tYXgoZWxlbS5ib2R5WyJzY3JvbGwiK25hbWVdLGRvY1sic2Nyb2xsIituYW1lXSxlbGVtLmJvZHlbIm9mZnNldCIrbmFtZV0sZG9jWyJvZmZzZXQiK25hbWVdLGRvY1siY2xpZW50IituYW1lXSk7fQpyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LmNzcyhlbGVtLHR5cGUsZXh0cmEpOmpRdWVyeS5zdHlsZShlbGVtLHR5cGUsdmFsdWUsZXh0cmEpO30sdHlwZSxjaGFpbmFibGU/bWFyZ2luOnVuZGVmaW5lZCxjaGFpbmFibGUpO307fSk7fSk7alF1ZXJ5LmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG5hbWUpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihkYXRhLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24obmFtZSxudWxsLGRhdGEsZm4pOnRoaXMudHJpZ2dlcihuYW1lKTt9O30pO2pRdWVyeS5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGZuT3Zlcixmbk91dCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihmbk92ZXIpLm1vdXNlbGVhdmUoZm5PdXR8fGZuT3Zlcik7fX0pO2pRdWVyeS5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24odHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsbnVsbCxkYXRhLGZuKTt9LHVuYmluZDpmdW5jdGlvbih0eXBlcyxmbil7cmV0dXJuIHRoaXMub2ZmKHR5cGVzLG51bGwsZm4pO30sZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoc2VsZWN0b3IsIioqIik6dGhpcy5vZmYodHlwZXMsc2VsZWN0b3J8fCIqKiIsZm4pO319KTtqUXVlcnkucHJveHk9ZnVuY3Rpb24oZm4sY29udGV4dCl7dmFyIHRtcCxhcmdzLHByb3h5O2lmKHR5cGVvZiBjb250ZXh0PT09InN0cmluZyIpe3RtcD1mbltjb250ZXh0XTtjb250ZXh0PWZuO2ZuPXRtcDt9CmlmKCFpc0Z1bmN0aW9uKGZuKSl7cmV0dXJuIHVuZGVmaW5lZDt9CmFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMsMik7cHJveHk9ZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkoY29udGV4dHx8dGhpcyxhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTt9O3Byb3h5Lmd1aWQ9Zm4uZ3VpZD1mbi5ndWlkfHxqUXVlcnkuZ3VpZCsrO3JldHVybiBwcm94eTt9O2pRdWVyeS5ob2xkUmVhZHk9ZnVuY3Rpb24oaG9sZCl7aWYoaG9sZCl7alF1ZXJ5LnJlYWR5V2FpdCsrO31lbHNle2pRdWVyeS5yZWFkeSh0cnVlKTt9fTtqUXVlcnkuaXNBcnJheT1BcnJheS5pc0FycmF5O2pRdWVyeS5wYXJzZUpTT049SlNPTi5wYXJzZTtqUXVlcnkubm9kZU5hbWU9bm9kZU5hbWU7alF1ZXJ5LmlzRnVuY3Rpb249aXNGdW5jdGlvbjtqUXVlcnkuaXNXaW5kb3c9aXNXaW5kb3c7alF1ZXJ5LmNhbWVsQ2FzZT1jYW1lbENhc2U7alF1ZXJ5LnR5cGU9dG9UeXBlO2pRdWVyeS5ub3c9RGF0ZS5ub3c7alF1ZXJ5LmlzTnVtZXJpYz1mdW5jdGlvbihvYmope3ZhciB0eXBlPWpRdWVyeS50eXBlKG9iaik7cmV0dXJuKHR5cGU9PT0ibnVtYmVyInx8dHlwZT09PSJzdHJpbmciKSYmIWlzTmFOKG9iai1wYXJzZUZsb2F0KG9iaikpO307aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBqUXVlcnk7fSk7fQp2YXIKX2pRdWVyeT13aW5kb3cualF1ZXJ5LF8kPXdpbmRvdy4kO2pRdWVyeS5ub0NvbmZsaWN0PWZ1bmN0aW9uKGRlZXApe2lmKHdpbmRvdy4kPT09alF1ZXJ5KXt3aW5kb3cuJD1fJDt9CmlmKGRlZXAmJndpbmRvdy5qUXVlcnk9PT1qUXVlcnkpe3dpbmRvdy5qUXVlcnk9X2pRdWVyeTt9CnJldHVybiBqUXVlcnk7fTtpZighbm9HbG9iYWwpe3dpbmRvdy5qUXVlcnk9d2luZG93LiQ9alF1ZXJ5O30KcmV0dXJuIGpRdWVyeTt9KTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5LnVpL2pxdWVyeS11aS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihmYWN0b3J5KXtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsianF1ZXJ5Il0sZmFjdG9yeSk7fWVsc2V7ZmFjdG9yeShqUXVlcnkpO319KGZ1bmN0aW9uKCQpeyQudWk9JC51aXx8e307dmFyIHZlcnNpb249JC51aS52ZXJzaW9uPSIxLjEyLjEiO3ZhciB3aWRnZXRVdWlkPTA7dmFyIHdpZGdldFNsaWNlPUFycmF5LnByb3RvdHlwZS5zbGljZTskLmNsZWFuRGF0YT0oZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKGVsZW1zKXt2YXIgZXZlbnRzLGVsZW0saTtmb3IoaT0wOyhlbGVtPWVsZW1zW2ldKSE9bnVsbDtpKyspe3RyeXtldmVudHM9JC5fZGF0YShlbGVtLCJldmVudHMiKTtpZihldmVudHMmJmV2ZW50cy5yZW1vdmUpeyQoZWxlbSkudHJpZ2dlckhhbmRsZXIoInJlbW92ZSIpO319Y2F0Y2goZSl7fX0Kb3JpZyhlbGVtcyk7fTt9KSgkLmNsZWFuRGF0YSk7JC53aWRnZXQ9ZnVuY3Rpb24obmFtZSxiYXNlLHByb3RvdHlwZSl7dmFyIGV4aXN0aW5nQ29uc3RydWN0b3IsY29uc3RydWN0b3IsYmFzZVByb3RvdHlwZTt2YXIgcHJveGllZFByb3RvdHlwZT17fTt2YXIgbmFtZXNwYWNlPW5hbWUuc3BsaXQoIi4iKVswXTtuYW1lPW5hbWUuc3BsaXQoIi4iKVsxXTt2YXIgZnVsbE5hbWU9bmFtZXNwYWNlKyItIituYW1lO2lmKCFwcm90b3R5cGUpe3Byb3RvdHlwZT1iYXNlO2Jhc2U9JC5XaWRnZXQ7fQppZigkLmlzQXJyYXkocHJvdG90eXBlKSl7cHJvdG90eXBlPSQuZXh0ZW5kLmFwcGx5KG51bGwsW3t9XS5jb25jYXQocHJvdG90eXBlKSk7fQokLmV4cHJbIjoiXVtmdWxsTmFtZS50b0xvd2VyQ2FzZSgpXT1mdW5jdGlvbihlbGVtKXtyZXR1cm4hISQuZGF0YShlbGVtLGZ1bGxOYW1lKTt9OyRbbmFtZXNwYWNlXT0kW25hbWVzcGFjZV18fHt9O2V4aXN0aW5nQ29uc3RydWN0b3I9JFtuYW1lc3BhY2VdW25hbWVdO2NvbnN0cnVjdG9yPSRbbmFtZXNwYWNlXVtuYW1lXT1mdW5jdGlvbihvcHRpb25zLGVsZW1lbnQpe2lmKCF0aGlzLl9jcmVhdGVXaWRnZXQpe3JldHVybiBuZXcgY29uc3RydWN0b3Iob3B0aW9ucyxlbGVtZW50KTt9CmlmKGFyZ3VtZW50cy5sZW5ndGgpe3RoaXMuX2NyZWF0ZVdpZGdldChvcHRpb25zLGVsZW1lbnQpO319OyQuZXh0ZW5kKGNvbnN0cnVjdG9yLGV4aXN0aW5nQ29uc3RydWN0b3Ise3ZlcnNpb246cHJvdG90eXBlLnZlcnNpb24sX3Byb3RvOiQuZXh0ZW5kKHt9LHByb3RvdHlwZSksX2NoaWxkQ29uc3RydWN0b3JzOltdfSk7YmFzZVByb3RvdHlwZT1uZXcgYmFzZSgpO2Jhc2VQcm90b3R5cGUub3B0aW9ucz0kLndpZGdldC5leHRlbmQoe30sYmFzZVByb3RvdHlwZS5vcHRpb25zKTskLmVhY2gocHJvdG90eXBlLGZ1bmN0aW9uKHByb3AsdmFsdWUpe2lmKCEkLmlzRnVuY3Rpb24odmFsdWUpKXtwcm94aWVkUHJvdG90eXBlW3Byb3BdPXZhbHVlO3JldHVybjt9CnByb3hpZWRQcm90b3R5cGVbcHJvcF09KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gX3N1cGVyKCl7cmV0dXJuIGJhc2UucHJvdG90eXBlW3Byb3BdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9CmZ1bmN0aW9uIF9zdXBlckFwcGx5KGFyZ3Mpe3JldHVybiBiYXNlLnByb3RvdHlwZVtwcm9wXS5hcHBseSh0aGlzLGFyZ3MpO30KcmV0dXJuIGZ1bmN0aW9uKCl7dmFyIF9fc3VwZXI9dGhpcy5fc3VwZXI7dmFyIF9fc3VwZXJBcHBseT10aGlzLl9zdXBlckFwcGx5O3ZhciByZXR1cm5WYWx1ZTt0aGlzLl9zdXBlcj1fc3VwZXI7dGhpcy5fc3VwZXJBcHBseT1fc3VwZXJBcHBseTtyZXR1cm5WYWx1ZT12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc3VwZXI9X19zdXBlcjt0aGlzLl9zdXBlckFwcGx5PV9fc3VwZXJBcHBseTtyZXR1cm4gcmV0dXJuVmFsdWU7fTt9KSgpO30pO2NvbnN0cnVjdG9yLnByb3RvdHlwZT0kLndpZGdldC5leHRlbmQoYmFzZVByb3RvdHlwZSx7d2lkZ2V0RXZlbnRQcmVmaXg6ZXhpc3RpbmdDb25zdHJ1Y3Rvcj8oYmFzZVByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeHx8bmFtZSk6bmFtZX0scHJveGllZFByb3RvdHlwZSx7Y29uc3RydWN0b3I6Y29uc3RydWN0b3IsbmFtZXNwYWNlOm5hbWVzcGFjZSx3aWRnZXROYW1lOm5hbWUsd2lkZ2V0RnVsbE5hbWU6ZnVsbE5hbWV9KTtpZihleGlzdGluZ0NvbnN0cnVjdG9yKXskLmVhY2goZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnMsZnVuY3Rpb24oaSxjaGlsZCl7dmFyIGNoaWxkUHJvdG90eXBlPWNoaWxkLnByb3RvdHlwZTskLndpZGdldChjaGlsZFByb3RvdHlwZS5uYW1lc3BhY2UrIi4iK2NoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsY29uc3RydWN0b3IsY2hpbGQuX3Byb3RvKTt9KTtkZWxldGUgZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnM7fWVsc2V7YmFzZS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaChjb25zdHJ1Y3Rvcik7fQokLndpZGdldC5icmlkZ2UobmFtZSxjb25zdHJ1Y3Rvcik7cmV0dXJuIGNvbnN0cnVjdG9yO307JC53aWRnZXQuZXh0ZW5kPWZ1bmN0aW9uKHRhcmdldCl7dmFyIGlucHV0PXdpZGdldFNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3ZhciBpbnB1dEluZGV4PTA7dmFyIGlucHV0TGVuZ3RoPWlucHV0Lmxlbmd0aDt2YXIga2V5O3ZhciB2YWx1ZTtmb3IoO2lucHV0SW5kZXg8aW5wdXRMZW5ndGg7aW5wdXRJbmRleCsrKXtmb3Ioa2V5IGluIGlucHV0W2lucHV0SW5kZXhdKXt2YWx1ZT1pbnB1dFtpbnB1dEluZGV4XVtrZXldO2lmKGlucHV0W2lucHV0SW5kZXhdLmhhc093blByb3BlcnR5KGtleSkmJnZhbHVlIT09dW5kZWZpbmVkKXtpZigkLmlzUGxhaW5PYmplY3QodmFsdWUpKXt0YXJnZXRba2V5XT0kLmlzUGxhaW5PYmplY3QodGFyZ2V0W2tleV0pPyQud2lkZ2V0LmV4dGVuZCh7fSx0YXJnZXRba2V5XSx2YWx1ZSk6JC53aWRnZXQuZXh0ZW5kKHt9LHZhbHVlKTt9ZWxzZXt0YXJnZXRba2V5XT12YWx1ZTt9fX19CnJldHVybiB0YXJnZXQ7fTskLndpZGdldC5icmlkZ2U9ZnVuY3Rpb24obmFtZSxvYmplY3Qpe3ZhciBmdWxsTmFtZT1vYmplY3QucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lfHxuYW1lOyQuZm5bbmFtZV09ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGlzTWV0aG9kQ2FsbD10eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciO3ZhciBhcmdzPXdpZGdldFNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3ZhciByZXR1cm5WYWx1ZT10aGlzO2lmKGlzTWV0aG9kQ2FsbCl7aWYoIXRoaXMubGVuZ3RoJiZvcHRpb25zPT09Imluc3RhbmNlIil7cmV0dXJuVmFsdWU9dW5kZWZpbmVkO31lbHNle3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBtZXRob2RWYWx1ZTt2YXIgaW5zdGFuY2U9JC5kYXRhKHRoaXMsZnVsbE5hbWUpO2lmKG9wdGlvbnM9PT0iaW5zdGFuY2UiKXtyZXR1cm5WYWx1ZT1pbnN0YW5jZTtyZXR1cm4gZmFsc2U7fQppZighaW5zdGFuY2Upe3JldHVybiAkLmVycm9yKCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uICIrbmFtZSsiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyAiKyJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJyIrb3B0aW9ucysiJyIpO30KaWYoISQuaXNGdW5jdGlvbihpbnN0YW5jZVtvcHRpb25zXSl8fG9wdGlvbnMuY2hhckF0KDApPT09Il8iKXtyZXR1cm4gJC5lcnJvcigibm8gc3VjaCBtZXRob2QgJyIrb3B0aW9ucysiJyBmb3IgIituYW1lKyIgd2lkZ2V0IGluc3RhbmNlIik7fQptZXRob2RWYWx1ZT1pbnN0YW5jZVtvcHRpb25zXS5hcHBseShpbnN0YW5jZSxhcmdzKTtpZihtZXRob2RWYWx1ZSE9PWluc3RhbmNlJiZtZXRob2RWYWx1ZSE9PXVuZGVmaW5lZCl7cmV0dXJuVmFsdWU9bWV0aG9kVmFsdWUmJm1ldGhvZFZhbHVlLmpxdWVyeT9yZXR1cm5WYWx1ZS5wdXNoU3RhY2sobWV0aG9kVmFsdWUuZ2V0KCkpOm1ldGhvZFZhbHVlO3JldHVybiBmYWxzZTt9fSk7fX1lbHNle2lmKGFyZ3MubGVuZ3RoKXtvcHRpb25zPSQud2lkZ2V0LmV4dGVuZC5hcHBseShudWxsLFtvcHRpb25zXS5jb25jYXQoYXJncykpO30KdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGluc3RhbmNlPSQuZGF0YSh0aGlzLGZ1bGxOYW1lKTtpZihpbnN0YW5jZSl7aW5zdGFuY2Uub3B0aW9uKG9wdGlvbnN8fHt9KTtpZihpbnN0YW5jZS5faW5pdCl7aW5zdGFuY2UuX2luaXQoKTt9fWVsc2V7JC5kYXRhKHRoaXMsZnVsbE5hbWUsbmV3IG9iamVjdChvcHRpb25zLHRoaXMpKTt9fSk7fQpyZXR1cm4gcmV0dXJuVmFsdWU7fTt9OyQuV2lkZ2V0PWZ1bmN0aW9uKCl7fTskLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnM9W107JC5XaWRnZXQucHJvdG90eXBlPXt3aWRnZXROYW1lOiJ3aWRnZXQiLHdpZGdldEV2ZW50UHJlZml4OiIiLGRlZmF1bHRFbGVtZW50OiI8ZGl2PiIsb3B0aW9uczp7Y2xhc3Nlczp7fSxkaXNhYmxlZDpmYWxzZSxjcmVhdGU6bnVsbH0sX2NyZWF0ZVdpZGdldDpmdW5jdGlvbihvcHRpb25zLGVsZW1lbnQpe2VsZW1lbnQ9JChlbGVtZW50fHx0aGlzLmRlZmF1bHRFbGVtZW50fHx0aGlzKVswXTt0aGlzLmVsZW1lbnQ9JChlbGVtZW50KTt0aGlzLnV1aWQ9d2lkZ2V0VXVpZCsrO3RoaXMuZXZlbnROYW1lc3BhY2U9Ii4iK3RoaXMud2lkZ2V0TmFtZSt0aGlzLnV1aWQ7dGhpcy5iaW5kaW5ncz0kKCk7dGhpcy5ob3ZlcmFibGU9JCgpO3RoaXMuZm9jdXNhYmxlPSQoKTt0aGlzLmNsYXNzZXNFbGVtZW50TG9va3VwPXt9O2lmKGVsZW1lbnQhPT10aGlzKXskLmRhdGEoZWxlbWVudCx0aGlzLndpZGdldEZ1bGxOYW1lLHRoaXMpO3RoaXMuX29uKHRydWUsdGhpcy5lbGVtZW50LHtyZW1vdmU6ZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LnRhcmdldD09PWVsZW1lbnQpe3RoaXMuZGVzdHJveSgpO319fSk7dGhpcy5kb2N1bWVudD0kKGVsZW1lbnQuc3R5bGU/ZWxlbWVudC5vd25lckRvY3VtZW50OmVsZW1lbnQuZG9jdW1lbnR8fGVsZW1lbnQpO3RoaXMud2luZG93PSQodGhpcy5kb2N1bWVudFswXS5kZWZhdWx0Vmlld3x8dGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cpO30KdGhpcy5vcHRpb25zPSQud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsdGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLG9wdGlvbnMpO3RoaXMuX2NyZWF0ZSgpO2lmKHRoaXMub3B0aW9ucy5kaXNhYmxlZCl7dGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQodGhpcy5vcHRpb25zLmRpc2FibGVkKTt9CnRoaXMuX3RyaWdnZXIoImNyZWF0ZSIsbnVsbCx0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSk7dGhpcy5faW5pdCgpO30sX2dldENyZWF0ZU9wdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm57fTt9LF9nZXRDcmVhdGVFdmVudERhdGE6JC5ub29wLF9jcmVhdGU6JC5ub29wLF9pbml0OiQubm9vcCxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpczt0aGlzLl9kZXN0cm95KCk7JC5lYWNoKHRoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXAsZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGF0Ll9yZW1vdmVDbGFzcyh2YWx1ZSxrZXkpO30pO3RoaXMuZWxlbWVudC5vZmYodGhpcy5ldmVudE5hbWVzcGFjZSkucmVtb3ZlRGF0YSh0aGlzLndpZGdldEZ1bGxOYW1lKTt0aGlzLndpZGdldCgpLm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVBdHRyKCJhcmlhLWRpc2FibGVkIik7dGhpcy5iaW5kaW5ncy5vZmYodGhpcy5ldmVudE5hbWVzcGFjZSk7fSxfZGVzdHJveTokLm5vb3Asd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudDt9LG9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBvcHRpb25zPWtleTt2YXIgcGFydHM7dmFyIGN1ck9wdGlvbjt2YXIgaTtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuICQud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMpO30KaWYodHlwZW9mIGtleT09PSJzdHJpbmciKXtvcHRpb25zPXt9O3BhcnRzPWtleS5zcGxpdCgiLiIpO2tleT1wYXJ0cy5zaGlmdCgpO2lmKHBhcnRzLmxlbmd0aCl7Y3VyT3B0aW9uPW9wdGlvbnNba2V5XT0kLndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zW2tleV0pO2ZvcihpPTA7aTxwYXJ0cy5sZW5ndGgtMTtpKyspe2N1ck9wdGlvbltwYXJ0c1tpXV09Y3VyT3B0aW9uW3BhcnRzW2ldXXx8e307Y3VyT3B0aW9uPWN1ck9wdGlvbltwYXJ0c1tpXV07fQprZXk9cGFydHMucG9wKCk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiBjdXJPcHRpb25ba2V5XT09PXVuZGVmaW5lZD9udWxsOmN1ck9wdGlvbltrZXldO30KY3VyT3B0aW9uW2tleV09dmFsdWU7fWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiB0aGlzLm9wdGlvbnNba2V5XT09PXVuZGVmaW5lZD9udWxsOnRoaXMub3B0aW9uc1trZXldO30Kb3B0aW9uc1trZXldPXZhbHVlO319CnRoaXMuX3NldE9wdGlvbnMob3B0aW9ucyk7cmV0dXJuIHRoaXM7fSxfc2V0T3B0aW9uczpmdW5jdGlvbihvcHRpb25zKXt2YXIga2V5O2ZvcihrZXkgaW4gb3B0aW9ucyl7dGhpcy5fc2V0T3B0aW9uKGtleSxvcHRpb25zW2tleV0pO30KcmV0dXJuIHRoaXM7fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYoa2V5PT09ImNsYXNzZXMiKXt0aGlzLl9zZXRPcHRpb25DbGFzc2VzKHZhbHVlKTt9CnRoaXMub3B0aW9uc1trZXldPXZhbHVlO2lmKGtleT09PSJkaXNhYmxlZCIpe3RoaXMuX3NldE9wdGlvbkRpc2FibGVkKHZhbHVlKTt9CnJldHVybiB0aGlzO30sX3NldE9wdGlvbkNsYXNzZXM6ZnVuY3Rpb24odmFsdWUpe3ZhciBjbGFzc0tleSxlbGVtZW50cyxjdXJyZW50RWxlbWVudHM7Zm9yKGNsYXNzS2V5IGluIHZhbHVlKXtjdXJyZW50RWxlbWVudHM9dGhpcy5jbGFzc2VzRWxlbWVudExvb2t1cFtjbGFzc0tleV07aWYodmFsdWVbY2xhc3NLZXldPT09dGhpcy5vcHRpb25zLmNsYXNzZXNbY2xhc3NLZXldfHwhY3VycmVudEVsZW1lbnRzfHwhY3VycmVudEVsZW1lbnRzLmxlbmd0aCl7Y29udGludWU7fQplbGVtZW50cz0kKGN1cnJlbnRFbGVtZW50cy5nZXQoKSk7dGhpcy5fcmVtb3ZlQ2xhc3MoY3VycmVudEVsZW1lbnRzLGNsYXNzS2V5KTtlbGVtZW50cy5hZGRDbGFzcyh0aGlzLl9jbGFzc2VzKHtlbGVtZW50OmVsZW1lbnRzLGtleXM6Y2xhc3NLZXksY2xhc3Nlczp2YWx1ZSxhZGQ6dHJ1ZX0pKTt9fSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMuX3RvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0KCksdGhpcy53aWRnZXRGdWxsTmFtZSsiLWRpc2FibGVkIixudWxsLCEhdmFsdWUpO2lmKHZhbHVlKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhvdmVyYWJsZSxudWxsLCJ1aS1zdGF0ZS1ob3ZlciIpO3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuZm9jdXNhYmxlLG51bGwsInVpLXN0YXRlLWZvY3VzIik7fX0sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoe2Rpc2FibGVkOmZhbHNlfSk7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoe2Rpc2FibGVkOnRydWV9KTt9LF9jbGFzc2VzOmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBmdWxsPVtdO3ZhciB0aGF0PXRoaXM7b3B0aW9ucz0kLmV4dGVuZCh7ZWxlbWVudDp0aGlzLmVsZW1lbnQsY2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlc3x8e319LG9wdGlvbnMpO2Z1bmN0aW9uIHByb2Nlc3NDbGFzc1N0cmluZyhjbGFzc2VzLGNoZWNrT3B0aW9uKXt2YXIgY3VycmVudCxpO2ZvcihpPTA7aTxjbGFzc2VzLmxlbmd0aDtpKyspe2N1cnJlbnQ9dGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFtjbGFzc2VzW2ldXXx8JCgpO2lmKG9wdGlvbnMuYWRkKXtjdXJyZW50PSQoJC51bmlxdWUoY3VycmVudC5nZXQoKS5jb25jYXQob3B0aW9ucy5lbGVtZW50LmdldCgpKSkpO31lbHNle2N1cnJlbnQ9JChjdXJyZW50Lm5vdChvcHRpb25zLmVsZW1lbnQpLmdldCgpKTt9CnRoYXQuY2xhc3Nlc0VsZW1lbnRMb29rdXBbY2xhc3Nlc1tpXV09Y3VycmVudDtmdWxsLnB1c2goY2xhc3Nlc1tpXSk7aWYoY2hlY2tPcHRpb24mJm9wdGlvbnMuY2xhc3Nlc1tjbGFzc2VzW2ldXSl7ZnVsbC5wdXNoKG9wdGlvbnMuY2xhc3Nlc1tjbGFzc2VzW2ldXSk7fX19CnRoaXMuX29uKG9wdGlvbnMuZWxlbWVudCx7InJlbW92ZSI6Il91bnRyYWNrQ2xhc3Nlc0VsZW1lbnQifSk7aWYob3B0aW9ucy5rZXlzKXtwcm9jZXNzQ2xhc3NTdHJpbmcob3B0aW9ucy5rZXlzLm1hdGNoKC9cUysvZyl8fFtdLHRydWUpO30KaWYob3B0aW9ucy5leHRyYSl7cHJvY2Vzc0NsYXNzU3RyaW5nKG9wdGlvbnMuZXh0cmEubWF0Y2goL1xTKy9nKXx8W10pO30KcmV0dXJuIGZ1bGwuam9pbigiICIpO30sX3VudHJhY2tDbGFzc2VzRWxlbWVudDpmdW5jdGlvbihldmVudCl7dmFyIHRoYXQ9dGhpczskLmVhY2godGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cCxmdW5jdGlvbihrZXksdmFsdWUpe2lmKCQuaW5BcnJheShldmVudC50YXJnZXQsdmFsdWUpIT09LTEpe3RoYXQuY2xhc3Nlc0VsZW1lbnRMb29rdXBba2V5XT0kKHZhbHVlLm5vdChldmVudC50YXJnZXQpLmdldCgpKTt9fSk7fSxfcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxrZXlzLGV4dHJhKXtyZXR1cm4gdGhpcy5fdG9nZ2xlQ2xhc3MoZWxlbWVudCxrZXlzLGV4dHJhLGZhbHNlKTt9LF9hZGRDbGFzczpmdW5jdGlvbihlbGVtZW50LGtleXMsZXh0cmEpe3JldHVybiB0aGlzLl90b2dnbGVDbGFzcyhlbGVtZW50LGtleXMsZXh0cmEsdHJ1ZSk7fSxfdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxrZXlzLGV4dHJhLGFkZCl7YWRkPSh0eXBlb2YgYWRkPT09ImJvb2xlYW4iKT9hZGQ6ZXh0cmE7dmFyIHNoaWZ0PSh0eXBlb2YgZWxlbWVudD09PSJzdHJpbmcifHxlbGVtZW50PT09bnVsbCksb3B0aW9ucz17ZXh0cmE6c2hpZnQ/a2V5czpleHRyYSxrZXlzOnNoaWZ0P2VsZW1lbnQ6a2V5cyxlbGVtZW50OnNoaWZ0P3RoaXMuZWxlbWVudDplbGVtZW50LGFkZDphZGR9O29wdGlvbnMuZWxlbWVudC50b2dnbGVDbGFzcyh0aGlzLl9jbGFzc2VzKG9wdGlvbnMpLGFkZCk7cmV0dXJuIHRoaXM7fSxfb246ZnVuY3Rpb24oc3VwcHJlc3NEaXNhYmxlZENoZWNrLGVsZW1lbnQsaGFuZGxlcnMpe3ZhciBkZWxlZ2F0ZUVsZW1lbnQ7dmFyIGluc3RhbmNlPXRoaXM7aWYodHlwZW9mIHN1cHByZXNzRGlzYWJsZWRDaGVjayE9PSJib29sZWFuIil7aGFuZGxlcnM9ZWxlbWVudDtlbGVtZW50PXN1cHByZXNzRGlzYWJsZWRDaGVjaztzdXBwcmVzc0Rpc2FibGVkQ2hlY2s9ZmFsc2U7fQppZighaGFuZGxlcnMpe2hhbmRsZXJzPWVsZW1lbnQ7ZWxlbWVudD10aGlzLmVsZW1lbnQ7ZGVsZWdhdGVFbGVtZW50PXRoaXMud2lkZ2V0KCk7fWVsc2V7ZWxlbWVudD1kZWxlZ2F0ZUVsZW1lbnQ9JChlbGVtZW50KTt0aGlzLmJpbmRpbmdzPXRoaXMuYmluZGluZ3MuYWRkKGVsZW1lbnQpO30KJC5lYWNoKGhhbmRsZXJzLGZ1bmN0aW9uKGV2ZW50LGhhbmRsZXIpe2Z1bmN0aW9uIGhhbmRsZXJQcm94eSgpe2lmKCFzdXBwcmVzc0Rpc2FibGVkQ2hlY2smJihpbnN0YW5jZS5vcHRpb25zLmRpc2FibGVkPT09dHJ1ZXx8JCh0aGlzKS5oYXNDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKSkpe3JldHVybjt9CnJldHVybih0eXBlb2YgaGFuZGxlcj09PSJzdHJpbmciP2luc3RhbmNlW2hhbmRsZXJdOmhhbmRsZXIpLmFwcGx5KGluc3RhbmNlLGFyZ3VtZW50cyk7fQppZih0eXBlb2YgaGFuZGxlciE9PSJzdHJpbmciKXtoYW5kbGVyUHJveHkuZ3VpZD1oYW5kbGVyLmd1aWQ9aGFuZGxlci5ndWlkfHxoYW5kbGVyUHJveHkuZ3VpZHx8JC5ndWlkKys7fQp2YXIgbWF0Y2g9ZXZlbnQubWF0Y2goL14oW1x3Oi1dKilccyooLiopJC8pO3ZhciBldmVudE5hbWU9bWF0Y2hbMV0raW5zdGFuY2UuZXZlbnROYW1lc3BhY2U7dmFyIHNlbGVjdG9yPW1hdGNoWzJdO2lmKHNlbGVjdG9yKXtkZWxlZ2F0ZUVsZW1lbnQub24oZXZlbnROYW1lLHNlbGVjdG9yLGhhbmRsZXJQcm94eSk7fWVsc2V7ZWxlbWVudC5vbihldmVudE5hbWUsaGFuZGxlclByb3h5KTt9fSk7fSxfb2ZmOmZ1bmN0aW9uKGVsZW1lbnQsZXZlbnROYW1lKXtldmVudE5hbWU9KGV2ZW50TmFtZXx8IiIpLnNwbGl0KCIgIikuam9pbih0aGlzLmV2ZW50TmFtZXNwYWNlKyIgIikrCnRoaXMuZXZlbnROYW1lc3BhY2U7ZWxlbWVudC5vZmYoZXZlbnROYW1lKS5vZmYoZXZlbnROYW1lKTt0aGlzLmJpbmRpbmdzPSQodGhpcy5iaW5kaW5ncy5ub3QoZWxlbWVudCkuZ2V0KCkpO3RoaXMuZm9jdXNhYmxlPSQodGhpcy5mb2N1c2FibGUubm90KGVsZW1lbnQpLmdldCgpKTt0aGlzLmhvdmVyYWJsZT0kKHRoaXMuaG92ZXJhYmxlLm5vdChlbGVtZW50KS5nZXQoKSk7fSxfZGVsYXk6ZnVuY3Rpb24oaGFuZGxlcixkZWxheSl7ZnVuY3Rpb24gaGFuZGxlclByb3h5KCl7cmV0dXJuKHR5cGVvZiBoYW5kbGVyPT09InN0cmluZyI/aW5zdGFuY2VbaGFuZGxlcl06aGFuZGxlcikuYXBwbHkoaW5zdGFuY2UsYXJndW1lbnRzKTt9CnZhciBpbnN0YW5jZT10aGlzO3JldHVybiBzZXRUaW1lb3V0KGhhbmRsZXJQcm94eSxkZWxheXx8MCk7fSxfaG92ZXJhYmxlOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuaG92ZXJhYmxlPXRoaXMuaG92ZXJhYmxlLmFkZChlbGVtZW50KTt0aGlzLl9vbihlbGVtZW50LHttb3VzZWVudGVyOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9hZGRDbGFzcygkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLG51bGwsInVpLXN0YXRlLWhvdmVyIik7fSxtb3VzZWxlYXZlOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9yZW1vdmVDbGFzcygkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLG51bGwsInVpLXN0YXRlLWhvdmVyIik7fX0pO30sX2ZvY3VzYWJsZTpmdW5jdGlvbihlbGVtZW50KXt0aGlzLmZvY3VzYWJsZT10aGlzLmZvY3VzYWJsZS5hZGQoZWxlbWVudCk7dGhpcy5fb24oZWxlbWVudCx7Zm9jdXNpbjpmdW5jdGlvbihldmVudCl7dGhpcy5fYWRkQ2xhc3MoJChldmVudC5jdXJyZW50VGFyZ2V0KSxudWxsLCJ1aS1zdGF0ZS1mb2N1cyIpO30sZm9jdXNvdXQ6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3JlbW92ZUNsYXNzKCQoZXZlbnQuY3VycmVudFRhcmdldCksbnVsbCwidWktc3RhdGUtZm9jdXMiKTt9fSk7fSxfdHJpZ2dlcjpmdW5jdGlvbih0eXBlLGV2ZW50LGRhdGEpe3ZhciBwcm9wLG9yaWc7dmFyIGNhbGxiYWNrPXRoaXMub3B0aW9uc1t0eXBlXTtkYXRhPWRhdGF8fHt9O2V2ZW50PSQuRXZlbnQoZXZlbnQpO2V2ZW50LnR5cGU9KHR5cGU9PT10aGlzLndpZGdldEV2ZW50UHJlZml4P3R5cGU6dGhpcy53aWRnZXRFdmVudFByZWZpeCt0eXBlKS50b0xvd2VyQ2FzZSgpO2V2ZW50LnRhcmdldD10aGlzLmVsZW1lbnRbMF07b3JpZz1ldmVudC5vcmlnaW5hbEV2ZW50O2lmKG9yaWcpe2Zvcihwcm9wIGluIG9yaWcpe2lmKCEocHJvcCBpbiBldmVudCkpe2V2ZW50W3Byb3BdPW9yaWdbcHJvcF07fX19CnRoaXMuZWxlbWVudC50cmlnZ2VyKGV2ZW50LGRhdGEpO3JldHVybiEoJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSYmY2FsbGJhY2suYXBwbHkodGhpcy5lbGVtZW50WzBdLFtldmVudF0uY29uY2F0KGRhdGEpKT09PWZhbHNlfHxldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSk7fX07JC5lYWNoKHtzaG93OiJmYWRlSW4iLGhpZGU6ImZhZGVPdXQifSxmdW5jdGlvbihtZXRob2QsZGVmYXVsdEVmZmVjdCl7JC5XaWRnZXQucHJvdG90eXBlWyJfIittZXRob2RdPWZ1bmN0aW9uKGVsZW1lbnQsb3B0aW9ucyxjYWxsYmFjayl7aWYodHlwZW9mIG9wdGlvbnM9PT0ic3RyaW5nIil7b3B0aW9ucz17ZWZmZWN0Om9wdGlvbnN9O30KdmFyIGhhc09wdGlvbnM7dmFyIGVmZmVjdE5hbWU9IW9wdGlvbnM/bWV0aG9kOm9wdGlvbnM9PT10cnVlfHx0eXBlb2Ygb3B0aW9ucz09PSJudW1iZXIiP2RlZmF1bHRFZmZlY3Q6b3B0aW9ucy5lZmZlY3R8fGRlZmF1bHRFZmZlY3Q7b3B0aW9ucz1vcHRpb25zfHx7fTtpZih0eXBlb2Ygb3B0aW9ucz09PSJudW1iZXIiKXtvcHRpb25zPXtkdXJhdGlvbjpvcHRpb25zfTt9Cmhhc09wdGlvbnM9ISQuaXNFbXB0eU9iamVjdChvcHRpb25zKTtvcHRpb25zLmNvbXBsZXRlPWNhbGxiYWNrO2lmKG9wdGlvbnMuZGVsYXkpe2VsZW1lbnQuZGVsYXkob3B0aW9ucy5kZWxheSk7fQppZihoYXNPcHRpb25zJiYkLmVmZmVjdHMmJiQuZWZmZWN0cy5lZmZlY3RbZWZmZWN0TmFtZV0pe2VsZW1lbnRbbWV0aG9kXShvcHRpb25zKTt9ZWxzZSBpZihlZmZlY3ROYW1lIT09bWV0aG9kJiZlbGVtZW50W2VmZmVjdE5hbWVdKXtlbGVtZW50W2VmZmVjdE5hbWVdKG9wdGlvbnMuZHVyYXRpb24sb3B0aW9ucy5lYXNpbmcsY2FsbGJhY2spO31lbHNle2VsZW1lbnQucXVldWUoZnVuY3Rpb24obmV4dCl7JCh0aGlzKVttZXRob2RdKCk7aWYoY2FsbGJhY2spe2NhbGxiYWNrLmNhbGwoZWxlbWVudFswXSk7fQpuZXh0KCk7fSk7fX07fSk7dmFyIHdpZGdldD0kLndpZGdldDsoZnVuY3Rpb24oKXt2YXIgY2FjaGVkU2Nyb2xsYmFyV2lkdGgsbWF4PU1hdGgubWF4LGFicz1NYXRoLmFicyxyaG9yaXpvbnRhbD0vbGVmdHxjZW50ZXJ8cmlnaHQvLHJ2ZXJ0aWNhbD0vdG9wfGNlbnRlcnxib3R0b20vLHJvZmZzZXQ9L1tcK1wtXVxkKyhcLltcZF0rKT8lPy8scnBvc2l0aW9uPS9eXHcrLyxycGVyY2VudD0vJSQvLF9wb3NpdGlvbj0kLmZuLnBvc2l0aW9uO2Z1bmN0aW9uIGdldE9mZnNldHMob2Zmc2V0cyx3aWR0aCxoZWlnaHQpe3JldHVybltwYXJzZUZsb2F0KG9mZnNldHNbMF0pKihycGVyY2VudC50ZXN0KG9mZnNldHNbMF0pP3dpZHRoLzEwMDoxKSxwYXJzZUZsb2F0KG9mZnNldHNbMV0pKihycGVyY2VudC50ZXN0KG9mZnNldHNbMV0pP2hlaWdodC8xMDA6MSldO30KZnVuY3Rpb24gcGFyc2VDc3MoZWxlbWVudCxwcm9wZXJ0eSl7cmV0dXJuIHBhcnNlSW50KCQuY3NzKGVsZW1lbnQscHJvcGVydHkpLDEwKXx8MDt9CmZ1bmN0aW9uIGdldERpbWVuc2lvbnMoZWxlbSl7dmFyIHJhdz1lbGVtWzBdO2lmKHJhdy5ub2RlVHlwZT09PTkpe3JldHVybnt3aWR0aDplbGVtLndpZHRoKCksaGVpZ2h0OmVsZW0uaGVpZ2h0KCksb2Zmc2V0Ont0b3A6MCxsZWZ0OjB9fTt9CmlmKCQuaXNXaW5kb3cocmF3KSl7cmV0dXJue3dpZHRoOmVsZW0ud2lkdGgoKSxoZWlnaHQ6ZWxlbS5oZWlnaHQoKSxvZmZzZXQ6e3RvcDplbGVtLnNjcm9sbFRvcCgpLGxlZnQ6ZWxlbS5zY3JvbGxMZWZ0KCl9fTt9CmlmKHJhdy5wcmV2ZW50RGVmYXVsdCl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjAsb2Zmc2V0Ont0b3A6cmF3LnBhZ2VZLGxlZnQ6cmF3LnBhZ2VYfX07fQpyZXR1cm57d2lkdGg6ZWxlbS5vdXRlcldpZHRoKCksaGVpZ2h0OmVsZW0ub3V0ZXJIZWlnaHQoKSxvZmZzZXQ6ZWxlbS5vZmZzZXQoKX07fQokLnBvc2l0aW9uPXtzY3JvbGxiYXJXaWR0aDpmdW5jdGlvbigpe2lmKGNhY2hlZFNjcm9sbGJhcldpZHRoIT09dW5kZWZpbmVkKXtyZXR1cm4gY2FjaGVkU2Nyb2xsYmFyV2lkdGg7fQp2YXIgdzEsdzIsZGl2PSQoIjxkaXYgIisic3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz4iKyI8ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PiIpLGlubmVyRGl2PWRpdi5jaGlsZHJlbigpWzBdOyQoImJvZHkiKS5hcHBlbmQoZGl2KTt3MT1pbm5lckRpdi5vZmZzZXRXaWR0aDtkaXYuY3NzKCJvdmVyZmxvdyIsInNjcm9sbCIpO3cyPWlubmVyRGl2Lm9mZnNldFdpZHRoO2lmKHcxPT09dzIpe3cyPWRpdlswXS5jbGllbnRXaWR0aDt9CmRpdi5yZW1vdmUoKTtyZXR1cm4oY2FjaGVkU2Nyb2xsYmFyV2lkdGg9dzEtdzIpO30sZ2V0U2Nyb2xsSW5mbzpmdW5jdGlvbih3aXRoaW4pe3ZhciBvdmVyZmxvd1g9d2l0aGluLmlzV2luZG93fHx3aXRoaW4uaXNEb2N1bWVudD8iIjp3aXRoaW4uZWxlbWVudC5jc3MoIm92ZXJmbG93LXgiKSxvdmVyZmxvd1k9d2l0aGluLmlzV2luZG93fHx3aXRoaW4uaXNEb2N1bWVudD8iIjp3aXRoaW4uZWxlbWVudC5jc3MoIm92ZXJmbG93LXkiKSxoYXNPdmVyZmxvd1g9b3ZlcmZsb3dYPT09InNjcm9sbCJ8fChvdmVyZmxvd1g9PT0iYXV0byImJndpdGhpbi53aWR0aDx3aXRoaW4uZWxlbWVudFswXS5zY3JvbGxXaWR0aCksaGFzT3ZlcmZsb3dZPW92ZXJmbG93WT09PSJzY3JvbGwifHwob3ZlcmZsb3dZPT09ImF1dG8iJiZ3aXRoaW4uaGVpZ2h0PHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbEhlaWdodCk7cmV0dXJue3dpZHRoOmhhc092ZXJmbG93WT8kLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MCxoZWlnaHQ6aGFzT3ZlcmZsb3dYPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowfTt9LGdldFdpdGhpbkluZm86ZnVuY3Rpb24oZWxlbWVudCl7dmFyIHdpdGhpbkVsZW1lbnQ9JChlbGVtZW50fHx3aW5kb3cpLGlzV2luZG93PSQuaXNXaW5kb3cod2l0aGluRWxlbWVudFswXSksaXNEb2N1bWVudD0hIXdpdGhpbkVsZW1lbnRbMF0mJndpdGhpbkVsZW1lbnRbMF0ubm9kZVR5cGU9PT05LGhhc09mZnNldD0haXNXaW5kb3cmJiFpc0RvY3VtZW50O3JldHVybntlbGVtZW50OndpdGhpbkVsZW1lbnQsaXNXaW5kb3c6aXNXaW5kb3csaXNEb2N1bWVudDppc0RvY3VtZW50LG9mZnNldDpoYXNPZmZzZXQ/JChlbGVtZW50KS5vZmZzZXQoKTp7bGVmdDowLHRvcDowfSxzY3JvbGxMZWZ0OndpdGhpbkVsZW1lbnQuc2Nyb2xsTGVmdCgpLHNjcm9sbFRvcDp3aXRoaW5FbGVtZW50LnNjcm9sbFRvcCgpLHdpZHRoOndpdGhpbkVsZW1lbnQub3V0ZXJXaWR0aCgpLGhlaWdodDp3aXRoaW5FbGVtZW50Lm91dGVySGVpZ2h0KCl9O319OyQuZm4ucG9zaXRpb249ZnVuY3Rpb24ob3B0aW9ucyl7aWYoIW9wdGlvbnN8fCFvcHRpb25zLm9mKXtyZXR1cm4gX3Bvc2l0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9Cm9wdGlvbnM9JC5leHRlbmQoe30sb3B0aW9ucyk7dmFyIGF0T2Zmc2V0LHRhcmdldFdpZHRoLHRhcmdldEhlaWdodCx0YXJnZXRPZmZzZXQsYmFzZVBvc2l0aW9uLGRpbWVuc2lvbnMsdGFyZ2V0PSQob3B0aW9ucy5vZiksd2l0aGluPSQucG9zaXRpb24uZ2V0V2l0aGluSW5mbyhvcHRpb25zLndpdGhpbiksc2Nyb2xsSW5mbz0kLnBvc2l0aW9uLmdldFNjcm9sbEluZm8od2l0aGluKSxjb2xsaXNpb249KG9wdGlvbnMuY29sbGlzaW9ufHwiZmxpcCIpLnNwbGl0KCIgIiksb2Zmc2V0cz17fTtkaW1lbnNpb25zPWdldERpbWVuc2lvbnModGFyZ2V0KTtpZih0YXJnZXRbMF0ucHJldmVudERlZmF1bHQpe29wdGlvbnMuYXQ9ImxlZnQgdG9wIjt9CnRhcmdldFdpZHRoPWRpbWVuc2lvbnMud2lkdGg7dGFyZ2V0SGVpZ2h0PWRpbWVuc2lvbnMuaGVpZ2h0O3RhcmdldE9mZnNldD1kaW1lbnNpb25zLm9mZnNldDtiYXNlUG9zaXRpb249JC5leHRlbmQoe30sdGFyZ2V0T2Zmc2V0KTskLmVhY2goWyJteSIsImF0Il0sZnVuY3Rpb24oKXt2YXIgcG9zPShvcHRpb25zW3RoaXNdfHwiIikuc3BsaXQoIiAiKSxob3Jpem9udGFsT2Zmc2V0LHZlcnRpY2FsT2Zmc2V0O2lmKHBvcy5sZW5ndGg9PT0xKXtwb3M9cmhvcml6b250YWwudGVzdChwb3NbMF0pP3Bvcy5jb25jYXQoWyJjZW50ZXIiXSk6cnZlcnRpY2FsLnRlc3QocG9zWzBdKT9bImNlbnRlciJdLmNvbmNhdChwb3MpOlsiY2VudGVyIiwiY2VudGVyIl07fQpwb3NbMF09cmhvcml6b250YWwudGVzdChwb3NbMF0pP3Bvc1swXToiY2VudGVyIjtwb3NbMV09cnZlcnRpY2FsLnRlc3QocG9zWzFdKT9wb3NbMV06ImNlbnRlciI7aG9yaXpvbnRhbE9mZnNldD1yb2Zmc2V0LmV4ZWMocG9zWzBdKTt2ZXJ0aWNhbE9mZnNldD1yb2Zmc2V0LmV4ZWMocG9zWzFdKTtvZmZzZXRzW3RoaXNdPVtob3Jpem9udGFsT2Zmc2V0P2hvcml6b250YWxPZmZzZXRbMF06MCx2ZXJ0aWNhbE9mZnNldD92ZXJ0aWNhbE9mZnNldFswXTowXTtvcHRpb25zW3RoaXNdPVtycG9zaXRpb24uZXhlYyhwb3NbMF0pWzBdLHJwb3NpdGlvbi5leGVjKHBvc1sxXSlbMF1dO30pO2lmKGNvbGxpc2lvbi5sZW5ndGg9PT0xKXtjb2xsaXNpb25bMV09Y29sbGlzaW9uWzBdO30KaWYob3B0aW9ucy5hdFswXT09PSJyaWdodCIpe2Jhc2VQb3NpdGlvbi5sZWZ0Kz10YXJnZXRXaWR0aDt9ZWxzZSBpZihvcHRpb25zLmF0WzBdPT09ImNlbnRlciIpe2Jhc2VQb3NpdGlvbi5sZWZ0Kz10YXJnZXRXaWR0aC8yO30KaWYob3B0aW9ucy5hdFsxXT09PSJib3R0b20iKXtiYXNlUG9zaXRpb24udG9wKz10YXJnZXRIZWlnaHQ7fWVsc2UgaWYob3B0aW9ucy5hdFsxXT09PSJjZW50ZXIiKXtiYXNlUG9zaXRpb24udG9wKz10YXJnZXRIZWlnaHQvMjt9CmF0T2Zmc2V0PWdldE9mZnNldHMob2Zmc2V0cy5hdCx0YXJnZXRXaWR0aCx0YXJnZXRIZWlnaHQpO2Jhc2VQb3NpdGlvbi5sZWZ0Kz1hdE9mZnNldFswXTtiYXNlUG9zaXRpb24udG9wKz1hdE9mZnNldFsxXTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNvbGxpc2lvblBvc2l0aW9uLHVzaW5nLGVsZW09JCh0aGlzKSxlbGVtV2lkdGg9ZWxlbS5vdXRlcldpZHRoKCksZWxlbUhlaWdodD1lbGVtLm91dGVySGVpZ2h0KCksbWFyZ2luTGVmdD1wYXJzZUNzcyh0aGlzLCJtYXJnaW5MZWZ0IiksbWFyZ2luVG9wPXBhcnNlQ3NzKHRoaXMsIm1hcmdpblRvcCIpLGNvbGxpc2lvbldpZHRoPWVsZW1XaWR0aCttYXJnaW5MZWZ0K3BhcnNlQ3NzKHRoaXMsIm1hcmdpblJpZ2h0IikrCnNjcm9sbEluZm8ud2lkdGgsY29sbGlzaW9uSGVpZ2h0PWVsZW1IZWlnaHQrbWFyZ2luVG9wK3BhcnNlQ3NzKHRoaXMsIm1hcmdpbkJvdHRvbSIpKwpzY3JvbGxJbmZvLmhlaWdodCxwb3NpdGlvbj0kLmV4dGVuZCh7fSxiYXNlUG9zaXRpb24pLG15T2Zmc2V0PWdldE9mZnNldHMob2Zmc2V0cy5teSxlbGVtLm91dGVyV2lkdGgoKSxlbGVtLm91dGVySGVpZ2h0KCkpO2lmKG9wdGlvbnMubXlbMF09PT0icmlnaHQiKXtwb3NpdGlvbi5sZWZ0LT1lbGVtV2lkdGg7fWVsc2UgaWYob3B0aW9ucy5teVswXT09PSJjZW50ZXIiKXtwb3NpdGlvbi5sZWZ0LT1lbGVtV2lkdGgvMjt9CmlmKG9wdGlvbnMubXlbMV09PT0iYm90dG9tIil7cG9zaXRpb24udG9wLT1lbGVtSGVpZ2h0O31lbHNlIGlmKG9wdGlvbnMubXlbMV09PT0iY2VudGVyIil7cG9zaXRpb24udG9wLT1lbGVtSGVpZ2h0LzI7fQpwb3NpdGlvbi5sZWZ0Kz1teU9mZnNldFswXTtwb3NpdGlvbi50b3ArPW15T2Zmc2V0WzFdO2NvbGxpc2lvblBvc2l0aW9uPXttYXJnaW5MZWZ0Om1hcmdpbkxlZnQsbWFyZ2luVG9wOm1hcmdpblRvcH07JC5lYWNoKFsibGVmdCIsInRvcCJdLGZ1bmN0aW9uKGksZGlyKXtpZigkLnVpLnBvc2l0aW9uW2NvbGxpc2lvbltpXV0peyQudWkucG9zaXRpb25bY29sbGlzaW9uW2ldXVtkaXJdKHBvc2l0aW9uLHt0YXJnZXRXaWR0aDp0YXJnZXRXaWR0aCx0YXJnZXRIZWlnaHQ6dGFyZ2V0SGVpZ2h0LGVsZW1XaWR0aDplbGVtV2lkdGgsZWxlbUhlaWdodDplbGVtSGVpZ2h0LGNvbGxpc2lvblBvc2l0aW9uOmNvbGxpc2lvblBvc2l0aW9uLGNvbGxpc2lvbldpZHRoOmNvbGxpc2lvbldpZHRoLGNvbGxpc2lvbkhlaWdodDpjb2xsaXNpb25IZWlnaHQsb2Zmc2V0OlthdE9mZnNldFswXStteU9mZnNldFswXSxhdE9mZnNldFsxXStteU9mZnNldFsxXV0sbXk6b3B0aW9ucy5teSxhdDpvcHRpb25zLmF0LHdpdGhpbjp3aXRoaW4sZWxlbTplbGVtfSk7fX0pO2lmKG9wdGlvbnMudXNpbmcpe3VzaW5nPWZ1bmN0aW9uKHByb3BzKXt2YXIgbGVmdD10YXJnZXRPZmZzZXQubGVmdC1wb3NpdGlvbi5sZWZ0LHJpZ2h0PWxlZnQrdGFyZ2V0V2lkdGgtZWxlbVdpZHRoLHRvcD10YXJnZXRPZmZzZXQudG9wLXBvc2l0aW9uLnRvcCxib3R0b209dG9wK3RhcmdldEhlaWdodC1lbGVtSGVpZ2h0LGZlZWRiYWNrPXt0YXJnZXQ6e2VsZW1lbnQ6dGFyZ2V0LGxlZnQ6dGFyZ2V0T2Zmc2V0LmxlZnQsdG9wOnRhcmdldE9mZnNldC50b3Asd2lkdGg6dGFyZ2V0V2lkdGgsaGVpZ2h0OnRhcmdldEhlaWdodH0sZWxlbWVudDp7ZWxlbWVudDplbGVtLGxlZnQ6cG9zaXRpb24ubGVmdCx0b3A6cG9zaXRpb24udG9wLHdpZHRoOmVsZW1XaWR0aCxoZWlnaHQ6ZWxlbUhlaWdodH0saG9yaXpvbnRhbDpyaWdodDwwPyJsZWZ0IjpsZWZ0PjA/InJpZ2h0IjoiY2VudGVyIix2ZXJ0aWNhbDpib3R0b208MD8idG9wIjp0b3A+MD8iYm90dG9tIjoibWlkZGxlIn07aWYodGFyZ2V0V2lkdGg8ZWxlbVdpZHRoJiZhYnMobGVmdCtyaWdodCk8dGFyZ2V0V2lkdGgpe2ZlZWRiYWNrLmhvcml6b250YWw9ImNlbnRlciI7fQppZih0YXJnZXRIZWlnaHQ8ZWxlbUhlaWdodCYmYWJzKHRvcCtib3R0b20pPHRhcmdldEhlaWdodCl7ZmVlZGJhY2sudmVydGljYWw9Im1pZGRsZSI7fQppZihtYXgoYWJzKGxlZnQpLGFicyhyaWdodCkpPm1heChhYnModG9wKSxhYnMoYm90dG9tKSkpe2ZlZWRiYWNrLmltcG9ydGFudD0iaG9yaXpvbnRhbCI7fWVsc2V7ZmVlZGJhY2suaW1wb3J0YW50PSJ2ZXJ0aWNhbCI7fQpvcHRpb25zLnVzaW5nLmNhbGwodGhpcyxwcm9wcyxmZWVkYmFjayk7fTt9CmVsZW0ub2Zmc2V0KCQuZXh0ZW5kKHBvc2l0aW9uLHt1c2luZzp1c2luZ30pKTt9KTt9OyQudWkucG9zaXRpb249e2ZpdDp7bGVmdDpmdW5jdGlvbihwb3NpdGlvbixkYXRhKXt2YXIgd2l0aGluPWRhdGEud2l0aGluLHdpdGhpbk9mZnNldD13aXRoaW4uaXNXaW5kb3c/d2l0aGluLnNjcm9sbExlZnQ6d2l0aGluLm9mZnNldC5sZWZ0LG91dGVyV2lkdGg9d2l0aGluLndpZHRoLGNvbGxpc2lvblBvc0xlZnQ9cG9zaXRpb24ubGVmdC1kYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsb3ZlckxlZnQ9d2l0aGluT2Zmc2V0LWNvbGxpc2lvblBvc0xlZnQsb3ZlclJpZ2h0PWNvbGxpc2lvblBvc0xlZnQrZGF0YS5jb2xsaXNpb25XaWR0aC1vdXRlcldpZHRoLXdpdGhpbk9mZnNldCxuZXdPdmVyUmlnaHQ7aWYoZGF0YS5jb2xsaXNpb25XaWR0aD5vdXRlcldpZHRoKXtpZihvdmVyTGVmdD4wJiZvdmVyUmlnaHQ8PTApe25ld092ZXJSaWdodD1wb3NpdGlvbi5sZWZ0K292ZXJMZWZ0K2RhdGEuY29sbGlzaW9uV2lkdGgtb3V0ZXJXaWR0aC0Kd2l0aGluT2Zmc2V0O3Bvc2l0aW9uLmxlZnQrPW92ZXJMZWZ0LW5ld092ZXJSaWdodDt9ZWxzZSBpZihvdmVyUmlnaHQ+MCYmb3ZlckxlZnQ8PTApe3Bvc2l0aW9uLmxlZnQ9d2l0aGluT2Zmc2V0O31lbHNle2lmKG92ZXJMZWZ0Pm92ZXJSaWdodCl7cG9zaXRpb24ubGVmdD13aXRoaW5PZmZzZXQrb3V0ZXJXaWR0aC1kYXRhLmNvbGxpc2lvbldpZHRoO31lbHNle3Bvc2l0aW9uLmxlZnQ9d2l0aGluT2Zmc2V0O319fWVsc2UgaWYob3ZlckxlZnQ+MCl7cG9zaXRpb24ubGVmdCs9b3ZlckxlZnQ7fWVsc2UgaWYob3ZlclJpZ2h0PjApe3Bvc2l0aW9uLmxlZnQtPW92ZXJSaWdodDt9ZWxzZXtwb3NpdGlvbi5sZWZ0PW1heChwb3NpdGlvbi5sZWZ0LWNvbGxpc2lvblBvc0xlZnQscG9zaXRpb24ubGVmdCk7fX0sdG9wOmZ1bmN0aW9uKHBvc2l0aW9uLGRhdGEpe3ZhciB3aXRoaW49ZGF0YS53aXRoaW4sd2l0aGluT2Zmc2V0PXdpdGhpbi5pc1dpbmRvdz93aXRoaW4uc2Nyb2xsVG9wOndpdGhpbi5vZmZzZXQudG9wLG91dGVySGVpZ2h0PWRhdGEud2l0aGluLmhlaWdodCxjb2xsaXNpb25Qb3NUb3A9cG9zaXRpb24udG9wLWRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLG92ZXJUb3A9d2l0aGluT2Zmc2V0LWNvbGxpc2lvblBvc1RvcCxvdmVyQm90dG9tPWNvbGxpc2lvblBvc1RvcCtkYXRhLmNvbGxpc2lvbkhlaWdodC1vdXRlckhlaWdodC13aXRoaW5PZmZzZXQsbmV3T3ZlckJvdHRvbTtpZihkYXRhLmNvbGxpc2lvbkhlaWdodD5vdXRlckhlaWdodCl7aWYob3ZlclRvcD4wJiZvdmVyQm90dG9tPD0wKXtuZXdPdmVyQm90dG9tPXBvc2l0aW9uLnRvcCtvdmVyVG9wK2RhdGEuY29sbGlzaW9uSGVpZ2h0LW91dGVySGVpZ2h0LQp3aXRoaW5PZmZzZXQ7cG9zaXRpb24udG9wKz1vdmVyVG9wLW5ld092ZXJCb3R0b207fWVsc2UgaWYob3ZlckJvdHRvbT4wJiZvdmVyVG9wPD0wKXtwb3NpdGlvbi50b3A9d2l0aGluT2Zmc2V0O31lbHNle2lmKG92ZXJUb3A+b3ZlckJvdHRvbSl7cG9zaXRpb24udG9wPXdpdGhpbk9mZnNldCtvdXRlckhlaWdodC1kYXRhLmNvbGxpc2lvbkhlaWdodDt9ZWxzZXtwb3NpdGlvbi50b3A9d2l0aGluT2Zmc2V0O319fWVsc2UgaWYob3ZlclRvcD4wKXtwb3NpdGlvbi50b3ArPW92ZXJUb3A7fWVsc2UgaWYob3ZlckJvdHRvbT4wKXtwb3NpdGlvbi50b3AtPW92ZXJCb3R0b207fWVsc2V7cG9zaXRpb24udG9wPW1heChwb3NpdGlvbi50b3AtY29sbGlzaW9uUG9zVG9wLHBvc2l0aW9uLnRvcCk7fX19LGZsaXA6e2xlZnQ6ZnVuY3Rpb24ocG9zaXRpb24sZGF0YSl7dmFyIHdpdGhpbj1kYXRhLndpdGhpbix3aXRoaW5PZmZzZXQ9d2l0aGluLm9mZnNldC5sZWZ0K3dpdGhpbi5zY3JvbGxMZWZ0LG91dGVyV2lkdGg9d2l0aGluLndpZHRoLG9mZnNldExlZnQ9d2l0aGluLmlzV2luZG93P3dpdGhpbi5zY3JvbGxMZWZ0OndpdGhpbi5vZmZzZXQubGVmdCxjb2xsaXNpb25Qb3NMZWZ0PXBvc2l0aW9uLmxlZnQtZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LG92ZXJMZWZ0PWNvbGxpc2lvblBvc0xlZnQtb2Zmc2V0TGVmdCxvdmVyUmlnaHQ9Y29sbGlzaW9uUG9zTGVmdCtkYXRhLmNvbGxpc2lvbldpZHRoLW91dGVyV2lkdGgtb2Zmc2V0TGVmdCxteU9mZnNldD1kYXRhLm15WzBdPT09ImxlZnQiPy1kYXRhLmVsZW1XaWR0aDpkYXRhLm15WzBdPT09InJpZ2h0Ij9kYXRhLmVsZW1XaWR0aDowLGF0T2Zmc2V0PWRhdGEuYXRbMF09PT0ibGVmdCI/ZGF0YS50YXJnZXRXaWR0aDpkYXRhLmF0WzBdPT09InJpZ2h0Ij8tZGF0YS50YXJnZXRXaWR0aDowLG9mZnNldD0tMipkYXRhLm9mZnNldFswXSxuZXdPdmVyUmlnaHQsbmV3T3ZlckxlZnQ7aWYob3ZlckxlZnQ8MCl7bmV3T3ZlclJpZ2h0PXBvc2l0aW9uLmxlZnQrbXlPZmZzZXQrYXRPZmZzZXQrb2Zmc2V0K2RhdGEuY29sbGlzaW9uV2lkdGgtCm91dGVyV2lkdGgtd2l0aGluT2Zmc2V0O2lmKG5ld092ZXJSaWdodDwwfHxuZXdPdmVyUmlnaHQ8YWJzKG92ZXJMZWZ0KSl7cG9zaXRpb24ubGVmdCs9bXlPZmZzZXQrYXRPZmZzZXQrb2Zmc2V0O319ZWxzZSBpZihvdmVyUmlnaHQ+MCl7bmV3T3ZlckxlZnQ9cG9zaXRpb24ubGVmdC1kYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrbXlPZmZzZXQrCmF0T2Zmc2V0K29mZnNldC1vZmZzZXRMZWZ0O2lmKG5ld092ZXJMZWZ0PjB8fGFicyhuZXdPdmVyTGVmdCk8b3ZlclJpZ2h0KXtwb3NpdGlvbi5sZWZ0Kz1teU9mZnNldCthdE9mZnNldCtvZmZzZXQ7fX19LHRvcDpmdW5jdGlvbihwb3NpdGlvbixkYXRhKXt2YXIgd2l0aGluPWRhdGEud2l0aGluLHdpdGhpbk9mZnNldD13aXRoaW4ub2Zmc2V0LnRvcCt3aXRoaW4uc2Nyb2xsVG9wLG91dGVySGVpZ2h0PXdpdGhpbi5oZWlnaHQsb2Zmc2V0VG9wPXdpdGhpbi5pc1dpbmRvdz93aXRoaW4uc2Nyb2xsVG9wOndpdGhpbi5vZmZzZXQudG9wLGNvbGxpc2lvblBvc1RvcD1wb3NpdGlvbi50b3AtZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3Asb3ZlclRvcD1jb2xsaXNpb25Qb3NUb3Atb2Zmc2V0VG9wLG92ZXJCb3R0b209Y29sbGlzaW9uUG9zVG9wK2RhdGEuY29sbGlzaW9uSGVpZ2h0LW91dGVySGVpZ2h0LW9mZnNldFRvcCx0b3A9ZGF0YS5teVsxXT09PSJ0b3AiLG15T2Zmc2V0PXRvcD8tZGF0YS5lbGVtSGVpZ2h0OmRhdGEubXlbMV09PT0iYm90dG9tIj9kYXRhLmVsZW1IZWlnaHQ6MCxhdE9mZnNldD1kYXRhLmF0WzFdPT09InRvcCI/ZGF0YS50YXJnZXRIZWlnaHQ6ZGF0YS5hdFsxXT09PSJib3R0b20iPy1kYXRhLnRhcmdldEhlaWdodDowLG9mZnNldD0tMipkYXRhLm9mZnNldFsxXSxuZXdPdmVyVG9wLG5ld092ZXJCb3R0b207aWYob3ZlclRvcDwwKXtuZXdPdmVyQm90dG9tPXBvc2l0aW9uLnRvcCtteU9mZnNldCthdE9mZnNldCtvZmZzZXQrZGF0YS5jb2xsaXNpb25IZWlnaHQtCm91dGVySGVpZ2h0LXdpdGhpbk9mZnNldDtpZihuZXdPdmVyQm90dG9tPDB8fG5ld092ZXJCb3R0b208YWJzKG92ZXJUb3ApKXtwb3NpdGlvbi50b3ArPW15T2Zmc2V0K2F0T2Zmc2V0K29mZnNldDt9fWVsc2UgaWYob3ZlckJvdHRvbT4wKXtuZXdPdmVyVG9wPXBvc2l0aW9uLnRvcC1kYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCtteU9mZnNldCthdE9mZnNldCsKb2Zmc2V0LW9mZnNldFRvcDtpZihuZXdPdmVyVG9wPjB8fGFicyhuZXdPdmVyVG9wKTxvdmVyQm90dG9tKXtwb3NpdGlvbi50b3ArPW15T2Zmc2V0K2F0T2Zmc2V0K29mZnNldDt9fX19LGZsaXBmaXQ6e2xlZnQ6ZnVuY3Rpb24oKXskLnVpLnBvc2l0aW9uLmZsaXAubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7JC51aS5wb3NpdGlvbi5maXQubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSx0b3A6ZnVuY3Rpb24oKXskLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTskLnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO319fTt9KSgpO3ZhciBwb3NpdGlvbj0kLnVpLnBvc2l0aW9uO3ZhciBkYXRhPSQuZXh0ZW5kKCQuZXhwclsiOiJdLHtkYXRhOiQuZXhwci5jcmVhdGVQc2V1ZG8/JC5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbihkYXRhTmFtZSl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3JldHVybiEhJC5kYXRhKGVsZW0sZGF0YU5hbWUpO307fSk6ZnVuY3Rpb24oZWxlbSxpLG1hdGNoKXtyZXR1cm4hISQuZGF0YShlbGVtLG1hdGNoWzNdKTt9fSk7dmFyIGRpc2FibGVTZWxlY3Rpb249JC5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246KGZ1bmN0aW9uKCl7dmFyIGV2ZW50VHlwZT0ib25zZWxlY3RzdGFydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKT8ic2VsZWN0c3RhcnQiOiJtb3VzZWRvd24iO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uKGV2ZW50VHlwZSsiLnVpLWRpc2FibGVTZWxlY3Rpb24iLGZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30pO307fSkoKSxlbmFibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmYoIi51aS1kaXNhYmxlU2VsZWN0aW9uIik7fX0pOyQudWkuZm9jdXNhYmxlPWZ1bmN0aW9uKGVsZW1lbnQsaGFzVGFiaW5kZXgpe3ZhciBtYXAsbWFwTmFtZSxpbWcsZm9jdXNhYmxlSWZWaXNpYmxlLGZpZWxkc2V0LG5vZGVOYW1lPWVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiYXJlYSI9PT1ub2RlTmFtZSl7bWFwPWVsZW1lbnQucGFyZW50Tm9kZTttYXBOYW1lPW1hcC5uYW1lO2lmKCFlbGVtZW50LmhyZWZ8fCFtYXBOYW1lfHxtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJtYXAiKXtyZXR1cm4gZmFsc2U7fQppbWc9JCgiaW1nW3VzZW1hcD0nIyIrbWFwTmFtZSsiJ10iKTtyZXR1cm4gaW1nLmxlbmd0aD4wJiZpbWcuaXMoIjp2aXNpYmxlIik7fQppZigvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkLy50ZXN0KG5vZGVOYW1lKSl7Zm9jdXNhYmxlSWZWaXNpYmxlPSFlbGVtZW50LmRpc2FibGVkO2lmKGZvY3VzYWJsZUlmVmlzaWJsZSl7ZmllbGRzZXQ9JChlbGVtZW50KS5jbG9zZXN0KCJmaWVsZHNldCIpWzBdO2lmKGZpZWxkc2V0KXtmb2N1c2FibGVJZlZpc2libGU9IWZpZWxkc2V0LmRpc2FibGVkO319fWVsc2UgaWYoImEiPT09bm9kZU5hbWUpe2ZvY3VzYWJsZUlmVmlzaWJsZT1lbGVtZW50LmhyZWZ8fGhhc1RhYmluZGV4O31lbHNle2ZvY3VzYWJsZUlmVmlzaWJsZT1oYXNUYWJpbmRleDt9CnJldHVybiBmb2N1c2FibGVJZlZpc2libGUmJiQoZWxlbWVudCkuaXMoIjp2aXNpYmxlIikmJnZpc2libGUoJChlbGVtZW50KSk7fTtmdW5jdGlvbiB2aXNpYmxlKGVsZW1lbnQpe3ZhciB2aXNpYmlsaXR5PWVsZW1lbnQuY3NzKCJ2aXNpYmlsaXR5Iik7d2hpbGUodmlzaWJpbGl0eT09PSJpbmhlcml0Iil7ZWxlbWVudD1lbGVtZW50LnBhcmVudCgpO3Zpc2liaWxpdHk9ZWxlbWVudC5jc3MoInZpc2liaWxpdHkiKTt9CnJldHVybiB2aXNpYmlsaXR5IT09ImhpZGRlbiI7fQokLmV4dGVuZCgkLmV4cHJbIjoiXSx7Zm9jdXNhYmxlOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiAkLnVpLmZvY3VzYWJsZShlbGVtZW50LCQuYXR0cihlbGVtZW50LCJ0YWJpbmRleCIpIT1udWxsKTt9fSk7dmFyIGZvY3VzYWJsZT0kLnVpLmZvY3VzYWJsZTt2YXIga2V5Y29kZT0kLnVpLmtleUNvZGU9e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNQQUNFOjMyLFRBQjo5LFVQOjM4fTt2YXIgc2Nyb2xsUGFyZW50PSQuZm4uc2Nyb2xsUGFyZW50PWZ1bmN0aW9uKGluY2x1ZGVIaWRkZW4pe3ZhciBwb3NpdGlvbj10aGlzLmNzcygicG9zaXRpb24iKSxleGNsdWRlU3RhdGljUGFyZW50PXBvc2l0aW9uPT09ImFic29sdXRlIixvdmVyZmxvd1JlZ2V4PWluY2x1ZGVIaWRkZW4/LyhhdXRvfHNjcm9sbHxoaWRkZW4pLzovKGF1dG98c2Nyb2xsKS8sc2Nyb2xsUGFyZW50PXRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3ZhciBwYXJlbnQ9JCh0aGlzKTtpZihleGNsdWRlU3RhdGljUGFyZW50JiZwYXJlbnQuY3NzKCJwb3NpdGlvbiIpPT09InN0YXRpYyIpe3JldHVybiBmYWxzZTt9CnJldHVybiBvdmVyZmxvd1JlZ2V4LnRlc3QocGFyZW50LmNzcygib3ZlcmZsb3ciKStwYXJlbnQuY3NzKCJvdmVyZmxvdy15IikrCnBhcmVudC5jc3MoIm92ZXJmbG93LXgiKSk7fSkuZXEoMCk7cmV0dXJuIHBvc2l0aW9uPT09ImZpeGVkInx8IXNjcm9sbFBhcmVudC5sZW5ndGg/JCh0aGlzWzBdLm93bmVyRG9jdW1lbnR8fGRvY3VtZW50KTpzY3JvbGxQYXJlbnQ7fTt2YXIgdW5pcXVlSWQ9JC5mbi5leHRlbmQoe3VuaXF1ZUlkOihmdW5jdGlvbigpe3ZhciB1dWlkPTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCF0aGlzLmlkKXt0aGlzLmlkPSJ1aS1pZC0iKygrK3V1aWQpO319KTt9O30pKCkscmVtb3ZlVW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoL151aS1pZC1cZCskLy50ZXN0KHRoaXMuaWQpKXskKHRoaXMpLnJlbW92ZUF0dHIoImlkIik7fX0pO319KTt2YXIgaWU9JC51aS5pZT0hIS9tc2llIFtcdy5dKy8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO3ZhciBtb3VzZUhhbmRsZWQ9ZmFsc2U7JChkb2N1bWVudCkub24oIm1vdXNldXAiLGZ1bmN0aW9uKCl7bW91c2VIYW5kbGVkPWZhbHNlO30pO3ZhciB3aWRnZXRzTW91c2U9JC53aWRnZXQoInVpLm1vdXNlIix7dmVyc2lvbjoiMS4xMi4xIixvcHRpb25zOntjYW5jZWw6ImlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uLCBzZWxlY3QsIG9wdGlvbiIsZGlzdGFuY2U6MSxkZWxheTowfSxfbW91c2VJbml0OmZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpczt0aGlzLmVsZW1lbnQub24oIm1vdXNlZG93bi4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihldmVudCl7cmV0dXJuIHRoYXQuX21vdXNlRG93bihldmVudCk7fSkub24oImNsaWNrLiIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGV2ZW50KXtpZih0cnVlPT09JC5kYXRhKGV2ZW50LnRhcmdldCx0aGF0LndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIpKXskLnJlbW92ZURhdGEoZXZlbnQudGFyZ2V0LHRoYXQud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iik7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlO319KTt0aGlzLnN0YXJ0ZWQ9ZmFsc2U7fSxfbW91c2VEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9mZigiLiIrdGhpcy53aWRnZXROYW1lKTtpZih0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSl7dGhpcy5kb2N1bWVudC5vZmYoIm1vdXNlbW92ZS4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkub2ZmKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7fX0sX21vdXNlRG93bjpmdW5jdGlvbihldmVudCl7aWYobW91c2VIYW5kbGVkKXtyZXR1cm47fQp0aGlzLl9tb3VzZU1vdmVkPWZhbHNlOyh0aGlzLl9tb3VzZVN0YXJ0ZWQmJnRoaXMuX21vdXNlVXAoZXZlbnQpKTt0aGlzLl9tb3VzZURvd25FdmVudD1ldmVudDt2YXIgdGhhdD10aGlzLGJ0bklzTGVmdD0oZXZlbnQud2hpY2g9PT0xKSxlbElzQ2FuY2VsPSh0eXBlb2YgdGhpcy5vcHRpb25zLmNhbmNlbD09PSJzdHJpbmciJiZldmVudC50YXJnZXQubm9kZU5hbWU/JChldmVudC50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoOmZhbHNlKTtpZighYnRuSXNMZWZ0fHxlbElzQ2FuY2VsfHwhdGhpcy5fbW91c2VDYXB0dXJlKGV2ZW50KSl7cmV0dXJuIHRydWU7fQp0aGlzLm1vdXNlRGVsYXlNZXQ9IXRoaXMub3B0aW9ucy5kZWxheTtpZighdGhpcy5tb3VzZURlbGF5TWV0KXt0aGlzLl9tb3VzZURlbGF5VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3RoYXQubW91c2VEZWxheU1ldD10cnVlO30sdGhpcy5vcHRpb25zLmRlbGF5KTt9CmlmKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoZXZlbnQpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGV2ZW50KSl7dGhpcy5fbW91c2VTdGFydGVkPSh0aGlzLl9tb3VzZVN0YXJ0KGV2ZW50KSE9PWZhbHNlKTtpZighdGhpcy5fbW91c2VTdGFydGVkKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiB0cnVlO319CmlmKHRydWU9PT0kLmRhdGEoZXZlbnQudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50IikpeyQucmVtb3ZlRGF0YShldmVudC50YXJnZXQsdGhpcy53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKTt9CnRoaXMuX21vdXNlTW92ZURlbGVnYXRlPWZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gdGhhdC5fbW91c2VNb3ZlKGV2ZW50KTt9O3RoaXMuX21vdXNlVXBEZWxlZ2F0ZT1mdW5jdGlvbihldmVudCl7cmV0dXJuIHRoYXQuX21vdXNlVXAoZXZlbnQpO307dGhpcy5kb2N1bWVudC5vbigibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5vbigibW91c2V1cC4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpO2V2ZW50LnByZXZlbnREZWZhdWx0KCk7bW91c2VIYW5kbGVkPXRydWU7cmV0dXJuIHRydWU7fSxfbW91c2VNb3ZlOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLl9tb3VzZU1vdmVkKXtpZigkLnVpLmllJiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8ZG9jdW1lbnQuZG9jdW1lbnRNb2RlPDkpJiYhZXZlbnQuYnV0dG9uKXtyZXR1cm4gdGhpcy5fbW91c2VVcChldmVudCk7fWVsc2UgaWYoIWV2ZW50LndoaWNoKXtpZihldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleXx8ZXZlbnQub3JpZ2luYWxFdmVudC5jdHJsS2V5fHxldmVudC5vcmlnaW5hbEV2ZW50Lm1ldGFLZXl8fGV2ZW50Lm9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpe3RoaXMuaWdub3JlTWlzc2luZ1doaWNoPXRydWU7fWVsc2UgaWYoIXRoaXMuaWdub3JlTWlzc2luZ1doaWNoKXtyZXR1cm4gdGhpcy5fbW91c2VVcChldmVudCk7fX19CmlmKGV2ZW50LndoaWNofHxldmVudC5idXR0b24pe3RoaXMuX21vdXNlTW92ZWQ9dHJ1ZTt9CmlmKHRoaXMuX21vdXNlU3RhcnRlZCl7dGhpcy5fbW91c2VEcmFnKGV2ZW50KTtyZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoKTt9CmlmKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoZXZlbnQpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGV2ZW50KSl7dGhpcy5fbW91c2VTdGFydGVkPSh0aGlzLl9tb3VzZVN0YXJ0KHRoaXMuX21vdXNlRG93bkV2ZW50LGV2ZW50KSE9PWZhbHNlKTsodGhpcy5fbW91c2VTdGFydGVkP3RoaXMuX21vdXNlRHJhZyhldmVudCk6dGhpcy5fbW91c2VVcChldmVudCkpO30KcmV0dXJuIXRoaXMuX21vdXNlU3RhcnRlZDt9LF9tb3VzZVVwOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmRvY3VtZW50Lm9mZigibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5vZmYoIm1vdXNldXAuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKTtpZih0aGlzLl9tb3VzZVN0YXJ0ZWQpe3RoaXMuX21vdXNlU3RhcnRlZD1mYWxzZTtpZihldmVudC50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQpeyQuZGF0YShldmVudC50YXJnZXQsdGhpcy53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiLHRydWUpO30KdGhpcy5fbW91c2VTdG9wKGV2ZW50KTt9CmlmKHRoaXMuX21vdXNlRGVsYXlUaW1lcil7Y2xlYXJUaW1lb3V0KHRoaXMuX21vdXNlRGVsYXlUaW1lcik7ZGVsZXRlIHRoaXMuX21vdXNlRGVsYXlUaW1lcjt9CnRoaXMuaWdub3JlTWlzc2luZ1doaWNoPWZhbHNlO21vdXNlSGFuZGxlZD1mYWxzZTtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30sX21vdXNlRGlzdGFuY2VNZXQ6ZnVuY3Rpb24oZXZlbnQpe3JldHVybihNYXRoLm1heChNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWC1ldmVudC5wYWdlWCksTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVktZXZlbnQucGFnZVkpKT49dGhpcy5vcHRpb25zLmRpc3RhbmNlKTt9LF9tb3VzZURlbGF5TWV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW91c2VEZWxheU1ldDt9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKCl7fSxfbW91c2VEcmFnOmZ1bmN0aW9uKCl7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKCl7fSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHRydWU7fX0pO3ZhciBwbHVnaW49JC51aS5wbHVnaW49e2FkZDpmdW5jdGlvbihtb2R1bGUsb3B0aW9uLHNldCl7dmFyIGkscHJvdG89JC51aVttb2R1bGVdLnByb3RvdHlwZTtmb3IoaSBpbiBzZXQpe3Byb3RvLnBsdWdpbnNbaV09cHJvdG8ucGx1Z2luc1tpXXx8W107cHJvdG8ucGx1Z2luc1tpXS5wdXNoKFtvcHRpb24sc2V0W2ldXSk7fX0sY2FsbDpmdW5jdGlvbihpbnN0YW5jZSxuYW1lLGFyZ3MsYWxsb3dEaXNjb25uZWN0ZWQpe3ZhciBpLHNldD1pbnN0YW5jZS5wbHVnaW5zW25hbWVdO2lmKCFzZXQpe3JldHVybjt9CmlmKCFhbGxvd0Rpc2Nvbm5lY3RlZCYmKCFpbnN0YW5jZS5lbGVtZW50WzBdLnBhcmVudE5vZGV8fGluc3RhbmNlLmVsZW1lbnRbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExKSl7cmV0dXJuO30KZm9yKGk9MDtpPHNldC5sZW5ndGg7aSsrKXtpZihpbnN0YW5jZS5vcHRpb25zW3NldFtpXVswXV0pe3NldFtpXVsxXS5hcHBseShpbnN0YW5jZS5lbGVtZW50LGFyZ3MpO319fX07dmFyIHNhZmVBY3RpdmVFbGVtZW50PSQudWkuc2FmZUFjdGl2ZUVsZW1lbnQ9ZnVuY3Rpb24oZG9jdW1lbnQpe3ZhciBhY3RpdmVFbGVtZW50O3RyeXthY3RpdmVFbGVtZW50PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7fWNhdGNoKGVycm9yKXthY3RpdmVFbGVtZW50PWRvY3VtZW50LmJvZHk7fQppZighYWN0aXZlRWxlbWVudCl7YWN0aXZlRWxlbWVudD1kb2N1bWVudC5ib2R5O30KaWYoIWFjdGl2ZUVsZW1lbnQubm9kZU5hbWUpe2FjdGl2ZUVsZW1lbnQ9ZG9jdW1lbnQuYm9keTt9CnJldHVybiBhY3RpdmVFbGVtZW50O307dmFyIHNhZmVCbHVyPSQudWkuc2FmZUJsdXI9ZnVuY3Rpb24oZWxlbWVudCl7aWYoZWxlbWVudCYmZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ImJvZHkiKXskKGVsZW1lbnQpLnRyaWdnZXIoImJsdXIiKTt9fTskLndpZGdldCgidWkuZHJhZ2dhYmxlIiwkLnVpLm1vdXNlLHt2ZXJzaW9uOiIxLjEyLjEiLHdpZGdldEV2ZW50UHJlZml4OiJkcmFnIixvcHRpb25zOnthZGRDbGFzc2VzOnRydWUsYXBwZW5kVG86InBhcmVudCIsYXhpczpmYWxzZSxjb25uZWN0VG9Tb3J0YWJsZTpmYWxzZSxjb250YWlubWVudDpmYWxzZSxjdXJzb3I6ImF1dG8iLGN1cnNvckF0OmZhbHNlLGdyaWQ6ZmFsc2UsaGFuZGxlOmZhbHNlLGhlbHBlcjoib3JpZ2luYWwiLGlmcmFtZUZpeDpmYWxzZSxvcGFjaXR5OmZhbHNlLHJlZnJlc2hQb3NpdGlvbnM6ZmFsc2UscmV2ZXJ0OmZhbHNlLHJldmVydER1cmF0aW9uOjUwMCxzY29wZToiZGVmYXVsdCIsc2Nyb2xsOnRydWUsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc25hcDpmYWxzZSxzbmFwTW9kZToiYm90aCIsc25hcFRvbGVyYW5jZToyMCxzdGFjazpmYWxzZSx6SW5kZXg6ZmFsc2UsZHJhZzpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmhlbHBlcj09PSJvcmlnaW5hbCIpe3RoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKTt9CmlmKHRoaXMub3B0aW9ucy5hZGRDbGFzc2VzKXt0aGlzLl9hZGRDbGFzcygidWktZHJhZ2dhYmxlIik7fQp0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTt0aGlzLl9tb3VzZUluaXQoKTt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzLl9zdXBlcihrZXksdmFsdWUpO2lmKGtleT09PSJoYW5kbGUiKXt0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKTt0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTt9fSxfZGVzdHJveTpmdW5jdGlvbigpe2lmKCh0aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50KS5pcygiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpKXt0aGlzLmRlc3Ryb3lPbkNsZWFyPXRydWU7cmV0dXJuO30KdGhpcy5fcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lKCk7dGhpcy5fbW91c2VEZXN0cm95KCk7fSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbz10aGlzLm9wdGlvbnM7aWYodGhpcy5oZWxwZXJ8fG8uZGlzYWJsZWR8fCQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIudWktcmVzaXphYmxlLWhhbmRsZSIpLmxlbmd0aD4wKXtyZXR1cm4gZmFsc2U7fQp0aGlzLmhhbmRsZT10aGlzLl9nZXRIYW5kbGUoZXZlbnQpO2lmKCF0aGlzLmhhbmRsZSl7cmV0dXJuIGZhbHNlO30KdGhpcy5fYmx1ckFjdGl2ZUVsZW1lbnQoZXZlbnQpO3RoaXMuX2Jsb2NrRnJhbWVzKG8uaWZyYW1lRml4PT09dHJ1ZT8iaWZyYW1lIjpvLmlmcmFtZUZpeCk7cmV0dXJuIHRydWU7fSxfYmxvY2tGcmFtZXM6ZnVuY3Rpb24oc2VsZWN0b3Ipe3RoaXMuaWZyYW1lQmxvY2tzPXRoaXMuZG9jdW1lbnQuZmluZChzZWxlY3RvcikubWFwKGZ1bmN0aW9uKCl7dmFyIGlmcmFtZT0kKHRoaXMpO3JldHVybiAkKCI8ZGl2PiIpLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpLmFwcGVuZFRvKGlmcmFtZS5wYXJlbnQoKSkub3V0ZXJXaWR0aChpZnJhbWUub3V0ZXJXaWR0aCgpKS5vdXRlckhlaWdodChpZnJhbWUub3V0ZXJIZWlnaHQoKSkub2Zmc2V0KGlmcmFtZS5vZmZzZXQoKSlbMF07fSk7fSxfdW5ibG9ja0ZyYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuaWZyYW1lQmxvY2tzKXt0aGlzLmlmcmFtZUJsb2Nrcy5yZW1vdmUoKTtkZWxldGUgdGhpcy5pZnJhbWVCbG9ja3M7fX0sX2JsdXJBY3RpdmVFbGVtZW50OmZ1bmN0aW9uKGV2ZW50KXt2YXIgYWN0aXZlRWxlbWVudD0kLnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pLHRhcmdldD0kKGV2ZW50LnRhcmdldCk7aWYodGFyZ2V0LmNsb3Nlc3QoYWN0aXZlRWxlbWVudCkubGVuZ3RoKXtyZXR1cm47fQokLnVpLnNhZmVCbHVyKGFjdGl2ZUVsZW1lbnQpO30sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZXZlbnQpe3ZhciBvPXRoaXMub3B0aW9uczt0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpO3RoaXMuX2FkZENsYXNzKHRoaXMuaGVscGVyLCJ1aS1kcmFnZ2FibGUtZHJhZ2dpbmciKTt0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7aWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpczt9CnRoaXMuX2NhY2hlTWFyZ2lucygpO3RoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpO3RoaXMuc2Nyb2xsUGFyZW50PXRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCh0cnVlKTt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt0aGlzLmhhc0ZpeGVkQW5jZXN0b3I9dGhpcy5oZWxwZXIucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmNzcygicG9zaXRpb24iKT09PSJmaXhlZCI7fSkubGVuZ3RoPjA7dGhpcy5wb3NpdGlvbkFicz10aGlzLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5fcmVmcmVzaE9mZnNldHMoZXZlbnQpO3RoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQsZmFsc2UpO3RoaXMub3JpZ2luYWxQYWdlWD1ldmVudC5wYWdlWDt0aGlzLm9yaWdpbmFsUGFnZVk9ZXZlbnQucGFnZVk7KG8uY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoby5jdXJzb3JBdCkpO3RoaXMuX3NldENvbnRhaW5tZW50KCk7aWYodGhpcy5fdHJpZ2dlcigic3RhcnQiLGV2ZW50KT09PWZhbHNlKXt0aGlzLl9jbGVhcigpO3JldHVybiBmYWxzZTt9CnRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTtpZigkLnVpLmRkbWFuYWdlciYmIW8uZHJvcEJlaGF2aW91cil7JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxldmVudCk7fQp0aGlzLl9tb3VzZURyYWcoZXZlbnQsdHJ1ZSk7aWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmRyYWdTdGFydCh0aGlzLGV2ZW50KTt9CnJldHVybiB0cnVlO30sX3JlZnJlc2hPZmZzZXRzOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLm9mZnNldD17dG9wOnRoaXMucG9zaXRpb25BYnMudG9wLXRoaXMubWFyZ2lucy50b3AsbGVmdDp0aGlzLnBvc2l0aW9uQWJzLmxlZnQtdGhpcy5tYXJnaW5zLmxlZnQsc2Nyb2xsOmZhbHNlLHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfTt0aGlzLm9mZnNldC5jbGljaz17bGVmdDpldmVudC5wYWdlWC10aGlzLm9mZnNldC5sZWZ0LHRvcDpldmVudC5wYWdlWS10aGlzLm9mZnNldC50b3B9O30sX21vdXNlRHJhZzpmdW5jdGlvbihldmVudCxub1Byb3BhZ2F0aW9uKXtpZih0aGlzLmhhc0ZpeGVkQW5jZXN0b3Ipe3RoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKTt9CnRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCx0cnVlKTt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCFub1Byb3BhZ2F0aW9uKXt2YXIgdWk9dGhpcy5fdWlIYXNoKCk7aWYodGhpcy5fdHJpZ2dlcigiZHJhZyIsZXZlbnQsdWkpPT09ZmFsc2Upe3RoaXMuX21vdXNlVXAobmV3ICQuRXZlbnQoIm1vdXNldXAiLGV2ZW50KSk7cmV0dXJuIGZhbHNlO30KdGhpcy5wb3NpdGlvbj11aS5wb3NpdGlvbjt9CnRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCI7dGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCI7aWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxldmVudCk7fQpyZXR1cm4gZmFsc2U7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGhhdD10aGlzLGRyb3BwZWQ9ZmFsc2U7aWYoJC51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91cil7ZHJvcHBlZD0kLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsZXZlbnQpO30KaWYodGhpcy5kcm9wcGVkKXtkcm9wcGVkPXRoaXMuZHJvcHBlZDt0aGlzLmRyb3BwZWQ9ZmFsc2U7fQppZigodGhpcy5vcHRpb25zLnJldmVydD09PSJpbnZhbGlkIiYmIWRyb3BwZWQpfHwodGhpcy5vcHRpb25zLnJldmVydD09PSJ2YWxpZCImJmRyb3BwZWQpfHx0aGlzLm9wdGlvbnMucmV2ZXJ0PT09dHJ1ZXx8KCQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmV2ZXJ0KSYmdGhpcy5vcHRpb25zLnJldmVydC5jYWxsKHRoaXMuZWxlbWVudCxkcm9wcGVkKSkpeyQodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtpZih0aGF0Ll90cmlnZ2VyKCJzdG9wIixldmVudCkhPT1mYWxzZSl7dGhhdC5fY2xlYXIoKTt9fSk7fWVsc2V7aWYodGhpcy5fdHJpZ2dlcigic3RvcCIsZXZlbnQpIT09ZmFsc2Upe3RoaXMuX2NsZWFyKCk7fX0KcmV0dXJuIGZhbHNlO30sX21vdXNlVXA6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3VuYmxvY2tGcmFtZXMoKTtpZigkLnVpLmRkbWFuYWdlcil7JC51aS5kZG1hbmFnZXIuZHJhZ1N0b3AodGhpcyxldmVudCk7fQppZih0aGlzLmhhbmRsZUVsZW1lbnQuaXMoZXZlbnQudGFyZ2V0KSl7dGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIik7fQpyZXR1cm4gJC51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLGV2ZW50KTt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKHRoaXMuaGVscGVyLmlzKCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIikpe3RoaXMuX21vdXNlVXAobmV3ICQuRXZlbnQoIm1vdXNldXAiLHt0YXJnZXQ6dGhpcy5lbGVtZW50WzBdfSkpO31lbHNle3RoaXMuX2NsZWFyKCk7fQpyZXR1cm4gdGhpczt9LF9nZXRIYW5kbGU6ZnVuY3Rpb24oZXZlbnQpe3JldHVybiB0aGlzLm9wdGlvbnMuaGFuZGxlPyEhJChldmVudC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aDp0cnVlO30sX3NldEhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlRWxlbWVudD10aGlzLm9wdGlvbnMuaGFuZGxlP3RoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5oYW5kbGUpOnRoaXMuZWxlbWVudDt0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZUVsZW1lbnQsInVpLWRyYWdnYWJsZS1oYW5kbGUiKTt9LF9yZW1vdmVIYW5kbGVDbGFzc05hbWU6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZUVsZW1lbnQsInVpLWRyYWdnYWJsZS1oYW5kbGUiKTt9LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oZXZlbnQpe3ZhciBvPXRoaXMub3B0aW9ucyxoZWxwZXJJc0Z1bmN0aW9uPSQuaXNGdW5jdGlvbihvLmhlbHBlciksaGVscGVyPWhlbHBlcklzRnVuY3Rpb24/JChvLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW2V2ZW50XSkpOihvLmhlbHBlcj09PSJjbG9uZSI/dGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0cigiaWQiKTp0aGlzLmVsZW1lbnQpO2lmKCFoZWxwZXIucGFyZW50cygiYm9keSIpLmxlbmd0aCl7aGVscGVyLmFwcGVuZFRvKChvLmFwcGVuZFRvPT09InBhcmVudCI/dGhpcy5lbGVtZW50WzBdLnBhcmVudE5vZGU6by5hcHBlbmRUbykpO30KaWYoaGVscGVySXNGdW5jdGlvbiYmaGVscGVyWzBdPT09dGhpcy5lbGVtZW50WzBdKXt0aGlzLl9zZXRQb3NpdGlvblJlbGF0aXZlKCk7fQppZihoZWxwZXJbMF0hPT10aGlzLmVsZW1lbnRbMF0mJiEoLyhmaXhlZHxhYnNvbHV0ZSkvKS50ZXN0KGhlbHBlci5jc3MoInBvc2l0aW9uIikpKXtoZWxwZXIuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIik7fQpyZXR1cm4gaGVscGVyO30sX3NldFBvc2l0aW9uUmVsYXRpdmU6ZnVuY3Rpb24oKXtpZighKC9eKD86cnxhfGYpLykudGVzdCh0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKSl7dGhpcy5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7fX0sX2FkanVzdE9mZnNldEZyb21IZWxwZXI6ZnVuY3Rpb24ob2JqKXtpZih0eXBlb2Ygb2JqPT09InN0cmluZyIpe29iaj1vYmouc3BsaXQoIiAiKTt9CmlmKCQuaXNBcnJheShvYmopKXtvYmo9e2xlZnQ6K29ialswXSx0b3A6K29ialsxXXx8MH07fQppZigibGVmdCJpbiBvYmope3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9b2JqLmxlZnQrdGhpcy5tYXJnaW5zLmxlZnQ7fQppZigicmlnaHQiaW4gb2JqKXt0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtb2JqLnJpZ2h0K3RoaXMubWFyZ2lucy5sZWZ0O30KaWYoInRvcCJpbiBvYmope3RoaXMub2Zmc2V0LmNsaWNrLnRvcD1vYmoudG9wK3RoaXMubWFyZ2lucy50b3A7fQppZigiYm90dG9tImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2sudG9wPXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LW9iai5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcDt9fSxfaXNSb290Tm9kZTpmdW5jdGlvbihlbGVtZW50KXtyZXR1cm4oLyhodG1sfGJvZHkpL2kpLnRlc3QoZWxlbWVudC50YWdOYW1lKXx8ZWxlbWVudD09PXRoaXMuZG9jdW1lbnRbMF07fSxfZ2V0UGFyZW50T2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIHBvPXRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpLGRvY3VtZW50PXRoaXMuZG9jdW1lbnRbMF07aWYodGhpcy5jc3NQb3NpdGlvbj09PSJhYnNvbHV0ZSImJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJiQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pKXtwby5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk7cG8udG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTt9CmlmKHRoaXMuX2lzUm9vdE5vZGUodGhpcy5vZmZzZXRQYXJlbnRbMF0pKXtwbz17dG9wOjAsbGVmdDowfTt9CnJldHVybnt0b3A6cG8udG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OnBvLmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKX07fSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNzc1Bvc2l0aW9uIT09InJlbGF0aXZlIil7cmV0dXJue3RvcDowLGxlZnQ6MH07fQp2YXIgcD10aGlzLmVsZW1lbnQucG9zaXRpb24oKSxzY3JvbGxJc1Jvb3ROb2RlPXRoaXMuX2lzUm9vdE5vZGUodGhpcy5zY3JvbGxQYXJlbnRbMF0pO3JldHVybnt0b3A6cC50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSsKKCFzY3JvbGxJc1Jvb3ROb2RlP3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOjApLGxlZnQ6cC5sZWZ0LShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSwxMCl8fDApKwooIXNjcm9sbElzUm9vdE5vZGU/dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOjApfTt9LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6KHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpbkxlZnQiKSwxMCl8fDApLHRvcDoocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksMTApfHwwKSxyaWdodDoocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKSwxMCl8fDApLGJvdHRvbToocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luQm90dG9tIiksMTApfHwwKX07fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX07fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgaXNVc2VyU2Nyb2xsYWJsZSxjLGNlLG89dGhpcy5vcHRpb25zLGRvY3VtZW50PXRoaXMuZG9jdW1lbnRbMF07dGhpcy5yZWxhdGl2ZUNvbnRhaW5lcj1udWxsO2lmKCFvLmNvbnRhaW5tZW50KXt0aGlzLmNvbnRhaW5tZW50PW51bGw7cmV0dXJuO30KaWYoby5jb250YWlubWVudD09PSJ3aW5kb3ciKXt0aGlzLmNvbnRhaW5tZW50PVskKHdpbmRvdykuc2Nyb2xsTGVmdCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsJCh3aW5kb3cpLnNjcm9sbFRvcCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLCQod2luZG93KS5zY3JvbGxMZWZ0KCkrJCh3aW5kb3cpLndpZHRoKCktCnRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsJCh3aW5kb3cpLnNjcm9sbFRvcCgpKwooJCh3aW5kb3cpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS0KdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF07cmV0dXJuO30KaWYoby5jb250YWlubWVudD09PSJkb2N1bWVudCIpe3RoaXMuY29udGFpbm1lbnQ9WzAsMCwkKGRvY3VtZW50KS53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsKCQoZG9jdW1lbnQpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS0KdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF07cmV0dXJuO30KaWYoby5jb250YWlubWVudC5jb25zdHJ1Y3Rvcj09PUFycmF5KXt0aGlzLmNvbnRhaW5tZW50PW8uY29udGFpbm1lbnQ7cmV0dXJuO30KaWYoby5jb250YWlubWVudD09PSJwYXJlbnQiKXtvLmNvbnRhaW5tZW50PXRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGU7fQpjPSQoby5jb250YWlubWVudCk7Y2U9Y1swXTtpZighY2Upe3JldHVybjt9CmlzVXNlclNjcm9sbGFibGU9LyhzY3JvbGx8YXV0bykvLnRlc3QoYy5jc3MoIm92ZXJmbG93IikpO3RoaXMuY29udGFpbm1lbnQ9WyhwYXJzZUludChjLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKSsKKHBhcnNlSW50KGMuY3NzKCJwYWRkaW5nTGVmdCIpLDEwKXx8MCksKHBhcnNlSW50KGMuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCkrCihwYXJzZUludChjLmNzcygicGFkZGluZ1RvcCIpLDEwKXx8MCksKGlzVXNlclNjcm9sbGFibGU/TWF0aC5tYXgoY2Uuc2Nyb2xsV2lkdGgsY2Uub2Zmc2V0V2lkdGgpOmNlLm9mZnNldFdpZHRoKS0KKHBhcnNlSW50KGMuY3NzKCJib3JkZXJSaWdodFdpZHRoIiksMTApfHwwKS0KKHBhcnNlSW50KGMuY3NzKCJwYWRkaW5nUmlnaHQiKSwxMCl8fDApLQp0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLQp0aGlzLm1hcmdpbnMubGVmdC0KdGhpcy5tYXJnaW5zLnJpZ2h0LChpc1VzZXJTY3JvbGxhYmxlP01hdGgubWF4KGNlLnNjcm9sbEhlaWdodCxjZS5vZmZzZXRIZWlnaHQpOmNlLm9mZnNldEhlaWdodCktCihwYXJzZUludChjLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSwxMCl8fDApLQoocGFyc2VJbnQoYy5jc3MoInBhZGRpbmdCb3R0b20iKSwxMCl8fDApLQp0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC0KdGhpcy5tYXJnaW5zLnRvcC0KdGhpcy5tYXJnaW5zLmJvdHRvbV07dGhpcy5yZWxhdGl2ZUNvbnRhaW5lcj1jO30sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKGQscG9zKXtpZighcG9zKXtwb3M9dGhpcy5wb3NpdGlvbjt9CnZhciBtb2Q9ZD09PSJhYnNvbHV0ZSI/MTotMSxzY3JvbGxJc1Jvb3ROb2RlPXRoaXMuX2lzUm9vdE5vZGUodGhpcy5zY3JvbGxQYXJlbnRbMF0pO3JldHVybnt0b3A6KHBvcy50b3ArCnRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCptb2QrCnRoaXMub2Zmc2V0LnBhcmVudC50b3AqbW9kLQooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLm9mZnNldC5zY3JvbGwudG9wOihzY3JvbGxJc1Jvb3ROb2RlPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCkpKm1vZCkpLGxlZnQ6KHBvcy5sZWZ0Kwp0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0Km1vZCsKdGhpcy5vZmZzZXQucGFyZW50LmxlZnQqbW9kLQooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLm9mZnNldC5zY3JvbGwubGVmdDooc2Nyb2xsSXNSb290Tm9kZT8wOnRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0KSkqbW9kKSl9O30sX2dlbmVyYXRlUG9zaXRpb246ZnVuY3Rpb24oZXZlbnQsY29uc3RyYWluUG9zaXRpb24pe3ZhciBjb250YWlubWVudCxjbyx0b3AsbGVmdCxvPXRoaXMub3B0aW9ucyxzY3JvbGxJc1Jvb3ROb2RlPXRoaXMuX2lzUm9vdE5vZGUodGhpcy5zY3JvbGxQYXJlbnRbMF0pLHBhZ2VYPWV2ZW50LnBhZ2VYLHBhZ2VZPWV2ZW50LnBhZ2VZO2lmKCFzY3JvbGxJc1Jvb3ROb2RlfHwhdGhpcy5vZmZzZXQuc2Nyb2xsKXt0aGlzLm9mZnNldC5zY3JvbGw9e3RvcDp0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OnRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX07fQppZihjb25zdHJhaW5Qb3NpdGlvbil7aWYodGhpcy5jb250YWlubWVudCl7aWYodGhpcy5yZWxhdGl2ZUNvbnRhaW5lcil7Y289dGhpcy5yZWxhdGl2ZUNvbnRhaW5lci5vZmZzZXQoKTtjb250YWlubWVudD1bdGhpcy5jb250YWlubWVudFswXStjby5sZWZ0LHRoaXMuY29udGFpbm1lbnRbMV0rY28udG9wLHRoaXMuY29udGFpbm1lbnRbMl0rY28ubGVmdCx0aGlzLmNvbnRhaW5tZW50WzNdK2NvLnRvcF07fWVsc2V7Y29udGFpbm1lbnQ9dGhpcy5jb250YWlubWVudDt9CmlmKGV2ZW50LnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8Y29udGFpbm1lbnRbMF0pe3BhZ2VYPWNvbnRhaW5tZW50WzBdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7fQppZihldmVudC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8Y29udGFpbm1lbnRbMV0pe3BhZ2VZPWNvbnRhaW5tZW50WzFdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcDt9CmlmKGV2ZW50LnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+Y29udGFpbm1lbnRbMl0pe3BhZ2VYPWNvbnRhaW5tZW50WzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7fQppZihldmVudC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A+Y29udGFpbm1lbnRbM10pe3BhZ2VZPWNvbnRhaW5tZW50WzNdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcDt9fQppZihvLmdyaWQpe3RvcD1vLmdyaWRbMV0/dGhpcy5vcmlnaW5hbFBhZ2VZK01hdGgucm91bmQoKHBhZ2VZLQp0aGlzLm9yaWdpbmFsUGFnZVkpL28uZ3JpZFsxXSkqby5ncmlkWzFdOnRoaXMub3JpZ2luYWxQYWdlWTtwYWdlWT1jb250YWlubWVudD8oKHRvcC10aGlzLm9mZnNldC5jbGljay50b3A+PWNvbnRhaW5tZW50WzFdfHx0b3AtdGhpcy5vZmZzZXQuY2xpY2sudG9wPmNvbnRhaW5tZW50WzNdKT90b3A6KCh0b3AtdGhpcy5vZmZzZXQuY2xpY2sudG9wPj1jb250YWlubWVudFsxXSk/dG9wLW8uZ3JpZFsxXTp0b3Arby5ncmlkWzFdKSk6dG9wO2xlZnQ9by5ncmlkWzBdP3RoaXMub3JpZ2luYWxQYWdlWCsKTWF0aC5yb3VuZCgocGFnZVgtdGhpcy5vcmlnaW5hbFBhZ2VYKS9vLmdyaWRbMF0pKm8uZ3JpZFswXTp0aGlzLm9yaWdpbmFsUGFnZVg7cGFnZVg9Y29udGFpbm1lbnQ/KChsZWZ0LXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PWNvbnRhaW5tZW50WzBdfHxsZWZ0LXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+Y29udGFpbm1lbnRbMl0pP2xlZnQ6KChsZWZ0LXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PWNvbnRhaW5tZW50WzBdKT9sZWZ0LW8uZ3JpZFswXTpsZWZ0K28uZ3JpZFswXSkpOmxlZnQ7fQppZihvLmF4aXM9PT0ieSIpe3BhZ2VYPXRoaXMub3JpZ2luYWxQYWdlWDt9CmlmKG8uYXhpcz09PSJ4Iil7cGFnZVk9dGhpcy5vcmlnaW5hbFBhZ2VZO319CnJldHVybnt0b3A6KHBhZ2VZLQp0aGlzLm9mZnNldC5jbGljay50b3AtCnRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC0KdGhpcy5vZmZzZXQucGFyZW50LnRvcCsKKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLm9mZnNldC5zY3JvbGwudG9wOihzY3JvbGxJc1Jvb3ROb2RlPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCkpKSxsZWZ0OihwYWdlWC0KdGhpcy5vZmZzZXQuY2xpY2subGVmdC0KdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC0KdGhpcy5vZmZzZXQucGFyZW50LmxlZnQrCih0aGlzLmNzc1Bvc2l0aW9uPT09ImZpeGVkIj8tdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQ6KHNjcm9sbElzUm9vdE5vZGU/MDp0aGlzLm9mZnNldC5zY3JvbGwubGVmdCkpKX07fSxfY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhlbHBlciwidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7aWYodGhpcy5oZWxwZXJbMF0hPT10aGlzLmVsZW1lbnRbMF0mJiF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwpe3RoaXMuaGVscGVyLnJlbW92ZSgpO30KdGhpcy5oZWxwZXI9bnVsbDt0aGlzLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2U7aWYodGhpcy5kZXN0cm95T25DbGVhcil7dGhpcy5kZXN0cm95KCk7fX0sX3RyaWdnZXI6ZnVuY3Rpb24odHlwZSxldmVudCx1aSl7dWk9dWl8fHRoaXMuX3VpSGFzaCgpOyQudWkucGx1Z2luLmNhbGwodGhpcyx0eXBlLFtldmVudCx1aSx0aGlzXSx0cnVlKTtpZigvXihkcmFnfHN0YXJ0fHN0b3ApLy50ZXN0KHR5cGUpKXt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO3VpLm9mZnNldD10aGlzLnBvc2l0aW9uQWJzO30KcmV0dXJuICQuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5jYWxsKHRoaXMsdHlwZSxldmVudCx1aSk7fSxwbHVnaW5zOnt9LF91aUhhc2g6ZnVuY3Rpb24oKXtyZXR1cm57aGVscGVyOnRoaXMuaGVscGVyLHBvc2l0aW9uOnRoaXMucG9zaXRpb24sb3JpZ2luYWxQb3NpdGlvbjp0aGlzLm9yaWdpbmFsUG9zaXRpb24sb2Zmc2V0OnRoaXMucG9zaXRpb25BYnN9O319KTskLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsImNvbm5lY3RUb1NvcnRhYmxlIix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksZHJhZ2dhYmxlKXt2YXIgdWlTb3J0YWJsZT0kLmV4dGVuZCh7fSx1aSx7aXRlbTpkcmFnZ2FibGUuZWxlbWVudH0pO2RyYWdnYWJsZS5zb3J0YWJsZXM9W107JChkcmFnZ2FibGUub3B0aW9ucy5jb25uZWN0VG9Tb3J0YWJsZSkuZWFjaChmdW5jdGlvbigpe3ZhciBzb3J0YWJsZT0kKHRoaXMpLnNvcnRhYmxlKCJpbnN0YW5jZSIpO2lmKHNvcnRhYmxlJiYhc29ydGFibGUub3B0aW9ucy5kaXNhYmxlZCl7ZHJhZ2dhYmxlLnNvcnRhYmxlcy5wdXNoKHNvcnRhYmxlKTtzb3J0YWJsZS5yZWZyZXNoUG9zaXRpb25zKCk7c29ydGFibGUuX3RyaWdnZXIoImFjdGl2YXRlIixldmVudCx1aVNvcnRhYmxlKTt9fSk7fSxzdG9wOmZ1bmN0aW9uKGV2ZW50LHVpLGRyYWdnYWJsZSl7dmFyIHVpU29ydGFibGU9JC5leHRlbmQoe30sdWkse2l0ZW06ZHJhZ2dhYmxlLmVsZW1lbnR9KTtkcmFnZ2FibGUuY2FuY2VsSGVscGVyUmVtb3ZhbD1mYWxzZTskLmVhY2goZHJhZ2dhYmxlLnNvcnRhYmxlcyxmdW5jdGlvbigpe3ZhciBzb3J0YWJsZT10aGlzO2lmKHNvcnRhYmxlLmlzT3Zlcil7c29ydGFibGUuaXNPdmVyPTA7ZHJhZ2dhYmxlLmNhbmNlbEhlbHBlclJlbW92YWw9dHJ1ZTtzb3J0YWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsPWZhbHNlO3NvcnRhYmxlLl9zdG9yZWRDU1M9e3Bvc2l0aW9uOnNvcnRhYmxlLnBsYWNlaG9sZGVyLmNzcygicG9zaXRpb24iKSx0b3A6c29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCJ0b3AiKSxsZWZ0OnNvcnRhYmxlLnBsYWNlaG9sZGVyLmNzcygibGVmdCIpfTtzb3J0YWJsZS5fbW91c2VTdG9wKGV2ZW50KTtzb3J0YWJsZS5vcHRpb25zLmhlbHBlcj1zb3J0YWJsZS5vcHRpb25zLl9oZWxwZXI7fWVsc2V7c29ydGFibGUuY2FuY2VsSGVscGVyUmVtb3ZhbD10cnVlO3NvcnRhYmxlLl90cmlnZ2VyKCJkZWFjdGl2YXRlIixldmVudCx1aVNvcnRhYmxlKTt9fSk7fSxkcmFnOmZ1bmN0aW9uKGV2ZW50LHVpLGRyYWdnYWJsZSl7JC5lYWNoKGRyYWdnYWJsZS5zb3J0YWJsZXMsZnVuY3Rpb24oKXt2YXIgaW5uZXJtb3N0SW50ZXJzZWN0aW5nPWZhbHNlLHNvcnRhYmxlPXRoaXM7c29ydGFibGUucG9zaXRpb25BYnM9ZHJhZ2dhYmxlLnBvc2l0aW9uQWJzO3NvcnRhYmxlLmhlbHBlclByb3BvcnRpb25zPWRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucztzb3J0YWJsZS5vZmZzZXQuY2xpY2s9ZHJhZ2dhYmxlLm9mZnNldC5jbGljaztpZihzb3J0YWJsZS5faW50ZXJzZWN0c1dpdGgoc29ydGFibGUuY29udGFpbmVyQ2FjaGUpKXtpbm5lcm1vc3RJbnRlcnNlY3Rpbmc9dHJ1ZTskLmVhY2goZHJhZ2dhYmxlLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMucG9zaXRpb25BYnM9ZHJhZ2dhYmxlLnBvc2l0aW9uQWJzO3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9ZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zO3RoaXMub2Zmc2V0LmNsaWNrPWRyYWdnYWJsZS5vZmZzZXQuY2xpY2s7aWYodGhpcyE9PXNvcnRhYmxlJiZ0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lckNhY2hlKSYmJC5jb250YWlucyhzb3J0YWJsZS5lbGVtZW50WzBdLHRoaXMuZWxlbWVudFswXSkpe2lubmVybW9zdEludGVyc2VjdGluZz1mYWxzZTt9CnJldHVybiBpbm5lcm1vc3RJbnRlcnNlY3Rpbmc7fSk7fQppZihpbm5lcm1vc3RJbnRlcnNlY3Rpbmcpe2lmKCFzb3J0YWJsZS5pc092ZXIpe3NvcnRhYmxlLmlzT3Zlcj0xO2RyYWdnYWJsZS5fcGFyZW50PXVpLmhlbHBlci5wYXJlbnQoKTtzb3J0YWJsZS5jdXJyZW50SXRlbT11aS5oZWxwZXIuYXBwZW5kVG8oc29ydGFibGUuZWxlbWVudCkuZGF0YSgidWktc29ydGFibGUtaXRlbSIsdHJ1ZSk7c29ydGFibGUub3B0aW9ucy5faGVscGVyPXNvcnRhYmxlLm9wdGlvbnMuaGVscGVyO3NvcnRhYmxlLm9wdGlvbnMuaGVscGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHVpLmhlbHBlclswXTt9O2V2ZW50LnRhcmdldD1zb3J0YWJsZS5jdXJyZW50SXRlbVswXTtzb3J0YWJsZS5fbW91c2VDYXB0dXJlKGV2ZW50LHRydWUpO3NvcnRhYmxlLl9tb3VzZVN0YXJ0KGV2ZW50LHRydWUsdHJ1ZSk7c29ydGFibGUub2Zmc2V0LmNsaWNrLnRvcD1kcmFnZ2FibGUub2Zmc2V0LmNsaWNrLnRvcDtzb3J0YWJsZS5vZmZzZXQuY2xpY2subGVmdD1kcmFnZ2FibGUub2Zmc2V0LmNsaWNrLmxlZnQ7c29ydGFibGUub2Zmc2V0LnBhcmVudC5sZWZ0LT1kcmFnZ2FibGUub2Zmc2V0LnBhcmVudC5sZWZ0LQpzb3J0YWJsZS5vZmZzZXQucGFyZW50LmxlZnQ7c29ydGFibGUub2Zmc2V0LnBhcmVudC50b3AtPWRyYWdnYWJsZS5vZmZzZXQucGFyZW50LnRvcC0Kc29ydGFibGUub2Zmc2V0LnBhcmVudC50b3A7ZHJhZ2dhYmxlLl90cmlnZ2VyKCJ0b1NvcnRhYmxlIixldmVudCk7ZHJhZ2dhYmxlLmRyb3BwZWQ9c29ydGFibGUuZWxlbWVudDskLmVhY2goZHJhZ2dhYmxlLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO30pO2RyYWdnYWJsZS5jdXJyZW50SXRlbT1kcmFnZ2FibGUuZWxlbWVudDtzb3J0YWJsZS5mcm9tT3V0c2lkZT1kcmFnZ2FibGU7fQppZihzb3J0YWJsZS5jdXJyZW50SXRlbSl7c29ydGFibGUuX21vdXNlRHJhZyhldmVudCk7dWkucG9zaXRpb249c29ydGFibGUucG9zaXRpb247fX1lbHNle2lmKHNvcnRhYmxlLmlzT3Zlcil7c29ydGFibGUuaXNPdmVyPTA7c29ydGFibGUuY2FuY2VsSGVscGVyUmVtb3ZhbD10cnVlO3NvcnRhYmxlLm9wdGlvbnMuX3JldmVydD1zb3J0YWJsZS5vcHRpb25zLnJldmVydDtzb3J0YWJsZS5vcHRpb25zLnJldmVydD1mYWxzZTtzb3J0YWJsZS5fdHJpZ2dlcigib3V0IixldmVudCxzb3J0YWJsZS5fdWlIYXNoKHNvcnRhYmxlKSk7c29ydGFibGUuX21vdXNlU3RvcChldmVudCx0cnVlKTtzb3J0YWJsZS5vcHRpb25zLnJldmVydD1zb3J0YWJsZS5vcHRpb25zLl9yZXZlcnQ7c29ydGFibGUub3B0aW9ucy5oZWxwZXI9c29ydGFibGUub3B0aW9ucy5faGVscGVyO2lmKHNvcnRhYmxlLnBsYWNlaG9sZGVyKXtzb3J0YWJsZS5wbGFjZWhvbGRlci5yZW1vdmUoKTt9CnVpLmhlbHBlci5hcHBlbmRUbyhkcmFnZ2FibGUuX3BhcmVudCk7ZHJhZ2dhYmxlLl9yZWZyZXNoT2Zmc2V0cyhldmVudCk7dWkucG9zaXRpb249ZHJhZ2dhYmxlLl9nZW5lcmF0ZVBvc2l0aW9uKGV2ZW50LHRydWUpO2RyYWdnYWJsZS5fdHJpZ2dlcigiZnJvbVNvcnRhYmxlIixldmVudCk7ZHJhZ2dhYmxlLmRyb3BwZWQ9ZmFsc2U7JC5lYWNoKGRyYWdnYWJsZS5zb3J0YWJsZXMsZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTt9KTt9fX0pO319KTskLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsImN1cnNvciIse3N0YXJ0OmZ1bmN0aW9uKGV2ZW50LHVpLGluc3RhbmNlKXt2YXIgdD0kKCJib2R5Iiksbz1pbnN0YW5jZS5vcHRpb25zO2lmKHQuY3NzKCJjdXJzb3IiKSl7by5fY3Vyc29yPXQuY3NzKCJjdXJzb3IiKTt9CnQuY3NzKCJjdXJzb3IiLG8uY3Vyc29yKTt9LHN0b3A6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdGFuY2Upe3ZhciBvPWluc3RhbmNlLm9wdGlvbnM7aWYoby5fY3Vyc29yKXskKCJib2R5IikuY3NzKCJjdXJzb3IiLG8uX2N1cnNvcik7fX19KTskLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsIm9wYWNpdHkiLHtzdGFydDpmdW5jdGlvbihldmVudCx1aSxpbnN0YW5jZSl7dmFyIHQ9JCh1aS5oZWxwZXIpLG89aW5zdGFuY2Uub3B0aW9ucztpZih0LmNzcygib3BhY2l0eSIpKXtvLl9vcGFjaXR5PXQuY3NzKCJvcGFjaXR5Iik7fQp0LmNzcygib3BhY2l0eSIsby5vcGFjaXR5KTt9LHN0b3A6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdGFuY2Upe3ZhciBvPWluc3RhbmNlLm9wdGlvbnM7aWYoby5fb3BhY2l0eSl7JCh1aS5oZWxwZXIpLmNzcygib3BhY2l0eSIsby5fb3BhY2l0eSk7fX19KTskLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsInNjcm9sbCIse3N0YXJ0OmZ1bmN0aW9uKGV2ZW50LHVpLGkpe2lmKCFpLnNjcm9sbFBhcmVudE5vdEhpZGRlbil7aS5zY3JvbGxQYXJlbnROb3RIaWRkZW49aS5oZWxwZXIuc2Nyb2xsUGFyZW50KGZhbHNlKTt9CmlmKGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWzBdIT09aS5kb2N1bWVudFswXSYmaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bMF0udGFnTmFtZSE9PSJIVE1MIil7aS5vdmVyZmxvd09mZnNldD1pLnNjcm9sbFBhcmVudE5vdEhpZGRlbi5vZmZzZXQoKTt9fSxkcmFnOmZ1bmN0aW9uKGV2ZW50LHVpLGkpe3ZhciBvPWkub3B0aW9ucyxzY3JvbGxlZD1mYWxzZSxzY3JvbGxQYXJlbnQ9aS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bMF0sZG9jdW1lbnQ9aS5kb2N1bWVudFswXTtpZihzY3JvbGxQYXJlbnQhPT1kb2N1bWVudCYmc2Nyb2xsUGFyZW50LnRhZ05hbWUhPT0iSFRNTCIpe2lmKCFvLmF4aXN8fG8uYXhpcyE9PSJ4Iil7aWYoKGkub3ZlcmZsb3dPZmZzZXQudG9wK3Njcm9sbFBhcmVudC5vZmZzZXRIZWlnaHQpLWV2ZW50LnBhZ2VZPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbFBhcmVudC5zY3JvbGxUb3A9c2Nyb2xsZWQ9c2Nyb2xsUGFyZW50LnNjcm9sbFRvcCtvLnNjcm9sbFNwZWVkO31lbHNlIGlmKGV2ZW50LnBhZ2VZLWkub3ZlcmZsb3dPZmZzZXQudG9wPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbFBhcmVudC5zY3JvbGxUb3A9c2Nyb2xsZWQ9c2Nyb2xsUGFyZW50LnNjcm9sbFRvcC1vLnNjcm9sbFNwZWVkO319CmlmKCFvLmF4aXN8fG8uYXhpcyE9PSJ5Iil7aWYoKGkub3ZlcmZsb3dPZmZzZXQubGVmdCtzY3JvbGxQYXJlbnQub2Zmc2V0V2lkdGgpLWV2ZW50LnBhZ2VYPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbFBhcmVudC5zY3JvbGxMZWZ0PXNjcm9sbGVkPXNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0K28uc2Nyb2xsU3BlZWQ7fWVsc2UgaWYoZXZlbnQucGFnZVgtaS5vdmVyZmxvd09mZnNldC5sZWZ0PG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbFBhcmVudC5zY3JvbGxMZWZ0PXNjcm9sbGVkPXNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0LW8uc2Nyb2xsU3BlZWQ7fX19ZWxzZXtpZighby5heGlzfHxvLmF4aXMhPT0ieCIpe2lmKGV2ZW50LnBhZ2VZLSQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPSQoZG9jdW1lbnQpLnNjcm9sbFRvcCgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKS1vLnNjcm9sbFNwZWVkKTt9ZWxzZSBpZigkKHdpbmRvdykuaGVpZ2h0KCktKGV2ZW50LnBhZ2VZLSQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kKGRvY3VtZW50KS5zY3JvbGxUb3AoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkrby5zY3JvbGxTcGVlZCk7fX0KaWYoIW8uYXhpc3x8by5heGlzIT09InkiKXtpZihldmVudC5wYWdlWC0kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCktby5zY3JvbGxTcGVlZCk7fWVsc2UgaWYoJCh3aW5kb3cpLndpZHRoKCktKGV2ZW50LnBhZ2VYLSQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkrby5zY3JvbGxTcGVlZCk7fX19CmlmKHNjcm9sbGVkIT09ZmFsc2UmJiQudWkuZGRtYW5hZ2VyJiYhby5kcm9wQmVoYXZpb3VyKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhpLGV2ZW50KTt9fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic25hcCIse3N0YXJ0OmZ1bmN0aW9uKGV2ZW50LHVpLGkpe3ZhciBvPWkub3B0aW9ucztpLnNuYXBFbGVtZW50cz1bXTskKG8uc25hcC5jb25zdHJ1Y3RvciE9PVN0cmluZz8oby5zbmFwLml0ZW1zfHwiOmRhdGEodWktZHJhZ2dhYmxlKSIpOm8uc25hcCkuZWFjaChmdW5jdGlvbigpe3ZhciAkdD0kKHRoaXMpLCRvPSR0Lm9mZnNldCgpO2lmKHRoaXMhPT1pLmVsZW1lbnRbMF0pe2kuc25hcEVsZW1lbnRzLnB1c2goe2l0ZW06dGhpcyx3aWR0aDokdC5vdXRlcldpZHRoKCksaGVpZ2h0OiR0Lm91dGVySGVpZ2h0KCksdG9wOiRvLnRvcCxsZWZ0OiRvLmxlZnR9KTt9fSk7fSxkcmFnOmZ1bmN0aW9uKGV2ZW50LHVpLGluc3Qpe3ZhciB0cyxicyxscyxycyxsLHIsdCxiLGksZmlyc3Qsbz1pbnN0Lm9wdGlvbnMsZD1vLnNuYXBUb2xlcmFuY2UseDE9dWkub2Zmc2V0LmxlZnQseDI9eDEraW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCx5MT11aS5vZmZzZXQudG9wLHkyPXkxK2luc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0O2ZvcihpPWluc3Quc25hcEVsZW1lbnRzLmxlbmd0aC0xO2k+PTA7aS0tKXtsPWluc3Quc25hcEVsZW1lbnRzW2ldLmxlZnQtaW5zdC5tYXJnaW5zLmxlZnQ7cj1sK2luc3Quc25hcEVsZW1lbnRzW2ldLndpZHRoO3Q9aW5zdC5zbmFwRWxlbWVudHNbaV0udG9wLWluc3QubWFyZ2lucy50b3A7Yj10K2luc3Quc25hcEVsZW1lbnRzW2ldLmhlaWdodDtpZih4MjxsLWR8fHgxPnIrZHx8eTI8dC1kfHx5MT5iK2R8fCEkLmNvbnRhaW5zKGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0ub3duZXJEb2N1bWVudCxpbnN0LnNuYXBFbGVtZW50c1tpXS5pdGVtKSl7aWYoaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmcpeyhpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlJiZpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoaW5zdC5lbGVtZW50LGV2ZW50LCQuZXh0ZW5kKGluc3QuX3VpSGFzaCgpLHtzbmFwSXRlbTppbnN0LnNuYXBFbGVtZW50c1tpXS5pdGVtfSkpKTt9Cmluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nPWZhbHNlO2NvbnRpbnVlO30KaWYoby5zbmFwTW9kZSE9PSJpbm5lciIpe3RzPU1hdGguYWJzKHQteTIpPD1kO2JzPU1hdGguYWJzKGIteTEpPD1kO2xzPU1hdGguYWJzKGwteDIpPD1kO3JzPU1hdGguYWJzKHIteDEpPD1kO2lmKHRzKXt1aS5wb3NpdGlvbi50b3A9aW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOnQtaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wO30KaWYoYnMpe3VpLnBvc2l0aW9uLnRvcD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6YixsZWZ0OjB9KS50b3A7fQppZihscyl7dWkucG9zaXRpb24ubGVmdD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0OmwtaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQ7fQppZihycyl7dWkucG9zaXRpb24ubGVmdD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0OnJ9KS5sZWZ0O319CmZpcnN0PSh0c3x8YnN8fGxzfHxycyk7aWYoby5zbmFwTW9kZSE9PSJvdXRlciIpe3RzPU1hdGguYWJzKHQteTEpPD1kO2JzPU1hdGguYWJzKGIteTIpPD1kO2xzPU1hdGguYWJzKGwteDEpPD1kO3JzPU1hdGguYWJzKHIteDIpPD1kO2lmKHRzKXt1aS5wb3NpdGlvbi50b3A9aW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOnQsbGVmdDowfSkudG9wO30KaWYoYnMpe3VpLnBvc2l0aW9uLnRvcD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6Yi1pbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3A7fQppZihscyl7dWkucG9zaXRpb24ubGVmdD1pbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0Omx9KS5sZWZ0O30KaWYocnMpe3VpLnBvc2l0aW9uLmxlZnQ9aW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOjAsbGVmdDpyLWluc3QuaGVscGVyUHJvcG9ydGlvbnMud2lkdGh9KS5sZWZ0O319CmlmKCFpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyYmKHRzfHxic3x8bHN8fHJzfHxmaXJzdCkpeyhpbnN0Lm9wdGlvbnMuc25hcC5zbmFwJiZpbnN0Lm9wdGlvbnMuc25hcC5zbmFwLmNhbGwoaW5zdC5lbGVtZW50LGV2ZW50LCQuZXh0ZW5kKGluc3QuX3VpSGFzaCgpLHtzbmFwSXRlbTppbnN0LnNuYXBFbGVtZW50c1tpXS5pdGVtfSkpKTt9Cmluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nPSh0c3x8YnN8fGxzfHxyc3x8Zmlyc3QpO319fSk7JC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzdGFjayIse3N0YXJ0OmZ1bmN0aW9uKGV2ZW50LHVpLGluc3RhbmNlKXt2YXIgbWluLG89aW5zdGFuY2Uub3B0aW9ucyxncm91cD0kLm1ha2VBcnJheSgkKG8uc3RhY2spKS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuKHBhcnNlSW50KCQoYSkuY3NzKCJ6SW5kZXgiKSwxMCl8fDApLQoocGFyc2VJbnQoJChiKS5jc3MoInpJbmRleCIpLDEwKXx8MCk7fSk7aWYoIWdyb3VwLmxlbmd0aCl7cmV0dXJuO30KbWluPXBhcnNlSW50KCQoZ3JvdXBbMF0pLmNzcygiekluZGV4IiksMTApfHwwOyQoZ3JvdXApLmVhY2goZnVuY3Rpb24oaSl7JCh0aGlzKS5jc3MoInpJbmRleCIsbWluK2kpO30pO3RoaXMuY3NzKCJ6SW5kZXgiLChtaW4rZ3JvdXAubGVuZ3RoKSk7fX0pOyQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiekluZGV4Iix7c3RhcnQ6ZnVuY3Rpb24oZXZlbnQsdWksaW5zdGFuY2Upe3ZhciB0PSQodWkuaGVscGVyKSxvPWluc3RhbmNlLm9wdGlvbnM7aWYodC5jc3MoInpJbmRleCIpKXtvLl96SW5kZXg9dC5jc3MoInpJbmRleCIpO30KdC5jc3MoInpJbmRleCIsby56SW5kZXgpO30sc3RvcDpmdW5jdGlvbihldmVudCx1aSxpbnN0YW5jZSl7dmFyIG89aW5zdGFuY2Uub3B0aW9ucztpZihvLl96SW5kZXgpeyQodWkuaGVscGVyKS5jc3MoInpJbmRleCIsby5fekluZGV4KTt9fX0pO3ZhciB3aWRnZXRzRHJhZ2dhYmxlPSQudWkuZHJhZ2dhYmxlOyQud2lkZ2V0KCJ1aS5kcm9wcGFibGUiLHt2ZXJzaW9uOiIxLjEyLjEiLHdpZGdldEV2ZW50UHJlZml4OiJkcm9wIixvcHRpb25zOnthY2NlcHQ6IioiLGFkZENsYXNzZXM6dHJ1ZSxncmVlZHk6ZmFsc2Usc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0IixhY3RpdmF0ZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxkcm9wOm51bGwsb3V0Om51bGwsb3ZlcjpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHByb3BvcnRpb25zLG89dGhpcy5vcHRpb25zLGFjY2VwdD1vLmFjY2VwdDt0aGlzLmlzb3Zlcj1mYWxzZTt0aGlzLmlzb3V0PXRydWU7dGhpcy5hY2NlcHQ9JC5pc0Z1bmN0aW9uKGFjY2VwdCk/YWNjZXB0OmZ1bmN0aW9uKGQpe3JldHVybiBkLmlzKGFjY2VwdCk7fTt0aGlzLnByb3BvcnRpb25zPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aCl7cHJvcG9ydGlvbnM9YXJndW1lbnRzWzBdO31lbHNle3JldHVybiBwcm9wb3J0aW9ucz9wcm9wb3J0aW9uczpwcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5lbGVtZW50WzBdLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0fTt9fTt0aGlzLl9hZGRUb01hbmFnZXIoby5zY29wZSk7by5hZGRDbGFzc2VzJiZ0aGlzLl9hZGRDbGFzcygidWktZHJvcHBhYmxlIik7fSxfYWRkVG9NYW5hZ2VyOmZ1bmN0aW9uKHNjb3BlKXskLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Njb3BlXT0kLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Njb3BlXXx8W107JC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tzY29wZV0ucHVzaCh0aGlzKTt9LF9zcGxpY2U6ZnVuY3Rpb24oZHJvcCl7dmFyIGk9MDtmb3IoO2k8ZHJvcC5sZW5ndGg7aSsrKXtpZihkcm9wW2ldPT09dGhpcyl7ZHJvcC5zcGxpY2UoaSwxKTt9fX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZHJvcD0kLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07dGhpcy5fc3BsaWNlKGRyb3ApO30sX3NldE9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe2lmKGtleT09PSJhY2NlcHQiKXt0aGlzLmFjY2VwdD0kLmlzRnVuY3Rpb24odmFsdWUpP3ZhbHVlOmZ1bmN0aW9uKGQpe3JldHVybiBkLmlzKHZhbHVlKTt9O31lbHNlIGlmKGtleT09PSJzY29wZSIpe3ZhciBkcm9wPSQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXTt0aGlzLl9zcGxpY2UoZHJvcCk7dGhpcy5fYWRkVG9NYW5hZ2VyKHZhbHVlKTt9CnRoaXMuX3N1cGVyKGtleSx2YWx1ZSk7fSxfYWN0aXZhdGU6ZnVuY3Rpb24oZXZlbnQpe3ZhciBkcmFnZ2FibGU9JC51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLl9hZGRBY3RpdmVDbGFzcygpO2lmKGRyYWdnYWJsZSl7dGhpcy5fdHJpZ2dlcigiYWN0aXZhdGUiLGV2ZW50LHRoaXMudWkoZHJhZ2dhYmxlKSk7fX0sX2RlYWN0aXZhdGU6ZnVuY3Rpb24oZXZlbnQpe3ZhciBkcmFnZ2FibGU9JC51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLl9yZW1vdmVBY3RpdmVDbGFzcygpO2lmKGRyYWdnYWJsZSl7dGhpcy5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsZXZlbnQsdGhpcy51aShkcmFnZ2FibGUpKTt9fSxfb3ZlcjpmdW5jdGlvbihldmVudCl7dmFyIGRyYWdnYWJsZT0kLnVpLmRkbWFuYWdlci5jdXJyZW50O2lmKCFkcmFnZ2FibGV8fChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KVswXT09PXRoaXMuZWxlbWVudFswXSl7cmV0dXJuO30KaWYodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpKSl7dGhpcy5fYWRkSG92ZXJDbGFzcygpO3RoaXMuX3RyaWdnZXIoIm92ZXIiLGV2ZW50LHRoaXMudWkoZHJhZ2dhYmxlKSk7fX0sX291dDpmdW5jdGlvbihldmVudCl7dmFyIGRyYWdnYWJsZT0kLnVpLmRkbWFuYWdlci5jdXJyZW50O2lmKCFkcmFnZ2FibGV8fChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KVswXT09PXRoaXMuZWxlbWVudFswXSl7cmV0dXJuO30KaWYodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbXx8ZHJhZ2dhYmxlLmVsZW1lbnQpKSl7dGhpcy5fcmVtb3ZlSG92ZXJDbGFzcygpO3RoaXMuX3RyaWdnZXIoIm91dCIsZXZlbnQsdGhpcy51aShkcmFnZ2FibGUpKTt9fSxfZHJvcDpmdW5jdGlvbihldmVudCxjdXN0b20pe3ZhciBkcmFnZ2FibGU9Y3VzdG9tfHwkLnVpLmRkbWFuYWdlci5jdXJyZW50LGNoaWxkcmVuSW50ZXJzZWN0aW9uPWZhbHNlO2lmKCFkcmFnZ2FibGV8fChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KVswXT09PXRoaXMuZWxlbWVudFswXSl7cmV0dXJuIGZhbHNlO30KdGhpcy5lbGVtZW50LmZpbmQoIjpkYXRhKHVpLWRyb3BwYWJsZSkiKS5ub3QoIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmciKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGluc3Q9JCh0aGlzKS5kcm9wcGFibGUoImluc3RhbmNlIik7aWYoaW5zdC5vcHRpb25zLmdyZWVkeSYmIWluc3Qub3B0aW9ucy5kaXNhYmxlZCYmaW5zdC5vcHRpb25zLnNjb3BlPT09ZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGUmJmluc3QuYWNjZXB0LmNhbGwoaW5zdC5lbGVtZW50WzBdLChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KSkmJmludGVyc2VjdChkcmFnZ2FibGUsJC5leHRlbmQoaW5zdCx7b2Zmc2V0Omluc3QuZWxlbWVudC5vZmZzZXQoKX0pLGluc3Qub3B0aW9ucy50b2xlcmFuY2UsZXZlbnQpKXtjaGlsZHJlbkludGVyc2VjdGlvbj10cnVlO3JldHVybiBmYWxzZTt9fSk7aWYoY2hpbGRyZW5JbnRlcnNlY3Rpb24pe3JldHVybiBmYWxzZTt9CmlmKHRoaXMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLChkcmFnZ2FibGUuY3VycmVudEl0ZW18fGRyYWdnYWJsZS5lbGVtZW50KSkpe3RoaXMuX3JlbW92ZUFjdGl2ZUNsYXNzKCk7dGhpcy5fcmVtb3ZlSG92ZXJDbGFzcygpO3RoaXMuX3RyaWdnZXIoImRyb3AiLGV2ZW50LHRoaXMudWkoZHJhZ2dhYmxlKSk7cmV0dXJuIHRoaXMuZWxlbWVudDt9CnJldHVybiBmYWxzZTt9LHVpOmZ1bmN0aW9uKGMpe3JldHVybntkcmFnZ2FibGU6KGMuY3VycmVudEl0ZW18fGMuZWxlbWVudCksaGVscGVyOmMuaGVscGVyLHBvc2l0aW9uOmMucG9zaXRpb24sb2Zmc2V0OmMucG9zaXRpb25BYnN9O30sX2FkZEhvdmVyQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9hZGRDbGFzcygidWktZHJvcHBhYmxlLWhvdmVyIik7fSxfcmVtb3ZlSG92ZXJDbGFzczpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUNsYXNzKCJ1aS1kcm9wcGFibGUtaG92ZXIiKTt9LF9hZGRBY3RpdmVDbGFzczpmdW5jdGlvbigpe3RoaXMuX2FkZENsYXNzKCJ1aS1kcm9wcGFibGUtYWN0aXZlIik7fSxfcmVtb3ZlQWN0aXZlQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcygidWktZHJvcHBhYmxlLWFjdGl2ZSIpO319KTt2YXIgaW50ZXJzZWN0PSQudWkuaW50ZXJzZWN0PShmdW5jdGlvbigpe2Z1bmN0aW9uIGlzT3ZlckF4aXMoeCxyZWZlcmVuY2Usc2l6ZSl7cmV0dXJuKHg+PXJlZmVyZW5jZSkmJih4PChyZWZlcmVuY2Urc2l6ZSkpO30KcmV0dXJuIGZ1bmN0aW9uKGRyYWdnYWJsZSxkcm9wcGFibGUsdG9sZXJhbmNlTW9kZSxldmVudCl7aWYoIWRyb3BwYWJsZS5vZmZzZXQpe3JldHVybiBmYWxzZTt9CnZhciB4MT0oZHJhZ2dhYmxlLnBvc2l0aW9uQWJzfHxkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUpLmxlZnQrZHJhZ2dhYmxlLm1hcmdpbnMubGVmdCx5MT0oZHJhZ2dhYmxlLnBvc2l0aW9uQWJzfHxkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUpLnRvcCtkcmFnZ2FibGUubWFyZ2lucy50b3AseDI9eDErZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLndpZHRoLHkyPXkxK2RyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbD1kcm9wcGFibGUub2Zmc2V0LmxlZnQsdD1kcm9wcGFibGUub2Zmc2V0LnRvcCxyPWwrZHJvcHBhYmxlLnByb3BvcnRpb25zKCkud2lkdGgsYj10K2Ryb3BwYWJsZS5wcm9wb3J0aW9ucygpLmhlaWdodDtzd2l0Y2godG9sZXJhbmNlTW9kZSl7Y2FzZSJmaXQiOnJldHVybihsPD14MSYmeDI8PXImJnQ8PXkxJiZ5Mjw9Yik7Y2FzZSJpbnRlcnNlY3QiOnJldHVybihsPHgxKyhkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMikmJngyLShkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMik8ciYmdDx5MSsoZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yKSYmeTItKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMik8Yik7Y2FzZSJwb2ludGVyIjpyZXR1cm4gaXNPdmVyQXhpcyhldmVudC5wYWdlWSx0LGRyb3BwYWJsZS5wcm9wb3J0aW9ucygpLmhlaWdodCkmJmlzT3ZlckF4aXMoZXZlbnQucGFnZVgsbCxkcm9wcGFibGUucHJvcG9ydGlvbnMoKS53aWR0aCk7Y2FzZSJ0b3VjaCI6cmV0dXJuKCh5MT49dCYmeTE8PWIpfHwoeTI+PXQmJnkyPD1iKXx8KHkxPHQmJnkyPmIpKSYmKCh4MT49bCYmeDE8PXIpfHwoeDI+PWwmJngyPD1yKXx8KHgxPGwmJngyPnIpKTtkZWZhdWx0OnJldHVybiBmYWxzZTt9fTt9KSgpOyQudWkuZGRtYW5hZ2VyPXtjdXJyZW50Om51bGwsZHJvcHBhYmxlczp7ImRlZmF1bHQiOltdfSxwcmVwYXJlT2Zmc2V0czpmdW5jdGlvbih0LGV2ZW50KXt2YXIgaSxqLG09JC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0Lm9wdGlvbnMuc2NvcGVdfHxbXSx0eXBlPWV2ZW50P2V2ZW50LnR5cGU6bnVsbCxsaXN0PSh0LmN1cnJlbnRJdGVtfHx0LmVsZW1lbnQpLmZpbmQoIjpkYXRhKHVpLWRyb3BwYWJsZSkiKS5hZGRCYWNrKCk7ZHJvcHBhYmxlc0xvb3A6Zm9yKGk9MDtpPG0ubGVuZ3RoO2krKyl7aWYobVtpXS5vcHRpb25zLmRpc2FibGVkfHwodCYmIW1baV0uYWNjZXB0LmNhbGwobVtpXS5lbGVtZW50WzBdLCh0LmN1cnJlbnRJdGVtfHx0LmVsZW1lbnQpKSkpe2NvbnRpbnVlO30KZm9yKGo9MDtqPGxpc3QubGVuZ3RoO2orKyl7aWYobGlzdFtqXT09PW1baV0uZWxlbWVudFswXSl7bVtpXS5wcm9wb3J0aW9ucygpLmhlaWdodD0wO2NvbnRpbnVlIGRyb3BwYWJsZXNMb29wO319Cm1baV0udmlzaWJsZT1tW2ldLmVsZW1lbnQuY3NzKCJkaXNwbGF5IikhPT0ibm9uZSI7aWYoIW1baV0udmlzaWJsZSl7Y29udGludWU7fQppZih0eXBlPT09Im1vdXNlZG93biIpe21baV0uX2FjdGl2YXRlLmNhbGwobVtpXSxldmVudCk7fQptW2ldLm9mZnNldD1tW2ldLmVsZW1lbnQub2Zmc2V0KCk7bVtpXS5wcm9wb3J0aW9ucyh7d2lkdGg6bVtpXS5lbGVtZW50WzBdLm9mZnNldFdpZHRoLGhlaWdodDptW2ldLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0fSk7fX0sZHJvcDpmdW5jdGlvbihkcmFnZ2FibGUsZXZlbnQpe3ZhciBkcm9wcGVkPWZhbHNlOyQuZWFjaCgoJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tkcmFnZ2FibGUub3B0aW9ucy5zY29wZV18fFtdKS5zbGljZSgpLGZ1bmN0aW9uKCl7aWYoIXRoaXMub3B0aW9ucyl7cmV0dXJuO30KaWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy52aXNpYmxlJiZpbnRlcnNlY3QoZHJhZ2dhYmxlLHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSxldmVudCkpe2Ryb3BwZWQ9dGhpcy5fZHJvcC5jYWxsKHRoaXMsZXZlbnQpfHxkcm9wcGVkO30KaWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy52aXNpYmxlJiZ0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtfHxkcmFnZ2FibGUuZWxlbWVudCkpKXt0aGlzLmlzb3V0PXRydWU7dGhpcy5pc292ZXI9ZmFsc2U7dGhpcy5fZGVhY3RpdmF0ZS5jYWxsKHRoaXMsZXZlbnQpO319KTtyZXR1cm4gZHJvcHBlZDt9LGRyYWdTdGFydDpmdW5jdGlvbihkcmFnZ2FibGUsZXZlbnQpe2RyYWdnYWJsZS5lbGVtZW50LnBhcmVudHNVbnRpbCgiYm9keSIpLm9uKCJzY3JvbGwuZHJvcHBhYmxlIixmdW5jdGlvbigpe2lmKCFkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhkcmFnZ2FibGUsZXZlbnQpO319KTt9LGRyYWc6ZnVuY3Rpb24oZHJhZ2dhYmxlLGV2ZW50KXtpZihkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhkcmFnZ2FibGUsZXZlbnQpO30KJC5lYWNoKCQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGVdfHxbXSxmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5ncmVlZHlDaGlsZHx8IXRoaXMudmlzaWJsZSl7cmV0dXJuO30KdmFyIHBhcmVudEluc3RhbmNlLHNjb3BlLHBhcmVudCxpbnRlcnNlY3RzPWludGVyc2VjdChkcmFnZ2FibGUsdGhpcyx0aGlzLm9wdGlvbnMudG9sZXJhbmNlLGV2ZW50KSxjPSFpbnRlcnNlY3RzJiZ0aGlzLmlzb3Zlcj8iaXNvdXQiOihpbnRlcnNlY3RzJiYhdGhpcy5pc292ZXI/Imlzb3ZlciI6bnVsbCk7aWYoIWMpe3JldHVybjt9CmlmKHRoaXMub3B0aW9ucy5ncmVlZHkpe3Njb3BlPXRoaXMub3B0aW9ucy5zY29wZTtwYXJlbnQ9dGhpcy5lbGVtZW50LnBhcmVudHMoIjpkYXRhKHVpLWRyb3BwYWJsZSkiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS5kcm9wcGFibGUoImluc3RhbmNlIikub3B0aW9ucy5zY29wZT09PXNjb3BlO30pO2lmKHBhcmVudC5sZW5ndGgpe3BhcmVudEluc3RhbmNlPSQocGFyZW50WzBdKS5kcm9wcGFibGUoImluc3RhbmNlIik7cGFyZW50SW5zdGFuY2UuZ3JlZWR5Q2hpbGQ9KGM9PT0iaXNvdmVyIik7fX0KaWYocGFyZW50SW5zdGFuY2UmJmM9PT0iaXNvdmVyIil7cGFyZW50SW5zdGFuY2UuaXNvdmVyPWZhbHNlO3BhcmVudEluc3RhbmNlLmlzb3V0PXRydWU7cGFyZW50SW5zdGFuY2UuX291dC5jYWxsKHBhcmVudEluc3RhbmNlLGV2ZW50KTt9CnRoaXNbY109dHJ1ZTt0aGlzW2M9PT0iaXNvdXQiPyJpc292ZXIiOiJpc291dCJdPWZhbHNlO3RoaXNbYz09PSJpc292ZXIiPyJfb3ZlciI6Il9vdXQiXS5jYWxsKHRoaXMsZXZlbnQpO2lmKHBhcmVudEluc3RhbmNlJiZjPT09Imlzb3V0Iil7cGFyZW50SW5zdGFuY2UuaXNvdXQ9ZmFsc2U7cGFyZW50SW5zdGFuY2UuaXNvdmVyPXRydWU7cGFyZW50SW5zdGFuY2UuX292ZXIuY2FsbChwYXJlbnRJbnN0YW5jZSxldmVudCk7fX0pO30sZHJhZ1N0b3A6ZnVuY3Rpb24oZHJhZ2dhYmxlLGV2ZW50KXtkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoImJvZHkiKS5vZmYoInNjcm9sbC5kcm9wcGFibGUiKTtpZighZHJhZ2dhYmxlLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyl7JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoZHJhZ2dhYmxlLGV2ZW50KTt9fX07aWYoJC51aUJhY2tDb21wYXQhPT1mYWxzZSl7JC53aWRnZXQoInVpLmRyb3BwYWJsZSIsJC51aS5kcm9wcGFibGUse29wdGlvbnM6e2hvdmVyQ2xhc3M6ZmFsc2UsYWN0aXZlQ2xhc3M6ZmFsc2V9LF9hZGRBY3RpdmVDbGFzczpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7aWYodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTt9fSxfcmVtb3ZlQWN0aXZlQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpO2lmKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7fX0sX2FkZEhvdmVyQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpO2lmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpO319LF9yZW1vdmVIb3ZlckNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKTtpZih0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKTt9fX0pO30KdmFyIHdpZGdldHNEcm9wcGFibGU9JC51aS5kcm9wcGFibGU7JC53aWRnZXQoInVpLnJlc2l6YWJsZSIsJC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMi4xIix3aWRnZXRFdmVudFByZWZpeDoicmVzaXplIixvcHRpb25zOnthbHNvUmVzaXplOmZhbHNlLGFuaW1hdGU6ZmFsc2UsYW5pbWF0ZUR1cmF0aW9uOiJzbG93IixhbmltYXRlRWFzaW5nOiJzd2luZyIsYXNwZWN0UmF0aW86ZmFsc2UsYXV0b0hpZGU6ZmFsc2UsY2xhc3Nlczp7InVpLXJlc2l6YWJsZS1zZSI6InVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UifSxjb250YWlubWVudDpmYWxzZSxnaG9zdDpmYWxzZSxncmlkOmZhbHNlLGhhbmRsZXM6ImUscyxzZSIsaGVscGVyOmZhbHNlLG1heEhlaWdodDpudWxsLG1heFdpZHRoOm51bGwsbWluSGVpZ2h0OjEwLG1pbldpZHRoOjEwLHpJbmRleDo5MCxyZXNpemU6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX251bTpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpfHwwO30sX2lzTnVtYmVyOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpO30sX2hhc1Njcm9sbDpmdW5jdGlvbihlbCxhKXtpZigkKGVsKS5jc3MoIm92ZXJmbG93Iik9PT0iaGlkZGVuIil7cmV0dXJuIGZhbHNlO30KdmFyIHNjcm9sbD0oYSYmYT09PSJsZWZ0Iik/InNjcm9sbExlZnQiOiJzY3JvbGxUb3AiLGhhcz1mYWxzZTtpZihlbFtzY3JvbGxdPjApe3JldHVybiB0cnVlO30KZWxbc2Nyb2xsXT0xO2hhcz0oZWxbc2Nyb2xsXT4wKTtlbFtzY3JvbGxdPTA7cmV0dXJuIGhhczt9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgbWFyZ2lucyxvPXRoaXMub3B0aW9ucyx0aGF0PXRoaXM7dGhpcy5fYWRkQ2xhc3MoInVpLXJlc2l6YWJsZSIpOyQuZXh0ZW5kKHRoaXMse19hc3BlY3RSYXRpbzohIShvLmFzcGVjdFJhdGlvKSxhc3BlY3RSYXRpbzpvLmFzcGVjdFJhdGlvLG9yaWdpbmFsRWxlbWVudDp0aGlzLmVsZW1lbnQsX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM6W10sX2hlbHBlcjpvLmhlbHBlcnx8by5naG9zdHx8by5hbmltYXRlP28uaGVscGVyfHwidWktcmVzaXphYmxlLWhlbHBlciI6bnVsbH0pO2lmKHRoaXMuZWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvXihjYW52YXN8dGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbnxpbWcpJC9pKSl7dGhpcy5lbGVtZW50LndyYXAoJCgiPGRpdiBjbGFzcz0ndWktd3JhcHBlcicgc3R5bGU9J292ZXJmbG93OiBoaWRkZW47Jz48L2Rpdj4iKS5jc3Moe3Bvc2l0aW9uOnRoaXMuZWxlbWVudC5jc3MoInBvc2l0aW9uIiksd2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksdG9wOnRoaXMuZWxlbWVudC5jc3MoInRvcCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcygibGVmdCIpfSkpO3RoaXMuZWxlbWVudD10aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgidWktcmVzaXphYmxlIix0aGlzLmVsZW1lbnQucmVzaXphYmxlKCJpbnN0YW5jZSIpKTt0aGlzLmVsZW1lbnRJc1dyYXBwZXI9dHJ1ZTttYXJnaW5zPXttYXJnaW5Ub3A6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSxtYXJnaW5SaWdodDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksbWFyZ2luQm90dG9tOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luQm90dG9tIiksbWFyZ2luTGVmdDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkxlZnQiKX07dGhpcy5lbGVtZW50LmNzcyhtYXJnaW5zKTt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbiIsMCk7dGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlPXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygicmVzaXplIik7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLCJub25lIik7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5wdXNoKHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7cG9zaXRpb246InN0YXRpYyIsem9vbToxLGRpc3BsYXk6ImJsb2NrIn0pKTt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MobWFyZ2lucyk7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKTt9CnRoaXMuX3NldHVwSGFuZGxlcygpO2lmKG8uYXV0b0hpZGUpeyQodGhpcy5lbGVtZW50KS5vbigibW91c2VlbnRlciIsZnVuY3Rpb24oKXtpZihvLmRpc2FibGVkKXtyZXR1cm47fQp0aGF0Ll9yZW1vdmVDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIik7dGhhdC5faGFuZGxlcy5zaG93KCk7fSkub24oIm1vdXNlbGVhdmUiLGZ1bmN0aW9uKCl7aWYoby5kaXNhYmxlZCl7cmV0dXJuO30KaWYoIXRoYXQucmVzaXppbmcpe3RoYXQuX2FkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTt0aGF0Ll9oYW5kbGVzLmhpZGUoKTt9fSk7fQp0aGlzLl9tb3VzZUluaXQoKTt9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEZXN0cm95KCk7dmFyIHdyYXBwZXIsX2Rlc3Ryb3k9ZnVuY3Rpb24oZXhwKXskKGV4cCkucmVtb3ZlRGF0YSgicmVzaXphYmxlIikucmVtb3ZlRGF0YSgidWktcmVzaXphYmxlIikub2ZmKCIucmVzaXphYmxlIikuZmluZCgiLnVpLXJlc2l6YWJsZS1oYW5kbGUiKS5yZW1vdmUoKTt9O2lmKHRoaXMuZWxlbWVudElzV3JhcHBlcil7X2Rlc3Ryb3kodGhpcy5lbGVtZW50KTt3cmFwcGVyPXRoaXMuZWxlbWVudDt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOndyYXBwZXIuY3NzKCJwb3NpdGlvbiIpLHdpZHRoOndyYXBwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp3cmFwcGVyLm91dGVySGVpZ2h0KCksdG9wOndyYXBwZXIuY3NzKCJ0b3AiKSxsZWZ0OndyYXBwZXIuY3NzKCJsZWZ0Iil9KS5pbnNlcnRBZnRlcih3cmFwcGVyKTt3cmFwcGVyLnJlbW92ZSgpO30KdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZSk7X2Rlc3Ryb3kodGhpcy5vcmlnaW5hbEVsZW1lbnQpO3JldHVybiB0aGlzO30sX3NldE9wdGlvbjpmdW5jdGlvbihrZXksdmFsdWUpe3RoaXMuX3N1cGVyKGtleSx2YWx1ZSk7c3dpdGNoKGtleSl7Y2FzZSJoYW5kbGVzIjp0aGlzLl9yZW1vdmVIYW5kbGVzKCk7dGhpcy5fc2V0dXBIYW5kbGVzKCk7YnJlYWs7ZGVmYXVsdDpicmVhazt9fSxfc2V0dXBIYW5kbGVzOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy5vcHRpb25zLGhhbmRsZSxpLG4saG5hbWUsYXhpcyx0aGF0PXRoaXM7dGhpcy5oYW5kbGVzPW8uaGFuZGxlc3x8KCEkKCIudWktcmVzaXphYmxlLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5sZW5ndGg/ImUscyxzZSI6e246Ii51aS1yZXNpemFibGUtbiIsZToiLnVpLXJlc2l6YWJsZS1lIixzOiIudWktcmVzaXphYmxlLXMiLHc6Ii51aS1yZXNpemFibGUtdyIsc2U6Ii51aS1yZXNpemFibGUtc2UiLHN3OiIudWktcmVzaXphYmxlLXN3IixuZToiLnVpLXJlc2l6YWJsZS1uZSIsbnc6Ii51aS1yZXNpemFibGUtbncifSk7dGhpcy5faGFuZGxlcz0kKCk7aWYodGhpcy5oYW5kbGVzLmNvbnN0cnVjdG9yPT09U3RyaW5nKXtpZih0aGlzLmhhbmRsZXM9PT0iYWxsIil7dGhpcy5oYW5kbGVzPSJuLGUscyx3LHNlLHN3LG5lLG53Ijt9Cm49dGhpcy5oYW5kbGVzLnNwbGl0KCIsIik7dGhpcy5oYW5kbGVzPXt9O2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspe2hhbmRsZT0kLnRyaW0obltpXSk7aG5hbWU9InVpLXJlc2l6YWJsZS0iK2hhbmRsZTtheGlzPSQoIjxkaXY+Iik7dGhpcy5fYWRkQ2xhc3MoYXhpcywidWktcmVzaXphYmxlLWhhbmRsZSAiK2huYW1lKTtheGlzLmNzcyh7ekluZGV4Om8uekluZGV4fSk7dGhpcy5oYW5kbGVzW2hhbmRsZV09Ii51aS1yZXNpemFibGUtIitoYW5kbGU7dGhpcy5lbGVtZW50LmFwcGVuZChheGlzKTt9fQp0aGlzLl9yZW5kZXJBeGlzPWZ1bmN0aW9uKHRhcmdldCl7dmFyIGksYXhpcyxwYWRQb3MscGFkV3JhcHBlcjt0YXJnZXQ9dGFyZ2V0fHx0aGlzLmVsZW1lbnQ7Zm9yKGkgaW4gdGhpcy5oYW5kbGVzKXtpZih0aGlzLmhhbmRsZXNbaV0uY29uc3RydWN0b3I9PT1TdHJpbmcpe3RoaXMuaGFuZGxlc1tpXT10aGlzLmVsZW1lbnQuY2hpbGRyZW4odGhpcy5oYW5kbGVzW2ldKS5maXJzdCgpLnNob3coKTt9ZWxzZSBpZih0aGlzLmhhbmRsZXNbaV0uanF1ZXJ5fHx0aGlzLmhhbmRsZXNbaV0ubm9kZVR5cGUpe3RoaXMuaGFuZGxlc1tpXT0kKHRoaXMuaGFuZGxlc1tpXSk7dGhpcy5fb24odGhpcy5oYW5kbGVzW2ldLHsibW91c2Vkb3duIjp0aGF0Ll9tb3VzZURvd259KTt9CmlmKHRoaXMuZWxlbWVudElzV3JhcHBlciYmdGhpcy5vcmlnaW5hbEVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL14odGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbikkL2kpKXtheGlzPSQodGhpcy5oYW5kbGVzW2ldLHRoaXMuZWxlbWVudCk7cGFkV3JhcHBlcj0vc3d8bmV8bnd8c2V8bnxzLy50ZXN0KGkpP2F4aXMub3V0ZXJIZWlnaHQoKTpheGlzLm91dGVyV2lkdGgoKTtwYWRQb3M9WyJwYWRkaW5nIiwvbmV8bnd8bi8udGVzdChpKT8iVG9wIjovc2V8c3d8cy8udGVzdChpKT8iQm90dG9tIjovXmUkLy50ZXN0KGkpPyJSaWdodCI6IkxlZnQiXS5qb2luKCIiKTt0YXJnZXQuY3NzKHBhZFBvcyxwYWRXcmFwcGVyKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpO30KdGhpcy5faGFuZGxlcz10aGlzLl9oYW5kbGVzLmFkZCh0aGlzLmhhbmRsZXNbaV0pO319O3RoaXMuX3JlbmRlckF4aXModGhpcy5lbGVtZW50KTt0aGlzLl9oYW5kbGVzPXRoaXMuX2hhbmRsZXMuYWRkKHRoaXMuZWxlbWVudC5maW5kKCIudWktcmVzaXphYmxlLWhhbmRsZSIpKTt0aGlzLl9oYW5kbGVzLmRpc2FibGVTZWxlY3Rpb24oKTt0aGlzLl9oYW5kbGVzLm9uKCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7aWYoIXRoYXQucmVzaXppbmcpe2lmKHRoaXMuY2xhc3NOYW1lKXtheGlzPXRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpO30KdGhhdC5heGlzPWF4aXMmJmF4aXNbMV0/YXhpc1sxXToic2UiO319KTtpZihvLmF1dG9IaWRlKXt0aGlzLl9oYW5kbGVzLmhpZGUoKTt0aGlzLl9hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIik7fX0sX3JlbW92ZUhhbmRsZXM6ZnVuY3Rpb24oKXt0aGlzLl9oYW5kbGVzLnJlbW92ZSgpO30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihldmVudCl7dmFyIGksaGFuZGxlLGNhcHR1cmU9ZmFsc2U7Zm9yKGkgaW4gdGhpcy5oYW5kbGVzKXtoYW5kbGU9JCh0aGlzLmhhbmRsZXNbaV0pWzBdO2lmKGhhbmRsZT09PWV2ZW50LnRhcmdldHx8JC5jb250YWlucyhoYW5kbGUsZXZlbnQudGFyZ2V0KSl7Y2FwdHVyZT10cnVlO319CnJldHVybiF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJmNhcHR1cmU7fSxfbW91c2VTdGFydDpmdW5jdGlvbihldmVudCl7dmFyIGN1cmxlZnQsY3VydG9wLGN1cnNvcixvPXRoaXMub3B0aW9ucyxlbD10aGlzLmVsZW1lbnQ7dGhpcy5yZXNpemluZz10cnVlO3RoaXMuX3JlbmRlclByb3h5KCk7Y3VybGVmdD10aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKCJsZWZ0IikpO2N1cnRvcD10aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSk7aWYoby5jb250YWlubWVudCl7Y3VybGVmdCs9JChvLmNvbnRhaW5tZW50KS5zY3JvbGxMZWZ0KCl8fDA7Y3VydG9wKz0kKG8uY29udGFpbm1lbnQpLnNjcm9sbFRvcCgpfHwwO30KdGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCk7dGhpcy5wb3NpdGlvbj17bGVmdDpjdXJsZWZ0LHRvcDpjdXJ0b3B9O3RoaXMuc2l6ZT10aGlzLl9oZWxwZXI/e3dpZHRoOnRoaXMuaGVscGVyLndpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLmhlaWdodCgpfTp7d2lkdGg6ZWwud2lkdGgoKSxoZWlnaHQ6ZWwuaGVpZ2h0KCl9O3RoaXMub3JpZ2luYWxTaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6ZWwub3V0ZXJXaWR0aCgpLGhlaWdodDplbC5vdXRlckhlaWdodCgpfTp7d2lkdGg6ZWwud2lkdGgoKSxoZWlnaHQ6ZWwuaGVpZ2h0KCl9O3RoaXMuc2l6ZURpZmY9e3dpZHRoOmVsLm91dGVyV2lkdGgoKS1lbC53aWR0aCgpLGhlaWdodDplbC5vdXRlckhlaWdodCgpLWVsLmhlaWdodCgpfTt0aGlzLm9yaWdpbmFsUG9zaXRpb249e2xlZnQ6Y3VybGVmdCx0b3A6Y3VydG9wfTt0aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbj17bGVmdDpldmVudC5wYWdlWCx0b3A6ZXZlbnQucGFnZVl9O3RoaXMuYXNwZWN0UmF0aW89KHR5cGVvZiBvLmFzcGVjdFJhdGlvPT09Im51bWJlciIpP28uYXNwZWN0UmF0aW86KCh0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC90aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQpfHwxKTtjdXJzb3I9JCgiLnVpLXJlc2l6YWJsZS0iK3RoaXMuYXhpcykuY3NzKCJjdXJzb3IiKTskKCJib2R5IikuY3NzKCJjdXJzb3IiLGN1cnNvcj09PSJhdXRvIj90aGlzLmF4aXMrIi1yZXNpemUiOmN1cnNvcik7dGhpcy5fYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpO3RoaXMuX3Byb3BhZ2F0ZSgic3RhcnQiLGV2ZW50KTtyZXR1cm4gdHJ1ZTt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZXZlbnQpe3ZhciBkYXRhLHByb3BzLHNtcD10aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbixhPXRoaXMuYXhpcyxkeD0oZXZlbnQucGFnZVgtc21wLmxlZnQpfHwwLGR5PShldmVudC5wYWdlWS1zbXAudG9wKXx8MCx0cmlnZ2VyPXRoaXMuX2NoYW5nZVthXTt0aGlzLl91cGRhdGVQcmV2UHJvcGVydGllcygpO2lmKCF0cmlnZ2VyKXtyZXR1cm4gZmFsc2U7fQpkYXRhPXRyaWdnZXIuYXBwbHkodGhpcyxbZXZlbnQsZHgsZHldKTt0aGlzLl91cGRhdGVWaXJ0dWFsQm91bmRhcmllcyhldmVudC5zaGlmdEtleSk7aWYodGhpcy5fYXNwZWN0UmF0aW98fGV2ZW50LnNoaWZ0S2V5KXtkYXRhPXRoaXMuX3VwZGF0ZVJhdGlvKGRhdGEsZXZlbnQpO30KZGF0YT10aGlzLl9yZXNwZWN0U2l6ZShkYXRhLGV2ZW50KTt0aGlzLl91cGRhdGVDYWNoZShkYXRhKTt0aGlzLl9wcm9wYWdhdGUoInJlc2l6ZSIsZXZlbnQpO3Byb3BzPXRoaXMuX2FwcGx5Q2hhbmdlcygpO2lmKCF0aGlzLl9oZWxwZXImJnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKXt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpO30KaWYoISQuaXNFbXB0eU9iamVjdChwcm9wcykpe3RoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCk7dGhpcy5fdHJpZ2dlcigicmVzaXplIixldmVudCx0aGlzLnVpKCkpO3RoaXMuX2FwcGx5Q2hhbmdlcygpO30KcmV0dXJuIGZhbHNlO30sX21vdXNlU3RvcDpmdW5jdGlvbihldmVudCl7dGhpcy5yZXNpemluZz1mYWxzZTt2YXIgcHIsaXN0YSxzb2Zmc2V0aCxzb2Zmc2V0dyxzLGxlZnQsdG9wLG89dGhpcy5vcHRpb25zLHRoYXQ9dGhpcztpZih0aGlzLl9oZWxwZXIpe3ByPXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM7aXN0YT1wci5sZW5ndGgmJigvdGV4dGFyZWEvaSkudGVzdChwclswXS5ub2RlTmFtZSk7c29mZnNldGg9aXN0YSYmdGhpcy5faGFzU2Nyb2xsKHByWzBdLCJsZWZ0Iik/MDp0aGF0LnNpemVEaWZmLmhlaWdodDtzb2Zmc2V0dz1pc3RhPzA6dGhhdC5zaXplRGlmZi53aWR0aDtzPXt3aWR0aDoodGhhdC5oZWxwZXIud2lkdGgoKS1zb2Zmc2V0dyksaGVpZ2h0Oih0aGF0LmhlbHBlci5oZWlnaHQoKS1zb2Zmc2V0aCl9O2xlZnQ9KHBhcnNlRmxvYXQodGhhdC5lbGVtZW50LmNzcygibGVmdCIpKSsKKHRoYXQucG9zaXRpb24ubGVmdC10aGF0Lm9yaWdpbmFsUG9zaXRpb24ubGVmdCkpfHxudWxsO3RvcD0ocGFyc2VGbG9hdCh0aGF0LmVsZW1lbnQuY3NzKCJ0b3AiKSkrCih0aGF0LnBvc2l0aW9uLnRvcC10aGF0Lm9yaWdpbmFsUG9zaXRpb24udG9wKSl8fG51bGw7aWYoIW8uYW5pbWF0ZSl7dGhpcy5lbGVtZW50LmNzcygkLmV4dGVuZChzLHt0b3A6dG9wLGxlZnQ6bGVmdH0pKTt9CnRoYXQuaGVscGVyLmhlaWdodCh0aGF0LnNpemUuaGVpZ2h0KTt0aGF0LmhlbHBlci53aWR0aCh0aGF0LnNpemUud2lkdGgpO2lmKHRoaXMuX2hlbHBlciYmIW8uYW5pbWF0ZSl7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKTt9fQokKCJib2R5IikuY3NzKCJjdXJzb3IiLCJhdXRvIik7dGhpcy5fcmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpO3RoaXMuX3Byb3BhZ2F0ZSgic3RvcCIsZXZlbnQpO2lmKHRoaXMuX2hlbHBlcil7dGhpcy5oZWxwZXIucmVtb3ZlKCk7fQpyZXR1cm4gZmFsc2U7fSxfdXBkYXRlUHJldlByb3BlcnRpZXM6ZnVuY3Rpb24oKXt0aGlzLnByZXZQb3NpdGlvbj17dG9wOnRoaXMucG9zaXRpb24udG9wLGxlZnQ6dGhpcy5wb3NpdGlvbi5sZWZ0fTt0aGlzLnByZXZTaXplPXt3aWR0aDp0aGlzLnNpemUud2lkdGgsaGVpZ2h0OnRoaXMuc2l6ZS5oZWlnaHR9O30sX2FwcGx5Q2hhbmdlczpmdW5jdGlvbigpe3ZhciBwcm9wcz17fTtpZih0aGlzLnBvc2l0aW9uLnRvcCE9PXRoaXMucHJldlBvc2l0aW9uLnRvcCl7cHJvcHMudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCI7fQppZih0aGlzLnBvc2l0aW9uLmxlZnQhPT10aGlzLnByZXZQb3NpdGlvbi5sZWZ0KXtwcm9wcy5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCsicHgiO30KaWYodGhpcy5zaXplLndpZHRoIT09dGhpcy5wcmV2U2l6ZS53aWR0aCl7cHJvcHMud2lkdGg9dGhpcy5zaXplLndpZHRoKyJweCI7fQppZih0aGlzLnNpemUuaGVpZ2h0IT09dGhpcy5wcmV2U2l6ZS5oZWlnaHQpe3Byb3BzLmhlaWdodD10aGlzLnNpemUuaGVpZ2h0KyJweCI7fQp0aGlzLmhlbHBlci5jc3MocHJvcHMpO3JldHVybiBwcm9wczt9LF91cGRhdGVWaXJ0dWFsQm91bmRhcmllczpmdW5jdGlvbihmb3JjZUFzcGVjdFJhdGlvKXt2YXIgcE1pbldpZHRoLHBNYXhXaWR0aCxwTWluSGVpZ2h0LHBNYXhIZWlnaHQsYixvPXRoaXMub3B0aW9ucztiPXttaW5XaWR0aDp0aGlzLl9pc051bWJlcihvLm1pbldpZHRoKT9vLm1pbldpZHRoOjAsbWF4V2lkdGg6dGhpcy5faXNOdW1iZXIoby5tYXhXaWR0aCk/by5tYXhXaWR0aDpJbmZpbml0eSxtaW5IZWlnaHQ6dGhpcy5faXNOdW1iZXIoby5taW5IZWlnaHQpP28ubWluSGVpZ2h0OjAsbWF4SGVpZ2h0OnRoaXMuX2lzTnVtYmVyKG8ubWF4SGVpZ2h0KT9vLm1heEhlaWdodDpJbmZpbml0eX07aWYodGhpcy5fYXNwZWN0UmF0aW98fGZvcmNlQXNwZWN0UmF0aW8pe3BNaW5XaWR0aD1iLm1pbkhlaWdodCp0aGlzLmFzcGVjdFJhdGlvO3BNaW5IZWlnaHQ9Yi5taW5XaWR0aC90aGlzLmFzcGVjdFJhdGlvO3BNYXhXaWR0aD1iLm1heEhlaWdodCp0aGlzLmFzcGVjdFJhdGlvO3BNYXhIZWlnaHQ9Yi5tYXhXaWR0aC90aGlzLmFzcGVjdFJhdGlvO2lmKHBNaW5XaWR0aD5iLm1pbldpZHRoKXtiLm1pbldpZHRoPXBNaW5XaWR0aDt9CmlmKHBNaW5IZWlnaHQ+Yi5taW5IZWlnaHQpe2IubWluSGVpZ2h0PXBNaW5IZWlnaHQ7fQppZihwTWF4V2lkdGg8Yi5tYXhXaWR0aCl7Yi5tYXhXaWR0aD1wTWF4V2lkdGg7fQppZihwTWF4SGVpZ2h0PGIubWF4SGVpZ2h0KXtiLm1heEhlaWdodD1wTWF4SGVpZ2h0O319CnRoaXMuX3ZCb3VuZGFyaWVzPWI7fSxfdXBkYXRlQ2FjaGU6ZnVuY3Rpb24oZGF0YSl7dGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCk7aWYodGhpcy5faXNOdW1iZXIoZGF0YS5sZWZ0KSl7dGhpcy5wb3NpdGlvbi5sZWZ0PWRhdGEubGVmdDt9CmlmKHRoaXMuX2lzTnVtYmVyKGRhdGEudG9wKSl7dGhpcy5wb3NpdGlvbi50b3A9ZGF0YS50b3A7fQppZih0aGlzLl9pc051bWJlcihkYXRhLmhlaWdodCkpe3RoaXMuc2l6ZS5oZWlnaHQ9ZGF0YS5oZWlnaHQ7fQppZih0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSl7dGhpcy5zaXplLndpZHRoPWRhdGEud2lkdGg7fX0sX3VwZGF0ZVJhdGlvOmZ1bmN0aW9uKGRhdGEpe3ZhciBjcG9zPXRoaXMucG9zaXRpb24sY3NpemU9dGhpcy5zaXplLGE9dGhpcy5heGlzO2lmKHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSl7ZGF0YS53aWR0aD0oZGF0YS5oZWlnaHQqdGhpcy5hc3BlY3RSYXRpbyk7fWVsc2UgaWYodGhpcy5faXNOdW1iZXIoZGF0YS53aWR0aCkpe2RhdGEuaGVpZ2h0PShkYXRhLndpZHRoL3RoaXMuYXNwZWN0UmF0aW8pO30KaWYoYT09PSJzdyIpe2RhdGEubGVmdD1jcG9zLmxlZnQrKGNzaXplLndpZHRoLWRhdGEud2lkdGgpO2RhdGEudG9wPW51bGw7fQppZihhPT09Im53Iil7ZGF0YS50b3A9Y3Bvcy50b3ArKGNzaXplLmhlaWdodC1kYXRhLmhlaWdodCk7ZGF0YS5sZWZ0PWNwb3MubGVmdCsoY3NpemUud2lkdGgtZGF0YS53aWR0aCk7fQpyZXR1cm4gZGF0YTt9LF9yZXNwZWN0U2l6ZTpmdW5jdGlvbihkYXRhKXt2YXIgbz10aGlzLl92Qm91bmRhcmllcyxhPXRoaXMuYXhpcyxpc21heHc9dGhpcy5faXNOdW1iZXIoZGF0YS53aWR0aCkmJm8ubWF4V2lkdGgmJihvLm1heFdpZHRoPGRhdGEud2lkdGgpLGlzbWF4aD10aGlzLl9pc051bWJlcihkYXRhLmhlaWdodCkmJm8ubWF4SGVpZ2h0JiYoby5tYXhIZWlnaHQ8ZGF0YS5oZWlnaHQpLGlzbWludz10aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSYmby5taW5XaWR0aCYmKG8ubWluV2lkdGg+ZGF0YS53aWR0aCksaXNtaW5oPXRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSYmby5taW5IZWlnaHQmJihvLm1pbkhlaWdodD5kYXRhLmhlaWdodCksZHc9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQrdGhpcy5vcmlnaW5hbFNpemUud2lkdGgsZGg9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLnRvcCt0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQsY3c9L3N3fG53fHcvLnRlc3QoYSksY2g9L253fG5lfG4vLnRlc3QoYSk7aWYoaXNtaW53KXtkYXRhLndpZHRoPW8ubWluV2lkdGg7fQppZihpc21pbmgpe2RhdGEuaGVpZ2h0PW8ubWluSGVpZ2h0O30KaWYoaXNtYXh3KXtkYXRhLndpZHRoPW8ubWF4V2lkdGg7fQppZihpc21heGgpe2RhdGEuaGVpZ2h0PW8ubWF4SGVpZ2h0O30KaWYoaXNtaW53JiZjdyl7ZGF0YS5sZWZ0PWR3LW8ubWluV2lkdGg7fQppZihpc21heHcmJmN3KXtkYXRhLmxlZnQ9ZHctby5tYXhXaWR0aDt9CmlmKGlzbWluaCYmY2gpe2RhdGEudG9wPWRoLW8ubWluSGVpZ2h0O30KaWYoaXNtYXhoJiZjaCl7ZGF0YS50b3A9ZGgtby5tYXhIZWlnaHQ7fQppZighZGF0YS53aWR0aCYmIWRhdGEuaGVpZ2h0JiYhZGF0YS5sZWZ0JiZkYXRhLnRvcCl7ZGF0YS50b3A9bnVsbDt9ZWxzZSBpZighZGF0YS53aWR0aCYmIWRhdGEuaGVpZ2h0JiYhZGF0YS50b3AmJmRhdGEubGVmdCl7ZGF0YS5sZWZ0PW51bGw7fQpyZXR1cm4gZGF0YTt9LF9nZXRQYWRkaW5nUGx1c0JvcmRlckRpbWVuc2lvbnM6ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGk9MCx3aWR0aHM9W10sYm9yZGVycz1bZWxlbWVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksZWxlbWVudC5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSxlbGVtZW50LmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSxlbGVtZW50LmNzcygiYm9yZGVyTGVmdFdpZHRoIildLHBhZGRpbmdzPVtlbGVtZW50LmNzcygicGFkZGluZ1RvcCIpLGVsZW1lbnQuY3NzKCJwYWRkaW5nUmlnaHQiKSxlbGVtZW50LmNzcygicGFkZGluZ0JvdHRvbSIpLGVsZW1lbnQuY3NzKCJwYWRkaW5nTGVmdCIpXTtmb3IoO2k8NDtpKyspe3dpZHRoc1tpXT0ocGFyc2VGbG9hdChib3JkZXJzW2ldKXx8MCk7d2lkdGhzW2ldKz0ocGFyc2VGbG9hdChwYWRkaW5nc1tpXSl8fDApO30KcmV0dXJue2hlaWdodDp3aWR0aHNbMF0rd2lkdGhzWzJdLHdpZHRoOndpZHRoc1sxXSt3aWR0aHNbM119O30sX3Byb3BvcnRpb25hbGx5UmVzaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKXtyZXR1cm47fQp2YXIgcHJlbCxpPTAsZWxlbWVudD10aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50O2Zvcig7aTx0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDtpKyspe3ByZWw9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50c1tpXTtpZighdGhpcy5vdXRlckRpbWVuc2lvbnMpe3RoaXMub3V0ZXJEaW1lbnNpb25zPXRoaXMuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyhwcmVsKTt9CnByZWwuY3NzKHtoZWlnaHQ6KGVsZW1lbnQuaGVpZ2h0KCktdGhpcy5vdXRlckRpbWVuc2lvbnMuaGVpZ2h0KXx8MCx3aWR0aDooZWxlbWVudC53aWR0aCgpLXRoaXMub3V0ZXJEaW1lbnNpb25zLndpZHRoKXx8MH0pO319LF9yZW5kZXJQcm94eTpmdW5jdGlvbigpe3ZhciBlbD10aGlzLmVsZW1lbnQsbz10aGlzLm9wdGlvbnM7dGhpcy5lbGVtZW50T2Zmc2V0PWVsLm9mZnNldCgpO2lmKHRoaXMuX2hlbHBlcil7dGhpcy5oZWxwZXI9dGhpcy5oZWxwZXJ8fCQoIjxkaXYgc3R5bGU9J292ZXJmbG93OmhpZGRlbjsnPjwvZGl2PiIpO3RoaXMuX2FkZENsYXNzKHRoaXMuaGVscGVyLHRoaXMuX2hlbHBlcik7dGhpcy5oZWxwZXIuY3NzKHt3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSxwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6dGhpcy5lbGVtZW50T2Zmc2V0LmxlZnQrInB4Iix0b3A6dGhpcy5lbGVtZW50T2Zmc2V0LnRvcCsicHgiLHpJbmRleDorK28uekluZGV4fSk7dGhpcy5oZWxwZXIuYXBwZW5kVG8oImJvZHkiKS5kaXNhYmxlU2VsZWN0aW9uKCk7fWVsc2V7dGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50O319LF9jaGFuZ2U6e2U6ZnVuY3Rpb24oZXZlbnQsZHgpe3JldHVybnt3aWR0aDp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCtkeH07fSx3OmZ1bmN0aW9uKGV2ZW50LGR4KXt2YXIgY3M9dGhpcy5vcmlnaW5hbFNpemUsc3A9dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3JldHVybntsZWZ0OnNwLmxlZnQrZHgsd2lkdGg6Y3Mud2lkdGgtZHh9O30sbjpmdW5jdGlvbihldmVudCxkeCxkeSl7dmFyIGNzPXRoaXMub3JpZ2luYWxTaXplLHNwPXRoaXMub3JpZ2luYWxQb3NpdGlvbjtyZXR1cm57dG9wOnNwLnRvcCtkeSxoZWlnaHQ6Y3MuaGVpZ2h0LWR5fTt9LHM6ZnVuY3Rpb24oZXZlbnQsZHgsZHkpe3JldHVybntoZWlnaHQ6dGhpcy5vcmlnaW5hbFNpemUuaGVpZ2h0K2R5fTt9LHNlOmZ1bmN0aW9uKGV2ZW50LGR4LGR5KXtyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2V2ZW50LGR4LGR5XSkpO30sc3c6ZnVuY3Rpb24oZXZlbnQsZHgsZHkpe3JldHVybiAkLmV4dGVuZCh0aGlzLl9jaGFuZ2Uucy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcyxbZXZlbnQsZHgsZHldKSk7fSxuZTpmdW5jdGlvbihldmVudCxkeCxkeSl7cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2UuZS5hcHBseSh0aGlzLFtldmVudCxkeCxkeV0pKTt9LG53OmZ1bmN0aW9uKGV2ZW50LGR4LGR5KXtyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsW2V2ZW50LGR4LGR5XSkpO319LF9wcm9wYWdhdGU6ZnVuY3Rpb24obixldmVudCl7JC51aS5wbHVnaW4uY2FsbCh0aGlzLG4sW2V2ZW50LHRoaXMudWkoKV0pOyhuIT09InJlc2l6ZSImJnRoaXMuX3RyaWdnZXIobixldmVudCx0aGlzLnVpKCkpKTt9LHBsdWdpbnM6e30sdWk6ZnVuY3Rpb24oKXtyZXR1cm57b3JpZ2luYWxFbGVtZW50OnRoaXMub3JpZ2luYWxFbGVtZW50LGVsZW1lbnQ6dGhpcy5lbGVtZW50LGhlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLHNpemU6dGhpcy5zaXplLG9yaWdpbmFsU2l6ZTp0aGlzLm9yaWdpbmFsU2l6ZSxvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbn07fX0pOyQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiYW5pbWF0ZSIse3N0b3A6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zLHByPXRoYXQuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsaXN0YT1wci5sZW5ndGgmJigvdGV4dGFyZWEvaSkudGVzdChwclswXS5ub2RlTmFtZSksc29mZnNldGg9aXN0YSYmdGhhdC5faGFzU2Nyb2xsKHByWzBdLCJsZWZ0Iik/MDp0aGF0LnNpemVEaWZmLmhlaWdodCxzb2Zmc2V0dz1pc3RhPzA6dGhhdC5zaXplRGlmZi53aWR0aCxzdHlsZT17d2lkdGg6KHRoYXQuc2l6ZS53aWR0aC1zb2Zmc2V0dyksaGVpZ2h0Oih0aGF0LnNpemUuaGVpZ2h0LXNvZmZzZXRoKX0sbGVmdD0ocGFyc2VGbG9hdCh0aGF0LmVsZW1lbnQuY3NzKCJsZWZ0IikpKwoodGhhdC5wb3NpdGlvbi5sZWZ0LXRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSl8fG51bGwsdG9wPShwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoInRvcCIpKSsKKHRoYXQucG9zaXRpb24udG9wLXRoYXQub3JpZ2luYWxQb3NpdGlvbi50b3ApKXx8bnVsbDt0aGF0LmVsZW1lbnQuYW5pbWF0ZSgkLmV4dGVuZChzdHlsZSx0b3AmJmxlZnQ/e3RvcDp0b3AsbGVmdDpsZWZ0fTp7fSkse2R1cmF0aW9uOm8uYW5pbWF0ZUR1cmF0aW9uLGVhc2luZzpvLmFuaW1hdGVFYXNpbmcsc3RlcDpmdW5jdGlvbigpe3ZhciBkYXRhPXt3aWR0aDpwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoIndpZHRoIikpLGhlaWdodDpwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoImhlaWdodCIpKSx0b3A6cGFyc2VGbG9hdCh0aGF0LmVsZW1lbnQuY3NzKCJ0b3AiKSksbGVmdDpwYXJzZUZsb2F0KHRoYXQuZWxlbWVudC5jc3MoImxlZnQiKSl9O2lmKHByJiZwci5sZW5ndGgpeyQocHJbMF0pLmNzcyh7d2lkdGg6ZGF0YS53aWR0aCxoZWlnaHQ6ZGF0YS5oZWlnaHR9KTt9CnRoYXQuX3VwZGF0ZUNhY2hlKGRhdGEpO3RoYXQuX3Byb3BhZ2F0ZSgicmVzaXplIixldmVudCk7fX0pO319KTskLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImNvbnRhaW5tZW50Iix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZWxlbWVudCxwLGNvLGNoLGN3LHdpZHRoLGhlaWdodCx0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG89dGhhdC5vcHRpb25zLGVsPXRoYXQuZWxlbWVudCxvYz1vLmNvbnRhaW5tZW50LGNlPShvYyBpbnN0YW5jZW9mICQpP29jLmdldCgwKTooL3BhcmVudC8udGVzdChvYykpP2VsLnBhcmVudCgpLmdldCgwKTpvYztpZighY2Upe3JldHVybjt9CnRoYXQuY29udGFpbmVyRWxlbWVudD0kKGNlKTtpZigvZG9jdW1lbnQvLnRlc3Qob2MpfHxvYz09PWRvY3VtZW50KXt0aGF0LmNvbnRhaW5lck9mZnNldD17bGVmdDowLHRvcDowfTt0aGF0LmNvbnRhaW5lclBvc2l0aW9uPXtsZWZ0OjAsdG9wOjB9O3RoYXQucGFyZW50RGF0YT17ZWxlbWVudDokKGRvY3VtZW50KSxsZWZ0OjAsdG9wOjAsd2lkdGg6JChkb2N1bWVudCkud2lkdGgoKSxoZWlnaHQ6JChkb2N1bWVudCkuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHR9O31lbHNle2VsZW1lbnQ9JChjZSk7cD1bXTskKFsiVG9wIiwiUmlnaHQiLCJMZWZ0IiwiQm90dG9tIl0pLmVhY2goZnVuY3Rpb24oaSxuYW1lKXtwW2ldPXRoYXQuX251bShlbGVtZW50LmNzcygicGFkZGluZyIrbmFtZSkpO30pO3RoYXQuY29udGFpbmVyT2Zmc2V0PWVsZW1lbnQub2Zmc2V0KCk7dGhhdC5jb250YWluZXJQb3NpdGlvbj1lbGVtZW50LnBvc2l0aW9uKCk7dGhhdC5jb250YWluZXJTaXplPXtoZWlnaHQ6KGVsZW1lbnQuaW5uZXJIZWlnaHQoKS1wWzNdKSx3aWR0aDooZWxlbWVudC5pbm5lcldpZHRoKCktcFsxXSl9O2NvPXRoYXQuY29udGFpbmVyT2Zmc2V0O2NoPXRoYXQuY29udGFpbmVyU2l6ZS5oZWlnaHQ7Y3c9dGhhdC5jb250YWluZXJTaXplLndpZHRoO3dpZHRoPSh0aGF0Ll9oYXNTY3JvbGwoY2UsImxlZnQiKT9jZS5zY3JvbGxXaWR0aDpjdyk7aGVpZ2h0PSh0aGF0Ll9oYXNTY3JvbGwoY2UpP2NlLnNjcm9sbEhlaWdodDpjaCk7dGhhdC5wYXJlbnREYXRhPXtlbGVtZW50OmNlLGxlZnQ6Y28ubGVmdCx0b3A6Y28udG9wLHdpZHRoOndpZHRoLGhlaWdodDpoZWlnaHR9O319LHJlc2l6ZTpmdW5jdGlvbihldmVudCl7dmFyIHdvc2V0LGhvc2V0LGlzUGFyZW50LGlzT2Zmc2V0UmVsYXRpdmUsdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxvPXRoYXQub3B0aW9ucyxjbz10aGF0LmNvbnRhaW5lck9mZnNldCxjcD10aGF0LnBvc2l0aW9uLHBSYXRpbz10aGF0Ll9hc3BlY3RSYXRpb3x8ZXZlbnQuc2hpZnRLZXksY29wPXt0b3A6MCxsZWZ0OjB9LGNlPXRoYXQuY29udGFpbmVyRWxlbWVudCxjb250aW51ZVJlc2l6ZT10cnVlO2lmKGNlWzBdIT09ZG9jdW1lbnQmJigvc3RhdGljLykudGVzdChjZS5jc3MoInBvc2l0aW9uIikpKXtjb3A9Y287fQppZihjcC5sZWZ0PCh0aGF0Ll9oZWxwZXI/Y28ubGVmdDowKSl7dGhhdC5zaXplLndpZHRoPXRoYXQuc2l6ZS53aWR0aCsKKHRoYXQuX2hlbHBlcj8odGhhdC5wb3NpdGlvbi5sZWZ0LWNvLmxlZnQpOih0aGF0LnBvc2l0aW9uLmxlZnQtY29wLmxlZnQpKTtpZihwUmF0aW8pe3RoYXQuc2l6ZS5oZWlnaHQ9dGhhdC5zaXplLndpZHRoL3RoYXQuYXNwZWN0UmF0aW87Y29udGludWVSZXNpemU9ZmFsc2U7fQp0aGF0LnBvc2l0aW9uLmxlZnQ9by5oZWxwZXI/Y28ubGVmdDowO30KaWYoY3AudG9wPCh0aGF0Ll9oZWxwZXI/Y28udG9wOjApKXt0aGF0LnNpemUuaGVpZ2h0PXRoYXQuc2l6ZS5oZWlnaHQrCih0aGF0Ll9oZWxwZXI/KHRoYXQucG9zaXRpb24udG9wLWNvLnRvcCk6dGhhdC5wb3NpdGlvbi50b3ApO2lmKHBSYXRpbyl7dGhhdC5zaXplLndpZHRoPXRoYXQuc2l6ZS5oZWlnaHQqdGhhdC5hc3BlY3RSYXRpbztjb250aW51ZVJlc2l6ZT1mYWxzZTt9CnRoYXQucG9zaXRpb24udG9wPXRoYXQuX2hlbHBlcj9jby50b3A6MDt9CmlzUGFyZW50PXRoYXQuY29udGFpbmVyRWxlbWVudC5nZXQoMCk9PT10aGF0LmVsZW1lbnQucGFyZW50KCkuZ2V0KDApO2lzT2Zmc2V0UmVsYXRpdmU9L3JlbGF0aXZlfGFic29sdXRlLy50ZXN0KHRoYXQuY29udGFpbmVyRWxlbWVudC5jc3MoInBvc2l0aW9uIikpO2lmKGlzUGFyZW50JiZpc09mZnNldFJlbGF0aXZlKXt0aGF0Lm9mZnNldC5sZWZ0PXRoYXQucGFyZW50RGF0YS5sZWZ0K3RoYXQucG9zaXRpb24ubGVmdDt0aGF0Lm9mZnNldC50b3A9dGhhdC5wYXJlbnREYXRhLnRvcCt0aGF0LnBvc2l0aW9uLnRvcDt9ZWxzZXt0aGF0Lm9mZnNldC5sZWZ0PXRoYXQuZWxlbWVudC5vZmZzZXQoKS5sZWZ0O3RoYXQub2Zmc2V0LnRvcD10aGF0LmVsZW1lbnQub2Zmc2V0KCkudG9wO30Kd29zZXQ9TWF0aC5hYnModGhhdC5zaXplRGlmZi53aWR0aCsKKHRoYXQuX2hlbHBlcj90aGF0Lm9mZnNldC5sZWZ0LWNvcC5sZWZ0Oih0aGF0Lm9mZnNldC5sZWZ0LWNvLmxlZnQpKSk7aG9zZXQ9TWF0aC5hYnModGhhdC5zaXplRGlmZi5oZWlnaHQrCih0aGF0Ll9oZWxwZXI/dGhhdC5vZmZzZXQudG9wLWNvcC50b3A6KHRoYXQub2Zmc2V0LnRvcC1jby50b3ApKSk7aWYod29zZXQrdGhhdC5zaXplLndpZHRoPj10aGF0LnBhcmVudERhdGEud2lkdGgpe3RoYXQuc2l6ZS53aWR0aD10aGF0LnBhcmVudERhdGEud2lkdGgtd29zZXQ7aWYocFJhdGlvKXt0aGF0LnNpemUuaGVpZ2h0PXRoYXQuc2l6ZS53aWR0aC90aGF0LmFzcGVjdFJhdGlvO2NvbnRpbnVlUmVzaXplPWZhbHNlO319CmlmKGhvc2V0K3RoYXQuc2l6ZS5oZWlnaHQ+PXRoYXQucGFyZW50RGF0YS5oZWlnaHQpe3RoYXQuc2l6ZS5oZWlnaHQ9dGhhdC5wYXJlbnREYXRhLmhlaWdodC1ob3NldDtpZihwUmF0aW8pe3RoYXQuc2l6ZS53aWR0aD10aGF0LnNpemUuaGVpZ2h0KnRoYXQuYXNwZWN0UmF0aW87Y29udGludWVSZXNpemU9ZmFsc2U7fX0KaWYoIWNvbnRpbnVlUmVzaXplKXt0aGF0LnBvc2l0aW9uLmxlZnQ9dGhhdC5wcmV2UG9zaXRpb24ubGVmdDt0aGF0LnBvc2l0aW9uLnRvcD10aGF0LnByZXZQb3NpdGlvbi50b3A7dGhhdC5zaXplLndpZHRoPXRoYXQucHJldlNpemUud2lkdGg7dGhhdC5zaXplLmhlaWdodD10aGF0LnByZXZTaXplLmhlaWdodDt9fSxzdG9wOmZ1bmN0aW9uKCl7dmFyIHRoYXQ9JCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIiksbz10aGF0Lm9wdGlvbnMsY289dGhhdC5jb250YWluZXJPZmZzZXQsY29wPXRoYXQuY29udGFpbmVyUG9zaXRpb24sY2U9dGhhdC5jb250YWluZXJFbGVtZW50LGhlbHBlcj0kKHRoYXQuaGVscGVyKSxobz1oZWxwZXIub2Zmc2V0KCksdz1oZWxwZXIub3V0ZXJXaWR0aCgpLXRoYXQuc2l6ZURpZmYud2lkdGgsaD1oZWxwZXIub3V0ZXJIZWlnaHQoKS10aGF0LnNpemVEaWZmLmhlaWdodDtpZih0aGF0Ll9oZWxwZXImJiFvLmFuaW1hdGUmJigvcmVsYXRpdmUvKS50ZXN0KGNlLmNzcygicG9zaXRpb24iKSkpeyQodGhpcykuY3NzKHtsZWZ0OmhvLmxlZnQtY29wLmxlZnQtY28ubGVmdCx3aWR0aDp3LGhlaWdodDpofSk7fQppZih0aGF0Ll9oZWxwZXImJiFvLmFuaW1hdGUmJigvc3RhdGljLykudGVzdChjZS5jc3MoInBvc2l0aW9uIikpKXskKHRoaXMpLmNzcyh7bGVmdDpoby5sZWZ0LWNvcC5sZWZ0LWNvLmxlZnQsd2lkdGg6dyxoZWlnaHQ6aH0pO319fSk7JC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJhbHNvUmVzaXplIix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxvPXRoYXQub3B0aW9uczskKG8uYWxzb1Jlc2l6ZSkuZWFjaChmdW5jdGlvbigpe3ZhciBlbD0kKHRoaXMpO2VsLmRhdGEoInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplIix7d2lkdGg6cGFyc2VGbG9hdChlbC53aWR0aCgpKSxoZWlnaHQ6cGFyc2VGbG9hdChlbC5oZWlnaHQoKSksbGVmdDpwYXJzZUZsb2F0KGVsLmNzcygibGVmdCIpKSx0b3A6cGFyc2VGbG9hdChlbC5jc3MoInRvcCIpKX0pO30pO30scmVzaXplOmZ1bmN0aW9uKGV2ZW50LHVpKXt2YXIgdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxvPXRoYXQub3B0aW9ucyxvcz10aGF0Lm9yaWdpbmFsU2l6ZSxvcD10aGF0Lm9yaWdpbmFsUG9zaXRpb24sZGVsdGE9e2hlaWdodDoodGhhdC5zaXplLmhlaWdodC1vcy5oZWlnaHQpfHwwLHdpZHRoOih0aGF0LnNpemUud2lkdGgtb3Mud2lkdGgpfHwwLHRvcDoodGhhdC5wb3NpdGlvbi50b3Atb3AudG9wKXx8MCxsZWZ0Oih0aGF0LnBvc2l0aW9uLmxlZnQtb3AubGVmdCl8fDB9OyQoby5hbHNvUmVzaXplKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGVsPSQodGhpcyksc3RhcnQ9JCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIpLHN0eWxlPXt9LGNzcz1lbC5wYXJlbnRzKHVpLm9yaWdpbmFsRWxlbWVudFswXSkubGVuZ3RoP1sid2lkdGgiLCJoZWlnaHQiXTpbIndpZHRoIiwiaGVpZ2h0IiwidG9wIiwibGVmdCJdOyQuZWFjaChjc3MsZnVuY3Rpb24oaSxwcm9wKXt2YXIgc3VtPShzdGFydFtwcm9wXXx8MCkrKGRlbHRhW3Byb3BdfHwwKTtpZihzdW0mJnN1bT49MCl7c3R5bGVbcHJvcF09c3VtfHxudWxsO319KTtlbC5jc3Moc3R5bGUpO30pO30sc3RvcDpmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlRGF0YSgidWktcmVzaXphYmxlLWFsc29yZXNpemUiKTt9fSk7JC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJnaG9zdCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHRoYXQ9JCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIiksY3M9dGhhdC5zaXplO3RoYXQuZ2hvc3Q9dGhhdC5vcmlnaW5hbEVsZW1lbnQuY2xvbmUoKTt0aGF0Lmdob3N0LmNzcyh7b3BhY2l0eTowLjI1LGRpc3BsYXk6ImJsb2NrIixwb3NpdGlvbjoicmVsYXRpdmUiLGhlaWdodDpjcy5oZWlnaHQsd2lkdGg6Y3Mud2lkdGgsbWFyZ2luOjAsbGVmdDowLHRvcDowfSk7dGhhdC5fYWRkQ2xhc3ModGhhdC5naG9zdCwidWktcmVzaXphYmxlLWdob3N0Iik7aWYoJC51aUJhY2tDb21wYXQhPT1mYWxzZSYmdHlwZW9mIHRoYXQub3B0aW9ucy5naG9zdD09PSJzdHJpbmciKXt0aGF0Lmdob3N0LmFkZENsYXNzKHRoaXMub3B0aW9ucy5naG9zdCk7fQp0aGF0Lmdob3N0LmFwcGVuZFRvKHRoYXQuaGVscGVyKTt9LHJlc2l6ZTpmdW5jdGlvbigpe3ZhciB0aGF0PSQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpO2lmKHRoYXQuZ2hvc3Qpe3RoYXQuZ2hvc3QuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLGhlaWdodDp0aGF0LnNpemUuaGVpZ2h0LHdpZHRoOnRoYXQuc2l6ZS53aWR0aH0pO319LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKTtpZih0aGF0Lmdob3N0JiZ0aGF0LmhlbHBlcil7dGhhdC5oZWxwZXIuZ2V0KDApLnJlbW92ZUNoaWxkKHRoYXQuZ2hvc3QuZ2V0KDApKTt9fX0pOyQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiZ3JpZCIse3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBvdXRlckRpbWVuc2lvbnMsdGhhdD0kKHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxvPXRoYXQub3B0aW9ucyxjcz10aGF0LnNpemUsb3M9dGhhdC5vcmlnaW5hbFNpemUsb3A9dGhhdC5vcmlnaW5hbFBvc2l0aW9uLGE9dGhhdC5heGlzLGdyaWQ9dHlwZW9mIG8uZ3JpZD09PSJudW1iZXIiP1tvLmdyaWQsby5ncmlkXTpvLmdyaWQsZ3JpZFg9KGdyaWRbMF18fDEpLGdyaWRZPShncmlkWzFdfHwxKSxveD1NYXRoLnJvdW5kKChjcy53aWR0aC1vcy53aWR0aCkvZ3JpZFgpKmdyaWRYLG95PU1hdGgucm91bmQoKGNzLmhlaWdodC1vcy5oZWlnaHQpL2dyaWRZKSpncmlkWSxuZXdXaWR0aD1vcy53aWR0aCtveCxuZXdIZWlnaHQ9b3MuaGVpZ2h0K295LGlzTWF4V2lkdGg9by5tYXhXaWR0aCYmKG8ubWF4V2lkdGg8bmV3V2lkdGgpLGlzTWF4SGVpZ2h0PW8ubWF4SGVpZ2h0JiYoby5tYXhIZWlnaHQ8bmV3SGVpZ2h0KSxpc01pbldpZHRoPW8ubWluV2lkdGgmJihvLm1pbldpZHRoPm5ld1dpZHRoKSxpc01pbkhlaWdodD1vLm1pbkhlaWdodCYmKG8ubWluSGVpZ2h0Pm5ld0hlaWdodCk7by5ncmlkPWdyaWQ7aWYoaXNNaW5XaWR0aCl7bmV3V2lkdGgrPWdyaWRYO30KaWYoaXNNaW5IZWlnaHQpe25ld0hlaWdodCs9Z3JpZFk7fQppZihpc01heFdpZHRoKXtuZXdXaWR0aC09Z3JpZFg7fQppZihpc01heEhlaWdodCl7bmV3SGVpZ2h0LT1ncmlkWTt9CmlmKC9eKHNlfHN8ZSkkLy50ZXN0KGEpKXt0aGF0LnNpemUud2lkdGg9bmV3V2lkdGg7dGhhdC5zaXplLmhlaWdodD1uZXdIZWlnaHQ7fWVsc2UgaWYoL14obmUpJC8udGVzdChhKSl7dGhhdC5zaXplLndpZHRoPW5ld1dpZHRoO3RoYXQuc2l6ZS5oZWlnaHQ9bmV3SGVpZ2h0O3RoYXQucG9zaXRpb24udG9wPW9wLnRvcC1veTt9ZWxzZSBpZigvXihzdykkLy50ZXN0KGEpKXt0aGF0LnNpemUud2lkdGg9bmV3V2lkdGg7dGhhdC5zaXplLmhlaWdodD1uZXdIZWlnaHQ7dGhhdC5wb3NpdGlvbi5sZWZ0PW9wLmxlZnQtb3g7fWVsc2V7aWYobmV3SGVpZ2h0LWdyaWRZPD0wfHxuZXdXaWR0aC1ncmlkWDw9MCl7b3V0ZXJEaW1lbnNpb25zPXRoYXQuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyh0aGlzKTt9CmlmKG5ld0hlaWdodC1ncmlkWT4wKXt0aGF0LnNpemUuaGVpZ2h0PW5ld0hlaWdodDt0aGF0LnBvc2l0aW9uLnRvcD1vcC50b3Atb3k7fWVsc2V7bmV3SGVpZ2h0PWdyaWRZLW91dGVyRGltZW5zaW9ucy5oZWlnaHQ7dGhhdC5zaXplLmhlaWdodD1uZXdIZWlnaHQ7dGhhdC5wb3NpdGlvbi50b3A9b3AudG9wK29zLmhlaWdodC1uZXdIZWlnaHQ7fQppZihuZXdXaWR0aC1ncmlkWD4wKXt0aGF0LnNpemUud2lkdGg9bmV3V2lkdGg7dGhhdC5wb3NpdGlvbi5sZWZ0PW9wLmxlZnQtb3g7fWVsc2V7bmV3V2lkdGg9Z3JpZFgtb3V0ZXJEaW1lbnNpb25zLndpZHRoO3RoYXQuc2l6ZS53aWR0aD1uZXdXaWR0aDt0aGF0LnBvc2l0aW9uLmxlZnQ9b3AubGVmdCtvcy53aWR0aC1uZXdXaWR0aDt9fX19KTt2YXIgd2lkZ2V0c1Jlc2l6YWJsZT0kLnVpLnJlc2l6YWJsZTt2YXIgd2lkZ2V0c1NlbGVjdGFibGU9JC53aWRnZXQoInVpLnNlbGVjdGFibGUiLCQudWkubW91c2Use3ZlcnNpb246IjEuMTIuMSIsb3B0aW9uczp7YXBwZW5kVG86ImJvZHkiLGF1dG9SZWZyZXNoOnRydWUsZGlzdGFuY2U6MCxmaWx0ZXI6IioiLHRvbGVyYW5jZToidG91Y2giLHNlbGVjdGVkOm51bGwsc2VsZWN0aW5nOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGwsdW5zZWxlY3RlZDpudWxsLHVuc2VsZWN0aW5nOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzO3RoaXMuX2FkZENsYXNzKCJ1aS1zZWxlY3RhYmxlIik7dGhpcy5kcmFnZ2VkPWZhbHNlO3RoaXMucmVmcmVzaD1mdW5jdGlvbigpe3RoYXQuZWxlbWVudFBvcz0kKHRoYXQuZWxlbWVudFswXSkub2Zmc2V0KCk7dGhhdC5zZWxlY3RlZXM9JCh0aGF0Lm9wdGlvbnMuZmlsdGVyLHRoYXQuZWxlbWVudFswXSk7dGhhdC5fYWRkQ2xhc3ModGhhdC5zZWxlY3RlZXMsInVpLXNlbGVjdGVlIik7dGhhdC5zZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpe3ZhciAkdGhpcz0kKHRoaXMpLHNlbGVjdGVlT2Zmc2V0PSR0aGlzLm9mZnNldCgpLHBvcz17bGVmdDpzZWxlY3RlZU9mZnNldC5sZWZ0LXRoYXQuZWxlbWVudFBvcy5sZWZ0LHRvcDpzZWxlY3RlZU9mZnNldC50b3AtdGhhdC5lbGVtZW50UG9zLnRvcH07JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIse2VsZW1lbnQ6dGhpcywkZWxlbWVudDokdGhpcyxsZWZ0OnBvcy5sZWZ0LHRvcDpwb3MudG9wLHJpZ2h0OnBvcy5sZWZ0KyR0aGlzLm91dGVyV2lkdGgoKSxib3R0b206cG9zLnRvcCskdGhpcy5vdXRlckhlaWdodCgpLHN0YXJ0c2VsZWN0ZWQ6ZmFsc2Usc2VsZWN0ZWQ6JHRoaXMuaGFzQ2xhc3MoInVpLXNlbGVjdGVkIiksc2VsZWN0aW5nOiR0aGlzLmhhc0NsYXNzKCJ1aS1zZWxlY3RpbmciKSx1bnNlbGVjdGluZzokdGhpcy5oYXNDbGFzcygidWktdW5zZWxlY3RpbmciKX0pO30pO307dGhpcy5yZWZyZXNoKCk7dGhpcy5fbW91c2VJbml0KCk7dGhpcy5oZWxwZXI9JCgiPGRpdj4iKTt0aGlzLl9hZGRDbGFzcyh0aGlzLmhlbHBlciwidWktc2VsZWN0YWJsZS1oZWxwZXIiKTt9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZXMucmVtb3ZlRGF0YSgic2VsZWN0YWJsZS1pdGVtIik7dGhpcy5fbW91c2VEZXN0cm95KCk7fSxfbW91c2VTdGFydDpmdW5jdGlvbihldmVudCl7dmFyIHRoYXQ9dGhpcyxvcHRpb25zPXRoaXMub3B0aW9uczt0aGlzLm9wb3M9W2V2ZW50LnBhZ2VYLGV2ZW50LnBhZ2VZXTt0aGlzLmVsZW1lbnRQb3M9JCh0aGlzLmVsZW1lbnRbMF0pLm9mZnNldCgpO2lmKHRoaXMub3B0aW9ucy5kaXNhYmxlZCl7cmV0dXJuO30KdGhpcy5zZWxlY3RlZXM9JChvcHRpb25zLmZpbHRlcix0aGlzLmVsZW1lbnRbMF0pO3RoaXMuX3RyaWdnZXIoInN0YXJ0IixldmVudCk7JChvcHRpb25zLmFwcGVuZFRvKS5hcHBlbmQodGhpcy5oZWxwZXIpO3RoaXMuaGVscGVyLmNzcyh7ImxlZnQiOmV2ZW50LnBhZ2VYLCJ0b3AiOmV2ZW50LnBhZ2VZLCJ3aWR0aCI6MCwiaGVpZ2h0IjowfSk7aWYob3B0aW9ucy5hdXRvUmVmcmVzaCl7dGhpcy5yZWZyZXNoKCk7fQp0aGlzLnNlbGVjdGVlcy5maWx0ZXIoIi51aS1zZWxlY3RlZCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgc2VsZWN0ZWU9JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO3NlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQ9dHJ1ZTtpZighZXZlbnQubWV0YUtleSYmIWV2ZW50LmN0cmxLZXkpe3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpO3NlbGVjdGVlLnNlbGVjdGVkPWZhbHNlO3RoYXQuX2FkZENsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpO3NlbGVjdGVlLnVuc2VsZWN0aW5nPXRydWU7dGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGV2ZW50LHt1bnNlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fX0pOyQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgZG9TZWxlY3Qsc2VsZWN0ZWU9JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO2lmKHNlbGVjdGVlKXtkb1NlbGVjdD0oIWV2ZW50Lm1ldGFLZXkmJiFldmVudC5jdHJsS2V5KXx8IXNlbGVjdGVlLiRlbGVtZW50Lmhhc0NsYXNzKCJ1aS1zZWxlY3RlZCIpO3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LGRvU2VsZWN0PyJ1aS11bnNlbGVjdGluZyI6InVpLXNlbGVjdGVkIikuX2FkZENsYXNzKHNlbGVjdGVlLiRlbGVtZW50LGRvU2VsZWN0PyJ1aS1zZWxlY3RpbmciOiJ1aS11bnNlbGVjdGluZyIpO3NlbGVjdGVlLnVuc2VsZWN0aW5nPSFkb1NlbGVjdDtzZWxlY3RlZS5zZWxlY3Rpbmc9ZG9TZWxlY3Q7c2VsZWN0ZWUuc2VsZWN0ZWQ9ZG9TZWxlY3Q7aWYoZG9TZWxlY3Qpe3RoYXQuX3RyaWdnZXIoInNlbGVjdGluZyIsZXZlbnQse3NlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fWVsc2V7dGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGV2ZW50LHt1bnNlbGVjdGluZzpzZWxlY3RlZS5lbGVtZW50fSk7fQpyZXR1cm4gZmFsc2U7fX0pO30sX21vdXNlRHJhZzpmdW5jdGlvbihldmVudCl7dGhpcy5kcmFnZ2VkPXRydWU7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkKXtyZXR1cm47fQp2YXIgdG1wLHRoYXQ9dGhpcyxvcHRpb25zPXRoaXMub3B0aW9ucyx4MT10aGlzLm9wb3NbMF0seTE9dGhpcy5vcG9zWzFdLHgyPWV2ZW50LnBhZ2VYLHkyPWV2ZW50LnBhZ2VZO2lmKHgxPngyKXt0bXA9eDI7eDI9eDE7eDE9dG1wO30KaWYoeTE+eTIpe3RtcD15Mjt5Mj15MTt5MT10bXA7fQp0aGlzLmhlbHBlci5jc3Moe2xlZnQ6eDEsdG9wOnkxLHdpZHRoOngyLXgxLGhlaWdodDp5Mi15MX0pO3RoaXMuc2VsZWN0ZWVzLmVhY2goZnVuY3Rpb24oKXt2YXIgc2VsZWN0ZWU9JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpLGhpdD1mYWxzZSxvZmZzZXQ9e307aWYoIXNlbGVjdGVlfHxzZWxlY3RlZS5lbGVtZW50PT09dGhhdC5lbGVtZW50WzBdKXtyZXR1cm47fQpvZmZzZXQubGVmdD1zZWxlY3RlZS5sZWZ0K3RoYXQuZWxlbWVudFBvcy5sZWZ0O29mZnNldC5yaWdodD1zZWxlY3RlZS5yaWdodCt0aGF0LmVsZW1lbnRQb3MubGVmdDtvZmZzZXQudG9wPXNlbGVjdGVlLnRvcCt0aGF0LmVsZW1lbnRQb3MudG9wO29mZnNldC5ib3R0b209c2VsZWN0ZWUuYm90dG9tK3RoYXQuZWxlbWVudFBvcy50b3A7aWYob3B0aW9ucy50b2xlcmFuY2U9PT0idG91Y2giKXtoaXQ9KCEob2Zmc2V0LmxlZnQ+eDJ8fG9mZnNldC5yaWdodDx4MXx8b2Zmc2V0LnRvcD55Mnx8b2Zmc2V0LmJvdHRvbTx5MSkpO31lbHNlIGlmKG9wdGlvbnMudG9sZXJhbmNlPT09ImZpdCIpe2hpdD0ob2Zmc2V0LmxlZnQ+eDEmJm9mZnNldC5yaWdodDx4MiYmb2Zmc2V0LnRvcD55MSYmb2Zmc2V0LmJvdHRvbTx5Mik7fQppZihoaXQpe2lmKHNlbGVjdGVlLnNlbGVjdGVkKXt0aGF0Ll9yZW1vdmVDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKTtzZWxlY3RlZS5zZWxlY3RlZD1mYWxzZTt9CmlmKHNlbGVjdGVlLnVuc2VsZWN0aW5nKXt0aGF0Ll9yZW1vdmVDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKTtzZWxlY3RlZS51bnNlbGVjdGluZz1mYWxzZTt9CmlmKCFzZWxlY3RlZS5zZWxlY3Rpbmcpe3RoYXQuX2FkZENsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RpbmciKTtzZWxlY3RlZS5zZWxlY3Rpbmc9dHJ1ZTt0aGF0Ll90cmlnZ2VyKCJzZWxlY3RpbmciLGV2ZW50LHtzZWxlY3Rpbmc6c2VsZWN0ZWUuZWxlbWVudH0pO319ZWxzZXtpZihzZWxlY3RlZS5zZWxlY3Rpbmcpe2lmKChldmVudC5tZXRhS2V5fHxldmVudC5jdHJsS2V5KSYmc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCl7dGhhdC5fcmVtb3ZlQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGluZyIpO3NlbGVjdGVlLnNlbGVjdGluZz1mYWxzZTt0aGF0Ll9hZGRDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKTtzZWxlY3RlZS5zZWxlY3RlZD10cnVlO31lbHNle3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RpbmciKTtzZWxlY3RlZS5zZWxlY3Rpbmc9ZmFsc2U7aWYoc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCl7dGhhdC5fYWRkQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXVuc2VsZWN0aW5nIik7c2VsZWN0ZWUudW5zZWxlY3Rpbmc9dHJ1ZTt9CnRoYXQuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixldmVudCx7dW5zZWxlY3Rpbmc6c2VsZWN0ZWUuZWxlbWVudH0pO319CmlmKHNlbGVjdGVlLnNlbGVjdGVkKXtpZighZXZlbnQubWV0YUtleSYmIWV2ZW50LmN0cmxLZXkmJiFzZWxlY3RlZS5zdGFydHNlbGVjdGVkKXt0aGF0Ll9yZW1vdmVDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKTtzZWxlY3RlZS5zZWxlY3RlZD1mYWxzZTt0aGF0Ll9hZGRDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKTtzZWxlY3RlZS51bnNlbGVjdGluZz10cnVlO3RoYXQuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixldmVudCx7dW5zZWxlY3Rpbmc6c2VsZWN0ZWUuZWxlbWVudH0pO319fX0pO3JldHVybiBmYWxzZTt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0aGF0PXRoaXM7dGhpcy5kcmFnZ2VkPWZhbHNlOyQoIi51aS11bnNlbGVjdGluZyIsdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHNlbGVjdGVlPSQuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTt0aGF0Ll9yZW1vdmVDbGFzcyhzZWxlY3RlZS4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKTtzZWxlY3RlZS51bnNlbGVjdGluZz1mYWxzZTtzZWxlY3RlZS5zdGFydHNlbGVjdGVkPWZhbHNlO3RoYXQuX3RyaWdnZXIoInVuc2VsZWN0ZWQiLGV2ZW50LHt1bnNlbGVjdGVkOnNlbGVjdGVlLmVsZW1lbnR9KTt9KTskKCIudWktc2VsZWN0aW5nIix0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt2YXIgc2VsZWN0ZWU9JC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO3RoYXQuX3JlbW92ZUNsYXNzKHNlbGVjdGVlLiRlbGVtZW50LCJ1aS1zZWxlY3RpbmciKS5fYWRkQ2xhc3Moc2VsZWN0ZWUuJGVsZW1lbnQsInVpLXNlbGVjdGVkIik7c2VsZWN0ZWUuc2VsZWN0aW5nPWZhbHNlO3NlbGVjdGVlLnNlbGVjdGVkPXRydWU7c2VsZWN0ZWUuc3RhcnRzZWxlY3RlZD10cnVlO3RoYXQuX3RyaWdnZXIoInNlbGVjdGVkIixldmVudCx7c2VsZWN0ZWQ6c2VsZWN0ZWUuZWxlbWVudH0pO30pO3RoaXMuX3RyaWdnZXIoInN0b3AiLGV2ZW50KTt0aGlzLmhlbHBlci5yZW1vdmUoKTtyZXR1cm4gZmFsc2U7fX0pO3ZhciB3aWRnZXRzU29ydGFibGU9JC53aWRnZXQoInVpLnNvcnRhYmxlIiwkLnVpLm1vdXNlLHt2ZXJzaW9uOiIxLjEyLjEiLHdpZGdldEV2ZW50UHJlZml4OiJzb3J0IixyZWFkeTpmYWxzZSxvcHRpb25zOnthcHBlbmRUbzoicGFyZW50IixheGlzOmZhbHNlLGNvbm5lY3RXaXRoOmZhbHNlLGNvbnRhaW5tZW50OmZhbHNlLGN1cnNvcjoiYXV0byIsY3Vyc29yQXQ6ZmFsc2UsZHJvcE9uRW1wdHk6dHJ1ZSxmb3JjZVBsYWNlaG9sZGVyU2l6ZTpmYWxzZSxmb3JjZUhlbHBlclNpemU6ZmFsc2UsZ3JpZDpmYWxzZSxoYW5kbGU6ZmFsc2UsaGVscGVyOiJvcmlnaW5hbCIsaXRlbXM6Ij4gKiIsb3BhY2l0eTpmYWxzZSxwbGFjZWhvbGRlcjpmYWxzZSxyZXZlcnQ6ZmFsc2Usc2Nyb2xsOnRydWUsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0Iix6SW5kZXg6MTAwMCxhY3RpdmF0ZTpudWxsLGJlZm9yZVN0b3A6bnVsbCxjaGFuZ2U6bnVsbCxkZWFjdGl2YXRlOm51bGwsb3V0Om51bGwsb3ZlcjpudWxsLHJlY2VpdmU6bnVsbCxyZW1vdmU6bnVsbCxzb3J0Om51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGwsdXBkYXRlOm51bGx9LF9pc092ZXJBeGlzOmZ1bmN0aW9uKHgscmVmZXJlbmNlLHNpemUpe3JldHVybih4Pj1yZWZlcmVuY2UpJiYoeDwocmVmZXJlbmNlK3NpemUpKTt9LF9pc0Zsb2F0aW5nOmZ1bmN0aW9uKGl0ZW0pe3JldHVybigvbGVmdHxyaWdodC8pLnRlc3QoaXRlbS5jc3MoImZsb2F0IikpfHwoL2lubGluZXx0YWJsZS1jZWxsLykudGVzdChpdGVtLmNzcygiZGlzcGxheSIpKTt9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRhaW5lckNhY2hlPXt9O3RoaXMuX2FkZENsYXNzKCJ1aS1zb3J0YWJsZSIpO3RoaXMucmVmcmVzaCgpO3RoaXMub2Zmc2V0PXRoaXMuZWxlbWVudC5vZmZzZXQoKTt0aGlzLl9tb3VzZUluaXQoKTt0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTt0aGlzLnJlYWR5PXRydWU7fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dGhpcy5fc3VwZXIoa2V5LHZhbHVlKTtpZihrZXk9PT0iaGFuZGxlIil7dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7fX0sX3NldEhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXM7dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LmZpbmQoIi51aS1zb3J0YWJsZS1oYW5kbGUiKSwidWktc29ydGFibGUtaGFuZGxlIik7JC5lYWNoKHRoaXMuaXRlbXMsZnVuY3Rpb24oKXt0aGF0Ll9hZGRDbGFzcyh0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGFuZGxlP3RoaXMuaXRlbS5maW5kKHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUpOnRoaXMuaXRlbSwidWktc29ydGFibGUtaGFuZGxlIik7fSk7fSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX21vdXNlRGVzdHJveSgpO2Zvcih2YXIgaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXt0aGlzLml0ZW1zW2ldLml0ZW0ucmVtb3ZlRGF0YSh0aGlzLndpZGdldE5hbWUrIi1pdGVtIik7fQpyZXR1cm4gdGhpczt9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZXZlbnQsb3ZlcnJpZGVIYW5kbGUpe3ZhciBjdXJyZW50SXRlbT1udWxsLHZhbGlkSGFuZGxlPWZhbHNlLHRoYXQ9dGhpcztpZih0aGlzLnJldmVydGluZyl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5vcHRpb25zLmRpc2FibGVkfHx0aGlzLm9wdGlvbnMudHlwZT09PSJzdGF0aWMiKXtyZXR1cm4gZmFsc2U7fQp0aGlzLl9yZWZyZXNoSXRlbXMoZXZlbnQpOyQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe2lmKCQuZGF0YSh0aGlzLHRoYXQud2lkZ2V0TmFtZSsiLWl0ZW0iKT09PXRoYXQpe2N1cnJlbnRJdGVtPSQodGhpcyk7cmV0dXJuIGZhbHNlO319KTtpZigkLmRhdGEoZXZlbnQudGFyZ2V0LHRoYXQud2lkZ2V0TmFtZSsiLWl0ZW0iKT09PXRoYXQpe2N1cnJlbnRJdGVtPSQoZXZlbnQudGFyZ2V0KTt9CmlmKCFjdXJyZW50SXRlbSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5vcHRpb25zLmhhbmRsZSYmIW92ZXJyaWRlSGFuZGxlKXskKHRoaXMub3B0aW9ucy5oYW5kbGUsY3VycmVudEl0ZW0pLmZpbmQoIioiKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXM9PT1ldmVudC50YXJnZXQpe3ZhbGlkSGFuZGxlPXRydWU7fX0pO2lmKCF2YWxpZEhhbmRsZSl7cmV0dXJuIGZhbHNlO319CnRoaXMuY3VycmVudEl0ZW09Y3VycmVudEl0ZW07dGhpcy5fcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXMoKTtyZXR1cm4gdHJ1ZTt9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGV2ZW50LG92ZXJyaWRlSGFuZGxlLG5vQWN0aXZhdGlvbil7dmFyIGksYm9keSxvPXRoaXMub3B0aW9uczt0aGlzLmN1cnJlbnRDb250YWluZXI9dGhpczt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTt0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpO3RoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTt0aGlzLl9jYWNoZU1hcmdpbnMoKTt0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTt0aGlzLm9mZnNldD10aGlzLmN1cnJlbnRJdGVtLm9mZnNldCgpO3RoaXMub2Zmc2V0PXt0b3A6dGhpcy5vZmZzZXQudG9wLXRoaXMubWFyZ2lucy50b3AsbGVmdDp0aGlzLm9mZnNldC5sZWZ0LXRoaXMubWFyZ2lucy5sZWZ0fTskLmV4dGVuZCh0aGlzLm9mZnNldCx7Y2xpY2s6e2xlZnQ6ZXZlbnQucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6ZXZlbnQucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pO3RoaXMuaGVscGVyLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpO3RoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpO3RoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGV2ZW50KTt0aGlzLm9yaWdpbmFsUGFnZVg9ZXZlbnQucGFnZVg7dGhpcy5vcmlnaW5hbFBhZ2VZPWV2ZW50LnBhZ2VZOyhvLmN1cnNvckF0JiZ0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKG8uY3Vyc29yQXQpKTt0aGlzLmRvbVBvc2l0aW9uPXtwcmV2OnRoaXMuY3VycmVudEl0ZW0ucHJldigpWzBdLHBhcmVudDp0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdfTtpZih0aGlzLmhlbHBlclswXSE9PXRoaXMuY3VycmVudEl0ZW1bMF0pe3RoaXMuY3VycmVudEl0ZW0uaGlkZSgpO30KdGhpcy5fY3JlYXRlUGxhY2Vob2xkZXIoKTtpZihvLmNvbnRhaW5tZW50KXt0aGlzLl9zZXRDb250YWlubWVudCgpO30KaWYoby5jdXJzb3ImJm8uY3Vyc29yIT09ImF1dG8iKXtib2R5PXRoaXMuZG9jdW1lbnQuZmluZCgiYm9keSIpO3RoaXMuc3RvcmVkQ3Vyc29yPWJvZHkuY3NzKCJjdXJzb3IiKTtib2R5LmNzcygiY3Vyc29yIixvLmN1cnNvcik7dGhpcy5zdG9yZWRTdHlsZXNoZWV0PSQoIjxzdHlsZT4qeyBjdXJzb3I6ICIrby5jdXJzb3IrIiAhaW1wb3J0YW50OyB9PC9zdHlsZT4iKS5hcHBlbmRUbyhib2R5KTt9CmlmKG8ub3BhY2l0eSl7aWYodGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iikpe3RoaXMuX3N0b3JlZE9wYWNpdHk9dGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iik7fQp0aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiLG8ub3BhY2l0eSk7fQppZihvLnpJbmRleCl7aWYodGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiKSl7dGhpcy5fc3RvcmVkWkluZGV4PXRoaXMuaGVscGVyLmNzcygiekluZGV4Iik7fQp0aGlzLmhlbHBlci5jc3MoInpJbmRleCIsby56SW5kZXgpO30KaWYodGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZ0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT09IkhUTUwiKXt0aGlzLm92ZXJmbG93T2Zmc2V0PXRoaXMuc2Nyb2xsUGFyZW50Lm9mZnNldCgpO30KdGhpcy5fdHJpZ2dlcigic3RhcnQiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTtpZighdGhpcy5fcHJlc2VydmVIZWxwZXJQcm9wb3J0aW9ucyl7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO30KaWYoIW5vQWN0aXZhdGlvbil7Zm9yKGk9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2k+PTA7aS0tKXt0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoImFjdGl2YXRlIixldmVudCx0aGlzLl91aUhhc2godGhpcykpO319CmlmKCQudWkuZGRtYW5hZ2VyKXskLnVpLmRkbWFuYWdlci5jdXJyZW50PXRoaXM7fQppZigkLnVpLmRkbWFuYWdlciYmIW8uZHJvcEJlaGF2aW91cil7JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxldmVudCk7fQp0aGlzLmRyYWdnaW5nPXRydWU7dGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsInVpLXNvcnRhYmxlLWhlbHBlciIpO3RoaXMuX21vdXNlRHJhZyhldmVudCk7cmV0dXJuIHRydWU7fSxfbW91c2VEcmFnOmZ1bmN0aW9uKGV2ZW50KXt2YXIgaSxpdGVtLGl0ZW1FbGVtZW50LGludGVyc2VjdGlvbixvPXRoaXMub3B0aW9ucyxzY3JvbGxlZD1mYWxzZTt0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpO3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7aWYoIXRoaXMubGFzdFBvc2l0aW9uQWJzKXt0aGlzLmxhc3RQb3NpdGlvbkFicz10aGlzLnBvc2l0aW9uQWJzO30KaWYodGhpcy5vcHRpb25zLnNjcm9sbCl7aWYodGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZ0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT09IkhUTUwiKXtpZigodGhpcy5vdmVyZmxvd09mZnNldC50b3ArdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0KS0KZXZlbnQucGFnZVk8by5zY3JvbGxTZW5zaXRpdml0eSl7dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPXNjcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCtvLnNjcm9sbFNwZWVkO31lbHNlIGlmKGV2ZW50LnBhZ2VZLXRoaXMub3ZlcmZsb3dPZmZzZXQudG9wPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1zY3JvbGxlZD10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3Atby5zY3JvbGxTcGVlZDt9CmlmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQrdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgpLQpldmVudC5wYWdlWDxvLnNjcm9sbFNlbnNpdGl2aXR5KXt0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXNjcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQrby5zY3JvbGxTcGVlZDt9ZWxzZSBpZihldmVudC5wYWdlWC10aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQ8by5zY3JvbGxTZW5zaXRpdml0eSl7dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1zY3JvbGxlZD10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0LW8uc2Nyb2xsU3BlZWQ7fX1lbHNle2lmKGV2ZW50LnBhZ2VZLXRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKCk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5kb2N1bWVudC5zY3JvbGxUb3AodGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKS1vLnNjcm9sbFNwZWVkKTt9ZWxzZSBpZih0aGlzLndpbmRvdy5oZWlnaHQoKS0oZXZlbnQucGFnZVktdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5kb2N1bWVudC5zY3JvbGxUb3AodGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKStvLnNjcm9sbFNwZWVkKTt9CmlmKGV2ZW50LnBhZ2VYLXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCh0aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKS1vLnNjcm9sbFNwZWVkKTt9ZWxzZSBpZih0aGlzLndpbmRvdy53aWR0aCgpLShldmVudC5wYWdlWC10aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKSk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpK28uc2Nyb2xsU3BlZWQpO319CmlmKHNjcm9sbGVkIT09ZmFsc2UmJiQudWkuZGRtYW5hZ2VyJiYhby5kcm9wQmVoYXZpb3VyKXskLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGV2ZW50KTt9fQp0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPT0ieSIpe3RoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCI7fQppZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT09IngiKXt0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4Ijt9CmZvcihpPXRoaXMuaXRlbXMubGVuZ3RoLTE7aT49MDtpLS0pe2l0ZW09dGhpcy5pdGVtc1tpXTtpdGVtRWxlbWVudD1pdGVtLml0ZW1bMF07aW50ZXJzZWN0aW9uPXRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihpdGVtKTtpZighaW50ZXJzZWN0aW9uKXtjb250aW51ZTt9CmlmKGl0ZW0uaW5zdGFuY2UhPT10aGlzLmN1cnJlbnRDb250YWluZXIpe2NvbnRpbnVlO30KaWYoaXRlbUVsZW1lbnQhPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLnBsYWNlaG9sZGVyW2ludGVyc2VjdGlvbj09PTE/Im5leHQiOiJwcmV2Il0oKVswXSE9PWl0ZW1FbGVtZW50JiYhJC5jb250YWlucyh0aGlzLnBsYWNlaG9sZGVyWzBdLGl0ZW1FbGVtZW50KSYmKHRoaXMub3B0aW9ucy50eXBlPT09InNlbWktZHluYW1pYyI/ISQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLGl0ZW1FbGVtZW50KTp0cnVlKSl7dGhpcy5kaXJlY3Rpb249aW50ZXJzZWN0aW9uPT09MT8iZG93biI6InVwIjtpZih0aGlzLm9wdGlvbnMudG9sZXJhbmNlPT09InBvaW50ZXIifHx0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKGl0ZW0pKXt0aGlzLl9yZWFycmFuZ2UoZXZlbnQsaXRlbSk7fWVsc2V7YnJlYWs7fQp0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTticmVhazt9fQp0aGlzLl9jb250YWN0Q29udGFpbmVycyhldmVudCk7aWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxldmVudCk7fQp0aGlzLl90cmlnZ2VyKCJzb3J0IixldmVudCx0aGlzLl91aUhhc2goKSk7dGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicztyZXR1cm4gZmFsc2U7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGV2ZW50LG5vUHJvcGFnYXRpb24pe2lmKCFldmVudCl7cmV0dXJuO30KaWYoJC51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91cil7JC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLGV2ZW50KTt9CmlmKHRoaXMub3B0aW9ucy5yZXZlcnQpe3ZhciB0aGF0PXRoaXMsY3VyPXRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCksYXhpcz10aGlzLm9wdGlvbnMuYXhpcyxhbmltYXRpb249e307aWYoIWF4aXN8fGF4aXM9PT0ieCIpe2FuaW1hdGlvbi5sZWZ0PWN1ci5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LXRoaXMubWFyZ2lucy5sZWZ0KwoodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxMZWZ0KTt9CmlmKCFheGlzfHxheGlzPT09InkiKXthbmltYXRpb24udG9wPWN1ci50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcC10aGlzLm1hcmdpbnMudG9wKwoodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxUb3ApO30KdGhpcy5yZXZlcnRpbmc9dHJ1ZTskKHRoaXMuaGVscGVyKS5hbmltYXRlKGFuaW1hdGlvbixwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0LDEwKXx8NTAwLGZ1bmN0aW9uKCl7dGhhdC5fY2xlYXIoZXZlbnQpO30pO31lbHNle3RoaXMuX2NsZWFyKGV2ZW50LG5vUHJvcGFnYXRpb24pO30KcmV0dXJuIGZhbHNlO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5kcmFnZ2luZyl7dGhpcy5fbW91c2VVcChuZXcgJC5FdmVudCgibW91c2V1cCIse3RhcmdldDpudWxsfSkpO2lmKHRoaXMub3B0aW9ucy5oZWxwZXI9PT0ib3JpZ2luYWwiKXt0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpO3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuY3VycmVudEl0ZW0sInVpLXNvcnRhYmxlLWhlbHBlciIpO31lbHNle3RoaXMuY3VycmVudEl0ZW0uc2hvdygpO30KZm9yKHZhciBpPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtpPj0wO2ktLSl7dGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJkZWFjdGl2YXRlIixudWxsLHRoaXMuX3VpSGFzaCh0aGlzKSk7aWYodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcigib3V0IixudWxsLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXI9MDt9fX0KaWYodGhpcy5wbGFjZWhvbGRlcil7aWYodGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlKXt0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk7fQppZih0aGlzLm9wdGlvbnMuaGVscGVyIT09Im9yaWdpbmFsIiYmdGhpcy5oZWxwZXImJnRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpe3RoaXMuaGVscGVyLnJlbW92ZSgpO30KJC5leHRlbmQodGhpcyx7aGVscGVyOm51bGwsZHJhZ2dpbmc6ZmFsc2UscmV2ZXJ0aW5nOmZhbHNlLF9ub0ZpbmFsU29ydDpudWxsfSk7aWYodGhpcy5kb21Qb3NpdGlvbi5wcmV2KXskKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5jdXJyZW50SXRlbSk7fWVsc2V7JCh0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCkucHJlcGVuZCh0aGlzLmN1cnJlbnRJdGVtKTt9fQpyZXR1cm4gdGhpczt9LHNlcmlhbGl6ZTpmdW5jdGlvbihvKXt2YXIgaXRlbXM9dGhpcy5fZ2V0SXRlbXNBc2pRdWVyeShvJiZvLmNvbm5lY3RlZCksc3RyPVtdO289b3x8e307JChpdGVtcykuZWFjaChmdW5jdGlvbigpe3ZhciByZXM9KCQoby5pdGVtfHx0aGlzKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKXx8IiIpLm1hdGNoKG8uZXhwcmVzc2lvbnx8KC8oLispW1wtPV9dKC4rKS8pKTtpZihyZXMpe3N0ci5wdXNoKChvLmtleXx8cmVzWzFdKyJbXSIpKyI9Iisoby5rZXkmJm8uZXhwcmVzc2lvbj9yZXNbMV06cmVzWzJdKSk7fX0pO2lmKCFzdHIubGVuZ3RoJiZvLmtleSl7c3RyLnB1c2goby5rZXkrIj0iKTt9CnJldHVybiBzdHIuam9pbigiJiIpO30sdG9BcnJheTpmdW5jdGlvbihvKXt2YXIgaXRlbXM9dGhpcy5fZ2V0SXRlbXNBc2pRdWVyeShvJiZvLmNvbm5lY3RlZCkscmV0PVtdO289b3x8e307aXRlbXMuZWFjaChmdW5jdGlvbigpe3JldC5wdXNoKCQoby5pdGVtfHx0aGlzKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKXx8IiIpO30pO3JldHVybiByZXQ7fSxfaW50ZXJzZWN0c1dpdGg6ZnVuY3Rpb24oaXRlbSl7dmFyIHgxPXRoaXMucG9zaXRpb25BYnMubGVmdCx4Mj14MSt0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLHkxPXRoaXMucG9zaXRpb25BYnMudG9wLHkyPXkxK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGw9aXRlbS5sZWZ0LHI9bCtpdGVtLndpZHRoLHQ9aXRlbS50b3AsYj10K2l0ZW0uaGVpZ2h0LGR5Q2xpY2s9dGhpcy5vZmZzZXQuY2xpY2sudG9wLGR4Q2xpY2s9dGhpcy5vZmZzZXQuY2xpY2subGVmdCxpc092ZXJFbGVtZW50SGVpZ2h0PSh0aGlzLm9wdGlvbnMuYXhpcz09PSJ4Iil8fCgoeTErZHlDbGljayk+dCYmKHkxK2R5Q2xpY2spPGIpLGlzT3ZlckVsZW1lbnRXaWR0aD0odGhpcy5vcHRpb25zLmF4aXM9PT0ieSIpfHwoKHgxK2R4Q2xpY2spPmwmJih4MStkeENsaWNrKTxyKSxpc092ZXJFbGVtZW50PWlzT3ZlckVsZW1lbnRIZWlnaHQmJmlzT3ZlckVsZW1lbnRXaWR0aDtpZih0aGlzLm9wdGlvbnMudG9sZXJhbmNlPT09InBvaW50ZXIifHx0aGlzLm9wdGlvbnMuZm9yY2VQb2ludGVyRm9yQ29udGFpbmVyc3x8KHRoaXMub3B0aW9ucy50b2xlcmFuY2UhPT0icG9pbnRlciImJnRoaXMuaGVscGVyUHJvcG9ydGlvbnNbdGhpcy5mbG9hdGluZz8id2lkdGgiOiJoZWlnaHQiXT5pdGVtW3RoaXMuZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0Il0pKXtyZXR1cm4gaXNPdmVyRWxlbWVudDt9ZWxzZXtyZXR1cm4obDx4MSsodGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yKSYmeDItKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMik8ciYmdDx5MSsodGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMikmJnkyLSh0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yKTxiKTt9fSxfaW50ZXJzZWN0c1dpdGhQb2ludGVyOmZ1bmN0aW9uKGl0ZW0pe3ZhciB2ZXJ0aWNhbERpcmVjdGlvbixob3Jpem9udGFsRGlyZWN0aW9uLGlzT3ZlckVsZW1lbnRIZWlnaHQ9KHRoaXMub3B0aW9ucy5heGlzPT09IngiKXx8dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCt0aGlzLm9mZnNldC5jbGljay50b3AsaXRlbS50b3AsaXRlbS5oZWlnaHQpLGlzT3ZlckVsZW1lbnRXaWR0aD0odGhpcy5vcHRpb25zLmF4aXM9PT0ieSIpfHx0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCt0aGlzLm9mZnNldC5jbGljay5sZWZ0LGl0ZW0ubGVmdCxpdGVtLndpZHRoKSxpc092ZXJFbGVtZW50PWlzT3ZlckVsZW1lbnRIZWlnaHQmJmlzT3ZlckVsZW1lbnRXaWR0aDtpZighaXNPdmVyRWxlbWVudCl7cmV0dXJuIGZhbHNlO30KdmVydGljYWxEaXJlY3Rpb249dGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCk7aG9yaXpvbnRhbERpcmVjdGlvbj10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO3JldHVybiB0aGlzLmZsb2F0aW5nPygoaG9yaXpvbnRhbERpcmVjdGlvbj09PSJyaWdodCJ8fHZlcnRpY2FsRGlyZWN0aW9uPT09ImRvd24iKT8yOjEpOih2ZXJ0aWNhbERpcmVjdGlvbiYmKHZlcnRpY2FsRGlyZWN0aW9uPT09ImRvd24iPzI6MSkpO30sX2ludGVyc2VjdHNXaXRoU2lkZXM6ZnVuY3Rpb24oaXRlbSl7dmFyIGlzT3ZlckJvdHRvbUhhbGY9dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCsKdGhpcy5vZmZzZXQuY2xpY2sudG9wLGl0ZW0udG9wKyhpdGVtLmhlaWdodC8yKSxpdGVtLmhlaWdodCksaXNPdmVyUmlnaHRIYWxmPXRoaXMuX2lzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0Kwp0aGlzLm9mZnNldC5jbGljay5sZWZ0LGl0ZW0ubGVmdCsoaXRlbS53aWR0aC8yKSxpdGVtLndpZHRoKSx2ZXJ0aWNhbERpcmVjdGlvbj10aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSxob3Jpem9udGFsRGlyZWN0aW9uPXRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7aWYodGhpcy5mbG9hdGluZyYmaG9yaXpvbnRhbERpcmVjdGlvbil7cmV0dXJuKChob3Jpem9udGFsRGlyZWN0aW9uPT09InJpZ2h0IiYmaXNPdmVyUmlnaHRIYWxmKXx8KGhvcml6b250YWxEaXJlY3Rpb249PT0ibGVmdCImJiFpc092ZXJSaWdodEhhbGYpKTt9ZWxzZXtyZXR1cm4gdmVydGljYWxEaXJlY3Rpb24mJigodmVydGljYWxEaXJlY3Rpb249PT0iZG93biImJmlzT3ZlckJvdHRvbUhhbGYpfHwodmVydGljYWxEaXJlY3Rpb249PT0idXAiJiYhaXNPdmVyQm90dG9tSGFsZikpO319LF9nZXREcmFnVmVydGljYWxEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZGVsdGE9dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO3JldHVybiBkZWx0YSE9PTAmJihkZWx0YT4wPyJkb3duIjoidXAiKTt9LF9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBkZWx0YT10aGlzLnBvc2l0aW9uQWJzLmxlZnQtdGhpcy5sYXN0UG9zaXRpb25BYnMubGVmdDtyZXR1cm4gZGVsdGEhPT0wJiYoZGVsdGE+MD8icmlnaHQiOiJsZWZ0Iik7fSxyZWZyZXNoOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9yZWZyZXNoSXRlbXMoZXZlbnQpO3RoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO3JldHVybiB0aGlzO30sX2Nvbm5lY3RXaXRoOmZ1bmN0aW9uKCl7dmFyIG9wdGlvbnM9dGhpcy5vcHRpb25zO3JldHVybiBvcHRpb25zLmNvbm5lY3RXaXRoLmNvbnN0cnVjdG9yPT09U3RyaW5nP1tvcHRpb25zLmNvbm5lY3RXaXRoXTpvcHRpb25zLmNvbm5lY3RXaXRoO30sX2dldEl0ZW1zQXNqUXVlcnk6ZnVuY3Rpb24oY29ubmVjdGVkKXt2YXIgaSxqLGN1cixpbnN0LGl0ZW1zPVtdLHF1ZXJpZXM9W10sY29ubmVjdFdpdGg9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihjb25uZWN0V2l0aCYmY29ubmVjdGVkKXtmb3IoaT1jb25uZWN0V2l0aC5sZW5ndGgtMTtpPj0wO2ktLSl7Y3VyPSQoY29ubmVjdFdpdGhbaV0sdGhpcy5kb2N1bWVudFswXSk7Zm9yKGo9Y3VyLmxlbmd0aC0xO2o+PTA7ai0tKXtpbnN0PSQuZGF0YShjdXJbal0sdGhpcy53aWRnZXRGdWxsTmFtZSk7aWYoaW5zdCYmaW5zdCE9PXRoaXMmJiFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQpe3F1ZXJpZXMucHVzaChbJC5pc0Z1bmN0aW9uKGluc3Qub3B0aW9ucy5pdGVtcyk/aW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoaW5zdC5lbGVtZW50KTokKGluc3Qub3B0aW9ucy5pdGVtcyxpbnN0LmVsZW1lbnQpLm5vdCgiLnVpLXNvcnRhYmxlLWhlbHBlciIpLm5vdCgiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIiksaW5zdF0pO319fX0KcXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsbnVsbCx7b3B0aW9uczp0aGlzLm9wdGlvbnMsaXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6JCh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIpLHRoaXNdKTtmdW5jdGlvbiBhZGRJdGVtcygpe2l0ZW1zLnB1c2godGhpcyk7fQpmb3IoaT1xdWVyaWVzLmxlbmd0aC0xO2k+PTA7aS0tKXtxdWVyaWVzW2ldWzBdLmVhY2goYWRkSXRlbXMpO30KcmV0dXJuICQoaXRlbXMpO30sX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGxpc3Q9dGhpcy5jdXJyZW50SXRlbS5maW5kKCI6ZGF0YSgiK3RoaXMud2lkZ2V0TmFtZSsiLWl0ZW0pIik7dGhpcy5pdGVtcz0kLmdyZXAodGhpcy5pdGVtcyxmdW5jdGlvbihpdGVtKXtmb3IodmFyIGo9MDtqPGxpc3QubGVuZ3RoO2orKyl7aWYobGlzdFtqXT09PWl0ZW0uaXRlbVswXSl7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO30pO30sX3JlZnJlc2hJdGVtczpmdW5jdGlvbihldmVudCl7dGhpcy5pdGVtcz1bXTt0aGlzLmNvbnRhaW5lcnM9W3RoaXNdO3ZhciBpLGosY3VyLGluc3QsdGFyZ2V0RGF0YSxfcXVlcmllcyxpdGVtLHF1ZXJpZXNMZW5ndGgsaXRlbXM9dGhpcy5pdGVtcyxxdWVyaWVzPVtbJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcyk/dGhpcy5vcHRpb25zLml0ZW1zLmNhbGwodGhpcy5lbGVtZW50WzBdLGV2ZW50LHtpdGVtOnRoaXMuY3VycmVudEl0ZW19KTokKHRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLmVsZW1lbnQpLHRoaXNdXSxjb25uZWN0V2l0aD10aGlzLl9jb25uZWN0V2l0aCgpO2lmKGNvbm5lY3RXaXRoJiZ0aGlzLnJlYWR5KXtmb3IoaT1jb25uZWN0V2l0aC5sZW5ndGgtMTtpPj0wO2ktLSl7Y3VyPSQoY29ubmVjdFdpdGhbaV0sdGhpcy5kb2N1bWVudFswXSk7Zm9yKGo9Y3VyLmxlbmd0aC0xO2o+PTA7ai0tKXtpbnN0PSQuZGF0YShjdXJbal0sdGhpcy53aWRnZXRGdWxsTmFtZSk7aWYoaW5zdCYmaW5zdCE9PXRoaXMmJiFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQpe3F1ZXJpZXMucHVzaChbJC5pc0Z1bmN0aW9uKGluc3Qub3B0aW9ucy5pdGVtcyk/aW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoaW5zdC5lbGVtZW50WzBdLGV2ZW50LHtpdGVtOnRoaXMuY3VycmVudEl0ZW19KTokKGluc3Qub3B0aW9ucy5pdGVtcyxpbnN0LmVsZW1lbnQpLGluc3RdKTt0aGlzLmNvbnRhaW5lcnMucHVzaChpbnN0KTt9fX19CmZvcihpPXF1ZXJpZXMubGVuZ3RoLTE7aT49MDtpLS0pe3RhcmdldERhdGE9cXVlcmllc1tpXVsxXTtfcXVlcmllcz1xdWVyaWVzW2ldWzBdO2ZvcihqPTAscXVlcmllc0xlbmd0aD1fcXVlcmllcy5sZW5ndGg7ajxxdWVyaWVzTGVuZ3RoO2orKyl7aXRlbT0kKF9xdWVyaWVzW2pdKTtpdGVtLmRhdGEodGhpcy53aWRnZXROYW1lKyItaXRlbSIsdGFyZ2V0RGF0YSk7aXRlbXMucHVzaCh7aXRlbTppdGVtLGluc3RhbmNlOnRhcmdldERhdGEsd2lkdGg6MCxoZWlnaHQ6MCxsZWZ0OjAsdG9wOjB9KTt9fX0scmVmcmVzaFBvc2l0aW9uczpmdW5jdGlvbihmYXN0KXt0aGlzLmZsb2F0aW5nPXRoaXMuaXRlbXMubGVuZ3RoP3RoaXMub3B0aW9ucy5heGlzPT09IngifHx0aGlzLl9pc0Zsb2F0aW5nKHRoaXMuaXRlbXNbMF0uaXRlbSk6ZmFsc2U7aWYodGhpcy5vZmZzZXRQYXJlbnQmJnRoaXMuaGVscGVyKXt0aGlzLm9mZnNldC5wYXJlbnQ9dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCk7fQp2YXIgaSxpdGVtLHQscDtmb3IoaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXtpdGVtPXRoaXMuaXRlbXNbaV07aWYoaXRlbS5pbnN0YW5jZSE9PXRoaXMuY3VycmVudENvbnRhaW5lciYmdGhpcy5jdXJyZW50Q29udGFpbmVyJiZpdGVtLml0ZW1bMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdKXtjb250aW51ZTt9CnQ9dGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQ/JCh0aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudCxpdGVtLml0ZW0pOml0ZW0uaXRlbTtpZighZmFzdCl7aXRlbS53aWR0aD10Lm91dGVyV2lkdGgoKTtpdGVtLmhlaWdodD10Lm91dGVySGVpZ2h0KCk7fQpwPXQub2Zmc2V0KCk7aXRlbS5sZWZ0PXAubGVmdDtpdGVtLnRvcD1wLnRvcDt9CmlmKHRoaXMub3B0aW9ucy5jdXN0b20mJnRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMpe3RoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMuY2FsbCh0aGlzKTt9ZWxzZXtmb3IoaT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7aT49MDtpLS0pe3A9dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmxlZnQ9cC5sZWZ0O3RoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS50b3A9cC50b3A7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLndpZHRoPXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVyV2lkdGgoKTt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUuaGVpZ2h0PXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVySGVpZ2h0KCk7fX0KcmV0dXJuIHRoaXM7fSxfY3JlYXRlUGxhY2Vob2xkZXI6ZnVuY3Rpb24odGhhdCl7dGhhdD10aGF0fHx0aGlzO3ZhciBjbGFzc05hbWUsbz10aGF0Lm9wdGlvbnM7aWYoIW8ucGxhY2Vob2xkZXJ8fG8ucGxhY2Vob2xkZXIuY29uc3RydWN0b3I9PT1TdHJpbmcpe2NsYXNzTmFtZT1vLnBsYWNlaG9sZGVyO28ucGxhY2Vob2xkZXI9e2VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgbm9kZU5hbWU9dGhhdC5jdXJyZW50SXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGVsZW1lbnQ9JCgiPCIrbm9kZU5hbWUrIj4iLHRoYXQuZG9jdW1lbnRbMF0pO3RoYXQuX2FkZENsYXNzKGVsZW1lbnQsInVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIixjbGFzc05hbWV8fHRoYXQuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lKS5fcmVtb3ZlQ2xhc3MoZWxlbWVudCwidWktc29ydGFibGUtaGVscGVyIik7aWYobm9kZU5hbWU9PT0idGJvZHkiKXt0aGF0Ll9jcmVhdGVUclBsYWNlaG9sZGVyKHRoYXQuY3VycmVudEl0ZW0uZmluZCgidHIiKS5lcSgwKSwkKCI8dHI+Iix0aGF0LmRvY3VtZW50WzBdKS5hcHBlbmRUbyhlbGVtZW50KSk7fWVsc2UgaWYobm9kZU5hbWU9PT0idHIiKXt0aGF0Ll9jcmVhdGVUclBsYWNlaG9sZGVyKHRoYXQuY3VycmVudEl0ZW0sZWxlbWVudCk7fWVsc2UgaWYobm9kZU5hbWU9PT0iaW1nIil7ZWxlbWVudC5hdHRyKCJzcmMiLHRoYXQuY3VycmVudEl0ZW0uYXR0cigic3JjIikpO30KaWYoIWNsYXNzTmFtZSl7ZWxlbWVudC5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKTt9CnJldHVybiBlbGVtZW50O30sdXBkYXRlOmZ1bmN0aW9uKGNvbnRhaW5lcixwKXtpZihjbGFzc05hbWUmJiFvLmZvcmNlUGxhY2Vob2xkZXJTaXplKXtyZXR1cm47fQppZighcC5oZWlnaHQoKSl7cC5oZWlnaHQodGhhdC5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpLQpwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ1RvcCIpfHwwLDEwKS0KcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdCb3R0b20iKXx8MCwxMCkpO30KaWYoIXAud2lkdGgoKSl7cC53aWR0aCh0aGF0LmN1cnJlbnRJdGVtLmlubmVyV2lkdGgoKS0KcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdMZWZ0Iil8fDAsMTApLQpwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ1JpZ2h0Iil8fDAsMTApKTt9fX07fQp0aGF0LnBsYWNlaG9sZGVyPSQoby5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwodGhhdC5lbGVtZW50LHRoYXQuY3VycmVudEl0ZW0pKTt0aGF0LmN1cnJlbnRJdGVtLmFmdGVyKHRoYXQucGxhY2Vob2xkZXIpO28ucGxhY2Vob2xkZXIudXBkYXRlKHRoYXQsdGhhdC5wbGFjZWhvbGRlcik7fSxfY3JlYXRlVHJQbGFjZWhvbGRlcjpmdW5jdGlvbihzb3VyY2VUcix0YXJnZXRUcil7dmFyIHRoYXQ9dGhpcztzb3VyY2VUci5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXskKCI8dGQ+JiMxNjA7PC90ZD4iLHRoYXQuZG9jdW1lbnRbMF0pLmF0dHIoImNvbHNwYW4iLCQodGhpcykuYXR0cigiY29sc3BhbiIpfHwxKS5hcHBlbmRUbyh0YXJnZXRUcik7fSk7fSxfY29udGFjdENvbnRhaW5lcnM6ZnVuY3Rpb24oZXZlbnQpe3ZhciBpLGosZGlzdCxpdGVtV2l0aExlYXN0RGlzdGFuY2UscG9zUHJvcGVydHksc2l6ZVByb3BlcnR5LGN1cixuZWFyQm90dG9tLGZsb2F0aW5nLGF4aXMsaW5uZXJtb3N0Q29udGFpbmVyPW51bGwsaW5uZXJtb3N0SW5kZXg9bnVsbDtmb3IoaT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7aT49MDtpLS0pe2lmKCQuY29udGFpbnModGhpcy5jdXJyZW50SXRlbVswXSx0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudFswXSkpe2NvbnRpbnVlO30KaWYodGhpcy5faW50ZXJzZWN0c1dpdGgodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlKSl7aWYoaW5uZXJtb3N0Q29udGFpbmVyJiYkLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdLGlubmVybW9zdENvbnRhaW5lci5lbGVtZW50WzBdKSl7Y29udGludWU7fQppbm5lcm1vc3RDb250YWluZXI9dGhpcy5jb250YWluZXJzW2ldO2lubmVybW9zdEluZGV4PWk7fWVsc2V7aWYodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcigib3V0IixldmVudCx0aGlzLl91aUhhc2godGhpcykpO3RoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyPTA7fX19CmlmKCFpbm5lcm1vc3RDb250YWluZXIpe3JldHVybjt9CmlmKHRoaXMuY29udGFpbmVycy5sZW5ndGg9PT0xKXtpZighdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyKXt0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKCJvdmVyIixldmVudCx0aGlzLl91aUhhc2godGhpcykpO3RoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3Zlcj0xO319ZWxzZXtkaXN0PTEwMDAwO2l0ZW1XaXRoTGVhc3REaXN0YW5jZT1udWxsO2Zsb2F0aW5nPWlubmVybW9zdENvbnRhaW5lci5mbG9hdGluZ3x8dGhpcy5faXNGbG9hdGluZyh0aGlzLmN1cnJlbnRJdGVtKTtwb3NQcm9wZXJ0eT1mbG9hdGluZz8ibGVmdCI6InRvcCI7c2l6ZVByb3BlcnR5PWZsb2F0aW5nPyJ3aWR0aCI6ImhlaWdodCI7YXhpcz1mbG9hdGluZz8icGFnZVgiOiJwYWdlWSI7Zm9yKGo9dGhpcy5pdGVtcy5sZW5ndGgtMTtqPj0wO2otLSl7aWYoISQuY29udGFpbnModGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5lbGVtZW50WzBdLHRoaXMuaXRlbXNbal0uaXRlbVswXSkpe2NvbnRpbnVlO30KaWYodGhpcy5pdGVtc1tqXS5pdGVtWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXSl7Y29udGludWU7fQpjdXI9dGhpcy5pdGVtc1tqXS5pdGVtLm9mZnNldCgpW3Bvc1Byb3BlcnR5XTtuZWFyQm90dG9tPWZhbHNlO2lmKGV2ZW50W2F4aXNdLWN1cj50aGlzLml0ZW1zW2pdW3NpemVQcm9wZXJ0eV0vMil7bmVhckJvdHRvbT10cnVlO30KaWYoTWF0aC5hYnMoZXZlbnRbYXhpc10tY3VyKTxkaXN0KXtkaXN0PU1hdGguYWJzKGV2ZW50W2F4aXNdLWN1cik7aXRlbVdpdGhMZWFzdERpc3RhbmNlPXRoaXMuaXRlbXNbal07dGhpcy5kaXJlY3Rpb249bmVhckJvdHRvbT8idXAiOiJkb3duIjt9fQppZighaXRlbVdpdGhMZWFzdERpc3RhbmNlJiYhdGhpcy5vcHRpb25zLmRyb3BPbkVtcHR5KXtyZXR1cm47fQppZih0aGlzLmN1cnJlbnRDb250YWluZXI9PT10aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdKXtpZighdGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uX3RyaWdnZXIoIm92ZXIiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt0aGlzLmN1cnJlbnRDb250YWluZXIuY29udGFpbmVyQ2FjaGUub3Zlcj0xO30KcmV0dXJuO30KaXRlbVdpdGhMZWFzdERpc3RhbmNlP3RoaXMuX3JlYXJyYW5nZShldmVudCxpdGVtV2l0aExlYXN0RGlzdGFuY2UsbnVsbCx0cnVlKTp0aGlzLl9yZWFycmFuZ2UoZXZlbnQsbnVsbCx0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmVsZW1lbnQsdHJ1ZSk7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx0aGlzLl91aUhhc2goKSk7dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx0aGlzLl91aUhhc2godGhpcykpO3RoaXMuY3VycmVudENvbnRhaW5lcj10aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdO3RoaXMub3B0aW9ucy5wbGFjZWhvbGRlci51cGRhdGUodGhpcy5jdXJyZW50Q29udGFpbmVyLHRoaXMucGxhY2Vob2xkZXIpO3RoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uX3RyaWdnZXIoIm92ZXIiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyPTE7fX0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihldmVudCl7dmFyIG89dGhpcy5vcHRpb25zLGhlbHBlcj0kLmlzRnVuY3Rpb24oby5oZWxwZXIpPyQoby5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtldmVudCx0aGlzLmN1cnJlbnRJdGVtXSkpOihvLmhlbHBlcj09PSJjbG9uZSI/dGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpOnRoaXMuY3VycmVudEl0ZW0pO2lmKCFoZWxwZXIucGFyZW50cygiYm9keSIpLmxlbmd0aCl7JChvLmFwcGVuZFRvIT09InBhcmVudCI/by5hcHBlbmRUbzp0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUpWzBdLmFwcGVuZENoaWxkKGhlbHBlclswXSk7fQppZihoZWxwZXJbMF09PT10aGlzLmN1cnJlbnRJdGVtWzBdKXt0aGlzLl9zdG9yZWRDU1M9e3dpZHRoOnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUud2lkdGgsaGVpZ2h0OnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUuaGVpZ2h0LHBvc2l0aW9uOnRoaXMuY3VycmVudEl0ZW0uY3NzKCJwb3NpdGlvbiIpLHRvcDp0aGlzLmN1cnJlbnRJdGVtLmNzcygidG9wIiksbGVmdDp0aGlzLmN1cnJlbnRJdGVtLmNzcygibGVmdCIpfTt9CmlmKCFoZWxwZXJbMF0uc3R5bGUud2lkdGh8fG8uZm9yY2VIZWxwZXJTaXplKXtoZWxwZXIud2lkdGgodGhpcy5jdXJyZW50SXRlbS53aWR0aCgpKTt9CmlmKCFoZWxwZXJbMF0uc3R5bGUuaGVpZ2h0fHxvLmZvcmNlSGVscGVyU2l6ZSl7aGVscGVyLmhlaWdodCh0aGlzLmN1cnJlbnRJdGVtLmhlaWdodCgpKTt9CnJldHVybiBoZWxwZXI7fSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbihvYmope2lmKHR5cGVvZiBvYmo9PT0ic3RyaW5nIil7b2JqPW9iai5zcGxpdCgiICIpO30KaWYoJC5pc0FycmF5KG9iaikpe29iaj17bGVmdDorb2JqWzBdLHRvcDorb2JqWzFdfHwwfTt9CmlmKCJsZWZ0ImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2subGVmdD1vYmoubGVmdCt0aGlzLm1hcmdpbnMubGVmdDt9CmlmKCJyaWdodCJpbiBvYmope3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC1vYmoucmlnaHQrdGhpcy5tYXJnaW5zLmxlZnQ7fQppZigidG9wImluIG9iail7dGhpcy5vZmZzZXQuY2xpY2sudG9wPW9iai50b3ArdGhpcy5tYXJnaW5zLnRvcDt9CmlmKCJib3R0b20iaW4gb2JqKXt0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtb2JqLmJvdHRvbSt0aGlzLm1hcmdpbnMudG9wO319LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgcG89dGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCk7aWYodGhpcy5jc3NQb3NpdGlvbj09PSJhYnNvbHV0ZSImJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpe3BvLmxlZnQrPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTtwby50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpO30KaWYodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHl8fCh0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lJiZ0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaHRtbCImJiQudWkuaWUpKXtwbz17dG9wOjAsbGVmdDowfTt9CnJldHVybnt0b3A6cG8udG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OnBvLmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKX07fSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNzc1Bvc2l0aW9uPT09InJlbGF0aXZlIil7dmFyIHA9dGhpcy5jdXJyZW50SXRlbS5wb3NpdGlvbigpO3JldHVybnt0b3A6cC50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSsKdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksbGVmdDpwLmxlZnQtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygibGVmdCIpLDEwKXx8MCkrCnRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX07fWVsc2V7cmV0dXJue3RvcDowLGxlZnQ6MH07fX0sX2NhY2hlTWFyZ2luczpmdW5jdGlvbigpe3RoaXMubWFyZ2lucz17bGVmdDoocGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpbkxlZnQiKSwxMCl8fDApLHRvcDoocGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpblRvcCIpLDEwKXx8MCl9O30sX2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlclByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9O30sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIGNlLGNvLG92ZXIsbz10aGlzLm9wdGlvbnM7aWYoby5jb250YWlubWVudD09PSJwYXJlbnQiKXtvLmNvbnRhaW5tZW50PXRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGU7fQppZihvLmNvbnRhaW5tZW50PT09ImRvY3VtZW50Inx8by5jb250YWlubWVudD09PSJ3aW5kb3ciKXt0aGlzLmNvbnRhaW5tZW50PVswLXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsMC10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCxvLmNvbnRhaW5tZW50PT09ImRvY3VtZW50Ij90aGlzLmRvY3VtZW50LndpZHRoKCk6dGhpcy53aW5kb3cud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LChvLmNvbnRhaW5tZW50PT09ImRvY3VtZW50Ij8odGhpcy5kb2N1bWVudC5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCk6dGhpcy53aW5kb3cuaGVpZ2h0KCl8fHRoaXMuZG9jdW1lbnRbMF0uYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF07fQppZighKC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8pLnRlc3Qoby5jb250YWlubWVudCkpe2NlPSQoby5jb250YWlubWVudClbMF07Y289JChvLmNvbnRhaW5tZW50KS5vZmZzZXQoKTtvdmVyPSgkKGNlKS5jc3MoIm92ZXJmbG93IikhPT0iaGlkZGVuIik7dGhpcy5jb250YWlubWVudD1bY28ubGVmdCsocGFyc2VJbnQoJChjZSkuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApKwoocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nTGVmdCIpLDEwKXx8MCktdGhpcy5tYXJnaW5zLmxlZnQsY28udG9wKyhwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSsKKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1RvcCIpLDEwKXx8MCktdGhpcy5tYXJnaW5zLnRvcCxjby5sZWZ0KyhvdmVyP01hdGgubWF4KGNlLnNjcm9sbFdpZHRoLGNlLm9mZnNldFdpZHRoKTpjZS5vZmZzZXRXaWR0aCktCihwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCktCihwYXJzZUludCgkKGNlKS5jc3MoInBhZGRpbmdSaWdodCIpLDEwKXx8MCktCnRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsY28udG9wKyhvdmVyP01hdGgubWF4KGNlLnNjcm9sbEhlaWdodCxjZS5vZmZzZXRIZWlnaHQpOmNlLm9mZnNldEhlaWdodCktCihwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKS0KKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ0JvdHRvbSIpLDEwKXx8MCktCnRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdO319LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbihkLHBvcyl7aWYoIXBvcyl7cG9zPXRoaXMucG9zaXRpb247fQp2YXIgbW9kPWQ9PT0iYWJzb2x1dGUiPzE6LTEsc2Nyb2xsPXRoaXMuY3NzUG9zaXRpb249PT0iYWJzb2x1dGUiJiYhKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpP3RoaXMub2Zmc2V0UGFyZW50OnRoaXMuc2Nyb2xsUGFyZW50LHNjcm9sbElzUm9vdE5vZGU9KC8oaHRtbHxib2R5KS9pKS50ZXN0KHNjcm9sbFswXS50YWdOYW1lKTtyZXR1cm57dG9wOihwb3MudG9wKwp0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AqbW9kKwp0aGlzLm9mZnNldC5wYXJlbnQudG9wKm1vZC0KKCh0aGlzLmNzc1Bvc2l0aW9uPT09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6KHNjcm9sbElzUm9vdE5vZGU/MDpzY3JvbGwuc2Nyb2xsVG9wKCkpKSptb2QpKSxsZWZ0Oihwb3MubGVmdCsKdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCptb2QrCnRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0Km1vZC0KKCh0aGlzLmNzc1Bvc2l0aW9uPT09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOnNjcm9sbElzUm9vdE5vZGU/MDpzY3JvbGwuc2Nyb2xsTGVmdCgpKSptb2QpKX07fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbihldmVudCl7dmFyIHRvcCxsZWZ0LG89dGhpcy5vcHRpb25zLHBhZ2VYPWV2ZW50LnBhZ2VYLHBhZ2VZPWV2ZW50LnBhZ2VZLHNjcm9sbD10aGlzLmNzc1Bvc2l0aW9uPT09ImFic29sdXRlIiYmISh0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJiQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pKT90aGlzLm9mZnNldFBhcmVudDp0aGlzLnNjcm9sbFBhcmVudCxzY3JvbGxJc1Jvb3ROb2RlPSgvKGh0bWx8Ym9keSkvaSkudGVzdChzY3JvbGxbMF0udGFnTmFtZSk7aWYodGhpcy5jc3NQb3NpdGlvbj09PSJyZWxhdGl2ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMub2Zmc2V0UGFyZW50WzBdKSl7dGhpcy5vZmZzZXQucmVsYXRpdmU9dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKTt9CmlmKHRoaXMub3JpZ2luYWxQb3NpdGlvbil7aWYodGhpcy5jb250YWlubWVudCl7aWYoZXZlbnQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx0aGlzLmNvbnRhaW5tZW50WzBdKXtwYWdlWD10aGlzLmNvbnRhaW5tZW50WzBdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7fQppZihldmVudC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXSl7cGFnZVk9dGhpcy5jb250YWlubWVudFsxXSt0aGlzLm9mZnNldC5jbGljay50b3A7fQppZihldmVudC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PnRoaXMuY29udGFpbm1lbnRbMl0pe3BhZ2VYPXRoaXMuY29udGFpbm1lbnRbMl0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDt9CmlmKGV2ZW50LnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD50aGlzLmNvbnRhaW5tZW50WzNdKXtwYWdlWT10aGlzLmNvbnRhaW5tZW50WzNdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcDt9fQppZihvLmdyaWQpe3RvcD10aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgocGFnZVktdGhpcy5vcmlnaW5hbFBhZ2VZKS9vLmdyaWRbMV0pKm8uZ3JpZFsxXTtwYWdlWT10aGlzLmNvbnRhaW5tZW50PygodG9wLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXSYmdG9wLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDw9dGhpcy5jb250YWlubWVudFszXSk/dG9wOigodG9wLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXSk/dG9wLW8uZ3JpZFsxXTp0b3Arby5ncmlkWzFdKSk6dG9wO2xlZnQ9dGhpcy5vcmlnaW5hbFBhZ2VYK01hdGgucm91bmQoKHBhZ2VYLXRoaXMub3JpZ2luYWxQYWdlWCkvby5ncmlkWzBdKSpvLmdyaWRbMF07cGFnZVg9dGhpcy5jb250YWlubWVudD8oKGxlZnQtdGhpcy5vZmZzZXQuY2xpY2subGVmdD49dGhpcy5jb250YWlubWVudFswXSYmbGVmdC10aGlzLm9mZnNldC5jbGljay5sZWZ0PD10aGlzLmNvbnRhaW5tZW50WzJdKT9sZWZ0OigobGVmdC10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj10aGlzLmNvbnRhaW5tZW50WzBdKT9sZWZ0LW8uZ3JpZFswXTpsZWZ0K28uZ3JpZFswXSkpOmxlZnQ7fX0KcmV0dXJue3RvcDoocGFnZVktCnRoaXMub2Zmc2V0LmNsaWNrLnRvcC0KdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLQp0aGlzLm9mZnNldC5wYXJlbnQudG9wKwooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTooc2Nyb2xsSXNSb290Tm9kZT8wOnNjcm9sbC5zY3JvbGxUb3AoKSkpKSksbGVmdDoocGFnZVgtCnRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtCnRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtCnRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KwooKHRoaXMuY3NzUG9zaXRpb249PT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6c2Nyb2xsSXNSb290Tm9kZT8wOnNjcm9sbC5zY3JvbGxMZWZ0KCkpKSl9O30sX3JlYXJyYW5nZTpmdW5jdGlvbihldmVudCxpLGEsaGFyZFJlZnJlc2gpe2E/YVswXS5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTppLml0ZW1bMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZWhvbGRlclswXSwodGhpcy5kaXJlY3Rpb249PT0iZG93biI/aS5pdGVtWzBdOmkuaXRlbVswXS5uZXh0U2libGluZykpO3RoaXMuY291bnRlcj10aGlzLmNvdW50ZXI/Kyt0aGlzLmNvdW50ZXI6MTt2YXIgY291bnRlcj10aGlzLmNvdW50ZXI7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtpZihjb3VudGVyPT09dGhpcy5jb3VudGVyKXt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoIWhhcmRSZWZyZXNoKTt9fSk7fSxfY2xlYXI6ZnVuY3Rpb24oZXZlbnQsbm9Qcm9wYWdhdGlvbil7dGhpcy5yZXZlcnRpbmc9ZmFsc2U7dmFyIGksZGVsYXllZFRyaWdnZXJzPVtdO2lmKCF0aGlzLl9ub0ZpbmFsU29ydCYmdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5sZW5ndGgpe3RoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuY3VycmVudEl0ZW0pO30KdGhpcy5fbm9GaW5hbFNvcnQ9bnVsbDtpZih0aGlzLmhlbHBlclswXT09PXRoaXMuY3VycmVudEl0ZW1bMF0pe2ZvcihpIGluIHRoaXMuX3N0b3JlZENTUyl7aWYodGhpcy5fc3RvcmVkQ1NTW2ldPT09ImF1dG8ifHx0aGlzLl9zdG9yZWRDU1NbaV09PT0ic3RhdGljIil7dGhpcy5fc3RvcmVkQ1NTW2ldPSIiO319CnRoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUyk7dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50SXRlbSwidWktc29ydGFibGUtaGVscGVyIik7fWVsc2V7dGhpcy5jdXJyZW50SXRlbS5zaG93KCk7fQppZih0aGlzLmZyb21PdXRzaWRlJiYhbm9Qcm9wYWdhdGlvbil7ZGVsYXllZFRyaWdnZXJzLnB1c2goZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3RyaWdnZXIoInJlY2VpdmUiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzLmZyb21PdXRzaWRlKSk7fSk7fQppZigodGhpcy5mcm9tT3V0c2lkZXx8dGhpcy5kb21Qb3NpdGlvbi5wcmV2IT09dGhpcy5jdXJyZW50SXRlbS5wcmV2KCkubm90KCIudWktc29ydGFibGUtaGVscGVyIilbMF18fHRoaXMuZG9tUG9zaXRpb24ucGFyZW50IT09dGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXSkmJiFub1Byb3BhZ2F0aW9uKXtkZWxheWVkVHJpZ2dlcnMucHVzaChmdW5jdGlvbihldmVudCl7dGhpcy5fdHJpZ2dlcigidXBkYXRlIixldmVudCx0aGlzLl91aUhhc2goKSk7fSk7fQppZih0aGlzIT09dGhpcy5jdXJyZW50Q29udGFpbmVyKXtpZighbm9Qcm9wYWdhdGlvbil7ZGVsYXllZFRyaWdnZXJzLnB1c2goZnVuY3Rpb24oZXZlbnQpe3RoaXMuX3RyaWdnZXIoInJlbW92ZSIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO30pO2RlbGF5ZWRUcmlnZ2Vycy5wdXNoKChmdW5jdGlvbihjKXtyZXR1cm4gZnVuY3Rpb24oZXZlbnQpe2MuX3RyaWdnZXIoInJlY2VpdmUiLGV2ZW50LHRoaXMuX3VpSGFzaCh0aGlzKSk7fTt9KS5jYWxsKHRoaXMsdGhpcy5jdXJyZW50Q29udGFpbmVyKSk7ZGVsYXllZFRyaWdnZXJzLnB1c2goKGZ1bmN0aW9uKGMpe3JldHVybiBmdW5jdGlvbihldmVudCl7Yy5fdHJpZ2dlcigidXBkYXRlIixldmVudCx0aGlzLl91aUhhc2godGhpcykpO307fSkuY2FsbCh0aGlzLHRoaXMuY3VycmVudENvbnRhaW5lcikpO319CmZ1bmN0aW9uIGRlbGF5RXZlbnQodHlwZSxpbnN0YW5jZSxjb250YWluZXIpe3JldHVybiBmdW5jdGlvbihldmVudCl7Y29udGFpbmVyLl90cmlnZ2VyKHR5cGUsZXZlbnQsaW5zdGFuY2UuX3VpSGFzaChpbnN0YW5jZSkpO307fQpmb3IoaT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7aT49MDtpLS0pe2lmKCFub1Byb3BhZ2F0aW9uKXtkZWxheWVkVHJpZ2dlcnMucHVzaChkZWxheUV2ZW50KCJkZWFjdGl2YXRlIix0aGlzLHRoaXMuY29udGFpbmVyc1tpXSkpO30KaWYodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIpe2RlbGF5ZWRUcmlnZ2Vycy5wdXNoKGRlbGF5RXZlbnQoIm91dCIsdGhpcyx0aGlzLmNvbnRhaW5lcnNbaV0pKTt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcj0wO319CmlmKHRoaXMuc3RvcmVkQ3Vyc29yKXt0aGlzLmRvY3VtZW50LmZpbmQoImJvZHkiKS5jc3MoImN1cnNvciIsdGhpcy5zdG9yZWRDdXJzb3IpO3RoaXMuc3RvcmVkU3R5bGVzaGVldC5yZW1vdmUoKTt9CmlmKHRoaXMuX3N0b3JlZE9wYWNpdHkpe3RoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsdGhpcy5fc3RvcmVkT3BhY2l0eSk7fQppZih0aGlzLl9zdG9yZWRaSW5kZXgpe3RoaXMuaGVscGVyLmNzcygiekluZGV4Iix0aGlzLl9zdG9yZWRaSW5kZXg9PT0iYXV0byI/IiI6dGhpcy5fc3RvcmVkWkluZGV4KTt9CnRoaXMuZHJhZ2dpbmc9ZmFsc2U7aWYoIW5vUHJvcGFnYXRpb24pe3RoaXMuX3RyaWdnZXIoImJlZm9yZVN0b3AiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt9CnRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTtpZighdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsKXtpZih0aGlzLmhlbHBlclswXSE9PXRoaXMuY3VycmVudEl0ZW1bMF0pe3RoaXMuaGVscGVyLnJlbW92ZSgpO30KdGhpcy5oZWxwZXI9bnVsbDt9CmlmKCFub1Byb3BhZ2F0aW9uKXtmb3IoaT0wO2k8ZGVsYXllZFRyaWdnZXJzLmxlbmd0aDtpKyspe2RlbGF5ZWRUcmlnZ2Vyc1tpXS5jYWxsKHRoaXMsZXZlbnQpO30KdGhpcy5fdHJpZ2dlcigic3RvcCIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO30KdGhpcy5mcm9tT3V0c2lkZT1mYWxzZTtyZXR1cm4hdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsO30sX3RyaWdnZXI6ZnVuY3Rpb24oKXtpZigkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpPT09ZmFsc2Upe3RoaXMuY2FuY2VsKCk7fX0sX3VpSGFzaDpmdW5jdGlvbihfaW5zdCl7dmFyIGluc3Q9X2luc3R8fHRoaXM7cmV0dXJue2hlbHBlcjppbnN0LmhlbHBlcixwbGFjZWhvbGRlcjppbnN0LnBsYWNlaG9sZGVyfHwkKFtdKSxwb3NpdGlvbjppbnN0LnBvc2l0aW9uLG9yaWdpbmFsUG9zaXRpb246aW5zdC5vcmlnaW5hbFBvc2l0aW9uLG9mZnNldDppbnN0LnBvc2l0aW9uQWJzLGl0ZW06aW5zdC5jdXJyZW50SXRlbSxzZW5kZXI6X2luc3Q/X2luc3QuZWxlbWVudDpudWxsfTt9fSk7dmFyIHdpZGdldHNNZW51PSQud2lkZ2V0KCJ1aS5tZW51Iix7dmVyc2lvbjoiMS4xMi4xIixkZWZhdWx0RWxlbWVudDoiPHVsPiIsZGVsYXk6MzAwLG9wdGlvbnM6e2ljb25zOntzdWJtZW51OiJ1aS1pY29uLWNhcmV0LTEtZSJ9LGl0ZW1zOiI+ICoiLG1lbnVzOiJ1bCIscG9zaXRpb246e215OiJsZWZ0IHRvcCIsYXQ6InJpZ2h0IHRvcCJ9LHJvbGU6Im1lbnUiLGJsdXI6bnVsbCxmb2N1czpudWxsLHNlbGVjdDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmVNZW51PXRoaXMuZWxlbWVudDt0aGlzLm1vdXNlSGFuZGxlZD1mYWxzZTt0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKHtyb2xlOnRoaXMub3B0aW9ucy5yb2xlLHRhYkluZGV4OjB9KTt0aGlzLl9hZGRDbGFzcygidWktbWVudSIsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIpO3RoaXMuX29uKHsibW91c2Vkb3duIC51aS1tZW51LWl0ZW0iOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30sImNsaWNrIC51aS1tZW51LWl0ZW0iOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGFyZ2V0PSQoZXZlbnQudGFyZ2V0KTt2YXIgYWN0aXZlPSQoJC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSk7aWYoIXRoaXMubW91c2VIYW5kbGVkJiZ0YXJnZXQubm90KCIudWktc3RhdGUtZGlzYWJsZWQiKS5sZW5ndGgpe3RoaXMuc2VsZWN0KGV2ZW50KTtpZighZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dGhpcy5tb3VzZUhhbmRsZWQ9dHJ1ZTt9CmlmKHRhcmdldC5oYXMoIi51aS1tZW51IikubGVuZ3RoKXt0aGlzLmV4cGFuZChldmVudCk7fWVsc2UgaWYoIXRoaXMuZWxlbWVudC5pcygiOmZvY3VzIikmJmFjdGl2ZS5jbG9zZXN0KCIudWktbWVudSIpLmxlbmd0aCl7dGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIixbdHJ1ZV0pO2lmKHRoaXMuYWN0aXZlJiZ0aGlzLmFjdGl2ZS5wYXJlbnRzKCIudWktbWVudSIpLmxlbmd0aD09PTEpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt9fX19LCJtb3VzZWVudGVyIC51aS1tZW51LWl0ZW0iOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLnByZXZpb3VzRmlsdGVyKXtyZXR1cm47fQp2YXIgYWN0dWFsVGFyZ2V0PSQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudS1pdGVtIiksdGFyZ2V0PSQoZXZlbnQuY3VycmVudFRhcmdldCk7aWYoYWN0dWFsVGFyZ2V0WzBdIT09dGFyZ2V0WzBdKXtyZXR1cm47fQp0aGlzLl9yZW1vdmVDbGFzcyh0YXJnZXQuc2libGluZ3MoKS5jaGlsZHJlbigiLnVpLXN0YXRlLWFjdGl2ZSIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpO3RoaXMuZm9jdXMoZXZlbnQsdGFyZ2V0KTt9LG1vdXNlbGVhdmU6ImNvbGxhcHNlQWxsIiwibW91c2VsZWF2ZSAudWktbWVudSI6ImNvbGxhcHNlQWxsIixmb2N1czpmdW5jdGlvbihldmVudCxrZWVwQWN0aXZlSXRlbSl7dmFyIGl0ZW09dGhpcy5hY3RpdmV8fHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZXEoMCk7aWYoIWtlZXBBY3RpdmVJdGVtKXt0aGlzLmZvY3VzKGV2ZW50LGl0ZW0pO319LGJsdXI6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIG5vdENvbnRhaW5lZD0hJC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sJC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSk7aWYobm90Q29udGFpbmVkKXt0aGlzLmNvbGxhcHNlQWxsKGV2ZW50KTt9fSk7fSxrZXlkb3duOiJfa2V5ZG93biJ9KTt0aGlzLnJlZnJlc2goKTt0aGlzLl9vbih0aGlzLmRvY3VtZW50LHtjbGljazpmdW5jdGlvbihldmVudCl7aWYodGhpcy5fY2xvc2VPbkRvY3VtZW50Q2xpY2soZXZlbnQpKXt0aGlzLmNvbGxhcHNlQWxsKGV2ZW50KTt9CnRoaXMubW91c2VIYW5kbGVkPWZhbHNlO319KTt9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGl0ZW1zPXRoaXMuZWxlbWVudC5maW5kKCIudWktbWVudS1pdGVtIikucmVtb3ZlQXR0cigicm9sZSBhcmlhLWRpc2FibGVkIiksc3VibWVudXM9aXRlbXMuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0td3JhcHBlciIpLnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQXR0cigidGFiSW5kZXggcm9sZSBhcmlhLWhhc3BvcHVwIik7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIpLmZpbmQoIi51aS1tZW51IikuYWRkQmFjaygpLnJlbW92ZUF0dHIoInJvbGUgYXJpYS1sYWJlbGxlZGJ5IGFyaWEtZXhwYW5kZWQgYXJpYS1oaWRkZW4gYXJpYS1kaXNhYmxlZCAiKyJ0YWJJbmRleCIpLnJlbW92ZVVuaXF1ZUlkKCkuc2hvdygpO3N1Ym1lbnVzLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciBlbGVtPSQodGhpcyk7aWYoZWxlbS5kYXRhKCJ1aS1tZW51LXN1Ym1lbnUtY2FyZXQiKSl7ZWxlbS5yZW1vdmUoKTt9fSk7fSxfa2V5ZG93bjpmdW5jdGlvbihldmVudCl7dmFyIG1hdGNoLHByZXYsY2hhcmFjdGVyLHNraXAscHJldmVudERlZmF1bHQ9dHJ1ZTtzd2l0Y2goZXZlbnQua2V5Q29kZSl7Y2FzZSAkLnVpLmtleUNvZGUuUEFHRV9VUDp0aGlzLnByZXZpb3VzUGFnZShldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOOnRoaXMubmV4dFBhZ2UoZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLkhPTUU6dGhpcy5fbW92ZSgiZmlyc3QiLCJmaXJzdCIsZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLkVORDp0aGlzLl9tb3ZlKCJsYXN0IiwibGFzdCIsZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLlVQOnRoaXMucHJldmlvdXMoZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLkRPV046dGhpcy5uZXh0KGV2ZW50KTticmVhaztjYXNlICQudWkua2V5Q29kZS5MRUZUOnRoaXMuY29sbGFwc2UoZXZlbnQpO2JyZWFrO2Nhc2UgJC51aS5rZXlDb2RlLlJJR0hUOmlmKHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUuaXMoIi51aS1zdGF0ZS1kaXNhYmxlZCIpKXt0aGlzLmV4cGFuZChldmVudCk7fQpicmVhaztjYXNlICQudWkua2V5Q29kZS5FTlRFUjpjYXNlICQudWkua2V5Q29kZS5TUEFDRTp0aGlzLl9hY3RpdmF0ZShldmVudCk7YnJlYWs7Y2FzZSAkLnVpLmtleUNvZGUuRVNDQVBFOnRoaXMuY29sbGFwc2UoZXZlbnQpO2JyZWFrO2RlZmF1bHQ6cHJldmVudERlZmF1bHQ9ZmFsc2U7cHJldj10aGlzLnByZXZpb3VzRmlsdGVyfHwiIjtza2lwPWZhbHNlO2NoYXJhY3Rlcj1ldmVudC5rZXlDb2RlPj05NiYmZXZlbnQua2V5Q29kZTw9MTA1PyhldmVudC5rZXlDb2RlLTk2KS50b1N0cmluZygpOlN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQua2V5Q29kZSk7Y2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVyVGltZXIpO2lmKGNoYXJhY3Rlcj09PXByZXYpe3NraXA9dHJ1ZTt9ZWxzZXtjaGFyYWN0ZXI9cHJlditjaGFyYWN0ZXI7fQptYXRjaD10aGlzLl9maWx0ZXJNZW51SXRlbXMoY2hhcmFjdGVyKTttYXRjaD1za2lwJiZtYXRjaC5pbmRleCh0aGlzLmFjdGl2ZS5uZXh0KCkpIT09LTE/dGhpcy5hY3RpdmUubmV4dEFsbCgiLnVpLW1lbnUtaXRlbSIpOm1hdGNoO2lmKCFtYXRjaC5sZW5ndGgpe2NoYXJhY3Rlcj1TdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmtleUNvZGUpO21hdGNoPXRoaXMuX2ZpbHRlck1lbnVJdGVtcyhjaGFyYWN0ZXIpO30KaWYobWF0Y2gubGVuZ3RoKXt0aGlzLmZvY3VzKGV2ZW50LG1hdGNoKTt0aGlzLnByZXZpb3VzRmlsdGVyPWNoYXJhY3Rlcjt0aGlzLmZpbHRlclRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXI7fSwxMDAwKTt9ZWxzZXtkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcjt9fQppZihwcmV2ZW50RGVmYXVsdCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9fSxfYWN0aXZhdGU6ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUuaXMoIi51aS1zdGF0ZS1kaXNhYmxlZCIpKXtpZih0aGlzLmFjdGl2ZS5jaGlsZHJlbigiW2FyaWEtaGFzcG9wdXA9J3RydWUnXSIpLmxlbmd0aCl7dGhpcy5leHBhbmQoZXZlbnQpO31lbHNle3RoaXMuc2VsZWN0KGV2ZW50KTt9fX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBtZW51cyxpdGVtcyxuZXdTdWJtZW51cyxuZXdJdGVtcyxuZXdXcmFwcGVycyx0aGF0PXRoaXMsaWNvbj10aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSxzdWJtZW51cz10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMubWVudXMpO3RoaXMuX3RvZ2dsZUNsYXNzKCJ1aS1tZW51LWljb25zIixudWxsLCEhdGhpcy5lbGVtZW50LmZpbmQoIi51aS1pY29uIikubGVuZ3RoKTtuZXdTdWJtZW51cz1zdWJtZW51cy5maWx0ZXIoIjpub3QoLnVpLW1lbnUpIikuaGlkZSgpLmF0dHIoe3JvbGU6dGhpcy5vcHRpb25zLnJvbGUsImFyaWEtaGlkZGVuIjoidHJ1ZSIsImFyaWEtZXhwYW5kZWQiOiJmYWxzZSJ9KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG1lbnU9JCh0aGlzKSxpdGVtPW1lbnUucHJldigpLHN1Ym1lbnVDYXJldD0kKCI8c3Bhbj4iKS5kYXRhKCJ1aS1tZW51LXN1Ym1lbnUtY2FyZXQiLHRydWUpO3RoYXQuX2FkZENsYXNzKHN1Ym1lbnVDYXJldCwidWktbWVudS1pY29uIiwidWktaWNvbiAiK2ljb24pO2l0ZW0uYXR0cigiYXJpYS1oYXNwb3B1cCIsInRydWUiKS5wcmVwZW5kKHN1Ym1lbnVDYXJldCk7bWVudS5hdHRyKCJhcmlhLWxhYmVsbGVkYnkiLGl0ZW0uYXR0cigiaWQiKSk7fSk7dGhpcy5fYWRkQ2xhc3MobmV3U3VibWVudXMsInVpLW1lbnUiLCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktZnJvbnQiKTttZW51cz1zdWJtZW51cy5hZGQodGhpcy5lbGVtZW50KTtpdGVtcz1tZW51cy5maW5kKHRoaXMub3B0aW9ucy5pdGVtcyk7aXRlbXMubm90KCIudWktbWVudS1pdGVtIikuZWFjaChmdW5jdGlvbigpe3ZhciBpdGVtPSQodGhpcyk7aWYodGhhdC5faXNEaXZpZGVyKGl0ZW0pKXt0aGF0Ll9hZGRDbGFzcyhpdGVtLCJ1aS1tZW51LWRpdmlkZXIiLCJ1aS13aWRnZXQtY29udGVudCIpO319KTtuZXdJdGVtcz1pdGVtcy5ub3QoIi51aS1tZW51LWl0ZW0sIC51aS1tZW51LWRpdmlkZXIiKTtuZXdXcmFwcGVycz1uZXdJdGVtcy5jaGlsZHJlbigpLm5vdCgiLnVpLW1lbnUiKS51bmlxdWVJZCgpLmF0dHIoe3RhYkluZGV4Oi0xLHJvbGU6dGhpcy5faXRlbVJvbGUoKX0pO3RoaXMuX2FkZENsYXNzKG5ld0l0ZW1zLCJ1aS1tZW51LWl0ZW0iKS5fYWRkQ2xhc3MobmV3V3JhcHBlcnMsInVpLW1lbnUtaXRlbS13cmFwcGVyIik7aXRlbXMuZmlsdGVyKCIudWktc3RhdGUtZGlzYWJsZWQiKS5hdHRyKCJhcmlhLWRpc2FibGVkIiwidHJ1ZSIpO2lmKHRoaXMuYWN0aXZlJiYhJC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdGhpcy5hY3RpdmVbMF0pKXt0aGlzLmJsdXIoKTt9fSxfaXRlbVJvbGU6ZnVuY3Rpb24oKXtyZXR1cm57bWVudToibWVudWl0ZW0iLGxpc3Rib3g6Im9wdGlvbiJ9W3RoaXMub3B0aW9ucy5yb2xlXTt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihrZXk9PT0iaWNvbnMiKXt2YXIgaWNvbnM9dGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51LWljb24iKTt0aGlzLl9yZW1vdmVDbGFzcyhpY29ucyxudWxsLHRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51KS5fYWRkQ2xhc3MoaWNvbnMsbnVsbCx2YWx1ZS5zdWJtZW51KTt9CnRoaXMuX3N1cGVyKGtleSx2YWx1ZSk7fSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMuX3N1cGVyKHZhbHVlKTt0aGlzLmVsZW1lbnQuYXR0cigiYXJpYS1kaXNhYmxlZCIsU3RyaW5nKHZhbHVlKSk7dGhpcy5fdG9nZ2xlQ2xhc3MobnVsbCwidWktc3RhdGUtZGlzYWJsZWQiLCEhdmFsdWUpO30sZm9jdXM6ZnVuY3Rpb24oZXZlbnQsaXRlbSl7dmFyIG5lc3RlZCxmb2N1c2VkLGFjdGl2ZVBhcmVudDt0aGlzLmJsdXIoZXZlbnQsZXZlbnQmJmV2ZW50LnR5cGU9PT0iZm9jdXMiKTt0aGlzLl9zY3JvbGxJbnRvVmlldyhpdGVtKTt0aGlzLmFjdGl2ZT1pdGVtLmZpcnN0KCk7Zm9jdXNlZD10aGlzLmFjdGl2ZS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbS13cmFwcGVyIik7dGhpcy5fYWRkQ2xhc3MoZm9jdXNlZCxudWxsLCJ1aS1zdGF0ZS1hY3RpdmUiKTtpZih0aGlzLm9wdGlvbnMucm9sZSl7dGhpcy5lbGVtZW50LmF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsZm9jdXNlZC5hdHRyKCJpZCIpKTt9CmFjdGl2ZVBhcmVudD10aGlzLmFjdGl2ZS5wYXJlbnQoKS5jbG9zZXN0KCIudWktbWVudS1pdGVtIikuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0td3JhcHBlciIpO3RoaXMuX2FkZENsYXNzKGFjdGl2ZVBhcmVudCxudWxsLCJ1aS1zdGF0ZS1hY3RpdmUiKTtpZihldmVudCYmZXZlbnQudHlwZT09PSJrZXlkb3duIil7dGhpcy5fY2xvc2UoKTt9ZWxzZXt0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5fY2xvc2UoKTt9LHRoaXMuZGVsYXkpO30KbmVzdGVkPWl0ZW0uY2hpbGRyZW4oIi51aS1tZW51Iik7aWYobmVzdGVkLmxlbmd0aCYmZXZlbnQmJigvXm1vdXNlLy50ZXN0KGV2ZW50LnR5cGUpKSl7dGhpcy5fc3RhcnRPcGVuaW5nKG5lc3RlZCk7fQp0aGlzLmFjdGl2ZU1lbnU9aXRlbS5wYXJlbnQoKTt0aGlzLl90cmlnZ2VyKCJmb2N1cyIsZXZlbnQse2l0ZW06aXRlbX0pO30sX3Njcm9sbEludG9WaWV3OmZ1bmN0aW9uKGl0ZW0pe3ZhciBib3JkZXJUb3AscGFkZGluZ1RvcCxvZmZzZXQsc2Nyb2xsLGVsZW1lbnRIZWlnaHQsaXRlbUhlaWdodDtpZih0aGlzLl9oYXNTY3JvbGwoKSl7Ym9yZGVyVG9wPXBhcnNlRmxvYXQoJC5jc3ModGhpcy5hY3RpdmVNZW51WzBdLCJib3JkZXJUb3BXaWR0aCIpKXx8MDtwYWRkaW5nVG9wPXBhcnNlRmxvYXQoJC5jc3ModGhpcy5hY3RpdmVNZW51WzBdLCJwYWRkaW5nVG9wIikpfHwwO29mZnNldD1pdGVtLm9mZnNldCgpLnRvcC10aGlzLmFjdGl2ZU1lbnUub2Zmc2V0KCkudG9wLWJvcmRlclRvcC1wYWRkaW5nVG9wO3Njcm9sbD10aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKCk7ZWxlbWVudEhlaWdodD10aGlzLmFjdGl2ZU1lbnUuaGVpZ2h0KCk7aXRlbUhlaWdodD1pdGVtLm91dGVySGVpZ2h0KCk7aWYob2Zmc2V0PDApe3RoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3Aoc2Nyb2xsK29mZnNldCk7fWVsc2UgaWYob2Zmc2V0K2l0ZW1IZWlnaHQ+ZWxlbWVudEhlaWdodCl7dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChzY3JvbGwrb2Zmc2V0LWVsZW1lbnRIZWlnaHQraXRlbUhlaWdodCk7fX19LGJsdXI6ZnVuY3Rpb24oZXZlbnQsZnJvbUZvY3VzKXtpZighZnJvbUZvY3VzKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7fQppZighdGhpcy5hY3RpdmUpe3JldHVybjt9CnRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKSxudWxsLCJ1aS1zdGF0ZS1hY3RpdmUiKTt0aGlzLl90cmlnZ2VyKCJibHVyIixldmVudCx7aXRlbTp0aGlzLmFjdGl2ZX0pO3RoaXMuYWN0aXZlPW51bGw7fSxfc3RhcnRPcGVuaW5nOmZ1bmN0aW9uKHN1Ym1lbnUpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtpZihzdWJtZW51LmF0dHIoImFyaWEtaGlkZGVuIikhPT0idHJ1ZSIpe3JldHVybjt9CnRoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpO3RoaXMuX29wZW4oc3VibWVudSk7fSx0aGlzLmRlbGF5KTt9LF9vcGVuOmZ1bmN0aW9uKHN1Ym1lbnUpe3ZhciBwb3NpdGlvbj0kLmV4dGVuZCh7b2Y6dGhpcy5hY3RpdmV9LHRoaXMub3B0aW9ucy5wb3NpdGlvbik7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO3RoaXMuZWxlbWVudC5maW5kKCIudWktbWVudSIpLm5vdChzdWJtZW51LnBhcmVudHMoIi51aS1tZW51IikpLmhpZGUoKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKTtzdWJtZW51LnNob3coKS5yZW1vdmVBdHRyKCJhcmlhLWhpZGRlbiIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIikucG9zaXRpb24ocG9zaXRpb24pO30sY29sbGFwc2VBbGw6ZnVuY3Rpb24oZXZlbnQsYWxsKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3ZhciBjdXJyZW50TWVudT1hbGw/dGhpcy5lbGVtZW50OiQoZXZlbnQmJmV2ZW50LnRhcmdldCkuY2xvc2VzdCh0aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUiKSk7aWYoIWN1cnJlbnRNZW51Lmxlbmd0aCl7Y3VycmVudE1lbnU9dGhpcy5lbGVtZW50O30KdGhpcy5fY2xvc2UoY3VycmVudE1lbnUpO3RoaXMuYmx1cihldmVudCk7dGhpcy5fcmVtb3ZlQ2xhc3MoY3VycmVudE1lbnUuZmluZCgiLnVpLXN0YXRlLWFjdGl2ZSIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpO3RoaXMuYWN0aXZlTWVudT1jdXJyZW50TWVudTt9LHRoaXMuZGVsYXkpO30sX2Nsb3NlOmZ1bmN0aW9uKHN0YXJ0TWVudSl7aWYoIXN0YXJ0TWVudSl7c3RhcnRNZW51PXRoaXMuYWN0aXZlP3RoaXMuYWN0aXZlLnBhcmVudCgpOnRoaXMuZWxlbWVudDt9CnN0YXJ0TWVudS5maW5kKCIudWktbWVudSIpLmhpZGUoKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKTt9LF9jbG9zZU9uRG9jdW1lbnRDbGljazpmdW5jdGlvbihldmVudCl7cmV0dXJuISQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudSIpLmxlbmd0aDt9LF9pc0RpdmlkZXI6ZnVuY3Rpb24oaXRlbSl7cmV0dXJuIS9bXlwtXHUyMDE0XHUyMDEzXHNdLy50ZXN0KGl0ZW0udGV4dCgpKTt9LGNvbGxhcHNlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbmV3SXRlbT10aGlzLmFjdGl2ZSYmdGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIsdGhpcy5lbGVtZW50KTtpZihuZXdJdGVtJiZuZXdJdGVtLmxlbmd0aCl7dGhpcy5fY2xvc2UoKTt0aGlzLmZvY3VzKGV2ZW50LG5ld0l0ZW0pO319LGV4cGFuZDpmdW5jdGlvbihldmVudCl7dmFyIG5ld0l0ZW09dGhpcy5hY3RpdmUmJnRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudSAiKS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlyc3QoKTtpZihuZXdJdGVtJiZuZXdJdGVtLmxlbmd0aCl7dGhpcy5fb3BlbihuZXdJdGVtLnBhcmVudCgpKTt0aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuZm9jdXMoZXZlbnQsbmV3SXRlbSk7fSk7fX0sbmV4dDpmdW5jdGlvbihldmVudCl7dGhpcy5fbW92ZSgibmV4dCIsImZpcnN0IixldmVudCk7fSxwcmV2aW91czpmdW5jdGlvbihldmVudCl7dGhpcy5fbW92ZSgicHJldiIsImxhc3QiLGV2ZW50KTt9LGlzRmlyc3RJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUucHJldkFsbCgiLnVpLW1lbnUtaXRlbSIpLmxlbmd0aDt9LGlzTGFzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5uZXh0QWxsKCIudWktbWVudS1pdGVtIikubGVuZ3RoO30sX21vdmU6ZnVuY3Rpb24oZGlyZWN0aW9uLGZpbHRlcixldmVudCl7dmFyIG5leHQ7aWYodGhpcy5hY3RpdmUpe2lmKGRpcmVjdGlvbj09PSJmaXJzdCJ8fGRpcmVjdGlvbj09PSJsYXN0Iil7bmV4dD10aGlzLmFjdGl2ZQpbZGlyZWN0aW9uPT09ImZpcnN0Ij8icHJldkFsbCI6Im5leHRBbGwiXSgiLnVpLW1lbnUtaXRlbSIpLmVxKC0xKTt9ZWxzZXtuZXh0PXRoaXMuYWN0aXZlCltkaXJlY3Rpb24rIkFsbCJdKCIudWktbWVudS1pdGVtIikuZXEoMCk7fX0KaWYoIW5leHR8fCFuZXh0Lmxlbmd0aHx8IXRoaXMuYWN0aXZlKXtuZXh0PXRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcylbZmlsdGVyXSgpO30KdGhpcy5mb2N1cyhldmVudCxuZXh0KTt9LG5leHRQYWdlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgaXRlbSxiYXNlLGhlaWdodDtpZighdGhpcy5hY3RpdmUpe3RoaXMubmV4dChldmVudCk7cmV0dXJuO30KaWYodGhpcy5pc0xhc3RJdGVtKCkpe3JldHVybjt9CmlmKHRoaXMuX2hhc1Njcm9sbCgpKXtiYXNlPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcDtoZWlnaHQ9dGhpcy5lbGVtZW50LmhlaWdodCgpO3RoaXMuYWN0aXZlLm5leHRBbGwoIi51aS1tZW51LWl0ZW0iKS5lYWNoKGZ1bmN0aW9uKCl7aXRlbT0kKHRoaXMpO3JldHVybiBpdGVtLm9mZnNldCgpLnRvcC1iYXNlLWhlaWdodDwwO30pO3RoaXMuZm9jdXMoZXZlbnQsaXRlbSk7fWVsc2V7dGhpcy5mb2N1cyhldmVudCx0aGlzLmFjdGl2ZU1lbnUuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpClshdGhpcy5hY3RpdmU/ImZpcnN0IjoibGFzdCJdKCkpO319LHByZXZpb3VzUGFnZTpmdW5jdGlvbihldmVudCl7dmFyIGl0ZW0sYmFzZSxoZWlnaHQ7aWYoIXRoaXMuYWN0aXZlKXt0aGlzLm5leHQoZXZlbnQpO3JldHVybjt9CmlmKHRoaXMuaXNGaXJzdEl0ZW0oKSl7cmV0dXJuO30KaWYodGhpcy5faGFzU2Nyb2xsKCkpe2Jhc2U9dGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wO2hlaWdodD10aGlzLmVsZW1lbnQuaGVpZ2h0KCk7dGhpcy5hY3RpdmUucHJldkFsbCgiLnVpLW1lbnUtaXRlbSIpLmVhY2goZnVuY3Rpb24oKXtpdGVtPSQodGhpcyk7cmV0dXJuIGl0ZW0ub2Zmc2V0KCkudG9wLWJhc2UraGVpZ2h0PjA7fSk7dGhpcy5mb2N1cyhldmVudCxpdGVtKTt9ZWxzZXt0aGlzLmZvY3VzKGV2ZW50LHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlyc3QoKSk7fX0sX2hhc1Njcm9sbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKTx0aGlzLmVsZW1lbnQucHJvcCgic2Nyb2xsSGVpZ2h0Iik7fSxzZWxlY3Q6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuYWN0aXZlPXRoaXMuYWN0aXZlfHwkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIpO3ZhciB1aT17aXRlbTp0aGlzLmFjdGl2ZX07aWYoIXRoaXMuYWN0aXZlLmhhcygiLnVpLW1lbnUiKS5sZW5ndGgpe3RoaXMuY29sbGFwc2VBbGwoZXZlbnQsdHJ1ZSk7fQp0aGlzLl90cmlnZ2VyKCJzZWxlY3QiLGV2ZW50LHVpKTt9LF9maWx0ZXJNZW51SXRlbXM6ZnVuY3Rpb24oY2hhcmFjdGVyKXt2YXIgZXNjYXBlZENoYXJhY3Rlcj1jaGFyYWN0ZXIucmVwbGFjZSgvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywiXFwkJiIpLHJlZ2V4PW5ldyBSZWdFeHAoIl4iK2VzY2FwZWRDaGFyYWN0ZXIsImkiKTtyZXR1cm4gdGhpcy5hY3RpdmVNZW51LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5maWx0ZXIoIi51aS1tZW51LWl0ZW0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcmVnZXgudGVzdCgkLnRyaW0oJCh0aGlzKS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbS13cmFwcGVyIikudGV4dCgpKSk7fSk7fX0pOyQud2lkZ2V0KCJ1aS5hdXRvY29tcGxldGUiLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8aW5wdXQ+IixvcHRpb25zOnthcHBlbmRUbzpudWxsLGF1dG9Gb2N1czpmYWxzZSxkZWxheTozMDAsbWluTGVuZ3RoOjEscG9zaXRpb246e215OiJsZWZ0IHRvcCIsYXQ6ImxlZnQgYm90dG9tIixjb2xsaXNpb246Im5vbmUifSxzb3VyY2U6bnVsbCxjaGFuZ2U6bnVsbCxjbG9zZTpudWxsLGZvY3VzOm51bGwsb3BlbjpudWxsLHJlc3BvbnNlOm51bGwsc2VhcmNoOm51bGwsc2VsZWN0Om51bGx9LHJlcXVlc3RJbmRleDowLHBlbmRpbmc6MCxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHN1cHByZXNzS2V5UHJlc3Msc3VwcHJlc3NLZXlQcmVzc1JlcGVhdCxzdXBwcmVzc0lucHV0LG5vZGVOYW1lPXRoaXMuZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGlzVGV4dGFyZWE9bm9kZU5hbWU9PT0idGV4dGFyZWEiLGlzSW5wdXQ9bm9kZU5hbWU9PT0iaW5wdXQiO3RoaXMuaXNNdWx0aUxpbmU9aXNUZXh0YXJlYXx8IWlzSW5wdXQmJnRoaXMuX2lzQ29udGVudEVkaXRhYmxlKHRoaXMuZWxlbWVudCk7dGhpcy52YWx1ZU1ldGhvZD10aGlzLmVsZW1lbnRbaXNUZXh0YXJlYXx8aXNJbnB1dD8idmFsIjoidGV4dCJdO3RoaXMuaXNOZXdNZW51PXRydWU7dGhpcy5fYWRkQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1pbnB1dCIpO3RoaXMuZWxlbWVudC5hdHRyKCJhdXRvY29tcGxldGUiLCJvZmYiKTt0aGlzLl9vbih0aGlzLmVsZW1lbnQse2tleWRvd246ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMuZWxlbWVudC5wcm9wKCJyZWFkT25seSIpKXtzdXBwcmVzc0tleVByZXNzPXRydWU7c3VwcHJlc3NJbnB1dD10cnVlO3N1cHByZXNzS2V5UHJlc3NSZXBlYXQ9dHJ1ZTtyZXR1cm47fQpzdXBwcmVzc0tleVByZXNzPWZhbHNlO3N1cHByZXNzSW5wdXQ9ZmFsc2U7c3VwcHJlc3NLZXlQcmVzc1JlcGVhdD1mYWxzZTt2YXIga2V5Q29kZT0kLnVpLmtleUNvZGU7c3dpdGNoKGV2ZW50LmtleUNvZGUpe2Nhc2Uga2V5Q29kZS5QQUdFX1VQOnN1cHByZXNzS2V5UHJlc3M9dHJ1ZTt0aGlzLl9tb3ZlKCJwcmV2aW91c1BhZ2UiLGV2ZW50KTticmVhaztjYXNlIGtleUNvZGUuUEFHRV9ET1dOOnN1cHByZXNzS2V5UHJlc3M9dHJ1ZTt0aGlzLl9tb3ZlKCJuZXh0UGFnZSIsZXZlbnQpO2JyZWFrO2Nhc2Uga2V5Q29kZS5VUDpzdXBwcmVzc0tleVByZXNzPXRydWU7dGhpcy5fa2V5RXZlbnQoInByZXZpb3VzIixldmVudCk7YnJlYWs7Y2FzZSBrZXlDb2RlLkRPV046c3VwcHJlc3NLZXlQcmVzcz10cnVlO3RoaXMuX2tleUV2ZW50KCJuZXh0IixldmVudCk7YnJlYWs7Y2FzZSBrZXlDb2RlLkVOVEVSOmlmKHRoaXMubWVudS5hY3RpdmUpe3N1cHByZXNzS2V5UHJlc3M9dHJ1ZTtldmVudC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMubWVudS5zZWxlY3QoZXZlbnQpO30KYnJlYWs7Y2FzZSBrZXlDb2RlLlRBQjppZih0aGlzLm1lbnUuYWN0aXZlKXt0aGlzLm1lbnUuc2VsZWN0KGV2ZW50KTt9CmJyZWFrO2Nhc2Uga2V5Q29kZS5FU0NBUEU6aWYodGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikpe2lmKCF0aGlzLmlzTXVsdGlMaW5lKXt0aGlzLl92YWx1ZSh0aGlzLnRlcm0pO30KdGhpcy5jbG9zZShldmVudCk7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9CmJyZWFrO2RlZmF1bHQ6c3VwcHJlc3NLZXlQcmVzc1JlcGVhdD10cnVlO3RoaXMuX3NlYXJjaFRpbWVvdXQoZXZlbnQpO2JyZWFrO319LGtleXByZXNzOmZ1bmN0aW9uKGV2ZW50KXtpZihzdXBwcmVzc0tleVByZXNzKXtzdXBwcmVzc0tleVByZXNzPWZhbHNlO2lmKCF0aGlzLmlzTXVsdGlMaW5lfHx0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9CnJldHVybjt9CmlmKHN1cHByZXNzS2V5UHJlc3NSZXBlYXQpe3JldHVybjt9CnZhciBrZXlDb2RlPSQudWkua2V5Q29kZTtzd2l0Y2goZXZlbnQua2V5Q29kZSl7Y2FzZSBrZXlDb2RlLlBBR0VfVVA6dGhpcy5fbW92ZSgicHJldmlvdXNQYWdlIixldmVudCk7YnJlYWs7Y2FzZSBrZXlDb2RlLlBBR0VfRE9XTjp0aGlzLl9tb3ZlKCJuZXh0UGFnZSIsZXZlbnQpO2JyZWFrO2Nhc2Uga2V5Q29kZS5VUDp0aGlzLl9rZXlFdmVudCgicHJldmlvdXMiLGV2ZW50KTticmVhaztjYXNlIGtleUNvZGUuRE9XTjp0aGlzLl9rZXlFdmVudCgibmV4dCIsZXZlbnQpO2JyZWFrO319LGlucHV0OmZ1bmN0aW9uKGV2ZW50KXtpZihzdXBwcmVzc0lucHV0KXtzdXBwcmVzc0lucHV0PWZhbHNlO2V2ZW50LnByZXZlbnREZWZhdWx0KCk7cmV0dXJuO30KdGhpcy5fc2VhcmNoVGltZW91dChldmVudCk7fSxmb2N1czpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJdGVtPW51bGw7dGhpcy5wcmV2aW91cz10aGlzLl92YWx1ZSgpO30sYmx1cjpmdW5jdGlvbihldmVudCl7aWYodGhpcy5jYW5jZWxCbHVyKXtkZWxldGUgdGhpcy5jYW5jZWxCbHVyO3JldHVybjt9CmNsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyk7dGhpcy5jbG9zZShldmVudCk7dGhpcy5fY2hhbmdlKGV2ZW50KTt9fSk7dGhpcy5faW5pdFNvdXJjZSgpO3RoaXMubWVudT0kKCI8dWw+IikuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSkubWVudSh7cm9sZTpudWxsfSkuaGlkZSgpLm1lbnUoImluc3RhbmNlIik7dGhpcy5fYWRkQ2xhc3ModGhpcy5tZW51LmVsZW1lbnQsInVpLWF1dG9jb21wbGV0ZSIsInVpLWZyb250Iik7dGhpcy5fb24odGhpcy5tZW51LmVsZW1lbnQse21vdXNlZG93bjpmdW5jdGlvbihldmVudCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt0aGlzLmNhbmNlbEJsdXI9dHJ1ZTt0aGlzLl9kZWxheShmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7aWYodGhpcy5lbGVtZW50WzBdIT09JC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSl7dGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIik7fX0pO30sbWVudWZvY3VzOmZ1bmN0aW9uKGV2ZW50LHVpKXt2YXIgbGFiZWwsaXRlbTtpZih0aGlzLmlzTmV3TWVudSl7dGhpcy5pc05ld01lbnU9ZmFsc2U7aWYoZXZlbnQub3JpZ2luYWxFdmVudCYmL15tb3VzZS8udGVzdChldmVudC5vcmlnaW5hbEV2ZW50LnR5cGUpKXt0aGlzLm1lbnUuYmx1cigpO3RoaXMuZG9jdW1lbnQub25lKCJtb3VzZW1vdmUiLGZ1bmN0aW9uKCl7JChldmVudC50YXJnZXQpLnRyaWdnZXIoZXZlbnQub3JpZ2luYWxFdmVudCk7fSk7cmV0dXJuO319Cml0ZW09dWkuaXRlbS5kYXRhKCJ1aS1hdXRvY29tcGxldGUtaXRlbSIpO2lmKGZhbHNlIT09dGhpcy5fdHJpZ2dlcigiZm9jdXMiLGV2ZW50LHtpdGVtOml0ZW19KSl7aWYoZXZlbnQub3JpZ2luYWxFdmVudCYmL15rZXkvLnRlc3QoZXZlbnQub3JpZ2luYWxFdmVudC50eXBlKSl7dGhpcy5fdmFsdWUoaXRlbS52YWx1ZSk7fX0KbGFiZWw9dWkuaXRlbS5hdHRyKCJhcmlhLWxhYmVsIil8fGl0ZW0udmFsdWU7aWYobGFiZWwmJiQudHJpbShsYWJlbCkubGVuZ3RoKXt0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCk7JCgiPGRpdj4iKS50ZXh0KGxhYmVsKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pO319LG1lbnVzZWxlY3Q6ZnVuY3Rpb24oZXZlbnQsdWkpe3ZhciBpdGVtPXVpLml0ZW0uZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iKSxwcmV2aW91cz10aGlzLnByZXZpb3VzO2lmKHRoaXMuZWxlbWVudFswXSE9PSQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSkpe3RoaXMuZWxlbWVudC50cmlnZ2VyKCJmb2N1cyIpO3RoaXMucHJldmlvdXM9cHJldmlvdXM7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXByZXZpb3VzO3RoaXMuc2VsZWN0ZWRJdGVtPWl0ZW07fSk7fQppZihmYWxzZSE9PXRoaXMuX3RyaWdnZXIoInNlbGVjdCIsZXZlbnQse2l0ZW06aXRlbX0pKXt0aGlzLl92YWx1ZShpdGVtLnZhbHVlKTt9CnRoaXMudGVybT10aGlzLl92YWx1ZSgpO3RoaXMuY2xvc2UoZXZlbnQpO3RoaXMuc2VsZWN0ZWRJdGVtPWl0ZW07fX0pO3RoaXMubGl2ZVJlZ2lvbj0kKCI8ZGl2PiIse3JvbGU6InN0YXR1cyIsImFyaWEtbGl2ZSI6ImFzc2VydGl2ZSIsImFyaWEtcmVsZXZhbnQiOiJhZGRpdGlvbnMifSkuYXBwZW5kVG8odGhpcy5kb2N1bWVudFswXS5ib2R5KTt0aGlzLl9hZGRDbGFzcyh0aGlzLmxpdmVSZWdpb24sbnVsbCwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIik7dGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKTt9fSk7fSxfZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyk7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImF1dG9jb21wbGV0ZSIpO3RoaXMubWVudS5lbGVtZW50LnJlbW92ZSgpO3RoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKTt9LF9zZXRPcHRpb246ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzLl9zdXBlcihrZXksdmFsdWUpO2lmKGtleT09PSJzb3VyY2UiKXt0aGlzLl9pbml0U291cmNlKCk7fQppZihrZXk9PT0iYXBwZW5kVG8iKXt0aGlzLm1lbnUuZWxlbWVudC5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKTt9CmlmKGtleT09PSJkaXNhYmxlZCImJnZhbHVlJiZ0aGlzLnhocil7dGhpcy54aHIuYWJvcnQoKTt9fSxfaXNFdmVudFRhcmdldEluV2lkZ2V0OmZ1bmN0aW9uKGV2ZW50KXt2YXIgbWVudUVsZW1lbnQ9dGhpcy5tZW51LmVsZW1lbnRbMF07cmV0dXJuIGV2ZW50LnRhcmdldD09PXRoaXMuZWxlbWVudFswXXx8ZXZlbnQudGFyZ2V0PT09bWVudUVsZW1lbnR8fCQuY29udGFpbnMobWVudUVsZW1lbnQsZXZlbnQudGFyZ2V0KTt9LF9jbG9zZU9uQ2xpY2tPdXRzaWRlOmZ1bmN0aW9uKGV2ZW50KXtpZighdGhpcy5faXNFdmVudFRhcmdldEluV2lkZ2V0KGV2ZW50KSl7dGhpcy5jbG9zZSgpO319LF9hcHBlbmRUbzpmdW5jdGlvbigpe3ZhciBlbGVtZW50PXRoaXMub3B0aW9ucy5hcHBlbmRUbztpZihlbGVtZW50KXtlbGVtZW50PWVsZW1lbnQuanF1ZXJ5fHxlbGVtZW50Lm5vZGVUeXBlPyQoZWxlbWVudCk6dGhpcy5kb2N1bWVudC5maW5kKGVsZW1lbnQpLmVxKDApO30KaWYoIWVsZW1lbnR8fCFlbGVtZW50WzBdKXtlbGVtZW50PXRoaXMuZWxlbWVudC5jbG9zZXN0KCIudWktZnJvbnQsIGRpYWxvZyIpO30KaWYoIWVsZW1lbnQubGVuZ3RoKXtlbGVtZW50PXRoaXMuZG9jdW1lbnRbMF0uYm9keTt9CnJldHVybiBlbGVtZW50O30sX2luaXRTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgYXJyYXksdXJsLHRoYXQ9dGhpcztpZigkLmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSkpe2FycmF5PXRoaXMub3B0aW9ucy5zb3VyY2U7dGhpcy5zb3VyY2U9ZnVuY3Rpb24ocmVxdWVzdCxyZXNwb25zZSl7cmVzcG9uc2UoJC51aS5hdXRvY29tcGxldGUuZmlsdGVyKGFycmF5LHJlcXVlc3QudGVybSkpO307fWVsc2UgaWYodHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2U9PT0ic3RyaW5nIil7dXJsPXRoaXMub3B0aW9ucy5zb3VyY2U7dGhpcy5zb3VyY2U9ZnVuY3Rpb24ocmVxdWVzdCxyZXNwb25zZSl7aWYodGhhdC54aHIpe3RoYXQueGhyLmFib3J0KCk7fQp0aGF0Lnhocj0kLmFqYXgoe3VybDp1cmwsZGF0YTpyZXF1ZXN0LGRhdGFUeXBlOiJqc29uIixzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe3Jlc3BvbnNlKGRhdGEpO30sZXJyb3I6ZnVuY3Rpb24oKXtyZXNwb25zZShbXSk7fX0pO307fWVsc2V7dGhpcy5zb3VyY2U9dGhpcy5vcHRpb25zLnNvdXJjZTt9fSxfc2VhcmNoVGltZW91dDpmdW5jdGlvbihldmVudCl7Y2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKTt0aGlzLnNlYXJjaGluZz10aGlzLl9kZWxheShmdW5jdGlvbigpe3ZhciBlcXVhbFZhbHVlcz10aGlzLnRlcm09PT10aGlzLl92YWx1ZSgpLG1lbnVWaXNpYmxlPXRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpLG1vZGlmaWVyS2V5PWV2ZW50LmFsdEtleXx8ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleXx8ZXZlbnQuc2hpZnRLZXk7aWYoIWVxdWFsVmFsdWVzfHwoZXF1YWxWYWx1ZXMmJiFtZW51VmlzaWJsZSYmIW1vZGlmaWVyS2V5KSl7dGhpcy5zZWxlY3RlZEl0ZW09bnVsbDt0aGlzLnNlYXJjaChudWxsLGV2ZW50KTt9fSx0aGlzLm9wdGlvbnMuZGVsYXkpO30sc2VhcmNoOmZ1bmN0aW9uKHZhbHVlLGV2ZW50KXt2YWx1ZT12YWx1ZSE9bnVsbD92YWx1ZTp0aGlzLl92YWx1ZSgpO3RoaXMudGVybT10aGlzLl92YWx1ZSgpO2lmKHZhbHVlLmxlbmd0aDx0aGlzLm9wdGlvbnMubWluTGVuZ3RoKXtyZXR1cm4gdGhpcy5jbG9zZShldmVudCk7fQppZih0aGlzLl90cmlnZ2VyKCJzZWFyY2giLGV2ZW50KT09PWZhbHNlKXtyZXR1cm47fQpyZXR1cm4gdGhpcy5fc2VhcmNoKHZhbHVlKTt9LF9zZWFyY2g6ZnVuY3Rpb24odmFsdWUpe3RoaXMucGVuZGluZysrO3RoaXMuX2FkZENsYXNzKCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZyIpO3RoaXMuY2FuY2VsU2VhcmNoPWZhbHNlO3RoaXMuc291cmNlKHt0ZXJtOnZhbHVlfSx0aGlzLl9yZXNwb25zZSgpKTt9LF9yZXNwb25zZTpmdW5jdGlvbigpe3ZhciBpbmRleD0rK3RoaXMucmVxdWVzdEluZGV4O3JldHVybiAkLnByb3h5KGZ1bmN0aW9uKGNvbnRlbnQpe2lmKGluZGV4PT09dGhpcy5yZXF1ZXN0SW5kZXgpe3RoaXMuX19yZXNwb25zZShjb250ZW50KTt9CnRoaXMucGVuZGluZy0tO2lmKCF0aGlzLnBlbmRpbmcpe3RoaXMuX3JlbW92ZUNsYXNzKCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZyIpO319LHRoaXMpO30sX19yZXNwb25zZTpmdW5jdGlvbihjb250ZW50KXtpZihjb250ZW50KXtjb250ZW50PXRoaXMuX25vcm1hbGl6ZShjb250ZW50KTt9CnRoaXMuX3RyaWdnZXIoInJlc3BvbnNlIixudWxsLHtjb250ZW50OmNvbnRlbnR9KTtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZjb250ZW50JiZjb250ZW50Lmxlbmd0aCYmIXRoaXMuY2FuY2VsU2VhcmNoKXt0aGlzLl9zdWdnZXN0KGNvbnRlbnQpO3RoaXMuX3RyaWdnZXIoIm9wZW4iKTt9ZWxzZXt0aGlzLl9jbG9zZSgpO319LGNsb3NlOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmNhbmNlbFNlYXJjaD10cnVlO3RoaXMuX2Nsb3NlKGV2ZW50KTt9LF9jbG9zZTpmdW5jdGlvbihldmVudCl7dGhpcy5fb2ZmKHRoaXMuZG9jdW1lbnQsIm1vdXNlZG93biIpO2lmKHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpKXt0aGlzLm1lbnUuZWxlbWVudC5oaWRlKCk7dGhpcy5tZW51LmJsdXIoKTt0aGlzLmlzTmV3TWVudT10cnVlO3RoaXMuX3RyaWdnZXIoImNsb3NlIixldmVudCk7fX0sX2NoYW5nZTpmdW5jdGlvbihldmVudCl7aWYodGhpcy5wcmV2aW91cyE9PXRoaXMuX3ZhbHVlKCkpe3RoaXMuX3RyaWdnZXIoImNoYW5nZSIsZXZlbnQse2l0ZW06dGhpcy5zZWxlY3RlZEl0ZW19KTt9fSxfbm9ybWFsaXplOmZ1bmN0aW9uKGl0ZW1zKXtpZihpdGVtcy5sZW5ndGgmJml0ZW1zWzBdLmxhYmVsJiZpdGVtc1swXS52YWx1ZSl7cmV0dXJuIGl0ZW1zO30KcmV0dXJuICQubWFwKGl0ZW1zLGZ1bmN0aW9uKGl0ZW0pe2lmKHR5cGVvZiBpdGVtPT09InN0cmluZyIpe3JldHVybntsYWJlbDppdGVtLHZhbHVlOml0ZW19O30KcmV0dXJuICQuZXh0ZW5kKHt9LGl0ZW0se2xhYmVsOml0ZW0ubGFiZWx8fGl0ZW0udmFsdWUsdmFsdWU6aXRlbS52YWx1ZXx8aXRlbS5sYWJlbH0pO30pO30sX3N1Z2dlc3Q6ZnVuY3Rpb24oaXRlbXMpe3ZhciB1bD10aGlzLm1lbnUuZWxlbWVudC5lbXB0eSgpO3RoaXMuX3JlbmRlck1lbnUodWwsaXRlbXMpO3RoaXMuaXNOZXdNZW51PXRydWU7dGhpcy5tZW51LnJlZnJlc2goKTt1bC5zaG93KCk7dGhpcy5fcmVzaXplTWVudSgpO3VsLnBvc2l0aW9uKCQuZXh0ZW5kKHtvZjp0aGlzLmVsZW1lbnR9LHRoaXMub3B0aW9ucy5wb3NpdGlvbikpO2lmKHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpe3RoaXMubWVudS5uZXh0KCk7fQp0aGlzLl9vbih0aGlzLmRvY3VtZW50LHttb3VzZWRvd246Il9jbG9zZU9uQ2xpY2tPdXRzaWRlIn0pO30sX3Jlc2l6ZU1lbnU6ZnVuY3Rpb24oKXt2YXIgdWw9dGhpcy5tZW51LmVsZW1lbnQ7dWwub3V0ZXJXaWR0aChNYXRoLm1heCh1bC53aWR0aCgiIikub3V0ZXJXaWR0aCgpKzEsdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSkpO30sX3JlbmRlck1lbnU6ZnVuY3Rpb24odWwsaXRlbXMpe3ZhciB0aGF0PXRoaXM7JC5lYWNoKGl0ZW1zLGZ1bmN0aW9uKGluZGV4LGl0ZW0pe3RoYXQuX3JlbmRlckl0ZW1EYXRhKHVsLGl0ZW0pO30pO30sX3JlbmRlckl0ZW1EYXRhOmZ1bmN0aW9uKHVsLGl0ZW0pe3JldHVybiB0aGlzLl9yZW5kZXJJdGVtKHVsLGl0ZW0pLmRhdGEoInVpLWF1dG9jb21wbGV0ZS1pdGVtIixpdGVtKTt9LF9yZW5kZXJJdGVtOmZ1bmN0aW9uKHVsLGl0ZW0pe3JldHVybiAkKCI8bGk+IikuYXBwZW5kKCQoIjxkaXY+IikudGV4dChpdGVtLmxhYmVsKSkuYXBwZW5kVG8odWwpO30sX21vdmU6ZnVuY3Rpb24oZGlyZWN0aW9uLGV2ZW50KXtpZighdGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikpe3RoaXMuc2VhcmNoKG51bGwsZXZlbnQpO3JldHVybjt9CmlmKHRoaXMubWVudS5pc0ZpcnN0SXRlbSgpJiYvXnByZXZpb3VzLy50ZXN0KGRpcmVjdGlvbil8fHRoaXMubWVudS5pc0xhc3RJdGVtKCkmJi9ebmV4dC8udGVzdChkaXJlY3Rpb24pKXtpZighdGhpcy5pc011bHRpTGluZSl7dGhpcy5fdmFsdWUodGhpcy50ZXJtKTt9CnRoaXMubWVudS5ibHVyKCk7cmV0dXJuO30KdGhpcy5tZW51W2RpcmVjdGlvbl0oZXZlbnQpO30sd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVudS5lbGVtZW50O30sX3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVNZXRob2QuYXBwbHkodGhpcy5lbGVtZW50LGFyZ3VtZW50cyk7fSxfa2V5RXZlbnQ6ZnVuY3Rpb24oa2V5RXZlbnQsZXZlbnQpe2lmKCF0aGlzLmlzTXVsdGlMaW5lfHx0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7dGhpcy5fbW92ZShrZXlFdmVudCxldmVudCk7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9fSxfaXNDb250ZW50RWRpdGFibGU6ZnVuY3Rpb24oZWxlbWVudCl7aWYoIWVsZW1lbnQubGVuZ3RoKXtyZXR1cm4gZmFsc2U7fQp2YXIgZWRpdGFibGU9ZWxlbWVudC5wcm9wKCJjb250ZW50RWRpdGFibGUiKTtpZihlZGl0YWJsZT09PSJpbmhlcml0Iil7cmV0dXJuIHRoaXMuX2lzQ29udGVudEVkaXRhYmxlKGVsZW1lbnQucGFyZW50KCkpO30KcmV0dXJuIGVkaXRhYmxlPT09InRydWUiO319KTskLmV4dGVuZCgkLnVpLmF1dG9jb21wbGV0ZSx7ZXNjYXBlUmVnZXg6ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZS5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCJcXCQmIik7fSxmaWx0ZXI6ZnVuY3Rpb24oYXJyYXksdGVybSl7dmFyIG1hdGNoZXI9bmV3IFJlZ0V4cCgkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCh0ZXJtKSwiaSIpO3JldHVybiAkLmdyZXAoYXJyYXksZnVuY3Rpb24odmFsdWUpe3JldHVybiBtYXRjaGVyLnRlc3QodmFsdWUubGFiZWx8fHZhbHVlLnZhbHVlfHx2YWx1ZSk7fSk7fX0pOyQud2lkZ2V0KCJ1aS5hdXRvY29tcGxldGUiLCQudWkuYXV0b2NvbXBsZXRlLHtvcHRpb25zOnttZXNzYWdlczp7bm9SZXN1bHRzOiJObyBzZWFyY2ggcmVzdWx0cy4iLHJlc3VsdHM6ZnVuY3Rpb24oYW1vdW50KXtyZXR1cm4gYW1vdW50KyhhbW91bnQ+MT8iIHJlc3VsdHMgYXJlIjoiIHJlc3VsdCBpcyIpKyIgYXZhaWxhYmxlLCB1c2UgdXAgYW5kIGRvd24gYXJyb3cga2V5cyB0byBuYXZpZ2F0ZS4iO319fSxfX3Jlc3BvbnNlOmZ1bmN0aW9uKGNvbnRlbnQpe3ZhciBtZXNzYWdlO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKTtpZih0aGlzLm9wdGlvbnMuZGlzYWJsZWR8fHRoaXMuY2FuY2VsU2VhcmNoKXtyZXR1cm47fQppZihjb250ZW50JiZjb250ZW50Lmxlbmd0aCl7bWVzc2FnZT10aGlzLm9wdGlvbnMubWVzc2FnZXMucmVzdWx0cyhjb250ZW50Lmxlbmd0aCk7fWVsc2V7bWVzc2FnZT10aGlzLm9wdGlvbnMubWVzc2FnZXMubm9SZXN1bHRzO30KdGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpOyQoIjxkaXY+IikudGV4dChtZXNzYWdlKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pO319KTt2YXIgd2lkZ2V0c0F1dG9jb21wbGV0ZT0kLnVpLmF1dG9jb21wbGV0ZTskLmV4dGVuZCgkLnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjEyLjEifX0pO3ZhciBkYXRlcGlja2VyX2luc3RBY3RpdmU7ZnVuY3Rpb24gZGF0ZXBpY2tlcl9nZXRaaW5kZXgoZWxlbSl7dmFyIHBvc2l0aW9uLHZhbHVlO3doaWxlKGVsZW0ubGVuZ3RoJiZlbGVtWzBdIT09ZG9jdW1lbnQpe3Bvc2l0aW9uPWVsZW0uY3NzKCJwb3NpdGlvbiIpO2lmKHBvc2l0aW9uPT09ImFic29sdXRlInx8cG9zaXRpb249PT0icmVsYXRpdmUifHxwb3NpdGlvbj09PSJmaXhlZCIpe3ZhbHVlPXBhcnNlSW50KGVsZW0uY3NzKCJ6SW5kZXgiKSwxMCk7aWYoIWlzTmFOKHZhbHVlKSYmdmFsdWUhPT0wKXtyZXR1cm4gdmFsdWU7fX0KZWxlbT1lbGVtLnBhcmVudCgpO30KcmV0dXJuIDA7fQpmdW5jdGlvbiBEYXRlcGlja2VyKCl7dGhpcy5fY3VySW5zdD1udWxsO3RoaXMuX2tleUV2ZW50PWZhbHNlO3RoaXMuX2Rpc2FibGVkSW5wdXRzPVtdO3RoaXMuX2RhdGVwaWNrZXJTaG93aW5nPWZhbHNlO3RoaXMuX2luRGlhbG9nPWZhbHNlO3RoaXMuX21haW5EaXZJZD0idWktZGF0ZXBpY2tlci1kaXYiO3RoaXMuX2lubGluZUNsYXNzPSJ1aS1kYXRlcGlja2VyLWlubGluZSI7dGhpcy5fYXBwZW5kQ2xhc3M9InVpLWRhdGVwaWNrZXItYXBwZW5kIjt0aGlzLl90cmlnZ2VyQ2xhc3M9InVpLWRhdGVwaWNrZXItdHJpZ2dlciI7dGhpcy5fZGlhbG9nQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlhbG9nIjt0aGlzLl9kaXNhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlzYWJsZWQiO3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzPSJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZSI7dGhpcy5fY3VycmVudENsYXNzPSJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5Ijt0aGlzLl9kYXlPdmVyQ2xhc3M9InVpLWRhdGVwaWNrZXItZGF5cy1jZWxsLW92ZXIiO3RoaXMucmVnaW9uYWw9W107dGhpcy5yZWdpb25hbFsiIl09e2Nsb3NlVGV4dDoiRG9uZSIscHJldlRleHQ6IlByZXYiLG5leHRUZXh0OiJOZXh0IixjdXJyZW50VGV4dDoiVG9kYXkiLG1vbnRoTmFtZXM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLG1vbnRoTmFtZXNTaG9ydDpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLGRheU5hbWVzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxkYXlOYW1lc1Nob3J0OlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sZGF5TmFtZXNNaW46WyJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSJdLHdlZWtIZWFkZXI6IldrIixkYXRlRm9ybWF0OiJtbS9kZC95eSIsZmlyc3REYXk6MCxpc1JUTDpmYWxzZSxzaG93TW9udGhBZnRlclllYXI6ZmFsc2UseWVhclN1ZmZpeDoiIn07dGhpcy5fZGVmYXVsdHM9e3Nob3dPbjoiZm9jdXMiLHNob3dBbmltOiJmYWRlSW4iLHNob3dPcHRpb25zOnt9LGRlZmF1bHREYXRlOm51bGwsYXBwZW5kVGV4dDoiIixidXR0b25UZXh0OiIuLi4iLGJ1dHRvbkltYWdlOiIiLGJ1dHRvbkltYWdlT25seTpmYWxzZSxoaWRlSWZOb1ByZXZOZXh0OmZhbHNlLG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6ZmFsc2UsZ290b0N1cnJlbnQ6ZmFsc2UsY2hhbmdlTW9udGg6ZmFsc2UsY2hhbmdlWWVhcjpmYWxzZSx5ZWFyUmFuZ2U6ImMtMTA6YysxMCIsc2hvd090aGVyTW9udGhzOmZhbHNlLHNlbGVjdE90aGVyTW9udGhzOmZhbHNlLHNob3dXZWVrOmZhbHNlLGNhbGN1bGF0ZVdlZWs6dGhpcy5pc284NjAxV2VlayxzaG9ydFllYXJDdXRvZmY6IisxMCIsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxkdXJhdGlvbjoiZmFzdCIsYmVmb3JlU2hvd0RheTpudWxsLGJlZm9yZVNob3c6bnVsbCxvblNlbGVjdDpudWxsLG9uQ2hhbmdlTW9udGhZZWFyOm51bGwsb25DbG9zZTpudWxsLG51bWJlck9mTW9udGhzOjEsc2hvd0N1cnJlbnRBdFBvczowLHN0ZXBNb250aHM6MSxzdGVwQmlnTW9udGhzOjEyLGFsdEZpZWxkOiIiLGFsdEZvcm1hdDoiIixjb25zdHJhaW5JbnB1dDp0cnVlLHNob3dCdXR0b25QYW5lbDpmYWxzZSxhdXRvU2l6ZTpmYWxzZSxkaXNhYmxlZDpmYWxzZX07JC5leHRlbmQodGhpcy5fZGVmYXVsdHMsdGhpcy5yZWdpb25hbFsiIl0pO3RoaXMucmVnaW9uYWwuZW49JC5leHRlbmQodHJ1ZSx7fSx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5yZWdpb25hbFsiZW4tVVMiXT0kLmV4dGVuZCh0cnVlLHt9LHRoaXMucmVnaW9uYWwuZW4pO3RoaXMuZHBEaXY9ZGF0ZXBpY2tlcl9iaW5kSG92ZXIoJCgiPGRpdiBpZD0nIit0aGlzLl9tYWluRGl2SWQrIicgY2xhc3M9J3VpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSk7fQokLmV4dGVuZChEYXRlcGlja2VyLnByb3RvdHlwZSx7bWFya2VyQ2xhc3NOYW1lOiJoYXNEYXRlcGlja2VyIixtYXhSb3dzOjQsX3dpZGdldERhdGVwaWNrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcERpdjt9LHNldERlZmF1bHRzOmZ1bmN0aW9uKHNldHRpbmdzKXtkYXRlcGlja2VyX2V4dGVuZFJlbW92ZSh0aGlzLl9kZWZhdWx0cyxzZXR0aW5nc3x8e30pO3JldHVybiB0aGlzO30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LHNldHRpbmdzKXt2YXIgbm9kZU5hbWUsaW5saW5lLGluc3Q7bm9kZU5hbWU9dGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aW5saW5lPShub2RlTmFtZT09PSJkaXYifHxub2RlTmFtZT09PSJzcGFuIik7aWYoIXRhcmdldC5pZCl7dGhpcy51dWlkKz0xO3RhcmdldC5pZD0iZHAiK3RoaXMudXVpZDt9Cmluc3Q9dGhpcy5fbmV3SW5zdCgkKHRhcmdldCksaW5saW5lKTtpbnN0LnNldHRpbmdzPSQuZXh0ZW5kKHt9LHNldHRpbmdzfHx7fSk7aWYobm9kZU5hbWU9PT0iaW5wdXQiKXt0aGlzLl9jb25uZWN0RGF0ZXBpY2tlcih0YXJnZXQsaW5zdCk7fWVsc2UgaWYoaW5saW5lKXt0aGlzLl9pbmxpbmVEYXRlcGlja2VyKHRhcmdldCxpbnN0KTt9fSxfbmV3SW5zdDpmdW5jdGlvbih0YXJnZXQsaW5saW5lKXt2YXIgaWQ9dGFyZ2V0WzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV9cLV0pL2csIlxcXFwkMSIpO3JldHVybntpZDppZCxpbnB1dDp0YXJnZXQsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aW5saW5lLGRwRGl2OighaW5saW5lP3RoaXMuZHBEaXY6ZGF0ZXBpY2tlcl9iaW5kSG92ZXIoJCgiPGRpdiBjbGFzcz0nIit0aGlzLl9pbmxpbmVDbGFzcysiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSkpfTt9LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsaW5zdCl7dmFyIGlucHV0PSQodGFyZ2V0KTtpbnN0LmFwcGVuZD0kKFtdKTtpbnN0LnRyaWdnZXI9JChbXSk7aWYoaW5wdXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm47fQp0aGlzLl9hdHRhY2htZW50cyhpbnB1dCxpbnN0KTtpbnB1dC5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkub24oImtleWRvd24iLHRoaXMuX2RvS2V5RG93bikub24oImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS5vbigia2V5dXAiLHRoaXMuX2RvS2V5VXApO3RoaXMuX2F1dG9TaXplKGluc3QpOyQuZGF0YSh0YXJnZXQsImRhdGVwaWNrZXIiLGluc3QpO2lmKGluc3Quc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHRhcmdldCk7fX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKGlucHV0LGluc3Qpe3ZhciBzaG93T24sYnV0dG9uVGV4dCxidXR0b25JbWFnZSxhcHBlbmRUZXh0PXRoaXMuX2dldChpbnN0LCJhcHBlbmRUZXh0IiksaXNSVEw9dGhpcy5fZ2V0KGluc3QsImlzUlRMIik7aWYoaW5zdC5hcHBlbmQpe2luc3QuYXBwZW5kLnJlbW92ZSgpO30KaWYoYXBwZW5kVGV4dCl7aW5zdC5hcHBlbmQ9JCgiPHNwYW4gY2xhc3M9JyIrdGhpcy5fYXBwZW5kQ2xhc3MrIic+IithcHBlbmRUZXh0KyI8L3NwYW4+Iik7aW5wdXRbaXNSVEw/ImJlZm9yZSI6ImFmdGVyIl0oaW5zdC5hcHBlbmQpO30KaW5wdXQub2ZmKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpO2lmKGluc3QudHJpZ2dlcil7aW5zdC50cmlnZ2VyLnJlbW92ZSgpO30Kc2hvd09uPXRoaXMuX2dldChpbnN0LCJzaG93T24iKTtpZihzaG93T249PT0iZm9jdXMifHxzaG93T249PT0iYm90aCIpe2lucHV0Lm9uKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpO30KaWYoc2hvd09uPT09ImJ1dHRvbiJ8fHNob3dPbj09PSJib3RoIil7YnV0dG9uVGV4dD10aGlzLl9nZXQoaW5zdCwiYnV0dG9uVGV4dCIpO2J1dHRvbkltYWdlPXRoaXMuX2dldChpbnN0LCJidXR0b25JbWFnZSIpO2luc3QudHJpZ2dlcj0kKHRoaXMuX2dldChpbnN0LCJidXR0b25JbWFnZU9ubHkiKT8kKCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzpidXR0b25JbWFnZSxhbHQ6YnV0dG9uVGV4dCx0aXRsZTpidXR0b25UZXh0fSk6JCgiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuaHRtbCghYnV0dG9uSW1hZ2U/YnV0dG9uVGV4dDokKCI8aW1nLz4iKS5hdHRyKHtzcmM6YnV0dG9uSW1hZ2UsYWx0OmJ1dHRvblRleHQsdGl0bGU6YnV0dG9uVGV4dH0pKSk7aW5wdXRbaXNSVEw/ImJlZm9yZSI6ImFmdGVyIl0oaW5zdC50cmlnZ2VyKTtpbnN0LnRyaWdnZXIub24oImNsaWNrIixmdW5jdGlvbigpe2lmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09aW5wdXRbMF0peyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTt9ZWxzZSBpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9PWlucHV0WzBdKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpbnB1dFswXSk7fWVsc2V7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpbnB1dFswXSk7fQpyZXR1cm4gZmFsc2U7fSk7fX0sX2F1dG9TaXplOmZ1bmN0aW9uKGluc3Qpe2lmKHRoaXMuX2dldChpbnN0LCJhdXRvU2l6ZSIpJiYhaW5zdC5pbmxpbmUpe3ZhciBmaW5kTWF4LG1heCxtYXhJLGksZGF0ZT1uZXcgRGF0ZSgyMDA5LDEyLTEsMjApLGRhdGVGb3JtYXQ9dGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKTtpZihkYXRlRm9ybWF0Lm1hdGNoKC9bRE1dLykpe2ZpbmRNYXg9ZnVuY3Rpb24obmFtZXMpe21heD0wO21heEk9MDtmb3IoaT0wO2k8bmFtZXMubGVuZ3RoO2krKyl7aWYobmFtZXNbaV0ubGVuZ3RoPm1heCl7bWF4PW5hbWVzW2ldLmxlbmd0aDttYXhJPWk7fX0KcmV0dXJuIG1heEk7fTtkYXRlLnNldE1vbnRoKGZpbmRNYXgodGhpcy5fZ2V0KGluc3QsKGRhdGVGb3JtYXQubWF0Y2goL01NLyk/Im1vbnRoTmFtZXMiOiJtb250aE5hbWVzU2hvcnQiKSkpKTtkYXRlLnNldERhdGUoZmluZE1heCh0aGlzLl9nZXQoaW5zdCwoZGF0ZUZvcm1hdC5tYXRjaCgvREQvKT8iZGF5TmFtZXMiOiJkYXlOYW1lc1Nob3J0IikpKSsyMC1kYXRlLmdldERheSgpKTt9Cmluc3QuaW5wdXQuYXR0cigic2l6ZSIsdGhpcy5fZm9ybWF0RGF0ZShpbnN0LGRhdGUpLmxlbmd0aCk7fX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LGluc3Qpe3ZhciBkaXZTcGFuPSQodGFyZ2V0KTtpZihkaXZTcGFuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJuO30KZGl2U3Bhbi5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGluc3QuZHBEaXYpOyQuZGF0YSh0YXJnZXQsImRhdGVwaWNrZXIiLGluc3QpO3RoaXMuX3NldERhdGUoaW5zdCx0aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KSx0cnVlKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KTtpZihpbnN0LnNldHRpbmdzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0YXJnZXQpO30KaW5zdC5kcERpdi5jc3MoImRpc3BsYXkiLCJibG9jayIpO30sX2RpYWxvZ0RhdGVwaWNrZXI6ZnVuY3Rpb24oaW5wdXQsZGF0ZSxvblNlbGVjdCxzZXR0aW5ncyxwb3Mpe3ZhciBpZCxicm93c2VyV2lkdGgsYnJvd3NlckhlaWdodCxzY3JvbGxYLHNjcm9sbFksaW5zdD10aGlzLl9kaWFsb2dJbnN0O2lmKCFpbnN0KXt0aGlzLnV1aWQrPTE7aWQ9ImRwIit0aGlzLnV1aWQ7dGhpcy5fZGlhbG9nSW5wdXQ9JCgiPGlucHV0IHR5cGU9J3RleHQnIGlkPSciK2lkKyInIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMHB4OyB3aWR0aDogMHB4OycvPiIpO3RoaXMuX2RpYWxvZ0lucHV0Lm9uKCJrZXlkb3duIix0aGlzLl9kb0tleURvd24pOyQoImJvZHkiKS5hcHBlbmQodGhpcy5fZGlhbG9nSW5wdXQpO2luc3Q9dGhpcy5fZGlhbG9nSW5zdD10aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LGZhbHNlKTtpbnN0LnNldHRpbmdzPXt9OyQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSwiZGF0ZXBpY2tlciIsaW5zdCk7fQpkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLHNldHRpbmdzfHx7fSk7ZGF0ZT0oZGF0ZSYmZGF0ZS5jb25zdHJ1Y3Rvcj09PURhdGU/dGhpcy5fZm9ybWF0RGF0ZShpbnN0LGRhdGUpOmRhdGUpO3RoaXMuX2RpYWxvZ0lucHV0LnZhbChkYXRlKTt0aGlzLl9wb3M9KHBvcz8ocG9zLmxlbmd0aD9wb3M6W3Bvcy5wYWdlWCxwb3MucGFnZVldKTpudWxsKTtpZighdGhpcy5fcG9zKXticm93c2VyV2lkdGg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO2Jyb3dzZXJIZWlnaHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtzY3JvbGxYPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7c2Nyb2xsWT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt0aGlzLl9wb3M9Wyhicm93c2VyV2lkdGgvMiktMTAwK3Njcm9sbFgsKGJyb3dzZXJIZWlnaHQvMiktMTUwK3Njcm9sbFldO30KdGhpcy5fZGlhbG9nSW5wdXQuY3NzKCJsZWZ0IiwodGhpcy5fcG9zWzBdKzIwKSsicHgiKS5jc3MoInRvcCIsdGhpcy5fcG9zWzFdKyJweCIpO2luc3Quc2V0dGluZ3Mub25TZWxlY3Q9b25TZWxlY3Q7dGhpcy5faW5EaWFsb2c9dHJ1ZTt0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKTt0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSk7aWYoJC5ibG9ja1VJKXskLmJsb2NrVUkodGhpcy5kcERpdik7fQokLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sImRhdGVwaWNrZXIiLGluc3QpO3JldHVybiB0aGlzO30sX2Rlc3Ryb3lEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCl7dmFyIG5vZGVOYW1lLCR0YXJnZXQ9JCh0YXJnZXQpLGluc3Q9JC5kYXRhKHRhcmdldCwiZGF0ZXBpY2tlciIpO2lmKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJuO30Kbm9kZU5hbWU9dGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7JC5yZW1vdmVEYXRhKHRhcmdldCwiZGF0ZXBpY2tlciIpO2lmKG5vZGVOYW1lPT09ImlucHV0Iil7aW5zdC5hcHBlbmQucmVtb3ZlKCk7aW5zdC50cmlnZ2VyLnJlbW92ZSgpOyR0YXJnZXQucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLm9mZigiZm9jdXMiLHRoaXMuX3Nob3dEYXRlcGlja2VyKS5vZmYoImtleWRvd24iLHRoaXMuX2RvS2V5RG93bikub2ZmKCJrZXlwcmVzcyIsdGhpcy5fZG9LZXlQcmVzcykub2ZmKCJrZXl1cCIsdGhpcy5fZG9LZXlVcCk7fWVsc2UgaWYobm9kZU5hbWU9PT0iZGl2Inx8bm9kZU5hbWU9PT0ic3BhbiIpeyR0YXJnZXQucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCk7fQppZihkYXRlcGlja2VyX2luc3RBY3RpdmU9PT1pbnN0KXtkYXRlcGlja2VyX2luc3RBY3RpdmU9bnVsbDt9fSxfZW5hYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciBub2RlTmFtZSxpbmxpbmUsJHRhcmdldD0kKHRhcmdldCksaW5zdD0kLmRhdGEodGFyZ2V0LCJkYXRlcGlja2VyIik7aWYoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm47fQpub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihub2RlTmFtZT09PSJpbnB1dCIpe3RhcmdldC5kaXNhYmxlZD1mYWxzZTtpbnN0LnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZTt9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMS4wIixjdXJzb3I6IiJ9KTt9ZWxzZSBpZihub2RlTmFtZT09PSJkaXYifHxub2RlTmFtZT09PSJzcGFuIil7aW5saW5lPSR0YXJnZXQuY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtpbmxpbmUuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTtpbmxpbmUuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsZmFsc2UpO30KdGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odmFsdWUpe3JldHVybih2YWx1ZT09PXRhcmdldD9udWxsOnZhbHVlKTt9KTt9LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciBub2RlTmFtZSxpbmxpbmUsJHRhcmdldD0kKHRhcmdldCksaW5zdD0kLmRhdGEodGFyZ2V0LCJkYXRlcGlja2VyIik7aWYoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm47fQpub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihub2RlTmFtZT09PSJpbnB1dCIpe3RhcmdldC5kaXNhYmxlZD10cnVlO2luc3QudHJpZ2dlci5maWx0ZXIoImJ1dHRvbiIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWU7fSkuZW5kKCkuZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6IjAuNSIsY3Vyc29yOiJkZWZhdWx0In0pO31lbHNlIGlmKG5vZGVOYW1lPT09ImRpdiJ8fG5vZGVOYW1lPT09InNwYW4iKXtpbmxpbmU9JHRhcmdldC5jaGlsZHJlbigiLiIrdGhpcy5faW5saW5lQ2xhc3MpO2lubGluZS5jaGlsZHJlbigpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2lubGluZS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIix0cnVlKTt9CnRoaXMuX2Rpc2FibGVkSW5wdXRzPSQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4odmFsdWU9PT10YXJnZXQ/bnVsbDp2YWx1ZSk7fSk7dGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT10YXJnZXQ7fSxfaXNEaXNhYmxlZERhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0KXtpZighdGFyZ2V0KXtyZXR1cm4gZmFsc2U7fQpmb3IodmFyIGk9MDtpPHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDtpKyspe2lmKHRoaXMuX2Rpc2FibGVkSW5wdXRzW2ldPT09dGFyZ2V0KXtyZXR1cm4gdHJ1ZTt9fQpyZXR1cm4gZmFsc2U7fSxfZ2V0SW5zdDpmdW5jdGlvbih0YXJnZXQpe3RyeXtyZXR1cm4gJC5kYXRhKHRhcmdldCwiZGF0ZXBpY2tlciIpO30KY2F0Y2goZXJyKXt0aHJvdyJNaXNzaW5nIGluc3RhbmNlIGRhdGEgZm9yIHRoaXMgZGF0ZXBpY2tlciI7fX0sX29wdGlvbkRhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LG5hbWUsdmFsdWUpe3ZhciBzZXR0aW5ncyxkYXRlLG1pbkRhdGUsbWF4RGF0ZSxpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0KTtpZihhcmd1bWVudHMubGVuZ3RoPT09MiYmdHlwZW9mIG5hbWU9PT0ic3RyaW5nIil7cmV0dXJuKG5hbWU9PT0iZGVmYXVsdHMiPyQuZXh0ZW5kKHt9LCQuZGF0ZXBpY2tlci5fZGVmYXVsdHMpOihpbnN0PyhuYW1lPT09ImFsbCI/JC5leHRlbmQoe30saW5zdC5zZXR0aW5ncyk6dGhpcy5fZ2V0KGluc3QsbmFtZSkpOm51bGwpKTt9CnNldHRpbmdzPW5hbWV8fHt9O2lmKHR5cGVvZiBuYW1lPT09InN0cmluZyIpe3NldHRpbmdzPXt9O3NldHRpbmdzW25hbWVdPXZhbHVlO30KaWYoaW5zdCl7aWYodGhpcy5fY3VySW5zdD09PWluc3Qpe3RoaXMuX2hpZGVEYXRlcGlja2VyKCk7fQpkYXRlPXRoaXMuX2dldERhdGVEYXRlcGlja2VyKHRhcmdldCx0cnVlKTttaW5EYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIik7bWF4RGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1heCIpO2RhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKGluc3Quc2V0dGluZ3Msc2V0dGluZ3MpO2lmKG1pbkRhdGUhPT1udWxsJiZzZXR0aW5ncy5kYXRlRm9ybWF0IT09dW5kZWZpbmVkJiZzZXR0aW5ncy5taW5EYXRlPT09dW5kZWZpbmVkKXtpbnN0LnNldHRpbmdzLm1pbkRhdGU9dGhpcy5fZm9ybWF0RGF0ZShpbnN0LG1pbkRhdGUpO30KaWYobWF4RGF0ZSE9PW51bGwmJnNldHRpbmdzLmRhdGVGb3JtYXQhPT11bmRlZmluZWQmJnNldHRpbmdzLm1heERhdGU9PT11bmRlZmluZWQpe2luc3Quc2V0dGluZ3MubWF4RGF0ZT10aGlzLl9mb3JtYXREYXRlKGluc3QsbWF4RGF0ZSk7fQppZigiZGlzYWJsZWQiaW4gc2V0dGluZ3Mpe2lmKHNldHRpbmdzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0YXJnZXQpO31lbHNle3RoaXMuX2VuYWJsZURhdGVwaWNrZXIodGFyZ2V0KTt9fQp0aGlzLl9hdHRhY2htZW50cygkKHRhcmdldCksaW5zdCk7dGhpcy5fYXV0b1NpemUoaW5zdCk7dGhpcy5fc2V0RGF0ZShpbnN0LGRhdGUpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO319LF9jaGFuZ2VEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCxuYW1lLHZhbHVlKXt0aGlzLl9vcHRpb25EYXRlcGlja2VyKHRhcmdldCxuYW1lLHZhbHVlKTt9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0KTtpZihpbnN0KXt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO319LF9zZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsZGF0ZSl7dmFyIGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXQpO2lmKGluc3Qpe3RoaXMuX3NldERhdGUoaW5zdCxkYXRlKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KTt9fSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LG5vRGVmYXVsdCl7dmFyIGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXQpO2lmKGluc3QmJiFpbnN0LmlubGluZSl7dGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpbnN0LG5vRGVmYXVsdCk7fQpyZXR1cm4oaW5zdD90aGlzLl9nZXREYXRlKGluc3QpOm51bGwpO30sX2RvS2V5RG93bjpmdW5jdGlvbihldmVudCl7dmFyIG9uU2VsZWN0LGRhdGVTdHIsc2VsLGluc3Q9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCksaGFuZGxlZD10cnVlLGlzUlRMPWluc3QuZHBEaXYuaXMoIi51aS1kYXRlcGlja2VyLXJ0bCIpO2luc3QuX2tleUV2ZW50PXRydWU7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyl7c3dpdGNoKGV2ZW50LmtleUNvZGUpe2Nhc2UgOTokLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7aGFuZGxlZD1mYWxzZTticmVhaztjYXNlIDEzOnNlbD0kKCJ0ZC4iKyQuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzKyI6bm90KC4iKwokLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcysiKSIsaW5zdC5kcERpdik7aWYoc2VsWzBdKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShldmVudC50YXJnZXQsaW5zdC5zZWxlY3RlZE1vbnRoLGluc3Quc2VsZWN0ZWRZZWFyLHNlbFswXSk7fQpvblNlbGVjdD0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJvblNlbGVjdCIpO2lmKG9uU2VsZWN0KXtkYXRlU3RyPSQuZGF0ZXBpY2tlci5fZm9ybWF0RGF0ZShpbnN0KTtvblNlbGVjdC5hcHBseSgoaW5zdC5pbnB1dD9pbnN0LmlucHV0WzBdOm51bGwpLFtkYXRlU3RyLGluc3RdKTt9ZWxzZXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7fQpyZXR1cm4gZmFsc2U7Y2FzZSAyNzokLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzokLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChldmVudC5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSksIk0iKTticmVhaztjYXNlIDM0OiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGV2ZW50LmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzU6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9jbGVhckRhdGUoZXZlbnQudGFyZ2V0KTt9CmhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTticmVhaztjYXNlIDM2OmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGV2ZW50LnRhcmdldCk7fQpoYW5kbGVkPWV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzNzppZihldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChpc1JUTD8rMTotMSksIkQiKTt9CmhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTtpZihldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwoZXZlbnQuY3RybEtleT8tJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcEJpZ01vbnRocyIpOi0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwTW9udGhzIikpLCJNIik7fQpicmVhaztjYXNlIDM4OmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsLTcsIkQiKTt9CmhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTticmVhaztjYXNlIDM5OmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGlzUlRMPy0xOisxKSwiRCIpO30KaGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2lmKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChldmVudC5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSksIk0iKTt9CmJyZWFrO2Nhc2UgNDA6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwrNywiRCIpO30KaGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2JyZWFrO2RlZmF1bHQ6aGFuZGxlZD1mYWxzZTt9fWVsc2UgaWYoZXZlbnQua2V5Q29kZT09PTM2JiZldmVudC5jdHJsS2V5KXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRoaXMpO31lbHNle2hhbmRsZWQ9ZmFsc2U7fQppZihoYW5kbGVkKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO319LF9kb0tleVByZXNzOmZ1bmN0aW9uKGV2ZW50KXt2YXIgY2hhcnMsY2hyLGluc3Q9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7aWYoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwiY29uc3RyYWluSW5wdXQiKSl7Y2hhcnM9JC5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKSk7Y2hyPVN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQuY2hhckNvZGU9PW51bGw/ZXZlbnQua2V5Q29kZTpldmVudC5jaGFyQ29kZSk7cmV0dXJuIGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXl8fChjaHI8IiAifHwhY2hhcnN8fGNoYXJzLmluZGV4T2YoY2hyKT4tMSk7fX0sX2RvS2V5VXA6ZnVuY3Rpb24oZXZlbnQpe3ZhciBkYXRlLGluc3Q9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7aWYoaW5zdC5pbnB1dC52YWwoKSE9PWluc3QubGFzdFZhbCl7dHJ5e2RhdGU9JC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJkYXRlRm9ybWF0IiksKGluc3QuaW5wdXQ/aW5zdC5pbnB1dC52YWwoKTpudWxsKSwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7aWYoZGF0ZSl7JC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGluc3QpOyQuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOyQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTt9fQpjYXRjaChlcnIpe319CnJldHVybiB0cnVlO30sX3Nob3dEYXRlcGlja2VyOmZ1bmN0aW9uKGlucHV0KXtpbnB1dD1pbnB1dC50YXJnZXR8fGlucHV0O2lmKGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0iaW5wdXQiKXtpbnB1dD0kKCJpbnB1dCIsaW5wdXQucGFyZW50Tm9kZSlbMF07fQppZigkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKGlucHV0KXx8JC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PT1pbnB1dCl7cmV0dXJuO30KdmFyIGluc3QsYmVmb3JlU2hvdyxiZWZvcmVTaG93U2V0dGluZ3MsaXNGaXhlZCxvZmZzZXQsc2hvd0FuaW0sZHVyYXRpb247aW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoaW5wdXQpO2lmKCQuZGF0ZXBpY2tlci5fY3VySW5zdCYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT09aW5zdCl7JC5kYXRlcGlja2VyLl9jdXJJbnN0LmRwRGl2LnN0b3AodHJ1ZSx0cnVlKTtpZihpbnN0JiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCQuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSk7fX0KYmVmb3JlU2hvdz0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJiZWZvcmVTaG93Iik7YmVmb3JlU2hvd1NldHRpbmdzPWJlZm9yZVNob3c/YmVmb3JlU2hvdy5hcHBseShpbnB1dCxbaW5wdXQsaW5zdF0pOnt9O2lmKGJlZm9yZVNob3dTZXR0aW5ncz09PWZhbHNlKXtyZXR1cm47fQpkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLGJlZm9yZVNob3dTZXR0aW5ncyk7aW5zdC5sYXN0VmFsPW51bGw7JC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9aW5wdXQ7JC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGluc3QpO2lmKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cpe2lucHV0LnZhbHVlPSIiO30KaWYoISQuZGF0ZXBpY2tlci5fcG9zKXskLmRhdGVwaWNrZXIuX3Bvcz0kLmRhdGVwaWNrZXIuX2ZpbmRQb3MoaW5wdXQpOyQuZGF0ZXBpY2tlci5fcG9zWzFdKz1pbnB1dC5vZmZzZXRIZWlnaHQ7fQppc0ZpeGVkPWZhbHNlOyQoaW5wdXQpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7aXNGaXhlZHw9JCh0aGlzKS5jc3MoInBvc2l0aW9uIik9PT0iZml4ZWQiO3JldHVybiFpc0ZpeGVkO30pO29mZnNldD17bGVmdDokLmRhdGVwaWNrZXIuX3Bvc1swXSx0b3A6JC5kYXRlcGlja2VyLl9wb3NbMV19OyQuZGF0ZXBpY2tlci5fcG9zPW51bGw7aW5zdC5kcERpdi5lbXB0eSgpO2luc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGRpc3BsYXk6ImJsb2NrIix0b3A6Ii0xMDAwcHgifSk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO29mZnNldD0kLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGluc3Qsb2Zmc2V0LGlzRml4ZWQpO2luc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjooJC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmJC5ibG9ja1VJPyJzdGF0aWMiOihpc0ZpeGVkPyJmaXhlZCI6ImFic29sdXRlIikpLGRpc3BsYXk6Im5vbmUiLGxlZnQ6b2Zmc2V0LmxlZnQrInB4Iix0b3A6b2Zmc2V0LnRvcCsicHgifSk7aWYoIWluc3QuaW5saW5lKXtzaG93QW5pbT0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzaG93QW5pbSIpO2R1cmF0aW9uPSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImR1cmF0aW9uIik7aW5zdC5kcERpdi5jc3MoInotaW5kZXgiLGRhdGVwaWNrZXJfZ2V0WmluZGV4KCQoaW5wdXQpKSsxKTskLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nPXRydWU7aWYoJC5lZmZlY3RzJiYkLmVmZmVjdHMuZWZmZWN0W3Nob3dBbmltXSl7aW5zdC5kcERpdi5zaG93KHNob3dBbmltLCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInNob3dPcHRpb25zIiksZHVyYXRpb24pO31lbHNle2luc3QuZHBEaXZbc2hvd0FuaW18fCJzaG93Il0oc2hvd0FuaW0/ZHVyYXRpb246bnVsbCk7fQppZigkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaW5zdCkpe2luc3QuaW5wdXQudHJpZ2dlcigiZm9jdXMiKTt9CiQuZGF0ZXBpY2tlci5fY3VySW5zdD1pbnN0O319LF91cGRhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKGluc3Qpe3RoaXMubWF4Um93cz00O2RhdGVwaWNrZXJfaW5zdEFjdGl2ZT1pbnN0O2luc3QuZHBEaXYuZW1wdHkoKS5hcHBlbmQodGhpcy5fZ2VuZXJhdGVIVE1MKGluc3QpKTt0aGlzLl9hdHRhY2hIYW5kbGVycyhpbnN0KTt2YXIgb3JpZ3llYXJzaHRtbCxudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCksY29scz1udW1Nb250aHNbMV0sd2lkdGg9MTcsYWN0aXZlQ2VsbD1pbnN0LmRwRGl2LmZpbmQoIi4iK3RoaXMuX2RheU92ZXJDbGFzcysiIGEiKTtpZihhY3RpdmVDZWxsLmxlbmd0aD4wKXtkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3Zlci5hcHBseShhY3RpdmVDZWxsLmdldCgwKSk7fQppbnN0LmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKTtpZihjb2xzPjEpe2luc3QuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIitjb2xzKS5jc3MoIndpZHRoIiwod2lkdGgqY29scykrImVtIik7fQppbnN0LmRwRGl2WyhudW1Nb250aHNbMF0hPT0xfHxudW1Nb250aHNbMV0hPT0xPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpO2luc3QuZHBEaXZbKHRoaXMuX2dldChpbnN0LCJpc1JUTCIpPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1ydGwiKTtpZihpbnN0PT09JC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaW5zdCkpe2luc3QuaW5wdXQudHJpZ2dlcigiZm9jdXMiKTt9CmlmKGluc3QueWVhcnNodG1sKXtvcmlneWVhcnNodG1sPWluc3QueWVhcnNodG1sO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihvcmlneWVhcnNodG1sPT09aW5zdC55ZWFyc2h0bWwmJmluc3QueWVhcnNodG1sKXtpbnN0LmRwRGl2LmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLXllYXI6Zmlyc3QiKS5yZXBsYWNlV2l0aChpbnN0LnllYXJzaHRtbCk7fQpvcmlneWVhcnNodG1sPWluc3QueWVhcnNodG1sPW51bGw7fSwwKTt9fSxfc2hvdWxkRm9jdXNJbnB1dDpmdW5jdGlvbihpbnN0KXtyZXR1cm4gaW5zdC5pbnB1dCYmaW5zdC5pbnB1dC5pcygiOnZpc2libGUiKSYmIWluc3QuaW5wdXQuaXMoIjpkaXNhYmxlZCIpJiYhaW5zdC5pbnB1dC5pcygiOmZvY3VzIik7fSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oaW5zdCxvZmZzZXQsaXNGaXhlZCl7dmFyIGRwV2lkdGg9aW5zdC5kcERpdi5vdXRlcldpZHRoKCksZHBIZWlnaHQ9aW5zdC5kcERpdi5vdXRlckhlaWdodCgpLGlucHV0V2lkdGg9aW5zdC5pbnB1dD9pbnN0LmlucHV0Lm91dGVyV2lkdGgoKTowLGlucHV0SGVpZ2h0PWluc3QuaW5wdXQ/aW5zdC5pbnB1dC5vdXRlckhlaWdodCgpOjAsdmlld1dpZHRoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsoaXNGaXhlZD8wOiQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksdmlld0hlaWdodD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Kyhpc0ZpeGVkPzA6JChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO29mZnNldC5sZWZ0LT0odGhpcy5fZ2V0KGluc3QsImlzUlRMIik/KGRwV2lkdGgtaW5wdXRXaWR0aCk6MCk7b2Zmc2V0LmxlZnQtPShpc0ZpeGVkJiZvZmZzZXQubGVmdD09PWluc3QuaW5wdXQub2Zmc2V0KCkubGVmdCk/JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpOjA7b2Zmc2V0LnRvcC09KGlzRml4ZWQmJm9mZnNldC50b3A9PT0oaW5zdC5pbnB1dC5vZmZzZXQoKS50b3AraW5wdXRIZWlnaHQpKT8kKGRvY3VtZW50KS5zY3JvbGxUb3AoKTowO29mZnNldC5sZWZ0LT1NYXRoLm1pbihvZmZzZXQubGVmdCwob2Zmc2V0LmxlZnQrZHBXaWR0aD52aWV3V2lkdGgmJnZpZXdXaWR0aD5kcFdpZHRoKT9NYXRoLmFicyhvZmZzZXQubGVmdCtkcFdpZHRoLXZpZXdXaWR0aCk6MCk7b2Zmc2V0LnRvcC09TWF0aC5taW4ob2Zmc2V0LnRvcCwob2Zmc2V0LnRvcCtkcEhlaWdodD52aWV3SGVpZ2h0JiZ2aWV3SGVpZ2h0PmRwSGVpZ2h0KT9NYXRoLmFicyhkcEhlaWdodCtpbnB1dEhlaWdodCk6MCk7cmV0dXJuIG9mZnNldDt9LF9maW5kUG9zOmZ1bmN0aW9uKG9iail7dmFyIHBvc2l0aW9uLGluc3Q9dGhpcy5fZ2V0SW5zdChvYmopLGlzUlRMPXRoaXMuX2dldChpbnN0LCJpc1JUTCIpO3doaWxlKG9iaiYmKG9iai50eXBlPT09ImhpZGRlbiJ8fG9iai5ub2RlVHlwZSE9PTF8fCQuZXhwci5maWx0ZXJzLmhpZGRlbihvYmopKSl7b2JqPW9ialtpc1JUTD8icHJldmlvdXNTaWJsaW5nIjoibmV4dFNpYmxpbmciXTt9CnBvc2l0aW9uPSQob2JqKS5vZmZzZXQoKTtyZXR1cm5bcG9zaXRpb24ubGVmdCxwb3NpdGlvbi50b3BdO30sX2hpZGVEYXRlcGlja2VyOmZ1bmN0aW9uKGlucHV0KXt2YXIgc2hvd0FuaW0sZHVyYXRpb24scG9zdFByb2Nlc3Msb25DbG9zZSxpbnN0PXRoaXMuX2N1ckluc3Q7aWYoIWluc3R8fChpbnB1dCYmaW5zdCE9PSQuZGF0YShpbnB1dCwiZGF0ZXBpY2tlciIpKSl7cmV0dXJuO30KaWYodGhpcy5fZGF0ZXBpY2tlclNob3dpbmcpe3Nob3dBbmltPXRoaXMuX2dldChpbnN0LCJzaG93QW5pbSIpO2R1cmF0aW9uPXRoaXMuX2dldChpbnN0LCJkdXJhdGlvbiIpO3Bvc3RQcm9jZXNzPWZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKGluc3QpO307aWYoJC5lZmZlY3RzJiYoJC5lZmZlY3RzLmVmZmVjdFtzaG93QW5pbV18fCQuZWZmZWN0c1tzaG93QW5pbV0pKXtpbnN0LmRwRGl2LmhpZGUoc2hvd0FuaW0sJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic2hvd09wdGlvbnMiKSxkdXJhdGlvbixwb3N0UHJvY2Vzcyk7fWVsc2V7aW5zdC5kcERpdlsoc2hvd0FuaW09PT0ic2xpZGVEb3duIj8ic2xpZGVVcCI6KHNob3dBbmltPT09ImZhZGVJbiI/ImZhZGVPdXQiOiJoaWRlIikpXSgoc2hvd0FuaW0/ZHVyYXRpb246bnVsbCkscG9zdFByb2Nlc3MpO30KaWYoIXNob3dBbmltKXtwb3N0UHJvY2VzcygpO30KdGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7b25DbG9zZT10aGlzLl9nZXQoaW5zdCwib25DbG9zZSIpO2lmKG9uQ2xvc2Upe29uQ2xvc2UuYXBwbHkoKGluc3QuaW5wdXQ/aW5zdC5pbnB1dFswXTpudWxsKSxbKGluc3QuaW5wdXQ/aW5zdC5pbnB1dC52YWwoKToiIiksaW5zdF0pO30KdGhpcy5fbGFzdElucHV0PW51bGw7aWYodGhpcy5faW5EaWFsb2cpe3RoaXMuX2RpYWxvZ0lucHV0LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiIwIix0b3A6Ii0xMDBweCJ9KTtpZigkLmJsb2NrVUkpeyQudW5ibG9ja1VJKCk7JCgiYm9keSIpLmFwcGVuZCh0aGlzLmRwRGl2KTt9fQp0aGlzLl9pbkRpYWxvZz1mYWxzZTt9fSxfdGlkeURpYWxvZzpmdW5jdGlvbihpbnN0KXtpbnN0LmRwRGl2LnJlbW92ZUNsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKS5vZmYoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIik7fSxfY2hlY2tFeHRlcm5hbENsaWNrOmZ1bmN0aW9uKGV2ZW50KXtpZighJC5kYXRlcGlja2VyLl9jdXJJbnN0KXtyZXR1cm47fQp2YXIgJHRhcmdldD0kKGV2ZW50LnRhcmdldCksaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoJHRhcmdldFswXSk7aWYoKCgkdGFyZ2V0WzBdLmlkIT09JC5kYXRlcGlja2VyLl9tYWluRGl2SWQmJiR0YXJnZXQucGFyZW50cygiIyIrJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aD09PTAmJiEkdGFyZ2V0Lmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiYhJHRhcmdldC5jbG9zZXN0KCIuIiskLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoJiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYhKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJiQuYmxvY2tVSSkpKXx8KCR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiQuZGF0ZXBpY2tlci5fY3VySW5zdCE9PWluc3QpKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7fX0sX2FkanVzdERhdGU6ZnVuY3Rpb24oaWQsb2Zmc2V0LHBlcmlvZCl7dmFyIHRhcmdldD0kKGlkKSxpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtpZih0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0YXJnZXRbMF0pKXtyZXR1cm47fQp0aGlzLl9hZGp1c3RJbnN0RGF0ZShpbnN0LG9mZnNldCsKKHBlcmlvZD09PSJNIj90aGlzLl9nZXQoaW5zdCwic2hvd0N1cnJlbnRBdFBvcyIpOjApLHBlcmlvZCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTt9LF9nb3RvVG9kYXk6ZnVuY3Rpb24oaWQpe3ZhciBkYXRlLHRhcmdldD0kKGlkKSxpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtpZih0aGlzLl9nZXQoaW5zdCwiZ290b0N1cnJlbnQiKSYmaW5zdC5jdXJyZW50RGF5KXtpbnN0LnNlbGVjdGVkRGF5PWluc3QuY3VycmVudERheTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9aW5zdC5jdXJyZW50TW9udGg7aW5zdC5kcmF3WWVhcj1pbnN0LnNlbGVjdGVkWWVhcj1pbnN0LmN1cnJlbnRZZWFyO31lbHNle2RhdGU9bmV3IERhdGUoKTtpbnN0LnNlbGVjdGVkRGF5PWRhdGUuZ2V0RGF0ZSgpO2luc3QuZHJhd01vbnRoPWluc3Quc2VsZWN0ZWRNb250aD1kYXRlLmdldE1vbnRoKCk7aW5zdC5kcmF3WWVhcj1pbnN0LnNlbGVjdGVkWWVhcj1kYXRlLmdldEZ1bGxZZWFyKCk7fQp0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7dGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpO30sX3NlbGVjdE1vbnRoWWVhcjpmdW5jdGlvbihpZCxzZWxlY3QscGVyaW9kKXt2YXIgdGFyZ2V0PSQoaWQpLGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO2luc3RbInNlbGVjdGVkIisocGVyaW9kPT09Ik0iPyJNb250aCI6IlllYXIiKV09aW5zdFsiZHJhdyIrKHBlcmlvZD09PSJNIj8iTW9udGgiOiJZZWFyIildPXBhcnNlSW50KHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZSwxMCk7dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpO3RoaXMuX2FkanVzdERhdGUodGFyZ2V0KTt9LF9zZWxlY3REYXk6ZnVuY3Rpb24oaWQsbW9udGgseWVhcix0ZCl7dmFyIGluc3QsdGFyZ2V0PSQoaWQpO2lmKCQodGQpLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKXx8dGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIodGFyZ2V0WzBdKSl7cmV0dXJuO30KaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aW5zdC5zZWxlY3RlZERheT1pbnN0LmN1cnJlbnREYXk9JCgiYSIsdGQpLmh0bWwoKTtpbnN0LnNlbGVjdGVkTW9udGg9aW5zdC5jdXJyZW50TW9udGg9bW9udGg7aW5zdC5zZWxlY3RlZFllYXI9aW5zdC5jdXJyZW50WWVhcj15ZWFyO3RoaXMuX3NlbGVjdERhdGUoaWQsdGhpcy5fZm9ybWF0RGF0ZShpbnN0LGluc3QuY3VycmVudERheSxpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnRZZWFyKSk7fSxfY2xlYXJEYXRlOmZ1bmN0aW9uKGlkKXt2YXIgdGFyZ2V0PSQoaWQpO3RoaXMuX3NlbGVjdERhdGUodGFyZ2V0LCIiKTt9LF9zZWxlY3REYXRlOmZ1bmN0aW9uKGlkLGRhdGVTdHIpe3ZhciBvblNlbGVjdCx0YXJnZXQ9JChpZCksaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7ZGF0ZVN0cj0oZGF0ZVN0ciE9bnVsbD9kYXRlU3RyOnRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpO2lmKGluc3QuaW5wdXQpe2luc3QuaW5wdXQudmFsKGRhdGVTdHIpO30KdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO29uU2VsZWN0PXRoaXMuX2dldChpbnN0LCJvblNlbGVjdCIpO2lmKG9uU2VsZWN0KXtvblNlbGVjdC5hcHBseSgoaW5zdC5pbnB1dD9pbnN0LmlucHV0WzBdOm51bGwpLFtkYXRlU3RyLGluc3RdKTt9ZWxzZSBpZihpbnN0LmlucHV0KXtpbnN0LmlucHV0LnRyaWdnZXIoImNoYW5nZSIpO30KaWYoaW5zdC5pbmxpbmUpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7fWVsc2V7dGhpcy5faGlkZURhdGVwaWNrZXIoKTt0aGlzLl9sYXN0SW5wdXQ9aW5zdC5pbnB1dFswXTtpZih0eXBlb2YoaW5zdC5pbnB1dFswXSkhPT0ib2JqZWN0Iil7aW5zdC5pbnB1dC50cmlnZ2VyKCJmb2N1cyIpO30KdGhpcy5fbGFzdElucHV0PW51bGw7fX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbihpbnN0KXt2YXIgYWx0Rm9ybWF0LGRhdGUsZGF0ZVN0cixhbHRGaWVsZD10aGlzLl9nZXQoaW5zdCwiYWx0RmllbGQiKTtpZihhbHRGaWVsZCl7YWx0Rm9ybWF0PXRoaXMuX2dldChpbnN0LCJhbHRGb3JtYXQiKXx8dGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKTtkYXRlPXRoaXMuX2dldERhdGUoaW5zdCk7ZGF0ZVN0cj10aGlzLmZvcm1hdERhdGUoYWx0Rm9ybWF0LGRhdGUsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKTskKGFsdEZpZWxkKS52YWwoZGF0ZVN0cik7fX0sbm9XZWVrZW5kczpmdW5jdGlvbihkYXRlKXt2YXIgZGF5PWRhdGUuZ2V0RGF5KCk7cmV0dXJuWyhkYXk+MCYmZGF5PDYpLCIiXTt9LGlzbzg2MDFXZWVrOmZ1bmN0aW9uKGRhdGUpe3ZhciB0aW1lLGNoZWNrRGF0ZT1uZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7Y2hlY2tEYXRlLnNldERhdGUoY2hlY2tEYXRlLmdldERhdGUoKSs0LShjaGVja0RhdGUuZ2V0RGF5KCl8fDcpKTt0aW1lPWNoZWNrRGF0ZS5nZXRUaW1lKCk7Y2hlY2tEYXRlLnNldE1vbnRoKDApO2NoZWNrRGF0ZS5zZXREYXRlKDEpO3JldHVybiBNYXRoLmZsb29yKE1hdGgucm91bmQoKHRpbWUtY2hlY2tEYXRlKS84NjQwMDAwMCkvNykrMTt9LHBhcnNlRGF0ZTpmdW5jdGlvbihmb3JtYXQsdmFsdWUsc2V0dGluZ3Mpe2lmKGZvcm1hdD09bnVsbHx8dmFsdWU9PW51bGwpe3Rocm93IkludmFsaWQgYXJndW1lbnRzIjt9CnZhbHVlPSh0eXBlb2YgdmFsdWU9PT0ib2JqZWN0Ij92YWx1ZS50b1N0cmluZygpOnZhbHVlKyIiKTtpZih2YWx1ZT09PSIiKXtyZXR1cm4gbnVsbDt9CnZhciBpRm9ybWF0LGRpbSxleHRyYSxpVmFsdWU9MCxzaG9ydFllYXJDdXRvZmZUZW1wPShzZXR0aW5ncz9zZXR0aW5ncy5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZixzaG9ydFllYXJDdXRvZmY9KHR5cGVvZiBzaG9ydFllYXJDdXRvZmZUZW1wIT09InN0cmluZyI/c2hvcnRZZWFyQ3V0b2ZmVGVtcDpuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KHNob3J0WWVhckN1dG9mZlRlbXAsMTApKSxkYXlOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGRheU5hbWVzPShzZXR0aW5ncz9zZXR0aW5ncy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsbW9udGhOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxtb250aE5hbWVzPShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLHllYXI9LTEsbW9udGg9LTEsZGF5PS0xLGRveT0tMSxsaXRlcmFsPWZhbHNlLGRhdGUsbG9va0FoZWFkPWZ1bmN0aW9uKG1hdGNoKXt2YXIgbWF0Y2hlcz0oaUZvcm1hdCsxPGZvcm1hdC5sZW5ndGgmJmZvcm1hdC5jaGFyQXQoaUZvcm1hdCsxKT09PW1hdGNoKTtpZihtYXRjaGVzKXtpRm9ybWF0Kys7fQpyZXR1cm4gbWF0Y2hlczt9LGdldE51bWJlcj1mdW5jdGlvbihtYXRjaCl7dmFyIGlzRG91YmxlZD1sb29rQWhlYWQobWF0Y2gpLHNpemU9KG1hdGNoPT09IkAiPzE0OihtYXRjaD09PSIhIj8yMDoobWF0Y2g9PT0ieSImJmlzRG91YmxlZD80OihtYXRjaD09PSJvIj8zOjIpKSkpLG1pblNpemU9KG1hdGNoPT09InkiP3NpemU6MSksZGlnaXRzPW5ldyBSZWdFeHAoIl5cXGR7IittaW5TaXplKyIsIitzaXplKyJ9IiksbnVtPXZhbHVlLnN1YnN0cmluZyhpVmFsdWUpLm1hdGNoKGRpZ2l0cyk7aWYoIW51bSl7dGhyb3ciTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gIitpVmFsdWU7fQppVmFsdWUrPW51bVswXS5sZW5ndGg7cmV0dXJuIHBhcnNlSW50KG51bVswXSwxMCk7fSxnZXROYW1lPWZ1bmN0aW9uKG1hdGNoLHNob3J0TmFtZXMsbG9uZ05hbWVzKXt2YXIgaW5kZXg9LTEsbmFtZXM9JC5tYXAobG9va0FoZWFkKG1hdGNoKT9sb25nTmFtZXM6c2hvcnROYW1lcyxmdW5jdGlvbih2LGspe3JldHVybltbayx2XV07fSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybi0oYVsxXS5sZW5ndGgtYlsxXS5sZW5ndGgpO30pOyQuZWFjaChuYW1lcyxmdW5jdGlvbihpLHBhaXIpe3ZhciBuYW1lPXBhaXJbMV07aWYodmFsdWUuc3Vic3RyKGlWYWx1ZSxuYW1lLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PW5hbWUudG9Mb3dlckNhc2UoKSl7aW5kZXg9cGFpclswXTtpVmFsdWUrPW5hbWUubGVuZ3RoO3JldHVybiBmYWxzZTt9fSk7aWYoaW5kZXghPT0tMSl7cmV0dXJuIGluZGV4KzE7fWVsc2V7dGhyb3ciVW5rbm93biBuYW1lIGF0IHBvc2l0aW9uICIraVZhbHVlO319LGNoZWNrTGl0ZXJhbD1mdW5jdGlvbigpe2lmKHZhbHVlLmNoYXJBdChpVmFsdWUpIT09Zm9ybWF0LmNoYXJBdChpRm9ybWF0KSl7dGhyb3ciVW5leHBlY3RlZCBsaXRlcmFsIGF0IHBvc2l0aW9uICIraVZhbHVlO30KaVZhbHVlKys7fTtmb3IoaUZvcm1hdD0wO2lGb3JtYXQ8Zm9ybWF0Lmxlbmd0aDtpRm9ybWF0Kyspe2lmKGxpdGVyYWwpe2lmKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk9PT0iJyImJiFsb29rQWhlYWQoIiciKSl7bGl0ZXJhbD1mYWxzZTt9ZWxzZXtjaGVja0xpdGVyYWwoKTt9fWVsc2V7c3dpdGNoKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpe2Nhc2UiZCI6ZGF5PWdldE51bWJlcigiZCIpO2JyZWFrO2Nhc2UiRCI6Z2V0TmFtZSgiRCIsZGF5TmFtZXNTaG9ydCxkYXlOYW1lcyk7YnJlYWs7Y2FzZSJvIjpkb3k9Z2V0TnVtYmVyKCJvIik7YnJlYWs7Y2FzZSJtIjptb250aD1nZXROdW1iZXIoIm0iKTticmVhaztjYXNlIk0iOm1vbnRoPWdldE5hbWUoIk0iLG1vbnRoTmFtZXNTaG9ydCxtb250aE5hbWVzKTticmVhaztjYXNlInkiOnllYXI9Z2V0TnVtYmVyKCJ5Iik7YnJlYWs7Y2FzZSJAIjpkYXRlPW5ldyBEYXRlKGdldE51bWJlcigiQCIpKTt5ZWFyPWRhdGUuZ2V0RnVsbFllYXIoKTttb250aD1kYXRlLmdldE1vbnRoKCkrMTtkYXk9ZGF0ZS5nZXREYXRlKCk7YnJlYWs7Y2FzZSIhIjpkYXRlPW5ldyBEYXRlKChnZXROdW1iZXIoIiEiKS10aGlzLl90aWNrc1RvMTk3MCkvMTAwMDApO3llYXI9ZGF0ZS5nZXRGdWxsWWVhcigpO21vbnRoPWRhdGUuZ2V0TW9udGgoKSsxO2RheT1kYXRlLmdldERhdGUoKTticmVhaztjYXNlIiciOmlmKGxvb2tBaGVhZCgiJyIpKXtjaGVja0xpdGVyYWwoKTt9ZWxzZXtsaXRlcmFsPXRydWU7fQpicmVhaztkZWZhdWx0OmNoZWNrTGl0ZXJhbCgpO319fQppZihpVmFsdWU8dmFsdWUubGVuZ3RoKXtleHRyYT12YWx1ZS5zdWJzdHIoaVZhbHVlKTtpZighL15ccysvLnRlc3QoZXh0cmEpKXt0aHJvdyJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6ICIrZXh0cmE7fX0KaWYoeWVhcj09PS0xKXt5ZWFyPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTt9ZWxzZSBpZih5ZWFyPDEwMCl7eWVhcis9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSUxMDArCih5ZWFyPD1zaG9ydFllYXJDdXRvZmY/MDotMTAwKTt9CmlmKGRveT4tMSl7bW9udGg9MTtkYXk9ZG95O2Rve2RpbT10aGlzLl9nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoLTEpO2lmKGRheTw9ZGltKXticmVhazt9Cm1vbnRoKys7ZGF5LT1kaW07fXdoaWxlKHRydWUpO30KZGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLG1vbnRoLTEsZGF5KSk7aWYoZGF0ZS5nZXRGdWxsWWVhcigpIT09eWVhcnx8ZGF0ZS5nZXRNb250aCgpKzEhPT1tb250aHx8ZGF0ZS5nZXREYXRlKCkhPT1kYXkpe3Rocm93IkludmFsaWQgZGF0ZSI7fQpyZXR1cm4gZGF0ZTt9LEFUT006Inl5LW1tLWRkIixDT09LSUU6IkQsIGRkIE0geXkiLElTT184NjAxOiJ5eS1tbS1kZCIsUkZDXzgyMjoiRCwgZCBNIHkiLFJGQ184NTA6IkRELCBkZC1NLXkiLFJGQ18xMDM2OiJELCBkIE0geSIsUkZDXzExMjM6IkQsIGQgTSB5eSIsUkZDXzI4MjI6IkQsIGQgTSB5eSIsUlNTOiJELCBkIE0geSIsVElDS1M6IiEiLFRJTUVTVEFNUDoiQCIsVzNDOiJ5eS1tbS1kZCIsX3RpY2tzVG8xOTcwOigoKDE5NzAtMSkqMzY1K01hdGguZmxvb3IoMTk3MC80KS1NYXRoLmZsb29yKDE5NzAvMTAwKSsKTWF0aC5mbG9vcigxOTcwLzQwMCkpKjI0KjYwKjYwKjEwMDAwMDAwKSxmb3JtYXREYXRlOmZ1bmN0aW9uKGZvcm1hdCxkYXRlLHNldHRpbmdzKXtpZighZGF0ZSl7cmV0dXJuIiI7fQp2YXIgaUZvcm1hdCxkYXlOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGRheU5hbWVzPShzZXR0aW5ncz9zZXR0aW5ncy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsbW9udGhOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxtb250aE5hbWVzPShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGxvb2tBaGVhZD1mdW5jdGlvbihtYXRjaCl7dmFyIG1hdGNoZXM9KGlGb3JtYXQrMTxmb3JtYXQubGVuZ3RoJiZmb3JtYXQuY2hhckF0KGlGb3JtYXQrMSk9PT1tYXRjaCk7aWYobWF0Y2hlcyl7aUZvcm1hdCsrO30KcmV0dXJuIG1hdGNoZXM7fSxmb3JtYXROdW1iZXI9ZnVuY3Rpb24obWF0Y2gsdmFsdWUsbGVuKXt2YXIgbnVtPSIiK3ZhbHVlO2lmKGxvb2tBaGVhZChtYXRjaCkpe3doaWxlKG51bS5sZW5ndGg8bGVuKXtudW09IjAiK251bTt9fQpyZXR1cm4gbnVtO30sZm9ybWF0TmFtZT1mdW5jdGlvbihtYXRjaCx2YWx1ZSxzaG9ydE5hbWVzLGxvbmdOYW1lcyl7cmV0dXJuKGxvb2tBaGVhZChtYXRjaCk/bG9uZ05hbWVzW3ZhbHVlXTpzaG9ydE5hbWVzW3ZhbHVlXSk7fSxvdXRwdXQ9IiIsbGl0ZXJhbD1mYWxzZTtpZihkYXRlKXtmb3IoaUZvcm1hdD0wO2lGb3JtYXQ8Zm9ybWF0Lmxlbmd0aDtpRm9ybWF0Kyspe2lmKGxpdGVyYWwpe2lmKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk9PT0iJyImJiFsb29rQWhlYWQoIiciKSl7bGl0ZXJhbD1mYWxzZTt9ZWxzZXtvdXRwdXQrPWZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7fX1lbHNle3N3aXRjaChmb3JtYXQuY2hhckF0KGlGb3JtYXQpKXtjYXNlImQiOm91dHB1dCs9Zm9ybWF0TnVtYmVyKCJkIixkYXRlLmdldERhdGUoKSwyKTticmVhaztjYXNlIkQiOm91dHB1dCs9Zm9ybWF0TmFtZSgiRCIsZGF0ZS5nZXREYXkoKSxkYXlOYW1lc1Nob3J0LGRheU5hbWVzKTticmVhaztjYXNlIm8iOm91dHB1dCs9Zm9ybWF0TnVtYmVyKCJvIixNYXRoLnJvdW5kKChuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksZGF0ZS5nZXRNb250aCgpLGRhdGUuZ2V0RGF0ZSgpKS5nZXRUaW1lKCktbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLDAsMCkuZ2V0VGltZSgpKS84NjQwMDAwMCksMyk7YnJlYWs7Y2FzZSJtIjpvdXRwdXQrPWZvcm1hdE51bWJlcigibSIsZGF0ZS5nZXRNb250aCgpKzEsMik7YnJlYWs7Y2FzZSJNIjpvdXRwdXQrPWZvcm1hdE5hbWUoIk0iLGRhdGUuZ2V0TW9udGgoKSxtb250aE5hbWVzU2hvcnQsbW9udGhOYW1lcyk7YnJlYWs7Y2FzZSJ5IjpvdXRwdXQrPShsb29rQWhlYWQoInkiKT9kYXRlLmdldEZ1bGxZZWFyKCk6KGRhdGUuZ2V0RnVsbFllYXIoKSUxMDA8MTA/IjAiOiIiKStkYXRlLmdldEZ1bGxZZWFyKCklMTAwKTticmVhaztjYXNlIkAiOm91dHB1dCs9ZGF0ZS5nZXRUaW1lKCk7YnJlYWs7Y2FzZSIhIjpvdXRwdXQrPWRhdGUuZ2V0VGltZSgpKjEwMDAwK3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2UiJyI6aWYobG9va0FoZWFkKCInIikpe291dHB1dCs9IiciO31lbHNle2xpdGVyYWw9dHJ1ZTt9CmJyZWFrO2RlZmF1bHQ6b3V0cHV0Kz1mb3JtYXQuY2hhckF0KGlGb3JtYXQpO319fX0KcmV0dXJuIG91dHB1dDt9LF9wb3NzaWJsZUNoYXJzOmZ1bmN0aW9uKGZvcm1hdCl7dmFyIGlGb3JtYXQsY2hhcnM9IiIsbGl0ZXJhbD1mYWxzZSxsb29rQWhlYWQ9ZnVuY3Rpb24obWF0Y2gpe3ZhciBtYXRjaGVzPShpRm9ybWF0KzE8Zm9ybWF0Lmxlbmd0aCYmZm9ybWF0LmNoYXJBdChpRm9ybWF0KzEpPT09bWF0Y2gpO2lmKG1hdGNoZXMpe2lGb3JtYXQrKzt9CnJldHVybiBtYXRjaGVzO307Zm9yKGlGb3JtYXQ9MDtpRm9ybWF0PGZvcm1hdC5sZW5ndGg7aUZvcm1hdCsrKXtpZihsaXRlcmFsKXtpZihmb3JtYXQuY2hhckF0KGlGb3JtYXQpPT09IiciJiYhbG9va0FoZWFkKCInIikpe2xpdGVyYWw9ZmFsc2U7fWVsc2V7Y2hhcnMrPWZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7fX1lbHNle3N3aXRjaChmb3JtYXQuY2hhckF0KGlGb3JtYXQpKXtjYXNlImQiOmNhc2UibSI6Y2FzZSJ5IjpjYXNlIkAiOmNoYXJzKz0iMDEyMzQ1Njc4OSI7YnJlYWs7Y2FzZSJEIjpjYXNlIk0iOnJldHVybiBudWxsO2Nhc2UiJyI6aWYobG9va0FoZWFkKCInIikpe2NoYXJzKz0iJyI7fWVsc2V7bGl0ZXJhbD10cnVlO30KYnJlYWs7ZGVmYXVsdDpjaGFycys9Zm9ybWF0LmNoYXJBdChpRm9ybWF0KTt9fX0KcmV0dXJuIGNoYXJzO30sX2dldDpmdW5jdGlvbihpbnN0LG5hbWUpe3JldHVybiBpbnN0LnNldHRpbmdzW25hbWVdIT09dW5kZWZpbmVkP2luc3Quc2V0dGluZ3NbbmFtZV06dGhpcy5fZGVmYXVsdHNbbmFtZV07fSxfc2V0RGF0ZUZyb21GaWVsZDpmdW5jdGlvbihpbnN0LG5vRGVmYXVsdCl7aWYoaW5zdC5pbnB1dC52YWwoKT09PWluc3QubGFzdFZhbCl7cmV0dXJuO30KdmFyIGRhdGVGb3JtYXQ9dGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKSxkYXRlcz1pbnN0Lmxhc3RWYWw9aW5zdC5pbnB1dD9pbnN0LmlucHV0LnZhbCgpOm51bGwsZGVmYXVsdERhdGU9dGhpcy5fZ2V0RGVmYXVsdERhdGUoaW5zdCksZGF0ZT1kZWZhdWx0RGF0ZSxzZXR0aW5ncz10aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCk7dHJ5e2RhdGU9dGhpcy5wYXJzZURhdGUoZGF0ZUZvcm1hdCxkYXRlcyxzZXR0aW5ncyl8fGRlZmF1bHREYXRlO31jYXRjaChldmVudCl7ZGF0ZXM9KG5vRGVmYXVsdD8iIjpkYXRlcyk7fQppbnN0LnNlbGVjdGVkRGF5PWRhdGUuZ2V0RGF0ZSgpO2luc3QuZHJhd01vbnRoPWluc3Quc2VsZWN0ZWRNb250aD1kYXRlLmdldE1vbnRoKCk7aW5zdC5kcmF3WWVhcj1pbnN0LnNlbGVjdGVkWWVhcj1kYXRlLmdldEZ1bGxZZWFyKCk7aW5zdC5jdXJyZW50RGF5PShkYXRlcz9kYXRlLmdldERhdGUoKTowKTtpbnN0LmN1cnJlbnRNb250aD0oZGF0ZXM/ZGF0ZS5nZXRNb250aCgpOjApO2luc3QuY3VycmVudFllYXI9KGRhdGVzP2RhdGUuZ2V0RnVsbFllYXIoKTowKTt0aGlzLl9hZGp1c3RJbnN0RGF0ZShpbnN0KTt9LF9nZXREZWZhdWx0RGF0ZTpmdW5jdGlvbihpbnN0KXtyZXR1cm4gdGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCx0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsdGhpcy5fZ2V0KGluc3QsImRlZmF1bHREYXRlIiksbmV3IERhdGUoKSkpO30sX2RldGVybWluZURhdGU6ZnVuY3Rpb24oaW5zdCxkYXRlLGRlZmF1bHREYXRlKXt2YXIgb2Zmc2V0TnVtZXJpYz1mdW5jdGlvbihvZmZzZXQpe3ZhciBkYXRlPW5ldyBEYXRlKCk7ZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpK29mZnNldCk7cmV0dXJuIGRhdGU7fSxvZmZzZXRTdHJpbmc9ZnVuY3Rpb24ob2Zmc2V0KXt0cnl7cmV0dXJuICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpLG9mZnNldCwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7fQpjYXRjaChlKXt9CnZhciBkYXRlPShvZmZzZXQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKT8kLmRhdGVwaWNrZXIuX2dldERhdGUoaW5zdCk6bnVsbCl8fG5ldyBEYXRlKCkseWVhcj1kYXRlLmdldEZ1bGxZZWFyKCksbW9udGg9ZGF0ZS5nZXRNb250aCgpLGRheT1kYXRlLmdldERhdGUoKSxwYXR0ZXJuPS8oWytcLV0/WzAtOV0rKVxzKihkfER8d3xXfG18TXx5fFkpPy9nLG1hdGNoZXM9cGF0dGVybi5leGVjKG9mZnNldCk7d2hpbGUobWF0Y2hlcyl7c3dpdGNoKG1hdGNoZXNbMl18fCJkIil7Y2FzZSJkIjpjYXNlIkQiOmRheSs9cGFyc2VJbnQobWF0Y2hlc1sxXSwxMCk7YnJlYWs7Y2FzZSJ3IjpjYXNlIlciOmRheSs9cGFyc2VJbnQobWF0Y2hlc1sxXSwxMCkqNzticmVhaztjYXNlIm0iOmNhc2UiTSI6bW9udGgrPXBhcnNlSW50KG1hdGNoZXNbMV0sMTApO2RheT1NYXRoLm1pbihkYXksJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoKSk7YnJlYWs7Y2FzZSJ5IjpjYXNlIlkiOnllYXIrPXBhcnNlSW50KG1hdGNoZXNbMV0sMTApO2RheT1NYXRoLm1pbihkYXksJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoKSk7YnJlYWs7fQptYXRjaGVzPXBhdHRlcm4uZXhlYyhvZmZzZXQpO30KcmV0dXJuIG5ldyBEYXRlKHllYXIsbW9udGgsZGF5KTt9LG5ld0RhdGU9KGRhdGU9PW51bGx8fGRhdGU9PT0iIj9kZWZhdWx0RGF0ZToodHlwZW9mIGRhdGU9PT0ic3RyaW5nIj9vZmZzZXRTdHJpbmcoZGF0ZSk6KHR5cGVvZiBkYXRlPT09Im51bWJlciI/KGlzTmFOKGRhdGUpP2RlZmF1bHREYXRlOm9mZnNldE51bWVyaWMoZGF0ZSkpOm5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKSkpKTtuZXdEYXRlPShuZXdEYXRlJiZuZXdEYXRlLnRvU3RyaW5nKCk9PT0iSW52YWxpZCBEYXRlIj9kZWZhdWx0RGF0ZTpuZXdEYXRlKTtpZihuZXdEYXRlKXtuZXdEYXRlLnNldEhvdXJzKDApO25ld0RhdGUuc2V0TWludXRlcygwKTtuZXdEYXRlLnNldFNlY29uZHMoMCk7bmV3RGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7fQpyZXR1cm4gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3RGF0ZSk7fSxfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6ZnVuY3Rpb24oZGF0ZSl7aWYoIWRhdGUpe3JldHVybiBudWxsO30KZGF0ZS5zZXRIb3VycyhkYXRlLmdldEhvdXJzKCk+MTI/ZGF0ZS5nZXRIb3VycygpKzI6MCk7cmV0dXJuIGRhdGU7fSxfc2V0RGF0ZTpmdW5jdGlvbihpbnN0LGRhdGUsbm9DaGFuZ2Upe3ZhciBjbGVhcj0hZGF0ZSxvcmlnTW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoLG9yaWdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyLG5ld0RhdGU9dGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCx0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsZGF0ZSxuZXcgRGF0ZSgpKSk7aW5zdC5zZWxlY3RlZERheT1pbnN0LmN1cnJlbnREYXk9bmV3RGF0ZS5nZXREYXRlKCk7aW5zdC5kcmF3TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoPWluc3QuY3VycmVudE1vbnRoPW5ld0RhdGUuZ2V0TW9udGgoKTtpbnN0LmRyYXdZZWFyPWluc3Quc2VsZWN0ZWRZZWFyPWluc3QuY3VycmVudFllYXI9bmV3RGF0ZS5nZXRGdWxsWWVhcigpO2lmKChvcmlnTW9udGghPT1pbnN0LnNlbGVjdGVkTW9udGh8fG9yaWdZZWFyIT09aW5zdC5zZWxlY3RlZFllYXIpJiYhbm9DaGFuZ2Upe3RoaXMuX25vdGlmeUNoYW5nZShpbnN0KTt9CnRoaXMuX2FkanVzdEluc3REYXRlKGluc3QpO2lmKGluc3QuaW5wdXQpe2luc3QuaW5wdXQudmFsKGNsZWFyPyIiOnRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpO319LF9nZXREYXRlOmZ1bmN0aW9uKGluc3Qpe3ZhciBzdGFydERhdGU9KCFpbnN0LmN1cnJlbnRZZWFyfHwoaW5zdC5pbnB1dCYmaW5zdC5pbnB1dC52YWwoKT09PSIiKT9udWxsOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGluc3QuY3VycmVudFllYXIsaW5zdC5jdXJyZW50TW9udGgsaW5zdC5jdXJyZW50RGF5KSkpO3JldHVybiBzdGFydERhdGU7fSxfYXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oaW5zdCl7dmFyIHN0ZXBNb250aHM9dGhpcy5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSxpZD0iIyIraW5zdC5pZC5yZXBsYWNlKC9cXFxcL2csIlxcIik7aW5zdC5kcERpdi5maW5kKCJbZGF0YS1oYW5kbGVyXSIpLm1hcChmdW5jdGlvbigpe3ZhciBoYW5kbGVyPXtwcmV2OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGlkLC1zdGVwTW9udGhzLCJNIik7fSxuZXh0OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGlkLCtzdGVwTW9udGhzLCJNIik7fSxoaWRlOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO30sdG9kYXk6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShpZCk7fSxzZWxlY3REYXk6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShpZCwrdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtbW9udGgiKSwrdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEteWVhciIpLHRoaXMpO3JldHVybiBmYWxzZTt9LHNlbGVjdE1vbnRoOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoaWQsdGhpcywiTSIpO3JldHVybiBmYWxzZTt9LHNlbGVjdFllYXI6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihpZCx0aGlzLCJZIik7cmV0dXJuIGZhbHNlO319OyQodGhpcykub24odGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtZXZlbnQiKSxoYW5kbGVyW3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLWhhbmRsZXIiKV0pO30pO30sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbihpbnN0KXt2YXIgbWF4RHJhdyxwcmV2VGV4dCxwcmV2LG5leHRUZXh0LG5leHQsY3VycmVudFRleHQsZ290b0RhdGUsY29udHJvbHMsYnV0dG9uUGFuZWwsZmlyc3REYXksc2hvd1dlZWssZGF5TmFtZXMsZGF5TmFtZXNNaW4sbW9udGhOYW1lcyxtb250aE5hbWVzU2hvcnQsYmVmb3JlU2hvd0RheSxzaG93T3RoZXJNb250aHMsc2VsZWN0T3RoZXJNb250aHMsZGVmYXVsdERhdGUsaHRtbCxkb3cscm93LGdyb3VwLGNvbCxzZWxlY3RlZERhdGUsY29ybmVyQ2xhc3MsY2FsZW5kZXIsdGhlYWQsZGF5LGRheXNJbk1vbnRoLGxlYWREYXlzLGN1clJvd3MsbnVtUm93cyxwcmludERhdGUsZFJvdyx0Ym9keSxkYXlTZXR0aW5ncyxvdGhlck1vbnRoLHVuc2VsZWN0YWJsZSx0ZW1wRGF0ZT1uZXcgRGF0ZSgpLHRvZGF5PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHRlbXBEYXRlLmdldEZ1bGxZZWFyKCksdGVtcERhdGUuZ2V0TW9udGgoKSx0ZW1wRGF0ZS5nZXREYXRlKCkpKSxpc1JUTD10aGlzLl9nZXQoaW5zdCwiaXNSVEwiKSxzaG93QnV0dG9uUGFuZWw9dGhpcy5fZ2V0KGluc3QsInNob3dCdXR0b25QYW5lbCIpLGhpZGVJZk5vUHJldk5leHQ9dGhpcy5fZ2V0KGluc3QsImhpZGVJZk5vUHJldk5leHQiKSxuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0PXRoaXMuX2dldChpbnN0LCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0IiksbnVtTW9udGhzPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGluc3QpLHNob3dDdXJyZW50QXRQb3M9dGhpcy5fZ2V0KGluc3QsInNob3dDdXJyZW50QXRQb3MiKSxzdGVwTW9udGhzPXRoaXMuX2dldChpbnN0LCJzdGVwTW9udGhzIiksaXNNdWx0aU1vbnRoPShudW1Nb250aHNbMF0hPT0xfHxudW1Nb250aHNbMV0hPT0xKSxjdXJyZW50RGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCgoIWluc3QuY3VycmVudERheT9uZXcgRGF0ZSg5OTk5LDksOSk6bmV3IERhdGUoaW5zdC5jdXJyZW50WWVhcixpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnREYXkpKSksbWluRGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1pbiIpLG1heERhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtYXgiKSxkcmF3TW9udGg9aW5zdC5kcmF3TW9udGgtc2hvd0N1cnJlbnRBdFBvcyxkcmF3WWVhcj1pbnN0LmRyYXdZZWFyO2lmKGRyYXdNb250aDwwKXtkcmF3TW9udGgrPTEyO2RyYXdZZWFyLS07fQppZihtYXhEYXRlKXttYXhEcmF3PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKG1heERhdGUuZ2V0RnVsbFllYXIoKSxtYXhEYXRlLmdldE1vbnRoKCktKG51bU1vbnRoc1swXSpudW1Nb250aHNbMV0pKzEsbWF4RGF0ZS5nZXREYXRlKCkpKTttYXhEcmF3PShtaW5EYXRlJiZtYXhEcmF3PG1pbkRhdGU/bWluRGF0ZTptYXhEcmF3KTt3aGlsZSh0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhcixkcmF3TW9udGgsMSkpPm1heERyYXcpe2RyYXdNb250aC0tO2lmKGRyYXdNb250aDwwKXtkcmF3TW9udGg9MTE7ZHJhd1llYXItLTt9fX0KaW5zdC5kcmF3TW9udGg9ZHJhd01vbnRoO2luc3QuZHJhd1llYXI9ZHJhd1llYXI7cHJldlRleHQ9dGhpcy5fZ2V0KGluc3QsInByZXZUZXh0Iik7cHJldlRleHQ9KCFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0P3ByZXZUZXh0OnRoaXMuZm9ybWF0RGF0ZShwcmV2VGV4dCx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhcixkcmF3TW9udGgtc3RlcE1vbnRocywxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7cHJldj0odGhpcy5fY2FuQWRqdXN0TW9udGgoaW5zdCwtMSxkcmF3WWVhcixkcmF3TW9udGgpPyI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIisiIHRpdGxlPSciK3ByZXZUZXh0KyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKGlzUlRMPyJlIjoidyIpKyInPiIrcHJldlRleHQrIjwvc3Bhbj48L2E+IjooaGlkZUlmTm9QcmV2TmV4dD8iIjoiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIitwcmV2VGV4dCsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhpc1JUTD8iZSI6InciKSsiJz4iK3ByZXZUZXh0KyI8L3NwYW4+PC9hPiIpKTtuZXh0VGV4dD10aGlzLl9nZXQoaW5zdCwibmV4dFRleHQiKTtuZXh0VGV4dD0oIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ/bmV4dFRleHQ6dGhpcy5mb3JtYXREYXRlKG5leHRUZXh0LHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aCtzdGVwTW9udGhzLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTtuZXh0PSh0aGlzLl9jYW5BZGp1c3RNb250aChpbnN0LCsxLGRyYXdZZWFyLGRyYXdNb250aCk/IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSduZXh0JyBkYXRhLWV2ZW50PSdjbGljayciKyIgdGl0bGU9JyIrbmV4dFRleHQrIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoaXNSVEw/InciOiJlIikrIic+IituZXh0VGV4dCsiPC9zcGFuPjwvYT4iOihoaWRlSWZOb1ByZXZOZXh0PyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK25leHRUZXh0KyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKGlzUlRMPyJ3IjoiZSIpKyInPiIrbmV4dFRleHQrIjwvc3Bhbj48L2E+IikpO2N1cnJlbnRUZXh0PXRoaXMuX2dldChpbnN0LCJjdXJyZW50VGV4dCIpO2dvdG9EYXRlPSh0aGlzLl9nZXQoaW5zdCwiZ290b0N1cnJlbnQiKSYmaW5zdC5jdXJyZW50RGF5P2N1cnJlbnREYXRlOnRvZGF5KTtjdXJyZW50VGV4dD0oIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ/Y3VycmVudFRleHQ6dGhpcy5mb3JtYXREYXRlKGN1cnJlbnRUZXh0LGdvdG9EYXRlLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpO2NvbnRyb2xzPSghaW5zdC5pbmxpbmU/IjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jbG9zZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXByaW1hcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdoaWRlJyBkYXRhLWV2ZW50PSdjbGljayc+IisKdGhpcy5fZ2V0KGluc3QsImNsb3NlVGV4dCIpKyI8L2J1dHRvbj4iOiIiKTtidXR0b25QYW5lbD0oc2hvd0J1dHRvblBhbmVsKT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz4iKyhpc1JUTD9jb250cm9sczoiIikrCih0aGlzLl9pc0luUmFuZ2UoaW5zdCxnb3RvRGF0ZSk/IjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIj4iK2N1cnJlbnRUZXh0KyI8L2J1dHRvbj4iOiIiKSsoaXNSVEw/IiI6Y29udHJvbHMpKyI8L2Rpdj4iOiIiO2ZpcnN0RGF5PXBhcnNlSW50KHRoaXMuX2dldChpbnN0LCJmaXJzdERheSIpLDEwKTtmaXJzdERheT0oaXNOYU4oZmlyc3REYXkpPzA6Zmlyc3REYXkpO3Nob3dXZWVrPXRoaXMuX2dldChpbnN0LCJzaG93V2VlayIpO2RheU5hbWVzPXRoaXMuX2dldChpbnN0LCJkYXlOYW1lcyIpO2RheU5hbWVzTWluPXRoaXMuX2dldChpbnN0LCJkYXlOYW1lc01pbiIpO21vbnRoTmFtZXM9dGhpcy5fZ2V0KGluc3QsIm1vbnRoTmFtZXMiKTttb250aE5hbWVzU2hvcnQ9dGhpcy5fZ2V0KGluc3QsIm1vbnRoTmFtZXNTaG9ydCIpO2JlZm9yZVNob3dEYXk9dGhpcy5fZ2V0KGluc3QsImJlZm9yZVNob3dEYXkiKTtzaG93T3RoZXJNb250aHM9dGhpcy5fZ2V0KGluc3QsInNob3dPdGhlck1vbnRocyIpO3NlbGVjdE90aGVyTW9udGhzPXRoaXMuX2dldChpbnN0LCJzZWxlY3RPdGhlck1vbnRocyIpO2RlZmF1bHREYXRlPXRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpO2h0bWw9IiI7Zm9yKHJvdz0wO3JvdzxudW1Nb250aHNbMF07cm93Kyspe2dyb3VwPSIiO3RoaXMubWF4Um93cz00O2Zvcihjb2w9MDtjb2w8bnVtTW9udGhzWzFdO2NvbCsrKXtzZWxlY3RlZERhdGU9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsZHJhd01vbnRoLGluc3Quc2VsZWN0ZWREYXkpKTtjb3JuZXJDbGFzcz0iIHVpLWNvcm5lci1hbGwiO2NhbGVuZGVyPSIiO2lmKGlzTXVsdGlNb250aCl7Y2FsZW5kZXIrPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWdyb3VwIjtpZihudW1Nb250aHNbMV0+MSl7c3dpdGNoKGNvbCl7Y2FzZSAwOmNhbGVuZGVyKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3QiO2Nvcm5lckNsYXNzPSIgdWktY29ybmVyLSIrKGlzUlRMPyJyaWdodCI6ImxlZnQiKTticmVhaztjYXNlIG51bU1vbnRoc1sxXS0xOmNhbGVuZGVyKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCI7Y29ybmVyQ2xhc3M9IiB1aS1jb3JuZXItIisoaXNSVEw/ImxlZnQiOiJyaWdodCIpO2JyZWFrO2RlZmF1bHQ6Y2FsZW5kZXIrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUiO2Nvcm5lckNsYXNzPSIiO2JyZWFrO319CmNhbGVuZGVyKz0iJz4iO30KY2FsZW5kZXIrPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWhlYWRlciB1aS13aWRnZXQtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCIrY29ybmVyQ2xhc3MrIic+IisKKC9hbGx8bGVmdC8udGVzdChjb3JuZXJDbGFzcykmJnJvdz09PTA/KGlzUlRMP25leHQ6cHJldik6IiIpKwooL2FsbHxyaWdodC8udGVzdChjb3JuZXJDbGFzcykmJnJvdz09PTA/KGlzUlRMP3ByZXY6bmV4dCk6IiIpKwp0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcihpbnN0LGRyYXdNb250aCxkcmF3WWVhcixtaW5EYXRlLG1heERhdGUscm93PjB8fGNvbD4wLG1vbnRoTmFtZXMsbW9udGhOYW1lc1Nob3J0KSsiPC9kaXY+PHRhYmxlIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNhbGVuZGFyJz48dGhlYWQ+IisiPHRyPiI7dGhlYWQ9KHNob3dXZWVrPyI8dGggY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPiIrdGhpcy5fZ2V0KGluc3QsIndlZWtIZWFkZXIiKSsiPC90aD4iOiIiKTtmb3IoZG93PTA7ZG93PDc7ZG93Kyspe2RheT0oZG93K2ZpcnN0RGF5KSU3O3RoZWFkKz0iPHRoIHNjb3BlPSdjb2wnIisoKGRvdytmaXJzdERheSs2KSU3Pj01PyIgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1lbmQnIjoiIikrIj4iKyI8c3BhbiB0aXRsZT0nIitkYXlOYW1lc1tkYXldKyInPiIrZGF5TmFtZXNNaW5bZGF5XSsiPC9zcGFuPjwvdGg+Ijt9CmNhbGVuZGVyKz10aGVhZCsiPC90cj48L3RoZWFkPjx0Ym9keT4iO2RheXNJbk1vbnRoPXRoaXMuX2dldERheXNJbk1vbnRoKGRyYXdZZWFyLGRyYXdNb250aCk7aWYoZHJhd1llYXI9PT1pbnN0LnNlbGVjdGVkWWVhciYmZHJhd01vbnRoPT09aW5zdC5zZWxlY3RlZE1vbnRoKXtpbnN0LnNlbGVjdGVkRGF5PU1hdGgubWluKGluc3Quc2VsZWN0ZWREYXksZGF5c0luTW9udGgpO30KbGVhZERheXM9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChkcmF3WWVhcixkcmF3TW9udGgpLWZpcnN0RGF5KzcpJTc7Y3VyUm93cz1NYXRoLmNlaWwoKGxlYWREYXlzK2RheXNJbk1vbnRoKS83KTtudW1Sb3dzPShpc011bHRpTW9udGg/dGhpcy5tYXhSb3dzPmN1clJvd3M/dGhpcy5tYXhSb3dzOmN1clJvd3M6Y3VyUm93cyk7dGhpcy5tYXhSb3dzPW51bVJvd3M7cHJpbnREYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aCwxLWxlYWREYXlzKSk7Zm9yKGRSb3c9MDtkUm93PG51bVJvd3M7ZFJvdysrKXtjYWxlbmRlcis9Ijx0cj4iO3Rib2R5PSghc2hvd1dlZWs/IiI6Ijx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+IisKdGhpcy5fZ2V0KGluc3QsImNhbGN1bGF0ZVdlZWsiKShwcmludERhdGUpKyI8L3RkPiIpO2Zvcihkb3c9MDtkb3c8Nztkb3crKyl7ZGF5U2V0dGluZ3M9KGJlZm9yZVNob3dEYXk/YmVmb3JlU2hvd0RheS5hcHBseSgoaW5zdC5pbnB1dD9pbnN0LmlucHV0WzBdOm51bGwpLFtwcmludERhdGVdKTpbdHJ1ZSwiIl0pO290aGVyTW9udGg9KHByaW50RGF0ZS5nZXRNb250aCgpIT09ZHJhd01vbnRoKTt1bnNlbGVjdGFibGU9KG90aGVyTW9udGgmJiFzZWxlY3RPdGhlck1vbnRocyl8fCFkYXlTZXR0aW5nc1swXXx8KG1pbkRhdGUmJnByaW50RGF0ZTxtaW5EYXRlKXx8KG1heERhdGUmJnByaW50RGF0ZT5tYXhEYXRlKTt0Ym9keSs9Ijx0ZCBjbGFzcz0nIisKKChkb3crZmlyc3REYXkrNiklNz49NT8iIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiOiIiKSsKKG90aGVyTW9udGg/IiB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoIjoiIikrCigocHJpbnREYXRlLmdldFRpbWUoKT09PXNlbGVjdGVkRGF0ZS5nZXRUaW1lKCkmJmRyYXdNb250aD09PWluc3Quc2VsZWN0ZWRNb250aCYmaW5zdC5fa2V5RXZlbnQpfHwoZGVmYXVsdERhdGUuZ2V0VGltZSgpPT09cHJpbnREYXRlLmdldFRpbWUoKSYmZGVmYXVsdERhdGUuZ2V0VGltZSgpPT09c2VsZWN0ZWREYXRlLmdldFRpbWUoKSk/IiAiK3RoaXMuX2RheU92ZXJDbGFzczoiIikrCih1bnNlbGVjdGFibGU/IiAiK3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKyIgdWktc3RhdGUtZGlzYWJsZWQiOiIiKSsKKG90aGVyTW9udGgmJiFzaG93T3RoZXJNb250aHM/IiI6IiAiK2RheVNldHRpbmdzWzFdKwoocHJpbnREYXRlLmdldFRpbWUoKT09PWN1cnJlbnREYXRlLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsKKHByaW50RGF0ZS5nZXRUaW1lKCk9PT10b2RheS5nZXRUaW1lKCk/IiB1aS1kYXRlcGlja2VyLXRvZGF5IjoiIikpKyInIisKKCghb3RoZXJNb250aHx8c2hvd090aGVyTW9udGhzKSYmZGF5U2V0dGluZ3NbMl0/IiB0aXRsZT0nIitkYXlTZXR0aW5nc1syXS5yZXBsYWNlKC8nL2csIiYjMzk7IikrIiciOiIiKSsKKHVuc2VsZWN0YWJsZT8iIjoiIGRhdGEtaGFuZGxlcj0nc2VsZWN0RGF5JyBkYXRhLWV2ZW50PSdjbGljaycgZGF0YS1tb250aD0nIitwcmludERhdGUuZ2V0TW9udGgoKSsiJyBkYXRhLXllYXI9JyIrcHJpbnREYXRlLmdldEZ1bGxZZWFyKCkrIiciKSsiPiIrCihvdGhlck1vbnRoJiYhc2hvd090aGVyTW9udGhzPyImI3hhMDsiOih1bnNlbGVjdGFibGU/IjxzcGFuIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0Jz4iK3ByaW50RGF0ZS5nZXREYXRlKCkrIjwvc3Bhbj4iOiI8YSBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCIrCihwcmludERhdGUuZ2V0VGltZSgpPT09dG9kYXkuZ2V0VGltZSgpPyIgdWktc3RhdGUtaGlnaGxpZ2h0IjoiIikrCihwcmludERhdGUuZ2V0VGltZSgpPT09Y3VycmVudERhdGUuZ2V0VGltZSgpPyIgdWktc3RhdGUtYWN0aXZlIjoiIikrCihvdGhlck1vbnRoPyIgdWktcHJpb3JpdHktc2Vjb25kYXJ5IjoiIikrIicgaHJlZj0nIyc+IitwcmludERhdGUuZ2V0RGF0ZSgpKyI8L2E+IikpKyI8L3RkPiI7cHJpbnREYXRlLnNldERhdGUocHJpbnREYXRlLmdldERhdGUoKSsxKTtwcmludERhdGU9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QocHJpbnREYXRlKTt9CmNhbGVuZGVyKz10Ym9keSsiPC90cj4iO30KZHJhd01vbnRoKys7aWYoZHJhd01vbnRoPjExKXtkcmF3TW9udGg9MDtkcmF3WWVhcisrO30KY2FsZW5kZXIrPSI8L3Rib2R5PjwvdGFibGU+IisoaXNNdWx0aU1vbnRoPyI8L2Rpdj4iKwooKG51bU1vbnRoc1swXT4wJiZjb2w9PT1udW1Nb250aHNbMV0tMSk/IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj4iOiIiKToiIik7Z3JvdXArPWNhbGVuZGVyO30KaHRtbCs9Z3JvdXA7fQpodG1sKz1idXR0b25QYW5lbDtpbnN0Ll9rZXlFdmVudD1mYWxzZTtyZXR1cm4gaHRtbDt9LF9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjpmdW5jdGlvbihpbnN0LGRyYXdNb250aCxkcmF3WWVhcixtaW5EYXRlLG1heERhdGUsc2Vjb25kYXJ5LG1vbnRoTmFtZXMsbW9udGhOYW1lc1Nob3J0KXt2YXIgaW5NaW5ZZWFyLGluTWF4WWVhcixtb250aCx5ZWFycyx0aGlzWWVhcixkZXRlcm1pbmVZZWFyLHllYXIsZW5kWWVhcixjaGFuZ2VNb250aD10aGlzLl9nZXQoaW5zdCwiY2hhbmdlTW9udGgiKSxjaGFuZ2VZZWFyPXRoaXMuX2dldChpbnN0LCJjaGFuZ2VZZWFyIiksc2hvd01vbnRoQWZ0ZXJZZWFyPXRoaXMuX2dldChpbnN0LCJzaG93TW9udGhBZnRlclllYXIiKSxodG1sPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXRpdGxlJz4iLG1vbnRoSHRtbD0iIjtpZihzZWNvbmRhcnl8fCFjaGFuZ2VNb250aCl7bW9udGhIdG1sKz0iPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnPiIrbW9udGhOYW1lc1tkcmF3TW9udGhdKyI8L3NwYW4+Ijt9ZWxzZXtpbk1pblllYXI9KG1pbkRhdGUmJm1pbkRhdGUuZ2V0RnVsbFllYXIoKT09PWRyYXdZZWFyKTtpbk1heFllYXI9KG1heERhdGUmJm1heERhdGUuZ2V0RnVsbFllYXIoKT09PWRyYXdZZWFyKTttb250aEh0bWwrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJyBkYXRhLWhhbmRsZXI9J3NlbGVjdE1vbnRoJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7Zm9yKG1vbnRoPTA7bW9udGg8MTI7bW9udGgrKyl7aWYoKCFpbk1pblllYXJ8fG1vbnRoPj1taW5EYXRlLmdldE1vbnRoKCkpJiYoIWluTWF4WWVhcnx8bW9udGg8PW1heERhdGUuZ2V0TW9udGgoKSkpe21vbnRoSHRtbCs9IjxvcHRpb24gdmFsdWU9JyIrbW9udGgrIiciKwoobW9udGg9PT1kcmF3TW9udGg/IiBzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrIj4iK21vbnRoTmFtZXNTaG9ydFttb250aF0rIjwvb3B0aW9uPiI7fX0KbW9udGhIdG1sKz0iPC9zZWxlY3Q+Ijt9CmlmKCFzaG93TW9udGhBZnRlclllYXIpe2h0bWwrPW1vbnRoSHRtbCsoc2Vjb25kYXJ5fHwhKGNoYW5nZU1vbnRoJiZjaGFuZ2VZZWFyKT8iJiN4YTA7IjoiIik7fQppZighaW5zdC55ZWFyc2h0bWwpe2luc3QueWVhcnNodG1sPSIiO2lmKHNlY29uZGFyeXx8IWNoYW5nZVllYXIpe2h0bWwrPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJz4iK2RyYXdZZWFyKyI8L3NwYW4+Ijt9ZWxzZXt5ZWFycz10aGlzLl9nZXQoaW5zdCwieWVhclJhbmdlIikuc3BsaXQoIjoiKTt0aGlzWWVhcj1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7ZGV0ZXJtaW5lWWVhcj1mdW5jdGlvbih2YWx1ZSl7dmFyIHllYXI9KHZhbHVlLm1hdGNoKC9jWytcLV0uKi8pP2RyYXdZZWFyK3BhcnNlSW50KHZhbHVlLnN1YnN0cmluZygxKSwxMCk6KHZhbHVlLm1hdGNoKC9bK1wtXS4qLyk/dGhpc1llYXIrcGFyc2VJbnQodmFsdWUsMTApOnBhcnNlSW50KHZhbHVlLDEwKSkpO3JldHVybihpc05hTih5ZWFyKT90aGlzWWVhcjp5ZWFyKTt9O3llYXI9ZGV0ZXJtaW5lWWVhcih5ZWFyc1swXSk7ZW5kWWVhcj1NYXRoLm1heCh5ZWFyLGRldGVybWluZVllYXIoeWVhcnNbMV18fCIiKSk7eWVhcj0obWluRGF0ZT9NYXRoLm1heCh5ZWFyLG1pbkRhdGUuZ2V0RnVsbFllYXIoKSk6eWVhcik7ZW5kWWVhcj0obWF4RGF0ZT9NYXRoLm1pbihlbmRZZWFyLG1heERhdGUuZ2V0RnVsbFllYXIoKSk6ZW5kWWVhcik7aW5zdC55ZWFyc2h0bWwrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2Zvcig7eWVhcjw9ZW5kWWVhcjt5ZWFyKyspe2luc3QueWVhcnNodG1sKz0iPG9wdGlvbiB2YWx1ZT0nIit5ZWFyKyInIisKKHllYXI9PT1kcmF3WWVhcj8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIreWVhcisiPC9vcHRpb24+Ijt9Cmluc3QueWVhcnNodG1sKz0iPC9zZWxlY3Q+IjtodG1sKz1pbnN0LnllYXJzaHRtbDtpbnN0LnllYXJzaHRtbD1udWxsO319Cmh0bWwrPXRoaXMuX2dldChpbnN0LCJ5ZWFyU3VmZml4Iik7aWYoc2hvd01vbnRoQWZ0ZXJZZWFyKXtodG1sKz0oc2Vjb25kYXJ5fHwhKGNoYW5nZU1vbnRoJiZjaGFuZ2VZZWFyKT8iJiN4YTA7IjoiIikrbW9udGhIdG1sO30KaHRtbCs9IjwvZGl2PiI7cmV0dXJuIGh0bWw7fSxfYWRqdXN0SW5zdERhdGU6ZnVuY3Rpb24oaW5zdCxvZmZzZXQscGVyaW9kKXt2YXIgeWVhcj1pbnN0LnNlbGVjdGVkWWVhcisocGVyaW9kPT09IlkiP29mZnNldDowKSxtb250aD1pbnN0LnNlbGVjdGVkTW9udGgrKHBlcmlvZD09PSJNIj9vZmZzZXQ6MCksZGF5PU1hdGgubWluKGluc3Quc2VsZWN0ZWREYXksdGhpcy5fZ2V0RGF5c0luTW9udGgoeWVhcixtb250aCkpKyhwZXJpb2Q9PT0iRCI/b2Zmc2V0OjApLGRhdGU9dGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLG1vbnRoLGRheSkpKTtpbnN0LnNlbGVjdGVkRGF5PWRhdGUuZ2V0RGF0ZSgpO2luc3QuZHJhd01vbnRoPWluc3Quc2VsZWN0ZWRNb250aD1kYXRlLmdldE1vbnRoKCk7aW5zdC5kcmF3WWVhcj1pbnN0LnNlbGVjdGVkWWVhcj1kYXRlLmdldEZ1bGxZZWFyKCk7aWYocGVyaW9kPT09Ik0ifHxwZXJpb2Q9PT0iWSIpe3RoaXMuX25vdGlmeUNoYW5nZShpbnN0KTt9fSxfcmVzdHJpY3RNaW5NYXg6ZnVuY3Rpb24oaW5zdCxkYXRlKXt2YXIgbWluRGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1pbiIpLG1heERhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtYXgiKSxuZXdEYXRlPShtaW5EYXRlJiZkYXRlPG1pbkRhdGU/bWluRGF0ZTpkYXRlKTtyZXR1cm4obWF4RGF0ZSYmbmV3RGF0ZT5tYXhEYXRlP21heERhdGU6bmV3RGF0ZSk7fSxfbm90aWZ5Q2hhbmdlOmZ1bmN0aW9uKGluc3Qpe3ZhciBvbkNoYW5nZT10aGlzLl9nZXQoaW5zdCwib25DaGFuZ2VNb250aFllYXIiKTtpZihvbkNoYW5nZSl7b25DaGFuZ2UuYXBwbHkoKGluc3QuaW5wdXQ/aW5zdC5pbnB1dFswXTpudWxsKSxbaW5zdC5zZWxlY3RlZFllYXIsaW5zdC5zZWxlY3RlZE1vbnRoKzEsaW5zdF0pO319LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbihpbnN0KXt2YXIgbnVtTW9udGhzPXRoaXMuX2dldChpbnN0LCJudW1iZXJPZk1vbnRocyIpO3JldHVybihudW1Nb250aHM9PW51bGw/WzEsMV06KHR5cGVvZiBudW1Nb250aHM9PT0ibnVtYmVyIj9bMSxudW1Nb250aHNdOm51bU1vbnRocykpO30sX2dldE1pbk1heERhdGU6ZnVuY3Rpb24oaW5zdCxtaW5NYXgpe3JldHVybiB0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsdGhpcy5fZ2V0KGluc3QsbWluTWF4KyJEYXRlIiksbnVsbCk7fSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24oeWVhcixtb250aCl7cmV0dXJuIDMyLXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgsMzIpKS5nZXREYXRlKCk7fSxfZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKHllYXIsbW9udGgpe3JldHVybiBuZXcgRGF0ZSh5ZWFyLG1vbnRoLDEpLmdldERheSgpO30sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKGluc3Qsb2Zmc2V0LGN1clllYXIsY3VyTW9udGgpe3ZhciBudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCksZGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShjdXJZZWFyLGN1ck1vbnRoKyhvZmZzZXQ8MD9vZmZzZXQ6bnVtTW9udGhzWzBdKm51bU1vbnRoc1sxXSksMSkpO2lmKG9mZnNldDwwKXtkYXRlLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoZGF0ZS5nZXRGdWxsWWVhcigpLGRhdGUuZ2V0TW9udGgoKSkpO30KcmV0dXJuIHRoaXMuX2lzSW5SYW5nZShpbnN0LGRhdGUpO30sX2lzSW5SYW5nZTpmdW5jdGlvbihpbnN0LGRhdGUpe3ZhciB5ZWFyU3BsaXQsY3VycmVudFllYXIsbWluRGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1pbiIpLG1heERhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtYXgiKSxtaW5ZZWFyPW51bGwsbWF4WWVhcj1udWxsLHllYXJzPXRoaXMuX2dldChpbnN0LCJ5ZWFyUmFuZ2UiKTtpZih5ZWFycyl7eWVhclNwbGl0PXllYXJzLnNwbGl0KCI6Iik7Y3VycmVudFllYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO21pblllYXI9cGFyc2VJbnQoeWVhclNwbGl0WzBdLDEwKTttYXhZZWFyPXBhcnNlSW50KHllYXJTcGxpdFsxXSwxMCk7aWYoeWVhclNwbGl0WzBdLm1hdGNoKC9bK1wtXS4qLykpe21pblllYXIrPWN1cnJlbnRZZWFyO30KaWYoeWVhclNwbGl0WzFdLm1hdGNoKC9bK1wtXS4qLykpe21heFllYXIrPWN1cnJlbnRZZWFyO319CnJldHVybigoIW1pbkRhdGV8fGRhdGUuZ2V0VGltZSgpPj1taW5EYXRlLmdldFRpbWUoKSkmJighbWF4RGF0ZXx8ZGF0ZS5nZXRUaW1lKCk8PW1heERhdGUuZ2V0VGltZSgpKSYmKCFtaW5ZZWFyfHxkYXRlLmdldEZ1bGxZZWFyKCk+PW1pblllYXIpJiYoIW1heFllYXJ8fGRhdGUuZ2V0RnVsbFllYXIoKTw9bWF4WWVhcikpO30sX2dldEZvcm1hdENvbmZpZzpmdW5jdGlvbihpbnN0KXt2YXIgc2hvcnRZZWFyQ3V0b2ZmPXRoaXMuX2dldChpbnN0LCJzaG9ydFllYXJDdXRvZmYiKTtzaG9ydFllYXJDdXRvZmY9KHR5cGVvZiBzaG9ydFllYXJDdXRvZmYhPT0ic3RyaW5nIj9zaG9ydFllYXJDdXRvZmY6bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChzaG9ydFllYXJDdXRvZmYsMTApKTtyZXR1cm57c2hvcnRZZWFyQ3V0b2ZmOnNob3J0WWVhckN1dG9mZixkYXlOYW1lc1Nob3J0OnRoaXMuX2dldChpbnN0LCJkYXlOYW1lc1Nob3J0IiksZGF5TmFtZXM6dGhpcy5fZ2V0KGluc3QsImRheU5hbWVzIiksbW9udGhOYW1lc1Nob3J0OnRoaXMuX2dldChpbnN0LCJtb250aE5hbWVzU2hvcnQiKSxtb250aE5hbWVzOnRoaXMuX2dldChpbnN0LCJtb250aE5hbWVzIil9O30sX2Zvcm1hdERhdGU6ZnVuY3Rpb24oaW5zdCxkYXksbW9udGgseWVhcil7aWYoIWRheSl7aW5zdC5jdXJyZW50RGF5PWluc3Quc2VsZWN0ZWREYXk7aW5zdC5jdXJyZW50TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoO2luc3QuY3VycmVudFllYXI9aW5zdC5zZWxlY3RlZFllYXI7fQp2YXIgZGF0ZT0oZGF5Pyh0eXBlb2YgZGF5PT09Im9iamVjdCI/ZGF5OnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgsZGF5KSkpOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGluc3QuY3VycmVudFllYXIsaW5zdC5jdXJyZW50TW9udGgsaW5zdC5jdXJyZW50RGF5KSkpO3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKSxkYXRlLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7fX0pO2Z1bmN0aW9uIGRhdGVwaWNrZXJfYmluZEhvdmVyKGRwRGl2KXt2YXIgc2VsZWN0b3I9ImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYSI7cmV0dXJuIGRwRGl2Lm9uKCJtb3VzZW91dCIsc2VsZWN0b3IsZnVuY3Rpb24oKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO2lmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT09LTEpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpO30KaWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIik7fX0pLm9uKCJtb3VzZW92ZXIiLHNlbGVjdG9yLGRhdGVwaWNrZXJfaGFuZGxlTW91c2VvdmVyKTt9CmZ1bmN0aW9uIGRhdGVwaWNrZXJfaGFuZGxlTW91c2VvdmVyKCl7aWYoISQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLmlubGluZT9kYXRlcGlja2VyX2luc3RBY3RpdmUuZHBEaXYucGFyZW50KClbMF06ZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLmlucHV0WzBdKSl7JCh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTskKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO2lmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT09LTEpeyQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpO30KaWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPT0tMSl7JCh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIik7fX19CmZ1bmN0aW9uIGRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKHRhcmdldCxwcm9wcyl7JC5leHRlbmQodGFyZ2V0LHByb3BzKTtmb3IodmFyIG5hbWUgaW4gcHJvcHMpe2lmKHByb3BzW25hbWVdPT1udWxsKXt0YXJnZXRbbmFtZV09cHJvcHNbbmFtZV07fX0KcmV0dXJuIHRhcmdldDt9CiQuZm4uZGF0ZXBpY2tlcj1mdW5jdGlvbihvcHRpb25zKXtpZighdGhpcy5sZW5ndGgpe3JldHVybiB0aGlzO30KaWYoISQuZGF0ZXBpY2tlci5pbml0aWFsaXplZCl7JChkb2N1bWVudCkub24oIm1vdXNlZG93biIsJC5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2spOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD10cnVlO30KaWYoJCgiIyIrJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aD09PTApeyQoImJvZHkiKS5hcHBlbmQoJC5kYXRlcGlja2VyLmRwRGl2KTt9CnZhciBvdGhlckFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHR5cGVvZiBvcHRpb25zPT09InN0cmluZyImJihvcHRpb25zPT09ImlzRGlzYWJsZWQifHxvcHRpb25zPT09ImdldERhdGUifHxvcHRpb25zPT09IndpZGdldCIpKXtyZXR1cm4gJC5kYXRlcGlja2VyWyJfIitvcHRpb25zKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7fQppZihvcHRpb25zPT09Im9wdGlvbiImJmFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgYXJndW1lbnRzWzFdPT09InN0cmluZyIpe3JldHVybiAkLmRhdGVwaWNrZXJbIl8iK29wdGlvbnMrIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChvdGhlckFyZ3MpKTt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciPyQuZGF0ZXBpY2tlclsiXyIrb3B0aW9ucysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc10uY29uY2F0KG90aGVyQXJncykpOiQuZGF0ZXBpY2tlci5fYXR0YWNoRGF0ZXBpY2tlcih0aGlzLG9wdGlvbnMpO30pO307JC5kYXRlcGlja2VyPW5ldyBEYXRlcGlja2VyKCk7JC5kYXRlcGlja2VyLmluaXRpYWxpemVkPWZhbHNlOyQuZGF0ZXBpY2tlci51dWlkPW5ldyBEYXRlKCkuZ2V0VGltZSgpOyQuZGF0ZXBpY2tlci52ZXJzaW9uPSIxLjEyLjEiO3ZhciB3aWRnZXRzRGF0ZXBpY2tlcj0kLmRhdGVwaWNrZXI7JC53aWRnZXQoInVpLnRvb2x0aXAiLHt2ZXJzaW9uOiIxLjEyLjEiLG9wdGlvbnM6e2NsYXNzZXM6eyJ1aS10b29sdGlwIjoidWktY29ybmVyLWFsbCB1aS13aWRnZXQtc2hhZG93In0sY29udGVudDpmdW5jdGlvbigpe3ZhciB0aXRsZT0kKHRoaXMpLmF0dHIoInRpdGxlIil8fCIiO3JldHVybiAkKCI8YT4iKS50ZXh0KHRpdGxlKS5odG1sKCk7fSxoaWRlOnRydWUsaXRlbXM6Ilt0aXRsZV06bm90KFtkaXNhYmxlZF0pIixwb3NpdGlvbjp7bXk6ImxlZnQgdG9wKzE1IixhdDoibGVmdCBib3R0b20iLGNvbGxpc2lvbjoiZmxpcGZpdCBmbGlwIn0sc2hvdzp0cnVlLHRyYWNrOmZhbHNlLGNsb3NlOm51bGwsb3BlbjpudWxsfSxfYWRkRGVzY3JpYmVkQnk6ZnVuY3Rpb24oZWxlbSxpZCl7dmFyIGRlc2NyaWJlZGJ5PShlbGVtLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKXx8IiIpLnNwbGl0KC9ccysvKTtkZXNjcmliZWRieS5wdXNoKGlkKTtlbGVtLmRhdGEoInVpLXRvb2x0aXAtaWQiLGlkKS5hdHRyKCJhcmlhLWRlc2NyaWJlZGJ5IiwkLnRyaW0oZGVzY3JpYmVkYnkuam9pbigiICIpKSk7fSxfcmVtb3ZlRGVzY3JpYmVkQnk6ZnVuY3Rpb24oZWxlbSl7dmFyIGlkPWVsZW0uZGF0YSgidWktdG9vbHRpcC1pZCIpLGRlc2NyaWJlZGJ5PShlbGVtLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKXx8IiIpLnNwbGl0KC9ccysvKSxpbmRleD0kLmluQXJyYXkoaWQsZGVzY3JpYmVkYnkpO2lmKGluZGV4IT09LTEpe2Rlc2NyaWJlZGJ5LnNwbGljZShpbmRleCwxKTt9CmVsZW0ucmVtb3ZlRGF0YSgidWktdG9vbHRpcC1pZCIpO2Rlc2NyaWJlZGJ5PSQudHJpbShkZXNjcmliZWRieS5qb2luKCIgIikpO2lmKGRlc2NyaWJlZGJ5KXtlbGVtLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiLGRlc2NyaWJlZGJ5KTt9ZWxzZXtlbGVtLnJlbW92ZUF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKTt9fSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5fb24oe21vdXNlb3Zlcjoib3BlbiIsZm9jdXNpbjoib3BlbiJ9KTt0aGlzLnRvb2x0aXBzPXt9O3RoaXMucGFyZW50cz17fTt0aGlzLmxpdmVSZWdpb249JCgiPGRpdj4iKS5hdHRyKHtyb2xlOiJsb2ciLCJhcmlhLWxpdmUiOiJhc3NlcnRpdmUiLCJhcmlhLXJlbGV2YW50IjoiYWRkaXRpb25zIn0pLmFwcGVuZFRvKHRoaXMuZG9jdW1lbnRbMF0uYm9keSk7dGhpcy5fYWRkQ2xhc3ModGhpcy5saXZlUmVnaW9uLG51bGwsInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIpO3RoaXMuZGlzYWJsZWRUaXRsZXM9JChbXSk7fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dmFyIHRoYXQ9dGhpczt0aGlzLl9zdXBlcihrZXksdmFsdWUpO2lmKGtleT09PSJjb250ZW50Iil7JC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24oaWQsdG9vbHRpcERhdGEpe3RoYXQuX3VwZGF0ZUNvbnRlbnQodG9vbHRpcERhdGEuZWxlbWVudCk7fSk7fX0sX3NldE9wdGlvbkRpc2FibGVkOmZ1bmN0aW9uKHZhbHVlKXt0aGlzW3ZhbHVlPyJfZGlzYWJsZSI6Il9lbmFibGUiXSgpO30sX2Rpc2FibGU6ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzOyQuZWFjaCh0aGlzLnRvb2x0aXBzLGZ1bmN0aW9uKGlkLHRvb2x0aXBEYXRhKXt2YXIgZXZlbnQ9JC5FdmVudCgiYmx1ciIpO2V2ZW50LnRhcmdldD1ldmVudC5jdXJyZW50VGFyZ2V0PXRvb2x0aXBEYXRhLmVsZW1lbnRbMF07dGhhdC5jbG9zZShldmVudCx0cnVlKTt9KTt0aGlzLmRpc2FibGVkVGl0bGVzPXRoaXMuZGlzYWJsZWRUaXRsZXMuYWRkKHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlbGVtZW50PSQodGhpcyk7aWYoZWxlbWVudC5pcygiW3RpdGxlXSIpKXtyZXR1cm4gZWxlbWVudC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIixlbGVtZW50LmF0dHIoInRpdGxlIikpLnJlbW92ZUF0dHIoInRpdGxlIik7fX0pKTt9LF9lbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkVGl0bGVzLmVhY2goZnVuY3Rpb24oKXt2YXIgZWxlbWVudD0kKHRoaXMpO2lmKGVsZW1lbnQuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKXtlbGVtZW50LmF0dHIoInRpdGxlIixlbGVtZW50LmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSk7fX0pO3RoaXMuZGlzYWJsZWRUaXRsZXM9JChbXSk7fSxvcGVuOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGhhdD10aGlzLHRhcmdldD0kKGV2ZW50P2V2ZW50LnRhcmdldDp0aGlzLmVsZW1lbnQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLml0ZW1zKTtpZighdGFyZ2V0Lmxlbmd0aHx8dGFyZ2V0LmRhdGEoInVpLXRvb2x0aXAtaWQiKSl7cmV0dXJuO30KaWYodGFyZ2V0LmF0dHIoInRpdGxlIikpe3RhcmdldC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIix0YXJnZXQuYXR0cigidGl0bGUiKSk7fQp0YXJnZXQuZGF0YSgidWktdG9vbHRpcC1vcGVuIix0cnVlKTtpZihldmVudCYmZXZlbnQudHlwZT09PSJtb3VzZW92ZXIiKXt0YXJnZXQucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXt2YXIgcGFyZW50PSQodGhpcyksYmx1ckV2ZW50O2lmKHBhcmVudC5kYXRhKCJ1aS10b29sdGlwLW9wZW4iKSl7Ymx1ckV2ZW50PSQuRXZlbnQoImJsdXIiKTtibHVyRXZlbnQudGFyZ2V0PWJsdXJFdmVudC5jdXJyZW50VGFyZ2V0PXRoaXM7dGhhdC5jbG9zZShibHVyRXZlbnQsdHJ1ZSk7fQppZihwYXJlbnQuYXR0cigidGl0bGUiKSl7cGFyZW50LnVuaXF1ZUlkKCk7dGhhdC5wYXJlbnRzW3RoaXMuaWRdPXtlbGVtZW50OnRoaXMsdGl0bGU6cGFyZW50LmF0dHIoInRpdGxlIil9O3BhcmVudC5hdHRyKCJ0aXRsZSIsIiIpO319KTt9CnRoaXMuX3JlZ2lzdGVyQ2xvc2VIYW5kbGVycyhldmVudCx0YXJnZXQpO3RoaXMuX3VwZGF0ZUNvbnRlbnQodGFyZ2V0LGV2ZW50KTt9LF91cGRhdGVDb250ZW50OmZ1bmN0aW9uKHRhcmdldCxldmVudCl7dmFyIGNvbnRlbnQsY29udGVudE9wdGlvbj10aGlzLm9wdGlvbnMuY29udGVudCx0aGF0PXRoaXMsZXZlbnRUeXBlPWV2ZW50P2V2ZW50LnR5cGU6bnVsbDtpZih0eXBlb2YgY29udGVudE9wdGlvbj09PSJzdHJpbmcifHxjb250ZW50T3B0aW9uLm5vZGVUeXBlfHxjb250ZW50T3B0aW9uLmpxdWVyeSl7cmV0dXJuIHRoaXMuX29wZW4oZXZlbnQsdGFyZ2V0LGNvbnRlbnRPcHRpb24pO30KY29udGVudD1jb250ZW50T3B0aW9uLmNhbGwodGFyZ2V0WzBdLGZ1bmN0aW9uKHJlc3BvbnNlKXt0aGF0Ll9kZWxheShmdW5jdGlvbigpe2lmKCF0YXJnZXQuZGF0YSgidWktdG9vbHRpcC1vcGVuIikpe3JldHVybjt9CmlmKGV2ZW50KXtldmVudC50eXBlPWV2ZW50VHlwZTt9CnRoaXMuX29wZW4oZXZlbnQsdGFyZ2V0LHJlc3BvbnNlKTt9KTt9KTtpZihjb250ZW50KXt0aGlzLl9vcGVuKGV2ZW50LHRhcmdldCxjb250ZW50KTt9fSxfb3BlbjpmdW5jdGlvbihldmVudCx0YXJnZXQsY29udGVudCl7dmFyIHRvb2x0aXBEYXRhLHRvb2x0aXAsZGVsYXllZFNob3csYTExeUNvbnRlbnQscG9zaXRpb25PcHRpb249JC5leHRlbmQoe30sdGhpcy5vcHRpb25zLnBvc2l0aW9uKTtpZighY29udGVudCl7cmV0dXJuO30KdG9vbHRpcERhdGE9dGhpcy5fZmluZCh0YXJnZXQpO2lmKHRvb2x0aXBEYXRhKXt0b29sdGlwRGF0YS50b29sdGlwLmZpbmQoIi51aS10b29sdGlwLWNvbnRlbnQiKS5odG1sKGNvbnRlbnQpO3JldHVybjt9CmlmKHRhcmdldC5pcygiW3RpdGxlXSIpKXtpZihldmVudCYmZXZlbnQudHlwZT09PSJtb3VzZW92ZXIiKXt0YXJnZXQuYXR0cigidGl0bGUiLCIiKTt9ZWxzZXt0YXJnZXQucmVtb3ZlQXR0cigidGl0bGUiKTt9fQp0b29sdGlwRGF0YT10aGlzLl90b29sdGlwKHRhcmdldCk7dG9vbHRpcD10b29sdGlwRGF0YS50b29sdGlwO3RoaXMuX2FkZERlc2NyaWJlZEJ5KHRhcmdldCx0b29sdGlwLmF0dHIoImlkIikpO3Rvb2x0aXAuZmluZCgiLnVpLXRvb2x0aXAtY29udGVudCIpLmh0bWwoY29udGVudCk7dGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpO2ExMXlDb250ZW50PSQoIjxkaXY+IikuaHRtbCh0b29sdGlwLmZpbmQoIi51aS10b29sdGlwLWNvbnRlbnQiKS5odG1sKCkpO2ExMXlDb250ZW50LnJlbW92ZUF0dHIoIm5hbWUiKS5maW5kKCJbbmFtZV0iKS5yZW1vdmVBdHRyKCJuYW1lIik7YTExeUNvbnRlbnQucmVtb3ZlQXR0cigiaWQiKS5maW5kKCJbaWRdIikucmVtb3ZlQXR0cigiaWQiKTthMTF5Q29udGVudC5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pO2Z1bmN0aW9uIHBvc2l0aW9uKGV2ZW50KXtwb3NpdGlvbk9wdGlvbi5vZj1ldmVudDtpZih0b29sdGlwLmlzKCI6aGlkZGVuIikpe3JldHVybjt9CnRvb2x0aXAucG9zaXRpb24ocG9zaXRpb25PcHRpb24pO30KaWYodGhpcy5vcHRpb25zLnRyYWNrJiZldmVudCYmL15tb3VzZS8udGVzdChldmVudC50eXBlKSl7dGhpcy5fb24odGhpcy5kb2N1bWVudCx7bW91c2Vtb3ZlOnBvc2l0aW9ufSk7cG9zaXRpb24oZXZlbnQpO31lbHNle3Rvb2x0aXAucG9zaXRpb24oJC5leHRlbmQoe29mOnRhcmdldH0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSk7fQp0b29sdGlwLmhpZGUoKTt0aGlzLl9zaG93KHRvb2x0aXAsdGhpcy5vcHRpb25zLnNob3cpO2lmKHRoaXMub3B0aW9ucy50cmFjayYmdGhpcy5vcHRpb25zLnNob3cmJnRoaXMub3B0aW9ucy5zaG93LmRlbGF5KXtkZWxheWVkU2hvdz10aGlzLmRlbGF5ZWRTaG93PXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYodG9vbHRpcC5pcygiOnZpc2libGUiKSl7cG9zaXRpb24ocG9zaXRpb25PcHRpb24ub2YpO2NsZWFySW50ZXJ2YWwoZGVsYXllZFNob3cpO319LCQuZnguaW50ZXJ2YWwpO30KdGhpcy5fdHJpZ2dlcigib3BlbiIsZXZlbnQse3Rvb2x0aXA6dG9vbHRpcH0pO30sX3JlZ2lzdGVyQ2xvc2VIYW5kbGVyczpmdW5jdGlvbihldmVudCx0YXJnZXQpe3ZhciBldmVudHM9e2tleXVwOmZ1bmN0aW9uKGV2ZW50KXtpZihldmVudC5rZXlDb2RlPT09JC51aS5rZXlDb2RlLkVTQ0FQRSl7dmFyIGZha2VFdmVudD0kLkV2ZW50KGV2ZW50KTtmYWtlRXZlbnQuY3VycmVudFRhcmdldD10YXJnZXRbMF07dGhpcy5jbG9zZShmYWtlRXZlbnQsdHJ1ZSk7fX19O2lmKHRhcmdldFswXSE9PXRoaXMuZWxlbWVudFswXSl7ZXZlbnRzLnJlbW92ZT1mdW5jdGlvbigpe3RoaXMuX3JlbW92ZVRvb2x0aXAodGhpcy5fZmluZCh0YXJnZXQpLnRvb2x0aXApO307fQppZighZXZlbnR8fGV2ZW50LnR5cGU9PT0ibW91c2VvdmVyIil7ZXZlbnRzLm1vdXNlbGVhdmU9ImNsb3NlIjt9CmlmKCFldmVudHx8ZXZlbnQudHlwZT09PSJmb2N1c2luIil7ZXZlbnRzLmZvY3Vzb3V0PSJjbG9zZSI7fQp0aGlzLl9vbih0cnVlLHRhcmdldCxldmVudHMpO30sY2xvc2U6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0b29sdGlwLHRoYXQ9dGhpcyx0YXJnZXQ9JChldmVudD9ldmVudC5jdXJyZW50VGFyZ2V0OnRoaXMuZWxlbWVudCksdG9vbHRpcERhdGE9dGhpcy5fZmluZCh0YXJnZXQpO2lmKCF0b29sdGlwRGF0YSl7dGFyZ2V0LnJlbW92ZURhdGEoInVpLXRvb2x0aXAtb3BlbiIpO3JldHVybjt9CnRvb2x0aXA9dG9vbHRpcERhdGEudG9vbHRpcDtpZih0b29sdGlwRGF0YS5jbG9zaW5nKXtyZXR1cm47fQpjbGVhckludGVydmFsKHRoaXMuZGVsYXllZFNob3cpO2lmKHRhcmdldC5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikmJiF0YXJnZXQuYXR0cigidGl0bGUiKSl7dGFyZ2V0LmF0dHIoInRpdGxlIix0YXJnZXQuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKTt9CnRoaXMuX3JlbW92ZURlc2NyaWJlZEJ5KHRhcmdldCk7dG9vbHRpcERhdGEuaGlkaW5nPXRydWU7dG9vbHRpcC5zdG9wKHRydWUpO3RoaXMuX2hpZGUodG9vbHRpcCx0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe3RoYXQuX3JlbW92ZVRvb2x0aXAoJCh0aGlzKSk7fSk7dGFyZ2V0LnJlbW92ZURhdGEoInVpLXRvb2x0aXAtb3BlbiIpO3RoaXMuX29mZih0YXJnZXQsIm1vdXNlbGVhdmUgZm9jdXNvdXQga2V5dXAiKTtpZih0YXJnZXRbMF0hPT10aGlzLmVsZW1lbnRbMF0pe3RoaXMuX29mZih0YXJnZXQsInJlbW92ZSIpO30KdGhpcy5fb2ZmKHRoaXMuZG9jdW1lbnQsIm1vdXNlbW92ZSIpO2lmKGV2ZW50JiZldmVudC50eXBlPT09Im1vdXNlbGVhdmUiKXskLmVhY2godGhpcy5wYXJlbnRzLGZ1bmN0aW9uKGlkLHBhcmVudCl7JChwYXJlbnQuZWxlbWVudCkuYXR0cigidGl0bGUiLHBhcmVudC50aXRsZSk7ZGVsZXRlIHRoYXQucGFyZW50c1tpZF07fSk7fQp0b29sdGlwRGF0YS5jbG9zaW5nPXRydWU7dGhpcy5fdHJpZ2dlcigiY2xvc2UiLGV2ZW50LHt0b29sdGlwOnRvb2x0aXB9KTtpZighdG9vbHRpcERhdGEuaGlkaW5nKXt0b29sdGlwRGF0YS5jbG9zaW5nPWZhbHNlO319LF90b29sdGlwOmZ1bmN0aW9uKGVsZW1lbnQpe3ZhciB0b29sdGlwPSQoIjxkaXY+IikuYXR0cigicm9sZSIsInRvb2x0aXAiKSxjb250ZW50PSQoIjxkaXY+IikuYXBwZW5kVG8odG9vbHRpcCksaWQ9dG9vbHRpcC51bmlxdWVJZCgpLmF0dHIoImlkIik7dGhpcy5fYWRkQ2xhc3MoY29udGVudCwidWktdG9vbHRpcC1jb250ZW50Iik7dGhpcy5fYWRkQ2xhc3ModG9vbHRpcCwidWktdG9vbHRpcCIsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIpO3Rvb2x0aXAuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oZWxlbWVudCkpO3JldHVybiB0aGlzLnRvb2x0aXBzW2lkXT17ZWxlbWVudDplbGVtZW50LHRvb2x0aXA6dG9vbHRpcH07fSxfZmluZDpmdW5jdGlvbih0YXJnZXQpe3ZhciBpZD10YXJnZXQuZGF0YSgidWktdG9vbHRpcC1pZCIpO3JldHVybiBpZD90aGlzLnRvb2x0aXBzW2lkXTpudWxsO30sX3JlbW92ZVRvb2x0aXA6ZnVuY3Rpb24odG9vbHRpcCl7dG9vbHRpcC5yZW1vdmUoKTtkZWxldGUgdGhpcy50b29sdGlwc1t0b29sdGlwLmF0dHIoImlkIildO30sX2FwcGVuZFRvOmZ1bmN0aW9uKHRhcmdldCl7dmFyIGVsZW1lbnQ9dGFyZ2V0LmNsb3Nlc3QoIi51aS1mcm9udCwgZGlhbG9nIik7aWYoIWVsZW1lbnQubGVuZ3RoKXtlbGVtZW50PXRoaXMuZG9jdW1lbnRbMF0uYm9keTt9CnJldHVybiBlbGVtZW50O30sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzOyQuZWFjaCh0aGlzLnRvb2x0aXBzLGZ1bmN0aW9uKGlkLHRvb2x0aXBEYXRhKXt2YXIgZXZlbnQ9JC5FdmVudCgiYmx1ciIpLGVsZW1lbnQ9dG9vbHRpcERhdGEuZWxlbWVudDtldmVudC50YXJnZXQ9ZXZlbnQuY3VycmVudFRhcmdldD1lbGVtZW50WzBdO3RoYXQuY2xvc2UoZXZlbnQsdHJ1ZSk7JCgiIyIraWQpLnJlbW92ZSgpO2lmKGVsZW1lbnQuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKXtpZighZWxlbWVudC5hdHRyKCJ0aXRsZSIpKXtlbGVtZW50LmF0dHIoInRpdGxlIixlbGVtZW50LmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSk7fQplbGVtZW50LnJlbW92ZURhdGEoInVpLXRvb2x0aXAtdGl0bGUiKTt9fSk7dGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpO319KTtpZigkLnVpQmFja0NvbXBhdCE9PWZhbHNlKXskLndpZGdldCgidWkudG9vbHRpcCIsJC51aS50b29sdGlwLHtvcHRpb25zOnt0b29sdGlwQ2xhc3M6bnVsbH0sX3Rvb2x0aXA6ZnVuY3Rpb24oKXt2YXIgdG9vbHRpcERhdGE9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpO2lmKHRoaXMub3B0aW9ucy50b29sdGlwQ2xhc3Mpe3Rvb2x0aXBEYXRhLnRvb2x0aXAuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRvb2x0aXBDbGFzcyk7fQpyZXR1cm4gdG9vbHRpcERhdGE7fX0pO30KdmFyIHdpZGdldHNUb29sdGlwPSQudWkudG9vbHRpcDt2YXIgZGF0YVNwYWNlPSJ1aS1lZmZlY3RzLSIsZGF0YVNwYWNlU3R5bGU9InVpLWVmZmVjdHMtc3R5bGUiLGRhdGFTcGFjZUFuaW1hdGVkPSJ1aS1lZmZlY3RzLWFuaW1hdGVkIixqUXVlcnk9JDskLmVmZmVjdHM9e2VmZmVjdDp7fX07KGZ1bmN0aW9uKGpRdWVyeSx1bmRlZmluZWQpe3ZhciBzdGVwSG9va3M9ImJhY2tncm91bmRDb2xvciBib3JkZXJCb3R0b21Db2xvciBib3JkZXJMZWZ0Q29sb3IgYm9yZGVyUmlnaHRDb2xvciAiKyJib3JkZXJUb3BDb2xvciBjb2xvciBjb2x1bW5SdWxlQ29sb3Igb3V0bGluZUNvbG9yIHRleHREZWNvcmF0aW9uQ29sb3IgdGV4dEVtcGhhc2lzQ29sb3IiLHJwbHVzZXF1YWxzPS9eKFtcLStdKT1ccyooXGQrXC4/XGQqKS8sc3RyaW5nUGFyc2Vycz1be3JlOi9yZ2JhP1woXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyooPzosXHMqKFxkPyg/OlwuXGQrKT8pXHMqKT9cKS8scGFyc2U6ZnVuY3Rpb24oZXhlY1Jlc3VsdCl7cmV0dXJuW2V4ZWNSZXN1bHRbMV0sZXhlY1Jlc3VsdFsyXSxleGVjUmVzdWx0WzNdLGV4ZWNSZXN1bHRbNF1dO319LHtyZTovcmdiYT9cKFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqKD86LFxzKihcZD8oPzpcLlxkKyk/KVxzKik/XCkvLHBhcnNlOmZ1bmN0aW9uKGV4ZWNSZXN1bHQpe3JldHVybltleGVjUmVzdWx0WzFdKjIuNTUsZXhlY1Jlc3VsdFsyXSoyLjU1LGV4ZWNSZXN1bHRbM10qMi41NSxleGVjUmVzdWx0WzRdXTt9fSx7cmU6LyMoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkvLHBhcnNlOmZ1bmN0aW9uKGV4ZWNSZXN1bHQpe3JldHVybltwYXJzZUludChleGVjUmVzdWx0WzFdLDE2KSxwYXJzZUludChleGVjUmVzdWx0WzJdLDE2KSxwYXJzZUludChleGVjUmVzdWx0WzNdLDE2KV07fX0se3JlOi8jKFthLWYwLTldKShbYS1mMC05XSkoW2EtZjAtOV0pLyxwYXJzZTpmdW5jdGlvbihleGVjUmVzdWx0KXtyZXR1cm5bcGFyc2VJbnQoZXhlY1Jlc3VsdFsxXStleGVjUmVzdWx0WzFdLDE2KSxwYXJzZUludChleGVjUmVzdWx0WzJdK2V4ZWNSZXN1bHRbMl0sMTYpLHBhcnNlSW50KGV4ZWNSZXN1bHRbM10rZXhlY1Jlc3VsdFszXSwxNildO319LHtyZTovaHNsYT9cKFxzKihcZCsoPzpcLlxkKyk/KVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxzcGFjZToiaHNsYSIscGFyc2U6ZnVuY3Rpb24oZXhlY1Jlc3VsdCl7cmV0dXJuW2V4ZWNSZXN1bHRbMV0sZXhlY1Jlc3VsdFsyXS8xMDAsZXhlY1Jlc3VsdFszXS8xMDAsZXhlY1Jlc3VsdFs0XV07fX1dLGNvbG9yPWpRdWVyeS5Db2xvcj1mdW5jdGlvbihjb2xvcixncmVlbixibHVlLGFscGhhKXtyZXR1cm4gbmV3IGpRdWVyeS5Db2xvci5mbi5wYXJzZShjb2xvcixncmVlbixibHVlLGFscGhhKTt9LHNwYWNlcz17cmdiYTp7cHJvcHM6e3JlZDp7aWR4OjAsdHlwZToiYnl0ZSJ9LGdyZWVuOntpZHg6MSx0eXBlOiJieXRlIn0sYmx1ZTp7aWR4OjIsdHlwZToiYnl0ZSJ9fX0saHNsYTp7cHJvcHM6e2h1ZTp7aWR4OjAsdHlwZToiZGVncmVlcyJ9LHNhdHVyYXRpb246e2lkeDoxLHR5cGU6InBlcmNlbnQifSxsaWdodG5lc3M6e2lkeDoyLHR5cGU6InBlcmNlbnQifX19fSxwcm9wVHlwZXM9eyJieXRlIjp7Zmxvb3I6dHJ1ZSxtYXg6MjU1fSwicGVyY2VudCI6e21heDoxfSwiZGVncmVlcyI6e21vZDozNjAsZmxvb3I6dHJ1ZX19LHN1cHBvcnQ9Y29sb3Iuc3VwcG9ydD17fSxzdXBwb3J0RWxlbT1qUXVlcnkoIjxwPiIpWzBdLGNvbG9ycyxlYWNoPWpRdWVyeS5lYWNoO3N1cHBvcnRFbGVtLnN0eWxlLmNzc1RleHQ9ImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSkiO3N1cHBvcnQucmdiYT1zdXBwb3J0RWxlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IuaW5kZXhPZigicmdiYSIpPi0xO2VhY2goc3BhY2VzLGZ1bmN0aW9uKHNwYWNlTmFtZSxzcGFjZSl7c3BhY2UuY2FjaGU9Il8iK3NwYWNlTmFtZTtzcGFjZS5wcm9wcy5hbHBoYT17aWR4OjMsdHlwZToicGVyY2VudCIsZGVmOjF9O30pO2Z1bmN0aW9uIGNsYW1wKHZhbHVlLHByb3AsYWxsb3dFbXB0eSl7dmFyIHR5cGU9cHJvcFR5cGVzW3Byb3AudHlwZV18fHt9O2lmKHZhbHVlPT1udWxsKXtyZXR1cm4oYWxsb3dFbXB0eXx8IXByb3AuZGVmKT9udWxsOnByb3AuZGVmO30KdmFsdWU9dHlwZS5mbG9vcj9+fnZhbHVlOnBhcnNlRmxvYXQodmFsdWUpO2lmKGlzTmFOKHZhbHVlKSl7cmV0dXJuIHByb3AuZGVmO30KaWYodHlwZS5tb2Qpe3JldHVybih2YWx1ZSt0eXBlLm1vZCkldHlwZS5tb2Q7fQpyZXR1cm4gMD52YWx1ZT8wOnR5cGUubWF4PHZhbHVlP3R5cGUubWF4OnZhbHVlO30KZnVuY3Rpb24gc3RyaW5nUGFyc2Uoc3RyaW5nKXt2YXIgaW5zdD1jb2xvcigpLHJnYmE9aW5zdC5fcmdiYT1bXTtzdHJpbmc9c3RyaW5nLnRvTG93ZXJDYXNlKCk7ZWFjaChzdHJpbmdQYXJzZXJzLGZ1bmN0aW9uKGkscGFyc2VyKXt2YXIgcGFyc2VkLG1hdGNoPXBhcnNlci5yZS5leGVjKHN0cmluZyksdmFsdWVzPW1hdGNoJiZwYXJzZXIucGFyc2UobWF0Y2gpLHNwYWNlTmFtZT1wYXJzZXIuc3BhY2V8fCJyZ2JhIjtpZih2YWx1ZXMpe3BhcnNlZD1pbnN0W3NwYWNlTmFtZV0odmFsdWVzKTtpbnN0W3NwYWNlc1tzcGFjZU5hbWVdLmNhY2hlXT1wYXJzZWRbc3BhY2VzW3NwYWNlTmFtZV0uY2FjaGVdO3JnYmE9aW5zdC5fcmdiYT1wYXJzZWQuX3JnYmE7cmV0dXJuIGZhbHNlO319KTtpZihyZ2JhLmxlbmd0aCl7aWYocmdiYS5qb2luKCk9PT0iMCwwLDAsMCIpe2pRdWVyeS5leHRlbmQocmdiYSxjb2xvcnMudHJhbnNwYXJlbnQpO30KcmV0dXJuIGluc3Q7fQpyZXR1cm4gY29sb3JzW3N0cmluZ107fQpjb2xvci5mbj1qUXVlcnkuZXh0ZW5kKGNvbG9yLnByb3RvdHlwZSx7cGFyc2U6ZnVuY3Rpb24ocmVkLGdyZWVuLGJsdWUsYWxwaGEpe2lmKHJlZD09PXVuZGVmaW5lZCl7dGhpcy5fcmdiYT1bbnVsbCxudWxsLG51bGwsbnVsbF07cmV0dXJuIHRoaXM7fQppZihyZWQuanF1ZXJ5fHxyZWQubm9kZVR5cGUpe3JlZD1qUXVlcnkocmVkKS5jc3MoZ3JlZW4pO2dyZWVuPXVuZGVmaW5lZDt9CnZhciBpbnN0PXRoaXMsdHlwZT1qUXVlcnkudHlwZShyZWQpLHJnYmE9dGhpcy5fcmdiYT1bXTtpZihncmVlbiE9PXVuZGVmaW5lZCl7cmVkPVtyZWQsZ3JlZW4sYmx1ZSxhbHBoYV07dHlwZT0iYXJyYXkiO30KaWYodHlwZT09PSJzdHJpbmciKXtyZXR1cm4gdGhpcy5wYXJzZShzdHJpbmdQYXJzZShyZWQpfHxjb2xvcnMuX2RlZmF1bHQpO30KaWYodHlwZT09PSJhcnJheSIpe2VhY2goc3BhY2VzLnJnYmEucHJvcHMsZnVuY3Rpb24oa2V5LHByb3Ape3JnYmFbcHJvcC5pZHhdPWNsYW1wKHJlZFtwcm9wLmlkeF0scHJvcCk7fSk7cmV0dXJuIHRoaXM7fQppZih0eXBlPT09Im9iamVjdCIpe2lmKHJlZCBpbnN0YW5jZW9mIGNvbG9yKXtlYWNoKHNwYWNlcyxmdW5jdGlvbihzcGFjZU5hbWUsc3BhY2Upe2lmKHJlZFtzcGFjZS5jYWNoZV0pe2luc3Rbc3BhY2UuY2FjaGVdPXJlZFtzcGFjZS5jYWNoZV0uc2xpY2UoKTt9fSk7fWVsc2V7ZWFjaChzcGFjZXMsZnVuY3Rpb24oc3BhY2VOYW1lLHNwYWNlKXt2YXIgY2FjaGU9c3BhY2UuY2FjaGU7ZWFjaChzcGFjZS5wcm9wcyxmdW5jdGlvbihrZXkscHJvcCl7aWYoIWluc3RbY2FjaGVdJiZzcGFjZS50byl7aWYoa2V5PT09ImFscGhhInx8cmVkW2tleV09PW51bGwpe3JldHVybjt9Cmluc3RbY2FjaGVdPXNwYWNlLnRvKGluc3QuX3JnYmEpO30KaW5zdFtjYWNoZV1bcHJvcC5pZHhdPWNsYW1wKHJlZFtrZXldLHByb3AsdHJ1ZSk7fSk7aWYoaW5zdFtjYWNoZV0mJmpRdWVyeS5pbkFycmF5KG51bGwsaW5zdFtjYWNoZV0uc2xpY2UoMCwzKSk8MCl7aW5zdFtjYWNoZV1bM109MTtpZihzcGFjZS5mcm9tKXtpbnN0Ll9yZ2JhPXNwYWNlLmZyb20oaW5zdFtjYWNoZV0pO319fSk7fQpyZXR1cm4gdGhpczt9fSxpczpmdW5jdGlvbihjb21wYXJlKXt2YXIgaXM9Y29sb3IoY29tcGFyZSksc2FtZT10cnVlLGluc3Q9dGhpcztlYWNoKHNwYWNlcyxmdW5jdGlvbihfLHNwYWNlKXt2YXIgbG9jYWxDYWNoZSxpc0NhY2hlPWlzW3NwYWNlLmNhY2hlXTtpZihpc0NhY2hlKXtsb2NhbENhY2hlPWluc3Rbc3BhY2UuY2FjaGVdfHxzcGFjZS50byYmc3BhY2UudG8oaW5zdC5fcmdiYSl8fFtdO2VhY2goc3BhY2UucHJvcHMsZnVuY3Rpb24oXyxwcm9wKXtpZihpc0NhY2hlW3Byb3AuaWR4XSE9bnVsbCl7c2FtZT0oaXNDYWNoZVtwcm9wLmlkeF09PT1sb2NhbENhY2hlW3Byb3AuaWR4XSk7cmV0dXJuIHNhbWU7fX0pO30KcmV0dXJuIHNhbWU7fSk7cmV0dXJuIHNhbWU7fSxfc3BhY2U6ZnVuY3Rpb24oKXt2YXIgdXNlZD1bXSxpbnN0PXRoaXM7ZWFjaChzcGFjZXMsZnVuY3Rpb24oc3BhY2VOYW1lLHNwYWNlKXtpZihpbnN0W3NwYWNlLmNhY2hlXSl7dXNlZC5wdXNoKHNwYWNlTmFtZSk7fX0pO3JldHVybiB1c2VkLnBvcCgpO30sdHJhbnNpdGlvbjpmdW5jdGlvbihvdGhlcixkaXN0YW5jZSl7dmFyIGVuZD1jb2xvcihvdGhlciksc3BhY2VOYW1lPWVuZC5fc3BhY2UoKSxzcGFjZT1zcGFjZXNbc3BhY2VOYW1lXSxzdGFydENvbG9yPXRoaXMuYWxwaGEoKT09PTA/Y29sb3IoInRyYW5zcGFyZW50Iik6dGhpcyxzdGFydD1zdGFydENvbG9yW3NwYWNlLmNhY2hlXXx8c3BhY2UudG8oc3RhcnRDb2xvci5fcmdiYSkscmVzdWx0PXN0YXJ0LnNsaWNlKCk7ZW5kPWVuZFtzcGFjZS5jYWNoZV07ZWFjaChzcGFjZS5wcm9wcyxmdW5jdGlvbihrZXkscHJvcCl7dmFyIGluZGV4PXByb3AuaWR4LHN0YXJ0VmFsdWU9c3RhcnRbaW5kZXhdLGVuZFZhbHVlPWVuZFtpbmRleF0sdHlwZT1wcm9wVHlwZXNbcHJvcC50eXBlXXx8e307aWYoZW5kVmFsdWU9PT1udWxsKXtyZXR1cm47fQppZihzdGFydFZhbHVlPT09bnVsbCl7cmVzdWx0W2luZGV4XT1lbmRWYWx1ZTt9ZWxzZXtpZih0eXBlLm1vZCl7aWYoZW5kVmFsdWUtc3RhcnRWYWx1ZT50eXBlLm1vZC8yKXtzdGFydFZhbHVlKz10eXBlLm1vZDt9ZWxzZSBpZihzdGFydFZhbHVlLWVuZFZhbHVlPnR5cGUubW9kLzIpe3N0YXJ0VmFsdWUtPXR5cGUubW9kO319CnJlc3VsdFtpbmRleF09Y2xhbXAoKGVuZFZhbHVlLXN0YXJ0VmFsdWUpKmRpc3RhbmNlK3N0YXJ0VmFsdWUscHJvcCk7fX0pO3JldHVybiB0aGlzW3NwYWNlTmFtZV0ocmVzdWx0KTt9LGJsZW5kOmZ1bmN0aW9uKG9wYXF1ZSl7aWYodGhpcy5fcmdiYVszXT09PTEpe3JldHVybiB0aGlzO30KdmFyIHJnYj10aGlzLl9yZ2JhLnNsaWNlKCksYT1yZ2IucG9wKCksYmxlbmQ9Y29sb3Iob3BhcXVlKS5fcmdiYTtyZXR1cm4gY29sb3IoalF1ZXJ5Lm1hcChyZ2IsZnVuY3Rpb24odixpKXtyZXR1cm4oMS1hKSpibGVuZFtpXSthKnY7fSkpO30sdG9SZ2JhU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHByZWZpeD0icmdiYSgiLHJnYmE9alF1ZXJ5Lm1hcCh0aGlzLl9yZ2JhLGZ1bmN0aW9uKHYsaSl7cmV0dXJuIHY9PW51bGw/KGk+Mj8xOjApOnY7fSk7aWYocmdiYVszXT09PTEpe3JnYmEucG9wKCk7cHJlZml4PSJyZ2IoIjt9CnJldHVybiBwcmVmaXgrcmdiYS5qb2luKCkrIikiO30sdG9Ic2xhU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHByZWZpeD0iaHNsYSgiLGhzbGE9alF1ZXJ5Lm1hcCh0aGlzLmhzbGEoKSxmdW5jdGlvbih2LGkpe2lmKHY9PW51bGwpe3Y9aT4yPzE6MDt9CmlmKGkmJmk8Myl7dj1NYXRoLnJvdW5kKHYqMTAwKSsiJSI7fQpyZXR1cm4gdjt9KTtpZihoc2xhWzNdPT09MSl7aHNsYS5wb3AoKTtwcmVmaXg9ImhzbCgiO30KcmV0dXJuIHByZWZpeCtoc2xhLmpvaW4oKSsiKSI7fSx0b0hleFN0cmluZzpmdW5jdGlvbihpbmNsdWRlQWxwaGEpe3ZhciByZ2JhPXRoaXMuX3JnYmEuc2xpY2UoKSxhbHBoYT1yZ2JhLnBvcCgpO2lmKGluY2x1ZGVBbHBoYSl7cmdiYS5wdXNoKH5+KGFscGhhKjI1NSkpO30KcmV0dXJuIiMiK2pRdWVyeS5tYXAocmdiYSxmdW5jdGlvbih2KXt2PSh2fHwwKS50b1N0cmluZygxNik7cmV0dXJuIHYubGVuZ3RoPT09MT8iMCIrdjp2O30pLmpvaW4oIiIpO30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmdiYVszXT09PTA/InRyYW5zcGFyZW50Ijp0aGlzLnRvUmdiYVN0cmluZygpO319KTtjb2xvci5mbi5wYXJzZS5wcm90b3R5cGU9Y29sb3IuZm47ZnVuY3Rpb24gaHVlMnJnYihwLHEsaCl7aD0oaCsxKSUxO2lmKGgqNjwxKXtyZXR1cm4gcCsocS1wKSpoKjY7fQppZihoKjI8MSl7cmV0dXJuIHE7fQppZihoKjM8Mil7cmV0dXJuIHArKHEtcCkqKCgyLzMpLWgpKjY7fQpyZXR1cm4gcDt9CnNwYWNlcy5oc2xhLnRvPWZ1bmN0aW9uKHJnYmEpe2lmKHJnYmFbMF09PW51bGx8fHJnYmFbMV09PW51bGx8fHJnYmFbMl09PW51bGwpe3JldHVybltudWxsLG51bGwsbnVsbCxyZ2JhWzNdXTt9CnZhciByPXJnYmFbMF0vMjU1LGc9cmdiYVsxXS8yNTUsYj1yZ2JhWzJdLzI1NSxhPXJnYmFbM10sbWF4PU1hdGgubWF4KHIsZyxiKSxtaW49TWF0aC5taW4ocixnLGIpLGRpZmY9bWF4LW1pbixhZGQ9bWF4K21pbixsPWFkZCowLjUsaCxzO2lmKG1pbj09PW1heCl7aD0wO31lbHNlIGlmKHI9PT1tYXgpe2g9KDYwKihnLWIpL2RpZmYpKzM2MDt9ZWxzZSBpZihnPT09bWF4KXtoPSg2MCooYi1yKS9kaWZmKSsxMjA7fWVsc2V7aD0oNjAqKHItZykvZGlmZikrMjQwO30KaWYoZGlmZj09PTApe3M9MDt9ZWxzZSBpZihsPD0wLjUpe3M9ZGlmZi9hZGQ7fWVsc2V7cz1kaWZmLygyLWFkZCk7fQpyZXR1cm5bTWF0aC5yb3VuZChoKSUzNjAscyxsLGE9PW51bGw/MTphXTt9O3NwYWNlcy5oc2xhLmZyb209ZnVuY3Rpb24oaHNsYSl7aWYoaHNsYVswXT09bnVsbHx8aHNsYVsxXT09bnVsbHx8aHNsYVsyXT09bnVsbCl7cmV0dXJuW251bGwsbnVsbCxudWxsLGhzbGFbM11dO30KdmFyIGg9aHNsYVswXS8zNjAscz1oc2xhWzFdLGw9aHNsYVsyXSxhPWhzbGFbM10scT1sPD0wLjU/bCooMStzKTpsK3MtbCpzLHA9MipsLXE7cmV0dXJuW01hdGgucm91bmQoaHVlMnJnYihwLHEsaCsoMS8zKSkqMjU1KSxNYXRoLnJvdW5kKGh1ZTJyZ2IocCxxLGgpKjI1NSksTWF0aC5yb3VuZChodWUycmdiKHAscSxoLSgxLzMpKSoyNTUpLGFdO307ZWFjaChzcGFjZXMsZnVuY3Rpb24oc3BhY2VOYW1lLHNwYWNlKXt2YXIgcHJvcHM9c3BhY2UucHJvcHMsY2FjaGU9c3BhY2UuY2FjaGUsdG89c3BhY2UudG8sZnJvbT1zcGFjZS5mcm9tO2NvbG9yLmZuW3NwYWNlTmFtZV09ZnVuY3Rpb24odmFsdWUpe2lmKHRvJiYhdGhpc1tjYWNoZV0pe3RoaXNbY2FjaGVdPXRvKHRoaXMuX3JnYmEpO30KaWYodmFsdWU9PT11bmRlZmluZWQpe3JldHVybiB0aGlzW2NhY2hlXS5zbGljZSgpO30KdmFyIHJldCx0eXBlPWpRdWVyeS50eXBlKHZhbHVlKSxhcnI9KHR5cGU9PT0iYXJyYXkifHx0eXBlPT09Im9iamVjdCIpP3ZhbHVlOmFyZ3VtZW50cyxsb2NhbD10aGlzW2NhY2hlXS5zbGljZSgpO2VhY2gocHJvcHMsZnVuY3Rpb24oa2V5LHByb3Ape3ZhciB2YWw9YXJyW3R5cGU9PT0ib2JqZWN0Ij9rZXk6cHJvcC5pZHhdO2lmKHZhbD09bnVsbCl7dmFsPWxvY2FsW3Byb3AuaWR4XTt9CmxvY2FsW3Byb3AuaWR4XT1jbGFtcCh2YWwscHJvcCk7fSk7aWYoZnJvbSl7cmV0PWNvbG9yKGZyb20obG9jYWwpKTtyZXRbY2FjaGVdPWxvY2FsO3JldHVybiByZXQ7fWVsc2V7cmV0dXJuIGNvbG9yKGxvY2FsKTt9fTtlYWNoKHByb3BzLGZ1bmN0aW9uKGtleSxwcm9wKXtpZihjb2xvci5mbltrZXldKXtyZXR1cm47fQpjb2xvci5mbltrZXldPWZ1bmN0aW9uKHZhbHVlKXt2YXIgdnR5cGU9alF1ZXJ5LnR5cGUodmFsdWUpLGZuPShrZXk9PT0iYWxwaGEiPyh0aGlzLl9oc2xhPyJoc2xhIjoicmdiYSIpOnNwYWNlTmFtZSksbG9jYWw9dGhpc1tmbl0oKSxjdXI9bG9jYWxbcHJvcC5pZHhdLG1hdGNoO2lmKHZ0eXBlPT09InVuZGVmaW5lZCIpe3JldHVybiBjdXI7fQppZih2dHlwZT09PSJmdW5jdGlvbiIpe3ZhbHVlPXZhbHVlLmNhbGwodGhpcyxjdXIpO3Z0eXBlPWpRdWVyeS50eXBlKHZhbHVlKTt9CmlmKHZhbHVlPT1udWxsJiZwcm9wLmVtcHR5KXtyZXR1cm4gdGhpczt9CmlmKHZ0eXBlPT09InN0cmluZyIpe21hdGNoPXJwbHVzZXF1YWxzLmV4ZWModmFsdWUpO2lmKG1hdGNoKXt2YWx1ZT1jdXIrcGFyc2VGbG9hdChtYXRjaFsyXSkqKG1hdGNoWzFdPT09IisiPzE6LTEpO319CmxvY2FsW3Byb3AuaWR4XT12YWx1ZTtyZXR1cm4gdGhpc1tmbl0obG9jYWwpO307fSk7fSk7Y29sb3IuaG9vaz1mdW5jdGlvbihob29rKXt2YXIgaG9va3M9aG9vay5zcGxpdCgiICIpO2VhY2goaG9va3MsZnVuY3Rpb24oaSxob29rKXtqUXVlcnkuY3NzSG9va3NbaG9va109e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgcGFyc2VkLGN1ckVsZW0sYmFja2dyb3VuZENvbG9yPSIiO2lmKHZhbHVlIT09InRyYW5zcGFyZW50IiYmKGpRdWVyeS50eXBlKHZhbHVlKSE9PSJzdHJpbmcifHwocGFyc2VkPXN0cmluZ1BhcnNlKHZhbHVlKSkpKXt2YWx1ZT1jb2xvcihwYXJzZWR8fHZhbHVlKTtpZighc3VwcG9ydC5yZ2JhJiZ2YWx1ZS5fcmdiYVszXSE9PTEpe2N1ckVsZW09aG9vaz09PSJiYWNrZ3JvdW5kQ29sb3IiP2VsZW0ucGFyZW50Tm9kZTplbGVtO3doaWxlKChiYWNrZ3JvdW5kQ29sb3I9PT0iInx8YmFja2dyb3VuZENvbG9yPT09InRyYW5zcGFyZW50IikmJmN1ckVsZW0mJmN1ckVsZW0uc3R5bGUpe3RyeXtiYWNrZ3JvdW5kQ29sb3I9alF1ZXJ5LmNzcyhjdXJFbGVtLCJiYWNrZ3JvdW5kQ29sb3IiKTtjdXJFbGVtPWN1ckVsZW0ucGFyZW50Tm9kZTt9Y2F0Y2goZSl7fX0KdmFsdWU9dmFsdWUuYmxlbmQoYmFja2dyb3VuZENvbG9yJiZiYWNrZ3JvdW5kQ29sb3IhPT0idHJhbnNwYXJlbnQiP2JhY2tncm91bmRDb2xvcjoiX2RlZmF1bHQiKTt9CnZhbHVlPXZhbHVlLnRvUmdiYVN0cmluZygpO30KdHJ5e2VsZW0uc3R5bGVbaG9va109dmFsdWU7fWNhdGNoKGUpe319fTtqUXVlcnkuZnguc3RlcFtob29rXT1mdW5jdGlvbihmeCl7aWYoIWZ4LmNvbG9ySW5pdCl7Znguc3RhcnQ9Y29sb3IoZnguZWxlbSxob29rKTtmeC5lbmQ9Y29sb3IoZnguZW5kKTtmeC5jb2xvckluaXQ9dHJ1ZTt9CmpRdWVyeS5jc3NIb29rc1tob29rXS5zZXQoZnguZWxlbSxmeC5zdGFydC50cmFuc2l0aW9uKGZ4LmVuZCxmeC5wb3MpKTt9O30pO307Y29sb3IuaG9vayhzdGVwSG9va3MpO2pRdWVyeS5jc3NIb29rcy5ib3JkZXJDb2xvcj17ZXhwYW5kOmZ1bmN0aW9uKHZhbHVlKXt2YXIgZXhwYW5kZWQ9e307ZWFjaChbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGZ1bmN0aW9uKGkscGFydCl7ZXhwYW5kZWRbImJvcmRlciIrcGFydCsiQ29sb3IiXT12YWx1ZTt9KTtyZXR1cm4gZXhwYW5kZWQ7fX07Y29sb3JzPWpRdWVyeS5Db2xvci5uYW1lcz17YXF1YToiIzAwZmZmZiIsYmxhY2s6IiMwMDAwMDAiLGJsdWU6IiMwMDAwZmYiLGZ1Y2hzaWE6IiNmZjAwZmYiLGdyYXk6IiM4MDgwODAiLGdyZWVuOiIjMDA4MDAwIixsaW1lOiIjMDBmZjAwIixtYXJvb246IiM4MDAwMDAiLG5hdnk6IiMwMDAwODAiLG9saXZlOiIjODA4MDAwIixwdXJwbGU6IiM4MDAwODAiLHJlZDoiI2ZmMDAwMCIsc2lsdmVyOiIjYzBjMGMwIix0ZWFsOiIjMDA4MDgwIix3aGl0ZToiI2ZmZmZmZiIseWVsbG93OiIjZmZmZjAwIix0cmFuc3BhcmVudDpbbnVsbCxudWxsLG51bGwsMF0sX2RlZmF1bHQ6IiNmZmZmZmYifTt9KShqUXVlcnkpOyhmdW5jdGlvbigpe3ZhciBjbGFzc0FuaW1hdGlvbkFjdGlvbnM9WyJhZGQiLCJyZW1vdmUiLCJ0b2dnbGUiXSxzaG9ydGhhbmRTdHlsZXM9e2JvcmRlcjoxLGJvcmRlckJvdHRvbToxLGJvcmRlckNvbG9yOjEsYm9yZGVyTGVmdDoxLGJvcmRlclJpZ2h0OjEsYm9yZGVyVG9wOjEsYm9yZGVyV2lkdGg6MSxtYXJnaW46MSxwYWRkaW5nOjF9OyQuZWFjaChbImJvcmRlckxlZnRTdHlsZSIsImJvcmRlclJpZ2h0U3R5bGUiLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlclRvcFN0eWxlIl0sZnVuY3Rpb24oXyxwcm9wKXskLmZ4LnN0ZXBbcHJvcF09ZnVuY3Rpb24oZngpe2lmKGZ4LmVuZCE9PSJub25lIiYmIWZ4LnNldEF0dHJ8fGZ4LnBvcz09PTEmJiFmeC5zZXRBdHRyKXtqUXVlcnkuc3R5bGUoZnguZWxlbSxwcm9wLGZ4LmVuZCk7Znguc2V0QXR0cj10cnVlO319O30pO2Z1bmN0aW9uIGdldEVsZW1lbnRTdHlsZXMoZWxlbSl7dmFyIGtleSxsZW4sc3R5bGU9ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3P2VsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sbnVsbCk6ZWxlbS5jdXJyZW50U3R5bGUsc3R5bGVzPXt9O2lmKHN0eWxlJiZzdHlsZS5sZW5ndGgmJnN0eWxlWzBdJiZzdHlsZVtzdHlsZVswXV0pe2xlbj1zdHlsZS5sZW5ndGg7d2hpbGUobGVuLS0pe2tleT1zdHlsZVtsZW5dO2lmKHR5cGVvZiBzdHlsZVtrZXldPT09InN0cmluZyIpe3N0eWxlc1skLmNhbWVsQ2FzZShrZXkpXT1zdHlsZVtrZXldO319fWVsc2V7Zm9yKGtleSBpbiBzdHlsZSl7aWYodHlwZW9mIHN0eWxlW2tleV09PT0ic3RyaW5nIil7c3R5bGVzW2tleV09c3R5bGVba2V5XTt9fX0KcmV0dXJuIHN0eWxlczt9CmZ1bmN0aW9uIHN0eWxlRGlmZmVyZW5jZShvbGRTdHlsZSxuZXdTdHlsZSl7dmFyIGRpZmY9e30sbmFtZSx2YWx1ZTtmb3IobmFtZSBpbiBuZXdTdHlsZSl7dmFsdWU9bmV3U3R5bGVbbmFtZV07aWYob2xkU3R5bGVbbmFtZV0hPT12YWx1ZSl7aWYoIXNob3J0aGFuZFN0eWxlc1tuYW1lXSl7aWYoJC5meC5zdGVwW25hbWVdfHwhaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpKXtkaWZmW25hbWVdPXZhbHVlO319fX0KcmV0dXJuIGRpZmY7fQppZighJC5mbi5hZGRCYWNrKXskLmZuLmFkZEJhY2s9ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiB0aGlzLmFkZChzZWxlY3Rvcj09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3RvcikpO307fQokLmVmZmVjdHMuYW5pbWF0ZUNsYXNzPWZ1bmN0aW9uKHZhbHVlLGR1cmF0aW9uLGVhc2luZyxjYWxsYmFjayl7dmFyIG89JC5zcGVlZChkdXJhdGlvbixlYXNpbmcsY2FsbGJhY2spO3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGFuaW1hdGVkPSQodGhpcyksYmFzZUNsYXNzPWFuaW1hdGVkLmF0dHIoImNsYXNzIil8fCIiLGFwcGx5Q2xhc3NDaGFuZ2UsYWxsQW5pbWF0aW9ucz1vLmNoaWxkcmVuP2FuaW1hdGVkLmZpbmQoIioiKS5hZGRCYWNrKCk6YW5pbWF0ZWQ7YWxsQW5pbWF0aW9ucz1hbGxBbmltYXRpb25zLm1hcChmdW5jdGlvbigpe3ZhciBlbD0kKHRoaXMpO3JldHVybntlbDplbCxzdGFydDpnZXRFbGVtZW50U3R5bGVzKHRoaXMpfTt9KTthcHBseUNsYXNzQ2hhbmdlPWZ1bmN0aW9uKCl7JC5lYWNoKGNsYXNzQW5pbWF0aW9uQWN0aW9ucyxmdW5jdGlvbihpLGFjdGlvbil7aWYodmFsdWVbYWN0aW9uXSl7YW5pbWF0ZWRbYWN0aW9uKyJDbGFzcyJdKHZhbHVlW2FjdGlvbl0pO319KTt9O2FwcGx5Q2xhc3NDaGFuZ2UoKTthbGxBbmltYXRpb25zPWFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCl7dGhpcy5lbmQ9Z2V0RWxlbWVudFN0eWxlcyh0aGlzLmVsWzBdKTt0aGlzLmRpZmY9c3R5bGVEaWZmZXJlbmNlKHRoaXMuc3RhcnQsdGhpcy5lbmQpO3JldHVybiB0aGlzO30pO2FuaW1hdGVkLmF0dHIoImNsYXNzIixiYXNlQ2xhc3MpO2FsbEFuaW1hdGlvbnM9YWxsQW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24oKXt2YXIgc3R5bGVJbmZvPXRoaXMsZGZkPSQuRGVmZXJyZWQoKSxvcHRzPSQuZXh0ZW5kKHt9LG8se3F1ZXVlOmZhbHNlLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZGZkLnJlc29sdmUoc3R5bGVJbmZvKTt9fSk7dGhpcy5lbC5hbmltYXRlKHRoaXMuZGlmZixvcHRzKTtyZXR1cm4gZGZkLnByb21pc2UoKTt9KTskLndoZW4uYXBwbHkoJCxhbGxBbmltYXRpb25zLmdldCgpKS5kb25lKGZ1bmN0aW9uKCl7YXBwbHlDbGFzc0NoYW5nZSgpOyQuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oKXt2YXIgZWw9dGhpcy5lbDskLmVhY2godGhpcy5kaWZmLGZ1bmN0aW9uKGtleSl7ZWwuY3NzKGtleSwiIik7fSk7fSk7by5jb21wbGV0ZS5jYWxsKGFuaW1hdGVkWzBdKTt9KTt9KTt9OyQuZm4uZXh0ZW5kKHthZGRDbGFzczooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKGNsYXNzTmFtZXMsc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtyZXR1cm4gc3BlZWQ/JC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse2FkZDpjbGFzc05hbWVzfSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spOm9yaWcuYXBwbHkodGhpcyxhcmd1bWVudHMpO307fSkoJC5mbi5hZGRDbGFzcykscmVtb3ZlQ2xhc3M6KGZ1bmN0aW9uKG9yaWcpe3JldHVybiBmdW5jdGlvbihjbGFzc05hbWVzLHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MT8kLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7cmVtb3ZlOmNsYXNzTmFtZXN9LHNwZWVkLGVhc2luZyxjYWxsYmFjayk6b3JpZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTt9KSgkLmZuLnJlbW92ZUNsYXNzKSx0b2dnbGVDbGFzczooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKGNsYXNzTmFtZXMsZm9yY2Usc3BlZWQsZWFzaW5nLGNhbGxiYWNrKXtpZih0eXBlb2YgZm9yY2U9PT0iYm9vbGVhbiJ8fGZvcmNlPT09dW5kZWZpbmVkKXtpZighc3BlZWQpe3JldHVybiBvcmlnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXtyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsKGZvcmNlP3thZGQ6Y2xhc3NOYW1lc306e3JlbW92ZTpjbGFzc05hbWVzfSksc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9fWVsc2V7cmV0dXJuICQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHt0b2dnbGU6Y2xhc3NOYW1lc30sZm9yY2Usc3BlZWQsZWFzaW5nKTt9fTt9KSgkLmZuLnRvZ2dsZUNsYXNzKSxzd2l0Y2hDbGFzczpmdW5jdGlvbihyZW1vdmUsYWRkLHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuICQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6YWRkLHJlbW92ZTpyZW1vdmV9LHNwZWVkLGVhc2luZyxjYWxsYmFjayk7fX0pO30pKCk7KGZ1bmN0aW9uKCl7aWYoJC5leHByJiYkLmV4cHIuZmlsdGVycyYmJC5leHByLmZpbHRlcnMuYW5pbWF0ZWQpeyQuZXhwci5maWx0ZXJzLmFuaW1hdGVkPShmdW5jdGlvbihvcmlnKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuISEkKGVsZW0pLmRhdGEoZGF0YVNwYWNlQW5pbWF0ZWQpfHxvcmlnKGVsZW0pO307fSkoJC5leHByLmZpbHRlcnMuYW5pbWF0ZWQpO30KaWYoJC51aUJhY2tDb21wYXQhPT1mYWxzZSl7JC5leHRlbmQoJC5lZmZlY3RzLHtzYXZlOmZ1bmN0aW9uKGVsZW1lbnQsc2V0KXt2YXIgaT0wLGxlbmd0aD1zZXQubGVuZ3RoO2Zvcig7aTxsZW5ndGg7aSsrKXtpZihzZXRbaV0hPT1udWxsKXtlbGVtZW50LmRhdGEoZGF0YVNwYWNlK3NldFtpXSxlbGVtZW50WzBdLnN0eWxlW3NldFtpXV0pO319fSxyZXN0b3JlOmZ1bmN0aW9uKGVsZW1lbnQsc2V0KXt2YXIgdmFsLGk9MCxsZW5ndGg9c2V0Lmxlbmd0aDtmb3IoO2k8bGVuZ3RoO2krKyl7aWYoc2V0W2ldIT09bnVsbCl7dmFsPWVsZW1lbnQuZGF0YShkYXRhU3BhY2Urc2V0W2ldKTtlbGVtZW50LmNzcyhzZXRbaV0sdmFsKTt9fX0sc2V0TW9kZTpmdW5jdGlvbihlbCxtb2RlKXtpZihtb2RlPT09InRvZ2dsZSIpe21vZGU9ZWwuaXMoIjpoaWRkZW4iKT8ic2hvdyI6ImhpZGUiO30KcmV0dXJuIG1vZGU7fSxjcmVhdGVXcmFwcGVyOmZ1bmN0aW9uKGVsZW1lbnQpe2lmKGVsZW1lbnQucGFyZW50KCkuaXMoIi51aS1lZmZlY3RzLXdyYXBwZXIiKSl7cmV0dXJuIGVsZW1lbnQucGFyZW50KCk7fQp2YXIgcHJvcHM9e3dpZHRoOmVsZW1lbnQub3V0ZXJXaWR0aCh0cnVlKSxoZWlnaHQ6ZWxlbWVudC5vdXRlckhlaWdodCh0cnVlKSwiZmxvYXQiOmVsZW1lbnQuY3NzKCJmbG9hdCIpfSx3cmFwcGVyPSQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoInVpLWVmZmVjdHMtd3JhcHBlciIpLmNzcyh7Zm9udFNpemU6IjEwMCUiLGJhY2tncm91bmQ6InRyYW5zcGFyZW50Iixib3JkZXI6Im5vbmUiLG1hcmdpbjowLHBhZGRpbmc6MH0pLHNpemU9e3dpZHRoOmVsZW1lbnQud2lkdGgoKSxoZWlnaHQ6ZWxlbWVudC5oZWlnaHQoKX0sYWN0aXZlPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7dHJ5e2FjdGl2ZS5pZDt9Y2F0Y2goZSl7YWN0aXZlPWRvY3VtZW50LmJvZHk7fQplbGVtZW50LndyYXAod3JhcHBlcik7aWYoZWxlbWVudFswXT09PWFjdGl2ZXx8JC5jb250YWlucyhlbGVtZW50WzBdLGFjdGl2ZSkpeyQoYWN0aXZlKS50cmlnZ2VyKCJmb2N1cyIpO30Kd3JhcHBlcj1lbGVtZW50LnBhcmVudCgpO2lmKGVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpPT09InN0YXRpYyIpe3dyYXBwZXIuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUifSk7ZWxlbWVudC5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9KTt9ZWxzZXskLmV4dGVuZChwcm9wcyx7cG9zaXRpb246ZWxlbWVudC5jc3MoInBvc2l0aW9uIiksekluZGV4OmVsZW1lbnQuY3NzKCJ6LWluZGV4Iil9KTskLmVhY2goWyJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwicmlnaHQiXSxmdW5jdGlvbihpLHBvcyl7cHJvcHNbcG9zXT1lbGVtZW50LmNzcyhwb3MpO2lmKGlzTmFOKHBhcnNlSW50KHByb3BzW3Bvc10sMTApKSl7cHJvcHNbcG9zXT0iYXV0byI7fX0pO2VsZW1lbnQuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLHRvcDowLGxlZnQ6MCxyaWdodDoiYXV0byIsYm90dG9tOiJhdXRvIn0pO30KZWxlbWVudC5jc3Moc2l6ZSk7cmV0dXJuIHdyYXBwZXIuY3NzKHByb3BzKS5zaG93KCk7fSxyZW1vdmVXcmFwcGVyOmZ1bmN0aW9uKGVsZW1lbnQpe3ZhciBhY3RpdmU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihlbGVtZW50LnBhcmVudCgpLmlzKCIudWktZWZmZWN0cy13cmFwcGVyIikpe2VsZW1lbnQucGFyZW50KCkucmVwbGFjZVdpdGgoZWxlbWVudCk7aWYoZWxlbWVudFswXT09PWFjdGl2ZXx8JC5jb250YWlucyhlbGVtZW50WzBdLGFjdGl2ZSkpeyQoYWN0aXZlKS50cmlnZ2VyKCJmb2N1cyIpO319CnJldHVybiBlbGVtZW50O319KTt9CiQuZXh0ZW5kKCQuZWZmZWN0cyx7dmVyc2lvbjoiMS4xMi4xIixkZWZpbmU6ZnVuY3Rpb24obmFtZSxtb2RlLGVmZmVjdCl7aWYoIWVmZmVjdCl7ZWZmZWN0PW1vZGU7bW9kZT0iZWZmZWN0Ijt9CiQuZWZmZWN0cy5lZmZlY3RbbmFtZV09ZWZmZWN0OyQuZWZmZWN0cy5lZmZlY3RbbmFtZV0ubW9kZT1tb2RlO3JldHVybiBlZmZlY3Q7fSxzY2FsZWREaW1lbnNpb25zOmZ1bmN0aW9uKGVsZW1lbnQscGVyY2VudCxkaXJlY3Rpb24pe2lmKHBlcmNlbnQ9PT0wKXtyZXR1cm57aGVpZ2h0OjAsd2lkdGg6MCxvdXRlckhlaWdodDowLG91dGVyV2lkdGg6MH07fQp2YXIgeD1kaXJlY3Rpb24hPT0iaG9yaXpvbnRhbCI/KChwZXJjZW50fHwxMDApLzEwMCk6MSx5PWRpcmVjdGlvbiE9PSJ2ZXJ0aWNhbCI/KChwZXJjZW50fHwxMDApLzEwMCk6MTtyZXR1cm57aGVpZ2h0OmVsZW1lbnQuaGVpZ2h0KCkqeSx3aWR0aDplbGVtZW50LndpZHRoKCkqeCxvdXRlckhlaWdodDplbGVtZW50Lm91dGVySGVpZ2h0KCkqeSxvdXRlcldpZHRoOmVsZW1lbnQub3V0ZXJXaWR0aCgpKnh9O30sY2xpcFRvQm94OmZ1bmN0aW9uKGFuaW1hdGlvbil7cmV0dXJue3dpZHRoOmFuaW1hdGlvbi5jbGlwLnJpZ2h0LWFuaW1hdGlvbi5jbGlwLmxlZnQsaGVpZ2h0OmFuaW1hdGlvbi5jbGlwLmJvdHRvbS1hbmltYXRpb24uY2xpcC50b3AsbGVmdDphbmltYXRpb24uY2xpcC5sZWZ0LHRvcDphbmltYXRpb24uY2xpcC50b3B9O30sdW5zaGlmdDpmdW5jdGlvbihlbGVtZW50LHF1ZXVlTGVuZ3RoLGNvdW50KXt2YXIgcXVldWU9ZWxlbWVudC5xdWV1ZSgpO2lmKHF1ZXVlTGVuZ3RoPjEpe3F1ZXVlLnNwbGljZS5hcHBseShxdWV1ZSxbMSwwXS5jb25jYXQocXVldWUuc3BsaWNlKHF1ZXVlTGVuZ3RoLGNvdW50KSkpO30KZWxlbWVudC5kZXF1ZXVlKCk7fSxzYXZlU3R5bGU6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudC5kYXRhKGRhdGFTcGFjZVN0eWxlLGVsZW1lbnRbMF0uc3R5bGUuY3NzVGV4dCk7fSxyZXN0b3JlU3R5bGU6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudFswXS5zdHlsZS5jc3NUZXh0PWVsZW1lbnQuZGF0YShkYXRhU3BhY2VTdHlsZSl8fCIiO2VsZW1lbnQucmVtb3ZlRGF0YShkYXRhU3BhY2VTdHlsZSk7fSxtb2RlOmZ1bmN0aW9uKGVsZW1lbnQsbW9kZSl7dmFyIGhpZGRlbj1lbGVtZW50LmlzKCI6aGlkZGVuIik7aWYobW9kZT09PSJ0b2dnbGUiKXttb2RlPWhpZGRlbj8ic2hvdyI6ImhpZGUiO30KaWYoaGlkZGVuP21vZGU9PT0iaGlkZSI6bW9kZT09PSJzaG93Iil7bW9kZT0ibm9uZSI7fQpyZXR1cm4gbW9kZTt9LGdldEJhc2VsaW5lOmZ1bmN0aW9uKG9yaWdpbixvcmlnaW5hbCl7dmFyIHkseDtzd2l0Y2gob3JpZ2luWzBdKXtjYXNlInRvcCI6eT0wO2JyZWFrO2Nhc2UibWlkZGxlIjp5PTAuNTticmVhaztjYXNlImJvdHRvbSI6eT0xO2JyZWFrO2RlZmF1bHQ6eT1vcmlnaW5bMF0vb3JpZ2luYWwuaGVpZ2h0O30Kc3dpdGNoKG9yaWdpblsxXSl7Y2FzZSJsZWZ0Ijp4PTA7YnJlYWs7Y2FzZSJjZW50ZXIiOng9MC41O2JyZWFrO2Nhc2UicmlnaHQiOng9MTticmVhaztkZWZhdWx0Ong9b3JpZ2luWzFdL29yaWdpbmFsLndpZHRoO30KcmV0dXJue3g6eCx5Onl9O30sY3JlYXRlUGxhY2Vob2xkZXI6ZnVuY3Rpb24oZWxlbWVudCl7dmFyIHBsYWNlaG9sZGVyLGNzc1Bvc2l0aW9uPWVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpLHBvc2l0aW9uPWVsZW1lbnQucG9zaXRpb24oKTtlbGVtZW50LmNzcyh7bWFyZ2luVG9wOmVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSxtYXJnaW5Cb3R0b206ZWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpLG1hcmdpbkxlZnQ6ZWxlbWVudC5jc3MoIm1hcmdpbkxlZnQiKSxtYXJnaW5SaWdodDplbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKX0pLm91dGVyV2lkdGgoZWxlbWVudC5vdXRlcldpZHRoKCkpLm91dGVySGVpZ2h0KGVsZW1lbnQub3V0ZXJIZWlnaHQoKSk7aWYoL14oc3RhdGljfHJlbGF0aXZlKS8udGVzdChjc3NQb3NpdGlvbikpe2Nzc1Bvc2l0aW9uPSJhYnNvbHV0ZSI7cGxhY2Vob2xkZXI9JCgiPCIrZWxlbWVudFswXS5ub2RlTmFtZSsiPiIpLmluc2VydEFmdGVyKGVsZW1lbnQpLmNzcyh7ZGlzcGxheTovXihpbmxpbmV8cnVieSkvLnRlc3QoZWxlbWVudC5jc3MoImRpc3BsYXkiKSk/ImlubGluZS1ibG9jayI6ImJsb2NrIix2aXNpYmlsaXR5OiJoaWRkZW4iLG1hcmdpblRvcDplbGVtZW50LmNzcygibWFyZ2luVG9wIiksbWFyZ2luQm90dG9tOmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSxtYXJnaW5MZWZ0OmVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksbWFyZ2luUmlnaHQ6ZWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksImZsb2F0IjplbGVtZW50LmNzcygiZmxvYXQiKX0pLm91dGVyV2lkdGgoZWxlbWVudC5vdXRlcldpZHRoKCkpLm91dGVySGVpZ2h0KGVsZW1lbnQub3V0ZXJIZWlnaHQoKSkuYWRkQ2xhc3MoInVpLWVmZmVjdHMtcGxhY2Vob2xkZXIiKTtlbGVtZW50LmRhdGEoZGF0YVNwYWNlKyJwbGFjZWhvbGRlciIscGxhY2Vob2xkZXIpO30KZWxlbWVudC5jc3Moe3Bvc2l0aW9uOmNzc1Bvc2l0aW9uLGxlZnQ6cG9zaXRpb24ubGVmdCx0b3A6cG9zaXRpb24udG9wfSk7cmV0dXJuIHBsYWNlaG9sZGVyO30scmVtb3ZlUGxhY2Vob2xkZXI6ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGRhdGFLZXk9ZGF0YVNwYWNlKyJwbGFjZWhvbGRlciIscGxhY2Vob2xkZXI9ZWxlbWVudC5kYXRhKGRhdGFLZXkpO2lmKHBsYWNlaG9sZGVyKXtwbGFjZWhvbGRlci5yZW1vdmUoKTtlbGVtZW50LnJlbW92ZURhdGEoZGF0YUtleSk7fX0sY2xlYW5VcDpmdW5jdGlvbihlbGVtZW50KXskLmVmZmVjdHMucmVzdG9yZVN0eWxlKGVsZW1lbnQpOyQuZWZmZWN0cy5yZW1vdmVQbGFjZWhvbGRlcihlbGVtZW50KTt9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZWxlbWVudCxsaXN0LGZhY3Rvcix2YWx1ZSl7dmFsdWU9dmFsdWV8fHt9OyQuZWFjaChsaXN0LGZ1bmN0aW9uKGkseCl7dmFyIHVuaXQ9ZWxlbWVudC5jc3NVbml0KHgpO2lmKHVuaXRbMF0+MCl7dmFsdWVbeF09dW5pdFswXSpmYWN0b3IrdW5pdFsxXTt9fSk7cmV0dXJuIHZhbHVlO319KTtmdW5jdGlvbiBfbm9ybWFsaXplQXJndW1lbnRzKGVmZmVjdCxvcHRpb25zLHNwZWVkLGNhbGxiYWNrKXtpZigkLmlzUGxhaW5PYmplY3QoZWZmZWN0KSl7b3B0aW9ucz1lZmZlY3Q7ZWZmZWN0PWVmZmVjdC5lZmZlY3Q7fQplZmZlY3Q9e2VmZmVjdDplZmZlY3R9O2lmKG9wdGlvbnM9PW51bGwpe29wdGlvbnM9e307fQppZigkLmlzRnVuY3Rpb24ob3B0aW9ucykpe2NhbGxiYWNrPW9wdGlvbnM7c3BlZWQ9bnVsbDtvcHRpb25zPXt9O30KaWYodHlwZW9mIG9wdGlvbnM9PT0ibnVtYmVyInx8JC5meC5zcGVlZHNbb3B0aW9uc10pe2NhbGxiYWNrPXNwZWVkO3NwZWVkPW9wdGlvbnM7b3B0aW9ucz17fTt9CmlmKCQuaXNGdW5jdGlvbihzcGVlZCkpe2NhbGxiYWNrPXNwZWVkO3NwZWVkPW51bGw7fQppZihvcHRpb25zKXskLmV4dGVuZChlZmZlY3Qsb3B0aW9ucyk7fQpzcGVlZD1zcGVlZHx8b3B0aW9ucy5kdXJhdGlvbjtlZmZlY3QuZHVyYXRpb249JC5meC5vZmY/MDp0eXBlb2Ygc3BlZWQ9PT0ibnVtYmVyIj9zcGVlZDpzcGVlZCBpbiAkLmZ4LnNwZWVkcz8kLmZ4LnNwZWVkc1tzcGVlZF06JC5meC5zcGVlZHMuX2RlZmF1bHQ7ZWZmZWN0LmNvbXBsZXRlPWNhbGxiYWNrfHxvcHRpb25zLmNvbXBsZXRlO3JldHVybiBlZmZlY3Q7fQpmdW5jdGlvbiBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbihvcHRpb24pe2lmKCFvcHRpb258fHR5cGVvZiBvcHRpb249PT0ibnVtYmVyInx8JC5meC5zcGVlZHNbb3B0aW9uXSl7cmV0dXJuIHRydWU7fQppZih0eXBlb2Ygb3B0aW9uPT09InN0cmluZyImJiEkLmVmZmVjdHMuZWZmZWN0W29wdGlvbl0pe3JldHVybiB0cnVlO30KaWYoJC5pc0Z1bmN0aW9uKG9wdGlvbikpe3JldHVybiB0cnVlO30KaWYodHlwZW9mIG9wdGlvbj09PSJvYmplY3QiJiYhb3B0aW9uLmVmZmVjdCl7cmV0dXJuIHRydWU7fQpyZXR1cm4gZmFsc2U7fQokLmZuLmV4dGVuZCh7ZWZmZWN0OmZ1bmN0aW9uKCl7dmFyIGFyZ3M9X25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSh0aGlzLGFyZ3VtZW50cyksZWZmZWN0TWV0aG9kPSQuZWZmZWN0cy5lZmZlY3RbYXJncy5lZmZlY3RdLGRlZmF1bHRNb2RlPWVmZmVjdE1ldGhvZC5tb2RlLHF1ZXVlPWFyZ3MucXVldWUscXVldWVOYW1lPXF1ZXVlfHwiZngiLGNvbXBsZXRlPWFyZ3MuY29tcGxldGUsbW9kZT1hcmdzLm1vZGUsbW9kZXM9W10scHJlZmlsdGVyPWZ1bmN0aW9uKG5leHQpe3ZhciBlbD0kKHRoaXMpLG5vcm1hbGl6ZWRNb2RlPSQuZWZmZWN0cy5tb2RlKGVsLG1vZGUpfHxkZWZhdWx0TW9kZTtlbC5kYXRhKGRhdGFTcGFjZUFuaW1hdGVkLHRydWUpO21vZGVzLnB1c2gobm9ybWFsaXplZE1vZGUpO2lmKGRlZmF1bHRNb2RlJiYobm9ybWFsaXplZE1vZGU9PT0ic2hvdyJ8fChub3JtYWxpemVkTW9kZT09PWRlZmF1bHRNb2RlJiZub3JtYWxpemVkTW9kZT09PSJoaWRlIikpKXtlbC5zaG93KCk7fQppZighZGVmYXVsdE1vZGV8fG5vcm1hbGl6ZWRNb2RlIT09Im5vbmUiKXskLmVmZmVjdHMuc2F2ZVN0eWxlKGVsKTt9CmlmKCQuaXNGdW5jdGlvbihuZXh0KSl7bmV4dCgpO319O2lmKCQuZngub2ZmfHwhZWZmZWN0TWV0aG9kKXtpZihtb2RlKXtyZXR1cm4gdGhpc1ttb2RlXShhcmdzLmR1cmF0aW9uLGNvbXBsZXRlKTt9ZWxzZXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoY29tcGxldGUpe2NvbXBsZXRlLmNhbGwodGhpcyk7fX0pO319CmZ1bmN0aW9uIHJ1bihuZXh0KXt2YXIgZWxlbT0kKHRoaXMpO2Z1bmN0aW9uIGNsZWFudXAoKXtlbGVtLnJlbW92ZURhdGEoZGF0YVNwYWNlQW5pbWF0ZWQpOyQuZWZmZWN0cy5jbGVhblVwKGVsZW0pO2lmKGFyZ3MubW9kZT09PSJoaWRlIil7ZWxlbS5oaWRlKCk7fQpkb25lKCk7fQpmdW5jdGlvbiBkb25lKCl7aWYoJC5pc0Z1bmN0aW9uKGNvbXBsZXRlKSl7Y29tcGxldGUuY2FsbChlbGVtWzBdKTt9CmlmKCQuaXNGdW5jdGlvbihuZXh0KSl7bmV4dCgpO319CmFyZ3MubW9kZT1tb2Rlcy5zaGlmdCgpO2lmKCQudWlCYWNrQ29tcGF0IT09ZmFsc2UmJiFkZWZhdWx0TW9kZSl7aWYoZWxlbS5pcygiOmhpZGRlbiIpP21vZGU9PT0iaGlkZSI6bW9kZT09PSJzaG93Iil7ZWxlbVttb2RlXSgpO2RvbmUoKTt9ZWxzZXtlZmZlY3RNZXRob2QuY2FsbChlbGVtWzBdLGFyZ3MsZG9uZSk7fX1lbHNle2lmKGFyZ3MubW9kZT09PSJub25lIil7ZWxlbVttb2RlXSgpO2RvbmUoKTt9ZWxzZXtlZmZlY3RNZXRob2QuY2FsbChlbGVtWzBdLGFyZ3MsY2xlYW51cCk7fX19CnJldHVybiBxdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChwcmVmaWx0ZXIpLmVhY2gocnVuKTp0aGlzLnF1ZXVlKHF1ZXVlTmFtZSxwcmVmaWx0ZXIpLnF1ZXVlKHF1ZXVlTmFtZSxydW4pO30sc2hvdzooZnVuY3Rpb24ob3JpZyl7cmV0dXJuIGZ1bmN0aW9uKG9wdGlvbil7aWYoc3RhbmRhcmRBbmltYXRpb25PcHRpb24ob3B0aW9uKSl7cmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmd1bWVudHMpO31lbHNle3ZhciBhcmdzPV9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2FyZ3MubW9kZT0ic2hvdyI7cmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwodGhpcyxhcmdzKTt9fTt9KSgkLmZuLnNob3cpLGhpZGU6KGZ1bmN0aW9uKG9yaWcpe3JldHVybiBmdW5jdGlvbihvcHRpb24pe2lmKHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKG9wdGlvbikpe3JldHVybiBvcmlnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXt2YXIgYXJncz1fbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmdzLm1vZGU9ImhpZGUiO3JldHVybiB0aGlzLmVmZmVjdC5jYWxsKHRoaXMsYXJncyk7fX07fSkoJC5mbi5oaWRlKSx0b2dnbGU6KGZ1bmN0aW9uKG9yaWcpe3JldHVybiBmdW5jdGlvbihvcHRpb24pe2lmKHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKG9wdGlvbil8fHR5cGVvZiBvcHRpb249PT0iYm9vbGVhbiIpe3JldHVybiBvcmlnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXt2YXIgYXJncz1fbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmdzLm1vZGU9InRvZ2dsZSI7cmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwodGhpcyxhcmdzKTt9fTt9KSgkLmZuLnRvZ2dsZSksY3NzVW5pdDpmdW5jdGlvbihrZXkpe3ZhciBzdHlsZT10aGlzLmNzcyhrZXkpLHZhbD1bXTskLmVhY2goWyJlbSIsInB4IiwiJSIsInB0Il0sZnVuY3Rpb24oaSx1bml0KXtpZihzdHlsZS5pbmRleE9mKHVuaXQpPjApe3ZhbD1bcGFyc2VGbG9hdChzdHlsZSksdW5pdF07fX0pO3JldHVybiB2YWw7fSxjc3NDbGlwOmZ1bmN0aW9uKGNsaXBPYmope2lmKGNsaXBPYmope3JldHVybiB0aGlzLmNzcygiY2xpcCIsInJlY3QoIitjbGlwT2JqLnRvcCsicHggIitjbGlwT2JqLnJpZ2h0KyJweCAiKwpjbGlwT2JqLmJvdHRvbSsicHggIitjbGlwT2JqLmxlZnQrInB4KSIpO30KcmV0dXJuIHBhcnNlQ2xpcCh0aGlzLmNzcygiY2xpcCIpLHRoaXMpO30sdHJhbnNmZXI6ZnVuY3Rpb24ob3B0aW9ucyxkb25lKXt2YXIgZWxlbWVudD0kKHRoaXMpLHRhcmdldD0kKG9wdGlvbnMudG8pLHRhcmdldEZpeGVkPXRhcmdldC5jc3MoInBvc2l0aW9uIik9PT0iZml4ZWQiLGJvZHk9JCgiYm9keSIpLGZpeFRvcD10YXJnZXRGaXhlZD9ib2R5LnNjcm9sbFRvcCgpOjAsZml4TGVmdD10YXJnZXRGaXhlZD9ib2R5LnNjcm9sbExlZnQoKTowLGVuZFBvc2l0aW9uPXRhcmdldC5vZmZzZXQoKSxhbmltYXRpb249e3RvcDplbmRQb3NpdGlvbi50b3AtZml4VG9wLGxlZnQ6ZW5kUG9zaXRpb24ubGVmdC1maXhMZWZ0LGhlaWdodDp0YXJnZXQuaW5uZXJIZWlnaHQoKSx3aWR0aDp0YXJnZXQuaW5uZXJXaWR0aCgpfSxzdGFydFBvc2l0aW9uPWVsZW1lbnQub2Zmc2V0KCksdHJhbnNmZXI9JCgiPGRpdiBjbGFzcz0ndWktZWZmZWN0cy10cmFuc2Zlcic+PC9kaXY+IikuYXBwZW5kVG8oImJvZHkiKS5hZGRDbGFzcyhvcHRpb25zLmNsYXNzTmFtZSkuY3NzKHt0b3A6c3RhcnRQb3NpdGlvbi50b3AtZml4VG9wLGxlZnQ6c3RhcnRQb3NpdGlvbi5sZWZ0LWZpeExlZnQsaGVpZ2h0OmVsZW1lbnQuaW5uZXJIZWlnaHQoKSx3aWR0aDplbGVtZW50LmlubmVyV2lkdGgoKSxwb3NpdGlvbjp0YXJnZXRGaXhlZD8iZml4ZWQiOiJhYnNvbHV0ZSJ9KS5hbmltYXRlKGFuaW1hdGlvbixvcHRpb25zLmR1cmF0aW9uLG9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7dHJhbnNmZXIucmVtb3ZlKCk7aWYoJC5pc0Z1bmN0aW9uKGRvbmUpKXtkb25lKCk7fX0pO319KTtmdW5jdGlvbiBwYXJzZUNsaXAoc3RyLGVsZW1lbnQpe3ZhciBvdXRlcldpZHRoPWVsZW1lbnQub3V0ZXJXaWR0aCgpLG91dGVySGVpZ2h0PWVsZW1lbnQub3V0ZXJIZWlnaHQoKSxjbGlwUmVnZXg9L15yZWN0XCgoLT9cZCpcLj9cZCpweHwtP1xkKyV8YXV0byksP1xzKigtP1xkKlwuP1xkKnB4fC0/XGQrJXxhdXRvKSw/XHMqKC0/XGQqXC4/XGQqcHh8LT9cZCslfGF1dG8pLD9ccyooLT9cZCpcLj9cZCpweHwtP1xkKyV8YXV0bylcKSQvLHZhbHVlcz1jbGlwUmVnZXguZXhlYyhzdHIpfHxbIiIsMCxvdXRlcldpZHRoLG91dGVySGVpZ2h0LDBdO3JldHVybnt0b3A6cGFyc2VGbG9hdCh2YWx1ZXNbMV0pfHwwLHJpZ2h0OnZhbHVlc1syXT09PSJhdXRvIj9vdXRlcldpZHRoOnBhcnNlRmxvYXQodmFsdWVzWzJdKSxib3R0b206dmFsdWVzWzNdPT09ImF1dG8iP291dGVySGVpZ2h0OnBhcnNlRmxvYXQodmFsdWVzWzNdKSxsZWZ0OnBhcnNlRmxvYXQodmFsdWVzWzRdKXx8MH07fQokLmZ4LnN0ZXAuY2xpcD1mdW5jdGlvbihmeCl7aWYoIWZ4LmNsaXBJbml0KXtmeC5zdGFydD0kKGZ4LmVsZW0pLmNzc0NsaXAoKTtpZih0eXBlb2YgZnguZW5kPT09InN0cmluZyIpe2Z4LmVuZD1wYXJzZUNsaXAoZnguZW5kLGZ4LmVsZW0pO30KZnguY2xpcEluaXQ9dHJ1ZTt9CiQoZnguZWxlbSkuY3NzQ2xpcCh7dG9wOmZ4LnBvcyooZnguZW5kLnRvcC1meC5zdGFydC50b3ApK2Z4LnN0YXJ0LnRvcCxyaWdodDpmeC5wb3MqKGZ4LmVuZC5yaWdodC1meC5zdGFydC5yaWdodCkrZnguc3RhcnQucmlnaHQsYm90dG9tOmZ4LnBvcyooZnguZW5kLmJvdHRvbS1meC5zdGFydC5ib3R0b20pK2Z4LnN0YXJ0LmJvdHRvbSxsZWZ0OmZ4LnBvcyooZnguZW5kLmxlZnQtZnguc3RhcnQubGVmdCkrZnguc3RhcnQubGVmdH0pO307fSkoKTsoZnVuY3Rpb24oKXt2YXIgYmFzZUVhc2luZ3M9e307JC5lYWNoKFsiUXVhZCIsIkN1YmljIiwiUXVhcnQiLCJRdWludCIsIkV4cG8iXSxmdW5jdGlvbihpLG5hbWUpe2Jhc2VFYXNpbmdzW25hbWVdPWZ1bmN0aW9uKHApe3JldHVybiBNYXRoLnBvdyhwLGkrMik7fTt9KTskLmV4dGVuZChiYXNlRWFzaW5ncyx7U2luZTpmdW5jdGlvbihwKXtyZXR1cm4gMS1NYXRoLmNvcyhwKk1hdGguUEkvMik7fSxDaXJjOmZ1bmN0aW9uKHApe3JldHVybiAxLU1hdGguc3FydCgxLXAqcCk7fSxFbGFzdGljOmZ1bmN0aW9uKHApe3JldHVybiBwPT09MHx8cD09PTE/cDotTWF0aC5wb3coMiw4KihwLTEpKSpNYXRoLnNpbigoKHAtMSkqODAtNy41KSpNYXRoLlBJLzE1KTt9LEJhY2s6ZnVuY3Rpb24ocCl7cmV0dXJuIHAqcCooMypwLTIpO30sQm91bmNlOmZ1bmN0aW9uKHApe3ZhciBwb3cyLGJvdW5jZT00O3doaWxlKHA8KChwb3cyPU1hdGgucG93KDIsLS1ib3VuY2UpKS0xKS8xMSl7fQpyZXR1cm4gMS9NYXRoLnBvdyg0LDMtYm91bmNlKS03LjU2MjUqTWF0aC5wb3coKHBvdzIqMy0yKS8yMi1wLDIpO319KTskLmVhY2goYmFzZUVhc2luZ3MsZnVuY3Rpb24obmFtZSxlYXNlSW4peyQuZWFzaW5nWyJlYXNlSW4iK25hbWVdPWVhc2VJbjskLmVhc2luZ1siZWFzZU91dCIrbmFtZV09ZnVuY3Rpb24ocCl7cmV0dXJuIDEtZWFzZUluKDEtcCk7fTskLmVhc2luZ1siZWFzZUluT3V0IituYW1lXT1mdW5jdGlvbihwKXtyZXR1cm4gcDwwLjU/ZWFzZUluKHAqMikvMjoxLWVhc2VJbihwKi0yKzIpLzI7fTt9KTt9KSgpO3ZhciBlZmZlY3Q9JC5lZmZlY3RzO3ZhciBlZmZlY3RzRWZmZWN0Qm91bmNlPSQuZWZmZWN0cy5kZWZpbmUoImJvdW5jZSIsZnVuY3Rpb24ob3B0aW9ucyxkb25lKXt2YXIgdXBBbmltLGRvd25BbmltLHJlZlZhbHVlLGVsZW1lbnQ9JCh0aGlzKSxtb2RlPW9wdGlvbnMubW9kZSxoaWRlPW1vZGU9PT0iaGlkZSIsc2hvdz1tb2RlPT09InNob3ciLGRpcmVjdGlvbj1vcHRpb25zLmRpcmVjdGlvbnx8InVwIixkaXN0YW5jZT1vcHRpb25zLmRpc3RhbmNlLHRpbWVzPW9wdGlvbnMudGltZXN8fDUsYW5pbXM9dGltZXMqMisoc2hvd3x8aGlkZT8xOjApLHNwZWVkPW9wdGlvbnMuZHVyYXRpb24vYW5pbXMsZWFzaW5nPW9wdGlvbnMuZWFzaW5nLHJlZj0oZGlyZWN0aW9uPT09InVwInx8ZGlyZWN0aW9uPT09ImRvd24iKT8idG9wIjoibGVmdCIsbW90aW9uPShkaXJlY3Rpb249PT0idXAifHxkaXJlY3Rpb249PT0ibGVmdCIpLGk9MCxxdWV1ZWxlbj1lbGVtZW50LnF1ZXVlKCkubGVuZ3RoOyQuZWZmZWN0cy5jcmVhdGVQbGFjZWhvbGRlcihlbGVtZW50KTtyZWZWYWx1ZT1lbGVtZW50LmNzcyhyZWYpO2lmKCFkaXN0YW5jZSl7ZGlzdGFuY2U9ZWxlbWVudFtyZWY9PT0idG9wIj8ib3V0ZXJIZWlnaHQiOiJvdXRlcldpZHRoIl0oKS8zO30KaWYoc2hvdyl7ZG93bkFuaW09e29wYWNpdHk6MX07ZG93bkFuaW1bcmVmXT1yZWZWYWx1ZTtlbGVtZW50LmNzcygib3BhY2l0eSIsMCkuY3NzKHJlZixtb3Rpb24/LWRpc3RhbmNlKjI6ZGlzdGFuY2UqMikuYW5pbWF0ZShkb3duQW5pbSxzcGVlZCxlYXNpbmcpO30KaWYoaGlkZSl7ZGlzdGFuY2U9ZGlzdGFuY2UvTWF0aC5wb3coMix0aW1lcy0xKTt9CmRvd25BbmltPXt9O2Rvd25BbmltW3JlZl09cmVmVmFsdWU7Zm9yKDtpPHRpbWVzO2krKyl7dXBBbmltPXt9O3VwQW5pbVtyZWZdPShtb3Rpb24/Ii09IjoiKz0iKStkaXN0YW5jZTtlbGVtZW50LmFuaW1hdGUodXBBbmltLHNwZWVkLGVhc2luZykuYW5pbWF0ZShkb3duQW5pbSxzcGVlZCxlYXNpbmcpO2Rpc3RhbmNlPWhpZGU/ZGlzdGFuY2UqMjpkaXN0YW5jZS8yO30KaWYoaGlkZSl7dXBBbmltPXtvcGFjaXR5OjB9O3VwQW5pbVtyZWZdPShtb3Rpb24/Ii09IjoiKz0iKStkaXN0YW5jZTtlbGVtZW50LmFuaW1hdGUodXBBbmltLHNwZWVkLGVhc2luZyk7fQplbGVtZW50LnF1ZXVlKGRvbmUpOyQuZWZmZWN0cy51bnNoaWZ0KGVsZW1lbnQscXVldWVsZW4sYW5pbXMrMSk7fSk7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qcXVlcnkvanF1ZXJ5LmJyb3dzZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24oKXskLnVhTWF0Y2g9ZnVuY3Rpb24odWEpe3ZhciB1YT11YS50b0xvd2VyQ2FzZSgpO3ZhciBtYXRjaD0vKGNocm9tZSlbIFwvXShbXHcuXSspLy5leGVjKHVhKXx8Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8uZXhlYyh1YSl8fC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFwvXShbXHcuXSspLy5leGVjKHVhKXx8Lyhtc2llKSAoW1x3Ll0rKS8uZXhlYyh1YSl8fHVhLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiYvKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspfCkvLmV4ZWModWEpfHxbXTtyZXR1cm57YnJvd3NlcjptYXRjaFsxXXx8IiIsdmVyc2lvbjptYXRjaFsyXXx8IjAifTt9O2lmKCEkLmJyb3dzZXIpe3ZhciBtYXRjaGVkPSQudWFNYXRjaChuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgYnJvd3Nlcj17fTtpZihtYXRjaGVkLmJyb3dzZXIpe2Jyb3dzZXJbbWF0Y2hlZC5icm93c2VyXT10cnVlO2Jyb3dzZXIudmVyc2lvbj1tYXRjaGVkLnZlcnNpb247fQppZihicm93c2VyLmNocm9tZSl7YnJvd3Nlci53ZWJraXQ9dHJ1ZTt9ZWxzZSBpZihicm93c2VyLndlYmtpdCl7YnJvd3Nlci5zYWZhcmk9dHJ1ZTt9CiQuYnJvd3Nlcj1icm93c2VyO319KSgpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qcXVlcnkuYmxvY2tVSS9qcXVlcnkuYmxvY2tVSS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCjsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gc2V0dXAoJCl7JC5mbi5fZmFkZUluPSQuZm4uZmFkZUluO3ZhciBub09wPSQubm9vcHx8ZnVuY3Rpb24oKXt9O3ZhciBtc2llPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO3ZhciBpZTY9L01TSUUgNi4wLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL01TSUUgOC4wLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO3ZhciBtb2RlPWRvY3VtZW50LmRvY3VtZW50TW9kZXx8MDt2YXIgc2V0RXhwcj0kLmlzRnVuY3Rpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGUuc2V0RXhwcmVzc2lvbik7JC5ibG9ja1VJPWZ1bmN0aW9uKG9wdHMpe2luc3RhbGwod2luZG93LG9wdHMpO307JC51bmJsb2NrVUk9ZnVuY3Rpb24ob3B0cyl7cmVtb3ZlKHdpbmRvdyxvcHRzKTt9OyQuZ3Jvd2xVST1mdW5jdGlvbih0aXRsZSxtZXNzYWdlLHRpbWVvdXQsb25DbG9zZSl7dmFyICRtPSQoJzxkaXYgY2xhc3M9Imdyb3dsVUkiPjwvZGl2PicpO2lmKHRpdGxlKSRtLmFwcGVuZCgnPGgxPicrdGl0bGUrJzwvaDE+Jyk7aWYobWVzc2FnZSkkbS5hcHBlbmQoJzxoMj4nK21lc3NhZ2UrJzwvaDI+Jyk7aWYodGltZW91dD09PXVuZGVmaW5lZCl0aW1lb3V0PTMwMDA7dmFyIGNhbGxCbG9jaz1mdW5jdGlvbihvcHRzKXtvcHRzPW9wdHN8fHt9OyQuYmxvY2tVSSh7bWVzc2FnZTokbSxmYWRlSW46dHlwZW9mIG9wdHMuZmFkZUluIT09J3VuZGVmaW5lZCc/b3B0cy5mYWRlSW46NzAwLGZhZGVPdXQ6dHlwZW9mIG9wdHMuZmFkZU91dCE9PSd1bmRlZmluZWQnP29wdHMuZmFkZU91dDoxMDAwLHRpbWVvdXQ6dHlwZW9mIG9wdHMudGltZW91dCE9PSd1bmRlZmluZWQnP29wdHMudGltZW91dDp0aW1lb3V0LGNlbnRlclk6ZmFsc2Usc2hvd092ZXJsYXk6ZmFsc2Usb25VbmJsb2NrOm9uQ2xvc2UsY3NzOiQuYmxvY2tVSS5kZWZhdWx0cy5ncm93bENTU30pO307Y2FsbEJsb2NrKCk7dmFyIG5vbm1vdXNlZE9wYWNpdHk9JG0uY3NzKCdvcGFjaXR5Jyk7JG0ubW91c2VvdmVyKGZ1bmN0aW9uKCl7Y2FsbEJsb2NrKHtmYWRlSW46MCx0aW1lb3V0OjMwMDAwfSk7dmFyIGRpc3BsYXlCbG9jaz0kKCcuYmxvY2tNc2cnKTtkaXNwbGF5QmxvY2suc3RvcCgpO2Rpc3BsYXlCbG9jay5mYWRlVG8oMzAwLDEpO30pLm1vdXNlb3V0KGZ1bmN0aW9uKCl7JCgnLmJsb2NrTXNnJykuZmFkZU91dCgxMDAwKTt9KTt9OyQuZm4uYmxvY2s9ZnVuY3Rpb24ob3B0cyl7aWYodGhpc1swXT09PXdpbmRvdyl7JC5ibG9ja1VJKG9wdHMpO3JldHVybiB0aGlzO30KdmFyIGZ1bGxPcHRzPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cyxvcHRzfHx7fSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyICRlbD0kKHRoaXMpO2lmKGZ1bGxPcHRzLmlnbm9yZUlmQmxvY2tlZCYmJGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJykpCnJldHVybjskZWwudW5ibG9jayh7ZmFkZU91dDowfSk7fSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCQuY3NzKHRoaXMsJ3Bvc2l0aW9uJyk9PSdzdGF0aWMnKXt0aGlzLnN0eWxlLnBvc2l0aW9uPSdyZWxhdGl2ZSc7JCh0aGlzKS5kYXRhKCdibG9ja1VJLnN0YXRpYycsdHJ1ZSk7fQp0aGlzLnN0eWxlLnpvb209MTtpbnN0YWxsKHRoaXMsb3B0cyk7fSk7fTskLmZuLnVuYmxvY2s9ZnVuY3Rpb24ob3B0cyl7aWYodGhpc1swXT09PXdpbmRvdyl7JC51bmJsb2NrVUkob3B0cyk7cmV0dXJuIHRoaXM7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7cmVtb3ZlKHRoaXMsb3B0cyk7fSk7fTskLmJsb2NrVUkudmVyc2lvbj0yLjcwOyQuYmxvY2tVSS5kZWZhdWx0cz17bWVzc2FnZTonPGgxPlBsZWFzZSB3YWl0Li4uPC9oMT4nLHRpdGxlOm51bGwsZHJhZ2dhYmxlOnRydWUsdGhlbWU6ZmFsc2UsY3NzOntwYWRkaW5nOjAsbWFyZ2luOjAsd2lkdGg6JzMwJScsdG9wOic0MCUnLGxlZnQ6JzM1JScsdGV4dEFsaWduOidjZW50ZXInLGNvbG9yOicjMDAwJyxib3JkZXI6JzNweCBzb2xpZCAjYWFhJyxiYWNrZ3JvdW5kQ29sb3I6JyNmZmYnLGN1cnNvcjond2FpdCd9LHRoZW1lZENTUzp7d2lkdGg6JzMwJScsdG9wOic0MCUnLGxlZnQ6JzM1JSd9LG92ZXJsYXlDU1M6e2JhY2tncm91bmRDb2xvcjonIzAwMCcsb3BhY2l0eTowLjYsY3Vyc29yOid3YWl0J30sY3Vyc29yUmVzZXQ6J2RlZmF1bHQnLGdyb3dsQ1NTOnt3aWR0aDonMzUwcHgnLHRvcDonMTBweCcsbGVmdDonJyxyaWdodDonMTBweCcsYm9yZGVyOidub25lJyxwYWRkaW5nOic1cHgnLG9wYWNpdHk6MC42LGN1cnNvcjonZGVmYXVsdCcsY29sb3I6JyNmZmYnLGJhY2tncm91bmRDb2xvcjonIzAwMCcsJy13ZWJraXQtYm9yZGVyLXJhZGl1cyc6JzEwcHgnLCctbW96LWJvcmRlci1yYWRpdXMnOicxMHB4JywnYm9yZGVyLXJhZGl1cyc6JzEwcHgnfSxpZnJhbWVTcmM6L15odHRwcy9pLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWZ8fCcnKT8namF2YXNjcmlwdDpmYWxzZSc6J2Fib3V0OmJsYW5rJyxmb3JjZUlmcmFtZTpmYWxzZSxiYXNlWjoxMDAwLGNlbnRlclg6dHJ1ZSxjZW50ZXJZOnRydWUsYWxsb3dCb2R5U3RyZXRjaDp0cnVlLGJpbmRFdmVudHM6dHJ1ZSxjb25zdHJhaW5UYWJLZXk6dHJ1ZSxmYWRlSW46MjAwLGZhZGVPdXQ6NDAwLHRpbWVvdXQ6MCxzaG93T3ZlcmxheTp0cnVlLGZvY3VzSW5wdXQ6dHJ1ZSxmb2N1c2FibGVFbGVtZW50czonOmlucHV0OmVuYWJsZWQ6dmlzaWJsZScsb25CbG9jazpudWxsLG9uVW5ibG9jazpudWxsLG9uT3ZlcmxheUNsaWNrOm51bGwscXVpcmtzbW9kZU9mZnNldEhhY2s6NCxibG9ja01zZ0NsYXNzOidibG9ja01zZycsaWdub3JlSWZCbG9ja2VkOmZhbHNlfTt2YXIgcGFnZUJsb2NrPW51bGw7dmFyIHBhZ2VCbG9ja0Vscz1bXTtmdW5jdGlvbiBpbnN0YWxsKGVsLG9wdHMpe3ZhciBjc3MsdGhlbWVkQ1NTO3ZhciBmdWxsPShlbD09d2luZG93KTt2YXIgbXNnPShvcHRzJiZvcHRzLm1lc3NhZ2UhPT11bmRlZmluZWQ/b3B0cy5tZXNzYWdlOnVuZGVmaW5lZCk7b3B0cz0kLmV4dGVuZCh7fSwkLmJsb2NrVUkuZGVmYXVsdHMsb3B0c3x8e30pO2lmKG9wdHMuaWdub3JlSWZCbG9ja2VkJiYkKGVsKS5kYXRhKCdibG9ja1VJLmlzQmxvY2tlZCcpKQpyZXR1cm47b3B0cy5vdmVybGF5Q1NTPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cy5vdmVybGF5Q1NTLG9wdHMub3ZlcmxheUNTU3x8e30pO2Nzcz0kLmV4dGVuZCh7fSwkLmJsb2NrVUkuZGVmYXVsdHMuY3NzLG9wdHMuY3NzfHx7fSk7aWYob3B0cy5vbk92ZXJsYXlDbGljaykKb3B0cy5vdmVybGF5Q1NTLmN1cnNvcj0ncG9pbnRlcic7dGhlbWVkQ1NTPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cy50aGVtZWRDU1Msb3B0cy50aGVtZWRDU1N8fHt9KTttc2c9bXNnPT09dW5kZWZpbmVkP29wdHMubWVzc2FnZTptc2c7aWYoZnVsbCYmcGFnZUJsb2NrKQpyZW1vdmUod2luZG93LHtmYWRlT3V0OjB9KTtpZihtc2cmJnR5cGVvZiBtc2chPSdzdHJpbmcnJiYobXNnLnBhcmVudE5vZGV8fG1zZy5qcXVlcnkpKXt2YXIgbm9kZT1tc2cuanF1ZXJ5P21zZ1swXTptc2c7dmFyIGRhdGE9e307JChlbCkuZGF0YSgnYmxvY2tVSS5oaXN0b3J5JyxkYXRhKTtkYXRhLmVsPW5vZGU7ZGF0YS5wYXJlbnQ9bm9kZS5wYXJlbnROb2RlO2RhdGEuZGlzcGxheT1ub2RlLnN0eWxlLmRpc3BsYXk7ZGF0YS5wb3NpdGlvbj1ub2RlLnN0eWxlLnBvc2l0aW9uO2lmKGRhdGEucGFyZW50KQpkYXRhLnBhcmVudC5yZW1vdmVDaGlsZChub2RlKTt9CiQoZWwpLmRhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyxvcHRzLm9uVW5ibG9jayk7dmFyIHo9b3B0cy5iYXNlWjt2YXIgbHlyMSxseXIyLGx5cjMscztpZihtc2llfHxvcHRzLmZvcmNlSWZyYW1lKQpseXIxPSQoJzxpZnJhbWUgY2xhc3M9ImJsb2NrVUkiIHN0eWxlPSJ6LWluZGV4OicrKHorKykrJztkaXNwbGF5Om5vbmU7Ym9yZGVyOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowIiBzcmM9Iicrb3B0cy5pZnJhbWVTcmMrJyI+PC9pZnJhbWU+Jyk7ZWxzZQpseXIxPSQoJzxkaXYgY2xhc3M9ImJsb2NrVUkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PicpO2lmKG9wdHMudGhlbWUpCmx5cjI9JCgnPGRpdiBjbGFzcz0iYmxvY2tVSSBibG9ja092ZXJsYXkgdWktd2lkZ2V0LW92ZXJsYXkiIHN0eWxlPSJ6LWluZGV4OicrKHorKykrJztkaXNwbGF5Om5vbmUiPjwvZGl2PicpO2Vsc2UKbHlyMj0kKCc8ZGl2IGNsYXNzPSJibG9ja1VJIGJsb2NrT3ZlcmxheSIgc3R5bGU9InotaW5kZXg6JysoeisrKSsnO2Rpc3BsYXk6bm9uZTtib3JkZXI6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtsZWZ0OjAiPjwvZGl2PicpO2lmKG9wdHMudGhlbWUmJmZ1bGwpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja1BhZ2UgdWktZGlhbG9nIHVpLXdpZGdldCB1aS1jb3JuZXItYWxsIiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZCI+JztpZihvcHRzLnRpdGxlKXtzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWhlYWRlciB1aS1kaWFsb2ctdGl0bGViYXIgdWktY29ybmVyLWFsbCBibG9ja1RpdGxlIj4nKyhvcHRzLnRpdGxlfHwnJm5ic3A7JykrJzwvZGl2Pic7fQpzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWNvbnRlbnQgdWktZGlhbG9nLWNvbnRlbnQiPjwvZGl2Pic7cys9JzwvZGl2Pic7fQplbHNlIGlmKG9wdHMudGhlbWUpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja0VsZW1lbnQgdWktZGlhbG9nIHVpLXdpZGdldCB1aS1jb3JuZXItYWxsIiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZSI+JztpZihvcHRzLnRpdGxlKXtzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWhlYWRlciB1aS1kaWFsb2ctdGl0bGViYXIgdWktY29ybmVyLWFsbCBibG9ja1RpdGxlIj4nKyhvcHRzLnRpdGxlfHwnJm5ic3A7JykrJzwvZGl2Pic7fQpzKz0nPGRpdiBjbGFzcz0idWktd2lkZ2V0LWNvbnRlbnQgdWktZGlhbG9nLWNvbnRlbnQiPjwvZGl2Pic7cys9JzwvZGl2Pic7fQplbHNlIGlmKGZ1bGwpe3M9JzxkaXYgY2xhc3M9ImJsb2NrVUkgJytvcHRzLmJsb2NrTXNnQ2xhc3MrJyBibG9ja1BhZ2UiIHN0eWxlPSJ6LWluZGV4OicrKHorMTApKyc7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkIj48L2Rpdj4nO30KZWxzZXtzPSc8ZGl2IGNsYXNzPSJibG9ja1VJICcrb3B0cy5ibG9ja01zZ0NsYXNzKycgYmxvY2tFbGVtZW50IiBzdHlsZT0iei1pbmRleDonKyh6KzEwKSsnO2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZSI+PC9kaXY+Jzt9Cmx5cjM9JChzKTtpZihtc2cpe2lmKG9wdHMudGhlbWUpe2x5cjMuY3NzKHRoZW1lZENTUyk7bHlyMy5hZGRDbGFzcygndWktd2lkZ2V0LWNvbnRlbnQnKTt9CmVsc2UKbHlyMy5jc3MoY3NzKTt9CmlmKCFvcHRzLnRoZW1lKQpseXIyLmNzcyhvcHRzLm92ZXJsYXlDU1MpO2x5cjIuY3NzKCdwb3NpdGlvbicsZnVsbD8nZml4ZWQnOidhYnNvbHV0ZScpO2lmKG1zaWV8fG9wdHMuZm9yY2VJZnJhbWUpCmx5cjEuY3NzKCdvcGFjaXR5JywwLjApO3ZhciBsYXllcnM9W2x5cjEsbHlyMixseXIzXSwkcGFyPWZ1bGw/JCgnYm9keScpOiQoZWwpOyQuZWFjaChsYXllcnMsZnVuY3Rpb24oKXt0aGlzLmFwcGVuZFRvKCRwYXIpO30pO2lmKG9wdHMudGhlbWUmJm9wdHMuZHJhZ2dhYmxlJiYkLmZuLmRyYWdnYWJsZSl7bHlyMy5kcmFnZ2FibGUoe2hhbmRsZTonLnVpLWRpYWxvZy10aXRsZWJhcicsY2FuY2VsOidsaSd9KTt9CnZhciBleHByPXNldEV4cHImJighJC5zdXBwb3J0LmJveE1vZGVsfHwkKCdvYmplY3QsZW1iZWQnLGZ1bGw/bnVsbDplbCkubGVuZ3RoPjApO2lmKGllNnx8ZXhwcil7aWYoZnVsbCYmb3B0cy5hbGxvd0JvZHlTdHJldGNoJiYkLnN1cHBvcnQuYm94TW9kZWwpCiQoJ2h0bWwsYm9keScpLmNzcygnaGVpZ2h0JywnMTAwJScpO2lmKChpZTZ8fCEkLnN1cHBvcnQuYm94TW9kZWwpJiYhZnVsbCl7dmFyIHQ9c3ooZWwsJ2JvcmRlclRvcFdpZHRoJyksbD1zeihlbCwnYm9yZGVyTGVmdFdpZHRoJyk7dmFyIGZpeFQ9dD8nKDAgLSAnK3QrJyknOjA7dmFyIGZpeEw9bD8nKDAgLSAnK2wrJyknOjA7fQokLmVhY2gobGF5ZXJzLGZ1bmN0aW9uKGksbyl7dmFyIHM9b1swXS5zdHlsZTtzLnBvc2l0aW9uPSdhYnNvbHV0ZSc7aWYoaTwyKXtpZihmdWxsKQpzLnNldEV4cHJlc3Npb24oJ2hlaWdodCcsJ01hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkgLSAoalF1ZXJ5LnN1cHBvcnQuYm94TW9kZWw/MDonK29wdHMucXVpcmtzbW9kZU9mZnNldEhhY2srJykgKyAicHgiJyk7ZWxzZQpzLnNldEV4cHJlc3Npb24oJ2hlaWdodCcsJ3RoaXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQgKyAicHgiJyk7aWYoZnVsbCkKcy5zZXRFeHByZXNzaW9uKCd3aWR0aCcsJ2pRdWVyeS5zdXBwb3J0LmJveE1vZGVsICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoICsgInB4IicpO2Vsc2UKcy5zZXRFeHByZXNzaW9uKCd3aWR0aCcsJ3RoaXMucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCArICJweCInKTtpZihmaXhMKXMuc2V0RXhwcmVzc2lvbignbGVmdCcsZml4TCk7aWYoZml4VClzLnNldEV4cHJlc3Npb24oJ3RvcCcsZml4VCk7fQplbHNlIGlmKG9wdHMuY2VudGVyWSl7aWYoZnVsbClzLnNldEV4cHJlc3Npb24oJ3RvcCcsJyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSAvIDIgLSAodGhpcy5vZmZzZXRIZWlnaHQgLyAyKSArIChibGFoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgKyAicHgiJyk7cy5tYXJnaW5Ub3A9MDt9CmVsc2UgaWYoIW9wdHMuY2VudGVyWSYmZnVsbCl7dmFyIHRvcD0ob3B0cy5jc3MmJm9wdHMuY3NzLnRvcCk/cGFyc2VJbnQob3B0cy5jc3MudG9wLDEwKTowO3ZhciBleHByZXNzaW9uPScoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApICsgJyt0b3ArJykgKyAicHgiJztzLnNldEV4cHJlc3Npb24oJ3RvcCcsZXhwcmVzc2lvbik7fX0pO30KaWYobXNnKXtpZihvcHRzLnRoZW1lKQpseXIzLmZpbmQoJy51aS13aWRnZXQtY29udGVudCcpLmFwcGVuZChtc2cpO2Vsc2UKbHlyMy5hcHBlbmQobXNnKTtpZihtc2cuanF1ZXJ5fHxtc2cubm9kZVR5cGUpCiQobXNnKS5zaG93KCk7fQppZigobXNpZXx8b3B0cy5mb3JjZUlmcmFtZSkmJm9wdHMuc2hvd092ZXJsYXkpCmx5cjEuc2hvdygpO2lmKG9wdHMuZmFkZUluKXt2YXIgY2I9b3B0cy5vbkJsb2NrP29wdHMub25CbG9jazpub09wO3ZhciBjYjE9KG9wdHMuc2hvd092ZXJsYXkmJiFtc2cpP2NiOm5vT3A7dmFyIGNiMj1tc2c/Y2I6bm9PcDtpZihvcHRzLnNob3dPdmVybGF5KQpseXIyLl9mYWRlSW4ob3B0cy5mYWRlSW4sY2IxKTtpZihtc2cpCmx5cjMuX2ZhZGVJbihvcHRzLmZhZGVJbixjYjIpO30KZWxzZXtpZihvcHRzLnNob3dPdmVybGF5KQpseXIyLnNob3coKTtpZihtc2cpCmx5cjMuc2hvdygpO2lmKG9wdHMub25CbG9jaykKb3B0cy5vbkJsb2NrLmJpbmQobHlyMykoKTt9CmJpbmQoMSxlbCxvcHRzKTtpZihmdWxsKXtwYWdlQmxvY2s9bHlyM1swXTtwYWdlQmxvY2tFbHM9JChvcHRzLmZvY3VzYWJsZUVsZW1lbnRzLHBhZ2VCbG9jayk7aWYob3B0cy5mb2N1c0lucHV0KQpzZXRUaW1lb3V0KGZvY3VzLDIwKTt9CmVsc2UKY2VudGVyKGx5cjNbMF0sb3B0cy5jZW50ZXJYLG9wdHMuY2VudGVyWSk7aWYob3B0cy50aW1lb3V0KXt2YXIgdG89c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGZ1bGwpCiQudW5ibG9ja1VJKG9wdHMpO2Vsc2UKJChlbCkudW5ibG9jayhvcHRzKTt9LG9wdHMudGltZW91dCk7JChlbCkuZGF0YSgnYmxvY2tVSS50aW1lb3V0Jyx0byk7fX0KZnVuY3Rpb24gcmVtb3ZlKGVsLG9wdHMpe3ZhciBjb3VudDt2YXIgZnVsbD0oZWw9PXdpbmRvdyk7dmFyICRlbD0kKGVsKTt2YXIgZGF0YT0kZWwuZGF0YSgnYmxvY2tVSS5oaXN0b3J5Jyk7dmFyIHRvPSRlbC5kYXRhKCdibG9ja1VJLnRpbWVvdXQnKTtpZih0byl7Y2xlYXJUaW1lb3V0KHRvKTskZWwucmVtb3ZlRGF0YSgnYmxvY2tVSS50aW1lb3V0Jyk7fQpvcHRzPSQuZXh0ZW5kKHt9LCQuYmxvY2tVSS5kZWZhdWx0cyxvcHRzfHx7fSk7YmluZCgwLGVsLG9wdHMpO2lmKG9wdHMub25VbmJsb2NrPT09bnVsbCl7b3B0cy5vblVuYmxvY2s9JGVsLmRhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyk7JGVsLnJlbW92ZURhdGEoJ2Jsb2NrVUkub25VbmJsb2NrJyk7fQp2YXIgZWxzO2lmKGZ1bGwpCmVscz0kKCdib2R5JykuY2hpbGRyZW4oKS5maWx0ZXIoJy5ibG9ja1VJJykuYWRkKCdib2R5ID4gLmJsb2NrVUknKTtlbHNlCmVscz0kZWwuZmluZCgnPi5ibG9ja1VJJyk7aWYob3B0cy5jdXJzb3JSZXNldCl7aWYoZWxzLmxlbmd0aD4xKQplbHNbMV0uc3R5bGUuY3Vyc29yPW9wdHMuY3Vyc29yUmVzZXQ7aWYoZWxzLmxlbmd0aD4yKQplbHNbMl0uc3R5bGUuY3Vyc29yPW9wdHMuY3Vyc29yUmVzZXQ7fQppZihmdWxsKQpwYWdlQmxvY2s9cGFnZUJsb2NrRWxzPW51bGw7aWYob3B0cy5mYWRlT3V0KXtjb3VudD1lbHMubGVuZ3RoO2Vscy5zdG9wKCkuZmFkZU91dChvcHRzLmZhZGVPdXQsZnVuY3Rpb24oKXtpZigtLWNvdW50PT09MCkKcmVzZXQoZWxzLGRhdGEsb3B0cyxlbCk7fSk7fQplbHNlCnJlc2V0KGVscyxkYXRhLG9wdHMsZWwpO30KZnVuY3Rpb24gcmVzZXQoZWxzLGRhdGEsb3B0cyxlbCl7dmFyICRlbD0kKGVsKTtpZigkZWwuZGF0YSgnYmxvY2tVSS5pc0Jsb2NrZWQnKSkKcmV0dXJuO2Vscy5lYWNoKGZ1bmN0aW9uKGksbyl7aWYodGhpcy5wYXJlbnROb2RlKQp0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7fSk7aWYoZGF0YSYmZGF0YS5lbCl7ZGF0YS5lbC5zdHlsZS5kaXNwbGF5PWRhdGEuZGlzcGxheTtkYXRhLmVsLnN0eWxlLnBvc2l0aW9uPWRhdGEucG9zaXRpb247ZGF0YS5lbC5zdHlsZS5jdXJzb3I9J2RlZmF1bHQnO2lmKGRhdGEucGFyZW50KQpkYXRhLnBhcmVudC5hcHBlbmRDaGlsZChkYXRhLmVsKTskZWwucmVtb3ZlRGF0YSgnYmxvY2tVSS5oaXN0b3J5Jyk7fQppZigkZWwuZGF0YSgnYmxvY2tVSS5zdGF0aWMnKSl7JGVsLmNzcygncG9zaXRpb24nLCdzdGF0aWMnKTt9CmlmKHR5cGVvZiBvcHRzLm9uVW5ibG9jaz09J2Z1bmN0aW9uJykKb3B0cy5vblVuYmxvY2soZWwsb3B0cyk7dmFyIGJvZHk9JChkb2N1bWVudC5ib2R5KSx3PWJvZHkud2lkdGgoKSxjc3NXPWJvZHlbMF0uc3R5bGUud2lkdGg7Ym9keS53aWR0aCh3LTEpLndpZHRoKHcpO2JvZHlbMF0uc3R5bGUud2lkdGg9Y3NzVzt9CmZ1bmN0aW9uIGJpbmQoYixlbCxvcHRzKXt2YXIgZnVsbD1lbD09d2luZG93LCRlbD0kKGVsKTtpZighYiYmKGZ1bGwmJiFwYWdlQmxvY2t8fCFmdWxsJiYhJGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJykpKQpyZXR1cm47JGVsLmRhdGEoJ2Jsb2NrVUkuaXNCbG9ja2VkJyxiKTtpZighZnVsbHx8IW9wdHMuYmluZEV2ZW50c3x8KGImJiFvcHRzLnNob3dPdmVybGF5KSkKcmV0dXJuO3ZhciBldmVudHM9J21vdXNlZG93biBtb3VzZXVwIGtleWRvd24ga2V5cHJlc3Mga2V5dXAgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaG1vdmUnO2lmKGIpCiQoZG9jdW1lbnQpLmJpbmQoZXZlbnRzLG9wdHMsaGFuZGxlcik7ZWxzZQokKGRvY3VtZW50KS51bmJpbmQoZXZlbnRzLGhhbmRsZXIpO30KZnVuY3Rpb24gaGFuZGxlcihlKXtpZihlLnR5cGU9PT0na2V5ZG93bicmJmUua2V5Q29kZSYmZS5rZXlDb2RlPT05KXtpZihwYWdlQmxvY2smJmUuZGF0YS5jb25zdHJhaW5UYWJLZXkpe3ZhciBlbHM9cGFnZUJsb2NrRWxzO3ZhciBmd2Q9IWUuc2hpZnRLZXkmJmUudGFyZ2V0PT09ZWxzW2Vscy5sZW5ndGgtMV07dmFyIGJhY2s9ZS5zaGlmdEtleSYmZS50YXJnZXQ9PT1lbHNbMF07aWYoZndkfHxiYWNrKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9jdXMoYmFjayk7fSwxMCk7cmV0dXJuIGZhbHNlO319fQp2YXIgb3B0cz1lLmRhdGE7dmFyIHRhcmdldD0kKGUudGFyZ2V0KTtpZih0YXJnZXQuaGFzQ2xhc3MoJ2Jsb2NrT3ZlcmxheScpJiZvcHRzLm9uT3ZlcmxheUNsaWNrKQpvcHRzLm9uT3ZlcmxheUNsaWNrKGUpO2lmKHRhcmdldC5wYXJlbnRzKCdkaXYuJytvcHRzLmJsb2NrTXNnQ2xhc3MpLmxlbmd0aD4wKQpyZXR1cm4gdHJ1ZTtyZXR1cm4gdGFyZ2V0LnBhcmVudHMoKS5jaGlsZHJlbigpLmZpbHRlcignZGl2LmJsb2NrVUknKS5sZW5ndGg9PT0wO30KZnVuY3Rpb24gZm9jdXMoYmFjayl7aWYoIXBhZ2VCbG9ja0VscykKcmV0dXJuO3ZhciBlPXBhZ2VCbG9ja0Vsc1tiYWNrPT09dHJ1ZT9wYWdlQmxvY2tFbHMubGVuZ3RoLTE6MF07aWYoZSkKZS5mb2N1cygpO30KZnVuY3Rpb24gY2VudGVyKGVsLHgseSl7dmFyIHA9ZWwucGFyZW50Tm9kZSxzPWVsLnN0eWxlO3ZhciBsPSgocC5vZmZzZXRXaWR0aC1lbC5vZmZzZXRXaWR0aCkvMiktc3oocCwnYm9yZGVyTGVmdFdpZHRoJyk7dmFyIHQ9KChwLm9mZnNldEhlaWdodC1lbC5vZmZzZXRIZWlnaHQpLzIpLXN6KHAsJ2JvcmRlclRvcFdpZHRoJyk7aWYoeClzLmxlZnQ9bD4wPyhsKydweCcpOicwJztpZih5KXMudG9wPXQ+MD8odCsncHgnKTonMCc7fQpmdW5jdGlvbiBzeihlbCxwKXtyZXR1cm4gcGFyc2VJbnQoJC5jc3MoZWwscCksMTApfHwwO319CmlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSl7ZGVmaW5lKFsnanF1ZXJ5J10sc2V0dXApO31lbHNle3NldHVwKGpRdWVyeSk7fX0pKCk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS5ob3RrZXlzL2pxdWVyeS5ob3RrZXlzLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGpRdWVyeSl7alF1ZXJ5LmhvdGtleXM9e3ZlcnNpb246IjAuOCIsc3BlY2lhbEtleXM6ezg6ImJhY2tzcGFjZSIsOToidGFiIiwxMzoicmV0dXJuIiwxNjoic2hpZnQiLDE3OiJjdHJsIiwxODoiYWx0IiwxOToicGF1c2UiLDIwOiJjYXBzbG9jayIsMjc6ImVzYyIsMzI6InNwYWNlIiwzMzoicGFnZXVwIiwzNDoicGFnZWRvd24iLDM1OiJlbmQiLDM2OiJob21lIiwzNzoibGVmdCIsMzg6InVwIiwzOToicmlnaHQiLDQwOiJkb3duIiw0NToiaW5zZXJ0Iiw0NjoiZGVsIiw5NjoiMCIsOTc6IjEiLDk4OiIyIiw5OToiMyIsMTAwOiI0IiwxMDE6IjUiLDEwMjoiNiIsMTAzOiI3IiwxMDQ6IjgiLDEwNToiOSIsMTA2OiIqIiwxMDc6IisiLDEwOToiLSIsMTEwOiIuIiwxMTE6Ii8iLDExMjoiZjEiLDExMzoiZjIiLDExNDoiZjMiLDExNToiZjQiLDExNjoiZjUiLDExNzoiZjYiLDExODoiZjciLDExOToiZjgiLDEyMDoiZjkiLDEyMToiZjEwIiwxMjI6ImYxMSIsMTIzOiJmMTIiLDE0NDoibnVtbG9jayIsMTQ1OiJzY3JvbGwiLDE5MToiLyIsMjI0OiJtZXRhIn0sc2hpZnROdW1zOnsiYCI6In4iLCIxIjoiISIsIjIiOiJAIiwiMyI6IiMiLCI0IjoiJCIsIjUiOiIlIiwiNiI6Il4iLCI3IjoiJiIsIjgiOiIqIiwiOSI6IigiLCIwIjoiKSIsIi0iOiJfIiwiPSI6IisiLCI7IjoiOiAiLCInIjoiXCIiLCIsIjoiPCIsIi4iOiI+IiwiLyI6Ij8iLCJcXCI6InwifX07ZnVuY3Rpb24ga2V5SGFuZGxlcihoYW5kbGVPYmope2lmKHR5cGVvZiBoYW5kbGVPYmouZGF0YSE9PSJzdHJpbmciKXtyZXR1cm47fQp2YXIgb3JpZ0hhbmRsZXI9aGFuZGxlT2JqLmhhbmRsZXIsa2V5cz1oYW5kbGVPYmouZGF0YS50b0xvd2VyQ2FzZSgpLnNwbGl0KCIgIik7aGFuZGxlT2JqLmhhbmRsZXI9ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMhPT1ldmVudC50YXJnZXQmJigvdGV4dGFyZWF8c2VsZWN0L2kudGVzdChldmVudC50YXJnZXQubm9kZU5hbWUpfHxldmVudC50YXJnZXQudHlwZT09PSJ0ZXh0Iikpe3JldHVybjt9CnZhciBzcGVjaWFsPWV2ZW50LnR5cGUhPT0ia2V5cHJlc3MiJiZqUXVlcnkuaG90a2V5cy5zcGVjaWFsS2V5c1tldmVudC53aGljaF0sY2hhcmFjdGVyPVN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQud2hpY2gpLnRvTG93ZXJDYXNlKCksa2V5LG1vZGlmPSIiLHBvc3NpYmxlPXt9O2lmKGV2ZW50LmFsdEtleSYmc3BlY2lhbCE9PSJhbHQiKXttb2RpZis9ImFsdCsiO30KaWYoZXZlbnQuY3RybEtleSYmc3BlY2lhbCE9PSJjdHJsIil7bW9kaWYrPSJjdHJsKyI7fQppZihldmVudC5tZXRhS2V5JiYhZXZlbnQuY3RybEtleSYmc3BlY2lhbCE9PSJtZXRhIil7bW9kaWYrPSJtZXRhKyI7fQppZihldmVudC5zaGlmdEtleSYmc3BlY2lhbCE9PSJzaGlmdCIpe21vZGlmKz0ic2hpZnQrIjt9CmlmKHNwZWNpYWwpe3Bvc3NpYmxlW21vZGlmK3NwZWNpYWxdPXRydWU7fWVsc2V7cG9zc2libGVbbW9kaWYrY2hhcmFjdGVyXT10cnVlO3Bvc3NpYmxlW21vZGlmK2pRdWVyeS5ob3RrZXlzLnNoaWZ0TnVtc1tjaGFyYWN0ZXJdXT10cnVlO2lmKG1vZGlmPT09InNoaWZ0KyIpe3Bvc3NpYmxlW2pRdWVyeS5ob3RrZXlzLnNoaWZ0TnVtc1tjaGFyYWN0ZXJdXT10cnVlO319CmZvcih2YXIgaT0wLGw9a2V5cy5sZW5ndGg7aTxsO2krKyl7aWYocG9zc2libGVba2V5c1tpXV0pe3JldHVybiBvcmlnSGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX19O30KalF1ZXJ5LmVhY2goWyJrZXlkb3duIiwia2V5dXAiLCJrZXlwcmVzcyJdLGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdGhpc109e2FkZDprZXlIYW5kbGVyfTt9KTt9KShqUXVlcnkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9qcXVlcnkucGxhY2Vob2xkZXIvanF1ZXJ5LnBsYWNlaG9sZGVyLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KOyhmdW5jdGlvbih3aW5kb3csZG9jdW1lbnQsJCl7dmFyIGlzSW5wdXRTdXBwb3J0ZWQ9J3BsYWNlaG9sZGVyJ2luIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JyksaXNUZXh0YXJlYVN1cHBvcnRlZD0ncGxhY2Vob2xkZXInaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKSxwcm90b3R5cGU9JC5mbix2YWxIb29rcz0kLnZhbEhvb2tzLGhvb2tzLHBsYWNlaG9sZGVyO2lmKGlzSW5wdXRTdXBwb3J0ZWQmJmlzVGV4dGFyZWFTdXBwb3J0ZWQpe3BsYWNlaG9sZGVyPXByb3RvdHlwZS5wbGFjZWhvbGRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzO307cGxhY2Vob2xkZXIuaW5wdXQ9cGxhY2Vob2xkZXIudGV4dGFyZWE9dHJ1ZTt9ZWxzZXtwbGFjZWhvbGRlcj1wcm90b3R5cGUucGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXt2YXIgJHRoaXM9dGhpczskdGhpcy5maWx0ZXIoKGlzSW5wdXRTdXBwb3J0ZWQ/J3RleHRhcmVhJzonOmlucHV0JykrJ1twbGFjZWhvbGRlcl0nKS5ub3QoJy5wbGFjZWhvbGRlcicpLmJpbmQoeydmb2N1cy5wbGFjZWhvbGRlcic6Y2xlYXJQbGFjZWhvbGRlciwnYmx1ci5wbGFjZWhvbGRlcic6c2V0UGxhY2Vob2xkZXJ9KS5kYXRhKCdwbGFjZWhvbGRlci1lbmFibGVkJyx0cnVlKS50cmlnZ2VyKCdibHVyLnBsYWNlaG9sZGVyJyk7cmV0dXJuICR0aGlzO307cGxhY2Vob2xkZXIuaW5wdXQ9aXNJbnB1dFN1cHBvcnRlZDtwbGFjZWhvbGRlci50ZXh0YXJlYT1pc1RleHRhcmVhU3VwcG9ydGVkO2hvb2tzPXsnZ2V0JzpmdW5jdGlvbihlbGVtZW50KXt2YXIgJGVsZW1lbnQ9JChlbGVtZW50KTtyZXR1cm4gJGVsZW1lbnQuZGF0YSgncGxhY2Vob2xkZXItZW5hYmxlZCcpJiYkZWxlbWVudC5oYXNDbGFzcygncGxhY2Vob2xkZXInKT8nJzplbGVtZW50LnZhbHVlO30sJ3NldCc6ZnVuY3Rpb24oZWxlbWVudCx2YWx1ZSl7dmFyICRlbGVtZW50PSQoZWxlbWVudCk7aWYoISRlbGVtZW50LmRhdGEoJ3BsYWNlaG9sZGVyLWVuYWJsZWQnKSl7cmV0dXJuIGVsZW1lbnQudmFsdWU9dmFsdWU7fQppZih2YWx1ZT09Jycpe2VsZW1lbnQudmFsdWU9dmFsdWU7aWYoZWxlbWVudCE9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7c2V0UGxhY2Vob2xkZXIuY2FsbChlbGVtZW50KTt9fWVsc2UgaWYoJGVsZW1lbnQuaGFzQ2xhc3MoJ3BsYWNlaG9sZGVyJykpe2NsZWFyUGxhY2Vob2xkZXIuY2FsbChlbGVtZW50LHRydWUsdmFsdWUpfHwoZWxlbWVudC52YWx1ZT12YWx1ZSk7fWVsc2V7ZWxlbWVudC52YWx1ZT12YWx1ZTt9CnJldHVybiAkZWxlbWVudDt9fTtpc0lucHV0U3VwcG9ydGVkfHwodmFsSG9va3MuaW5wdXQ9aG9va3MpO2lzVGV4dGFyZWFTdXBwb3J0ZWR8fCh2YWxIb29rcy50ZXh0YXJlYT1ob29rcyk7JChmdW5jdGlvbigpeyQoZG9jdW1lbnQpLmRlbGVnYXRlKCdmb3JtJywnc3VibWl0LnBsYWNlaG9sZGVyJyxmdW5jdGlvbigpe3ZhciAkaW5wdXRzPSQoJy5wbGFjZWhvbGRlcicsdGhpcykuZWFjaChjbGVhclBsYWNlaG9sZGVyKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGlucHV0cy5lYWNoKHNldFBsYWNlaG9sZGVyKTt9LDEwKTt9KTt9KTskKHdpbmRvdykuYmluZCgnYmVmb3JldW5sb2FkLnBsYWNlaG9sZGVyJyxmdW5jdGlvbigpeyQoJy5wbGFjZWhvbGRlcicpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnZhbHVlPScnO30pO30pO30KZnVuY3Rpb24gYXJncyhlbGVtKXt2YXIgbmV3QXR0cnM9e30scmlubGluZWpRdWVyeT0vXmpRdWVyeVxkKyQvOyQuZWFjaChlbGVtLmF0dHJpYnV0ZXMsZnVuY3Rpb24oaSxhdHRyKXtpZihhdHRyLnNwZWNpZmllZCYmIXJpbmxpbmVqUXVlcnkudGVzdChhdHRyLm5hbWUpKXtuZXdBdHRyc1thdHRyLm5hbWVdPWF0dHIudmFsdWU7fX0pO3JldHVybiBuZXdBdHRyczt9CmZ1bmN0aW9uIGNsZWFyUGxhY2Vob2xkZXIoZXZlbnQsdmFsdWUpe3ZhciBpbnB1dD10aGlzLCRpbnB1dD0kKGlucHV0KTtpZihpbnB1dC52YWx1ZT09JGlucHV0LmF0dHIoJ3BsYWNlaG9sZGVyJykmJiRpbnB1dC5oYXNDbGFzcygncGxhY2Vob2xkZXInKSl7aWYoJGlucHV0LmRhdGEoJ3BsYWNlaG9sZGVyLXBhc3N3b3JkJykpeyRpbnB1dD0kaW5wdXQuaGlkZSgpLm5leHQoKS5zaG93KCkuYXR0cignaWQnLCRpbnB1dC5yZW1vdmVBdHRyKCdpZCcpLmRhdGEoJ3BsYWNlaG9sZGVyLWlkJykpO2lmKGV2ZW50PT09dHJ1ZSl7cmV0dXJuICRpbnB1dFswXS52YWx1ZT12YWx1ZTt9CiRpbnB1dC5mb2N1cygpO31lbHNle2lucHV0LnZhbHVlPScnOyRpbnB1dC5yZW1vdmVDbGFzcygncGxhY2Vob2xkZXInKTtpbnB1dD09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmaW5wdXQuc2VsZWN0KCk7fX19CmZ1bmN0aW9uIHNldFBsYWNlaG9sZGVyKCl7dmFyICRyZXBsYWNlbWVudCxpbnB1dD10aGlzLCRpbnB1dD0kKGlucHV0KSwkb3JpZ0lucHV0PSRpbnB1dCxpZD10aGlzLmlkO2lmKGlucHV0LnZhbHVlPT0nJyl7aWYoaW5wdXQudHlwZT09J3Bhc3N3b3JkJyl7aWYoISRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci10ZXh0aW5wdXQnKSl7dHJ5eyRyZXBsYWNlbWVudD0kaW5wdXQuY2xvbmUoKS5hdHRyKHsndHlwZSc6J3RleHQnfSk7fWNhdGNoKGUpeyRyZXBsYWNlbWVudD0kKCc8aW5wdXQ+JykuYXR0cigkLmV4dGVuZChhcmdzKHRoaXMpLHsndHlwZSc6J3RleHQnfSkpO30KJHJlcGxhY2VtZW50LnJlbW92ZUF0dHIoJ25hbWUnKS5kYXRhKHsncGxhY2Vob2xkZXItcGFzc3dvcmQnOnRydWUsJ3BsYWNlaG9sZGVyLWlkJzppZH0pLmJpbmQoJ2ZvY3VzLnBsYWNlaG9sZGVyJyxjbGVhclBsYWNlaG9sZGVyKTskaW5wdXQuZGF0YSh7J3BsYWNlaG9sZGVyLXRleHRpbnB1dCc6JHJlcGxhY2VtZW50LCdwbGFjZWhvbGRlci1pZCc6aWR9KS5iZWZvcmUoJHJlcGxhY2VtZW50KTt9CiRpbnB1dD0kaW5wdXQucmVtb3ZlQXR0cignaWQnKS5oaWRlKCkucHJldigpLmF0dHIoJ2lkJyxpZCkuc2hvdygpO30KJGlucHV0LmFkZENsYXNzKCdwbGFjZWhvbGRlcicpOyRpbnB1dFswXS52YWx1ZT0kaW5wdXQuYXR0cigncGxhY2Vob2xkZXInKTt9ZWxzZXskaW5wdXQucmVtb3ZlQ2xhc3MoJ3BsYWNlaG9sZGVyJyk7fX19KHRoaXMsZG9jdW1lbnQsalF1ZXJ5KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS5mb3JtL2pxdWVyeS5mb3JtLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGZhY3RvcnkpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsnanF1ZXJ5J10sZmFjdG9yeSk7fWVsc2V7ZmFjdG9yeSgodHlwZW9mKGpRdWVyeSkhPSd1bmRlZmluZWQnKT9qUXVlcnk6d2luZG93LlplcHRvKTt9fQooZnVuY3Rpb24oJCl7InVzZSBzdHJpY3QiO3ZhciBmZWF0dXJlPXt9O2ZlYXR1cmUuZmlsZWFwaT0kKCI8aW5wdXQgdHlwZT0nZmlsZScvPiIpLmdldCgwKS5maWxlcyE9PXVuZGVmaW5lZDtmZWF0dXJlLmZvcm1kYXRhPXdpbmRvdy5Gb3JtRGF0YSE9PXVuZGVmaW5lZDt2YXIgaGFzUHJvcD0hISQuZm4ucHJvcDskLmZuLmF0dHIyPWZ1bmN0aW9uKCl7aWYoIWhhc1Byb3Ape3JldHVybiB0aGlzLmF0dHIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30KdmFyIHZhbD10aGlzLnByb3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCh2YWwmJnZhbC5qcXVlcnkpfHx0eXBlb2YgdmFsPT09J3N0cmluZycpe3JldHVybiB2YWw7fQpyZXR1cm4gdGhpcy5hdHRyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9OyQuZm4uYWpheFN1Ym1pdD1mdW5jdGlvbihvcHRpb25zKXtpZighdGhpcy5sZW5ndGgpe2xvZygnYWpheFN1Ym1pdDogc2tpcHBpbmcgc3VibWl0IHByb2Nlc3MgLSBubyBlbGVtZW50IHNlbGVjdGVkJyk7cmV0dXJuIHRoaXM7fQp2YXIgbWV0aG9kLGFjdGlvbix1cmwsJGZvcm09dGhpcztpZih0eXBlb2Ygb3B0aW9ucz09J2Z1bmN0aW9uJyl7b3B0aW9ucz17c3VjY2VzczpvcHRpb25zfTt9CmVsc2UgaWYob3B0aW9ucz09PXVuZGVmaW5lZCl7b3B0aW9ucz17fTt9Cm1ldGhvZD1vcHRpb25zLnR5cGV8fHRoaXMuYXR0cjIoJ21ldGhvZCcpO2FjdGlvbj1vcHRpb25zLnVybHx8dGhpcy5hdHRyMignYWN0aW9uJyk7dXJsPSh0eXBlb2YgYWN0aW9uPT09J3N0cmluZycpPyQudHJpbShhY3Rpb24pOicnO3VybD11cmx8fHdpbmRvdy5sb2NhdGlvbi5ocmVmfHwnJztpZih1cmwpe3VybD0odXJsLm1hdGNoKC9eKFteI10rKS8pfHxbXSlbMV07fQpvcHRpb25zPSQuZXh0ZW5kKHRydWUse3VybDp1cmwsc3VjY2VzczokLmFqYXhTZXR0aW5ncy5zdWNjZXNzLHR5cGU6bWV0aG9kfHwkLmFqYXhTZXR0aW5ncy50eXBlLGlmcmFtZVNyYzovXmh0dHBzL2kudGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZnx8JycpPydqYXZhc2NyaXB0OmZhbHNlJzonYWJvdXQ6YmxhbmsnfSxvcHRpb25zKTt2YXIgdmV0bz17fTt0aGlzLnRyaWdnZXIoJ2Zvcm0tcHJlLXNlcmlhbGl6ZScsW3RoaXMsb3B0aW9ucyx2ZXRvXSk7aWYodmV0by52ZXRvKXtsb2coJ2FqYXhTdWJtaXQ6IHN1Ym1pdCB2ZXRvZWQgdmlhIGZvcm0tcHJlLXNlcmlhbGl6ZSB0cmlnZ2VyJyk7cmV0dXJuIHRoaXM7fQppZihvcHRpb25zLmJlZm9yZVNlcmlhbGl6ZSYmb3B0aW9ucy5iZWZvcmVTZXJpYWxpemUodGhpcyxvcHRpb25zKT09PWZhbHNlKXtsb2coJ2FqYXhTdWJtaXQ6IHN1Ym1pdCBhYm9ydGVkIHZpYSBiZWZvcmVTZXJpYWxpemUgY2FsbGJhY2snKTtyZXR1cm4gdGhpczt9CnZhciB0cmFkaXRpb25hbD1vcHRpb25zLnRyYWRpdGlvbmFsO2lmKHRyYWRpdGlvbmFsPT09dW5kZWZpbmVkKXt0cmFkaXRpb25hbD0kLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDt9CnZhciBlbGVtZW50cz1bXTt2YXIgcXgsYT10aGlzLmZvcm1Ub0FycmF5KG9wdGlvbnMuc2VtYW50aWMsZWxlbWVudHMpO2lmKG9wdGlvbnMuZGF0YSl7b3B0aW9ucy5leHRyYURhdGE9b3B0aW9ucy5kYXRhO3F4PSQucGFyYW0ob3B0aW9ucy5kYXRhLHRyYWRpdGlvbmFsKTt9CmlmKG9wdGlvbnMuYmVmb3JlU3VibWl0JiZvcHRpb25zLmJlZm9yZVN1Ym1pdChhLHRoaXMsb3B0aW9ucyk9PT1mYWxzZSl7bG9nKCdhamF4U3VibWl0OiBzdWJtaXQgYWJvcnRlZCB2aWEgYmVmb3JlU3VibWl0IGNhbGxiYWNrJyk7cmV0dXJuIHRoaXM7fQp0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LXZhbGlkYXRlJyxbYSx0aGlzLG9wdGlvbnMsdmV0b10pO2lmKHZldG8udmV0byl7bG9nKCdhamF4U3VibWl0OiBzdWJtaXQgdmV0b2VkIHZpYSBmb3JtLXN1Ym1pdC12YWxpZGF0ZSB0cmlnZ2VyJyk7cmV0dXJuIHRoaXM7fQp2YXIgcT0kLnBhcmFtKGEsdHJhZGl0aW9uYWwpO2lmKHF4KXtxPShxPyhxKycmJytxeCk6cXgpO30KaWYob3B0aW9ucy50eXBlLnRvVXBwZXJDYXNlKCk9PSdHRVQnKXtvcHRpb25zLnVybCs9KG9wdGlvbnMudXJsLmluZGV4T2YoJz8nKT49MD8nJic6Jz8nKStxO29wdGlvbnMuZGF0YT1udWxsO30KZWxzZXtvcHRpb25zLmRhdGE9cTt9CnZhciBjYWxsYmFja3M9W107aWYob3B0aW9ucy5yZXNldEZvcm0pe2NhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCl7JGZvcm0ucmVzZXRGb3JtKCk7fSk7fQppZihvcHRpb25zLmNsZWFyRm9ybSl7Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oKXskZm9ybS5jbGVhckZvcm0ob3B0aW9ucy5pbmNsdWRlSGlkZGVuKTt9KTt9CmlmKCFvcHRpb25zLmRhdGFUeXBlJiZvcHRpb25zLnRhcmdldCl7dmFyIG9sZFN1Y2Nlc3M9b3B0aW9ucy5zdWNjZXNzfHxmdW5jdGlvbigpe307Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oZGF0YSl7dmFyIGZuPW9wdGlvbnMucmVwbGFjZVRhcmdldD8ncmVwbGFjZVdpdGgnOidodG1sJzskKG9wdGlvbnMudGFyZ2V0KVtmbl0oZGF0YSkuZWFjaChvbGRTdWNjZXNzLGFyZ3VtZW50cyk7fSk7fQplbHNlIGlmKG9wdGlvbnMuc3VjY2Vzcyl7Y2FsbGJhY2tzLnB1c2gob3B0aW9ucy5zdWNjZXNzKTt9Cm9wdGlvbnMuc3VjY2Vzcz1mdW5jdGlvbihkYXRhLHN0YXR1cyx4aHIpe3ZhciBjb250ZXh0PW9wdGlvbnMuY29udGV4dHx8dGhpcztmb3IodmFyIGk9MCxtYXg9Y2FsbGJhY2tzLmxlbmd0aDtpPG1heDtpKyspe2NhbGxiYWNrc1tpXS5hcHBseShjb250ZXh0LFtkYXRhLHN0YXR1cyx4aHJ8fCRmb3JtLCRmb3JtXSk7fX07aWYob3B0aW9ucy5lcnJvcil7dmFyIG9sZEVycm9yPW9wdGlvbnMuZXJyb3I7b3B0aW9ucy5lcnJvcj1mdW5jdGlvbih4aHIsc3RhdHVzLGVycm9yKXt2YXIgY29udGV4dD1vcHRpb25zLmNvbnRleHR8fHRoaXM7b2xkRXJyb3IuYXBwbHkoY29udGV4dCxbeGhyLHN0YXR1cyxlcnJvciwkZm9ybV0pO307fQppZihvcHRpb25zLmNvbXBsZXRlKXt2YXIgb2xkQ29tcGxldGU9b3B0aW9ucy5jb21wbGV0ZTtvcHRpb25zLmNvbXBsZXRlPWZ1bmN0aW9uKHhocixzdGF0dXMpe3ZhciBjb250ZXh0PW9wdGlvbnMuY29udGV4dHx8dGhpcztvbGRDb21wbGV0ZS5hcHBseShjb250ZXh0LFt4aHIsc3RhdHVzLCRmb3JtXSk7fTt9CnZhciBmaWxlSW5wdXRzPSQoJ2lucHV0W3R5cGU9ZmlsZV06ZW5hYmxlZCcsdGhpcykuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykudmFsKCkhPT0nJzt9KTt2YXIgaGFzRmlsZUlucHV0cz1maWxlSW5wdXRzLmxlbmd0aD4wO3ZhciBtcD0nbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7dmFyIG11bHRpcGFydD0oJGZvcm0uYXR0cignZW5jdHlwZScpPT1tcHx8JGZvcm0uYXR0cignZW5jb2RpbmcnKT09bXApO3ZhciBmaWxlQVBJPWZlYXR1cmUuZmlsZWFwaSYmZmVhdHVyZS5mb3JtZGF0YTtsb2coImZpbGVBUEkgOiIrZmlsZUFQSSk7dmFyIHNob3VsZFVzZUZyYW1lPShoYXNGaWxlSW5wdXRzfHxtdWx0aXBhcnQpJiYhZmlsZUFQSTt2YXIganF4aHI7aWYob3B0aW9ucy5pZnJhbWUhPT1mYWxzZSYmKG9wdGlvbnMuaWZyYW1lfHxzaG91bGRVc2VGcmFtZSkpe2lmKG9wdGlvbnMuY2xvc2VLZWVwQWxpdmUpeyQuZ2V0KG9wdGlvbnMuY2xvc2VLZWVwQWxpdmUsZnVuY3Rpb24oKXtqcXhocj1maWxlVXBsb2FkSWZyYW1lKGEpO30pO30KZWxzZXtqcXhocj1maWxlVXBsb2FkSWZyYW1lKGEpO319CmVsc2UgaWYoKGhhc0ZpbGVJbnB1dHN8fG11bHRpcGFydCkmJmZpbGVBUEkpe2pxeGhyPWZpbGVVcGxvYWRYaHIoYSk7fQplbHNle2pxeGhyPSQuYWpheChvcHRpb25zKTt9CiRmb3JtLnJlbW92ZURhdGEoJ2pxeGhyJykuZGF0YSgnanF4aHInLGpxeGhyKTtmb3IodmFyIGs9MDtrPGVsZW1lbnRzLmxlbmd0aDtrKyspe2VsZW1lbnRzW2tdPW51bGw7fQp0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LW5vdGlmeScsW3RoaXMsb3B0aW9uc10pO3JldHVybiB0aGlzO2Z1bmN0aW9uIGRlZXBTZXJpYWxpemUoZXh0cmFEYXRhKXt2YXIgc2VyaWFsaXplZD0kLnBhcmFtKGV4dHJhRGF0YSxvcHRpb25zLnRyYWRpdGlvbmFsKS5zcGxpdCgnJicpO3ZhciBsZW49c2VyaWFsaXplZC5sZW5ndGg7dmFyIHJlc3VsdD1bXTt2YXIgaSxwYXJ0O2ZvcihpPTA7aTxsZW47aSsrKXtzZXJpYWxpemVkW2ldPXNlcmlhbGl6ZWRbaV0ucmVwbGFjZSgvXCsvZywnICcpO3BhcnQ9c2VyaWFsaXplZFtpXS5zcGxpdCgnPScpO3Jlc3VsdC5wdXNoKFtkZWNvZGVVUklDb21wb25lbnQocGFydFswXSksZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRbMV0pXSk7fQpyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gZmlsZVVwbG9hZFhocihhKXt2YXIgZm9ybWRhdGE9bmV3IEZvcm1EYXRhKCk7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe2Zvcm1kYXRhLmFwcGVuZChhW2ldLm5hbWUsYVtpXS52YWx1ZSk7fQppZihvcHRpb25zLmV4dHJhRGF0YSl7dmFyIHNlcmlhbGl6ZWREYXRhPWRlZXBTZXJpYWxpemUob3B0aW9ucy5leHRyYURhdGEpO2ZvcihpPTA7aTxzZXJpYWxpemVkRGF0YS5sZW5ndGg7aSsrKXtpZihzZXJpYWxpemVkRGF0YVtpXSl7Zm9ybWRhdGEuYXBwZW5kKHNlcmlhbGl6ZWREYXRhW2ldWzBdLHNlcmlhbGl6ZWREYXRhW2ldWzFdKTt9fX0Kb3B0aW9ucy5kYXRhPW51bGw7dmFyIHM9JC5leHRlbmQodHJ1ZSx7fSwkLmFqYXhTZXR0aW5ncyxvcHRpb25zLHtjb250ZW50VHlwZTpmYWxzZSxwcm9jZXNzRGF0YTpmYWxzZSxjYWNoZTpmYWxzZSx0eXBlOm1ldGhvZHx8J1BPU1QnfSk7aWYob3B0aW9ucy51cGxvYWRQcm9ncmVzcyl7cy54aHI9ZnVuY3Rpb24oKXt2YXIgeGhyPSQuYWpheFNldHRpbmdzLnhocigpO2lmKHhoci51cGxvYWQpe3hoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLGZ1bmN0aW9uKGV2ZW50KXt2YXIgcGVyY2VudD0wO3ZhciBwb3NpdGlvbj1ldmVudC5sb2FkZWR8fGV2ZW50LnBvc2l0aW9uO3ZhciB0b3RhbD1ldmVudC50b3RhbDtpZihldmVudC5sZW5ndGhDb21wdXRhYmxlKXtwZXJjZW50PU1hdGguY2VpbChwb3NpdGlvbi90b3RhbCoxMDApO30Kb3B0aW9ucy51cGxvYWRQcm9ncmVzcyhldmVudCxwb3NpdGlvbix0b3RhbCxwZXJjZW50KTt9LGZhbHNlKTt9CnJldHVybiB4aHI7fTt9CnMuZGF0YT1udWxsO3ZhciBiZWZvcmVTZW5kPXMuYmVmb3JlU2VuZDtzLmJlZm9yZVNlbmQ9ZnVuY3Rpb24oeGhyLG8pe2lmKG9wdGlvbnMuZm9ybURhdGEpe28uZGF0YT1vcHRpb25zLmZvcm1EYXRhO30KZWxzZXtvLmRhdGE9Zm9ybWRhdGE7fQppZihiZWZvcmVTZW5kKXtiZWZvcmVTZW5kLmNhbGwodGhpcyx4aHIsbyk7fX07cmV0dXJuICQuYWpheChzKTt9CmZ1bmN0aW9uIGZpbGVVcGxvYWRJZnJhbWUoYSl7dmFyIGZvcm09JGZvcm1bMF0sZWwsaSxzLGcsaWQsJGlvLGlvLHhocixzdWIsbix0aW1lZE91dCx0aW1lb3V0SGFuZGxlO3ZhciBkZWZlcnJlZD0kLkRlZmVycmVkKCk7ZGVmZXJyZWQuYWJvcnQ9ZnVuY3Rpb24oc3RhdHVzKXt4aHIuYWJvcnQoc3RhdHVzKTt9O2lmKGEpe2ZvcihpPTA7aTxlbGVtZW50cy5sZW5ndGg7aSsrKXtlbD0kKGVsZW1lbnRzW2ldKTtpZihoYXNQcm9wKXtlbC5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO30KZWxzZXtlbC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO319fQpzPSQuZXh0ZW5kKHRydWUse30sJC5hamF4U2V0dGluZ3Msb3B0aW9ucyk7cy5jb250ZXh0PXMuY29udGV4dHx8cztpZD0nanFGb3JtSU8nKyhuZXcgRGF0ZSgpLmdldFRpbWUoKSk7aWYocy5pZnJhbWVUYXJnZXQpeyRpbz0kKHMuaWZyYW1lVGFyZ2V0KTtuPSRpby5hdHRyMignbmFtZScpO2lmKCFuKXskaW8uYXR0cjIoJ25hbWUnLGlkKTt9CmVsc2V7aWQ9bjt9fQplbHNleyRpbz0kKCc8aWZyYW1lIG5hbWU9IicraWQrJyIgc3JjPSInK3MuaWZyYW1lU3JjKyciIC8+Jyk7JGlvLmNzcyh7cG9zaXRpb246J2Fic29sdXRlJyx0b3A6Jy0xMDAwcHgnLGxlZnQ6Jy0xMDAwcHgnfSk7fQppbz0kaW9bMF07eGhyPXthYm9ydGVkOjAscmVzcG9uc2VUZXh0Om51bGwscmVzcG9uc2VYTUw6bnVsbCxzdGF0dXM6MCxzdGF0dXNUZXh0OiduL2EnLGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe30sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oKXt9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oKXt9LGFib3J0OmZ1bmN0aW9uKHN0YXR1cyl7dmFyIGU9KHN0YXR1cz09PSd0aW1lb3V0Jz8ndGltZW91dCc6J2Fib3J0ZWQnKTtsb2coJ2Fib3J0aW5nIHVwbG9hZC4uLiAnK2UpO3RoaXMuYWJvcnRlZD0xO3RyeXtpZihpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKXtpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKCdTdG9wJyk7fX0KY2F0Y2goaWdub3JlKXt9CiRpby5hdHRyKCdzcmMnLHMuaWZyYW1lU3JjKTt4aHIuZXJyb3I9ZTtpZihzLmVycm9yKXtzLmVycm9yLmNhbGwocy5jb250ZXh0LHhocixlLHN0YXR1cyk7fQppZihnKXskLmV2ZW50LnRyaWdnZXIoImFqYXhFcnJvciIsW3hocixzLGVdKTt9CmlmKHMuY29tcGxldGUpe3MuY29tcGxldGUuY2FsbChzLmNvbnRleHQseGhyLGUpO319fTtnPXMuZ2xvYmFsO2lmKGcmJjA9PT0kLmFjdGl2ZSsrKXskLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpO30KaWYoZyl7JC5ldmVudC50cmlnZ2VyKCJhamF4U2VuZCIsW3hocixzXSk7fQppZihzLmJlZm9yZVNlbmQmJnMuYmVmb3JlU2VuZC5jYWxsKHMuY29udGV4dCx4aHIscyk9PT1mYWxzZSl7aWYocy5nbG9iYWwpeyQuYWN0aXZlLS07fQpkZWZlcnJlZC5yZWplY3QoKTtyZXR1cm4gZGVmZXJyZWQ7fQppZih4aHIuYWJvcnRlZCl7ZGVmZXJyZWQucmVqZWN0KCk7cmV0dXJuIGRlZmVycmVkO30Kc3ViPWZvcm0uY2xrO2lmKHN1Yil7bj1zdWIubmFtZTtpZihuJiYhc3ViLmRpc2FibGVkKXtzLmV4dHJhRGF0YT1zLmV4dHJhRGF0YXx8e307cy5leHRyYURhdGFbbl09c3ViLnZhbHVlO2lmKHN1Yi50eXBlPT0iaW1hZ2UiKXtzLmV4dHJhRGF0YVtuKycueCddPWZvcm0uY2xrX3g7cy5leHRyYURhdGFbbisnLnknXT1mb3JtLmNsa195O319fQp2YXIgQ0xJRU5UX1RJTUVPVVRfQUJPUlQ9MTt2YXIgU0VSVkVSX0FCT1JUPTI7ZnVuY3Rpb24gZ2V0RG9jKGZyYW1lKXt2YXIgZG9jPW51bGw7dHJ5e2lmKGZyYW1lLmNvbnRlbnRXaW5kb3cpe2RvYz1mcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O319Y2F0Y2goZXJyKXtsb2coJ2Nhbm5vdCBnZXQgaWZyYW1lLmNvbnRlbnRXaW5kb3cgZG9jdW1lbnQ6ICcrZXJyKTt9CmlmKGRvYyl7cmV0dXJuIGRvYzt9CnRyeXtkb2M9ZnJhbWUuY29udGVudERvY3VtZW50P2ZyYW1lLmNvbnRlbnREb2N1bWVudDpmcmFtZS5kb2N1bWVudDt9Y2F0Y2goZXJyKXtsb2coJ2Nhbm5vdCBnZXQgaWZyYW1lLmNvbnRlbnREb2N1bWVudDogJytlcnIpO2RvYz1mcmFtZS5kb2N1bWVudDt9CnJldHVybiBkb2M7fQp2YXIgY3NyZl90b2tlbj0kKCdtZXRhW25hbWU9Y3NyZi10b2tlbl0nKS5hdHRyKCdjb250ZW50Jyk7dmFyIGNzcmZfcGFyYW09JCgnbWV0YVtuYW1lPWNzcmYtcGFyYW1dJykuYXR0cignY29udGVudCcpO2lmKGNzcmZfcGFyYW0mJmNzcmZfdG9rZW4pe3MuZXh0cmFEYXRhPXMuZXh0cmFEYXRhfHx7fTtzLmV4dHJhRGF0YVtjc3JmX3BhcmFtXT1jc3JmX3Rva2VuO30KZnVuY3Rpb24gZG9TdWJtaXQoKXt2YXIgdD0kZm9ybS5hdHRyMigndGFyZ2V0JyksYT0kZm9ybS5hdHRyMignYWN0aW9uJyksbXA9J211bHRpcGFydC9mb3JtLWRhdGEnLGV0PSRmb3JtLmF0dHIoJ2VuY3R5cGUnKXx8JGZvcm0uYXR0cignZW5jb2RpbmcnKXx8bXA7Zm9ybS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsaWQpO2lmKCFtZXRob2R8fC9wb3N0L2kudGVzdChtZXRob2QpKXtmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywnUE9TVCcpO30KaWYoYSE9cy51cmwpe2Zvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLHMudXJsKTt9CmlmKCFzLnNraXBFbmNvZGluZ092ZXJyaWRlJiYoIW1ldGhvZHx8L3Bvc3QvaS50ZXN0KG1ldGhvZCkpKXskZm9ybS5hdHRyKHtlbmNvZGluZzonbXVsdGlwYXJ0L2Zvcm0tZGF0YScsZW5jdHlwZTonbXVsdGlwYXJ0L2Zvcm0tZGF0YSd9KTt9CmlmKHMudGltZW91dCl7dGltZW91dEhhbmRsZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGltZWRPdXQ9dHJ1ZTtjYihDTElFTlRfVElNRU9VVF9BQk9SVCk7fSxzLnRpbWVvdXQpO30KZnVuY3Rpb24gY2hlY2tTdGF0ZSgpe3RyeXt2YXIgc3RhdGU9Z2V0RG9jKGlvKS5yZWFkeVN0YXRlO2xvZygnc3RhdGUgPSAnK3N0YXRlKTtpZihzdGF0ZSYmc3RhdGUudG9Mb3dlckNhc2UoKT09J3VuaW5pdGlhbGl6ZWQnKXtzZXRUaW1lb3V0KGNoZWNrU3RhdGUsNTApO319CmNhdGNoKGUpe2xvZygnU2VydmVyIGFib3J0OiAnLGUsJyAoJyxlLm5hbWUsJyknKTtjYihTRVJWRVJfQUJPUlQpO2lmKHRpbWVvdXRIYW5kbGUpe2NsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTt9CnRpbWVvdXRIYW5kbGU9dW5kZWZpbmVkO319CnZhciBleHRyYUlucHV0cz1bXTt0cnl7aWYocy5leHRyYURhdGEpe2Zvcih2YXIgbiBpbiBzLmV4dHJhRGF0YSl7aWYocy5leHRyYURhdGEuaGFzT3duUHJvcGVydHkobikpe2lmKCQuaXNQbGFpbk9iamVjdChzLmV4dHJhRGF0YVtuXSkmJnMuZXh0cmFEYXRhW25dLmhhc093blByb3BlcnR5KCduYW1lJykmJnMuZXh0cmFEYXRhW25dLmhhc093blByb3BlcnR5KCd2YWx1ZScpKXtleHRyYUlucHV0cy5wdXNoKCQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Iicrcy5leHRyYURhdGFbbl0ubmFtZSsnIj4nKS52YWwocy5leHRyYURhdGFbbl0udmFsdWUpLmFwcGVuZFRvKGZvcm0pWzBdKTt9ZWxzZXtleHRyYUlucHV0cy5wdXNoKCQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IicrbisnIj4nKS52YWwocy5leHRyYURhdGFbbl0pLmFwcGVuZFRvKGZvcm0pWzBdKTt9fX19CmlmKCFzLmlmcmFtZVRhcmdldCl7JGlvLmFwcGVuZFRvKCdib2R5Jyk7fQppZihpby5hdHRhY2hFdmVudCl7aW8uYXR0YWNoRXZlbnQoJ29ubG9hZCcsY2IpO30KZWxzZXtpby5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxjYixmYWxzZSk7fQpzZXRUaW1lb3V0KGNoZWNrU3RhdGUsMTUpO3RyeXtmb3JtLnN1Ym1pdCgpO31jYXRjaChlcnIpe3ZhciBzdWJtaXRGbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJykuc3VibWl0O3N1Ym1pdEZuLmFwcGx5KGZvcm0pO319CmZpbmFsbHl7Zm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsYSk7Zm9ybS5zZXRBdHRyaWJ1dGUoJ2VuY3R5cGUnLGV0KTtpZih0KXtmb3JtLnNldEF0dHJpYnV0ZSgndGFyZ2V0Jyx0KTt9ZWxzZXskZm9ybS5yZW1vdmVBdHRyKCd0YXJnZXQnKTt9CiQoZXh0cmFJbnB1dHMpLnJlbW92ZSgpO319CmlmKHMuZm9yY2VTeW5jKXtkb1N1Ym1pdCgpO30KZWxzZXtzZXRUaW1lb3V0KGRvU3VibWl0LDEwKTt9CnZhciBkYXRhLGRvYyxkb21DaGVja0NvdW50PTUwLGNhbGxiYWNrUHJvY2Vzc2VkO2Z1bmN0aW9uIGNiKGUpe2lmKHhoci5hYm9ydGVkfHxjYWxsYmFja1Byb2Nlc3NlZCl7cmV0dXJuO30KZG9jPWdldERvYyhpbyk7aWYoIWRvYyl7bG9nKCdjYW5ub3QgYWNjZXNzIHJlc3BvbnNlIGRvY3VtZW50Jyk7ZT1TRVJWRVJfQUJPUlQ7fQppZihlPT09Q0xJRU5UX1RJTUVPVVRfQUJPUlQmJnhocil7eGhyLmFib3J0KCd0aW1lb3V0Jyk7ZGVmZXJyZWQucmVqZWN0KHhociwndGltZW91dCcpO3JldHVybjt9CmVsc2UgaWYoZT09U0VSVkVSX0FCT1JUJiZ4aHIpe3hoci5hYm9ydCgnc2VydmVyIGFib3J0Jyk7ZGVmZXJyZWQucmVqZWN0KHhociwnZXJyb3InLCdzZXJ2ZXIgYWJvcnQnKTtyZXR1cm47fQppZighZG9jfHxkb2MubG9jYXRpb24uaHJlZj09cy5pZnJhbWVTcmMpe2lmKCF0aW1lZE91dCl7cmV0dXJuO319CmlmKGlvLmRldGFjaEV2ZW50KXtpby5kZXRhY2hFdmVudCgnb25sb2FkJyxjYik7fQplbHNle2lvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLGNiLGZhbHNlKTt9CnZhciBzdGF0dXM9J3N1Y2Nlc3MnLGVyck1zZzt0cnl7aWYodGltZWRPdXQpe3Rocm93J3RpbWVvdXQnO30KdmFyIGlzWG1sPXMuZGF0YVR5cGU9PSd4bWwnfHxkb2MuWE1MRG9jdW1lbnR8fCQuaXNYTUxEb2MoZG9jKTtsb2coJ2lzWG1sPScraXNYbWwpO2lmKCFpc1htbCYmd2luZG93Lm9wZXJhJiYoZG9jLmJvZHk9PT1udWxsfHwhZG9jLmJvZHkuaW5uZXJIVE1MKSl7aWYoLS1kb21DaGVja0NvdW50KXtsb2coJ3JlcXVlaW5nIG9uTG9hZCBjYWxsYmFjaywgRE9NIG5vdCBhdmFpbGFibGUnKTtzZXRUaW1lb3V0KGNiLDI1MCk7cmV0dXJuO319CnZhciBkb2NSb290PWRvYy5ib2R5P2RvYy5ib2R5OmRvYy5kb2N1bWVudEVsZW1lbnQ7eGhyLnJlc3BvbnNlVGV4dD1kb2NSb290P2RvY1Jvb3QuaW5uZXJIVE1MOm51bGw7eGhyLnJlc3BvbnNlWE1MPWRvYy5YTUxEb2N1bWVudD9kb2MuWE1MRG9jdW1lbnQ6ZG9jO2lmKGlzWG1sKXtzLmRhdGFUeXBlPSd4bWwnO30KeGhyLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGhlYWRlcil7dmFyIGhlYWRlcnM9eydjb250ZW50LXR5cGUnOnMuZGF0YVR5cGV9O3JldHVybiBoZWFkZXJzW2hlYWRlci50b0xvd2VyQ2FzZSgpXTt9O2lmKGRvY1Jvb3Qpe3hoci5zdGF0dXM9TnVtYmVyKGRvY1Jvb3QuZ2V0QXR0cmlidXRlKCdzdGF0dXMnKSl8fHhoci5zdGF0dXM7eGhyLnN0YXR1c1RleHQ9ZG9jUm9vdC5nZXRBdHRyaWJ1dGUoJ3N0YXR1c1RleHQnKXx8eGhyLnN0YXR1c1RleHQ7fQp2YXIgZHQ9KHMuZGF0YVR5cGV8fCcnKS50b0xvd2VyQ2FzZSgpO3ZhciBzY3I9Lyhqc29ufHNjcmlwdHx0ZXh0KS8udGVzdChkdCk7aWYoc2NyfHxzLnRleHRhcmVhKXt2YXIgdGE9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0ZXh0YXJlYScpWzBdO2lmKHRhKXt4aHIucmVzcG9uc2VUZXh0PXRhLnZhbHVlO3hoci5zdGF0dXM9TnVtYmVyKHRhLmdldEF0dHJpYnV0ZSgnc3RhdHVzJykpfHx4aHIuc3RhdHVzO3hoci5zdGF0dXNUZXh0PXRhLmdldEF0dHJpYnV0ZSgnc3RhdHVzVGV4dCcpfHx4aHIuc3RhdHVzVGV4dDt9CmVsc2UgaWYoc2NyKXt2YXIgcHJlPWRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncHJlJylbMF07dmFyIGI9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07aWYocHJlKXt4aHIucmVzcG9uc2VUZXh0PXByZS50ZXh0Q29udGVudD9wcmUudGV4dENvbnRlbnQ6cHJlLmlubmVyVGV4dDt9CmVsc2UgaWYoYil7eGhyLnJlc3BvbnNlVGV4dD1iLnRleHRDb250ZW50P2IudGV4dENvbnRlbnQ6Yi5pbm5lclRleHQ7fX19CmVsc2UgaWYoZHQ9PSd4bWwnJiYheGhyLnJlc3BvbnNlWE1MJiZ4aHIucmVzcG9uc2VUZXh0KXt4aHIucmVzcG9uc2VYTUw9dG9YbWwoeGhyLnJlc3BvbnNlVGV4dCk7fQp0cnl7ZGF0YT1odHRwRGF0YSh4aHIsZHQscyk7fQpjYXRjaChlcnIpe3N0YXR1cz0ncGFyc2VyZXJyb3InO3hoci5lcnJvcj1lcnJNc2c9KGVycnx8c3RhdHVzKTt9fQpjYXRjaChlcnIpe2xvZygnZXJyb3IgY2F1Z2h0OiAnLGVycik7c3RhdHVzPSdlcnJvcic7eGhyLmVycm9yPWVyck1zZz0oZXJyfHxzdGF0dXMpO30KaWYoeGhyLmFib3J0ZWQpe2xvZygndXBsb2FkIGFib3J0ZWQnKTtzdGF0dXM9bnVsbDt9CmlmKHhoci5zdGF0dXMpe3N0YXR1cz0oeGhyLnN0YXR1cz49MjAwJiZ4aHIuc3RhdHVzPDMwMHx8eGhyLnN0YXR1cz09PTMwNCk/J3N1Y2Nlc3MnOidlcnJvcic7fQppZihzdGF0dXM9PT0nc3VjY2Vzcycpe2lmKHMuc3VjY2Vzcyl7cy5zdWNjZXNzLmNhbGwocy5jb250ZXh0LGRhdGEsJ3N1Y2Nlc3MnLHhocik7fQpkZWZlcnJlZC5yZXNvbHZlKHhoci5yZXNwb25zZVRleHQsJ3N1Y2Nlc3MnLHhocik7aWYoZyl7JC5ldmVudC50cmlnZ2VyKCJhamF4U3VjY2VzcyIsW3hocixzXSk7fX0KZWxzZSBpZihzdGF0dXMpe2lmKGVyck1zZz09PXVuZGVmaW5lZCl7ZXJyTXNnPXhoci5zdGF0dXNUZXh0O30KaWYocy5lcnJvcil7cy5lcnJvci5jYWxsKHMuY29udGV4dCx4aHIsc3RhdHVzLGVyck1zZyk7fQpkZWZlcnJlZC5yZWplY3QoeGhyLCdlcnJvcicsZXJyTXNnKTtpZihnKXskLmV2ZW50LnRyaWdnZXIoImFqYXhFcnJvciIsW3hocixzLGVyck1zZ10pO319CmlmKGcpeyQuZXZlbnQudHJpZ2dlcigiYWpheENvbXBsZXRlIixbeGhyLHNdKTt9CmlmKGcmJiEtLSQuYWN0aXZlKXskLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIik7fQppZihzLmNvbXBsZXRlKXtzLmNvbXBsZXRlLmNhbGwocy5jb250ZXh0LHhocixzdGF0dXMpO30KY2FsbGJhY2tQcm9jZXNzZWQ9dHJ1ZTtpZihzLnRpbWVvdXQpe2NsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTt9CnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighcy5pZnJhbWVUYXJnZXQpeyRpby5yZW1vdmUoKTt9CmVsc2V7JGlvLmF0dHIoJ3NyYycscy5pZnJhbWVTcmMpO30KeGhyLnJlc3BvbnNlWE1MPW51bGw7fSwxMDApO30KdmFyIHRvWG1sPSQucGFyc2VYTUx8fGZ1bmN0aW9uKHMsZG9jKXtpZih3aW5kb3cuQWN0aXZlWE9iamVjdCl7ZG9jPW5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJyk7ZG9jLmFzeW5jPSdmYWxzZSc7ZG9jLmxvYWRYTUwocyk7fQplbHNle2RvYz0obmV3IERPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcocywndGV4dC94bWwnKTt9CnJldHVybihkb2MmJmRvYy5kb2N1bWVudEVsZW1lbnQmJmRvYy5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPSdwYXJzZXJlcnJvcicpP2RvYzpudWxsO307dmFyIHBhcnNlSlNPTj0kLnBhcnNlSlNPTnx8ZnVuY3Rpb24ocyl7cmV0dXJuIHdpbmRvd1snZXZhbCddKCcoJytzKycpJyk7fTt2YXIgaHR0cERhdGE9ZnVuY3Rpb24oeGhyLHR5cGUscyl7dmFyIGN0PXhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyl8fCcnLHhtbD10eXBlPT09J3htbCd8fCF0eXBlJiZjdC5pbmRleE9mKCd4bWwnKT49MCxkYXRhPXhtbD94aHIucmVzcG9uc2VYTUw6eGhyLnJlc3BvbnNlVGV4dDtpZih4bWwmJmRhdGEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lPT09J3BhcnNlcmVycm9yJyl7aWYoJC5lcnJvcil7JC5lcnJvcigncGFyc2VyZXJyb3InKTt9fQppZihzJiZzLmRhdGFGaWx0ZXIpe2RhdGE9cy5kYXRhRmlsdGVyKGRhdGEsdHlwZSk7fQppZih0eXBlb2YgZGF0YT09PSdzdHJpbmcnKXtpZih0eXBlPT09J2pzb24nfHwhdHlwZSYmY3QuaW5kZXhPZignanNvbicpPj0wKXtkYXRhPXBhcnNlSlNPTihkYXRhKTt9ZWxzZSBpZih0eXBlPT09InNjcmlwdCJ8fCF0eXBlJiZjdC5pbmRleE9mKCJqYXZhc2NyaXB0Iik+PTApeyQuZ2xvYmFsRXZhbChkYXRhKTt9fQpyZXR1cm4gZGF0YTt9O3JldHVybiBkZWZlcnJlZDt9fTskLmZuLmFqYXhGb3JtPWZ1bmN0aW9uKG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307b3B0aW9ucy5kZWxlZ2F0aW9uPW9wdGlvbnMuZGVsZWdhdGlvbiYmJC5pc0Z1bmN0aW9uKCQuZm4ub24pO2lmKCFvcHRpb25zLmRlbGVnYXRpb24mJnRoaXMubGVuZ3RoPT09MCl7dmFyIG89e3M6dGhpcy5zZWxlY3RvcixjOnRoaXMuY29udGV4dH07aWYoISQuaXNSZWFkeSYmby5zKXtsb2coJ0RPTSBub3QgcmVhZHksIHF1ZXVpbmcgYWpheEZvcm0nKTskKGZ1bmN0aW9uKCl7JChvLnMsby5jKS5hamF4Rm9ybShvcHRpb25zKTt9KTtyZXR1cm4gdGhpczt9CmxvZygndGVybWluYXRpbmc7IHplcm8gZWxlbWVudHMgZm91bmQgYnkgc2VsZWN0b3InKygkLmlzUmVhZHk/Jyc6JyAoRE9NIG5vdCByZWFkeSknKSk7cmV0dXJuIHRoaXM7fQppZihvcHRpb25zLmRlbGVnYXRpb24peyQoZG9jdW1lbnQpLm9mZignc3VibWl0LmZvcm0tcGx1Z2luJyx0aGlzLnNlbGVjdG9yLGRvQWpheFN1Ym1pdCkub2ZmKCdjbGljay5mb3JtLXBsdWdpbicsdGhpcy5zZWxlY3RvcixjYXB0dXJlU3VibWl0dGluZ0VsZW1lbnQpLm9uKCdzdWJtaXQuZm9ybS1wbHVnaW4nLHRoaXMuc2VsZWN0b3Isb3B0aW9ucyxkb0FqYXhTdWJtaXQpLm9uKCdjbGljay5mb3JtLXBsdWdpbicsdGhpcy5zZWxlY3RvcixvcHRpb25zLGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudCk7cmV0dXJuIHRoaXM7fQpyZXR1cm4gdGhpcy5hamF4Rm9ybVVuYmluZCgpLmJpbmQoJ3N1Ym1pdC5mb3JtLXBsdWdpbicsb3B0aW9ucyxkb0FqYXhTdWJtaXQpLmJpbmQoJ2NsaWNrLmZvcm0tcGx1Z2luJyxvcHRpb25zLGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudCk7fTtmdW5jdGlvbiBkb0FqYXhTdWJtaXQoZSl7dmFyIG9wdGlvbnM9ZS5kYXRhO2lmKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtlLnByZXZlbnREZWZhdWx0KCk7JChlLnRhcmdldCkuYWpheFN1Ym1pdChvcHRpb25zKTt9fQpmdW5jdGlvbiBjYXB0dXJlU3VibWl0dGluZ0VsZW1lbnQoZSl7dmFyIHRhcmdldD1lLnRhcmdldDt2YXIgJGVsPSQodGFyZ2V0KTtpZighKCRlbC5pcygiW3R5cGU9c3VibWl0XSxbdHlwZT1pbWFnZV0iKSkpe3ZhciB0PSRlbC5jbG9zZXN0KCdbdHlwZT1zdWJtaXRdJyk7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm47fQp0YXJnZXQ9dFswXTt9CnZhciBmb3JtPXRoaXM7Zm9ybS5jbGs9dGFyZ2V0O2lmKHRhcmdldC50eXBlPT0naW1hZ2UnKXtpZihlLm9mZnNldFghPT11bmRlZmluZWQpe2Zvcm0uY2xrX3g9ZS5vZmZzZXRYO2Zvcm0uY2xrX3k9ZS5vZmZzZXRZO31lbHNlIGlmKHR5cGVvZiAkLmZuLm9mZnNldD09J2Z1bmN0aW9uJyl7dmFyIG9mZnNldD0kZWwub2Zmc2V0KCk7Zm9ybS5jbGtfeD1lLnBhZ2VYLW9mZnNldC5sZWZ0O2Zvcm0uY2xrX3k9ZS5wYWdlWS1vZmZzZXQudG9wO31lbHNle2Zvcm0uY2xrX3g9ZS5wYWdlWC10YXJnZXQub2Zmc2V0TGVmdDtmb3JtLmNsa195PWUucGFnZVktdGFyZ2V0Lm9mZnNldFRvcDt9fQpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9ybS5jbGs9Zm9ybS5jbGtfeD1mb3JtLmNsa195PW51bGw7fSwxMDApO30KJC5mbi5hamF4Rm9ybVVuYmluZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZCgnc3VibWl0LmZvcm0tcGx1Z2luIGNsaWNrLmZvcm0tcGx1Z2luJyk7fTskLmZuLmZvcm1Ub0FycmF5PWZ1bmN0aW9uKHNlbWFudGljLGVsZW1lbnRzKXt2YXIgYT1bXTtpZih0aGlzLmxlbmd0aD09PTApe3JldHVybiBhO30KdmFyIGZvcm09dGhpc1swXTt2YXIgZm9ybUlkPXRoaXMuYXR0cignaWQnKTt2YXIgZWxzPXNlbWFudGljP2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTpmb3JtLmVsZW1lbnRzO3ZhciBlbHMyO2lmKGVscyYmIS9NU0lFIFs2NzhdLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtlbHM9JChlbHMpLmdldCgpO30KaWYoZm9ybUlkKXtlbHMyPSQoJzppbnB1dFtmb3JtPSInK2Zvcm1JZCsnIl0nKS5nZXQoKTtpZihlbHMyLmxlbmd0aCl7ZWxzPShlbHN8fFtdKS5jb25jYXQoZWxzMik7fX0KaWYoIWVsc3x8IWVscy5sZW5ndGgpe3JldHVybiBhO30KdmFyIGksaixuLHYsZWwsbWF4LGptYXg7Zm9yKGk9MCxtYXg9ZWxzLmxlbmd0aDtpPG1heDtpKyspe2VsPWVsc1tpXTtuPWVsLm5hbWU7aWYoIW58fGVsLmRpc2FibGVkKXtjb250aW51ZTt9CmlmKHNlbWFudGljJiZmb3JtLmNsayYmZWwudHlwZT09ImltYWdlIil7aWYoZm9ybS5jbGs9PWVsKXthLnB1c2goe25hbWU6bix2YWx1ZTokKGVsKS52YWwoKSx0eXBlOmVsLnR5cGV9KTthLnB1c2goe25hbWU6bisnLngnLHZhbHVlOmZvcm0uY2xrX3h9LHtuYW1lOm4rJy55Jyx2YWx1ZTpmb3JtLmNsa195fSk7fQpjb250aW51ZTt9CnY9JC5maWVsZFZhbHVlKGVsLHRydWUpO2lmKHYmJnYuY29uc3RydWN0b3I9PUFycmF5KXtpZihlbGVtZW50cyl7ZWxlbWVudHMucHVzaChlbCk7fQpmb3Ioaj0wLGptYXg9di5sZW5ndGg7ajxqbWF4O2orKyl7YS5wdXNoKHtuYW1lOm4sdmFsdWU6dltqXX0pO319CmVsc2UgaWYoZmVhdHVyZS5maWxlYXBpJiZlbC50eXBlPT0nZmlsZScpe2lmKGVsZW1lbnRzKXtlbGVtZW50cy5wdXNoKGVsKTt9CnZhciBmaWxlcz1lbC5maWxlcztpZihmaWxlcy5sZW5ndGgpe2ZvcihqPTA7ajxmaWxlcy5sZW5ndGg7aisrKXthLnB1c2goe25hbWU6bix2YWx1ZTpmaWxlc1tqXSx0eXBlOmVsLnR5cGV9KTt9fQplbHNle2EucHVzaCh7bmFtZTpuLHZhbHVlOicnLHR5cGU6ZWwudHlwZX0pO319CmVsc2UgaWYodiE9PW51bGwmJnR5cGVvZiB2IT0ndW5kZWZpbmVkJyl7aWYoZWxlbWVudHMpe2VsZW1lbnRzLnB1c2goZWwpO30KYS5wdXNoKHtuYW1lOm4sdmFsdWU6dix0eXBlOmVsLnR5cGUscmVxdWlyZWQ6ZWwucmVxdWlyZWR9KTt9fQppZighc2VtYW50aWMmJmZvcm0uY2xrKXt2YXIgJGlucHV0PSQoZm9ybS5jbGspLGlucHV0PSRpbnB1dFswXTtuPWlucHV0Lm5hbWU7aWYobiYmIWlucHV0LmRpc2FibGVkJiZpbnB1dC50eXBlPT0naW1hZ2UnKXthLnB1c2goe25hbWU6bix2YWx1ZTokaW5wdXQudmFsKCl9KTthLnB1c2goe25hbWU6bisnLngnLHZhbHVlOmZvcm0uY2xrX3h9LHtuYW1lOm4rJy55Jyx2YWx1ZTpmb3JtLmNsa195fSk7fX0KcmV0dXJuIGE7fTskLmZuLmZvcm1TZXJpYWxpemU9ZnVuY3Rpb24oc2VtYW50aWMpe3JldHVybiAkLnBhcmFtKHRoaXMuZm9ybVRvQXJyYXkoc2VtYW50aWMpKTt9OyQuZm4uZmllbGRTZXJpYWxpemU9ZnVuY3Rpb24oc3VjY2Vzc2Z1bCl7dmFyIGE9W107dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dGhpcy5uYW1lO2lmKCFuKXtyZXR1cm47fQp2YXIgdj0kLmZpZWxkVmFsdWUodGhpcyxzdWNjZXNzZnVsKTtpZih2JiZ2LmNvbnN0cnVjdG9yPT1BcnJheSl7Zm9yKHZhciBpPTAsbWF4PXYubGVuZ3RoO2k8bWF4O2krKyl7YS5wdXNoKHtuYW1lOm4sdmFsdWU6dltpXX0pO319CmVsc2UgaWYodiE9PW51bGwmJnR5cGVvZiB2IT0ndW5kZWZpbmVkJyl7YS5wdXNoKHtuYW1lOnRoaXMubmFtZSx2YWx1ZTp2fSk7fX0pO3JldHVybiAkLnBhcmFtKGEpO307JC5mbi5maWVsZFZhbHVlPWZ1bmN0aW9uKHN1Y2Nlc3NmdWwpe2Zvcih2YXIgdmFsPVtdLGk9MCxtYXg9dGhpcy5sZW5ndGg7aTxtYXg7aSsrKXt2YXIgZWw9dGhpc1tpXTt2YXIgdj0kLmZpZWxkVmFsdWUoZWwsc3VjY2Vzc2Z1bCk7aWYodj09PW51bGx8fHR5cGVvZiB2PT0ndW5kZWZpbmVkJ3x8KHYuY29uc3RydWN0b3I9PUFycmF5JiYhdi5sZW5ndGgpKXtjb250aW51ZTt9CmlmKHYuY29uc3RydWN0b3I9PUFycmF5KXskLm1lcmdlKHZhbCx2KTt9CmVsc2V7dmFsLnB1c2godik7fX0KcmV0dXJuIHZhbDt9OyQuZmllbGRWYWx1ZT1mdW5jdGlvbihlbCxzdWNjZXNzZnVsKXt2YXIgbj1lbC5uYW1lLHQ9ZWwudHlwZSx0YWc9ZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHN1Y2Nlc3NmdWw9PT11bmRlZmluZWQpe3N1Y2Nlc3NmdWw9dHJ1ZTt9CmlmKHN1Y2Nlc3NmdWwmJighbnx8ZWwuZGlzYWJsZWR8fHQ9PSdyZXNldCd8fHQ9PSdidXR0b24nfHwodD09J2NoZWNrYm94J3x8dD09J3JhZGlvJykmJiFlbC5jaGVja2VkfHwodD09J3N1Ym1pdCd8fHQ9PSdpbWFnZScpJiZlbC5mb3JtJiZlbC5mb3JtLmNsayE9ZWx8fHRhZz09J3NlbGVjdCcmJmVsLnNlbGVjdGVkSW5kZXg9PS0xKSl7cmV0dXJuIG51bGw7fQppZih0YWc9PSdzZWxlY3QnKXt2YXIgaW5kZXg9ZWwuc2VsZWN0ZWRJbmRleDtpZihpbmRleDwwKXtyZXR1cm4gbnVsbDt9CnZhciBhPVtdLG9wcz1lbC5vcHRpb25zO3ZhciBvbmU9KHQ9PSdzZWxlY3Qtb25lJyk7dmFyIG1heD0ob25lP2luZGV4KzE6b3BzLmxlbmd0aCk7Zm9yKHZhciBpPShvbmU/aW5kZXg6MCk7aTxtYXg7aSsrKXt2YXIgb3A9b3BzW2ldO2lmKG9wLnNlbGVjdGVkKXt2YXIgdj1vcC52YWx1ZTtpZighdil7dj0ob3AuYXR0cmlidXRlcyYmb3AuYXR0cmlidXRlcy52YWx1ZSYmIShvcC5hdHRyaWJ1dGVzLnZhbHVlLnNwZWNpZmllZCkpP29wLnRleHQ6b3AudmFsdWU7fQppZihvbmUpe3JldHVybiB2O30KYS5wdXNoKHYpO319CnJldHVybiBhO30KcmV0dXJuICQoZWwpLnZhbCgpO307JC5mbi5jbGVhckZvcm09ZnVuY3Rpb24oaW5jbHVkZUhpZGRlbil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyQoJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYScsdGhpcykuY2xlYXJGaWVsZHMoaW5jbHVkZUhpZGRlbik7fSk7fTskLmZuLmNsZWFyRmllbGRzPSQuZm4uY2xlYXJJbnB1dHM9ZnVuY3Rpb24oaW5jbHVkZUhpZGRlbil7dmFyIHJlPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxlbWFpbHxtb250aHxudW1iZXJ8cGFzc3dvcmR8cmFuZ2V8c2VhcmNofHRlbHx0ZXh0fHRpbWV8dXJsfHdlZWspJC9pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD10aGlzLnR5cGUsdGFnPXRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHJlLnRlc3QodCl8fHRhZz09J3RleHRhcmVhJyl7dGhpcy52YWx1ZT0nJzt9CmVsc2UgaWYodD09J2NoZWNrYm94J3x8dD09J3JhZGlvJyl7dGhpcy5jaGVja2VkPWZhbHNlO30KZWxzZSBpZih0YWc9PSdzZWxlY3QnKXt0aGlzLnNlbGVjdGVkSW5kZXg9LTE7fQplbHNlIGlmKHQ9PSJmaWxlIil7aWYoL01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpeyQodGhpcykucmVwbGFjZVdpdGgoJCh0aGlzKS5jbG9uZSh0cnVlKSk7fWVsc2V7JCh0aGlzKS52YWwoJycpO319CmVsc2UgaWYoaW5jbHVkZUhpZGRlbil7aWYoKGluY2x1ZGVIaWRkZW49PT10cnVlJiYvaGlkZGVuLy50ZXN0KHQpKXx8KHR5cGVvZiBpbmNsdWRlSGlkZGVuPT0nc3RyaW5nJyYmJCh0aGlzKS5pcyhpbmNsdWRlSGlkZGVuKSkpe3RoaXMudmFsdWU9Jyc7fX19KTt9OyQuZm4ucmVzZXRGb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLnJlc2V0PT0nZnVuY3Rpb24nfHwodHlwZW9mIHRoaXMucmVzZXQ9PSdvYmplY3QnJiYhdGhpcy5yZXNldC5ub2RlVHlwZSkpe3RoaXMucmVzZXQoKTt9fSk7fTskLmZuLmVuYWJsZT1mdW5jdGlvbihiKXtpZihiPT09dW5kZWZpbmVkKXtiPXRydWU7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hYjt9KTt9OyQuZm4uc2VsZWN0ZWQ9ZnVuY3Rpb24oc2VsZWN0KXtpZihzZWxlY3Q9PT11bmRlZmluZWQpe3NlbGVjdD10cnVlO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXRoaXMudHlwZTtpZih0PT0nY2hlY2tib3gnfHx0PT0ncmFkaW8nKXt0aGlzLmNoZWNrZWQ9c2VsZWN0O30KZWxzZSBpZih0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09J29wdGlvbicpe3ZhciAkc2VsPSQodGhpcykucGFyZW50KCdzZWxlY3QnKTtpZihzZWxlY3QmJiRzZWxbMF0mJiRzZWxbMF0udHlwZT09J3NlbGVjdC1vbmUnKXskc2VsLmZpbmQoJ29wdGlvbicpLnNlbGVjdGVkKGZhbHNlKTt9CnRoaXMuc2VsZWN0ZWQ9c2VsZWN0O319KTt9OyQuZm4uYWpheFN1Ym1pdC5kZWJ1Zz1mYWxzZTtmdW5jdGlvbiBsb2coKXtpZighJC5mbi5hamF4U3VibWl0LmRlYnVnKXtyZXR1cm47fQp2YXIgbXNnPSdbanF1ZXJ5LmZvcm1dICcrQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChhcmd1bWVudHMsJycpO2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cpe3dpbmRvdy5jb25zb2xlLmxvZyhtc2cpO30KZWxzZSBpZih3aW5kb3cub3BlcmEmJndpbmRvdy5vcGVyYS5wb3N0RXJyb3Ipe3dpbmRvdy5vcGVyYS5wb3N0RXJyb3IobXNnKTt9fX0pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvanF1ZXJ5LmJhLWJicS9qcXVlcnkuYmEtYmJxLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKCQsd2luZG93KXsnJDpub211bmdlJzt2YXIgdW5kZWZpbmVkLGFwcz1BcnJheS5wcm90b3R5cGUuc2xpY2UsZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudCxqcV9wYXJhbT0kLnBhcmFtLGpxX3BhcmFtX3NvcnRlZCxqcV9wYXJhbV9mcmFnbWVudCxqcV9kZXBhcmFtLGpxX2RlcGFyYW1fZnJhZ21lbnQsanFfYmJxPSQuYmJxPSQuYmJxfHx7fSxqcV9iYnFfcHVzaFN0YXRlLGpxX2JicV9nZXRTdGF0ZSxqcV9lbGVtVXJsQXR0cixzcGVjaWFsPSQuZXZlbnQuc3BlY2lhbCxzdHJfaGFzaGNoYW5nZT0naGFzaGNoYW5nZScsc3RyX3F1ZXJ5c3RyaW5nPSdxdWVyeXN0cmluZycsc3RyX2ZyYWdtZW50PSdmcmFnbWVudCcsc3RyX2VsZW1VcmxBdHRyPSdlbGVtVXJsQXR0cicsc3RyX2hyZWY9J2hyZWYnLHN0cl9zcmM9J3NyYycscmVfcGFyYW1zX3F1ZXJ5c3RyaW5nPS9eLipcP3wjLiokL2cscmVfcGFyYW1zX2ZyYWdtZW50LHJlX2ZyYWdtZW50LHJlX25vX2VzY2FwZSxhamF4X2NyYXdsYWJsZSxmcmFnbWVudF9wcmVmaXgsZWxlbVVybEF0dHJfY2FjaGU9e307ZnVuY3Rpb24gaXNfc3RyaW5nKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0nc3RyaW5nJzt9O2Z1bmN0aW9uIGN1cnJ5KGZ1bmMpe3ZhciBhcmdzPWFwcy5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZnVuYy5hcHBseSh0aGlzLGFyZ3MuY29uY2F0KGFwcy5jYWxsKGFyZ3VtZW50cykpKTt9O307ZnVuY3Rpb24gZ2V0X2ZyYWdtZW50KHVybCl7cmV0dXJuIHVybC5yZXBsYWNlKHJlX2ZyYWdtZW50LCckMicpO307ZnVuY3Rpb24gZ2V0X3F1ZXJ5c3RyaW5nKHVybCl7cmV0dXJuIHVybC5yZXBsYWNlKC8oPzpeW14/I10qXD8oW14jXSopLiokKT8uKi8sJyQxJyk7fTtmdW5jdGlvbiBqcV9wYXJhbV9zdWIoaXNfZnJhZ21lbnQsZ2V0X2Z1bmMsdXJsLHBhcmFtcyxtZXJnZV9tb2RlKXt2YXIgcmVzdWx0LHFzLG1hdGNoZXMsdXJsX3BhcmFtcyxoYXNoO2lmKHBhcmFtcyE9PXVuZGVmaW5lZCl7bWF0Y2hlcz11cmwubWF0Y2goaXNfZnJhZ21lbnQ/cmVfZnJhZ21lbnQ6L14oW14jP10qKVw/PyhbXiNdKikoIz8uKikvKTtoYXNoPW1hdGNoZXNbM118fCcnO2lmKG1lcmdlX21vZGU9PT0yJiZpc19zdHJpbmcocGFyYW1zKSl7cXM9cGFyYW1zLnJlcGxhY2UoaXNfZnJhZ21lbnQ/cmVfcGFyYW1zX2ZyYWdtZW50OnJlX3BhcmFtc19xdWVyeXN0cmluZywnJyk7fWVsc2V7dXJsX3BhcmFtcz1qcV9kZXBhcmFtKG1hdGNoZXNbMl0pO3BhcmFtcz1pc19zdHJpbmcocGFyYW1zKT9qcV9kZXBhcmFtW2lzX2ZyYWdtZW50P3N0cl9mcmFnbWVudDpzdHJfcXVlcnlzdHJpbmddKHBhcmFtcyk6cGFyYW1zO3FzPW1lcmdlX21vZGU9PT0yP3BhcmFtczptZXJnZV9tb2RlPT09MT8kLmV4dGVuZCh7fSxwYXJhbXMsdXJsX3BhcmFtcyk6JC5leHRlbmQoe30sdXJsX3BhcmFtcyxwYXJhbXMpO3FzPWpxX3BhcmFtX3NvcnRlZChxcyk7aWYoaXNfZnJhZ21lbnQpe3FzPXFzLnJlcGxhY2UocmVfbm9fZXNjYXBlLGRlY29kZSk7fX0KcmVzdWx0PW1hdGNoZXNbMV0rKGlzX2ZyYWdtZW50P2ZyYWdtZW50X3ByZWZpeDpxc3x8IW1hdGNoZXNbMV0/Jz8nOicnKStxcytoYXNoO31lbHNle3Jlc3VsdD1nZXRfZnVuYyh1cmwhPT11bmRlZmluZWQ/dXJsOmxvY2F0aW9uLmhyZWYpO30KcmV0dXJuIHJlc3VsdDt9O2pxX3BhcmFtW3N0cl9xdWVyeXN0cmluZ109Y3VycnkoanFfcGFyYW1fc3ViLDAsZ2V0X3F1ZXJ5c3RyaW5nKTtqcV9wYXJhbVtzdHJfZnJhZ21lbnRdPWpxX3BhcmFtX2ZyYWdtZW50PWN1cnJ5KGpxX3BhcmFtX3N1YiwxLGdldF9mcmFnbWVudCk7anFfcGFyYW0uc29ydGVkPWpxX3BhcmFtX3NvcnRlZD1mdW5jdGlvbihhLHRyYWRpdGlvbmFsKXt2YXIgYXJyPVtdLG9iaj17fTskLmVhY2goanFfcGFyYW0oYSx0cmFkaXRpb25hbCkuc3BsaXQoJyYnKSxmdW5jdGlvbihpLHYpe3ZhciBrZXk9di5yZXBsYWNlKC8oPzolNUJ8PSkuKiQvLCcnKSxrZXlfb2JqPW9ialtrZXldO2lmKCFrZXlfb2JqKXtrZXlfb2JqPW9ialtrZXldPVtdO2Fyci5wdXNoKGtleSk7fQprZXlfb2JqLnB1c2godik7fSk7cmV0dXJuICQubWFwKGFyci5zb3J0KCksZnVuY3Rpb24odil7cmV0dXJuIG9ialt2XTt9KS5qb2luKCcmJyk7fTtqcV9wYXJhbV9mcmFnbWVudC5ub0VzY2FwZT1mdW5jdGlvbihjaGFycyl7Y2hhcnM9Y2hhcnN8fCcnO3ZhciBhcnI9JC5tYXAoY2hhcnMuc3BsaXQoJycpLGVuY29kZVVSSUNvbXBvbmVudCk7cmVfbm9fZXNjYXBlPW5ldyBSZWdFeHAoYXJyLmpvaW4oJ3wnKSwnZycpO307anFfcGFyYW1fZnJhZ21lbnQubm9Fc2NhcGUoJywvJyk7anFfcGFyYW1fZnJhZ21lbnQuYWpheENyYXdsYWJsZT1mdW5jdGlvbihzdGF0ZSl7aWYoc3RhdGUhPT11bmRlZmluZWQpe2lmKHN0YXRlKXtyZV9wYXJhbXNfZnJhZ21lbnQ9L14uKig/OiMhfCMpLztyZV9mcmFnbWVudD0vXihbXiNdKikoPzojIXwjKT8oLiopJC87ZnJhZ21lbnRfcHJlZml4PScjISc7fWVsc2V7cmVfcGFyYW1zX2ZyYWdtZW50PS9eLiojLztyZV9mcmFnbWVudD0vXihbXiNdKikjPyguKikkLztmcmFnbWVudF9wcmVmaXg9JyMnO30KYWpheF9jcmF3bGFibGU9ISFzdGF0ZTt9CnJldHVybiBhamF4X2NyYXdsYWJsZTt9O2pxX3BhcmFtX2ZyYWdtZW50LmFqYXhDcmF3bGFibGUoMCk7JC5kZXBhcmFtPWpxX2RlcGFyYW09ZnVuY3Rpb24ocGFyYW1zLGNvZXJjZSl7dmFyIG9iaj17fSxjb2VyY2VfdHlwZXM9eyd0cnVlJzohMCwnZmFsc2UnOiExLCdudWxsJzpudWxsfTskLmVhY2gocGFyYW1zLnJlcGxhY2UoL1wrL2csJyAnKS5zcGxpdCgnJicpLGZ1bmN0aW9uKGosdil7dmFyIHBhcmFtPXYuc3BsaXQoJz0nKSxrZXk9ZGVjb2RlKHBhcmFtWzBdKSx2YWwsY3VyPW9iaixpPTAsa2V5cz1rZXkuc3BsaXQoJ11bJyksa2V5c19sYXN0PWtleXMubGVuZ3RoLTE7aWYoL1xbLy50ZXN0KGtleXNbMF0pJiYvXF0kLy50ZXN0KGtleXNba2V5c19sYXN0XSkpe2tleXNba2V5c19sYXN0XT1rZXlzW2tleXNfbGFzdF0ucmVwbGFjZSgvXF0kLywnJyk7a2V5cz1rZXlzLnNoaWZ0KCkuc3BsaXQoJ1snKS5jb25jYXQoa2V5cyk7a2V5c19sYXN0PWtleXMubGVuZ3RoLTE7fWVsc2V7a2V5c19sYXN0PTA7fQppZihwYXJhbS5sZW5ndGg9PT0yKXt2YWw9ZGVjb2RlKHBhcmFtWzFdKTtpZihjb2VyY2Upe3ZhbD12YWwmJiFpc05hTih2YWwpPyt2YWw6dmFsPT09J3VuZGVmaW5lZCc/dW5kZWZpbmVkOmNvZXJjZV90eXBlc1t2YWxdIT09dW5kZWZpbmVkP2NvZXJjZV90eXBlc1t2YWxdOnZhbDt9CmlmKGtleXNfbGFzdCl7Zm9yKDtpPD1rZXlzX2xhc3Q7aSsrKXtrZXk9a2V5c1tpXT09PScnP2N1ci5sZW5ndGg6a2V5c1tpXTtjdXI9Y3VyW2tleV09aTxrZXlzX2xhc3Q/Y3VyW2tleV18fChrZXlzW2krMV0mJmlzTmFOKGtleXNbaSsxXSk/e306W10pOnZhbDt9fWVsc2V7aWYoJC5pc0FycmF5KG9ialtrZXldKSl7b2JqW2tleV0ucHVzaCh2YWwpO31lbHNlIGlmKG9ialtrZXldIT09dW5kZWZpbmVkKXtvYmpba2V5XT1bb2JqW2tleV0sdmFsXTt9ZWxzZXtvYmpba2V5XT12YWw7fX19ZWxzZSBpZihrZXkpe29ialtrZXldPWNvZXJjZT91bmRlZmluZWQ6Jyc7fX0pO3JldHVybiBvYmo7fTtmdW5jdGlvbiBqcV9kZXBhcmFtX3N1Yihpc19mcmFnbWVudCx1cmxfb3JfcGFyYW1zLGNvZXJjZSl7aWYodXJsX29yX3BhcmFtcz09PXVuZGVmaW5lZHx8dHlwZW9mIHVybF9vcl9wYXJhbXM9PT0nYm9vbGVhbicpe2NvZXJjZT11cmxfb3JfcGFyYW1zO3VybF9vcl9wYXJhbXM9anFfcGFyYW1baXNfZnJhZ21lbnQ/c3RyX2ZyYWdtZW50OnN0cl9xdWVyeXN0cmluZ10oKTt9ZWxzZXt1cmxfb3JfcGFyYW1zPWlzX3N0cmluZyh1cmxfb3JfcGFyYW1zKT91cmxfb3JfcGFyYW1zLnJlcGxhY2UoaXNfZnJhZ21lbnQ/cmVfcGFyYW1zX2ZyYWdtZW50OnJlX3BhcmFtc19xdWVyeXN0cmluZywnJyk6dXJsX29yX3BhcmFtczt9CnJldHVybiBqcV9kZXBhcmFtKHVybF9vcl9wYXJhbXMsY29lcmNlKTt9O2pxX2RlcGFyYW1bc3RyX3F1ZXJ5c3RyaW5nXT1jdXJyeShqcV9kZXBhcmFtX3N1YiwwKTtqcV9kZXBhcmFtW3N0cl9mcmFnbWVudF09anFfZGVwYXJhbV9mcmFnbWVudD1jdXJyeShqcV9kZXBhcmFtX3N1YiwxKTskW3N0cl9lbGVtVXJsQXR0cl18fCgkW3N0cl9lbGVtVXJsQXR0cl09ZnVuY3Rpb24ob2JqKXtyZXR1cm4gJC5leHRlbmQoZWxlbVVybEF0dHJfY2FjaGUsb2JqKTt9KSh7YTpzdHJfaHJlZixiYXNlOnN0cl9ocmVmLGlmcmFtZTpzdHJfc3JjLGltZzpzdHJfc3JjLGlucHV0OnN0cl9zcmMsZm9ybTonYWN0aW9uJyxsaW5rOnN0cl9ocmVmLHNjcmlwdDpzdHJfc3JjfSk7anFfZWxlbVVybEF0dHI9JFtzdHJfZWxlbVVybEF0dHJdO2Z1bmN0aW9uIGpxX2ZuX3N1Yihtb2RlLGZvcmNlX2F0dHIscGFyYW1zLG1lcmdlX21vZGUpe2lmKCFpc19zdHJpbmcocGFyYW1zKSYmdHlwZW9mIHBhcmFtcyE9PSdvYmplY3QnKXttZXJnZV9tb2RlPXBhcmFtcztwYXJhbXM9Zm9yY2VfYXR0cjtmb3JjZV9hdHRyPXVuZGVmaW5lZDt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdGhhdD0kKHRoaXMpLGF0dHI9Zm9yY2VfYXR0cnx8anFfZWxlbVVybEF0dHIoKVsodGhpcy5ub2RlTmFtZXx8JycpLnRvTG93ZXJDYXNlKCldfHwnJyx1cmw9YXR0ciYmdGhhdC5hdHRyKGF0dHIpfHwnJzt0aGF0LmF0dHIoYXR0cixqcV9wYXJhbVttb2RlXSh1cmwscGFyYW1zLG1lcmdlX21vZGUpKTt9KTt9OyQuZm5bc3RyX3F1ZXJ5c3RyaW5nXT1jdXJyeShqcV9mbl9zdWIsc3RyX3F1ZXJ5c3RyaW5nKTskLmZuW3N0cl9mcmFnbWVudF09Y3VycnkoanFfZm5fc3ViLHN0cl9mcmFnbWVudCk7anFfYmJxLnB1c2hTdGF0ZT1qcV9iYnFfcHVzaFN0YXRlPWZ1bmN0aW9uKHBhcmFtcyxtZXJnZV9tb2RlKXtpZihpc19zdHJpbmcocGFyYW1zKSYmL14jLy50ZXN0KHBhcmFtcykmJm1lcmdlX21vZGU9PT11bmRlZmluZWQpe21lcmdlX21vZGU9Mjt9CnZhciBoYXNfYXJncz1wYXJhbXMhPT11bmRlZmluZWQsdXJsPWpxX3BhcmFtX2ZyYWdtZW50KGxvY2F0aW9uLmhyZWYsaGFzX2FyZ3M/cGFyYW1zOnt9LGhhc19hcmdzP21lcmdlX21vZGU6Mik7bG9jYXRpb24uaHJlZj11cmw7fTtqcV9iYnEuZ2V0U3RhdGU9anFfYmJxX2dldFN0YXRlPWZ1bmN0aW9uKGtleSxjb2VyY2Upe3JldHVybiBrZXk9PT11bmRlZmluZWR8fHR5cGVvZiBrZXk9PT0nYm9vbGVhbic/anFfZGVwYXJhbV9mcmFnbWVudChrZXkpOmpxX2RlcGFyYW1fZnJhZ21lbnQoY29lcmNlKVtrZXldO307anFfYmJxLnJlbW92ZVN0YXRlPWZ1bmN0aW9uKGFycil7dmFyIHN0YXRlPXt9O2lmKGFyciE9PXVuZGVmaW5lZCl7c3RhdGU9anFfYmJxX2dldFN0YXRlKCk7JC5lYWNoKCQuaXNBcnJheShhcnIpP2Fycjphcmd1bWVudHMsZnVuY3Rpb24oaSx2KXtkZWxldGUgc3RhdGVbdl07fSk7fQpqcV9iYnFfcHVzaFN0YXRlKHN0YXRlLDIpO307c3BlY2lhbFtzdHJfaGFzaGNoYW5nZV09JC5leHRlbmQoc3BlY2lhbFtzdHJfaGFzaGNoYW5nZV0se2FkZDpmdW5jdGlvbihoYW5kbGVPYmope3ZhciBvbGRfaGFuZGxlcjtmdW5jdGlvbiBuZXdfaGFuZGxlcihlKXt2YXIgaGFzaD1lW3N0cl9mcmFnbWVudF09anFfcGFyYW1fZnJhZ21lbnQoKTtlLmdldFN0YXRlPWZ1bmN0aW9uKGtleSxjb2VyY2Upe3JldHVybiBrZXk9PT11bmRlZmluZWR8fHR5cGVvZiBrZXk9PT0nYm9vbGVhbic/anFfZGVwYXJhbShoYXNoLGtleSk6anFfZGVwYXJhbShoYXNoLGNvZXJjZSlba2V5XTt9O29sZF9oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O2lmKCQuaXNGdW5jdGlvbihoYW5kbGVPYmopKXtvbGRfaGFuZGxlcj1oYW5kbGVPYmo7cmV0dXJuIG5ld19oYW5kbGVyO31lbHNle29sZF9oYW5kbGVyPWhhbmRsZU9iai5oYW5kbGVyO2hhbmRsZU9iai5oYW5kbGVyPW5ld19oYW5kbGVyO319fSk7fSkoalF1ZXJ5LHRoaXMpOyhmdW5jdGlvbigkLHdpbmRvdyx1bmRlZmluZWQpeyckOm5vbXVuZ2UnO3ZhciBzdHJfaGFzaGNoYW5nZT0naGFzaGNoYW5nZScsZG9jPWRvY3VtZW50LGZha2Vfb25oYXNoY2hhbmdlLHNwZWNpYWw9JC5ldmVudC5zcGVjaWFsLGRvY19tb2RlPWRvYy5kb2N1bWVudE1vZGUsc3VwcG9ydHNfb25oYXNoY2hhbmdlPSdvbicrc3RyX2hhc2hjaGFuZ2UgaW4gd2luZG93JiYoZG9jX21vZGU9PT11bmRlZmluZWR8fGRvY19tb2RlPjcpO2Z1bmN0aW9uIGdldF9mcmFnbWVudCh1cmwpe3VybD11cmx8fGxvY2F0aW9uLmhyZWY7cmV0dXJuJyMnK3VybC5yZXBsYWNlKC9eW14jXSojPyguKikkLywnJDEnKTt9OyQuZm5bc3RyX2hhc2hjaGFuZ2VdPWZ1bmN0aW9uKGZuKXtyZXR1cm4gZm4/dGhpcy5iaW5kKHN0cl9oYXNoY2hhbmdlLGZuKTp0aGlzLnRyaWdnZXIoc3RyX2hhc2hjaGFuZ2UpO307JC5mbltzdHJfaGFzaGNoYW5nZV0uZGVsYXk9NTA7c3BlY2lhbFtzdHJfaGFzaGNoYW5nZV09JC5leHRlbmQoc3BlY2lhbFtzdHJfaGFzaGNoYW5nZV0se3NldHVwOmZ1bmN0aW9uKCl7aWYoc3VwcG9ydHNfb25oYXNoY2hhbmdlKXtyZXR1cm4gZmFsc2U7fQokKGZha2Vfb25oYXNoY2hhbmdlLnN0YXJ0KTt9LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoc3VwcG9ydHNfb25oYXNoY2hhbmdlKXtyZXR1cm4gZmFsc2U7fQokKGZha2Vfb25oYXNoY2hhbmdlLnN0b3ApO319KTtmYWtlX29uaGFzaGNoYW5nZT0oZnVuY3Rpb24oKXt2YXIgc2VsZj17fSx0aW1lb3V0X2lkLGxhc3RfaGFzaD1nZXRfZnJhZ21lbnQoKSxmbl9yZXR2YWw9ZnVuY3Rpb24odmFsKXtyZXR1cm4gdmFsO30saGlzdG9yeV9zZXQ9Zm5fcmV0dmFsLGhpc3RvcnlfZ2V0PWZuX3JldHZhbDtzZWxmLnN0YXJ0PWZ1bmN0aW9uKCl7dGltZW91dF9pZHx8cG9sbCgpO307c2VsZi5zdG9wPWZ1bmN0aW9uKCl7dGltZW91dF9pZCYmY2xlYXJUaW1lb3V0KHRpbWVvdXRfaWQpO3RpbWVvdXRfaWQ9dW5kZWZpbmVkO307ZnVuY3Rpb24gcG9sbCgpe3ZhciBoYXNoPWdldF9mcmFnbWVudCgpLGhpc3RvcnlfaGFzaD1oaXN0b3J5X2dldChsYXN0X2hhc2gpO2lmKGhhc2ghPT1sYXN0X2hhc2gpe2hpc3Rvcnlfc2V0KGxhc3RfaGFzaD1oYXNoLGhpc3RvcnlfaGFzaCk7JCh3aW5kb3cpLnRyaWdnZXIoc3RyX2hhc2hjaGFuZ2UpO31lbHNlIGlmKGhpc3RvcnlfaGFzaCE9PWxhc3RfaGFzaCl7bG9jYXRpb24uaHJlZj1sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sJycpK2hpc3RvcnlfaGFzaDt9CnRpbWVvdXRfaWQ9c2V0VGltZW91dChwb2xsLCQuZm5bc3RyX2hhc2hjaGFuZ2VdLmRlbGF5KTt9OyQuYnJvd3Nlci5tc2llJiYhc3VwcG9ydHNfb25oYXNoY2hhbmdlJiYoZnVuY3Rpb24oKXt2YXIgaWZyYW1lLGlmcmFtZV9zcmM7c2VsZi5zdGFydD1mdW5jdGlvbigpe2lmKCFpZnJhbWUpe2lmcmFtZV9zcmM9JC5mbltzdHJfaGFzaGNoYW5nZV0uc3JjO2lmcmFtZV9zcmM9aWZyYW1lX3NyYyYmaWZyYW1lX3NyYytnZXRfZnJhZ21lbnQoKTtpZnJhbWU9JCgnPGlmcmFtZSB0YWJpbmRleD0iLTEiIHRpdGxlPSJlbXB0eSIvPicpLmhpZGUoKS5vbmUoJ2xvYWQnLGZ1bmN0aW9uKCl7aWZyYW1lX3NyY3x8aGlzdG9yeV9zZXQoZ2V0X2ZyYWdtZW50KCkpO3BvbGwoKTt9KS5hdHRyKCdzcmMnLGlmcmFtZV9zcmN8fCdqYXZhc2NyaXB0OjAnKS5pbnNlcnRBZnRlcignYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7ZG9jLm9ucHJvcGVydHljaGFuZ2U9ZnVuY3Rpb24oKXt0cnl7aWYoZXZlbnQucHJvcGVydHlOYW1lPT09J3RpdGxlJyl7aWZyYW1lLmRvY3VtZW50LnRpdGxlPWRvYy50aXRsZTt9fWNhdGNoKGUpe319O319O3NlbGYuc3RvcD1mbl9yZXR2YWw7aGlzdG9yeV9nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0X2ZyYWdtZW50KGlmcmFtZS5sb2NhdGlvbi5ocmVmKTt9O2hpc3Rvcnlfc2V0PWZ1bmN0aW9uKGhhc2gsaGlzdG9yeV9oYXNoKXt2YXIgaWZyYW1lX2RvYz1pZnJhbWUuZG9jdW1lbnQsZG9tYWluPSQuZm5bc3RyX2hhc2hjaGFuZ2VdLmRvbWFpbjtpZihoYXNoIT09aGlzdG9yeV9oYXNoKXtpZnJhbWVfZG9jLnRpdGxlPWRvYy50aXRsZTtpZnJhbWVfZG9jLm9wZW4oKTtkb21haW4mJmlmcmFtZV9kb2Mud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPSInK2RvbWFpbisnIjwvc2NyaXB0PicpO2lmcmFtZV9kb2MuY2xvc2UoKTtpZnJhbWUubG9jYXRpb24uaGFzaD1oYXNoO319O30pKCk7cmV0dXJuIHNlbGY7fSkoKTt9KShqUXVlcnksdGhpcyk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2pxdWVyeS5tanMubmVzdGVkU29ydGFibGUvanF1ZXJ5Lm1qcy5uZXN0ZWRTb3J0YWJsZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihmYWN0b3J5KXsidXNlIHN0cmljdCI7aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbImpxdWVyeSIsImpxdWVyeS11aS9zb3J0YWJsZSJdLGZhY3RvcnkpO31lbHNle2ZhY3Rvcnkod2luZG93LmpRdWVyeSk7fX0oZnVuY3Rpb24oJCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGlzT3ZlckF4aXMoeCxyZWZlcmVuY2Usc2l6ZSl7cmV0dXJuKHg+cmVmZXJlbmNlKSYmKHg8KHJlZmVyZW5jZStzaXplKSk7fQokLndpZGdldCgibWpzLm5lc3RlZFNvcnRhYmxlIiwkLmV4dGVuZCh7fSwkLnVpLnNvcnRhYmxlLnByb3RvdHlwZSx7b3B0aW9uczp7ZGlzYWJsZVBhcmVudENoYW5nZTpmYWxzZSxkb05vdENsZWFyOmZhbHNlLGV4cGFuZE9uSG92ZXI6NzAwLGlzQWxsb3dlZDpmdW5jdGlvbigpe3JldHVybiB0cnVlO30saXNUcmVlOmZhbHNlLGxpc3RUeXBlOiJvbCIsbWF4TGV2ZWxzOjAscHJvdGVjdFJvb3Q6ZmFsc2Uscm9vdElEOm51bGwscnRsOmZhbHNlLHN0YXJ0Q29sbGFwc2VkOmZhbHNlLHRhYlNpemU6MjAsYnJhbmNoQ2xhc3M6Im1qcy1uZXN0ZWRTb3J0YWJsZS1icmFuY2giLGNvbGxhcHNlZENsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtY29sbGFwc2VkIixkaXNhYmxlTmVzdGluZ0NsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtbm8tbmVzdGluZyIsZXJyb3JDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLWVycm9yIixleHBhbmRlZENsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtZXhwYW5kZWQiLGhvdmVyaW5nQ2xhc3M6Im1qcy1uZXN0ZWRTb3J0YWJsZS1ob3ZlcmluZyIsbGVhZkNsYXNzOiJtanMtbmVzdGVkU29ydGFibGUtbGVhZiIsZGlzYWJsZWRDbGFzczoibWpzLW5lc3RlZFNvcnRhYmxlLWRpc2FibGVkIn0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXMsZXJyO3RoaXMuZWxlbWVudC5kYXRhKCJ1aS1zb3J0YWJsZSIsdGhpcy5lbGVtZW50LmRhdGEoIm1qcy1uZXN0ZWRTb3J0YWJsZSIpKTtpZighdGhpcy5lbGVtZW50LmlzKHRoaXMub3B0aW9ucy5saXN0VHlwZSkpe2Vycj0ibmVzdGVkU29ydGFibGU6ICIrIlBsZWFzZSBjaGVjayB0aGF0IHRoZSBsaXN0VHlwZSBvcHRpb24gaXMgc2V0IHRvIHlvdXIgYWN0dWFsIGxpc3QgdHlwZSI7dGhyb3cgbmV3IEVycm9yKGVycik7fQppZih0aGlzLm9wdGlvbnMuaXNUcmVlJiZ0aGlzLm9wdGlvbnMuZXhwYW5kT25Ib3Zlcil7dGhpcy5vcHRpb25zLnRvbGVyYW5jZT0iaW50ZXJzZWN0Ijt9CiQudWkuc29ydGFibGUucHJvdG90eXBlLl9jcmVhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMub3B0aW9ucy5pc1RyZWUpeyQodGhpcy5pdGVtcykuZWFjaChmdW5jdGlvbigpe3ZhciAkbGk9dGhpcy5pdGVtLGhhc0NvbGxhcHNlZENsYXNzPSRsaS5oYXNDbGFzcyhzZWxmLm9wdGlvbnMuY29sbGFwc2VkQ2xhc3MpLGhhc0V4cGFuZGVkQ2xhc3M9JGxpLmhhc0NsYXNzKHNlbGYub3B0aW9ucy5leHBhbmRlZENsYXNzKTtpZigkbGkuY2hpbGRyZW4oc2VsZi5vcHRpb25zLmxpc3RUeXBlKS5sZW5ndGgpeyRsaS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuYnJhbmNoQ2xhc3MpO2lmKCFoYXNDb2xsYXBzZWRDbGFzcyYmIWhhc0V4cGFuZGVkQ2xhc3Mpe2lmKHNlbGYub3B0aW9ucy5zdGFydENvbGxhcHNlZCl7JGxpLmFkZENsYXNzKHNlbGYub3B0aW9ucy5jb2xsYXBzZWRDbGFzcyk7fWVsc2V7JGxpLmFkZENsYXNzKHNlbGYub3B0aW9ucy5leHBhbmRlZENsYXNzKTt9fX1lbHNleyRsaS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMubGVhZkNsYXNzKTt9fSk7fX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlRGF0YSgibWpzLW5lc3RlZFNvcnRhYmxlIikucmVtb3ZlRGF0YSgidWktc29ydGFibGUiKTtyZXR1cm4gJC51aS5zb3J0YWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sX21vdXNlRHJhZzpmdW5jdGlvbihldmVudCl7dmFyIGksaXRlbSxpdGVtRWxlbWVudCxpbnRlcnNlY3Rpb24sc2VsZj10aGlzLG89dGhpcy5vcHRpb25zLHNjcm9sbGVkPWZhbHNlLCRkb2N1bWVudD0kKGRvY3VtZW50KSxwcmV2aW91c1RvcE9mZnNldCxwYXJlbnRJdGVtLGxldmVsLGNoaWxkTGV2ZWxzLGl0ZW1BZnRlcixpdGVtQmVmb3JlLG5ld0xpc3QsbWV0aG9kLGEscHJldmlvdXNJdGVtLG5leHRJdGVtLGhlbHBlcklzTm90U2libGluZzt0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpO3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7aWYoIXRoaXMubGFzdFBvc2l0aW9uQWJzKXt0aGlzLmxhc3RQb3NpdGlvbkFicz10aGlzLnBvc2l0aW9uQWJzO30KaWYodGhpcy5vcHRpb25zLnNjcm9sbCl7aWYodGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmdGhpcy5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSE9PSJIVE1MIil7aWYoKHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wKwp0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQpLQpldmVudC5wYWdlWTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKStvLnNjcm9sbFNwZWVkO3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcChzY3JvbGxlZCk7fWVsc2UgaWYoZXZlbnQucGFnZVktCnRoaXMub3ZlcmZsb3dPZmZzZXQudG9wPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLW8uc2Nyb2xsU3BlZWQ7dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKHNjcm9sbGVkKTt9CmlmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQrCnRoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldFdpZHRoKS0KZXZlbnQucGFnZVg8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpK28uc2Nyb2xsU3BlZWQ7dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdChzY3JvbGxlZCk7fWVsc2UgaWYoZXZlbnQucGFnZVgtCnRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdDxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCktby5zY3JvbGxTcGVlZDt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KHNjcm9sbGVkKTt9fWVsc2V7aWYoZXZlbnQucGFnZVktCiRkb2N1bWVudC5zY3JvbGxUb3AoKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kZG9jdW1lbnQuc2Nyb2xsVG9wKCktby5zY3JvbGxTcGVlZDskZG9jdW1lbnQuc2Nyb2xsVG9wKHNjcm9sbGVkKTt9ZWxzZSBpZigkKHdpbmRvdykuaGVpZ2h0KCktCihldmVudC5wYWdlWS0KJGRvY3VtZW50LnNjcm9sbFRvcCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5KXtzY3JvbGxlZD0kZG9jdW1lbnQuc2Nyb2xsVG9wKCkrby5zY3JvbGxTcGVlZDskZG9jdW1lbnQuc2Nyb2xsVG9wKHNjcm9sbGVkKTt9CmlmKGV2ZW50LnBhZ2VYLQokZG9jdW1lbnQuc2Nyb2xsTGVmdCgpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkpe3Njcm9sbGVkPSRkb2N1bWVudC5zY3JvbGxMZWZ0KCktby5zY3JvbGxTcGVlZDskZG9jdW1lbnQuc2Nyb2xsTGVmdChzY3JvbGxlZCk7fWVsc2UgaWYoJCh3aW5kb3cpLndpZHRoKCktCihldmVudC5wYWdlWC0KJGRvY3VtZW50LnNjcm9sbExlZnQoKSk8by5zY3JvbGxTZW5zaXRpdml0eSl7c2Nyb2xsZWQ9JGRvY3VtZW50LnNjcm9sbExlZnQoKStvLnNjcm9sbFNwZWVkOyRkb2N1bWVudC5zY3JvbGxMZWZ0KHNjcm9sbGVkKTt9fQppZihzY3JvbGxlZCE9PWZhbHNlJiYkLnVpLmRkbWFuYWdlciYmIW8uZHJvcEJlaGF2aW91cil7JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxldmVudCk7fX0KdGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTtwcmV2aW91c1RvcE9mZnNldD10aGlzLnBsYWNlaG9sZGVyLm9mZnNldCgpLnRvcDtpZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT09InkiKXt0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCsicHgiO30KaWYoIXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLm9wdGlvbnMuYXhpcyE9PSJ4Iil7dGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPSh0aGlzLnBvc2l0aW9uLnRvcCkrInB4Ijt9CnRoaXMuaG92ZXJpbmc9dGhpcy5ob3ZlcmluZz90aGlzLmhvdmVyaW5nOm51bGw7dGhpcy5tb3VzZWVudGVyZWQ9dGhpcy5tb3VzZWVudGVyZWQ/dGhpcy5tb3VzZWVudGVyZWQ6ZmFsc2U7KGZ1bmN0aW9uKCl7dmFyIF9wYXJlbnRJdGVtPXRoaXMucGxhY2Vob2xkZXIucGFyZW50KCkucGFyZW50KCk7aWYoX3BhcmVudEl0ZW0mJl9wYXJlbnRJdGVtLmNsb3Nlc3QoIi51aS1zb3J0YWJsZSIpLmxlbmd0aCl7cGFyZW50SXRlbT1fcGFyZW50SXRlbTt9fS5jYWxsKHRoaXMpKTtsZXZlbD10aGlzLl9nZXRMZXZlbCh0aGlzLnBsYWNlaG9sZGVyKTtjaGlsZExldmVscz10aGlzLl9nZXRDaGlsZExldmVscyh0aGlzLmhlbHBlcik7bmV3TGlzdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KG8ubGlzdFR5cGUpO2ZvcihpPXRoaXMuaXRlbXMubGVuZ3RoLTE7aT49MDtpLS0pe2l0ZW09dGhpcy5pdGVtc1tpXTtpdGVtRWxlbWVudD1pdGVtLml0ZW1bMF07aW50ZXJzZWN0aW9uPXRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihpdGVtKTtpZighaW50ZXJzZWN0aW9uKXtjb250aW51ZTt9CmlmKGl0ZW0uaW5zdGFuY2UhPT10aGlzLmN1cnJlbnRDb250YWluZXIpe2NvbnRpbnVlO30KaWYoaXRlbUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2Yoby5kaXNhYmxlZENsYXNzKSE9PS0xKXtpZihpbnRlcnNlY3Rpb249PT0yKXtpdGVtQWZ0ZXI9dGhpcy5pdGVtc1tpKzFdO2lmKGl0ZW1BZnRlciYmaXRlbUFmdGVyLml0ZW0uaGFzQ2xhc3Moby5kaXNhYmxlZENsYXNzKSl7Y29udGludWU7fX1lbHNlIGlmKGludGVyc2VjdGlvbj09PTEpe2l0ZW1CZWZvcmU9dGhpcy5pdGVtc1tpLTFdO2lmKGl0ZW1CZWZvcmUmJml0ZW1CZWZvcmUuaXRlbS5oYXNDbGFzcyhvLmRpc2FibGVkQ2xhc3MpKXtjb250aW51ZTt9fX0KbWV0aG9kPWludGVyc2VjdGlvbj09PTE/Im5leHQiOiJwcmV2IjtpZihpdGVtRWxlbWVudCE9PXRoaXMuY3VycmVudEl0ZW1bMF0mJnRoaXMucGxhY2Vob2xkZXJbbWV0aG9kXSgpWzBdIT09aXRlbUVsZW1lbnQmJiEkLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0saXRlbUVsZW1lbnQpJiYodGhpcy5vcHRpb25zLnR5cGU9PT0ic2VtaS1keW5hbWljIj8hJC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0saXRlbUVsZW1lbnQpOnRydWUpKXtpZighdGhpcy5tb3VzZWVudGVyZWQpeyQoaXRlbUVsZW1lbnQpLm1vdXNlZW50ZXIoKTt0aGlzLm1vdXNlZW50ZXJlZD10cnVlO30KaWYoby5pc1RyZWUmJiQoaXRlbUVsZW1lbnQpLmhhc0NsYXNzKG8uY29sbGFwc2VkQ2xhc3MpJiZvLmV4cGFuZE9uSG92ZXIpe2lmKCF0aGlzLmhvdmVyaW5nKXskKGl0ZW1FbGVtZW50KS5hZGRDbGFzcyhvLmhvdmVyaW5nQ2xhc3MpO3RoaXMuaG92ZXJpbmc9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXskKGl0ZW1FbGVtZW50KS5yZW1vdmVDbGFzcyhvLmNvbGxhcHNlZENsYXNzKS5hZGRDbGFzcyhvLmV4cGFuZGVkQ2xhc3MpO3NlbGYucmVmcmVzaFBvc2l0aW9ucygpO3NlbGYuX3RyaWdnZXIoImV4cGFuZCIsZXZlbnQsc2VsZi5fdWlIYXNoKCkpO30sby5leHBhbmRPbkhvdmVyKTt9fQp0aGlzLmRpcmVjdGlvbj1pbnRlcnNlY3Rpb249PT0xPyJkb3duIjoidXAiO2lmKHRoaXMub3B0aW9ucy50b2xlcmFuY2U9PT0icG9pbnRlciJ8fHRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMoaXRlbSkpeyQoaXRlbUVsZW1lbnQpLm1vdXNlbGVhdmUoKTt0aGlzLm1vdXNlZW50ZXJlZD1mYWxzZTskKGl0ZW1FbGVtZW50KS5yZW1vdmVDbGFzcyhvLmhvdmVyaW5nQ2xhc3MpO2lmKHRoaXMuaG92ZXJpbmcpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5ob3ZlcmluZyk7fQp0aGlzLmhvdmVyaW5nPW51bGw7aWYoby5wcm90ZWN0Um9vdCYmISh0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGU9PT10aGlzLmVsZW1lbnRbMF0mJml0ZW1FbGVtZW50LnBhcmVudE5vZGUhPT10aGlzLmVsZW1lbnRbMF0pKXtpZih0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUhPT10aGlzLmVsZW1lbnRbMF0mJml0ZW1FbGVtZW50LnBhcmVudE5vZGU9PT10aGlzLmVsZW1lbnRbMF0pe2lmKCEkKGl0ZW1FbGVtZW50KS5jaGlsZHJlbihvLmxpc3RUeXBlKS5sZW5ndGgpe2l0ZW1FbGVtZW50LmFwcGVuZENoaWxkKG5ld0xpc3QpO2lmKG8uaXNUcmVlKXskKGl0ZW1FbGVtZW50KS5yZW1vdmVDbGFzcyhvLmxlYWZDbGFzcykuYWRkQ2xhc3Moby5icmFuY2hDbGFzcysiICIrby5leHBhbmRlZENsYXNzKTt9fQppZih0aGlzLmRpcmVjdGlvbj09PSJkb3duIil7YT0kKGl0ZW1FbGVtZW50KS5wcmV2KCkuY2hpbGRyZW4oby5saXN0VHlwZSk7fWVsc2V7YT0kKGl0ZW1FbGVtZW50KS5jaGlsZHJlbihvLmxpc3RUeXBlKTt9CmlmKGFbMF0hPT11bmRlZmluZWQpe3RoaXMuX3JlYXJyYW5nZShldmVudCxudWxsLGEpO319ZWxzZXt0aGlzLl9yZWFycmFuZ2UoZXZlbnQsaXRlbSk7fX1lbHNlIGlmKCFvLnByb3RlY3RSb290KXt0aGlzLl9yZWFycmFuZ2UoZXZlbnQsaXRlbSk7fX1lbHNle2JyZWFrO30KdGhpcy5fY2xlYXJFbXB0eShpdGVtRWxlbWVudCk7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx0aGlzLl91aUhhc2goKSk7YnJlYWs7fX0KKGZ1bmN0aW9uKCl7dmFyIF9wcmV2aW91c0l0ZW09dGhpcy5wbGFjZWhvbGRlci5wcmV2KCk7aWYoX3ByZXZpb3VzSXRlbS5sZW5ndGgpe3ByZXZpb3VzSXRlbT1fcHJldmlvdXNJdGVtO31lbHNle3ByZXZpb3VzSXRlbT1udWxsO319LmNhbGwodGhpcykpO2lmKHByZXZpb3VzSXRlbSE9bnVsbCl7d2hpbGUocHJldmlvdXNJdGVtWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibGkifHxwcmV2aW91c0l0ZW1bMF0uY2xhc3NOYW1lLmluZGV4T2Yoby5kaXNhYmxlZENsYXNzKSE9PS0xfHxwcmV2aW91c0l0ZW1bMF09PT10aGlzLmN1cnJlbnRJdGVtWzBdfHxwcmV2aW91c0l0ZW1bMF09PT10aGlzLmhlbHBlclswXSl7aWYocHJldmlvdXNJdGVtWzBdLnByZXZpb3VzU2libGluZyl7cHJldmlvdXNJdGVtPSQocHJldmlvdXNJdGVtWzBdLnByZXZpb3VzU2libGluZyk7fWVsc2V7cHJldmlvdXNJdGVtPW51bGw7YnJlYWs7fX19CihmdW5jdGlvbigpe3ZhciBfbmV4dEl0ZW09dGhpcy5wbGFjZWhvbGRlci5uZXh0KCk7aWYoX25leHRJdGVtLmxlbmd0aCl7bmV4dEl0ZW09X25leHRJdGVtO31lbHNle25leHRJdGVtPW51bGw7fX0uY2FsbCh0aGlzKSk7aWYobmV4dEl0ZW0hPW51bGwpe3doaWxlKG5leHRJdGVtWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibGkifHxuZXh0SXRlbVswXS5jbGFzc05hbWUuaW5kZXhPZihvLmRpc2FibGVkQ2xhc3MpIT09LTF8fG5leHRJdGVtWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXXx8bmV4dEl0ZW1bMF09PT10aGlzLmhlbHBlclswXSl7aWYobmV4dEl0ZW1bMF0ubmV4dFNpYmxpbmcpe25leHRJdGVtPSQobmV4dEl0ZW1bMF0ubmV4dFNpYmxpbmcpO31lbHNle25leHRJdGVtPW51bGw7YnJlYWs7fX19CnRoaXMuYmV5b25kTWF4TGV2ZWxzPTA7aWYocGFyZW50SXRlbSE9bnVsbCYmbmV4dEl0ZW09PW51bGwmJiEoby5wcm90ZWN0Um9vdCYmcGFyZW50SXRlbVswXS5wYXJlbnROb2RlPT10aGlzLmVsZW1lbnRbMF0pJiYoby5ydGwmJih0aGlzLnBvc2l0aW9uQWJzLmxlZnQrCnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKT5wYXJlbnRJdGVtLm9mZnNldCgpLmxlZnQrCnBhcmVudEl0ZW0ub3V0ZXJXaWR0aCgpKXx8IW8ucnRsJiYodGhpcy5wb3NpdGlvbkFicy5sZWZ0PHBhcmVudEl0ZW0ub2Zmc2V0KCkubGVmdCkpKXtwYXJlbnRJdGVtLmFmdGVyKHRoaXMucGxhY2Vob2xkZXJbMF0pO2hlbHBlcklzTm90U2libGluZz0hcGFyZW50SXRlbS5jaGlsZHJlbihvLmxpc3RJdGVtKS5jaGlsZHJlbigibGk6dmlzaWJsZTpub3QoLnVpLXNvcnRhYmxlLWhlbHBlcikiKS5sZW5ndGg7aWYoby5pc1RyZWUmJmhlbHBlcklzTm90U2libGluZyl7cGFyZW50SXRlbS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYnJhbmNoQ2xhc3MrIiAiK3RoaXMub3B0aW9ucy5leHBhbmRlZENsYXNzKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMubGVhZkNsYXNzKTt9CmlmKHR5cGVvZiBwYXJlbnRJdGVtIT09J3VuZGVmaW5lZCcpCnRoaXMuX2NsZWFyRW1wdHkocGFyZW50SXRlbVswXSk7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixldmVudCx0aGlzLl91aUhhc2goKSk7fWVsc2UgaWYocHJldmlvdXNJdGVtIT1udWxsJiYhcHJldmlvdXNJdGVtLmhhc0NsYXNzKG8uZGlzYWJsZU5lc3RpbmdDbGFzcykmJihwcmV2aW91c0l0ZW0uY2hpbGRyZW4oby5saXN0VHlwZSkubGVuZ3RoJiZwcmV2aW91c0l0ZW0uY2hpbGRyZW4oby5saXN0VHlwZSkuaXMoIjp2aXNpYmxlIil8fCFwcmV2aW91c0l0ZW0uY2hpbGRyZW4oby5saXN0VHlwZSkubGVuZ3RoKSYmIShvLnByb3RlY3RSb290JiZ0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGU9PT10aGlzLmVsZW1lbnRbMF0pJiYoby5ydGwmJih0aGlzLnBvc2l0aW9uQWJzLmxlZnQrCnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKTxwcmV2aW91c0l0ZW0ub2Zmc2V0KCkubGVmdCsKcHJldmlvdXNJdGVtLm91dGVyV2lkdGgoKS0Kby50YWJTaXplKXx8IW8ucnRsJiYodGhpcy5wb3NpdGlvbkFicy5sZWZ0PnByZXZpb3VzSXRlbS5vZmZzZXQoKS5sZWZ0K28udGFiU2l6ZSkpKXt0aGlzLl9pc0FsbG93ZWQocHJldmlvdXNJdGVtLGxldmVsLGxldmVsK2NoaWxkTGV2ZWxzKzEpO2lmKCFwcmV2aW91c0l0ZW0uY2hpbGRyZW4oby5saXN0VHlwZSkubGVuZ3RoKXtwcmV2aW91c0l0ZW1bMF0uYXBwZW5kQ2hpbGQobmV3TGlzdCk7aWYoby5pc1RyZWUpe3ByZXZpb3VzSXRlbS5yZW1vdmVDbGFzcyhvLmxlYWZDbGFzcykuYWRkQ2xhc3Moby5icmFuY2hDbGFzcysiICIrby5leHBhbmRlZENsYXNzKTt9fQppZihwcmV2aW91c1RvcE9mZnNldCYmKHByZXZpb3VzVG9wT2Zmc2V0PD1wcmV2aW91c0l0ZW0ub2Zmc2V0KCkudG9wKSl7cHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLnByZXBlbmQodGhpcy5wbGFjZWhvbGRlcik7fWVsc2V7cHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO30KaWYodHlwZW9mIHBhcmVudEl0ZW0hPT0ndW5kZWZpbmVkJykKdGhpcy5fY2xlYXJFbXB0eShwYXJlbnRJdGVtWzBdKTt0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGV2ZW50LHRoaXMuX3VpSGFzaCgpKTt9ZWxzZXt0aGlzLl9pc0FsbG93ZWQocGFyZW50SXRlbSxsZXZlbCxsZXZlbCtjaGlsZExldmVscyk7fQp0aGlzLl9jb250YWN0Q29udGFpbmVycyhldmVudCk7aWYoJC51aS5kZG1hbmFnZXIpeyQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxldmVudCk7fQp0aGlzLl90cmlnZ2VyKCJzb3J0IixldmVudCx0aGlzLl91aUhhc2goKSk7dGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicztyZXR1cm4gZmFsc2U7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLmJleW9uZE1heExldmVscyl7dGhpcy5wbGFjZWhvbGRlci5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZXJyb3JDbGFzcyk7aWYodGhpcy5kb21Qb3NpdGlvbi5wcmV2KXskKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5wbGFjZWhvbGRlcik7fWVsc2V7JCh0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCkucHJlcGVuZCh0aGlzLnBsYWNlaG9sZGVyKTt9CnRoaXMuX3RyaWdnZXIoInJldmVydCIsZXZlbnQsdGhpcy5fdWlIYXNoKCkpO30KJCgiLiIrdGhpcy5vcHRpb25zLmhvdmVyaW5nQ2xhc3MpLm1vdXNlbGVhdmUoKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJpbmdDbGFzcyk7dGhpcy5tb3VzZWVudGVyZWQ9ZmFsc2U7aWYodGhpcy5ob3ZlcmluZyl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLmhvdmVyaW5nKTt9CnRoaXMuaG92ZXJpbmc9bnVsbDt0aGlzLl9yZWxvY2F0ZV9ldmVudD1ldmVudDt0aGlzLl9waWRfY3VycmVudD0kKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wYXJlbnQoKS5hdHRyKCJpZCIpO3RoaXMuX3NvcnRfY3VycmVudD10aGlzLmRvbVBvc2l0aW9uLnByZXY/JCh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLm5leHQoKS5pbmRleCgpOjA7JC51aS5zb3J0YWJsZS5wcm90b3R5cGUuX21vdXNlU3RvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxfaW50ZXJzZWN0c1dpdGhTaWRlczpmdW5jdGlvbihpdGVtKXt2YXIgaGFsZj10aGlzLm9wdGlvbnMuaXNUcmVlPy44Oi41LGlzT3ZlckJvdHRvbUhhbGY9aXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCt0aGlzLm9mZnNldC5jbGljay50b3AsaXRlbS50b3ArKGl0ZW0uaGVpZ2h0KmhhbGYpLGl0ZW0uaGVpZ2h0KSxpc092ZXJUb3BIYWxmPWlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3ArdGhpcy5vZmZzZXQuY2xpY2sudG9wLGl0ZW0udG9wLShpdGVtLmhlaWdodCpoYWxmKSxpdGVtLmhlaWdodCksaXNPdmVyUmlnaHRIYWxmPWlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0K3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQsaXRlbS5sZWZ0KyhpdGVtLndpZHRoLzIpLGl0ZW0ud2lkdGgpLHZlcnRpY2FsRGlyZWN0aW9uPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLGhvcml6b250YWxEaXJlY3Rpb249dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtpZih0aGlzLmZsb2F0aW5nJiZob3Jpem9udGFsRGlyZWN0aW9uKXtyZXR1cm4oKGhvcml6b250YWxEaXJlY3Rpb249PT0icmlnaHQiJiZpc092ZXJSaWdodEhhbGYpfHwoaG9yaXpvbnRhbERpcmVjdGlvbj09PSJsZWZ0IiYmIWlzT3ZlclJpZ2h0SGFsZikpO31lbHNle3JldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiYmKCh2ZXJ0aWNhbERpcmVjdGlvbj09PSJkb3duIiYmaXNPdmVyQm90dG9tSGFsZil8fCh2ZXJ0aWNhbERpcmVjdGlvbj09PSJ1cCImJmlzT3ZlclRvcEhhbGYpKTt9fSxfY29udGFjdENvbnRhaW5lcnM6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMucHJvdGVjdFJvb3QmJnRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZT09PXRoaXMuZWxlbWVudFswXSl7cmV0dXJuO30KJC51aS5zb3J0YWJsZS5wcm90b3R5cGUuX2NvbnRhY3RDb250YWluZXJzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LF9jbGVhcjpmdW5jdGlvbigpe3ZhciBpLGl0ZW07JC51aS5zb3J0YWJsZS5wcm90b3R5cGUuX2NsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighKHRoaXMuX3BpZF9jdXJyZW50PT09dGhpcy5fdWlIYXNoKCkuaXRlbS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKCJpZCIpJiZ0aGlzLl9zb3J0X2N1cnJlbnQ9PT10aGlzLl91aUhhc2goKS5pdGVtLmluZGV4KCkpKXt0aGlzLl90cmlnZ2VyKCJyZWxvY2F0ZSIsdGhpcy5fcmVsb2NhdGVfZXZlbnQsdGhpcy5fdWlIYXNoKCkpO30KZm9yKGk9dGhpcy5pdGVtcy5sZW5ndGgtMTtpPj0wO2ktLSl7aXRlbT10aGlzLml0ZW1zW2ldLml0ZW1bMF07dGhpcy5fY2xlYXJFbXB0eShpdGVtKTt9fSxzZXJpYWxpemU6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIG89JC5leHRlbmQoe30sdGhpcy5vcHRpb25zLG9wdGlvbnMpLGl0ZW1zPXRoaXMuX2dldEl0ZW1zQXNqUXVlcnkobyYmby5jb25uZWN0ZWQpLHN0cj1bXTskKGl0ZW1zKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHJlcz0oJChvLml0ZW18fHRoaXMpLmF0dHIoby5hdHRyaWJ1dGV8fCJpZCIpfHwiIikubWF0Y2goby5leHByZXNzaW9ufHwoLyguKylbLT1fXSguKykvKSkscGlkPSgkKG8uaXRlbXx8dGhpcykucGFyZW50KG8ubGlzdFR5cGUpLnBhcmVudChvLml0ZW1zKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKXx8IiIpLm1hdGNoKG8uZXhwcmVzc2lvbnx8KC8oLispWy09X10oLispLykpO2lmKHJlcyl7c3RyLnB1c2goKChvLmtleXx8cmVzWzFdKSsiWyIrCihvLmtleSYmby5leHByZXNzaW9uP3Jlc1sxXTpyZXNbMl0pKyJdIikrIj0iKwoocGlkPyhvLmtleSYmby5leHByZXNzaW9uP3BpZFsxXTpwaWRbMl0pOm8ucm9vdElEKSk7fX0pO2lmKCFzdHIubGVuZ3RoJiZvLmtleSl7c3RyLnB1c2goby5rZXkrIj0iKTt9CnJldHVybiBzdHIuam9pbigiJiIpO30sdG9IaWVyYXJjaHk6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIG89JC5leHRlbmQoe30sdGhpcy5vcHRpb25zLG9wdGlvbnMpLHJldD1bXTskKHRoaXMuZWxlbWVudCkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpe3ZhciBsZXZlbD1fcmVjdXJzaXZlSXRlbXModGhpcyk7cmV0LnB1c2gobGV2ZWwpO30pO3JldHVybiByZXQ7ZnVuY3Rpb24gX3JlY3Vyc2l2ZUl0ZW1zKGl0ZW0pe3ZhciBpZD0oJChpdGVtKS5hdHRyKG8uYXR0cmlidXRlfHwiaWQiKXx8IiIpLm1hdGNoKG8uZXhwcmVzc2lvbnx8KC8oLispWy09X10oLispLykpLGN1cnJlbnRJdGVtO3ZhciBkYXRhPSQoaXRlbSkuZGF0YSgpO2lmKGRhdGEubmVzdGVkU29ydGFibGVJdGVtKXtkZWxldGUgZGF0YS5uZXN0ZWRTb3J0YWJsZUl0ZW07fQppZihpZCl7Y3VycmVudEl0ZW09eyJpZCI6aWRbMl19O2N1cnJlbnRJdGVtPSQuZXh0ZW5kKHt9LGN1cnJlbnRJdGVtLGRhdGEpO2lmKCQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykubGVuZ3RoPjApe2N1cnJlbnRJdGVtLmNoaWxkcmVuPVtdOyQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpe3ZhciBsZXZlbD1fcmVjdXJzaXZlSXRlbXModGhpcyk7Y3VycmVudEl0ZW0uY2hpbGRyZW4ucHVzaChsZXZlbCk7fSk7fQpyZXR1cm4gY3VycmVudEl0ZW07fX19LHRvQXJyYXk6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIG89JC5leHRlbmQoe30sdGhpcy5vcHRpb25zLG9wdGlvbnMpLHNEZXB0aD1vLnN0YXJ0RGVwdGhDb3VudHx8MCxyZXQ9W10sbGVmdD0xO2lmKCFvLmV4Y2x1ZGVSb290KXtyZXQucHVzaCh7Iml0ZW1faWQiOm8ucm9vdElELCJwYXJlbnRfaWQiOm51bGwsImRlcHRoIjpzRGVwdGgsImxlZnQiOmxlZnQsInJpZ2h0IjooJChvLml0ZW1zLHRoaXMuZWxlbWVudCkubGVuZ3RoKzEpKjJ9KTtsZWZ0Kys7fQokKHRoaXMuZWxlbWVudCkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpe2xlZnQ9X3JlY3Vyc2l2ZUFycmF5KHRoaXMsc0RlcHRoLGxlZnQpO30pO3JldD1yZXQuc29ydChmdW5jdGlvbihhLGIpe3JldHVybihhLmxlZnQtYi5sZWZ0KTt9KTtyZXR1cm4gcmV0O2Z1bmN0aW9uIF9yZWN1cnNpdmVBcnJheShpdGVtLGRlcHRoLF9sZWZ0KXt2YXIgcmlnaHQ9X2xlZnQrMSxpZCxwaWQscGFyZW50SXRlbTtpZigkKGl0ZW0pLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmxlbmd0aD4wKXtkZXB0aCsrOyQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpe3JpZ2h0PV9yZWN1cnNpdmVBcnJheSgkKHRoaXMpLGRlcHRoLHJpZ2h0KTt9KTtkZXB0aC0tO30KaWQ9KCQoaXRlbSkuYXR0cihvLmF0dHJpYnV0ZXx8ImlkIikpLm1hdGNoKG8uZXhwcmVzc2lvbnx8KC8oLispWy09X10oLispLykpO2lmKGRlcHRoPT09c0RlcHRoKXtwaWQ9by5yb290SUQ7fWVsc2V7cGFyZW50SXRlbT0oJChpdGVtKS5wYXJlbnQoby5saXN0VHlwZSkucGFyZW50KG8uaXRlbXMpLmF0dHIoby5hdHRyaWJ1dGV8fCJpZCIpKS5tYXRjaChvLmV4cHJlc3Npb258fCgvKC4rKVstPV9dKC4rKS8pKTtwaWQ9cGFyZW50SXRlbVsyXTt9CmlmKGlkKXt2YXIgZGF0YT0kKGl0ZW0pLmNoaWxkcmVuKCdkaXYnKS5kYXRhKCk7dmFyIGl0ZW1PYmo9JC5leHRlbmQoZGF0YSx7ImlkIjppZFsyXSwicGFyZW50X2lkIjpwaWQsImRlcHRoIjpkZXB0aCwibGVmdCI6X2xlZnQsInJpZ2h0IjpyaWdodH0pO3JldC5wdXNoKGl0ZW1PYmopO30KX2xlZnQ9cmlnaHQrMTtyZXR1cm4gX2xlZnQ7fX0sX2NsZWFyRW1wdHk6ZnVuY3Rpb24oaXRlbSl7ZnVuY3Rpb24gcmVwbGFjZUNsYXNzKGVsZW0sc2VhcmNoLHJlcGxhY2Usc3dhcCl7aWYoc3dhcCl7c2VhcmNoPVtyZXBsYWNlLHJlcGxhY2U9c2VhcmNoXVswXTt9CiQoZWxlbSkucmVtb3ZlQ2xhc3Moc2VhcmNoKS5hZGRDbGFzcyhyZXBsYWNlKTt9CnZhciBvPXRoaXMub3B0aW9ucyxjaGlsZHJlbkxpc3Q9JChpdGVtKS5jaGlsZHJlbihvLmxpc3RUeXBlKSxoYXNDaGlsZHJlbj1jaGlsZHJlbkxpc3QuaGFzKCdsaScpLmxlbmd0aDt2YXIgZG9Ob3RDbGVhcj1vLmRvTm90Q2xlYXJ8fGhhc0NoaWxkcmVufHxvLnByb3RlY3RSb290JiYkKGl0ZW0pWzBdPT09dGhpcy5lbGVtZW50WzBdO2lmKG8uaXNUcmVlKXtyZXBsYWNlQ2xhc3MoaXRlbSxvLmJyYW5jaENsYXNzLG8ubGVhZkNsYXNzLGRvTm90Q2xlYXIpO30KaWYoIWRvTm90Q2xlYXIpe2NoaWxkcmVuTGlzdC5wYXJlbnQoKS5yZW1vdmVDbGFzcyhvLmV4cGFuZGVkQ2xhc3MpO2NoaWxkcmVuTGlzdC5yZW1vdmUoKTt9fSxfZ2V0TGV2ZWw6ZnVuY3Rpb24oaXRlbSl7dmFyIGxldmVsPTEsbGlzdDtpZih0aGlzLm9wdGlvbnMubGlzdFR5cGUpe2xpc3Q9aXRlbS5jbG9zZXN0KHRoaXMub3B0aW9ucy5saXN0VHlwZSk7d2hpbGUobGlzdCYmbGlzdC5sZW5ndGg+MCYmIWxpc3QuaXMoIi51aS1zb3J0YWJsZSIpKXtsZXZlbCsrO2xpc3Q9bGlzdC5wYXJlbnQoKS5jbG9zZXN0KHRoaXMub3B0aW9ucy5saXN0VHlwZSk7fX0KcmV0dXJuIGxldmVsO30sX2dldENoaWxkTGV2ZWxzOmZ1bmN0aW9uKHBhcmVudCxkZXB0aCl7dmFyIHNlbGY9dGhpcyxvPXRoaXMub3B0aW9ucyxyZXN1bHQ9MDtkZXB0aD1kZXB0aHx8MDskKHBhcmVudCkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbihpbmRleCxjaGlsZCl7cmVzdWx0PU1hdGgubWF4KHNlbGYuX2dldENoaWxkTGV2ZWxzKGNoaWxkLGRlcHRoKzEpLHJlc3VsdCk7fSk7cmV0dXJuIGRlcHRoP3Jlc3VsdCsxOnJlc3VsdDt9LF9pc0FsbG93ZWQ6ZnVuY3Rpb24ocGFyZW50SXRlbSxsZXZlbCxsZXZlbHMpe3ZhciBvPXRoaXMub3B0aW9ucyxtYXhMZXZlbHM9dGhpcy5wbGFjZWhvbGRlci5jbG9zZXN0KCIudWktc29ydGFibGUiKS5uZXN0ZWRTb3J0YWJsZSgib3B0aW9uIiwibWF4TGV2ZWxzIiksb2xkUGFyZW50PXRoaXMuY3VycmVudEl0ZW0ucGFyZW50KCkucGFyZW50KCksZGlzYWJsZWRCeVBhcmVudGNoYW5nZT1vLmRpc2FibGVQYXJlbnRDaGFuZ2UmJih0eXBlb2YgcGFyZW50SXRlbSE9PSd1bmRlZmluZWQnJiYhb2xkUGFyZW50LmlzKHBhcmVudEl0ZW0pfHx0eXBlb2YgcGFyZW50SXRlbT09PSd1bmRlZmluZWQnJiZvbGRQYXJlbnQuaXMoImxpIikpO2lmKGRpc2FibGVkQnlQYXJlbnRjaGFuZ2V8fCFvLmlzQWxsb3dlZCh0aGlzLnBsYWNlaG9sZGVyLHBhcmVudEl0ZW0sdGhpcy5jdXJyZW50SXRlbSkpe3RoaXMucGxhY2Vob2xkZXIuYWRkQ2xhc3Moby5lcnJvckNsYXNzKTtpZihtYXhMZXZlbHM8bGV2ZWxzJiZtYXhMZXZlbHMhPT0wKXt0aGlzLmJleW9uZE1heExldmVscz1sZXZlbHMtbWF4TGV2ZWxzO31lbHNle3RoaXMuYmV5b25kTWF4TGV2ZWxzPTE7fX1lbHNle2lmKG1heExldmVsczxsZXZlbHMmJm1heExldmVscyE9PTApe3RoaXMucGxhY2Vob2xkZXIuYWRkQ2xhc3Moby5lcnJvckNsYXNzKTt0aGlzLmJleW9uZE1heExldmVscz1sZXZlbHMtbWF4TGV2ZWxzO31lbHNle3RoaXMucGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3Moby5lcnJvckNsYXNzKTt0aGlzLmJleW9uZE1heExldmVscz0wO319fX0pKTskLm1qcy5uZXN0ZWRTb3J0YWJsZS5wcm90b3R5cGUub3B0aW9ucz0kLmV4dGVuZCh7fSwkLnVpLnNvcnRhYmxlLnByb3RvdHlwZS5vcHRpb25zLCQubWpzLm5lc3RlZFNvcnRhYmxlLnByb3RvdHlwZS5vcHRpb25zKTt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL3BvcHBlci9wb3BwZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3Rvcnkpe3R5cGVvZiBleHBvcnRzPT09J29iamVjdCcmJnR5cGVvZiBtb2R1bGUhPT0ndW5kZWZpbmVkJz9tb2R1bGUuZXhwb3J0cz1mYWN0b3J5KCk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKGZhY3RvcnkpOihnbG9iYWwuUG9wcGVyPWZhY3RvcnkoKSk7fSh0aGlzLChmdW5jdGlvbigpeyd1c2Ugc3RyaWN0Jzt2YXIgaXNCcm93c2VyPXR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyYmdHlwZW9mIGRvY3VtZW50IT09J3VuZGVmaW5lZCc7dmFyIGxvbmdlclRpbWVvdXRCcm93c2Vycz1bJ0VkZ2UnLCdUcmlkZW50JywnRmlyZWZveCddO3ZhciB0aW1lb3V0RHVyYXRpb249MDtmb3IodmFyIGk9MDtpPGxvbmdlclRpbWVvdXRCcm93c2Vycy5sZW5ndGg7aSs9MSl7aWYoaXNCcm93c2VyJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YobG9uZ2VyVGltZW91dEJyb3dzZXJzW2ldKT49MCl7dGltZW91dER1cmF0aW9uPTE7YnJlYWs7fX0KZnVuY3Rpb24gbWljcm90YXNrRGVib3VuY2UoZm4pe3ZhciBjYWxsZWQ9ZmFsc2U7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY2FsbGVkKXtyZXR1cm47fQpjYWxsZWQ9dHJ1ZTt3aW5kb3cuUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe2NhbGxlZD1mYWxzZTtmbigpO30pO307fQpmdW5jdGlvbiB0YXNrRGVib3VuY2UoZm4pe3ZhciBzY2hlZHVsZWQ9ZmFsc2U7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIXNjaGVkdWxlZCl7c2NoZWR1bGVkPXRydWU7c2V0VGltZW91dChmdW5jdGlvbigpe3NjaGVkdWxlZD1mYWxzZTtmbigpO30sdGltZW91dER1cmF0aW9uKTt9fTt9CnZhciBzdXBwb3J0c01pY3JvVGFza3M9aXNCcm93c2VyJiZ3aW5kb3cuUHJvbWlzZTt2YXIgZGVib3VuY2U9c3VwcG9ydHNNaWNyb1Rhc2tzP21pY3JvdGFza0RlYm91bmNlOnRhc2tEZWJvdW5jZTtmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmN0aW9uVG9DaGVjayl7dmFyIGdldFR5cGU9e307cmV0dXJuIGZ1bmN0aW9uVG9DaGVjayYmZ2V0VHlwZS50b1N0cmluZy5jYWxsKGZ1bmN0aW9uVG9DaGVjayk9PT0nW29iamVjdCBGdW5jdGlvbl0nO30KZnVuY3Rpb24gZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsZW1lbnQscHJvcGVydHkpe2lmKGVsZW1lbnQubm9kZVR5cGUhPT0xKXtyZXR1cm5bXTt9CnZhciBjc3M9Z2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LG51bGwpO3JldHVybiBwcm9wZXJ0eT9jc3NbcHJvcGVydHldOmNzczt9CmZ1bmN0aW9uIGdldFBhcmVudE5vZGUoZWxlbWVudCl7aWYoZWxlbWVudC5ub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGVsZW1lbnQ7fQpyZXR1cm4gZWxlbWVudC5wYXJlbnROb2RlfHxlbGVtZW50Lmhvc3Q7fQpmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQoZWxlbWVudCl7aWYoIWVsZW1lbnQpe3JldHVybiBkb2N1bWVudC5ib2R5O30Kc3dpdGNoKGVsZW1lbnQubm9kZU5hbWUpe2Nhc2UnSFRNTCc6Y2FzZSdCT0RZJzpyZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50LmJvZHk7Y2FzZScjZG9jdW1lbnQnOnJldHVybiBlbGVtZW50LmJvZHk7fQp2YXIgX2dldFN0eWxlQ29tcHV0ZWRQcm9wPWdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShlbGVtZW50KSxvdmVyZmxvdz1fZ2V0U3R5bGVDb21wdXRlZFByb3Aub3ZlcmZsb3csb3ZlcmZsb3dYPV9nZXRTdHlsZUNvbXB1dGVkUHJvcC5vdmVyZmxvd1gsb3ZlcmZsb3dZPV9nZXRTdHlsZUNvbXB1dGVkUHJvcC5vdmVyZmxvd1k7aWYoLyhhdXRvfHNjcm9sbHxvdmVybGF5KS8udGVzdChvdmVyZmxvdytvdmVyZmxvd1krb3ZlcmZsb3dYKSl7cmV0dXJuIGVsZW1lbnQ7fQpyZXR1cm4gZ2V0U2Nyb2xsUGFyZW50KGdldFBhcmVudE5vZGUoZWxlbWVudCkpO30KdmFyIGlzSUUxMT1pc0Jyb3dzZXImJiEhKHdpbmRvdy5NU0lucHV0TWV0aG9kQ29udGV4dCYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlKTt2YXIgaXNJRTEwPWlzQnJvd3NlciYmL01TSUUgMTAvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7ZnVuY3Rpb24gaXNJRSh2ZXJzaW9uKXtpZih2ZXJzaW9uPT09MTEpe3JldHVybiBpc0lFMTE7fQppZih2ZXJzaW9uPT09MTApe3JldHVybiBpc0lFMTA7fQpyZXR1cm4gaXNJRTExfHxpc0lFMTA7fQpmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCl7aWYoIWVsZW1lbnQpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fQp2YXIgbm9PZmZzZXRQYXJlbnQ9aXNJRSgxMCk/ZG9jdW1lbnQuYm9keTpudWxsO3ZhciBvZmZzZXRQYXJlbnQ9ZWxlbWVudC5vZmZzZXRQYXJlbnQ7d2hpbGUob2Zmc2V0UGFyZW50PT09bm9PZmZzZXRQYXJlbnQmJmVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nKXtvZmZzZXRQYXJlbnQ9KGVsZW1lbnQ9ZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcpLm9mZnNldFBhcmVudDt9CnZhciBub2RlTmFtZT1vZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudC5ub2RlTmFtZTtpZighbm9kZU5hbWV8fG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGVsZW1lbnQ/ZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fQppZihbJ1REJywnVEFCTEUnXS5pbmRleE9mKG9mZnNldFBhcmVudC5ub2RlTmFtZSkhPT0tMSYmZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KG9mZnNldFBhcmVudCwncG9zaXRpb24nKT09PSdzdGF0aWMnKXtyZXR1cm4gZ2V0T2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7fQpyZXR1cm4gb2Zmc2V0UGFyZW50O30KZnVuY3Rpb24gaXNPZmZzZXRDb250YWluZXIoZWxlbWVudCl7dmFyIG5vZGVOYW1lPWVsZW1lbnQubm9kZU5hbWU7aWYobm9kZU5hbWU9PT0nQk9EWScpe3JldHVybiBmYWxzZTt9CnJldHVybiBub2RlTmFtZT09PSdIVE1MJ3x8Z2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpPT09ZWxlbWVudDt9CmZ1bmN0aW9uIGdldFJvb3Qobm9kZSl7aWYobm9kZS5wYXJlbnROb2RlIT09bnVsbCl7cmV0dXJuIGdldFJvb3Qobm9kZS5wYXJlbnROb2RlKTt9CnJldHVybiBub2RlO30KZnVuY3Rpb24gZmluZENvbW1vbk9mZnNldFBhcmVudChlbGVtZW50MSxlbGVtZW50Mil7aWYoIWVsZW1lbnQxfHwhZWxlbWVudDEubm9kZVR5cGV8fCFlbGVtZW50Mnx8IWVsZW1lbnQyLm5vZGVUeXBlKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KdmFyIG9yZGVyPWVsZW1lbnQxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGVsZW1lbnQyKSZOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORzt2YXIgc3RhcnQ9b3JkZXI/ZWxlbWVudDE6ZWxlbWVudDI7dmFyIGVuZD1vcmRlcj9lbGVtZW50MjplbGVtZW50MTt2YXIgcmFuZ2U9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyYW5nZS5zZXRTdGFydChzdGFydCwwKTtyYW5nZS5zZXRFbmQoZW5kLDApO3ZhciBjb21tb25BbmNlc3RvckNvbnRhaW5lcj1yYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtpZihlbGVtZW50MSE9PWNvbW1vbkFuY2VzdG9yQ29udGFpbmVyJiZlbGVtZW50MiE9PWNvbW1vbkFuY2VzdG9yQ29udGFpbmVyfHxzdGFydC5jb250YWlucyhlbmQpKXtpZihpc09mZnNldENvbnRhaW5lcihjb21tb25BbmNlc3RvckNvbnRhaW5lcikpe3JldHVybiBjb21tb25BbmNlc3RvckNvbnRhaW5lcjt9CnJldHVybiBnZXRPZmZzZXRQYXJlbnQoY29tbW9uQW5jZXN0b3JDb250YWluZXIpO30KdmFyIGVsZW1lbnQxcm9vdD1nZXRSb290KGVsZW1lbnQxKTtpZihlbGVtZW50MXJvb3QuaG9zdCl7cmV0dXJuIGZpbmRDb21tb25PZmZzZXRQYXJlbnQoZWxlbWVudDFyb290Lmhvc3QsZWxlbWVudDIpO31lbHNle3JldHVybiBmaW5kQ29tbW9uT2Zmc2V0UGFyZW50KGVsZW1lbnQxLGdldFJvb3QoZWxlbWVudDIpLmhvc3QpO319CmZ1bmN0aW9uIGdldFNjcm9sbChlbGVtZW50KXt2YXIgc2lkZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06J3RvcCc7dmFyIHVwcGVyU2lkZT1zaWRlPT09J3RvcCc/J3Njcm9sbFRvcCc6J3Njcm9sbExlZnQnO3ZhciBub2RlTmFtZT1lbGVtZW50Lm5vZGVOYW1lO2lmKG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7dmFyIGh0bWw9ZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt2YXIgc2Nyb2xsaW5nRWxlbWVudD1lbGVtZW50Lm93bmVyRG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudHx8aHRtbDtyZXR1cm4gc2Nyb2xsaW5nRWxlbWVudFt1cHBlclNpZGVdO30KcmV0dXJuIGVsZW1lbnRbdXBwZXJTaWRlXTt9CmZ1bmN0aW9uIGluY2x1ZGVTY3JvbGwocmVjdCxlbGVtZW50KXt2YXIgc3VidHJhY3Q9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzJdOmZhbHNlO3ZhciBzY3JvbGxUb3A9Z2V0U2Nyb2xsKGVsZW1lbnQsJ3RvcCcpO3ZhciBzY3JvbGxMZWZ0PWdldFNjcm9sbChlbGVtZW50LCdsZWZ0Jyk7dmFyIG1vZGlmaWVyPXN1YnRyYWN0Py0xOjE7cmVjdC50b3ArPXNjcm9sbFRvcCptb2RpZmllcjtyZWN0LmJvdHRvbSs9c2Nyb2xsVG9wKm1vZGlmaWVyO3JlY3QubGVmdCs9c2Nyb2xsTGVmdCptb2RpZmllcjtyZWN0LnJpZ2h0Kz1zY3JvbGxMZWZ0Km1vZGlmaWVyO3JldHVybiByZWN0O30KZnVuY3Rpb24gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzLGF4aXMpe3ZhciBzaWRlQT1heGlzPT09J3gnPydMZWZ0JzonVG9wJzt2YXIgc2lkZUI9c2lkZUE9PT0nTGVmdCc/J1JpZ2h0JzonQm90dG9tJztyZXR1cm4gcGFyc2VGbG9hdChzdHlsZXNbJ2JvcmRlcicrc2lkZUErJ1dpZHRoJ10sMTApK3BhcnNlRmxvYXQoc3R5bGVzWydib3JkZXInK3NpZGVCKydXaWR0aCddLDEwKTt9CmZ1bmN0aW9uIGdldFNpemUoYXhpcyxib2R5LGh0bWwsY29tcHV0ZWRTdHlsZSl7cmV0dXJuIE1hdGgubWF4KGJvZHlbJ29mZnNldCcrYXhpc10sYm9keVsnc2Nyb2xsJytheGlzXSxodG1sWydjbGllbnQnK2F4aXNdLGh0bWxbJ29mZnNldCcrYXhpc10saHRtbFsnc2Nyb2xsJytheGlzXSxpc0lFKDEwKT9odG1sWydvZmZzZXQnK2F4aXNdK2NvbXB1dGVkU3R5bGVbJ21hcmdpbicrKGF4aXM9PT0nSGVpZ2h0Jz8nVG9wJzonTGVmdCcpXStjb21wdXRlZFN0eWxlWydtYXJnaW4nKyhheGlzPT09J0hlaWdodCc/J0JvdHRvbSc6J1JpZ2h0JyldOjApO30KZnVuY3Rpb24gZ2V0V2luZG93U2l6ZXMoKXt2YXIgYm9keT1kb2N1bWVudC5ib2R5O3ZhciBodG1sPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt2YXIgY29tcHV0ZWRTdHlsZT1pc0lFKDEwKSYmZ2V0Q29tcHV0ZWRTdHlsZShodG1sKTtyZXR1cm57aGVpZ2h0OmdldFNpemUoJ0hlaWdodCcsYm9keSxodG1sLGNvbXB1dGVkU3R5bGUpLHdpZHRoOmdldFNpemUoJ1dpZHRoJyxib2R5LGh0bWwsY29tcHV0ZWRTdHlsZSl9O30KdmFyIGNsYXNzQ2FsbENoZWNrPWZ1bmN0aW9uKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fTt2YXIgY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CnJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24ob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO307dmFyIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV07Zm9yKHZhciBrZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkpe3RhcmdldFtrZXldPXNvdXJjZVtrZXldO319fQpyZXR1cm4gdGFyZ2V0O307ZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdChvZmZzZXRzKXtyZXR1cm4gX2V4dGVuZHMoe30sb2Zmc2V0cyx7cmlnaHQ6b2Zmc2V0cy5sZWZ0K29mZnNldHMud2lkdGgsYm90dG9tOm9mZnNldHMudG9wK29mZnNldHMuaGVpZ2h0fSk7fQpmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCl7dmFyIHJlY3Q9e307dHJ5e2lmKGlzSUUoMTApKXtyZWN0PWVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIHNjcm9sbFRvcD1nZXRTY3JvbGwoZWxlbWVudCwndG9wJyk7dmFyIHNjcm9sbExlZnQ9Z2V0U2Nyb2xsKGVsZW1lbnQsJ2xlZnQnKTtyZWN0LnRvcCs9c2Nyb2xsVG9wO3JlY3QubGVmdCs9c2Nyb2xsTGVmdDtyZWN0LmJvdHRvbSs9c2Nyb2xsVG9wO3JlY3QucmlnaHQrPXNjcm9sbExlZnQ7fWVsc2V7cmVjdD1lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO319Y2F0Y2goZSl7fQp2YXIgcmVzdWx0PXtsZWZ0OnJlY3QubGVmdCx0b3A6cmVjdC50b3Asd2lkdGg6cmVjdC5yaWdodC1yZWN0LmxlZnQsaGVpZ2h0OnJlY3QuYm90dG9tLXJlY3QudG9wfTt2YXIgc2l6ZXM9ZWxlbWVudC5ub2RlTmFtZT09PSdIVE1MJz9nZXRXaW5kb3dTaXplcygpOnt9O3ZhciB3aWR0aD1zaXplcy53aWR0aHx8ZWxlbWVudC5jbGllbnRXaWR0aHx8cmVzdWx0LnJpZ2h0LXJlc3VsdC5sZWZ0O3ZhciBoZWlnaHQ9c2l6ZXMuaGVpZ2h0fHxlbGVtZW50LmNsaWVudEhlaWdodHx8cmVzdWx0LmJvdHRvbS1yZXN1bHQudG9wO3ZhciBob3JpelNjcm9sbGJhcj1lbGVtZW50Lm9mZnNldFdpZHRoLXdpZHRoO3ZhciB2ZXJ0U2Nyb2xsYmFyPWVsZW1lbnQub2Zmc2V0SGVpZ2h0LWhlaWdodDtpZihob3JpelNjcm9sbGJhcnx8dmVydFNjcm9sbGJhcil7dmFyIHN0eWxlcz1nZXRTdHlsZUNvbXB1dGVkUHJvcGVydHkoZWxlbWVudCk7aG9yaXpTY3JvbGxiYXItPWdldEJvcmRlcnNTaXplKHN0eWxlcywneCcpO3ZlcnRTY3JvbGxiYXItPWdldEJvcmRlcnNTaXplKHN0eWxlcywneScpO3Jlc3VsdC53aWR0aC09aG9yaXpTY3JvbGxiYXI7cmVzdWx0LmhlaWdodC09dmVydFNjcm9sbGJhcjt9CnJldHVybiBnZXRDbGllbnRSZWN0KHJlc3VsdCk7fQpmdW5jdGlvbiBnZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoY2hpbGRyZW4scGFyZW50KXt2YXIgZml4ZWRQb3NpdGlvbj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMl06ZmFsc2U7dmFyIGlzSUUxMD1pc0lFKDEwKTt2YXIgaXNIVE1MPXBhcmVudC5ub2RlTmFtZT09PSdIVE1MJzt2YXIgY2hpbGRyZW5SZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdChjaGlsZHJlbik7dmFyIHBhcmVudFJlY3Q9Z2V0Qm91bmRpbmdDbGllbnRSZWN0KHBhcmVudCk7dmFyIHNjcm9sbFBhcmVudD1nZXRTY3JvbGxQYXJlbnQoY2hpbGRyZW4pO3ZhciBzdHlsZXM9Z2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KHBhcmVudCk7dmFyIGJvcmRlclRvcFdpZHRoPXBhcnNlRmxvYXQoc3R5bGVzLmJvcmRlclRvcFdpZHRoLDEwKTt2YXIgYm9yZGVyTGVmdFdpZHRoPXBhcnNlRmxvYXQoc3R5bGVzLmJvcmRlckxlZnRXaWR0aCwxMCk7aWYoZml4ZWRQb3NpdGlvbiYmcGFyZW50Lm5vZGVOYW1lPT09J0hUTUwnKXtwYXJlbnRSZWN0LnRvcD1NYXRoLm1heChwYXJlbnRSZWN0LnRvcCwwKTtwYXJlbnRSZWN0LmxlZnQ9TWF0aC5tYXgocGFyZW50UmVjdC5sZWZ0LDApO30KdmFyIG9mZnNldHM9Z2V0Q2xpZW50UmVjdCh7dG9wOmNoaWxkcmVuUmVjdC50b3AtcGFyZW50UmVjdC50b3AtYm9yZGVyVG9wV2lkdGgsbGVmdDpjaGlsZHJlblJlY3QubGVmdC1wYXJlbnRSZWN0LmxlZnQtYm9yZGVyTGVmdFdpZHRoLHdpZHRoOmNoaWxkcmVuUmVjdC53aWR0aCxoZWlnaHQ6Y2hpbGRyZW5SZWN0LmhlaWdodH0pO29mZnNldHMubWFyZ2luVG9wPTA7b2Zmc2V0cy5tYXJnaW5MZWZ0PTA7aWYoIWlzSUUxMCYmaXNIVE1MKXt2YXIgbWFyZ2luVG9wPXBhcnNlRmxvYXQoc3R5bGVzLm1hcmdpblRvcCwxMCk7dmFyIG1hcmdpbkxlZnQ9cGFyc2VGbG9hdChzdHlsZXMubWFyZ2luTGVmdCwxMCk7b2Zmc2V0cy50b3AtPWJvcmRlclRvcFdpZHRoLW1hcmdpblRvcDtvZmZzZXRzLmJvdHRvbS09Ym9yZGVyVG9wV2lkdGgtbWFyZ2luVG9wO29mZnNldHMubGVmdC09Ym9yZGVyTGVmdFdpZHRoLW1hcmdpbkxlZnQ7b2Zmc2V0cy5yaWdodC09Ym9yZGVyTGVmdFdpZHRoLW1hcmdpbkxlZnQ7b2Zmc2V0cy5tYXJnaW5Ub3A9bWFyZ2luVG9wO29mZnNldHMubWFyZ2luTGVmdD1tYXJnaW5MZWZ0O30KaWYoaXNJRTEwJiYhZml4ZWRQb3NpdGlvbj9wYXJlbnQuY29udGFpbnMoc2Nyb2xsUGFyZW50KTpwYXJlbnQ9PT1zY3JvbGxQYXJlbnQmJnNjcm9sbFBhcmVudC5ub2RlTmFtZSE9PSdCT0RZJyl7b2Zmc2V0cz1pbmNsdWRlU2Nyb2xsKG9mZnNldHMscGFyZW50KTt9CnJldHVybiBvZmZzZXRzO30KZnVuY3Rpb24gZ2V0Vmlld3BvcnRPZmZzZXRSZWN0UmVsYXRpdmVUb0FydGJpdHJhcnlOb2RlKGVsZW1lbnQpe3ZhciBleGNsdWRlU2Nyb2xsPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTpmYWxzZTt2YXIgaHRtbD1lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciByZWxhdGl2ZU9mZnNldD1nZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoZWxlbWVudCxodG1sKTt2YXIgd2lkdGg9TWF0aC5tYXgoaHRtbC5jbGllbnRXaWR0aCx3aW5kb3cuaW5uZXJXaWR0aHx8MCk7dmFyIGhlaWdodD1NYXRoLm1heChodG1sLmNsaWVudEhlaWdodCx3aW5kb3cuaW5uZXJIZWlnaHR8fDApO3ZhciBzY3JvbGxUb3A9IWV4Y2x1ZGVTY3JvbGw/Z2V0U2Nyb2xsKGh0bWwpOjA7dmFyIHNjcm9sbExlZnQ9IWV4Y2x1ZGVTY3JvbGw/Z2V0U2Nyb2xsKGh0bWwsJ2xlZnQnKTowO3ZhciBvZmZzZXQ9e3RvcDpzY3JvbGxUb3AtcmVsYXRpdmVPZmZzZXQudG9wK3JlbGF0aXZlT2Zmc2V0Lm1hcmdpblRvcCxsZWZ0OnNjcm9sbExlZnQtcmVsYXRpdmVPZmZzZXQubGVmdCtyZWxhdGl2ZU9mZnNldC5tYXJnaW5MZWZ0LHdpZHRoOndpZHRoLGhlaWdodDpoZWlnaHR9O3JldHVybiBnZXRDbGllbnRSZWN0KG9mZnNldCk7fQpmdW5jdGlvbiBpc0ZpeGVkKGVsZW1lbnQpe3ZhciBub2RlTmFtZT1lbGVtZW50Lm5vZGVOYW1lO2lmKG5vZGVOYW1lPT09J0JPRFknfHxub2RlTmFtZT09PSdIVE1MJyl7cmV0dXJuIGZhbHNlO30KaWYoZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsZW1lbnQsJ3Bvc2l0aW9uJyk9PT0nZml4ZWQnKXtyZXR1cm4gdHJ1ZTt9CnJldHVybiBpc0ZpeGVkKGdldFBhcmVudE5vZGUoZWxlbWVudCkpO30KZnVuY3Rpb24gZ2V0Rml4ZWRQb3NpdGlvbk9mZnNldFBhcmVudChlbGVtZW50KXtpZighZWxlbWVudHx8IWVsZW1lbnQucGFyZW50RWxlbWVudHx8aXNJRSgpKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KdmFyIGVsPWVsZW1lbnQucGFyZW50RWxlbWVudDt3aGlsZShlbCYmZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsLCd0cmFuc2Zvcm0nKT09PSdub25lJyl7ZWw9ZWwucGFyZW50RWxlbWVudDt9CnJldHVybiBlbHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O30KZnVuY3Rpb24gZ2V0Qm91bmRhcmllcyhwb3BwZXIscmVmZXJlbmNlLHBhZGRpbmcsYm91bmRhcmllc0VsZW1lbnQpe3ZhciBmaXhlZFBvc2l0aW9uPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1s0XTpmYWxzZTt2YXIgYm91bmRhcmllcz17dG9wOjAsbGVmdDowfTt2YXIgb2Zmc2V0UGFyZW50PWZpeGVkUG9zaXRpb24/Z2V0Rml4ZWRQb3NpdGlvbk9mZnNldFBhcmVudChwb3BwZXIpOmZpbmRDb21tb25PZmZzZXRQYXJlbnQocG9wcGVyLHJlZmVyZW5jZSk7aWYoYm91bmRhcmllc0VsZW1lbnQ9PT0ndmlld3BvcnQnKXtib3VuZGFyaWVzPWdldFZpZXdwb3J0T2Zmc2V0UmVjdFJlbGF0aXZlVG9BcnRiaXRyYXJ5Tm9kZShvZmZzZXRQYXJlbnQsZml4ZWRQb3NpdGlvbik7fWVsc2V7dmFyIGJvdW5kYXJpZXNOb2RlPXZvaWQgMDtpZihib3VuZGFyaWVzRWxlbWVudD09PSdzY3JvbGxQYXJlbnQnKXtib3VuZGFyaWVzTm9kZT1nZXRTY3JvbGxQYXJlbnQoZ2V0UGFyZW50Tm9kZShyZWZlcmVuY2UpKTtpZihib3VuZGFyaWVzTm9kZS5ub2RlTmFtZT09PSdCT0RZJyl7Ym91bmRhcmllc05vZGU9cG9wcGVyLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O319ZWxzZSBpZihib3VuZGFyaWVzRWxlbWVudD09PSd3aW5kb3cnKXtib3VuZGFyaWVzTm9kZT1wb3BwZXIub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7fWVsc2V7Ym91bmRhcmllc05vZGU9Ym91bmRhcmllc0VsZW1lbnQ7fQp2YXIgb2Zmc2V0cz1nZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUoYm91bmRhcmllc05vZGUsb2Zmc2V0UGFyZW50LGZpeGVkUG9zaXRpb24pO2lmKGJvdW5kYXJpZXNOb2RlLm5vZGVOYW1lPT09J0hUTUwnJiYhaXNGaXhlZChvZmZzZXRQYXJlbnQpKXt2YXIgX2dldFdpbmRvd1NpemVzPWdldFdpbmRvd1NpemVzKCksaGVpZ2h0PV9nZXRXaW5kb3dTaXplcy5oZWlnaHQsd2lkdGg9X2dldFdpbmRvd1NpemVzLndpZHRoO2JvdW5kYXJpZXMudG9wKz1vZmZzZXRzLnRvcC1vZmZzZXRzLm1hcmdpblRvcDtib3VuZGFyaWVzLmJvdHRvbT1oZWlnaHQrb2Zmc2V0cy50b3A7Ym91bmRhcmllcy5sZWZ0Kz1vZmZzZXRzLmxlZnQtb2Zmc2V0cy5tYXJnaW5MZWZ0O2JvdW5kYXJpZXMucmlnaHQ9d2lkdGgrb2Zmc2V0cy5sZWZ0O31lbHNle2JvdW5kYXJpZXM9b2Zmc2V0czt9fQpib3VuZGFyaWVzLmxlZnQrPXBhZGRpbmc7Ym91bmRhcmllcy50b3ArPXBhZGRpbmc7Ym91bmRhcmllcy5yaWdodC09cGFkZGluZztib3VuZGFyaWVzLmJvdHRvbS09cGFkZGluZztyZXR1cm4gYm91bmRhcmllczt9CmZ1bmN0aW9uIGdldEFyZWEoX3JlZil7dmFyIHdpZHRoPV9yZWYud2lkdGgsaGVpZ2h0PV9yZWYuaGVpZ2h0O3JldHVybiB3aWR0aCpoZWlnaHQ7fQpmdW5jdGlvbiBjb21wdXRlQXV0b1BsYWNlbWVudChwbGFjZW1lbnQscmVmUmVjdCxwb3BwZXIscmVmZXJlbmNlLGJvdW5kYXJpZXNFbGVtZW50KXt2YXIgcGFkZGluZz1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbNV06MDtpZihwbGFjZW1lbnQuaW5kZXhPZignYXV0bycpPT09LTEpe3JldHVybiBwbGFjZW1lbnQ7fQp2YXIgYm91bmRhcmllcz1nZXRCb3VuZGFyaWVzKHBvcHBlcixyZWZlcmVuY2UscGFkZGluZyxib3VuZGFyaWVzRWxlbWVudCk7dmFyIHJlY3RzPXt0b3A6e3dpZHRoOmJvdW5kYXJpZXMud2lkdGgsaGVpZ2h0OnJlZlJlY3QudG9wLWJvdW5kYXJpZXMudG9wfSxyaWdodDp7d2lkdGg6Ym91bmRhcmllcy5yaWdodC1yZWZSZWN0LnJpZ2h0LGhlaWdodDpib3VuZGFyaWVzLmhlaWdodH0sYm90dG9tOnt3aWR0aDpib3VuZGFyaWVzLndpZHRoLGhlaWdodDpib3VuZGFyaWVzLmJvdHRvbS1yZWZSZWN0LmJvdHRvbX0sbGVmdDp7d2lkdGg6cmVmUmVjdC5sZWZ0LWJvdW5kYXJpZXMubGVmdCxoZWlnaHQ6Ym91bmRhcmllcy5oZWlnaHR9fTt2YXIgc29ydGVkQXJlYXM9T2JqZWN0LmtleXMocmVjdHMpLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBfZXh0ZW5kcyh7a2V5OmtleX0scmVjdHNba2V5XSx7YXJlYTpnZXRBcmVhKHJlY3RzW2tleV0pfSk7fSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBiLmFyZWEtYS5hcmVhO30pO3ZhciBmaWx0ZXJlZEFyZWFzPXNvcnRlZEFyZWFzLmZpbHRlcihmdW5jdGlvbihfcmVmMil7dmFyIHdpZHRoPV9yZWYyLndpZHRoLGhlaWdodD1fcmVmMi5oZWlnaHQ7cmV0dXJuIHdpZHRoPj1wb3BwZXIuY2xpZW50V2lkdGgmJmhlaWdodD49cG9wcGVyLmNsaWVudEhlaWdodDt9KTt2YXIgY29tcHV0ZWRQbGFjZW1lbnQ9ZmlsdGVyZWRBcmVhcy5sZW5ndGg+MD9maWx0ZXJlZEFyZWFzWzBdLmtleTpzb3J0ZWRBcmVhc1swXS5rZXk7dmFyIHZhcmlhdGlvbj1wbGFjZW1lbnQuc3BsaXQoJy0nKVsxXTtyZXR1cm4gY29tcHV0ZWRQbGFjZW1lbnQrKHZhcmlhdGlvbj8nLScrdmFyaWF0aW9uOicnKTt9CmZ1bmN0aW9uIGdldFJlZmVyZW5jZU9mZnNldHMoc3RhdGUscG9wcGVyLHJlZmVyZW5jZSl7dmFyIGZpeGVkUG9zaXRpb249YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT11bmRlZmluZWQ/YXJndW1lbnRzWzNdOm51bGw7dmFyIGNvbW1vbk9mZnNldFBhcmVudD1maXhlZFBvc2l0aW9uP2dldEZpeGVkUG9zaXRpb25PZmZzZXRQYXJlbnQocG9wcGVyKTpmaW5kQ29tbW9uT2Zmc2V0UGFyZW50KHBvcHBlcixyZWZlcmVuY2UpO3JldHVybiBnZXRPZmZzZXRSZWN0UmVsYXRpdmVUb0FyYml0cmFyeU5vZGUocmVmZXJlbmNlLGNvbW1vbk9mZnNldFBhcmVudCxmaXhlZFBvc2l0aW9uKTt9CmZ1bmN0aW9uIGdldE91dGVyU2l6ZXMoZWxlbWVudCl7dmFyIHN0eWxlcz1nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO3ZhciB4PXBhcnNlRmxvYXQoc3R5bGVzLm1hcmdpblRvcCkrcGFyc2VGbG9hdChzdHlsZXMubWFyZ2luQm90dG9tKTt2YXIgeT1wYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5MZWZ0KStwYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5SaWdodCk7dmFyIHJlc3VsdD17d2lkdGg6ZWxlbWVudC5vZmZzZXRXaWR0aCt5LGhlaWdodDplbGVtZW50Lm9mZnNldEhlaWdodCt4fTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KXt2YXIgaGFzaD17bGVmdDoncmlnaHQnLHJpZ2h0OidsZWZ0Jyxib3R0b206J3RvcCcsdG9wOidib3R0b20nfTtyZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLGZ1bmN0aW9uKG1hdGNoZWQpe3JldHVybiBoYXNoW21hdGNoZWRdO30pO30KZnVuY3Rpb24gZ2V0UG9wcGVyT2Zmc2V0cyhwb3BwZXIscmVmZXJlbmNlT2Zmc2V0cyxwbGFjZW1lbnQpe3BsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgcG9wcGVyUmVjdD1nZXRPdXRlclNpemVzKHBvcHBlcik7dmFyIHBvcHBlck9mZnNldHM9e3dpZHRoOnBvcHBlclJlY3Qud2lkdGgsaGVpZ2h0OnBvcHBlclJlY3QuaGVpZ2h0fTt2YXIgaXNIb3Jpej1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YocGxhY2VtZW50KSE9PS0xO3ZhciBtYWluU2lkZT1pc0hvcml6Pyd0b3AnOidsZWZ0Jzt2YXIgc2Vjb25kYXJ5U2lkZT1pc0hvcml6PydsZWZ0JzondG9wJzt2YXIgbWVhc3VyZW1lbnQ9aXNIb3Jpej8naGVpZ2h0Jzond2lkdGgnO3ZhciBzZWNvbmRhcnlNZWFzdXJlbWVudD0haXNIb3Jpej8naGVpZ2h0Jzond2lkdGgnO3BvcHBlck9mZnNldHNbbWFpblNpZGVdPXJlZmVyZW5jZU9mZnNldHNbbWFpblNpZGVdK3JlZmVyZW5jZU9mZnNldHNbbWVhc3VyZW1lbnRdLzItcG9wcGVyUmVjdFttZWFzdXJlbWVudF0vMjtpZihwbGFjZW1lbnQ9PT1zZWNvbmRhcnlTaWRlKXtwb3BwZXJPZmZzZXRzW3NlY29uZGFyeVNpZGVdPXJlZmVyZW5jZU9mZnNldHNbc2Vjb25kYXJ5U2lkZV0tcG9wcGVyUmVjdFtzZWNvbmRhcnlNZWFzdXJlbWVudF07fWVsc2V7cG9wcGVyT2Zmc2V0c1tzZWNvbmRhcnlTaWRlXT1yZWZlcmVuY2VPZmZzZXRzW2dldE9wcG9zaXRlUGxhY2VtZW50KHNlY29uZGFyeVNpZGUpXTt9CnJldHVybiBwb3BwZXJPZmZzZXRzO30KZnVuY3Rpb24gZmluZChhcnIsY2hlY2spe2lmKEFycmF5LnByb3RvdHlwZS5maW5kKXtyZXR1cm4gYXJyLmZpbmQoY2hlY2spO30KcmV0dXJuIGFyci5maWx0ZXIoY2hlY2spWzBdO30KZnVuY3Rpb24gZmluZEluZGV4KGFycixwcm9wLHZhbHVlKXtpZihBcnJheS5wcm90b3R5cGUuZmluZEluZGV4KXtyZXR1cm4gYXJyLmZpbmRJbmRleChmdW5jdGlvbihjdXIpe3JldHVybiBjdXJbcHJvcF09PT12YWx1ZTt9KTt9CnZhciBtYXRjaD1maW5kKGFycixmdW5jdGlvbihvYmope3JldHVybiBvYmpbcHJvcF09PT12YWx1ZTt9KTtyZXR1cm4gYXJyLmluZGV4T2YobWF0Y2gpO30KZnVuY3Rpb24gcnVuTW9kaWZpZXJzKG1vZGlmaWVycyxkYXRhLGVuZHMpe3ZhciBtb2RpZmllcnNUb1J1bj1lbmRzPT09dW5kZWZpbmVkP21vZGlmaWVyczptb2RpZmllcnMuc2xpY2UoMCxmaW5kSW5kZXgobW9kaWZpZXJzLCduYW1lJyxlbmRzKSk7bW9kaWZpZXJzVG9SdW4uZm9yRWFjaChmdW5jdGlvbihtb2RpZmllcil7aWYobW9kaWZpZXJbJ2Z1bmN0aW9uJ10pe2NvbnNvbGUud2FybignYG1vZGlmaWVyLmZ1bmN0aW9uYCBpcyBkZXByZWNhdGVkLCB1c2UgYG1vZGlmaWVyLmZuYCEnKTt9CnZhciBmbj1tb2RpZmllclsnZnVuY3Rpb24nXXx8bW9kaWZpZXIuZm47aWYobW9kaWZpZXIuZW5hYmxlZCYmaXNGdW5jdGlvbihmbikpe2RhdGEub2Zmc2V0cy5wb3BwZXI9Z2V0Q2xpZW50UmVjdChkYXRhLm9mZnNldHMucG9wcGVyKTtkYXRhLm9mZnNldHMucmVmZXJlbmNlPWdldENsaWVudFJlY3QoZGF0YS5vZmZzZXRzLnJlZmVyZW5jZSk7ZGF0YT1mbihkYXRhLG1vZGlmaWVyKTt9fSk7cmV0dXJuIGRhdGE7fQpmdW5jdGlvbiB1cGRhdGUoKXtpZih0aGlzLnN0YXRlLmlzRGVzdHJveWVkKXtyZXR1cm47fQp2YXIgZGF0YT17aW5zdGFuY2U6dGhpcyxzdHlsZXM6e30sYXJyb3dTdHlsZXM6e30sYXR0cmlidXRlczp7fSxmbGlwcGVkOmZhbHNlLG9mZnNldHM6e319O2RhdGEub2Zmc2V0cy5yZWZlcmVuY2U9Z2V0UmVmZXJlbmNlT2Zmc2V0cyh0aGlzLnN0YXRlLHRoaXMucG9wcGVyLHRoaXMucmVmZXJlbmNlLHRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkKTtkYXRhLnBsYWNlbWVudD1jb21wdXRlQXV0b1BsYWNlbWVudCh0aGlzLm9wdGlvbnMucGxhY2VtZW50LGRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsdGhpcy5wb3BwZXIsdGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LHRoaXMub3B0aW9ucy5tb2RpZmllcnMuZmxpcC5wYWRkaW5nKTtkYXRhLm9yaWdpbmFsUGxhY2VtZW50PWRhdGEucGxhY2VtZW50O2RhdGEucG9zaXRpb25GaXhlZD10aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZDtkYXRhLm9mZnNldHMucG9wcGVyPWdldFBvcHBlck9mZnNldHModGhpcy5wb3BwZXIsZGF0YS5vZmZzZXRzLnJlZmVyZW5jZSxkYXRhLnBsYWNlbWVudCk7ZGF0YS5vZmZzZXRzLnBvcHBlci5wb3NpdGlvbj10aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZD8nZml4ZWQnOidhYnNvbHV0ZSc7ZGF0YT1ydW5Nb2RpZmllcnModGhpcy5tb2RpZmllcnMsZGF0YSk7aWYoIXRoaXMuc3RhdGUuaXNDcmVhdGVkKXt0aGlzLnN0YXRlLmlzQ3JlYXRlZD10cnVlO3RoaXMub3B0aW9ucy5vbkNyZWF0ZShkYXRhKTt9ZWxzZXt0aGlzLm9wdGlvbnMub25VcGRhdGUoZGF0YSk7fX0KZnVuY3Rpb24gaXNNb2RpZmllckVuYWJsZWQobW9kaWZpZXJzLG1vZGlmaWVyTmFtZSl7cmV0dXJuIG1vZGlmaWVycy5zb21lKGZ1bmN0aW9uKF9yZWYpe3ZhciBuYW1lPV9yZWYubmFtZSxlbmFibGVkPV9yZWYuZW5hYmxlZDtyZXR1cm4gZW5hYmxlZCYmbmFtZT09PW1vZGlmaWVyTmFtZTt9KTt9CmZ1bmN0aW9uIGdldFN1cHBvcnRlZFByb3BlcnR5TmFtZShwcm9wZXJ0eSl7dmFyIHByZWZpeGVzPVtmYWxzZSwnbXMnLCdXZWJraXQnLCdNb3onLCdPJ107dmFyIHVwcGVyUHJvcD1wcm9wZXJ0eS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStwcm9wZXJ0eS5zbGljZSgxKTtmb3IodmFyIGk9MDtpPHByZWZpeGVzLmxlbmd0aDtpKyspe3ZhciBwcmVmaXg9cHJlZml4ZXNbaV07dmFyIHRvQ2hlY2s9cHJlZml4PycnK3ByZWZpeCt1cHBlclByb3A6cHJvcGVydHk7aWYodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGVbdG9DaGVja10hPT0ndW5kZWZpbmVkJyl7cmV0dXJuIHRvQ2hlY2s7fX0KcmV0dXJuIG51bGw7fQpmdW5jdGlvbiBkZXN0cm95KCl7dGhpcy5zdGF0ZS5pc0Rlc3Ryb3llZD10cnVlO2lmKGlzTW9kaWZpZXJFbmFibGVkKHRoaXMubW9kaWZpZXJzLCdhcHBseVN0eWxlJykpe3RoaXMucG9wcGVyLnJlbW92ZUF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnKTt0aGlzLnBvcHBlci5zdHlsZS5wb3NpdGlvbj0nJzt0aGlzLnBvcHBlci5zdHlsZS50b3A9Jyc7dGhpcy5wb3BwZXIuc3R5bGUubGVmdD0nJzt0aGlzLnBvcHBlci5zdHlsZS5yaWdodD0nJzt0aGlzLnBvcHBlci5zdHlsZS5ib3R0b209Jyc7dGhpcy5wb3BwZXIuc3R5bGUud2lsbENoYW5nZT0nJzt0aGlzLnBvcHBlci5zdHlsZVtnZXRTdXBwb3J0ZWRQcm9wZXJ0eU5hbWUoJ3RyYW5zZm9ybScpXT0nJzt9CnRoaXMuZGlzYWJsZUV2ZW50TGlzdGVuZXJzKCk7aWYodGhpcy5vcHRpb25zLnJlbW92ZU9uRGVzdHJveSl7dGhpcy5wb3BwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBvcHBlcik7fQpyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIGdldFdpbmRvdyhlbGVtZW50KXt2YXIgb3duZXJEb2N1bWVudD1lbGVtZW50Lm93bmVyRG9jdW1lbnQ7cmV0dXJuIG93bmVyRG9jdW1lbnQ/b3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldzp3aW5kb3c7fQpmdW5jdGlvbiBhdHRhY2hUb1Njcm9sbFBhcmVudHMoc2Nyb2xsUGFyZW50LGV2ZW50LGNhbGxiYWNrLHNjcm9sbFBhcmVudHMpe3ZhciBpc0JvZHk9c2Nyb2xsUGFyZW50Lm5vZGVOYW1lPT09J0JPRFknO3ZhciB0YXJnZXQ9aXNCb2R5P3Njcm9sbFBhcmVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3OnNjcm9sbFBhcmVudDt0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCxjYWxsYmFjayx7cGFzc2l2ZTp0cnVlfSk7aWYoIWlzQm9keSl7YXR0YWNoVG9TY3JvbGxQYXJlbnRzKGdldFNjcm9sbFBhcmVudCh0YXJnZXQucGFyZW50Tm9kZSksZXZlbnQsY2FsbGJhY2ssc2Nyb2xsUGFyZW50cyk7fQpzY3JvbGxQYXJlbnRzLnB1c2godGFyZ2V0KTt9CmZ1bmN0aW9uIHNldHVwRXZlbnRMaXN0ZW5lcnMocmVmZXJlbmNlLG9wdGlvbnMsc3RhdGUsdXBkYXRlQm91bmQpe3N0YXRlLnVwZGF0ZUJvdW5kPXVwZGF0ZUJvdW5kO2dldFdpbmRvdyhyZWZlcmVuY2UpLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsc3RhdGUudXBkYXRlQm91bmQse3Bhc3NpdmU6dHJ1ZX0pO3ZhciBzY3JvbGxFbGVtZW50PWdldFNjcm9sbFBhcmVudChyZWZlcmVuY2UpO2F0dGFjaFRvU2Nyb2xsUGFyZW50cyhzY3JvbGxFbGVtZW50LCdzY3JvbGwnLHN0YXRlLnVwZGF0ZUJvdW5kLHN0YXRlLnNjcm9sbFBhcmVudHMpO3N0YXRlLnNjcm9sbEVsZW1lbnQ9c2Nyb2xsRWxlbWVudDtzdGF0ZS5ldmVudHNFbmFibGVkPXRydWU7cmV0dXJuIHN0YXRlO30KZnVuY3Rpb24gZW5hYmxlRXZlbnRMaXN0ZW5lcnMoKXtpZighdGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkKXt0aGlzLnN0YXRlPXNldHVwRXZlbnRMaXN0ZW5lcnModGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLHRoaXMuc3RhdGUsdGhpcy5zY2hlZHVsZVVwZGF0ZSk7fX0KZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMocmVmZXJlbmNlLHN0YXRlKXtnZXRXaW5kb3cocmVmZXJlbmNlKS5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLHN0YXRlLnVwZGF0ZUJvdW5kKTtzdGF0ZS5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24odGFyZ2V0KXt0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyxzdGF0ZS51cGRhdGVCb3VuZCk7fSk7c3RhdGUudXBkYXRlQm91bmQ9bnVsbDtzdGF0ZS5zY3JvbGxQYXJlbnRzPVtdO3N0YXRlLnNjcm9sbEVsZW1lbnQ9bnVsbDtzdGF0ZS5ldmVudHNFbmFibGVkPWZhbHNlO3JldHVybiBzdGF0ZTt9CmZ1bmN0aW9uIGRpc2FibGVFdmVudExpc3RlbmVycygpe2lmKHRoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5zY2hlZHVsZVVwZGF0ZSk7dGhpcy5zdGF0ZT1yZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnJlZmVyZW5jZSx0aGlzLnN0YXRlKTt9fQpmdW5jdGlvbiBpc051bWVyaWMobil7cmV0dXJuIG4hPT0nJyYmIWlzTmFOKHBhcnNlRmxvYXQobikpJiZpc0Zpbml0ZShuKTt9CmZ1bmN0aW9uIHNldFN0eWxlcyhlbGVtZW50LHN0eWxlcyl7T2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZhciB1bml0PScnO2lmKFsnd2lkdGgnLCdoZWlnaHQnLCd0b3AnLCdyaWdodCcsJ2JvdHRvbScsJ2xlZnQnXS5pbmRleE9mKHByb3ApIT09LTEmJmlzTnVtZXJpYyhzdHlsZXNbcHJvcF0pKXt1bml0PSdweCc7fQplbGVtZW50LnN0eWxlW3Byb3BdPXN0eWxlc1twcm9wXSt1bml0O30pO30KZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbGVtZW50LGF0dHJpYnV0ZXMpe09iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24ocHJvcCl7dmFyIHZhbHVlPWF0dHJpYnV0ZXNbcHJvcF07aWYodmFsdWUhPT1mYWxzZSl7ZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcCxhdHRyaWJ1dGVzW3Byb3BdKTt9ZWxzZXtlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShwcm9wKTt9fSk7fQpmdW5jdGlvbiBhcHBseVN0eWxlKGRhdGEpe3NldFN0eWxlcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLnN0eWxlcyk7c2V0QXR0cmlidXRlcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLmF0dHJpYnV0ZXMpO2lmKGRhdGEuYXJyb3dFbGVtZW50JiZPYmplY3Qua2V5cyhkYXRhLmFycm93U3R5bGVzKS5sZW5ndGgpe3NldFN0eWxlcyhkYXRhLmFycm93RWxlbWVudCxkYXRhLmFycm93U3R5bGVzKTt9CnJldHVybiBkYXRhO30KZnVuY3Rpb24gYXBwbHlTdHlsZU9uTG9hZChyZWZlcmVuY2UscG9wcGVyLG9wdGlvbnMsbW9kaWZpZXJPcHRpb25zLHN0YXRlKXt2YXIgcmVmZXJlbmNlT2Zmc2V0cz1nZXRSZWZlcmVuY2VPZmZzZXRzKHN0YXRlLHBvcHBlcixyZWZlcmVuY2Usb3B0aW9ucy5wb3NpdGlvbkZpeGVkKTt2YXIgcGxhY2VtZW50PWNvbXB1dGVBdXRvUGxhY2VtZW50KG9wdGlvbnMucGxhY2VtZW50LHJlZmVyZW5jZU9mZnNldHMscG9wcGVyLHJlZmVyZW5jZSxvcHRpb25zLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LG9wdGlvbnMubW9kaWZpZXJzLmZsaXAucGFkZGluZyk7cG9wcGVyLnNldEF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnLHBsYWNlbWVudCk7c2V0U3R5bGVzKHBvcHBlcix7cG9zaXRpb246b3B0aW9ucy5wb3NpdGlvbkZpeGVkPydmaXhlZCc6J2Fic29sdXRlJ30pO3JldHVybiBvcHRpb25zO30KZnVuY3Rpb24gY29tcHV0ZVN0eWxlKGRhdGEsb3B0aW9ucyl7dmFyIHg9b3B0aW9ucy54LHk9b3B0aW9ucy55O3ZhciBwb3BwZXI9ZGF0YS5vZmZzZXRzLnBvcHBlcjt2YXIgbGVnYWN5R3B1QWNjZWxlcmF0aW9uT3B0aW9uPWZpbmQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsZnVuY3Rpb24obW9kaWZpZXIpe3JldHVybiBtb2RpZmllci5uYW1lPT09J2FwcGx5U3R5bGUnO30pLmdwdUFjY2VsZXJhdGlvbjtpZihsZWdhY3lHcHVBY2NlbGVyYXRpb25PcHRpb24hPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignV0FSTklORzogYGdwdUFjY2VsZXJhdGlvbmAgb3B0aW9uIG1vdmVkIHRvIGBjb21wdXRlU3R5bGVgIG1vZGlmaWVyIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQgaW4gZnV0dXJlIHZlcnNpb25zIG9mIFBvcHBlci5qcyEnKTt9CnZhciBncHVBY2NlbGVyYXRpb249bGVnYWN5R3B1QWNjZWxlcmF0aW9uT3B0aW9uIT09dW5kZWZpbmVkP2xlZ2FjeUdwdUFjY2VsZXJhdGlvbk9wdGlvbjpvcHRpb25zLmdwdUFjY2VsZXJhdGlvbjt2YXIgb2Zmc2V0UGFyZW50PWdldE9mZnNldFBhcmVudChkYXRhLmluc3RhbmNlLnBvcHBlcik7dmFyIG9mZnNldFBhcmVudFJlY3Q9Z2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCk7dmFyIHN0eWxlcz17cG9zaXRpb246cG9wcGVyLnBvc2l0aW9ufTt2YXIgb2Zmc2V0cz17bGVmdDpNYXRoLmZsb29yKHBvcHBlci5sZWZ0KSx0b3A6TWF0aC5yb3VuZChwb3BwZXIudG9wKSxib3R0b206TWF0aC5yb3VuZChwb3BwZXIuYm90dG9tKSxyaWdodDpNYXRoLmZsb29yKHBvcHBlci5yaWdodCl9O3ZhciBzaWRlQT14PT09J2JvdHRvbSc/J3RvcCc6J2JvdHRvbSc7dmFyIHNpZGVCPXk9PT0ncmlnaHQnPydsZWZ0JzoncmlnaHQnO3ZhciBwcmVmaXhlZFByb3BlcnR5PWdldFN1cHBvcnRlZFByb3BlcnR5TmFtZSgndHJhbnNmb3JtJyk7dmFyIGxlZnQ9dm9pZCAwLHRvcD12b2lkIDA7aWYoc2lkZUE9PT0nYm90dG9tJyl7dG9wPS1vZmZzZXRQYXJlbnRSZWN0LmhlaWdodCtvZmZzZXRzLmJvdHRvbTt9ZWxzZXt0b3A9b2Zmc2V0cy50b3A7fQppZihzaWRlQj09PSdyaWdodCcpe2xlZnQ9LW9mZnNldFBhcmVudFJlY3Qud2lkdGgrb2Zmc2V0cy5yaWdodDt9ZWxzZXtsZWZ0PW9mZnNldHMubGVmdDt9CmlmKGdwdUFjY2VsZXJhdGlvbiYmcHJlZml4ZWRQcm9wZXJ0eSl7c3R5bGVzW3ByZWZpeGVkUHJvcGVydHldPSd0cmFuc2xhdGUzZCgnK2xlZnQrJ3B4LCAnK3RvcCsncHgsIDApJztzdHlsZXNbc2lkZUFdPTA7c3R5bGVzW3NpZGVCXT0wO3N0eWxlcy53aWxsQ2hhbmdlPSd0cmFuc2Zvcm0nO31lbHNle3ZhciBpbnZlcnRUb3A9c2lkZUE9PT0nYm90dG9tJz8tMToxO3ZhciBpbnZlcnRMZWZ0PXNpZGVCPT09J3JpZ2h0Jz8tMToxO3N0eWxlc1tzaWRlQV09dG9wKmludmVydFRvcDtzdHlsZXNbc2lkZUJdPWxlZnQqaW52ZXJ0TGVmdDtzdHlsZXMud2lsbENoYW5nZT1zaWRlQSsnLCAnK3NpZGVCO30KdmFyIGF0dHJpYnV0ZXM9eyd4LXBsYWNlbWVudCc6ZGF0YS5wbGFjZW1lbnR9O2RhdGEuYXR0cmlidXRlcz1fZXh0ZW5kcyh7fSxhdHRyaWJ1dGVzLGRhdGEuYXR0cmlidXRlcyk7ZGF0YS5zdHlsZXM9X2V4dGVuZHMoe30sc3R5bGVzLGRhdGEuc3R5bGVzKTtkYXRhLmFycm93U3R5bGVzPV9leHRlbmRzKHt9LGRhdGEub2Zmc2V0cy5hcnJvdyxkYXRhLmFycm93U3R5bGVzKTtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGlzTW9kaWZpZXJSZXF1aXJlZChtb2RpZmllcnMscmVxdWVzdGluZ05hbWUscmVxdWVzdGVkTmFtZSl7dmFyIHJlcXVlc3Rpbmc9ZmluZChtb2RpZmllcnMsZnVuY3Rpb24oX3JlZil7dmFyIG5hbWU9X3JlZi5uYW1lO3JldHVybiBuYW1lPT09cmVxdWVzdGluZ05hbWU7fSk7dmFyIGlzUmVxdWlyZWQ9ISFyZXF1ZXN0aW5nJiZtb2RpZmllcnMuc29tZShmdW5jdGlvbihtb2RpZmllcil7cmV0dXJuIG1vZGlmaWVyLm5hbWU9PT1yZXF1ZXN0ZWROYW1lJiZtb2RpZmllci5lbmFibGVkJiZtb2RpZmllci5vcmRlcjxyZXF1ZXN0aW5nLm9yZGVyO30pO2lmKCFpc1JlcXVpcmVkKXt2YXIgX3JlcXVlc3Rpbmc9J2AnK3JlcXVlc3RpbmdOYW1lKydgJzt2YXIgcmVxdWVzdGVkPSdgJytyZXF1ZXN0ZWROYW1lKydgJztjb25zb2xlLndhcm4ocmVxdWVzdGVkKycgbW9kaWZpZXIgaXMgcmVxdWlyZWQgYnkgJytfcmVxdWVzdGluZysnIG1vZGlmaWVyIGluIG9yZGVyIHRvIHdvcmssIGJlIHN1cmUgdG8gaW5jbHVkZSBpdCBiZWZvcmUgJytfcmVxdWVzdGluZysnIScpO30KcmV0dXJuIGlzUmVxdWlyZWQ7fQpmdW5jdGlvbiBhcnJvdyhkYXRhLG9wdGlvbnMpe3ZhciBfZGF0YSRvZmZzZXRzJGFycm93O2lmKCFpc01vZGlmaWVyUmVxdWlyZWQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsJ2Fycm93Jywna2VlcFRvZ2V0aGVyJykpe3JldHVybiBkYXRhO30KdmFyIGFycm93RWxlbWVudD1vcHRpb25zLmVsZW1lbnQ7aWYodHlwZW9mIGFycm93RWxlbWVudD09PSdzdHJpbmcnKXthcnJvd0VsZW1lbnQ9ZGF0YS5pbnN0YW5jZS5wb3BwZXIucXVlcnlTZWxlY3RvcihhcnJvd0VsZW1lbnQpO2lmKCFhcnJvd0VsZW1lbnQpe3JldHVybiBkYXRhO319ZWxzZXtpZighZGF0YS5pbnN0YW5jZS5wb3BwZXIuY29udGFpbnMoYXJyb3dFbGVtZW50KSl7Y29uc29sZS53YXJuKCdXQVJOSU5HOiBgYXJyb3cuZWxlbWVudGAgbXVzdCBiZSBjaGlsZCBvZiBpdHMgcG9wcGVyIGVsZW1lbnQhJyk7cmV0dXJuIGRhdGE7fX0KdmFyIHBsYWNlbWVudD1kYXRhLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBpc1ZlcnRpY2FsPVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihwbGFjZW1lbnQpIT09LTE7dmFyIGxlbj1pc1ZlcnRpY2FsPydoZWlnaHQnOid3aWR0aCc7dmFyIHNpZGVDYXBpdGFsaXplZD1pc1ZlcnRpY2FsPydUb3AnOidMZWZ0Jzt2YXIgc2lkZT1zaWRlQ2FwaXRhbGl6ZWQudG9Mb3dlckNhc2UoKTt2YXIgYWx0U2lkZT1pc1ZlcnRpY2FsPydsZWZ0JzondG9wJzt2YXIgb3BTaWRlPWlzVmVydGljYWw/J2JvdHRvbSc6J3JpZ2h0Jzt2YXIgYXJyb3dFbGVtZW50U2l6ZT1nZXRPdXRlclNpemVzKGFycm93RWxlbWVudClbbGVuXTtpZihyZWZlcmVuY2Vbb3BTaWRlXS1hcnJvd0VsZW1lbnRTaXplPHBvcHBlcltzaWRlXSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltzaWRlXS09cG9wcGVyW3NpZGVdLShyZWZlcmVuY2Vbb3BTaWRlXS1hcnJvd0VsZW1lbnRTaXplKTt9CmlmKHJlZmVyZW5jZVtzaWRlXSthcnJvd0VsZW1lbnRTaXplPnBvcHBlcltvcFNpZGVdKXtkYXRhLm9mZnNldHMucG9wcGVyW3NpZGVdKz1yZWZlcmVuY2Vbc2lkZV0rYXJyb3dFbGVtZW50U2l6ZS1wb3BwZXJbb3BTaWRlXTt9CmRhdGEub2Zmc2V0cy5wb3BwZXI9Z2V0Q2xpZW50UmVjdChkYXRhLm9mZnNldHMucG9wcGVyKTt2YXIgY2VudGVyPXJlZmVyZW5jZVtzaWRlXStyZWZlcmVuY2VbbGVuXS8yLWFycm93RWxlbWVudFNpemUvMjt2YXIgY3NzPWdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShkYXRhLmluc3RhbmNlLnBvcHBlcik7dmFyIHBvcHBlck1hcmdpblNpZGU9cGFyc2VGbG9hdChjc3NbJ21hcmdpbicrc2lkZUNhcGl0YWxpemVkXSwxMCk7dmFyIHBvcHBlckJvcmRlclNpZGU9cGFyc2VGbG9hdChjc3NbJ2JvcmRlcicrc2lkZUNhcGl0YWxpemVkKydXaWR0aCddLDEwKTt2YXIgc2lkZVZhbHVlPWNlbnRlci1kYXRhLm9mZnNldHMucG9wcGVyW3NpZGVdLXBvcHBlck1hcmdpblNpZGUtcG9wcGVyQm9yZGVyU2lkZTtzaWRlVmFsdWU9TWF0aC5tYXgoTWF0aC5taW4ocG9wcGVyW2xlbl0tYXJyb3dFbGVtZW50U2l6ZSxzaWRlVmFsdWUpLDApO2RhdGEuYXJyb3dFbGVtZW50PWFycm93RWxlbWVudDtkYXRhLm9mZnNldHMuYXJyb3c9KF9kYXRhJG9mZnNldHMkYXJyb3c9e30sZGVmaW5lUHJvcGVydHkoX2RhdGEkb2Zmc2V0cyRhcnJvdyxzaWRlLE1hdGgucm91bmQoc2lkZVZhbHVlKSksZGVmaW5lUHJvcGVydHkoX2RhdGEkb2Zmc2V0cyRhcnJvdyxhbHRTaWRlLCcnKSxfZGF0YSRvZmZzZXRzJGFycm93KTtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGdldE9wcG9zaXRlVmFyaWF0aW9uKHZhcmlhdGlvbil7aWYodmFyaWF0aW9uPT09J2VuZCcpe3JldHVybidzdGFydCc7fWVsc2UgaWYodmFyaWF0aW9uPT09J3N0YXJ0Jyl7cmV0dXJuJ2VuZCc7fQpyZXR1cm4gdmFyaWF0aW9uO30KdmFyIHBsYWNlbWVudHM9WydhdXRvLXN0YXJ0JywnYXV0bycsJ2F1dG8tZW5kJywndG9wLXN0YXJ0JywndG9wJywndG9wLWVuZCcsJ3JpZ2h0LXN0YXJ0JywncmlnaHQnLCdyaWdodC1lbmQnLCdib3R0b20tZW5kJywnYm90dG9tJywnYm90dG9tLXN0YXJ0JywnbGVmdC1lbmQnLCdsZWZ0JywnbGVmdC1zdGFydCddO3ZhciB2YWxpZFBsYWNlbWVudHM9cGxhY2VtZW50cy5zbGljZSgzKTtmdW5jdGlvbiBjbG9ja3dpc2UocGxhY2VtZW50KXt2YXIgY291bnRlcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06ZmFsc2U7dmFyIGluZGV4PXZhbGlkUGxhY2VtZW50cy5pbmRleE9mKHBsYWNlbWVudCk7dmFyIGFycj12YWxpZFBsYWNlbWVudHMuc2xpY2UoaW5kZXgrMSkuY29uY2F0KHZhbGlkUGxhY2VtZW50cy5zbGljZSgwLGluZGV4KSk7cmV0dXJuIGNvdW50ZXI/YXJyLnJldmVyc2UoKTphcnI7fQp2YXIgQkVIQVZJT1JTPXtGTElQOidmbGlwJyxDTE9DS1dJU0U6J2Nsb2Nrd2lzZScsQ09VTlRFUkNMT0NLV0lTRTonY291bnRlcmNsb2Nrd2lzZSd9O2Z1bmN0aW9uIGZsaXAoZGF0YSxvcHRpb25zKXtpZihpc01vZGlmaWVyRW5hYmxlZChkYXRhLmluc3RhbmNlLm1vZGlmaWVycywnaW5uZXInKSl7cmV0dXJuIGRhdGE7fQppZihkYXRhLmZsaXBwZWQmJmRhdGEucGxhY2VtZW50PT09ZGF0YS5vcmlnaW5hbFBsYWNlbWVudCl7cmV0dXJuIGRhdGE7fQp2YXIgYm91bmRhcmllcz1nZXRCb3VuZGFyaWVzKGRhdGEuaW5zdGFuY2UucG9wcGVyLGRhdGEuaW5zdGFuY2UucmVmZXJlbmNlLG9wdGlvbnMucGFkZGluZyxvcHRpb25zLmJvdW5kYXJpZXNFbGVtZW50LGRhdGEucG9zaXRpb25GaXhlZCk7dmFyIHBsYWNlbWVudD1kYXRhLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBwbGFjZW1lbnRPcHBvc2l0ZT1nZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO3ZhciB2YXJpYXRpb249ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVsxXXx8Jyc7dmFyIGZsaXBPcmRlcj1bXTtzd2l0Y2gob3B0aW9ucy5iZWhhdmlvcil7Y2FzZSBCRUhBVklPUlMuRkxJUDpmbGlwT3JkZXI9W3BsYWNlbWVudCxwbGFjZW1lbnRPcHBvc2l0ZV07YnJlYWs7Y2FzZSBCRUhBVklPUlMuQ0xPQ0tXSVNFOmZsaXBPcmRlcj1jbG9ja3dpc2UocGxhY2VtZW50KTticmVhaztjYXNlIEJFSEFWSU9SUy5DT1VOVEVSQ0xPQ0tXSVNFOmZsaXBPcmRlcj1jbG9ja3dpc2UocGxhY2VtZW50LHRydWUpO2JyZWFrO2RlZmF1bHQ6ZmxpcE9yZGVyPW9wdGlvbnMuYmVoYXZpb3I7fQpmbGlwT3JkZXIuZm9yRWFjaChmdW5jdGlvbihzdGVwLGluZGV4KXtpZihwbGFjZW1lbnQhPT1zdGVwfHxmbGlwT3JkZXIubGVuZ3RoPT09aW5kZXgrMSl7cmV0dXJuIGRhdGE7fQpwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTtwbGFjZW1lbnRPcHBvc2l0ZT1nZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO3ZhciBwb3BwZXJPZmZzZXRzPWRhdGEub2Zmc2V0cy5wb3BwZXI7dmFyIHJlZk9mZnNldHM9ZGF0YS5vZmZzZXRzLnJlZmVyZW5jZTt2YXIgZmxvb3I9TWF0aC5mbG9vcjt2YXIgb3ZlcmxhcHNSZWY9cGxhY2VtZW50PT09J2xlZnQnJiZmbG9vcihwb3BwZXJPZmZzZXRzLnJpZ2h0KT5mbG9vcihyZWZPZmZzZXRzLmxlZnQpfHxwbGFjZW1lbnQ9PT0ncmlnaHQnJiZmbG9vcihwb3BwZXJPZmZzZXRzLmxlZnQpPGZsb29yKHJlZk9mZnNldHMucmlnaHQpfHxwbGFjZW1lbnQ9PT0ndG9wJyYmZmxvb3IocG9wcGVyT2Zmc2V0cy5ib3R0b20pPmZsb29yKHJlZk9mZnNldHMudG9wKXx8cGxhY2VtZW50PT09J2JvdHRvbScmJmZsb29yKHBvcHBlck9mZnNldHMudG9wKTxmbG9vcihyZWZPZmZzZXRzLmJvdHRvbSk7dmFyIG92ZXJmbG93c0xlZnQ9Zmxvb3IocG9wcGVyT2Zmc2V0cy5sZWZ0KTxmbG9vcihib3VuZGFyaWVzLmxlZnQpO3ZhciBvdmVyZmxvd3NSaWdodD1mbG9vcihwb3BwZXJPZmZzZXRzLnJpZ2h0KT5mbG9vcihib3VuZGFyaWVzLnJpZ2h0KTt2YXIgb3ZlcmZsb3dzVG9wPWZsb29yKHBvcHBlck9mZnNldHMudG9wKTxmbG9vcihib3VuZGFyaWVzLnRvcCk7dmFyIG92ZXJmbG93c0JvdHRvbT1mbG9vcihwb3BwZXJPZmZzZXRzLmJvdHRvbSk+Zmxvb3IoYm91bmRhcmllcy5ib3R0b20pO3ZhciBvdmVyZmxvd3NCb3VuZGFyaWVzPXBsYWNlbWVudD09PSdsZWZ0JyYmb3ZlcmZsb3dzTGVmdHx8cGxhY2VtZW50PT09J3JpZ2h0JyYmb3ZlcmZsb3dzUmlnaHR8fHBsYWNlbWVudD09PSd0b3AnJiZvdmVyZmxvd3NUb3B8fHBsYWNlbWVudD09PSdib3R0b20nJiZvdmVyZmxvd3NCb3R0b207dmFyIGlzVmVydGljYWw9Wyd0b3AnLCdib3R0b20nXS5pbmRleE9mKHBsYWNlbWVudCkhPT0tMTt2YXIgZmxpcHBlZFZhcmlhdGlvbj0hIW9wdGlvbnMuZmxpcFZhcmlhdGlvbnMmJihpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nc3RhcnQnJiZvdmVyZmxvd3NMZWZ0fHxpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nZW5kJyYmb3ZlcmZsb3dzUmlnaHR8fCFpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nc3RhcnQnJiZvdmVyZmxvd3NUb3B8fCFpc1ZlcnRpY2FsJiZ2YXJpYXRpb249PT0nZW5kJyYmb3ZlcmZsb3dzQm90dG9tKTtpZihvdmVybGFwc1JlZnx8b3ZlcmZsb3dzQm91bmRhcmllc3x8ZmxpcHBlZFZhcmlhdGlvbil7ZGF0YS5mbGlwcGVkPXRydWU7aWYob3ZlcmxhcHNSZWZ8fG92ZXJmbG93c0JvdW5kYXJpZXMpe3BsYWNlbWVudD1mbGlwT3JkZXJbaW5kZXgrMV07fQppZihmbGlwcGVkVmFyaWF0aW9uKXt2YXJpYXRpb249Z2V0T3Bwb3NpdGVWYXJpYXRpb24odmFyaWF0aW9uKTt9CmRhdGEucGxhY2VtZW50PXBsYWNlbWVudCsodmFyaWF0aW9uPyctJyt2YXJpYXRpb246JycpO2RhdGEub2Zmc2V0cy5wb3BwZXI9X2V4dGVuZHMoe30sZGF0YS5vZmZzZXRzLnBvcHBlcixnZXRQb3BwZXJPZmZzZXRzKGRhdGEuaW5zdGFuY2UucG9wcGVyLGRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsZGF0YS5wbGFjZW1lbnQpKTtkYXRhPXJ1bk1vZGlmaWVycyhkYXRhLmluc3RhbmNlLm1vZGlmaWVycyxkYXRhLCdmbGlwJyk7fX0pO3JldHVybiBkYXRhO30KZnVuY3Rpb24ga2VlcFRvZ2V0aGVyKGRhdGEpe3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgZmxvb3I9TWF0aC5mbG9vcjt2YXIgaXNWZXJ0aWNhbD1bJ3RvcCcsJ2JvdHRvbSddLmluZGV4T2YocGxhY2VtZW50KSE9PS0xO3ZhciBzaWRlPWlzVmVydGljYWw/J3JpZ2h0JzonYm90dG9tJzt2YXIgb3BTaWRlPWlzVmVydGljYWw/J2xlZnQnOid0b3AnO3ZhciBtZWFzdXJlbWVudD1pc1ZlcnRpY2FsPyd3aWR0aCc6J2hlaWdodCc7aWYocG9wcGVyW3NpZGVdPGZsb29yKHJlZmVyZW5jZVtvcFNpZGVdKSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltvcFNpZGVdPWZsb29yKHJlZmVyZW5jZVtvcFNpZGVdKS1wb3BwZXJbbWVhc3VyZW1lbnRdO30KaWYocG9wcGVyW29wU2lkZV0+Zmxvb3IocmVmZXJlbmNlW3NpZGVdKSl7ZGF0YS5vZmZzZXRzLnBvcHBlcltvcFNpZGVdPWZsb29yKHJlZmVyZW5jZVtzaWRlXSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIHRvVmFsdWUoc3RyLG1lYXN1cmVtZW50LHBvcHBlck9mZnNldHMscmVmZXJlbmNlT2Zmc2V0cyl7dmFyIHNwbGl0PXN0ci5tYXRjaCgvKCg/OlwtfFwrKT9cZCpcLj9cZCopKC4qKS8pO3ZhciB2YWx1ZT0rc3BsaXRbMV07dmFyIHVuaXQ9c3BsaXRbMl07aWYoIXZhbHVlKXtyZXR1cm4gc3RyO30KaWYodW5pdC5pbmRleE9mKCclJyk9PT0wKXt2YXIgZWxlbWVudD12b2lkIDA7c3dpdGNoKHVuaXQpe2Nhc2UnJXAnOmVsZW1lbnQ9cG9wcGVyT2Zmc2V0czticmVhaztjYXNlJyUnOmNhc2UnJXInOmRlZmF1bHQ6ZWxlbWVudD1yZWZlcmVuY2VPZmZzZXRzO30KdmFyIHJlY3Q9Z2V0Q2xpZW50UmVjdChlbGVtZW50KTtyZXR1cm4gcmVjdFttZWFzdXJlbWVudF0vMTAwKnZhbHVlO31lbHNlIGlmKHVuaXQ9PT0ndmgnfHx1bml0PT09J3Z3Jyl7dmFyIHNpemU9dm9pZCAwO2lmKHVuaXQ9PT0ndmgnKXtzaXplPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsd2luZG93LmlubmVySGVpZ2h0fHwwKTt9ZWxzZXtzaXplPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCx3aW5kb3cuaW5uZXJXaWR0aHx8MCk7fQpyZXR1cm4gc2l6ZS8xMDAqdmFsdWU7fWVsc2V7cmV0dXJuIHZhbHVlO319CmZ1bmN0aW9uIHBhcnNlT2Zmc2V0KG9mZnNldCxwb3BwZXJPZmZzZXRzLHJlZmVyZW5jZU9mZnNldHMsYmFzZVBsYWNlbWVudCl7dmFyIG9mZnNldHM9WzAsMF07dmFyIHVzZUhlaWdodD1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YoYmFzZVBsYWNlbWVudCkhPT0tMTt2YXIgZnJhZ21lbnRzPW9mZnNldC5zcGxpdCgvKFwrfFwtKS8pLm1hcChmdW5jdGlvbihmcmFnKXtyZXR1cm4gZnJhZy50cmltKCk7fSk7dmFyIGRpdmlkZXI9ZnJhZ21lbnRzLmluZGV4T2YoZmluZChmcmFnbWVudHMsZnVuY3Rpb24oZnJhZyl7cmV0dXJuIGZyYWcuc2VhcmNoKC8sfFxzLykhPT0tMTt9KSk7aWYoZnJhZ21lbnRzW2RpdmlkZXJdJiZmcmFnbWVudHNbZGl2aWRlcl0uaW5kZXhPZignLCcpPT09LTEpe2NvbnNvbGUud2FybignT2Zmc2V0cyBzZXBhcmF0ZWQgYnkgd2hpdGUgc3BhY2UocykgYXJlIGRlcHJlY2F0ZWQsIHVzZSBhIGNvbW1hICgsKSBpbnN0ZWFkLicpO30KdmFyIHNwbGl0UmVnZXg9L1xzKixccyp8XHMrLzt2YXIgb3BzPWRpdmlkZXIhPT0tMT9bZnJhZ21lbnRzLnNsaWNlKDAsZGl2aWRlcikuY29uY2F0KFtmcmFnbWVudHNbZGl2aWRlcl0uc3BsaXQoc3BsaXRSZWdleClbMF1dKSxbZnJhZ21lbnRzW2RpdmlkZXJdLnNwbGl0KHNwbGl0UmVnZXgpWzFdXS5jb25jYXQoZnJhZ21lbnRzLnNsaWNlKGRpdmlkZXIrMSkpXTpbZnJhZ21lbnRzXTtvcHM9b3BzLm1hcChmdW5jdGlvbihvcCxpbmRleCl7dmFyIG1lYXN1cmVtZW50PShpbmRleD09PTE/IXVzZUhlaWdodDp1c2VIZWlnaHQpPydoZWlnaHQnOid3aWR0aCc7dmFyIG1lcmdlV2l0aFByZXZpb3VzPWZhbHNlO3JldHVybiBvcC5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtpZihhW2EubGVuZ3RoLTFdPT09JycmJlsnKycsJy0nXS5pbmRleE9mKGIpIT09LTEpe2FbYS5sZW5ndGgtMV09YjttZXJnZVdpdGhQcmV2aW91cz10cnVlO3JldHVybiBhO31lbHNlIGlmKG1lcmdlV2l0aFByZXZpb3VzKXthW2EubGVuZ3RoLTFdKz1iO21lcmdlV2l0aFByZXZpb3VzPWZhbHNlO3JldHVybiBhO31lbHNle3JldHVybiBhLmNvbmNhdChiKTt9fSxbXSkubWFwKGZ1bmN0aW9uKHN0cil7cmV0dXJuIHRvVmFsdWUoc3RyLG1lYXN1cmVtZW50LHBvcHBlck9mZnNldHMscmVmZXJlbmNlT2Zmc2V0cyk7fSk7fSk7b3BzLmZvckVhY2goZnVuY3Rpb24ob3AsaW5kZXgpe29wLmZvckVhY2goZnVuY3Rpb24oZnJhZyxpbmRleDIpe2lmKGlzTnVtZXJpYyhmcmFnKSl7b2Zmc2V0c1tpbmRleF0rPWZyYWcqKG9wW2luZGV4Mi0xXT09PSctJz8tMToxKTt9fSk7fSk7cmV0dXJuIG9mZnNldHM7fQpmdW5jdGlvbiBvZmZzZXQoZGF0YSxfcmVmKXt2YXIgb2Zmc2V0PV9yZWYub2Zmc2V0O3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQsX2RhdGEkb2Zmc2V0cz1kYXRhLm9mZnNldHMscG9wcGVyPV9kYXRhJG9mZnNldHMucG9wcGVyLHJlZmVyZW5jZT1fZGF0YSRvZmZzZXRzLnJlZmVyZW5jZTt2YXIgYmFzZVBsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoJy0nKVswXTt2YXIgb2Zmc2V0cz12b2lkIDA7aWYoaXNOdW1lcmljKCtvZmZzZXQpKXtvZmZzZXRzPVsrb2Zmc2V0LDBdO31lbHNle29mZnNldHM9cGFyc2VPZmZzZXQob2Zmc2V0LHBvcHBlcixyZWZlcmVuY2UsYmFzZVBsYWNlbWVudCk7fQppZihiYXNlUGxhY2VtZW50PT09J2xlZnQnKXtwb3BwZXIudG9wKz1vZmZzZXRzWzBdO3BvcHBlci5sZWZ0LT1vZmZzZXRzWzFdO31lbHNlIGlmKGJhc2VQbGFjZW1lbnQ9PT0ncmlnaHQnKXtwb3BwZXIudG9wKz1vZmZzZXRzWzBdO3BvcHBlci5sZWZ0Kz1vZmZzZXRzWzFdO31lbHNlIGlmKGJhc2VQbGFjZW1lbnQ9PT0ndG9wJyl7cG9wcGVyLmxlZnQrPW9mZnNldHNbMF07cG9wcGVyLnRvcC09b2Zmc2V0c1sxXTt9ZWxzZSBpZihiYXNlUGxhY2VtZW50PT09J2JvdHRvbScpe3BvcHBlci5sZWZ0Kz1vZmZzZXRzWzBdO3BvcHBlci50b3ArPW9mZnNldHNbMV07fQpkYXRhLnBvcHBlcj1wb3BwZXI7cmV0dXJuIGRhdGE7fQpmdW5jdGlvbiBwcmV2ZW50T3ZlcmZsb3coZGF0YSxvcHRpb25zKXt2YXIgYm91bmRhcmllc0VsZW1lbnQ9b3B0aW9ucy5ib3VuZGFyaWVzRWxlbWVudHx8Z2V0T2Zmc2V0UGFyZW50KGRhdGEuaW5zdGFuY2UucG9wcGVyKTtpZihkYXRhLmluc3RhbmNlLnJlZmVyZW5jZT09PWJvdW5kYXJpZXNFbGVtZW50KXtib3VuZGFyaWVzRWxlbWVudD1nZXRPZmZzZXRQYXJlbnQoYm91bmRhcmllc0VsZW1lbnQpO30KdmFyIHRyYW5zZm9ybVByb3A9Z2V0U3VwcG9ydGVkUHJvcGVydHlOYW1lKCd0cmFuc2Zvcm0nKTt2YXIgcG9wcGVyU3R5bGVzPWRhdGEuaW5zdGFuY2UucG9wcGVyLnN0eWxlO3ZhciB0b3A9cG9wcGVyU3R5bGVzLnRvcCxsZWZ0PXBvcHBlclN0eWxlcy5sZWZ0LHRyYW5zZm9ybT1wb3BwZXJTdHlsZXNbdHJhbnNmb3JtUHJvcF07cG9wcGVyU3R5bGVzLnRvcD0nJztwb3BwZXJTdHlsZXMubGVmdD0nJztwb3BwZXJTdHlsZXNbdHJhbnNmb3JtUHJvcF09Jyc7dmFyIGJvdW5kYXJpZXM9Z2V0Qm91bmRhcmllcyhkYXRhLmluc3RhbmNlLnBvcHBlcixkYXRhLmluc3RhbmNlLnJlZmVyZW5jZSxvcHRpb25zLnBhZGRpbmcsYm91bmRhcmllc0VsZW1lbnQsZGF0YS5wb3NpdGlvbkZpeGVkKTtwb3BwZXJTdHlsZXMudG9wPXRvcDtwb3BwZXJTdHlsZXMubGVmdD1sZWZ0O3BvcHBlclN0eWxlc1t0cmFuc2Zvcm1Qcm9wXT10cmFuc2Zvcm07b3B0aW9ucy5ib3VuZGFyaWVzPWJvdW5kYXJpZXM7dmFyIG9yZGVyPW9wdGlvbnMucHJpb3JpdHk7dmFyIHBvcHBlcj1kYXRhLm9mZnNldHMucG9wcGVyO3ZhciBjaGVjaz17cHJpbWFyeTpmdW5jdGlvbiBwcmltYXJ5KHBsYWNlbWVudCl7dmFyIHZhbHVlPXBvcHBlcltwbGFjZW1lbnRdO2lmKHBvcHBlcltwbGFjZW1lbnRdPGJvdW5kYXJpZXNbcGxhY2VtZW50XSYmIW9wdGlvbnMuZXNjYXBlV2l0aFJlZmVyZW5jZSl7dmFsdWU9TWF0aC5tYXgocG9wcGVyW3BsYWNlbWVudF0sYm91bmRhcmllc1twbGFjZW1lbnRdKTt9CnJldHVybiBkZWZpbmVQcm9wZXJ0eSh7fSxwbGFjZW1lbnQsdmFsdWUpO30sc2Vjb25kYXJ5OmZ1bmN0aW9uIHNlY29uZGFyeShwbGFjZW1lbnQpe3ZhciBtYWluU2lkZT1wbGFjZW1lbnQ9PT0ncmlnaHQnPydsZWZ0JzondG9wJzt2YXIgdmFsdWU9cG9wcGVyW21haW5TaWRlXTtpZihwb3BwZXJbcGxhY2VtZW50XT5ib3VuZGFyaWVzW3BsYWNlbWVudF0mJiFvcHRpb25zLmVzY2FwZVdpdGhSZWZlcmVuY2Upe3ZhbHVlPU1hdGgubWluKHBvcHBlclttYWluU2lkZV0sYm91bmRhcmllc1twbGFjZW1lbnRdLShwbGFjZW1lbnQ9PT0ncmlnaHQnP3BvcHBlci53aWR0aDpwb3BwZXIuaGVpZ2h0KSk7fQpyZXR1cm4gZGVmaW5lUHJvcGVydHkoe30sbWFpblNpZGUsdmFsdWUpO319O29yZGVyLmZvckVhY2goZnVuY3Rpb24ocGxhY2VtZW50KXt2YXIgc2lkZT1bJ2xlZnQnLCd0b3AnXS5pbmRleE9mKHBsYWNlbWVudCkhPT0tMT8ncHJpbWFyeSc6J3NlY29uZGFyeSc7cG9wcGVyPV9leHRlbmRzKHt9LHBvcHBlcixjaGVja1tzaWRlXShwbGFjZW1lbnQpKTt9KTtkYXRhLm9mZnNldHMucG9wcGVyPXBvcHBlcjtyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIHNoaWZ0KGRhdGEpe3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQ7dmFyIGJhc2VQbGFjZW1lbnQ9cGxhY2VtZW50LnNwbGl0KCctJylbMF07dmFyIHNoaWZ0dmFyaWF0aW9uPXBsYWNlbWVudC5zcGxpdCgnLScpWzFdO2lmKHNoaWZ0dmFyaWF0aW9uKXt2YXIgX2RhdGEkb2Zmc2V0cz1kYXRhLm9mZnNldHMscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlLHBvcHBlcj1fZGF0YSRvZmZzZXRzLnBvcHBlcjt2YXIgaXNWZXJ0aWNhbD1bJ2JvdHRvbScsJ3RvcCddLmluZGV4T2YoYmFzZVBsYWNlbWVudCkhPT0tMTt2YXIgc2lkZT1pc1ZlcnRpY2FsPydsZWZ0JzondG9wJzt2YXIgbWVhc3VyZW1lbnQ9aXNWZXJ0aWNhbD8nd2lkdGgnOidoZWlnaHQnO3ZhciBzaGlmdE9mZnNldHM9e3N0YXJ0OmRlZmluZVByb3BlcnR5KHt9LHNpZGUscmVmZXJlbmNlW3NpZGVdKSxlbmQ6ZGVmaW5lUHJvcGVydHkoe30sc2lkZSxyZWZlcmVuY2Vbc2lkZV0rcmVmZXJlbmNlW21lYXN1cmVtZW50XS1wb3BwZXJbbWVhc3VyZW1lbnRdKX07ZGF0YS5vZmZzZXRzLnBvcHBlcj1fZXh0ZW5kcyh7fSxwb3BwZXIsc2hpZnRPZmZzZXRzW3NoaWZ0dmFyaWF0aW9uXSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGhpZGUoZGF0YSl7aWYoIWlzTW9kaWZpZXJSZXF1aXJlZChkYXRhLmluc3RhbmNlLm1vZGlmaWVycywnaGlkZScsJ3ByZXZlbnRPdmVyZmxvdycpKXtyZXR1cm4gZGF0YTt9CnZhciByZWZSZWN0PWRhdGEub2Zmc2V0cy5yZWZlcmVuY2U7dmFyIGJvdW5kPWZpbmQoZGF0YS5pbnN0YW5jZS5tb2RpZmllcnMsZnVuY3Rpb24obW9kaWZpZXIpe3JldHVybiBtb2RpZmllci5uYW1lPT09J3ByZXZlbnRPdmVyZmxvdyc7fSkuYm91bmRhcmllcztpZihyZWZSZWN0LmJvdHRvbTxib3VuZC50b3B8fHJlZlJlY3QubGVmdD5ib3VuZC5yaWdodHx8cmVmUmVjdC50b3A+Ym91bmQuYm90dG9tfHxyZWZSZWN0LnJpZ2h0PGJvdW5kLmxlZnQpe2lmKGRhdGEuaGlkZT09PXRydWUpe3JldHVybiBkYXRhO30KZGF0YS5oaWRlPXRydWU7ZGF0YS5hdHRyaWJ1dGVzWyd4LW91dC1vZi1ib3VuZGFyaWVzJ109Jyc7fWVsc2V7aWYoZGF0YS5oaWRlPT09ZmFsc2Upe3JldHVybiBkYXRhO30KZGF0YS5oaWRlPWZhbHNlO2RhdGEuYXR0cmlidXRlc1sneC1vdXQtb2YtYm91bmRhcmllcyddPWZhbHNlO30KcmV0dXJuIGRhdGE7fQpmdW5jdGlvbiBpbm5lcihkYXRhKXt2YXIgcGxhY2VtZW50PWRhdGEucGxhY2VtZW50O3ZhciBiYXNlUGxhY2VtZW50PXBsYWNlbWVudC5zcGxpdCgnLScpWzBdO3ZhciBfZGF0YSRvZmZzZXRzPWRhdGEub2Zmc2V0cyxwb3BwZXI9X2RhdGEkb2Zmc2V0cy5wb3BwZXIscmVmZXJlbmNlPV9kYXRhJG9mZnNldHMucmVmZXJlbmNlO3ZhciBpc0hvcml6PVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihiYXNlUGxhY2VtZW50KSE9PS0xO3ZhciBzdWJ0cmFjdExlbmd0aD1bJ3RvcCcsJ2xlZnQnXS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpPT09LTE7cG9wcGVyW2lzSG9yaXo/J2xlZnQnOid0b3AnXT1yZWZlcmVuY2VbYmFzZVBsYWNlbWVudF0tKHN1YnRyYWN0TGVuZ3RoP3BvcHBlcltpc0hvcml6Pyd3aWR0aCc6J2hlaWdodCddOjApO2RhdGEucGxhY2VtZW50PWdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCk7ZGF0YS5vZmZzZXRzLnBvcHBlcj1nZXRDbGllbnRSZWN0KHBvcHBlcik7cmV0dXJuIGRhdGE7fQp2YXIgbW9kaWZpZXJzPXtzaGlmdDp7b3JkZXI6MTAwLGVuYWJsZWQ6dHJ1ZSxmbjpzaGlmdH0sb2Zmc2V0OntvcmRlcjoyMDAsZW5hYmxlZDp0cnVlLGZuOm9mZnNldCxvZmZzZXQ6MH0scHJldmVudE92ZXJmbG93OntvcmRlcjozMDAsZW5hYmxlZDp0cnVlLGZuOnByZXZlbnRPdmVyZmxvdyxwcmlvcml0eTpbJ2xlZnQnLCdyaWdodCcsJ3RvcCcsJ2JvdHRvbSddLHBhZGRpbmc6NSxib3VuZGFyaWVzRWxlbWVudDonc2Nyb2xsUGFyZW50J30sa2VlcFRvZ2V0aGVyOntvcmRlcjo0MDAsZW5hYmxlZDp0cnVlLGZuOmtlZXBUb2dldGhlcn0sYXJyb3c6e29yZGVyOjUwMCxlbmFibGVkOnRydWUsZm46YXJyb3csZWxlbWVudDonW3gtYXJyb3ddJ30sZmxpcDp7b3JkZXI6NjAwLGVuYWJsZWQ6dHJ1ZSxmbjpmbGlwLGJlaGF2aW9yOidmbGlwJyxwYWRkaW5nOjUsYm91bmRhcmllc0VsZW1lbnQ6J3ZpZXdwb3J0J30saW5uZXI6e29yZGVyOjcwMCxlbmFibGVkOmZhbHNlLGZuOmlubmVyfSxoaWRlOntvcmRlcjo4MDAsZW5hYmxlZDp0cnVlLGZuOmhpZGV9LGNvbXB1dGVTdHlsZTp7b3JkZXI6ODUwLGVuYWJsZWQ6dHJ1ZSxmbjpjb21wdXRlU3R5bGUsZ3B1QWNjZWxlcmF0aW9uOnRydWUseDonYm90dG9tJyx5OidyaWdodCd9LGFwcGx5U3R5bGU6e29yZGVyOjkwMCxlbmFibGVkOnRydWUsZm46YXBwbHlTdHlsZSxvbkxvYWQ6YXBwbHlTdHlsZU9uTG9hZCxncHVBY2NlbGVyYXRpb246dW5kZWZpbmVkfX07dmFyIERlZmF1bHRzPXtwbGFjZW1lbnQ6J2JvdHRvbScscG9zaXRpb25GaXhlZDpmYWxzZSxldmVudHNFbmFibGVkOnRydWUscmVtb3ZlT25EZXN0cm95OmZhbHNlLG9uQ3JlYXRlOmZ1bmN0aW9uIG9uQ3JlYXRlKCl7fSxvblVwZGF0ZTpmdW5jdGlvbiBvblVwZGF0ZSgpe30sbW9kaWZpZXJzOm1vZGlmaWVyc307dmFyIFBvcHBlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIFBvcHBlcihyZWZlcmVuY2UscG9wcGVyKXt2YXIgX3RoaXM9dGhpczt2YXIgb3B0aW9ucz1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMl06e307Y2xhc3NDYWxsQ2hlY2sodGhpcyxQb3BwZXIpO3RoaXMuc2NoZWR1bGVVcGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLnVwZGF0ZSk7fTt0aGlzLnVwZGF0ZT1kZWJvdW5jZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTt0aGlzLm9wdGlvbnM9X2V4dGVuZHMoe30sUG9wcGVyLkRlZmF1bHRzLG9wdGlvbnMpO3RoaXMuc3RhdGU9e2lzRGVzdHJveWVkOmZhbHNlLGlzQ3JlYXRlZDpmYWxzZSxzY3JvbGxQYXJlbnRzOltdfTt0aGlzLnJlZmVyZW5jZT1yZWZlcmVuY2UmJnJlZmVyZW5jZS5qcXVlcnk/cmVmZXJlbmNlWzBdOnJlZmVyZW5jZTt0aGlzLnBvcHBlcj1wb3BwZXImJnBvcHBlci5qcXVlcnk/cG9wcGVyWzBdOnBvcHBlcjt0aGlzLm9wdGlvbnMubW9kaWZpZXJzPXt9O09iamVjdC5rZXlzKF9leHRlbmRzKHt9LFBvcHBlci5EZWZhdWx0cy5tb2RpZmllcnMsb3B0aW9ucy5tb2RpZmllcnMpKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpe190aGlzLm9wdGlvbnMubW9kaWZpZXJzW25hbWVdPV9leHRlbmRzKHt9LFBvcHBlci5EZWZhdWx0cy5tb2RpZmllcnNbbmFtZV18fHt9LG9wdGlvbnMubW9kaWZpZXJzP29wdGlvbnMubW9kaWZpZXJzW25hbWVdOnt9KTt9KTt0aGlzLm1vZGlmaWVycz1PYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMubW9kaWZpZXJzKS5tYXAoZnVuY3Rpb24obmFtZSl7cmV0dXJuIF9leHRlbmRzKHtuYW1lOm5hbWV9LF90aGlzLm9wdGlvbnMubW9kaWZpZXJzW25hbWVdKTt9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEub3JkZXItYi5vcmRlcjt9KTt0aGlzLm1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGlmaWVyT3B0aW9ucyl7aWYobW9kaWZpZXJPcHRpb25zLmVuYWJsZWQmJmlzRnVuY3Rpb24obW9kaWZpZXJPcHRpb25zLm9uTG9hZCkpe21vZGlmaWVyT3B0aW9ucy5vbkxvYWQoX3RoaXMucmVmZXJlbmNlLF90aGlzLnBvcHBlcixfdGhpcy5vcHRpb25zLG1vZGlmaWVyT3B0aW9ucyxfdGhpcy5zdGF0ZSk7fX0pO3RoaXMudXBkYXRlKCk7dmFyIGV2ZW50c0VuYWJsZWQ9dGhpcy5vcHRpb25zLmV2ZW50c0VuYWJsZWQ7aWYoZXZlbnRzRW5hYmxlZCl7dGhpcy5lbmFibGVFdmVudExpc3RlbmVycygpO30KdGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkPWV2ZW50c0VuYWJsZWQ7fQpjcmVhdGVDbGFzcyhQb3BwZXIsW3trZXk6J3VwZGF0ZScsdmFsdWU6ZnVuY3Rpb24gdXBkYXRlJCQxKCl7cmV0dXJuIHVwZGF0ZS5jYWxsKHRoaXMpO319LHtrZXk6J2Rlc3Ryb3knLHZhbHVlOmZ1bmN0aW9uIGRlc3Ryb3kkJDEoKXtyZXR1cm4gZGVzdHJveS5jYWxsKHRoaXMpO319LHtrZXk6J2VuYWJsZUV2ZW50TGlzdGVuZXJzJyx2YWx1ZTpmdW5jdGlvbiBlbmFibGVFdmVudExpc3RlbmVycyQkMSgpe3JldHVybiBlbmFibGVFdmVudExpc3RlbmVycy5jYWxsKHRoaXMpO319LHtrZXk6J2Rpc2FibGVFdmVudExpc3RlbmVycycsdmFsdWU6ZnVuY3Rpb24gZGlzYWJsZUV2ZW50TGlzdGVuZXJzJCQxKCl7cmV0dXJuIGRpc2FibGVFdmVudExpc3RlbmVycy5jYWxsKHRoaXMpO319XSk7cmV0dXJuIFBvcHBlcjt9KCk7UG9wcGVyLlV0aWxzPSh0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCc/d2luZG93Omdsb2JhbCkuUG9wcGVyVXRpbHM7UG9wcGVyLnBsYWNlbWVudHM9cGxhY2VtZW50cztQb3BwZXIuRGVmYXVsdHM9RGVmYXVsdHM7cmV0dXJuIFBvcHBlcjt9KSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvaW5kZXguanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24oJCl7aWYodHlwZW9mICQ9PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignQm9vdHN0cmFwXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5LiBqUXVlcnkgbXVzdCBiZSBpbmNsdWRlZCBiZWZvcmUgQm9vdHN0cmFwXCdzIEphdmFTY3JpcHQuJyk7fQp2YXIgdmVyc2lvbj0kLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJyk7dmFyIG1pbk1ham9yPTE7dmFyIGx0TWFqb3I9Mjt2YXIgbWluTWlub3I9OTt2YXIgbWluUGF0Y2g9MTt2YXIgbWF4TWFqb3I9NDtpZih2ZXJzaW9uWzBdPGx0TWFqb3ImJnZlcnNpb25bMV08bWluTWlub3J8fHZlcnNpb25bMF09PT1taW5NYWpvciYmdmVyc2lvblsxXT09PW1pbk1pbm9yJiZ2ZXJzaW9uWzJdPG1pblBhdGNofHx2ZXJzaW9uWzBdPj1tYXhNYWpvcil7dGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgdjEuOS4xIGJ1dCBsZXNzIHRoYW4gdjQuMC4wJyk7fX0pKCQpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvdXRpbC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeSddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5VdGlsPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSkpO30odGhpcyxmdW5jdGlvbigkKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7dmFyIFRSQU5TSVRJT05fRU5EPSd0cmFuc2l0aW9uZW5kJzt2YXIgTUFYX1VJRD0xMDAwMDAwO3ZhciBNSUxMSVNFQ09ORFNfTVVMVElQTElFUj0xMDAwO2Z1bmN0aW9uIHRvVHlwZShvYmope3JldHVybnt9LnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaCgvXHMoW2Etel0rKS9pKVsxXS50b0xvd2VyQ2FzZSgpO30KZnVuY3Rpb24gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpe3JldHVybntiaW5kVHlwZTpUUkFOU0lUSU9OX0VORCxkZWxlZ2F0ZVR5cGU6VFJBTlNJVElPTl9FTkQsaGFuZGxlOmZ1bmN0aW9uIGhhbmRsZShldmVudCl7aWYoJChldmVudC50YXJnZXQpLmlzKHRoaXMpKXtyZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30KcmV0dXJuIHVuZGVmaW5lZDt9fTt9CmZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbil7dmFyIF90aGlzPXRoaXM7dmFyIGNhbGxlZD1mYWxzZTskKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKCl7Y2FsbGVkPXRydWU7fSk7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCFjYWxsZWQpe1V0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQoX3RoaXMpO319LGR1cmF0aW9uKTtyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCl7JC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZD10cmFuc2l0aW9uRW5kRW11bGF0b3I7JC5ldmVudC5zcGVjaWFsW1V0aWwuVFJBTlNJVElPTl9FTkRdPWdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKTt9CnZhciBVdGlsPXtUUkFOU0lUSU9OX0VORDonYnNUcmFuc2l0aW9uRW5kJyxnZXRVSUQ6ZnVuY3Rpb24gZ2V0VUlEKHByZWZpeCl7ZG97cHJlZml4Kz1+fihNYXRoLnJhbmRvbSgpKk1BWF9VSUQpO313aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKTtyZXR1cm4gcHJlZml4O30sZ2V0U2VsZWN0b3JGcm9tRWxlbWVudDpmdW5jdGlvbiBnZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpe3ZhciBzZWxlY3Rvcj1lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTtpZighc2VsZWN0b3J8fHNlbGVjdG9yPT09JyMnKXt2YXIgaHJlZkF0dHI9ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtzZWxlY3Rvcj1ocmVmQXR0ciYmaHJlZkF0dHIhPT0nIyc/aHJlZkF0dHIudHJpbSgpOicnO30KdHJ5e3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKT9zZWxlY3RvcjpudWxsO31jYXRjaChlcnIpe3JldHVybiBudWxsO319LGdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50OmZ1bmN0aW9uIGdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KGVsZW1lbnQpe2lmKCFlbGVtZW50KXtyZXR1cm4gMDt9CnZhciB0cmFuc2l0aW9uRHVyYXRpb249JChlbGVtZW50KS5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTt2YXIgdHJhbnNpdGlvbkRlbGF5PSQoZWxlbWVudCkuY3NzKCd0cmFuc2l0aW9uLWRlbGF5Jyk7dmFyIGZsb2F0VHJhbnNpdGlvbkR1cmF0aW9uPXBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKTt2YXIgZmxvYXRUcmFuc2l0aW9uRGVsYXk9cGFyc2VGbG9hdCh0cmFuc2l0aW9uRGVsYXkpO2lmKCFmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiYmIWZsb2F0VHJhbnNpdGlvbkRlbGF5KXtyZXR1cm4gMDt9CnRyYW5zaXRpb25EdXJhdGlvbj10cmFuc2l0aW9uRHVyYXRpb24uc3BsaXQoJywnKVswXTt0cmFuc2l0aW9uRGVsYXk9dHJhbnNpdGlvbkRlbGF5LnNwbGl0KCcsJylbMF07cmV0dXJuKHBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKStwYXJzZUZsb2F0KHRyYW5zaXRpb25EZWxheSkpKk1JTExJU0VDT05EU19NVUxUSVBMSUVSO30scmVmbG93OmZ1bmN0aW9uIHJlZmxvdyhlbGVtZW50KXtyZXR1cm4gZWxlbWVudC5vZmZzZXRIZWlnaHQ7fSx0cmlnZ2VyVHJhbnNpdGlvbkVuZDpmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KXskKGVsZW1lbnQpLnRyaWdnZXIoVFJBTlNJVElPTl9FTkQpO30sc3VwcG9ydHNUcmFuc2l0aW9uRW5kOmZ1bmN0aW9uIHN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpe3JldHVybiBCb29sZWFuKFRSQU5TSVRJT05fRU5EKTt9LGlzRWxlbWVudDpmdW5jdGlvbiBpc0VsZW1lbnQob2JqKXtyZXR1cm4ob2JqWzBdfHxvYmopLm5vZGVUeXBlO30sdHlwZUNoZWNrQ29uZmlnOmZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLGNvbmZpZyxjb25maWdUeXBlcyl7Zm9yKHZhciBwcm9wZXJ0eSBpbiBjb25maWdUeXBlcyl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZ1R5cGVzLHByb3BlcnR5KSl7dmFyIGV4cGVjdGVkVHlwZXM9Y29uZmlnVHlwZXNbcHJvcGVydHldO3ZhciB2YWx1ZT1jb25maWdbcHJvcGVydHldO3ZhciB2YWx1ZVR5cGU9dmFsdWUmJlV0aWwuaXNFbGVtZW50KHZhbHVlKT8nZWxlbWVudCc6dG9UeXBlKHZhbHVlKTtpZighbmV3IFJlZ0V4cChleHBlY3RlZFR5cGVzKS50ZXN0KHZhbHVlVHlwZSkpe3Rocm93IG5ldyBFcnJvcihjb21wb25lbnROYW1lLnRvVXBwZXJDYXNlKCkrIjogIisoIk9wdGlvbiBcIiIrcHJvcGVydHkrIlwiIHByb3ZpZGVkIHR5cGUgXCIiK3ZhbHVlVHlwZSsiXCIgIikrKCJidXQgZXhwZWN0ZWQgdHlwZSBcIiIrZXhwZWN0ZWRUeXBlcysiXCIuIikpO319fX0sZmluZFNoYWRvd1Jvb3Q6ZnVuY3Rpb24gZmluZFNoYWRvd1Jvb3QoZWxlbWVudCl7aWYoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRhY2hTaGFkb3cpe3JldHVybiBudWxsO30KaWYodHlwZW9mIGVsZW1lbnQuZ2V0Um9vdE5vZGU9PT0nZnVuY3Rpb24nKXt2YXIgcm9vdD1lbGVtZW50LmdldFJvb3ROb2RlKCk7cmV0dXJuIHJvb3QgaW5zdGFuY2VvZiBTaGFkb3dSb290P3Jvb3Q6bnVsbDt9CmlmKGVsZW1lbnQgaW5zdGFuY2VvZiBTaGFkb3dSb290KXtyZXR1cm4gZWxlbWVudDt9CmlmKCFlbGVtZW50LnBhcmVudE5vZGUpe3JldHVybiBudWxsO30KcmV0dXJuIFV0aWwuZmluZFNoYWRvd1Jvb3QoZWxlbWVudC5wYXJlbnROb2RlKTt9fTtzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpO3JldHVybiBVdGlsO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL2FsZXJ0LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkFsZXJ0PWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CnZhciBOQU1FPSdhbGVydCc7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLmFsZXJ0Jzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgU2VsZWN0b3I9e0RJU01JU1M6J1tkYXRhLWRpc21pc3M9ImFsZXJ0Il0nfTt2YXIgRXZlbnQ9e0NMT1NFOiJjbG9zZSIrRVZFTlRfS0VZLENMT1NFRDoiY2xvc2VkIitFVkVOVF9LRVksQ0xJQ0tfREFUQV9BUEk6ImNsaWNrIitFVkVOVF9LRVkrREFUQV9BUElfS0VZfTt2YXIgQ2xhc3NOYW1lPXtBTEVSVDonYWxlcnQnLEZBREU6J2ZhZGUnLFNIT1c6J3Nob3cnfTt2YXIgQWxlcnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBbGVydChlbGVtZW50KXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7fQp2YXIgX3Byb3RvPUFsZXJ0LnByb3RvdHlwZTtfcHJvdG8uY2xvc2U9ZnVuY3Rpb24gY2xvc2UoZWxlbWVudCl7dmFyIHJvb3RFbGVtZW50PXRoaXMuX2VsZW1lbnQ7aWYoZWxlbWVudCl7cm9vdEVsZW1lbnQ9dGhpcy5fZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCk7fQp2YXIgY3VzdG9tRXZlbnQ9dGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQocm9vdEVsZW1lbnQpO2lmKGN1c3RvbUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQp0aGlzLl9yZW1vdmVFbGVtZW50KHJvb3RFbGVtZW50KTt9O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7dGhpcy5fZWxlbWVudD1udWxsO307X3Byb3RvLl9nZXRSb290RWxlbWVudD1mdW5jdGlvbiBfZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCl7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTt2YXIgcGFyZW50PWZhbHNlO2lmKHNlbGVjdG9yKXtwYXJlbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7fQppZighcGFyZW50KXtwYXJlbnQ9JChlbGVtZW50KS5jbG9zZXN0KCIuIitDbGFzc05hbWUuQUxFUlQpWzBdO30KcmV0dXJuIHBhcmVudDt9O19wcm90by5fdHJpZ2dlckNsb3NlRXZlbnQ9ZnVuY3Rpb24gX3RyaWdnZXJDbG9zZUV2ZW50KGVsZW1lbnQpe3ZhciBjbG9zZUV2ZW50PSQuRXZlbnQoRXZlbnQuQ0xPU0UpOyQoZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtyZXR1cm4gY2xvc2VFdmVudDt9O19wcm90by5fcmVtb3ZlRWxlbWVudD1mdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KXt2YXIgX3RoaXM9dGhpczskKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTtpZighJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpe3RoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpO3JldHVybjt9CnZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChlbGVtZW50KTskKGVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQsZXZlbnQpO30pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fTtfcHJvdG8uX2Rlc3Ryb3lFbGVtZW50PWZ1bmN0aW9uIF9kZXN0cm95RWxlbWVudChlbGVtZW50KXskKGVsZW1lbnQpLmRldGFjaCgpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKS5yZW1vdmUoKTt9O0FsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgJGVsZW1lbnQ9JCh0aGlzKTt2YXIgZGF0YT0kZWxlbWVudC5kYXRhKERBVEFfS0VZKTtpZighZGF0YSl7ZGF0YT1uZXcgQWxlcnQodGhpcyk7JGVsZW1lbnQuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKGNvbmZpZz09PSdjbG9zZScpe2RhdGFbY29uZmlnXSh0aGlzKTt9fSk7fTtBbGVydC5faGFuZGxlRGlzbWlzcz1mdW5jdGlvbiBfaGFuZGxlRGlzbWlzcyhhbGVydEluc3RhbmNlKXtyZXR1cm4gZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KYWxlcnRJbnN0YW5jZS5jbG9zZSh0aGlzKTt9O307X2NyZWF0ZUNsYXNzKEFsZXJ0LG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fV0pO3JldHVybiBBbGVydDt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuRElTTUlTUyxBbGVydC5faGFuZGxlRGlzbWlzcyhuZXcgQWxlcnQoKSkpOyQuZm5bTkFNRV09QWxlcnQuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPUFsZXJ0OyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIEFsZXJ0O30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL2J1dHRvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeSddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5CdXR0b249ZmFjdG9yeShnbG9iYWwualF1ZXJ5KSk7fSh0aGlzLGZ1bmN0aW9uKCQpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CnZhciBOQU1FPSdidXR0b24nO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5idXR0b24nO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaSc7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBDbGFzc05hbWU9e0FDVElWRTonYWN0aXZlJyxCVVRUT046J2J0bicsRk9DVVM6J2ZvY3VzJ307dmFyIFNlbGVjdG9yPXtEQVRBX1RPR0dMRV9DQVJST1Q6J1tkYXRhLXRvZ2dsZV49ImJ1dHRvbiJdJyxEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSJidXR0b25zIl0nLElOUFVUOidpbnB1dDpub3QoW3R5cGU9ImhpZGRlbiJdKScsQUNUSVZFOicuYWN0aXZlJyxCVVRUT046Jy5idG4nfTt2YXIgRXZlbnQ9e0NMSUNLX0RBVEFfQVBJOiJjbGljayIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWSxGT0NVU19CTFVSX0RBVEFfQVBJOiJmb2N1cyIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWSsiICIrKCJibHVyIitFVkVOVF9LRVkrREFUQV9BUElfS0VZKX07dmFyIEJ1dHRvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIEJ1dHRvbihlbGVtZW50KXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7fQp2YXIgX3Byb3RvPUJ1dHRvbi5wcm90b3R5cGU7X3Byb3RvLnRvZ2dsZT1mdW5jdGlvbiB0b2dnbGUoKXt2YXIgdHJpZ2dlckNoYW5nZUV2ZW50PXRydWU7dmFyIGFkZEFyaWFQcmVzc2VkPXRydWU7dmFyIHJvb3RFbGVtZW50PSQodGhpcy5fZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5EQVRBX1RPR0dMRSlbMF07aWYocm9vdEVsZW1lbnQpe3ZhciBpbnB1dD10aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuSU5QVVQpO2lmKGlucHV0KXtpZihpbnB1dC50eXBlPT09J3JhZGlvJyl7aWYoaW5wdXQuY2hlY2tlZCYmdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLkFDVElWRSkpe3RyaWdnZXJDaGFuZ2VFdmVudD1mYWxzZTt9ZWxzZXt2YXIgYWN0aXZlRWxlbWVudD1yb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkFDVElWRSk7aWYoYWN0aXZlRWxlbWVudCl7JChhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTt9fX0KaWYodHJpZ2dlckNoYW5nZUV2ZW50KXtpZihpbnB1dC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyl8fHJvb3RFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKXx8aW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpfHxyb290RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpe3JldHVybjt9CmlucHV0LmNoZWNrZWQ9IXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENsYXNzTmFtZS5BQ1RJVkUpOyQoaW5wdXQpLnRyaWdnZXIoJ2NoYW5nZScpO30KaW5wdXQuZm9jdXMoKTthZGRBcmlhUHJlc3NlZD1mYWxzZTt9fQppZihhZGRBcmlhUHJlc3NlZCl7dGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsIXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENsYXNzTmFtZS5BQ1RJVkUpKTt9CmlmKHRyaWdnZXJDaGFuZ2VFdmVudCl7JCh0aGlzLl9lbGVtZW50KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2VsZW1lbnQ9bnVsbDt9O0J1dHRvbi5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGRhdGE9JCh0aGlzKS5kYXRhKERBVEFfS0VZKTtpZighZGF0YSl7ZGF0YT1uZXcgQnV0dG9uKHRoaXMpOyQodGhpcykuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKGNvbmZpZz09PSd0b2dnbGUnKXtkYXRhW2NvbmZpZ10oKTt9fSk7fTtfY3JlYXRlQ2xhc3MoQnV0dG9uLG51bGwsW3trZXk6IlZFUlNJT04iLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVkVSU0lPTjt9fV0pO3JldHVybiBCdXR0b247fSgpOyQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLFNlbGVjdG9yLkRBVEFfVE9HR0xFX0NBUlJPVCxmdW5jdGlvbihldmVudCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt2YXIgYnV0dG9uPWV2ZW50LnRhcmdldDtpZighJChidXR0b24pLmhhc0NsYXNzKENsYXNzTmFtZS5CVVRUT04pKXtidXR0b249JChidXR0b24pLmNsb3Nlc3QoU2VsZWN0b3IuQlVUVE9OKTt9CkJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChidXR0b24pLCd0b2dnbGUnKTt9KS5vbihFdmVudC5GT0NVU19CTFVSX0RBVEFfQVBJLFNlbGVjdG9yLkRBVEFfVE9HR0xFX0NBUlJPVCxmdW5jdGlvbihldmVudCl7dmFyIGJ1dHRvbj0kKGV2ZW50LnRhcmdldCkuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pWzBdOyQoYnV0dG9uKS50b2dnbGVDbGFzcyhDbGFzc05hbWUuRk9DVVMsL15mb2N1cyhpbik/JC8udGVzdChldmVudC50eXBlKSk7fSk7JC5mbltOQU1FXT1CdXR0b24uX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPUJ1dHRvbjskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gQnV0dG9uO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL2Nhcm91c2VsLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkNhcm91c2VsPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0nY2Fyb3VzZWwnO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5jYXJvdXNlbCc7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIERBVEFfQVBJX0tFWT0nLmRhdGEtYXBpJzt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIEFSUk9XX0xFRlRfS0VZQ09ERT0zNzt2YXIgQVJST1dfUklHSFRfS0VZQ09ERT0zOTt2YXIgVE9VQ0hFVkVOVF9DT01QQVRfV0FJVD01MDA7dmFyIFNXSVBFX1RIUkVTSE9MRD00MDt2YXIgRGVmYXVsdD17aW50ZXJ2YWw6NTAwMCxrZXlib2FyZDp0cnVlLHNsaWRlOmZhbHNlLHBhdXNlOidob3Zlcicsd3JhcDp0cnVlLHRvdWNoOnRydWV9O3ZhciBEZWZhdWx0VHlwZT17aW50ZXJ2YWw6JyhudW1iZXJ8Ym9vbGVhbiknLGtleWJvYXJkOidib29sZWFuJyxzbGlkZTonKGJvb2xlYW58c3RyaW5nKScscGF1c2U6JyhzdHJpbmd8Ym9vbGVhbiknLHdyYXA6J2Jvb2xlYW4nLHRvdWNoOidib29sZWFuJ307dmFyIERpcmVjdGlvbj17TkVYVDonbmV4dCcsUFJFVjoncHJldicsTEVGVDonbGVmdCcsUklHSFQ6J3JpZ2h0J307dmFyIEV2ZW50PXtTTElERToic2xpZGUiK0VWRU5UX0tFWSxTTElEOiJzbGlkIitFVkVOVF9LRVksS0VZRE9XTjoia2V5ZG93biIrRVZFTlRfS0VZLE1PVVNFRU5URVI6Im1vdXNlZW50ZXIiK0VWRU5UX0tFWSxNT1VTRUxFQVZFOiJtb3VzZWxlYXZlIitFVkVOVF9LRVksVE9VQ0hTVEFSVDoidG91Y2hzdGFydCIrRVZFTlRfS0VZLFRPVUNITU9WRToidG91Y2htb3ZlIitFVkVOVF9LRVksVE9VQ0hFTkQ6InRvdWNoZW5kIitFVkVOVF9LRVksUE9JTlRFUkRPV046InBvaW50ZXJkb3duIitFVkVOVF9LRVksUE9JTlRFUlVQOiJwb2ludGVydXAiK0VWRU5UX0tFWSxEUkFHX1NUQVJUOiJkcmFnc3RhcnQiK0VWRU5UX0tFWSxMT0FEX0RBVEFfQVBJOiJsb2FkIitFVkVOVF9LRVkrREFUQV9BUElfS0VZLENMSUNLX0RBVEFfQVBJOiJjbGljayIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWX07dmFyIENsYXNzTmFtZT17Q0FST1VTRUw6J2Nhcm91c2VsJyxBQ1RJVkU6J2FjdGl2ZScsU0xJREU6J3NsaWRlJyxSSUdIVDonY2Fyb3VzZWwtaXRlbS1yaWdodCcsTEVGVDonY2Fyb3VzZWwtaXRlbS1sZWZ0JyxORVhUOidjYXJvdXNlbC1pdGVtLW5leHQnLFBSRVY6J2Nhcm91c2VsLWl0ZW0tcHJldicsSVRFTTonY2Fyb3VzZWwtaXRlbScsUE9JTlRFUl9FVkVOVDoncG9pbnRlci1ldmVudCd9O3ZhciBTZWxlY3Rvcj17QUNUSVZFOicuYWN0aXZlJyxBQ1RJVkVfSVRFTTonLmFjdGl2ZS5jYXJvdXNlbC1pdGVtJyxJVEVNOicuY2Fyb3VzZWwtaXRlbScsSVRFTV9JTUc6Jy5jYXJvdXNlbC1pdGVtIGltZycsTkVYVF9QUkVWOicuY2Fyb3VzZWwtaXRlbS1uZXh0LCAuY2Fyb3VzZWwtaXRlbS1wcmV2JyxJTkRJQ0FUT1JTOicuY2Fyb3VzZWwtaW5kaWNhdG9ycycsREFUQV9TTElERTonW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b10nLERBVEFfUklERTonW2RhdGEtcmlkZT0iY2Fyb3VzZWwiXSd9O3ZhciBQb2ludGVyVHlwZT17VE9VQ0g6J3RvdWNoJyxQRU46J3Blbid9O3ZhciBDYXJvdXNlbD1mdW5jdGlvbigpe2Z1bmN0aW9uIENhcm91c2VsKGVsZW1lbnQsY29uZmlnKXt0aGlzLl9pdGVtcz1udWxsO3RoaXMuX2ludGVydmFsPW51bGw7dGhpcy5fYWN0aXZlRWxlbWVudD1udWxsO3RoaXMuX2lzUGF1c2VkPWZhbHNlO3RoaXMuX2lzU2xpZGluZz1mYWxzZTt0aGlzLnRvdWNoVGltZW91dD1udWxsO3RoaXMudG91Y2hTdGFydFg9MDt0aGlzLnRvdWNoRGVsdGFYPTA7dGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhjb25maWcpO3RoaXMuX2VsZW1lbnQ9ZWxlbWVudDt0aGlzLl9pbmRpY2F0b3JzRWxlbWVudD10aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuSU5ESUNBVE9SUyk7dGhpcy5fdG91Y2hTdXBwb3J0ZWQ9J29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cz4wO3RoaXMuX3BvaW50ZXJFdmVudD1Cb29sZWFuKHdpbmRvdy5Qb2ludGVyRXZlbnR8fHdpbmRvdy5NU1BvaW50ZXJFdmVudCk7dGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTt9CnZhciBfcHJvdG89Q2Fyb3VzZWwucHJvdG90eXBlO19wcm90by5uZXh0PWZ1bmN0aW9uIG5leHQoKXtpZighdGhpcy5faXNTbGlkaW5nKXt0aGlzLl9zbGlkZShEaXJlY3Rpb24uTkVYVCk7fX07X3Byb3RvLm5leHRXaGVuVmlzaWJsZT1mdW5jdGlvbiBuZXh0V2hlblZpc2libGUoKXtpZighZG9jdW1lbnQuaGlkZGVuJiYkKHRoaXMuX2VsZW1lbnQpLmlzKCc6dmlzaWJsZScpJiYkKHRoaXMuX2VsZW1lbnQpLmNzcygndmlzaWJpbGl0eScpIT09J2hpZGRlbicpe3RoaXMubmV4dCgpO319O19wcm90by5wcmV2PWZ1bmN0aW9uIHByZXYoKXtpZighdGhpcy5faXNTbGlkaW5nKXt0aGlzLl9zbGlkZShEaXJlY3Rpb24uUFJFVik7fX07X3Byb3RvLnBhdXNlPWZ1bmN0aW9uIHBhdXNlKGV2ZW50KXtpZighZXZlbnQpe3RoaXMuX2lzUGF1c2VkPXRydWU7fQppZih0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuTkVYVF9QUkVWKSl7VXRpbC50cmlnZ2VyVHJhbnNpdGlvbkVuZCh0aGlzLl9lbGVtZW50KTt0aGlzLmN5Y2xlKHRydWUpO30KY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7dGhpcy5faW50ZXJ2YWw9bnVsbDt9O19wcm90by5jeWNsZT1mdW5jdGlvbiBjeWNsZShldmVudCl7aWYoIWV2ZW50KXt0aGlzLl9pc1BhdXNlZD1mYWxzZTt9CmlmKHRoaXMuX2ludGVydmFsKXtjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTt0aGlzLl9pbnRlcnZhbD1udWxsO30KaWYodGhpcy5fY29uZmlnLmludGVydmFsJiYhdGhpcy5faXNQYXVzZWQpe3RoaXMuX2ludGVydmFsPXNldEludGVydmFsKChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGU/dGhpcy5uZXh0V2hlblZpc2libGU6dGhpcy5uZXh0KS5iaW5kKHRoaXMpLHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7fX07X3Byb3RvLnRvPWZ1bmN0aW9uIHRvKGluZGV4KXt2YXIgX3RoaXM9dGhpczt0aGlzLl9hY3RpdmVFbGVtZW50PXRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5BQ1RJVkVfSVRFTSk7dmFyIGFjdGl2ZUluZGV4PXRoaXMuX2dldEl0ZW1JbmRleCh0aGlzLl9hY3RpdmVFbGVtZW50KTtpZihpbmRleD50aGlzLl9pdGVtcy5sZW5ndGgtMXx8aW5kZXg8MCl7cmV0dXJuO30KaWYodGhpcy5faXNTbGlkaW5nKXskKHRoaXMuX2VsZW1lbnQpLm9uZShFdmVudC5TTElELGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLnRvKGluZGV4KTt9KTtyZXR1cm47fQppZihhY3RpdmVJbmRleD09PWluZGV4KXt0aGlzLnBhdXNlKCk7dGhpcy5jeWNsZSgpO3JldHVybjt9CnZhciBkaXJlY3Rpb249aW5kZXg+YWN0aXZlSW5kZXg/RGlyZWN0aW9uLk5FWFQ6RGlyZWN0aW9uLlBSRVY7dGhpcy5fc2xpZGUoZGlyZWN0aW9uLHRoaXMuX2l0ZW1zW2luZGV4XSk7fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7dGhpcy5faXRlbXM9bnVsbDt0aGlzLl9jb25maWc9bnVsbDt0aGlzLl9lbGVtZW50PW51bGw7dGhpcy5faW50ZXJ2YWw9bnVsbDt0aGlzLl9pc1BhdXNlZD1udWxsO3RoaXMuX2lzU2xpZGluZz1udWxsO3RoaXMuX2FjdGl2ZUVsZW1lbnQ9bnVsbDt0aGlzLl9pbmRpY2F0b3JzRWxlbWVudD1udWxsO307X3Byb3RvLl9nZXRDb25maWc9ZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpe2NvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LERlZmF1bHQsY29uZmlnKTtVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLGNvbmZpZyxEZWZhdWx0VHlwZSk7cmV0dXJuIGNvbmZpZzt9O19wcm90by5faGFuZGxlU3dpcGU9ZnVuY3Rpb24gX2hhbmRsZVN3aXBlKCl7dmFyIGFic0RlbHRheD1NYXRoLmFicyh0aGlzLnRvdWNoRGVsdGFYKTtpZihhYnNEZWx0YXg8PVNXSVBFX1RIUkVTSE9MRCl7cmV0dXJuO30KdmFyIGRpcmVjdGlvbj1hYnNEZWx0YXgvdGhpcy50b3VjaERlbHRhWDtpZihkaXJlY3Rpb24+MCl7dGhpcy5wcmV2KCk7fQppZihkaXJlY3Rpb248MCl7dGhpcy5uZXh0KCk7fX07X3Byb3RvLl9hZGRFdmVudExpc3RlbmVycz1mdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKXt2YXIgX3RoaXMyPXRoaXM7aWYodGhpcy5fY29uZmlnLmtleWJvYXJkKXskKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV04sZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczIuX2tleWRvd24oZXZlbnQpO30pO30KaWYodGhpcy5fY29uZmlnLnBhdXNlPT09J2hvdmVyJyl7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5NT1VTRUVOVEVSLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMyLnBhdXNlKGV2ZW50KTt9KS5vbihFdmVudC5NT1VTRUxFQVZFLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXMyLmN5Y2xlKGV2ZW50KTt9KTt9CmlmKHRoaXMuX2NvbmZpZy50b3VjaCl7dGhpcy5fYWRkVG91Y2hFdmVudExpc3RlbmVycygpO319O19wcm90by5fYWRkVG91Y2hFdmVudExpc3RlbmVycz1mdW5jdGlvbiBfYWRkVG91Y2hFdmVudExpc3RlbmVycygpe3ZhciBfdGhpczM9dGhpcztpZighdGhpcy5fdG91Y2hTdXBwb3J0ZWQpe3JldHVybjt9CnZhciBzdGFydD1mdW5jdGlvbiBzdGFydChldmVudCl7aWYoX3RoaXMzLl9wb2ludGVyRXZlbnQmJlBvaW50ZXJUeXBlW2V2ZW50Lm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUudG9VcHBlckNhc2UoKV0pe190aGlzMy50b3VjaFN0YXJ0WD1ldmVudC5vcmlnaW5hbEV2ZW50LmNsaWVudFg7fWVsc2UgaWYoIV90aGlzMy5fcG9pbnRlckV2ZW50KXtfdGhpczMudG91Y2hTdGFydFg9ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFg7fX07dmFyIG1vdmU9ZnVuY3Rpb24gbW92ZShldmVudCl7aWYoZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzJiZldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoPjEpe190aGlzMy50b3VjaERlbHRhWD0wO31lbHNle190aGlzMy50b3VjaERlbHRhWD1ldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WC1fdGhpczMudG91Y2hTdGFydFg7fX07dmFyIGVuZD1mdW5jdGlvbiBlbmQoZXZlbnQpe2lmKF90aGlzMy5fcG9pbnRlckV2ZW50JiZQb2ludGVyVHlwZVtldmVudC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlLnRvVXBwZXJDYXNlKCldKXtfdGhpczMudG91Y2hEZWx0YVg9ZXZlbnQub3JpZ2luYWxFdmVudC5jbGllbnRYLV90aGlzMy50b3VjaFN0YXJ0WDt9Cl90aGlzMy5faGFuZGxlU3dpcGUoKTtpZihfdGhpczMuX2NvbmZpZy5wYXVzZT09PSdob3Zlcicpe190aGlzMy5wYXVzZSgpO2lmKF90aGlzMy50b3VjaFRpbWVvdXQpe2NsZWFyVGltZW91dChfdGhpczMudG91Y2hUaW1lb3V0KTt9Cl90aGlzMy50b3VjaFRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzMy5jeWNsZShldmVudCk7fSxUT1VDSEVWRU5UX0NPTVBBVF9XQUlUK190aGlzMy5fY29uZmlnLmludGVydmFsKTt9fTskKHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5JVEVNX0lNRykpLm9uKEV2ZW50LkRSQUdfU1RBUlQsZnVuY3Rpb24oZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKTt9KTtpZih0aGlzLl9wb2ludGVyRXZlbnQpeyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuUE9JTlRFUkRPV04sZnVuY3Rpb24oZXZlbnQpe3JldHVybiBzdGFydChldmVudCk7fSk7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5QT0lOVEVSVVAsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBlbmQoZXZlbnQpO30pO3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuUE9JTlRFUl9FVkVOVCk7fWVsc2V7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5UT1VDSFNUQVJULGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gc3RhcnQoZXZlbnQpO30pOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuVE9VQ0hNT1ZFLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gbW92ZShldmVudCk7fSk7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5UT1VDSEVORCxmdW5jdGlvbihldmVudCl7cmV0dXJuIGVuZChldmVudCk7fSk7fX07X3Byb3RvLl9rZXlkb3duPWZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KXtpZigvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSl7cmV0dXJuO30Kc3dpdGNoKGV2ZW50LndoaWNoKXtjYXNlIEFSUk9XX0xFRlRfS0VZQ09ERTpldmVudC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMucHJldigpO2JyZWFrO2Nhc2UgQVJST1dfUklHSFRfS0VZQ09ERTpldmVudC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMubmV4dCgpO2JyZWFrO2RlZmF1bHQ6fX07X3Byb3RvLl9nZXRJdGVtSW5kZXg9ZnVuY3Rpb24gX2dldEl0ZW1JbmRleChlbGVtZW50KXt0aGlzLl9pdGVtcz1lbGVtZW50JiZlbGVtZW50LnBhcmVudE5vZGU/W10uc2xpY2UuY2FsbChlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5JVEVNKSk6W107cmV0dXJuIHRoaXMuX2l0ZW1zLmluZGV4T2YoZWxlbWVudCk7fTtfcHJvdG8uX2dldEl0ZW1CeURpcmVjdGlvbj1mdW5jdGlvbiBfZ2V0SXRlbUJ5RGlyZWN0aW9uKGRpcmVjdGlvbixhY3RpdmVFbGVtZW50KXt2YXIgaXNOZXh0RGlyZWN0aW9uPWRpcmVjdGlvbj09PURpcmVjdGlvbi5ORVhUO3ZhciBpc1ByZXZEaXJlY3Rpb249ZGlyZWN0aW9uPT09RGlyZWN0aW9uLlBSRVY7dmFyIGFjdGl2ZUluZGV4PXRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTt2YXIgbGFzdEl0ZW1JbmRleD10aGlzLl9pdGVtcy5sZW5ndGgtMTt2YXIgaXNHb2luZ1RvV3JhcD1pc1ByZXZEaXJlY3Rpb24mJmFjdGl2ZUluZGV4PT09MHx8aXNOZXh0RGlyZWN0aW9uJiZhY3RpdmVJbmRleD09PWxhc3RJdGVtSW5kZXg7aWYoaXNHb2luZ1RvV3JhcCYmIXRoaXMuX2NvbmZpZy53cmFwKXtyZXR1cm4gYWN0aXZlRWxlbWVudDt9CnZhciBkZWx0YT1kaXJlY3Rpb249PT1EaXJlY3Rpb24uUFJFVj8tMToxO3ZhciBpdGVtSW5kZXg9KGFjdGl2ZUluZGV4K2RlbHRhKSV0aGlzLl9pdGVtcy5sZW5ndGg7cmV0dXJuIGl0ZW1JbmRleD09PS0xP3RoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aC0xXTp0aGlzLl9pdGVtc1tpdGVtSW5kZXhdO307X3Byb3RvLl90cmlnZ2VyU2xpZGVFdmVudD1mdW5jdGlvbiBfdHJpZ2dlclNsaWRlRXZlbnQocmVsYXRlZFRhcmdldCxldmVudERpcmVjdGlvbk5hbWUpe3ZhciB0YXJnZXRJbmRleD10aGlzLl9nZXRJdGVtSW5kZXgocmVsYXRlZFRhcmdldCk7dmFyIGZyb21JbmRleD10aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkFDVElWRV9JVEVNKSk7dmFyIHNsaWRlRXZlbnQ9JC5FdmVudChFdmVudC5TTElERSx7cmVsYXRlZFRhcmdldDpyZWxhdGVkVGFyZ2V0LGRpcmVjdGlvbjpldmVudERpcmVjdGlvbk5hbWUsZnJvbTpmcm9tSW5kZXgsdG86dGFyZ2V0SW5kZXh9KTskKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZGVFdmVudCk7cmV0dXJuIHNsaWRlRXZlbnQ7fTtfcHJvdG8uX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQ9ZnVuY3Rpb24gX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQoZWxlbWVudCl7aWYodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpe3ZhciBpbmRpY2F0b3JzPVtdLnNsaWNlLmNhbGwodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5BQ1RJVkUpKTskKGluZGljYXRvcnMpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO3ZhciBuZXh0SW5kaWNhdG9yPXRoaXMuX2luZGljYXRvcnNFbGVtZW50LmNoaWxkcmVuW3RoaXMuX2dldEl0ZW1JbmRleChlbGVtZW50KV07aWYobmV4dEluZGljYXRvcil7JChuZXh0SW5kaWNhdG9yKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTt9fX07X3Byb3RvLl9zbGlkZT1mdW5jdGlvbiBfc2xpZGUoZGlyZWN0aW9uLGVsZW1lbnQpe3ZhciBfdGhpczQ9dGhpczt2YXIgYWN0aXZlRWxlbWVudD10aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuQUNUSVZFX0lURU0pO3ZhciBhY3RpdmVFbGVtZW50SW5kZXg9dGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO3ZhciBuZXh0RWxlbWVudD1lbGVtZW50fHxhY3RpdmVFbGVtZW50JiZ0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLGFjdGl2ZUVsZW1lbnQpO3ZhciBuZXh0RWxlbWVudEluZGV4PXRoaXMuX2dldEl0ZW1JbmRleChuZXh0RWxlbWVudCk7dmFyIGlzQ3ljbGluZz1Cb29sZWFuKHRoaXMuX2ludGVydmFsKTt2YXIgZGlyZWN0aW9uYWxDbGFzc05hbWU7dmFyIG9yZGVyQ2xhc3NOYW1lO3ZhciBldmVudERpcmVjdGlvbk5hbWU7aWYoZGlyZWN0aW9uPT09RGlyZWN0aW9uLk5FWFQpe2RpcmVjdGlvbmFsQ2xhc3NOYW1lPUNsYXNzTmFtZS5MRUZUO29yZGVyQ2xhc3NOYW1lPUNsYXNzTmFtZS5ORVhUO2V2ZW50RGlyZWN0aW9uTmFtZT1EaXJlY3Rpb24uTEVGVDt9ZWxzZXtkaXJlY3Rpb25hbENsYXNzTmFtZT1DbGFzc05hbWUuUklHSFQ7b3JkZXJDbGFzc05hbWU9Q2xhc3NOYW1lLlBSRVY7ZXZlbnREaXJlY3Rpb25OYW1lPURpcmVjdGlvbi5SSUdIVDt9CmlmKG5leHRFbGVtZW50JiYkKG5leHRFbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSl7dGhpcy5faXNTbGlkaW5nPWZhbHNlO3JldHVybjt9CnZhciBzbGlkZUV2ZW50PXRoaXMuX3RyaWdnZXJTbGlkZUV2ZW50KG5leHRFbGVtZW50LGV2ZW50RGlyZWN0aW9uTmFtZSk7aWYoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KaWYoIWFjdGl2ZUVsZW1lbnR8fCFuZXh0RWxlbWVudCl7cmV0dXJuO30KdGhpcy5faXNTbGlkaW5nPXRydWU7aWYoaXNDeWNsaW5nKXt0aGlzLnBhdXNlKCk7fQp0aGlzLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KG5leHRFbGVtZW50KTt2YXIgc2xpZEV2ZW50PSQuRXZlbnQoRXZlbnQuU0xJRCx7cmVsYXRlZFRhcmdldDpuZXh0RWxlbWVudCxkaXJlY3Rpb246ZXZlbnREaXJlY3Rpb25OYW1lLGZyb206YWN0aXZlRWxlbWVudEluZGV4LHRvOm5leHRFbGVtZW50SW5kZXh9KTtpZigkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TTElERSkpeyQobmV4dEVsZW1lbnQpLmFkZENsYXNzKG9yZGVyQ2xhc3NOYW1lKTtVdGlsLnJlZmxvdyhuZXh0RWxlbWVudCk7JChhY3RpdmVFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSk7JChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO3ZhciBuZXh0RWxlbWVudEludGVydmFsPXBhcnNlSW50KG5leHRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbnRlcnZhbCcpLDEwKTtpZihuZXh0RWxlbWVudEludGVydmFsKXt0aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsPXRoaXMuX2NvbmZpZy5kZWZhdWx0SW50ZXJ2YWx8fHRoaXMuX2NvbmZpZy5pbnRlcnZhbDt0aGlzLl9jb25maWcuaW50ZXJ2YWw9bmV4dEVsZW1lbnRJbnRlcnZhbDt9ZWxzZXt0aGlzLl9jb25maWcuaW50ZXJ2YWw9dGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbHx8dGhpcy5fY29uZmlnLmludGVydmFsO30KdmFyIHRyYW5zaXRpb25EdXJhdGlvbj1VdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KGFjdGl2ZUVsZW1lbnQpOyQoYWN0aXZlRWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsZnVuY3Rpb24oKXskKG5leHRFbGVtZW50KS5yZW1vdmVDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSsiICIrb3JkZXJDbGFzc05hbWUpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpOyQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSsiICIrb3JkZXJDbGFzc05hbWUrIiAiK2RpcmVjdGlvbmFsQ2xhc3NOYW1lKTtfdGhpczQuX2lzU2xpZGluZz1mYWxzZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuICQoX3RoaXM0Ll9lbGVtZW50KS50cmlnZ2VyKHNsaWRFdmVudCk7fSwwKTt9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNleyQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7JChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7dGhpcy5faXNTbGlkaW5nPWZhbHNlOyQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzbGlkRXZlbnQpO30KaWYoaXNDeWNsaW5nKXt0aGlzLmN5Y2xlKCk7fX07Q2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LCQodGhpcykuZGF0YSgpKTtpZih0eXBlb2YgY29uZmlnPT09J29iamVjdCcpe19jb25maWc9X29iamVjdFNwcmVhZCh7fSxfY29uZmlnLGNvbmZpZyk7fQp2YXIgYWN0aW9uPXR5cGVvZiBjb25maWc9PT0nc3RyaW5nJz9jb25maWc6X2NvbmZpZy5zbGlkZTtpZighZGF0YSl7ZGF0YT1uZXcgQ2Fyb3VzZWwodGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J251bWJlcicpe2RhdGEudG8oY29uZmlnKTt9ZWxzZSBpZih0eXBlb2YgYWN0aW9uPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2FjdGlvbl09PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIithY3Rpb24rIlwiIik7fQpkYXRhW2FjdGlvbl0oKTt9ZWxzZSBpZihfY29uZmlnLmludGVydmFsJiZfY29uZmlnLnJpZGUpe2RhdGEucGF1c2UoKTtkYXRhLmN5Y2xlKCk7fX0pO307Q2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXI9ZnVuY3Rpb24gX2RhdGFBcGlDbGlja0hhbmRsZXIoZXZlbnQpe3ZhciBzZWxlY3Rvcj1VdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7aWYoIXNlbGVjdG9yKXtyZXR1cm47fQp2YXIgdGFyZ2V0PSQoc2VsZWN0b3IpWzBdO2lmKCF0YXJnZXR8fCEkKHRhcmdldCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkNBUk9VU0VMKSl7cmV0dXJuO30KdmFyIGNvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LCQodGFyZ2V0KS5kYXRhKCksJCh0aGlzKS5kYXRhKCkpO3ZhciBzbGlkZUluZGV4PXRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlLXRvJyk7aWYoc2xpZGVJbmRleCl7Y29uZmlnLmludGVydmFsPWZhbHNlO30KQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSxjb25maWcpO2lmKHNsaWRlSW5kZXgpeyQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKS50byhzbGlkZUluZGV4KTt9CmV2ZW50LnByZXZlbnREZWZhdWx0KCk7fTtfY3JlYXRlQ2xhc3MoQ2Fyb3VzZWwsbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319LHtrZXk6IkRlZmF1bHQiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9fV0pO3JldHVybiBDYXJvdXNlbDt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuREFUQV9TTElERSxDYXJvdXNlbC5fZGF0YUFwaUNsaWNrSGFuZGxlcik7JCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksZnVuY3Rpb24oKXt2YXIgY2Fyb3VzZWxzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5EQVRBX1JJREUpKTtmb3IodmFyIGk9MCxsZW49Y2Fyb3VzZWxzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciAkY2Fyb3VzZWw9JChjYXJvdXNlbHNbaV0pO0Nhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkY2Fyb3VzZWwsJGNhcm91c2VsLmRhdGEoKSk7fX0pOyQuZm5bTkFNRV09Q2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPUNhcm91c2VsOyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIENhcm91c2VsO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL2NvbGxhcHNlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLkNvbGxhcHNlPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0nY29sbGFwc2UnO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5jb2xsYXBzZSc7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIERBVEFfQVBJX0tFWT0nLmRhdGEtYXBpJzt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIERlZmF1bHQ9e3RvZ2dsZTp0cnVlLHBhcmVudDonJ307dmFyIERlZmF1bHRUeXBlPXt0b2dnbGU6J2Jvb2xlYW4nLHBhcmVudDonKHN0cmluZ3xlbGVtZW50KSd9O3ZhciBFdmVudD17U0hPVzoic2hvdyIrRVZFTlRfS0VZLFNIT1dOOiJzaG93biIrRVZFTlRfS0VZLEhJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLENMSUNLX0RBVEFfQVBJOiJjbGljayIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWX07dmFyIENsYXNzTmFtZT17U0hPVzonc2hvdycsQ09MTEFQU0U6J2NvbGxhcHNlJyxDT0xMQVBTSU5HOidjb2xsYXBzaW5nJyxDT0xMQVBTRUQ6J2NvbGxhcHNlZCd9O3ZhciBEaW1lbnNpb249e1dJRFRIOid3aWR0aCcsSEVJR0hUOidoZWlnaHQnfTt2YXIgU2VsZWN0b3I9e0FDVElWRVM6Jy5zaG93LCAuY29sbGFwc2luZycsREFUQV9UT0dHTEU6J1tkYXRhLXRvZ2dsZT0iY29sbGFwc2UiXSd9O3ZhciBDb2xsYXBzZT1mdW5jdGlvbigpe2Z1bmN0aW9uIENvbGxhcHNlKGVsZW1lbnQsY29uZmlnKXt0aGlzLl9pc1RyYW5zaXRpb25pbmc9ZmFsc2U7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoY29uZmlnKTt0aGlzLl90cmlnZ2VyQXJyYXk9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIyIrZWxlbWVudC5pZCsiXCJdLCIrKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMiK2VsZW1lbnQuaWQrIlwiXSIpKSk7dmFyIHRvZ2dsZUxpc3Q9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLkRBVEFfVE9HR0xFKSk7Zm9yKHZhciBpPTAsbGVuPXRvZ2dsZUxpc3QubGVuZ3RoO2k8bGVuO2krKyl7dmFyIGVsZW09dG9nZ2xlTGlzdFtpXTt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW0pO3ZhciBmaWx0ZXJFbGVtZW50PVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmZpbHRlcihmdW5jdGlvbihmb3VuZEVsZW0pe3JldHVybiBmb3VuZEVsZW09PT1lbGVtZW50O30pO2lmKHNlbGVjdG9yIT09bnVsbCYmZmlsdGVyRWxlbWVudC5sZW5ndGg+MCl7dGhpcy5fc2VsZWN0b3I9c2VsZWN0b3I7dGhpcy5fdHJpZ2dlckFycmF5LnB1c2goZWxlbSk7fX0KdGhpcy5fcGFyZW50PXRoaXMuX2NvbmZpZy5wYXJlbnQ/dGhpcy5fZ2V0UGFyZW50KCk6bnVsbDtpZighdGhpcy5fY29uZmlnLnBhcmVudCl7dGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsdGhpcy5fdHJpZ2dlckFycmF5KTt9CmlmKHRoaXMuX2NvbmZpZy50b2dnbGUpe3RoaXMudG9nZ2xlKCk7fX0KdmFyIF9wcm90bz1Db2xsYXBzZS5wcm90b3R5cGU7X3Byb3RvLnRvZ2dsZT1mdW5jdGlvbiB0b2dnbGUoKXtpZigkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSl7dGhpcy5oaWRlKCk7fWVsc2V7dGhpcy5zaG93KCk7fX07X3Byb3RvLnNob3c9ZnVuY3Rpb24gc2hvdygpe3ZhciBfdGhpcz10aGlzO2lmKHRoaXMuX2lzVHJhbnNpdGlvbmluZ3x8JCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3JldHVybjt9CnZhciBhY3RpdmVzO3ZhciBhY3RpdmVzRGF0YTtpZih0aGlzLl9wYXJlbnQpe2FjdGl2ZXM9W10uc2xpY2UuY2FsbCh0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5BQ1RJVkVTKSkuZmlsdGVyKGZ1bmN0aW9uKGVsZW0pe2lmKHR5cGVvZiBfdGhpcy5fY29uZmlnLnBhcmVudD09PSdzdHJpbmcnKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50Jyk9PT1fdGhpcy5fY29uZmlnLnBhcmVudDt9CnJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuQ09MTEFQU0UpO30pO2lmKGFjdGl2ZXMubGVuZ3RoPT09MCl7YWN0aXZlcz1udWxsO319CmlmKGFjdGl2ZXMpe2FjdGl2ZXNEYXRhPSQoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKS5kYXRhKERBVEFfS0VZKTtpZihhY3RpdmVzRGF0YSYmYWN0aXZlc0RhdGEuX2lzVHJhbnNpdGlvbmluZyl7cmV0dXJuO319CnZhciBzdGFydEV2ZW50PSQuRXZlbnQoRXZlbnQuU0hPVyk7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO2lmKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CmlmKGFjdGl2ZXMpe0NvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKGFjdGl2ZXMpLm5vdCh0aGlzLl9zZWxlY3RvciksJ2hpZGUnKTtpZighYWN0aXZlc0RhdGEpeyQoYWN0aXZlcykuZGF0YShEQVRBX0tFWSxudWxsKTt9fQp2YXIgZGltZW5zaW9uPXRoaXMuX2dldERpbWVuc2lvbigpOyQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORyk7dGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPTA7aWYodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCl7JCh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLHRydWUpO30KdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpeyQoX3RoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKTtfdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPScnO190aGlzLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpOyQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPV04pO307dmFyIGNhcGl0YWxpemVkRGltZW5zaW9uPWRpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKTt2YXIgc2Nyb2xsU2l6ZT0ic2Nyb2xsIitjYXBpdGFsaXplZERpbWVuc2lvbjt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7JCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCxjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTt0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl09dGhpcy5fZWxlbWVudFtzY3JvbGxTaXplXSsicHgiO307X3Byb3RvLmhpZGU9ZnVuY3Rpb24gaGlkZSgpe3ZhciBfdGhpczI9dGhpcztpZih0aGlzLl9pc1RyYW5zaXRpb25pbmd8fCEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSl7cmV0dXJuO30KdmFyIHN0YXJ0RXZlbnQ9JC5FdmVudChFdmVudC5ISURFKTskKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7aWYoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KdmFyIGRpbWVuc2lvbj10aGlzLl9nZXREaW1lbnNpb24oKTt0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl09dGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtkaW1lbnNpb25dKyJweCI7VXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7JCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7dmFyIHRyaWdnZXJBcnJheUxlbmd0aD10aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoO2lmKHRyaWdnZXJBcnJheUxlbmd0aD4wKXtmb3IodmFyIGk9MDtpPHRyaWdnZXJBcnJheUxlbmd0aDtpKyspe3ZhciB0cmlnZ2VyPXRoaXMuX3RyaWdnZXJBcnJheVtpXTt2YXIgc2VsZWN0b3I9VXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRyaWdnZXIpO2lmKHNlbGVjdG9yIT09bnVsbCl7dmFyICRlbGVtPSQoW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO2lmKCEkZWxlbS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpeyQodHJpZ2dlcikuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsZmFsc2UpO319fX0KdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe190aGlzMi5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTskKF90aGlzMi5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkudHJpZ2dlcihFdmVudC5ISURERU4pO307dGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dPScnO3ZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO307X3Byb3RvLnNldFRyYW5zaXRpb25pbmc9ZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpe3RoaXMuX2lzVHJhbnNpdGlvbmluZz1pc1RyYW5zaXRpb25pbmc7fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2NvbmZpZz1udWxsO3RoaXMuX3BhcmVudD1udWxsO3RoaXMuX2VsZW1lbnQ9bnVsbDt0aGlzLl90cmlnZ2VyQXJyYXk9bnVsbDt0aGlzLl9pc1RyYW5zaXRpb25pbmc9bnVsbDt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LGNvbmZpZyk7Y29uZmlnLnRvZ2dsZT1Cb29sZWFuKGNvbmZpZy50b2dnbGUpO1V0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsY29uZmlnLERlZmF1bHRUeXBlKTtyZXR1cm4gY29uZmlnO307X3Byb3RvLl9nZXREaW1lbnNpb249ZnVuY3Rpb24gX2dldERpbWVuc2lvbigpe3ZhciBoYXNXaWR0aD0kKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7cmV0dXJuIGhhc1dpZHRoP0RpbWVuc2lvbi5XSURUSDpEaW1lbnNpb24uSEVJR0hUO307X3Byb3RvLl9nZXRQYXJlbnQ9ZnVuY3Rpb24gX2dldFBhcmVudCgpe3ZhciBfdGhpczM9dGhpczt2YXIgcGFyZW50O2lmKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5wYXJlbnQpKXtwYXJlbnQ9dGhpcy5fY29uZmlnLnBhcmVudDtpZih0eXBlb2YgdGhpcy5fY29uZmlnLnBhcmVudC5qcXVlcnkhPT0ndW5kZWZpbmVkJyl7cGFyZW50PXRoaXMuX2NvbmZpZy5wYXJlbnRbMF07fX1lbHNle3BhcmVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wYXJlbnQpO30KdmFyIHNlbGVjdG9yPSJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIiIrdGhpcy5fY29uZmlnLnBhcmVudCsiXCJdIjt2YXIgY2hpbGRyZW49W10uc2xpY2UuY2FsbChwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOyQoY2hpbGRyZW4pLmVhY2goZnVuY3Rpb24oaSxlbGVtZW50KXtfdGhpczMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksW2VsZW1lbnRdKTt9KTtyZXR1cm4gcGFyZW50O307X3Byb3RvLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LHRyaWdnZXJBcnJheSl7dmFyIGlzT3Blbj0kKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKTtpZih0cmlnZ2VyQXJyYXkubGVuZ3RoKXskKHRyaWdnZXJBcnJheSkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCwhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJyxpc09wZW4pO319O0NvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudD1mdW5jdGlvbiBfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCl7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtyZXR1cm4gc2VsZWN0b3I/ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik6bnVsbDt9O0NvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgJHRoaXM9JCh0aGlzKTt2YXIgZGF0YT0kdGhpcy5kYXRhKERBVEFfS0VZKTt2YXIgX2NvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LERlZmF1bHQsJHRoaXMuZGF0YSgpLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYoIWRhdGEmJl9jb25maWcudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGNvbmZpZykpe19jb25maWcudG9nZ2xlPWZhbHNlO30KaWYoIWRhdGEpe2RhdGE9bmV3IENvbGxhcHNlKHRoaXMsX2NvbmZpZyk7JHRoaXMuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhDb2xsYXBzZSxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319XSk7cmV0dXJuIENvbGxhcHNlO30oKTskKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSxTZWxlY3Rvci5EQVRBX1RPR0dMRSxmdW5jdGlvbihldmVudCl7aWYoZXZlbnQuY3VycmVudFRhcmdldC50YWdOYW1lPT09J0EnKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO30KdmFyICR0cmlnZ2VyPSQodGhpcyk7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTt2YXIgc2VsZWN0b3JzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOyQoc2VsZWN0b3JzKS5lYWNoKGZ1bmN0aW9uKCl7dmFyICR0YXJnZXQ9JCh0aGlzKTt2YXIgZGF0YT0kdGFyZ2V0LmRhdGEoREFUQV9LRVkpO3ZhciBjb25maWc9ZGF0YT8ndG9nZ2xlJzokdHJpZ2dlci5kYXRhKCk7Q29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsY29uZmlnKTt9KTt9KTskLmZuW05BTUVdPUNvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7JC5mbltOQU1FXS5Db25zdHJ1Y3Rvcj1Db2xsYXBzZTskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBDb2xsYXBzZTt9KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2Jvb3RzdHJhcC9qcy9kcm9wZG93bi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgncG9wcGVyLmpzJykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJ3BvcHBlci5qcycsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5Ecm9wZG93bj1mYWN0b3J5KGdsb2JhbC5qUXVlcnksZ2xvYmFsLlBvcHBlcixnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFBvcHBlcixVdGlsKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7UG9wcGVyPVBvcHBlciYmUG9wcGVyLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/UG9wcGVyWydkZWZhdWx0J106UG9wcGVyO1V0aWw9VXRpbCYmVXRpbC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpP1V0aWxbJ2RlZmF1bHQnXTpVdGlsO2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO30KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pO31lbHNle29ialtrZXldPXZhbHVlO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307dmFyIG93bktleXM9T2JqZWN0LmtleXMoc291cmNlKTtpZih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09PSdmdW5jdGlvbicpe293bktleXM9b3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxzeW0pLmVudW1lcmFibGU7fSkpO30Kb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO30KcmV0dXJuIHRhcmdldDt9CnZhciBOQU1FPSdkcm9wZG93bic7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLmRyb3Bkb3duJzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgRVNDQVBFX0tFWUNPREU9Mjc7dmFyIFNQQUNFX0tFWUNPREU9MzI7dmFyIFRBQl9LRVlDT0RFPTk7dmFyIEFSUk9XX1VQX0tFWUNPREU9Mzg7dmFyIEFSUk9XX0RPV05fS0VZQ09ERT00MDt2YXIgUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIPTM7dmFyIFJFR0VYUF9LRVlET1dOPW5ldyBSZWdFeHAoQVJST1dfVVBfS0VZQ09ERSsifCIrQVJST1dfRE9XTl9LRVlDT0RFKyJ8IitFU0NBUEVfS0VZQ09ERSk7dmFyIEV2ZW50PXtISURFOiJoaWRlIitFVkVOVF9LRVksSElEREVOOiJoaWRkZW4iK0VWRU5UX0tFWSxTSE9XOiJzaG93IitFVkVOVF9LRVksU0hPV046InNob3duIitFVkVOVF9LRVksQ0xJQ0s6ImNsaWNrIitFVkVOVF9LRVksQ0xJQ0tfREFUQV9BUEk6ImNsaWNrIitFVkVOVF9LRVkrREFUQV9BUElfS0VZLEtFWURPV05fREFUQV9BUEk6ImtleWRvd24iK0VWRU5UX0tFWStEQVRBX0FQSV9LRVksS0VZVVBfREFUQV9BUEk6ImtleXVwIitFVkVOVF9LRVkrREFUQV9BUElfS0VZfTt2YXIgQ2xhc3NOYW1lPXtESVNBQkxFRDonZGlzYWJsZWQnLFNIT1c6J3Nob3cnLERST1BVUDonZHJvcHVwJyxEUk9QUklHSFQ6J2Ryb3ByaWdodCcsRFJPUExFRlQ6J2Ryb3BsZWZ0JyxNRU5VUklHSFQ6J2Ryb3Bkb3duLW1lbnUtcmlnaHQnLE1FTlVMRUZUOidkcm9wZG93bi1tZW51LWxlZnQnLFBPU0lUSU9OX1NUQVRJQzoncG9zaXRpb24tc3RhdGljJ307dmFyIFNlbGVjdG9yPXtEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSJkcm9wZG93biJdJyxGT1JNX0NISUxEOicuZHJvcGRvd24gZm9ybScsTUVOVTonLmRyb3Bkb3duLW1lbnUnLE5BVkJBUl9OQVY6Jy5uYXZiYXItbmF2JyxWSVNJQkxFX0lURU1TOicuZHJvcGRvd24tbWVudSAuZHJvcGRvd24taXRlbTpub3QoLmRpc2FibGVkKTpub3QoOmRpc2FibGVkKSd9O3ZhciBBdHRhY2htZW50TWFwPXtUT1A6J3RvcC1zdGFydCcsVE9QRU5EOid0b3AtZW5kJyxCT1RUT006J2JvdHRvbS1zdGFydCcsQk9UVE9NRU5EOidib3R0b20tZW5kJyxSSUdIVDoncmlnaHQtc3RhcnQnLFJJR0hURU5EOidyaWdodC1lbmQnLExFRlQ6J2xlZnQtc3RhcnQnLExFRlRFTkQ6J2xlZnQtZW5kJ307dmFyIERlZmF1bHQ9e29mZnNldDowLGZsaXA6dHJ1ZSxib3VuZGFyeTonc2Nyb2xsUGFyZW50JyxyZWZlcmVuY2U6J3RvZ2dsZScsZGlzcGxheTonZHluYW1pYyd9O3ZhciBEZWZhdWx0VHlwZT17b2Zmc2V0OicobnVtYmVyfHN0cmluZ3xmdW5jdGlvbiknLGZsaXA6J2Jvb2xlYW4nLGJvdW5kYXJ5Oicoc3RyaW5nfGVsZW1lbnQpJyxyZWZlcmVuY2U6JyhzdHJpbmd8ZWxlbWVudCknLGRpc3BsYXk6J3N0cmluZyd9O3ZhciBEcm9wZG93bj1mdW5jdGlvbigpe2Z1bmN0aW9uIERyb3Bkb3duKGVsZW1lbnQsY29uZmlnKXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7dGhpcy5fcG9wcGVyPW51bGw7dGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhjb25maWcpO3RoaXMuX21lbnU9dGhpcy5fZ2V0TWVudUVsZW1lbnQoKTt0aGlzLl9pbk5hdmJhcj10aGlzLl9kZXRlY3ROYXZiYXIoKTt0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO30KdmFyIF9wcm90bz1Ecm9wZG93bi5wcm90b3R5cGU7X3Byb3RvLnRvZ2dsZT1mdW5jdGlvbiB0b2dnbGUoKXtpZih0aGlzLl9lbGVtZW50LmRpc2FibGVkfHwkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5ESVNBQkxFRCkpe3JldHVybjt9CnZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO3ZhciBpc0FjdGl2ZT0kKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKTtEcm9wZG93bi5fY2xlYXJNZW51cygpO2lmKGlzQWN0aXZlKXtyZXR1cm47fQp2YXIgcmVsYXRlZFRhcmdldD17cmVsYXRlZFRhcmdldDp0aGlzLl9lbGVtZW50fTt2YXIgc2hvd0V2ZW50PSQuRXZlbnQoRXZlbnQuU0hPVyxyZWxhdGVkVGFyZ2V0KTskKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO2lmKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KaWYoIXRoaXMuX2luTmF2YmFyKXtpZih0eXBlb2YgUG9wcGVyPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFwncyBkcm9wZG93bnMgcmVxdWlyZSBQb3BwZXIuanMgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZy8pJyk7fQp2YXIgcmVmZXJlbmNlRWxlbWVudD10aGlzLl9lbGVtZW50O2lmKHRoaXMuX2NvbmZpZy5yZWZlcmVuY2U9PT0ncGFyZW50Jyl7cmVmZXJlbmNlRWxlbWVudD1wYXJlbnQ7fWVsc2UgaWYoVXRpbC5pc0VsZW1lbnQodGhpcy5fY29uZmlnLnJlZmVyZW5jZSkpe3JlZmVyZW5jZUVsZW1lbnQ9dGhpcy5fY29uZmlnLnJlZmVyZW5jZTtpZih0eXBlb2YgdGhpcy5fY29uZmlnLnJlZmVyZW5jZS5qcXVlcnkhPT0ndW5kZWZpbmVkJyl7cmVmZXJlbmNlRWxlbWVudD10aGlzLl9jb25maWcucmVmZXJlbmNlWzBdO319CmlmKHRoaXMuX2NvbmZpZy5ib3VuZGFyeSE9PSdzY3JvbGxQYXJlbnQnKXskKHBhcmVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlBPU0lUSU9OX1NUQVRJQyk7fQp0aGlzLl9wb3BwZXI9bmV3IFBvcHBlcihyZWZlcmVuY2VFbGVtZW50LHRoaXMuX21lbnUsdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKCkpO30KaWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJiQocGFyZW50KS5jbG9zZXN0KFNlbGVjdG9yLk5BVkJBUl9OQVYpLmxlbmd0aD09PTApeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJyxudWxsLCQubm9vcCk7fQp0aGlzLl9lbGVtZW50LmZvY3VzKCk7dGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLHRydWUpOyQodGhpcy5fbWVudSkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpOyQocGFyZW50KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVykudHJpZ2dlcigkLkV2ZW50KEV2ZW50LlNIT1dOLHJlbGF0ZWRUYXJnZXQpKTt9O19wcm90by5zaG93PWZ1bmN0aW9uIHNob3coKXtpZih0aGlzLl9lbGVtZW50LmRpc2FibGVkfHwkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5ESVNBQkxFRCl8fCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKXtyZXR1cm47fQp2YXIgcmVsYXRlZFRhcmdldD17cmVsYXRlZFRhcmdldDp0aGlzLl9lbGVtZW50fTt2YXIgc2hvd0V2ZW50PSQuRXZlbnQoRXZlbnQuU0hPVyxyZWxhdGVkVGFyZ2V0KTt2YXIgcGFyZW50PURyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO2lmKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KJCh0aGlzLl9tZW51KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVyk7JChwYXJlbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuU0hPV04scmVsYXRlZFRhcmdldCkpO307X3Byb3RvLmhpZGU9ZnVuY3Rpb24gaGlkZSgpe2lmKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWR8fCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKXx8ISQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKXtyZXR1cm47fQp2YXIgcmVsYXRlZFRhcmdldD17cmVsYXRlZFRhcmdldDp0aGlzLl9lbGVtZW50fTt2YXIgaGlkZUV2ZW50PSQuRXZlbnQoRXZlbnQuSElERSxyZWxhdGVkVGFyZ2V0KTt2YXIgcGFyZW50PURyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHBhcmVudCkudHJpZ2dlcihoaWRlRXZlbnQpO2lmKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KJCh0aGlzLl9tZW51KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVyk7JChwYXJlbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuSElEREVOLHJlbGF0ZWRUYXJnZXQpKTt9O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7JCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTt0aGlzLl9lbGVtZW50PW51bGw7dGhpcy5fbWVudT1udWxsO2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5kZXN0cm95KCk7dGhpcy5fcG9wcGVyPW51bGw7fX07X3Byb3RvLnVwZGF0ZT1mdW5jdGlvbiB1cGRhdGUoKXt0aGlzLl9pbk5hdmJhcj10aGlzLl9kZXRlY3ROYXZiYXIoKTtpZih0aGlzLl9wb3BwZXIhPT1udWxsKXt0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKTt9fTtfcHJvdG8uX2FkZEV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpe3ZhciBfdGhpcz10aGlzOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0ssZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7X3RoaXMudG9nZ2xlKCk7fSk7fTtfcHJvdG8uX2dldENvbmZpZz1mdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZyl7Y29uZmlnPV9vYmplY3RTcHJlYWQoe30sdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LCQodGhpcy5fZWxlbWVudCkuZGF0YSgpLGNvbmZpZyk7VXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSxjb25maWcsdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7cmV0dXJuIGNvbmZpZzt9O19wcm90by5fZ2V0TWVudUVsZW1lbnQ9ZnVuY3Rpb24gX2dldE1lbnVFbGVtZW50KCl7aWYoIXRoaXMuX21lbnUpe3ZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO2lmKHBhcmVudCl7dGhpcy5fbWVudT1wYXJlbnQucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5NRU5VKTt9fQpyZXR1cm4gdGhpcy5fbWVudTt9O19wcm90by5fZ2V0UGxhY2VtZW50PWZ1bmN0aW9uIF9nZXRQbGFjZW1lbnQoKXt2YXIgJHBhcmVudERyb3Bkb3duPSQodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlKTt2YXIgcGxhY2VtZW50PUF0dGFjaG1lbnRNYXAuQk9UVE9NO2lmKCRwYXJlbnREcm9wZG93bi5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUFVQKSl7cGxhY2VtZW50PUF0dGFjaG1lbnRNYXAuVE9QO2lmKCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk1FTlVSSUdIVCkpe3BsYWNlbWVudD1BdHRhY2htZW50TWFwLlRPUEVORDt9fWVsc2UgaWYoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QUklHSFQpKXtwbGFjZW1lbnQ9QXR0YWNobWVudE1hcC5SSUdIVDt9ZWxzZSBpZigkcGFyZW50RHJvcGRvd24uaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BMRUZUKSl7cGxhY2VtZW50PUF0dGFjaG1lbnRNYXAuTEVGVDt9ZWxzZSBpZigkKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZS5NRU5VUklHSFQpKXtwbGFjZW1lbnQ9QXR0YWNobWVudE1hcC5CT1RUT01FTkQ7fQpyZXR1cm4gcGxhY2VtZW50O307X3Byb3RvLl9kZXRlY3ROYXZiYXI9ZnVuY3Rpb24gX2RldGVjdE5hdmJhcigpe3JldHVybiAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoJy5uYXZiYXInKS5sZW5ndGg+MDt9O19wcm90by5fZ2V0T2Zmc2V0PWZ1bmN0aW9uIF9nZXRPZmZzZXQoKXt2YXIgX3RoaXMyPXRoaXM7dmFyIG9mZnNldD17fTtpZih0eXBlb2YgdGhpcy5fY29uZmlnLm9mZnNldD09PSdmdW5jdGlvbicpe29mZnNldC5mbj1mdW5jdGlvbihkYXRhKXtkYXRhLm9mZnNldHM9X29iamVjdFNwcmVhZCh7fSxkYXRhLm9mZnNldHMsX3RoaXMyLl9jb25maWcub2Zmc2V0KGRhdGEub2Zmc2V0cyxfdGhpczIuX2VsZW1lbnQpfHx7fSk7cmV0dXJuIGRhdGE7fTt9ZWxzZXtvZmZzZXQub2Zmc2V0PXRoaXMuX2NvbmZpZy5vZmZzZXQ7fQpyZXR1cm4gb2Zmc2V0O307X3Byb3RvLl9nZXRQb3BwZXJDb25maWc9ZnVuY3Rpb24gX2dldFBvcHBlckNvbmZpZygpe3ZhciBwb3BwZXJDb25maWc9e3BsYWNlbWVudDp0aGlzLl9nZXRQbGFjZW1lbnQoKSxtb2RpZmllcnM6e29mZnNldDp0aGlzLl9nZXRPZmZzZXQoKSxmbGlwOntlbmFibGVkOnRoaXMuX2NvbmZpZy5mbGlwfSxwcmV2ZW50T3ZlcmZsb3c6e2JvdW5kYXJpZXNFbGVtZW50OnRoaXMuX2NvbmZpZy5ib3VuZGFyeX19fTtpZih0aGlzLl9jb25maWcuZGlzcGxheT09PSdzdGF0aWMnKXtwb3BwZXJDb25maWcubW9kaWZpZXJzLmFwcGx5U3R5bGU9e2VuYWJsZWQ6ZmFsc2V9O30KcmV0dXJuIHBvcHBlckNvbmZpZzt9O0Ryb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZGF0YT0kKHRoaXMpLmRhdGEoREFUQV9LRVkpO3ZhciBfY29uZmlnPXR5cGVvZiBjb25maWc9PT0nb2JqZWN0Jz9jb25maWc6bnVsbDtpZighZGF0YSl7ZGF0YT1uZXcgRHJvcGRvd24odGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2NvbmZpZ109PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIitjb25maWcrIlwiIik7fQpkYXRhW2NvbmZpZ10oKTt9fSk7fTtEcm9wZG93bi5fY2xlYXJNZW51cz1mdW5jdGlvbiBfY2xlYXJNZW51cyhldmVudCl7aWYoZXZlbnQmJihldmVudC53aGljaD09PVJJR0hUX01PVVNFX0JVVFRPTl9XSElDSHx8ZXZlbnQudHlwZT09PSdrZXl1cCcmJmV2ZW50LndoaWNoIT09VEFCX0tFWUNPREUpKXtyZXR1cm47fQp2YXIgdG9nZ2xlcz1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuREFUQV9UT0dHTEUpKTtmb3IodmFyIGk9MCxsZW49dG9nZ2xlcy5sZW5ndGg7aTxsZW47aSsrKXt2YXIgcGFyZW50PURyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0b2dnbGVzW2ldKTt2YXIgY29udGV4dD0kKHRvZ2dsZXNbaV0pLmRhdGEoREFUQV9LRVkpO3ZhciByZWxhdGVkVGFyZ2V0PXtyZWxhdGVkVGFyZ2V0OnRvZ2dsZXNbaV19O2lmKGV2ZW50JiZldmVudC50eXBlPT09J2NsaWNrJyl7cmVsYXRlZFRhcmdldC5jbGlja0V2ZW50PWV2ZW50O30KaWYoIWNvbnRleHQpe2NvbnRpbnVlO30KdmFyIGRyb3Bkb3duTWVudT1jb250ZXh0Ll9tZW51O2lmKCEkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKXtjb250aW51ZTt9CmlmKGV2ZW50JiYoZXZlbnQudHlwZT09PSdjbGljaycmJi9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpfHxldmVudC50eXBlPT09J2tleXVwJyYmZXZlbnQud2hpY2g9PT1UQUJfS0VZQ09ERSkmJiQuY29udGFpbnMocGFyZW50LGV2ZW50LnRhcmdldCkpe2NvbnRpbnVlO30KdmFyIGhpZGVFdmVudD0kLkV2ZW50KEV2ZW50LkhJREUscmVsYXRlZFRhcmdldCk7JChwYXJlbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtpZihoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2NvbnRpbnVlO30KaWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vZmYoJ21vdXNlb3ZlcicsbnVsbCwkLm5vb3ApO30KdG9nZ2xlc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCdmYWxzZScpOyQoZHJvcGRvd25NZW51KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7JChwYXJlbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuSElEREVOLHJlbGF0ZWRUYXJnZXQpKTt9fTtEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQ9ZnVuY3Rpb24gX2dldFBhcmVudEZyb21FbGVtZW50KGVsZW1lbnQpe3ZhciBwYXJlbnQ7dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtpZihzZWxlY3Rvcil7cGFyZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO30KcmV0dXJuIHBhcmVudHx8ZWxlbWVudC5wYXJlbnROb2RlO307RHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcj1mdW5jdGlvbiBfZGF0YUFwaUtleWRvd25IYW5kbGVyKGV2ZW50KXtpZigvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKT9ldmVudC53aGljaD09PVNQQUNFX0tFWUNPREV8fGV2ZW50LndoaWNoIT09RVNDQVBFX0tFWUNPREUmJihldmVudC53aGljaCE9PUFSUk9XX0RPV05fS0VZQ09ERSYmZXZlbnQud2hpY2ghPT1BUlJPV19VUF9LRVlDT0RFfHwkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChTZWxlY3Rvci5NRU5VKS5sZW5ndGgpOiFSRUdFWFBfS0VZRE9XTi50ZXN0KGV2ZW50LndoaWNoKSl7cmV0dXJuO30KZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKTtpZih0aGlzLmRpc2FibGVkfHwkKHRoaXMpLmhhc0NsYXNzKENsYXNzTmFtZS5ESVNBQkxFRCkpe3JldHVybjt9CnZhciBwYXJlbnQ9RHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMpO3ZhciBpc0FjdGl2ZT0kKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO2lmKCFpc0FjdGl2ZXx8aXNBY3RpdmUmJihldmVudC53aGljaD09PUVTQ0FQRV9LRVlDT0RFfHxldmVudC53aGljaD09PVNQQUNFX0tFWUNPREUpKXtpZihldmVudC53aGljaD09PUVTQ0FQRV9LRVlDT0RFKXt2YXIgdG9nZ2xlPXBhcmVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkRBVEFfVE9HR0xFKTskKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKTt9CiQodGhpcykudHJpZ2dlcignY2xpY2snKTtyZXR1cm47fQp2YXIgaXRlbXM9W10uc2xpY2UuY2FsbChwYXJlbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5WSVNJQkxFX0lURU1TKSk7aWYoaXRlbXMubGVuZ3RoPT09MCl7cmV0dXJuO30KdmFyIGluZGV4PWl0ZW1zLmluZGV4T2YoZXZlbnQudGFyZ2V0KTtpZihldmVudC53aGljaD09PUFSUk9XX1VQX0tFWUNPREUmJmluZGV4PjApe2luZGV4LS07fQppZihldmVudC53aGljaD09PUFSUk9XX0RPV05fS0VZQ09ERSYmaW5kZXg8aXRlbXMubGVuZ3RoLTEpe2luZGV4Kys7fQppZihpbmRleDwwKXtpbmRleD0wO30KaXRlbXNbaW5kZXhdLmZvY3VzKCk7fTtfY3JlYXRlQ2xhc3MoRHJvcGRvd24sbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319LHtrZXk6IkRlZmF1bHQiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9fSx7a2V5OiJEZWZhdWx0VHlwZSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0VHlwZTt9fV0pO3JldHVybiBEcm9wZG93bjt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSxTZWxlY3Rvci5EQVRBX1RPR0dMRSxEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLFNlbGVjdG9yLk1FTlUsRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEkrIiAiK0V2ZW50LktFWVVQX0RBVEFfQVBJLERyb3Bkb3duLl9jbGVhck1lbnVzKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSxTZWxlY3Rvci5EQVRBX1RPR0dMRSxmdW5jdGlvbihldmVudCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKTtEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwndG9nZ2xlJyk7fSkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuRk9STV9DSElMRCxmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO30pOyQuZm5bTkFNRV09RHJvcGRvd24uX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPURyb3Bkb3duOyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIERyb3Bkb3duO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL21vZGFsLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLk1vZGFsPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0nbW9kYWwnO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5tb2RhbCc7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIERBVEFfQVBJX0tFWT0nLmRhdGEtYXBpJzt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIEVTQ0FQRV9LRVlDT0RFPTI3O3ZhciBEZWZhdWx0PXtiYWNrZHJvcDp0cnVlLGtleWJvYXJkOnRydWUsZm9jdXM6dHJ1ZSxzaG93OnRydWV9O3ZhciBEZWZhdWx0VHlwZT17YmFja2Ryb3A6Jyhib29sZWFufHN0cmluZyknLGtleWJvYXJkOidib29sZWFuJyxmb2N1czonYm9vbGVhbicsc2hvdzonYm9vbGVhbid9O3ZhciBFdmVudD17SElERToiaGlkZSIrRVZFTlRfS0VZLEhJRERFTjoiaGlkZGVuIitFVkVOVF9LRVksU0hPVzoic2hvdyIrRVZFTlRfS0VZLFNIT1dOOiJzaG93biIrRVZFTlRfS0VZLEZPQ1VTSU46ImZvY3VzaW4iK0VWRU5UX0tFWSxSRVNJWkU6InJlc2l6ZSIrRVZFTlRfS0VZLENMSUNLX0RJU01JU1M6ImNsaWNrLmRpc21pc3MiK0VWRU5UX0tFWSxLRVlET1dOX0RJU01JU1M6ImtleWRvd24uZGlzbWlzcyIrRVZFTlRfS0VZLE1PVVNFVVBfRElTTUlTUzoibW91c2V1cC5kaXNtaXNzIitFVkVOVF9LRVksTU9VU0VET1dOX0RJU01JU1M6Im1vdXNlZG93bi5kaXNtaXNzIitFVkVOVF9LRVksQ0xJQ0tfREFUQV9BUEk6ImNsaWNrIitFVkVOVF9LRVkrREFUQV9BUElfS0VZfTt2YXIgQ2xhc3NOYW1lPXtTQ1JPTExBQkxFOidtb2RhbC1kaWFsb2ctc2Nyb2xsYWJsZScsU0NST0xMQkFSX01FQVNVUkVSOidtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsQkFDS0RST1A6J21vZGFsLWJhY2tkcm9wJyxPUEVOOidtb2RhbC1vcGVuJyxGQURFOidmYWRlJyxTSE9XOidzaG93J307dmFyIFNlbGVjdG9yPXtESUFMT0c6Jy5tb2RhbC1kaWFsb2cnLE1PREFMX0JPRFk6Jy5tb2RhbC1ib2R5JyxEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSJtb2RhbCJdJyxEQVRBX0RJU01JU1M6J1tkYXRhLWRpc21pc3M9Im1vZGFsIl0nLEZJWEVEX0NPTlRFTlQ6Jy5maXhlZC10b3AsIC5maXhlZC1ib3R0b20sIC5pcy1maXhlZCwgLnN0aWNreS10b3AnLFNUSUNLWV9DT05URU5UOicuc3RpY2t5LXRvcCd9O3ZhciBNb2RhbD1mdW5jdGlvbigpe2Z1bmN0aW9uIE1vZGFsKGVsZW1lbnQsY29uZmlnKXt0aGlzLl9jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX2RpYWxvZz1lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuRElBTE9HKTt0aGlzLl9iYWNrZHJvcD1udWxsO3RoaXMuX2lzU2hvd249ZmFsc2U7dGhpcy5faXNCb2R5T3ZlcmZsb3dpbmc9ZmFsc2U7dGhpcy5faWdub3JlQmFja2Ryb3BDbGljaz1mYWxzZTt0aGlzLl9pc1RyYW5zaXRpb25pbmc9ZmFsc2U7dGhpcy5fc2Nyb2xsYmFyV2lkdGg9MDt9CnZhciBfcHJvdG89TW9kYWwucHJvdG90eXBlO19wcm90by50b2dnbGU9ZnVuY3Rpb24gdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpe3JldHVybiB0aGlzLl9pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTt9O19wcm90by5zaG93PWZ1bmN0aW9uIHNob3cocmVsYXRlZFRhcmdldCl7dmFyIF90aGlzPXRoaXM7aWYodGhpcy5faXNTaG93bnx8dGhpcy5faXNUcmFuc2l0aW9uaW5nKXtyZXR1cm47fQppZigkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSl7dGhpcy5faXNUcmFuc2l0aW9uaW5nPXRydWU7fQp2YXIgc2hvd0V2ZW50PSQuRXZlbnQoRXZlbnQuU0hPVyx7cmVsYXRlZFRhcmdldDpyZWxhdGVkVGFyZ2V0fSk7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7aWYodGhpcy5faXNTaG93bnx8c2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQp0aGlzLl9pc1Nob3duPXRydWU7dGhpcy5fY2hlY2tTY3JvbGxiYXIoKTt0aGlzLl9zZXRTY3JvbGxiYXIoKTt0aGlzLl9hZGp1c3REaWFsb2coKTt0aGlzLl9zZXRFc2NhcGVFdmVudCgpO3RoaXMuX3NldFJlc2l6ZUV2ZW50KCk7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLFNlbGVjdG9yLkRBVEFfRElTTUlTUyxmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzLmhpZGUoZXZlbnQpO30pOyQodGhpcy5fZGlhbG9nKS5vbihFdmVudC5NT1VTRURPV05fRElTTUlTUyxmdW5jdGlvbigpeyQoX3RoaXMuX2VsZW1lbnQpLm9uZShFdmVudC5NT1VTRVVQX0RJU01JU1MsZnVuY3Rpb24oZXZlbnQpe2lmKCQoZXZlbnQudGFyZ2V0KS5pcyhfdGhpcy5fZWxlbWVudCkpe190aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrPXRydWU7fX0pO30pO3RoaXMuX3Nob3dCYWNrZHJvcChmdW5jdGlvbigpe3JldHVybiBfdGhpcy5fc2hvd0VsZW1lbnQocmVsYXRlZFRhcmdldCk7fSk7fTtfcHJvdG8uaGlkZT1mdW5jdGlvbiBoaWRlKGV2ZW50KXt2YXIgX3RoaXMyPXRoaXM7aWYoZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fQppZighdGhpcy5faXNTaG93bnx8dGhpcy5faXNUcmFuc2l0aW9uaW5nKXtyZXR1cm47fQp2YXIgaGlkZUV2ZW50PSQuRXZlbnQoRXZlbnQuSElERSk7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7aWYoIXRoaXMuX2lzU2hvd258fGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJuO30KdGhpcy5faXNTaG93bj1mYWxzZTt2YXIgdHJhbnNpdGlvbj0kKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtpZih0cmFuc2l0aW9uKXt0aGlzLl9pc1RyYW5zaXRpb25pbmc9dHJ1ZTt9CnRoaXMuX3NldEVzY2FwZUV2ZW50KCk7dGhpcy5fc2V0UmVzaXplRXZlbnQoKTskKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7JCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7JCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuQ0xJQ0tfRElTTUlTUyk7JCh0aGlzLl9kaWFsb2cpLm9mZihFdmVudC5NT1VTRURPV05fRElTTUlTUyk7aWYodHJhbnNpdGlvbil7dmFyIHRyYW5zaXRpb25EdXJhdGlvbj1VdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOyQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczIuX2hpZGVNb2RhbChldmVudCk7fSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTt9ZWxzZXt0aGlzLl9oaWRlTW9kYWwoKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7W3dpbmRvdyx0aGlzLl9lbGVtZW50LHRoaXMuX2RpYWxvZ10uZm9yRWFjaChmdW5jdGlvbihodG1sRWxlbWVudCl7cmV0dXJuICQoaHRtbEVsZW1lbnQpLm9mZihFVkVOVF9LRVkpO30pOyQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKTskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7dGhpcy5fY29uZmlnPW51bGw7dGhpcy5fZWxlbWVudD1udWxsO3RoaXMuX2RpYWxvZz1udWxsO3RoaXMuX2JhY2tkcm9wPW51bGw7dGhpcy5faXNTaG93bj1udWxsO3RoaXMuX2lzQm9keU92ZXJmbG93aW5nPW51bGw7dGhpcy5faWdub3JlQmFja2Ryb3BDbGljaz1udWxsO3RoaXMuX2lzVHJhbnNpdGlvbmluZz1udWxsO3RoaXMuX3Njcm9sbGJhcldpZHRoPW51bGw7fTtfcHJvdG8uaGFuZGxlVXBkYXRlPWZ1bmN0aW9uIGhhbmRsZVVwZGF0ZSgpe3RoaXMuX2FkanVzdERpYWxvZygpO307X3Byb3RvLl9nZXRDb25maWc9ZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpe2NvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LERlZmF1bHQsY29uZmlnKTtVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLGNvbmZpZyxEZWZhdWx0VHlwZSk7cmV0dXJuIGNvbmZpZzt9O19wcm90by5fc2hvd0VsZW1lbnQ9ZnVuY3Rpb24gX3Nob3dFbGVtZW50KHJlbGF0ZWRUYXJnZXQpe3ZhciBfdGhpczM9dGhpczt2YXIgdHJhbnNpdGlvbj0kKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtpZighdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlfHx0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERSl7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KTt9CnRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT0nYmxvY2snO3RoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO3RoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJyx0cnVlKTtpZigkKHRoaXMuX2RpYWxvZykuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNDUk9MTEFCTEUpKXt0aGlzLl9kaWFsb2cucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5NT0RBTF9CT0RZKS5zY3JvbGxUb3A9MDt9ZWxzZXt0aGlzLl9lbGVtZW50LnNjcm9sbFRvcD0wO30KaWYodHJhbnNpdGlvbil7VXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7fQokKHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKTtpZih0aGlzLl9jb25maWcuZm9jdXMpe3RoaXMuX2VuZm9yY2VGb2N1cygpO30KdmFyIHNob3duRXZlbnQ9JC5FdmVudChFdmVudC5TSE9XTix7cmVsYXRlZFRhcmdldDpyZWxhdGVkVGFyZ2V0fSk7dmFyIHRyYW5zaXRpb25Db21wbGV0ZT1mdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKXtpZihfdGhpczMuX2NvbmZpZy5mb2N1cyl7X3RoaXMzLl9lbGVtZW50LmZvY3VzKCk7fQpfdGhpczMuX2lzVHJhbnNpdGlvbmluZz1mYWxzZTskKF90aGlzMy5fZWxlbWVudCkudHJpZ2dlcihzaG93bkV2ZW50KTt9O2lmKHRyYW5zaXRpb24pe3ZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9kaWFsb2cpOyQodGhpcy5fZGlhbG9nKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCx0cmFuc2l0aW9uQ29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7dHJhbnNpdGlvbkNvbXBsZXRlKCk7fX07X3Byb3RvLl9lbmZvcmNlRm9jdXM9ZnVuY3Rpb24gX2VuZm9yY2VGb2N1cygpe3ZhciBfdGhpczQ9dGhpczskKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTikub24oRXZlbnQuRk9DVVNJTixmdW5jdGlvbihldmVudCl7aWYoZG9jdW1lbnQhPT1ldmVudC50YXJnZXQmJl90aGlzNC5fZWxlbWVudCE9PWV2ZW50LnRhcmdldCYmJChfdGhpczQuX2VsZW1lbnQpLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aD09PTApe190aGlzNC5fZWxlbWVudC5mb2N1cygpO319KTt9O19wcm90by5fc2V0RXNjYXBlRXZlbnQ9ZnVuY3Rpb24gX3NldEVzY2FwZUV2ZW50KCl7dmFyIF90aGlzNT10aGlzO2lmKHRoaXMuX2lzU2hvd24mJnRoaXMuX2NvbmZpZy5rZXlib2FyZCl7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5LRVlET1dOX0RJU01JU1MsZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LndoaWNoPT09RVNDQVBFX0tFWUNPREUpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7X3RoaXM1LmhpZGUoKTt9fSk7fWVsc2UgaWYoIXRoaXMuX2lzU2hvd24peyQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LktFWURPV05fRElTTUlTUyk7fX07X3Byb3RvLl9zZXRSZXNpemVFdmVudD1mdW5jdGlvbiBfc2V0UmVzaXplRXZlbnQoKXt2YXIgX3RoaXM2PXRoaXM7aWYodGhpcy5faXNTaG93bil7JCh3aW5kb3cpLm9uKEV2ZW50LlJFU0laRSxmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzNi5oYW5kbGVVcGRhdGUoZXZlbnQpO30pO31lbHNleyQod2luZG93KS5vZmYoRXZlbnQuUkVTSVpFKTt9fTtfcHJvdG8uX2hpZGVNb2RhbD1mdW5jdGlvbiBfaGlkZU1vZGFsKCl7dmFyIF90aGlzNz10aGlzO3RoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT0nbm9uZSc7dGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyx0cnVlKTt0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcpO3RoaXMuX2lzVHJhbnNpdGlvbmluZz1mYWxzZTt0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKXskKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5PUEVOKTtfdGhpczcuX3Jlc2V0QWRqdXN0bWVudHMoKTtfdGhpczcuX3Jlc2V0U2Nyb2xsYmFyKCk7JChfdGhpczcuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuSElEREVOKTt9KTt9O19wcm90by5fcmVtb3ZlQmFja2Ryb3A9ZnVuY3Rpb24gX3JlbW92ZUJhY2tkcm9wKCl7aWYodGhpcy5fYmFja2Ryb3ApeyQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZSgpO3RoaXMuX2JhY2tkcm9wPW51bGw7fX07X3Byb3RvLl9zaG93QmFja2Ryb3A9ZnVuY3Rpb24gX3Nob3dCYWNrZHJvcChjYWxsYmFjayl7dmFyIF90aGlzOD10aGlzO3ZhciBhbmltYXRlPSQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpP0NsYXNzTmFtZS5GQURFOicnO2lmKHRoaXMuX2lzU2hvd24mJnRoaXMuX2NvbmZpZy5iYWNrZHJvcCl7dGhpcy5fYmFja2Ryb3A9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7dGhpcy5fYmFja2Ryb3AuY2xhc3NOYW1lPUNsYXNzTmFtZS5CQUNLRFJPUDtpZihhbmltYXRlKXt0aGlzLl9iYWNrZHJvcC5jbGFzc0xpc3QuYWRkKGFuaW1hdGUpO30KJCh0aGlzLl9iYWNrZHJvcCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7JCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLGZ1bmN0aW9uKGV2ZW50KXtpZihfdGhpczguX2lnbm9yZUJhY2tkcm9wQ2xpY2spe190aGlzOC5faWdub3JlQmFja2Ryb3BDbGljaz1mYWxzZTtyZXR1cm47fQppZihldmVudC50YXJnZXQhPT1ldmVudC5jdXJyZW50VGFyZ2V0KXtyZXR1cm47fQppZihfdGhpczguX2NvbmZpZy5iYWNrZHJvcD09PSdzdGF0aWMnKXtfdGhpczguX2VsZW1lbnQuZm9jdXMoKTt9ZWxzZXtfdGhpczguaGlkZSgpO319KTtpZihhbmltYXRlKXtVdGlsLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCk7fQokKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoIWNhbGxiYWNrKXtyZXR1cm47fQppZighYW5pbWF0ZSl7Y2FsbGJhY2soKTtyZXR1cm47fQp2YXIgYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9iYWNrZHJvcCk7JCh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY2FsbGJhY2spLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGJhY2tkcm9wVHJhbnNpdGlvbkR1cmF0aW9uKTt9ZWxzZSBpZighdGhpcy5faXNTaG93biYmdGhpcy5fYmFja2Ryb3ApeyQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTt2YXIgY2FsbGJhY2tSZW1vdmU9ZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUoKXtfdGhpczguX3JlbW92ZUJhY2tkcm9wKCk7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX07aWYoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpe3ZhciBfYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9iYWNrZHJvcCk7JCh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY2FsbGJhY2tSZW1vdmUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKF9iYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7Y2FsbGJhY2tSZW1vdmUoKTt9fWVsc2UgaWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX07X3Byb3RvLl9hZGp1c3REaWFsb2c9ZnVuY3Rpb24gX2FkanVzdERpYWxvZygpe3ZhciBpc01vZGFsT3ZlcmZsb3dpbmc9dGhpcy5fZWxlbWVudC5zY3JvbGxIZWlnaHQ+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtpZighdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcmJmlzTW9kYWxPdmVyZmxvd2luZyl7dGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdD10aGlzLl9zY3JvbGxiYXJXaWR0aCsicHgiO30KaWYodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcmJiFpc01vZGFsT3ZlcmZsb3dpbmcpe3RoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0PXRoaXMuX3Njcm9sbGJhcldpZHRoKyJweCI7fX07X3Byb3RvLl9yZXNldEFkanVzdG1lbnRzPWZ1bmN0aW9uIF9yZXNldEFkanVzdG1lbnRzKCl7dGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdD0nJzt0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodD0nJzt9O19wcm90by5fY2hlY2tTY3JvbGxiYXI9ZnVuY3Rpb24gX2NoZWNrU2Nyb2xsYmFyKCl7dmFyIHJlY3Q9ZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLl9pc0JvZHlPdmVyZmxvd2luZz1yZWN0LmxlZnQrcmVjdC5yaWdodDx3aW5kb3cuaW5uZXJXaWR0aDt0aGlzLl9zY3JvbGxiYXJXaWR0aD10aGlzLl9nZXRTY3JvbGxiYXJXaWR0aCgpO307X3Byb3RvLl9zZXRTY3JvbGxiYXI9ZnVuY3Rpb24gX3NldFNjcm9sbGJhcigpe3ZhciBfdGhpczk9dGhpcztpZih0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyl7dmFyIGZpeGVkQ29udGVudD1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuRklYRURfQ09OVEVOVCkpO3ZhciBzdGlja3lDb250ZW50PVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5TVElDS1lfQ09OVEVOVCkpOyQoZml4ZWRDb250ZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpe3ZhciBhY3R1YWxQYWRkaW5nPWVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0O3ZhciBjYWxjdWxhdGVkUGFkZGluZz0kKGVsZW1lbnQpLmNzcygncGFkZGluZy1yaWdodCcpOyQoZWxlbWVudCkuZGF0YSgncGFkZGluZy1yaWdodCcsYWN0dWFsUGFkZGluZykuY3NzKCdwYWRkaW5nLXJpZ2h0JyxwYXJzZUZsb2F0KGNhbGN1bGF0ZWRQYWRkaW5nKStfdGhpczkuX3Njcm9sbGJhcldpZHRoKyJweCIpO30pOyQoc3RpY2t5Q29udGVudCkuZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXt2YXIgYWN0dWFsTWFyZ2luPWVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQ7dmFyIGNhbGN1bGF0ZWRNYXJnaW49JChlbGVtZW50KS5jc3MoJ21hcmdpbi1yaWdodCcpOyQoZWxlbWVudCkuZGF0YSgnbWFyZ2luLXJpZ2h0JyxhY3R1YWxNYXJnaW4pLmNzcygnbWFyZ2luLXJpZ2h0JyxwYXJzZUZsb2F0KGNhbGN1bGF0ZWRNYXJnaW4pLV90aGlzOS5fc2Nyb2xsYmFyV2lkdGgrInB4Iik7fSk7dmFyIGFjdHVhbFBhZGRpbmc9ZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQ7dmFyIGNhbGN1bGF0ZWRQYWRkaW5nPSQoZG9jdW1lbnQuYm9keSkuY3NzKCdwYWRkaW5nLXJpZ2h0Jyk7JChkb2N1bWVudC5ib2R5KS5kYXRhKCdwYWRkaW5nLXJpZ2h0JyxhY3R1YWxQYWRkaW5nKS5jc3MoJ3BhZGRpbmctcmlnaHQnLHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpK3RoaXMuX3Njcm9sbGJhcldpZHRoKyJweCIpO30KJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTik7fTtfcHJvdG8uX3Jlc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uIF9yZXNldFNjcm9sbGJhcigpe3ZhciBmaXhlZENvbnRlbnQ9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLkZJWEVEX0NPTlRFTlQpKTskKGZpeGVkQ29udGVudCkuZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXt2YXIgcGFkZGluZz0kKGVsZW1lbnQpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTskKGVsZW1lbnQpLnJlbW92ZURhdGEoJ3BhZGRpbmctcmlnaHQnKTtlbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodD1wYWRkaW5nP3BhZGRpbmc6Jyc7fSk7dmFyIGVsZW1lbnRzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiIitTZWxlY3Rvci5TVElDS1lfQ09OVEVOVCkpOyQoZWxlbWVudHMpLmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7dmFyIG1hcmdpbj0kKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcpO2lmKHR5cGVvZiBtYXJnaW4hPT0ndW5kZWZpbmVkJyl7JChlbGVtZW50KS5jc3MoJ21hcmdpbi1yaWdodCcsbWFyZ2luKS5yZW1vdmVEYXRhKCdtYXJnaW4tcmlnaHQnKTt9fSk7dmFyIHBhZGRpbmc9JChkb2N1bWVudC5ib2R5KS5kYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7JChkb2N1bWVudC5ib2R5KS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7ZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQ9cGFkZGluZz9wYWRkaW5nOicnO307X3Byb3RvLl9nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbiBfZ2V0U2Nyb2xsYmFyV2lkdGgoKXt2YXIgc2Nyb2xsRGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO3Njcm9sbERpdi5jbGFzc05hbWU9Q2xhc3NOYW1lLlNDUk9MTEJBUl9NRUFTVVJFUjtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7dmFyIHNjcm9sbGJhcldpZHRoPXNjcm9sbERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC1zY3JvbGxEaXYuY2xpZW50V2lkdGg7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO3JldHVybiBzY3JvbGxiYXJXaWR0aDt9O01vZGFsLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcscmVsYXRlZFRhcmdldCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LCQodGhpcykuZGF0YSgpLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYoIWRhdGEpe2RhdGE9bmV3IE1vZGFsKHRoaXMsX2NvbmZpZyk7JCh0aGlzKS5kYXRhKERBVEFfS0VZLGRhdGEpO30KaWYodHlwZW9mIGNvbmZpZz09PSdzdHJpbmcnKXtpZih0eXBlb2YgZGF0YVtjb25maWddPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIrY29uZmlnKyJcIiIpO30KZGF0YVtjb25maWddKHJlbGF0ZWRUYXJnZXQpO31lbHNlIGlmKF9jb25maWcuc2hvdyl7ZGF0YS5zaG93KHJlbGF0ZWRUYXJnZXQpO319KTt9O19jcmVhdGVDbGFzcyhNb2RhbCxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319XSk7cmV0dXJuIE1vZGFsO30oKTskKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSxTZWxlY3Rvci5EQVRBX1RPR0dMRSxmdW5jdGlvbihldmVudCl7dmFyIF90aGlzMTA9dGhpczt2YXIgdGFyZ2V0O3ZhciBzZWxlY3Rvcj1VdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7aWYoc2VsZWN0b3Ipe3RhcmdldD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTt9CnZhciBjb25maWc9JCh0YXJnZXQpLmRhdGEoREFUQV9LRVkpPyd0b2dnbGUnOl9vYmplY3RTcHJlYWQoe30sJCh0YXJnZXQpLmRhdGEoKSwkKHRoaXMpLmRhdGEoKSk7aWYodGhpcy50YWdOYW1lPT09J0EnfHx0aGlzLnRhZ05hbWU9PT0nQVJFQScpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fQp2YXIgJHRhcmdldD0kKHRhcmdldCkub25lKEV2ZW50LlNIT1csZnVuY3Rpb24oc2hvd0V2ZW50KXtpZihzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CiR0YXJnZXQub25lKEV2ZW50LkhJRERFTixmdW5jdGlvbigpe2lmKCQoX3RoaXMxMCkuaXMoJzp2aXNpYmxlJykpe190aGlzMTAuZm9jdXMoKTt9fSk7fSk7TW9kYWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSxjb25maWcsdGhpcyk7fSk7JC5mbltOQU1FXT1Nb2RhbC5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9TW9kYWw7JC5mbltOQU1FXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7JC5mbltOQU1FXT1KUVVFUllfTk9fQ09ORkxJQ1Q7cmV0dXJuIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gTW9kYWw7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvdG9vbHRpcC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgncG9wcGVyLmpzJykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJ3BvcHBlci5qcycsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5Ub29sdGlwPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuUG9wcGVyLGdsb2JhbC5VdGlsKSk7fSh0aGlzLGZ1bmN0aW9uKCQsUG9wcGVyLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtQb3BwZXI9UG9wcGVyJiZQb3BwZXIuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9Qb3BwZXJbJ2RlZmF1bHQnXTpQb3BwZXI7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fQpvd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fQpyZXR1cm4gdGFyZ2V0O30KdmFyIHVyaUF0dHJzPVsnYmFja2dyb3VuZCcsJ2NpdGUnLCdocmVmJywnaXRlbXR5cGUnLCdsb25nZGVzYycsJ3Bvc3RlcicsJ3NyYycsJ3hsaW5rOmhyZWYnXTt2YXIgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTj0vXmFyaWEtW1x3LV0qJC9pO3ZhciBEZWZhdWx0V2hpdGVsaXN0PXsnKic6WydjbGFzcycsJ2RpcicsJ2lkJywnbGFuZycsJ3JvbGUnLEFSSUFfQVRUUklCVVRFX1BBVFRFUk5dLGE6Wyd0YXJnZXQnLCdocmVmJywndGl0bGUnLCdyZWwnXSxhcmVhOltdLGI6W10sYnI6W10sY29sOltdLGNvZGU6W10sZGl2OltdLGVtOltdLGhyOltdLGgxOltdLGgyOltdLGgzOltdLGg0OltdLGg1OltdLGg2OltdLGk6W10saW1nOlsnc3JjJywnYWx0JywndGl0bGUnLCd3aWR0aCcsJ2hlaWdodCddLGxpOltdLG9sOltdLHA6W10scHJlOltdLHM6W10sc21hbGw6W10sc3BhbjpbXSxzdWI6W10sc3VwOltdLHN0cm9uZzpbXSx1OltdLHVsOltdfTt2YXIgU0FGRV9VUkxfUEFUVEVSTj0vXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwfHRlbHxmaWxlKTp8W14mOi8/I10qKD86Wy8/I118JCkpL2dpO3ZhciBEQVRBX1VSTF9QQVRURVJOPS9eZGF0YTooPzppbWFnZVwvKD86Ym1wfGdpZnxqcGVnfGpwZ3xwbmd8dGlmZnx3ZWJwKXx2aWRlb1wvKD86bXBlZ3xtcDR8b2dnfHdlYm0pfGF1ZGlvXC8oPzptcDN8b2dhfG9nZ3xvcHVzKSk7YmFzZTY0LFthLXowLTkrL10rPSokL2k7ZnVuY3Rpb24gYWxsb3dlZEF0dHJpYnV0ZShhdHRyLGFsbG93ZWRBdHRyaWJ1dGVMaXN0KXt2YXIgYXR0ck5hbWU9YXR0ci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGFsbG93ZWRBdHRyaWJ1dGVMaXN0LmluZGV4T2YoYXR0ck5hbWUpIT09LTEpe2lmKHVyaUF0dHJzLmluZGV4T2YoYXR0ck5hbWUpIT09LTEpe3JldHVybiBCb29sZWFuKGF0dHIubm9kZVZhbHVlLm1hdGNoKFNBRkVfVVJMX1BBVFRFUk4pfHxhdHRyLm5vZGVWYWx1ZS5tYXRjaChEQVRBX1VSTF9QQVRURVJOKSk7fQpyZXR1cm4gdHJ1ZTt9CnZhciByZWdFeHA9YWxsb3dlZEF0dHJpYnV0ZUxpc3QuZmlsdGVyKGZ1bmN0aW9uKGF0dHJSZWdleCl7cmV0dXJuIGF0dHJSZWdleCBpbnN0YW5jZW9mIFJlZ0V4cDt9KTtmb3IodmFyIGk9MCxsPXJlZ0V4cC5sZW5ndGg7aTxsO2krKyl7aWYoYXR0ck5hbWUubWF0Y2gocmVnRXhwW2ldKSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gc2FuaXRpemVIdG1sKHVuc2FmZUh0bWwsd2hpdGVMaXN0LHNhbml0aXplRm4pe2lmKHVuc2FmZUh0bWwubGVuZ3RoPT09MCl7cmV0dXJuIHVuc2FmZUh0bWw7fQppZihzYW5pdGl6ZUZuJiZ0eXBlb2Ygc2FuaXRpemVGbj09PSdmdW5jdGlvbicpe3JldHVybiBzYW5pdGl6ZUZuKHVuc2FmZUh0bWwpO30KdmFyIGRvbVBhcnNlcj1uZXcgd2luZG93LkRPTVBhcnNlcigpO3ZhciBjcmVhdGVkRG9jdW1lbnQ9ZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyh1bnNhZmVIdG1sLCd0ZXh0L2h0bWwnKTt2YXIgd2hpdGVsaXN0S2V5cz1PYmplY3Qua2V5cyh3aGl0ZUxpc3QpO3ZhciBlbGVtZW50cz1bXS5zbGljZS5jYWxsKGNyZWF0ZWREb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSk7dmFyIF9sb29wPWZ1bmN0aW9uIF9sb29wKGksbGVuKXt2YXIgZWw9ZWxlbWVudHNbaV07dmFyIGVsTmFtZT1lbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHdoaXRlbGlzdEtleXMuaW5kZXhPZihlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKT09PS0xKXtlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtyZXR1cm4iY29udGludWUiO30KdmFyIGF0dHJpYnV0ZUxpc3Q9W10uc2xpY2UuY2FsbChlbC5hdHRyaWJ1dGVzKTt2YXIgd2hpdGVsaXN0ZWRBdHRyaWJ1dGVzPVtdLmNvbmNhdCh3aGl0ZUxpc3RbJyonXXx8W10sd2hpdGVMaXN0W2VsTmFtZV18fFtdKTthdHRyaWJ1dGVMaXN0LmZvckVhY2goZnVuY3Rpb24oYXR0cil7aWYoIWFsbG93ZWRBdHRyaWJ1dGUoYXR0cix3aGl0ZWxpc3RlZEF0dHJpYnV0ZXMpKXtlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5ub2RlTmFtZSk7fX0pO307Zm9yKHZhciBpPTAsbGVuPWVsZW1lbnRzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBfcmV0PV9sb29wKGksbGVuKTtpZihfcmV0PT09ImNvbnRpbnVlIiljb250aW51ZTt9CnJldHVybiBjcmVhdGVkRG9jdW1lbnQuYm9keS5pbm5lckhUTUw7fQp2YXIgTkFNRT0ndG9vbHRpcCc7dmFyIFZFUlNJT049JzQuMy4xJzt2YXIgREFUQV9LRVk9J2JzLnRvb2x0aXAnO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgQ0xBU1NfUFJFRklYPSdicy10b29sdGlwJzt2YXIgQlNDTFNfUFJFRklYX1JFR0VYPW5ldyBSZWdFeHAoIihefFxccykiK0NMQVNTX1BSRUZJWCsiXFxTKyIsJ2cnKTt2YXIgRElTQUxMT1dFRF9BVFRSSUJVVEVTPVsnc2FuaXRpemUnLCd3aGl0ZUxpc3QnLCdzYW5pdGl6ZUZuJ107dmFyIERlZmF1bHRUeXBlPXthbmltYXRpb246J2Jvb2xlYW4nLHRlbXBsYXRlOidzdHJpbmcnLHRpdGxlOicoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJyx0cmlnZ2VyOidzdHJpbmcnLGRlbGF5OicobnVtYmVyfG9iamVjdCknLGh0bWw6J2Jvb2xlYW4nLHNlbGVjdG9yOicoc3RyaW5nfGJvb2xlYW4pJyxwbGFjZW1lbnQ6JyhzdHJpbmd8ZnVuY3Rpb24pJyxvZmZzZXQ6JyhudW1iZXJ8c3RyaW5nfGZ1bmN0aW9uKScsY29udGFpbmVyOicoc3RyaW5nfGVsZW1lbnR8Ym9vbGVhbiknLGZhbGxiYWNrUGxhY2VtZW50Oicoc3RyaW5nfGFycmF5KScsYm91bmRhcnk6JyhzdHJpbmd8ZWxlbWVudCknLHNhbml0aXplOidib29sZWFuJyxzYW5pdGl6ZUZuOicobnVsbHxmdW5jdGlvbiknLHdoaXRlTGlzdDonb2JqZWN0J307dmFyIEF0dGFjaG1lbnRNYXA9e0FVVE86J2F1dG8nLFRPUDondG9wJyxSSUdIVDoncmlnaHQnLEJPVFRPTTonYm90dG9tJyxMRUZUOidsZWZ0J307dmFyIERlZmF1bHQ9e2FuaW1hdGlvbjp0cnVlLHRlbXBsYXRlOic8ZGl2IGNsYXNzPSJ0b29sdGlwIiByb2xlPSJ0b29sdGlwIj4nKyc8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+JysnPGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOidob3ZlciBmb2N1cycsdGl0bGU6JycsZGVsYXk6MCxodG1sOmZhbHNlLHNlbGVjdG9yOmZhbHNlLHBsYWNlbWVudDondG9wJyxvZmZzZXQ6MCxjb250YWluZXI6ZmFsc2UsZmFsbGJhY2tQbGFjZW1lbnQ6J2ZsaXAnLGJvdW5kYXJ5OidzY3JvbGxQYXJlbnQnLHNhbml0aXplOnRydWUsc2FuaXRpemVGbjpudWxsLHdoaXRlTGlzdDpEZWZhdWx0V2hpdGVsaXN0fTt2YXIgSG92ZXJTdGF0ZT17U0hPVzonc2hvdycsT1VUOidvdXQnfTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxJTlNFUlRFRDoiaW5zZXJ0ZWQiK0VWRU5UX0tFWSxDTElDSzoiY2xpY2siK0VWRU5UX0tFWSxGT0NVU0lOOiJmb2N1c2luIitFVkVOVF9LRVksRk9DVVNPVVQ6ImZvY3Vzb3V0IitFVkVOVF9LRVksTU9VU0VFTlRFUjoibW91c2VlbnRlciIrRVZFTlRfS0VZLE1PVVNFTEVBVkU6Im1vdXNlbGVhdmUiK0VWRU5UX0tFWX07dmFyIENsYXNzTmFtZT17RkFERTonZmFkZScsU0hPVzonc2hvdyd9O3ZhciBTZWxlY3Rvcj17VE9PTFRJUDonLnRvb2x0aXAnLFRPT0xUSVBfSU5ORVI6Jy50b29sdGlwLWlubmVyJyxBUlJPVzonLmFycm93J307dmFyIFRyaWdnZXI9e0hPVkVSOidob3ZlcicsRk9DVVM6J2ZvY3VzJyxDTElDSzonY2xpY2snLE1BTlVBTDonbWFudWFsJ307dmFyIFRvb2x0aXA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBUb29sdGlwKGVsZW1lbnQsY29uZmlnKXtpZih0eXBlb2YgUG9wcGVyPT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFwncyB0b29sdGlwcyByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnLyknKTt9CnRoaXMuX2lzRW5hYmxlZD10cnVlO3RoaXMuX3RpbWVvdXQ9MDt0aGlzLl9ob3ZlclN0YXRlPScnO3RoaXMuX2FjdGl2ZVRyaWdnZXI9e307dGhpcy5fcG9wcGVyPW51bGw7dGhpcy5lbGVtZW50PWVsZW1lbnQ7dGhpcy5jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7dGhpcy50aXA9bnVsbDt0aGlzLl9zZXRMaXN0ZW5lcnMoKTt9CnZhciBfcHJvdG89VG9vbHRpcC5wcm90b3R5cGU7X3Byb3RvLmVuYWJsZT1mdW5jdGlvbiBlbmFibGUoKXt0aGlzLl9pc0VuYWJsZWQ9dHJ1ZTt9O19wcm90by5kaXNhYmxlPWZ1bmN0aW9uIGRpc2FibGUoKXt0aGlzLl9pc0VuYWJsZWQ9ZmFsc2U7fTtfcHJvdG8udG9nZ2xlRW5hYmxlZD1mdW5jdGlvbiB0b2dnbGVFbmFibGVkKCl7dGhpcy5faXNFbmFibGVkPSF0aGlzLl9pc0VuYWJsZWQ7fTtfcHJvdG8udG9nZ2xlPWZ1bmN0aW9uIHRvZ2dsZShldmVudCl7aWYoIXRoaXMuX2lzRW5hYmxlZCl7cmV0dXJuO30KaWYoZXZlbnQpe3ZhciBkYXRhS2V5PXRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7dmFyIGNvbnRleHQ9JChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXkpO2lmKCFjb250ZXh0KXtjb250ZXh0PW5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7JChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksY29udGV4dCk7fQpjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrPSFjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrO2lmKGNvbnRleHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSl7Y29udGV4dC5fZW50ZXIobnVsbCxjb250ZXh0KTt9ZWxzZXtjb250ZXh0Ll9sZWF2ZShudWxsLGNvbnRleHQpO319ZWxzZXtpZigkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpe3RoaXMuX2xlYXZlKG51bGwsdGhpcyk7cmV0dXJuO30KdGhpcy5fZW50ZXIobnVsbCx0aGlzKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpOyQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7JCh0aGlzLmVsZW1lbnQpLm9mZih0aGlzLmNvbnN0cnVjdG9yLkVWRU5UX0tFWSk7JCh0aGlzLmVsZW1lbnQpLmNsb3Nlc3QoJy5tb2RhbCcpLm9mZignaGlkZS5icy5tb2RhbCcpO2lmKHRoaXMudGlwKXskKHRoaXMudGlwKS5yZW1vdmUoKTt9CnRoaXMuX2lzRW5hYmxlZD1udWxsO3RoaXMuX3RpbWVvdXQ9bnVsbDt0aGlzLl9ob3ZlclN0YXRlPW51bGw7dGhpcy5fYWN0aXZlVHJpZ2dlcj1udWxsO2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5kZXN0cm95KCk7fQp0aGlzLl9wb3BwZXI9bnVsbDt0aGlzLmVsZW1lbnQ9bnVsbDt0aGlzLmNvbmZpZz1udWxsO3RoaXMudGlwPW51bGw7fTtfcHJvdG8uc2hvdz1mdW5jdGlvbiBzaG93KCl7dmFyIF90aGlzPXRoaXM7aWYoJCh0aGlzLmVsZW1lbnQpLmNzcygnZGlzcGxheScpPT09J25vbmUnKXt0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzJyk7fQp2YXIgc2hvd0V2ZW50PSQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtpZih0aGlzLmlzV2l0aENvbnRlbnQoKSYmdGhpcy5faXNFbmFibGVkKXskKHRoaXMuZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO3ZhciBzaGFkb3dSb290PVV0aWwuZmluZFNoYWRvd1Jvb3QodGhpcy5lbGVtZW50KTt2YXIgaXNJblRoZURvbT0kLmNvbnRhaW5zKHNoYWRvd1Jvb3QhPT1udWxsP3NoYWRvd1Jvb3Q6dGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuZWxlbWVudCk7aWYoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhaXNJblRoZURvbSl7cmV0dXJuO30KdmFyIHRpcD10aGlzLmdldFRpcEVsZW1lbnQoKTt2YXIgdGlwSWQ9VXRpbC5nZXRVSUQodGhpcy5jb25zdHJ1Y3Rvci5OQU1FKTt0aXAuc2V0QXR0cmlidXRlKCdpZCcsdGlwSWQpO3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLHRpcElkKTt0aGlzLnNldENvbnRlbnQoKTtpZih0aGlzLmNvbmZpZy5hbmltYXRpb24peyQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuRkFERSk7fQp2YXIgcGxhY2VtZW50PXR5cGVvZiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQ9PT0nZnVuY3Rpb24nP3RoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMsdGlwLHRoaXMuZWxlbWVudCk6dGhpcy5jb25maWcucGxhY2VtZW50O3ZhciBhdHRhY2htZW50PXRoaXMuX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KTt0aGlzLmFkZEF0dGFjaG1lbnRDbGFzcyhhdHRhY2htZW50KTt2YXIgY29udGFpbmVyPXRoaXMuX2dldENvbnRhaW5lcigpOyQodGlwKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksdGhpcyk7aWYoISQuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMudGlwKSl7JCh0aXApLmFwcGVuZFRvKGNvbnRhaW5lcik7fQokKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKTt0aGlzLl9wb3BwZXI9bmV3IFBvcHBlcih0aGlzLmVsZW1lbnQsdGlwLHtwbGFjZW1lbnQ6YXR0YWNobWVudCxtb2RpZmllcnM6e29mZnNldDp0aGlzLl9nZXRPZmZzZXQoKSxmbGlwOntiZWhhdmlvcjp0aGlzLmNvbmZpZy5mYWxsYmFja1BsYWNlbWVudH0sYXJyb3c6e2VsZW1lbnQ6U2VsZWN0b3IuQVJST1d9LHByZXZlbnRPdmVyZmxvdzp7Ym91bmRhcmllc0VsZW1lbnQ6dGhpcy5jb25maWcuYm91bmRhcnl9fSxvbkNyZWF0ZTpmdW5jdGlvbiBvbkNyZWF0ZShkYXRhKXtpZihkYXRhLm9yaWdpbmFsUGxhY2VtZW50IT09ZGF0YS5wbGFjZW1lbnQpe190aGlzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSk7fX0sb25VcGRhdGU6ZnVuY3Rpb24gb25VcGRhdGUoZGF0YSl7cmV0dXJuIF90aGlzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSk7fX0pOyQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJyxudWxsLCQubm9vcCk7fQp2YXIgY29tcGxldGU9ZnVuY3Rpb24gY29tcGxldGUoKXtpZihfdGhpcy5jb25maWcuYW5pbWF0aW9uKXtfdGhpcy5fZml4VHJhbnNpdGlvbigpO30KdmFyIHByZXZIb3ZlclN0YXRlPV90aGlzLl9ob3ZlclN0YXRlO190aGlzLl9ob3ZlclN0YXRlPW51bGw7JChfdGhpcy5lbGVtZW50KS50cmlnZ2VyKF90aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKTtpZihwcmV2SG92ZXJTdGF0ZT09PUhvdmVyU3RhdGUuT1VUKXtfdGhpcy5fbGVhdmUobnVsbCxfdGhpcyk7fX07aWYoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy50aXApOyQodGhpcy50aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NvbXBsZXRlKCk7fX19O19wcm90by5oaWRlPWZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spe3ZhciBfdGhpczI9dGhpczt2YXIgdGlwPXRoaXMuZ2V0VGlwRWxlbWVudCgpO3ZhciBoaWRlRXZlbnQ9JC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpO3ZhciBjb21wbGV0ZT1mdW5jdGlvbiBjb21wbGV0ZSgpe2lmKF90aGlzMi5faG92ZXJTdGF0ZSE9PUhvdmVyU3RhdGUuU0hPVyYmdGlwLnBhcmVudE5vZGUpe3RpcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRpcCk7fQpfdGhpczIuX2NsZWFuVGlwQ2xhc3MoKTtfdGhpczIuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTskKF90aGlzMi5lbGVtZW50KS50cmlnZ2VyKF90aGlzMi5jb25zdHJ1Y3Rvci5FdmVudC5ISURERU4pO2lmKF90aGlzMi5fcG9wcGVyIT09bnVsbCl7X3RoaXMyLl9wb3BwZXIuZGVzdHJveSgpO30KaWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX07JCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtpZihoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CiQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7aWYoJ29udG91Y2hzdGFydCdpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpeyQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vZmYoJ21vdXNlb3ZlcicsbnVsbCwkLm5vb3ApO30KdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkNMSUNLXT1mYWxzZTt0aGlzLl9hY3RpdmVUcmlnZ2VyW1RyaWdnZXIuRk9DVVNdPWZhbHNlO3RoaXMuX2FjdGl2ZVRyaWdnZXJbVHJpZ2dlci5IT1ZFUl09ZmFsc2U7aWYoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGlwKTskKHRpcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7Y29tcGxldGUoKTt9CnRoaXMuX2hvdmVyU3RhdGU9Jyc7fTtfcHJvdG8udXBkYXRlPWZ1bmN0aW9uIHVwZGF0ZSgpe2lmKHRoaXMuX3BvcHBlciE9PW51bGwpe3RoaXMuX3BvcHBlci5zY2hlZHVsZVVwZGF0ZSgpO319O19wcm90by5pc1dpdGhDb250ZW50PWZ1bmN0aW9uIGlzV2l0aENvbnRlbnQoKXtyZXR1cm4gQm9vbGVhbih0aGlzLmdldFRpdGxlKCkpO307X3Byb3RvLmFkZEF0dGFjaG1lbnRDbGFzcz1mdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCl7JCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYKyItIithdHRhY2htZW50KTt9O19wcm90by5nZXRUaXBFbGVtZW50PWZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKXt0aGlzLnRpcD10aGlzLnRpcHx8JCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07cmV0dXJuIHRoaXMudGlwO307X3Byb3RvLnNldENvbnRlbnQ9ZnVuY3Rpb24gc2V0Q29udGVudCgpe3ZhciB0aXA9dGhpcy5nZXRUaXBFbGVtZW50KCk7dGhpcy5zZXRFbGVtZW50Q29udGVudCgkKHRpcC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlRPT0xUSVBfSU5ORVIpKSx0aGlzLmdldFRpdGxlKCkpOyQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuRkFERSsiICIrQ2xhc3NOYW1lLlNIT1cpO307X3Byb3RvLnNldEVsZW1lbnRDb250ZW50PWZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LGNvbnRlbnQpe2lmKHR5cGVvZiBjb250ZW50PT09J29iamVjdCcmJihjb250ZW50Lm5vZGVUeXBlfHxjb250ZW50LmpxdWVyeSkpe2lmKHRoaXMuY29uZmlnLmh0bWwpe2lmKCEkKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSl7JGVsZW1lbnQuZW1wdHkoKS5hcHBlbmQoY29udGVudCk7fX1lbHNleyRlbGVtZW50LnRleHQoJChjb250ZW50KS50ZXh0KCkpO30KcmV0dXJuO30KaWYodGhpcy5jb25maWcuaHRtbCl7aWYodGhpcy5jb25maWcuc2FuaXRpemUpe2NvbnRlbnQ9c2FuaXRpemVIdG1sKGNvbnRlbnQsdGhpcy5jb25maWcud2hpdGVMaXN0LHRoaXMuY29uZmlnLnNhbml0aXplRm4pO30KJGVsZW1lbnQuaHRtbChjb250ZW50KTt9ZWxzZXskZWxlbWVudC50ZXh0KGNvbnRlbnQpO319O19wcm90by5nZXRUaXRsZT1mdW5jdGlvbiBnZXRUaXRsZSgpe3ZhciB0aXRsZT10aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7aWYoIXRpdGxlKXt0aXRsZT10eXBlb2YgdGhpcy5jb25maWcudGl0bGU9PT0nZnVuY3Rpb24nP3RoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KTp0aGlzLmNvbmZpZy50aXRsZTt9CnJldHVybiB0aXRsZTt9O19wcm90by5fZ2V0T2Zmc2V0PWZ1bmN0aW9uIF9nZXRPZmZzZXQoKXt2YXIgX3RoaXMzPXRoaXM7dmFyIG9mZnNldD17fTtpZih0eXBlb2YgdGhpcy5jb25maWcub2Zmc2V0PT09J2Z1bmN0aW9uJyl7b2Zmc2V0LmZuPWZ1bmN0aW9uKGRhdGEpe2RhdGEub2Zmc2V0cz1fb2JqZWN0U3ByZWFkKHt9LGRhdGEub2Zmc2V0cyxfdGhpczMuY29uZmlnLm9mZnNldChkYXRhLm9mZnNldHMsX3RoaXMzLmVsZW1lbnQpfHx7fSk7cmV0dXJuIGRhdGE7fTt9ZWxzZXtvZmZzZXQub2Zmc2V0PXRoaXMuY29uZmlnLm9mZnNldDt9CnJldHVybiBvZmZzZXQ7fTtfcHJvdG8uX2dldENvbnRhaW5lcj1mdW5jdGlvbiBfZ2V0Q29udGFpbmVyKCl7aWYodGhpcy5jb25maWcuY29udGFpbmVyPT09ZmFsc2Upe3JldHVybiBkb2N1bWVudC5ib2R5O30KaWYoVXRpbC5pc0VsZW1lbnQodGhpcy5jb25maWcuY29udGFpbmVyKSl7cmV0dXJuICQodGhpcy5jb25maWcuY29udGFpbmVyKTt9CnJldHVybiAkKGRvY3VtZW50KS5maW5kKHRoaXMuY29uZmlnLmNvbnRhaW5lcik7fTtfcHJvdG8uX2dldEF0dGFjaG1lbnQ9ZnVuY3Rpb24gX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KXtyZXR1cm4gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07fTtfcHJvdG8uX3NldExpc3RlbmVycz1mdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCl7dmFyIF90aGlzND10aGlzO3ZhciB0cmlnZ2Vycz10aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7dHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbih0cmlnZ2VyKXtpZih0cmlnZ2VyPT09J2NsaWNrJyl7JChfdGhpczQuZWxlbWVudCkub24oX3RoaXM0LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLF90aGlzNC5jb25maWcuc2VsZWN0b3IsZnVuY3Rpb24oZXZlbnQpe3JldHVybiBfdGhpczQudG9nZ2xlKGV2ZW50KTt9KTt9ZWxzZSBpZih0cmlnZ2VyIT09VHJpZ2dlci5NQU5VQUwpe3ZhciBldmVudEluPXRyaWdnZXI9PT1UcmlnZ2VyLkhPVkVSP190aGlzNC5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUVOVEVSOl90aGlzNC5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU0lOO3ZhciBldmVudE91dD10cmlnZ2VyPT09VHJpZ2dlci5IT1ZFUj9fdGhpczQuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VMRUFWRTpfdGhpczQuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNPVVQ7JChfdGhpczQuZWxlbWVudCkub24oZXZlbnRJbixfdGhpczQuY29uZmlnLnNlbGVjdG9yLGZ1bmN0aW9uKGV2ZW50KXtyZXR1cm4gX3RoaXM0Ll9lbnRlcihldmVudCk7fSkub24oZXZlbnRPdXQsX3RoaXM0LmNvbmZpZy5zZWxlY3RvcixmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzNC5fbGVhdmUoZXZlbnQpO30pO319KTskKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oJ2hpZGUuYnMubW9kYWwnLGZ1bmN0aW9uKCl7aWYoX3RoaXM0LmVsZW1lbnQpe190aGlzNC5oaWRlKCk7fX0pO2lmKHRoaXMuY29uZmlnLnNlbGVjdG9yKXt0aGlzLmNvbmZpZz1fb2JqZWN0U3ByZWFkKHt9LHRoaXMuY29uZmlnLHt0cmlnZ2VyOidtYW51YWwnLHNlbGVjdG9yOicnfSk7fWVsc2V7dGhpcy5fZml4VGl0bGUoKTt9fTtfcHJvdG8uX2ZpeFRpdGxlPWZ1bmN0aW9uIF9maXhUaXRsZSgpe3ZhciB0aXRsZVR5cGU9dHlwZW9mIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtpZih0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpfHx0aXRsZVR5cGUhPT0nc3RyaW5nJyl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScsdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKXx8JycpO3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywnJyk7fX07X3Byb3RvLl9lbnRlcj1mdW5jdGlvbiBfZW50ZXIoZXZlbnQsY29udGV4dCl7dmFyIGRhdGFLZXk9dGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtjb250ZXh0PWNvbnRleHR8fCQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtpZighY29udGV4dCl7Y29udGV4dD1uZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpOyQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LGNvbnRleHQpO30KaWYoZXZlbnQpe2NvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZT09PSdmb2N1c2luJz9UcmlnZ2VyLkZPQ1VTOlRyaWdnZXIuSE9WRVJdPXRydWU7fQppZigkKGNvbnRleHQuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVyl8fGNvbnRleHQuX2hvdmVyU3RhdGU9PT1Ib3ZlclN0YXRlLlNIT1cpe2NvbnRleHQuX2hvdmVyU3RhdGU9SG92ZXJTdGF0ZS5TSE9XO3JldHVybjt9CmNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtjb250ZXh0Ll9ob3ZlclN0YXRlPUhvdmVyU3RhdGUuU0hPVztpZighY29udGV4dC5jb25maWcuZGVsYXl8fCFjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KXtjb250ZXh0LnNob3coKTtyZXR1cm47fQpjb250ZXh0Ll90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihjb250ZXh0Ll9ob3ZlclN0YXRlPT09SG92ZXJTdGF0ZS5TSE9XKXtjb250ZXh0LnNob3coKTt9fSxjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTt9O19wcm90by5fbGVhdmU9ZnVuY3Rpb24gX2xlYXZlKGV2ZW50LGNvbnRleHQpe3ZhciBkYXRhS2V5PXRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7Y29udGV4dD1jb250ZXh0fHwkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7aWYoIWNvbnRleHQpe2NvbnRleHQ9bmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCx0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTskKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSxjb250ZXh0KTt9CmlmKGV2ZW50KXtjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGU9PT0nZm9jdXNvdXQnP1RyaWdnZXIuRk9DVVM6VHJpZ2dlci5IT1ZFUl09ZmFsc2U7fQppZihjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpe3JldHVybjt9CmNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtjb250ZXh0Ll9ob3ZlclN0YXRlPUhvdmVyU3RhdGUuT1VUO2lmKCFjb250ZXh0LmNvbmZpZy5kZWxheXx8IWNvbnRleHQuY29uZmlnLmRlbGF5LmhpZGUpe2NvbnRleHQuaGlkZSgpO3JldHVybjt9CmNvbnRleHQuX3RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGNvbnRleHQuX2hvdmVyU3RhdGU9PT1Ib3ZlclN0YXRlLk9VVCl7Y29udGV4dC5oaWRlKCk7fX0sY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSk7fTtfcHJvdG8uX2lzV2l0aEFjdGl2ZVRyaWdnZXI9ZnVuY3Rpb24gX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKXtmb3IodmFyIHRyaWdnZXIgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcil7aWYodGhpcy5fYWN0aXZlVHJpZ2dlclt0cmlnZ2VyXSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO307X3Byb3RvLl9nZXRDb25maWc9ZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpe3ZhciBkYXRhQXR0cmlidXRlcz0kKHRoaXMuZWxlbWVudCkuZGF0YSgpO09iamVjdC5rZXlzKGRhdGFBdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGFBdHRyKXtpZihESVNBTExPV0VEX0FUVFJJQlVURVMuaW5kZXhPZihkYXRhQXR0cikhPT0tMSl7ZGVsZXRlIGRhdGFBdHRyaWJ1dGVzW2RhdGFBdHRyXTt9fSk7Y29uZmlnPV9vYmplY3RTcHJlYWQoe30sdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LGRhdGFBdHRyaWJ1dGVzLHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYodHlwZW9mIGNvbmZpZy5kZWxheT09PSdudW1iZXInKXtjb25maWcuZGVsYXk9e3Nob3c6Y29uZmlnLmRlbGF5LGhpZGU6Y29uZmlnLmRlbGF5fTt9CmlmKHR5cGVvZiBjb25maWcudGl0bGU9PT0nbnVtYmVyJyl7Y29uZmlnLnRpdGxlPWNvbmZpZy50aXRsZS50b1N0cmluZygpO30KaWYodHlwZW9mIGNvbmZpZy5jb250ZW50PT09J251bWJlcicpe2NvbmZpZy5jb250ZW50PWNvbmZpZy5jb250ZW50LnRvU3RyaW5nKCk7fQpVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLGNvbmZpZyx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKTtpZihjb25maWcuc2FuaXRpemUpe2NvbmZpZy50ZW1wbGF0ZT1zYW5pdGl6ZUh0bWwoY29uZmlnLnRlbXBsYXRlLGNvbmZpZy53aGl0ZUxpc3QsY29uZmlnLnNhbml0aXplRm4pO30KcmV0dXJuIGNvbmZpZzt9O19wcm90by5fZ2V0RGVsZWdhdGVDb25maWc9ZnVuY3Rpb24gX2dldERlbGVnYXRlQ29uZmlnKCl7dmFyIGNvbmZpZz17fTtpZih0aGlzLmNvbmZpZyl7Zm9yKHZhciBrZXkgaW4gdGhpcy5jb25maWcpe2lmKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldIT09dGhpcy5jb25maWdba2V5XSl7Y29uZmlnW2tleV09dGhpcy5jb25maWdba2V5XTt9fX0KcmV0dXJuIGNvbmZpZzt9O19wcm90by5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbiBfY2xlYW5UaXBDbGFzcygpe3ZhciAkdGlwPSQodGhpcy5nZXRUaXBFbGVtZW50KCkpO3ZhciB0YWJDbGFzcz0kdGlwLmF0dHIoJ2NsYXNzJykubWF0Y2goQlNDTFNfUFJFRklYX1JFR0VYKTtpZih0YWJDbGFzcyE9PW51bGwmJnRhYkNsYXNzLmxlbmd0aCl7JHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7fX07X3Byb3RvLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2U9ZnVuY3Rpb24gX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShwb3BwZXJEYXRhKXt2YXIgcG9wcGVySW5zdGFuY2U9cG9wcGVyRGF0YS5pbnN0YW5jZTt0aGlzLnRpcD1wb3BwZXJJbnN0YW5jZS5wb3BwZXI7dGhpcy5fY2xlYW5UaXBDbGFzcygpO3RoaXMuYWRkQXR0YWNobWVudENsYXNzKHRoaXMuX2dldEF0dGFjaG1lbnQocG9wcGVyRGF0YS5wbGFjZW1lbnQpKTt9O19wcm90by5fZml4VHJhbnNpdGlvbj1mdW5jdGlvbiBfZml4VHJhbnNpdGlvbigpe3ZhciB0aXA9dGhpcy5nZXRUaXBFbGVtZW50KCk7dmFyIGluaXRDb25maWdBbmltYXRpb249dGhpcy5jb25maWcuYW5pbWF0aW9uO2lmKHRpcC5nZXRBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50JykhPT1udWxsKXtyZXR1cm47fQokKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO3RoaXMuY29uZmlnLmFuaW1hdGlvbj1mYWxzZTt0aGlzLmhpZGUoKTt0aGlzLnNob3coKTt0aGlzLmNvbmZpZy5hbmltYXRpb249aW5pdENvbmZpZ0FuaW1hdGlvbjt9O1Rvb2x0aXAuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9dHlwZW9mIGNvbmZpZz09PSdvYmplY3QnJiZjb25maWc7aWYoIWRhdGEmJi9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSl7cmV0dXJuO30KaWYoIWRhdGEpe2RhdGE9bmV3IFRvb2x0aXAodGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2NvbmZpZ109PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIitjb25maWcrIlwiIik7fQpkYXRhW2NvbmZpZ10oKTt9fSk7fTtfY3JlYXRlQ2xhc3MoVG9vbHRpcCxudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319LHtrZXk6Ik5BTUUiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gTkFNRTt9fSx7a2V5OiJEQVRBX0tFWSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEQVRBX0tFWTt9fSx7a2V5OiJFdmVudCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBFdmVudDt9fSx7a2V5OiJFVkVOVF9LRVkiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRVZFTlRfS0VZO319LHtrZXk6IkRlZmF1bHRUeXBlIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHRUeXBlO319XSk7cmV0dXJuIFRvb2x0aXA7fSgpOyQuZm5bTkFNRV09VG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9VG9vbHRpcDskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlO307cmV0dXJuIFRvb2x0aXA7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvcG9wb3Zlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgnLi90b29sdGlwLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJy4vdG9vbHRpcC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5Qb3BvdmVyPWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVG9vbHRpcCkpO30odGhpcyxmdW5jdGlvbigkLFRvb2x0aXApeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtUb29sdGlwPVRvb2x0aXAmJlRvb2x0aXAuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9Ub29sdGlwWydkZWZhdWx0J106VG9vbHRpcDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQpmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcyxzdXBlckNsYXNzKXtzdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7c3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yPXN1YkNsYXNzO3N1YkNsYXNzLl9fcHJvdG9fXz1zdXBlckNsYXNzO30KdmFyIE5BTUU9J3BvcG92ZXInO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5wb3BvdmVyJzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgSlFVRVJZX05PX0NPTkZMSUNUPSQuZm5bTkFNRV07dmFyIENMQVNTX1BSRUZJWD0nYnMtcG9wb3Zlcic7dmFyIEJTQ0xTX1BSRUZJWF9SRUdFWD1uZXcgUmVnRXhwKCIoXnxcXHMpIitDTEFTU19QUkVGSVgrIlxcUysiLCdnJyk7dmFyIERlZmF1bHQ9X29iamVjdFNwcmVhZCh7fSxUb29sdGlwLkRlZmF1bHQse3BsYWNlbWVudDoncmlnaHQnLHRyaWdnZXI6J2NsaWNrJyxjb250ZW50OicnLHRlbXBsYXRlOic8ZGl2IGNsYXNzPSJwb3BvdmVyIiByb2xlPSJ0b29sdGlwIj4nKyc8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+JysnPGgzIGNsYXNzPSJwb3BvdmVyLWhlYWRlciI+PC9oMz4nKyc8ZGl2IGNsYXNzPSJwb3BvdmVyLWJvZHkiPjwvZGl2PjwvZGl2Pid9KTt2YXIgRGVmYXVsdFR5cGU9X29iamVjdFNwcmVhZCh7fSxUb29sdGlwLkRlZmF1bHRUeXBlLHtjb250ZW50Oicoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJ30pO3ZhciBDbGFzc05hbWU9e0ZBREU6J2ZhZGUnLFNIT1c6J3Nob3cnfTt2YXIgU2VsZWN0b3I9e1RJVExFOicucG9wb3Zlci1oZWFkZXInLENPTlRFTlQ6Jy5wb3BvdmVyLWJvZHknfTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxJTlNFUlRFRDoiaW5zZXJ0ZWQiK0VWRU5UX0tFWSxDTElDSzoiY2xpY2siK0VWRU5UX0tFWSxGT0NVU0lOOiJmb2N1c2luIitFVkVOVF9LRVksRk9DVVNPVVQ6ImZvY3Vzb3V0IitFVkVOVF9LRVksTU9VU0VFTlRFUjoibW91c2VlbnRlciIrRVZFTlRfS0VZLE1PVVNFTEVBVkU6Im1vdXNlbGVhdmUiK0VWRU5UX0tFWX07dmFyIFBvcG92ZXI9ZnVuY3Rpb24oX1Rvb2x0aXApe19pbmhlcml0c0xvb3NlKFBvcG92ZXIsX1Rvb2x0aXApO2Z1bmN0aW9uIFBvcG92ZXIoKXtyZXR1cm4gX1Rvb2x0aXAuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO30KdmFyIF9wcm90bz1Qb3BvdmVyLnByb3RvdHlwZTtfcHJvdG8uaXNXaXRoQ29udGVudD1mdW5jdGlvbiBpc1dpdGhDb250ZW50KCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5fZ2V0Q29udGVudCgpO307X3Byb3RvLmFkZEF0dGFjaG1lbnRDbGFzcz1mdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCl7JCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYKyItIithdHRhY2htZW50KTt9O19wcm90by5nZXRUaXBFbGVtZW50PWZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKXt0aGlzLnRpcD10aGlzLnRpcHx8JCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07cmV0dXJuIHRoaXMudGlwO307X3Byb3RvLnNldENvbnRlbnQ9ZnVuY3Rpb24gc2V0Q29udGVudCgpe3ZhciAkdGlwPSQodGhpcy5nZXRUaXBFbGVtZW50KCkpO3RoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRJVExFKSx0aGlzLmdldFRpdGxlKCkpO3ZhciBjb250ZW50PXRoaXMuX2dldENvbnRlbnQoKTtpZih0eXBlb2YgY29udGVudD09PSdmdW5jdGlvbicpe2NvbnRlbnQ9Y29udGVudC5jYWxsKHRoaXMuZWxlbWVudCk7fQp0aGlzLnNldEVsZW1lbnRDb250ZW50KCR0aXAuZmluZChTZWxlY3Rvci5DT05URU5UKSxjb250ZW50KTskdGlwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKyIgIitDbGFzc05hbWUuU0hPVyk7fTtfcHJvdG8uX2dldENvbnRlbnQ9ZnVuY3Rpb24gX2dldENvbnRlbnQoKXtyZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZW50Jyl8fHRoaXMuY29uZmlnLmNvbnRlbnQ7fTtfcHJvdG8uX2NsZWFuVGlwQ2xhc3M9ZnVuY3Rpb24gX2NsZWFuVGlwQ2xhc3MoKXt2YXIgJHRpcD0kKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTt2YXIgdGFiQ2xhc3M9JHRpcC5hdHRyKCdjbGFzcycpLm1hdGNoKEJTQ0xTX1BSRUZJWF9SRUdFWCk7aWYodGFiQ2xhc3MhPT1udWxsJiZ0YWJDbGFzcy5sZW5ndGg+MCl7JHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7fX07UG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGRhdGE9JCh0aGlzKS5kYXRhKERBVEFfS0VZKTt2YXIgX2NvbmZpZz10eXBlb2YgY29uZmlnPT09J29iamVjdCc/Y29uZmlnOm51bGw7aWYoIWRhdGEmJi9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSl7cmV0dXJuO30KaWYoIWRhdGEpe2RhdGE9bmV3IFBvcG92ZXIodGhpcyxfY29uZmlnKTskKHRoaXMpLmRhdGEoREFUQV9LRVksZGF0YSk7fQppZih0eXBlb2YgY29uZmlnPT09J3N0cmluZycpe2lmKHR5cGVvZiBkYXRhW2NvbmZpZ109PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIitjb25maWcrIlwiIik7fQpkYXRhW2NvbmZpZ10oKTt9fSk7fTtfY3JlYXRlQ2xhc3MoUG9wb3ZlcixudWxsLFt7a2V5OiJWRVJTSU9OIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFZFUlNJT047fX0se2tleToiRGVmYXVsdCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEZWZhdWx0O319LHtrZXk6Ik5BTUUiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gTkFNRTt9fSx7a2V5OiJEQVRBX0tFWSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEQVRBX0tFWTt9fSx7a2V5OiJFdmVudCIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBFdmVudDt9fSx7a2V5OiJFVkVOVF9LRVkiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRVZFTlRfS0VZO319LHtrZXk6IkRlZmF1bHRUeXBlIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHRUeXBlO319XSk7cmV0dXJuIFBvcG92ZXI7fShUb29sdGlwKTskLmZuW05BTUVdPVBvcG92ZXIuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPVBvcG92ZXI7JC5mbltOQU1FXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7JC5mbltOQU1FXT1KUVVFUllfTk9fQ09ORkxJQ1Q7cmV0dXJuIFBvcG92ZXIuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBQb3BvdmVyO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL3Njcm9sbHNweS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7dHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0JyYmdHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnP21vZHVsZS5leHBvcnRzPWZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykscmVxdWlyZSgnLi91dGlsLmpzJykpOnR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kP2RlZmluZShbJ2pxdWVyeScsJy4vdXRpbC5qcyddLGZhY3RvcnkpOihnbG9iYWw9Z2xvYmFsfHxzZWxmLGdsb2JhbC5TY3JvbGxTcHk9ZmFjdG9yeShnbG9iYWwualF1ZXJ5LGdsb2JhbC5VdGlsKSk7fSh0aGlzLGZ1bmN0aW9uKCQsVXRpbCl7J3VzZSBzdHJpY3QnOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpPyRbJ2RlZmF1bHQnXTokO1V0aWw9VXRpbCYmVXRpbC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpP1V0aWxbJ2RlZmF1bHQnXTpVdGlsO2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO30KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pO31lbHNle29ialtrZXldPXZhbHVlO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307dmFyIG93bktleXM9T2JqZWN0LmtleXMoc291cmNlKTtpZih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09PSdmdW5jdGlvbicpe293bktleXM9b3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxzeW0pLmVudW1lcmFibGU7fSkpO30Kb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO30KcmV0dXJuIHRhcmdldDt9CnZhciBOQU1FPSdzY3JvbGxzcHknO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy5zY3JvbGxzcHknO3ZhciBFVkVOVF9LRVk9Ii4iK0RBVEFfS0VZO3ZhciBEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaSc7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBEZWZhdWx0PXtvZmZzZXQ6MTAsbWV0aG9kOidhdXRvJyx0YXJnZXQ6Jyd9O3ZhciBEZWZhdWx0VHlwZT17b2Zmc2V0OidudW1iZXInLG1ldGhvZDonc3RyaW5nJyx0YXJnZXQ6JyhzdHJpbmd8ZWxlbWVudCknfTt2YXIgRXZlbnQ9e0FDVElWQVRFOiJhY3RpdmF0ZSIrRVZFTlRfS0VZLFNDUk9MTDoic2Nyb2xsIitFVkVOVF9LRVksTE9BRF9EQVRBX0FQSToibG9hZCIrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWX07dmFyIENsYXNzTmFtZT17RFJPUERPV05fSVRFTTonZHJvcGRvd24taXRlbScsRFJPUERPV05fTUVOVTonZHJvcGRvd24tbWVudScsQUNUSVZFOidhY3RpdmUnfTt2YXIgU2VsZWN0b3I9e0RBVEFfU1BZOidbZGF0YS1zcHk9InNjcm9sbCJdJyxBQ1RJVkU6Jy5hY3RpdmUnLE5BVl9MSVNUX0dST1VQOicubmF2LCAubGlzdC1ncm91cCcsTkFWX0xJTktTOicubmF2LWxpbmsnLE5BVl9JVEVNUzonLm5hdi1pdGVtJyxMSVNUX0lURU1TOicubGlzdC1ncm91cC1pdGVtJyxEUk9QRE9XTjonLmRyb3Bkb3duJyxEUk9QRE9XTl9JVEVNUzonLmRyb3Bkb3duLWl0ZW0nLERST1BET1dOX1RPR0dMRTonLmRyb3Bkb3duLXRvZ2dsZSd9O3ZhciBPZmZzZXRNZXRob2Q9e09GRlNFVDonb2Zmc2V0JyxQT1NJVElPTjoncG9zaXRpb24nfTt2YXIgU2Nyb2xsU3B5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU2Nyb2xsU3B5KGVsZW1lbnQsY29uZmlnKXt2YXIgX3RoaXM9dGhpczt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7dGhpcy5fc2Nyb2xsRWxlbWVudD1lbGVtZW50LnRhZ05hbWU9PT0nQk9EWSc/d2luZG93OmVsZW1lbnQ7dGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhjb25maWcpO3RoaXMuX3NlbGVjdG9yPXRoaXMuX2NvbmZpZy50YXJnZXQrIiAiK1NlbGVjdG9yLk5BVl9MSU5LUysiLCIrKHRoaXMuX2NvbmZpZy50YXJnZXQrIiAiK1NlbGVjdG9yLkxJU1RfSVRFTVMrIiwiKSsodGhpcy5fY29uZmlnLnRhcmdldCsiICIrU2VsZWN0b3IuRFJPUERPV05fSVRFTVMpO3RoaXMuX29mZnNldHM9W107dGhpcy5fdGFyZ2V0cz1bXTt0aGlzLl9hY3RpdmVUYXJnZXQ9bnVsbDt0aGlzLl9zY3JvbGxIZWlnaHQ9MDskKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9uKEV2ZW50LlNDUk9MTCxmdW5jdGlvbihldmVudCl7cmV0dXJuIF90aGlzLl9wcm9jZXNzKGV2ZW50KTt9KTt0aGlzLnJlZnJlc2goKTt0aGlzLl9wcm9jZXNzKCk7fQp2YXIgX3Byb3RvPVNjcm9sbFNweS5wcm90b3R5cGU7X3Byb3RvLnJlZnJlc2g9ZnVuY3Rpb24gcmVmcmVzaCgpe3ZhciBfdGhpczI9dGhpczt2YXIgYXV0b01ldGhvZD10aGlzLl9zY3JvbGxFbGVtZW50PT09dGhpcy5fc2Nyb2xsRWxlbWVudC53aW5kb3c/T2Zmc2V0TWV0aG9kLk9GRlNFVDpPZmZzZXRNZXRob2QuUE9TSVRJT047dmFyIG9mZnNldE1ldGhvZD10aGlzLl9jb25maWcubWV0aG9kPT09J2F1dG8nP2F1dG9NZXRob2Q6dGhpcy5fY29uZmlnLm1ldGhvZDt2YXIgb2Zmc2V0QmFzZT1vZmZzZXRNZXRob2Q9PT1PZmZzZXRNZXRob2QuUE9TSVRJT04/dGhpcy5fZ2V0U2Nyb2xsVG9wKCk6MDt0aGlzLl9vZmZzZXRzPVtdO3RoaXMuX3RhcmdldHM9W107dGhpcy5fc2Nyb2xsSGVpZ2h0PXRoaXMuX2dldFNjcm9sbEhlaWdodCgpO3ZhciB0YXJnZXRzPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZWxlY3RvcikpO3RhcmdldHMubWFwKGZ1bmN0aW9uKGVsZW1lbnQpe3ZhciB0YXJnZXQ7dmFyIHRhcmdldFNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtpZih0YXJnZXRTZWxlY3Rvcil7dGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpO30KaWYodGFyZ2V0KXt2YXIgdGFyZ2V0QkNSPXRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZih0YXJnZXRCQ1Iud2lkdGh8fHRhcmdldEJDUi5oZWlnaHQpe3JldHVyblskKHRhcmdldClbb2Zmc2V0TWV0aG9kXSgpLnRvcCtvZmZzZXRCYXNlLHRhcmdldFNlbGVjdG9yXTt9fQpyZXR1cm4gbnVsbDt9KS5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW07fSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLWJbMF07fSkuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtfdGhpczIuX29mZnNldHMucHVzaChpdGVtWzBdKTtfdGhpczIuX3RhcmdldHMucHVzaChpdGVtWzFdKTt9KTt9O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXskLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxEQVRBX0tFWSk7JCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vZmYoRVZFTlRfS0VZKTt0aGlzLl9lbGVtZW50PW51bGw7dGhpcy5fc2Nyb2xsRWxlbWVudD1udWxsO3RoaXMuX2NvbmZpZz1udWxsO3RoaXMuX3NlbGVjdG9yPW51bGw7dGhpcy5fb2Zmc2V0cz1udWxsO3RoaXMuX3RhcmdldHM9bnVsbDt0aGlzLl9hY3RpdmVUYXJnZXQ9bnVsbDt0aGlzLl9zY3JvbGxIZWlnaHQ9bnVsbDt9O19wcm90by5fZ2V0Q29uZmlnPWZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxEZWZhdWx0LHR5cGVvZiBjb25maWc9PT0nb2JqZWN0JyYmY29uZmlnP2NvbmZpZzp7fSk7aWYodHlwZW9mIGNvbmZpZy50YXJnZXQhPT0nc3RyaW5nJyl7dmFyIGlkPSQoY29uZmlnLnRhcmdldCkuYXR0cignaWQnKTtpZighaWQpe2lkPVV0aWwuZ2V0VUlEKE5BTUUpOyQoY29uZmlnLnRhcmdldCkuYXR0cignaWQnLGlkKTt9CmNvbmZpZy50YXJnZXQ9IiMiK2lkO30KVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSxjb25maWcsRGVmYXVsdFR5cGUpO3JldHVybiBjb25maWc7fTtfcHJvdG8uX2dldFNjcm9sbFRvcD1mdW5jdGlvbiBfZ2V0U2Nyb2xsVG9wKCl7cmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQ9PT13aW5kb3c/dGhpcy5fc2Nyb2xsRWxlbWVudC5wYWdlWU9mZnNldDp0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFRvcDt9O19wcm90by5fZ2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uIF9nZXRTY3JvbGxIZWlnaHQoKXtyZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpO307X3Byb3RvLl9nZXRPZmZzZXRIZWlnaHQ9ZnVuY3Rpb24gX2dldE9mZnNldEhlaWdodCgpe3JldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50PT09d2luZG93P3dpbmRvdy5pbm5lckhlaWdodDp0aGlzLl9zY3JvbGxFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDt9O19wcm90by5fcHJvY2Vzcz1mdW5jdGlvbiBfcHJvY2Vzcygpe3ZhciBzY3JvbGxUb3A9dGhpcy5fZ2V0U2Nyb2xsVG9wKCkrdGhpcy5fY29uZmlnLm9mZnNldDt2YXIgc2Nyb2xsSGVpZ2h0PXRoaXMuX2dldFNjcm9sbEhlaWdodCgpO3ZhciBtYXhTY3JvbGw9dGhpcy5fY29uZmlnLm9mZnNldCtzY3JvbGxIZWlnaHQtdGhpcy5fZ2V0T2Zmc2V0SGVpZ2h0KCk7aWYodGhpcy5fc2Nyb2xsSGVpZ2h0IT09c2Nyb2xsSGVpZ2h0KXt0aGlzLnJlZnJlc2goKTt9CmlmKHNjcm9sbFRvcD49bWF4U2Nyb2xsKXt2YXIgdGFyZ2V0PXRoaXMuX3RhcmdldHNbdGhpcy5fdGFyZ2V0cy5sZW5ndGgtMV07aWYodGhpcy5fYWN0aXZlVGFyZ2V0IT09dGFyZ2V0KXt0aGlzLl9hY3RpdmF0ZSh0YXJnZXQpO30KcmV0dXJuO30KaWYodGhpcy5fYWN0aXZlVGFyZ2V0JiZzY3JvbGxUb3A8dGhpcy5fb2Zmc2V0c1swXSYmdGhpcy5fb2Zmc2V0c1swXT4wKXt0aGlzLl9hY3RpdmVUYXJnZXQ9bnVsbDt0aGlzLl9jbGVhcigpO3JldHVybjt9CnZhciBvZmZzZXRMZW5ndGg9dGhpcy5fb2Zmc2V0cy5sZW5ndGg7Zm9yKHZhciBpPW9mZnNldExlbmd0aDtpLS07KXt2YXIgaXNBY3RpdmVUYXJnZXQ9dGhpcy5fYWN0aXZlVGFyZ2V0IT09dGhpcy5fdGFyZ2V0c1tpXSYmc2Nyb2xsVG9wPj10aGlzLl9vZmZzZXRzW2ldJiYodHlwZW9mIHRoaXMuX29mZnNldHNbaSsxXT09PSd1bmRlZmluZWQnfHxzY3JvbGxUb3A8dGhpcy5fb2Zmc2V0c1tpKzFdKTtpZihpc0FjdGl2ZVRhcmdldCl7dGhpcy5fYWN0aXZhdGUodGhpcy5fdGFyZ2V0c1tpXSk7fX19O19wcm90by5fYWN0aXZhdGU9ZnVuY3Rpb24gX2FjdGl2YXRlKHRhcmdldCl7dGhpcy5fYWN0aXZlVGFyZ2V0PXRhcmdldDt0aGlzLl9jbGVhcigpO3ZhciBxdWVyaWVzPXRoaXMuX3NlbGVjdG9yLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gc2VsZWN0b3IrIltkYXRhLXRhcmdldD1cIiIrdGFyZ2V0KyJcIl0sIitzZWxlY3RvcisiW2hyZWY9XCIiK3RhcmdldCsiXCJdIjt9KTt2YXIgJGxpbms9JChbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocXVlcmllcy5qb2luKCcsJykpKSk7aWYoJGxpbmsuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BET1dOX0lURU0pKXskbGluay5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKS5maW5kKFNlbGVjdG9yLkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7JGxpbmsuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fWVsc2V7JGxpbmsuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7JGxpbmsucGFyZW50cyhTZWxlY3Rvci5OQVZfTElTVF9HUk9VUCkucHJldihTZWxlY3Rvci5OQVZfTElOS1MrIiwgIitTZWxlY3Rvci5MSVNUX0lURU1TKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTskbGluay5wYXJlbnRzKFNlbGVjdG9yLk5BVl9MSVNUX0dST1VQKS5wcmV2KFNlbGVjdG9yLk5BVl9JVEVNUykuY2hpbGRyZW4oU2VsZWN0b3IuTkFWX0xJTktTKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTt9CiQodGhpcy5fc2Nyb2xsRWxlbWVudCkudHJpZ2dlcihFdmVudC5BQ1RJVkFURSx7cmVsYXRlZFRhcmdldDp0YXJnZXR9KTt9O19wcm90by5fY2xlYXI9ZnVuY3Rpb24gX2NsZWFyKCl7W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9yKSkuZmlsdGVyKGZ1bmN0aW9uKG5vZGUpe3JldHVybiBub2RlLmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuQUNUSVZFKTt9KS5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpe3JldHVybiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLkFDVElWRSk7fSk7fTtTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkYXRhPSQodGhpcykuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9dHlwZW9mIGNvbmZpZz09PSdvYmplY3QnJiZjb25maWc7aWYoIWRhdGEpe2RhdGE9bmV3IFNjcm9sbFNweSh0aGlzLF9jb25maWcpOyQodGhpcykuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhTY3JvbGxTcHksbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319LHtrZXk6IkRlZmF1bHQiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9fV0pO3JldHVybiBTY3JvbGxTcHk7fSgpOyQod2luZG93KS5vbihFdmVudC5MT0FEX0RBVEFfQVBJLGZ1bmN0aW9uKCl7dmFyIHNjcm9sbFNweXM9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLkRBVEFfU1BZKSk7dmFyIHNjcm9sbFNweXNMZW5ndGg9c2Nyb2xsU3B5cy5sZW5ndGg7Zm9yKHZhciBpPXNjcm9sbFNweXNMZW5ndGg7aS0tOyl7dmFyICRzcHk9JChzY3JvbGxTcHlzW2ldKTtTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZS5jYWxsKCRzcHksJHNweS5kYXRhKCkpO319KTskLmZuW05BTUVdPVNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9U2Nyb2xsU3B5OyQuZm5bTkFNRV0ubm9Db25mbGljdD1mdW5jdGlvbigpeyQuZm5bTkFNRV09SlFVRVJZX05PX0NPTkZMSUNUO3JldHVybiBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBTY3JvbGxTcHk7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9ib290c3RyYXAvanMvdGFiLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLlRhYj1mYWN0b3J5KGdsb2JhbC5qUXVlcnksZ2xvYmFsLlV0aWwpKTt9KHRoaXMsZnVuY3Rpb24oJCxVdGlsKXsndXNlIHN0cmljdCc7JD0kJiYkLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/JFsnZGVmYXVsdCddOiQ7VXRpbD1VdGlsJiZVdGlsLmhhc093blByb3BlcnR5KCdkZWZhdWx0Jyk/VXRpbFsnZGVmYXVsdCddOlV0aWw7ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fQp2YXIgTkFNRT0ndGFiJzt2YXIgVkVSU0lPTj0nNC4zLjEnO3ZhciBEQVRBX0tFWT0nYnMudGFiJzt2YXIgRVZFTlRfS0VZPSIuIitEQVRBX0tFWTt2YXIgREFUQV9BUElfS0VZPScuZGF0YS1hcGknO3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltOQU1FXTt2YXIgRXZlbnQ9e0hJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWSxDTElDS19EQVRBX0FQSToiY2xpY2siK0VWRU5UX0tFWStEQVRBX0FQSV9LRVl9O3ZhciBDbGFzc05hbWU9e0RST1BET1dOX01FTlU6J2Ryb3Bkb3duLW1lbnUnLEFDVElWRTonYWN0aXZlJyxESVNBQkxFRDonZGlzYWJsZWQnLEZBREU6J2ZhZGUnLFNIT1c6J3Nob3cnfTt2YXIgU2VsZWN0b3I9e0RST1BET1dOOicuZHJvcGRvd24nLE5BVl9MSVNUX0dST1VQOicubmF2LCAubGlzdC1ncm91cCcsQUNUSVZFOicuYWN0aXZlJyxBQ1RJVkVfVUw6Jz4gbGkgPiAuYWN0aXZlJyxEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPSJ0YWIiXSwgW2RhdGEtdG9nZ2xlPSJwaWxsIl0sIFtkYXRhLXRvZ2dsZT0ibGlzdCJdJyxEUk9QRE9XTl9UT0dHTEU6Jy5kcm9wZG93bi10b2dnbGUnLERST1BET1dOX0FDVElWRV9DSElMRDonPiAuZHJvcGRvd24tbWVudSAuYWN0aXZlJ307dmFyIFRhYj1mdW5jdGlvbigpe2Z1bmN0aW9uIFRhYihlbGVtZW50KXt0aGlzLl9lbGVtZW50PWVsZW1lbnQ7fQp2YXIgX3Byb3RvPVRhYi5wcm90b3R5cGU7X3Byb3RvLnNob3c9ZnVuY3Rpb24gc2hvdygpe3ZhciBfdGhpcz10aGlzO2lmKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSYmdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJiQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSl8fCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSl7cmV0dXJuO30KdmFyIHRhcmdldDt2YXIgcHJldmlvdXM7dmFyIGxpc3RFbGVtZW50PSQodGhpcy5fZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5OQVZfTElTVF9HUk9VUClbMF07dmFyIHNlbGVjdG9yPVV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtpZihsaXN0RWxlbWVudCl7dmFyIGl0ZW1TZWxlY3Rvcj1saXN0RWxlbWVudC5ub2RlTmFtZT09PSdVTCd8fGxpc3RFbGVtZW50Lm5vZGVOYW1lPT09J09MJz9TZWxlY3Rvci5BQ1RJVkVfVUw6U2VsZWN0b3IuQUNUSVZFO3ByZXZpb3VzPSQubWFrZUFycmF5KCQobGlzdEVsZW1lbnQpLmZpbmQoaXRlbVNlbGVjdG9yKSk7cHJldmlvdXM9cHJldmlvdXNbcHJldmlvdXMubGVuZ3RoLTFdO30KdmFyIGhpZGVFdmVudD0kLkV2ZW50KEV2ZW50LkhJREUse3JlbGF0ZWRUYXJnZXQ6dGhpcy5fZWxlbWVudH0pO3ZhciBzaG93RXZlbnQ9JC5FdmVudChFdmVudC5TSE9XLHtyZWxhdGVkVGFyZ2V0OnByZXZpb3VzfSk7aWYocHJldmlvdXMpeyQocHJldmlvdXMpLnRyaWdnZXIoaGlkZUV2ZW50KTt9CiQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO2lmKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8aGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm47fQppZihzZWxlY3Rvcil7dGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO30KdGhpcy5fYWN0aXZhdGUodGhpcy5fZWxlbWVudCxsaXN0RWxlbWVudCk7dmFyIGNvbXBsZXRlPWZ1bmN0aW9uIGNvbXBsZXRlKCl7dmFyIGhpZGRlbkV2ZW50PSQuRXZlbnQoRXZlbnQuSElEREVOLHtyZWxhdGVkVGFyZ2V0Ol90aGlzLl9lbGVtZW50fSk7dmFyIHNob3duRXZlbnQ9JC5FdmVudChFdmVudC5TSE9XTix7cmVsYXRlZFRhcmdldDpwcmV2aW91c30pOyQocHJldmlvdXMpLnRyaWdnZXIoaGlkZGVuRXZlbnQpOyQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7fTtpZih0YXJnZXQpe3RoaXMuX2FjdGl2YXRlKHRhcmdldCx0YXJnZXQucGFyZW50Tm9kZSxjb21wbGV0ZSk7fWVsc2V7Y29tcGxldGUoKTt9fTtfcHJvdG8uZGlzcG9zZT1mdW5jdGlvbiBkaXNwb3NlKCl7JC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsREFUQV9LRVkpO3RoaXMuX2VsZW1lbnQ9bnVsbDt9O19wcm90by5fYWN0aXZhdGU9ZnVuY3Rpb24gX2FjdGl2YXRlKGVsZW1lbnQsY29udGFpbmVyLGNhbGxiYWNrKXt2YXIgX3RoaXMyPXRoaXM7dmFyIGFjdGl2ZUVsZW1lbnRzPWNvbnRhaW5lciYmKGNvbnRhaW5lci5ub2RlTmFtZT09PSdVTCd8fGNvbnRhaW5lci5ub2RlTmFtZT09PSdPTCcpPyQoY29udGFpbmVyKS5maW5kKFNlbGVjdG9yLkFDVElWRV9VTCk6JChjb250YWluZXIpLmNoaWxkcmVuKFNlbGVjdG9yLkFDVElWRSk7dmFyIGFjdGl2ZT1hY3RpdmVFbGVtZW50c1swXTt2YXIgaXNUcmFuc2l0aW9uaW5nPWNhbGxiYWNrJiZhY3RpdmUmJiQoYWN0aXZlKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSk7dmFyIGNvbXBsZXRlPWZ1bmN0aW9uIGNvbXBsZXRlKCl7cmV0dXJuIF90aGlzMi5fdHJhbnNpdGlvbkNvbXBsZXRlKGVsZW1lbnQsYWN0aXZlLGNhbGxiYWNrKTt9O2lmKGFjdGl2ZSYmaXNUcmFuc2l0aW9uaW5nKXt2YXIgdHJhbnNpdGlvbkR1cmF0aW9uPVV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQoYWN0aXZlKTskKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NvbXBsZXRlKCk7fX07X3Byb3RvLl90cmFuc2l0aW9uQ29tcGxldGU9ZnVuY3Rpb24gX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LGFjdGl2ZSxjYWxsYmFjayl7aWYoYWN0aXZlKXskKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7dmFyIGRyb3Bkb3duQ2hpbGQ9JChhY3RpdmUucGFyZW50Tm9kZSkuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTEQpWzBdO2lmKGRyb3Bkb3duQ2hpbGQpeyQoZHJvcGRvd25DaGlsZCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fQppZihhY3RpdmUuZ2V0QXR0cmlidXRlKCdyb2xlJyk9PT0ndGFiJyl7YWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsZmFsc2UpO319CiQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7aWYoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3JvbGUnKT09PSd0YWInKXtlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsdHJ1ZSk7fQpVdGlsLnJlZmxvdyhlbGVtZW50KTtpZihlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuRkFERSkpe2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuU0hPVyk7fQppZihlbGVtZW50LnBhcmVudE5vZGUmJiQoZWxlbWVudC5wYXJlbnROb2RlKS5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUERPV05fTUVOVSkpe3ZhciBkcm9wZG93bkVsZW1lbnQ9JChlbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKVswXTtpZihkcm9wZG93bkVsZW1lbnQpe3ZhciBkcm9wZG93blRvZ2dsZUxpc3Q9W10uc2xpY2UuY2FsbChkcm9wZG93bkVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5EUk9QRE9XTl9UT0dHTEUpKTskKGRyb3Bkb3duVG9nZ2xlTGlzdCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7fQplbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsdHJ1ZSk7fQppZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fTtUYWIuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciAkdGhpcz0kKHRoaXMpO3ZhciBkYXRhPSR0aGlzLmRhdGEoREFUQV9LRVkpO2lmKCFkYXRhKXtkYXRhPW5ldyBUYWIodGhpcyk7JHRoaXMuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSgpO319KTt9O19jcmVhdGVDbGFzcyhUYWIsbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319XSk7cmV0dXJuIFRhYjt9KCk7JChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksU2VsZWN0b3IuREFUQV9UT0dHTEUsZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7VGFiLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRoaXMpLCdzaG93Jyk7fSk7JC5mbltOQU1FXT1UYWIuX2pRdWVyeUludGVyZmFjZTskLmZuW05BTUVdLkNvbnN0cnVjdG9yPVRhYjskLmZuW05BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW05BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gVGFiO30pKTs7CgovKiAvd2ViL3N0YXRpYy9saWIvYm9vdHN0cmFwL2pzL3RvYXN0LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXt0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSxyZXF1aXJlKCcuL3V0aWwuanMnKSk6dHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5JywnLi91dGlsLmpzJ10sZmFjdG9yeSk6KGdsb2JhbD1nbG9iYWx8fHNlbGYsZ2xvYmFsLlRvYXN0PWZhY3RvcnkoZ2xvYmFsLmpRdWVyeSxnbG9iYWwuVXRpbCkpO30odGhpcyxmdW5jdGlvbigkLFV0aWwpeyd1c2Ugc3RyaWN0JzskPSQmJiQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT8kWydkZWZhdWx0J106JDtVdGlsPVV0aWwmJlV0aWwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKT9VdGlsWydkZWZhdWx0J106VXRpbDtmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9CnJldHVybiBvYmo7fQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9Cm93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9CnJldHVybiB0YXJnZXQ7fQp2YXIgTkFNRT0ndG9hc3QnO3ZhciBWRVJTSU9OPSc0LjMuMSc7dmFyIERBVEFfS0VZPSdicy50b2FzdCc7dmFyIEVWRU5UX0tFWT0iLiIrREFUQV9LRVk7dmFyIEpRVUVSWV9OT19DT05GTElDVD0kLmZuW05BTUVdO3ZhciBFdmVudD17Q0xJQ0tfRElTTUlTUzoiY2xpY2suZGlzbWlzcyIrRVZFTlRfS0VZLEhJREU6ImhpZGUiK0VWRU5UX0tFWSxISURERU46ImhpZGRlbiIrRVZFTlRfS0VZLFNIT1c6InNob3ciK0VWRU5UX0tFWSxTSE9XTjoic2hvd24iK0VWRU5UX0tFWX07dmFyIENsYXNzTmFtZT17RkFERTonZmFkZScsSElERTonaGlkZScsU0hPVzonc2hvdycsU0hPV0lORzonc2hvd2luZyd9O3ZhciBEZWZhdWx0VHlwZT17YW5pbWF0aW9uOidib29sZWFuJyxhdXRvaGlkZTonYm9vbGVhbicsZGVsYXk6J251bWJlcid9O3ZhciBEZWZhdWx0PXthbmltYXRpb246dHJ1ZSxhdXRvaGlkZTp0cnVlLGRlbGF5OjUwMH07dmFyIFNlbGVjdG9yPXtEQVRBX0RJU01JU1M6J1tkYXRhLWRpc21pc3M9InRvYXN0Il0nfTt2YXIgVG9hc3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBUb2FzdChlbGVtZW50LGNvbmZpZyl7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoY29uZmlnKTt0aGlzLl90aW1lb3V0PW51bGw7dGhpcy5fc2V0TGlzdGVuZXJzKCk7fQp2YXIgX3Byb3RvPVRvYXN0LnByb3RvdHlwZTtfcHJvdG8uc2hvdz1mdW5jdGlvbiBzaG93KCl7dmFyIF90aGlzPXRoaXM7JCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LlNIT1cpO2lmKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pe3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuRkFERSk7fQp2YXIgY29tcGxldGU9ZnVuY3Rpb24gY29tcGxldGUoKXtfdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZS5TSE9XSU5HKTtfdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZS5TSE9XKTskKF90aGlzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LlNIT1dOKTtpZihfdGhpcy5fY29uZmlnLmF1dG9oaWRlKXtfdGhpcy5oaWRlKCk7fX07dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZS5ISURFKTt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLlNIT1dJTkcpO2lmKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pe3ZhciB0cmFuc2l0aW9uRHVyYXRpb249VXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTskKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO31lbHNle2NvbXBsZXRlKCk7fX07X3Byb3RvLmhpZGU9ZnVuY3Rpb24gaGlkZSh3aXRob3V0VGltZW91dCl7dmFyIF90aGlzMj10aGlzO2lmKCF0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUuU0hPVykpe3JldHVybjt9CiQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURFKTtpZih3aXRob3V0VGltZW91dCl7dGhpcy5fY2xvc2UoKTt9ZWxzZXt0aGlzLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczIuX2Nsb3NlKCk7fSx0aGlzLl9jb25maWcuZGVsYXkpO319O19wcm90by5kaXNwb3NlPWZ1bmN0aW9uIGRpc3Bvc2UoKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7dGhpcy5fdGltZW91dD1udWxsO2lmKHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENsYXNzTmFtZS5TSE9XKSl7dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZS5TSE9XKTt9CiQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LkNMSUNLX0RJU01JU1MpOyQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LERBVEFfS0VZKTt0aGlzLl9lbGVtZW50PW51bGw7dGhpcy5fY29uZmlnPW51bGw7fTtfcHJvdG8uX2dldENvbmZpZz1mdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZyl7Y29uZmlnPV9vYmplY3RTcHJlYWQoe30sRGVmYXVsdCwkKHRoaXMuX2VsZW1lbnQpLmRhdGEoKSx0eXBlb2YgY29uZmlnPT09J29iamVjdCcmJmNvbmZpZz9jb25maWc6e30pO1V0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsY29uZmlnLHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpO3JldHVybiBjb25maWc7fTtfcHJvdG8uX3NldExpc3RlbmVycz1mdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCl7dmFyIF90aGlzMz10aGlzOyQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUyxTZWxlY3Rvci5EQVRBX0RJU01JU1MsZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMzLmhpZGUodHJ1ZSk7fSk7fTtfcHJvdG8uX2Nsb3NlPWZ1bmN0aW9uIF9jbG9zZSgpe3ZhciBfdGhpczQ9dGhpczt2YXIgY29tcGxldGU9ZnVuY3Rpb24gY29tcGxldGUoKXtfdGhpczQuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUuSElERSk7JChfdGhpczQuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuSElEREVOKTt9O3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUuU0hPVyk7aWYodGhpcy5fY29uZmlnLmFuaW1hdGlvbil7dmFyIHRyYW5zaXRpb25EdXJhdGlvbj1VdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOyQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7fWVsc2V7Y29tcGxldGUoKTt9fTtUb2FzdC5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyICRlbGVtZW50PSQodGhpcyk7dmFyIGRhdGE9JGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7dmFyIF9jb25maWc9dHlwZW9mIGNvbmZpZz09PSdvYmplY3QnJiZjb25maWc7aWYoIWRhdGEpe2RhdGE9bmV3IFRvYXN0KHRoaXMsX2NvbmZpZyk7JGVsZW1lbnQuZGF0YShEQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7aWYodHlwZW9mIGRhdGFbY29uZmlnXT09PSd1bmRlZmluZWQnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiK2NvbmZpZysiXCIiKTt9CmRhdGFbY29uZmlnXSh0aGlzKTt9fSk7fTtfY3JlYXRlQ2xhc3MoVG9hc3QsbnVsbCxbe2tleToiVkVSU0lPTiIsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBWRVJTSU9OO319LHtrZXk6IkRlZmF1bHRUeXBlIixnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERlZmF1bHRUeXBlO319LHtrZXk6IkRlZmF1bHQiLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9fV0pO3JldHVybiBUb2FzdDt9KCk7JC5mbltOQU1FXT1Ub2FzdC5falF1ZXJ5SW50ZXJmYWNlOyQuZm5bTkFNRV0uQ29uc3RydWN0b3I9VG9hc3Q7JC5mbltOQU1FXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7JC5mbltOQU1FXT1KUVVFUllfTk9fQ09ORkxJQ1Q7cmV0dXJuIFRvYXN0Ll9qUXVlcnlJbnRlcmZhY2U7fTtyZXR1cm4gVG9hc3Q7fSkpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi90ZW1wdXNkb21pbnVzL3RlbXB1c2RvbWludXMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwppZih0eXBlb2YgalF1ZXJ5PT09J3VuZGVmaW5lZCcpe3Rocm93IG5ldyBFcnJvcignVGVtcHVzIERvbWludXMgQm9vdHN0cmFwNFwncyByZXF1aXJlcyBqUXVlcnkuIGpRdWVyeSBtdXN0IGJlIGluY2x1ZGVkIGJlZm9yZSBUZW1wdXMgRG9taW51cyBCb290c3RyYXA0XCdzIEphdmFTY3JpcHQuJyk7fQorZnVuY3Rpb24oJCl7dmFyIHZlcnNpb249JC5mbi5qcXVlcnkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLicpO2lmKCh2ZXJzaW9uWzBdPDImJnZlcnNpb25bMV08OSl8fCh2ZXJzaW9uWzBdPT09MSYmdmVyc2lvblsxXT09PTkmJnZlcnNpb25bMl08MSl8fCh2ZXJzaW9uWzBdPj00KSl7dGhyb3cgbmV3IEVycm9yKCdUZW1wdXMgRG9taW51cyBCb290c3RyYXA0XCdzIHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSB2My4wLjAgYnV0IGxlc3MgdGhhbiB2NC4wLjAnKTt9fShqUXVlcnkpO2lmKHR5cGVvZiBtb21lbnQ9PT0ndW5kZWZpbmVkJyl7dGhyb3cgbmV3IEVycm9yKCdUZW1wdXMgRG9taW51cyBCb290c3RyYXA0XCdzIHJlcXVpcmVzIG1vbWVudC5qcy4gTW9tZW50LmpzIG11c3QgYmUgaW5jbHVkZWQgYmVmb3JlIFRlbXB1cyBEb21pbnVzIEJvb3RzdHJhcDRcJ3MgSmF2YVNjcmlwdC4nKTt9CnZhciB2ZXJzaW9uPW1vbWVudC52ZXJzaW9uLnNwbGl0KCcuJykKaWYoKHZlcnNpb25bMF08PTImJnZlcnNpb25bMV08MTcpfHwodmVyc2lvblswXT49Mykpe3Rocm93IG5ldyBFcnJvcignVGVtcHVzIERvbWludXMgQm9vdHN0cmFwNFwncyByZXF1aXJlcyBhdCBsZWFzdCBtb21lbnQuanMgdjIuMTcuMCBidXQgbGVzcyB0aGFuIHYzLjAuMCcpO30KK2Z1bmN0aW9uKCl7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT0ic3ltYm9sIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmo7fTt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTtmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLGNhbGwpe2lmKCFzZWxmKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO31yZXR1cm4gY2FsbCYmKHR5cGVvZiBjYWxsPT09Im9iamVjdCJ8fHR5cGVvZiBjYWxsPT09ImZ1bmN0aW9uIik/Y2FsbDpzZWxmO30KZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe2lmKHR5cGVvZiBzdXBlckNsYXNzIT09ImZ1bmN0aW9uIiYmc3VwZXJDbGFzcyE9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2Ygc3VwZXJDbGFzcyk7fXN1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MmJnN1cGVyQ2xhc3MucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6c3ViQ2xhc3MsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX0pO2lmKHN1cGVyQ2xhc3MpT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcyxzdXBlckNsYXNzKTpzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzczt9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7fX0KdmFyIERhdGVUaW1lUGlja2VyPWZ1bmN0aW9uKCQsbW9tZW50KXt2YXIgTkFNRT0nZGF0ZXRpbWVwaWNrZXInLERBVEFfS0VZPScnK05BTUUsRVZFTlRfS0VZPScuJytEQVRBX0tFWSxEQVRBX0FQSV9LRVk9Jy5kYXRhLWFwaScsU2VsZWN0b3I9e0RBVEFfVE9HR0xFOidbZGF0YS10b2dnbGU9IicrREFUQV9LRVkrJyJdJ30sQ2xhc3NOYW1lPXtJTlBVVDpOQU1FKyctaW5wdXQnfSxFdmVudD17Q0hBTkdFOidjaGFuZ2UnK0VWRU5UX0tFWSxCTFVSOidibHVyJytFVkVOVF9LRVksS0VZVVA6J2tleXVwJytFVkVOVF9LRVksS0VZRE9XTjona2V5ZG93bicrRVZFTlRfS0VZLEZPQ1VTOidmb2N1cycrRVZFTlRfS0VZLENMSUNLX0RBVEFfQVBJOidjbGljaycrRVZFTlRfS0VZK0RBVEFfQVBJX0tFWSxVUERBVEU6J3VwZGF0ZScrRVZFTlRfS0VZLEVSUk9SOidlcnJvcicrRVZFTlRfS0VZLEhJREU6J2hpZGUnK0VWRU5UX0tFWSxTSE9XOidzaG93JytFVkVOVF9LRVl9LERhdGVQaWNrZXJNb2Rlcz1be0NMQVNTX05BTUU6J2RheXMnLE5BVl9GVU5DVElPTjonTScsTkFWX1NURVA6MX0se0NMQVNTX05BTUU6J21vbnRocycsTkFWX0ZVTkNUSU9OOid5JyxOQVZfU1RFUDoxfSx7Q0xBU1NfTkFNRToneWVhcnMnLE5BVl9GVU5DVElPTjoneScsTkFWX1NURVA6MTB9LHtDTEFTU19OQU1FOidkZWNhZGVzJyxOQVZfRlVOQ1RJT046J3knLE5BVl9TVEVQOjEwMH1dLEtleU1hcD17J3VwJzozOCwzODondXAnLCdkb3duJzo0MCw0MDonZG93bicsJ2xlZnQnOjM3LDM3OidsZWZ0JywncmlnaHQnOjM5LDM5OidyaWdodCcsJ3RhYic6OSw5Oid0YWInLCdlc2NhcGUnOjI3LDI3Oidlc2NhcGUnLCdlbnRlcic6MTMsMTM6J2VudGVyJywncGFnZVVwJzozMywzMzoncGFnZVVwJywncGFnZURvd24nOjM0LDM0OidwYWdlRG93bicsJ3NoaWZ0JzoxNiwxNjonc2hpZnQnLCdjb250cm9sJzoxNywxNzonY29udHJvbCcsJ3NwYWNlJzozMiwzMjonc3BhY2UnLCd0Jzo4NCw4NDondCcsJ2RlbGV0ZSc6NDYsNDY6J2RlbGV0ZSd9LFZpZXdNb2Rlcz1bJ3RpbWVzJywnZGF5cycsJ21vbnRocycsJ3llYXJzJywnZGVjYWRlcyddLGtleVN0YXRlPXt9LGtleVByZXNzSGFuZGxlZD17fTt2YXIgTWluVmlld01vZGVOdW1iZXI9MCxEZWZhdWx0PXt0aW1lWm9uZTonJyxmb3JtYXQ6ZmFsc2UsZGF5Vmlld0hlYWRlckZvcm1hdDonTU1NTSBZWVlZJyxleHRyYUZvcm1hdHM6ZmFsc2Usc3RlcHBpbmc6MSxtaW5EYXRlOmZhbHNlLG1heERhdGU6ZmFsc2UsdXNlQ3VycmVudDp0cnVlLGNvbGxhcHNlOnRydWUsbG9jYWxlOm1vbWVudC5sb2NhbGUoKSxkZWZhdWx0RGF0ZTpmYWxzZSxkaXNhYmxlZERhdGVzOmZhbHNlLGVuYWJsZWREYXRlczpmYWxzZSxpY29uczp7dGltZTonZmEgZmEtY2xvY2stbycsZGF0ZTonZmEgZmEtY2FsZW5kYXInLHVwOidmYSBmYS1hcnJvdy11cCcsZG93bjonZmEgZmEtYXJyb3ctZG93bicscHJldmlvdXM6J2ZhIGZhLWNoZXZyb24tbGVmdCcsbmV4dDonZmEgZmEtY2hldnJvbi1yaWdodCcsdG9kYXk6J2ZhIGZhLWNhbGVuZGFyLWNoZWNrLW8nLGNsZWFyOidmYSBmYS1kZWxldGUnLGNsb3NlOidmYSBmYS10aW1lcyd9LHRvb2x0aXBzOnt0b2RheTonR28gdG8gdG9kYXknLGNsZWFyOidDbGVhciBzZWxlY3Rpb24nLGNsb3NlOidDbG9zZSB0aGUgcGlja2VyJyxzZWxlY3RNb250aDonU2VsZWN0IE1vbnRoJyxwcmV2TW9udGg6J1ByZXZpb3VzIE1vbnRoJyxuZXh0TW9udGg6J05leHQgTW9udGgnLHNlbGVjdFllYXI6J1NlbGVjdCBZZWFyJyxwcmV2WWVhcjonUHJldmlvdXMgWWVhcicsbmV4dFllYXI6J05leHQgWWVhcicsc2VsZWN0RGVjYWRlOidTZWxlY3QgRGVjYWRlJyxwcmV2RGVjYWRlOidQcmV2aW91cyBEZWNhZGUnLG5leHREZWNhZGU6J05leHQgRGVjYWRlJyxwcmV2Q2VudHVyeTonUHJldmlvdXMgQ2VudHVyeScsbmV4dENlbnR1cnk6J05leHQgQ2VudHVyeScscGlja0hvdXI6J1BpY2sgSG91cicsaW5jcmVtZW50SG91cjonSW5jcmVtZW50IEhvdXInLGRlY3JlbWVudEhvdXI6J0RlY3JlbWVudCBIb3VyJyxwaWNrTWludXRlOidQaWNrIE1pbnV0ZScsaW5jcmVtZW50TWludXRlOidJbmNyZW1lbnQgTWludXRlJyxkZWNyZW1lbnRNaW51dGU6J0RlY3JlbWVudCBNaW51dGUnLHBpY2tTZWNvbmQ6J1BpY2sgU2Vjb25kJyxpbmNyZW1lbnRTZWNvbmQ6J0luY3JlbWVudCBTZWNvbmQnLGRlY3JlbWVudFNlY29uZDonRGVjcmVtZW50IFNlY29uZCcsdG9nZ2xlUGVyaW9kOidUb2dnbGUgUGVyaW9kJyxzZWxlY3RUaW1lOidTZWxlY3QgVGltZScsc2VsZWN0RGF0ZTonU2VsZWN0IERhdGUnfSx1c2VTdHJpY3Q6ZmFsc2Usc2lkZUJ5U2lkZTpmYWxzZSxkYXlzT2ZXZWVrRGlzYWJsZWQ6ZmFsc2UsY2FsZW5kYXJXZWVrczpmYWxzZSx2aWV3TW9kZTonZGF5cycsdG9vbGJhclBsYWNlbWVudDonZGVmYXVsdCcsYnV0dG9uczp7c2hvd1RvZGF5OmZhbHNlLHNob3dDbGVhcjpmYWxzZSxzaG93Q2xvc2U6ZmFsc2V9LHdpZGdldFBvc2l0aW9uaW5nOntob3Jpem9udGFsOidhdXRvJyx2ZXJ0aWNhbDonYXV0byd9LHdpZGdldFBhcmVudDpudWxsLGlnbm9yZVJlYWRvbmx5OmZhbHNlLGtlZXBPcGVuOmZhbHNlLGZvY3VzT25TaG93OnRydWUsaW5saW5lOmZhbHNlLGtlZXBJbnZhbGlkOmZhbHNlLGtleUJpbmRzOnt1cDpmdW5jdGlvbiB1cCgpe2lmKCF0aGlzLndpZGdldCl7cmV0dXJuIGZhbHNlO30KdmFyIGQ9dGhpcy5fZGF0ZXNbMF18fHRoaXMuZ2V0TW9tZW50KCk7aWYodGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXInKS5pcygnOnZpc2libGUnKSl7dGhpcy5kYXRlKGQuY2xvbmUoKS5zdWJ0cmFjdCg3LCdkJykpO31lbHNle3RoaXMuZGF0ZShkLmNsb25lKCkuYWRkKHRoaXMuc3RlcHBpbmcoKSwnbScpKTt9CnJldHVybiB0cnVlO30sZG93bjpmdW5jdGlvbiBkb3duKCl7aWYoIXRoaXMud2lkZ2V0KXt0aGlzLnNob3coKTtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLmFkZCg3LCdkJykpO31lbHNle3RoaXMuZGF0ZShkLmNsb25lKCkuc3VidHJhY3QodGhpcy5zdGVwcGluZygpLCdtJykpO30KcmV0dXJuIHRydWU7fSwnY29udHJvbCB1cCc6ZnVuY3Rpb24gY29udHJvbFVwKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp2YXIgZD10aGlzLl9kYXRlc1swXXx8dGhpcy5nZXRNb21lbnQoKTtpZih0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlcicpLmlzKCc6dmlzaWJsZScpKXt0aGlzLmRhdGUoZC5jbG9uZSgpLnN1YnRyYWN0KDEsJ3knKSk7fWVsc2V7dGhpcy5kYXRlKGQuY2xvbmUoKS5hZGQoMSwnaCcpKTt9CnJldHVybiB0cnVlO30sJ2NvbnRyb2wgZG93bic6ZnVuY3Rpb24gY29udHJvbERvd24oKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuYWRkKDEsJ3knKSk7fWVsc2V7dGhpcy5kYXRlKGQuY2xvbmUoKS5zdWJ0cmFjdCgxLCdoJykpO30KcmV0dXJuIHRydWU7fSxsZWZ0OmZ1bmN0aW9uIGxlZnQoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuc3VidHJhY3QoMSwnZCcpKTt9CnJldHVybiB0cnVlO30scmlnaHQ6ZnVuY3Rpb24gcmlnaHQoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuYWRkKDEsJ2QnKSk7fQpyZXR1cm4gdHJ1ZTt9LHBhZ2VVcDpmdW5jdGlvbiBwYWdlVXAoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuc3VidHJhY3QoMSwnTScpKTt9CnJldHVybiB0cnVlO30scGFnZURvd246ZnVuY3Rpb24gcGFnZURvd24oKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnZhciBkPXRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpO2lmKHRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyJykuaXMoJzp2aXNpYmxlJykpe3RoaXMuZGF0ZShkLmNsb25lKCkuYWRkKDEsJ00nKSk7fQpyZXR1cm4gdHJ1ZTt9LGVudGVyOmZ1bmN0aW9uIGVudGVyKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm4gZmFsc2U7fQp0aGlzLmhpZGUoKTtyZXR1cm4gdHJ1ZTt9LGVzY2FwZTpmdW5jdGlvbiBlc2NhcGUoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnRoaXMuaGlkZSgpO3JldHVybiB0cnVlO30sJ2NvbnRyb2wgc3BhY2UnOmZ1bmN0aW9uIGNvbnRyb2xTcGFjZSgpe2lmKCF0aGlzLndpZGdldCl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXInKS5pcygnOnZpc2libGUnKSl7dGhpcy53aWRnZXQuZmluZCgnLmJ0bltkYXRhLWFjdGlvbj0idG9nZ2xlUGVyaW9kIl0nKS5jbGljaygpO30KcmV0dXJuIHRydWU7fSx0OmZ1bmN0aW9uIHQoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnRoaXMuZGF0ZSh0aGlzLmdldE1vbWVudCgpKTtyZXR1cm4gdHJ1ZTt9LCdkZWxldGUnOmZ1bmN0aW9uIF9kZWxldGUoKXtpZighdGhpcy53aWRnZXQpe3JldHVybiBmYWxzZTt9CnRoaXMuY2xlYXIoKTtyZXR1cm4gdHJ1ZTt9fSxkZWJ1ZzpmYWxzZSxhbGxvd0lucHV0VG9nZ2xlOmZhbHNlLGRpc2FibGVkVGltZUludGVydmFsczpmYWxzZSxkaXNhYmxlZEhvdXJzOmZhbHNlLGVuYWJsZWRIb3VyczpmYWxzZSx2aWV3RGF0ZTpmYWxzZSxhbGxvd011bHRpZGF0ZTpmYWxzZSxtdWx0aWRhdGVTZXBhcmF0b3I6JywnfTt2YXIgRGF0ZVRpbWVQaWNrZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEYXRlVGltZVBpY2tlcihlbGVtZW50LG9wdGlvbnMpe19jbGFzc0NhbGxDaGVjayh0aGlzLERhdGVUaW1lUGlja2VyKTt0aGlzLl9vcHRpb25zPXRoaXMuX2dldE9wdGlvbnMob3B0aW9ucyk7dGhpcy5fZWxlbWVudD1lbGVtZW50O3RoaXMuX2RhdGVzPVtdO3RoaXMuX2RhdGVzRm9ybWF0dGVkPVtdO3RoaXMuX3ZpZXdEYXRlPW51bGw7dGhpcy51bnNldD10cnVlO3RoaXMuY29tcG9uZW50PWZhbHNlO3RoaXMud2lkZ2V0PWZhbHNlO3RoaXMudXNlMjRIb3Vycz1udWxsO3RoaXMuYWN0dWFsRm9ybWF0PW51bGw7dGhpcy5wYXJzZUZvcm1hdHM9bnVsbDt0aGlzLmN1cnJlbnRWaWV3TW9kZT1udWxsO3RoaXMuX2ludCgpO30KRGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pbnQ9ZnVuY3Rpb24gX2ludCgpe3ZhciB0YXJnZXRJbnB1dD10aGlzLl9lbGVtZW50LmRhdGEoJ3RhcmdldC1pbnB1dCcpO2lmKHRoaXMuX2VsZW1lbnQuaXMoJ2lucHV0Jykpe3RoaXMuaW5wdXQ9dGhpcy5fZWxlbWVudDt9ZWxzZSBpZih0YXJnZXRJbnB1dCE9PXVuZGVmaW5lZCl7aWYodGFyZ2V0SW5wdXQ9PT0nbmVhcmVzdCcpe3RoaXMuaW5wdXQ9dGhpcy5fZWxlbWVudC5maW5kKCdpbnB1dCcpO31lbHNle3RoaXMuaW5wdXQ9JCh0YXJnZXRJbnB1dCk7fX0KdGhpcy5fZGF0ZXM9W107dGhpcy5fZGF0ZXNbMF09dGhpcy5nZXRNb21lbnQoKTt0aGlzLl92aWV3RGF0ZT10aGlzLmdldE1vbWVudCgpLmNsb25lKCk7JC5leHRlbmQodHJ1ZSx0aGlzLl9vcHRpb25zLHRoaXMuX2RhdGFUb09wdGlvbnMoKSk7dGhpcy5vcHRpb25zKHRoaXMuX29wdGlvbnMpO3RoaXMuX2luaXRGb3JtYXR0aW5nKCk7aWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCYmdGhpcy5pbnB1dC5pcygnaW5wdXQnKSYmdGhpcy5pbnB1dC52YWwoKS50cmltKCkubGVuZ3RoIT09MCl7dGhpcy5fc2V0VmFsdWUodGhpcy5fcGFyc2VJbnB1dERhdGUodGhpcy5pbnB1dC52YWwoKS50cmltKCkpLDApO31lbHNlIGlmKHRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGUmJnRoaXMuaW5wdXQhPT11bmRlZmluZWQmJnRoaXMuaW5wdXQuYXR0cigncGxhY2Vob2xkZXInKT09PXVuZGVmaW5lZCl7dGhpcy5fc2V0VmFsdWUodGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZSwwKTt9CmlmKHRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLnNob3coKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbiBfdXBkYXRlKCl7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm47fQp0aGlzLl9maWxsRGF0ZSgpO3RoaXMuX2ZpbGxUaW1lKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX3NldFZhbHVlPWZ1bmN0aW9uIF9zZXRWYWx1ZSh0YXJnZXRNb21lbnQsaW5kZXgpe3ZhciBvbGREYXRlPXRoaXMudW5zZXQ/bnVsbDp0aGlzLl9kYXRlc1tpbmRleF07dmFyIG91dHBWYWx1ZT0nJztpZighdGFyZ2V0TW9tZW50KXtpZighdGhpcy5fb3B0aW9ucy5hbGxvd011bHRpZGF0ZXx8dGhpcy5fZGF0ZXMubGVuZ3RoPT09MSl7dGhpcy51bnNldD10cnVlO3RoaXMuX2RhdGVzPVtdO3RoaXMuX2RhdGVzRm9ybWF0dGVkPVtdO31lbHNle291dHBWYWx1ZT10aGlzLl9lbGVtZW50LmRhdGEoJ2RhdGUnKSsnLCc7b3V0cFZhbHVlPW91dHBWYWx1ZS5yZXBsYWNlKG9sZERhdGUuZm9ybWF0KHRoaXMuYWN0dWFsRm9ybWF0KSsnLCcsJycpLnJlcGxhY2UoJywsJywnJykucmVwbGFjZSgvLFxzKiQvLCcnKTt0aGlzLl9kYXRlcy5zcGxpY2UoaW5kZXgsMSk7dGhpcy5fZGF0ZXNGb3JtYXR0ZWQuc3BsaWNlKGluZGV4LDEpO30KaWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCl7dGhpcy5pbnB1dC52YWwob3V0cFZhbHVlKTt0aGlzLmlucHV0LnRyaWdnZXIoJ2lucHV0Jyk7fQp0aGlzLl9lbGVtZW50LmRhdGEoJ2RhdGUnLG91dHBWYWx1ZSk7dGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuQ0hBTkdFLGRhdGU6ZmFsc2Usb2xkRGF0ZTpvbGREYXRlfSk7dGhpcy5fdXBkYXRlKCk7cmV0dXJuO30KdGFyZ2V0TW9tZW50PXRhcmdldE1vbWVudC5jbG9uZSgpLmxvY2FsZSh0aGlzLl9vcHRpb25zLmxvY2FsZSk7aWYodGhpcy5faGFzVGltZVpvbmUoKSl7dGFyZ2V0TW9tZW50LnR6KHRoaXMuX29wdGlvbnMudGltZVpvbmUpO30KaWYodGhpcy5fb3B0aW9ucy5zdGVwcGluZyE9PTEpe3RhcmdldE1vbWVudC5taW51dGVzKE1hdGgucm91bmQodGFyZ2V0TW9tZW50Lm1pbnV0ZXMoKS90aGlzLl9vcHRpb25zLnN0ZXBwaW5nKSp0aGlzLl9vcHRpb25zLnN0ZXBwaW5nKS5zZWNvbmRzKDApO30KaWYodGhpcy5faXNWYWxpZCh0YXJnZXRNb21lbnQpKXt0aGlzLl9kYXRlc1tpbmRleF09dGFyZ2V0TW9tZW50O3RoaXMuX2RhdGVzRm9ybWF0dGVkW2luZGV4XT10YXJnZXRNb21lbnQuZm9ybWF0KCdZWVlZLU1NLUREJyk7dGhpcy5fdmlld0RhdGU9dGFyZ2V0TW9tZW50LmNsb25lKCk7aWYodGhpcy5fb3B0aW9ucy5hbGxvd011bHRpZGF0ZSYmdGhpcy5fZGF0ZXMubGVuZ3RoPjEpe2Zvcih2YXIgaT0wO2k8dGhpcy5fZGF0ZXMubGVuZ3RoO2krKyl7b3V0cFZhbHVlKz0nJyt0aGlzLl9kYXRlc1tpXS5mb3JtYXQodGhpcy5hY3R1YWxGb3JtYXQpK3RoaXMuX29wdGlvbnMubXVsdGlkYXRlU2VwYXJhdG9yO30Kb3V0cFZhbHVlPW91dHBWYWx1ZS5yZXBsYWNlKC8sXHMqJC8sJycpO31lbHNle291dHBWYWx1ZT10aGlzLl9kYXRlc1tpbmRleF0uZm9ybWF0KHRoaXMuYWN0dWFsRm9ybWF0KTt9CmlmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQpe3RoaXMuaW5wdXQudmFsKG91dHBWYWx1ZSk7dGhpcy5pbnB1dC50cmlnZ2VyKCdpbnB1dCcpO30KdGhpcy5fZWxlbWVudC5kYXRhKCdkYXRlJyxvdXRwVmFsdWUpO3RoaXMudW5zZXQ9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7dGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuQ0hBTkdFLGRhdGU6dGhpcy5fZGF0ZXNbaW5kZXhdLmNsb25lKCksb2xkRGF0ZTpvbGREYXRlfSk7fWVsc2V7aWYoIXRoaXMuX29wdGlvbnMua2VlcEludmFsaWQpe2lmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQpe3RoaXMuaW5wdXQudmFsKCcnKyh0aGlzLnVuc2V0PycnOnRoaXMuX2RhdGVzW2luZGV4XS5mb3JtYXQodGhpcy5hY3R1YWxGb3JtYXQpKSk7dGhpcy5pbnB1dC50cmlnZ2VyKCdpbnB1dCcpO319ZWxzZXt0aGlzLl9ub3RpZnlFdmVudCh7dHlwZTpEYXRlVGltZVBpY2tlci5FdmVudC5DSEFOR0UsZGF0ZTp0YXJnZXRNb21lbnQsb2xkRGF0ZTpvbGREYXRlfSk7fQp0aGlzLl9ub3RpZnlFdmVudCh7dHlwZTpEYXRlVGltZVBpY2tlci5FdmVudC5FUlJPUixkYXRlOnRhcmdldE1vbWVudCxvbGREYXRlOm9sZERhdGV9KTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2NoYW5nZT1mdW5jdGlvbiBfY2hhbmdlKGUpe3ZhciB2YWw9JChlLnRhcmdldCkudmFsKCkudHJpbSgpLHBhcnNlZERhdGU9dmFsP3RoaXMuX3BhcnNlSW5wdXREYXRlKHZhbCk6bnVsbDt0aGlzLl9zZXRWYWx1ZShwYXJzZWREYXRlKTtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3JldHVybiBmYWxzZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5fZ2V0T3B0aW9ucz1mdW5jdGlvbiBfZ2V0T3B0aW9ucyhvcHRpb25zKXtvcHRpb25zPSQuZXh0ZW5kKHRydWUse30sRGVmYXVsdCxvcHRpb25zKTtyZXR1cm4gb3B0aW9uczt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faGFzVGltZVpvbmU9ZnVuY3Rpb24gX2hhc1RpbWVab25lKCl7cmV0dXJuIG1vbWVudC50eiE9PXVuZGVmaW5lZCYmdGhpcy5fb3B0aW9ucy50aW1lWm9uZSE9PXVuZGVmaW5lZCYmdGhpcy5fb3B0aW9ucy50aW1lWm9uZSE9PW51bGwmJnRoaXMuX29wdGlvbnMudGltZVpvbmUhPT0nJzt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faXNFbmFibGVkPWZ1bmN0aW9uIF9pc0VuYWJsZWQoZ3JhbnVsYXJpdHkpe2lmKHR5cGVvZiBncmFudWxhcml0eSE9PSdzdHJpbmcnfHxncmFudWxhcml0eS5sZW5ndGg+MSl7dGhyb3cgbmV3IFR5cGVFcnJvcignaXNFbmFibGVkIGV4cGVjdHMgYSBzaW5nbGUgY2hhcmFjdGVyIHN0cmluZyBwYXJhbWV0ZXInKTt9CnN3aXRjaChncmFudWxhcml0eSl7Y2FzZSd5JzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQuaW5kZXhPZignWScpIT09LTE7Y2FzZSdNJzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQuaW5kZXhPZignTScpIT09LTE7Y2FzZSdkJzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdkJykhPT0tMTtjYXNlJ2gnOmNhc2UnSCc6cmV0dXJuIHRoaXMuYWN0dWFsRm9ybWF0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignaCcpIT09LTE7Y2FzZSdtJzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQuaW5kZXhPZignbScpIT09LTE7Y2FzZSdzJzpyZXR1cm4gdGhpcy5hY3R1YWxGb3JtYXQuaW5kZXhPZigncycpIT09LTE7Y2FzZSdhJzpjYXNlJ0EnOnJldHVybiB0aGlzLmFjdHVhbEZvcm1hdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2EnKSE9PS0xO2RlZmF1bHQ6cmV0dXJuIGZhbHNlO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faGFzVGltZT1mdW5jdGlvbiBfaGFzVGltZSgpe3JldHVybiB0aGlzLl9pc0VuYWJsZWQoJ2gnKXx8dGhpcy5faXNFbmFibGVkKCdtJyl8fHRoaXMuX2lzRW5hYmxlZCgncycpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9oYXNEYXRlPWZ1bmN0aW9uIF9oYXNEYXRlKCl7cmV0dXJuIHRoaXMuX2lzRW5hYmxlZCgneScpfHx0aGlzLl9pc0VuYWJsZWQoJ00nKXx8dGhpcy5faXNFbmFibGVkKCdkJyk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2RhdGFUb09wdGlvbnM9ZnVuY3Rpb24gX2RhdGFUb09wdGlvbnMoKXt2YXIgZURhdGE9dGhpcy5fZWxlbWVudC5kYXRhKCk7dmFyIGRhdGFPcHRpb25zPXt9O2lmKGVEYXRhLmRhdGVPcHRpb25zJiZlRGF0YS5kYXRlT3B0aW9ucyBpbnN0YW5jZW9mIE9iamVjdCl7ZGF0YU9wdGlvbnM9JC5leHRlbmQodHJ1ZSxkYXRhT3B0aW9ucyxlRGF0YS5kYXRlT3B0aW9ucyk7fQokLmVhY2godGhpcy5fb3B0aW9ucyxmdW5jdGlvbihrZXkpe3ZhciBhdHRyaWJ1dGVOYW1lPSdkYXRlJytrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkra2V5LnNsaWNlKDEpO2lmKGVEYXRhW2F0dHJpYnV0ZU5hbWVdIT09dW5kZWZpbmVkKXtkYXRhT3B0aW9uc1trZXldPWVEYXRhW2F0dHJpYnV0ZU5hbWVdO31lbHNle2RlbGV0ZSBkYXRhT3B0aW9uc1trZXldO319KTtyZXR1cm4gZGF0YU9wdGlvbnM7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX25vdGlmeUV2ZW50PWZ1bmN0aW9uIF9ub3RpZnlFdmVudChlKXtpZihlLnR5cGU9PT1EYXRlVGltZVBpY2tlci5FdmVudC5DSEFOR0Upe2lmKCFlLmRhdGUmJiFlLm9sZERhdGUpe3JldHVybjt9CnZhciBib3RoVVRDPWUuZGF0ZSYmZS5vbGREYXRlJiZlLmRhdGUuX2lzVVRDPT09ZS5vbGREYXRlLl9pc1VUQztpZihib3RoVVRDJiZlLmRhdGUuaXNTYW1lKGUub2xkRGF0ZSkpe3JldHVybjt9fQp0aGlzLl9lbGVtZW50LnRyaWdnZXIoZSk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX3ZpZXdVcGRhdGU9ZnVuY3Rpb24gX3ZpZXdVcGRhdGUoZSl7aWYoZT09PSd5Jyl7ZT0nWVlZWSc7fQp0aGlzLl9ub3RpZnlFdmVudCh7dHlwZTpEYXRlVGltZVBpY2tlci5FdmVudC5VUERBVEUsY2hhbmdlOmUsdmlld0RhdGU6dGhpcy5fdmlld0RhdGUuY2xvbmUoKX0pO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9zaG93TW9kZT1mdW5jdGlvbiBfc2hvd01vZGUoZGlyKXtpZighdGhpcy53aWRnZXQpe3JldHVybjt9CmlmKGRpcil7dGhpcy5jdXJyZW50Vmlld01vZGU9TWF0aC5tYXgoTWluVmlld01vZGVOdW1iZXIsTWF0aC5taW4oMyx0aGlzLmN1cnJlbnRWaWV3TW9kZStkaXIpKTt9CnRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyID4gZGl2JykuaGlkZSgpLmZpbHRlcignLmRhdGVwaWNrZXItJytEYXRlUGlja2VyTW9kZXNbdGhpcy5jdXJyZW50Vmlld01vZGVdLkNMQVNTX05BTUUpLnNob3coKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faXNJbkRpc2FibGVkRGF0ZXM9ZnVuY3Rpb24gX2lzSW5EaXNhYmxlZERhdGVzKHRlc3REYXRlKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzW3Rlc3REYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpXT09PXRydWU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2lzSW5FbmFibGVkRGF0ZXM9ZnVuY3Rpb24gX2lzSW5FbmFibGVkRGF0ZXModGVzdERhdGUpe3JldHVybiB0aGlzLl9vcHRpb25zLmVuYWJsZWREYXRlc1t0ZXN0RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV09PT10cnVlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pc0luRGlzYWJsZWRIb3Vycz1mdW5jdGlvbiBfaXNJbkRpc2FibGVkSG91cnModGVzdERhdGUpe3JldHVybiB0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnNbdGVzdERhdGUuZm9ybWF0KCdIJyldPT09dHJ1ZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faXNJbkVuYWJsZWRIb3Vycz1mdW5jdGlvbiBfaXNJbkVuYWJsZWRIb3Vycyh0ZXN0RGF0ZSl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzW3Rlc3REYXRlLmZvcm1hdCgnSCcpXT09PXRydWU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2lzVmFsaWQ9ZnVuY3Rpb24gX2lzVmFsaWQodGFyZ2V0TW9tZW50LGdyYW51bGFyaXR5KXtpZighdGFyZ2V0TW9tZW50LmlzVmFsaWQoKSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzJiZncmFudWxhcml0eT09PSdkJyYmdGhpcy5faXNJbkRpc2FibGVkRGF0ZXModGFyZ2V0TW9tZW50KSl7cmV0dXJuIGZhbHNlO30KaWYodGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXMmJmdyYW51bGFyaXR5PT09J2QnJiYhdGhpcy5faXNJbkVuYWJsZWREYXRlcyh0YXJnZXRNb21lbnQpKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLm1pbkRhdGUmJnRhcmdldE1vbWVudC5pc0JlZm9yZSh0aGlzLl9vcHRpb25zLm1pbkRhdGUsZ3JhbnVsYXJpdHkpKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLm1heERhdGUmJnRhcmdldE1vbWVudC5pc0FmdGVyKHRoaXMuX29wdGlvbnMubWF4RGF0ZSxncmFudWxhcml0eSkpe3JldHVybiBmYWxzZTt9CmlmKHRoaXMuX29wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkJiZncmFudWxhcml0eT09PSdkJyYmdGhpcy5fb3B0aW9ucy5kYXlzT2ZXZWVrRGlzYWJsZWQuaW5kZXhPZih0YXJnZXRNb21lbnQuZGF5KCkpIT09LTEpe3JldHVybiBmYWxzZTt9CmlmKHRoaXMuX29wdGlvbnMuZGlzYWJsZWRIb3VycyYmKGdyYW51bGFyaXR5PT09J2gnfHxncmFudWxhcml0eT09PSdtJ3x8Z3JhbnVsYXJpdHk9PT0ncycpJiZ0aGlzLl9pc0luRGlzYWJsZWRIb3Vycyh0YXJnZXRNb21lbnQpKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLmVuYWJsZWRIb3VycyYmKGdyYW51bGFyaXR5PT09J2gnfHxncmFudWxhcml0eT09PSdtJ3x8Z3JhbnVsYXJpdHk9PT0ncycpJiYhdGhpcy5faXNJbkVuYWJsZWRIb3Vycyh0YXJnZXRNb21lbnQpKXtyZXR1cm4gZmFsc2U7fQppZih0aGlzLl9vcHRpb25zLmRpc2FibGVkVGltZUludGVydmFscyYmKGdyYW51bGFyaXR5PT09J2gnfHxncmFudWxhcml0eT09PSdtJ3x8Z3JhbnVsYXJpdHk9PT0ncycpKXt2YXIgZm91bmQ9ZmFsc2U7JC5lYWNoKHRoaXMuX29wdGlvbnMuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzLGZ1bmN0aW9uKCl7aWYodGFyZ2V0TW9tZW50LmlzQmV0d2Vlbih0aGlzWzBdLHRoaXNbMV0pKXtmb3VuZD10cnVlO3JldHVybiBmYWxzZTt9fSk7aWYoZm91bmQpe3JldHVybiBmYWxzZTt9fQpyZXR1cm4gdHJ1ZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5fcGFyc2VJbnB1dERhdGU9ZnVuY3Rpb24gX3BhcnNlSW5wdXREYXRlKGlucHV0RGF0ZSl7aWYodGhpcy5fb3B0aW9ucy5wYXJzZUlucHV0RGF0ZT09PXVuZGVmaW5lZCl7aWYoIW1vbWVudC5pc01vbWVudChpbnB1dERhdGUpKXtpbnB1dERhdGU9dGhpcy5nZXRNb21lbnQoaW5wdXREYXRlKTt9fWVsc2V7aW5wdXREYXRlPXRoaXMuX29wdGlvbnMucGFyc2VJbnB1dERhdGUoaW5wdXREYXRlKTt9CnJldHVybiBpbnB1dERhdGU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2tleWRvd249ZnVuY3Rpb24gX2tleWRvd24oZSl7dmFyIGhhbmRsZXI9bnVsbCxpbmRleD12b2lkIDAsaW5kZXgyPXZvaWQgMCxrZXlCaW5kS2V5cz12b2lkIDAsYWxsTW9kaWZpZXJzUHJlc3NlZD12b2lkIDA7dmFyIHByZXNzZWRLZXlzPVtdLHByZXNzZWRNb2RpZmllcnM9e30sY3VycmVudEtleT1lLndoaWNoLHByZXNzZWQ9J3AnO2tleVN0YXRlW2N1cnJlbnRLZXldPXByZXNzZWQ7Zm9yKGluZGV4IGluIGtleVN0YXRlKXtpZihrZXlTdGF0ZS5oYXNPd25Qcm9wZXJ0eShpbmRleCkmJmtleVN0YXRlW2luZGV4XT09PXByZXNzZWQpe3ByZXNzZWRLZXlzLnB1c2goaW5kZXgpO2lmKHBhcnNlSW50KGluZGV4LDEwKSE9PWN1cnJlbnRLZXkpe3ByZXNzZWRNb2RpZmllcnNbaW5kZXhdPXRydWU7fX19CmZvcihpbmRleCBpbiB0aGlzLl9vcHRpb25zLmtleUJpbmRzKXtpZih0aGlzLl9vcHRpb25zLmtleUJpbmRzLmhhc093blByb3BlcnR5KGluZGV4KSYmdHlwZW9mIHRoaXMuX29wdGlvbnMua2V5QmluZHNbaW5kZXhdPT09J2Z1bmN0aW9uJyl7a2V5QmluZEtleXM9aW5kZXguc3BsaXQoJyAnKTtpZihrZXlCaW5kS2V5cy5sZW5ndGg9PT1wcmVzc2VkS2V5cy5sZW5ndGgmJktleU1hcFtjdXJyZW50S2V5XT09PWtleUJpbmRLZXlzW2tleUJpbmRLZXlzLmxlbmd0aC0xXSl7YWxsTW9kaWZpZXJzUHJlc3NlZD10cnVlO2ZvcihpbmRleDI9a2V5QmluZEtleXMubGVuZ3RoLTI7aW5kZXgyPj0wO2luZGV4Mi0tKXtpZighKEtleU1hcFtrZXlCaW5kS2V5c1tpbmRleDJdXWluIHByZXNzZWRNb2RpZmllcnMpKXthbGxNb2RpZmllcnNQcmVzc2VkPWZhbHNlO2JyZWFrO319CmlmKGFsbE1vZGlmaWVyc1ByZXNzZWQpe2hhbmRsZXI9dGhpcy5fb3B0aW9ucy5rZXlCaW5kc1tpbmRleF07YnJlYWs7fX19fQppZihoYW5kbGVyKXtpZihoYW5kbGVyLmNhbGwodGhpcykpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO319fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2tleXVwPWZ1bmN0aW9uIF9rZXl1cChlKXtrZXlTdGF0ZVtlLndoaWNoXT0ncic7aWYoa2V5UHJlc3NIYW5kbGVkW2Uud2hpY2hdKXtrZXlQcmVzc0hhbmRsZWRbZS53aGljaF09ZmFsc2U7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLl9pbmRleEdpdmVuRGF0ZXM9ZnVuY3Rpb24gX2luZGV4R2l2ZW5EYXRlcyhnaXZlbkRhdGVzQXJyYXkpe3ZhciBnaXZlbkRhdGVzSW5kZXhlZD17fSxzZWxmPXRoaXM7JC5lYWNoKGdpdmVuRGF0ZXNBcnJheSxmdW5jdGlvbigpe3ZhciBkRGF0ZT1zZWxmLl9wYXJzZUlucHV0RGF0ZSh0aGlzKTtpZihkRGF0ZS5pc1ZhbGlkKCkpe2dpdmVuRGF0ZXNJbmRleGVkW2REYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpXT10cnVlO319KTtyZXR1cm4gT2JqZWN0LmtleXMoZ2l2ZW5EYXRlc0luZGV4ZWQpLmxlbmd0aD9naXZlbkRhdGVzSW5kZXhlZDpmYWxzZTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5faW5kZXhHaXZlbkhvdXJzPWZ1bmN0aW9uIF9pbmRleEdpdmVuSG91cnMoZ2l2ZW5Ib3Vyc0FycmF5KXt2YXIgZ2l2ZW5Ib3Vyc0luZGV4ZWQ9e307JC5lYWNoKGdpdmVuSG91cnNBcnJheSxmdW5jdGlvbigpe2dpdmVuSG91cnNJbmRleGVkW3RoaXNdPXRydWU7fSk7cmV0dXJuIE9iamVjdC5rZXlzKGdpdmVuSG91cnNJbmRleGVkKS5sZW5ndGg/Z2l2ZW5Ib3Vyc0luZGV4ZWQ6ZmFsc2U7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2luaXRGb3JtYXR0aW5nPWZ1bmN0aW9uIF9pbml0Rm9ybWF0dGluZygpe3ZhciBmb3JtYXQ9dGhpcy5fb3B0aW9ucy5mb3JtYXR8fCdMIExUJyxzZWxmPXRoaXM7dGhpcy5hY3R1YWxGb3JtYXQ9Zm9ybWF0LnJlcGxhY2UoLyhcW1teXFtdKl0pfChcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZyxmdW5jdGlvbihmb3JtYXRJbnB1dCl7cmV0dXJuIHNlbGYuX2RhdGVzWzBdLmxvY2FsZURhdGEoKS5sb25nRGF0ZUZvcm1hdChmb3JtYXRJbnB1dCl8fGZvcm1hdElucHV0O30pO3RoaXMucGFyc2VGb3JtYXRzPXRoaXMuX29wdGlvbnMuZXh0cmFGb3JtYXRzP3RoaXMuX29wdGlvbnMuZXh0cmFGb3JtYXRzLnNsaWNlKCk6W107aWYodGhpcy5wYXJzZUZvcm1hdHMuaW5kZXhPZihmb3JtYXQpPDAmJnRoaXMucGFyc2VGb3JtYXRzLmluZGV4T2YodGhpcy5hY3R1YWxGb3JtYXQpPDApe3RoaXMucGFyc2VGb3JtYXRzLnB1c2godGhpcy5hY3R1YWxGb3JtYXQpO30KdGhpcy51c2UyNEhvdXJzPXRoaXMuYWN0dWFsRm9ybWF0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYScpPDEmJnRoaXMuYWN0dWFsRm9ybWF0LnJlcGxhY2UoL1xbLio/XS9nLCcnKS5pbmRleE9mKCdoJyk8MTtpZih0aGlzLl9pc0VuYWJsZWQoJ3knKSl7TWluVmlld01vZGVOdW1iZXI9Mjt9CmlmKHRoaXMuX2lzRW5hYmxlZCgnTScpKXtNaW5WaWV3TW9kZU51bWJlcj0xO30KaWYodGhpcy5faXNFbmFibGVkKCdkJykpe01pblZpZXdNb2RlTnVtYmVyPTA7fQp0aGlzLmN1cnJlbnRWaWV3TW9kZT1NYXRoLm1heChNaW5WaWV3TW9kZU51bWJlcix0aGlzLmN1cnJlbnRWaWV3TW9kZSk7aWYoIXRoaXMudW5zZXQpe3RoaXMuX3NldFZhbHVlKHRoaXMuX2RhdGVzWzBdLDApO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5fZ2V0TGFzdFBpY2tlZERhdGU9ZnVuY3Rpb24gX2dldExhc3RQaWNrZWREYXRlKCl7cmV0dXJuIHRoaXMuX2RhdGVzW3RoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKV18fHRoaXMuZ2V0TW9tZW50KCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuX2dldExhc3RQaWNrZWREYXRlSW5kZXg9ZnVuY3Rpb24gX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKXtyZXR1cm4gdGhpcy5fZGF0ZXMubGVuZ3RoLTE7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZ2V0TW9tZW50PWZ1bmN0aW9uIGdldE1vbWVudChkKXt2YXIgcmV0dXJuTW9tZW50PXZvaWQgMDtpZihkPT09dW5kZWZpbmVkfHxkPT09bnVsbCl7cmV0dXJuTW9tZW50PW1vbWVudCgpO31lbHNlIGlmKHRoaXMuX2hhc1RpbWVab25lKCkpe3JldHVybk1vbWVudD1tb21lbnQudHooZCx0aGlzLnBhcnNlRm9ybWF0cyx0aGlzLl9vcHRpb25zLmxvY2FsZSx0aGlzLl9vcHRpb25zLnVzZVN0cmljdCx0aGlzLl9vcHRpb25zLnRpbWVab25lKTt9ZWxzZXtyZXR1cm5Nb21lbnQ9bW9tZW50KGQsdGhpcy5wYXJzZUZvcm1hdHMsdGhpcy5fb3B0aW9ucy5sb2NhbGUsdGhpcy5fb3B0aW9ucy51c2VTdHJpY3QpO30KaWYodGhpcy5faGFzVGltZVpvbmUoKSl7cmV0dXJuTW9tZW50LnR6KHRoaXMuX29wdGlvbnMudGltZVpvbmUpO30KcmV0dXJuIHJldHVybk1vbWVudDt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24gdG9nZ2xlKCl7cmV0dXJuIHRoaXMud2lkZ2V0P3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmlnbm9yZVJlYWRvbmx5PWZ1bmN0aW9uIGlnbm9yZVJlYWRvbmx5KF9pZ25vcmVSZWFkb25seSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmlnbm9yZVJlYWRvbmx5O30KaWYodHlwZW9mIF9pZ25vcmVSZWFkb25seSE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignaWdub3JlUmVhZG9ubHkgKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmlnbm9yZVJlYWRvbmx5PV9pZ25vcmVSZWFkb25seTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5vcHRpb25zPWZ1bmN0aW9uIG9wdGlvbnMobmV3T3B0aW9ucyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiAkLmV4dGVuZCh0cnVlLHt9LHRoaXMuX29wdGlvbnMpO30KaWYoIShuZXdPcHRpb25zIGluc3RhbmNlb2YgT2JqZWN0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucygpIHRoaXMub3B0aW9ucyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGFuIG9iamVjdCcpO30KJC5leHRlbmQodHJ1ZSx0aGlzLl9vcHRpb25zLG5ld09wdGlvbnMpO3ZhciBzZWxmPXRoaXM7JC5lYWNoKHRoaXMuX29wdGlvbnMsZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihzZWxmW2tleV0hPT11bmRlZmluZWQpe3NlbGZba2V5XSh2YWx1ZSk7fX0pO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRhdGU9ZnVuY3Rpb24gZGF0ZShuZXdEYXRlLGluZGV4KXtpbmRleD1pbmRleHx8MDtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7aWYodGhpcy51bnNldCl7cmV0dXJuIG51bGw7fQppZih0aGlzLl9vcHRpb25zLmFsbG93TXVsdGlkYXRlKXtyZXR1cm4gdGhpcy5fZGF0ZXMuam9pbih0aGlzLl9vcHRpb25zLm11bHRpZGF0ZVNlcGFyYXRvcik7fWVsc2V7cmV0dXJuIHRoaXMuX2RhdGVzW2luZGV4XS5jbG9uZSgpO319CmlmKG5ld0RhdGUhPT1udWxsJiZ0eXBlb2YgbmV3RGF0ZSE9PSdzdHJpbmcnJiYhbW9tZW50LmlzTW9tZW50KG5ld0RhdGUpJiYhKG5ld0RhdGUgaW5zdGFuY2VvZiBEYXRlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZGF0ZSgpIHBhcmFtZXRlciBtdXN0IGJlIG9uZSBvZiBbbnVsbCwgc3RyaW5nLCBtb21lbnQgb3IgRGF0ZV0nKTt9CnRoaXMuX3NldFZhbHVlKG5ld0RhdGU9PT1udWxsP251bGw6dGhpcy5fcGFyc2VJbnB1dERhdGUobmV3RGF0ZSksaW5kZXgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbiBmb3JtYXQobmV3Rm9ybWF0KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZm9ybWF0O30KaWYodHlwZW9mIG5ld0Zvcm1hdCE9PSdzdHJpbmcnJiYodHlwZW9mIG5ld0Zvcm1hdCE9PSdib29sZWFuJ3x8bmV3Rm9ybWF0IT09ZmFsc2UpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdmb3JtYXQoKSBleHBlY3RzIGEgc3RyaW5nIG9yIGJvb2xlYW46ZmFsc2UgcGFyYW1ldGVyICcrbmV3Rm9ybWF0KTt9CnRoaXMuX29wdGlvbnMuZm9ybWF0PW5ld0Zvcm1hdDtpZih0aGlzLmFjdHVhbEZvcm1hdCl7dGhpcy5faW5pdEZvcm1hdHRpbmcoKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUudGltZVpvbmU9ZnVuY3Rpb24gdGltZVpvbmUobmV3Wm9uZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLnRpbWVab25lO30KaWYodHlwZW9mIG5ld1pvbmUhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignbmV3Wm9uZSgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLnRpbWVab25lPW5ld1pvbmU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZGF5Vmlld0hlYWRlckZvcm1hdD1mdW5jdGlvbiBkYXlWaWV3SGVhZGVyRm9ybWF0KG5ld0Zvcm1hdCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRheVZpZXdIZWFkZXJGb3JtYXQ7fQppZih0eXBlb2YgbmV3Rm9ybWF0IT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RheVZpZXdIZWFkZXJGb3JtYXQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kYXlWaWV3SGVhZGVyRm9ybWF0PW5ld0Zvcm1hdDt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5leHRyYUZvcm1hdHM9ZnVuY3Rpb24gZXh0cmFGb3JtYXRzKGZvcm1hdHMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5leHRyYUZvcm1hdHM7fQppZihmb3JtYXRzIT09ZmFsc2UmJiEoZm9ybWF0cyBpbnN0YW5jZW9mIEFycmF5KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZXh0cmFGb3JtYXRzKCkgZXhwZWN0cyBhbiBhcnJheSBvciBmYWxzZSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZXh0cmFGb3JtYXRzPWZvcm1hdHM7aWYodGhpcy5wYXJzZUZvcm1hdHMpe3RoaXMuX2luaXRGb3JtYXR0aW5nKCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkRGF0ZXM9ZnVuY3Rpb24gZGlzYWJsZWREYXRlcyhkYXRlcyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRpc2FibGVkRGF0ZXM/JC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzKTp0aGlzLl9vcHRpb25zLmRpc2FibGVkRGF0ZXM7fQppZighZGF0ZXMpe3RoaXMuX29wdGlvbnMuZGlzYWJsZWREYXRlcz1mYWxzZTt0aGlzLl91cGRhdGUoKTtyZXR1cm4gdHJ1ZTt9CmlmKCEoZGF0ZXMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2Rpc2FibGVkRGF0ZXMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzPXRoaXMuX2luZGV4R2l2ZW5EYXRlcyhkYXRlcyk7dGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXM9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZW5hYmxlZERhdGVzPWZ1bmN0aW9uIGVuYWJsZWREYXRlcyhkYXRlcyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmVuYWJsZWREYXRlcz8kLmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zLmVuYWJsZWREYXRlcyk6dGhpcy5fb3B0aW9ucy5lbmFibGVkRGF0ZXM7fQppZighZGF0ZXMpe3RoaXMuX29wdGlvbnMuZW5hYmxlZERhdGVzPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYoIShkYXRlcyBpbnN0YW5jZW9mIEFycmF5KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZW5hYmxlZERhdGVzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZW5hYmxlZERhdGVzPXRoaXMuX2luZGV4R2l2ZW5EYXRlcyhkYXRlcyk7dGhpcy5fb3B0aW9ucy5kaXNhYmxlZERhdGVzPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRheXNPZldlZWtEaXNhYmxlZD1mdW5jdGlvbiBkYXlzT2ZXZWVrRGlzYWJsZWQoX2RheXNPZldlZWtEaXNhYmxlZCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZC5zcGxpY2UoMCk7fQppZih0eXBlb2YgX2RheXNPZldlZWtEaXNhYmxlZD09PSdib29sZWFuJyYmIV9kYXlzT2ZXZWVrRGlzYWJsZWQpe3RoaXMuX29wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkPWZhbHNlO3RoaXMuX3VwZGF0ZSgpO3JldHVybiB0cnVlO30KaWYoIShfZGF5c09mV2Vla0Rpc2FibGVkIGluc3RhbmNlb2YgQXJyYXkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdkYXlzT2ZXZWVrRGlzYWJsZWQoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kYXlzT2ZXZWVrRGlzYWJsZWQ9X2RheXNPZldlZWtEaXNhYmxlZC5yZWR1Y2UoZnVuY3Rpb24ocHJldmlvdXNWYWx1ZSxjdXJyZW50VmFsdWUpe2N1cnJlbnRWYWx1ZT1wYXJzZUludChjdXJyZW50VmFsdWUsMTApO2lmKGN1cnJlbnRWYWx1ZT42fHxjdXJyZW50VmFsdWU8MHx8aXNOYU4oY3VycmVudFZhbHVlKSl7cmV0dXJuIHByZXZpb3VzVmFsdWU7fQppZihwcmV2aW91c1ZhbHVlLmluZGV4T2YoY3VycmVudFZhbHVlKT09PS0xKXtwcmV2aW91c1ZhbHVlLnB1c2goY3VycmVudFZhbHVlKTt9CnJldHVybiBwcmV2aW91c1ZhbHVlO30sW10pLnNvcnQoKTtpZih0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnQmJiF0aGlzLl9vcHRpb25zLmtlZXBJbnZhbGlkKXtmb3IodmFyIGk9MDtpPHRoaXMuX2RhdGVzLmxlbmd0aDtpKyspe3ZhciB0cmllcz0wO3doaWxlKCF0aGlzLl9pc1ZhbGlkKHRoaXMuX2RhdGVzW2ldLCdkJykpe3RoaXMuX2RhdGVzW2ldLmFkZCgxLCdkJyk7aWYodHJpZXM9PT0zMSl7dGhyb3cnVHJpZWQgMzEgdGltZXMgdG8gZmluZCBhIHZhbGlkIGRhdGUnO30KdHJpZXMrKzt9CnRoaXMuX3NldFZhbHVlKHRoaXMuX2RhdGVzW2ldLGkpO319CnRoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLm1heERhdGU9ZnVuY3Rpb24gbWF4RGF0ZShfbWF4RGF0ZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLm1heERhdGU/dGhpcy5fb3B0aW9ucy5tYXhEYXRlLmNsb25lKCk6dGhpcy5fb3B0aW9ucy5tYXhEYXRlO30KaWYodHlwZW9mIF9tYXhEYXRlPT09J2Jvb2xlYW4nJiZfbWF4RGF0ZT09PWZhbHNlKXt0aGlzLl9vcHRpb25zLm1heERhdGU9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZih0eXBlb2YgX21heERhdGU9PT0nc3RyaW5nJyl7aWYoX21heERhdGU9PT0nbm93J3x8X21heERhdGU9PT0nbW9tZW50Jyl7X21heERhdGU9dGhpcy5nZXRNb21lbnQoKTt9fQp2YXIgcGFyc2VkRGF0ZT10aGlzLl9wYXJzZUlucHV0RGF0ZShfbWF4RGF0ZSk7aWYoIXBhcnNlZERhdGUuaXNWYWxpZCgpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXhEYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiAnK19tYXhEYXRlKTt9CmlmKHRoaXMuX29wdGlvbnMubWluRGF0ZSYmcGFyc2VkRGF0ZS5pc0JlZm9yZSh0aGlzLl9vcHRpb25zLm1pbkRhdGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXhEYXRlKCkgZGF0ZSBwYXJhbWV0ZXIgaXMgYmVmb3JlIHRoaXMub3B0aW9ucy5taW5EYXRlOiAnK3BhcnNlZERhdGUuZm9ybWF0KHRoaXMuYWN0dWFsRm9ybWF0KSk7fQp0aGlzLl9vcHRpb25zLm1heERhdGU9cGFyc2VkRGF0ZTtmb3IodmFyIGk9MDtpPHRoaXMuX2RhdGVzLmxlbmd0aDtpKyspe2lmKHRoaXMuX29wdGlvbnMudXNlQ3VycmVudCYmIXRoaXMuX29wdGlvbnMua2VlcEludmFsaWQmJnRoaXMuX2RhdGVzW2ldLmlzQWZ0ZXIoX21heERhdGUpKXt0aGlzLl9zZXRWYWx1ZSh0aGlzLl9vcHRpb25zLm1heERhdGUsaSk7fX0KaWYodGhpcy5fdmlld0RhdGUuaXNBZnRlcihwYXJzZWREYXRlKSl7dGhpcy5fdmlld0RhdGU9cGFyc2VkRGF0ZS5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuX29wdGlvbnMuc3RlcHBpbmcsJ20nKTt9CnRoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLm1pbkRhdGU9ZnVuY3Rpb24gbWluRGF0ZShfbWluRGF0ZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLm1pbkRhdGU/dGhpcy5fb3B0aW9ucy5taW5EYXRlLmNsb25lKCk6dGhpcy5fb3B0aW9ucy5taW5EYXRlO30KaWYodHlwZW9mIF9taW5EYXRlPT09J2Jvb2xlYW4nJiZfbWluRGF0ZT09PWZhbHNlKXt0aGlzLl9vcHRpb25zLm1pbkRhdGU9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZih0eXBlb2YgX21pbkRhdGU9PT0nc3RyaW5nJyl7aWYoX21pbkRhdGU9PT0nbm93J3x8X21pbkRhdGU9PT0nbW9tZW50Jyl7X21pbkRhdGU9dGhpcy5nZXRNb21lbnQoKTt9fQp2YXIgcGFyc2VkRGF0ZT10aGlzLl9wYXJzZUlucHV0RGF0ZShfbWluRGF0ZSk7aWYoIXBhcnNlZERhdGUuaXNWYWxpZCgpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdtaW5EYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiAnK19taW5EYXRlKTt9CmlmKHRoaXMuX29wdGlvbnMubWF4RGF0ZSYmcGFyc2VkRGF0ZS5pc0FmdGVyKHRoaXMuX29wdGlvbnMubWF4RGF0ZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ21pbkRhdGUoKSBkYXRlIHBhcmFtZXRlciBpcyBhZnRlciB0aGlzLm9wdGlvbnMubWF4RGF0ZTogJytwYXJzZWREYXRlLmZvcm1hdCh0aGlzLmFjdHVhbEZvcm1hdCkpO30KdGhpcy5fb3B0aW9ucy5taW5EYXRlPXBhcnNlZERhdGU7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnQmJiF0aGlzLl9vcHRpb25zLmtlZXBJbnZhbGlkJiZ0aGlzLl9kYXRlc1tpXS5pc0JlZm9yZShfbWluRGF0ZSkpe3RoaXMuX3NldFZhbHVlKHRoaXMuX29wdGlvbnMubWluRGF0ZSxpKTt9fQppZih0aGlzLl92aWV3RGF0ZS5pc0JlZm9yZShwYXJzZWREYXRlKSl7dGhpcy5fdmlld0RhdGU9cGFyc2VkRGF0ZS5jbG9uZSgpLmFkZCh0aGlzLl9vcHRpb25zLnN0ZXBwaW5nLCdtJyk7fQp0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kZWZhdWx0RGF0ZT1mdW5jdGlvbiBkZWZhdWx0RGF0ZShfZGVmYXVsdERhdGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZT90aGlzLl9vcHRpb25zLmRlZmF1bHREYXRlLmNsb25lKCk6dGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZTt9CmlmKCFfZGVmYXVsdERhdGUpe3RoaXMuX29wdGlvbnMuZGVmYXVsdERhdGU9ZmFsc2U7cmV0dXJuIHRydWU7fQppZih0eXBlb2YgX2RlZmF1bHREYXRlPT09J3N0cmluZycpe2lmKF9kZWZhdWx0RGF0ZT09PSdub3cnfHxfZGVmYXVsdERhdGU9PT0nbW9tZW50Jyl7X2RlZmF1bHREYXRlPXRoaXMuZ2V0TW9tZW50KCk7fWVsc2V7X2RlZmF1bHREYXRlPXRoaXMuZ2V0TW9tZW50KF9kZWZhdWx0RGF0ZSk7fX0KdmFyIHBhcnNlZERhdGU9dGhpcy5fcGFyc2VJbnB1dERhdGUoX2RlZmF1bHREYXRlKTtpZighcGFyc2VkRGF0ZS5pc1ZhbGlkKCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RlZmF1bHREYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiAnK19kZWZhdWx0RGF0ZSk7fQppZighdGhpcy5faXNWYWxpZChwYXJzZWREYXRlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignZGVmYXVsdERhdGUoKSBkYXRlIHBhc3NlZCBpcyBpbnZhbGlkIGFjY29yZGluZyB0byBjb21wb25lbnQgc2V0dXAgdmFsaWRhdGlvbnMnKTt9CnRoaXMuX29wdGlvbnMuZGVmYXVsdERhdGU9cGFyc2VkRGF0ZTtpZih0aGlzLl9vcHRpb25zLmRlZmF1bHREYXRlJiZ0aGlzLl9vcHRpb25zLmlubGluZXx8dGhpcy5pbnB1dCE9PXVuZGVmaW5lZCYmdGhpcy5pbnB1dC52YWwoKS50cmltKCk9PT0nJyl7dGhpcy5fc2V0VmFsdWUodGhpcy5fb3B0aW9ucy5kZWZhdWx0RGF0ZSwwKTt9fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUubG9jYWxlPWZ1bmN0aW9uIGxvY2FsZShfbG9jYWxlKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMubG9jYWxlO30KaWYoIW1vbWVudC5sb2NhbGVEYXRhKF9sb2NhbGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdsb2NhbGUoKSBsb2NhbGUgJytfbG9jYWxlKycgaXMgbm90IGxvYWRlZCBmcm9tIG1vbWVudCBsb2NhbGVzIScpO30KdGhpcy5fb3B0aW9ucy5sb2NhbGU9X2xvY2FsZTtmb3IodmFyIGk9MDtpPHRoaXMuX2RhdGVzLmxlbmd0aDtpKyspe3RoaXMuX2RhdGVzW2ldLmxvY2FsZSh0aGlzLl9vcHRpb25zLmxvY2FsZSk7fQp0aGlzLl92aWV3RGF0ZS5sb2NhbGUodGhpcy5fb3B0aW9ucy5sb2NhbGUpO2lmKHRoaXMuYWN0dWFsRm9ybWF0KXt0aGlzLl9pbml0Rm9ybWF0dGluZygpO30KaWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5zdGVwcGluZz1mdW5jdGlvbiBzdGVwcGluZyhfc3RlcHBpbmcpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5zdGVwcGluZzt9Cl9zdGVwcGluZz1wYXJzZUludChfc3RlcHBpbmcsMTApO2lmKGlzTmFOKF9zdGVwcGluZyl8fF9zdGVwcGluZzwxKXtfc3RlcHBpbmc9MTt9CnRoaXMuX29wdGlvbnMuc3RlcHBpbmc9X3N0ZXBwaW5nO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLnVzZUN1cnJlbnQ9ZnVuY3Rpb24gdXNlQ3VycmVudChfdXNlQ3VycmVudCl7dmFyIHVzZUN1cnJlbnRPcHRpb25zPVsneWVhcicsJ21vbnRoJywnZGF5JywnaG91cicsJ21pbnV0ZSddO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50O30KaWYodHlwZW9mIF91c2VDdXJyZW50IT09J2Jvb2xlYW4nJiZ0eXBlb2YgX3VzZUN1cnJlbnQhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigndXNlQ3VycmVudCgpIGV4cGVjdHMgYSBib29sZWFuIG9yIHN0cmluZyBwYXJhbWV0ZXInKTt9CmlmKHR5cGVvZiBfdXNlQ3VycmVudD09PSdzdHJpbmcnJiZ1c2VDdXJyZW50T3B0aW9ucy5pbmRleE9mKF91c2VDdXJyZW50LnRvTG93ZXJDYXNlKCkpPT09LTEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3VzZUN1cnJlbnQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlciBvZiAnK3VzZUN1cnJlbnRPcHRpb25zLmpvaW4oJywgJykpO30KdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50PV91c2VDdXJyZW50O307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmNvbGxhcHNlPWZ1bmN0aW9uIGNvbGxhcHNlKF9jb2xsYXBzZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmNvbGxhcHNlO30KaWYodHlwZW9mIF9jb2xsYXBzZSE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignY29sbGFwc2UoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CmlmKHRoaXMuX29wdGlvbnMuY29sbGFwc2U9PT1fY29sbGFwc2Upe3JldHVybiB0cnVlO30KdGhpcy5fb3B0aW9ucy5jb2xsYXBzZT1fY29sbGFwc2U7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5pY29ucz1mdW5jdGlvbiBpY29ucyhfaWNvbnMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5pY29ucyk7fQppZighKF9pY29ucyBpbnN0YW5jZW9mIE9iamVjdCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2ljb25zKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYW4gT2JqZWN0Jyk7fQokLmV4dGVuZCh0aGlzLl9vcHRpb25zLmljb25zLF9pY29ucyk7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS50b29sdGlwcz1mdW5jdGlvbiB0b29sdGlwcyhfdG9vbHRpcHMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy50b29sdGlwcyk7fQppZighKF90b29sdGlwcyBpbnN0YW5jZW9mIE9iamVjdCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3Rvb2x0aXBzKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYW4gT2JqZWN0Jyk7fQokLmV4dGVuZCh0aGlzLl9vcHRpb25zLnRvb2x0aXBzLF90b29sdGlwcyk7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS51c2VTdHJpY3Q9ZnVuY3Rpb24gdXNlU3RyaWN0KF91c2VTdHJpY3Qpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy51c2VTdHJpY3Q7fQppZih0eXBlb2YgX3VzZVN0cmljdCE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcigndXNlU3RyaWN0KCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLnVzZVN0cmljdD1fdXNlU3RyaWN0O307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLnNpZGVCeVNpZGU9ZnVuY3Rpb24gc2lkZUJ5U2lkZShfc2lkZUJ5U2lkZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLnNpZGVCeVNpZGU7fQppZih0eXBlb2YgX3NpZGVCeVNpZGUhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3NpZGVCeVNpZGUoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuc2lkZUJ5U2lkZT1fc2lkZUJ5U2lkZTtpZih0aGlzLndpZGdldCl7dGhpcy5oaWRlKCk7dGhpcy5zaG93KCk7fX07RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLnZpZXdNb2RlPWZ1bmN0aW9uIHZpZXdNb2RlKF92aWV3TW9kZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLnZpZXdNb2RlO30KaWYodHlwZW9mIF92aWV3TW9kZSE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd2aWV3TW9kZSgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyJyk7fQppZihEYXRlVGltZVBpY2tlci5WaWV3TW9kZXMuaW5kZXhPZihfdmlld01vZGUpPT09LTEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3ZpZXdNb2RlKCkgcGFyYW1ldGVyIG11c3QgYmUgb25lIG9mICgnK0RhdGVUaW1lUGlja2VyLlZpZXdNb2Rlcy5qb2luKCcsICcpKycpIHZhbHVlJyk7fQp0aGlzLl9vcHRpb25zLnZpZXdNb2RlPV92aWV3TW9kZTt0aGlzLmN1cnJlbnRWaWV3TW9kZT1NYXRoLm1heChEYXRlVGltZVBpY2tlci5WaWV3TW9kZXMuaW5kZXhPZihfdmlld01vZGUpLTEsRGF0ZVRpbWVQaWNrZXIuTWluVmlld01vZGVOdW1iZXIpO3RoaXMuX3Nob3dNb2RlKCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuY2FsZW5kYXJXZWVrcz1mdW5jdGlvbiBjYWxlbmRhcldlZWtzKF9jYWxlbmRhcldlZWtzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuY2FsZW5kYXJXZWVrczt9CmlmKHR5cGVvZiBfY2FsZW5kYXJXZWVrcyE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignY2FsZW5kYXJXZWVrcygpIGV4cGVjdHMgcGFyYW1ldGVyIHRvIGJlIGEgYm9vbGVhbiB2YWx1ZScpO30KdGhpcy5fb3B0aW9ucy5jYWxlbmRhcldlZWtzPV9jYWxlbmRhcldlZWtzO3RoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmJ1dHRvbnM9ZnVuY3Rpb24gYnV0dG9ucyhfYnV0dG9ucyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiAkLmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zLmJ1dHRvbnMpO30KaWYoIShfYnV0dG9ucyBpbnN0YW5jZW9mIE9iamVjdCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2J1dHRvbnMoKSBleHBlY3RzIHBhcmFtZXRlciB0byBiZSBhbiBPYmplY3QnKTt9CiQuZXh0ZW5kKHRoaXMuX29wdGlvbnMuYnV0dG9ucyxfYnV0dG9ucyk7aWYodHlwZW9mIHRoaXMuX29wdGlvbnMuYnV0dG9ucy5zaG93VG9kYXkhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2J1dHRvbnMuc2hvd1RvZGF5IGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KaWYodHlwZW9mIHRoaXMuX29wdGlvbnMuYnV0dG9ucy5zaG93Q2xlYXIhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2J1dHRvbnMuc2hvd0NsZWFyIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KaWYodHlwZW9mIHRoaXMuX29wdGlvbnMuYnV0dG9ucy5zaG93Q2xvc2UhPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2J1dHRvbnMuc2hvd0Nsb3NlIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KaWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5rZWVwT3Blbj1mdW5jdGlvbiBrZWVwT3Blbihfa2VlcE9wZW4pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5rZWVwT3Blbjt9CmlmKHR5cGVvZiBfa2VlcE9wZW4hPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2tlZXBPcGVuKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmtlZXBPcGVuPV9rZWVwT3Blbjt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5mb2N1c09uU2hvdz1mdW5jdGlvbiBmb2N1c09uU2hvdyhfZm9jdXNPblNob3cpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5mb2N1c09uU2hvdzt9CmlmKHR5cGVvZiBfZm9jdXNPblNob3chPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2ZvY3VzT25TaG93KCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmZvY3VzT25TaG93PV9mb2N1c09uU2hvdzt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5pbmxpbmU9ZnVuY3Rpb24gaW5saW5lKF9pbmxpbmUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5pbmxpbmU7fQppZih0eXBlb2YgX2lubGluZSE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignaW5saW5lKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmlubGluZT1faW5saW5lO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uIGNsZWFyKCl7dGhpcy5fc2V0VmFsdWUobnVsbCk7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUua2V5QmluZHM9ZnVuY3Rpb24ga2V5QmluZHMoX2tleUJpbmRzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMua2V5QmluZHM7fQp0aGlzLl9vcHRpb25zLmtleUJpbmRzPV9rZXlCaW5kczt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5kZWJ1Zz1mdW5jdGlvbiBkZWJ1ZyhfZGVidWcpe2lmKHR5cGVvZiBfZGVidWchPT0nYm9vbGVhbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2RlYnVnKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmRlYnVnPV9kZWJ1Zzt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5hbGxvd0lucHV0VG9nZ2xlPWZ1bmN0aW9uIGFsbG93SW5wdXRUb2dnbGUoX2FsbG93SW5wdXRUb2dnbGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5hbGxvd0lucHV0VG9nZ2xlO30KaWYodHlwZW9mIF9hbGxvd0lucHV0VG9nZ2xlIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdhbGxvd0lucHV0VG9nZ2xlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmFsbG93SW5wdXRUb2dnbGU9X2FsbG93SW5wdXRUb2dnbGU7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUua2VlcEludmFsaWQ9ZnVuY3Rpb24ga2VlcEludmFsaWQoX2tlZXBJbnZhbGlkKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMua2VlcEludmFsaWQ7fQppZih0eXBlb2YgX2tlZXBJbnZhbGlkIT09J2Jvb2xlYW4nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdrZWVwSW52YWxpZCgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5rZWVwSW52YWxpZD1fa2VlcEludmFsaWQ7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUuZGF0ZXBpY2tlcklucHV0PWZ1bmN0aW9uIGRhdGVwaWNrZXJJbnB1dChfZGF0ZXBpY2tlcklucHV0KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZGF0ZXBpY2tlcklucHV0O30KaWYodHlwZW9mIF9kYXRlcGlja2VySW5wdXQhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignZGF0ZXBpY2tlcklucHV0KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuZGF0ZXBpY2tlcklucHV0PV9kYXRlcGlja2VySW5wdXQ7fTtEYXRlVGltZVBpY2tlci5wcm90b3R5cGUucGFyc2VJbnB1dERhdGU9ZnVuY3Rpb24gcGFyc2VJbnB1dERhdGUoX3BhcnNlSW5wdXREYXRlMil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLnBhcnNlSW5wdXREYXRlO30KaWYodHlwZW9mIF9wYXJzZUlucHV0RGF0ZTIhPT0nZnVuY3Rpb24nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJzZUlucHV0RGF0ZSgpIHNob3VsZCBiZSBhcyBmdW5jdGlvbicpO30KdGhpcy5fb3B0aW9ucy5wYXJzZUlucHV0RGF0ZT1fcGFyc2VJbnB1dERhdGUyO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkVGltZUludGVydmFscz1mdW5jdGlvbiBkaXNhYmxlZFRpbWVJbnRlcnZhbHMoX2Rpc2FibGVkVGltZUludGVydmFscyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRpc2FibGVkVGltZUludGVydmFscz8kLmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zLmRpc2FibGVkVGltZUludGVydmFscyk6dGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHM7fQppZighX2Rpc2FibGVkVGltZUludGVydmFscyl7dGhpcy5fb3B0aW9ucy5kaXNhYmxlZFRpbWVJbnRlcnZhbHM9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZighKF9kaXNhYmxlZFRpbWVJbnRlcnZhbHMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2Rpc2FibGVkVGltZUludGVydmFscygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLmRpc2FibGVkVGltZUludGVydmFscz1fZGlzYWJsZWRUaW1lSW50ZXJ2YWxzO3RoaXMuX3VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkSG91cnM9ZnVuY3Rpb24gZGlzYWJsZWRIb3Vycyhob3Vycyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnM/JC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzKTp0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnM7fQppZighaG91cnMpe3RoaXMuX29wdGlvbnMuZGlzYWJsZWRIb3Vycz1mYWxzZTt0aGlzLl91cGRhdGUoKTtyZXR1cm4gdHJ1ZTt9CmlmKCEoaG91cnMgaW5zdGFuY2VvZiBBcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2Rpc2FibGVkSG91cnMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5kaXNhYmxlZEhvdXJzPXRoaXMuX2luZGV4R2l2ZW5Ib3Vycyhob3Vycyk7dGhpcy5fb3B0aW9ucy5lbmFibGVkSG91cnM9ZmFsc2U7aWYodGhpcy5fb3B0aW9ucy51c2VDdXJyZW50JiYhdGhpcy5fb3B0aW9ucy5rZWVwSW52YWxpZCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXt2YXIgdHJpZXM9MDt3aGlsZSghdGhpcy5faXNWYWxpZCh0aGlzLl9kYXRlc1tpXSwnaCcpKXt0aGlzLl9kYXRlc1tpXS5hZGQoMSwnaCcpO2lmKHRyaWVzPT09MjQpe3Rocm93J1RyaWVkIDI0IHRpbWVzIHRvIGZpbmQgYSB2YWxpZCBkYXRlJzt9CnRyaWVzKys7fQp0aGlzLl9zZXRWYWx1ZSh0aGlzLl9kYXRlc1tpXSxpKTt9fQp0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS5lbmFibGVkSG91cnM9ZnVuY3Rpb24gZW5hYmxlZEhvdXJzKGhvdXJzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzPyQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMuZW5hYmxlZEhvdXJzKTp0aGlzLl9vcHRpb25zLmVuYWJsZWRIb3Vyczt9CmlmKCFob3Vycyl7dGhpcy5fb3B0aW9ucy5lbmFibGVkSG91cnM9ZmFsc2U7dGhpcy5fdXBkYXRlKCk7cmV0dXJuIHRydWU7fQppZighKGhvdXJzIGluc3RhbmNlb2YgQXJyYXkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmFibGVkSG91cnMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy5lbmFibGVkSG91cnM9dGhpcy5faW5kZXhHaXZlbkhvdXJzKGhvdXJzKTt0aGlzLl9vcHRpb25zLmRpc2FibGVkSG91cnM9ZmFsc2U7aWYodGhpcy5fb3B0aW9ucy51c2VDdXJyZW50JiYhdGhpcy5fb3B0aW9ucy5rZWVwSW52YWxpZCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9kYXRlcy5sZW5ndGg7aSsrKXt2YXIgdHJpZXM9MDt3aGlsZSghdGhpcy5faXNWYWxpZCh0aGlzLl9kYXRlc1tpXSwnaCcpKXt0aGlzLl9kYXRlc1tpXS5hZGQoMSwnaCcpO2lmKHRyaWVzPT09MjQpe3Rocm93J1RyaWVkIDI0IHRpbWVzIHRvIGZpbmQgYSB2YWxpZCBkYXRlJzt9CnRyaWVzKys7fQp0aGlzLl9zZXRWYWx1ZSh0aGlzLl9kYXRlc1tpXSxpKTt9fQp0aGlzLl91cGRhdGUoKTt9O0RhdGVUaW1lUGlja2VyLnByb3RvdHlwZS52aWV3RGF0ZT1mdW5jdGlvbiB2aWV3RGF0ZShuZXdEYXRlKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX3ZpZXdEYXRlLmNsb25lKCk7fQppZighbmV3RGF0ZSl7dGhpcy5fdmlld0RhdGU9KHRoaXMuX2RhdGVzWzBdfHx0aGlzLmdldE1vbWVudCgpKS5jbG9uZSgpO3JldHVybiB0cnVlO30KaWYodHlwZW9mIG5ld0RhdGUhPT0nc3RyaW5nJyYmIW1vbWVudC5pc01vbWVudChuZXdEYXRlKSYmIShuZXdEYXRlIGluc3RhbmNlb2YgRGF0ZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3ZpZXdEYXRlKCkgcGFyYW1ldGVyIG11c3QgYmUgb25lIG9mIFtzdHJpbmcsIG1vbWVudCBvciBEYXRlXScpO30KdGhpcy5fdmlld0RhdGU9dGhpcy5fcGFyc2VJbnB1dERhdGUobmV3RGF0ZSk7dGhpcy5fdmlld1VwZGF0ZSgpO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLmFsbG93TXVsdGlkYXRlPWZ1bmN0aW9uIGFsbG93TXVsdGlkYXRlKF9hbGxvd011bHRpZGF0ZSl7aWYodHlwZW9mIF9hbGxvd011bHRpZGF0ZSE9PSdib29sZWFuJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignYWxsb3dNdWx0aWRhdGUoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXInKTt9CnRoaXMuX29wdGlvbnMuYWxsb3dNdWx0aWRhdGU9X2FsbG93TXVsdGlkYXRlO307RGF0ZVRpbWVQaWNrZXIucHJvdG90eXBlLm11bHRpZGF0ZVNlcGFyYXRvcj1mdW5jdGlvbiBtdWx0aWRhdGVTZXBhcmF0b3IoX211bHRpZGF0ZVNlcGFyYXRvcil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLl9vcHRpb25zLm11bHRpZGF0ZVNlcGFyYXRvcjt9CmlmKHR5cGVvZiBfbXVsdGlkYXRlU2VwYXJhdG9yIT09J3N0cmluZyd8fF9tdWx0aWRhdGVTZXBhcmF0b3IubGVuZ3RoPjEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ211bHRpZGF0ZVNlcGFyYXRvciBleHBlY3RzIGEgc2luZ2xlIGNoYXJhY3RlciBzdHJpbmcgcGFyYW1ldGVyJyk7fQp0aGlzLl9vcHRpb25zLm11bHRpZGF0ZVNlcGFyYXRvcj1fbXVsdGlkYXRlU2VwYXJhdG9yO307X2NyZWF0ZUNsYXNzKERhdGVUaW1lUGlja2VyLG51bGwsW3trZXk6J05BTUUnLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gTkFNRTt9fSx7a2V5OidEQVRBX0tFWScsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEQVRBX0tFWTt9fSx7a2V5OidFVkVOVF9LRVknLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRVZFTlRfS0VZO319LHtrZXk6J0RBVEFfQVBJX0tFWScsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBEQVRBX0FQSV9LRVk7fX0se2tleTonRGF0ZVBpY2tlck1vZGVzJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIERhdGVQaWNrZXJNb2Rlczt9fSx7a2V5OidWaWV3TW9kZXMnLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gVmlld01vZGVzO319LHtrZXk6J01pblZpZXdNb2RlTnVtYmVyJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIE1pblZpZXdNb2RlTnVtYmVyO319LHtrZXk6J0V2ZW50JyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIEV2ZW50O319LHtrZXk6J1NlbGVjdG9yJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFNlbGVjdG9yO319LHtrZXk6J0RlZmF1bHQnLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gRGVmYXVsdDt9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe0RlZmF1bHQ9dmFsdWU7fX0se2tleTonQ2xhc3NOYW1lJyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIENsYXNzTmFtZTt9fV0pO3JldHVybiBEYXRlVGltZVBpY2tlcjt9KCk7cmV0dXJuIERhdGVUaW1lUGlja2VyO30oalF1ZXJ5LG1vbWVudCk7dmFyIFRlbXB1c0RvbWludXNCb290c3RyYXA0PWZ1bmN0aW9uKCQpe3ZhciBKUVVFUllfTk9fQ09ORkxJQ1Q9JC5mbltEYXRlVGltZVBpY2tlci5OQU1FXSx2ZXJ0aWNhbE1vZGVzPVsndG9wJywnYm90dG9tJywnYXV0byddLGhvcml6b250YWxNb2Rlcz1bJ2xlZnQnLCdyaWdodCcsJ2F1dG8nXSx0b29sYmFyUGxhY2VtZW50cz1bJ2RlZmF1bHQnLCd0b3AnLCdib3R0b20nXSxnZXRTZWxlY3RvckZyb21FbGVtZW50PWZ1bmN0aW9uIGdldFNlbGVjdG9yRnJvbUVsZW1lbnQoJGVsZW1lbnQpe3ZhciBzZWxlY3Rvcj0kZWxlbWVudC5kYXRhKCd0YXJnZXQnKSwkc2VsZWN0b3I9dm9pZCAwO2lmKCFzZWxlY3Rvcil7c2VsZWN0b3I9JGVsZW1lbnQuYXR0cignaHJlZicpfHwnJztzZWxlY3Rvcj0vXiNbYS16XS9pLnRlc3Qoc2VsZWN0b3IpP3NlbGVjdG9yOm51bGw7fQokc2VsZWN0b3I9JChzZWxlY3Rvcik7aWYoJHNlbGVjdG9yLmxlbmd0aD09PTApe3JldHVybiAkc2VsZWN0b3I7fQppZighJHNlbGVjdG9yLmRhdGEoRGF0ZVRpbWVQaWNrZXIuREFUQV9LRVkpKXskLmV4dGVuZCh7fSwkc2VsZWN0b3IuZGF0YSgpLCQodGhpcykuZGF0YSgpKTt9CnJldHVybiAkc2VsZWN0b3I7fTt2YXIgVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQ9ZnVuY3Rpb24oX0RhdGVUaW1lUGlja2VyKXtfaW5oZXJpdHMoVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQsX0RhdGVUaW1lUGlja2VyKTtmdW5jdGlvbiBUZW1wdXNEb21pbnVzQm9vdHN0cmFwNChlbGVtZW50LG9wdGlvbnMpe19jbGFzc0NhbGxDaGVjayh0aGlzLFRlbXB1c0RvbWludXNCb290c3RyYXA0KTt2YXIgX3RoaXM9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxfRGF0ZVRpbWVQaWNrZXIuY2FsbCh0aGlzLGVsZW1lbnQsb3B0aW9ucykpO190aGlzLl9pbml0KCk7cmV0dXJuIF90aGlzO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uIF9pbml0KCl7aWYodGhpcy5fZWxlbWVudC5oYXNDbGFzcygnaW5wdXQtZ3JvdXAnKSl7dmFyIGRhdGVwaWNrZXJCdXR0b249dGhpcy5fZWxlbWVudC5maW5kKCcuZGF0ZXBpY2tlcmJ1dHRvbicpO2lmKGRhdGVwaWNrZXJCdXR0b24ubGVuZ3RoPT09MCl7dGhpcy5jb21wb25lbnQ9dGhpcy5fZWxlbWVudC5maW5kKCdbZGF0YS10b2dnbGU9ImRhdGV0aW1lcGlja2VyIl0nKTt9ZWxzZXt0aGlzLmNvbXBvbmVudD1kYXRlcGlja2VyQnV0dG9uO319fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2dldERhdGVQaWNrZXJUZW1wbGF0ZT1mdW5jdGlvbiBfZ2V0RGF0ZVBpY2tlclRlbXBsYXRlKCl7dmFyIGhlYWRUZW1wbGF0ZT0kKCc8dGhlYWQ+JykuYXBwZW5kKCQoJzx0cj4nKS5hcHBlbmQoJCgnPHRoPicpLmFkZENsYXNzKCdwcmV2JykuYXR0cignZGF0YS1hY3Rpb24nLCdwcmV2aW91cycpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLnByZXZpb3VzKSkpLmFwcGVuZCgkKCc8dGg+JykuYWRkQ2xhc3MoJ3BpY2tlci1zd2l0Y2gnKS5hdHRyKCdkYXRhLWFjdGlvbicsJ3BpY2tlclN3aXRjaCcpLmF0dHIoJ2NvbHNwYW4nLCcnKyh0aGlzLl9vcHRpb25zLmNhbGVuZGFyV2Vla3M/JzYnOic1JykpKS5hcHBlbmQoJCgnPHRoPicpLmFkZENsYXNzKCduZXh0JykuYXR0cignZGF0YS1hY3Rpb24nLCduZXh0JykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMubmV4dCkpKSksY29udFRlbXBsYXRlPSQoJzx0Ym9keT4nKS5hcHBlbmQoJCgnPHRyPicpLmFwcGVuZCgkKCc8dGQ+JykuYXR0cignY29sc3BhbicsJycrKHRoaXMuX29wdGlvbnMuY2FsZW5kYXJXZWVrcz8nOCc6JzcnKSkpKTtyZXR1cm5bJCgnPGRpdj4nKS5hZGRDbGFzcygnZGF0ZXBpY2tlci1kYXlzJykuYXBwZW5kKCQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUgdGFibGUtc20nKS5hcHBlbmQoaGVhZFRlbXBsYXRlKS5hcHBlbmQoJCgnPHRib2R5PicpKSksJCgnPGRpdj4nKS5hZGRDbGFzcygnZGF0ZXBpY2tlci1tb250aHMnKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKS5hcHBlbmQoaGVhZFRlbXBsYXRlLmNsb25lKCkpLmFwcGVuZChjb250VGVtcGxhdGUuY2xvbmUoKSkpLCQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RhdGVwaWNrZXIteWVhcnMnKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKS5hcHBlbmQoaGVhZFRlbXBsYXRlLmNsb25lKCkpLmFwcGVuZChjb250VGVtcGxhdGUuY2xvbmUoKSkpLCQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RhdGVwaWNrZXItZGVjYWRlcycpLmFwcGVuZCgkKCc8dGFibGU+JykuYWRkQ2xhc3MoJ3RhYmxlLWNvbmRlbnNlZCcpLmFwcGVuZChoZWFkVGVtcGxhdGUuY2xvbmUoKSkuYXBwZW5kKGNvbnRUZW1wbGF0ZS5jbG9uZSgpKSldO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9nZXRUaW1lUGlja2VyTWFpblRlbXBsYXRlPWZ1bmN0aW9uIF9nZXRUaW1lUGlja2VyTWFpblRlbXBsYXRlKCl7dmFyIHRvcFJvdz0kKCc8dHI+JyksbWlkZGxlUm93PSQoJzx0cj4nKSxib3R0b21Sb3c9JCgnPHRyPicpO2lmKHRoaXMuX2lzRW5hYmxlZCgnaCcpKXt0b3BSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuaW5jcmVtZW50SG91cn0pLmFkZENsYXNzKCdidG4nKS5hdHRyKCdkYXRhLWFjdGlvbicsJ2luY3JlbWVudEhvdXJzJykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMudXApKSkpO21pZGRsZVJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcygndGltZXBpY2tlci1ob3VyJykuYXR0cih7J2RhdGEtdGltZS1jb21wb25lbnQnOidob3VycycsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnBpY2tIb3VyfSkuYXR0cignZGF0YS1hY3Rpb24nLCdzaG93SG91cnMnKSkpO2JvdHRvbVJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5kZWNyZW1lbnRIb3VyfSkuYWRkQ2xhc3MoJ2J0bicpLmF0dHIoJ2RhdGEtYWN0aW9uJywnZGVjcmVtZW50SG91cnMnKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy5kb3duKSkpKTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgnbScpKXtpZih0aGlzLl9pc0VuYWJsZWQoJ2gnKSl7dG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpKTttaWRkbGVSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykuaHRtbCgnOicpKTtib3R0b21Sb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykpO30KdG9wUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmluY3JlbWVudE1pbnV0ZX0pLmFkZENsYXNzKCdidG4nKS5hdHRyKCdkYXRhLWFjdGlvbicsJ2luY3JlbWVudE1pbnV0ZXMnKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy51cCkpKSk7bWlkZGxlUm93LmFwcGVuZCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKCd0aW1lcGlja2VyLW1pbnV0ZScpLmF0dHIoeydkYXRhLXRpbWUtY29tcG9uZW50JzonbWludXRlcycsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnBpY2tNaW51dGV9KS5hdHRyKCdkYXRhLWFjdGlvbicsJ3Nob3dNaW51dGVzJykpKTtib3R0b21Sb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuZGVjcmVtZW50TWludXRlfSkuYWRkQ2xhc3MoJ2J0bicpLmF0dHIoJ2RhdGEtYWN0aW9uJywnZGVjcmVtZW50TWludXRlcycpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLmRvd24pKSkpO30KaWYodGhpcy5faXNFbmFibGVkKCdzJykpe2lmKHRoaXMuX2lzRW5hYmxlZCgnbScpKXt0b3BSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykpO21pZGRsZVJvdy5hcHBlbmQoJCgnPHRkPicpLmFkZENsYXNzKCdzZXBhcmF0b3InKS5odG1sKCc6JykpO2JvdHRvbVJvdy5hcHBlbmQoJCgnPHRkPicpLmFkZENsYXNzKCdzZXBhcmF0b3InKSk7fQp0b3BSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuaW5jcmVtZW50U2Vjb25kfSkuYWRkQ2xhc3MoJ2J0bicpLmF0dHIoJ2RhdGEtYWN0aW9uJywnaW5jcmVtZW50U2Vjb25kcycpLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLnVwKSkpKTttaWRkbGVSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItc2Vjb25kJykuYXR0cih7J2RhdGEtdGltZS1jb21wb25lbnQnOidzZWNvbmRzJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMucGlja1NlY29uZH0pLmF0dHIoJ2RhdGEtYWN0aW9uJywnc2hvd1NlY29uZHMnKSkpO2JvdHRvbVJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy5kZWNyZW1lbnRTZWNvbmR9KS5hZGRDbGFzcygnYnRuJykuYXR0cignZGF0YS1hY3Rpb24nLCdkZWNyZW1lbnRTZWNvbmRzJykuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMuZG93bikpKSk7fQppZighdGhpcy51c2UyNEhvdXJzKXt0b3BSb3cuYXBwZW5kKCQoJzx0ZD4nKS5hZGRDbGFzcygnc2VwYXJhdG9yJykpO21pZGRsZVJvdy5hcHBlbmQoJCgnPHRkPicpLmFwcGVuZCgkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdidG4gYnRuLXByaW1hcnknKS5hdHRyKHsnZGF0YS1hY3Rpb24nOid0b2dnbGVQZXJpb2QnLHRhYmluZGV4OictMScsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnRvZ2dsZVBlcmlvZH0pKSk7Ym90dG9tUm93LmFwcGVuZCgkKCc8dGQ+JykuYWRkQ2xhc3MoJ3NlcGFyYXRvcicpKTt9CnJldHVybiAkKCc8ZGl2PicpLmFkZENsYXNzKCd0aW1lcGlja2VyLXBpY2tlcicpLmFwcGVuZCgkKCc8dGFibGU+JykuYWRkQ2xhc3MoJ3RhYmxlLWNvbmRlbnNlZCcpLmFwcGVuZChbdG9wUm93LG1pZGRsZVJvdyxib3R0b21Sb3ddKSk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2dldFRpbWVQaWNrZXJUZW1wbGF0ZT1mdW5jdGlvbiBfZ2V0VGltZVBpY2tlclRlbXBsYXRlKCl7dmFyIGhvdXJzVmlldz0kKCc8ZGl2PicpLmFkZENsYXNzKCd0aW1lcGlja2VyLWhvdXJzJykuYXBwZW5kKCQoJzx0YWJsZT4nKS5hZGRDbGFzcygndGFibGUtY29uZGVuc2VkJykpLG1pbnV0ZXNWaWV3PSQoJzxkaXY+JykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItbWludXRlcycpLmFwcGVuZCgkKCc8dGFibGU+JykuYWRkQ2xhc3MoJ3RhYmxlLWNvbmRlbnNlZCcpKSxzZWNvbmRzVmlldz0kKCc8ZGl2PicpLmFkZENsYXNzKCd0aW1lcGlja2VyLXNlY29uZHMnKS5hcHBlbmQoJCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKSkscmV0PVt0aGlzLl9nZXRUaW1lUGlja2VyTWFpblRlbXBsYXRlKCldO2lmKHRoaXMuX2lzRW5hYmxlZCgnaCcpKXtyZXQucHVzaChob3Vyc1ZpZXcpO30KaWYodGhpcy5faXNFbmFibGVkKCdtJykpe3JldC5wdXNoKG1pbnV0ZXNWaWV3KTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgncycpKXtyZXQucHVzaChzZWNvbmRzVmlldyk7fQpyZXR1cm4gcmV0O307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9nZXRUb29sYmFyPWZ1bmN0aW9uIF9nZXRUb29sYmFyKCl7dmFyIHJvdz1bXTtpZih0aGlzLl9vcHRpb25zLmJ1dHRvbnMuc2hvd1RvZGF5KXtyb3cucHVzaCgkKCc8dGQ+JykuYXBwZW5kKCQoJzxhPicpLmF0dHIoe2hyZWY6JyMnLHRhYmluZGV4OictMScsJ2RhdGEtYWN0aW9uJzondG9kYXknLCd0aXRsZSc6dGhpcy5fb3B0aW9ucy50b29sdGlwcy50b2RheX0pLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLnRvZGF5KSkpKTt9CmlmKCF0aGlzLl9vcHRpb25zLnNpZGVCeVNpZGUmJnRoaXMuX2hhc0RhdGUoKSYmdGhpcy5faGFzVGltZSgpKXt2YXIgdGl0bGU9dm9pZCAwLGljb249dm9pZCAwO2lmKHRoaXMuX29wdGlvbnMudmlld01vZGU9PT0ndGltZXMnKXt0aXRsZT10aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdERhdGU7aWNvbj10aGlzLl9vcHRpb25zLmljb25zLmRhdGU7fWVsc2V7dGl0bGU9dGhpcy5fb3B0aW9ucy50b29sdGlwcy5zZWxlY3RUaW1lO2ljb249dGhpcy5fb3B0aW9ucy5pY29ucy50aW1lO30Kcm93LnB1c2goJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCdkYXRhLWFjdGlvbic6J3RvZ2dsZVBpY2tlcicsJ3RpdGxlJzp0aXRsZX0pLmFwcGVuZCgkKCc8c3Bhbj4nKS5hZGRDbGFzcyhpY29uKSkpKTt9CmlmKHRoaXMuX29wdGlvbnMuYnV0dG9ucy5zaG93Q2xlYXIpe3Jvdy5wdXNoKCQoJzx0ZD4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cih7aHJlZjonIycsdGFiaW5kZXg6Jy0xJywnZGF0YS1hY3Rpb24nOidjbGVhcicsJ3RpdGxlJzp0aGlzLl9vcHRpb25zLnRvb2x0aXBzLmNsZWFyfSkuYXBwZW5kKCQoJzxzcGFuPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuaWNvbnMuY2xlYXIpKSkpO30KaWYodGhpcy5fb3B0aW9ucy5idXR0b25zLnNob3dDbG9zZSl7cm93LnB1c2goJCgnPHRkPicpLmFwcGVuZCgkKCc8YT4nKS5hdHRyKHtocmVmOicjJyx0YWJpbmRleDonLTEnLCdkYXRhLWFjdGlvbic6J2Nsb3NlJywndGl0bGUnOnRoaXMuX29wdGlvbnMudG9vbHRpcHMuY2xvc2V9KS5hcHBlbmQoJCgnPHNwYW4+JykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy5jbG9zZSkpKSk7fQpyZXR1cm4gcm93Lmxlbmd0aD09PTA/Jyc6JCgnPHRhYmxlPicpLmFkZENsYXNzKCd0YWJsZS1jb25kZW5zZWQnKS5hcHBlbmQoJCgnPHRib2R5PicpLmFwcGVuZCgkKCc8dHI+JykuYXBwZW5kKHJvdykpKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZ2V0VGVtcGxhdGU9ZnVuY3Rpb24gX2dldFRlbXBsYXRlKCl7dmFyIHRlbXBsYXRlPSQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgZHJvcGRvd24tbWVudScpLGRhdGVWaWV3PSQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RhdGVwaWNrZXInKS5hcHBlbmQodGhpcy5fZ2V0RGF0ZVBpY2tlclRlbXBsYXRlKCkpLHRpbWVWaWV3PSQoJzxkaXY+JykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXInKS5hcHBlbmQodGhpcy5fZ2V0VGltZVBpY2tlclRlbXBsYXRlKCkpLGNvbnRlbnQ9JCgnPHVsPicpLmFkZENsYXNzKCdsaXN0LXVuc3R5bGVkJyksdG9vbGJhcj0kKCc8bGk+JykuYWRkQ2xhc3MoJ3BpY2tlci1zd2l0Y2gnKyh0aGlzLl9vcHRpb25zLmNvbGxhcHNlPycgYWNjb3JkaW9uLXRvZ2dsZSc6JycpKS5hcHBlbmQodGhpcy5fZ2V0VG9vbGJhcigpKTtpZih0aGlzLl9vcHRpb25zLmlubGluZSl7dGVtcGxhdGUucmVtb3ZlQ2xhc3MoJ2Ryb3Bkb3duLW1lbnUnKTt9CmlmKHRoaXMudXNlMjRIb3Vycyl7dGVtcGxhdGUuYWRkQ2xhc3MoJ3VzZXR3ZW50eWZvdXInKTt9CmlmKHRoaXMuX2lzRW5hYmxlZCgncycpJiYhdGhpcy51c2UyNEhvdXJzKXt0ZW1wbGF0ZS5hZGRDbGFzcygnd2lkZXInKTt9CmlmKHRoaXMuX29wdGlvbnMuc2lkZUJ5U2lkZSYmdGhpcy5faGFzRGF0ZSgpJiZ0aGlzLl9oYXNUaW1lKCkpe3RlbXBsYXRlLmFkZENsYXNzKCd0aW1lcGlja2VyLXNicycpO2lmKHRoaXMuX29wdGlvbnMudG9vbGJhclBsYWNlbWVudD09PSd0b3AnKXt0ZW1wbGF0ZS5hcHBlbmQodG9vbGJhcik7fQp0ZW1wbGF0ZS5hcHBlbmQoJCgnPGRpdj4nKS5hZGRDbGFzcygncm93JykuYXBwZW5kKGRhdGVWaWV3LmFkZENsYXNzKCdjb2wtbWQtNicpKS5hcHBlbmQodGltZVZpZXcuYWRkQ2xhc3MoJ2NvbC1tZC02JykpKTtpZih0aGlzLl9vcHRpb25zLnRvb2xiYXJQbGFjZW1lbnQ9PT0nYm90dG9tJ3x8dGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PT09J2RlZmF1bHQnKXt0ZW1wbGF0ZS5hcHBlbmQodG9vbGJhcik7fQpyZXR1cm4gdGVtcGxhdGU7fQppZih0aGlzLl9vcHRpb25zLnRvb2xiYXJQbGFjZW1lbnQ9PT0ndG9wJyl7Y29udGVudC5hcHBlbmQodG9vbGJhcik7fQppZih0aGlzLl9oYXNEYXRlKCkpe2NvbnRlbnQuYXBwZW5kKCQoJzxsaT4nKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmNvbGxhcHNlJiZ0aGlzLl9oYXNUaW1lKCk/J2NvbGxhcHNlJzonJykuYWRkQ2xhc3ModGhpcy5fb3B0aW9ucy5jb2xsYXBzZSYmdGhpcy5faGFzVGltZSgpJiZ0aGlzLl9vcHRpb25zLnZpZXdNb2RlPT09J3RpbWVzJz8nJzonc2hvdycpLmFwcGVuZChkYXRlVmlldykpO30KaWYodGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50PT09J2RlZmF1bHQnKXtjb250ZW50LmFwcGVuZCh0b29sYmFyKTt9CmlmKHRoaXMuX2hhc1RpbWUoKSl7Y29udGVudC5hcHBlbmQoJCgnPGxpPicpLmFkZENsYXNzKHRoaXMuX29wdGlvbnMuY29sbGFwc2UmJnRoaXMuX2hhc0RhdGUoKT8nY29sbGFwc2UnOicnKS5hZGRDbGFzcyh0aGlzLl9vcHRpb25zLmNvbGxhcHNlJiZ0aGlzLl9oYXNEYXRlKCkmJnRoaXMuX29wdGlvbnMudmlld01vZGU9PT0ndGltZXMnPydzaG93JzonJykuYXBwZW5kKHRpbWVWaWV3KSk7fQppZih0aGlzLl9vcHRpb25zLnRvb2xiYXJQbGFjZW1lbnQ9PT0nYm90dG9tJyl7Y29udGVudC5hcHBlbmQodG9vbGJhcik7fQpyZXR1cm4gdGVtcGxhdGUuYXBwZW5kKGNvbnRlbnQpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9wbGFjZT1mdW5jdGlvbiBfcGxhY2UoZSl7dmFyIHNlbGY9ZSYmZS5kYXRhJiZlLmRhdGEucGlja2VyfHx0aGlzLHZlcnRpY2FsPXNlbGYuX29wdGlvbnMud2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWwsaG9yaXpvbnRhbD1zZWxmLl9vcHRpb25zLndpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWwscGFyZW50PXZvaWQgMDt2YXIgcG9zaXRpb249KHNlbGYuY29tcG9uZW50JiZzZWxmLmNvbXBvbmVudC5sZW5ndGg/c2VsZi5jb21wb25lbnQ6c2VsZi5fZWxlbWVudCkucG9zaXRpb24oKSxvZmZzZXQ9KHNlbGYuY29tcG9uZW50JiZzZWxmLmNvbXBvbmVudC5sZW5ndGg/c2VsZi5jb21wb25lbnQ6c2VsZi5fZWxlbWVudCkub2Zmc2V0KCk7aWYoc2VsZi5fb3B0aW9ucy53aWRnZXRQYXJlbnQpe3BhcmVudD1zZWxmLl9vcHRpb25zLndpZGdldFBhcmVudC5hcHBlbmQoc2VsZi53aWRnZXQpO31lbHNlIGlmKHNlbGYuX2VsZW1lbnQuaXMoJ2lucHV0Jykpe3BhcmVudD1zZWxmLl9lbGVtZW50LmFmdGVyKHNlbGYud2lkZ2V0KS5wYXJlbnQoKTt9ZWxzZSBpZihzZWxmLl9vcHRpb25zLmlubGluZSl7cGFyZW50PXNlbGYuX2VsZW1lbnQuYXBwZW5kKHNlbGYud2lkZ2V0KTtyZXR1cm47fWVsc2V7cGFyZW50PXNlbGYuX2VsZW1lbnQ7c2VsZi5fZWxlbWVudC5jaGlsZHJlbigpLmZpcnN0KCkuYWZ0ZXIoc2VsZi53aWRnZXQpO30KdmFyIHBhcmVudE9mZnNldD1wYXJlbnQub2Zmc2V0KCk7cG9zaXRpb24udG9wPW9mZnNldC50b3AtcGFyZW50T2Zmc2V0LnRvcDtwb3NpdGlvbi5sZWZ0PW9mZnNldC5sZWZ0LXBhcmVudE9mZnNldC5sZWZ0O2lmKHZlcnRpY2FsPT09J2F1dG8nKXtpZihvZmZzZXQudG9wK3NlbGYud2lkZ2V0LmhlaWdodCgpKjEuNT49JCh3aW5kb3cpLmhlaWdodCgpKyQod2luZG93KS5zY3JvbGxUb3AoKSYmc2VsZi53aWRnZXQuaGVpZ2h0KCkrc2VsZi5fZWxlbWVudC5vdXRlckhlaWdodCgpPG9mZnNldC50b3Ape3ZlcnRpY2FsPSd0b3AnO31lbHNle3ZlcnRpY2FsPSdib3R0b20nO319CmlmKGhvcml6b250YWw9PT0nYXV0bycpe2lmKHBhcmVudC53aWR0aCgpPG9mZnNldC5sZWZ0K3NlbGYud2lkZ2V0Lm91dGVyV2lkdGgoKS8yJiZvZmZzZXQubGVmdCtzZWxmLndpZGdldC5vdXRlcldpZHRoKCk+JCh3aW5kb3cpLndpZHRoKCkpe2hvcml6b250YWw9J3JpZ2h0Jzt9ZWxzZXtob3Jpem9udGFsPSdsZWZ0Jzt9fQppZih2ZXJ0aWNhbD09PSd0b3AnKXtzZWxmLndpZGdldC5hZGRDbGFzcygndG9wJykucmVtb3ZlQ2xhc3MoJ2JvdHRvbScpO31lbHNle3NlbGYud2lkZ2V0LmFkZENsYXNzKCdib3R0b20nKS5yZW1vdmVDbGFzcygndG9wJyk7fQppZihob3Jpem9udGFsPT09J3JpZ2h0Jyl7c2VsZi53aWRnZXQuYWRkQ2xhc3MoJ2Zsb2F0LXJpZ2h0Jyk7fWVsc2V7c2VsZi53aWRnZXQucmVtb3ZlQ2xhc3MoJ2Zsb2F0LXJpZ2h0Jyk7fQppZihwYXJlbnQuY3NzKCdwb3NpdGlvbicpIT09J3JlbGF0aXZlJyl7cGFyZW50PXBhcmVudC5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykuY3NzKCdwb3NpdGlvbicpPT09J3JlbGF0aXZlJzt9KS5maXJzdCgpO30KaWYocGFyZW50Lmxlbmd0aD09PTApe3Rocm93IG5ldyBFcnJvcignZGF0ZXRpbWVwaWNrZXIgY29tcG9uZW50IHNob3VsZCBiZSBwbGFjZWQgd2l0aGluIGEgcmVsYXRpdmUgcG9zaXRpb25lZCBjb250YWluZXInKTt9CnNlbGYud2lkZ2V0LmNzcyh7dG9wOnZlcnRpY2FsPT09J3RvcCc/J2F1dG8nOnBvc2l0aW9uLnRvcCtzZWxmLl9lbGVtZW50Lm91dGVySGVpZ2h0KCkrJ3B4Jyxib3R0b206dmVydGljYWw9PT0ndG9wJz9wYXJlbnQub3V0ZXJIZWlnaHQoKS0ocGFyZW50PT09c2VsZi5fZWxlbWVudD8wOnBvc2l0aW9uLnRvcCkrJ3B4JzonYXV0bycsbGVmdDpob3Jpem9udGFsPT09J2xlZnQnPyhwYXJlbnQ9PT1zZWxmLl9lbGVtZW50PzA6cG9zaXRpb24ubGVmdCkrJ3B4JzonYXV0bycscmlnaHQ6aG9yaXpvbnRhbD09PSdsZWZ0Jz8nYXV0byc6cGFyZW50Lm91dGVyV2lkdGgoKS1zZWxmLl9lbGVtZW50Lm91dGVyV2lkdGgoKS0ocGFyZW50PT09c2VsZi5fZWxlbWVudD8wOnBvc2l0aW9uLmxlZnQpKydweCd9KTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbERvdz1mdW5jdGlvbiBfZmlsbERvdygpe3ZhciByb3c9JCgnPHRyPicpLGN1cnJlbnREYXRlPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3RhcnRPZigndycpLnN0YXJ0T2YoJ2QnKTtpZih0aGlzLl9vcHRpb25zLmNhbGVuZGFyV2Vla3M9PT10cnVlKXtyb3cuYXBwZW5kKCQoJzx0aD4nKS5hZGRDbGFzcygnY3cnKS50ZXh0KCcjJykpO30Kd2hpbGUoY3VycmVudERhdGUuaXNCZWZvcmUodGhpcy5fdmlld0RhdGUuY2xvbmUoKS5lbmRPZigndycpKSl7cm93LmFwcGVuZCgkKCc8dGg+JykuYWRkQ2xhc3MoJ2RvdycpLnRleHQoY3VycmVudERhdGUuZm9ybWF0KCdkZCcpKSk7Y3VycmVudERhdGUuYWRkKDEsJ2QnKTt9CnRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLWRheXMgdGhlYWQnKS5hcHBlbmQocm93KTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbE1vbnRocz1mdW5jdGlvbiBfZmlsbE1vbnRocygpe3ZhciBzcGFucz1bXSxtb250aHNTaG9ydD10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnN0YXJ0T2YoJ3knKS5zdGFydE9mKCdkJyk7d2hpbGUobW9udGhzU2hvcnQuaXNTYW1lKHRoaXMuX3ZpZXdEYXRlLCd5Jykpe3NwYW5zLnB1c2goJCgnPHNwYW4+JykuYXR0cignZGF0YS1hY3Rpb24nLCdzZWxlY3RNb250aCcpLmFkZENsYXNzKCdtb250aCcpLnRleHQobW9udGhzU2hvcnQuZm9ybWF0KCdNTU0nKSkpO21vbnRoc1Nob3J0LmFkZCgxLCdNJyk7fQp0aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1tb250aHMgdGQnKS5lbXB0eSgpLmFwcGVuZChzcGFucyk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX3VwZGF0ZU1vbnRocz1mdW5jdGlvbiBfdXBkYXRlTW9udGhzKCl7dmFyIG1vbnRoc1ZpZXc9dGhpcy53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXItbW9udGhzJyksbW9udGhzVmlld0hlYWRlcj1tb250aHNWaWV3LmZpbmQoJ3RoJyksbW9udGhzPW1vbnRoc1ZpZXcuZmluZCgndGJvZHknKS5maW5kKCdzcGFuJyksc2VsZj10aGlzO21vbnRoc1ZpZXdIZWFkZXIuZXEoMCkuZmluZCgnc3BhbicpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnByZXZZZWFyKTttb250aHNWaWV3SGVhZGVyLmVxKDEpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdFllYXIpO21vbnRoc1ZpZXdIZWFkZXIuZXEoMikuZmluZCgnc3BhbicpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLm5leHRZZWFyKTttb250aHNWaWV3LmZpbmQoJy5kaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO2lmKCF0aGlzLl9pc1ZhbGlkKHRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3VidHJhY3QoMSwneScpLCd5Jykpe21vbnRoc1ZpZXdIZWFkZXIuZXEoMCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQptb250aHNWaWV3SGVhZGVyLmVxKDEpLnRleHQodGhpcy5fdmlld0RhdGUueWVhcigpKTtpZighdGhpcy5faXNWYWxpZCh0aGlzLl92aWV3RGF0ZS5jbG9uZSgpLmFkZCgxLCd5JyksJ3knKSl7bW9udGhzVmlld0hlYWRlci5lcSgyKS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9Cm1vbnRocy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7aWYodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5pc1NhbWUodGhpcy5fdmlld0RhdGUsJ3knKSYmIXRoaXMudW5zZXQpe21vbnRocy5lcSh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLm1vbnRoKCkpLmFkZENsYXNzKCdhY3RpdmUnKTt9Cm1vbnRocy5lYWNoKGZ1bmN0aW9uKGluZGV4KXtpZighc2VsZi5faXNWYWxpZChzZWxmLl92aWV3RGF0ZS5jbG9uZSgpLm1vbnRoKGluZGV4KSwnTScpKXskKHRoaXMpLmFkZENsYXNzKCdkaXNhYmxlZCcpO319KTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZ2V0U3RhcnRFbmRZZWFyPWZ1bmN0aW9uIF9nZXRTdGFydEVuZFllYXIoZmFjdG9yLHllYXIpe3ZhciBzdGVwPWZhY3Rvci8xMCxzdGFydFllYXI9TWF0aC5mbG9vcih5ZWFyL2ZhY3RvcikqZmFjdG9yLGVuZFllYXI9c3RhcnRZZWFyK3N0ZXAqOSxmb2N1c1ZhbHVlPU1hdGguZmxvb3IoeWVhci9zdGVwKSpzdGVwO3JldHVybltzdGFydFllYXIsZW5kWWVhcixmb2N1c1ZhbHVlXTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fdXBkYXRlWWVhcnM9ZnVuY3Rpb24gX3VwZGF0ZVllYXJzKCl7dmFyIHllYXJzVmlldz10aGlzLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci15ZWFycycpLHllYXJzVmlld0hlYWRlcj15ZWFyc1ZpZXcuZmluZCgndGgnKSx5ZWFyQ2Fwcz10aGlzLl9nZXRTdGFydEVuZFllYXIoMTAsdGhpcy5fdmlld0RhdGUueWVhcigpKSxzdGFydFllYXI9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS55ZWFyKHllYXJDYXBzWzBdKSxlbmRZZWFyPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkueWVhcih5ZWFyQ2Fwc1sxXSk7dmFyIGh0bWw9Jyc7eWVhcnNWaWV3SGVhZGVyLmVxKDApLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5wcmV2RGVjYWRlKTt5ZWFyc1ZpZXdIZWFkZXIuZXEoMSkuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMuc2VsZWN0RGVjYWRlKTt5ZWFyc1ZpZXdIZWFkZXIuZXEoMikuZmluZCgnc3BhbicpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLm5leHREZWNhZGUpO3llYXJzVmlldy5maW5kKCcuZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtpZih0aGlzLl9vcHRpb25zLm1pbkRhdGUmJnRoaXMuX29wdGlvbnMubWluRGF0ZS5pc0FmdGVyKHN0YXJ0WWVhciwneScpKXt5ZWFyc1ZpZXdIZWFkZXIuZXEoMCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQp5ZWFyc1ZpZXdIZWFkZXIuZXEoMSkudGV4dChzdGFydFllYXIueWVhcigpKyctJytlbmRZZWFyLnllYXIoKSk7aWYodGhpcy5fb3B0aW9ucy5tYXhEYXRlJiZ0aGlzLl9vcHRpb25zLm1heERhdGUuaXNCZWZvcmUoZW5kWWVhciwneScpKXt5ZWFyc1ZpZXdIZWFkZXIuZXEoMikuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQpodG1sKz0nPHNwYW4gZGF0YS1hY3Rpb249InNlbGVjdFllYXIiIGNsYXNzPSJ5ZWFyIG9sZCcrKCF0aGlzLl9pc1ZhbGlkKHN0YXJ0WWVhciwneScpPycgZGlzYWJsZWQnOicnKSsnIj4nKyhzdGFydFllYXIueWVhcigpLTEpKyc8L3NwYW4+Jzt3aGlsZSghc3RhcnRZZWFyLmlzQWZ0ZXIoZW5kWWVhciwneScpKXtodG1sKz0nPHNwYW4gZGF0YS1hY3Rpb249InNlbGVjdFllYXIiIGNsYXNzPSJ5ZWFyJysoc3RhcnRZZWFyLmlzU2FtZSh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLCd5JykmJiF0aGlzLnVuc2V0PycgYWN0aXZlJzonJykrKCF0aGlzLl9pc1ZhbGlkKHN0YXJ0WWVhciwneScpPycgZGlzYWJsZWQnOicnKSsnIj4nK3N0YXJ0WWVhci55ZWFyKCkrJzwvc3Bhbj4nO3N0YXJ0WWVhci5hZGQoMSwneScpO30KaHRtbCs9JzxzcGFuIGRhdGEtYWN0aW9uPSJzZWxlY3RZZWFyIiBjbGFzcz0ieWVhciBvbGQnKyghdGhpcy5faXNWYWxpZChzdGFydFllYXIsJ3knKT8nIGRpc2FibGVkJzonJykrJyI+JytzdGFydFllYXIueWVhcigpKyc8L3NwYW4+Jzt5ZWFyc1ZpZXcuZmluZCgndGQnKS5odG1sKGh0bWwpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl91cGRhdGVEZWNhZGVzPWZ1bmN0aW9uIF91cGRhdGVEZWNhZGVzKCl7dmFyIGRlY2FkZXNWaWV3PXRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLWRlY2FkZXMnKSxkZWNhZGVzVmlld0hlYWRlcj1kZWNhZGVzVmlldy5maW5kKCd0aCcpLHllYXJDYXBzPXRoaXMuX2dldFN0YXJ0RW5kWWVhcigxMDAsdGhpcy5fdmlld0RhdGUueWVhcigpKSxzdGFydERlY2FkZT10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnllYXIoeWVhckNhcHNbMF0pLGVuZERlY2FkZT10aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnllYXIoeWVhckNhcHNbMV0pO3ZhciBtaW5EYXRlRGVjYWRlPWZhbHNlLG1heERhdGVEZWNhZGU9ZmFsc2UsZW5kRGVjYWRlWWVhcj12b2lkIDAsaHRtbD0nJztkZWNhZGVzVmlld0hlYWRlci5lcSgwKS5maW5kKCdzcGFuJykuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMucHJldkNlbnR1cnkpO2RlY2FkZXNWaWV3SGVhZGVyLmVxKDIpLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5uZXh0Q2VudHVyeSk7ZGVjYWRlc1ZpZXcuZmluZCgnLmRpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7aWYoc3RhcnREZWNhZGUueWVhcigpPT09MHx8dGhpcy5fb3B0aW9ucy5taW5EYXRlJiZ0aGlzLl9vcHRpb25zLm1pbkRhdGUuaXNBZnRlcihzdGFydERlY2FkZSwneScpKXtkZWNhZGVzVmlld0hlYWRlci5lcSgwKS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9CmRlY2FkZXNWaWV3SGVhZGVyLmVxKDEpLnRleHQoc3RhcnREZWNhZGUueWVhcigpKyctJytlbmREZWNhZGUueWVhcigpKTtpZih0aGlzLl9vcHRpb25zLm1heERhdGUmJnRoaXMuX29wdGlvbnMubWF4RGF0ZS5pc0JlZm9yZShlbmREZWNhZGUsJ3knKSl7ZGVjYWRlc1ZpZXdIZWFkZXIuZXEoMikuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQppZihzdGFydERlY2FkZS55ZWFyKCktMTA8MCl7aHRtbCs9JzxzcGFuPiZuYnNwOzwvc3Bhbj4nO31lbHNle2h0bWwrPSc8c3BhbiBkYXRhLWFjdGlvbj0ic2VsZWN0RGVjYWRlIiBjbGFzcz0iZGVjYWRlIG9sZCIgZGF0YS1zZWxlY3Rpb249IicrKHN0YXJ0RGVjYWRlLnllYXIoKSs2KSsnIj4nKyhzdGFydERlY2FkZS55ZWFyKCktMTApKyc8L3NwYW4+Jzt9CndoaWxlKCFzdGFydERlY2FkZS5pc0FmdGVyKGVuZERlY2FkZSwneScpKXtlbmREZWNhZGVZZWFyPXN0YXJ0RGVjYWRlLnllYXIoKSsxMTttaW5EYXRlRGVjYWRlPXRoaXMuX29wdGlvbnMubWluRGF0ZSYmdGhpcy5fb3B0aW9ucy5taW5EYXRlLmlzQWZ0ZXIoc3RhcnREZWNhZGUsJ3knKSYmdGhpcy5fb3B0aW9ucy5taW5EYXRlLnllYXIoKTw9ZW5kRGVjYWRlWWVhcjttYXhEYXRlRGVjYWRlPXRoaXMuX29wdGlvbnMubWF4RGF0ZSYmdGhpcy5fb3B0aW9ucy5tYXhEYXRlLmlzQWZ0ZXIoc3RhcnREZWNhZGUsJ3knKSYmdGhpcy5fb3B0aW9ucy5tYXhEYXRlLnllYXIoKTw9ZW5kRGVjYWRlWWVhcjtodG1sKz0nPHNwYW4gZGF0YS1hY3Rpb249InNlbGVjdERlY2FkZSIgY2xhc3M9ImRlY2FkZScrKHRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuaXNBZnRlcihzdGFydERlY2FkZSkmJnRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkueWVhcigpPD1lbmREZWNhZGVZZWFyPycgYWN0aXZlJzonJykrKCF0aGlzLl9pc1ZhbGlkKHN0YXJ0RGVjYWRlLCd5JykmJiFtaW5EYXRlRGVjYWRlJiYhbWF4RGF0ZURlY2FkZT8nIGRpc2FibGVkJzonJykrJyIgZGF0YS1zZWxlY3Rpb249IicrKHN0YXJ0RGVjYWRlLnllYXIoKSs2KSsnIj4nK3N0YXJ0RGVjYWRlLnllYXIoKSsnPC9zcGFuPic7c3RhcnREZWNhZGUuYWRkKDEwLCd5Jyk7fQpodG1sKz0nPHNwYW4gZGF0YS1hY3Rpb249InNlbGVjdERlY2FkZSIgY2xhc3M9ImRlY2FkZSBvbGQiIGRhdGEtc2VsZWN0aW9uPSInKyhzdGFydERlY2FkZS55ZWFyKCkrNikrJyI+JytzdGFydERlY2FkZS55ZWFyKCkrJzwvc3Bhbj4nO2RlY2FkZXNWaWV3LmZpbmQoJ3RkJykuaHRtbChodG1sKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZmlsbERhdGU9ZnVuY3Rpb24gX2ZpbGxEYXRlKCl7dmFyIGRheXNWaWV3PXRoaXMud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLWRheXMnKSxkYXlzVmlld0hlYWRlcj1kYXlzVmlldy5maW5kKCd0aCcpLGh0bWw9W107dmFyIGN1cnJlbnREYXRlPXZvaWQgMCxyb3c9dm9pZCAwLGNsc05hbWU9dm9pZCAwLGk9dm9pZCAwO2lmKCF0aGlzLl9oYXNEYXRlKCkpe3JldHVybjt9CmRheXNWaWV3SGVhZGVyLmVxKDApLmZpbmQoJ3NwYW4nKS5hdHRyKCd0aXRsZScsdGhpcy5fb3B0aW9ucy50b29sdGlwcy5wcmV2TW9udGgpO2RheXNWaWV3SGVhZGVyLmVxKDEpLmF0dHIoJ3RpdGxlJyx0aGlzLl9vcHRpb25zLnRvb2x0aXBzLnNlbGVjdE1vbnRoKTtkYXlzVmlld0hlYWRlci5lcSgyKS5maW5kKCdzcGFuJykuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMubmV4dE1vbnRoKTtkYXlzVmlldy5maW5kKCcuZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtkYXlzVmlld0hlYWRlci5lcSgxKS50ZXh0KHRoaXMuX3ZpZXdEYXRlLmZvcm1hdCh0aGlzLl9vcHRpb25zLmRheVZpZXdIZWFkZXJGb3JtYXQpKTtpZighdGhpcy5faXNWYWxpZCh0aGlzLl92aWV3RGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsJ00nKSwnTScpKXtkYXlzVmlld0hlYWRlci5lcSgwKS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9CmlmKCF0aGlzLl9pc1ZhbGlkKHRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuYWRkKDEsJ00nKSwnTScpKXtkYXlzVmlld0hlYWRlci5lcSgyKS5hZGRDbGFzcygnZGlzYWJsZWQnKTt9CmN1cnJlbnREYXRlPXRoaXMuX3ZpZXdEYXRlLmNsb25lKCkuc3RhcnRPZignTScpLnN0YXJ0T2YoJ3cnKS5zdGFydE9mKCdkJyk7dmFyIG5vdz10aGlzLmdldE1vbWVudCgpO2ZvcihpPTA7aTw0MjtpKyspe2lmKGN1cnJlbnREYXRlLndlZWtkYXkoKT09PTApe3Jvdz0kKCc8dHI+Jyk7aWYodGhpcy5fb3B0aW9ucy5jYWxlbmRhcldlZWtzKXtyb3cuYXBwZW5kKCc8dGQgY2xhc3M9ImN3Ij4nK2N1cnJlbnREYXRlLndlZWsoKSsnPC90ZD4nKTt9Cmh0bWwucHVzaChyb3cpO30KY2xzTmFtZT0nJztpZihjdXJyZW50RGF0ZS5pc0JlZm9yZSh0aGlzLl92aWV3RGF0ZSwnTScpKXtjbHNOYW1lKz0nIG9sZCc7fQppZihjdXJyZW50RGF0ZS5pc0FmdGVyKHRoaXMuX3ZpZXdEYXRlLCdNJykpe2Nsc05hbWUrPScgbmV3Jzt9CmlmKHRoaXMuX29wdGlvbnMuYWxsb3dNdWx0aWRhdGUpe3ZhciBpbmRleD10aGlzLl9kYXRlc0Zvcm1hdHRlZC5pbmRleE9mKGN1cnJlbnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtpZihpbmRleCE9PS0xKXtpZihjdXJyZW50RGF0ZS5pc1NhbWUodGhpcy5fZGF0ZXNGb3JtYXR0ZWRbaW5kZXhdLCdkJykmJiF0aGlzLnVuc2V0KXtjbHNOYW1lKz0nIGFjdGl2ZSc7fX19ZWxzZXtpZihjdXJyZW50RGF0ZS5pc1NhbWUodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKSwnZCcpJiYhdGhpcy51bnNldCl7Y2xzTmFtZSs9JyBhY3RpdmUnO319CmlmKCF0aGlzLl9pc1ZhbGlkKGN1cnJlbnREYXRlLCdkJykpe2Nsc05hbWUrPScgZGlzYWJsZWQnO30KaWYoY3VycmVudERhdGUuZGF0ZSgpPT09bm93LmRhdGUoKSYmY3VycmVudERhdGUubW9udGgoKT09PW5vdy5tb250aCgpJiZjdXJyZW50RGF0ZS55ZWFyKCk9PT1ub3cueWVhcigpKXtjbHNOYW1lKz0nIHRvZGF5Jzt9CmlmKGN1cnJlbnREYXRlLmRheSgpPT09MHx8Y3VycmVudERhdGUuZGF5KCk9PT02KXtjbHNOYW1lKz0nIHdlZWtlbmQnO30Kcm93LmFwcGVuZCgnPHRkIGRhdGEtYWN0aW9uPSJzZWxlY3REYXkiIGRhdGEtZGF5PSInK2N1cnJlbnREYXRlLmZvcm1hdCgnTCcpKyciIGNsYXNzPSJkYXknK2Nsc05hbWUrJyI+JytjdXJyZW50RGF0ZS5kYXRlKCkrJzwvdGQ+Jyk7Y3VycmVudERhdGUuYWRkKDEsJ2QnKTt9CmRheXNWaWV3LmZpbmQoJ3Rib2R5JykuZW1wdHkoKS5hcHBlbmQoaHRtbCk7dGhpcy5fdXBkYXRlTW9udGhzKCk7dGhpcy5fdXBkYXRlWWVhcnMoKTt0aGlzLl91cGRhdGVEZWNhZGVzKCk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuX2ZpbGxIb3Vycz1mdW5jdGlvbiBfZmlsbEhvdXJzKCl7dmFyIHRhYmxlPXRoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyLWhvdXJzIHRhYmxlJyksY3VycmVudEhvdXI9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS5zdGFydE9mKCdkJyksaHRtbD1bXTt2YXIgcm93PSQoJzx0cj4nKTtpZih0aGlzLl92aWV3RGF0ZS5ob3VyKCk+MTEmJiF0aGlzLnVzZTI0SG91cnMpe2N1cnJlbnRIb3VyLmhvdXIoMTIpO30Kd2hpbGUoY3VycmVudEhvdXIuaXNTYW1lKHRoaXMuX3ZpZXdEYXRlLCdkJykmJih0aGlzLnVzZTI0SG91cnN8fHRoaXMuX3ZpZXdEYXRlLmhvdXIoKTwxMiYmY3VycmVudEhvdXIuaG91cigpPDEyfHx0aGlzLl92aWV3RGF0ZS5ob3VyKCk+MTEpKXtpZihjdXJyZW50SG91ci5ob3VyKCklND09PTApe3Jvdz0kKCc8dHI+Jyk7aHRtbC5wdXNoKHJvdyk7fQpyb3cuYXBwZW5kKCc8dGQgZGF0YS1hY3Rpb249InNlbGVjdEhvdXIiIGNsYXNzPSJob3VyJysoIXRoaXMuX2lzVmFsaWQoY3VycmVudEhvdXIsJ2gnKT8nIGRpc2FibGVkJzonJykrJyI+JytjdXJyZW50SG91ci5mb3JtYXQodGhpcy51c2UyNEhvdXJzPydISCc6J2hoJykrJzwvdGQ+Jyk7Y3VycmVudEhvdXIuYWRkKDEsJ2gnKTt9CnRhYmxlLmVtcHR5KCkuYXBwZW5kKGh0bWwpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9maWxsTWludXRlcz1mdW5jdGlvbiBfZmlsbE1pbnV0ZXMoKXt2YXIgdGFibGU9dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXItbWludXRlcyB0YWJsZScpLGN1cnJlbnRNaW51dGU9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS5zdGFydE9mKCdoJyksaHRtbD1bXSxzdGVwPXRoaXMuX29wdGlvbnMuc3RlcHBpbmc9PT0xPzU6dGhpcy5fb3B0aW9ucy5zdGVwcGluZzt2YXIgcm93PSQoJzx0cj4nKTt3aGlsZSh0aGlzLl92aWV3RGF0ZS5pc1NhbWUoY3VycmVudE1pbnV0ZSwnaCcpKXtpZihjdXJyZW50TWludXRlLm1pbnV0ZSgpJShzdGVwKjQpPT09MCl7cm93PSQoJzx0cj4nKTtodG1sLnB1c2gocm93KTt9CnJvdy5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj0ic2VsZWN0TWludXRlIiBjbGFzcz0ibWludXRlJysoIXRoaXMuX2lzVmFsaWQoY3VycmVudE1pbnV0ZSwnbScpPycgZGlzYWJsZWQnOicnKSsnIj4nK2N1cnJlbnRNaW51dGUuZm9ybWF0KCdtbScpKyc8L3RkPicpO2N1cnJlbnRNaW51dGUuYWRkKHN0ZXAsJ20nKTt9CnRhYmxlLmVtcHR5KCkuYXBwZW5kKGh0bWwpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9maWxsU2Vjb25kcz1mdW5jdGlvbiBfZmlsbFNlY29uZHMoKXt2YXIgdGFibGU9dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXItc2Vjb25kcyB0YWJsZScpLGN1cnJlbnRTZWNvbmQ9dGhpcy5fdmlld0RhdGUuY2xvbmUoKS5zdGFydE9mKCdtJyksaHRtbD1bXTt2YXIgcm93PSQoJzx0cj4nKTt3aGlsZSh0aGlzLl92aWV3RGF0ZS5pc1NhbWUoY3VycmVudFNlY29uZCwnbScpKXtpZihjdXJyZW50U2Vjb25kLnNlY29uZCgpJTIwPT09MCl7cm93PSQoJzx0cj4nKTtodG1sLnB1c2gocm93KTt9CnJvdy5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj0ic2VsZWN0U2Vjb25kIiBjbGFzcz0ic2Vjb25kJysoIXRoaXMuX2lzVmFsaWQoY3VycmVudFNlY29uZCwncycpPycgZGlzYWJsZWQnOicnKSsnIj4nK2N1cnJlbnRTZWNvbmQuZm9ybWF0KCdzcycpKyc8L3RkPicpO2N1cnJlbnRTZWNvbmQuYWRkKDUsJ3MnKTt9CnRhYmxlLmVtcHR5KCkuYXBwZW5kKGh0bWwpO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLl9maWxsVGltZT1mdW5jdGlvbiBfZmlsbFRpbWUoKXt2YXIgdG9nZ2xlPXZvaWQgMCxuZXdEYXRlPXZvaWQgMDt2YXIgdGltZUNvbXBvbmVudHM9dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgc3BhbltkYXRhLXRpbWUtY29tcG9uZW50XScpO2lmKCF0aGlzLnVzZTI0SG91cnMpe3RvZ2dsZT10aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlciBbZGF0YS1hY3Rpb249dG9nZ2xlUGVyaW9kXScpO25ld0RhdGU9dGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5jbG9uZSgpLmFkZCh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmhvdXJzKCk+PTEyPy0xMjoxMiwnaCcpO3RvZ2dsZS50ZXh0KHRoaXMuX2dldExhc3RQaWNrZWREYXRlKCkuZm9ybWF0KCdBJykpO2lmKHRoaXMuX2lzVmFsaWQobmV3RGF0ZSwnaCcpKXt0b2dnbGUucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7fWVsc2V7dG9nZ2xlLmFkZENsYXNzKCdkaXNhYmxlZCcpO319CnRpbWVDb21wb25lbnRzLmZpbHRlcignW2RhdGEtdGltZS1jb21wb25lbnQ9aG91cnNdJykudGV4dCh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmZvcm1hdCgnJysodGhpcy51c2UyNEhvdXJzPydISCc6J2hoJykpKTt0aW1lQ29tcG9uZW50cy5maWx0ZXIoJ1tkYXRhLXRpbWUtY29tcG9uZW50PW1pbnV0ZXNdJykudGV4dCh0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmZvcm1hdCgnbW0nKSk7dGltZUNvbXBvbmVudHMuZmlsdGVyKCdbZGF0YS10aW1lLWNvbXBvbmVudD1zZWNvbmRzXScpLnRleHQodGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5mb3JtYXQoJ3NzJykpO3RoaXMuX2ZpbGxIb3VycygpO3RoaXMuX2ZpbGxNaW51dGVzKCk7dGhpcy5fZmlsbFNlY29uZHMoKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS5fZG9BY3Rpb249ZnVuY3Rpb24gX2RvQWN0aW9uKGUsYWN0aW9uKXt2YXIgbGFzdFBpY2tlZD10aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpO2lmKCQoZS5jdXJyZW50VGFyZ2V0KS5pcygnLmRpc2FibGVkJykpe3JldHVybiBmYWxzZTt9CmFjdGlvbj1hY3Rpb258fCQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCdhY3Rpb24nKTtzd2l0Y2goYWN0aW9uKXtjYXNlJ25leHQnOnt2YXIgbmF2Rm5jPURhdGVUaW1lUGlja2VyLkRhdGVQaWNrZXJNb2Rlc1t0aGlzLmN1cnJlbnRWaWV3TW9kZV0uTkFWX0ZVTkNUSU9OO3RoaXMuX3ZpZXdEYXRlLmFkZChEYXRlVGltZVBpY2tlci5EYXRlUGlja2VyTW9kZXNbdGhpcy5jdXJyZW50Vmlld01vZGVdLk5BVl9TVEVQLG5hdkZuYyk7dGhpcy5fZmlsbERhdGUoKTt0aGlzLl92aWV3VXBkYXRlKG5hdkZuYyk7YnJlYWs7fQpjYXNlJ3ByZXZpb3VzJzp7dmFyIF9uYXZGbmM9RGF0ZVRpbWVQaWNrZXIuRGF0ZVBpY2tlck1vZGVzW3RoaXMuY3VycmVudFZpZXdNb2RlXS5OQVZfRlVOQ1RJT047dGhpcy5fdmlld0RhdGUuc3VidHJhY3QoRGF0ZVRpbWVQaWNrZXIuRGF0ZVBpY2tlck1vZGVzW3RoaXMuY3VycmVudFZpZXdNb2RlXS5OQVZfU1RFUCxfbmF2Rm5jKTt0aGlzLl9maWxsRGF0ZSgpO3RoaXMuX3ZpZXdVcGRhdGUoX25hdkZuYyk7YnJlYWs7fQpjYXNlJ3BpY2tlclN3aXRjaCc6dGhpcy5fc2hvd01vZGUoMSk7YnJlYWs7Y2FzZSdzZWxlY3RNb250aCc6e3ZhciBtb250aD0kKGUudGFyZ2V0KS5jbG9zZXN0KCd0Ym9keScpLmZpbmQoJ3NwYW4nKS5pbmRleCgkKGUudGFyZ2V0KSk7dGhpcy5fdmlld0RhdGUubW9udGgobW9udGgpO2lmKHRoaXMuY3VycmVudFZpZXdNb2RlPT09RGF0ZVRpbWVQaWNrZXIuTWluVmlld01vZGVOdW1iZXIpe3RoaXMuX3NldFZhbHVlKGxhc3RQaWNrZWQuY2xvbmUoKS55ZWFyKHRoaXMuX3ZpZXdEYXRlLnllYXIoKSkubW9udGgodGhpcy5fdmlld0RhdGUubW9udGgoKSksdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTtpZighdGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RoaXMuaGlkZSgpO319ZWxzZXt0aGlzLl9zaG93TW9kZSgtMSk7dGhpcy5fZmlsbERhdGUoKTt9CnRoaXMuX3ZpZXdVcGRhdGUoJ00nKTticmVhazt9CmNhc2Unc2VsZWN0WWVhcic6e3ZhciB5ZWFyPXBhcnNlSW50KCQoZS50YXJnZXQpLnRleHQoKSwxMCl8fDA7dGhpcy5fdmlld0RhdGUueWVhcih5ZWFyKTtpZih0aGlzLmN1cnJlbnRWaWV3TW9kZT09PURhdGVUaW1lUGlja2VyLk1pblZpZXdNb2RlTnVtYmVyKXt0aGlzLl9zZXRWYWx1ZShsYXN0UGlja2VkLmNsb25lKCkueWVhcih0aGlzLl92aWV3RGF0ZS55ZWFyKCkpLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7aWYoIXRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLmhpZGUoKTt9fWVsc2V7dGhpcy5fc2hvd01vZGUoLTEpO3RoaXMuX2ZpbGxEYXRlKCk7fQp0aGlzLl92aWV3VXBkYXRlKCdZWVlZJyk7YnJlYWs7fQpjYXNlJ3NlbGVjdERlY2FkZSc6e3ZhciBfeWVhcj1wYXJzZUludCgkKGUudGFyZ2V0KS5kYXRhKCdzZWxlY3Rpb24nKSwxMCl8fDA7dGhpcy5fdmlld0RhdGUueWVhcihfeWVhcik7aWYodGhpcy5jdXJyZW50Vmlld01vZGU9PT1EYXRlVGltZVBpY2tlci5NaW5WaWV3TW9kZU51bWJlcil7dGhpcy5fc2V0VmFsdWUobGFzdFBpY2tlZC5jbG9uZSgpLnllYXIodGhpcy5fdmlld0RhdGUueWVhcigpKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2lmKCF0aGlzLl9vcHRpb25zLmlubGluZSl7dGhpcy5oaWRlKCk7fX1lbHNle3RoaXMuX3Nob3dNb2RlKC0xKTt0aGlzLl9maWxsRGF0ZSgpO30KdGhpcy5fdmlld1VwZGF0ZSgnWVlZWScpO2JyZWFrO30KY2FzZSdzZWxlY3REYXknOnt2YXIgZGF5PXRoaXMuX3ZpZXdEYXRlLmNsb25lKCk7aWYoJChlLnRhcmdldCkuaXMoJy5vbGQnKSl7ZGF5LnN1YnRyYWN0KDEsJ00nKTt9CmlmKCQoZS50YXJnZXQpLmlzKCcubmV3Jykpe2RheS5hZGQoMSwnTScpO30KdGhpcy5fc2V0VmFsdWUoZGF5LmRhdGUocGFyc2VJbnQoJChlLnRhcmdldCkudGV4dCgpLDEwKSksdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTtpZighdGhpcy5faGFzVGltZSgpJiYhdGhpcy5fb3B0aW9ucy5rZWVwT3BlbiYmIXRoaXMuX29wdGlvbnMuaW5saW5lKXt0aGlzLmhpZGUoKTt9CmJyZWFrO30KY2FzZSdpbmNyZW1lbnRIb3Vycyc6e3ZhciBuZXdEYXRlPWxhc3RQaWNrZWQuY2xvbmUoKS5hZGQoMSwnaCcpO2lmKHRoaXMuX2lzVmFsaWQobmV3RGF0ZSwnaCcpKXt0aGlzLl9zZXRWYWx1ZShuZXdEYXRlLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9CmNhc2UnaW5jcmVtZW50TWludXRlcyc6e3ZhciBfbmV3RGF0ZT1sYXN0UGlja2VkLmNsb25lKCkuYWRkKHRoaXMuX29wdGlvbnMuc3RlcHBpbmcsJ20nKTtpZih0aGlzLl9pc1ZhbGlkKF9uZXdEYXRlLCdtJykpe3RoaXMuX3NldFZhbHVlKF9uZXdEYXRlLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9CmNhc2UnaW5jcmVtZW50U2Vjb25kcyc6e3ZhciBfbmV3RGF0ZTI9bGFzdFBpY2tlZC5jbG9uZSgpLmFkZCgxLCdzJyk7aWYodGhpcy5faXNWYWxpZChfbmV3RGF0ZTIsJ3MnKSl7dGhpcy5fc2V0VmFsdWUoX25ld0RhdGUyLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9CmNhc2UnZGVjcmVtZW50SG91cnMnOnt2YXIgX25ld0RhdGUzPWxhc3RQaWNrZWQuY2xvbmUoKS5zdWJ0cmFjdCgxLCdoJyk7aWYodGhpcy5faXNWYWxpZChfbmV3RGF0ZTMsJ2gnKSl7dGhpcy5fc2V0VmFsdWUoX25ld0RhdGUzLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9CmNhc2UnZGVjcmVtZW50TWludXRlcyc6e3ZhciBfbmV3RGF0ZTQ9bGFzdFBpY2tlZC5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuX29wdGlvbnMuc3RlcHBpbmcsJ20nKTtpZih0aGlzLl9pc1ZhbGlkKF9uZXdEYXRlNCwnbScpKXt0aGlzLl9zZXRWYWx1ZShfbmV3RGF0ZTQsdGhpcy5fZ2V0TGFzdFBpY2tlZERhdGVJbmRleCgpKTt9CmJyZWFrO30KY2FzZSdkZWNyZW1lbnRTZWNvbmRzJzp7dmFyIF9uZXdEYXRlNT1sYXN0UGlja2VkLmNsb25lKCkuc3VidHJhY3QoMSwncycpO2lmKHRoaXMuX2lzVmFsaWQoX25ld0RhdGU1LCdzJykpe3RoaXMuX3NldFZhbHVlKF9uZXdEYXRlNSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO30KYnJlYWs7fQpjYXNlJ3RvZ2dsZVBlcmlvZCc6e3RoaXMuX3NldFZhbHVlKGxhc3RQaWNrZWQuY2xvbmUoKS5hZGQobGFzdFBpY2tlZC5ob3VycygpPj0xMj8tMTI6MTIsJ2gnKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2JyZWFrO30KY2FzZSd0b2dnbGVQaWNrZXInOnt2YXIgJHRoaXM9JChlLnRhcmdldCksJGxpbms9JHRoaXMuY2xvc2VzdCgnYScpLCRwYXJlbnQ9JHRoaXMuY2xvc2VzdCgndWwnKSxleHBhbmRlZD0kcGFyZW50LmZpbmQoJy5zaG93JyksY2xvc2VkPSRwYXJlbnQuZmluZCgnLmNvbGxhcHNlOm5vdCguc2hvdyknKSwkc3Bhbj0kdGhpcy5pcygnc3BhbicpPyR0aGlzOiR0aGlzLmZpbmQoJ3NwYW4nKTt2YXIgY29sbGFwc2VEYXRhPXZvaWQgMDtpZihleHBhbmRlZCYmZXhwYW5kZWQubGVuZ3RoKXtjb2xsYXBzZURhdGE9ZXhwYW5kZWQuZGF0YSgnY29sbGFwc2UnKTtpZihjb2xsYXBzZURhdGEmJmNvbGxhcHNlRGF0YS50cmFuc2l0aW9uaW5nKXtyZXR1cm4gdHJ1ZTt9CmlmKGV4cGFuZGVkLmNvbGxhcHNlKXtleHBhbmRlZC5jb2xsYXBzZSgnaGlkZScpO2Nsb3NlZC5jb2xsYXBzZSgnc2hvdycpO31lbHNle2V4cGFuZGVkLnJlbW92ZUNsYXNzKCdzaG93Jyk7Y2xvc2VkLmFkZENsYXNzKCdzaG93Jyk7fQokc3Bhbi50b2dnbGVDbGFzcyh0aGlzLl9vcHRpb25zLmljb25zLnRpbWUrJyAnK3RoaXMuX29wdGlvbnMuaWNvbnMuZGF0ZSk7aWYoJHNwYW4uaGFzQ2xhc3ModGhpcy5fb3B0aW9ucy5pY29ucy5kYXRlKSl7JGxpbmsuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMuc2VsZWN0RGF0ZSk7fWVsc2V7JGxpbmsuYXR0cigndGl0bGUnLHRoaXMuX29wdGlvbnMudG9vbHRpcHMuc2VsZWN0VGltZSk7fX19CmJyZWFrO2Nhc2Unc2hvd1BpY2tlcic6dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgPiBkaXY6bm90KC50aW1lcGlja2VyLXBpY2tlciknKS5oaWRlKCk7dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuc2hvdygpO2JyZWFrO2Nhc2Unc2hvd0hvdXJzJzp0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXInKS5oaWRlKCk7dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItaG91cnMnKS5zaG93KCk7YnJlYWs7Y2FzZSdzaG93TWludXRlcyc6dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuaGlkZSgpO3RoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLW1pbnV0ZXMnKS5zaG93KCk7YnJlYWs7Y2FzZSdzaG93U2Vjb25kcyc6dGhpcy53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuaGlkZSgpO3RoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLXNlY29uZHMnKS5zaG93KCk7YnJlYWs7Y2FzZSdzZWxlY3RIb3VyJzp7dmFyIGhvdXI9cGFyc2VJbnQoJChlLnRhcmdldCkudGV4dCgpLDEwKTtpZighdGhpcy51c2UyNEhvdXJzKXtpZihsYXN0UGlja2VkLmhvdXJzKCk+PTEyKXtpZihob3VyIT09MTIpe2hvdXIrPTEyO319ZWxzZXtpZihob3VyPT09MTIpe2hvdXI9MDt9fX0KdGhpcy5fc2V0VmFsdWUobGFzdFBpY2tlZC5jbG9uZSgpLmhvdXJzKGhvdXIpLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7aWYoIXRoaXMuX2lzRW5hYmxlZCgnYScpJiYhdGhpcy5faXNFbmFibGVkKCdtJykmJiF0aGlzLl9vcHRpb25zLmtlZXBPcGVuJiYhdGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RoaXMuaGlkZSgpO31lbHNle3RoaXMuX2RvQWN0aW9uKGUsJ3Nob3dQaWNrZXInKTt9CmJyZWFrO30KY2FzZSdzZWxlY3RNaW51dGUnOnRoaXMuX3NldFZhbHVlKGxhc3RQaWNrZWQuY2xvbmUoKS5taW51dGVzKHBhcnNlSW50KCQoZS50YXJnZXQpLnRleHQoKSwxMCkpLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7aWYoIXRoaXMuX2lzRW5hYmxlZCgnYScpJiYhdGhpcy5faXNFbmFibGVkKCdzJykmJiF0aGlzLl9vcHRpb25zLmtlZXBPcGVuJiYhdGhpcy5fb3B0aW9ucy5pbmxpbmUpe3RoaXMuaGlkZSgpO31lbHNle3RoaXMuX2RvQWN0aW9uKGUsJ3Nob3dQaWNrZXInKTt9CmJyZWFrO2Nhc2Unc2VsZWN0U2Vjb25kJzp0aGlzLl9zZXRWYWx1ZShsYXN0UGlja2VkLmNsb25lKCkuc2Vjb25kcyhwYXJzZUludCgkKGUudGFyZ2V0KS50ZXh0KCksMTApKSx0aGlzLl9nZXRMYXN0UGlja2VkRGF0ZUluZGV4KCkpO2lmKCF0aGlzLl9pc0VuYWJsZWQoJ2EnKSYmIXRoaXMuX29wdGlvbnMua2VlcE9wZW4mJiF0aGlzLl9vcHRpb25zLmlubGluZSl7dGhpcy5oaWRlKCk7fWVsc2V7dGhpcy5fZG9BY3Rpb24oZSwnc2hvd1BpY2tlcicpO30KYnJlYWs7Y2FzZSdjbGVhcic6dGhpcy5jbGVhcigpO2JyZWFrO2Nhc2UnY2xvc2UnOnRoaXMuaGlkZSgpO2JyZWFrO2Nhc2UndG9kYXknOnt2YXIgdG9kYXlzRGF0ZT10aGlzLmdldE1vbWVudCgpO2lmKHRoaXMuX2lzVmFsaWQodG9kYXlzRGF0ZSwnZCcpKXt0aGlzLl9zZXRWYWx1ZSh0b2RheXNEYXRlLHRoaXMuX2dldExhc3RQaWNrZWREYXRlSW5kZXgoKSk7fQpicmVhazt9fQpyZXR1cm4gZmFsc2U7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbiBoaWRlKCl7dmFyIHRyYW5zaXRpb25pbmc9ZmFsc2U7aWYoIXRoaXMud2lkZ2V0KXtyZXR1cm47fQp0aGlzLndpZGdldC5maW5kKCcuY29sbGFwc2UnKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNvbGxhcHNlRGF0YT0kKHRoaXMpLmRhdGEoJ2NvbGxhcHNlJyk7aWYoY29sbGFwc2VEYXRhJiZjb2xsYXBzZURhdGEudHJhbnNpdGlvbmluZyl7dHJhbnNpdGlvbmluZz10cnVlO3JldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO30pO2lmKHRyYW5zaXRpb25pbmcpe3JldHVybjt9CmlmKHRoaXMuY29tcG9uZW50JiZ0aGlzLmNvbXBvbmVudC5oYXNDbGFzcygnYnRuJykpe3RoaXMuY29tcG9uZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTt9CnRoaXMud2lkZ2V0LmhpZGUoKTskKHdpbmRvdykub2ZmKCdyZXNpemUnLHRoaXMuX3BsYWNlKCkpO3RoaXMud2lkZ2V0Lm9mZignY2xpY2snLCdbZGF0YS1hY3Rpb25dJyk7dGhpcy53aWRnZXQub2ZmKCdtb3VzZWRvd24nLGZhbHNlKTt0aGlzLndpZGdldC5yZW1vdmUoKTt0aGlzLndpZGdldD1mYWxzZTt0aGlzLl9ub3RpZnlFdmVudCh7dHlwZTpEYXRlVGltZVBpY2tlci5FdmVudC5ISURFLGRhdGU6dGhpcy5fZ2V0TGFzdFBpY2tlZERhdGUoKS5jbG9uZSgpfSk7aWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCl7dGhpcy5pbnB1dC5ibHVyKCk7fQp0aGlzLl92aWV3RGF0ZT10aGlzLl9nZXRMYXN0UGlja2VkRGF0ZSgpLmNsb25lKCk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbiBzaG93KCl7dmFyIGN1cnJlbnRNb21lbnQ9dm9pZCAwO3ZhciB1c2VDdXJyZW50R3JhbnVsYXJpdHk9eyd5ZWFyJzpmdW5jdGlvbiB5ZWFyKG0pe3JldHVybiBtLm1vbnRoKDApLmRhdGUoMSkuaG91cnMoMCkuc2Vjb25kcygwKS5taW51dGVzKDApO30sJ21vbnRoJzpmdW5jdGlvbiBtb250aChtKXtyZXR1cm4gbS5kYXRlKDEpLmhvdXJzKDApLnNlY29uZHMoMCkubWludXRlcygwKTt9LCdkYXknOmZ1bmN0aW9uIGRheShtKXtyZXR1cm4gbS5ob3VycygwKS5zZWNvbmRzKDApLm1pbnV0ZXMoMCk7fSwnaG91cic6ZnVuY3Rpb24gaG91cihtKXtyZXR1cm4gbS5zZWNvbmRzKDApLm1pbnV0ZXMoMCk7fSwnbWludXRlJzpmdW5jdGlvbiBtaW51dGUobSl7cmV0dXJuIG0uc2Vjb25kcygwKTt9fTtpZih0aGlzLmlucHV0IT09dW5kZWZpbmVkKXtpZih0aGlzLmlucHV0LnByb3AoJ2Rpc2FibGVkJyl8fCF0aGlzLl9vcHRpb25zLmlnbm9yZVJlYWRvbmx5JiZ0aGlzLmlucHV0LnByb3AoJ3JlYWRvbmx5Jyl8fHRoaXMud2lkZ2V0KXtyZXR1cm47fQppZih0aGlzLmlucHV0LnZhbCgpIT09dW5kZWZpbmVkJiZ0aGlzLmlucHV0LnZhbCgpLnRyaW0oKS5sZW5ndGghPT0wKXt0aGlzLl9zZXRWYWx1ZSh0aGlzLl9wYXJzZUlucHV0RGF0ZSh0aGlzLmlucHV0LnZhbCgpLnRyaW0oKSksMCk7fWVsc2UgaWYodGhpcy51bnNldCYmdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50KXtjdXJyZW50TW9tZW50PXRoaXMuZ2V0TW9tZW50KCk7aWYodHlwZW9mIHRoaXMuX29wdGlvbnMudXNlQ3VycmVudD09PSdzdHJpbmcnKXtjdXJyZW50TW9tZW50PXVzZUN1cnJlbnRHcmFudWxhcml0eVt0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnRdKGN1cnJlbnRNb21lbnQpO30KdGhpcy5fc2V0VmFsdWUoY3VycmVudE1vbWVudCwwKTt9fWVsc2UgaWYodGhpcy51bnNldCYmdGhpcy5fb3B0aW9ucy51c2VDdXJyZW50KXtjdXJyZW50TW9tZW50PXRoaXMuZ2V0TW9tZW50KCk7aWYodHlwZW9mIHRoaXMuX29wdGlvbnMudXNlQ3VycmVudD09PSdzdHJpbmcnKXtjdXJyZW50TW9tZW50PXVzZUN1cnJlbnRHcmFudWxhcml0eVt0aGlzLl9vcHRpb25zLnVzZUN1cnJlbnRdKGN1cnJlbnRNb21lbnQpO30KdGhpcy5fc2V0VmFsdWUoY3VycmVudE1vbWVudCwwKTt9CnRoaXMud2lkZ2V0PXRoaXMuX2dldFRlbXBsYXRlKCk7dGhpcy5fZmlsbERvdygpO3RoaXMuX2ZpbGxNb250aHMoKTt0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlci1ob3VycycpLmhpZGUoKTt0aGlzLndpZGdldC5maW5kKCcudGltZXBpY2tlci1taW51dGVzJykuaGlkZSgpO3RoaXMud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyLXNlY29uZHMnKS5oaWRlKCk7dGhpcy5fdXBkYXRlKCk7dGhpcy5fc2hvd01vZGUoKTskKHdpbmRvdykub24oJ3Jlc2l6ZScse3BpY2tlcjp0aGlzfSx0aGlzLl9wbGFjZSk7dGhpcy53aWRnZXQub24oJ2NsaWNrJywnW2RhdGEtYWN0aW9uXScsJC5wcm94eSh0aGlzLl9kb0FjdGlvbix0aGlzKSk7dGhpcy53aWRnZXQub24oJ21vdXNlZG93bicsZmFsc2UpO2lmKHRoaXMuY29tcG9uZW50JiZ0aGlzLmNvbXBvbmVudC5oYXNDbGFzcygnYnRuJykpe3RoaXMuY29tcG9uZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTt9CnRoaXMuX3BsYWNlKCk7dGhpcy53aWRnZXQuc2hvdygpO2lmKHRoaXMuaW5wdXQhPT11bmRlZmluZWQmJnRoaXMuX29wdGlvbnMuZm9jdXNPblNob3cmJiF0aGlzLmlucHV0LmlzKCc6Zm9jdXMnKSl7dGhpcy5pbnB1dC5mb2N1cygpO30KdGhpcy5fbm90aWZ5RXZlbnQoe3R5cGU6RGF0ZVRpbWVQaWNrZXIuRXZlbnQuU0hPV30pO307VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24gZGVzdHJveSgpe3RoaXMuaGlkZSgpO3RoaXMuX2VsZW1lbnQucmVtb3ZlRGF0YShEYXRlVGltZVBpY2tlci5EQVRBX0tFWSk7dGhpcy5fZWxlbWVudC5yZW1vdmVEYXRhKCdkYXRlJyk7fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbiBkaXNhYmxlKCl7dGhpcy5oaWRlKCk7aWYodGhpcy5jb21wb25lbnQmJnRoaXMuY29tcG9uZW50Lmhhc0NsYXNzKCdidG4nKSl7dGhpcy5jb21wb25lbnQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7fQppZih0aGlzLmlucHV0IT09dW5kZWZpbmVkKXt0aGlzLmlucHV0LnByb3AoJ2Rpc2FibGVkJyx0cnVlKTt9fTtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uIGVuYWJsZSgpe2lmKHRoaXMuY29tcG9uZW50JiZ0aGlzLmNvbXBvbmVudC5oYXNDbGFzcygnYnRuJykpe3RoaXMuY29tcG9uZW50LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO30KaWYodGhpcy5pbnB1dCE9PXVuZGVmaW5lZCl7dGhpcy5pbnB1dC5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO319O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS50b29sYmFyUGxhY2VtZW50PWZ1bmN0aW9uIHRvb2xiYXJQbGFjZW1lbnQoX3Rvb2xiYXJQbGFjZW1lbnQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy50b29sYmFyUGxhY2VtZW50O30KaWYodHlwZW9mIF90b29sYmFyUGxhY2VtZW50IT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3Rvb2xiYXJQbGFjZW1lbnQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlcicpO30KaWYodG9vbGJhclBsYWNlbWVudHMuaW5kZXhPZihfdG9vbGJhclBsYWNlbWVudCk9PT0tMSl7dGhyb3cgbmV3IFR5cGVFcnJvcigndG9vbGJhclBsYWNlbWVudCgpIHBhcmFtZXRlciBtdXN0IGJlIG9uZSBvZiAoJyt0b29sYmFyUGxhY2VtZW50cy5qb2luKCcsICcpKycpIHZhbHVlJyk7fQp0aGlzLl9vcHRpb25zLnRvb2xiYXJQbGFjZW1lbnQ9X3Rvb2xiYXJQbGFjZW1lbnQ7aWYodGhpcy53aWRnZXQpe3RoaXMuaGlkZSgpO3RoaXMuc2hvdygpO319O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS53aWRnZXRQb3NpdGlvbmluZz1mdW5jdGlvbiB3aWRnZXRQb3NpdGlvbmluZyhfd2lkZ2V0UG9zaXRpb25pbmcpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gJC5leHRlbmQoe30sdGhpcy5fb3B0aW9ucy53aWRnZXRQb3NpdGlvbmluZyk7fQppZih7fS50b1N0cmluZy5jYWxsKF93aWRnZXRQb3NpdGlvbmluZykhPT0nW29iamVjdCBPYmplY3RdJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignd2lkZ2V0UG9zaXRpb25pbmcoKSBleHBlY3RzIGFuIG9iamVjdCB2YXJpYWJsZScpO30KaWYoX3dpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWwpe2lmKHR5cGVvZiBfd2lkZ2V0UG9zaXRpb25pbmcuaG9yaXpvbnRhbCE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgVHlwZUVycm9yKCd3aWRnZXRQb3NpdGlvbmluZygpIGhvcml6b250YWwgdmFyaWFibGUgbXVzdCBiZSBhIHN0cmluZycpO30KX3dpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWw9X3dpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWwudG9Mb3dlckNhc2UoKTtpZihob3Jpem9udGFsTW9kZXMuaW5kZXhPZihfd2lkZ2V0UG9zaXRpb25pbmcuaG9yaXpvbnRhbCk9PT0tMSl7dGhyb3cgbmV3IFR5cGVFcnJvcignd2lkZ2V0UG9zaXRpb25pbmcoKSBleHBlY3RzIGhvcml6b250YWwgcGFyYW1ldGVyIHRvIGJlIG9uZSBvZiAoJytob3Jpem9udGFsTW9kZXMuam9pbignLCAnKSsnKScpO30KdGhpcy5fb3B0aW9ucy53aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsPV93aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsO30KaWYoX3dpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsKXtpZih0eXBlb2YgX3dpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsIT09J3N0cmluZycpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3dpZGdldFBvc2l0aW9uaW5nKCkgdmVydGljYWwgdmFyaWFibGUgbXVzdCBiZSBhIHN0cmluZycpO30KX3dpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsPV93aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbC50b0xvd2VyQ2FzZSgpO2lmKHZlcnRpY2FsTW9kZXMuaW5kZXhPZihfd2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWwpPT09LTEpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3dpZGdldFBvc2l0aW9uaW5nKCkgZXhwZWN0cyB2ZXJ0aWNhbCBwYXJhbWV0ZXIgdG8gYmUgb25lIG9mICgnK3ZlcnRpY2FsTW9kZXMuam9pbignLCAnKSsnKScpO30KdGhpcy5fb3B0aW9ucy53aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbD1fd2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWw7fQp0aGlzLl91cGRhdGUoKTt9O1RlbXB1c0RvbWludXNCb290c3RyYXA0LnByb3RvdHlwZS53aWRnZXRQYXJlbnQ9ZnVuY3Rpb24gd2lkZ2V0UGFyZW50KF93aWRnZXRQYXJlbnQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy53aWRnZXRQYXJlbnQ7fQppZih0eXBlb2YgX3dpZGdldFBhcmVudD09PSdzdHJpbmcnKXtfd2lkZ2V0UGFyZW50PSQoX3dpZGdldFBhcmVudCk7fQppZihfd2lkZ2V0UGFyZW50IT09bnVsbCYmdHlwZW9mIF93aWRnZXRQYXJlbnQhPT0nc3RyaW5nJyYmIShfd2lkZ2V0UGFyZW50IGluc3RhbmNlb2YgJCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3dpZGdldFBhcmVudCgpIGV4cGVjdHMgYSBzdHJpbmcgb3IgYSBqUXVlcnkgb2JqZWN0IHBhcmFtZXRlcicpO30KdGhpcy5fb3B0aW9ucy53aWRnZXRQYXJlbnQ9X3dpZGdldFBhcmVudDtpZih0aGlzLndpZGdldCl7dGhpcy5oaWRlKCk7dGhpcy5zaG93KCk7fX07VGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUhhbmRsZVRoaXM9ZnVuY3Rpb24gX2pRdWVyeUhhbmRsZVRoaXMobWUsb3B0aW9uLGFyZ3VtZW50KXt2YXIgZGF0YT0kKG1lKS5kYXRhKERhdGVUaW1lUGlja2VyLkRBVEFfS0VZKTtpZigodHlwZW9mIG9wdGlvbj09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2Yob3B0aW9uKSk9PT0nb2JqZWN0Jyl7JC5leHRlbmQoe30sRGF0ZVRpbWVQaWNrZXIuRGVmYXVsdCxvcHRpb24pO30KaWYoIWRhdGEpe2RhdGE9bmV3IFRlbXB1c0RvbWludXNCb290c3RyYXA0KCQobWUpLG9wdGlvbik7JChtZSkuZGF0YShEYXRlVGltZVBpY2tlci5EQVRBX0tFWSxkYXRhKTt9CmlmKHR5cGVvZiBvcHRpb249PT0nc3RyaW5nJyl7aWYoZGF0YVtvcHRpb25dPT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCAiJytvcHRpb24rJyInKTt9CmlmKGFyZ3VtZW50PT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YVtvcHRpb25dKCk7fWVsc2V7cmV0dXJuIGRhdGFbb3B0aW9uXShhcmd1bWVudCk7fX19O1RlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShvcHRpb24sYXJndW1lbnQpe2lmKHRoaXMubGVuZ3RoPT09MSl7cmV0dXJuIFRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlIYW5kbGVUaGlzKHRoaXNbMF0sb3B0aW9uLGFyZ3VtZW50KTt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SGFuZGxlVGhpcyh0aGlzLG9wdGlvbixhcmd1bWVudCk7fSk7fTtyZXR1cm4gVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQ7fShEYXRlVGltZVBpY2tlcik7JChkb2N1bWVudCkub24oRGF0ZVRpbWVQaWNrZXIuRXZlbnQuQ0xJQ0tfREFUQV9BUEksRGF0ZVRpbWVQaWNrZXIuU2VsZWN0b3IuREFUQV9UT0dHTEUsZnVuY3Rpb24oKXt2YXIgJHRhcmdldD1nZXRTZWxlY3RvckZyb21FbGVtZW50KCQodGhpcykpO2lmKCR0YXJnZXQubGVuZ3RoPT09MCl7cmV0dXJuO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsJ3RvZ2dsZScpO30pLm9uKERhdGVUaW1lUGlja2VyLkV2ZW50LkNIQU5HRSwnLicrRGF0ZVRpbWVQaWNrZXIuQ2xhc3NOYW1lLklOUFVULGZ1bmN0aW9uKGV2ZW50KXt2YXIgJHRhcmdldD1nZXRTZWxlY3RvckZyb21FbGVtZW50KCQodGhpcykpO2lmKCR0YXJnZXQubGVuZ3RoPT09MCl7cmV0dXJuO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsJ19jaGFuZ2UnLGV2ZW50KTt9KS5vbihEYXRlVGltZVBpY2tlci5FdmVudC5CTFVSLCcuJytEYXRlVGltZVBpY2tlci5DbGFzc05hbWUuSU5QVVQsZnVuY3Rpb24oZXZlbnQpe3ZhciAkdGFyZ2V0PWdldFNlbGVjdG9yRnJvbUVsZW1lbnQoJCh0aGlzKSksY29uZmlnPSR0YXJnZXQuZGF0YShEYXRlVGltZVBpY2tlci5EQVRBX0tFWSk7aWYoJHRhcmdldC5sZW5ndGg9PT0wKXtyZXR1cm47fQppZihjb25maWcmJmNvbmZpZy5fb3B0aW9ucy5kZWJ1Z3x8d2luZG93LmRlYnVnKXtyZXR1cm47fQpUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHRhcmdldCwnaGlkZScsZXZlbnQpO30pLm9uKERhdGVUaW1lUGlja2VyLkV2ZW50LktFWURPV04sJy4nK0RhdGVUaW1lUGlja2VyLkNsYXNzTmFtZS5JTlBVVCxmdW5jdGlvbihldmVudCl7dmFyICR0YXJnZXQ9Z2V0U2VsZWN0b3JGcm9tRWxlbWVudCgkKHRoaXMpKTtpZigkdGFyZ2V0Lmxlbmd0aD09PTApe3JldHVybjt9ClRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkdGFyZ2V0LCdfa2V5ZG93bicsZXZlbnQpO30pLm9uKERhdGVUaW1lUGlja2VyLkV2ZW50LktFWVVQLCcuJytEYXRlVGltZVBpY2tlci5DbGFzc05hbWUuSU5QVVQsZnVuY3Rpb24oZXZlbnQpe3ZhciAkdGFyZ2V0PWdldFNlbGVjdG9yRnJvbUVsZW1lbnQoJCh0aGlzKSk7aWYoJHRhcmdldC5sZW5ndGg9PT0wKXtyZXR1cm47fQpUZW1wdXNEb21pbnVzQm9vdHN0cmFwNC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHRhcmdldCwnX2tleXVwJyxldmVudCk7fSkub24oRGF0ZVRpbWVQaWNrZXIuRXZlbnQuRk9DVVMsJy4nK0RhdGVUaW1lUGlja2VyLkNsYXNzTmFtZS5JTlBVVCxmdW5jdGlvbihldmVudCl7dmFyICR0YXJnZXQ9Z2V0U2VsZWN0b3JGcm9tRWxlbWVudCgkKHRoaXMpKSxjb25maWc9JHRhcmdldC5kYXRhKERhdGVUaW1lUGlja2VyLkRBVEFfS0VZKTtpZigkdGFyZ2V0Lmxlbmd0aD09PTApe3JldHVybjt9CmlmKCFjb25maWcuX29wdGlvbnMuYWxsb3dJbnB1dFRvZ2dsZSl7cmV0dXJuO30KVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsJ3Nob3cnLGV2ZW50KTt9KTskLmZuW0RhdGVUaW1lUGlja2VyLk5BTUVdPVRlbXB1c0RvbWludXNCb290c3RyYXA0Ll9qUXVlcnlJbnRlcmZhY2U7JC5mbltEYXRlVGltZVBpY2tlci5OQU1FXS5Db25zdHJ1Y3Rvcj1UZW1wdXNEb21pbnVzQm9vdHN0cmFwNDskLmZuW0RhdGVUaW1lUGlja2VyLk5BTUVdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXskLmZuW0RhdGVUaW1lUGlja2VyLk5BTUVdPUpRVUVSWV9OT19DT05GTElDVDtyZXR1cm4gVGVtcHVzRG9taW51c0Jvb3RzdHJhcDQuX2pRdWVyeUludGVyZmFjZTt9O3JldHVybiBUZW1wdXNEb21pbnVzQm9vdHN0cmFwNDt9KGpRdWVyeSk7fSgpOzsKCi8qIC93ZWIvc3RhdGljL2xpYi9zZWxlY3QyL3NlbGVjdDIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24oJCl7aWYodHlwZW9mICQuZm4uZWFjaDI9PSJ1bmRlZmluZWQiKXskLmV4dGVuZCgkLmZuLHtlYWNoMjpmdW5jdGlvbihjKXt2YXIgaj0kKFswXSksaT0tMSxsPXRoaXMubGVuZ3RoO3doaWxlKCsraTxsJiYoai5jb250ZXh0PWpbMF09dGhpc1tpXSkmJmMuY2FsbChqWzBdLGksaikhPT1mYWxzZSk7cmV0dXJuIHRoaXM7fX0pO319KShqUXVlcnkpOyhmdW5jdGlvbigkLHVuZGVmaW5lZCl7InVzZSBzdHJpY3QiO2lmKHdpbmRvdy5TZWxlY3QyIT09dW5kZWZpbmVkKXtyZXR1cm47fQp2YXIgQWJzdHJhY3RTZWxlY3QyLFNpbmdsZVNlbGVjdDIsTXVsdGlTZWxlY3QyLG5leHRVaWQsc2l6ZXIsbGFzdE1vdXNlUG9zaXRpb249e3g6MCx5OjB9LCRkb2N1bWVudCxzY3JvbGxCYXJEaW1lbnNpb25zLEtFWT17VEFCOjksRU5URVI6MTMsRVNDOjI3LFNQQUNFOjMyLExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxTSElGVDoxNixDVFJMOjE3LEFMVDoxOCxQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxIT01FOjM2LEVORDozNSxCQUNLU1BBQ0U6OCxERUxFVEU6NDYsaXNBcnJvdzpmdW5jdGlvbihrKXtrPWsud2hpY2g/ay53aGljaDprO3N3aXRjaChrKXtjYXNlIEtFWS5MRUZUOmNhc2UgS0VZLlJJR0hUOmNhc2UgS0VZLlVQOmNhc2UgS0VZLkRPV046cmV0dXJuIHRydWU7fQpyZXR1cm4gZmFsc2U7fSxpc0NvbnRyb2w6ZnVuY3Rpb24oZSl7dmFyIGs9ZS53aGljaDtzd2l0Y2goayl7Y2FzZSBLRVkuU0hJRlQ6Y2FzZSBLRVkuQ1RSTDpjYXNlIEtFWS5BTFQ6cmV0dXJuIHRydWU7fQppZihlLm1ldGFLZXkpcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO30saXNGdW5jdGlvbktleTpmdW5jdGlvbihrKXtrPWsud2hpY2g/ay53aGljaDprO3JldHVybiBrPj0xMTImJms8PTEyMzt9fSxNRUFTVVJFX1NDUk9MTEJBUl9URU1QTEFURT0iPGRpdiBjbGFzcz0nc2VsZWN0Mi1tZWFzdXJlLXNjcm9sbGJhcic+PC9kaXY+IixESUFDUklUSUNTPXsiXHUyNEI2IjoiQSIsIlx1RkYyMSI6IkEiLCJcdTAwQzAiOiJBIiwiXHUwMEMxIjoiQSIsIlx1MDBDMiI6IkEiLCJcdTFFQTYiOiJBIiwiXHUxRUE0IjoiQSIsIlx1MUVBQSI6IkEiLCJcdTFFQTgiOiJBIiwiXHUwMEMzIjoiQSIsIlx1MDEwMCI6IkEiLCJcdTAxMDIiOiJBIiwiXHUxRUIwIjoiQSIsIlx1MUVBRSI6IkEiLCJcdTFFQjQiOiJBIiwiXHUxRUIyIjoiQSIsIlx1MDIyNiI6IkEiLCJcdTAxRTAiOiJBIiwiXHUwMEM0IjoiQSIsIlx1MDFERSI6IkEiLCJcdTFFQTIiOiJBIiwiXHUwMEM1IjoiQSIsIlx1MDFGQSI6IkEiLCJcdTAxQ0QiOiJBIiwiXHUwMjAwIjoiQSIsIlx1MDIwMiI6IkEiLCJcdTFFQTAiOiJBIiwiXHUxRUFDIjoiQSIsIlx1MUVCNiI6IkEiLCJcdTFFMDAiOiJBIiwiXHUwMTA0IjoiQSIsIlx1MDIzQSI6IkEiLCJcdTJDNkYiOiJBIiwiXHVBNzMyIjoiQUEiLCJcdTAwQzYiOiJBRSIsIlx1MDFGQyI6IkFFIiwiXHUwMUUyIjoiQUUiLCJcdUE3MzQiOiJBTyIsIlx1QTczNiI6IkFVIiwiXHVBNzM4IjoiQVYiLCJcdUE3M0EiOiJBViIsIlx1QTczQyI6IkFZIiwiXHUyNEI3IjoiQiIsIlx1RkYyMiI6IkIiLCJcdTFFMDIiOiJCIiwiXHUxRTA0IjoiQiIsIlx1MUUwNiI6IkIiLCJcdTAyNDMiOiJCIiwiXHUwMTgyIjoiQiIsIlx1MDE4MSI6IkIiLCJcdTI0QjgiOiJDIiwiXHVGRjIzIjoiQyIsIlx1MDEwNiI6IkMiLCJcdTAxMDgiOiJDIiwiXHUwMTBBIjoiQyIsIlx1MDEwQyI6IkMiLCJcdTAwQzciOiJDIiwiXHUxRTA4IjoiQyIsIlx1MDE4NyI6IkMiLCJcdTAyM0IiOiJDIiwiXHVBNzNFIjoiQyIsIlx1MjRCOSI6IkQiLCJcdUZGMjQiOiJEIiwiXHUxRTBBIjoiRCIsIlx1MDEwRSI6IkQiLCJcdTFFMEMiOiJEIiwiXHUxRTEwIjoiRCIsIlx1MUUxMiI6IkQiLCJcdTFFMEUiOiJEIiwiXHUwMTEwIjoiRCIsIlx1MDE4QiI6IkQiLCJcdTAxOEEiOiJEIiwiXHUwMTg5IjoiRCIsIlx1QTc3OSI6IkQiLCJcdTAxRjEiOiJEWiIsIlx1MDFDNCI6IkRaIiwiXHUwMUYyIjoiRHoiLCJcdTAxQzUiOiJEeiIsIlx1MjRCQSI6IkUiLCJcdUZGMjUiOiJFIiwiXHUwMEM4IjoiRSIsIlx1MDBDOSI6IkUiLCJcdTAwQ0EiOiJFIiwiXHUxRUMwIjoiRSIsIlx1MUVCRSI6IkUiLCJcdTFFQzQiOiJFIiwiXHUxRUMyIjoiRSIsIlx1MUVCQyI6IkUiLCJcdTAxMTIiOiJFIiwiXHUxRTE0IjoiRSIsIlx1MUUxNiI6IkUiLCJcdTAxMTQiOiJFIiwiXHUwMTE2IjoiRSIsIlx1MDBDQiI6IkUiLCJcdTFFQkEiOiJFIiwiXHUwMTFBIjoiRSIsIlx1MDIwNCI6IkUiLCJcdTAyMDYiOiJFIiwiXHUxRUI4IjoiRSIsIlx1MUVDNiI6IkUiLCJcdTAyMjgiOiJFIiwiXHUxRTFDIjoiRSIsIlx1MDExOCI6IkUiLCJcdTFFMTgiOiJFIiwiXHUxRTFBIjoiRSIsIlx1MDE5MCI6IkUiLCJcdTAxOEUiOiJFIiwiXHUyNEJCIjoiRiIsIlx1RkYyNiI6IkYiLCJcdTFFMUUiOiJGIiwiXHUwMTkxIjoiRiIsIlx1QTc3QiI6IkYiLCJcdTI0QkMiOiJHIiwiXHVGRjI3IjoiRyIsIlx1MDFGNCI6IkciLCJcdTAxMUMiOiJHIiwiXHUxRTIwIjoiRyIsIlx1MDExRSI6IkciLCJcdTAxMjAiOiJHIiwiXHUwMUU2IjoiRyIsIlx1MDEyMiI6IkciLCJcdTAxRTQiOiJHIiwiXHUwMTkzIjoiRyIsIlx1QTdBMCI6IkciLCJcdUE3N0QiOiJHIiwiXHVBNzdFIjoiRyIsIlx1MjRCRCI6IkgiLCJcdUZGMjgiOiJIIiwiXHUwMTI0IjoiSCIsIlx1MUUyMiI6IkgiLCJcdTFFMjYiOiJIIiwiXHUwMjFFIjoiSCIsIlx1MUUyNCI6IkgiLCJcdTFFMjgiOiJIIiwiXHUxRTJBIjoiSCIsIlx1MDEyNiI6IkgiLCJcdTJDNjciOiJIIiwiXHUyQzc1IjoiSCIsIlx1QTc4RCI6IkgiLCJcdTI0QkUiOiJJIiwiXHVGRjI5IjoiSSIsIlx1MDBDQyI6IkkiLCJcdTAwQ0QiOiJJIiwiXHUwMENFIjoiSSIsIlx1MDEyOCI6IkkiLCJcdTAxMkEiOiJJIiwiXHUwMTJDIjoiSSIsIlx1MDEzMCI6IkkiLCJcdTAwQ0YiOiJJIiwiXHUxRTJFIjoiSSIsIlx1MUVDOCI6IkkiLCJcdTAxQ0YiOiJJIiwiXHUwMjA4IjoiSSIsIlx1MDIwQSI6IkkiLCJcdTFFQ0EiOiJJIiwiXHUwMTJFIjoiSSIsIlx1MUUyQyI6IkkiLCJcdTAxOTciOiJJIiwiXHUyNEJGIjoiSiIsIlx1RkYyQSI6IkoiLCJcdTAxMzQiOiJKIiwiXHUwMjQ4IjoiSiIsIlx1MjRDMCI6IksiLCJcdUZGMkIiOiJLIiwiXHUxRTMwIjoiSyIsIlx1MDFFOCI6IksiLCJcdTFFMzIiOiJLIiwiXHUwMTM2IjoiSyIsIlx1MUUzNCI6IksiLCJcdTAxOTgiOiJLIiwiXHUyQzY5IjoiSyIsIlx1QTc0MCI6IksiLCJcdUE3NDIiOiJLIiwiXHVBNzQ0IjoiSyIsIlx1QTdBMiI6IksiLCJcdTI0QzEiOiJMIiwiXHVGRjJDIjoiTCIsIlx1MDEzRiI6IkwiLCJcdTAxMzkiOiJMIiwiXHUwMTNEIjoiTCIsIlx1MUUzNiI6IkwiLCJcdTFFMzgiOiJMIiwiXHUwMTNCIjoiTCIsIlx1MUUzQyI6IkwiLCJcdTFFM0EiOiJMIiwiXHUwMTQxIjoiTCIsIlx1MDIzRCI6IkwiLCJcdTJDNjIiOiJMIiwiXHUyQzYwIjoiTCIsIlx1QTc0OCI6IkwiLCJcdUE3NDYiOiJMIiwiXHVBNzgwIjoiTCIsIlx1MDFDNyI6IkxKIiwiXHUwMUM4IjoiTGoiLCJcdTI0QzIiOiJNIiwiXHVGRjJEIjoiTSIsIlx1MUUzRSI6Ik0iLCJcdTFFNDAiOiJNIiwiXHUxRTQyIjoiTSIsIlx1MkM2RSI6Ik0iLCJcdTAxOUMiOiJNIiwiXHUyNEMzIjoiTiIsIlx1RkYyRSI6Ik4iLCJcdTAxRjgiOiJOIiwiXHUwMTQzIjoiTiIsIlx1MDBEMSI6Ik4iLCJcdTFFNDQiOiJOIiwiXHUwMTQ3IjoiTiIsIlx1MUU0NiI6Ik4iLCJcdTAxNDUiOiJOIiwiXHUxRTRBIjoiTiIsIlx1MUU0OCI6Ik4iLCJcdTAyMjAiOiJOIiwiXHUwMTlEIjoiTiIsIlx1QTc5MCI6Ik4iLCJcdUE3QTQiOiJOIiwiXHUwMUNBIjoiTkoiLCJcdTAxQ0IiOiJOaiIsIlx1MjRDNCI6Ik8iLCJcdUZGMkYiOiJPIiwiXHUwMEQyIjoiTyIsIlx1MDBEMyI6Ik8iLCJcdTAwRDQiOiJPIiwiXHUxRUQyIjoiTyIsIlx1MUVEMCI6Ik8iLCJcdTFFRDYiOiJPIiwiXHUxRUQ0IjoiTyIsIlx1MDBENSI6Ik8iLCJcdTFFNEMiOiJPIiwiXHUwMjJDIjoiTyIsIlx1MUU0RSI6Ik8iLCJcdTAxNEMiOiJPIiwiXHUxRTUwIjoiTyIsIlx1MUU1MiI6Ik8iLCJcdTAxNEUiOiJPIiwiXHUwMjJFIjoiTyIsIlx1MDIzMCI6Ik8iLCJcdTAwRDYiOiJPIiwiXHUwMjJBIjoiTyIsIlx1MUVDRSI6Ik8iLCJcdTAxNTAiOiJPIiwiXHUwMUQxIjoiTyIsIlx1MDIwQyI6Ik8iLCJcdTAyMEUiOiJPIiwiXHUwMUEwIjoiTyIsIlx1MUVEQyI6Ik8iLCJcdTFFREEiOiJPIiwiXHUxRUUwIjoiTyIsIlx1MUVERSI6Ik8iLCJcdTFFRTIiOiJPIiwiXHUxRUNDIjoiTyIsIlx1MUVEOCI6Ik8iLCJcdTAxRUEiOiJPIiwiXHUwMUVDIjoiTyIsIlx1MDBEOCI6Ik8iLCJcdTAxRkUiOiJPIiwiXHUwMTg2IjoiTyIsIlx1MDE5RiI6Ik8iLCJcdUE3NEEiOiJPIiwiXHVBNzRDIjoiTyIsIlx1MDFBMiI6Ik9JIiwiXHVBNzRFIjoiT08iLCJcdTAyMjIiOiJPVSIsIlx1MjRDNSI6IlAiLCJcdUZGMzAiOiJQIiwiXHUxRTU0IjoiUCIsIlx1MUU1NiI6IlAiLCJcdTAxQTQiOiJQIiwiXHUyQzYzIjoiUCIsIlx1QTc1MCI6IlAiLCJcdUE3NTIiOiJQIiwiXHVBNzU0IjoiUCIsIlx1MjRDNiI6IlEiLCJcdUZGMzEiOiJRIiwiXHVBNzU2IjoiUSIsIlx1QTc1OCI6IlEiLCJcdTAyNEEiOiJRIiwiXHUyNEM3IjoiUiIsIlx1RkYzMiI6IlIiLCJcdTAxNTQiOiJSIiwiXHUxRTU4IjoiUiIsIlx1MDE1OCI6IlIiLCJcdTAyMTAiOiJSIiwiXHUwMjEyIjoiUiIsIlx1MUU1QSI6IlIiLCJcdTFFNUMiOiJSIiwiXHUwMTU2IjoiUiIsIlx1MUU1RSI6IlIiLCJcdTAyNEMiOiJSIiwiXHUyQzY0IjoiUiIsIlx1QTc1QSI6IlIiLCJcdUE3QTYiOiJSIiwiXHVBNzgyIjoiUiIsIlx1MjRDOCI6IlMiLCJcdUZGMzMiOiJTIiwiXHUxRTlFIjoiUyIsIlx1MDE1QSI6IlMiLCJcdTFFNjQiOiJTIiwiXHUwMTVDIjoiUyIsIlx1MUU2MCI6IlMiLCJcdTAxNjAiOiJTIiwiXHUxRTY2IjoiUyIsIlx1MUU2MiI6IlMiLCJcdTFFNjgiOiJTIiwiXHUwMjE4IjoiUyIsIlx1MDE1RSI6IlMiLCJcdTJDN0UiOiJTIiwiXHVBN0E4IjoiUyIsIlx1QTc4NCI6IlMiLCJcdTI0QzkiOiJUIiwiXHVGRjM0IjoiVCIsIlx1MUU2QSI6IlQiLCJcdTAxNjQiOiJUIiwiXHUxRTZDIjoiVCIsIlx1MDIxQSI6IlQiLCJcdTAxNjIiOiJUIiwiXHUxRTcwIjoiVCIsIlx1MUU2RSI6IlQiLCJcdTAxNjYiOiJUIiwiXHUwMUFDIjoiVCIsIlx1MDFBRSI6IlQiLCJcdTAyM0UiOiJUIiwiXHVBNzg2IjoiVCIsIlx1QTcyOCI6IlRaIiwiXHUyNENBIjoiVSIsIlx1RkYzNSI6IlUiLCJcdTAwRDkiOiJVIiwiXHUwMERBIjoiVSIsIlx1MDBEQiI6IlUiLCJcdTAxNjgiOiJVIiwiXHUxRTc4IjoiVSIsIlx1MDE2QSI6IlUiLCJcdTFFN0EiOiJVIiwiXHUwMTZDIjoiVSIsIlx1MDBEQyI6IlUiLCJcdTAxREIiOiJVIiwiXHUwMUQ3IjoiVSIsIlx1MDFENSI6IlUiLCJcdTAxRDkiOiJVIiwiXHUxRUU2IjoiVSIsIlx1MDE2RSI6IlUiLCJcdTAxNzAiOiJVIiwiXHUwMUQzIjoiVSIsIlx1MDIxNCI6IlUiLCJcdTAyMTYiOiJVIiwiXHUwMUFGIjoiVSIsIlx1MUVFQSI6IlUiLCJcdTFFRTgiOiJVIiwiXHUxRUVFIjoiVSIsIlx1MUVFQyI6IlUiLCJcdTFFRjAiOiJVIiwiXHUxRUU0IjoiVSIsIlx1MUU3MiI6IlUiLCJcdTAxNzIiOiJVIiwiXHUxRTc2IjoiVSIsIlx1MUU3NCI6IlUiLCJcdTAyNDQiOiJVIiwiXHUyNENCIjoiViIsIlx1RkYzNiI6IlYiLCJcdTFFN0MiOiJWIiwiXHUxRTdFIjoiViIsIlx1MDFCMiI6IlYiLCJcdUE3NUUiOiJWIiwiXHUwMjQ1IjoiViIsIlx1QTc2MCI6IlZZIiwiXHUyNENDIjoiVyIsIlx1RkYzNyI6IlciLCJcdTFFODAiOiJXIiwiXHUxRTgyIjoiVyIsIlx1MDE3NCI6IlciLCJcdTFFODYiOiJXIiwiXHUxRTg0IjoiVyIsIlx1MUU4OCI6IlciLCJcdTJDNzIiOiJXIiwiXHUyNENEIjoiWCIsIlx1RkYzOCI6IlgiLCJcdTFFOEEiOiJYIiwiXHUxRThDIjoiWCIsIlx1MjRDRSI6IlkiLCJcdUZGMzkiOiJZIiwiXHUxRUYyIjoiWSIsIlx1MDBERCI6IlkiLCJcdTAxNzYiOiJZIiwiXHUxRUY4IjoiWSIsIlx1MDIzMiI6IlkiLCJcdTFFOEUiOiJZIiwiXHUwMTc4IjoiWSIsIlx1MUVGNiI6IlkiLCJcdTFFRjQiOiJZIiwiXHUwMUIzIjoiWSIsIlx1MDI0RSI6IlkiLCJcdTFFRkUiOiJZIiwiXHUyNENGIjoiWiIsIlx1RkYzQSI6IloiLCJcdTAxNzkiOiJaIiwiXHUxRTkwIjoiWiIsIlx1MDE3QiI6IloiLCJcdTAxN0QiOiJaIiwiXHUxRTkyIjoiWiIsIlx1MUU5NCI6IloiLCJcdTAxQjUiOiJaIiwiXHUwMjI0IjoiWiIsIlx1MkM3RiI6IloiLCJcdTJDNkIiOiJaIiwiXHVBNzYyIjoiWiIsIlx1MjREMCI6ImEiLCJcdUZGNDEiOiJhIiwiXHUxRTlBIjoiYSIsIlx1MDBFMCI6ImEiLCJcdTAwRTEiOiJhIiwiXHUwMEUyIjoiYSIsIlx1MUVBNyI6ImEiLCJcdTFFQTUiOiJhIiwiXHUxRUFCIjoiYSIsIlx1MUVBOSI6ImEiLCJcdTAwRTMiOiJhIiwiXHUwMTAxIjoiYSIsIlx1MDEwMyI6ImEiLCJcdTFFQjEiOiJhIiwiXHUxRUFGIjoiYSIsIlx1MUVCNSI6ImEiLCJcdTFFQjMiOiJhIiwiXHUwMjI3IjoiYSIsIlx1MDFFMSI6ImEiLCJcdTAwRTQiOiJhIiwiXHUwMURGIjoiYSIsIlx1MUVBMyI6ImEiLCJcdTAwRTUiOiJhIiwiXHUwMUZCIjoiYSIsIlx1MDFDRSI6ImEiLCJcdTAyMDEiOiJhIiwiXHUwMjAzIjoiYSIsIlx1MUVBMSI6ImEiLCJcdTFFQUQiOiJhIiwiXHUxRUI3IjoiYSIsIlx1MUUwMSI6ImEiLCJcdTAxMDUiOiJhIiwiXHUyQzY1IjoiYSIsIlx1MDI1MCI6ImEiLCJcdUE3MzMiOiJhYSIsIlx1MDBFNiI6ImFlIiwiXHUwMUZEIjoiYWUiLCJcdTAxRTMiOiJhZSIsIlx1QTczNSI6ImFvIiwiXHVBNzM3IjoiYXUiLCJcdUE3MzkiOiJhdiIsIlx1QTczQiI6ImF2IiwiXHVBNzNEIjoiYXkiLCJcdTI0RDEiOiJiIiwiXHVGRjQyIjoiYiIsIlx1MUUwMyI6ImIiLCJcdTFFMDUiOiJiIiwiXHUxRTA3IjoiYiIsIlx1MDE4MCI6ImIiLCJcdTAxODMiOiJiIiwiXHUwMjUzIjoiYiIsIlx1MjREMiI6ImMiLCJcdUZGNDMiOiJjIiwiXHUwMTA3IjoiYyIsIlx1MDEwOSI6ImMiLCJcdTAxMEIiOiJjIiwiXHUwMTBEIjoiYyIsIlx1MDBFNyI6ImMiLCJcdTFFMDkiOiJjIiwiXHUwMTg4IjoiYyIsIlx1MDIzQyI6ImMiLCJcdUE3M0YiOiJjIiwiXHUyMTg0IjoiYyIsIlx1MjREMyI6ImQiLCJcdUZGNDQiOiJkIiwiXHUxRTBCIjoiZCIsIlx1MDEwRiI6ImQiLCJcdTFFMEQiOiJkIiwiXHUxRTExIjoiZCIsIlx1MUUxMyI6ImQiLCJcdTFFMEYiOiJkIiwiXHUwMTExIjoiZCIsIlx1MDE4QyI6ImQiLCJcdTAyNTYiOiJkIiwiXHUwMjU3IjoiZCIsIlx1QTc3QSI6ImQiLCJcdTAxRjMiOiJkeiIsIlx1MDFDNiI6ImR6IiwiXHUyNEQ0IjoiZSIsIlx1RkY0NSI6ImUiLCJcdTAwRTgiOiJlIiwiXHUwMEU5IjoiZSIsIlx1MDBFQSI6ImUiLCJcdTFFQzEiOiJlIiwiXHUxRUJGIjoiZSIsIlx1MUVDNSI6ImUiLCJcdTFFQzMiOiJlIiwiXHUxRUJEIjoiZSIsIlx1MDExMyI6ImUiLCJcdTFFMTUiOiJlIiwiXHUxRTE3IjoiZSIsIlx1MDExNSI6ImUiLCJcdTAxMTciOiJlIiwiXHUwMEVCIjoiZSIsIlx1MUVCQiI6ImUiLCJcdTAxMUIiOiJlIiwiXHUwMjA1IjoiZSIsIlx1MDIwNyI6ImUiLCJcdTFFQjkiOiJlIiwiXHUxRUM3IjoiZSIsIlx1MDIyOSI6ImUiLCJcdTFFMUQiOiJlIiwiXHUwMTE5IjoiZSIsIlx1MUUxOSI6ImUiLCJcdTFFMUIiOiJlIiwiXHUwMjQ3IjoiZSIsIlx1MDI1QiI6ImUiLCJcdTAxREQiOiJlIiwiXHUyNEQ1IjoiZiIsIlx1RkY0NiI6ImYiLCJcdTFFMUYiOiJmIiwiXHUwMTkyIjoiZiIsIlx1QTc3QyI6ImYiLCJcdTI0RDYiOiJnIiwiXHVGRjQ3IjoiZyIsIlx1MDFGNSI6ImciLCJcdTAxMUQiOiJnIiwiXHUxRTIxIjoiZyIsIlx1MDExRiI6ImciLCJcdTAxMjEiOiJnIiwiXHUwMUU3IjoiZyIsIlx1MDEyMyI6ImciLCJcdTAxRTUiOiJnIiwiXHUwMjYwIjoiZyIsIlx1QTdBMSI6ImciLCJcdTFENzkiOiJnIiwiXHVBNzdGIjoiZyIsIlx1MjRENyI6ImgiLCJcdUZGNDgiOiJoIiwiXHUwMTI1IjoiaCIsIlx1MUUyMyI6ImgiLCJcdTFFMjciOiJoIiwiXHUwMjFGIjoiaCIsIlx1MUUyNSI6ImgiLCJcdTFFMjkiOiJoIiwiXHUxRTJCIjoiaCIsIlx1MUU5NiI6ImgiLCJcdTAxMjciOiJoIiwiXHUyQzY4IjoiaCIsIlx1MkM3NiI6ImgiLCJcdTAyNjUiOiJoIiwiXHUwMTk1IjoiaHYiLCJcdTI0RDgiOiJpIiwiXHVGRjQ5IjoiaSIsIlx1MDBFQyI6ImkiLCJcdTAwRUQiOiJpIiwiXHUwMEVFIjoiaSIsIlx1MDEyOSI6ImkiLCJcdTAxMkIiOiJpIiwiXHUwMTJEIjoiaSIsIlx1MDBFRiI6ImkiLCJcdTFFMkYiOiJpIiwiXHUxRUM5IjoiaSIsIlx1MDFEMCI6ImkiLCJcdTAyMDkiOiJpIiwiXHUwMjBCIjoiaSIsIlx1MUVDQiI6ImkiLCJcdTAxMkYiOiJpIiwiXHUxRTJEIjoiaSIsIlx1MDI2OCI6ImkiLCJcdTAxMzEiOiJpIiwiXHUyNEQ5IjoiaiIsIlx1RkY0QSI6ImoiLCJcdTAxMzUiOiJqIiwiXHUwMUYwIjoiaiIsIlx1MDI0OSI6ImoiLCJcdTI0REEiOiJrIiwiXHVGRjRCIjoiayIsIlx1MUUzMSI6ImsiLCJcdTAxRTkiOiJrIiwiXHUxRTMzIjoiayIsIlx1MDEzNyI6ImsiLCJcdTFFMzUiOiJrIiwiXHUwMTk5IjoiayIsIlx1MkM2QSI6ImsiLCJcdUE3NDEiOiJrIiwiXHVBNzQzIjoiayIsIlx1QTc0NSI6ImsiLCJcdUE3QTMiOiJrIiwiXHUyNERCIjoibCIsIlx1RkY0QyI6ImwiLCJcdTAxNDAiOiJsIiwiXHUwMTNBIjoibCIsIlx1MDEzRSI6ImwiLCJcdTFFMzciOiJsIiwiXHUxRTM5IjoibCIsIlx1MDEzQyI6ImwiLCJcdTFFM0QiOiJsIiwiXHUxRTNCIjoibCIsIlx1MDE3RiI6ImwiLCJcdTAxNDIiOiJsIiwiXHUwMTlBIjoibCIsIlx1MDI2QiI6ImwiLCJcdTJDNjEiOiJsIiwiXHVBNzQ5IjoibCIsIlx1QTc4MSI6ImwiLCJcdUE3NDciOiJsIiwiXHUwMUM5IjoibGoiLCJcdTI0REMiOiJtIiwiXHVGRjREIjoibSIsIlx1MUUzRiI6Im0iLCJcdTFFNDEiOiJtIiwiXHUxRTQzIjoibSIsIlx1MDI3MSI6Im0iLCJcdTAyNkYiOiJtIiwiXHUyNEREIjoibiIsIlx1RkY0RSI6Im4iLCJcdTAxRjkiOiJuIiwiXHUwMTQ0IjoibiIsIlx1MDBGMSI6Im4iLCJcdTFFNDUiOiJuIiwiXHUwMTQ4IjoibiIsIlx1MUU0NyI6Im4iLCJcdTAxNDYiOiJuIiwiXHUxRTRCIjoibiIsIlx1MUU0OSI6Im4iLCJcdTAxOUUiOiJuIiwiXHUwMjcyIjoibiIsIlx1MDE0OSI6Im4iLCJcdUE3OTEiOiJuIiwiXHVBN0E1IjoibiIsIlx1MDFDQyI6Im5qIiwiXHUyNERFIjoibyIsIlx1RkY0RiI6Im8iLCJcdTAwRjIiOiJvIiwiXHUwMEYzIjoibyIsIlx1MDBGNCI6Im8iLCJcdTFFRDMiOiJvIiwiXHUxRUQxIjoibyIsIlx1MUVENyI6Im8iLCJcdTFFRDUiOiJvIiwiXHUwMEY1IjoibyIsIlx1MUU0RCI6Im8iLCJcdTAyMkQiOiJvIiwiXHUxRTRGIjoibyIsIlx1MDE0RCI6Im8iLCJcdTFFNTEiOiJvIiwiXHUxRTUzIjoibyIsIlx1MDE0RiI6Im8iLCJcdTAyMkYiOiJvIiwiXHUwMjMxIjoibyIsIlx1MDBGNiI6Im8iLCJcdTAyMkIiOiJvIiwiXHUxRUNGIjoibyIsIlx1MDE1MSI6Im8iLCJcdTAxRDIiOiJvIiwiXHUwMjBEIjoibyIsIlx1MDIwRiI6Im8iLCJcdTAxQTEiOiJvIiwiXHUxRUREIjoibyIsIlx1MUVEQiI6Im8iLCJcdTFFRTEiOiJvIiwiXHUxRURGIjoibyIsIlx1MUVFMyI6Im8iLCJcdTFFQ0QiOiJvIiwiXHUxRUQ5IjoibyIsIlx1MDFFQiI6Im8iLCJcdTAxRUQiOiJvIiwiXHUwMEY4IjoibyIsIlx1MDFGRiI6Im8iLCJcdTAyNTQiOiJvIiwiXHVBNzRCIjoibyIsIlx1QTc0RCI6Im8iLCJcdTAyNzUiOiJvIiwiXHUwMUEzIjoib2kiLCJcdTAyMjMiOiJvdSIsIlx1QTc0RiI6Im9vIiwiXHUyNERGIjoicCIsIlx1RkY1MCI6InAiLCJcdTFFNTUiOiJwIiwiXHUxRTU3IjoicCIsIlx1MDFBNSI6InAiLCJcdTFEN0QiOiJwIiwiXHVBNzUxIjoicCIsIlx1QTc1MyI6InAiLCJcdUE3NTUiOiJwIiwiXHUyNEUwIjoicSIsIlx1RkY1MSI6InEiLCJcdTAyNEIiOiJxIiwiXHVBNzU3IjoicSIsIlx1QTc1OSI6InEiLCJcdTI0RTEiOiJyIiwiXHVGRjUyIjoiciIsIlx1MDE1NSI6InIiLCJcdTFFNTkiOiJyIiwiXHUwMTU5IjoiciIsIlx1MDIxMSI6InIiLCJcdTAyMTMiOiJyIiwiXHUxRTVCIjoiciIsIlx1MUU1RCI6InIiLCJcdTAxNTciOiJyIiwiXHUxRTVGIjoiciIsIlx1MDI0RCI6InIiLCJcdTAyN0QiOiJyIiwiXHVBNzVCIjoiciIsIlx1QTdBNyI6InIiLCJcdUE3ODMiOiJyIiwiXHUyNEUyIjoicyIsIlx1RkY1MyI6InMiLCJcdTAwREYiOiJzIiwiXHUwMTVCIjoicyIsIlx1MUU2NSI6InMiLCJcdTAxNUQiOiJzIiwiXHUxRTYxIjoicyIsIlx1MDE2MSI6InMiLCJcdTFFNjciOiJzIiwiXHUxRTYzIjoicyIsIlx1MUU2OSI6InMiLCJcdTAyMTkiOiJzIiwiXHUwMTVGIjoicyIsIlx1MDIzRiI6InMiLCJcdUE3QTkiOiJzIiwiXHVBNzg1IjoicyIsIlx1MUU5QiI6InMiLCJcdTI0RTMiOiJ0IiwiXHVGRjU0IjoidCIsIlx1MUU2QiI6InQiLCJcdTFFOTciOiJ0IiwiXHUwMTY1IjoidCIsIlx1MUU2RCI6InQiLCJcdTAyMUIiOiJ0IiwiXHUwMTYzIjoidCIsIlx1MUU3MSI6InQiLCJcdTFFNkYiOiJ0IiwiXHUwMTY3IjoidCIsIlx1MDFBRCI6InQiLCJcdTAyODgiOiJ0IiwiXHUyQzY2IjoidCIsIlx1QTc4NyI6InQiLCJcdUE3MjkiOiJ0eiIsIlx1MjRFNCI6InUiLCJcdUZGNTUiOiJ1IiwiXHUwMEY5IjoidSIsIlx1MDBGQSI6InUiLCJcdTAwRkIiOiJ1IiwiXHUwMTY5IjoidSIsIlx1MUU3OSI6InUiLCJcdTAxNkIiOiJ1IiwiXHUxRTdCIjoidSIsIlx1MDE2RCI6InUiLCJcdTAwRkMiOiJ1IiwiXHUwMURDIjoidSIsIlx1MDFEOCI6InUiLCJcdTAxRDYiOiJ1IiwiXHUwMURBIjoidSIsIlx1MUVFNyI6InUiLCJcdTAxNkYiOiJ1IiwiXHUwMTcxIjoidSIsIlx1MDFENCI6InUiLCJcdTAyMTUiOiJ1IiwiXHUwMjE3IjoidSIsIlx1MDFCMCI6InUiLCJcdTFFRUIiOiJ1IiwiXHUxRUU5IjoidSIsIlx1MUVFRiI6InUiLCJcdTFFRUQiOiJ1IiwiXHUxRUYxIjoidSIsIlx1MUVFNSI6InUiLCJcdTFFNzMiOiJ1IiwiXHUwMTczIjoidSIsIlx1MUU3NyI6InUiLCJcdTFFNzUiOiJ1IiwiXHUwMjg5IjoidSIsIlx1MjRFNSI6InYiLCJcdUZGNTYiOiJ2IiwiXHUxRTdEIjoidiIsIlx1MUU3RiI6InYiLCJcdTAyOEIiOiJ2IiwiXHVBNzVGIjoidiIsIlx1MDI4QyI6InYiLCJcdUE3NjEiOiJ2eSIsIlx1MjRFNiI6InciLCJcdUZGNTciOiJ3IiwiXHUxRTgxIjoidyIsIlx1MUU4MyI6InciLCJcdTAxNzUiOiJ3IiwiXHUxRTg3IjoidyIsIlx1MUU4NSI6InciLCJcdTFFOTgiOiJ3IiwiXHUxRTg5IjoidyIsIlx1MkM3MyI6InciLCJcdTI0RTciOiJ4IiwiXHVGRjU4IjoieCIsIlx1MUU4QiI6IngiLCJcdTFFOEQiOiJ4IiwiXHUyNEU4IjoieSIsIlx1RkY1OSI6InkiLCJcdTFFRjMiOiJ5IiwiXHUwMEZEIjoieSIsIlx1MDE3NyI6InkiLCJcdTFFRjkiOiJ5IiwiXHUwMjMzIjoieSIsIlx1MUU4RiI6InkiLCJcdTAwRkYiOiJ5IiwiXHUxRUY3IjoieSIsIlx1MUU5OSI6InkiLCJcdTFFRjUiOiJ5IiwiXHUwMUI0IjoieSIsIlx1MDI0RiI6InkiLCJcdTFFRkYiOiJ5IiwiXHUyNEU5IjoieiIsIlx1RkY1QSI6InoiLCJcdTAxN0EiOiJ6IiwiXHUxRTkxIjoieiIsIlx1MDE3QyI6InoiLCJcdTAxN0UiOiJ6IiwiXHUxRTkzIjoieiIsIlx1MUU5NSI6InoiLCJcdTAxQjYiOiJ6IiwiXHUwMjI1IjoieiIsIlx1MDI0MCI6InoiLCJcdTJDNkMiOiJ6IiwiXHVBNzYzIjoieiIsIlx1MDM4NiI6Ilx1MDM5MSIsIlx1MDM4OCI6Ilx1MDM5NSIsIlx1MDM4OSI6Ilx1MDM5NyIsIlx1MDM4QSI6Ilx1MDM5OSIsIlx1MDNBQSI6Ilx1MDM5OSIsIlx1MDM4QyI6Ilx1MDM5RiIsIlx1MDM4RSI6Ilx1MDNBNSIsIlx1MDNBQiI6Ilx1MDNBNSIsIlx1MDM4RiI6Ilx1MDNBOSIsIlx1MDNBQyI6Ilx1MDNCMSIsIlx1MDNBRCI6Ilx1MDNCNSIsIlx1MDNBRSI6Ilx1MDNCNyIsIlx1MDNBRiI6Ilx1MDNCOSIsIlx1MDNDQSI6Ilx1MDNCOSIsIlx1MDM5MCI6Ilx1MDNCOSIsIlx1MDNDQyI6Ilx1MDNCRiIsIlx1MDNDRCI6Ilx1MDNDNSIsIlx1MDNDQiI6Ilx1MDNDNSIsIlx1MDNCMCI6Ilx1MDNDNSIsIlx1MDNDOSI6Ilx1MDNDOSIsIlx1MDNDMiI6Ilx1MDNDMyJ9OyRkb2N1bWVudD0kKGRvY3VtZW50KTtuZXh0VWlkPShmdW5jdGlvbigpe3ZhciBjb3VudGVyPTE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNvdW50ZXIrKzt9O30oKSk7ZnVuY3Rpb24gcmVpbnNlcnRFbGVtZW50KGVsZW1lbnQpe3ZhciBwbGFjZWhvbGRlcj0kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7ZWxlbWVudC5iZWZvcmUocGxhY2Vob2xkZXIpO3BsYWNlaG9sZGVyLmJlZm9yZShlbGVtZW50KTtwbGFjZWhvbGRlci5yZW1vdmUoKTt9CmZ1bmN0aW9uIHN0cmlwRGlhY3JpdGljcyhzdHIpe2Z1bmN0aW9uIG1hdGNoKGEpe3JldHVybiBESUFDUklUSUNTW2FdfHxhO30KcmV0dXJuIHN0ci5yZXBsYWNlKC9bXlx1MDAwMC1cdTAwN0VdL2csbWF0Y2gpO30KZnVuY3Rpb24gaW5kZXhPZih2YWx1ZSxhcnJheSl7dmFyIGk9MCxsPWFycmF5Lmxlbmd0aDtmb3IoO2k8bDtpPWkrMSl7aWYoZXF1YWwodmFsdWUsYXJyYXlbaV0pKXJldHVybiBpO30KcmV0dXJuLTE7fQpmdW5jdGlvbiBtZWFzdXJlU2Nyb2xsYmFyKCl7dmFyICR0ZW1wbGF0ZT0kKE1FQVNVUkVfU0NST0xMQkFSX1RFTVBMQVRFKTskdGVtcGxhdGUuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7dmFyIGRpbT17d2lkdGg6JHRlbXBsYXRlLndpZHRoKCktJHRlbXBsYXRlWzBdLmNsaWVudFdpZHRoLGhlaWdodDokdGVtcGxhdGUuaGVpZ2h0KCktJHRlbXBsYXRlWzBdLmNsaWVudEhlaWdodH07JHRlbXBsYXRlLnJlbW92ZSgpO3JldHVybiBkaW07fQpmdW5jdGlvbiBlcXVhbChhLGIpe2lmKGE9PT1iKXJldHVybiB0cnVlO2lmKGE9PT11bmRlZmluZWR8fGI9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO2lmKGE9PT1udWxsfHxiPT09bnVsbClyZXR1cm4gZmFsc2U7aWYoYS5jb25zdHJ1Y3Rvcj09PVN0cmluZylyZXR1cm4gYSsnJz09PWIrJyc7aWYoYi5jb25zdHJ1Y3Rvcj09PVN0cmluZylyZXR1cm4gYisnJz09PWErJyc7cmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gc3BsaXRWYWwoc3RyaW5nLHNlcGFyYXRvcix0cmFuc2Zvcm0pe3ZhciB2YWwsaSxsO2lmKHN0cmluZz09PW51bGx8fHN0cmluZy5sZW5ndGg8MSlyZXR1cm5bXTt2YWw9c3RyaW5nLnNwbGl0KHNlcGFyYXRvcik7Zm9yKGk9MCxsPXZhbC5sZW5ndGg7aTxsO2k9aSsxKXZhbFtpXT10cmFuc2Zvcm0odmFsW2ldKTtyZXR1cm4gdmFsO30KZnVuY3Rpb24gZ2V0U2lkZUJvcmRlclBhZGRpbmcoZWxlbWVudCl7cmV0dXJuIGVsZW1lbnQub3V0ZXJXaWR0aChmYWxzZSktZWxlbWVudC53aWR0aCgpO30KZnVuY3Rpb24gaW5zdGFsbEtleVVwQ2hhbmdlRXZlbnQoZWxlbWVudCl7dmFyIGtleT0ia2V5dXAtY2hhbmdlLXZhbHVlIjtlbGVtZW50Lm9uKCJrZXlkb3duIixmdW5jdGlvbigpe2lmKCQuZGF0YShlbGVtZW50LGtleSk9PT11bmRlZmluZWQpeyQuZGF0YShlbGVtZW50LGtleSxlbGVtZW50LnZhbCgpKTt9fSk7ZWxlbWVudC5vbigia2V5dXAiLGZ1bmN0aW9uKCl7dmFyIHZhbD0kLmRhdGEoZWxlbWVudCxrZXkpO2lmKHZhbCE9PXVuZGVmaW5lZCYmZWxlbWVudC52YWwoKSE9PXZhbCl7JC5yZW1vdmVEYXRhKGVsZW1lbnQsa2V5KTtlbGVtZW50LnRyaWdnZXIoImtleXVwLWNoYW5nZSIpO319KTt9CmZ1bmN0aW9uIGluc3RhbGxGaWx0ZXJlZE1vdXNlTW92ZShlbGVtZW50KXtlbGVtZW50Lm9uKCJtb3VzZW1vdmUiLGZ1bmN0aW9uKGUpe3ZhciBsYXN0cG9zPWxhc3RNb3VzZVBvc2l0aW9uO2lmKGxhc3Rwb3M9PT11bmRlZmluZWR8fGxhc3Rwb3MueCE9PWUucGFnZVh8fGxhc3Rwb3MueSE9PWUucGFnZVkpeyQoZS50YXJnZXQpLnRyaWdnZXIoIm1vdXNlbW92ZS1maWx0ZXJlZCIsZSk7fX0pO30KZnVuY3Rpb24gZGVib3VuY2UocXVpZXRNaWxsaXMsZm4sY3R4KXtjdHg9Y3R4fHx1bmRlZmluZWQ7dmFyIHRpbWVvdXQ7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2ZuLmFwcGx5KGN0eCxhcmdzKTt9LHF1aWV0TWlsbGlzKTt9O30KZnVuY3Rpb24gaW5zdGFsbERlYm91bmNlZFNjcm9sbCh0aHJlc2hvbGQsZWxlbWVudCl7dmFyIG5vdGlmeT1kZWJvdW5jZSh0aHJlc2hvbGQsZnVuY3Rpb24oZSl7ZWxlbWVudC50cmlnZ2VyKCJzY3JvbGwtZGVib3VuY2VkIixlKTt9KTtlbGVtZW50Lm9uKCJzY3JvbGwiLGZ1bmN0aW9uKGUpe2lmKGluZGV4T2YoZS50YXJnZXQsZWxlbWVudC5nZXQoKSk+PTApbm90aWZ5KGUpO30pO30KZnVuY3Rpb24gZm9jdXMoJGVsKXtpZigkZWxbMF09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXJldHVybjt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlbD0kZWxbMF0scG9zPSRlbC52YWwoKS5sZW5ndGgscmFuZ2U7JGVsLmZvY3VzKCk7dmFyIGlzVmlzaWJsZT0oZWwub2Zmc2V0V2lkdGg+MHx8ZWwub2Zmc2V0SGVpZ2h0PjApO2lmKGlzVmlzaWJsZSYmZWw9PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXtpZihlbC5zZXRTZWxlY3Rpb25SYW5nZSkKe2VsLnNldFNlbGVjdGlvblJhbmdlKHBvcyxwb3MpO30KZWxzZSBpZihlbC5jcmVhdGVUZXh0UmFuZ2Upe3JhbmdlPWVsLmNyZWF0ZVRleHRSYW5nZSgpO3JhbmdlLmNvbGxhcHNlKGZhbHNlKTtyYW5nZS5zZWxlY3QoKTt9fX0sMCk7fQpmdW5jdGlvbiBnZXRDdXJzb3JJbmZvKGVsKXtlbD0kKGVsKVswXTt2YXIgb2Zmc2V0PTA7dmFyIGxlbmd0aD0wO2lmKCdzZWxlY3Rpb25TdGFydCdpbiBlbCl7b2Zmc2V0PWVsLnNlbGVjdGlvblN0YXJ0O2xlbmd0aD1lbC5zZWxlY3Rpb25FbmQtb2Zmc2V0O31lbHNlIGlmKCdzZWxlY3Rpb24naW4gZG9jdW1lbnQpe2VsLmZvY3VzKCk7dmFyIHNlbD1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtsZW5ndGg9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dC5sZW5ndGg7c2VsLm1vdmVTdGFydCgnY2hhcmFjdGVyJywtZWwudmFsdWUubGVuZ3RoKTtvZmZzZXQ9c2VsLnRleHQubGVuZ3RoLWxlbmd0aDt9CnJldHVybntvZmZzZXQ6b2Zmc2V0LGxlbmd0aDpsZW5ndGh9O30KZnVuY3Rpb24ga2lsbEV2ZW50KGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO30KZnVuY3Rpb24ga2lsbEV2ZW50SW1tZWRpYXRlbHkoZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7fQpmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRoKGUpe2lmKCFzaXplcil7dmFyIHN0eWxlPWVbMF0uY3VycmVudFN0eWxlfHx3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlWzBdLG51bGwpO3NpemVyPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiItMTAwMDBweCIsdG9wOiItMTAwMDBweCIsZGlzcGxheToibm9uZSIsZm9udFNpemU6c3R5bGUuZm9udFNpemUsZm9udEZhbWlseTpzdHlsZS5mb250RmFtaWx5LGZvbnRTdHlsZTpzdHlsZS5mb250U3R5bGUsZm9udFdlaWdodDpzdHlsZS5mb250V2VpZ2h0LGxldHRlclNwYWNpbmc6c3R5bGUubGV0dGVyU3BhY2luZyx0ZXh0VHJhbnNmb3JtOnN0eWxlLnRleHRUcmFuc2Zvcm0sd2hpdGVTcGFjZToibm93cmFwIn0pO3NpemVyLmF0dHIoImNsYXNzIiwic2VsZWN0Mi1zaXplciIpOyQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKHNpemVyKTt9CnNpemVyLnRleHQoZS52YWwoKSk7cmV0dXJuIHNpemVyLndpZHRoKCk7fQpmdW5jdGlvbiBzeW5jQ3NzQ2xhc3NlcyhkZXN0LHNyYyxhZGFwdGVyKXt2YXIgY2xhc3NlcyxyZXBsYWNlbWVudHM9W10sYWRhcHRlZDtjbGFzc2VzPSQudHJpbShkZXN0LmF0dHIoImNsYXNzIikpO2lmKGNsYXNzZXMpe2NsYXNzZXM9JycrY2xhc3NlczskKGNsYXNzZXMuc3BsaXQoL1xzKy8pKS5lYWNoMihmdW5jdGlvbigpe2lmKHRoaXMuaW5kZXhPZigic2VsZWN0Mi0iKT09PTApe3JlcGxhY2VtZW50cy5wdXNoKHRoaXMpO319KTt9CmNsYXNzZXM9JC50cmltKHNyYy5hdHRyKCJjbGFzcyIpKTtpZihjbGFzc2VzKXtjbGFzc2VzPScnK2NsYXNzZXM7JChjbGFzc2VzLnNwbGl0KC9ccysvKSkuZWFjaDIoZnVuY3Rpb24oKXtpZih0aGlzLmluZGV4T2YoInNlbGVjdDItIikhPT0wKXthZGFwdGVkPWFkYXB0ZXIodGhpcyk7aWYoYWRhcHRlZCl7cmVwbGFjZW1lbnRzLnB1c2goYWRhcHRlZCk7fX19KTt9CmRlc3QuYXR0cigiY2xhc3MiLHJlcGxhY2VtZW50cy5qb2luKCIgIikpO30KZnVuY3Rpb24gbWFya01hdGNoKHRleHQsdGVybSxtYXJrdXAsZXNjYXBlTWFya3VwKXt2YXIgbWF0Y2g9c3RyaXBEaWFjcml0aWNzKHRleHQudG9VcHBlckNhc2UoKSkuaW5kZXhPZihzdHJpcERpYWNyaXRpY3ModGVybS50b1VwcGVyQ2FzZSgpKSksdGw9dGVybS5sZW5ndGg7aWYobWF0Y2g8MCl7bWFya3VwLnB1c2goZXNjYXBlTWFya3VwKHRleHQpKTtyZXR1cm47fQptYXJrdXAucHVzaChlc2NhcGVNYXJrdXAodGV4dC5zdWJzdHJpbmcoMCxtYXRjaCkpKTttYXJrdXAucHVzaCgiPHNwYW4gY2xhc3M9J3NlbGVjdDItbWF0Y2gnPiIpO21hcmt1cC5wdXNoKGVzY2FwZU1hcmt1cCh0ZXh0LnN1YnN0cmluZyhtYXRjaCxtYXRjaCt0bCkpKTttYXJrdXAucHVzaCgiPC9zcGFuPiIpO21hcmt1cC5wdXNoKGVzY2FwZU1hcmt1cCh0ZXh0LnN1YnN0cmluZyhtYXRjaCt0bCx0ZXh0Lmxlbmd0aCkpKTt9CmZ1bmN0aW9uIGRlZmF1bHRFc2NhcGVNYXJrdXAobWFya3VwKXt2YXIgcmVwbGFjZV9tYXA9eydcXCc6JyYjOTI7JywnJic6JyZhbXA7JywnPCc6JyZsdDsnLCc+JzonJmd0OycsJyInOicmcXVvdDsnLCInIjonJiMzOTsnLCIvIjonJiM0NzsnfTtyZXR1cm4gU3RyaW5nKG1hcmt1cCkucmVwbGFjZSgvWyY8PiInXC9cXF0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHJlcGxhY2VfbWFwW21hdGNoXTt9KTt9CmZ1bmN0aW9uIGFqYXgob3B0aW9ucyl7dmFyIHRpbWVvdXQsaGFuZGxlcj1udWxsLHF1aWV0TWlsbGlzPW9wdGlvbnMucXVpZXRNaWxsaXN8fDEwMCxhamF4VXJsPW9wdGlvbnMudXJsLHNlbGY9dGhpcztyZXR1cm4gZnVuY3Rpb24ocXVlcnkpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7dGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBkYXRhPW9wdGlvbnMuZGF0YSx1cmw9YWpheFVybCx0cmFuc3BvcnQ9b3B0aW9ucy50cmFuc3BvcnR8fCQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHMudHJhbnNwb3J0LGRlcHJlY2F0ZWQ9e3R5cGU6b3B0aW9ucy50eXBlfHwnR0VUJyxjYWNoZTpvcHRpb25zLmNhY2hlfHxmYWxzZSxqc29ucENhbGxiYWNrOm9wdGlvbnMuanNvbnBDYWxsYmFja3x8dW5kZWZpbmVkLGRhdGFUeXBlOm9wdGlvbnMuZGF0YVR5cGV8fCJqc29uIn0scGFyYW1zPSQuZXh0ZW5kKHt9LCQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHMucGFyYW1zLGRlcHJlY2F0ZWQpO2RhdGE9ZGF0YT9kYXRhLmNhbGwoc2VsZixxdWVyeS50ZXJtLHF1ZXJ5LnBhZ2UscXVlcnkuY29udGV4dCk6bnVsbDt1cmw9KHR5cGVvZiB1cmw9PT0nZnVuY3Rpb24nKT91cmwuY2FsbChzZWxmLHF1ZXJ5LnRlcm0scXVlcnkucGFnZSxxdWVyeS5jb250ZXh0KTp1cmw7aWYoaGFuZGxlciYmdHlwZW9mIGhhbmRsZXIuYWJvcnQ9PT0iZnVuY3Rpb24iKXtoYW5kbGVyLmFib3J0KCk7fQppZihvcHRpb25zLnBhcmFtcyl7aWYoJC5pc0Z1bmN0aW9uKG9wdGlvbnMucGFyYW1zKSl7JC5leHRlbmQocGFyYW1zLG9wdGlvbnMucGFyYW1zLmNhbGwoc2VsZikpO31lbHNleyQuZXh0ZW5kKHBhcmFtcyxvcHRpb25zLnBhcmFtcyk7fX0KJC5leHRlbmQocGFyYW1zLHt1cmw6dXJsLGRhdGFUeXBlOm9wdGlvbnMuZGF0YVR5cGUsZGF0YTpkYXRhLHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7dmFyIHJlc3VsdHM9b3B0aW9ucy5yZXN1bHRzKGRhdGEscXVlcnkucGFnZSxxdWVyeSk7cXVlcnkuY2FsbGJhY2socmVzdWx0cyk7fSxlcnJvcjpmdW5jdGlvbihqcVhIUix0ZXh0U3RhdHVzLGVycm9yVGhyb3duKXt2YXIgcmVzdWx0cz17aGFzRXJyb3I6dHJ1ZSxqcVhIUjpqcVhIUix0ZXh0U3RhdHVzOnRleHRTdGF0dXMsZXJyb3JUaHJvd246ZXJyb3JUaHJvd259O3F1ZXJ5LmNhbGxiYWNrKHJlc3VsdHMpO319KTtoYW5kbGVyPXRyYW5zcG9ydC5jYWxsKHNlbGYscGFyYW1zKTt9LHF1aWV0TWlsbGlzKTt9O30KZnVuY3Rpb24gbG9jYWwob3B0aW9ucyl7dmFyIGRhdGE9b3B0aW9ucyxkYXRhVGV4dCx0bXAsdGV4dD1mdW5jdGlvbihpdGVtKXtyZXR1cm4iIitpdGVtLnRleHQ7fTtpZigkLmlzQXJyYXkoZGF0YSkpe3RtcD1kYXRhO2RhdGE9e3Jlc3VsdHM6dG1wfTt9CmlmKCQuaXNGdW5jdGlvbihkYXRhKT09PWZhbHNlKXt0bXA9ZGF0YTtkYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRtcDt9O30KdmFyIGRhdGFJdGVtPWRhdGEoKTtpZihkYXRhSXRlbS50ZXh0KXt0ZXh0PWRhdGFJdGVtLnRleHQ7aWYoISQuaXNGdW5jdGlvbih0ZXh0KSl7ZGF0YVRleHQ9ZGF0YUl0ZW0udGV4dDt0ZXh0PWZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtW2RhdGFUZXh0XTt9O319CnJldHVybiBmdW5jdGlvbihxdWVyeSl7dmFyIHQ9cXVlcnkudGVybSxmaWx0ZXJlZD17cmVzdWx0czpbXX0scHJvY2VzcztpZih0PT09IiIpe3F1ZXJ5LmNhbGxiYWNrKGRhdGEoKSk7cmV0dXJuO30KcHJvY2Vzcz1mdW5jdGlvbihkYXR1bSxjb2xsZWN0aW9uKXt2YXIgZ3JvdXAsYXR0cjtkYXR1bT1kYXR1bVswXTtpZihkYXR1bS5jaGlsZHJlbil7Z3JvdXA9e307Zm9yKGF0dHIgaW4gZGF0dW0pe2lmKGRhdHVtLmhhc093blByb3BlcnR5KGF0dHIpKWdyb3VwW2F0dHJdPWRhdHVtW2F0dHJdO30KZ3JvdXAuY2hpbGRyZW49W107JChkYXR1bS5jaGlsZHJlbikuZWFjaDIoZnVuY3Rpb24oaSxjaGlsZERhdHVtKXtwcm9jZXNzKGNoaWxkRGF0dW0sZ3JvdXAuY2hpbGRyZW4pO30pO2lmKGdyb3VwLmNoaWxkcmVuLmxlbmd0aHx8cXVlcnkubWF0Y2hlcih0LHRleHQoZ3JvdXApLGRhdHVtKSl7Y29sbGVjdGlvbi5wdXNoKGdyb3VwKTt9fWVsc2V7aWYocXVlcnkubWF0Y2hlcih0LHRleHQoZGF0dW0pLGRhdHVtKSl7Y29sbGVjdGlvbi5wdXNoKGRhdHVtKTt9fX07JChkYXRhKCkucmVzdWx0cykuZWFjaDIoZnVuY3Rpb24oaSxkYXR1bSl7cHJvY2VzcyhkYXR1bSxmaWx0ZXJlZC5yZXN1bHRzKTt9KTtxdWVyeS5jYWxsYmFjayhmaWx0ZXJlZCk7fTt9CmZ1bmN0aW9uIHRhZ3MoZGF0YSl7dmFyIGlzRnVuYz0kLmlzRnVuY3Rpb24oZGF0YSk7cmV0dXJuIGZ1bmN0aW9uKHF1ZXJ5KXt2YXIgdD1xdWVyeS50ZXJtLGZpbHRlcmVkPXtyZXN1bHRzOltdfTt2YXIgcmVzdWx0PWlzRnVuYz9kYXRhKHF1ZXJ5KTpkYXRhO2lmKCQuaXNBcnJheShyZXN1bHQpKXskKHJlc3VsdCkuZWFjaChmdW5jdGlvbigpe3ZhciBpc09iamVjdD10aGlzLnRleHQhPT11bmRlZmluZWQsdGV4dD1pc09iamVjdD90aGlzLnRleHQ6dGhpcztpZih0PT09IiJ8fHF1ZXJ5Lm1hdGNoZXIodCx0ZXh0KSl7ZmlsdGVyZWQucmVzdWx0cy5wdXNoKGlzT2JqZWN0P3RoaXM6e2lkOnRoaXMsdGV4dDp0aGlzfSk7fX0pO3F1ZXJ5LmNhbGxiYWNrKGZpbHRlcmVkKTt9fTt9CmZ1bmN0aW9uIGNoZWNrRm9ybWF0dGVyKGZvcm1hdHRlcixmb3JtYXR0ZXJOYW1lKXtpZigkLmlzRnVuY3Rpb24oZm9ybWF0dGVyKSlyZXR1cm4gdHJ1ZTtpZighZm9ybWF0dGVyKXJldHVybiBmYWxzZTtpZih0eXBlb2YoZm9ybWF0dGVyKT09PSdzdHJpbmcnKXJldHVybiB0cnVlO3Rocm93IG5ldyBFcnJvcihmb3JtYXR0ZXJOYW1lKyIgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIG9yIGZhbHN5IHZhbHVlIik7fQpmdW5jdGlvbiBldmFsdWF0ZSh2YWwsY29udGV4dCl7aWYoJC5pc0Z1bmN0aW9uKHZhbCkpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gdmFsLmFwcGx5KGNvbnRleHQsYXJncyk7fQpyZXR1cm4gdmFsO30KZnVuY3Rpb24gY291bnRSZXN1bHRzKHJlc3VsdHMpe3ZhciBjb3VudD0wOyQuZWFjaChyZXN1bHRzLGZ1bmN0aW9uKGksaXRlbSl7aWYoaXRlbS5jaGlsZHJlbil7Y291bnQrPWNvdW50UmVzdWx0cyhpdGVtLmNoaWxkcmVuKTt9ZWxzZXtjb3VudCsrO319KTtyZXR1cm4gY291bnQ7fQpmdW5jdGlvbiBkZWZhdWx0VG9rZW5pemVyKGlucHV0LHNlbGVjdGlvbixzZWxlY3RDYWxsYmFjayxvcHRzKXt2YXIgb3JpZ2luYWw9aW5wdXQsZHVwZT1mYWxzZSx0b2tlbixpbmRleCxpLGwsc2VwYXJhdG9yO2lmKCFvcHRzLmNyZWF0ZVNlYXJjaENob2ljZXx8IW9wdHMudG9rZW5TZXBhcmF0b3JzfHxvcHRzLnRva2VuU2VwYXJhdG9ycy5sZW5ndGg8MSlyZXR1cm4gdW5kZWZpbmVkO3doaWxlKHRydWUpe2luZGV4PS0xO2ZvcihpPTAsbD1vcHRzLnRva2VuU2VwYXJhdG9ycy5sZW5ndGg7aTxsO2krKyl7c2VwYXJhdG9yPW9wdHMudG9rZW5TZXBhcmF0b3JzW2ldO2luZGV4PWlucHV0LmluZGV4T2Yoc2VwYXJhdG9yKTtpZihpbmRleD49MClicmVhazt9CmlmKGluZGV4PDApYnJlYWs7dG9rZW49aW5wdXQuc3Vic3RyaW5nKDAsaW5kZXgpO2lucHV0PWlucHV0LnN1YnN0cmluZyhpbmRleCtzZXBhcmF0b3IubGVuZ3RoKTtpZih0b2tlbi5sZW5ndGg+MCl7dG9rZW49b3B0cy5jcmVhdGVTZWFyY2hDaG9pY2UuY2FsbCh0aGlzLHRva2VuLHNlbGVjdGlvbik7aWYodG9rZW4hPT11bmRlZmluZWQmJnRva2VuIT09bnVsbCYmb3B0cy5pZCh0b2tlbikhPT11bmRlZmluZWQmJm9wdHMuaWQodG9rZW4pIT09bnVsbCl7ZHVwZT1mYWxzZTtmb3IoaT0wLGw9c2VsZWN0aW9uLmxlbmd0aDtpPGw7aSsrKXtpZihlcXVhbChvcHRzLmlkKHRva2VuKSxvcHRzLmlkKHNlbGVjdGlvbltpXSkpKXtkdXBlPXRydWU7YnJlYWs7fX0KaWYoIWR1cGUpc2VsZWN0Q2FsbGJhY2sodG9rZW4pO319fQppZihvcmlnaW5hbCE9PWlucHV0KXJldHVybiBpbnB1dDt9CmZ1bmN0aW9uIGNsZWFudXBKUXVlcnlFbGVtZW50cygpe3ZhciBzZWxmPXRoaXM7JC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihpLGVsZW1lbnQpe3NlbGZbZWxlbWVudF0ucmVtb3ZlKCk7c2VsZltlbGVtZW50XT1udWxsO30pO30KZnVuY3Rpb24gY2xhenooU3VwZXJDbGFzcyxtZXRob2RzKXt2YXIgY29uc3RydWN0b3I9ZnVuY3Rpb24oKXt9O2NvbnN0cnVjdG9yLnByb3RvdHlwZT1uZXcgU3VwZXJDbGFzcztjb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3I9Y29uc3RydWN0b3I7Y29uc3RydWN0b3IucHJvdG90eXBlLnBhcmVudD1TdXBlckNsYXNzLnByb3RvdHlwZTtjb25zdHJ1Y3Rvci5wcm90b3R5cGU9JC5leHRlbmQoY29uc3RydWN0b3IucHJvdG90eXBlLG1ldGhvZHMpO3JldHVybiBjb25zdHJ1Y3Rvcjt9CkFic3RyYWN0U2VsZWN0Mj1jbGF6eihPYmplY3Qse2JpbmQ6ZnVuY3Rpb24oZnVuYyl7dmFyIHNlbGY9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtmdW5jLmFwcGx5KHNlbGYsYXJndW1lbnRzKTt9O30saW5pdDpmdW5jdGlvbihvcHRzKXt2YXIgcmVzdWx0cyxzZWFyY2gscmVzdWx0c1NlbGVjdG9yPSIuc2VsZWN0Mi1yZXN1bHRzIjt0aGlzLm9wdHM9b3B0cz10aGlzLnByZXBhcmVPcHRzKG9wdHMpO3RoaXMuaWQ9b3B0cy5pZDtpZihvcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpIT09dW5kZWZpbmVkJiZvcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpIT09bnVsbCl7b3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDIiKS5kZXN0cm95KCk7fQp0aGlzLmNvbnRhaW5lcj10aGlzLmNyZWF0ZUNvbnRhaW5lcigpO3RoaXMubGl2ZVJlZ2lvbj0kKCcuc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZScpO2lmKHRoaXMubGl2ZVJlZ2lvbi5sZW5ndGg9PTApe3RoaXMubGl2ZVJlZ2lvbj0kKCI8c3Bhbj4iLHtyb2xlOiJzdGF0dXMiLCJhcmlhLWxpdmUiOiJwb2xpdGUifSkuYWRkQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTt9CnRoaXMuY29udGFpbmVySWQ9InMyaWRfIisob3B0cy5lbGVtZW50LmF0dHIoImlkIil8fCJhdXRvZ2VuIituZXh0VWlkKCkpO3RoaXMuY29udGFpbmVyRXZlbnROYW1lPXRoaXMuY29udGFpbmVySWQucmVwbGFjZSgvKFsuXSkvZywnXycpLnJlcGxhY2UoLyhbOyYsXC1cLlwrXCpcfic6IlwhXF4jJCVAXFtcXVwoXCk9Plx8XSkvZywnXFwkMScpO3RoaXMuY29udGFpbmVyLmF0dHIoImlkIix0aGlzLmNvbnRhaW5lcklkKTt0aGlzLmNvbnRhaW5lci5hdHRyKCJ0aXRsZSIsb3B0cy5lbGVtZW50LmF0dHIoInRpdGxlIikpO3RoaXMuYm9keT0kKGRvY3VtZW50LmJvZHkpO3N5bmNDc3NDbGFzc2VzKHRoaXMuY29udGFpbmVyLHRoaXMub3B0cy5lbGVtZW50LHRoaXMub3B0cy5hZGFwdENvbnRhaW5lckNzc0NsYXNzKTt0aGlzLmNvbnRhaW5lci5hdHRyKCJzdHlsZSIsb3B0cy5lbGVtZW50LmF0dHIoInN0eWxlIikpO3RoaXMuY29udGFpbmVyLmNzcyhldmFsdWF0ZShvcHRzLmNvbnRhaW5lckNzcyx0aGlzLm9wdHMuZWxlbWVudCkpO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKGV2YWx1YXRlKG9wdHMuY29udGFpbmVyQ3NzQ2xhc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTt0aGlzLmVsZW1lbnRUYWJJbmRleD10aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJ0YWJpbmRleCIpO3RoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDIiLHRoaXMpLmF0dHIoInRhYmluZGV4IiwiLTEiKS5iZWZvcmUodGhpcy5jb250YWluZXIpLm9uKCJjbGljay5zZWxlY3QyIixraWxsRXZlbnQpO3RoaXMuY29udGFpbmVyLmRhdGEoInNlbGVjdDIiLHRoaXMpO3RoaXMuZHJvcGRvd249dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItZHJvcCIpO3N5bmNDc3NDbGFzc2VzKHRoaXMuZHJvcGRvd24sdGhpcy5vcHRzLmVsZW1lbnQsdGhpcy5vcHRzLmFkYXB0RHJvcGRvd25Dc3NDbGFzcyk7dGhpcy5kcm9wZG93bi5hZGRDbGFzcyhldmFsdWF0ZShvcHRzLmRyb3Bkb3duQ3NzQ2xhc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTt0aGlzLmRyb3Bkb3duLmRhdGEoInNlbGVjdDIiLHRoaXMpO3RoaXMuZHJvcGRvd24ub24oImNsaWNrIixraWxsRXZlbnQpO3RoaXMucmVzdWx0cz1yZXN1bHRzPXRoaXMuY29udGFpbmVyLmZpbmQocmVzdWx0c1NlbGVjdG9yKTt0aGlzLnNlYXJjaD1zZWFyY2g9dGhpcy5jb250YWluZXIuZmluZCgiaW5wdXQuc2VsZWN0Mi1pbnB1dCIpO3RoaXMucXVlcnlDb3VudD0wO3RoaXMucmVzdWx0c1BhZ2U9MDt0aGlzLmNvbnRleHQ9bnVsbDt0aGlzLmluaXRDb250YWluZXIoKTt0aGlzLmNvbnRhaW5lci5vbigiY2xpY2siLGtpbGxFdmVudCk7aW5zdGFsbEZpbHRlcmVkTW91c2VNb3ZlKHRoaXMucmVzdWx0cyk7dGhpcy5kcm9wZG93bi5vbigibW91c2Vtb3ZlLWZpbHRlcmVkIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMuaGlnaGxpZ2h0VW5kZXJFdmVudCkpO3RoaXMuZHJvcGRvd24ub24oInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKGZ1bmN0aW9uKGV2ZW50KXt0aGlzLl90b3VjaEV2ZW50PXRydWU7dGhpcy5oaWdobGlnaHRVbmRlckV2ZW50KGV2ZW50KTt9KSk7dGhpcy5kcm9wZG93bi5vbigidG91Y2htb3ZlIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMudG91Y2hNb3ZlZCkpO3RoaXMuZHJvcGRvd24ub24oInRvdWNoc3RhcnQgdG91Y2hlbmQiLHJlc3VsdHNTZWxlY3Rvcix0aGlzLmJpbmQodGhpcy5jbGVhclRvdWNoTW92ZWQpKTt0aGlzLmRyb3Bkb3duLm9uKCdjbGljaycsdGhpcy5iaW5kKGZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLl90b3VjaEV2ZW50KXt0aGlzLl90b3VjaEV2ZW50PWZhbHNlO3RoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoKTt9fSkpO2luc3RhbGxEZWJvdW5jZWRTY3JvbGwoODAsdGhpcy5yZXN1bHRzKTt0aGlzLmRyb3Bkb3duLm9uKCJzY3JvbGwtZGVib3VuY2VkIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKHRoaXMubG9hZE1vcmVJZk5lZWRlZCkpOyQodGhpcy5jb250YWluZXIpLm9uKCJjaGFuZ2UiLCIuc2VsZWN0Mi1pbnB1dCIsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9KTskKHRoaXMuZHJvcGRvd24pLm9uKCJjaGFuZ2UiLCIuc2VsZWN0Mi1pbnB1dCIsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9KTtpZigkLmZuLm1vdXNld2hlZWwpe3Jlc3VsdHMubW91c2V3aGVlbChmdW5jdGlvbihlLGRlbHRhLGRlbHRhWCxkZWx0YVkpe3ZhciB0b3A9cmVzdWx0cy5zY3JvbGxUb3AoKTtpZihkZWx0YVk+MCYmdG9wLWRlbHRhWTw9MCl7cmVzdWx0cy5zY3JvbGxUb3AoMCk7a2lsbEV2ZW50KGUpO31lbHNlIGlmKGRlbHRhWTwwJiZyZXN1bHRzLmdldCgwKS5zY3JvbGxIZWlnaHQtcmVzdWx0cy5zY3JvbGxUb3AoKStkZWx0YVk8PXJlc3VsdHMuaGVpZ2h0KCkpe3Jlc3VsdHMuc2Nyb2xsVG9wKHJlc3VsdHMuZ2V0KDApLnNjcm9sbEhlaWdodC1yZXN1bHRzLmhlaWdodCgpKTtraWxsRXZlbnQoZSk7fX0pO30KaW5zdGFsbEtleVVwQ2hhbmdlRXZlbnQoc2VhcmNoKTtzZWFyY2gub24oImtleXVwLWNoYW5nZSBpbnB1dCBwYXN0ZSIsdGhpcy5iaW5kKHRoaXMudXBkYXRlUmVzdWx0cykpO3NlYXJjaC5vbigiZm9jdXMiLGZ1bmN0aW9uKCl7c2VhcmNoLmFkZENsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKTt9KTtzZWFyY2gub24oImJsdXIiLGZ1bmN0aW9uKCl7c2VhcmNoLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKTt9KTt0aGlzLmRyb3Bkb3duLm9uKCJtb3VzZXVwIixyZXN1bHRzU2VsZWN0b3IsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCQoZS50YXJnZXQpLmNsb3Nlc3QoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIikubGVuZ3RoPjApe3RoaXMuaGlnaGxpZ2h0VW5kZXJFdmVudChlKTt0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKGUpO319KSk7dGhpcy5kcm9wZG93bi5vbigiY2xpY2sgbW91c2V1cCBtb3VzZWRvd24gdG91Y2hzdGFydCB0b3VjaGVuZCBmb2N1c2luIixmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO30pO3RoaXMubGFzdFNlYXJjaFRlcm09dW5kZWZpbmVkO2lmKCQuaXNGdW5jdGlvbih0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbikpe3RoaXMuaW5pdFNlbGVjdGlvbigpO3RoaXMubW9uaXRvclNvdXJjZSgpO30KaWYob3B0cy5tYXhpbXVtSW5wdXRMZW5ndGghPT1udWxsKXt0aGlzLnNlYXJjaC5hdHRyKCJtYXhsZW5ndGgiLG9wdHMubWF4aW11bUlucHV0TGVuZ3RoKTt9CnZhciBkaXNhYmxlZD1vcHRzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiKTtpZihkaXNhYmxlZD09PXVuZGVmaW5lZClkaXNhYmxlZD1mYWxzZTt0aGlzLmVuYWJsZSghZGlzYWJsZWQpO3ZhciByZWFkb25seT1vcHRzLmVsZW1lbnQucHJvcCgicmVhZG9ubHkiKTtpZihyZWFkb25seT09PXVuZGVmaW5lZClyZWFkb25seT1mYWxzZTt0aGlzLnJlYWRvbmx5KHJlYWRvbmx5KTtzY3JvbGxCYXJEaW1lbnNpb25zPXNjcm9sbEJhckRpbWVuc2lvbnN8fG1lYXN1cmVTY3JvbGxiYXIoKTt0aGlzLmF1dG9mb2N1cz1vcHRzLmVsZW1lbnQucHJvcCgiYXV0b2ZvY3VzIik7b3B0cy5lbGVtZW50LnByb3AoImF1dG9mb2N1cyIsZmFsc2UpO2lmKHRoaXMuYXV0b2ZvY3VzKXRoaXMuZm9jdXMoKTt0aGlzLnNlYXJjaC5hdHRyKCJwbGFjZWhvbGRlciIsb3B0cy5zZWFyY2hJbnB1dFBsYWNlaG9sZGVyKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZWxlbWVudD10aGlzLm9wdHMuZWxlbWVudCxzZWxlY3QyPWVsZW1lbnQuZGF0YSgic2VsZWN0MiIpLHNlbGY9dGhpczt0aGlzLmNsb3NlKCk7aWYoZWxlbWVudC5sZW5ndGgmJmVsZW1lbnRbMF0uZGV0YWNoRXZlbnQmJnNlbGYuX3N5bmMpe2VsZW1lbnQuZWFjaChmdW5jdGlvbigpe2lmKHNlbGYuX3N5bmMpe3RoaXMuZGV0YWNoRXZlbnQoIm9ucHJvcGVydHljaGFuZ2UiLHNlbGYuX3N5bmMpO319KTt9CmlmKHRoaXMucHJvcGVydHlPYnNlcnZlcil7dGhpcy5wcm9wZXJ0eU9ic2VydmVyLmRpc2Nvbm5lY3QoKTt0aGlzLnByb3BlcnR5T2JzZXJ2ZXI9bnVsbDt9CnRoaXMuX3N5bmM9bnVsbDtpZihzZWxlY3QyIT09dW5kZWZpbmVkKXtzZWxlY3QyLmNvbnRhaW5lci5yZW1vdmUoKTtzZWxlY3QyLmxpdmVSZWdpb24ucmVtb3ZlKCk7c2VsZWN0Mi5kcm9wZG93bi5yZW1vdmUoKTtlbGVtZW50LnJlbW92ZURhdGEoInNlbGVjdDIiKS5vZmYoIi5zZWxlY3QyIik7aWYoIWVsZW1lbnQuaXMoImlucHV0W3R5cGU9J2hpZGRlbiddIikpe2VsZW1lbnQuc2hvdygpLnByb3AoImF1dG9mb2N1cyIsdGhpcy5hdXRvZm9jdXN8fGZhbHNlKTtpZih0aGlzLmVsZW1lbnRUYWJJbmRleCl7ZWxlbWVudC5hdHRyKHt0YWJpbmRleDp0aGlzLmVsZW1lbnRUYWJJbmRleH0pO31lbHNle2VsZW1lbnQucmVtb3ZlQXR0cigidGFiaW5kZXgiKTt9CmVsZW1lbnQuc2hvdygpO31lbHNle2VsZW1lbnQuY3NzKCJkaXNwbGF5IiwiIik7fX0KY2xlYW51cEpRdWVyeUVsZW1lbnRzLmNhbGwodGhpcywiY29udGFpbmVyIiwibGl2ZVJlZ2lvbiIsImRyb3Bkb3duIiwicmVzdWx0cyIsInNlYXJjaCIpO30sb3B0aW9uVG9EYXRhOmZ1bmN0aW9uKGVsZW1lbnQpe2lmKGVsZW1lbnQuaXMoIm9wdGlvbiIpKXtyZXR1cm57aWQ6ZWxlbWVudC5wcm9wKCJ2YWx1ZSIpLHRleHQ6ZWxlbWVudC50ZXh0KCksZWxlbWVudDplbGVtZW50LmdldCgpLGNzczplbGVtZW50LmF0dHIoImNsYXNzIiksZGlzYWJsZWQ6ZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIpLGxvY2tlZDplcXVhbChlbGVtZW50LmF0dHIoImxvY2tlZCIpLCJsb2NrZWQiKXx8ZXF1YWwoZWxlbWVudC5kYXRhKCJsb2NrZWQiKSx0cnVlKX07fWVsc2UgaWYoZWxlbWVudC5pcygib3B0Z3JvdXAiKSl7cmV0dXJue3RleHQ6ZWxlbWVudC5hdHRyKCJsYWJlbCIpLGNoaWxkcmVuOltdLGVsZW1lbnQ6ZWxlbWVudC5nZXQoKSxjc3M6ZWxlbWVudC5hdHRyKCJjbGFzcyIpfTt9fSxwcmVwYXJlT3B0czpmdW5jdGlvbihvcHRzKXt2YXIgZWxlbWVudCxzZWxlY3QsaWRLZXksYWpheFVybCxzZWxmPXRoaXM7ZWxlbWVudD1vcHRzLmVsZW1lbnQ7aWYoZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe3RoaXMuc2VsZWN0PXNlbGVjdD1vcHRzLmVsZW1lbnQ7fQppZihzZWxlY3QpeyQuZWFjaChbImlkIiwibXVsdGlwbGUiLCJhamF4IiwicXVlcnkiLCJjcmVhdGVTZWFyY2hDaG9pY2UiLCJpbml0U2VsZWN0aW9uIiwiZGF0YSIsInRhZ3MiXSxmdW5jdGlvbigpe2lmKHRoaXMgaW4gb3B0cyl7dGhyb3cgbmV3IEVycm9yKCJPcHRpb24gJyIrdGhpcysiJyBpcyBub3QgYWxsb3dlZCBmb3IgU2VsZWN0MiB3aGVuIGF0dGFjaGVkIHRvIGEgPHNlbGVjdD4gZWxlbWVudC4iKTt9fSk7fQpvcHRzLmRlYnVnPW9wdHMuZGVidWd8fCQuZm4uc2VsZWN0Mi5kZWZhdWx0cy5kZWJ1ZztpZihvcHRzLmRlYnVnJiZjb25zb2xlJiZjb25zb2xlLndhcm4pe2lmKG9wdHMuaWQhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBpZGAgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWQgaW4gU2VsZWN0MiA0LjAuMCwgJysnY29uc2lkZXIgcmVuYW1pbmcgeW91ciBgaWRgIHByb3BlcnR5IG9yIG1hcHBpbmcgdGhlIHByb3BlcnR5IGJlZm9yZSB5b3VyIGRhdGEgbWFrZXMgaXQgdG8gU2VsZWN0Mi4gJysnWW91IGNhbiByZWFkIG1vcmUgYXQgaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pby9hbm5vdW5jZW1lbnRzLTQuMC5odG1sI2NoYW5nZWQtaWQnKTt9CmlmKG9wdHMudGV4dCE9bnVsbCl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYHRleHRgIG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkIGluIFNlbGVjdDIgNC4wLjAsICcrJ2NvbnNpZGVyIHJlbmFtaW5nIHlvdXIgYHRleHRgIHByb3BlcnR5IG9yIG1hcHBpbmcgdGhlIHByb3BlcnR5IGJlZm9yZSB5b3VyIGRhdGEgbWFrZXMgaXQgdG8gU2VsZWN0Mi4gJysnWW91IGNhbiByZWFkIG1vcmUgYXQgaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pby9hbm5vdW5jZW1lbnRzLTQuMC5odG1sI2NoYW5nZWQtaWQnKTt9CmlmKG9wdHMuc29ydFJlc3VsdHMhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogdGhlIGBzb3J0UmVzdWx0c2Agb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHNvcnRlcmAgaW4gU2VsZWN0MiA0LjAuMC4gJyk7fQppZihvcHRzLnNlbGVjdE9uQmx1ciE9bnVsbCl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYHNlbGVjdE9uQmx1cmAgb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHNlbGVjdE9uQ2xvc2VgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmFqYXghPW51bGwmJm9wdHMuYWpheC5yZXN1bHRzIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgYWpheC5yZXN1bHRzYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgYWpheC5wcm9jZXNzUmVzdWx0c2AgaW4gU2VsZWN0MiA0LjAuMC4nKTt9CmlmKG9wdHMuZm9ybWF0Tm9SZXN1bHRzIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0Tm9SZXN1bHRzYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2Uubm9SZXN1bHRzYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRTZWFyY2hpbmchPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRTZWFyY2hpbmdgIG9wdGlvbiBoYXMgYmVlbiByZW5hbWVkIHRvIGBsYW5ndWFnZS5zZWFyY2hpbmdgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmZvcm1hdElucHV0VG9vU2hvcnQhPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRJbnB1dFRvb1Nob3J0YCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2UuaW5wdXRUb29TaG9ydGAgaW4gU2VsZWN0MiA0LjAuMC4nKTt9CmlmKG9wdHMuZm9ybWF0SW5wdXRUb29Mb25nIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0SW5wdXRUb29Mb25nYCBvcHRpb24gaGFzIGJlZW4gcmVuYW1lZCB0byBgbGFuZ3VhZ2UuaW5wdXRUb29Mb25nYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRMb2FkaW5nIT1udWxsKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZm9ybWF0TG9hZGluZ2Agb3B0aW9uIGhhcyBiZWVuIHJlbmFtZWQgdG8gYGxhbmd1YWdlLmxvYWRpbmdNb3JlYCBpbiBTZWxlY3QyIDQuMC4wLicpO30KaWYob3B0cy5mb3JtYXRTZWxlY3Rpb25Ub29CaWchPW51bGwpe2NvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBmb3JtYXRTZWxlY3Rpb25Ub29CaWdgIG9wdGlvbiBoYXMgYmVlbiByZW5hbWVkIHRvIGBsYW5ndWFnZS5tYXhpbXVtU2VsZWN0ZWRgIGluIFNlbGVjdDIgNC4wLjAuJyk7fQppZihvcHRzLmVsZW1lbnQuZGF0YSgnc2VsZWN0MlRhZ3MnKSl7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgYGRhdGEtc2VsZWN0Mi10YWdzYCBhdHRyaWJ1dGUgaGFzIGJlZW4gcmVuYW1lZCB0byBgZGF0YS10YWdzYCBpbiBTZWxlY3QyIDQuMC4wLicpO319CmlmKG9wdHMuZWxlbWVudC5kYXRhKCd0YWdzJykhPW51bGwpe3ZhciBlbGVtVGFncz1vcHRzLmVsZW1lbnQuZGF0YSgndGFncycpO2lmKCEkLmlzQXJyYXkoZWxlbVRhZ3MpKXtlbGVtVGFncz1bXTt9Cm9wdHMuZWxlbWVudC5kYXRhKCdzZWxlY3QyVGFncycsZWxlbVRhZ3MpO30KaWYob3B0cy5zb3J0ZXIhPW51bGwpe29wdHMuc29ydFJlc3VsdHM9b3B0cy5zb3J0ZXI7fQppZihvcHRzLnNlbGVjdE9uQ2xvc2UhPW51bGwpe29wdHMuc2VsZWN0T25CbHVyPW9wdHMuc2VsZWN0T25DbG9zZTt9CmlmKG9wdHMuYWpheCE9bnVsbCl7aWYoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheC5wcm9jZXNzUmVzdWx0cykpe29wdHMuYWpheC5yZXN1bHRzPW9wdHMuYWpheC5wcm9jZXNzUmVzdWx0czt9fQppZihvcHRzLmxhbmd1YWdlIT1udWxsKXt2YXIgbGFuZz1vcHRzLmxhbmd1YWdlO2lmKCQuaXNGdW5jdGlvbihsYW5nLm5vTWF0Y2hlcykpe29wdHMuZm9ybWF0Tm9NYXRjaGVzPWxhbmcubm9NYXRjaGVzO30KaWYoJC5pc0Z1bmN0aW9uKGxhbmcuc2VhcmNoaW5nKSl7b3B0cy5mb3JtYXRTZWFyY2hpbmc9bGFuZy5zZWFyY2hpbmc7fQppZigkLmlzRnVuY3Rpb24obGFuZy5pbnB1dFRvb1Nob3J0KSl7b3B0cy5mb3JtYXRJbnB1dFRvb1Nob3J0PWxhbmcuaW5wdXRUb29TaG9ydDt9CmlmKCQuaXNGdW5jdGlvbihsYW5nLmlucHV0VG9vTG9uZykpe29wdHMuZm9ybWF0SW5wdXRUb29Mb25nPWxhbmcuaW5wdXRUb29Mb25nO30KaWYoJC5pc0Z1bmN0aW9uKGxhbmcubG9hZGluZ01vcmUpKXtvcHRzLmZvcm1hdExvYWRpbmc9bGFuZy5sb2FkaW5nTW9yZTt9CmlmKCQuaXNGdW5jdGlvbihsYW5nLm1heGltdW1TZWxlY3RlZCkpe29wdHMuZm9ybWF0U2VsZWN0aW9uVG9vQmlnPWxhbmcubWF4aW11bVNlbGVjdGVkO319Cm9wdHM9JC5leHRlbmQoe30se3BvcHVsYXRlUmVzdWx0czpmdW5jdGlvbihjb250YWluZXIscmVzdWx0cyxxdWVyeSl7dmFyIHBvcHVsYXRlLGlkPXRoaXMub3B0cy5pZCxsaXZlUmVnaW9uPXRoaXMubGl2ZVJlZ2lvbjtwb3B1bGF0ZT1mdW5jdGlvbihyZXN1bHRzLGNvbnRhaW5lcixkZXB0aCl7dmFyIGksbCxyZXN1bHQsc2VsZWN0YWJsZSxkaXNhYmxlZCxjb21wb3VuZCxub2RlLGxhYmVsLGlubmVyQ29udGFpbmVyLGZvcm1hdHRlZDtyZXN1bHRzPW9wdHMuc29ydFJlc3VsdHMocmVzdWx0cyxjb250YWluZXIscXVlcnkpO3ZhciBub2Rlcz1bXTtmb3IoaT0wLGw9cmVzdWx0cy5sZW5ndGg7aTxsO2k9aSsxKXtyZXN1bHQ9cmVzdWx0c1tpXTtkaXNhYmxlZD0ocmVzdWx0LmRpc2FibGVkPT09dHJ1ZSk7c2VsZWN0YWJsZT0oIWRpc2FibGVkKSYmKGlkKHJlc3VsdCkhPT11bmRlZmluZWQpO2NvbXBvdW5kPXJlc3VsdC5jaGlsZHJlbiYmcmVzdWx0LmNoaWxkcmVuLmxlbmd0aD4wO25vZGU9JCgiPGxpPjwvbGk+Iik7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHRzLWRlcHQtIitkZXB0aCk7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHQiKTtub2RlLmFkZENsYXNzKHNlbGVjdGFibGU/InNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGUiOiJzZWxlY3QyLXJlc3VsdC11bnNlbGVjdGFibGUiKTtpZihkaXNhYmxlZCl7bm9kZS5hZGRDbGFzcygic2VsZWN0Mi1kaXNhYmxlZCIpO30KaWYoY29tcG91bmQpe25vZGUuYWRkQ2xhc3MoInNlbGVjdDItcmVzdWx0LXdpdGgtY2hpbGRyZW4iKTt9Cm5vZGUuYWRkQ2xhc3Moc2VsZi5vcHRzLmZvcm1hdFJlc3VsdENzc0NsYXNzKHJlc3VsdCkpO25vZGUuYXR0cigicm9sZSIsInByZXNlbnRhdGlvbiIpO2xhYmVsPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2xhYmVsLmFkZENsYXNzKCJzZWxlY3QyLXJlc3VsdC1sYWJlbCIpO2xhYmVsLmF0dHIoImlkIiwic2VsZWN0Mi1yZXN1bHQtbGFiZWwtIituZXh0VWlkKCkpO2xhYmVsLmF0dHIoInJvbGUiLCJvcHRpb24iKTtmb3JtYXR0ZWQ9b3B0cy5mb3JtYXRSZXN1bHQocmVzdWx0LGxhYmVsLHF1ZXJ5LHNlbGYub3B0cy5lc2NhcGVNYXJrdXApO2lmKGZvcm1hdHRlZCE9PXVuZGVmaW5lZCl7bGFiZWwuaHRtbChmb3JtYXR0ZWQpO25vZGUuYXBwZW5kKGxhYmVsKTt9CmlmKGNvbXBvdW5kKXtpbm5lckNvbnRhaW5lcj0kKCI8dWw+PC91bD4iKTtpbm5lckNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHQtc3ViIik7cG9wdWxhdGUocmVzdWx0LmNoaWxkcmVuLGlubmVyQ29udGFpbmVyLGRlcHRoKzEpO25vZGUuYXBwZW5kKGlubmVyQ29udGFpbmVyKTt9Cm5vZGUuZGF0YSgic2VsZWN0Mi1kYXRhIixyZXN1bHQpO25vZGVzLnB1c2gobm9kZVswXSk7fQpjb250YWluZXIuYXBwZW5kKG5vZGVzKTtsaXZlUmVnaW9uLnRleHQob3B0cy5mb3JtYXRNYXRjaGVzKHJlc3VsdHMubGVuZ3RoKSk7fTtwb3B1bGF0ZShyZXN1bHRzLGNvbnRhaW5lciwwKTt9fSwkLmZuLnNlbGVjdDIuZGVmYXVsdHMsb3B0cyk7aWYodHlwZW9mKG9wdHMuaWQpIT09ImZ1bmN0aW9uIil7aWRLZXk9b3B0cy5pZDtvcHRzLmlkPWZ1bmN0aW9uKGUpe3JldHVybiBlW2lkS2V5XTt9O30KaWYoJC5pc0FycmF5KG9wdHMuZWxlbWVudC5kYXRhKCJzZWxlY3QyVGFncyIpKSl7aWYoInRhZ3MiaW4gb3B0cyl7dGhyb3cidGFncyBzcGVjaWZpZWQgYXMgYm90aCBhbiBhdHRyaWJ1dGUgJ2RhdGEtc2VsZWN0Mi10YWdzJyBhbmQgaW4gb3B0aW9ucyBvZiBTZWxlY3QyICIrb3B0cy5lbGVtZW50LmF0dHIoImlkIik7fQpvcHRzLnRhZ3M9b3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDJUYWdzIik7fQppZihzZWxlY3Qpe29wdHMucXVlcnk9dGhpcy5iaW5kKGZ1bmN0aW9uKHF1ZXJ5KXt2YXIgZGF0YT17cmVzdWx0czpbXSxtb3JlOmZhbHNlfSx0ZXJtPXF1ZXJ5LnRlcm0sY2hpbGRyZW4scGxhY2Vob2xkZXJPcHRpb24scHJvY2Vzcztwcm9jZXNzPWZ1bmN0aW9uKGVsZW1lbnQsY29sbGVjdGlvbil7dmFyIGdyb3VwO2lmKGVsZW1lbnQuaXMoIm9wdGlvbiIpKXtpZihxdWVyeS5tYXRjaGVyKHRlcm0sZWxlbWVudC50ZXh0KCksZWxlbWVudCkpe2NvbGxlY3Rpb24ucHVzaChzZWxmLm9wdGlvblRvRGF0YShlbGVtZW50KSk7fX1lbHNlIGlmKGVsZW1lbnQuaXMoIm9wdGdyb3VwIikpe2dyb3VwPXNlbGYub3B0aW9uVG9EYXRhKGVsZW1lbnQpO2VsZW1lbnQuY2hpbGRyZW4oKS5lYWNoMihmdW5jdGlvbihpLGVsbSl7cHJvY2VzcyhlbG0sZ3JvdXAuY2hpbGRyZW4pO30pO2lmKGdyb3VwLmNoaWxkcmVuLmxlbmd0aD4wKXtjb2xsZWN0aW9uLnB1c2goZ3JvdXApO319fTtjaGlsZHJlbj1lbGVtZW50LmNoaWxkcmVuKCk7aWYodGhpcy5nZXRQbGFjZWhvbGRlcigpIT09dW5kZWZpbmVkJiZjaGlsZHJlbi5sZW5ndGg+MCl7cGxhY2Vob2xkZXJPcHRpb249dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpO2lmKHBsYWNlaG9sZGVyT3B0aW9uKXtjaGlsZHJlbj1jaGlsZHJlbi5ub3QocGxhY2Vob2xkZXJPcHRpb24pO319CmNoaWxkcmVuLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtwcm9jZXNzKGVsbSxkYXRhLnJlc3VsdHMpO30pO3F1ZXJ5LmNhbGxiYWNrKGRhdGEpO30pO29wdHMuaWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ7fTt9ZWxzZXtpZighKCJxdWVyeSJpbiBvcHRzKSl7aWYoImFqYXgiaW4gb3B0cyl7YWpheFVybD1vcHRzLmVsZW1lbnQuZGF0YSgiYWpheC11cmwiKTtpZihhamF4VXJsJiZhamF4VXJsLmxlbmd0aD4wKXtvcHRzLmFqYXgudXJsPWFqYXhVcmw7fQpvcHRzLnF1ZXJ5PWFqYXguY2FsbChvcHRzLmVsZW1lbnQsb3B0cy5hamF4KTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLnF1ZXJ5PWxvY2FsKG9wdHMuZGF0YSk7fWVsc2UgaWYoInRhZ3MiaW4gb3B0cyl7b3B0cy5xdWVyeT10YWdzKG9wdHMudGFncyk7aWYob3B0cy5jcmVhdGVTZWFyY2hDaG9pY2U9PT11bmRlZmluZWQpe29wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlPWZ1bmN0aW9uKHRlcm0pe3JldHVybntpZDokLnRyaW0odGVybSksdGV4dDokLnRyaW0odGVybSl9O307fQppZihvcHRzLmluaXRTZWxlY3Rpb249PT11bmRlZmluZWQpe29wdHMuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgZGF0YT1bXTskKHNwbGl0VmFsKGVsZW1lbnQudmFsKCksb3B0cy5zZXBhcmF0b3Isb3B0cy50cmFuc2Zvcm1WYWwpKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG9iaj17aWQ6dGhpcyx0ZXh0OnRoaXN9LHRhZ3M9b3B0cy50YWdzO2lmKCQuaXNGdW5jdGlvbih0YWdzKSl0YWdzPXRhZ3MoKTskKHRhZ3MpLmVhY2goZnVuY3Rpb24oKXtpZihlcXVhbCh0aGlzLmlkLG9iai5pZCkpe29iaj10aGlzO3JldHVybiBmYWxzZTt9fSk7ZGF0YS5wdXNoKG9iaik7fSk7Y2FsbGJhY2soZGF0YSk7fTt9fX19CmlmKHR5cGVvZihvcHRzLnF1ZXJ5KSE9PSJmdW5jdGlvbiIpe3Rocm93InF1ZXJ5IGZ1bmN0aW9uIG5vdCBkZWZpbmVkIGZvciBTZWxlY3QyICIrb3B0cy5lbGVtZW50LmF0dHIoImlkIik7fQppZihvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uPT09J3RvcCcpe29wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb249ZnVuY3Rpb24obGlzdCxpdGVtKXtsaXN0LnVuc2hpZnQoaXRlbSk7fTt9CmVsc2UgaWYob3B0cy5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbj09PSdib3R0b20nKXtvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uPWZ1bmN0aW9uKGxpc3QsaXRlbSl7bGlzdC5wdXNoKGl0ZW0pO307fQplbHNlIGlmKHR5cGVvZihvcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uKSE9PSJmdW5jdGlvbiIpe3Rocm93ImludmFsaWQgY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb24gb3B0aW9uIG11c3QgYmUgJ3RvcCcsICdib3R0b20nIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIjt9CnJldHVybiBvcHRzO30sbW9uaXRvclNvdXJjZTpmdW5jdGlvbigpe3ZhciBlbD10aGlzLm9wdHMuZWxlbWVudCxvYnNlcnZlcixzZWxmPXRoaXM7ZWwub24oImNoYW5nZS5zZWxlY3QyIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0Mi1jaGFuZ2UtdHJpZ2dlcmVkIikhPT10cnVlKXt0aGlzLmluaXRTZWxlY3Rpb24oKTt9fSkpO3RoaXMuX3N5bmM9dGhpcy5iaW5kKGZ1bmN0aW9uKCl7dmFyIGRpc2FibGVkPWVsLnByb3AoImRpc2FibGVkIik7aWYoZGlzYWJsZWQ9PT11bmRlZmluZWQpZGlzYWJsZWQ9ZmFsc2U7dGhpcy5lbmFibGUoIWRpc2FibGVkKTt2YXIgcmVhZG9ubHk9ZWwucHJvcCgicmVhZG9ubHkiKTtpZihyZWFkb25seT09PXVuZGVmaW5lZClyZWFkb25seT1mYWxzZTt0aGlzLnJlYWRvbmx5KHJlYWRvbmx5KTtpZih0aGlzLmNvbnRhaW5lcil7c3luY0Nzc0NsYXNzZXModGhpcy5jb250YWluZXIsdGhpcy5vcHRzLmVsZW1lbnQsdGhpcy5vcHRzLmFkYXB0Q29udGFpbmVyQ3NzQ2xhc3MpO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKGV2YWx1YXRlKHRoaXMub3B0cy5jb250YWluZXJDc3NDbGFzcyx0aGlzLm9wdHMuZWxlbWVudCkpO30KaWYodGhpcy5kcm9wZG93bil7c3luY0Nzc0NsYXNzZXModGhpcy5kcm9wZG93bix0aGlzLm9wdHMuZWxlbWVudCx0aGlzLm9wdHMuYWRhcHREcm9wZG93bkNzc0NsYXNzKTt0aGlzLmRyb3Bkb3duLmFkZENsYXNzKGV2YWx1YXRlKHRoaXMub3B0cy5kcm9wZG93bkNzc0NsYXNzLHRoaXMub3B0cy5lbGVtZW50KSk7fX0pO2lmKGVsLmxlbmd0aCYmZWxbMF0uYXR0YWNoRXZlbnQpe2VsLmVhY2goZnVuY3Rpb24oKXt0aGlzLmF0dGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIixzZWxmLl9zeW5jKTt9KTt9Cm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7aWYob2JzZXJ2ZXIhPT11bmRlZmluZWQpe2lmKHRoaXMucHJvcGVydHlPYnNlcnZlcil7ZGVsZXRlIHRoaXMucHJvcGVydHlPYnNlcnZlcjt0aGlzLnByb3BlcnR5T2JzZXJ2ZXI9bnVsbDt9CnRoaXMucHJvcGVydHlPYnNlcnZlcj1uZXcgb2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXskLmVhY2gobXV0YXRpb25zLHNlbGYuX3N5bmMpO30pO3RoaXMucHJvcGVydHlPYnNlcnZlci5vYnNlcnZlKGVsLmdldCgwKSx7YXR0cmlidXRlczp0cnVlLHN1YnRyZWU6ZmFsc2V9KTt9fSx0cmlnZ2VyU2VsZWN0OmZ1bmN0aW9uKGRhdGEpe3ZhciBldnQ9JC5FdmVudCgic2VsZWN0Mi1zZWxlY3RpbmciLHt2YWw6dGhpcy5pZChkYXRhKSxvYmplY3Q6ZGF0YSxjaG9pY2U6ZGF0YX0pO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoZXZ0KTtyZXR1cm4hZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO30sdHJpZ2dlckNoYW5nZTpmdW5jdGlvbihkZXRhaWxzKXtkZXRhaWxzPWRldGFpbHN8fHt9O2RldGFpbHM9JC5leHRlbmQoe30sZGV0YWlscyx7dHlwZToiY2hhbmdlIix2YWw6dGhpcy52YWwoKX0pO3RoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDItY2hhbmdlLXRyaWdnZXJlZCIsdHJ1ZSk7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcihkZXRhaWxzKTt0aGlzLm9wdHMuZWxlbWVudC5kYXRhKCJzZWxlY3QyLWNoYW5nZS10cmlnZ2VyZWQiLGZhbHNlKTt0aGlzLm9wdHMuZWxlbWVudC5jbGljaygpO2lmKHRoaXMub3B0cy5ibHVyT25DaGFuZ2UpCnRoaXMub3B0cy5lbGVtZW50LmJsdXIoKTt9LGlzSW50ZXJmYWNlRW5hYmxlZDpmdW5jdGlvbigpCntyZXR1cm4gdGhpcy5lbmFibGVkSW50ZXJmYWNlPT09dHJ1ZTt9LGVuYWJsZUludGVyZmFjZTpmdW5jdGlvbigpe3ZhciBlbmFibGVkPXRoaXMuX2VuYWJsZWQmJiF0aGlzLl9yZWFkb25seSxkaXNhYmxlZD0hZW5hYmxlZDtpZihlbmFibGVkPT09dGhpcy5lbmFibGVkSW50ZXJmYWNlKXJldHVybiBmYWxzZTt0aGlzLmNvbnRhaW5lci50b2dnbGVDbGFzcygic2VsZWN0Mi1jb250YWluZXItZGlzYWJsZWQiLGRpc2FibGVkKTt0aGlzLmNsb3NlKCk7dGhpcy5lbmFibGVkSW50ZXJmYWNlPWVuYWJsZWQ7cmV0dXJuIHRydWU7fSxlbmFibGU6ZnVuY3Rpb24oZW5hYmxlZCl7aWYoZW5hYmxlZD09PXVuZGVmaW5lZCllbmFibGVkPXRydWU7aWYodGhpcy5fZW5hYmxlZD09PWVuYWJsZWQpcmV0dXJuO3RoaXMuX2VuYWJsZWQ9ZW5hYmxlZDt0aGlzLm9wdHMuZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIsIWVuYWJsZWQpO3RoaXMuZW5hYmxlSW50ZXJmYWNlKCk7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGUoZmFsc2UpO30scmVhZG9ubHk6ZnVuY3Rpb24oZW5hYmxlZCl7aWYoZW5hYmxlZD09PXVuZGVmaW5lZCllbmFibGVkPWZhbHNlO2lmKHRoaXMuX3JlYWRvbmx5PT09ZW5hYmxlZClyZXR1cm47dGhpcy5fcmVhZG9ubHk9ZW5hYmxlZDt0aGlzLm9wdHMuZWxlbWVudC5wcm9wKCJyZWFkb25seSIsZW5hYmxlZCk7dGhpcy5lbmFibGVJbnRlcmZhY2UoKTt9LG9wZW5lZDpmdW5jdGlvbigpe3JldHVybih0aGlzLmNvbnRhaW5lcik/dGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItZHJvcGRvd24tb3BlbiIpOmZhbHNlO30scG9zaXRpb25Ecm9wZG93bjpmdW5jdGlvbigpe3ZhciAkZHJvcGRvd249dGhpcy5kcm9wZG93bixjb250YWluZXI9dGhpcy5jb250YWluZXIsb2Zmc2V0PWNvbnRhaW5lci5vZmZzZXQoKSxoZWlnaHQ9Y29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKSx3aWR0aD1jb250YWluZXIub3V0ZXJXaWR0aChmYWxzZSksZHJvcEhlaWdodD0kZHJvcGRvd24ub3V0ZXJIZWlnaHQoZmFsc2UpLCR3aW5kb3c9JCh3aW5kb3cpLHdpbmRvd1dpZHRoPSR3aW5kb3cud2lkdGgoKSx3aW5kb3dIZWlnaHQ9JHdpbmRvdy5oZWlnaHQoKSx2aWV3UG9ydFJpZ2h0PSR3aW5kb3cuc2Nyb2xsTGVmdCgpK3dpbmRvd1dpZHRoLHZpZXdwb3J0Qm90dG9tPSR3aW5kb3cuc2Nyb2xsVG9wKCkrd2luZG93SGVpZ2h0LGRyb3BUb3A9b2Zmc2V0LnRvcCtoZWlnaHQsZHJvcExlZnQ9b2Zmc2V0LmxlZnQsZW5vdWdoUm9vbUJlbG93PWRyb3BUb3ArZHJvcEhlaWdodDw9dmlld3BvcnRCb3R0b20sZW5vdWdoUm9vbUFib3ZlPShvZmZzZXQudG9wLWRyb3BIZWlnaHQpPj0kd2luZG93LnNjcm9sbFRvcCgpLGRyb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSksZW5vdWdoUm9vbU9uUmlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZHJvcExlZnQrZHJvcFdpZHRoPD12aWV3UG9ydFJpZ2h0O30sZW5vdWdoUm9vbU9uTGVmdD1mdW5jdGlvbigpe3JldHVybiBvZmZzZXQubGVmdCt2aWV3UG9ydFJpZ2h0K2NvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKT5kcm9wV2lkdGg7fSxhYm92ZU5vdz0kZHJvcGRvd24uaGFzQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpLGJvZHlPZmZzZXQsYWJvdmUsY2hhbmdlRGlyZWN0aW9uLGNzcyxyZXN1bHRzTGlzdE5vZGU7aWYoYWJvdmVOb3cpe2Fib3ZlPXRydWU7aWYoIWVub3VnaFJvb21BYm92ZSYmZW5vdWdoUm9vbUJlbG93KXtjaGFuZ2VEaXJlY3Rpb249dHJ1ZTthYm92ZT1mYWxzZTt9fWVsc2V7YWJvdmU9ZmFsc2U7aWYoIWVub3VnaFJvb21CZWxvdyYmZW5vdWdoUm9vbUFib3ZlKXtjaGFuZ2VEaXJlY3Rpb249dHJ1ZTthYm92ZT10cnVlO319CmlmKGNoYW5nZURpcmVjdGlvbil7JGRyb3Bkb3duLmhpZGUoKTtvZmZzZXQ9dGhpcy5jb250YWluZXIub2Zmc2V0KCk7aGVpZ2h0PXRoaXMuY29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKTt3aWR0aD10aGlzLmNvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKTtkcm9wSGVpZ2h0PSRkcm9wZG93bi5vdXRlckhlaWdodChmYWxzZSk7dmlld1BvcnRSaWdodD0kd2luZG93LnNjcm9sbExlZnQoKSt3aW5kb3dXaWR0aDt2aWV3cG9ydEJvdHRvbT0kd2luZG93LnNjcm9sbFRvcCgpK3dpbmRvd0hlaWdodDtkcm9wVG9wPW9mZnNldC50b3AraGVpZ2h0O2Ryb3BMZWZ0PW9mZnNldC5sZWZ0O2Ryb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSk7JGRyb3Bkb3duLnNob3coKTt0aGlzLmZvY3VzU2VhcmNoKCk7fQppZih0aGlzLm9wdHMuZHJvcGRvd25BdXRvV2lkdGgpe3Jlc3VsdHNMaXN0Tm9kZT0kKCcuc2VsZWN0Mi1yZXN1bHRzJywkZHJvcGRvd24pWzBdOyRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0Mi1kcm9wLWF1dG8td2lkdGgnKTskZHJvcGRvd24uY3NzKCd3aWR0aCcsJycpO2Ryb3BXaWR0aD0kZHJvcGRvd24ub3V0ZXJXaWR0aChmYWxzZSkrKHJlc3VsdHNMaXN0Tm9kZS5zY3JvbGxIZWlnaHQ9PT1yZXN1bHRzTGlzdE5vZGUuY2xpZW50SGVpZ2h0PzA6c2Nyb2xsQmFyRGltZW5zaW9ucy53aWR0aCk7ZHJvcFdpZHRoPndpZHRoP3dpZHRoPWRyb3BXaWR0aDpkcm9wV2lkdGg9d2lkdGg7ZHJvcEhlaWdodD0kZHJvcGRvd24ub3V0ZXJIZWlnaHQoZmFsc2UpO30KZWxzZXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1kcm9wLWF1dG8td2lkdGgnKTt9CmlmKHRoaXMuYm9keS5jc3MoJ3Bvc2l0aW9uJykhPT0nc3RhdGljJyl7Ym9keU9mZnNldD10aGlzLmJvZHkub2Zmc2V0KCk7ZHJvcFRvcC09Ym9keU9mZnNldC50b3A7ZHJvcExlZnQtPWJvZHlPZmZzZXQubGVmdDt9CmlmKCFlbm91Z2hSb29tT25SaWdodCgpJiZlbm91Z2hSb29tT25MZWZ0KCkpe2Ryb3BMZWZ0PW9mZnNldC5sZWZ0K3RoaXMuY29udGFpbmVyLm91dGVyV2lkdGgoZmFsc2UpLWRyb3BXaWR0aDt9CmNzcz17bGVmdDpkcm9wTGVmdCx3aWR0aDp3aWR0aH07aWYoYWJvdmUpe3RoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTskZHJvcGRvd24uYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpO2Ryb3BIZWlnaHQ9JGRyb3Bkb3duLm91dGVySGVpZ2h0KGZhbHNlKTtjc3MudG9wPW9mZnNldC50b3AtZHJvcEhlaWdodDtjc3MuYm90dG9tPSdhdXRvJzt9CmVsc2V7Y3NzLnRvcD1kcm9wVG9wO2Nzcy5ib3R0b209J2F1dG8nO3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTskZHJvcGRvd24ucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpO30KY3NzPSQuZXh0ZW5kKGNzcyxldmFsdWF0ZSh0aGlzLm9wdHMuZHJvcGRvd25Dc3MsdGhpcy5vcHRzLmVsZW1lbnQpKTskZHJvcGRvd24uY3NzKGNzcyk7fSxzaG91bGRPcGVuOmZ1bmN0aW9uKCl7dmFyIGV2ZW50O2lmKHRoaXMub3BlbmVkKCkpcmV0dXJuIGZhbHNlO2lmKHRoaXMuX2VuYWJsZWQ9PT1mYWxzZXx8dGhpcy5fcmVhZG9ubHk9PT10cnVlKXJldHVybiBmYWxzZTtldmVudD0kLkV2ZW50KCJzZWxlY3QyLW9wZW5pbmciKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGV2ZW50KTtyZXR1cm4hZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCk7fSxjbGVhckRyb3Bkb3duQWxpZ25tZW50UHJlZmVyZW5jZTpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTt0aGlzLmRyb3Bkb3duLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3AtYWJvdmUiKTt9LG9wZW46ZnVuY3Rpb24oKXtpZighdGhpcy5zaG91bGRPcGVuKCkpcmV0dXJuIGZhbHNlO3RoaXMub3BlbmluZygpOyRkb2N1bWVudC5vbigibW91c2Vtb3ZlLnNlbGVjdDJFdmVudCIsZnVuY3Rpb24oZSl7bGFzdE1vdXNlUG9zaXRpb24ueD1lLnBhZ2VYO2xhc3RNb3VzZVBvc2l0aW9uLnk9ZS5wYWdlWTt9KTtyZXR1cm4gdHJ1ZTt9LG9wZW5pbmc6ZnVuY3Rpb24oKXt2YXIgY2lkPXRoaXMuY29udGFpbmVyRXZlbnROYW1lLHNjcm9sbD0ic2Nyb2xsLiIrY2lkLHJlc2l6ZT0icmVzaXplLiIrY2lkLG9yaWVudD0ib3JpZW50YXRpb25jaGFuZ2UuIitjaWQsbWFzazt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1kcm9wZG93bi1vcGVuIikuYWRkQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO3RoaXMuY2xlYXJEcm9wZG93bkFsaWdubWVudFByZWZlcmVuY2UoKTtpZih0aGlzLmRyb3Bkb3duWzBdIT09dGhpcy5ib2R5LmNoaWxkcmVuKCkubGFzdCgpWzBdKXt0aGlzLmRyb3Bkb3duLmRldGFjaCgpLmFwcGVuZFRvKHRoaXMuYm9keSk7fQptYXNrPSQoIiNzZWxlY3QyLWRyb3AtbWFzayIpO2lmKG1hc2subGVuZ3RoPT09MCl7bWFzaz0kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTttYXNrLmF0dHIoImlkIiwic2VsZWN0Mi1kcm9wLW1hc2siKS5hdHRyKCJjbGFzcyIsInNlbGVjdDItZHJvcC1tYXNrIik7bWFzay5oaWRlKCk7bWFzay5hcHBlbmRUbyh0aGlzLmJvZHkpO21hc2sub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IGNsaWNrIixmdW5jdGlvbihlKXtyZWluc2VydEVsZW1lbnQobWFzayk7dmFyIGRyb3Bkb3duPSQoIiNzZWxlY3QyLWRyb3AiKSxzZWxmO2lmKGRyb3Bkb3duLmxlbmd0aD4wKXtzZWxmPWRyb3Bkb3duLmRhdGEoInNlbGVjdDIiKTtpZihzZWxmLm9wdHMuc2VsZWN0T25CbHVyKXtzZWxmLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTt9CnNlbGYuY2xvc2UoKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTt9fSk7fQppZih0aGlzLmRyb3Bkb3duLnByZXYoKVswXSE9PW1hc2tbMF0pe3RoaXMuZHJvcGRvd24uYmVmb3JlKG1hc2spO30KJCgiI3NlbGVjdDItZHJvcCIpLnJlbW92ZUF0dHIoImlkIik7dGhpcy5kcm9wZG93bi5hdHRyKCJpZCIsInNlbGVjdDItZHJvcCIpO21hc2suc2hvdygpO3RoaXMucG9zaXRpb25Ecm9wZG93bigpO3RoaXMuZHJvcGRvd24uc2hvdygpO3RoaXMucG9zaXRpb25Ecm9wZG93bigpO3RoaXMuZHJvcGRvd24uYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hY3RpdmUiKTt2YXIgdGhhdD10aGlzO3RoaXMuY29udGFpbmVyLnBhcmVudHMoKS5hZGQod2luZG93KS5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5vbihyZXNpemUrIiAiK3Njcm9sbCsiICIrb3JpZW50LGZ1bmN0aW9uKGUpe2lmKHRoYXQub3BlbmVkKCkpdGhhdC5wb3NpdGlvbkRyb3Bkb3duKCk7fSk7fSk7fSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLm9wZW5lZCgpKXJldHVybjt2YXIgY2lkPXRoaXMuY29udGFpbmVyRXZlbnROYW1lLHNjcm9sbD0ic2Nyb2xsLiIrY2lkLHJlc2l6ZT0icmVzaXplLiIrY2lkLG9yaWVudD0ib3JpZW50YXRpb25jaGFuZ2UuIitjaWQ7dGhpcy5jb250YWluZXIucGFyZW50cygpLmFkZCh3aW5kb3cpLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLm9mZihzY3JvbGwpLm9mZihyZXNpemUpLm9mZihvcmllbnQpO30pO3RoaXMuY2xlYXJEcm9wZG93bkFsaWdubWVudFByZWZlcmVuY2UoKTskKCIjc2VsZWN0Mi1kcm9wLW1hc2siKS5oaWRlKCk7dGhpcy5kcm9wZG93bi5yZW1vdmVBdHRyKCJpZCIpO3RoaXMuZHJvcGRvd24uaGlkZSgpO3RoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3Bkb3duLW9wZW4iKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5yZXN1bHRzLmVtcHR5KCk7JGRvY3VtZW50Lm9mZigibW91c2Vtb3ZlLnNlbGVjdDJFdmVudCIpO3RoaXMuY2xlYXJTZWFyY2goKTt0aGlzLnNlYXJjaC5yZW1vdmVDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLnNlYXJjaC5yZW1vdmVBdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItY2xvc2UiKSk7fSxleHRlcm5hbFNlYXJjaDpmdW5jdGlvbih0ZXJtKXt0aGlzLm9wZW4oKTt0aGlzLnNlYXJjaC52YWwodGVybSk7dGhpcy51cGRhdGVSZXN1bHRzKGZhbHNlKTt9LGNsZWFyU2VhcmNoOmZ1bmN0aW9uKCl7fSxwcmVmaWxsTmV4dFNlYXJjaFRlcm06ZnVuY3Rpb24oKXtpZih0aGlzLnNlYXJjaC52YWwoKSE9PSIiKXtyZXR1cm4gZmFsc2U7fQp2YXIgbmV4dFNlYXJjaFRlcm09dGhpcy5vcHRzLm5leHRTZWFyY2hUZXJtKHRoaXMuZGF0YSgpLHRoaXMubGFzdFNlYXJjaFRlcm0pO2lmKG5leHRTZWFyY2hUZXJtIT09dW5kZWZpbmVkKXt0aGlzLnNlYXJjaC52YWwobmV4dFNlYXJjaFRlcm0pO3RoaXMuc2VhcmNoLnNlbGVjdCgpO3JldHVybiB0cnVlO30KcmV0dXJuIGZhbHNlO30sZ2V0TWF4aW11bVNlbGVjdGlvblNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZXZhbHVhdGUodGhpcy5vcHRzLm1heGltdW1TZWxlY3Rpb25TaXplLHRoaXMub3B0cy5lbGVtZW50KTt9LGVuc3VyZUhpZ2hsaWdodFZpc2libGU6ZnVuY3Rpb24oKXt2YXIgcmVzdWx0cz10aGlzLnJlc3VsdHMsY2hpbGRyZW4saW5kZXgsY2hpbGQsaGIscmIseSxtb3JlLHRvcE9mZnNldDtpbmRleD10aGlzLmhpZ2hsaWdodCgpO2lmKGluZGV4PDApcmV0dXJuO2lmKGluZGV4PT0wKXtyZXN1bHRzLnNjcm9sbFRvcCgwKTtyZXR1cm47fQpjaGlsZHJlbj10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmZpbmQoJy5zZWxlY3QyLXJlc3VsdC1sYWJlbCcpO2NoaWxkPSQoY2hpbGRyZW5baW5kZXhdKTt0b3BPZmZzZXQ9KGNoaWxkLm9mZnNldCgpfHx7fSkudG9wfHwwO2hiPXRvcE9mZnNldCtjaGlsZC5vdXRlckhlaWdodCh0cnVlKTtpZihpbmRleD09PWNoaWxkcmVuLmxlbmd0aC0xKXttb3JlPXJlc3VsdHMuZmluZCgibGkuc2VsZWN0Mi1tb3JlLXJlc3VsdHMiKTtpZihtb3JlLmxlbmd0aD4wKXtoYj1tb3JlLm9mZnNldCgpLnRvcCttb3JlLm91dGVySGVpZ2h0KHRydWUpO319CnJiPXJlc3VsdHMub2Zmc2V0KCkudG9wK3Jlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO2lmKGhiPnJiKXtyZXN1bHRzLnNjcm9sbFRvcChyZXN1bHRzLnNjcm9sbFRvcCgpKyhoYi1yYikpO30KeT10b3BPZmZzZXQtcmVzdWx0cy5vZmZzZXQoKS50b3A7aWYoeTwwJiZjaGlsZC5jc3MoJ2Rpc3BsYXknKSE9J25vbmUnKXtyZXN1bHRzLnNjcm9sbFRvcChyZXN1bHRzLnNjcm9sbFRvcCgpK3kpO319LGZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdHMuZmluZCgiLnNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGU6bm90KC5zZWxlY3QyLWRpc2FibGVkKTpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIik7fSxtb3ZlSGlnaGxpZ2h0OmZ1bmN0aW9uKGRlbHRhKXt2YXIgY2hvaWNlcz10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLGluZGV4PXRoaXMuaGlnaGxpZ2h0KCk7d2hpbGUoaW5kZXg+LTEmJmluZGV4PGNob2ljZXMubGVuZ3RoKXtpbmRleCs9ZGVsdGE7dmFyIGNob2ljZT0kKGNob2ljZXNbaW5kZXhdKTtpZihjaG9pY2UuaGFzQ2xhc3MoInNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGUiKSYmIWNob2ljZS5oYXNDbGFzcygic2VsZWN0Mi1kaXNhYmxlZCIpJiYhY2hvaWNlLmhhc0NsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIikpe3RoaXMuaGlnaGxpZ2h0KGluZGV4KTticmVhazt9fX0saGlnaGxpZ2h0OmZ1bmN0aW9uKGluZGV4KXt2YXIgY2hvaWNlcz10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLGNob2ljZSxkYXRhO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gaW5kZXhPZihjaG9pY2VzLmZpbHRlcigiLnNlbGVjdDItaGlnaGxpZ2h0ZWQiKVswXSxjaG9pY2VzLmdldCgpKTt9CmlmKGluZGV4Pj1jaG9pY2VzLmxlbmd0aClpbmRleD1jaG9pY2VzLmxlbmd0aC0xO2lmKGluZGV4PDApaW5kZXg9MDt0aGlzLnJlbW92ZUhpZ2hsaWdodCgpO2Nob2ljZT0kKGNob2ljZXNbaW5kZXhdKTtjaG9pY2UuYWRkQ2xhc3MoInNlbGVjdDItaGlnaGxpZ2h0ZWQiKTt0aGlzLnNlYXJjaC5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLGNob2ljZS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtbGFiZWwiKS5hdHRyKCJpZCIpKTt0aGlzLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTt0aGlzLmxpdmVSZWdpb24udGV4dChjaG9pY2UudGV4dCgpKTtkYXRhPWNob2ljZS5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHt0eXBlOiJzZWxlY3QyLWhpZ2hsaWdodCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt9fSxyZW1vdmVIaWdobGlnaHQ6ZnVuY3Rpb24oKXt0aGlzLnJlc3VsdHMuZmluZCgiLnNlbGVjdDItaGlnaGxpZ2h0ZWQiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1oaWdobGlnaHRlZCIpO30sdG91Y2hNb3ZlZDpmdW5jdGlvbigpe3RoaXMuX3RvdWNoTW92ZWQ9dHJ1ZTt9LGNsZWFyVG91Y2hNb3ZlZDpmdW5jdGlvbigpe3RoaXMuX3RvdWNoTW92ZWQ9ZmFsc2U7fSxjb3VudFNlbGVjdGFibGVSZXN1bHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCkubGVuZ3RoO30saGlnaGxpZ2h0VW5kZXJFdmVudDpmdW5jdGlvbihldmVudCl7dmFyIGVsPSQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpO2lmKGVsLmxlbmd0aD4wJiYhZWwuaXMoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIikpe3ZhciBjaG9pY2VzPXRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCk7dGhpcy5oaWdobGlnaHQoY2hvaWNlcy5pbmRleChlbCkpO31lbHNlIGlmKGVsLmxlbmd0aD09MCl7dGhpcy5yZW1vdmVIaWdobGlnaHQoKTt9fSxsb2FkTW9yZUlmTmVlZGVkOmZ1bmN0aW9uKCl7dmFyIHJlc3VsdHM9dGhpcy5yZXN1bHRzLG1vcmU9cmVzdWx0cy5maW5kKCJsaS5zZWxlY3QyLW1vcmUtcmVzdWx0cyIpLGJlbG93LHBhZ2U9dGhpcy5yZXN1bHRzUGFnZSsxLHNlbGY9dGhpcyx0ZXJtPXRoaXMuc2VhcmNoLnZhbCgpLGNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKG1vcmUubGVuZ3RoPT09MClyZXR1cm47YmVsb3c9bW9yZS5vZmZzZXQoKS50b3AtcmVzdWx0cy5vZmZzZXQoKS50b3AtcmVzdWx0cy5oZWlnaHQoKTtpZihiZWxvdzw9dGhpcy5vcHRzLmxvYWRNb3JlUGFkZGluZyl7bW9yZS5hZGRDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLm9wdHMucXVlcnkoe2VsZW1lbnQ6dGhpcy5vcHRzLmVsZW1lbnQsdGVybTp0ZXJtLHBhZ2U6cGFnZSxjb250ZXh0OmNvbnRleHQsbWF0Y2hlcjp0aGlzLm9wdHMubWF0Y2hlcixjYWxsYmFjazp0aGlzLmJpbmQoZnVuY3Rpb24oZGF0YSl7aWYoIXNlbGYub3BlbmVkKCkpcmV0dXJuO3NlbGYub3B0cy5wb3B1bGF0ZVJlc3VsdHMuY2FsbCh0aGlzLHJlc3VsdHMsZGF0YS5yZXN1bHRzLHt0ZXJtOnRlcm0scGFnZTpwYWdlLGNvbnRleHQ6Y29udGV4dH0pO3NlbGYucG9zdHByb2Nlc3NSZXN1bHRzKGRhdGEsZmFsc2UsZmFsc2UpO2lmKGRhdGEubW9yZT09PXRydWUpe21vcmUuZGV0YWNoKCkuYXBwZW5kVG8ocmVzdWx0cykuaHRtbChzZWxmLm9wdHMuZXNjYXBlTWFya3VwKGV2YWx1YXRlKHNlbGYub3B0cy5mb3JtYXRMb2FkTW9yZSxzZWxmLm9wdHMuZWxlbWVudCxwYWdlKzEpKSk7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmxvYWRNb3JlSWZOZWVkZWQoKTt9LDEwKTt9ZWxzZXttb3JlLnJlbW92ZSgpO30Kc2VsZi5wb3NpdGlvbkRyb3Bkb3duKCk7c2VsZi5yZXN1bHRzUGFnZT1wYWdlO3NlbGYuY29udGV4dD1kYXRhLmNvbnRleHQ7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih7dHlwZToic2VsZWN0Mi1sb2FkZWQiLGl0ZW1zOmRhdGF9KTt9KX0pO319LHRva2VuaXplOmZ1bmN0aW9uKCl7fSx1cGRhdGVSZXN1bHRzOmZ1bmN0aW9uKGluaXRpYWwpe3ZhciBzZWFyY2g9dGhpcy5zZWFyY2gscmVzdWx0cz10aGlzLnJlc3VsdHMsb3B0cz10aGlzLm9wdHMsZGF0YSxzZWxmPXRoaXMsaW5wdXQsdGVybT1zZWFyY2gudmFsKCksbGFzdFRlcm09JC5kYXRhKHRoaXMuY29udGFpbmVyLCJzZWxlY3QyLWxhc3QtdGVybSIpLHF1ZXJ5TnVtYmVyO2lmKGluaXRpYWwhPT10cnVlJiZsYXN0VGVybSYmZXF1YWwodGVybSxsYXN0VGVybSkpcmV0dXJuOyQuZGF0YSh0aGlzLmNvbnRhaW5lciwic2VsZWN0Mi1sYXN0LXRlcm0iLHRlcm0pO2lmKGluaXRpYWwhPT10cnVlJiYodGhpcy5zaG93U2VhcmNoSW5wdXQ9PT1mYWxzZXx8IXRoaXMub3BlbmVkKCkpKXtyZXR1cm47fQpmdW5jdGlvbiBwb3N0UmVuZGVyKCl7c2VhcmNoLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWFjdGl2ZSIpO3NlbGYucG9zaXRpb25Ecm9wZG93bigpO2lmKHJlc3VsdHMuZmluZCgnLnNlbGVjdDItbm8tcmVzdWx0cywuc2VsZWN0Mi1zZWxlY3Rpb24tbGltaXQsLnNlbGVjdDItc2VhcmNoaW5nJykubGVuZ3RoKXtzZWxmLmxpdmVSZWdpb24udGV4dChyZXN1bHRzLnRleHQoKSk7fQplbHNle3NlbGYubGl2ZVJlZ2lvbi50ZXh0KHNlbGYub3B0cy5mb3JtYXRNYXRjaGVzKHJlc3VsdHMuZmluZCgnLnNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGU6bm90KCIuc2VsZWN0Mi1zZWxlY3RlZCIpJykubGVuZ3RoKSk7fX0KZnVuY3Rpb24gcmVuZGVyKGh0bWwpe3Jlc3VsdHMuaHRtbChodG1sKTtwb3N0UmVuZGVyKCk7fQpxdWVyeU51bWJlcj0rK3RoaXMucXVlcnlDb3VudDt2YXIgbWF4U2VsU2l6ZT10aGlzLmdldE1heGltdW1TZWxlY3Rpb25TaXplKCk7aWYobWF4U2VsU2l6ZT49MSl7ZGF0YT10aGlzLmRhdGEoKTtpZigkLmlzQXJyYXkoZGF0YSkmJmRhdGEubGVuZ3RoPj1tYXhTZWxTaXplJiZjaGVja0Zvcm1hdHRlcihvcHRzLmZvcm1hdFNlbGVjdGlvblRvb0JpZywiZm9ybWF0U2VsZWN0aW9uVG9vQmlnIikpe3JlbmRlcigiPGxpIGNsYXNzPSdzZWxlY3QyLXNlbGVjdGlvbi1saW1pdCc+IitldmFsdWF0ZShvcHRzLmZvcm1hdFNlbGVjdGlvblRvb0JpZyxvcHRzLmVsZW1lbnQsbWF4U2VsU2l6ZSkrIjwvbGk+Iik7cmV0dXJuO319CmlmKHNlYXJjaC52YWwoKS5sZW5ndGg8b3B0cy5taW5pbXVtSW5wdXRMZW5ndGgpe2lmKGNoZWNrRm9ybWF0dGVyKG9wdHMuZm9ybWF0SW5wdXRUb29TaG9ydCwiZm9ybWF0SW5wdXRUb29TaG9ydCIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0SW5wdXRUb29TaG9ydCxvcHRzLmVsZW1lbnQsc2VhcmNoLnZhbCgpLG9wdHMubWluaW11bUlucHV0TGVuZ3RoKSsiPC9saT4iKTt9ZWxzZXtyZW5kZXIoIiIpO30KaWYoaW5pdGlhbCYmdGhpcy5zaG93U2VhcmNoKXRoaXMuc2hvd1NlYXJjaCh0cnVlKTtyZXR1cm47fQppZihvcHRzLm1heGltdW1JbnB1dExlbmd0aCYmc2VhcmNoLnZhbCgpLmxlbmd0aD5vcHRzLm1heGltdW1JbnB1dExlbmd0aCl7aWYoY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXRJbnB1dFRvb0xvbmcsImZvcm1hdElucHV0VG9vTG9uZyIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0SW5wdXRUb29Mb25nLG9wdHMuZWxlbWVudCxzZWFyY2gudmFsKCksb3B0cy5tYXhpbXVtSW5wdXRMZW5ndGgpKyI8L2xpPiIpO31lbHNle3JlbmRlcigiIik7fQpyZXR1cm47fQppZihvcHRzLmZvcm1hdFNlYXJjaGluZyYmdGhpcy5maW5kSGlnaGxpZ2h0YWJsZUNob2ljZXMoKS5sZW5ndGg9PT0wKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2hpbmcnPiIrZXZhbHVhdGUob3B0cy5mb3JtYXRTZWFyY2hpbmcsb3B0cy5lbGVtZW50KSsiPC9saT4iKTt9CnNlYXJjaC5hZGRDbGFzcygic2VsZWN0Mi1hY3RpdmUiKTt0aGlzLnJlbW92ZUhpZ2hsaWdodCgpO2lucHV0PXRoaXMudG9rZW5pemUoKTtpZihpbnB1dCE9dW5kZWZpbmVkJiZpbnB1dCE9bnVsbCl7c2VhcmNoLnZhbChpbnB1dCk7fQp0aGlzLnJlc3VsdHNQYWdlPTE7b3B0cy5xdWVyeSh7ZWxlbWVudDpvcHRzLmVsZW1lbnQsdGVybTpzZWFyY2gudmFsKCkscGFnZTp0aGlzLnJlc3VsdHNQYWdlLGNvbnRleHQ6bnVsbCxtYXRjaGVyOm9wdHMubWF0Y2hlcixjYWxsYmFjazp0aGlzLmJpbmQoZnVuY3Rpb24oZGF0YSl7dmFyIGRlZjtpZihxdWVyeU51bWJlciE9dGhpcy5xdWVyeUNvdW50KXtyZXR1cm47fQppZighdGhpcy5vcGVuZWQoKSl7dGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWN0aXZlIik7cmV0dXJuO30KaWYoZGF0YS5oYXNFcnJvciE9PXVuZGVmaW5lZCYmY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXRBamF4RXJyb3IsImZvcm1hdEFqYXhFcnJvciIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1hamF4LWVycm9yJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0QWpheEVycm9yLG9wdHMuZWxlbWVudCxkYXRhLmpxWEhSLGRhdGEudGV4dFN0YXR1cyxkYXRhLmVycm9yVGhyb3duKSsiPC9saT4iKTtyZXR1cm47fQp0aGlzLmNvbnRleHQ9KGRhdGEuY29udGV4dD09PXVuZGVmaW5lZCk/bnVsbDpkYXRhLmNvbnRleHQ7aWYodGhpcy5vcHRzLmNyZWF0ZVNlYXJjaENob2ljZSYmc2VhcmNoLnZhbCgpIT09IiIpe2RlZj10aGlzLm9wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlLmNhbGwoc2VsZixzZWFyY2gudmFsKCksZGF0YS5yZXN1bHRzKTtpZihkZWYhPT11bmRlZmluZWQmJmRlZiE9PW51bGwmJnNlbGYuaWQoZGVmKSE9PXVuZGVmaW5lZCYmc2VsZi5pZChkZWYpIT09bnVsbCl7aWYoJChkYXRhLnJlc3VsdHMpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlcXVhbChzZWxmLmlkKHRoaXMpLHNlbGYuaWQoZGVmKSk7fSkubGVuZ3RoPT09MCl7dGhpcy5vcHRzLmNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uKGRhdGEucmVzdWx0cyxkZWYpO319fQppZihkYXRhLnJlc3VsdHMubGVuZ3RoPT09MCYmY2hlY2tGb3JtYXR0ZXIob3B0cy5mb3JtYXROb01hdGNoZXMsImZvcm1hdE5vTWF0Y2hlcyIpKXtyZW5kZXIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKG9wdHMuZm9ybWF0Tm9NYXRjaGVzLG9wdHMuZWxlbWVudCxzZWFyY2gudmFsKCkpKyI8L2xpPiIpO2lmKHRoaXMuc2hvd1NlYXJjaCl7dGhpcy5zaG93U2VhcmNoKHNlYXJjaC52YWwoKSk7fQpyZXR1cm47fQpyZXN1bHRzLmVtcHR5KCk7c2VsZi5vcHRzLnBvcHVsYXRlUmVzdWx0cy5jYWxsKHRoaXMscmVzdWx0cyxkYXRhLnJlc3VsdHMse3Rlcm06c2VhcmNoLnZhbCgpLHBhZ2U6dGhpcy5yZXN1bHRzUGFnZSxjb250ZXh0Om51bGx9KTtpZihkYXRhLm1vcmU9PT10cnVlJiZjaGVja0Zvcm1hdHRlcihvcHRzLmZvcm1hdExvYWRNb3JlLCJmb3JtYXRMb2FkTW9yZSIpKXtyZXN1bHRzLmFwcGVuZCgiPGxpIGNsYXNzPSdzZWxlY3QyLW1vcmUtcmVzdWx0cyc+IitvcHRzLmVzY2FwZU1hcmt1cChldmFsdWF0ZShvcHRzLmZvcm1hdExvYWRNb3JlLG9wdHMuZWxlbWVudCx0aGlzLnJlc3VsdHNQYWdlKSkrIjwvbGk+Iik7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmxvYWRNb3JlSWZOZWVkZWQoKTt9LDEwKTt9CnRoaXMucG9zdHByb2Nlc3NSZXN1bHRzKGRhdGEsaW5pdGlhbCk7cG9zdFJlbmRlcigpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItbG9hZGVkIixpdGVtczpkYXRhfSk7fSl9KTt9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKTt9LGJsdXI6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdHMuc2VsZWN0T25CbHVyKQp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTt0aGlzLmNsb3NlKCk7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO2lmKHRoaXMuc2VhcmNoWzBdPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7dGhpcy5zZWFyY2guYmx1cigpO30KdGhpcy5jbGVhclNlYXJjaCgpO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIik7fSxmb2N1c1NlYXJjaDpmdW5jdGlvbigpe2ZvY3VzKHRoaXMuc2VhcmNoKTt9LHNlbGVjdEhpZ2hsaWdodGVkOmZ1bmN0aW9uKG9wdGlvbnMpe2lmKHRoaXMuX3RvdWNoTW92ZWQpe3RoaXMuY2xlYXJUb3VjaE1vdmVkKCk7cmV0dXJuO30KdmFyIGluZGV4PXRoaXMuaGlnaGxpZ2h0KCksaGlnaGxpZ2h0ZWQ9dGhpcy5yZXN1bHRzLmZpbmQoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIiksZGF0YT1oaWdobGlnaHRlZC5jbG9zZXN0KCcuc2VsZWN0Mi1yZXN1bHQnKS5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhKXt0aGlzLmhpZ2hsaWdodChpbmRleCk7dGhpcy5vblNlbGVjdChkYXRhLG9wdGlvbnMpO31lbHNlIGlmKG9wdGlvbnMmJm9wdGlvbnMubm9Gb2N1cyl7dGhpcy5jbG9zZSgpO319LGdldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7dmFyIHBsYWNlaG9sZGVyT3B0aW9uO3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJwbGFjZWhvbGRlciIpfHx0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJkYXRhLXBsYWNlaG9sZGVyIil8fHRoaXMub3B0cy5lbGVtZW50LmRhdGEoInBsYWNlaG9sZGVyIil8fHRoaXMub3B0cy5wbGFjZWhvbGRlcnx8KChwbGFjZWhvbGRlck9wdGlvbj10aGlzLmdldFBsYWNlaG9sZGVyT3B0aW9uKCkpIT09dW5kZWZpbmVkP3BsYWNlaG9sZGVyT3B0aW9uLnRleHQoKTp1bmRlZmluZWQpO30sZ2V0UGxhY2Vob2xkZXJPcHRpb246ZnVuY3Rpb24oKXtpZih0aGlzLnNlbGVjdCl7dmFyIGZpcnN0T3B0aW9uPXRoaXMuc2VsZWN0LmNoaWxkcmVuKCdvcHRpb24nKS5maXJzdCgpO2lmKHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbiE9PXVuZGVmaW5lZCl7cmV0dXJuKHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbj09PSJmaXJzdCImJmZpcnN0T3B0aW9uKXx8KHR5cGVvZiB0aGlzLm9wdHMucGxhY2Vob2xkZXJPcHRpb249PT0iZnVuY3Rpb24iJiZ0aGlzLm9wdHMucGxhY2Vob2xkZXJPcHRpb24odGhpcy5zZWxlY3QpKTt9ZWxzZSBpZigkLnRyaW0oZmlyc3RPcHRpb24udGV4dCgpKT09PSIiJiZmaXJzdE9wdGlvbi52YWwoKT09PSIiKXtyZXR1cm4gZmlyc3RPcHRpb247fX19LGluaXRDb250YWluZXJXaWR0aDpmdW5jdGlvbigpe2Z1bmN0aW9uIHJlc29sdmVDb250YWluZXJXaWR0aCgpe3ZhciBzdHlsZSxhdHRycyxtYXRjaGVzLGksbCxhdHRyO2lmKHRoaXMub3B0cy53aWR0aD09PSJvZmYiKXtyZXR1cm4gbnVsbDt9ZWxzZSBpZih0aGlzLm9wdHMud2lkdGg9PT0iZWxlbWVudCIpe3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC5vdXRlcldpZHRoKGZhbHNlKT09PTA/J2F1dG8nOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoZmFsc2UpKydweCc7fWVsc2UgaWYodGhpcy5vcHRzLndpZHRoPT09ImNvcHkifHx0aGlzLm9wdHMud2lkdGg9PT0icmVzb2x2ZSIpe3N0eWxlPXRoaXMub3B0cy5lbGVtZW50LmF0dHIoJ3N0eWxlJyk7aWYodHlwZW9mKHN0eWxlKT09PSJzdHJpbmciKXthdHRycz1zdHlsZS5zcGxpdCgnOycpO2ZvcihpPTAsbD1hdHRycy5sZW5ndGg7aTxsO2k9aSsxKXthdHRyPWF0dHJzW2ldLnJlcGxhY2UoL1xzL2csJycpO21hdGNoZXM9YXR0ci5tYXRjaCgvXndpZHRoOigoWy0rXT8oWzAtOV0qXC4pP1swLTldKykocHh8ZW18ZXh8JXxpbnxjbXxtbXxwdHxwYykpL2kpO2lmKG1hdGNoZXMhPT1udWxsJiZtYXRjaGVzLmxlbmd0aD49MSkKcmV0dXJuIG1hdGNoZXNbMV07fX0KaWYodGhpcy5vcHRzLndpZHRoPT09InJlc29sdmUiKXtzdHlsZT10aGlzLm9wdHMuZWxlbWVudC5jc3MoJ3dpZHRoJyk7aWYoc3R5bGUuaW5kZXhPZigiJSIpPjApcmV0dXJuIHN0eWxlO3JldHVybih0aGlzLm9wdHMuZWxlbWVudC5vdXRlcldpZHRoKGZhbHNlKT09PTA/J2F1dG8nOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoZmFsc2UpKydweCcpO30KcmV0dXJuIG51bGw7fWVsc2UgaWYoJC5pc0Z1bmN0aW9uKHRoaXMub3B0cy53aWR0aCkpe3JldHVybiB0aGlzLm9wdHMud2lkdGgoKTt9ZWxzZXtyZXR1cm4gdGhpcy5vcHRzLndpZHRoO319O3ZhciB3aWR0aD1yZXNvbHZlQ29udGFpbmVyV2lkdGguY2FsbCh0aGlzKTtpZih3aWR0aCE9PW51bGwpe3RoaXMuY29udGFpbmVyLmNzcygid2lkdGgiLHdpZHRoKTt9fX0pO1NpbmdsZVNlbGVjdDI9Y2xhenooQWJzdHJhY3RTZWxlY3QyLHtjcmVhdGVDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgY29udGFpbmVyPSQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmF0dHIoeyJjbGFzcyI6InNlbGVjdDItY29udGFpbmVyIn0pLmh0bWwoWyI8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzPSdzZWxlY3QyLWNob2ljZScgdGFiaW5kZXg9Jy0xJz4iLCIgICA8c3BhbiBjbGFzcz0nc2VsZWN0Mi1jaG9zZW4nPiYjMTYwOzwvc3Bhbj48YWJiciBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWNsb3NlJz48L2FiYnI+IiwiICAgPHNwYW4gY2xhc3M9J3NlbGVjdDItYXJyb3cnIHJvbGU9J3ByZXNlbnRhdGlvbic+PGIgcm9sZT0ncHJlc2VudGF0aW9uJz48L2I+PC9zcGFuPiIsIjwvYT4iLCI8bGFiZWwgZm9yPScnIGNsYXNzPSdzZWxlY3QyLW9mZnNjcmVlbic+PC9sYWJlbD4iLCI8aW5wdXQgY2xhc3M9J3NlbGVjdDItZm9jdXNzZXIgc2VsZWN0Mi1vZmZzY3JlZW4nIHR5cGU9J3RleHQnIGFyaWEtaGFzcG9wdXA9J3RydWUnIHJvbGU9J2J1dHRvbicgLz4iLCI8ZGl2IGNsYXNzPSdzZWxlY3QyLWRyb3Agc2VsZWN0Mi1kaXNwbGF5LW5vbmUnPiIsIiAgIDxkaXYgY2xhc3M9J3NlbGVjdDItc2VhcmNoJz4iLCIgICAgICAgPGxhYmVsIGZvcj0nJyBjbGFzcz0nc2VsZWN0Mi1vZmZzY3JlZW4nPjwvbGFiZWw+IiwiICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyBhdXRvY29tcGxldGU9J29mZicgYXV0b2NvcnJlY3Q9J29mZicgYXV0b2NhcGl0YWxpemU9J29mZicgc3BlbGxjaGVjaz0nZmFsc2UnIGNsYXNzPSdzZWxlY3QyLWlucHV0JyByb2xlPSdjb21ib2JveCcgYXJpYS1leHBhbmRlZD0ndHJ1ZSciLCIgICAgICAgYXJpYS1hdXRvY29tcGxldGU9J2xpc3QnIC8+IiwiICAgPC9kaXY+IiwiICAgPHVsIGNsYXNzPSdzZWxlY3QyLXJlc3VsdHMnIHJvbGU9J2xpc3Rib3gnPiIsIiAgIDwvdWw+IiwiPC9kaXY+Il0uam9pbigiIikpO3JldHVybiBjb250YWluZXI7fSxlbmFibGVJbnRlcmZhY2U6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudC5lbmFibGVJbnRlcmZhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIiwhdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSk7fX0sb3BlbmluZzpmdW5jdGlvbigpe3ZhciBlbCxyYW5nZSxsZW47aWYodGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPj0wKXt0aGlzLnNob3dTZWFyY2godHJ1ZSk7fQp0aGlzLnBhcmVudC5vcGVuaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLnNob3dTZWFyY2hJbnB1dCE9PWZhbHNlKXt0aGlzLnNlYXJjaC52YWwodGhpcy5mb2N1c3Nlci52YWwoKSk7fQppZih0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSl7dGhpcy5zZWFyY2guZm9jdXMoKTtlbD10aGlzLnNlYXJjaC5nZXQoMCk7aWYoZWwuY3JlYXRlVGV4dFJhbmdlKXtyYW5nZT1lbC5jcmVhdGVUZXh0UmFuZ2UoKTtyYW5nZS5jb2xsYXBzZShmYWxzZSk7cmFuZ2Uuc2VsZWN0KCk7fWVsc2UgaWYoZWwuc2V0U2VsZWN0aW9uUmFuZ2Upe2xlbj10aGlzLnNlYXJjaC52YWwoKS5sZW5ndGg7ZWwuc2V0U2VsZWN0aW9uUmFuZ2UobGVuLGxlbik7fX0KdGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKTt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIix0cnVlKS52YWwoIiIpO3RoaXMudXBkYXRlUmVzdWx0cyh0cnVlKTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItb3BlbiIpKTt9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3BlbmVkKCkpcmV0dXJuO3RoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIixmYWxzZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9fSxmb2N1czpmdW5jdGlvbigpe2lmKHRoaXMub3BlbmVkKCkpe3RoaXMuY2xvc2UoKTt9ZWxzZXt0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIixmYWxzZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9fX0saXNGb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKTt9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMucGFyZW50LmNhbmNlbC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5mb2N1c3Nlci5wcm9wKCJkaXNhYmxlZCIsZmFsc2UpO2lmKHRoaXMub3B0cy5zaG91bGRGb2N1c0lucHV0KHRoaXMpKXt0aGlzLmZvY3Vzc2VyLmZvY3VzKCk7fX0sZGVzdHJveTpmdW5jdGlvbigpeyQoImxhYmVsW2Zvcj0nIit0aGlzLmZvY3Vzc2VyLmF0dHIoJ2lkJykrIiddIikuYXR0cignZm9yJyx0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJpZCIpKTt0aGlzLnBhcmVudC5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjbGVhbnVwSlF1ZXJ5RWxlbWVudHMuY2FsbCh0aGlzLCJzZWxlY3Rpb24iLCJmb2N1c3NlciIpO30saW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBzZWxlY3Rpb24sY29udGFpbmVyPXRoaXMuY29udGFpbmVyLGRyb3Bkb3duPXRoaXMuZHJvcGRvd24saWRTdWZmaXg9bmV4dFVpZCgpLGVsZW1lbnRMYWJlbDtpZih0aGlzLm9wdHMubWluaW11bVJlc3VsdHNGb3JTZWFyY2g8MCl7dGhpcy5zaG93U2VhcmNoKGZhbHNlKTt9ZWxzZXt0aGlzLnNob3dTZWFyY2godHJ1ZSk7fQp0aGlzLnNlbGVjdGlvbj1zZWxlY3Rpb249Y29udGFpbmVyLmZpbmQoIi5zZWxlY3QyLWNob2ljZSIpO3RoaXMuZm9jdXNzZXI9Y29udGFpbmVyLmZpbmQoIi5zZWxlY3QyLWZvY3Vzc2VyIik7c2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLWNob3NlbiIpLmF0dHIoImlkIiwic2VsZWN0Mi1jaG9zZW4tIitpZFN1ZmZpeCk7dGhpcy5mb2N1c3Nlci5hdHRyKCJhcmlhLWxhYmVsbGVkYnkiLCJzZWxlY3QyLWNob3Nlbi0iK2lkU3VmZml4KTt0aGlzLnJlc3VsdHMuYXR0cigiaWQiLCJzZWxlY3QyLXJlc3VsdHMtIitpZFN1ZmZpeCk7dGhpcy5zZWFyY2guYXR0cigiYXJpYS1vd25zIiwic2VsZWN0Mi1yZXN1bHRzLSIraWRTdWZmaXgpO3RoaXMuZm9jdXNzZXIuYXR0cigiaWQiLCJzMmlkX2F1dG9nZW4iK2lkU3VmZml4KTtlbGVtZW50TGFiZWw9JCgibGFiZWxbZm9yPSciK3RoaXMub3B0cy5lbGVtZW50LmF0dHIoImlkIikrIiddIik7dGhpcy5vcHRzLmVsZW1lbnQub24oJ2ZvY3VzLnNlbGVjdDInLHRoaXMuYmluZChmdW5jdGlvbigpe3RoaXMuZm9jdXMoKTt9KSk7dGhpcy5mb2N1c3Nlci5wcmV2KCkudGV4dChlbGVtZW50TGFiZWwudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuZm9jdXNzZXIuYXR0cignaWQnKSk7dmFyIG9yaWdpbmFsVGl0bGU9dGhpcy5vcHRzLmVsZW1lbnQuYXR0cigidGl0bGUiKTt0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJ0aXRsZSIsKG9yaWdpbmFsVGl0bGV8fGVsZW1lbnRMYWJlbC50ZXh0KCkpKTt0aGlzLmZvY3Vzc2VyLmF0dHIoInRhYmluZGV4Iix0aGlzLmVsZW1lbnRUYWJJbmRleCk7dGhpcy5zZWFyY2guYXR0cigiaWQiLHRoaXMuZm9jdXNzZXIuYXR0cignaWQnKSsnX3NlYXJjaCcpO3RoaXMuc2VhcmNoLnByZXYoKS50ZXh0KCQoImxhYmVsW2Zvcj0nIit0aGlzLmZvY3Vzc2VyLmF0dHIoJ2lkJykrIiddIikudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuc2VhcmNoLmF0dHIoJ2lkJykpO3RoaXMuc2VhcmNoLm9uKCJrZXlkb3duIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpcmV0dXJuO2lmKDIyOT09ZS5rZXlDb2RlKXJldHVybjtpZihlLndoaWNoPT09S0VZLlBBR0VfVVB8fGUud2hpY2g9PT1LRVkuUEFHRV9ET1dOKXtraWxsRXZlbnQoZSk7cmV0dXJuO30Kc3dpdGNoKGUud2hpY2gpe2Nhc2UgS0VZLlVQOmNhc2UgS0VZLkRPV046dGhpcy5tb3ZlSGlnaGxpZ2h0KChlLndoaWNoPT09S0VZLlVQKT8tMToxKTtraWxsRXZlbnQoZSk7cmV0dXJuO2Nhc2UgS0VZLkVOVEVSOnRoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoKTtraWxsRXZlbnQoZSk7cmV0dXJuO2Nhc2UgS0VZLlRBQjp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOnRydWV9KTtyZXR1cm47Y2FzZSBLRVkuRVNDOnRoaXMuY2FuY2VsKGUpO2tpbGxFdmVudChlKTtyZXR1cm47fX0pKTt0aGlzLnNlYXJjaC5vbigiYmx1ciIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT10aGlzLmJvZHkuZ2V0KDApKXt3aW5kb3cuc2V0VGltZW91dCh0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLm9wZW5lZCgpJiZ0aGlzLnJlc3VsdHMmJnRoaXMucmVzdWx0cy5sZW5ndGg+MSl7dGhpcy5zZWFyY2guZm9jdXMoKTt9fSksMCk7fX0pKTt0aGlzLmZvY3Vzc2VyLm9uKCJrZXlkb3duIix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpcmV0dXJuO2lmKGUud2hpY2g9PT1LRVkuVEFCfHxLRVkuaXNDb250cm9sKGUpfHxLRVkuaXNGdW5jdGlvbktleShlKXx8ZS53aGljaD09PUtFWS5FU0Mpe3JldHVybjt9CmlmKHRoaXMub3B0cy5vcGVuT25FbnRlcj09PWZhbHNlJiZlLndoaWNoPT09S0VZLkVOVEVSKXtraWxsRXZlbnQoZSk7cmV0dXJuO30KaWYoZS53aGljaD09S0VZLkRPV058fGUud2hpY2g9PUtFWS5VUHx8KGUud2hpY2g9PUtFWS5FTlRFUiYmdGhpcy5vcHRzLm9wZW5PbkVudGVyKSl7aWYoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5zaGlmdEtleXx8ZS5tZXRhS2V5KXJldHVybjt0aGlzLm9wZW4oKTtraWxsRXZlbnQoZSk7cmV0dXJuO30KaWYoZS53aGljaD09S0VZLkRFTEVURXx8ZS53aGljaD09S0VZLkJBQ0tTUEFDRSl7aWYodGhpcy5vcHRzLmFsbG93Q2xlYXIpe3RoaXMuY2xlYXIoKTt9CmtpbGxFdmVudChlKTtyZXR1cm47fX0pKTtpbnN0YWxsS2V5VXBDaGFuZ2VFdmVudCh0aGlzLmZvY3Vzc2VyKTt0aGlzLmZvY3Vzc2VyLm9uKCJrZXl1cC1jaGFuZ2UgaW5wdXQiLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZih0aGlzLm9wdHMubWluaW11bVJlc3VsdHNGb3JTZWFyY2g+PTApe2Uuc3RvcFByb3BhZ2F0aW9uKCk7aWYodGhpcy5vcGVuZWQoKSlyZXR1cm47dGhpcy5vcGVuKCk7fX0pKTtzZWxlY3Rpb24ub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IiwiYWJiciIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXtyZXR1cm47fQp0aGlzLmNsZWFyKCk7a2lsbEV2ZW50SW1tZWRpYXRlbHkoZSk7dGhpcy5jbG9zZSgpO2lmKHRoaXMuc2VsZWN0aW9uKXt0aGlzLnNlbGVjdGlvbi5mb2N1cygpO319KSk7c2VsZWN0aW9uLm9uKCJtb3VzZWRvd24gdG91Y2hzdGFydCIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe3JlaW5zZXJ0RWxlbWVudChzZWxlY3Rpb24pO2lmKCF0aGlzLmNvbnRhaW5lci5oYXNDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIikpe3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1mb2N1cyIpKTt9CmlmKHRoaXMub3BlbmVkKCkpe3RoaXMuY2xvc2UoKTt9ZWxzZSBpZih0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXt0aGlzLm9wZW4oKTt9CmtpbGxFdmVudChlKTt9KSk7ZHJvcGRvd24ub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0Iix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSl7dGhpcy5zZWFyY2guZm9jdXMoKTt9fSkpO3NlbGVjdGlvbi5vbigiZm9jdXMiLHRoaXMuYmluZChmdW5jdGlvbihlKXtraWxsRXZlbnQoZSk7fSkpO3RoaXMuZm9jdXNzZXIub24oImZvY3VzIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7fSkpLm9uKCJibHVyIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5vcGVuZWQoKSl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1ibHVyIikpO319KSk7dGhpcy5zZWFyY2gub24oImZvY3VzIix0aGlzLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7fSkpO3RoaXMuaW5pdENvbnRhaW5lcldpZHRoKCk7dGhpcy5vcHRzLmVsZW1lbnQuaGlkZSgpO3RoaXMuc2V0UGxhY2Vob2xkZXIoKTt9LGNsZWFyOmZ1bmN0aW9uKHRyaWdnZXJDaGFuZ2Upe3ZhciBkYXRhPXRoaXMuc2VsZWN0aW9uLmRhdGEoInNlbGVjdDItZGF0YSIpO2lmKGRhdGEpe3ZhciBldnQ9JC5FdmVudCgic2VsZWN0Mi1jbGVhcmluZyIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoZXZ0KTtpZihldnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybjt9CnZhciBwbGFjZWhvbGRlck9wdGlvbj10aGlzLmdldFBsYWNlaG9sZGVyT3B0aW9uKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKHBsYWNlaG9sZGVyT3B0aW9uP3BsYWNlaG9sZGVyT3B0aW9uLnZhbCgpOiIiKTt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKS5lbXB0eSgpO3RoaXMuc2VsZWN0aW9uLnJlbW92ZURhdGEoInNlbGVjdDItZGF0YSIpO3RoaXMuc2V0UGxhY2Vob2xkZXIoKTtpZih0cmlnZ2VyQ2hhbmdlIT09ZmFsc2Upe3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItcmVtb3ZlZCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt0aGlzLnRyaWdnZXJDaGFuZ2Uoe3JlbW92ZWQ6ZGF0YX0pO319fSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHNlbGVjdGVkO2lmKHRoaXMuaXNQbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKCkpe3RoaXMudXBkYXRlU2VsZWN0aW9uKG51bGwpO3RoaXMuY2xvc2UoKTt0aGlzLnNldFBsYWNlaG9sZGVyKCk7fWVsc2V7dmFyIHNlbGY9dGhpczt0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsdGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oc2VsZWN0ZWQpe2lmKHNlbGVjdGVkIT09dW5kZWZpbmVkJiZzZWxlY3RlZCE9PW51bGwpe3NlbGYudXBkYXRlU2VsZWN0aW9uKHNlbGVjdGVkKTtzZWxmLmNsb3NlKCk7c2VsZi5zZXRQbGFjZWhvbGRlcigpO3NlbGYubGFzdFNlYXJjaFRlcm09c2VsZi5zZWFyY2gudmFsKCk7fX0pO319LGlzUGxhY2Vob2xkZXJPcHRpb25TZWxlY3RlZDpmdW5jdGlvbigpe3ZhciBwbGFjZWhvbGRlck9wdGlvbjtpZih0aGlzLmdldFBsYWNlaG9sZGVyKCk9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO3JldHVybigocGxhY2Vob2xkZXJPcHRpb249dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpKSE9PXVuZGVmaW5lZCYmcGxhY2Vob2xkZXJPcHRpb24ucHJvcCgic2VsZWN0ZWQiKSl8fCh0aGlzLm9wdHMuZWxlbWVudC52YWwoKT09PSIiKXx8KHRoaXMub3B0cy5lbGVtZW50LnZhbCgpPT09dW5kZWZpbmVkKXx8KHRoaXMub3B0cy5lbGVtZW50LnZhbCgpPT09bnVsbCk7fSxwcmVwYXJlT3B0czpmdW5jdGlvbigpe3ZhciBvcHRzPXRoaXMucGFyZW50LnByZXBhcmVPcHRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxzZWxmPXRoaXM7aWYob3B0cy5lbGVtZW50LmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0Iil7b3B0cy5pbml0U2VsZWN0aW9uPWZ1bmN0aW9uKGVsZW1lbnQsY2FsbGJhY2spe3ZhciBzZWxlY3RlZD1lbGVtZW50LmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkJiYhdGhpcy5kaXNhYmxlZH0pO2NhbGxiYWNrKHNlbGYub3B0aW9uVG9EYXRhKHNlbGVjdGVkKSk7fTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLmluaXRTZWxlY3Rpb249b3B0cy5pbml0U2VsZWN0aW9ufHxmdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgaWQ9ZWxlbWVudC52YWwoKTt2YXIgbWF0Y2g9bnVsbDtvcHRzLnF1ZXJ5KHttYXRjaGVyOmZ1bmN0aW9uKHRlcm0sdGV4dCxlbCl7dmFyIGlzX21hdGNoPWVxdWFsKGlkLG9wdHMuaWQoZWwpKTtpZihpc19tYXRjaCl7bWF0Y2g9ZWw7fQpyZXR1cm4gaXNfbWF0Y2g7fSxjYWxsYmFjazohJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKT8kLm5vb3A6ZnVuY3Rpb24oKXtjYWxsYmFjayhtYXRjaCk7fX0pO307fQpyZXR1cm4gb3B0czt9LGdldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5zZWxlY3Qpe2lmKHRoaXMuZ2V0UGxhY2Vob2xkZXJPcHRpb24oKT09PXVuZGVmaW5lZCl7cmV0dXJuIHVuZGVmaW5lZDt9fQpyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0UGxhY2Vob2xkZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sc2V0UGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXt2YXIgcGxhY2Vob2xkZXI9dGhpcy5nZXRQbGFjZWhvbGRlcigpO2lmKHRoaXMuaXNQbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKCkmJnBsYWNlaG9sZGVyIT09dW5kZWZpbmVkKXtpZih0aGlzLnNlbGVjdCYmdGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpPT09dW5kZWZpbmVkKXJldHVybjt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKS5odG1sKHRoaXMub3B0cy5lc2NhcGVNYXJrdXAocGxhY2Vob2xkZXIpKTt0aGlzLnNlbGVjdGlvbi5hZGRDbGFzcygic2VsZWN0Mi1kZWZhdWx0Iik7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWxsb3djbGVhciIpO319LHBvc3Rwcm9jZXNzUmVzdWx0czpmdW5jdGlvbihkYXRhLGluaXRpYWwsbm9IaWdobGlnaHRVcGRhdGUpe3ZhciBzZWxlY3RlZD0wLHNlbGY9dGhpcyxzaG93U2VhcmNoSW5wdXQ9dHJ1ZTt0aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtpZihlcXVhbChzZWxmLmlkKGVsbS5kYXRhKCJzZWxlY3QyLWRhdGEiKSksc2VsZi5vcHRzLmVsZW1lbnQudmFsKCkpKXtzZWxlY3RlZD1pO3JldHVybiBmYWxzZTt9fSk7aWYobm9IaWdobGlnaHRVcGRhdGUhPT1mYWxzZSl7aWYoaW5pdGlhbD09PXRydWUmJnNlbGVjdGVkPj0wKXt0aGlzLmhpZ2hsaWdodChzZWxlY3RlZCk7fWVsc2V7dGhpcy5oaWdobGlnaHQoMCk7fX0KaWYoaW5pdGlhbD09PXRydWUpe3ZhciBtaW49dGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoO2lmKG1pbj49MCl7dGhpcy5zaG93U2VhcmNoKGNvdW50UmVzdWx0cyhkYXRhLnJlc3VsdHMpPj1taW4pO319fSxzaG93U2VhcmNoOmZ1bmN0aW9uKHNob3dTZWFyY2hJbnB1dCl7aWYodGhpcy5zaG93U2VhcmNoSW5wdXQ9PT1zaG93U2VhcmNoSW5wdXQpcmV0dXJuO3RoaXMuc2hvd1NlYXJjaElucHV0PXNob3dTZWFyY2hJbnB1dDt0aGlzLmRyb3Bkb3duLmZpbmQoIi5zZWxlY3QyLXNlYXJjaCIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1oaWRkZW4iLCFzaG93U2VhcmNoSW5wdXQpO3RoaXMuZHJvcGRvd24uZmluZCgiLnNlbGVjdDItc2VhcmNoIikudG9nZ2xlQ2xhc3MoInNlbGVjdDItb2Zmc2NyZWVuIiwhc2hvd1NlYXJjaElucHV0KTskKHRoaXMuZHJvcGRvd24sdGhpcy5jb250YWluZXIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLXdpdGgtc2VhcmNoYm94IixzaG93U2VhcmNoSW5wdXQpO30sb25TZWxlY3Q6ZnVuY3Rpb24oZGF0YSxvcHRpb25zKXtpZighdGhpcy50cmlnZ2VyU2VsZWN0KGRhdGEpKXtyZXR1cm47fQp2YXIgb2xkPXRoaXMub3B0cy5lbGVtZW50LnZhbCgpLG9sZERhdGE9dGhpcy5kYXRhKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKHRoaXMuaWQoZGF0YSkpO3RoaXMudXBkYXRlU2VsZWN0aW9uKGRhdGEpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItc2VsZWN0ZWQiLHZhbDp0aGlzLmlkKGRhdGEpLGNob2ljZTpkYXRhfSk7dGhpcy5sYXN0U2VhcmNoVGVybT10aGlzLnNlYXJjaC52YWwoKTt0aGlzLmNsb3NlKCk7aWYoKCFvcHRpb25zfHwhb3B0aW9ucy5ub0ZvY3VzKSYmdGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuZm9jdXNzZXIuZm9jdXMoKTt9CmlmKCFlcXVhbChvbGQsdGhpcy5pZChkYXRhKSkpe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6ZGF0YSxyZW1vdmVkOm9sZERhdGF9KTt9fSx1cGRhdGVTZWxlY3Rpb246ZnVuY3Rpb24oZGF0YSl7dmFyIGNvbnRhaW5lcj10aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKSxmb3JtYXR0ZWQsY3NzQ2xhc3M7dGhpcy5zZWxlY3Rpb24uZGF0YSgic2VsZWN0Mi1kYXRhIixkYXRhKTtjb250YWluZXIuZW1wdHkoKTtpZihkYXRhIT09bnVsbCl7Zm9ybWF0dGVkPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb24oZGF0YSxjb250YWluZXIsdGhpcy5vcHRzLmVzY2FwZU1hcmt1cCk7fQppZihmb3JtYXR0ZWQhPT11bmRlZmluZWQpe2NvbnRhaW5lci5hcHBlbmQoZm9ybWF0dGVkKTt9CmNzc0NsYXNzPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb25Dc3NDbGFzcyhkYXRhLGNvbnRhaW5lcik7aWYoY3NzQ2xhc3MhPT11bmRlZmluZWQpe2NvbnRhaW5lci5hZGRDbGFzcyhjc3NDbGFzcyk7fQp0aGlzLnNlbGVjdGlvbi5yZW1vdmVDbGFzcygic2VsZWN0Mi1kZWZhdWx0Iik7aWYodGhpcy5vcHRzLmFsbG93Q2xlYXImJnRoaXMuZ2V0UGxhY2Vob2xkZXIoKSE9PXVuZGVmaW5lZCl7dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoInNlbGVjdDItYWxsb3djbGVhciIpO319LHZhbDpmdW5jdGlvbigpe3ZhciB2YWwsdHJpZ2dlckNoYW5nZT1mYWxzZSxkYXRhPW51bGwsc2VsZj10aGlzLG9sZERhdGE9dGhpcy5kYXRhKCk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLm9wdHMuZWxlbWVudC52YWwoKTt9CnZhbD1hcmd1bWVudHNbMF07aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt0cmlnZ2VyQ2hhbmdlPWFyZ3VtZW50c1sxXTtpZih0aGlzLm9wdHMuZGVidWcmJmNvbnNvbGUmJmNvbnNvbGUud2Fybil7Y29uc29sZS53YXJuKCdTZWxlY3QyOiBUaGUgc2Vjb25kIG9wdGlvbiB0byBgc2VsZWN0MigidmFsIilgIGlzIG5vdCBzdXBwb3J0ZWQgaW4gU2VsZWN0MiA0LjAuMC4gJysnVGhlIGBjaGFuZ2VgIGV2ZW50IHdpbGwgYWx3YXlzIGJlIHRyaWdnZXJlZCBpbiA0LjAuMC4nKTt9fQppZih0aGlzLnNlbGVjdCl7aWYodGhpcy5vcHRzLmRlYnVnJiZjb25zb2xlJiZjb25zb2xlLndhcm4pe2NvbnNvbGUud2FybignU2VsZWN0MjogU2V0dGluZyB0aGUgdmFsdWUgb24gYSA8c2VsZWN0PiB1c2luZyBgc2VsZWN0MigidmFsIilgIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgaW4gNC4wLjAuICcrJ1lvdSBjYW4gdXNlIHRoZSBgLnZhbChuZXdWYWx1ZSkudHJpZ2dlcigiY2hhbmdlIilgIG1ldGhvZCBwcm92aWRlZCBieSBqUXVlcnkgaW5zdGVhZC4nKTt9CnRoaXMuc2VsZWN0LnZhbCh2YWwpLmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkfSkuZWFjaDIoZnVuY3Rpb24oaSxlbG0pe2RhdGE9c2VsZi5vcHRpb25Ub0RhdGEoZWxtKTtyZXR1cm4gZmFsc2U7fSk7dGhpcy51cGRhdGVTZWxlY3Rpb24oZGF0YSk7dGhpcy5zZXRQbGFjZWhvbGRlcigpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6ZGF0YSxyZW1vdmVkOm9sZERhdGF9KTt9fWVsc2V7aWYoIXZhbCYmdmFsIT09MCl7dGhpcy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtyZXR1cm47fQppZih0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbj09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgY2FsbCB2YWwoKSBpZiBpbml0U2VsZWN0aW9uKCkgaXMgbm90IGRlZmluZWQiKTt9CnRoaXMub3B0cy5lbGVtZW50LnZhbCh2YWwpO3RoaXMub3B0cy5pbml0U2VsZWN0aW9uKHRoaXMub3B0cy5lbGVtZW50LGZ1bmN0aW9uKGRhdGEpe3NlbGYub3B0cy5lbGVtZW50LnZhbCghZGF0YT8iIjpzZWxmLmlkKGRhdGEpKTtzZWxmLnVwZGF0ZVNlbGVjdGlvbihkYXRhKTtzZWxmLnNldFBsYWNlaG9sZGVyKCk7aWYodHJpZ2dlckNoYW5nZSl7c2VsZi50cmlnZ2VyQ2hhbmdlKHthZGRlZDpkYXRhLHJlbW92ZWQ6b2xkRGF0YX0pO319KTt9fSxjbGVhclNlYXJjaDpmdW5jdGlvbigpe3RoaXMuc2VhcmNoLnZhbCgiIik7dGhpcy5mb2N1c3Nlci52YWwoIiIpO30sZGF0YTpmdW5jdGlvbih2YWx1ZSl7dmFyIGRhdGEsdHJpZ2dlckNoYW5nZT1mYWxzZTtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7ZGF0YT10aGlzLnNlbGVjdGlvbi5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZihkYXRhPT11bmRlZmluZWQpZGF0YT1udWxsO3JldHVybiBkYXRhO31lbHNle2lmKHRoaXMub3B0cy5kZWJ1ZyYmY29uc29sZSYmY29uc29sZS53YXJuKXtjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MigiZGF0YSIpYCBtZXRob2QgY2FuIG5vIGxvbmdlciBzZXQgc2VsZWN0ZWQgdmFsdWVzIGluIDQuMC4wLCAnKydjb25zaWRlciB1c2luZyB0aGUgYC52YWwoKWAgbWV0aG9kIGluc3RlYWQuJyk7fQppZihhcmd1bWVudHMubGVuZ3RoPjEpe3RyaWdnZXJDaGFuZ2U9YXJndW1lbnRzWzFdO30KaWYoIXZhbHVlKXt0aGlzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO31lbHNle2RhdGE9dGhpcy5kYXRhKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKCF2YWx1ZT8iIjp0aGlzLmlkKHZhbHVlKSk7dGhpcy51cGRhdGVTZWxlY3Rpb24odmFsdWUpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6dmFsdWUscmVtb3ZlZDpkYXRhfSk7fX19fX0pO011bHRpU2VsZWN0Mj1jbGF6eihBYnN0cmFjdFNlbGVjdDIse2NyZWF0ZUNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBjb250YWluZXI9JChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuYXR0cih7ImNsYXNzIjoic2VsZWN0Mi1jb250YWluZXIgc2VsZWN0Mi1jb250YWluZXItbXVsdGkifSkuaHRtbChbIjx1bCBjbGFzcz0nc2VsZWN0Mi1jaG9pY2VzJz4iLCIgIDxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtZmllbGQnPiIsIiAgICA8bGFiZWwgZm9yPScnIGNsYXNzPSdzZWxlY3QyLW9mZnNjcmVlbic+PC9sYWJlbD4iLCIgICAgPGlucHV0IHR5cGU9J3RleHQnIGF1dG9jb21wbGV0ZT0nb2ZmJyBhdXRvY29ycmVjdD0nb2ZmJyBhdXRvY2FwaXRhbGl6ZT0nb2ZmJyBzcGVsbGNoZWNrPSdmYWxzZScgY2xhc3M9J3NlbGVjdDItaW5wdXQnPiIsIiAgPC9saT4iLCI8L3VsPiIsIjxkaXYgY2xhc3M9J3NlbGVjdDItZHJvcCBzZWxlY3QyLWRyb3AtbXVsdGkgc2VsZWN0Mi1kaXNwbGF5LW5vbmUnPiIsIiAgIDx1bCBjbGFzcz0nc2VsZWN0Mi1yZXN1bHRzJz4iLCIgICA8L3VsPiIsIjwvZGl2PiJdLmpvaW4oIiIpKTtyZXR1cm4gY29udGFpbmVyO30scHJlcGFyZU9wdHM6ZnVuY3Rpb24oKXt2YXIgb3B0cz10aGlzLnBhcmVudC5wcmVwYXJlT3B0cy5hcHBseSh0aGlzLGFyZ3VtZW50cyksc2VsZj10aGlzO2lmKG9wdHMuZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe29wdHMuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgZGF0YT1bXTtlbGVtZW50LmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkJiYhdGhpcy5kaXNhYmxlZH0pLmVhY2gyKGZ1bmN0aW9uKGksZWxtKXtkYXRhLnB1c2goc2VsZi5vcHRpb25Ub0RhdGEoZWxtKSk7fSk7Y2FsbGJhY2soZGF0YSk7fTt9ZWxzZSBpZigiZGF0YSJpbiBvcHRzKXtvcHRzLmluaXRTZWxlY3Rpb249b3B0cy5pbml0U2VsZWN0aW9ufHxmdW5jdGlvbihlbGVtZW50LGNhbGxiYWNrKXt2YXIgaWRzPXNwbGl0VmFsKGVsZW1lbnQudmFsKCksb3B0cy5zZXBhcmF0b3Isb3B0cy50cmFuc2Zvcm1WYWwpO3ZhciBtYXRjaGVzPVtdO29wdHMucXVlcnkoe21hdGNoZXI6ZnVuY3Rpb24odGVybSx0ZXh0LGVsKXt2YXIgaXNfbWF0Y2g9JC5ncmVwKGlkcyxmdW5jdGlvbihpZCl7cmV0dXJuIGVxdWFsKGlkLG9wdHMuaWQoZWwpKTt9KS5sZW5ndGg7aWYoaXNfbWF0Y2gpe21hdGNoZXMucHVzaChlbCk7fQpyZXR1cm4gaXNfbWF0Y2g7fSxjYWxsYmFjazohJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKT8kLm5vb3A6ZnVuY3Rpb24oKXt2YXIgb3JkZXJlZD1bXTtmb3IodmFyIGk9MDtpPGlkcy5sZW5ndGg7aSsrKXt2YXIgaWQ9aWRzW2ldO2Zvcih2YXIgaj0wO2o8bWF0Y2hlcy5sZW5ndGg7aisrKXt2YXIgbWF0Y2g9bWF0Y2hlc1tqXTtpZihlcXVhbChpZCxvcHRzLmlkKG1hdGNoKSkpe29yZGVyZWQucHVzaChtYXRjaCk7bWF0Y2hlcy5zcGxpY2UoaiwxKTticmVhazt9fX0KY2FsbGJhY2sob3JkZXJlZCk7fX0pO307fQpyZXR1cm4gb3B0czt9LHNlbGVjdENob2ljZTpmdW5jdGlvbihjaG9pY2Upe3ZhciBzZWxlY3RlZD10aGlzLmNvbnRhaW5lci5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIik7aWYoc2VsZWN0ZWQubGVuZ3RoJiZjaG9pY2UmJmNob2ljZVswXT09c2VsZWN0ZWRbMF0pe31lbHNle2lmKHNlbGVjdGVkLmxlbmd0aCl7dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcigiY2hvaWNlLWRlc2VsZWN0ZWQiLHNlbGVjdGVkKTt9CnNlbGVjdGVkLnJlbW92ZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKTtpZihjaG9pY2UmJmNob2ljZS5sZW5ndGgpe3RoaXMuY2xvc2UoKTtjaG9pY2UuYWRkQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoImNob2ljZS1zZWxlY3RlZCIsY2hvaWNlKTt9fX0sZGVzdHJveTpmdW5jdGlvbigpeyQoImxhYmVsW2Zvcj0nIit0aGlzLnNlYXJjaC5hdHRyKCdpZCcpKyInXSIpLmF0dHIoJ2ZvcicsdGhpcy5vcHRzLmVsZW1lbnQuYXR0cigiaWQiKSk7dGhpcy5wYXJlbnQuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Y2xlYW51cEpRdWVyeUVsZW1lbnRzLmNhbGwodGhpcywic2VhcmNoQ29udGFpbmVyIiwic2VsZWN0aW9uIik7fSxpbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIHNlbGVjdG9yPSIuc2VsZWN0Mi1jaG9pY2VzIixzZWxlY3Rpb247dGhpcy5zZWFyY2hDb250YWluZXI9dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItc2VhcmNoLWZpZWxkIik7dGhpcy5zZWxlY3Rpb249c2VsZWN0aW9uPXRoaXMuY29udGFpbmVyLmZpbmQoc2VsZWN0b3IpO3ZhciBfdGhpcz10aGlzO3RoaXMuc2VsZWN0aW9uLm9uKCJjbGljayIsIi5zZWxlY3QyLWNvbnRhaW5lcjpub3QoLnNlbGVjdDItY29udGFpbmVyLWRpc2FibGVkKSAuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlOm5vdCguc2VsZWN0Mi1sb2NrZWQpIixmdW5jdGlvbihlKXtfdGhpcy5zZWFyY2hbMF0uZm9jdXMoKTtfdGhpcy5zZWxlY3RDaG9pY2UoJCh0aGlzKSk7fSk7dGhpcy5zZWFyY2guYXR0cigiaWQiLCJzMmlkX2F1dG9nZW4iK25leHRVaWQoKSk7dGhpcy5zZWFyY2gucHJldigpLnRleHQoJCgibGFiZWxbZm9yPSciK3RoaXMub3B0cy5lbGVtZW50LmF0dHIoImlkIikrIiddIikudGV4dCgpKS5hdHRyKCdmb3InLHRoaXMuc2VhcmNoLmF0dHIoJ2lkJykpO3RoaXMub3B0cy5lbGVtZW50Lm9uKCdmb2N1cy5zZWxlY3QyJyx0aGlzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCk7fSkpO3RoaXMuc2VhcmNoLm9uKCJpbnB1dCBwYXN0ZSIsdGhpcy5iaW5kKGZ1bmN0aW9uKCl7aWYodGhpcy5zZWFyY2guYXR0cigncGxhY2Vob2xkZXInKSYmdGhpcy5zZWFyY2gudmFsKCkubGVuZ3RoPT0wKXJldHVybjtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47aWYoIXRoaXMub3BlbmVkKCkpe3RoaXMub3BlbigpO319KSk7dGhpcy5zZWFyY2guYXR0cigidGFiaW5kZXgiLHRoaXMuZWxlbWVudFRhYkluZGV4KTt0aGlzLmtleWRvd25zPTA7dGhpcy5zZWFyY2gub24oImtleWRvd24iLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47Kyt0aGlzLmtleWRvd25zO3ZhciBzZWxlY3RlZD1zZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO3ZhciBwcmV2PXNlbGVjdGVkLnByZXYoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2U6bm90KC5zZWxlY3QyLWxvY2tlZCkiKTt2YXIgbmV4dD1zZWxlY3RlZC5uZXh0KCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlOm5vdCguc2VsZWN0Mi1sb2NrZWQpIik7dmFyIHBvcz1nZXRDdXJzb3JJbmZvKHRoaXMuc2VhcmNoKTtpZihzZWxlY3RlZC5sZW5ndGgmJihlLndoaWNoPT1LRVkuTEVGVHx8ZS53aGljaD09S0VZLlJJR0hUfHxlLndoaWNoPT1LRVkuQkFDS1NQQUNFfHxlLndoaWNoPT1LRVkuREVMRVRFfHxlLndoaWNoPT1LRVkuRU5URVIpKXt2YXIgc2VsZWN0ZWRDaG9pY2U9c2VsZWN0ZWQ7aWYoZS53aGljaD09S0VZLkxFRlQmJnByZXYubGVuZ3RoKXtzZWxlY3RlZENob2ljZT1wcmV2O30KZWxzZSBpZihlLndoaWNoPT1LRVkuUklHSFQpe3NlbGVjdGVkQ2hvaWNlPW5leHQubGVuZ3RoP25leHQ6bnVsbDt9CmVsc2UgaWYoZS53aGljaD09PUtFWS5CQUNLU1BBQ0Upe2lmKHRoaXMudW5zZWxlY3Qoc2VsZWN0ZWQuZmlyc3QoKSkpe3RoaXMuc2VhcmNoLndpZHRoKDEwKTtzZWxlY3RlZENob2ljZT1wcmV2Lmxlbmd0aD9wcmV2Om5leHQ7fX1lbHNlIGlmKGUud2hpY2g9PUtFWS5ERUxFVEUpe2lmKHRoaXMudW5zZWxlY3Qoc2VsZWN0ZWQuZmlyc3QoKSkpe3RoaXMuc2VhcmNoLndpZHRoKDEwKTtzZWxlY3RlZENob2ljZT1uZXh0Lmxlbmd0aD9uZXh0Om51bGw7fX1lbHNlIGlmKGUud2hpY2g9PUtFWS5FTlRFUil7c2VsZWN0ZWRDaG9pY2U9bnVsbDt9CnRoaXMuc2VsZWN0Q2hvaWNlKHNlbGVjdGVkQ2hvaWNlKTtraWxsRXZlbnQoZSk7aWYoIXNlbGVjdGVkQ2hvaWNlfHwhc2VsZWN0ZWRDaG9pY2UubGVuZ3RoKXt0aGlzLm9wZW4oKTt9CnJldHVybjt9ZWxzZSBpZigoKGUud2hpY2g9PT1LRVkuQkFDS1NQQUNFJiZ0aGlzLmtleWRvd25zPT0xKXx8ZS53aGljaD09S0VZLkxFRlQpJiYocG9zLm9mZnNldD09MCYmIXBvcy5sZW5ndGgpKXt0aGlzLnNlbGVjdENob2ljZShzZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZTpub3QoLnNlbGVjdDItbG9ja2VkKSIpLmxhc3QoKSk7a2lsbEV2ZW50KGUpO3JldHVybjt9ZWxzZXt0aGlzLnNlbGVjdENob2ljZShudWxsKTt9CmlmKHRoaXMub3BlbmVkKCkpe3N3aXRjaChlLndoaWNoKXtjYXNlIEtFWS5VUDpjYXNlIEtFWS5ET1dOOnRoaXMubW92ZUhpZ2hsaWdodCgoZS53aGljaD09PUtFWS5VUCk/LTE6MSk7a2lsbEV2ZW50KGUpO3JldHVybjtjYXNlIEtFWS5FTlRFUjp0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKCk7a2lsbEV2ZW50KGUpO3JldHVybjtjYXNlIEtFWS5UQUI6dGhpcy5zZWxlY3RIaWdobGlnaHRlZCh7bm9Gb2N1czp0cnVlfSk7dGhpcy5jbG9zZSgpO3JldHVybjtjYXNlIEtFWS5FU0M6dGhpcy5jYW5jZWwoZSk7a2lsbEV2ZW50KGUpO3JldHVybjt9fQppZihlLndoaWNoPT09S0VZLlRBQnx8S0VZLmlzQ29udHJvbChlKXx8S0VZLmlzRnVuY3Rpb25LZXkoZSl8fGUud2hpY2g9PT1LRVkuQkFDS1NQQUNFfHxlLndoaWNoPT09S0VZLkVTQyl7cmV0dXJuO30KaWYoZS53aGljaD09PUtFWS5FTlRFUil7aWYodGhpcy5vcHRzLm9wZW5PbkVudGVyPT09ZmFsc2Upe3JldHVybjt9ZWxzZSBpZihlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLnNoaWZ0S2V5fHxlLm1ldGFLZXkpe3JldHVybjt9fQp0aGlzLm9wZW4oKTtpZihlLndoaWNoPT09S0VZLlBBR0VfVVB8fGUud2hpY2g9PT1LRVkuUEFHRV9ET1dOKXtraWxsRXZlbnQoZSk7fQppZihlLndoaWNoPT09S0VZLkVOVEVSKXtraWxsRXZlbnQoZSk7fX0pKTt0aGlzLnNlYXJjaC5vbigia2V5dXAiLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmtleWRvd25zPTA7dGhpcy5yZXNpemVTZWFyY2goKTt9KSk7dGhpcy5zZWFyY2gub24oImJsdXIiLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpO3RoaXMuc2VsZWN0Q2hvaWNlKG51bGwpO2lmKCF0aGlzLm9wZW5lZCgpKXRoaXMuY2xlYXJTZWFyY2goKTtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoJC5FdmVudCgic2VsZWN0Mi1ibHVyIikpO30pKTt0aGlzLmNvbnRhaW5lci5vbigiY2xpY2siLHNlbGVjdG9yLHRoaXMuYmluZChmdW5jdGlvbihlKXtpZighdGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSlyZXR1cm47aWYoJChlLnRhcmdldCkuY2xvc2VzdCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZSIpLmxlbmd0aD4wKXtyZXR1cm47fQp0aGlzLnNlbGVjdENob2ljZShudWxsKTt0aGlzLmNsZWFyUGxhY2Vob2xkZXIoKTtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLm9wZW4oKTt0aGlzLmZvY3VzU2VhcmNoKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO30pKTt0aGlzLmNvbnRhaW5lci5vbigiZm9jdXMiLHNlbGVjdG9yLHRoaXMuYmluZChmdW5jdGlvbigpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjtpZighdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoInNlbGVjdDItY29udGFpbmVyLWFjdGl2ZSIpKXt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItZm9jdXMiKSk7fQp0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5kcm9wZG93bi5hZGRDbGFzcygic2VsZWN0Mi1kcm9wLWFjdGl2ZSIpO3RoaXMuY2xlYXJQbGFjZWhvbGRlcigpO30pKTt0aGlzLmluaXRDb250YWluZXJXaWR0aCgpO3RoaXMub3B0cy5lbGVtZW50LmhpZGUoKTt0aGlzLmNsZWFyU2VhcmNoKCk7fSxlbmFibGVJbnRlcmZhY2U6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudC5lbmFibGVJbnRlcmZhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt0aGlzLnNlYXJjaC5wcm9wKCJkaXNhYmxlZCIsIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpO319LGluaXRTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZGF0YTtpZih0aGlzLm9wdHMuZWxlbWVudC52YWwoKT09PSIiJiZ0aGlzLm9wdHMuZWxlbWVudC50ZXh0KCk9PT0iIil7dGhpcy51cGRhdGVTZWxlY3Rpb24oW10pO3RoaXMuY2xvc2UoKTt0aGlzLmNsZWFyU2VhcmNoKCk7fQppZih0aGlzLnNlbGVjdHx8dGhpcy5vcHRzLmVsZW1lbnQudmFsKCkhPT0iIil7dmFyIHNlbGY9dGhpczt0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsdGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oZGF0YSl7aWYoZGF0YSE9PXVuZGVmaW5lZCYmZGF0YSE9PW51bGwpe3NlbGYudXBkYXRlU2VsZWN0aW9uKGRhdGEpO3NlbGYuY2xvc2UoKTtzZWxmLmNsZWFyU2VhcmNoKCk7fX0pO319LGNsZWFyU2VhcmNoOmZ1bmN0aW9uKCl7dmFyIHBsYWNlaG9sZGVyPXRoaXMuZ2V0UGxhY2Vob2xkZXIoKSxtYXhXaWR0aD10aGlzLmdldE1heFNlYXJjaFdpZHRoKCk7aWYocGxhY2Vob2xkZXIhPT11bmRlZmluZWQmJnRoaXMuZ2V0VmFsKCkubGVuZ3RoPT09MCYmdGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpPT09ZmFsc2Upe3RoaXMuc2VhcmNoLnZhbChwbGFjZWhvbGRlcikuYWRkQ2xhc3MoInNlbGVjdDItZGVmYXVsdCIpO3RoaXMuc2VhcmNoLndpZHRoKG1heFdpZHRoPjA/bWF4V2lkdGg6dGhpcy5jb250YWluZXIuY3NzKCJ3aWR0aCIpKTt9ZWxzZXt0aGlzLnNlYXJjaC52YWwoIiIpLndpZHRoKDEwKTt9fSxjbGVhclBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZGVmYXVsdCIpKXt0aGlzLnNlYXJjaC52YWwoIiIpLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRlZmF1bHQiKTt9fSxvcGVuaW5nOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclBsYWNlaG9sZGVyKCk7dGhpcy5yZXNpemVTZWFyY2goKTt0aGlzLnBhcmVudC5vcGVuaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvY3VzU2VhcmNoKCk7dGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKTt0aGlzLnVwZGF0ZVJlc3VsdHModHJ1ZSk7aWYodGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykpe3RoaXMuc2VhcmNoLmZvY3VzKCk7fQp0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoInNlbGVjdDItb3BlbiIpKTt9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3BlbmVkKCkpcmV0dXJuO3RoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpO3RoaXMuc2VhcmNoLmZvY3VzKCk7fSxpc0ZvY3VzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWFyY2guaGFzQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpO30sdXBkYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKGRhdGEpe3ZhciBpZHM9e30sZmlsdGVyZWQ9W10sc2VsZj10aGlzOyQoZGF0YSkuZWFjaChmdW5jdGlvbigpe2lmKCEoc2VsZi5pZCh0aGlzKWluIGlkcykpe2lkc1tzZWxmLmlkKHRoaXMpXT0wO2ZpbHRlcmVkLnB1c2godGhpcyk7fX0pO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5yZW1vdmUoKTt0aGlzLmFkZFNlbGVjdGVkQ2hvaWNlKGZpbHRlcmVkKTtzZWxmLnBvc3Rwcm9jZXNzUmVzdWx0cygpO30sdG9rZW5pemU6ZnVuY3Rpb24oKXt2YXIgaW5wdXQ9dGhpcy5zZWFyY2gudmFsKCk7aW5wdXQ9dGhpcy5vcHRzLnRva2VuaXplci5jYWxsKHRoaXMsaW5wdXQsdGhpcy5kYXRhKCksdGhpcy5iaW5kKHRoaXMub25TZWxlY3QpLHRoaXMub3B0cyk7aWYoaW5wdXQhPW51bGwmJmlucHV0IT11bmRlZmluZWQpe3RoaXMuc2VhcmNoLnZhbChpbnB1dCk7aWYoaW5wdXQubGVuZ3RoPjApe3RoaXMub3BlbigpO319fSxvblNlbGVjdDpmdW5jdGlvbihkYXRhLG9wdGlvbnMpe2lmKCF0aGlzLnRyaWdnZXJTZWxlY3QoZGF0YSl8fGRhdGEudGV4dD09PSIiKXtyZXR1cm47fQp0aGlzLmFkZFNlbGVjdGVkQ2hvaWNlKGRhdGEpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdGVkIix2YWw6dGhpcy5pZChkYXRhKSxjaG9pY2U6ZGF0YX0pO3RoaXMubGFzdFNlYXJjaFRlcm09dGhpcy5zZWFyY2gudmFsKCk7dGhpcy5jbGVhclNlYXJjaCgpO3RoaXMudXBkYXRlUmVzdWx0cygpO2lmKHRoaXMuc2VsZWN0fHwhdGhpcy5vcHRzLmNsb3NlT25TZWxlY3QpdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMoZGF0YSxmYWxzZSx0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD09PXRydWUpO2lmKHRoaXMub3B0cy5jbG9zZU9uU2VsZWN0KXt0aGlzLmNsb3NlKCk7dGhpcy5zZWFyY2gud2lkdGgoMTApO31lbHNle2lmKHRoaXMuY291bnRTZWxlY3RhYmxlUmVzdWx0cygpPjApe3RoaXMuc2VhcmNoLndpZHRoKDEwKTt0aGlzLnJlc2l6ZVNlYXJjaCgpO2lmKHRoaXMuZ2V0TWF4aW11bVNlbGVjdGlvblNpemUoKT4wJiZ0aGlzLnZhbCgpLmxlbmd0aD49dGhpcy5nZXRNYXhpbXVtU2VsZWN0aW9uU2l6ZSgpKXt0aGlzLnVwZGF0ZVJlc3VsdHModHJ1ZSk7fWVsc2V7aWYodGhpcy5wcmVmaWxsTmV4dFNlYXJjaFRlcm0oKSl7dGhpcy51cGRhdGVSZXN1bHRzKCk7fX0KdGhpcy5wb3NpdGlvbkRyb3Bkb3duKCk7fWVsc2V7dGhpcy5jbG9zZSgpO3RoaXMuc2VhcmNoLndpZHRoKDEwKTt9fQp0aGlzLnRyaWdnZXJDaGFuZ2Uoe2FkZGVkOmRhdGF9KTtpZighb3B0aW9uc3x8IW9wdGlvbnMubm9Gb2N1cykKdGhpcy5mb2N1c1NlYXJjaCgpO30sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpO3RoaXMuZm9jdXNTZWFyY2goKTt9LGFkZFNlbGVjdGVkQ2hvaWNlOmZ1bmN0aW9uKGRhdGEpe3ZhciB2YWw9dGhpcy5nZXRWYWwoKSxzZWxmPXRoaXM7JChkYXRhKS5lYWNoKGZ1bmN0aW9uKCl7dmFsLnB1c2goc2VsZi5jcmVhdGVDaG9pY2UodGhpcykpO30pO3RoaXMuc2V0VmFsKHZhbCk7fSxjcmVhdGVDaG9pY2U6ZnVuY3Rpb24oZGF0YSl7dmFyIGVuYWJsZUNob2ljZT0hZGF0YS5sb2NrZWQsZW5hYmxlZEl0ZW09JCgiPGxpIGNsYXNzPSdzZWxlY3QyLXNlYXJjaC1jaG9pY2UnPiIrIiAgICA8ZGl2PjwvZGl2PiIrIiAgICA8YSBocmVmPScjJyBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWNsb3NlJyB0YWJpbmRleD0nLTEnPjwvYT4iKyI8L2xpPiIpLGRpc2FibGVkSXRlbT0kKCI8bGkgY2xhc3M9J3NlbGVjdDItc2VhcmNoLWNob2ljZSBzZWxlY3QyLWxvY2tlZCc+IisiPGRpdj48L2Rpdj4iKyI8L2xpPiIpO3ZhciBjaG9pY2U9ZW5hYmxlQ2hvaWNlP2VuYWJsZWRJdGVtOmRpc2FibGVkSXRlbSxpZD10aGlzLmlkKGRhdGEpLGZvcm1hdHRlZCxjc3NDbGFzcztmb3JtYXR0ZWQ9dGhpcy5vcHRzLmZvcm1hdFNlbGVjdGlvbihkYXRhLGNob2ljZS5maW5kKCJkaXYiKSx0aGlzLm9wdHMuZXNjYXBlTWFya3VwKTtpZihmb3JtYXR0ZWQhPXVuZGVmaW5lZCl7Y2hvaWNlLmZpbmQoImRpdiIpLnJlcGxhY2VXaXRoKCQoIjxkaXY+PC9kaXY+IikuaHRtbChmb3JtYXR0ZWQpKTt9CmNzc0NsYXNzPXRoaXMub3B0cy5mb3JtYXRTZWxlY3Rpb25Dc3NDbGFzcyhkYXRhLGNob2ljZS5maW5kKCJkaXYiKSk7aWYoY3NzQ2xhc3MhPXVuZGVmaW5lZCl7Y2hvaWNlLmFkZENsYXNzKGNzc0NsYXNzKTt9CmlmKGVuYWJsZUNob2ljZSl7Y2hvaWNlLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtY2xvc2UiKS5vbigibW91c2Vkb3duIixraWxsRXZlbnQpLm9uKCJjbGljayBkYmxjbGljayIsdGhpcy5iaW5kKGZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjt0aGlzLnVuc2VsZWN0KCQoZS50YXJnZXQpKTt0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIikucmVtb3ZlQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpO2tpbGxFdmVudChlKTt0aGlzLmNsb3NlKCk7dGhpcy5mb2N1c1NlYXJjaCgpO30pKS5vbigiZm9jdXMiLHRoaXMuYmluZChmdW5jdGlvbigpe2lmKCF0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXJldHVybjt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIik7dGhpcy5kcm9wZG93bi5hZGRDbGFzcygic2VsZWN0Mi1kcm9wLWFjdGl2ZSIpO30pKTt9CmNob2ljZS5kYXRhKCJzZWxlY3QyLWRhdGEiLGRhdGEpO2Nob2ljZS5pbnNlcnRCZWZvcmUodGhpcy5zZWFyY2hDb250YWluZXIpO3JldHVybiBpZDt9LHVuc2VsZWN0OmZ1bmN0aW9uKHNlbGVjdGVkKXt2YXIgdmFsPXRoaXMuZ2V0VmFsKCksZGF0YSxpbmRleDtzZWxlY3RlZD1zZWxlY3RlZC5jbG9zZXN0KCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlIik7aWYoc2VsZWN0ZWQubGVuZ3RoPT09MCl7dGhyb3ciSW52YWxpZCBhcmd1bWVudDogIitzZWxlY3RlZCsiLiBNdXN0IGJlIC5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiO30KZGF0YT1zZWxlY3RlZC5kYXRhKCJzZWxlY3QyLWRhdGEiKTtpZighZGF0YSl7cmV0dXJuO30KdmFyIGV2dD0kLkV2ZW50KCJzZWxlY3QyLXJlbW92aW5nIik7ZXZ0LnZhbD10aGlzLmlkKGRhdGEpO2V2dC5jaG9pY2U9ZGF0YTt0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGV2dCk7aWYoZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm4gZmFsc2U7fQp3aGlsZSgoaW5kZXg9aW5kZXhPZih0aGlzLmlkKGRhdGEpLHZhbCkpPj0wKXt2YWwuc3BsaWNlKGluZGV4LDEpO3RoaXMuc2V0VmFsKHZhbCk7aWYodGhpcy5zZWxlY3QpdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMoKTt9CnNlbGVjdGVkLnJlbW92ZSgpO3RoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItcmVtb3ZlZCIsdmFsOnRoaXMuaWQoZGF0YSksY2hvaWNlOmRhdGF9KTt0aGlzLnRyaWdnZXJDaGFuZ2Uoe3JlbW92ZWQ6ZGF0YX0pO3JldHVybiB0cnVlO30scG9zdHByb2Nlc3NSZXN1bHRzOmZ1bmN0aW9uKGRhdGEsaW5pdGlhbCxub0hpZ2hsaWdodFVwZGF0ZSl7dmFyIHZhbD10aGlzLmdldFZhbCgpLGNob2ljZXM9dGhpcy5yZXN1bHRzLmZpbmQoIi5zZWxlY3QyLXJlc3VsdCIpLGNvbXBvdW5kPXRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtd2l0aC1jaGlsZHJlbiIpLHNlbGY9dGhpcztjaG9pY2VzLmVhY2gyKGZ1bmN0aW9uKGksY2hvaWNlKXt2YXIgaWQ9c2VsZi5pZChjaG9pY2UuZGF0YSgic2VsZWN0Mi1kYXRhIikpO2lmKGluZGV4T2YoaWQsdmFsKT49MCl7Y2hvaWNlLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIik7Y2hvaWNlLmZpbmQoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIikuYWRkQ2xhc3MoInNlbGVjdDItc2VsZWN0ZWQiKTt9fSk7Y29tcG91bmQuZWFjaDIoZnVuY3Rpb24oaSxjaG9pY2Upe2lmKCFjaG9pY2UuaXMoJy5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlJykmJmNob2ljZS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZTpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIikubGVuZ3RoPT09MCl7Y2hvaWNlLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIik7fX0pO2lmKHRoaXMuaGlnaGxpZ2h0KCk9PS0xJiZub0hpZ2hsaWdodFVwZGF0ZSE9PWZhbHNlJiZ0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD09PXRydWUpe3NlbGYuaGlnaGxpZ2h0KDApO30KaWYoIXRoaXMub3B0cy5jcmVhdGVTZWFyY2hDaG9pY2UmJiFjaG9pY2VzLmZpbHRlcignLnNlbGVjdDItcmVzdWx0Om5vdCguc2VsZWN0Mi1zZWxlY3RlZCknKS5sZW5ndGg+MCl7aWYoIWRhdGF8fGRhdGEmJiFkYXRhLm1vcmUmJnRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1uby1yZXN1bHRzIikubGVuZ3RoPT09MCl7aWYoY2hlY2tGb3JtYXR0ZXIoc2VsZi5vcHRzLmZvcm1hdE5vTWF0Y2hlcywiZm9ybWF0Tm9NYXRjaGVzIikpe3RoaXMucmVzdWx0cy5hcHBlbmQoIjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK2V2YWx1YXRlKHNlbGYub3B0cy5mb3JtYXROb01hdGNoZXMsc2VsZi5vcHRzLmVsZW1lbnQsc2VsZi5zZWFyY2gudmFsKCkpKyI8L2xpPiIpO319fX0sZ2V0TWF4U2VhcmNoV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ud2lkdGgoKS1nZXRTaWRlQm9yZGVyUGFkZGluZyh0aGlzLnNlYXJjaCk7fSxyZXNpemVTZWFyY2g6ZnVuY3Rpb24oKXt2YXIgbWluaW11bVdpZHRoLGxlZnQsbWF4V2lkdGgsY29udGFpbmVyTGVmdCxzZWFyY2hXaWR0aCxzaWRlQm9yZGVyUGFkZGluZz1nZXRTaWRlQm9yZGVyUGFkZGluZyh0aGlzLnNlYXJjaCk7bWluaW11bVdpZHRoPW1lYXN1cmVUZXh0V2lkdGgodGhpcy5zZWFyY2gpKzEwO2xlZnQ9dGhpcy5zZWFyY2gub2Zmc2V0KCkubGVmdDttYXhXaWR0aD10aGlzLnNlbGVjdGlvbi53aWR0aCgpO2NvbnRhaW5lckxlZnQ9dGhpcy5zZWxlY3Rpb24ub2Zmc2V0KCkubGVmdDtzZWFyY2hXaWR0aD1tYXhXaWR0aC0obGVmdC1jb250YWluZXJMZWZ0KS1zaWRlQm9yZGVyUGFkZGluZztpZihzZWFyY2hXaWR0aDxtaW5pbXVtV2lkdGgpe3NlYXJjaFdpZHRoPW1heFdpZHRoLXNpZGVCb3JkZXJQYWRkaW5nO30KaWYoc2VhcmNoV2lkdGg8NDApe3NlYXJjaFdpZHRoPW1heFdpZHRoLXNpZGVCb3JkZXJQYWRkaW5nO30KaWYoc2VhcmNoV2lkdGg8PTApe3NlYXJjaFdpZHRoPW1pbmltdW1XaWR0aDt9CnRoaXMuc2VhcmNoLndpZHRoKE1hdGguZmxvb3Ioc2VhcmNoV2lkdGgpKTt9LGdldFZhbDpmdW5jdGlvbigpe3ZhciB2YWw7aWYodGhpcy5zZWxlY3Qpe3ZhbD10aGlzLnNlbGVjdC52YWwoKTtyZXR1cm4gdmFsPT09bnVsbD9bXTp2YWw7fWVsc2V7dmFsPXRoaXMub3B0cy5lbGVtZW50LnZhbCgpO3JldHVybiBzcGxpdFZhbCh2YWwsdGhpcy5vcHRzLnNlcGFyYXRvcix0aGlzLm9wdHMudHJhbnNmb3JtVmFsKTt9fSxzZXRWYWw6ZnVuY3Rpb24odmFsKXtpZih0aGlzLnNlbGVjdCl7dGhpcy5zZWxlY3QudmFsKHZhbCk7fWVsc2V7dmFyIHVuaXF1ZT1bXSx2YWxNYXA9e307JCh2YWwpLmVhY2goZnVuY3Rpb24oKXtpZighKHRoaXMgaW4gdmFsTWFwKSl7dW5pcXVlLnB1c2godGhpcyk7dmFsTWFwW3RoaXNdPTA7fX0pO3RoaXMub3B0cy5lbGVtZW50LnZhbCh1bmlxdWUubGVuZ3RoPT09MD8iIjp1bmlxdWUuam9pbih0aGlzLm9wdHMuc2VwYXJhdG9yKSk7fX0sYnVpbGRDaGFuZ2VEZXRhaWxzOmZ1bmN0aW9uKG9sZCxjdXJyZW50KXt2YXIgY3VycmVudD1jdXJyZW50LnNsaWNlKDApLG9sZD1vbGQuc2xpY2UoMCk7Zm9yKHZhciBpPTA7aTxjdXJyZW50Lmxlbmd0aDtpKyspe2Zvcih2YXIgaj0wO2o8b2xkLmxlbmd0aDtqKyspe2lmKGVxdWFsKHRoaXMub3B0cy5pZChjdXJyZW50W2ldKSx0aGlzLm9wdHMuaWQob2xkW2pdKSkpe2N1cnJlbnQuc3BsaWNlKGksMSk7aS0tO29sZC5zcGxpY2UoaiwxKTticmVhazt9fX0KcmV0dXJue2FkZGVkOmN1cnJlbnQscmVtb3ZlZDpvbGR9O30sdmFsOmZ1bmN0aW9uKHZhbCx0cmlnZ2VyQ2hhbmdlKXt2YXIgb2xkRGF0YSxzZWxmPXRoaXM7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLmdldFZhbCgpO30Kb2xkRGF0YT10aGlzLmRhdGEoKTtpZighb2xkRGF0YS5sZW5ndGgpb2xkRGF0YT1bXTtpZighdmFsJiZ2YWwhPT0wKXt0aGlzLm9wdHMuZWxlbWVudC52YWwoIiIpO3RoaXMudXBkYXRlU2VsZWN0aW9uKFtdKTt0aGlzLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7dGhpcy50cmlnZ2VyQ2hhbmdlKHthZGRlZDp0aGlzLmRhdGEoKSxyZW1vdmVkOm9sZERhdGF9KTt9CnJldHVybjt9CnRoaXMuc2V0VmFsKHZhbCk7aWYodGhpcy5zZWxlY3Qpe3RoaXMub3B0cy5pbml0U2VsZWN0aW9uKHRoaXMuc2VsZWN0LHRoaXMuYmluZCh0aGlzLnVwZGF0ZVNlbGVjdGlvbikpO2lmKHRyaWdnZXJDaGFuZ2Upe3RoaXMudHJpZ2dlckNoYW5nZSh0aGlzLmJ1aWxkQ2hhbmdlRGV0YWlscyhvbGREYXRhLHRoaXMuZGF0YSgpKSk7fX1lbHNle2lmKHRoaXMub3B0cy5pbml0U2VsZWN0aW9uPT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoInZhbCgpIGNhbm5vdCBiZSBjYWxsZWQgaWYgaW5pdFNlbGVjdGlvbigpIGlzIG5vdCBkZWZpbmVkIik7fQp0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbih0aGlzLm9wdHMuZWxlbWVudCxmdW5jdGlvbihkYXRhKXt2YXIgaWRzPSQubWFwKGRhdGEsc2VsZi5pZCk7c2VsZi5zZXRWYWwoaWRzKTtzZWxmLnVwZGF0ZVNlbGVjdGlvbihkYXRhKTtzZWxmLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7c2VsZi50cmlnZ2VyQ2hhbmdlKHNlbGYuYnVpbGRDaGFuZ2VEZXRhaWxzKG9sZERhdGEsc2VsZi5kYXRhKCkpKTt9fSk7fQp0aGlzLmNsZWFyU2VhcmNoKCk7fSxvblNvcnRTdGFydDpmdW5jdGlvbigpe2lmKHRoaXMuc2VsZWN0KXt0aHJvdyBuZXcgRXJyb3IoIlNvcnRpbmcgb2YgZWxlbWVudHMgaXMgbm90IHN1cHBvcnRlZCB3aGVuIGF0dGFjaGVkIHRvIDxzZWxlY3Q+LiBBdHRhY2ggdG8gPGlucHV0IHR5cGU9J2hpZGRlbicvPiBpbnN0ZWFkLiIpO30KdGhpcy5zZWFyY2gud2lkdGgoMCk7dGhpcy5zZWFyY2hDb250YWluZXIuaGlkZSgpO30sb25Tb3J0RW5kOmZ1bmN0aW9uKCl7dmFyIHZhbD1bXSxzZWxmPXRoaXM7dGhpcy5zZWFyY2hDb250YWluZXIuc2hvdygpO3RoaXMuc2VhcmNoQ29udGFpbmVyLmFwcGVuZFRvKHRoaXMuc2VhcmNoQ29udGFpbmVyLnBhcmVudCgpKTt0aGlzLnJlc2l6ZVNlYXJjaCgpO3RoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5lYWNoKGZ1bmN0aW9uKCl7dmFsLnB1c2goc2VsZi5vcHRzLmlkKCQodGhpcykuZGF0YSgic2VsZWN0Mi1kYXRhIikpKTt9KTt0aGlzLnNldFZhbCh2YWwpO3RoaXMudHJpZ2dlckNoYW5nZSgpO30sZGF0YTpmdW5jdGlvbih2YWx1ZXMsdHJpZ2dlckNoYW5nZSl7dmFyIHNlbGY9dGhpcyxpZHMsb2xkO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24uY2hpbGRyZW4oIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS5kYXRhKCJzZWxlY3QyLWRhdGEiKTt9KS5nZXQoKTt9ZWxzZXtvbGQ9dGhpcy5kYXRhKCk7aWYoIXZhbHVlcyl7dmFsdWVzPVtdO30KaWRzPSQubWFwKHZhbHVlcyxmdW5jdGlvbihlKXtyZXR1cm4gc2VsZi5vcHRzLmlkKGUpO30pO3RoaXMuc2V0VmFsKGlkcyk7dGhpcy51cGRhdGVTZWxlY3Rpb24odmFsdWVzKTt0aGlzLmNsZWFyU2VhcmNoKCk7aWYodHJpZ2dlckNoYW5nZSl7dGhpcy50cmlnZ2VyQ2hhbmdlKHRoaXMuYnVpbGRDaGFuZ2VEZXRhaWxzKG9sZCx0aGlzLmRhdGEoKSkpO319fX0pOyQuZm4uc2VsZWN0Mj1mdW5jdGlvbigpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxvcHRzLHNlbGVjdDIsbWV0aG9kLHZhbHVlLG11bHRpcGxlLGFsbG93ZWRNZXRob2RzPVsidmFsIiwiZGVzdHJveSIsIm9wZW5lZCIsIm9wZW4iLCJjbG9zZSIsImZvY3VzIiwiaXNGb2N1c2VkIiwiY29udGFpbmVyIiwiZHJvcGRvd24iLCJvblNvcnRTdGFydCIsIm9uU29ydEVuZCIsImVuYWJsZSIsImRpc2FibGUiLCJyZWFkb25seSIsInBvc2l0aW9uRHJvcGRvd24iLCJkYXRhIiwic2VhcmNoIl0sdmFsdWVNZXRob2RzPVsib3BlbmVkIiwiaXNGb2N1c2VkIiwiY29udGFpbmVyIiwiZHJvcGRvd24iXSxwcm9wZXJ0eU1ldGhvZHM9WyJ2YWwiLCJkYXRhIl0sbWV0aG9kc01hcD17c2VhcmNoOiJleHRlcm5hbFNlYXJjaCJ9O3RoaXMuZWFjaChmdW5jdGlvbigpe2lmKGFyZ3MubGVuZ3RoPT09MHx8dHlwZW9mKGFyZ3NbMF0pPT09Im9iamVjdCIpe29wdHM9YXJncy5sZW5ndGg9PT0wP3t9OiQuZXh0ZW5kKHt9LGFyZ3NbMF0pO29wdHMuZWxlbWVudD0kKHRoaXMpO2lmKG9wdHMuZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe211bHRpcGxlPW9wdHMuZWxlbWVudC5wcm9wKCJtdWx0aXBsZSIpO31lbHNle211bHRpcGxlPW9wdHMubXVsdGlwbGV8fGZhbHNlO2lmKCJ0YWdzImluIG9wdHMpe29wdHMubXVsdGlwbGU9bXVsdGlwbGU9dHJ1ZTt9fQpzZWxlY3QyPW11bHRpcGxlP25ldyB3aW5kb3cuU2VsZWN0MlsiY2xhc3MiXS5tdWx0aSgpOm5ldyB3aW5kb3cuU2VsZWN0MlsiY2xhc3MiXS5zaW5nbGUoKTtzZWxlY3QyLmluaXQob3B0cyk7fWVsc2UgaWYodHlwZW9mKGFyZ3NbMF0pPT09InN0cmluZyIpe2lmKGluZGV4T2YoYXJnc1swXSxhbGxvd2VkTWV0aG9kcyk8MCl7dGhyb3ciVW5rbm93biBtZXRob2Q6ICIrYXJnc1swXTt9CnZhbHVlPXVuZGVmaW5lZDtzZWxlY3QyPSQodGhpcykuZGF0YSgic2VsZWN0MiIpO2lmKHNlbGVjdDI9PT11bmRlZmluZWQpcmV0dXJuO21ldGhvZD1hcmdzWzBdO2lmKG1ldGhvZD09PSJjb250YWluZXIiKXt2YWx1ZT1zZWxlY3QyLmNvbnRhaW5lcjt9ZWxzZSBpZihtZXRob2Q9PT0iZHJvcGRvd24iKXt2YWx1ZT1zZWxlY3QyLmRyb3Bkb3duO31lbHNle2lmKG1ldGhvZHNNYXBbbWV0aG9kXSltZXRob2Q9bWV0aG9kc01hcFttZXRob2RdO3ZhbHVlPXNlbGVjdDJbbWV0aG9kXS5hcHBseShzZWxlY3QyLGFyZ3Muc2xpY2UoMSkpO30KaWYoaW5kZXhPZihhcmdzWzBdLHZhbHVlTWV0aG9kcyk+PTB8fChpbmRleE9mKGFyZ3NbMF0scHJvcGVydHlNZXRob2RzKT49MCYmYXJncy5sZW5ndGg9PTEpKXtyZXR1cm4gZmFsc2U7fX1lbHNle3Rocm93IkludmFsaWQgYXJndW1lbnRzIHRvIHNlbGVjdDIgcGx1Z2luOiAiK2FyZ3M7fX0pO3JldHVybih2YWx1ZT09PXVuZGVmaW5lZCk/dGhpczp2YWx1ZTt9OyQuZm4uc2VsZWN0Mi5kZWZhdWx0cz17ZGVidWc6ZmFsc2Usd2lkdGg6ImNvcHkiLGxvYWRNb3JlUGFkZGluZzowLGNsb3NlT25TZWxlY3Q6dHJ1ZSxvcGVuT25FbnRlcjp0cnVlLGNvbnRhaW5lckNzczp7fSxkcm9wZG93bkNzczp7fSxjb250YWluZXJDc3NDbGFzczoiIixkcm9wZG93bkNzc0NsYXNzOiIiLGZvcm1hdFJlc3VsdDpmdW5jdGlvbihyZXN1bHQsY29udGFpbmVyLHF1ZXJ5LGVzY2FwZU1hcmt1cCl7dmFyIG1hcmt1cD1bXTttYXJrTWF0Y2godGhpcy50ZXh0KHJlc3VsdCkscXVlcnkudGVybSxtYXJrdXAsZXNjYXBlTWFya3VwKTtyZXR1cm4gbWFya3VwLmpvaW4oIiIpO30sdHJhbnNmb3JtVmFsOmZ1bmN0aW9uKHZhbCl7cmV0dXJuICQudHJpbSh2YWwpO30sZm9ybWF0U2VsZWN0aW9uOmZ1bmN0aW9uKGRhdGEsY29udGFpbmVyLGVzY2FwZU1hcmt1cCl7cmV0dXJuIGRhdGE/ZXNjYXBlTWFya3VwKHRoaXMudGV4dChkYXRhKSk6dW5kZWZpbmVkO30sc29ydFJlc3VsdHM6ZnVuY3Rpb24ocmVzdWx0cyxjb250YWluZXIscXVlcnkpe3JldHVybiByZXN1bHRzO30sZm9ybWF0UmVzdWx0Q3NzQ2xhc3M6ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIGRhdGEuY3NzO30sZm9ybWF0U2VsZWN0aW9uQ3NzQ2xhc3M6ZnVuY3Rpb24oZGF0YSxjb250YWluZXIpe3JldHVybiB1bmRlZmluZWQ7fSxtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDowLG1pbmltdW1JbnB1dExlbmd0aDowLG1heGltdW1JbnB1dExlbmd0aDpudWxsLG1heGltdW1TZWxlY3Rpb25TaXplOjAsaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXVuZGVmaW5lZD9udWxsOmUuaWQ7fSx0ZXh0OmZ1bmN0aW9uKGUpe2lmKGUmJnRoaXMuZGF0YSYmdGhpcy5kYXRhLnRleHQpe2lmKCQuaXNGdW5jdGlvbih0aGlzLmRhdGEudGV4dCkpe3JldHVybiB0aGlzLmRhdGEudGV4dChlKTt9ZWxzZXtyZXR1cm4gZVt0aGlzLmRhdGEudGV4dF07fX1lbHNle3JldHVybiBlLnRleHQ7fX0sbWF0Y2hlcjpmdW5jdGlvbih0ZXJtLHRleHQpe3JldHVybiBzdHJpcERpYWNyaXRpY3MoJycrdGV4dCkudG9VcHBlckNhc2UoKS5pbmRleE9mKHN0cmlwRGlhY3JpdGljcygnJyt0ZXJtKS50b1VwcGVyQ2FzZSgpKT49MDt9LHNlcGFyYXRvcjoiLCIsdG9rZW5TZXBhcmF0b3JzOltdLHRva2VuaXplcjpkZWZhdWx0VG9rZW5pemVyLGVzY2FwZU1hcmt1cDpkZWZhdWx0RXNjYXBlTWFya3VwLGJsdXJPbkNoYW5nZTpmYWxzZSxzZWxlY3RPbkJsdXI6ZmFsc2UsYWRhcHRDb250YWluZXJDc3NDbGFzczpmdW5jdGlvbihjKXtyZXR1cm4gYzt9LGFkYXB0RHJvcGRvd25Dc3NDbGFzczpmdW5jdGlvbihjKXtyZXR1cm4gbnVsbDt9LG5leHRTZWFyY2hUZXJtOmZ1bmN0aW9uKHNlbGVjdGVkT2JqZWN0LGN1cnJlbnRTZWFyY2hUZXJtKXtyZXR1cm4gdW5kZWZpbmVkO30sc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjonJyxjcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbjondG9wJyxzaG91bGRGb2N1c0lucHV0OmZ1bmN0aW9uKGluc3RhbmNlKXt2YXIgc3VwcG9ydHNUb3VjaEV2ZW50cz0oKCdvbnRvdWNoc3RhcnQnaW4gd2luZG93KXx8KG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzPjApKTtpZighc3VwcG9ydHNUb3VjaEV2ZW50cyl7cmV0dXJuIHRydWU7fQppZihpbnN0YW5jZS5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPDApe3JldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO319OyQuZm4uc2VsZWN0Mi5sb2NhbGVzPVtdOyQuZm4uc2VsZWN0Mi5sb2NhbGVzWydlbiddPXtmb3JtYXRNYXRjaGVzOmZ1bmN0aW9uKG1hdGNoZXMpe2lmKG1hdGNoZXM9PT0xKXtyZXR1cm4iT25lIHJlc3VsdCBpcyBhdmFpbGFibGUsIHByZXNzIGVudGVyIHRvIHNlbGVjdCBpdC4iO31yZXR1cm4gbWF0Y2hlcysiIHJlc3VsdHMgYXJlIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIjt9LGZvcm1hdE5vTWF0Y2hlczpmdW5jdGlvbigpe3JldHVybiJObyBtYXRjaGVzIGZvdW5kIjt9LGZvcm1hdEFqYXhFcnJvcjpmdW5jdGlvbihqcVhIUix0ZXh0U3RhdHVzLGVycm9yVGhyb3duKXtyZXR1cm4iTG9hZGluZyBmYWlsZWQiO30sZm9ybWF0SW5wdXRUb29TaG9ydDpmdW5jdGlvbihpbnB1dCxtaW4pe3ZhciBuPW1pbi1pbnB1dC5sZW5ndGg7cmV0dXJuIlBsZWFzZSBlbnRlciAiK24rIiBvciBtb3JlIGNoYXJhY3RlciIrKG49PTE/IiI6InMiKTt9LGZvcm1hdElucHV0VG9vTG9uZzpmdW5jdGlvbihpbnB1dCxtYXgpe3ZhciBuPWlucHV0Lmxlbmd0aC1tYXg7cmV0dXJuIlBsZWFzZSBkZWxldGUgIituKyIgY2hhcmFjdGVyIisobj09MT8iIjoicyIpO30sZm9ybWF0U2VsZWN0aW9uVG9vQmlnOmZ1bmN0aW9uKGxpbWl0KXtyZXR1cm4iWW91IGNhbiBvbmx5IHNlbGVjdCAiK2xpbWl0KyIgaXRlbSIrKGxpbWl0PT0xPyIiOiJzIik7fSxmb3JtYXRMb2FkTW9yZTpmdW5jdGlvbihwYWdlTnVtYmVyKXtyZXR1cm4iTG9hZGluZyBtb3JlIHJlc3VsdHPigKYiO30sZm9ybWF0U2VhcmNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIlNlYXJjaGluZ+KApiI7fX07JC5leHRlbmQoJC5mbi5zZWxlY3QyLmRlZmF1bHRzLCQuZm4uc2VsZWN0Mi5sb2NhbGVzWydlbiddKTskLmZuLnNlbGVjdDIuYWpheERlZmF1bHRzPXt0cmFuc3BvcnQ6JC5hamF4LHBhcmFtczp7dHlwZToiR0VUIixjYWNoZTpmYWxzZSxkYXRhVHlwZToianNvbiJ9fTt3aW5kb3cuU2VsZWN0Mj17cXVlcnk6e2FqYXg6YWpheCxsb2NhbDpsb2NhbCx0YWdzOnRhZ3N9LHV0aWw6e2RlYm91bmNlOmRlYm91bmNlLG1hcmtNYXRjaDptYXJrTWF0Y2gsZXNjYXBlTWFya3VwOmRlZmF1bHRFc2NhcGVNYXJrdXAsc3RyaXBEaWFjcml0aWNzOnN0cmlwRGlhY3JpdGljc30sImNsYXNzIjp7ImFic3RyYWN0IjpBYnN0cmFjdFNlbGVjdDIsInNpbmdsZSI6U2luZ2xlU2VsZWN0MiwibXVsdGkiOk11bHRpU2VsZWN0Mn19O30oalF1ZXJ5KSk7OwoKLyogL3dlYi9zdGF0aWMvbGliL2NsaXBib2FyZC9jbGlwYm9hcmQuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwooZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCxmYWN0b3J5KXtpZih0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlPT09J29iamVjdCcpCm1vZHVsZS5leHBvcnRzPWZhY3RvcnkoKTtlbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKQpkZWZpbmUoW10sZmFjdG9yeSk7ZWxzZSBpZih0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnKQpleHBvcnRzWyJDbGlwYm9hcmRKUyJdPWZhY3RvcnkoKTtlbHNlCnJvb3RbIkNsaXBib2FyZEpTIl09ZmFjdG9yeSgpO30pKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4oZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pe3JldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO30KdmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOmZhbHNlLGV4cG9ydHM6e319O21vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsbW9kdWxlLG1vZHVsZS5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pO21vZHVsZS5sPXRydWU7cmV0dXJuIG1vZHVsZS5leHBvcnRzO30KX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXM7X193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXM7X193ZWJwYWNrX3JlcXVpcmVfXy5pPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU7fTtfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZXhwb3J0cyxuYW1lLGdldHRlcil7aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtjb25maWd1cmFibGU6ZmFsc2UsZW51bWVyYWJsZTp0cnVlLGdldDpnZXR0ZXJ9KTt9fTtfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpe3JldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTt9OmZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKXtyZXR1cm4gbW9kdWxlO307X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwnYScsZ2V0dGVyKTtyZXR1cm4gZ2V0dGVyO307X193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpO307X193ZWJwYWNrX3JlcXVpcmVfXy5wPSIiO3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0zKTt9KQooWyhmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187KGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXtpZih0cnVlKXshKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX189W21vZHVsZSxfX3dlYnBhY2tfcmVxdWlyZV9fKDcpXSxfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX189KGZhY3RvcnkpLF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fPSh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fPT09J2Z1bmN0aW9uJz8oX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXykpOl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18hPT11bmRlZmluZWQmJihtb2R1bGUuZXhwb3J0cz1fX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO31lbHNlIGlmKHR5cGVvZiBleHBvcnRzIT09InVuZGVmaW5lZCIpe2ZhY3RvcnkobW9kdWxlLHJlcXVpcmUoJ3NlbGVjdCcpKTt9ZWxzZXt2YXIgbW9kPXtleHBvcnRzOnt9fTtmYWN0b3J5KG1vZCxnbG9iYWwuc2VsZWN0KTtnbG9iYWwuY2xpcGJvYXJkQWN0aW9uPW1vZC5leHBvcnRzO319KSh0aGlzLGZ1bmN0aW9uKG1vZHVsZSxfc2VsZWN0KXsndXNlIHN0cmljdCc7dmFyIF9zZWxlY3QyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbGVjdCk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O30KdmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT0ic3ltYm9sIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmo7fTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319CnZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319CnJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgQ2xpcGJvYXJkQWN0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ2xpcGJvYXJkQWN0aW9uKG9wdGlvbnMpe19jbGFzc0NhbGxDaGVjayh0aGlzLENsaXBib2FyZEFjdGlvbik7dGhpcy5yZXNvbHZlT3B0aW9ucyhvcHRpb25zKTt0aGlzLmluaXRTZWxlY3Rpb24oKTt9Cl9jcmVhdGVDbGFzcyhDbGlwYm9hcmRBY3Rpb24sW3trZXk6J3Jlc29sdmVPcHRpb25zJyx2YWx1ZTpmdW5jdGlvbiByZXNvbHZlT3B0aW9ucygpe3ZhciBvcHRpb25zPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTp7fTt0aGlzLmFjdGlvbj1vcHRpb25zLmFjdGlvbjt0aGlzLmNvbnRhaW5lcj1vcHRpb25zLmNvbnRhaW5lcjt0aGlzLmVtaXR0ZXI9b3B0aW9ucy5lbWl0dGVyO3RoaXMudGFyZ2V0PW9wdGlvbnMudGFyZ2V0O3RoaXMudGV4dD1vcHRpb25zLnRleHQ7dGhpcy50cmlnZ2VyPW9wdGlvbnMudHJpZ2dlcjt0aGlzLnNlbGVjdGVkVGV4dD0nJzt9fSx7a2V5Oidpbml0U2VsZWN0aW9uJyx2YWx1ZTpmdW5jdGlvbiBpbml0U2VsZWN0aW9uKCl7aWYodGhpcy50ZXh0KXt0aGlzLnNlbGVjdEZha2UoKTt9ZWxzZSBpZih0aGlzLnRhcmdldCl7dGhpcy5zZWxlY3RUYXJnZXQoKTt9fX0se2tleTonc2VsZWN0RmFrZScsdmFsdWU6ZnVuY3Rpb24gc2VsZWN0RmFrZSgpe3ZhciBfdGhpcz10aGlzO3ZhciBpc1JUTD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkaXInKT09J3J0bCc7dGhpcy5yZW1vdmVGYWtlKCk7dGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLnJlbW92ZUZha2UoKTt9O3RoaXMuZmFrZUhhbmRsZXI9dGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayl8fHRydWU7dGhpcy5mYWtlRWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO3RoaXMuZmFrZUVsZW0uc3R5bGUuZm9udFNpemU9JzEycHQnO3RoaXMuZmFrZUVsZW0uc3R5bGUuYm9yZGVyPScwJzt0aGlzLmZha2VFbGVtLnN0eWxlLnBhZGRpbmc9JzAnO3RoaXMuZmFrZUVsZW0uc3R5bGUubWFyZ2luPScwJzt0aGlzLmZha2VFbGVtLnN0eWxlLnBvc2l0aW9uPSdhYnNvbHV0ZSc7dGhpcy5mYWtlRWxlbS5zdHlsZVtpc1JUTD8ncmlnaHQnOidsZWZ0J109Jy05OTk5cHgnO3ZhciB5UG9zaXRpb249d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO3RoaXMuZmFrZUVsZW0uc3R5bGUudG9wPXlQb3NpdGlvbisncHgnO3RoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKCdyZWFkb25seScsJycpO3RoaXMuZmFrZUVsZW0udmFsdWU9dGhpcy50ZXh0O3RoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZmFrZUVsZW0pO3RoaXMuc2VsZWN0ZWRUZXh0PSgwLF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMuZmFrZUVsZW0pO3RoaXMuY29weVRleHQoKTt9fSx7a2V5OidyZW1vdmVGYWtlJyx2YWx1ZTpmdW5jdGlvbiByZW1vdmVGYWtlKCl7aWYodGhpcy5mYWtlSGFuZGxlcil7dGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayk7dGhpcy5mYWtlSGFuZGxlcj1udWxsO3RoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaz1udWxsO30KaWYodGhpcy5mYWtlRWxlbSl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5mYWtlRWxlbSk7dGhpcy5mYWtlRWxlbT1udWxsO319fSx7a2V5OidzZWxlY3RUYXJnZXQnLHZhbHVlOmZ1bmN0aW9uIHNlbGVjdFRhcmdldCgpe3RoaXMuc2VsZWN0ZWRUZXh0PSgwLF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMudGFyZ2V0KTt0aGlzLmNvcHlUZXh0KCk7fX0se2tleTonY29weVRleHQnLHZhbHVlOmZ1bmN0aW9uIGNvcHlUZXh0KCl7dmFyIHN1Y2NlZWRlZD12b2lkIDA7dHJ5e3N1Y2NlZWRlZD1kb2N1bWVudC5leGVjQ29tbWFuZCh0aGlzLmFjdGlvbik7fWNhdGNoKGVycil7c3VjY2VlZGVkPWZhbHNlO30KdGhpcy5oYW5kbGVSZXN1bHQoc3VjY2VlZGVkKTt9fSx7a2V5OidoYW5kbGVSZXN1bHQnLHZhbHVlOmZ1bmN0aW9uIGhhbmRsZVJlc3VsdChzdWNjZWVkZWQpe3RoaXMuZW1pdHRlci5lbWl0KHN1Y2NlZWRlZD8nc3VjY2Vzcyc6J2Vycm9yJyx7YWN0aW9uOnRoaXMuYWN0aW9uLHRleHQ6dGhpcy5zZWxlY3RlZFRleHQsdHJpZ2dlcjp0aGlzLnRyaWdnZXIsY2xlYXJTZWxlY3Rpb246dGhpcy5jbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpfSk7fX0se2tleTonY2xlYXJTZWxlY3Rpb24nLHZhbHVlOmZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCl7aWYodGhpcy50cmlnZ2VyKXt0aGlzLnRyaWdnZXIuZm9jdXMoKTt9CndpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTt9fSx7a2V5OidkZXN0cm95Jyx2YWx1ZTpmdW5jdGlvbiBkZXN0cm95KCl7dGhpcy5yZW1vdmVGYWtlKCk7fX0se2tleTonYWN0aW9uJyxzZXQ6ZnVuY3Rpb24gc2V0KCl7dmFyIGFjdGlvbj1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMF06J2NvcHknO3RoaXMuX2FjdGlvbj1hY3Rpb247aWYodGhpcy5fYWN0aW9uIT09J2NvcHknJiZ0aGlzLl9hY3Rpb24hPT0nY3V0Jyl7dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJhY3Rpb24iIHZhbHVlLCB1c2UgZWl0aGVyICJjb3B5IiBvciAiY3V0IicpO319LGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fYWN0aW9uO319LHtrZXk6J3RhcmdldCcsc2V0OmZ1bmN0aW9uIHNldCh0YXJnZXQpe2lmKHRhcmdldCE9PXVuZGVmaW5lZCl7aWYodGFyZ2V0JiYodHlwZW9mIHRhcmdldD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YodGFyZ2V0KSk9PT0nb2JqZWN0JyYmdGFyZ2V0Lm5vZGVUeXBlPT09MSl7aWYodGhpcy5hY3Rpb249PT0nY29weScmJnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCAidGFyZ2V0IiBhdHRyaWJ1dGUuIFBsZWFzZSB1c2UgInJlYWRvbmx5IiBpbnN0ZWFkIG9mICJkaXNhYmxlZCIgYXR0cmlidXRlJyk7fQppZih0aGlzLmFjdGlvbj09PSdjdXQnJiYodGFyZ2V0Lmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKXx8dGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkpe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCAidGFyZ2V0IiBhdHRyaWJ1dGUuIFlvdSBjYW5cJ3QgY3V0IHRleHQgZnJvbSBlbGVtZW50cyB3aXRoICJyZWFkb25seSIgb3IgImRpc2FibGVkIiBhdHRyaWJ1dGVzJyk7fQp0aGlzLl90YXJnZXQ9dGFyZ2V0O31lbHNle3Rocm93IG5ldyBFcnJvcignSW52YWxpZCAidGFyZ2V0IiB2YWx1ZSwgdXNlIGEgdmFsaWQgRWxlbWVudCcpO319fSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3RhcmdldDt9fV0pO3JldHVybiBDbGlwYm9hcmRBY3Rpb247fSgpO21vZHVsZS5leHBvcnRzPUNsaXBib2FyZEFjdGlvbjt9KTt9KSwoZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGlzPV9fd2VicGFja19yZXF1aXJlX18oNik7dmFyIGRlbGVnYXRlPV9fd2VicGFja19yZXF1aXJlX18oNSk7ZnVuY3Rpb24gbGlzdGVuKHRhcmdldCx0eXBlLGNhbGxiYWNrKXtpZighdGFyZ2V0JiYhdHlwZSYmIWNhbGxiYWNrKXt0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzJyk7fQppZighaXMuc3RyaW5nKHR5cGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZycpO30KaWYoIWlzLmZuKGNhbGxiYWNrKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uJyk7fQppZihpcy5ub2RlKHRhcmdldCkpe3JldHVybiBsaXN0ZW5Ob2RlKHRhcmdldCx0eXBlLGNhbGxiYWNrKTt9CmVsc2UgaWYoaXMubm9kZUxpc3QodGFyZ2V0KSl7cmV0dXJuIGxpc3Rlbk5vZGVMaXN0KHRhcmdldCx0eXBlLGNhbGxiYWNrKTt9CmVsc2UgaWYoaXMuc3RyaW5nKHRhcmdldCkpe3JldHVybiBsaXN0ZW5TZWxlY3Rvcih0YXJnZXQsdHlwZSxjYWxsYmFjayk7fQplbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QnKTt9fQpmdW5jdGlvbiBsaXN0ZW5Ob2RlKG5vZGUsdHlwZSxjYWxsYmFjayl7bm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsY2FsbGJhY2spO3JldHVybntkZXN0cm95OmZ1bmN0aW9uKCl7bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsY2FsbGJhY2spO319fQpmdW5jdGlvbiBsaXN0ZW5Ob2RlTGlzdChub2RlTGlzdCx0eXBlLGNhbGxiYWNrKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG5vZGVMaXN0LGZ1bmN0aW9uKG5vZGUpe25vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLGNhbGxiYWNrKTt9KTtyZXR1cm57ZGVzdHJveTpmdW5jdGlvbigpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsZnVuY3Rpb24obm9kZSl7bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsY2FsbGJhY2spO30pO319fQpmdW5jdGlvbiBsaXN0ZW5TZWxlY3RvcihzZWxlY3Rvcix0eXBlLGNhbGxiYWNrKXtyZXR1cm4gZGVsZWdhdGUoZG9jdW1lbnQuYm9keSxzZWxlY3Rvcix0eXBlLGNhbGxiYWNrKTt9Cm1vZHVsZS5leHBvcnRzPWxpc3Rlbjt9KSwoZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2Z1bmN0aW9uIEUoKXt9CkUucHJvdG90eXBlPXtvbjpmdW5jdGlvbihuYW1lLGNhbGxiYWNrLGN0eCl7dmFyIGU9dGhpcy5lfHwodGhpcy5lPXt9KTsoZVtuYW1lXXx8KGVbbmFtZV09W10pKS5wdXNoKHtmbjpjYWxsYmFjayxjdHg6Y3R4fSk7cmV0dXJuIHRoaXM7fSxvbmNlOmZ1bmN0aW9uKG5hbWUsY2FsbGJhY2ssY3R4KXt2YXIgc2VsZj10aGlzO2Z1bmN0aW9uIGxpc3RlbmVyKCl7c2VsZi5vZmYobmFtZSxsaXN0ZW5lcik7Y2FsbGJhY2suYXBwbHkoY3R4LGFyZ3VtZW50cyk7fTtsaXN0ZW5lci5fPWNhbGxiYWNrCnJldHVybiB0aGlzLm9uKG5hbWUsbGlzdGVuZXIsY3R4KTt9LGVtaXQ6ZnVuY3Rpb24obmFtZSl7dmFyIGRhdGE9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dmFyIGV2dEFycj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW25hbWVdfHxbXSkuc2xpY2UoKTt2YXIgaT0wO3ZhciBsZW49ZXZ0QXJyLmxlbmd0aDtmb3IoaTtpPGxlbjtpKyspe2V2dEFycltpXS5mbi5hcHBseShldnRBcnJbaV0uY3R4LGRhdGEpO30KcmV0dXJuIHRoaXM7fSxvZmY6ZnVuY3Rpb24obmFtZSxjYWxsYmFjayl7dmFyIGU9dGhpcy5lfHwodGhpcy5lPXt9KTt2YXIgZXZ0cz1lW25hbWVdO3ZhciBsaXZlRXZlbnRzPVtdO2lmKGV2dHMmJmNhbGxiYWNrKXtmb3IodmFyIGk9MCxsZW49ZXZ0cy5sZW5ndGg7aTxsZW47aSsrKXtpZihldnRzW2ldLmZuIT09Y2FsbGJhY2smJmV2dHNbaV0uZm4uXyE9PWNhbGxiYWNrKQpsaXZlRXZlbnRzLnB1c2goZXZ0c1tpXSk7fX0KKGxpdmVFdmVudHMubGVuZ3RoKT9lW25hbWVdPWxpdmVFdmVudHM6ZGVsZXRlIGVbbmFtZV07cmV0dXJuIHRoaXM7fX07bW9kdWxlLmV4cG9ydHM9RTt9KSwoZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyxfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyhmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7aWYodHJ1ZSl7IShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fPVttb2R1bGUsX193ZWJwYWNrX3JlcXVpcmVfXygwKSxfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLF9fd2VicGFja19yZXF1aXJlX18oMSldLF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXz0oZmFjdG9yeSksX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX189KHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX189PT0nZnVuY3Rpb24nPyhfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cyxfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSk6X19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSxfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyE9PXVuZGVmaW5lZCYmKG1vZHVsZS5leHBvcnRzPV9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7fWVsc2UgaWYodHlwZW9mIGV4cG9ydHMhPT0idW5kZWZpbmVkIil7ZmFjdG9yeShtb2R1bGUscmVxdWlyZSgnLi9jbGlwYm9hcmQtYWN0aW9uJykscmVxdWlyZSgndGlueS1lbWl0dGVyJykscmVxdWlyZSgnZ29vZC1saXN0ZW5lcicpKTt9ZWxzZXt2YXIgbW9kPXtleHBvcnRzOnt9fTtmYWN0b3J5KG1vZCxnbG9iYWwuY2xpcGJvYXJkQWN0aW9uLGdsb2JhbC50aW55RW1pdHRlcixnbG9iYWwuZ29vZExpc3RlbmVyKTtnbG9iYWwuY2xpcGJvYXJkPW1vZC5leHBvcnRzO319KSh0aGlzLGZ1bmN0aW9uKG1vZHVsZSxfY2xpcGJvYXJkQWN0aW9uLF90aW55RW1pdHRlcixfZ29vZExpc3RlbmVyKXsndXNlIHN0cmljdCc7dmFyIF9jbGlwYm9hcmRBY3Rpb24yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsaXBib2FyZEFjdGlvbik7dmFyIF90aW55RW1pdHRlcjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGlueUVtaXR0ZXIpO3ZhciBfZ29vZExpc3RlbmVyMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29kTGlzdGVuZXIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9CnZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09InN5bWJvbCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqO307ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fQp2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fQpyZXR1cm4gZnVuY3Rpb24oQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fTt9KCk7ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZighc2VsZil7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTt9CnJldHVybiBjYWxsJiYodHlwZW9mIGNhbGw9PT0ib2JqZWN0Inx8dHlwZW9mIGNhbGw9PT0iZnVuY3Rpb24iKT9jYWxsOnNlbGY7fQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3Msc3VwZXJDbGFzcyl7aWYodHlwZW9mIHN1cGVyQ2xhc3MhPT0iZnVuY3Rpb24iJiZzdXBlckNsYXNzIT09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBzdXBlckNsYXNzKTt9CnN1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MmJnN1cGVyQ2xhc3MucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6c3ViQ2xhc3MsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX0pO2lmKHN1cGVyQ2xhc3MpT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcyxzdXBlckNsYXNzKTpzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzczt9CnZhciBDbGlwYm9hcmQ9ZnVuY3Rpb24oX0VtaXR0ZXIpe19pbmhlcml0cyhDbGlwYm9hcmQsX0VtaXR0ZXIpO2Z1bmN0aW9uIENsaXBib2FyZCh0cmlnZ2VyLG9wdGlvbnMpe19jbGFzc0NhbGxDaGVjayh0aGlzLENsaXBib2FyZCk7dmFyIF90aGlzPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKENsaXBib2FyZC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihDbGlwYm9hcmQpKS5jYWxsKHRoaXMpKTtfdGhpcy5yZXNvbHZlT3B0aW9ucyhvcHRpb25zKTtfdGhpcy5saXN0ZW5DbGljayh0cmlnZ2VyKTtyZXR1cm4gX3RoaXM7fQpfY3JlYXRlQ2xhc3MoQ2xpcGJvYXJkLFt7a2V5OidyZXNvbHZlT3B0aW9ucycsdmFsdWU6ZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKXt2YXIgb3B0aW9ucz1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMF06e307dGhpcy5hY3Rpb249dHlwZW9mIG9wdGlvbnMuYWN0aW9uPT09J2Z1bmN0aW9uJz9vcHRpb25zLmFjdGlvbjp0aGlzLmRlZmF1bHRBY3Rpb247dGhpcy50YXJnZXQ9dHlwZW9mIG9wdGlvbnMudGFyZ2V0PT09J2Z1bmN0aW9uJz9vcHRpb25zLnRhcmdldDp0aGlzLmRlZmF1bHRUYXJnZXQ7dGhpcy50ZXh0PXR5cGVvZiBvcHRpb25zLnRleHQ9PT0nZnVuY3Rpb24nP29wdGlvbnMudGV4dDp0aGlzLmRlZmF1bHRUZXh0O3RoaXMuY29udGFpbmVyPV90eXBlb2Yob3B0aW9ucy5jb250YWluZXIpPT09J29iamVjdCc/b3B0aW9ucy5jb250YWluZXI6ZG9jdW1lbnQuYm9keTt9fSx7a2V5OidsaXN0ZW5DbGljaycsdmFsdWU6ZnVuY3Rpb24gbGlzdGVuQ2xpY2sodHJpZ2dlcil7dmFyIF90aGlzMj10aGlzO3RoaXMubGlzdGVuZXI9KDAsX2dvb2RMaXN0ZW5lcjIuZGVmYXVsdCkodHJpZ2dlciwnY2xpY2snLGZ1bmN0aW9uKGUpe3JldHVybiBfdGhpczIub25DbGljayhlKTt9KTt9fSx7a2V5OidvbkNsaWNrJyx2YWx1ZTpmdW5jdGlvbiBvbkNsaWNrKGUpe3ZhciB0cmlnZ2VyPWUuZGVsZWdhdGVUYXJnZXR8fGUuY3VycmVudFRhcmdldDtpZih0aGlzLmNsaXBib2FyZEFjdGlvbil7dGhpcy5jbGlwYm9hcmRBY3Rpb249bnVsbDt9CnRoaXMuY2xpcGJvYXJkQWN0aW9uPW5ldyBfY2xpcGJvYXJkQWN0aW9uMi5kZWZhdWx0KHthY3Rpb246dGhpcy5hY3Rpb24odHJpZ2dlciksdGFyZ2V0OnRoaXMudGFyZ2V0KHRyaWdnZXIpLHRleHQ6dGhpcy50ZXh0KHRyaWdnZXIpLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcix0cmlnZ2VyOnRyaWdnZXIsZW1pdHRlcjp0aGlzfSk7fX0se2tleTonZGVmYXVsdEFjdGlvbicsdmFsdWU6ZnVuY3Rpb24gZGVmYXVsdEFjdGlvbih0cmlnZ2VyKXtyZXR1cm4gZ2V0QXR0cmlidXRlVmFsdWUoJ2FjdGlvbicsdHJpZ2dlcik7fX0se2tleTonZGVmYXVsdFRhcmdldCcsdmFsdWU6ZnVuY3Rpb24gZGVmYXVsdFRhcmdldCh0cmlnZ2VyKXt2YXIgc2VsZWN0b3I9Z2V0QXR0cmlidXRlVmFsdWUoJ3RhcmdldCcsdHJpZ2dlcik7aWYoc2VsZWN0b3Ipe3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTt9fX0se2tleTonZGVmYXVsdFRleHQnLHZhbHVlOmZ1bmN0aW9uIGRlZmF1bHRUZXh0KHRyaWdnZXIpe3JldHVybiBnZXRBdHRyaWJ1dGVWYWx1ZSgndGV4dCcsdHJpZ2dlcik7fX0se2tleTonZGVzdHJveScsdmFsdWU6ZnVuY3Rpb24gZGVzdHJveSgpe3RoaXMubGlzdGVuZXIuZGVzdHJveSgpO2lmKHRoaXMuY2xpcGJvYXJkQWN0aW9uKXt0aGlzLmNsaXBib2FyZEFjdGlvbi5kZXN0cm95KCk7dGhpcy5jbGlwYm9hcmRBY3Rpb249bnVsbDt9fX1dLFt7a2V5Oidpc1N1cHBvcnRlZCcsdmFsdWU6ZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKXt2YXIgYWN0aW9uPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTpbJ2NvcHknLCdjdXQnXTt2YXIgYWN0aW9ucz10eXBlb2YgYWN0aW9uPT09J3N0cmluZyc/W2FjdGlvbl06YWN0aW9uO3ZhciBzdXBwb3J0PSEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO2FjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pe3N1cHBvcnQ9c3VwcG9ydCYmISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoYWN0aW9uKTt9KTtyZXR1cm4gc3VwcG9ydDt9fV0pO3JldHVybiBDbGlwYm9hcmQ7fShfdGlueUVtaXR0ZXIyLmRlZmF1bHQpO2Z1bmN0aW9uIGdldEF0dHJpYnV0ZVZhbHVlKHN1ZmZpeCxlbGVtZW50KXt2YXIgYXR0cmlidXRlPSdkYXRhLWNsaXBib2FyZC0nK3N1ZmZpeDtpZighZWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKSl7cmV0dXJuO30KcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7fQptb2R1bGUuZXhwb3J0cz1DbGlwYm9hcmQ7fSk7fSksKGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgRE9DVU1FTlRfTk9ERV9UWVBFPTk7aWYodHlwZW9mIEVsZW1lbnQhPT0ndW5kZWZpbmVkJyYmIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpe3ZhciBwcm90bz1FbGVtZW50LnByb3RvdHlwZTtwcm90by5tYXRjaGVzPXByb3RvLm1hdGNoZXNTZWxlY3Rvcnx8cHJvdG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxwcm90by5tc01hdGNoZXNTZWxlY3Rvcnx8cHJvdG8ub01hdGNoZXNTZWxlY3Rvcnx8cHJvdG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yO30KZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LHNlbGVjdG9yKXt3aGlsZShlbGVtZW50JiZlbGVtZW50Lm5vZGVUeXBlIT09RE9DVU1FTlRfTk9ERV9UWVBFKXtpZih0eXBlb2YgZWxlbWVudC5tYXRjaGVzPT09J2Z1bmN0aW9uJyYmZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSl7cmV0dXJuIGVsZW1lbnQ7fQplbGVtZW50PWVsZW1lbnQucGFyZW50Tm9kZTt9fQptb2R1bGUuZXhwb3J0cz1jbG9zZXN0O30pLChmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY2xvc2VzdD1fX3dlYnBhY2tfcmVxdWlyZV9fKDQpO2Z1bmN0aW9uIF9kZWxlZ2F0ZShlbGVtZW50LHNlbGVjdG9yLHR5cGUsY2FsbGJhY2ssdXNlQ2FwdHVyZSl7dmFyIGxpc3RlbmVyRm49bGlzdGVuZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLGxpc3RlbmVyRm4sdXNlQ2FwdHVyZSk7cmV0dXJue2Rlc3Ryb3k6ZnVuY3Rpb24oKXtlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxsaXN0ZW5lckZuLHVzZUNhcHR1cmUpO319fQpmdW5jdGlvbiBkZWxlZ2F0ZShlbGVtZW50cyxzZWxlY3Rvcix0eXBlLGNhbGxiYWNrLHVzZUNhcHR1cmUpe2lmKHR5cGVvZiBlbGVtZW50cy5hZGRFdmVudExpc3RlbmVyPT09J2Z1bmN0aW9uJyl7cmV0dXJuIF9kZWxlZ2F0ZS5hcHBseShudWxsLGFyZ3VtZW50cyk7fQppZih0eXBlb2YgdHlwZT09PSdmdW5jdGlvbicpe3JldHVybiBfZGVsZWdhdGUuYmluZChudWxsLGRvY3VtZW50KS5hcHBseShudWxsLGFyZ3VtZW50cyk7fQppZih0eXBlb2YgZWxlbWVudHM9PT0nc3RyaW5nJyl7ZWxlbWVudHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7fQpyZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGVsZW1lbnRzLGZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBfZGVsZWdhdGUoZWxlbWVudCxzZWxlY3Rvcix0eXBlLGNhbGxiYWNrLHVzZUNhcHR1cmUpO30pO30KZnVuY3Rpb24gbGlzdGVuZXIoZWxlbWVudCxzZWxlY3Rvcix0eXBlLGNhbGxiYWNrKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5kZWxlZ2F0ZVRhcmdldD1jbG9zZXN0KGUudGFyZ2V0LHNlbGVjdG9yKTtpZihlLmRlbGVnYXRlVGFyZ2V0KXtjYWxsYmFjay5jYWxsKGVsZW1lbnQsZSk7fX19Cm1vZHVsZS5leHBvcnRzPWRlbGVnYXRlO30pLChmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cy5ub2RlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJnZhbHVlLm5vZGVUeXBlPT09MTt9O2V4cG9ydHMubm9kZUxpc3Q9ZnVuY3Rpb24odmFsdWUpe3ZhciB0eXBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7cmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkJiYodHlwZT09PSdbb2JqZWN0IE5vZGVMaXN0XSd8fHR5cGU9PT0nW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nKSYmKCdsZW5ndGgnaW4gdmFsdWUpJiYodmFsdWUubGVuZ3RoPT09MHx8ZXhwb3J0cy5ub2RlKHZhbHVlWzBdKSk7fTtleHBvcnRzLnN0cmluZz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnfHx2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZzt9O2V4cG9ydHMuZm49ZnVuY3Rpb24odmFsdWUpe3ZhciB0eXBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7cmV0dXJuIHR5cGU9PT0nW29iamVjdCBGdW5jdGlvbl0nO307fSksKGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXtmdW5jdGlvbiBzZWxlY3QoZWxlbWVudCl7dmFyIHNlbGVjdGVkVGV4dDtpZihlbGVtZW50Lm5vZGVOYW1lPT09J1NFTEVDVCcpe2VsZW1lbnQuZm9jdXMoKTtzZWxlY3RlZFRleHQ9ZWxlbWVudC52YWx1ZTt9CmVsc2UgaWYoZWxlbWVudC5ub2RlTmFtZT09PSdJTlBVVCd8fGVsZW1lbnQubm9kZU5hbWU9PT0nVEVYVEFSRUEnKXt2YXIgaXNSZWFkT25seT1lbGVtZW50Lmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKTtpZighaXNSZWFkT25seSl7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywnJyk7fQplbGVtZW50LnNlbGVjdCgpO2VsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCxlbGVtZW50LnZhbHVlLmxlbmd0aCk7aWYoIWlzUmVhZE9ubHkpe2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO30Kc2VsZWN0ZWRUZXh0PWVsZW1lbnQudmFsdWU7fQplbHNle2lmKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSl7ZWxlbWVudC5mb2N1cygpO30KdmFyIHNlbGVjdGlvbj13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7dmFyIHJhbmdlPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsZW1lbnQpO3NlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO3NlbGVjdGVkVGV4dD1zZWxlY3Rpb24udG9TdHJpbmcoKTt9CnJldHVybiBzZWxlY3RlZFRleHQ7fQptb2R1bGUuZXhwb3J0cz1zZWxlY3Q7fSldKTt9KTs7CgovKiAvd2ViL3N0YXRpYy9saWIvalNpZ25hdHVyZS9qU2lnbmF0dXJlQ3VzdG9tLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KOyhmdW5jdGlvbigpe3ZhciBhcGluYW1lc3BhY2U9J2pTaWduYXR1cmUnCnZhciBLaWNrVGltZXJDbGFzcz1mdW5jdGlvbih0aW1lLGNhbGxiYWNrKXt2YXIgdGltZXI7dGhpcy5raWNrPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRpbWVyKTt0aW1lcj1zZXRUaW1lb3V0KGNhbGxiYWNrLHRpbWUpO30KdGhpcy5jbGVhcj1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aW1lcik7fQpyZXR1cm4gdGhpczt9CnZhciBQdWJTdWJDbGFzcz1mdW5jdGlvbihjb250ZXh0KXsndXNlIHN0cmljdCcKdGhpcy50b3BpY3M9e307dGhpcy5jb250ZXh0PWNvbnRleHQ/Y29udGV4dDp0aGlzO3RoaXMucHVibGlzaD1mdW5jdGlvbih0b3BpYyxhcmcxLGFyZzIsZXRjKXsndXNlIHN0cmljdCcKaWYodGhpcy50b3BpY3NbdG9waWNdKXt2YXIgY3VycmVudFRvcGljPXRoaXMudG9waWNzW3RvcGljXSxhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSx0b3JlbW92ZT1bXSx0b3J1bj1bXSxmbixpLGwscGFpcjtmb3IoaT0wLGw9Y3VycmVudFRvcGljLmxlbmd0aDtpPGw7aSsrKXtwYWlyPWN1cnJlbnRUb3BpY1tpXTtmbj1wYWlyWzBdO2lmKHBhaXJbMV0pe3BhaXJbMF09ZnVuY3Rpb24oKXt9O3RvcmVtb3ZlLnB1c2goaSk7fQp0b3J1bi5wdXNoKGZuKTt9CmZvcihpPTAsbD10b3JlbW92ZS5sZW5ndGg7aTxsO2krKyl7Y3VycmVudFRvcGljLnNwbGljZSh0b3JlbW92ZVtpXSwxKTt9CmZvcihpPTAsbD10b3J1bi5sZW5ndGg7aTxsO2krKyl7dG9ydW5baV0uYXBwbHkodGhpcy5jb250ZXh0LGFyZ3MpO319fQp0aGlzLnN1YnNjcmliZT1mdW5jdGlvbih0b3BpYyxjYWxsYmFjayxvbmNlKXsndXNlIHN0cmljdCcKaWYoIXRoaXMudG9waWNzW3RvcGljXSl7dGhpcy50b3BpY3NbdG9waWNdPVtbY2FsbGJhY2ssb25jZV1dO31lbHNle3RoaXMudG9waWNzW3RvcGljXS5wdXNoKFtjYWxsYmFjayxvbmNlXSk7fQpyZXR1cm57InRvcGljIjp0b3BpYywiY2FsbGJhY2siOmNhbGxiYWNrfTt9O3RoaXMudW5zdWJzY3JpYmU9ZnVuY3Rpb24odG9rZW4pe2lmKHRoaXMudG9waWNzW3Rva2VuLnRvcGljXSl7dmFyIGN1cnJlbnRUb3BpYz10aGlzLnRvcGljc1t0b2tlbi50b3BpY107Zm9yKHZhciBpPTAsbD1jdXJyZW50VG9waWMubGVuZ3RoO2k8bDtpKyspe2lmKGN1cnJlbnRUb3BpY1tpXSYmY3VycmVudFRvcGljW2ldWzBdPT09dG9rZW4uY2FsbGJhY2spe2N1cnJlbnRUb3BpYy5zcGxpY2UoaSwxKTt9fX19fQpmdW5jdGlvbiBnZXRDb2xvcnMoJGUpe3ZhciB0bXAsdW5kZWYsZnJvbnRjb2xvcj0kZS5jc3MoJ2NvbG9yJyksYmFja2NvbG9yLGU9JGVbMF07dmFyIHRvT2ZET009ZmFsc2U7d2hpbGUoZSYmIWJhY2tjb2xvciYmIXRvT2ZET00pe3RyeXt0bXA9JChlKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTt9Y2F0Y2goZXgpe3RtcD0ndHJhbnNwYXJlbnQnO30KaWYodG1wIT09J3RyYW5zcGFyZW50JyYmdG1wIT09J3JnYmEoMCwgMCwgMCwgMCknKXtiYWNrY29sb3I9dG1wO30KdG9PZkRPTT1lLmJvZHk7ZT1lLnBhcmVudE5vZGU7fQp2YXIgcmdiYXJlZ2V4PS9yZ2JbYV0qXCgoXGQrKSxccyooXGQrKSxccyooXGQrKS8saGV4cmVnZXg9LyMoW0FhQmJDY0RkRWVGZlxkXXsyfSkoW0FhQmJDY0RkRWVGZlxkXXsyfSkoW0FhQmJDY0RkRWVGZlxkXXsyfSkvLGZyb250Y29sb3Jjb21wb25lbnRzO3RtcD11bmRlZjt0bXA9ZnJvbnRjb2xvci5tYXRjaChyZ2JhcmVnZXgpO2lmKHRtcCl7ZnJvbnRjb2xvcmNvbXBvbmVudHM9eydyJzpwYXJzZUludCh0bXBbMV0sMTApLCdnJzpwYXJzZUludCh0bXBbMl0sMTApLCdiJzpwYXJzZUludCh0bXBbM10sMTApfTt9ZWxzZXt0bXA9ZnJvbnRjb2xvci5tYXRjaChoZXhyZWdleCk7aWYodG1wKXtmcm9udGNvbG9yY29tcG9uZW50cz17J3InOnBhcnNlSW50KHRtcFsxXSwxNiksJ2cnOnBhcnNlSW50KHRtcFsyXSwxNiksJ2InOnBhcnNlSW50KHRtcFszXSwxNil9O319CnZhciBiYWNrY29sb3Jjb21wb25lbnRzCmlmKCFiYWNrY29sb3Ipe2lmKGZyb250Y29sb3Jjb21wb25lbnRzKXtpZihNYXRoLm1heC5hcHBseShudWxsLFtmcm9udGNvbG9yY29tcG9uZW50cy5yLGZyb250Y29sb3Jjb21wb25lbnRzLmcsZnJvbnRjb2xvcmNvbXBvbmVudHMuYl0pPjEyNyl7YmFja2NvbG9yY29tcG9uZW50cz17J3InOjAsJ2cnOjAsJ2InOjB9O31lbHNle2JhY2tjb2xvcmNvbXBvbmVudHM9eydyJzoyNTUsJ2cnOjI1NSwnYic6MjU1fTt9fWVsc2V7YmFja2NvbG9yY29tcG9uZW50cz17J3InOjI1NSwnZyc6MjU1LCdiJzoyNTV9O319ZWxzZXt0bXA9dW5kZWY7dG1wPWJhY2tjb2xvci5tYXRjaChyZ2JhcmVnZXgpO2lmKHRtcCl7YmFja2NvbG9yY29tcG9uZW50cz17J3InOnBhcnNlSW50KHRtcFsxXSwxMCksJ2cnOnBhcnNlSW50KHRtcFsyXSwxMCksJ2InOnBhcnNlSW50KHRtcFszXSwxMCl9O31lbHNle3RtcD1iYWNrY29sb3IubWF0Y2goaGV4cmVnZXgpO2lmKHRtcCl7YmFja2NvbG9yY29tcG9uZW50cz17J3InOnBhcnNlSW50KHRtcFsxXSwxNiksJ2cnOnBhcnNlSW50KHRtcFsyXSwxNiksJ2InOnBhcnNlSW50KHRtcFszXSwxNil9O319fQp2YXIgdG9SR0Jmbj1mdW5jdGlvbihvKXtyZXR1cm4ncmdiKCcrW28ucixvLmcsby5iXS5qb2luKCcsICcpKycpJ30sZGVjb3Jjb2xvcmNvbXBvbmVudHMsZnJvbnRjb2xvcmJyaWdodG5lc3MsYWRqdXN0ZWQ7aWYoZnJvbnRjb2xvcmNvbXBvbmVudHMmJmJhY2tjb2xvcmNvbXBvbmVudHMpe3ZhciBiYWNrY29sb3JicmlnaHRuZXNzPU1hdGgubWF4LmFwcGx5KG51bGwsW2Zyb250Y29sb3Jjb21wb25lbnRzLnIsZnJvbnRjb2xvcmNvbXBvbmVudHMuZyxmcm9udGNvbG9yY29tcG9uZW50cy5iXSk7ZnJvbnRjb2xvcmJyaWdodG5lc3M9TWF0aC5tYXguYXBwbHkobnVsbCxbYmFja2NvbG9yY29tcG9uZW50cy5yLGJhY2tjb2xvcmNvbXBvbmVudHMuZyxiYWNrY29sb3Jjb21wb25lbnRzLmJdKTthZGp1c3RlZD1NYXRoLnJvdW5kKGZyb250Y29sb3JicmlnaHRuZXNzKygtMSooZnJvbnRjb2xvcmJyaWdodG5lc3MtYmFja2NvbG9yYnJpZ2h0bmVzcykqMC43NSkpO2RlY29yY29sb3Jjb21wb25lbnRzPXsncic6YWRqdXN0ZWQsJ2cnOmFkanVzdGVkLCdiJzphZGp1c3RlZH07fWVsc2UgaWYoZnJvbnRjb2xvcmNvbXBvbmVudHMpe2Zyb250Y29sb3JicmlnaHRuZXNzPU1hdGgubWF4LmFwcGx5KG51bGwsW2Zyb250Y29sb3Jjb21wb25lbnRzLnIsZnJvbnRjb2xvcmNvbXBvbmVudHMuZyxmcm9udGNvbG9yY29tcG9uZW50cy5iXSk7dmFyIHBvbGFyaXR5PSsxO2lmKGZyb250Y29sb3JicmlnaHRuZXNzPjEyNyl7cG9sYXJpdHk9LTE7fQphZGp1c3RlZD1NYXRoLnJvdW5kKGZyb250Y29sb3JicmlnaHRuZXNzKyhwb2xhcml0eSo5NikpO2RlY29yY29sb3Jjb21wb25lbnRzPXsncic6YWRqdXN0ZWQsJ2cnOmFkanVzdGVkLCdiJzphZGp1c3RlZH07fWVsc2V7ZGVjb3Jjb2xvcmNvbXBvbmVudHM9eydyJzoxOTEsJ2cnOjE5MSwnYic6MTkxfTt9CnJldHVybnsnY29sb3InOmZyb250Y29sb3IsJ2JhY2tncm91bmQtY29sb3InOmJhY2tjb2xvcmNvbXBvbmVudHM/dG9SR0JmbihiYWNrY29sb3Jjb21wb25lbnRzKTpiYWNrY29sb3IsJ2RlY29yLWNvbG9yJzp0b1JHQmZuKGRlY29yY29sb3Jjb21wb25lbnRzKX07fQpmdW5jdGlvbiBWZWN0b3IoeCx5KXt0aGlzLng9eDt0aGlzLnk9eTt0aGlzLnJldmVyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54Ki0xLHRoaXMueSotMSk7fTt0aGlzLl9sZW5ndGg9bnVsbDt0aGlzLmdldExlbmd0aD1mdW5jdGlvbigpe2lmKCF0aGlzLl9sZW5ndGgpe3RoaXMuX2xlbmd0aD1NYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LDIpK01hdGgucG93KHRoaXMueSwyKSk7fQpyZXR1cm4gdGhpcy5fbGVuZ3RoO307dmFyIHBvbGFyaXR5PWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnJvdW5kKGUvTWF0aC5hYnMoZSkpO307dGhpcy5yZXNpemVUbz1mdW5jdGlvbihsZW5ndGgpe2lmKHRoaXMueD09PTAmJnRoaXMueT09PTApe3RoaXMuX2xlbmd0aD0wO31lbHNlIGlmKHRoaXMueD09PTApe3RoaXMuX2xlbmd0aD1sZW5ndGg7dGhpcy55PWxlbmd0aCpwb2xhcml0eSh0aGlzLnkpO31lbHNlIGlmKHRoaXMueT09PTApe3RoaXMuX2xlbmd0aD1sZW5ndGg7dGhpcy54PWxlbmd0aCpwb2xhcml0eSh0aGlzLngpO31lbHNle3ZhciBwcm9wb3J0aW9uPU1hdGguYWJzKHRoaXMueS90aGlzLngpLHg9TWF0aC5zcXJ0KE1hdGgucG93KGxlbmd0aCwyKS8oMStNYXRoLnBvdyhwcm9wb3J0aW9uLDIpKSkseT1wcm9wb3J0aW9uKng7dGhpcy5fbGVuZ3RoPWxlbmd0aDt0aGlzLng9eCpwb2xhcml0eSh0aGlzLngpO3RoaXMueT15KnBvbGFyaXR5KHRoaXMueSk7fQpyZXR1cm4gdGhpczt9O3RoaXMuYW5nbGVUbz1mdW5jdGlvbih2ZWN0b3JCKXt2YXIgZGl2aXNvcj10aGlzLmdldExlbmd0aCgpKnZlY3RvckIuZ2V0TGVuZ3RoKCk7aWYoZGl2aXNvcj09PTApe3JldHVybiAwO31lbHNle3JldHVybiBNYXRoLmFjb3MoTWF0aC5taW4oTWF0aC5tYXgoKHRoaXMueCp2ZWN0b3JCLngrdGhpcy55KnZlY3RvckIueSkvZGl2aXNvciwtMS4wKSwxLjApKS9NYXRoLlBJO319O30KZnVuY3Rpb24gUG9pbnQoeCx5KXt0aGlzLng9eDt0aGlzLnk9eTt0aGlzLmdldFZlY3RvclRvQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oeCx5KXtyZXR1cm4gbmV3IFZlY3Rvcih4LXRoaXMueCx5LXRoaXMueSk7fTt0aGlzLmdldFZlY3RvckZyb21Db29yZGluYXRlcz1mdW5jdGlvbih4LHkpe3JldHVybiB0aGlzLmdldFZlY3RvclRvQ29vcmRpbmF0ZXMoeCx5KS5yZXZlcnNlKCk7fTt0aGlzLmdldFZlY3RvclRvUG9pbnQ9ZnVuY3Rpb24ocG9pbnQpe3JldHVybiBuZXcgVmVjdG9yKHBvaW50LngtdGhpcy54LHBvaW50LnktdGhpcy55KTt9O3RoaXMuZ2V0VmVjdG9yRnJvbVBvaW50PWZ1bmN0aW9uKHBvaW50KXtyZXR1cm4gdGhpcy5nZXRWZWN0b3JUb1BvaW50KHBvaW50KS5yZXZlcnNlKCk7fTt9CmZ1bmN0aW9uIERhdGFFbmdpbmUoc3RvcmFnZU9iamVjdCxjb250ZXh0LHN0YXJ0U3Ryb2tlRm4sYWRkVG9TdHJva2VGbixlbmRTdHJva2VGbil7dGhpcy5kYXRhPXN0b3JhZ2VPYmplY3Q7dGhpcy5jb250ZXh0PWNvbnRleHQ7aWYoc3RvcmFnZU9iamVjdC5sZW5ndGgpe3ZhciBudW1vZnN0cm9rZXM9c3RvcmFnZU9iamVjdC5sZW5ndGgsc3Ryb2tlLG51bW9mcG9pbnRzO2Zvcih2YXIgaT0wO2k8bnVtb2ZzdHJva2VzO2krKyl7c3Ryb2tlPXN0b3JhZ2VPYmplY3RbaV07bnVtb2Zwb2ludHM9c3Ryb2tlLngubGVuZ3RoO3N0YXJ0U3Ryb2tlRm4uY2FsbChjb250ZXh0LHN0cm9rZSk7Zm9yKHZhciBqPTE7ajxudW1vZnBvaW50cztqKyspe2FkZFRvU3Ryb2tlRm4uY2FsbChjb250ZXh0LHN0cm9rZSxqKTt9CmVuZFN0cm9rZUZuLmNhbGwoY29udGV4dCxzdHJva2UpO319CnRoaXMuY2hhbmdlZD1mdW5jdGlvbigpe307dGhpcy5zdGFydFN0cm9rZUZuPXN0YXJ0U3Ryb2tlRm47dGhpcy5hZGRUb1N0cm9rZUZuPWFkZFRvU3Ryb2tlRm47dGhpcy5lbmRTdHJva2VGbj1lbmRTdHJva2VGbjt0aGlzLmluU3Ryb2tlPWZhbHNlO3RoaXMuX2xhc3RQb2ludD1udWxsO3RoaXMuX3N0cm9rZT1udWxsO3RoaXMuc3RhcnRTdHJva2U9ZnVuY3Rpb24ocG9pbnQpe2lmKHBvaW50JiZ0eXBlb2YocG9pbnQueCk9PSJudW1iZXIiJiZ0eXBlb2YocG9pbnQueSk9PSJudW1iZXIiKXt0aGlzLl9zdHJva2U9eyd4JzpbcG9pbnQueF0sJ3knOltwb2ludC55XX07dGhpcy5kYXRhLnB1c2godGhpcy5fc3Ryb2tlKTt0aGlzLl9sYXN0UG9pbnQ9cG9pbnQ7dGhpcy5pblN0cm9rZT10cnVlO3ZhciBzdHJva2U9dGhpcy5fc3Ryb2tlLGZuPXRoaXMuc3RhcnRTdHJva2VGbixjb250ZXh0PXRoaXMuY29udGV4dDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm4uY2FsbChjb250ZXh0LHN0cm9rZSl9LDMpO3JldHVybiBwb2ludDt9ZWxzZXtyZXR1cm4gbnVsbDt9fTt0aGlzLmFkZFRvU3Ryb2tlPWZ1bmN0aW9uKHBvaW50KXtpZih0aGlzLmluU3Ryb2tlJiZ0eXBlb2YocG9pbnQueCk9PT0ibnVtYmVyIiYmdHlwZW9mKHBvaW50LnkpPT09Im51bWJlciImJihNYXRoLmFicyhwb2ludC54LXRoaXMuX2xhc3RQb2ludC54KStNYXRoLmFicyhwb2ludC55LXRoaXMuX2xhc3RQb2ludC55KSk+NCl7dmFyIHBvc2l0aW9uSW5TdHJva2U9dGhpcy5fc3Ryb2tlLngubGVuZ3RoO3RoaXMuX3N0cm9rZS54LnB1c2gocG9pbnQueCk7dGhpcy5fc3Ryb2tlLnkucHVzaChwb2ludC55KTt0aGlzLl9sYXN0UG9pbnQ9cG9pbnQ7dmFyIHN0cm9rZT10aGlzLl9zdHJva2UsZm49dGhpcy5hZGRUb1N0cm9rZUZuLGNvbnRleHQ9dGhpcy5jb250ZXh0O3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmbi5jYWxsKGNvbnRleHQsc3Ryb2tlLHBvc2l0aW9uSW5TdHJva2UpfSwzKTtyZXR1cm4gcG9pbnQ7fWVsc2V7cmV0dXJuIG51bGw7fX07dGhpcy5lbmRTdHJva2U9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmluU3Ryb2tlO3RoaXMuaW5TdHJva2U9ZmFsc2U7dGhpcy5fbGFzdFBvaW50PW51bGw7aWYoYyl7dmFyIHN0cm9rZT10aGlzLl9zdHJva2UsZm49dGhpcy5lbmRTdHJva2VGbixjb250ZXh0PXRoaXMuY29udGV4dCxjaGFuZ2VkZm49dGhpcy5jaGFuZ2VkO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmbi5jYWxsKGNvbnRleHQsc3Ryb2tlKTtjaGFuZ2VkZm4uY2FsbChjb250ZXh0KTt9LDMpO3JldHVybiB0cnVlO31lbHNle3JldHVybiBudWxsO319O30KdmFyIGJhc2ljRG90PWZ1bmN0aW9uKGN0eCx4LHksc2l6ZSl7dmFyIGZpbGxTdHlsZT1jdHguZmlsbFN0eWxlO2N0eC5maWxsU3R5bGU9Y3R4LnN0cm9rZVN0eWxlO2N0eC5maWxsUmVjdCh4K3NpemUvLTIseStzaXplLy0yLHNpemUsc2l6ZSk7Y3R4LmZpbGxTdHlsZT1maWxsU3R5bGU7fSxiYXNpY0xpbmU9ZnVuY3Rpb24oY3R4LHN0YXJ0eCxzdGFydHksZW5keCxlbmR5KXtjdHguYmVnaW5QYXRoKCk7Y3R4Lm1vdmVUbyhzdGFydHgsc3RhcnR5KTtjdHgubGluZVRvKGVuZHgsZW5keSk7Y3R4LmNsb3NlUGF0aCgpO2N0eC5zdHJva2UoKTt9LGJhc2ljQ3VydmU9ZnVuY3Rpb24oY3R4LHN0YXJ0eCxzdGFydHksZW5keCxlbmR5LGNwMXgsY3AxeSxjcDJ4LGNwMnkpe2N0eC5iZWdpblBhdGgoKTtjdHgubW92ZVRvKHN0YXJ0eCxzdGFydHkpO2N0eC5iZXppZXJDdXJ2ZVRvKGNwMXgsY3AxeSxjcDJ4LGNwMnksZW5keCxlbmR5KTtjdHguY2xvc2VQYXRoKCk7Y3R4LnN0cm9rZSgpO30sc3Ryb2tlU3RhcnRDYWxsYmFjaz1mdW5jdGlvbihzdHJva2Upe2Jhc2ljRG90KHRoaXMuY2FudmFzQ29udGV4dCxzdHJva2UueFswXSxzdHJva2UueVswXSx0aGlzLnNldHRpbmdzLmxpbmVXaWR0aCk7fSxzdHJva2VBZGRDYWxsYmFjaz1mdW5jdGlvbihzdHJva2UscG9zaXRpb25JblN0cm9rZSl7dmFyIENwb2ludD1uZXcgUG9pbnQoc3Ryb2tlLnhbcG9zaXRpb25JblN0cm9rZS0xXSxzdHJva2UueVtwb3NpdGlvbkluU3Ryb2tlLTFdKSxEcG9pbnQ9bmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2VdLHN0cm9rZS55W3Bvc2l0aW9uSW5TdHJva2VdKSxDRHZlY3Rvcj1DcG9pbnQuZ2V0VmVjdG9yVG9Qb2ludChEcG9pbnQpO2lmKHBvc2l0aW9uSW5TdHJva2U+MSl7dmFyIEJwb2ludD1uZXcgUG9pbnQoc3Ryb2tlLnhbcG9zaXRpb25JblN0cm9rZS0yXSxzdHJva2UueVtwb3NpdGlvbkluU3Ryb2tlLTJdKSxCQ3ZlY3Rvcj1CcG9pbnQuZ2V0VmVjdG9yVG9Qb2ludChDcG9pbnQpLEFCdmVjdG9yO2lmKEJDdmVjdG9yLmdldExlbmd0aCgpPnRoaXMubGluZUN1cnZlVGhyZXNob2xkKXtpZihwb3NpdGlvbkluU3Ryb2tlPjIpe0FCdmVjdG9yPShuZXcgUG9pbnQoc3Ryb2tlLnhbcG9zaXRpb25JblN0cm9rZS0zXSxzdHJva2UueVtwb3NpdGlvbkluU3Ryb2tlLTNdKSkuZ2V0VmVjdG9yVG9Qb2ludChCcG9pbnQpO31lbHNle0FCdmVjdG9yPW5ldyBWZWN0b3IoMCwwKTt9CnZhciBtaW5sZW5mcmFjdGlvbj0wLjA1LG1heGxlbj1CQ3ZlY3Rvci5nZXRMZW5ndGgoKSowLjM1LEFCQ2FuZ2xlPUJDdmVjdG9yLmFuZ2xlVG8oQUJ2ZWN0b3IucmV2ZXJzZSgpKSxCQ0RhbmdsZT1DRHZlY3Rvci5hbmdsZVRvKEJDdmVjdG9yLnJldmVyc2UoKSksQkNQMXZlY3Rvcj1uZXcgVmVjdG9yKEFCdmVjdG9yLngrQkN2ZWN0b3IueCxBQnZlY3Rvci55K0JDdmVjdG9yLnkpLnJlc2l6ZVRvKE1hdGgubWF4KG1pbmxlbmZyYWN0aW9uLEFCQ2FuZ2xlKSptYXhsZW4pLENDUDJ2ZWN0b3I9KG5ldyBWZWN0b3IoQkN2ZWN0b3IueCtDRHZlY3Rvci54LEJDdmVjdG9yLnkrQ0R2ZWN0b3IueSkpLnJldmVyc2UoKS5yZXNpemVUbyhNYXRoLm1heChtaW5sZW5mcmFjdGlvbixCQ0RhbmdsZSkqbWF4bGVuKTtiYXNpY0N1cnZlKHRoaXMuY2FudmFzQ29udGV4dCxCcG9pbnQueCxCcG9pbnQueSxDcG9pbnQueCxDcG9pbnQueSxCcG9pbnQueCtCQ1AxdmVjdG9yLngsQnBvaW50LnkrQkNQMXZlY3Rvci55LENwb2ludC54K0NDUDJ2ZWN0b3IueCxDcG9pbnQueStDQ1AydmVjdG9yLnkpO319CmlmKENEdmVjdG9yLmdldExlbmd0aCgpPD10aGlzLmxpbmVDdXJ2ZVRocmVzaG9sZCl7YmFzaWNMaW5lKHRoaXMuY2FudmFzQ29udGV4dCxDcG9pbnQueCxDcG9pbnQueSxEcG9pbnQueCxEcG9pbnQueSk7fX0sc3Ryb2tlRW5kQ2FsbGJhY2s9ZnVuY3Rpb24oc3Ryb2tlKXt2YXIgcG9zaXRpb25JblN0cm9rZT1zdHJva2UueC5sZW5ndGgtMTtpZihwb3NpdGlvbkluU3Ryb2tlPjApe3ZhciBDcG9pbnQ9bmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2VdLHN0cm9rZS55W3Bvc2l0aW9uSW5TdHJva2VdKSxCcG9pbnQ9bmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2UtMV0sc3Ryb2tlLnlbcG9zaXRpb25JblN0cm9rZS0xXSksQkN2ZWN0b3I9QnBvaW50LmdldFZlY3RvclRvUG9pbnQoQ3BvaW50KSxBQnZlY3RvcjtpZihCQ3ZlY3Rvci5nZXRMZW5ndGgoKT50aGlzLmxpbmVDdXJ2ZVRocmVzaG9sZCl7aWYocG9zaXRpb25JblN0cm9rZT4xKXtBQnZlY3Rvcj0obmV3IFBvaW50KHN0cm9rZS54W3Bvc2l0aW9uSW5TdHJva2UtMl0sc3Ryb2tlLnlbcG9zaXRpb25JblN0cm9rZS0yXSkpLmdldFZlY3RvclRvUG9pbnQoQnBvaW50KTt2YXIgQkNQMXZlY3Rvcj1uZXcgVmVjdG9yKEFCdmVjdG9yLngrQkN2ZWN0b3IueCxBQnZlY3Rvci55K0JDdmVjdG9yLnkpLnJlc2l6ZVRvKEJDdmVjdG9yLmdldExlbmd0aCgpLzIpO2Jhc2ljQ3VydmUodGhpcy5jYW52YXNDb250ZXh0LEJwb2ludC54LEJwb2ludC55LENwb2ludC54LENwb2ludC55LEJwb2ludC54K0JDUDF2ZWN0b3IueCxCcG9pbnQueStCQ1AxdmVjdG9yLnksQ3BvaW50LngsQ3BvaW50LnkpO31lbHNle2Jhc2ljTGluZSh0aGlzLmNhbnZhc0NvbnRleHQsQnBvaW50LngsQnBvaW50LnksQ3BvaW50LngsQ3BvaW50LnkpO319fX0KZnVuY3Rpb24gY29uZGl0aW9uYWxseUxpbmtDYW52YXNSZXNpemVUb1dpbmRvd1Jlc2l6ZShqU2lnbmF0dXJlSW5zdGFuY2Usc2V0dGluZ3NXaWR0aCxhcGluYW1lc3BhY2UsZ2xvYmFsRXZlbnRzKXsndXNlIHN0cmljdCcKaWYoc2V0dGluZ3NXaWR0aD09PSdyYXRpbyd8fHNldHRpbmdzV2lkdGguc3BsaXQoJycpW3NldHRpbmdzV2lkdGgubGVuZ3RoLTFdPT09JyUnKXt0aGlzLmV2ZW50VG9rZW5zW2FwaW5hbWVzcGFjZSsnLnBhcmVudHJlc2l6ZWQnXT1nbG9iYWxFdmVudHMuc3Vic2NyaWJlKGFwaW5hbWVzcGFjZSsnLnBhcmVudHJlc2l6ZWQnLChmdW5jdGlvbihldmVudFRva2VucywkcGFyZW50LG9yaWdpbmFsUGFyZW50V2lkdGgsc2l6ZVJhdGlvKXsndXNlIHN0cmljdCcKcmV0dXJuIGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnCnZhciB3PSRwYXJlbnQud2lkdGgoKTtpZih3IT09b3JpZ2luYWxQYXJlbnRXaWR0aCl7Zm9yKHZhciBrZXkgaW4gZXZlbnRUb2tlbnMpe2lmKGV2ZW50VG9rZW5zLmhhc093blByb3BlcnR5KGtleSkpe2dsb2JhbEV2ZW50cy51bnN1YnNjcmliZShldmVudFRva2Vuc1trZXldKTtkZWxldGUgZXZlbnRUb2tlbnNba2V5XTt9fQp2YXIgc2V0dGluZ3M9alNpZ25hdHVyZUluc3RhbmNlLnNldHRpbmdzO2pTaWduYXR1cmVJbnN0YW5jZS4kcGFyZW50LmNoaWxkcmVuKCkucmVtb3ZlKCk7Zm9yKHZhciBrZXkgaW4galNpZ25hdHVyZUluc3RhbmNlKXtpZihqU2lnbmF0dXJlSW5zdGFuY2UuaGFzT3duUHJvcGVydHkoa2V5KSl7ZGVsZXRlIGpTaWduYXR1cmVJbnN0YW5jZVtrZXldO319CnNldHRpbmdzLmRhdGE9KGZ1bmN0aW9uKGRhdGEsc2NhbGUpe3ZhciBuZXdEYXRhPVtdO3ZhciBvLGksbCxqLG0sc3Ryb2tlO2ZvcihpPTAsbD1kYXRhLmxlbmd0aDtpPGw7aSsrKXtzdHJva2U9ZGF0YVtpXTtvPXsneCc6W10sJ3knOltdfTtmb3Ioaj0wLG09c3Ryb2tlLngubGVuZ3RoO2o8bTtqKyspe28ueC5wdXNoKHN0cm9rZS54W2pdKnNjYWxlKTtvLnkucHVzaChzdHJva2UueVtqXSpzY2FsZSk7fQpuZXdEYXRhLnB1c2gobyk7fQpyZXR1cm4gbmV3RGF0YTt9KShzZXR0aW5ncy5kYXRhLHcqMS4wL29yaWdpbmFsUGFyZW50V2lkdGgpCiRwYXJlbnRbYXBpbmFtZXNwYWNlXShzZXR0aW5ncyk7fX19KSh0aGlzLmV2ZW50VG9rZW5zLHRoaXMuJHBhcmVudCx0aGlzLiRwYXJlbnQud2lkdGgoKSx0aGlzLmNhbnZhcy53aWR0aCoxLjAvdGhpcy5jYW52YXMuaGVpZ2h0KSl9fTtmdW5jdGlvbiBqU2lnbmF0dXJlQ2xhc3MocGFyZW50LG9wdGlvbnMsaW5zdGFuY2VFeHRlbnNpb25zKXt2YXIgJHBhcmVudD10aGlzLiRwYXJlbnQ9JChwYXJlbnQpLGV2ZW50VG9rZW5zPXRoaXMuZXZlbnRUb2tlbnM9e30sZXZlbnRzPXRoaXMuZXZlbnRzPW5ldyBQdWJTdWJDbGFzcyh0aGlzKSxnbG9iYWxFdmVudHM9JC5mblthcGluYW1lc3BhY2VdKCdnbG9iYWxFdmVudHMnKSxzZXR0aW5ncz17J3dpZHRoJzoncmF0aW8nLCdoZWlnaHQnOidyYXRpbycsJ3NpemVSYXRpbyc6NCwnY29sb3InOicjMDAwJywnYmFja2dyb3VuZC1jb2xvcic6JyNmZmYnLCdkZWNvci1jb2xvcic6JyNlZWUnLCdsaW5lV2lkdGgnOjAsJ21pbkZhdEZpbmdlckNvbXBlbnNhdGlvbic6LTEwLCdzaG93VW5kb0J1dHRvbic6ZmFsc2UsJ3JlYWRPbmx5JzpmYWxzZSwnZGF0YSc6W119OyQuZXh0ZW5kKHNldHRpbmdzLGdldENvbG9ycygkcGFyZW50KSk7aWYob3B0aW9ucyl7JC5leHRlbmQoc2V0dGluZ3Msb3B0aW9ucyk7fQp0aGlzLnNldHRpbmdzPXNldHRpbmdzO2Zvcih2YXIgZXh0ZW5zaW9uTmFtZSBpbiBpbnN0YW5jZUV4dGVuc2lvbnMpe2lmKGluc3RhbmNlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShleHRlbnNpb25OYW1lKSl7aW5zdGFuY2VFeHRlbnNpb25zW2V4dGVuc2lvbk5hbWVdLmNhbGwodGhpcyxleHRlbnNpb25OYW1lKTt9fQp0aGlzLmV2ZW50cy5wdWJsaXNoKGFwaW5hbWVzcGFjZSsnLmluaXRpYWxpemluZycpO3RoaXMuJGNvbnRyb2xiYXJVcHBlcj0oZnVuY3Rpb24oKXt2YXIgY29udHJvbGJhcnN0eWxlPSdwYWRkaW5nOjAgIWltcG9ydGFudDsgbWFyZ2luOjAgIWltcG9ydGFudDsnKyd3aWR0aDogMTAwJSAhaW1wb3J0YW50OyBoZWlnaHQ6IDAgIWltcG9ydGFudDsgLW1zLXRvdWNoLWFjdGlvbjogbm9uZTsgdG91Y2gtYWN0aW9uOiBub25lOycrJ21hcmdpbi10b3A6LTFlbSAhaW1wb3J0YW50OyBtYXJnaW4tYm90dG9tOjFlbSAhaW1wb3J0YW50Oyc7cmV0dXJuICQoJzxkaXYgc3R5bGU9IicrY29udHJvbGJhcnN0eWxlKyciPjwvZGl2PicpLmFwcGVuZFRvKCRwYXJlbnQpO30pKCk7dGhpcy5pc0NhbnZhc0VtdWxhdG9yPWZhbHNlO3ZhciBjYW52YXM9dGhpcy5jYW52YXM9dGhpcy5pbml0aWFsaXplQ2FudmFzKHNldHRpbmdzKSwkY2FudmFzPSQoY2FudmFzKTt0aGlzLiRjb250cm9sYmFyTG93ZXI9KGZ1bmN0aW9uKCl7dmFyIGNvbnRyb2xiYXJzdHlsZT0ncGFkZGluZzowICFpbXBvcnRhbnQ7IG1hcmdpbjowICFpbXBvcnRhbnQ7Jysnd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgaGVpZ2h0OiAwICFpbXBvcnRhbnQ7IC1tcy10b3VjaC1hY3Rpb246IG5vbmU7IHRvdWNoLWFjdGlvbjogbm9uZTsnKydtYXJnaW4tdG9wOi0xLjVlbSAhaW1wb3J0YW50OyBtYXJnaW4tYm90dG9tOjEuNWVtICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsnO3JldHVybiAkKCc8ZGl2IHN0eWxlPSInK2NvbnRyb2xiYXJzdHlsZSsnIj48L2Rpdj4nKS5hcHBlbmRUbygkcGFyZW50KTt9KSgpO3RoaXMuY2FudmFzQ29udGV4dD1jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTskY2FudmFzLmRhdGEoYXBpbmFtZXNwYWNlKycudGhpcycsdGhpcyk7c2V0dGluZ3MubGluZVdpZHRoPShmdW5jdGlvbihkZWZhdWx0TGluZVdpZHRoLGNhbnZhc1dpZHRoKXtpZighZGVmYXVsdExpbmVXaWR0aCl7cmV0dXJuIE1hdGgubWF4KE1hdGgucm91bmQoY2FudmFzV2lkdGgvNDAwKSwyKTt9ZWxzZXtyZXR1cm4gZGVmYXVsdExpbmVXaWR0aDt9fSkoc2V0dGluZ3MubGluZVdpZHRoLGNhbnZhcy53aWR0aCk7dGhpcy5saW5lQ3VydmVUaHJlc2hvbGQ9c2V0dGluZ3MubGluZVdpZHRoKjM7aWYoc2V0dGluZ3MuY3NzY2xhc3MmJiQudHJpbShzZXR0aW5ncy5jc3NjbGFzcykhPSIiKXskY2FudmFzLmFkZENsYXNzKHNldHRpbmdzLmNzc2NsYXNzKTt9CnRoaXMuZmF0RmluZ2VyQ29tcGVuc2F0aW9uPTA7dmFyIG1vdmVtZW50SGFuZGxlcnM9KGZ1bmN0aW9uKGpTaWduYXR1cmVJbnN0YW5jZSl7dmFyIHNoaWZ0WCxzaGlmdFksc2V0U3RhcnRWYWx1ZXM9ZnVuY3Rpb24oKXt2YXIgdG9zPSQoalNpZ25hdHVyZUluc3RhbmNlLmNhbnZhcykub2Zmc2V0KCkKc2hpZnRYPXRvcy5sZWZ0Ki0xCnNoaWZ0WT10b3MudG9wKi0xfSxnZXRQb2ludEZyb21FdmVudD1mdW5jdGlvbihlKXt2YXIgZmlyc3RFdmVudD0oZS5jaGFuZ2VkVG91Y2hlcyYmZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg+MD9lLmNoYW5nZWRUb3VjaGVzWzBdOmUpO3JldHVybiBuZXcgUG9pbnQoTWF0aC5yb3VuZChmaXJzdEV2ZW50LnBhZ2VYK3NoaWZ0WCksTWF0aC5yb3VuZChmaXJzdEV2ZW50LnBhZ2VZK3NoaWZ0WSkralNpZ25hdHVyZUluc3RhbmNlLmZhdEZpbmdlckNvbXBlbnNhdGlvbik7fSx0aW1lcj1uZXcgS2lja1RpbWVyQ2xhc3MoNzUwLGZ1bmN0aW9uKCl7alNpZ25hdHVyZUluc3RhbmNlLmRhdGFFbmdpbmUuZW5kU3Ryb2tlKCk7fSk7dGhpcy5kcmF3RW5kSGFuZGxlcj1mdW5jdGlvbihlKXtpZighalNpZ25hdHVyZUluc3RhbmNlLnNldHRpbmdzLnJlYWRPbmx5KXt0cnl7ZS5wcmV2ZW50RGVmYXVsdCgpO31jYXRjaChleCl7fQp0aW1lci5jbGVhcigpO2pTaWduYXR1cmVJbnN0YW5jZS5kYXRhRW5naW5lLmVuZFN0cm9rZSgpO319O3RoaXMuZHJhd1N0YXJ0SGFuZGxlcj1mdW5jdGlvbihlKXtpZighalNpZ25hdHVyZUluc3RhbmNlLnNldHRpbmdzLnJlYWRPbmx5KXtlLnByZXZlbnREZWZhdWx0KCk7c2V0U3RhcnRWYWx1ZXMoKTtqU2lnbmF0dXJlSW5zdGFuY2UuZGF0YUVuZ2luZS5zdGFydFN0cm9rZShnZXRQb2ludEZyb21FdmVudChlKSk7dGltZXIua2ljaygpO319O3RoaXMuZHJhd01vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpe2lmKCFqU2lnbmF0dXJlSW5zdGFuY2Uuc2V0dGluZ3MucmVhZE9ubHkpe2UucHJldmVudERlZmF1bHQoKTtpZighalNpZ25hdHVyZUluc3RhbmNlLmRhdGFFbmdpbmUuaW5TdHJva2Upe3JldHVybjt9CmpTaWduYXR1cmVJbnN0YW5jZS5kYXRhRW5naW5lLmFkZFRvU3Ryb2tlKGdldFBvaW50RnJvbUV2ZW50KGUpKTt0aW1lci5raWNrKCk7fX07cmV0dXJuIHRoaXM7fSkuY2FsbCh7fSx0aGlzKTsoZnVuY3Rpb24oZHJhd0VuZEhhbmRsZXIsZHJhd1N0YXJ0SGFuZGxlcixkcmF3TW92ZUhhbmRsZXIpe3ZhciBjYW52YXM9dGhpcy5jYW52YXMsJGNhbnZhcz0kKGNhbnZhcyksdW5kZWY7aWYodGhpcy5pc0NhbnZhc0VtdWxhdG9yKXskY2FudmFzLmJpbmQoJ21vdXNlbW92ZS4nK2FwaW5hbWVzcGFjZSxkcmF3TW92ZUhhbmRsZXIpOyRjYW52YXMuYmluZCgnbW91c2V1cC4nK2FwaW5hbWVzcGFjZSxkcmF3RW5kSGFuZGxlcik7JGNhbnZhcy5iaW5kKCdtb3VzZWRvd24uJythcGluYW1lc3BhY2UsZHJhd1N0YXJ0SGFuZGxlcik7fWVsc2V7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLGZ1bmN0aW9uKGUpe2NhbnZhcy5vbm1vdXNlZG93bj1jYW52YXMub25tb3VzZXVwPWNhbnZhcy5vbm1vdXNlbW92ZT11bmRlZjt0aGlzLmZhdEZpbmdlckNvbXBlbnNhdGlvbj0oc2V0dGluZ3MubWluRmF0RmluZ2VyQ29tcGVuc2F0aW9uJiZzZXR0aW5ncy5saW5lV2lkdGgqLTM+c2V0dGluZ3MubWluRmF0RmluZ2VyQ29tcGVuc2F0aW9uKT9zZXR0aW5ncy5saW5lV2lkdGgqLTM6c2V0dGluZ3MubWluRmF0RmluZ2VyQ29tcGVuc2F0aW9uO2RyYXdTdGFydEhhbmRsZXIoZSk7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyxkcmF3RW5kSGFuZGxlcik7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLGRyYXdTdGFydEhhbmRsZXIpO2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLGRyYXdNb3ZlSGFuZGxlcik7fSk7Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZnVuY3Rpb24oZSl7Y2FudmFzLm9udG91Y2hzdGFydD1jYW52YXMub250b3VjaGVuZD1jYW52YXMub250b3VjaG1vdmU9dW5kZWY7ZHJhd1N0YXJ0SGFuZGxlcihlKTtjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxkcmF3U3RhcnRIYW5kbGVyKTtjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsZHJhd0VuZEhhbmRsZXIpO2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLGRyYXdNb3ZlSGFuZGxlcik7fSk7aWYod2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXtjYW52YXMub25tc3BvaW50ZXJkb3duPWRyYXdTdGFydEhhbmRsZXI7Y2FudmFzLm9ubXNwb2ludGVydXA9ZHJhd0VuZEhhbmRsZXI7Y2FudmFzLm9ubXNwb2ludGVybW92ZT1kcmF3TW92ZUhhbmRsZXI7fX19KS5jYWxsKHRoaXMsbW92ZW1lbnRIYW5kbGVycy5kcmF3RW5kSGFuZGxlcixtb3ZlbWVudEhhbmRsZXJzLmRyYXdTdGFydEhhbmRsZXIsbW92ZW1lbnRIYW5kbGVycy5kcmF3TW92ZUhhbmRsZXIpCmV2ZW50VG9rZW5zW2FwaW5hbWVzcGFjZSsnLndpbmRvd21vdXNldXAnXT1nbG9iYWxFdmVudHMuc3Vic2NyaWJlKGFwaW5hbWVzcGFjZSsnLndpbmRvd21vdXNldXAnLG1vdmVtZW50SGFuZGxlcnMuZHJhd0VuZEhhbmRsZXIpO3RoaXMuZXZlbnRzLnB1Ymxpc2goYXBpbmFtZXNwYWNlKycuYXR0YWNoaW5nRXZlbnRIYW5kbGVycycpO2NvbmRpdGlvbmFsbHlMaW5rQ2FudmFzUmVzaXplVG9XaW5kb3dSZXNpemUuY2FsbCh0aGlzLHRoaXMsc2V0dGluZ3Mud2lkdGgudG9TdHJpbmcoMTApLGFwaW5hbWVzcGFjZSxnbG9iYWxFdmVudHMpO3RoaXMucmVzZXRDYW52YXMoc2V0dGluZ3MuZGF0YSk7dGhpcy5ldmVudHMucHVibGlzaChhcGluYW1lc3BhY2UrJy5pbml0aWFsaXplZCcpO3JldHVybiB0aGlzO30KalNpZ25hdHVyZUNsYXNzLnByb3RvdHlwZS5yZXNldENhbnZhcz1mdW5jdGlvbihkYXRhLGRvbnRDbGVhcil7dmFyIGNhbnZhcz10aGlzLmNhbnZhcyxzZXR0aW5ncz10aGlzLnNldHRpbmdzLGN0eD10aGlzLmNhbnZhc0NvbnRleHQsaXNDYW52YXNFbXVsYXRvcj10aGlzLmlzQ2FudmFzRW11bGF0b3IsY3c9Y2FudmFzLndpZHRoLGNoPWNhbnZhcy5oZWlnaHQ7aWYoIWRvbnRDbGVhcil7Y3R4LmNsZWFyUmVjdCgwLDAsY3crMzAsY2grMzApO30KY3R4LnNoYWRvd0NvbG9yPWN0eC5maWxsU3R5bGU9c2V0dGluZ3NbJ2JhY2tncm91bmQtY29sb3InXQppZihpc0NhbnZhc0VtdWxhdG9yKXtjdHguZmlsbFJlY3QoMCwwLGN3KzMwLGNoKzMwKTt9CmN0eC5saW5lV2lkdGg9TWF0aC5jZWlsKHBhcnNlSW50KHNldHRpbmdzLmxpbmVXaWR0aCwxMCkpO2N0eC5saW5lQ2FwPWN0eC5saW5lSm9pbj0icm91bmQiO2lmKG51bGwhPXNldHRpbmdzWydkZWNvci1jb2xvciddKXtjdHguc3Ryb2tlU3R5bGU9c2V0dGluZ3NbJ2RlY29yLWNvbG9yJ107Y3R4LnNoYWRvd09mZnNldFg9MDtjdHguc2hhZG93T2Zmc2V0WT0wO3ZhciBsaW5lb2Zmc2V0PU1hdGgucm91bmQoY2gvNSk7YmFzaWNMaW5lKGN0eCxsaW5lb2Zmc2V0KjEuNSxjaC1saW5lb2Zmc2V0LGN3LShsaW5lb2Zmc2V0KjEuNSksY2gtbGluZW9mZnNldCk7fQpjdHguc3Ryb2tlU3R5bGU9c2V0dGluZ3MuY29sb3I7aWYoIWlzQ2FudmFzRW11bGF0b3Ipe2N0eC5zaGFkb3dDb2xvcj1jdHguc3Ryb2tlU3R5bGU7Y3R4LnNoYWRvd09mZnNldFg9Y3R4LmxpbmVXaWR0aCowLjU7Y3R4LnNoYWRvd09mZnNldFk9Y3R4LmxpbmVXaWR0aCotMC42O2N0eC5zaGFkb3dCbHVyPTA7fQppZighZGF0YSl7ZGF0YT1bXTt9CnZhciBkYXRhRW5naW5lPXRoaXMuZGF0YUVuZ2luZT1uZXcgRGF0YUVuZ2luZShkYXRhLHRoaXMsc3Ryb2tlU3RhcnRDYWxsYmFjayxzdHJva2VBZGRDYWxsYmFjayxzdHJva2VFbmRDYWxsYmFjayk7c2V0dGluZ3MuZGF0YT1kYXRhOyQoY2FudmFzKS5kYXRhKGFwaW5hbWVzcGFjZSsnLmRhdGEnLGRhdGEpLmRhdGEoYXBpbmFtZXNwYWNlKycuc2V0dGluZ3MnLHNldHRpbmdzKTtkYXRhRW5naW5lLmNoYW5nZWQ9KGZ1bmN0aW9uKHRhcmdldCxldmVudHMsYXBpbmFtZXNwYWNlKXsndXNlIHN0cmljdCcKcmV0dXJuIGZ1bmN0aW9uKCl7ZXZlbnRzLnB1Ymxpc2goYXBpbmFtZXNwYWNlKycuY2hhbmdlJyk7dGFyZ2V0LnRyaWdnZXIoJ2NoYW5nZScpO319KSh0aGlzLiRwYXJlbnQsdGhpcy5ldmVudHMsYXBpbmFtZXNwYWNlKTtkYXRhRW5naW5lLmNoYW5nZWQoKTtyZXR1cm4gdHJ1ZTt9O2Z1bmN0aW9uIGluaXRpYWxpemVDYW52YXNFbXVsYXRvcihjYW52YXMpe2lmKGNhbnZhcy5nZXRDb250ZXh0KXtyZXR1cm4gZmFsc2U7fWVsc2V7dmFyIHdpbmRvdz1jYW52YXMub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3c7dmFyIEZDPXdpbmRvdy5GbGFzaENhbnZhcz9jYW52YXMub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cuRmxhc2hDYW52YXM6KHR5cGVvZiBGbGFzaENhbnZhcz09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpGbGFzaENhbnZhcyk7aWYoRkMpe2NhbnZhcz1GQy5pbml0RWxlbWVudChjYW52YXMpO3ZhciB6b29tPTE7aWYod2luZG93JiZ3aW5kb3cuc2NyZWVuJiZ3aW5kb3cuc2NyZWVuLmRldmljZVhEUEkmJndpbmRvdy5zY3JlZW4ubG9naWNhbFhEUEkpe3pvb209d2luZG93LnNjcmVlbi5kZXZpY2VYRFBJKjEuMC93aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJO30KaWYoem9vbSE9PTEpe3RyeXskKGNhbnZhcykuY2hpbGRyZW4oJ29iamVjdCcpLmdldCgwKS5yZXNpemUoTWF0aC5jZWlsKGNhbnZhcy53aWR0aCp6b29tKSxNYXRoLmNlaWwoY2FudmFzLmhlaWdodCp6b29tKSk7Y2FudmFzLmdldENvbnRleHQoJzJkJykuc2NhbGUoem9vbSx6b29tKTt9Y2F0Y2goZXgpe319CnJldHVybiB0cnVlO31lbHNle3Rocm93IG5ldyBFcnJvcigiQ2FudmFzIGVsZW1lbnQgZG9lcyBub3Qgc3VwcG9ydCAyZCBjb250ZXh0LiBqU2lnbmF0dXJlIGNhbm5vdCBwcm9jZWVkLiIpO319fQpqU2lnbmF0dXJlQ2xhc3MucHJvdG90eXBlLmluaXRpYWxpemVDYW52YXM9ZnVuY3Rpb24oc2V0dGluZ3Mpe3ZhciBjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksJGNhbnZhcz0kKGNhbnZhcyk7aWYoc2V0dGluZ3Mud2lkdGg9PT1zZXR0aW5ncy5oZWlnaHQmJnNldHRpbmdzLmhlaWdodD09PSdyYXRpbycpe3NldHRpbmdzLndpZHRoPScxMDAlJzt9CiRjYW52YXMuY3NzKHsnbWFyZ2luJzowLCdwYWRkaW5nJzowLCdib3JkZXInOidub25lJywnaGVpZ2h0JzpzZXR0aW5ncy5oZWlnaHQ9PT0ncmF0aW8nfHwhc2V0dGluZ3MuaGVpZ2h0PzE6c2V0dGluZ3MuaGVpZ2h0LnRvU3RyaW5nKDEwKSwnd2lkdGgnOnNldHRpbmdzLndpZHRoPT09J3JhdGlvJ3x8IXNldHRpbmdzLndpZHRoPzE6c2V0dGluZ3Mud2lkdGgudG9TdHJpbmcoMTApLCctbXMtdG91Y2gtYWN0aW9uJzonbm9uZScsJ3RvdWNoLWFjdGlvbic6J25vbmUnLCdiYWNrZ3JvdW5kLWNvbG9yJzpzZXR0aW5nc1snYmFja2dyb3VuZC1jb2xvciddLH0pOyRjYW52YXMuYXBwZW5kVG8odGhpcy4kcGFyZW50KTtpZihzZXR0aW5ncy5oZWlnaHQ9PT0ncmF0aW8nKXskY2FudmFzLmNzcygnaGVpZ2h0JyxNYXRoLnJvdW5kKCRjYW52YXMud2lkdGgoKS9zZXR0aW5ncy5zaXplUmF0aW8pKTt9ZWxzZSBpZihzZXR0aW5ncy53aWR0aD09PSdyYXRpbycpeyRjYW52YXMuY3NzKCd3aWR0aCcsTWF0aC5yb3VuZCgkY2FudmFzLmhlaWdodCgpKnNldHRpbmdzLnNpemVSYXRpbykpO30KJGNhbnZhcy5hZGRDbGFzcyhhcGluYW1lc3BhY2UpO2NhbnZhcy53aWR0aD0kY2FudmFzLndpZHRoKCk7Y2FudmFzLmhlaWdodD0kY2FudmFzLmhlaWdodCgpO3RoaXMuaXNDYW52YXNFbXVsYXRvcj1pbml0aWFsaXplQ2FudmFzRW11bGF0b3IoY2FudmFzKTtjYW52YXMub25zZWxlY3RzdGFydD1mdW5jdGlvbihlKXtpZihlJiZlLnByZXZlbnREZWZhdWx0KXtlLnByZXZlbnREZWZhdWx0KCl9O2lmKGUmJmUuc3RvcFByb3BhZ2F0aW9uKXtlLnN0b3BQcm9wYWdhdGlvbigpfTtyZXR1cm4gZmFsc2U7fTtyZXR1cm4gY2FudmFzO30KdmFyIEdsb2JhbEpTaWduYXR1cmVPYmplY3RJbml0aWFsaXplcj1mdW5jdGlvbih3aW5kb3cpe3ZhciBnbG9iYWxFdmVudHM9bmV3IFB1YlN1YkNsYXNzKCk7OyhmdW5jdGlvbihnbG9iYWxFdmVudHMsYXBpbmFtZXNwYWNlLCQsd2luZG93KXsndXNlIHN0cmljdCcKdmFyIHJlc2l6ZXRpbWVyLHJ1bm5lcj1mdW5jdGlvbigpe2dsb2JhbEV2ZW50cy5wdWJsaXNoKGFwaW5hbWVzcGFjZSsnLnBhcmVudHJlc2l6ZWQnKX07JCh3aW5kb3cpLmJpbmQoJ3Jlc2l6ZS4nK2FwaW5hbWVzcGFjZSxmdW5jdGlvbigpe2lmKHJlc2l6ZXRpbWVyKXtjbGVhclRpbWVvdXQocmVzaXpldGltZXIpO30KcmVzaXpldGltZXI9c2V0VGltZW91dChydW5uZXIsNTAwKTt9KS5iaW5kKCdtb3VzZXVwLicrYXBpbmFtZXNwYWNlLGZ1bmN0aW9uKGUpe2dsb2JhbEV2ZW50cy5wdWJsaXNoKGFwaW5hbWVzcGFjZSsnLndpbmRvd21vdXNldXAnKX0pO30pKGdsb2JhbEV2ZW50cyxhcGluYW1lc3BhY2UsJCx3aW5kb3cpCnZhciBqU2lnbmF0dXJlSW5zdGFuY2VFeHRlbnNpb25zPXt9O3ZhciBleHBvcnRwbHVnaW5zPXsnZGVmYXVsdCc6ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIHRoaXMudG9EYXRhVVJMKCl9LCduYXRpdmUnOmZ1bmN0aW9uKGRhdGEpe3JldHVybiBkYXRhfSwnaW1hZ2UnOmZ1bmN0aW9uKGRhdGEpe3ZhciBpbWFnZXN0cmluZz10aGlzLnRvRGF0YVVSTCgpO2lmKHR5cGVvZiBpbWFnZXN0cmluZz09PSdzdHJpbmcnJiZpbWFnZXN0cmluZy5sZW5ndGg+NCYmaW1hZ2VzdHJpbmcuc2xpY2UoMCw1KT09PSdkYXRhOicmJmltYWdlc3RyaW5nLmluZGV4T2YoJywnKSE9PS0xKXt2YXIgc3BsaXR0ZXJwb3M9aW1hZ2VzdHJpbmcuaW5kZXhPZignLCcpO3JldHVybltpbWFnZXN0cmluZy5zbGljZSg1LHNwbGl0dGVycG9zKSxpbWFnZXN0cmluZy5zdWJzdHIoc3BsaXR0ZXJwb3MrMSldO30KcmV0dXJuW107fX07ZnVuY3Rpb24gX3JlbmRlckltYWdlT25DYW52YXMoZGF0YSxmb3JtYXR0eXBlLHJlcmVuZGVyY2FsbGFibGUpeyd1c2Ugc3RyaWN0Jwp2YXIgaW1nPW5ldyBJbWFnZSgpLGM9dGhpcztpbWcub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGN0eD1jLmdldENvbnRleHQoIjJkIik7dmFyIG9sZFNoYWRvd0NvbG9yPWN0eC5zaGFkb3dDb2xvcjtjdHguc2hhZG93Q29sb3I9InRyYW5zcGFyZW50IjtjdHguZHJhd0ltYWdlKGltZywwLDAsKGltZy53aWR0aDxjLndpZHRoKT9pbWcud2lkdGg6Yy53aWR0aCwoaW1nLmhlaWdodDxjLmhlaWdodCk/aW1nLmhlaWdodDpjLmhlaWdodCk7Y3R4LnNoYWRvd0NvbG9yPW9sZFNoYWRvd0NvbG9yO307aW1nLnNyYz0nZGF0YTonK2Zvcm1hdHR5cGUrJywnK2RhdGE7fQp2YXIgaW1wb3J0cGx1Z2lucz17J25hdGl2ZSc6ZnVuY3Rpb24oZGF0YSxmb3JtYXR0eXBlLHJlcmVuZGVyY2FsbGFibGUpe3JlcmVuZGVyY2FsbGFibGUoZGF0YSk7fSwnaW1hZ2UnOl9yZW5kZXJJbWFnZU9uQ2FudmFzLCdpbWFnZS9wbmc7YmFzZTY0JzpfcmVuZGVySW1hZ2VPbkNhbnZhcywnaW1hZ2UvanBlZztiYXNlNjQnOl9yZW5kZXJJbWFnZU9uQ2FudmFzLCdpbWFnZS9qcGc7YmFzZTY0JzpfcmVuZGVySW1hZ2VPbkNhbnZhc307ZnVuY3Rpb24gX2NsZWFyRHJhd2luZ0FyZWEoZGF0YSxkb250Q2xlYXIpe3RoaXMuZmluZCgnY2FudmFzLicrYXBpbmFtZXNwYWNlKS5hZGQodGhpcy5maWx0ZXIoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkpLmRhdGEoYXBpbmFtZXNwYWNlKycudGhpcycpLnJlc2V0Q2FudmFzKGRhdGEsZG9udENsZWFyKTtyZXR1cm4gdGhpczt9CmZ1bmN0aW9uIF9zZXREcmF3aW5nRGF0YShkYXRhLGZvcm1hdHR5cGUpe3ZhciB1bmRlZjtpZihmb3JtYXR0eXBlPT09dW5kZWYmJnR5cGVvZiBkYXRhPT09J3N0cmluZycmJmRhdGEuc3Vic3RyKDAsNSk9PT0nZGF0YTonKXtmb3JtYXR0eXBlPWRhdGEuc2xpY2UoNSkuc3BsaXQoJywnKVswXTtkYXRhPWRhdGEuc2xpY2UoNitmb3JtYXR0eXBlLmxlbmd0aCk7aWYoZm9ybWF0dHlwZT09PWRhdGEpe3JldHVybjt9fQp2YXIgJGNhbnZhcz10aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKTtpZighaW1wb3J0cGx1Z2lucy5oYXNPd25Qcm9wZXJ0eShmb3JtYXR0eXBlKSl7dGhyb3cgbmV3IEVycm9yKGFwaW5hbWVzcGFjZSsiIGlzIHVuYWJsZSB0byBmaW5kIGltcG9ydCBwbHVnaW4gd2l0aCBmb3IgZm9ybWF0ICciK1N0cmluZyhmb3JtYXR0eXBlKSsiJyIpO31lbHNlIGlmKCRjYW52YXMubGVuZ3RoIT09MCl7aW1wb3J0cGx1Z2luc1tmb3JtYXR0eXBlXS5jYWxsKCRjYW52YXNbMF0sZGF0YSxmb3JtYXR0eXBlLChmdW5jdGlvbihqU2lnbmF0dXJlSW5zdGFuY2Upe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBqU2lnbmF0dXJlSW5zdGFuY2UucmVzZXRDYW52YXMuYXBwbHkoalNpZ25hdHVyZUluc3RhbmNlLGFyZ3VtZW50cyl9fSkoJGNhbnZhcy5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKSkpO30KcmV0dXJuIHRoaXM7fQp2YXIgZWxlbWVudElzT3JwaGFuPWZ1bmN0aW9uKGUpe3ZhciB0b3BPZkRPTT1mYWxzZTtlPWUucGFyZW50Tm9kZTt3aGlsZShlJiYhdG9wT2ZET00pe3RvcE9mRE9NPWUuYm9keTtlPWUucGFyZW50Tm9kZTt9CnJldHVybiF0b3BPZkRPTTt9CnZhciBwbHVnaW5zPXsnZXhwb3J0JzpleHBvcnRwbHVnaW5zLCdpbXBvcnQnOmltcG9ydHBsdWdpbnMsJ2luc3RhbmNlJzpqU2lnbmF0dXJlSW5zdGFuY2VFeHRlbnNpb25zfSxtZXRob2RzPXsnaW5pdCc6ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCFlbGVtZW50SXNPcnBoYW4odGhpcykpe25ldyBqU2lnbmF0dXJlQ2xhc3ModGhpcyxvcHRpb25zLGpTaWduYXR1cmVJbnN0YW5jZUV4dGVuc2lvbnMpO319KX0sJ2dldFNldHRpbmdzJzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5zZXR0aW5nczt9LCdpc01vZGlmaWVkJzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5kYXRhRW5naW5lLl9zdHJva2UhPT1udWxsO30sJ3VwZGF0ZVNldHRpbmcnOmZ1bmN0aW9uKHBhcmFtLHZhbCxmb3JGdXR1cmUpe3ZhciAkY2FudmFzPXRoaXMuZmluZCgnY2FudmFzLicrYXBpbmFtZXNwYWNlKS5hZGQodGhpcy5maWx0ZXIoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkpLmRhdGEoYXBpbmFtZXNwYWNlKycudGhpcycpOyRjYW52YXMuc2V0dGluZ3NbcGFyYW1dPXZhbDskY2FudmFzLnJlc2V0Q2FudmFzKChmb3JGdXR1cmU/bnVsbDokY2FudmFzLnNldHRpbmdzLmRhdGEpLHRydWUpO3JldHVybiAkY2FudmFzLnNldHRpbmdzW3BhcmFtXTt9LCdjbGVhcic6X2NsZWFyRHJhd2luZ0FyZWEsJ3Jlc2V0JzpfY2xlYXJEcmF3aW5nQXJlYSwnYWRkUGx1Z2luJzpmdW5jdGlvbihwbHVnaW5UeXBlLHBsdWdpbk5hbWUsY2FsbGFibGUpe2lmKHBsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luVHlwZSkpe3BsdWdpbnNbcGx1Z2luVHlwZV1bcGx1Z2luTmFtZV09Y2FsbGFibGU7fQpyZXR1cm4gdGhpczt9LCdsaXN0UGx1Z2lucyc6ZnVuY3Rpb24ocGx1Z2luVHlwZSl7dmFyIGFuc3dlcj1bXTtpZihwbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpblR5cGUpKXt2YXIgbz1wbHVnaW5zW3BsdWdpblR5cGVdO2Zvcih2YXIgayBpbiBvKXtpZihvLmhhc093blByb3BlcnR5KGspKXthbnN3ZXIucHVzaChrKTt9fX0KcmV0dXJuIGFuc3dlcjt9LCdnZXREYXRhJzpmdW5jdGlvbihmb3JtYXR0eXBlKXt2YXIgdW5kZWYsJGNhbnZhcz10aGlzLmZpbmQoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkuYWRkKHRoaXMuZmlsdGVyKCdjYW52YXMuJythcGluYW1lc3BhY2UpKTtpZihmb3JtYXR0eXBlPT09dW5kZWYpe2Zvcm1hdHR5cGU9J2RlZmF1bHQnO30KaWYoJGNhbnZhcy5sZW5ndGghPT0wJiZleHBvcnRwbHVnaW5zLmhhc093blByb3BlcnR5KGZvcm1hdHR5cGUpKXtyZXR1cm4gZXhwb3J0cGx1Z2luc1tmb3JtYXR0eXBlXS5jYWxsKCRjYW52YXMuZ2V0KDApLCRjYW52YXMuZGF0YShhcGluYW1lc3BhY2UrJy5kYXRhJyksJGNhbnZhcy5kYXRhKGFwaW5hbWVzcGFjZSsnLnNldHRpbmdzJykpO319LCdpbXBvcnREYXRhJzpfc2V0RHJhd2luZ0RhdGEsJ3NldERhdGEnOl9zZXREcmF3aW5nRGF0YSwnZ2xvYmFsRXZlbnRzJzpmdW5jdGlvbigpe3JldHVybiBnbG9iYWxFdmVudHN9LCdkaXNhYmxlJzpmdW5jdGlvbigpe3RoaXMuZmluZCgiaW5wdXQiKS5hdHRyKCJkaXNhYmxlZCIsMSk7dGhpcy5maW5kKCdjYW52YXMuJythcGluYW1lc3BhY2UpLmFkZENsYXNzKCJkaXNhYmxlZCIpLmRhdGEoYXBpbmFtZXNwYWNlKycudGhpcycpLnNldHRpbmdzLnJlYWRPbmx5PXRydWU7fSwnZW5hYmxlJzpmdW5jdGlvbigpe3RoaXMuZmluZCgiaW5wdXQiKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpO3RoaXMuZmluZCgnY2FudmFzLicrYXBpbmFtZXNwYWNlKS5yZW1vdmVDbGFzcygiZGlzYWJsZWQiKS5kYXRhKGFwaW5hbWVzcGFjZSsnLnRoaXMnKS5zZXR0aW5ncy5yZWFkT25seT1mYWxzZTt9LCdldmVudHMnOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZCgnY2FudmFzLicrYXBpbmFtZXNwYWNlKS5hZGQodGhpcy5maWx0ZXIoJ2NhbnZhcy4nK2FwaW5hbWVzcGFjZSkpLmRhdGEoYXBpbmFtZXNwYWNlKycudGhpcycpLmV2ZW50czt9fQokLmZuW2FwaW5hbWVzcGFjZV09ZnVuY3Rpb24obWV0aG9kKXsndXNlIHN0cmljdCcKaWYoIW1ldGhvZHx8dHlwZW9mIG1ldGhvZD09PSdvYmplY3QnKXtyZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZSBpZih0eXBlb2YgbWV0aG9kPT09J3N0cmluZycmJm1ldGhvZHNbbWV0aG9kXSl7cmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7fWVsc2V7JC5lcnJvcignTWV0aG9kICcrU3RyaW5nKG1ldGhvZCkrJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuJythcGluYW1lc3BhY2UpO319fQpHbG9iYWxKU2lnbmF0dXJlT2JqZWN0SW5pdGlhbGl6ZXIod2luZG93KX0pKCk7OwoKLyogL3dlYi9zdGF0aWMvbGliL3F3ZWIvcXdlYjIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwp2YXIgUVdlYjI9e2V4cHJlc3Npb25zX2NhY2hlOnt9LFJFU0VSVkVEX1dPUkRTOid0cnVlLGZhbHNlLE5hTixudWxsLHVuZGVmaW5lZCxkZWJ1Z2dlcixjb25zb2xlLHdpbmRvdyxpbixpbnN0YW5jZW9mLG5ldyxmdW5jdGlvbixyZXR1cm4sdGhpcyx0eXBlb2YsZXZhbCx2b2lkLE1hdGgsUmVnRXhwLEFycmF5LE9iamVjdCxEYXRlJy5zcGxpdCgnLCcpLEFDVElPTlNfUFJFQ0VERU5DRTonZm9yZWFjaCxpZixlbGlmLGVsc2UsY2FsbCxzZXQsdGFnLGVzYyxyYXcsanMsZGVidWcsbG9nJy5zcGxpdCgnLCcpLFdPUkRfUkVQTEFDRU1FTlQ6eydhbmQnOicmJicsJ29yJzonfHwnLCdndCc6Jz4nLCdndGUnOic+PScsJ2x0JzonPCcsJ2x0ZSc6Jzw9J30sVk9JRF9FTEVNRU5UUzonYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxocixpbWcsaW5wdXQsa2V5Z2VuLGxpbmssbWVudWl0ZW0sbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJy5zcGxpdCgnLCcpLHRvb2xzOntleGNlcHRpb246ZnVuY3Rpb24obWVzc2FnZSxjb250ZXh0KXtjb250ZXh0PWNvbnRleHR8fHt9O3ZhciBwcmVmaXg9J1FXZWIyJztpZihjb250ZXh0LnRlbXBsYXRlKXtwcmVmaXgrPSIgLSB0ZW1wbGF0ZVsnIitjb250ZXh0LnRlbXBsYXRlKyInXSI7fQp0aHJvdyBuZXcgRXJyb3IocHJlZml4KyI6ICIrbWVzc2FnZSk7fSx3YXJuaW5nOmZ1bmN0aW9uKG1lc3NhZ2Upe2lmKHR5cGVvZih3aW5kb3cpIT09J3VuZGVmaW5lZCcmJndpbmRvdy5jb25zb2xlKXt3aW5kb3cuY29uc29sZS53YXJuKG1lc3NhZ2UpO319LHRyaW06ZnVuY3Rpb24ocyxtb2RlKXtzd2l0Y2gobW9kZSl7Y2FzZSJsZWZ0IjpyZXR1cm4gcy5yZXBsYWNlKC9eXHMqLywiIik7Y2FzZSJyaWdodCI6cmV0dXJuIHMucmVwbGFjZSgvXHMqJC8sIiIpO2RlZmF1bHQ6cmV0dXJuIHMucmVwbGFjZSgvXlxzKnxccyokL2csIiIpO319LGpzX2VzY2FwZTpmdW5jdGlvbihzLG5vcXVvdGVzKXtyZXR1cm4obm9xdW90ZXM/Jyc6IiciKStzLnJlcGxhY2UoL1xyP1xuL2csIlxcbiIpLnJlcGxhY2UoLycvZywiXFwnIikrKG5vcXVvdGVzPycnOiInIik7fSxodG1sX2VzY2FwZTpmdW5jdGlvbihzLGF0dHJpYnV0ZSl7aWYocz09bnVsbCl7cmV0dXJuJyc7fQpzPVN0cmluZyhzKS5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7aWYoYXR0cmlidXRlKXtzPXMucmVwbGFjZSgvIi9nLCcmcXVvdDsnKTt9CnJldHVybiBzO30sZ2VuX2F0dHJpYnV0ZTpmdW5jdGlvbihvKXtpZihvIT09bnVsbCYmbyE9PXVuZGVmaW5lZCl7aWYoby5jb25zdHJ1Y3Rvcj09PUFycmF5KXtpZihvWzFdIT09bnVsbCYmb1sxXSE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZm9ybWF0X2F0dHJpYnV0ZShvWzBdLG9bMV0pO319ZWxzZSBpZih0eXBlb2Ygbz09PSdvYmplY3QnKXt2YXIgcj0nJztmb3IodmFyIGsgaW4gbyl7aWYoby5oYXNPd25Qcm9wZXJ0eShrKSl7cis9dGhpcy5nZW5fYXR0cmlidXRlKFtrLG9ba11dKTt9fQpyZXR1cm4gcjt9fQpyZXR1cm4nJzt9LGZvcm1hdF9hdHRyaWJ1dGU6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuJyAnK25hbWUrJz0iJyt0aGlzLmh0bWxfZXNjYXBlKHZhbHVlLHRydWUpKyciJzt9LGV4dGVuZDpmdW5jdGlvbihkc3Qsc3JjLGV4Y2x1ZGUpe2Zvcih2YXIgcCBpbiBzcmMpe2lmKHNyYy5oYXNPd25Qcm9wZXJ0eShwKSYmIShleGNsdWRlJiZ0aGlzLmFycmF5SW5kZXhPZihleGNsdWRlLHApIT09LTEpKXtkc3RbcF09c3JjW3BdO319CnJldHVybiBkc3Q7fSxhcnJheUluZGV4T2Y6ZnVuY3Rpb24oYXJyYXksaXRlbSl7Zm9yKHZhciBpPTAsaWxlbj1hcnJheS5sZW5ndGg7aTxpbGVuO2krKyl7aWYoYXJyYXlbaV09PT1pdGVtKXtyZXR1cm4gaTt9fQpyZXR1cm4tMTt9LGdldF9lbGVtZW50X3NpYmxpbmc6ZnVuY3Rpb24obm9kZSxkb21fYXR0cil7dmFyIHNpYmxpbmc9bm9kZVtkb21fYXR0cl07d2hpbGUoc2libGluZyYmc2libGluZy5ub2RlVHlwZSE9PTEpe3NpYmxpbmc9c2libGluZ1tkb21fYXR0cl07fQpyZXR1cm4gc2libGluZzt9LHhtbF9ub2RlX3RvX3N0cmluZzpmdW5jdGlvbihub2RlLGNoaWxkc19vbmx5KXtpZihjaGlsZHNfb25seSl7dmFyIGNoaWxkcz1ub2RlLmNoaWxkTm9kZXMscj1bXTtmb3IodmFyIGk9MCxpbGVuPWNoaWxkcy5sZW5ndGg7aTxpbGVuO2krKyl7ci5wdXNoKHRoaXMueG1sX25vZGVfdG9fc3RyaW5nKGNoaWxkc1tpXSkpO30KcmV0dXJuIHIuam9pbignJyk7fWVsc2V7aWYobm9kZS5ub2RlVHlwZT09Myl7cmV0dXJuIG5vZGUuZGF0YTt9CmlmKHR5cGVvZiBYTUxTZXJpYWxpemVyIT09J3VuZGVmaW5lZCcpe3JldHVybihuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhub2RlKTt9ZWxzZXtzd2l0Y2gobm9kZS5ub2RlVHlwZSl7Y2FzZSAxOnJldHVybiBub2RlLm91dGVySFRNTDtjYXNlIDQ6cmV0dXJuJzwhW0NEQVRBWycrbm9kZS5kYXRhKyddXT4nO2Nhc2UgODpyZXR1cm4nPCEtLSAnK25vZGUuZGF0YSsnLS0+Jzt9CnRocm93IG5ldyBFcnJvcignVW5rbm93biBub2RlIHR5cGUgJytub2RlLm5vZGVUeXBlKTt9fX0sY2FsbDpmdW5jdGlvbihjb250ZXh0LHRlbXBsYXRlLG9sZF9kaWN0LF9pbXBvcnQsY2FsbGJhY2spe3ZhciBuZXdfZGljdD10aGlzLmV4dGVuZCh7fSxvbGRfZGljdCk7bmV3X2RpY3RbJ19fY2FsbGVyX18nXT1vbGRfZGljdFsnX190ZW1wbGF0ZV9fJ107aWYoY2FsbGJhY2spe25ld19kaWN0WzBdPWNhbGxiYWNrKGNvbnRleHQsbmV3X2RpY3QpO30KcmV0dXJuIGNvbnRleHQuZW5naW5lLl9yZW5kZXIodGVtcGxhdGUsbmV3X2RpY3QpO30sZm9yZWFjaDpmdW5jdGlvbihjb250ZXh0LGVudSxhcyxvbGRfZGljdCxjYWxsYmFjayl7aWYoZW51IT1udWxsKXt2YXIgaW5kZXgsamxlbixjdXI7dmFyIG5ld19kaWN0PXRoaXMuZXh0ZW5kKHt9LG9sZF9kaWN0KTtuZXdfZGljdFthcysiX2FsbCJdPWVudTt2YXIgYXNfdmFsdWU9YXMrIl92YWx1ZSIsYXNfaW5kZXg9YXMrIl9pbmRleCIsYXNfZmlyc3Q9YXMrIl9maXJzdCIsYXNfbGFzdD1hcysiX2xhc3QiLGFzX3Bhcml0eT1hcysiX3Bhcml0eSI7aWYoZW51IGluc3RhbmNlb2YgQXJyYXkpe3ZhciBzaXplPWVudS5sZW5ndGg7bmV3X2RpY3RbYXMrIl9zaXplIl09c2l6ZTtmb3IoaW5kZXg9MCxqbGVuPWVudS5sZW5ndGg7aW5kZXg8amxlbjtpbmRleCsrKXtjdXI9ZW51W2luZGV4XTtuZXdfZGljdFthc192YWx1ZV09Y3VyO25ld19kaWN0W2FzX2luZGV4XT1pbmRleDtuZXdfZGljdFthc19maXJzdF09aW5kZXg9PT0wO25ld19kaWN0W2FzX2xhc3RdPWluZGV4KzE9PT1zaXplO25ld19kaWN0W2FzX3Bhcml0eV09KGluZGV4JTI9PTE/J29kZCc6J2V2ZW4nKTtpZihjdXImJmN1ci5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7dGhpcy5leHRlbmQobmV3X2RpY3QsY3VyKTt9Cm5ld19kaWN0W2FzXT1jdXI7Y2FsbGJhY2soY29udGV4dCxuZXdfZGljdCk7fX1lbHNlIGlmKGVudS5jb25zdHJ1Y3Rvcj09TnVtYmVyKXt2YXIgX2VudT1bXTtmb3IodmFyIGk9MDtpPGVudTtpKyspe19lbnUucHVzaChpKTt9CnRoaXMuZm9yZWFjaChjb250ZXh0LF9lbnUsYXMsb2xkX2RpY3QsY2FsbGJhY2spO31lbHNle2luZGV4PTA7Zm9yKHZhciBrIGluIGVudSl7aWYoZW51Lmhhc093blByb3BlcnR5KGspKXtjdXI9ZW51W2tdO25ld19kaWN0W2FzX3ZhbHVlXT1jdXI7bmV3X2RpY3RbYXNfaW5kZXhdPWluZGV4O25ld19kaWN0W2FzX2ZpcnN0XT1pbmRleD09PTA7bmV3X2RpY3RbYXNfcGFyaXR5XT0oaW5kZXglMj09MT8nb2RkJzonZXZlbicpO25ld19kaWN0W2FzXT1rO2NhbGxiYWNrKGNvbnRleHQsbmV3X2RpY3QpO2luZGV4Kz0xO319fQpfLmVhY2goT2JqZWN0LmtleXMob2xkX2RpY3QpLGZ1bmN0aW9uKHope29sZF9kaWN0W3pdPW5ld19kaWN0W3pdO30pO31lbHNle3RoaXMuZXhjZXB0aW9uKCJObyBlbnVtZXJhdG9yIGdpdmVuIHRvIGZvcmVhY2giLGNvbnRleHQpO319fX07UVdlYjIuRW5naW5lPShmdW5jdGlvbigpe2Z1bmN0aW9uIEVuZ2luZSgpe3RoaXMucHJlZml4PSd0Jzt0aGlzLmRlYnVnPWZhbHNlO3RoaXMudGVtcGxhdGVzX3Jlc291cmNlcz1bXTt0aGlzLnRlbXBsYXRlcz17fTt0aGlzLmNvbXBpbGVkX3RlbXBsYXRlcz17fTt0aGlzLmV4dGVuZF90ZW1wbGF0ZXM9e307dGhpcy5kZWZhdWx0X2RpY3Q9e307dGhpcy50b29scz1RV2ViMi50b29sczt0aGlzLmpRdWVyeT13aW5kb3cualF1ZXJ5O3RoaXMucmVzZXJ2ZWRfd29yZHM9UVdlYjIuUkVTRVJWRURfV09SRFMuc2xpY2UoMCk7dGhpcy5hY3Rpb25zX3ByZWNlZGVuY2U9UVdlYjIuQUNUSU9OU19QUkVDRURFTkNFLnNsaWNlKDApO3RoaXMudm9pZF9lbGVtZW50cz1RV2ViMi5WT0lEX0VMRU1FTlRTLnNsaWNlKDApO3RoaXMud29yZF9yZXBsYWNlbWVudD1RV2ViMi50b29scy5leHRlbmQoe30sUVdlYjIuV09SRF9SRVBMQUNFTUVOVCk7dGhpcy5wcmVwcm9jZXNzX25vZGU9bnVsbDtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt0aGlzLmFkZF90ZW1wbGF0ZShhcmd1bWVudHNbaV0pO319ClFXZWIyLnRvb2xzLmV4dGVuZChFbmdpbmUucHJvdG90eXBlLHthZGRfdGVtcGxhdGU6ZnVuY3Rpb24odGVtcGxhdGUsY2FsbGJhY2spe3ZhciBzZWxmPXRoaXM7dGhpcy50ZW1wbGF0ZXNfcmVzb3VyY2VzLnB1c2godGVtcGxhdGUpO2lmKHRlbXBsYXRlLmNvbnN0cnVjdG9yPT09U3RyaW5nKXtyZXR1cm4gdGhpcy5sb2FkX3htbCh0ZW1wbGF0ZSxmdW5jdGlvbihlcnIseERvYyl7aWYoZXJyKXtpZihjYWxsYmFjayl7cmV0dXJuIGNhbGxiYWNrKGVycik7fWVsc2V7dGhyb3cgZXJyO319CnNlbGYuYWRkX3RlbXBsYXRlKHhEb2MsY2FsbGJhY2spO30pO30KdGVtcGxhdGU9dGhpcy5wcmVwcm9jZXNzKHRlbXBsYXRlKTt2YXIgZWM9KHRlbXBsYXRlLmRvY3VtZW50RWxlbWVudCYmdGVtcGxhdGUuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpfHx0ZW1wbGF0ZS5jaGlsZE5vZGVzfHxbXTtmb3IodmFyIGk9MDtpPGVjLmxlbmd0aDtpKyspe3ZhciBub2RlPWVjW2ldO2lmKG5vZGUubm9kZVR5cGU9PT0xKXt2YXIgbmFtZT1ub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnByZWZpeCsnLW5hbWUnKTt2YXIgZXh0ZW5kPW5vZGUuZ2V0QXR0cmlidXRlKHRoaXMucHJlZml4KyctZXh0ZW5kJyk7aWYobmFtZSYmZXh0ZW5kKXtpZighdGhpcy50ZW1wbGF0ZXNbZXh0ZW5kXSl7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJDYW4ndCBjbG9uZSB1bmRlZmluZWQgdGVtcGxhdGUgIitleHRlbmQpO30KdGhpcy50ZW1wbGF0ZXNbbmFtZV09dGhpcy50ZW1wbGF0ZXNbZXh0ZW5kXS5jbG9uZU5vZGUodHJ1ZSk7ZXh0ZW5kPW5hbWU7bmFtZT11bmRlZmluZWQ7fQppZihuYW1lKXt0aGlzLnRlbXBsYXRlc1tuYW1lXT1ub2RlO3RoaXMuY29tcGlsZWRfdGVtcGxhdGVzW25hbWVdPW51bGw7fWVsc2UgaWYoZXh0ZW5kKXtkZWxldGUodGhpcy5jb21waWxlZF90ZW1wbGF0ZXNbZXh0ZW5kXSk7aWYodGhpcy5leHRlbmRfdGVtcGxhdGVzW2V4dGVuZF0pe3RoaXMuZXh0ZW5kX3RlbXBsYXRlc1tleHRlbmRdLnB1c2gobm9kZSk7fWVsc2V7dGhpcy5leHRlbmRfdGVtcGxhdGVzW2V4dGVuZF09W25vZGVdO319fX0KaWYoY2FsbGJhY2spe2NhbGxiYWNrKG51bGwsdGVtcGxhdGUpO30KcmV0dXJuIHRydWU7fSxwcmVwcm9jZXNzOmZ1bmN0aW9uKGRvYyl7dmFyIHNlbGY9dGhpczt2YXIgY2hpbGRzPShkb2MuZG9jdW1lbnRFbGVtZW50JiZkb2MuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpfHxkb2MuY2hpbGROb2Rlc3x8W107Zm9yKHZhciBpPTA7aTxjaGlsZHMubGVuZ3RoO2krKyl7dmFyIG5vZGU9Y2hpbGRzW2ldO2lmKG5vZGUubm9kZVR5cGU9PT0xJiZub2RlLm5vZGVOYW1lPT0ncGFyc2VyZXJyb3InKXtyZXR1cm4gdGhpcy50b29scy5leGNlcHRpb24obm9kZS5pbm5lclRleHQpO319CnZhciB0YnJhbmNoPWRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbdC1lbGlmXSwgW3QtZWxzZV0nKTtmb3IodmFyIGk9MCxpbGVuPXRicmFuY2gubGVuZ3RoO2k8aWxlbjtpKyspe3ZhciBub2RlPXRicmFuY2hbaV07dmFyIHByZXZfZWxlbT1zZWxmLnRvb2xzLmdldF9lbGVtZW50X3NpYmxpbmcobm9kZSwncHJldmlvdXNTaWJsaW5nJyk7dmFyIHBhdHRyPWZ1bmN0aW9uKG5hbWUpe3JldHVybiBwcmV2X2VsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO30KdmFyIG5hdHRyPWZ1bmN0aW9uKG5hbWUpe3JldHVybishIW5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO30KaWYocHJldl9lbGVtJiYocGF0dHIoJ3QtaWYnKXx8cGF0dHIoJ3QtZWxpZicpKSl7aWYocGF0dHIoJ3QtZm9yZWFjaCcpKXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiB0LWlmIGNhbm5vdCBzdGF5IGF0IHRoZSBzYW1lIGxldmVsIGFzIHQtZm9yZWFjaCB3aGVuIHVzaW5nIHQtZWxpZiBvciB0LWVsc2UiKTt9CmlmKFsndC1pZicsJ3QtZWxpZicsJ3QtZWxzZSddLm1hcChuYXR0cikucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYjt9KT4xKXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiBvbmx5IG9uZSBjb25kaXRpb25hbCBicmFuY2hpbmcgZGlyZWN0aXZlIGlzIGFsbG93ZWQgcGVyIG5vZGUiKTt9CnZhciB0ZXh0X25vZGU7d2hpbGUoKHRleHRfbm9kZT1ub2RlLnByZXZpb3VzU2libGluZykhPT1wcmV2X2VsZW0pe2lmKHNlbGYudG9vbHMudHJpbSh0ZXh0X25vZGUubm9kZVZhbHVlKSl7cmV0dXJuIHNlbGYudG9vbHMuZXhjZXB0aW9uKCJFcnJvcjogdGV4dCBpcyBub3QgYWxsb3dlZCBiZXR3ZWVuIGJyYW5jaGluZyBkaXJlY3RpdmVzIik7fQp0ZXh0X25vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZXh0X25vZGUpO319ZWxzZXtyZXR1cm4gc2VsZi50b29scy5leGNlcHRpb24oIkVycm9yOiB0LWVsaWYgYW5kIHQtZWxzZSBkaXJlY3RpdmVzIG11c3QgYmUgcHJlY2VkZWQgYnkgYSB0LWlmIG9yIHQtZWxpZiBkaXJlY3RpdmUiKTt9fQpyZXR1cm4gZG9jO30sbG9hZF94bWw6ZnVuY3Rpb24ocyxjYWxsYmFjayl7dmFyIHNlbGY9dGhpczt2YXIgYXN5bmM9ISFjYWxsYmFjaztzPXRoaXMudG9vbHMudHJpbShzKTtpZihzLmNoYXJBdCgwKT09PSc8Jyl7dmFyIHRwbD10aGlzLmxvYWRfeG1sX3N0cmluZyhzKTtpZihjYWxsYmFjayl7Y2FsbGJhY2sobnVsbCx0cGwpO30KcmV0dXJuIHRwbDt9ZWxzZXt2YXIgcmVxPXRoaXMuZ2V0X3hocigpO2lmKHRoaXMuZGVidWcpe3MrPSc/ZGVidWc9JysobmV3IERhdGUoKSkuZ2V0VGltZSgpO30KcmVxLm9wZW4oJ0dFVCcscyxhc3luYyk7aWYoYXN5bmMpe3JlcS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixmdW5jdGlvbigpe2lmKHJlcS5zdGF0dXM9PTIwMHx8cmVxLnN0YXR1cz09MCl7Y2FsbGJhY2sobnVsbCxzZWxmLl9wYXJzZV9mcm9tX3JlcXVlc3QocmVxKSk7fWVsc2V7Y2FsbGJhY2sobmV3IEVycm9yKCJDYW4ndCBsb2FkIHRlbXBsYXRlICIrcysiLCBodHRwIHN0YXR1cyAiK3JlcS5zdGF0dXMpKTt9fSk7fQpyZXEuc2VuZChudWxsKTtpZighYXN5bmMpe3JldHVybiB0aGlzLl9wYXJzZV9mcm9tX3JlcXVlc3QocmVxKTt9fX0sX3BhcnNlX2Zyb21fcmVxdWVzdDpmdW5jdGlvbihyZXEpe3ZhciB4RG9jPXJlcS5yZXNwb25zZVhNTDtpZih4RG9jKXtpZigheERvYy5kb2N1bWVudEVsZW1lbnQpe3Rocm93IG5ldyBFcnJvcigiUVdlYjI6IFRoaXMgeG1sIGRvY3VtZW50IGhhcyBubyByb290IGRvY3VtZW50IDogIit4RG9jLnJlc3BvbnNlVGV4dCk7fQppZih4RG9jLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZT09InBhcnNlcmVycm9yIil7dGhyb3cgbmV3IEVycm9yKCJRV2ViMjogQ291bGQgbm90IHBhcnNlIGRvY3VtZW50IDoiK3hEb2MuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlKTt9CnJldHVybiB4RG9jO31lbHNle3JldHVybiB0aGlzLmxvYWRfeG1sX3N0cmluZyhyZXEucmVzcG9uc2VUZXh0KTt9fSxsb2FkX3htbF9zdHJpbmc6ZnVuY3Rpb24ocyl7aWYod2luZG93LkRPTVBhcnNlcil7dmFyIGRwPW5ldyBET01QYXJzZXIoKTt2YXIgcj1kcC5wYXJzZUZyb21TdHJpbmcocywidGV4dC94bWwiKTtpZihyLmJvZHkmJnIuYm9keS5maXJzdENoaWxkJiZyLmJvZHkuZmlyc3RDaGlsZC5ub2RlTmFtZT09J3BhcnNlcmVycm9yJyl7dGhyb3cgbmV3IEVycm9yKCJRV2ViMjogQ291bGQgbm90IHBhcnNlIGRvY3VtZW50IDoiK3IuYm9keS5pbm5lclRleHQpO30KcmV0dXJuIHI7fQp2YXIgeERvYzt0cnl7eERvYz1uZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLkRPTURvY3VtZW50Iik7fWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGZpbmQgYSBET00gUGFyc2VyOiAiK2UubWVzc2FnZSk7fQp4RG9jLmFzeW5jPWZhbHNlO3hEb2MucHJlc2VydmVXaGl0ZVNwYWNlPXRydWU7eERvYy5sb2FkWE1MKHMpO3JldHVybiB4RG9jO30saGFzX3RlbXBsYXRlOmZ1bmN0aW9uKHRlbXBsYXRlKXtyZXR1cm4hIXRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXTt9LGdldF94aHI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuWE1MSHR0cFJlcXVlc3Qpe3JldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7fQp0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNU1hNTDIuWE1MSFRUUC4zLjAnKTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZ2V0IFhIUiIpO319LGNvbXBpbGU6ZnVuY3Rpb24obm9kZSl7dmFyIGU9bmV3IFFXZWIyLkVsZW1lbnQodGhpcyxub2RlKTt2YXIgdGVtcGxhdGU9bm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5wcmVmaXgrJy1uYW1lJyk7cmV0dXJuIiAgIC8qICd0aGlzJyByZWZlcnMgdG8gUXdlYjIuRW5naW5lIGluc3RhbmNlICovXG4iKyIgICB2YXIgY29udGV4dCA9IHsgZW5naW5lIDogdGhpcywgdGVtcGxhdGUgOiAiKyh0aGlzLnRvb2xzLmpzX2VzY2FwZSh0ZW1wbGF0ZSkpKyIgfTtcbiIrIiAgIGRpY3QgPSBkaWN0IHx8IHt9O1xuIisiICAgZGljdFsnX190ZW1wbGF0ZV9fJ10gPSAnIit0ZW1wbGF0ZSsiJztcbiIrIiAgIHZhciByID0gW107XG4iKyIgICAvKiBTVEFSVCBURU1QTEFURSAqLyIrCih0aGlzLmRlYnVnPyIiOiIgdHJ5IHtcbiIpKwooZS5jb21waWxlKCkpKyJcbiIrIiAgIC8qIEVORCBPRiBURU1QTEFURSAqLyIrCih0aGlzLmRlYnVnPyIiOiIgfSBjYXRjaChlcnJvcikge1xuIisiICAgICAgIGlmIChjb25zb2xlICYmIGNvbnNvbGUuZXhjZXB0aW9uKSBjb25zb2xlLmV4Y2VwdGlvbihlcnJvcik7XG4iKyIgICAgICAgY29udGV4dC5lbmdpbmUudG9vbHMuZXhjZXB0aW9uKCdSdW50aW1lIEVycm9yOiAnICsgZXJyb3IsIGNvbnRleHQpO1xuIikrCih0aGlzLmRlYnVnPyIiOiIgICB9XG4iKSsiICAgcmV0dXJuIHIuam9pbignJyk7Ijt9LHJlbmRlcjpmdW5jdGlvbih0ZW1wbGF0ZSxkaWN0KXtkaWN0PWRpY3R8fHt9O1FXZWIyLnRvb2xzLmV4dGVuZChkaWN0LHRoaXMuZGVmYXVsdF9kaWN0KTt2YXIgcj10aGlzLl9yZW5kZXIodGVtcGxhdGUsZGljdCk7cmV0dXJuIHI7fSxfcmVuZGVyOmZ1bmN0aW9uKHRlbXBsYXRlLGRpY3Qpe2lmKHRoaXMuY29tcGlsZWRfdGVtcGxhdGVzW3RlbXBsYXRlXSl7cmV0dXJuIHRoaXMuY29tcGlsZWRfdGVtcGxhdGVzW3RlbXBsYXRlXS5hcHBseSh0aGlzLFtkaWN0fHx7fV0pO31lbHNlIGlmKHRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXSl7dmFyIGV4dDtpZihleHQ9dGhpcy5leHRlbmRfdGVtcGxhdGVzW3RlbXBsYXRlXSl7dmFyIGV4dGVuZF9ub2RlO3doaWxlKGV4dGVuZF9ub2RlPWV4dC5zaGlmdCgpKXt0aGlzLmV4dGVuZCh0ZW1wbGF0ZSxleHRlbmRfbm9kZSk7fX0KdmFyIGNvZGU9dGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGVzW3RlbXBsYXRlXSksdGNvbXBpbGVkO3RyeXt0Y29tcGlsZWQ9bmV3IEZ1bmN0aW9uKFsnZGljdCddLGNvZGUpO31jYXRjaChlcnJvcil7aWYodGhpcy5kZWJ1ZyYmd2luZG93LmNvbnNvbGUpe2NvbnNvbGUubG9nKGNvZGUpO30KdGhpcy50b29scy5leGNlcHRpb24oIkVycm9yIGV2YWx1YXRpbmcgdGVtcGxhdGU6ICIrZXJyb3Ise3RlbXBsYXRlOnRlbXBsYXRlfSk7fQppZighdGNvbXBpbGVkKXt0aGlzLnRvb2xzLmV4Y2VwdGlvbigiRXJyb3IgZXZhbHVhdGluZyB0ZW1wbGF0ZTogKElFPykiK2Vycm9yLHt0ZW1wbGF0ZTp0ZW1wbGF0ZX0pO30KdGhpcy5jb21waWxlZF90ZW1wbGF0ZXNbdGVtcGxhdGVdPXRjb21waWxlZDtyZXR1cm4gdGhpcy5yZW5kZXIodGVtcGxhdGUsZGljdCk7fWVsc2V7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJUZW1wbGF0ZSAnIit0ZW1wbGF0ZSsiJyBub3QgZm91bmQiKTt9fSxleHRlbmQ6ZnVuY3Rpb24odGVtcGxhdGUsZXh0ZW5kX25vZGUpe3ZhciBqUXVlcnk9dGhpcy5qUXVlcnk7aWYoIWpRdWVyeSl7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJDYW4ndCBleHRlbmQgdGVtcGxhdGUgIit0ZW1wbGF0ZSsiIHdpdGhvdXQgalF1ZXJ5Iik7fQp2YXIgdGVtcGxhdGVfZGVzdD10aGlzLnRlbXBsYXRlc1t0ZW1wbGF0ZV07Zm9yKHZhciBpPTAsaWxlbj1leHRlbmRfbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtpPGlsZW47aSsrKXt2YXIgY2hpbGQ9ZXh0ZW5kX25vZGUuY2hpbGROb2Rlc1tpXTtpZihjaGlsZC5ub2RlVHlwZT09PTEpe3ZhciBqcXVlcnk9Y2hpbGQuZ2V0QXR0cmlidXRlKHRoaXMucHJlZml4KyctanF1ZXJ5Jyksb3BlcmF0aW9uPWNoaWxkLmdldEF0dHJpYnV0ZSh0aGlzLnByZWZpeCsnLW9wZXJhdGlvbicpLHRhcmdldCxlcnJvcl9tc2c9IkVycm9yIHdoaWxlIGV4dGVuZGluZyB0ZW1wbGF0ZSAnIit0ZW1wbGF0ZTtpZihqcXVlcnkpe3RhcmdldD1qUXVlcnkoanF1ZXJ5LHRlbXBsYXRlX2Rlc3QpO2lmKCF0YXJnZXQubGVuZ3RoJiZ3aW5kb3cuY29uc29sZSl7Y29uc29sZS5kZWJ1ZygnQ2FuXCd0IGZpbmQgIicranF1ZXJ5KyciIHdoZW4gZXh0ZW5kaW5nIHRlbXBsYXRlICcrdGVtcGxhdGUpO319ZWxzZXt0aGlzLnRvb2xzLmV4Y2VwdGlvbihlcnJvcl9tc2crIk5vIGV4cHJlc3Npb24gZ2l2ZW4iKTt9CmVycm9yX21zZys9IicgKGV4cHJlc3Npb249JyIranF1ZXJ5KyInKSA6ICI7aWYob3BlcmF0aW9uKXt2YXIgYWxsb3dlZF9vcGVyYXRpb25zPSJhcHBlbmQscHJlcGVuZCxiZWZvcmUsYWZ0ZXIscmVwbGFjZSxpbm5lcixhdHRyaWJ1dGVzIi5zcGxpdCgnLCcpO2lmKHRoaXMudG9vbHMuYXJyYXlJbmRleE9mKGFsbG93ZWRfb3BlcmF0aW9ucyxvcGVyYXRpb24pPT0tMSl7dGhpcy50b29scy5leGNlcHRpb24oZXJyb3JfbXNnKyJJbnZhbGlkIG9wZXJhdGlvbiA6ICciK29wZXJhdGlvbisiJyIpO30Kb3BlcmF0aW9uPXsncmVwbGFjZSc6J3JlcGxhY2VXaXRoJywnaW5uZXInOidodG1sJ31bb3BlcmF0aW9uXXx8b3BlcmF0aW9uO2lmKG9wZXJhdGlvbj09PSdhdHRyaWJ1dGVzJyl7alF1ZXJ5KCdhdHRyaWJ1dGUnLGNoaWxkKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGF0dHJpYj1qUXVlcnkodGhpcyk7dGFyZ2V0LmF0dHIoYXR0cmliLmF0dHIoJ25hbWUnKSxhdHRyaWIudGV4dCgpfHxhdHRyaWIuYXR0cigndmFsdWUnKSk7fSk7fWVsc2V7dGFyZ2V0W29wZXJhdGlvbl0oY2hpbGQuY2xvbmVOb2RlKHRydWUpLmNoaWxkTm9kZXMpO319ZWxzZXt0cnl7dmFyIGY9bmV3IEZ1bmN0aW9uKFsnJCcsJ2RvY3VtZW50J10sdGhpcy50b29scy54bWxfbm9kZV90b19zdHJpbmcoY2hpbGQsdHJ1ZSkpO31jYXRjaChlcnJvcil7cmV0dXJuIHRoaXMudG9vbHMuZXhjZXB0aW9uKCJQYXJzZSAiK2Vycm9yX21zZytlcnJvcik7fQp0cnl7Zi5hcHBseSh0YXJnZXQsW2pRdWVyeSx0ZW1wbGF0ZV9kZXN0Lm93bmVyRG9jdW1lbnRdKTt9Y2F0Y2goZXJyb3Ipe3JldHVybiB0aGlzLnRvb2xzLmV4Y2VwdGlvbigiUnVudGltZSAiK2Vycm9yX21zZytlcnJvcik7fX19fX19KTtyZXR1cm4gRW5naW5lO30pKCk7UVdlYjIuRWxlbWVudD0oZnVuY3Rpb24oKXtmdW5jdGlvbiBFbGVtZW50KGVuZ2luZSxub2RlKXt0aGlzLmVuZ2luZT1lbmdpbmU7dGhpcy5ub2RlPW5vZGU7dGhpcy50YWc9bm9kZS50YWdOYW1lO3RoaXMuYWN0aW9ucz17dGFnOnRoaXMudGFnfTt0aGlzLmFjdGlvbnNfZG9uZT1bXTt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5jaGlsZHJlbj1bXTt0aGlzLl90b3A9W107dGhpcy5fYm90dG9tPVtdO3RoaXMuX2luZGVudD0xO3RoaXMucHJvY2Vzc19jaGlsZHJlbj10cnVlO3RoaXMuaXNfdm9pZF9lbGVtZW50PX5RV2ViMi50b29scy5hcnJheUluZGV4T2YodGhpcy5lbmdpbmUudm9pZF9lbGVtZW50cyx0aGlzLnRhZyk7dmFyIGNoaWxkcz10aGlzLm5vZGUuY2hpbGROb2RlcztpZihjaGlsZHMpe2Zvcih2YXIgaT0wLGlsZW49Y2hpbGRzLmxlbmd0aDtpPGlsZW47aSsrKXt0aGlzLmNoaWxkcmVuLnB1c2gobmV3IFFXZWIyLkVsZW1lbnQodGhpcy5lbmdpbmUsY2hpbGRzW2ldKSk7fX0KdmFyIGF0dHJzPXRoaXMubm9kZS5hdHRyaWJ1dGVzO2lmKGF0dHJzKXtmb3IodmFyIGo9MCxqbGVuPWF0dHJzLmxlbmd0aDtqPGpsZW47aisrKXt2YXIgYXR0cj1hdHRyc1tqXTt2YXIgbmFtZT1hdHRyLm5hbWU7dmFyIG09bmFtZS5tYXRjaChuZXcgUmVnRXhwKCJeIit0aGlzLmVuZ2luZS5wcmVmaXgrIi0oLispIikpO2lmKG0pe25hbWU9bVsxXTtpZihuYW1lPT09J25hbWUnKXtjb250aW51ZTt9CmlmKG5hbWUubWF0Y2goL15hdHRmPygtLiopPy8pKXt0aGlzLmF0dHJpYnV0ZXNbbVswXV09YXR0ci52YWx1ZTt9ZWxzZXt0aGlzLmFjdGlvbnNbbmFtZV09YXR0ci52YWx1ZTt9fWVsc2V7dGhpcy5hdHRyaWJ1dGVzW25hbWVdPWF0dHIudmFsdWU7fX19CmlmKHRoaXMuZW5naW5lLnByZXByb2Nlc3Nfbm9kZSl7dGhpcy5lbmdpbmUucHJlcHJvY2Vzc19ub2RlLmNhbGwodGhpcyk7fX0KUVdlYjIudG9vbHMuZXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLHtjb21waWxlOmZ1bmN0aW9uKCl7dmFyIHI9W10saW5zdHJpbmc9ZmFsc2UsbGluZXM9dGhpcy5fY29tcGlsZSgpLnNwbGl0KCdcbicpO2Zvcih2YXIgaT0wLGlsZW49bGluZXMubGVuZ3RoO2k8aWxlbjtpKyspe3ZhciBtLGxpbmU9bGluZXNbaV07aWYobT1saW5lLm1hdGNoKC9eKFxzKilcL1wvQHN0cmluZz0oLiopLykpe2lmKGluc3RyaW5nKXtpZih0aGlzLmVuZ2luZS5kZWJ1Zyl7ci5wdXNoKChtWzJdLmluZGV4T2YoIlxcbiIpIT0tMT8iJyxcblx0IittWzFdKyInIjonJykrbVsyXSk7fWVsc2V7ci5wdXNoKG1bMl0pO319ZWxzZXtyLnB1c2gobVsxXSsici5wdXNoKCciK21bMl0pO2luc3RyaW5nPXRydWU7fX1lbHNle2lmKGluc3RyaW5nKXtyLnB1c2goIicpO1xuIik7fQppbnN0cmluZz1mYWxzZTtyLnB1c2gobGluZSsnXG4nKTt9fQpyZXR1cm4gci5qb2luKCcnKTt9LF9jb21waWxlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMubm9kZS5ub2RlVHlwZSl7Y2FzZSAzOmNhc2UgNDp0aGlzLnRvcF9zdHJpbmcodGhpcy5ub2RlLmRhdGEpO2JyZWFrO2Nhc2UgMTp0aGlzLmNvbXBpbGVfZWxlbWVudCgpO30KdmFyIHI9dGhpcy5fdG9wLmpvaW4oJycpO2lmKHRoaXMucHJvY2Vzc19jaGlsZHJlbil7Zm9yKHZhciBpPTAsaWxlbj10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPGlsZW47aSsrKXt2YXIgY2hpbGQ9dGhpcy5jaGlsZHJlbltpXTtjaGlsZC5faW5kZW50PXRoaXMuX2luZGVudDtyKz1jaGlsZC5fY29tcGlsZSgpO319CnIrPXRoaXMuX2JvdHRvbS5qb2luKCcnKTtyZXR1cm4gcjt9LGZvcm1hdF9leHByZXNzaW9uOmZ1bmN0aW9uKGUpe2lmKFFXZWIyLmV4cHJlc3Npb25zX2NhY2hlW2VdKXtyZXR1cm4gUVdlYjIuZXhwcmVzc2lvbnNfY2FjaGVbZV07fQp2YXIgY2hhcnM9ZS5zcGxpdCgnJyksaW5zdHJpbmc9JycsaW52YXI9JycsaW52YXJfcG9zPTAscj0nJztjaGFycy5wdXNoKCcgJyk7Zm9yKHZhciBpPTAsaWxlbj1jaGFycy5sZW5ndGg7aTxpbGVuO2krKyl7dmFyIGM9Y2hhcnNbaV07aWYoaW5zdHJpbmcubGVuZ3RoKXtpZihjPT09aW5zdHJpbmcmJmNoYXJzW2ktMV0hPT0iXFwiKXtpbnN0cmluZz0nJzt9fWVsc2UgaWYoYz09PSciJ3x8Yz09PSInIil7aW5zdHJpbmc9Yzt9ZWxzZSBpZihjLm1hdGNoKC9bYS16QS1aX1wkXS8pJiYhaW52YXIubGVuZ3RoKXtpbnZhcj1jO2ludmFyX3Bvcz1pO2NvbnRpbnVlO31lbHNlIGlmKGMubWF0Y2goL1xXLykmJmludmFyLmxlbmd0aCl7aWYoY2hhcnNbaW52YXJfcG9zLTFdIT09Jy4nJiZRV2ViMi50b29scy5hcnJheUluZGV4T2YodGhpcy5lbmdpbmUucmVzZXJ2ZWRfd29yZHMsaW52YXIpPDApe2ludmFyPXRoaXMuZW5naW5lLndvcmRfcmVwbGFjZW1lbnRbaW52YXJdfHwoImRpY3RbJyIraW52YXIrIiddIik7fQpyKz1pbnZhcjtpbnZhcj0nJzt9ZWxzZSBpZihpbnZhci5sZW5ndGgpe2ludmFyKz1jO2NvbnRpbnVlO30Kcis9Yzt9CnI9ci5zbGljZSgwLC0xKTtRV2ViMi5leHByZXNzaW9uc19jYWNoZVtlXT1yO3JldHVybiByO30sZm9ybWF0X3N0cjpmdW5jdGlvbihlKXtpZihlPT0nMCcpe3JldHVybidkaWN0WzBdJzt9CnJldHVybiB0aGlzLmZvcm1hdF9leHByZXNzaW9uKGUpO30sc3RyaW5nX2ludGVycG9sYXRpb246ZnVuY3Rpb24ocyl7dmFyIF90aGlzPXRoaXM7aWYoIXMpe3JldHVybiInJyI7fQpmdW5jdGlvbiBhcHBlbmRfbGl0ZXJhbChzKXtzJiZyLnB1c2goX3RoaXMuZW5naW5lLnRvb2xzLmpzX2VzY2FwZShzKSk7fQp2YXIgcmU9Lyg/OiN7KC4rPyl9fHt7KC4rPyl9fSkvZyxzdGFydD0wLHI9W10sbTt3aGlsZShtPXJlLmV4ZWMocykpe2FwcGVuZF9saXRlcmFsKHMuc2xpY2Uoc3RhcnQscmUubGFzdEluZGV4LW1bMF0ubGVuZ3RoKSk7ci5wdXNoKCcoJyt0aGlzLmZvcm1hdF9zdHIobVsyXXx8bVsxXSkrJyknKTtzdGFydD1yZS5sYXN0SW5kZXg7fQphcHBlbmRfbGl0ZXJhbChzLnNsaWNlKHN0YXJ0KSk7cmV0dXJuIHIuam9pbignICsgJyk7fSxpbmRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kZW50Kys7fSxkZWRlbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9pbmRlbnQhPT0wKXtyZXR1cm4gdGhpcy5faW5kZW50LS07fX0sZ2V0X2luZGVudDpmdW5jdGlvbigpe3JldHVybiBuZXcgQXJyYXkodGhpcy5faW5kZW50KzEpLmpvaW4oIlx0Iik7fSx0b3A6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX3RvcC5wdXNoKHRoaXMuZ2V0X2luZGVudCgpK3MrJ1xuJyk7fSx0b3Bfc3RyaW5nOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl90b3AucHVzaCh0aGlzLmdldF9pbmRlbnQoKSsiLy9Ac3RyaW5nPSIrdGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHMsdHJ1ZSkrJ1xuJyk7fSxib3R0b206ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2JvdHRvbS51bnNoaWZ0KHRoaXMuZ2V0X2luZGVudCgpK3MrJ1xuJyk7fSxib3R0b21fc3RyaW5nOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl9ib3R0b20udW5zaGlmdCh0aGlzLmdldF9pbmRlbnQoKSsiLy9Ac3RyaW5nPSIrdGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHMsdHJ1ZSkrJ1xuJyk7fSxjb21waWxlX2VsZW1lbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxpbGVuPXRoaXMuZW5naW5lLmFjdGlvbnNfcHJlY2VkZW5jZS5sZW5ndGg7aTxpbGVuO2krKyl7dmFyIGE9dGhpcy5lbmdpbmUuYWN0aW9uc19wcmVjZWRlbmNlW2ldO2lmKGEgaW4gdGhpcy5hY3Rpb25zKXt2YXIgdmFsdWU9dGhpcy5hY3Rpb25zW2FdO3ZhciBrZXk9J2NvbXBpbGVfYWN0aW9uXycrYTtpZih0aGlzW2tleV0pe3RoaXNba2V5XSh2YWx1ZSk7fWVsc2UgaWYodGhpcy5lbmdpbmVba2V5XSl7dGhpcy5lbmdpbmVba2V5XS5jYWxsKHRoaXMsdmFsdWUpO31lbHNle3RoaXMuZW5naW5lLnRvb2xzLmV4Y2VwdGlvbigiTm8gaGFuZGxlciBtZXRob2QgZm9yIGFjdGlvbiAnIithKyInIik7fX19fSxjb21waWxlX2FjdGlvbl90YWc6ZnVuY3Rpb24oKXtpZih0aGlzLnRhZy50b0xvd2VyQ2FzZSgpIT09dGhpcy5lbmdpbmUucHJlZml4KXt0aGlzLnRvcF9zdHJpbmcoIjwiK3RoaXMudGFnKTtmb3IodmFyIGEgaW4gdGhpcy5hdHRyaWJ1dGVzKXt2YXIgdj10aGlzLmF0dHJpYnV0ZXNbYV07dmFyIGQ9YS5zcGxpdCgnLScpO2lmKGRbMF09PT10aGlzLmVuZ2luZS5wcmVmaXgmJmQubGVuZ3RoPjEpe2lmKGQubGVuZ3RoPT09Mil7dGhpcy50b3AoInIucHVzaChjb250ZXh0LmVuZ2luZS50b29scy5nZW5fYXR0cmlidXRlKCIrKHRoaXMuZm9ybWF0X2V4cHJlc3Npb24odikpKyIpKTsiKTt9ZWxzZXt0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmdlbl9hdHRyaWJ1dGUoWyciK2Quc2xpY2UoMikuam9pbignLScpKyInLCAoIisKKGRbMV09PT0nYXR0Jz90aGlzLmZvcm1hdF9leHByZXNzaW9uKHYpOnRoaXMuc3RyaW5nX2ludGVycG9sYXRpb24odikpKyIpXSkpOyIpO319ZWxzZXt0aGlzLnRvcF9zdHJpbmcodGhpcy5lbmdpbmUudG9vbHMuZ2VuX2F0dHJpYnV0ZShbYSx2XSkpO319CmlmKHRoaXMuYWN0aW9ucy5vcGVudGFnPT09J3RydWUnfHwoIXRoaXMuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLmlzX3ZvaWRfZWxlbWVudCkpe3RoaXMudG9wX3N0cmluZygiLz4iKTt9ZWxzZXt0aGlzLnRvcF9zdHJpbmcoIj4iKTt0aGlzLmJvdHRvbV9zdHJpbmcoIjwvIit0aGlzLnRhZysiPiIpO319fSxjb21waWxlX2FjdGlvbl9pZjpmdW5jdGlvbih2YWx1ZSl7dGhpcy50b3AoImlmICgiKyh0aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKSkrIikgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2VsaWY6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJlbHNlIGlmICgiKyh0aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKSkrIikgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2Vsc2U6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJlbHNlIHsiKTt0aGlzLmJvdHRvbSgifSIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9mb3JlYWNoOmZ1bmN0aW9uKHZhbHVlKXt2YXIgYXM9dGhpcy5hY3Rpb25zWydhcyddfHx2YWx1ZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpO3RoaXMudG9wKCJjb250ZXh0LmVuZ2luZS50b29scy5mb3JlYWNoKGNvbnRleHQsICIrKHRoaXMuZm9ybWF0X2V4cHJlc3Npb24odmFsdWUpKSsiLCAiKyh0aGlzLmVuZ2luZS50b29scy5qc19lc2NhcGUoYXMpKSsiLCBkaWN0LCBmdW5jdGlvbihjb250ZXh0LCBkaWN0KSB7Iik7dGhpcy5ib3R0b20oIn0pOyIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9jYWxsOmZ1bmN0aW9uKHZhbHVlKXtpZih0aGlzLmNoaWxkcmVuLmxlbmd0aD09PTApe3JldHVybiB0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmNhbGwoY29udGV4dCwgIisodGhpcy5zdHJpbmdfaW50ZXJwb2xhdGlvbih2YWx1ZSkpKyIsIGRpY3QpKTsiKTt9ZWxzZXt0aGlzLnRvcCgici5wdXNoKGNvbnRleHQuZW5naW5lLnRvb2xzLmNhbGwoY29udGV4dCwgIisodGhpcy5zdHJpbmdfaW50ZXJwb2xhdGlvbih2YWx1ZSkpKyIsIGRpY3QsIG51bGwsIGZ1bmN0aW9uKGNvbnRleHQsIGRpY3QpIHsiKTt0aGlzLmJvdHRvbSgifSkpOyIpO3RoaXMuaW5kZW50KCk7dGhpcy50b3AoInZhciByID0gW107Iik7cmV0dXJuIHRoaXMuYm90dG9tKCJyZXR1cm4gci5qb2luKCcnKTsiKTt9fSxjb21waWxlX2FjdGlvbl9zZXQ6ZnVuY3Rpb24odmFsdWUpe3ZhciB2YXJpYWJsZT10aGlzLmZvcm1hdF9leHByZXNzaW9uKHZhbHVlKTtpZih0aGlzLmFjdGlvbnNbJ3ZhbHVlJ10pe2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoKXt0aGlzLmVuZ2luZS50b29scy53YXJuaW5nKCJAc2V0IHdpdGggQHZhbHVlIHBsdXMgbm9kZSBjaGlkcmVuIGZvdW5kLiBDaGlsZHJlbiBhcmUgaWdub3JlZC4iKTt9CnRoaXMudG9wKHZhcmlhYmxlKyIgPSAoIisodGhpcy5mb3JtYXRfZXhwcmVzc2lvbih0aGlzLmFjdGlvbnNbJ3ZhbHVlJ10pKSsiKTsiKTt0aGlzLnByb2Nlc3NfY2hpbGRyZW49ZmFsc2U7fWVsc2V7aWYodGhpcy5jaGlsZHJlbi5sZW5ndGg9PT0wKXt0aGlzLnRvcCh2YXJpYWJsZSsiID0gJyc7Iik7fWVsc2UgaWYodGhpcy5jaGlsZHJlbi5sZW5ndGg9PT0xJiZ0aGlzLmNoaWxkcmVuWzBdLm5vZGUubm9kZVR5cGU9PT0zKXt0aGlzLnRvcCh2YXJpYWJsZSsiID0gIisodGhpcy5lbmdpbmUudG9vbHMuanNfZXNjYXBlKHRoaXMuY2hpbGRyZW5bMF0ubm9kZS5kYXRhKSkrIjsiKTt0aGlzLnByb2Nlc3NfY2hpbGRyZW49ZmFsc2U7fWVsc2V7dGhpcy50b3AodmFyaWFibGUrIiA9IChmdW5jdGlvbihkaWN0KSB7Iik7dGhpcy5ib3R0b20oIn0pKGRpY3QpOyIpO3RoaXMuaW5kZW50KCk7dGhpcy50b3AoInZhciByID0gW107Iik7dGhpcy5ib3R0b20oInJldHVybiByLmpvaW4oJycpOyIpO319fSxjb21waWxlX2FjdGlvbl9lc2M6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJ2YXIgdCA9ICIrdGhpcy5mb3JtYXRfc3RyKHZhbHVlKSsiOyIpO3RoaXMudG9wKCJpZiAodCAhPSBudWxsKSByLnB1c2goY29udGV4dC5lbmdpbmUudG9vbHMuaHRtbF9lc2NhcGUodCkpOyIpO3RoaXMudG9wKCJlbHNlIHsiKTt0aGlzLmJvdHRvbSgifSIpO3RoaXMuaW5kZW50KCk7fSxjb21waWxlX2FjdGlvbl9yYXc6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJ2YXIgdCA9ICIrdGhpcy5mb3JtYXRfc3RyKHZhbHVlKSsiOyIpO3RoaXMudG9wKCJpZiAodCAhPSBudWxsKSByLnB1c2godCk7Iik7dGhpcy50b3AoImVsc2UgeyIpO3RoaXMuYm90dG9tKCJ9Iik7dGhpcy5pbmRlbnQoKTt9LGNvbXBpbGVfYWN0aW9uX2pzOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRvcCgiKGZ1bmN0aW9uKCIrdmFsdWUrIikgeyIpO3RoaXMuYm90dG9tKCJ9KShkaWN0KTsiKTt0aGlzLmluZGVudCgpO3ZhciBsaW5lcz10aGlzLmVuZ2luZS50b29scy54bWxfbm9kZV90b19zdHJpbmcodGhpcy5ub2RlLHRydWUpLnNwbGl0KC9ccj9cbi8pO2Zvcih2YXIgaT0wLGlsZW49bGluZXMubGVuZ3RoO2k8aWxlbjtpKyspe3RoaXMudG9wKGxpbmVzW2ldKTt9CnRoaXMucHJvY2Vzc19jaGlsZHJlbj1mYWxzZTt9LGNvbXBpbGVfYWN0aW9uX2RlYnVnOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRvcCgiZGVidWdnZXI7Iik7fSxjb21waWxlX2FjdGlvbl9sb2c6ZnVuY3Rpb24odmFsdWUpe3RoaXMudG9wKCJjb25zb2xlLmxvZygiK3RoaXMuZm9ybWF0X2V4cHJlc3Npb24odmFsdWUpKyIpOyIpO319KTtyZXR1cm4gRWxlbWVudDt9KSgpOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9saWJzL2F1dG9jb21wbGV0ZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuYXV0b2NvbXBsZXRlLmV4dGVuc2lvbnMnLGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnO3ZhciBwcm90bz0kLnVpLmF1dG9jb21wbGV0ZS5wcm90b3R5cGU7dmFyIGluaXRTb3VyY2U9cHJvdG8uX2luaXRTb3VyY2U7ZnVuY3Rpb24gZmlsdGVyKGFycmF5LHRlcm0pe3ZhciBtYXRjaGVyPW5ldyBSZWdFeHAoJC51aS5hdXRvY29tcGxldGUuZXNjYXBlUmVnZXgodGVybSksImkiKTtyZXR1cm4gJC5ncmVwKGFycmF5LGZ1bmN0aW9uKHZhbHVlXyl7cmV0dXJuIG1hdGNoZXIudGVzdCgkKCI8ZGl2PiIpLmh0bWwodmFsdWVfLmxhYmVsfHx2YWx1ZV8udmFsdWV8fHZhbHVlXykudGV4dCgpKTt9KTt9CiQuZXh0ZW5kKHByb3RvLHtfaW5pdFNvdXJjZTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5odG1sJiYkLmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSkpe3RoaXMuc291cmNlPWZ1bmN0aW9uKHJlcXVlc3QscmVzcG9uc2Upe3Jlc3BvbnNlKGZpbHRlcih0aGlzLm9wdGlvbnMuc291cmNlLHJlcXVlc3QudGVybSkpO307fWVsc2V7aW5pdFNvdXJjZS5jYWxsKHRoaXMpO319LF9yZW5kZXJJdGVtOmZ1bmN0aW9uKHVsLGl0ZW0pe3JldHVybiAkKCI8bGk+PC9saT4iKS5kYXRhKCJpdGVtLmF1dG9jb21wbGV0ZSIsaXRlbSkuYXBwZW5kKCQoIjxhPjwvYT4iKVt0aGlzLm9wdGlvbnMuaHRtbD8iaHRtbCI6InRleHQiXShpdGVtLmxhYmVsKSkuYXBwZW5kVG8odWwpLmFkZENsYXNzKGl0ZW0uY2xhc3NuYW1lKTt9LH0pO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9saWJzL2Jvb3RzdHJhcC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuYm9vdHN0cmFwLmV4dGVuc2lvbnMnLGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnO3ZhciBic1Nhbml0aXplV2hpdGVMaXN0PSQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LndoaXRlTGlzdDtic1Nhbml0aXplV2hpdGVMaXN0WycqJ10ucHVzaCgndGl0bGUnLCdzdHlsZScsL15kYXRhLVtcdy1dKy8pO2JzU2FuaXRpemVXaGl0ZUxpc3QuaGVhZGVyPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QubWFpbj1bXTtic1Nhbml0aXplV2hpdGVMaXN0LmZvb3Rlcj1bXTtic1Nhbml0aXplV2hpdGVMaXN0LmNhcHRpb249W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5jb2w9WydzcGFuJ107YnNTYW5pdGl6ZVdoaXRlTGlzdC5jb2xncm91cD1bJ3NwYW4nXTtic1Nhbml0aXplV2hpdGVMaXN0LnRhYmxlPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QudGhlYWQ9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC50Ym9keT1bXTtic1Nhbml0aXplV2hpdGVMaXN0LnRmb290ZXI9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC50cj1bXTtic1Nhbml0aXplV2hpdGVMaXN0LnRoPVsnY29sc3BhbicsJ3Jvd3NwYW4nXTtic1Nhbml0aXplV2hpdGVMaXN0LnRkPVsnY29sc3BhbicsJ3Jvd3NwYW4nXTtic1Nhbml0aXplV2hpdGVMaXN0LmFkZHJlc3M9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5hcnRpY2xlPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3QuYXNpZGU9W107YnNTYW5pdGl6ZVdoaXRlTGlzdC5ibG9ja3F1b3RlPVtdO2JzU2FuaXRpemVXaGl0ZUxpc3Quc2VjdGlvbj1bXTtic1Nhbml0aXplV2hpdGVMaXN0LmJ1dHRvbj1bJ3R5cGUnXTtic1Nhbml0aXplV2hpdGVMaXN0LmRlbD1bXTtmdW5jdGlvbiBtYWtlRXh0ZW5kZWRTYW5pdGl6ZVdoaXRlTGlzdChleHRlbnNpb25zKXt2YXIgd2hpdGVMaXN0PV8uY2xvbmUoJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRlZmF1bHQud2hpdGVMaXN0KTtPYmplY3Qua2V5cyhleHRlbnNpb25zKS5mb3JFYWNoKGtleT0+e3doaXRlTGlzdFtrZXldPSh3aGl0ZUxpc3Rba2V5XXx8W10pLmNvbmNhdChleHRlbnNpb25zW2tleV0pO30pO3JldHVybiB3aGl0ZUxpc3Q7fQokLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC5wbGFjZW1lbnQ9J2F1dG8nOyQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LmZhbGxiYWNrUGxhY2VtZW50PVsnYm90dG9tJywncmlnaHQnLCdsZWZ0JywndG9wJ107JC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRlZmF1bHQuaHRtbD10cnVlOyQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LnRyaWdnZXI9J2hvdmVyJzskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuRGVmYXVsdC5jb250YWluZXI9J2JvZHknOyQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LmJvdW5kYXJ5PSd3aW5kb3cnOyQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5EZWZhdWx0LmRlbGF5PXtzaG93OjEwMDAsaGlkZTowfTt2YXIgYm9vdHN0cmFwU2hvd0Z1bmN0aW9uPSQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5wcm90b3R5cGUuc2hvdzskLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXskKCcudG9vbHRpcCcpLnJlbW92ZSgpO3JldHVybiBib290c3RyYXBTaG93RnVuY3Rpb24uY2FsbCh0aGlzKTt9O3JldHVybnttYWtlRXh0ZW5kZWRTYW5pdGl6ZVdoaXRlTGlzdDptYWtlRXh0ZW5kZWRTYW5pdGl6ZVdoaXRlTGlzdCx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9saWJzL2pxdWVyeS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuanF1ZXJ5LmV4dGVuc2lvbnMnLGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnOyQuZXh0ZW5kKCQuZXhwclsnOiddLHtjb250YWluc0xpa2U6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gZWxlbWVudC5pbm5lckhUTUwudG9VcHBlckNhc2UoKS5pbmRleE9mKG1hdGNoZXNbM10udG9VcHBlckNhc2UoKSk+PTA7fSxjb250YWluc1RleHRMaWtlOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuIGVsZW1lbnQuaW5uZXJUZXh0LnRvVXBwZXJDYXNlKCkuaW5kZXhPZihtYXRjaGVzWzNdLnRvVXBwZXJDYXNlKCkpPj0wO30sY29udGFpbnNFeGFjdDpmdW5jdGlvbihlbGVtZW50LGluZGV4LG1hdGNoZXMpe3JldHVybiAkLnRyaW0oZWxlbWVudC5pbm5lckhUTUwpPT09bWF0Y2hlc1szXTt9LGNvbnRhaW5zUmVnZXg6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgcmVncmVnPS9eXC8oKD86XFxcL3xbXlwvXSkrKVwvKFttaWddezAsM30pJC8scmVnPXJlZ3JlZy5leGVjKG1hdGNoZXNbM10pO3JldHVybiByZWc/bmV3IFJlZ0V4cChyZWdbMV0scmVnWzJdKS50ZXN0KCQudHJpbShlbGVtZW50LmlubmVySFRNTCkpOmZhbHNlO30scHJvcENoZWNrZWQ6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gJChlbGVtZW50KS5wcm9wKCJjaGVja2VkIik9PT10cnVlO30scHJvcFNlbGVjdGVkOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkucHJvcCgic2VsZWN0ZWQiKT09PXRydWU7fSxwcm9wVmFsdWU6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXtyZXR1cm4gJChlbGVtZW50KS5wcm9wKCJ2YWx1ZSIpPT09bWF0Y2hlc1szXTt9LHByb3BWYWx1ZUNvbnRhaW5zOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkucHJvcCgidmFsdWUiKSYmJChlbGVtZW50KS5wcm9wKCJ2YWx1ZSIpLmluZGV4T2YobWF0Y2hlc1szXSkhPT0tMTt9LGhhc0RhdGE6ZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuISFfLnRvQXJyYXkoZWxlbWVudC5kYXRhc2V0KS5sZW5ndGg7fSxkYXRhOmZ1bmN0aW9uKGVsZW1lbnQsaW5kZXgsbWF0Y2hlcyl7cmV0dXJuICQoZWxlbWVudCkuZGF0YShtYXRjaGVzWzNdKTt9LGhhc1Zpc2liaWxpdHk6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgJGVsZW1lbnQ9JChlbGVtZW50KTtpZigkKGVsZW1lbnQpLmNzcygndmlzaWJpbGl0eScpPT09J2hpZGRlbicpe3JldHVybiBmYWxzZTt9CnZhciAkcGFyZW50PSRlbGVtZW50LnBhcmVudCgpO2lmKCEkcGFyZW50Lmxlbmd0aHx8JGVsZW1lbnQuaXMoJ2h0bWwnKSl7cmV0dXJuIHRydWU7fQpyZXR1cm4gJHBhcmVudC5pcygnOmhhc1Zpc2liaWxpdHknKTt9LGhhc09wYWNpdHk6ZnVuY3Rpb24oZWxlbWVudCxpbmRleCxtYXRjaGVzKXt2YXIgJGVsZW1lbnQ9JChlbGVtZW50KTtpZihwYXJzZUZsb2F0KCQoZWxlbWVudCkuY3NzKCdvcGFjaXR5JykpPD0wLjAxKXtyZXR1cm4gZmFsc2U7fQp2YXIgJHBhcmVudD0kZWxlbWVudC5wYXJlbnQoKTtpZighJHBhcmVudC5sZW5ndGh8fCRlbGVtZW50LmlzKCdodG1sJykpe3JldHVybiB0cnVlO30KcmV0dXJuICRwYXJlbnQuaXMoJzpoYXNPcGFjaXR5Jyk7fSx9KTskLmZuLmV4dGVuZCh7Z2V0QXR0cmlidXRlczpmdW5jdGlvbigpe3ZhciBvPXt9O2lmKHRoaXMubGVuZ3RoKXt2YXIgYXR0cnM9dGhpc1swXS5hdHRyaWJ1dGVzO2Zvcih2YXIgaT0wLGw9YXR0cnMubGVuZ3RoO2k8bDtpKyspe3ZhciBhdHRyPWF0dHJzLml0ZW0oaSk7b1thdHRyLm5hbWVdPWF0dHIudmFsdWU7fX0KcmV0dXJuIG87fSxvZG9vQm91bmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciAkZWw9JCh0aGlzKTskZWwuYWRkQ2xhc3MoJ29fY2F0Y2hfYXR0ZW50aW9uJyk7c2V0VGltZW91dChmdW5jdGlvbigpeyRlbC5yZW1vdmVDbGFzcygnb19jYXRjaF9hdHRlbnRpb24nKTt9LDQwMCk7fSk7fSxwcmVwZW5kRXZlbnQ6ZnVuY3Rpb24oZXZlbnRzLHNlbGVjdG9yLGRhdGEsaGFuZGxlcil7dGhpcy5vbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZXZlbnRzPWV2ZW50cy5zcGxpdCgnICcpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZWw9dGhpcztfLmVhY2goZXZlbnRzLGZ1bmN0aW9uKGV2TmFtZU5hbWVzcGFjZWQpe3ZhciBldk5hbWU9ZXZOYW1lTmFtZXNwYWNlZC5zcGxpdCgnLicpWzBdO3ZhciBoYW5kbGVyPSQuX2RhdGEoZWwsJ2V2ZW50cycpW2V2TmFtZV0ucG9wKCk7JC5fZGF0YShlbCwnZXZlbnRzJylbZXZOYW1lXS51bnNoaWZ0KGhhbmRsZXIpO30pO30pO30sfSk7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2xpYnMvZG93bmxvYWQuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLmRvd25sb2FkJyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBkb3dubG9hZChkYXRhLGZpbGVuYW1lLG1pbWV0eXBlKXt2YXIgc2VsZj13aW5kb3csZGVmYXVsdE1pbWU9ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsbWltZVR5cGU9bWltZXR5cGV8fGRlZmF1bHRNaW1lLHBheWxvYWQ9ZGF0YSx1cmw9IWZpbGVuYW1lJiYhbWltZXR5cGUmJnBheWxvYWQsYW5jaG9yPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSx0b1N0cmluZz1mdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpO30sbXlCbG9iPShzZWxmLkJsb2J8fHNlbGYuTW96QmxvYnx8c2VsZi5XZWJLaXRCbG9ifHx0b1N0cmluZyksZmlsZU5hbWU9ZmlsZW5hbWV8fCJkb3dubG9hZCIsYmxvYixyZWFkZXI7bXlCbG9iPW15QmxvYi5jYWxsP215QmxvYi5iaW5kKHNlbGYpOkJsb2I7aWYoU3RyaW5nKHRoaXMpPT09InRydWUiKXtwYXlsb2FkPVtwYXlsb2FkLG1pbWVUeXBlXTttaW1lVHlwZT1wYXlsb2FkWzBdO3BheWxvYWQ9cGF5bG9hZFsxXTt9CmlmKHVybCYmdXJsLmxlbmd0aDwyMDQ4KXtmaWxlTmFtZT11cmwuc3BsaXQoIi8iKS5wb3AoKS5zcGxpdCgiPyIpWzBdO2FuY2hvci5ocmVmPXVybDtpZihhbmNob3IuaHJlZi5pbmRleE9mKHVybCkhPT0tMSl7dmFyIGFqYXg9bmV3IFhNTEh0dHBSZXF1ZXN0KCk7YWpheC5vcGVuKCJHRVQiLHVybCx0cnVlKTthamF4LnJlc3BvbnNlVHlwZT0nYmxvYic7YWpheC5vbmxvYWQ9ZnVuY3Rpb24oZSl7ZG93bmxvYWQoZS50YXJnZXQucmVzcG9uc2UsZmlsZU5hbWUsZGVmYXVsdE1pbWUpO307c2V0VGltZW91dChmdW5jdGlvbigpe2FqYXguc2VuZCgpO30sMCk7cmV0dXJuIGFqYXg7fX0KaWYoL15kYXRhOltcdytcLV0rXC9bXHcrXC1dK1ssO10vLnRlc3QocGF5bG9hZCkpe2lmKHBheWxvYWQubGVuZ3RoPigxMDI0KjEwMjQqMS45OTkpJiZteUJsb2IhPT10b1N0cmluZyl7cGF5bG9hZD1kYXRhVXJsVG9CbG9iKHBheWxvYWQpO21pbWVUeXBlPXBheWxvYWQudHlwZXx8ZGVmYXVsdE1pbWU7fWVsc2V7cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVCbG9iP25hdmlnYXRvci5tc1NhdmVCbG9iKGRhdGFVcmxUb0Jsb2IocGF5bG9hZCksZmlsZU5hbWUpOnNhdmVyKHBheWxvYWQpO319CmJsb2I9cGF5bG9hZCBpbnN0YW5jZW9mIG15QmxvYj9wYXlsb2FkOm5ldyBteUJsb2IoW3BheWxvYWRdLHt0eXBlOm1pbWVUeXBlfSk7ZnVuY3Rpb24gZGF0YVVybFRvQmxvYihzdHJVcmwpe3ZhciBwYXJ0cz1zdHJVcmwuc3BsaXQoL1s6OyxdLyksdHlwZT1wYXJ0c1sxXSxkZWNvZGVyPXBhcnRzWzJdPT09ImJhc2U2NCI/YXRvYjpkZWNvZGVVUklDb21wb25lbnQsYmluRGF0YT1kZWNvZGVyKHBhcnRzLnBvcCgpKSxteD1iaW5EYXRhLmxlbmd0aCxpPTAsdWlBcnI9bmV3IFVpbnQ4QXJyYXkobXgpO2ZvcihpO2k8bXg7KytpKXVpQXJyW2ldPWJpbkRhdGEuY2hhckNvZGVBdChpKTtyZXR1cm4gbmV3IG15QmxvYihbdWlBcnJdLHt0eXBlOnR5cGV9KTt9CmZ1bmN0aW9uIHNhdmVyKHVybCx3aW5Nb2RlKXtpZignZG93bmxvYWQnaW4gYW5jaG9yKXthbmNob3IuaHJlZj11cmw7YW5jaG9yLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLGZpbGVOYW1lKTthbmNob3IuY2xhc3NOYW1lPSJkb3dubG9hZC1qcy1saW5rIjthbmNob3IuaW5uZXJIVE1MPSJkb3dubG9hZGluZy4uLiI7YW5jaG9yLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YW5jaG9yLmNsaWNrKCk7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhbmNob3IpO2lmKHdpbk1vZGU9PT10cnVlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi5VUkwucmV2b2tlT2JqZWN0VVJMKGFuY2hvci5ocmVmKTt9LDI1MCk7fX0sNjYpO3JldHVybiB0cnVlO30KaWYoLyhWZXJzaW9uKVwvKFxkKylcLihcZCspKD86XC4oXGQrKSk/LipTYWZhcmlcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7dXJsPXVybC5yZXBsYWNlKC9eZGF0YTooW1x3XC9cLStdKykvLGRlZmF1bHRNaW1lKTtpZighd2luZG93Lm9wZW4odXJsKSl7aWYoY29uZmlybSgiRGlzcGxheWluZyBOZXcgRG9jdW1lbnRcblxuVXNlIFNhdmUgQXMuLi4gdG8gZG93bmxvYWQsIHRoZW4gY2xpY2sgYmFjayB0byByZXR1cm4gdG8gdGhpcyBwYWdlLiIpKXtsb2NhdGlvbi5ocmVmPXVybDt9fQpyZXR1cm4gdHJ1ZTt9CnZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZik7aWYoIXdpbk1vZGUpe3VybD0iZGF0YToiK3VybC5yZXBsYWNlKC9eZGF0YTooW1x3XC9cLStdKykvLGRlZmF1bHRNaW1lKTt9CmYuc3JjPXVybDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmKTt9LDMzMyk7fQppZihuYXZpZ2F0b3IubXNTYXZlQmxvYil7cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsZmlsZU5hbWUpO30KaWYoc2VsZi5VUkwpe3NhdmVyKHNlbGYuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSx0cnVlKTt9ZWxzZXtpZih0eXBlb2YgYmxvYj09PSJzdHJpbmcifHxibG9iLmNvbnN0cnVjdG9yPT09dG9TdHJpbmcpe3RyeXtyZXR1cm4gc2F2ZXIoImRhdGE6IittaW1lVHlwZSsiO2Jhc2U2NCwiK3NlbGYuYnRvYShibG9iKSk7fWNhdGNoKHkpe3JldHVybiBzYXZlcigiZGF0YToiK21pbWVUeXBlKyIsIitlbmNvZGVVUklDb21wb25lbnQoYmxvYikpO319CnJlYWRlcj1uZXcgRmlsZVJlYWRlcigpO3JlYWRlci5vbmxvYWQ9ZnVuY3Rpb24oKXtzYXZlcih0aGlzLnJlc3VsdCk7fTtyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTt9CnJldHVybiB0cnVlO307fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2xpYnMvY29udGVudC1kaXNwb3NpdGlvbi5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuY29udGVudGRpc3Bvc2l0aW9uJyxmdW5jdGlvbigpeyd1c2Ugc3RyaWN0Jzt2YXIgSEVYX0VTQ0FQRV9SRVBMQUNFX1JFR0VYUD0vJShbMC05QS1GYS1mXXsyfSkvZzt2YXIgTk9OX0xBVElOMV9SRUdFWFA9L1teXHgyMC1ceDdlXHhhMC1ceGZmXS9nO3ZhciBRRVNDX1JFR0VYUD0vXFwoW1x1MDAwMC1cdTAwN2ZdKS9nO3ZhciBQQVJBTV9SRUdFWFA9LztbXHgwOVx4MjBdKihbISMkJSYnKisuMC05QS1aXl9gYS16fH4tXSspW1x4MDlceDIwXSo9W1x4MDlceDIwXSooIig/OltceDIwIVx4MjMtXHg1Ylx4NWQtXHg3ZVx4ODAtXHhmZl18XFxbXHgyMC1ceDdlXSkqInxbISMkJSYnKisuMC05QS1aXl9gYS16fH4tXSspW1x4MDlceDIwXSovZzt2YXIgRVhUX1ZBTFVFX1JFR0VYUD0vXihbQS1aYS16MC05ISMkJSYrXC1eX2B7fX5dKyknKD86W0EtWmEtel17MiwzfSg/Oi1bQS1aYS16XXszfSl7MCwzfXxbQS1aYS16XXs0LDh9fCknKCg/OiVbMC05QS1GYS1mXXsyfXxbQS1aYS16MC05ISMkJisuXl9gfH4tXSkrKSQvO3ZhciBESVNQT1NJVElPTl9UWVBFX1JFR0VYUD0vXihbISMkJSYnKisuMC05QS1aXl9gYS16fH4tXSspW1x4MDlceDIwXSooPzokfDspLztmdW5jdGlvbiBkZWNvZGVmaWVsZChzdHIpe3ZhciBtYXRjaD1FWFRfVkFMVUVfUkVHRVhQLmV4ZWMoc3RyKTtpZighbWF0Y2gpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgZXh0ZW5kZWQgZmllbGQgdmFsdWUnKX0KdmFyIGNoYXJzZXQ9bWF0Y2hbMV0udG9Mb3dlckNhc2UoKTt2YXIgZW5jb2RlZD1tYXRjaFsyXTtzd2l0Y2goY2hhcnNldCl7Y2FzZSdpc28tODg1OS0xJzpyZXR1cm4gZW5jb2RlZC5yZXBsYWNlKEhFWF9FU0NBUEVfUkVQTEFDRV9SRUdFWFAscGRlY29kZSkucmVwbGFjZShOT05fTEFUSU4xX1JFR0VYUCwnPycpO2Nhc2UndXRmLTgnOnJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZCk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCBjaGFyc2V0IGluIGV4dGVuZGVkIGZpZWxkJyl9fQpmdW5jdGlvbiBwYXJzZShzdHJpbmcpe2lmKCFzdHJpbmd8fHR5cGVvZiBzdHJpbmchPT0nc3RyaW5nJyl7dGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc3RyaW5nIGlzIHJlcXVpcmVkJyl9CnZhciBtYXRjaD1ESVNQT1NJVElPTl9UWVBFX1JFR0VYUC5leGVjKHN0cmluZyk7aWYoIW1hdGNoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHR5cGUgZm9ybWF0Jyl9CnZhciBpbmRleD1tYXRjaFswXS5sZW5ndGg7dmFyIHR5cGU9bWF0Y2hbMV0udG9Mb3dlckNhc2UoKTt2YXIga2V5O3ZhciBuYW1lcz1bXTt2YXIgcGFyYW1zPXt9O3ZhciB2YWx1ZTtpbmRleD1QQVJBTV9SRUdFWFAubGFzdEluZGV4PW1hdGNoWzBdLnN1YnN0cigtMSk9PT0nOyc/aW5kZXgtMTppbmRleDt3aGlsZSgobWF0Y2g9UEFSQU1fUkVHRVhQLmV4ZWMoc3RyaW5nKSkpe2lmKG1hdGNoLmluZGV4IT09aW5kZXgpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGFyYW1ldGVyIGZvcm1hdCcpfQppbmRleCs9bWF0Y2hbMF0ubGVuZ3RoO2tleT1tYXRjaFsxXS50b0xvd2VyQ2FzZSgpO3ZhbHVlPW1hdGNoWzJdO2lmKG5hbWVzLmluZGV4T2Yoa2V5KSE9PS0xKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGR1cGxpY2F0ZSBwYXJhbWV0ZXInKX0KbmFtZXMucHVzaChrZXkpO2lmKGtleS5pbmRleE9mKCcqJykrMT09PWtleS5sZW5ndGgpe2tleT1rZXkuc2xpY2UoMCwtMSk7dmFsdWU9ZGVjb2RlZmllbGQodmFsdWUpO3BhcmFtc1trZXldPXZhbHVlO2NvbnRpbnVlfQppZih0eXBlb2YgcGFyYW1zW2tleV09PT0nc3RyaW5nJyl7Y29udGludWV9CmlmKHZhbHVlWzBdPT09JyInKXt2YWx1ZT12YWx1ZS5zdWJzdHIoMSx2YWx1ZS5sZW5ndGgtMikucmVwbGFjZShRRVNDX1JFR0VYUCwnJDEnKX0KcGFyYW1zW2tleV09dmFsdWV9CmlmKGluZGV4IT09LTEmJmluZGV4IT09c3RyaW5nLmxlbmd0aCl7dGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBwYXJhbWV0ZXIgZm9ybWF0Jyl9CnJldHVybiBuZXcgQ29udGVudERpc3Bvc2l0aW9uKHR5cGUscGFyYW1zKX0KZnVuY3Rpb24gcGRlY29kZShzdHIsaGV4KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXgsMTYpKX0KZnVuY3Rpb24gQ29udGVudERpc3Bvc2l0aW9uKHR5cGUscGFyYW1ldGVycyl7dGhpcy50eXBlPXR5cGU7dGhpcy5wYXJhbWV0ZXJzPXBhcmFtZXRlcnN9CnJldHVybntwYXJzZTpwYXJzZSx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9saWJzL3VuZGVyc2NvcmUuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpfLmNhbmNlbGxhYmxlVGhyb3R0bGVSZW1vdmVNZVNvb249ZnVuY3Rpb24oZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciB0aW1lb3V0LGNvbnRleHQsYXJncyxyZXN1bHQ7dmFyIHByZXZpb3VzPTA7aWYoIW9wdGlvbnMpb3B0aW9ucz17fTt2YXIgbGF0ZXI9ZnVuY3Rpb24oKXtwcmV2aW91cz1vcHRpb25zLmxlYWRpbmc9PT1mYWxzZT8wOl8ubm93KCk7dGltZW91dD1udWxsO3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fTt2YXIgdGhyb3R0bGVkPWZ1bmN0aW9uKCl7dmFyIG5vdz1fLm5vdygpO2lmKCFwcmV2aW91cyYmb3B0aW9ucy5sZWFkaW5nPT09ZmFsc2UpcHJldmlvdXM9bm93O3ZhciByZW1haW5pbmc9d2FpdC0obm93LXByZXZpb3VzKTtjb250ZXh0PXRoaXM7YXJncz1hcmd1bWVudHM7aWYocmVtYWluaW5nPD0wfHxyZW1haW5pbmc+d2FpdCl7aWYodGltZW91dCl7Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO3RpbWVvdXQ9bnVsbDt9CnByZXZpb3VzPW5vdztyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO2lmKCF0aW1lb3V0KWNvbnRleHQ9YXJncz1udWxsO31lbHNlIGlmKCF0aW1lb3V0JiZvcHRpb25zLnRyYWlsaW5nIT09ZmFsc2Upe3RpbWVvdXQ9c2V0VGltZW91dChsYXRlcixyZW1haW5pbmcpO30KcmV0dXJuIHJlc3VsdDt9O3Rocm90dGxlZC5jYW5jZWw9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGltZW91dCk7cHJldmlvdXM9MDt0aW1lb3V0PWNvbnRleHQ9YXJncz1udWxsO307cmV0dXJuIHRocm90dGxlZDt9OzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2Fic3RyYWN0X3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLkFic3RyYWN0U2VydmljZScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTt2YXIgTWl4aW5zPXJlcXVpcmUoJ3dlYi5taXhpbnMnKTt2YXIgU2VydmljZXNNaXhpbj1yZXF1aXJlKCd3ZWIuU2VydmljZXNNaXhpbicpO3ZhciBBYnN0cmFjdFNlcnZpY2U9Q2xhc3MuZXh0ZW5kKE1peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbixTZXJ2aWNlc01peGluLHtkZXBlbmRlbmNpZXM6W10saW5pdDpmdW5jdGlvbihwYXJlbnQpe01peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbi5pbml0LmNhbGwodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0UGFyZW50KHBhcmVudCk7fSxzdGFydDpmdW5jdGlvbigpe30sfSk7cmV0dXJuIEFic3RyYWN0U2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9hYnN0cmFjdF9zdG9yYWdlX3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLkFic3RyYWN0U3RvcmFnZVNlcnZpY2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgQWJzdHJhY3RTZXJ2aWNlPXJlcXVpcmUoJ3dlYi5BYnN0cmFjdFNlcnZpY2UnKTt2YXIgQWJzdHJhY3RTdG9yYWdlU2VydmljZT1BYnN0cmFjdFNlcnZpY2UuZXh0ZW5kKHtzdG9yYWdlOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe2lmKCh0aGlzLnN0b3JhZ2V8fHt9KS5kZXN0cm95KXt0aGlzLnN0b3JhZ2UuZGVzdHJveSgpO30KdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnN0b3JhZ2UuY2xlYXIoKTt9LGdldEl0ZW06ZnVuY3Rpb24oa2V5LGRlZmF1bHRWYWx1ZSl7dmFyIHZhbD10aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO3JldHVybiB2YWw/SlNPTi5wYXJzZSh2YWwpOmRlZmF1bHRWYWx1ZTt9LGtleTpmdW5jdGlvbihpbmRleCl7cmV0dXJuIHRoaXMuc3RvcmFnZS5rZXkoaW5kZXgpO30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmFnZS5sZW5ndGg7fSxyZW1vdmVJdGVtOmZ1bmN0aW9uKGtleSl7dGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTt9LHNldEl0ZW06ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksSlNPTi5zdHJpbmdpZnkodmFsdWUpKTt9LG9uU3RvcmFnZTpmdW5jdGlvbigpe3RoaXMuc3RvcmFnZS5vbi5hcHBseSh0aGlzLnN0b3JhZ2UsWyJzdG9yYWdlIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTt9LH0pO3JldHVybiBBYnN0cmFjdFN0b3JhZ2VTZXJ2aWNlO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2FqYXguanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLmFqYXgnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgY29uY3VycmVuY3k9cmVxdWlyZSgnd2ViLmNvbmN1cnJlbmN5Jyk7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgdGltZT1yZXF1aXJlKCd3ZWIudGltZScpO3ZhciBkb3dubG9hZD1yZXF1aXJlKCd3ZWIuZG93bmxvYWQnKTt2YXIgY29udGVudGRpc3Bvc2l0aW9uPXJlcXVpcmUoJ3dlYi5jb250ZW50ZGlzcG9zaXRpb24nKTt2YXIgX3Q9Y29yZS5fdDt2YXIgYWpheD17fTtmdW5jdGlvbiBfZ2VuZXJpY0pzb25ScGMoZmN0X25hbWUscGFyYW1zLHNldHRpbmdzLGZjdCl7dmFyIHNoYWRvdz1zZXR0aW5ncy5zaGFkb3d8fGZhbHNlO2RlbGV0ZSBzZXR0aW5ncy5zaGFkb3c7aWYoIXNoYWRvdyl7Y29yZS5idXMudHJpZ2dlcigncnBjX3JlcXVlc3QnKTt9CnZhciBkYXRhPXtqc29ucnBjOiIyLjAiLG1ldGhvZDpmY3RfbmFtZSxwYXJhbXM6cGFyYW1zLGlkOk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKjEwMDAqMTAwMCl9O3ZhciB4aHI9ZmN0KGRhdGEpO3ZhciByZXN1bHQ9eGhyLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGM6cmVzdWx0JyxkYXRhLHJlc3VsdCk7aWYocmVzdWx0LmVycm9yIT09dW5kZWZpbmVkKXtpZihyZXN1bHQuZXJyb3IuZGF0YS5hcmd1bWVudHNbMF0hPT0iYnVzLkJ1cyBub3QgYXZhaWxhYmxlIGluIHRlc3QgbW9kZSIpe2NvbnNvbGUuZGVidWcoIlNlcnZlciBhcHBsaWNhdGlvbiBlcnJvclxuIiwiRXJyb3IgY29kZToiLHJlc3VsdC5lcnJvci5jb2RlLCJcbiIsIkVycm9yIG1lc3NhZ2U6IixyZXN1bHQuZXJyb3IubWVzc2FnZSwiXG4iLCJFcnJvciBkYXRhIG1lc3NhZ2U6XG4iLHJlc3VsdC5lcnJvci5kYXRhLm1lc3NhZ2UsIlxuIiwiRXJyb3IgZGF0YSBkZWJ1ZzpcbiIscmVzdWx0LmVycm9yLmRhdGEuZGVidWcpO30KcmV0dXJuIFByb21pc2UucmVqZWN0KHt0eXBlOiJzZXJ2ZXIiLGVycm9yOnJlc3VsdC5lcnJvcn0pO31lbHNle3JldHVybiByZXN1bHQucmVzdWx0O319LGZ1bmN0aW9uKCl7dmFyIHJlYXNvbj17dHlwZTonY29tbXVuaWNhdGlvbicsZXJyb3I6YXJndW1lbnRzWzBdLHRleHRTdGF0dXM6YXJndW1lbnRzWzFdLGVycm9yVGhyb3duOmFyZ3VtZW50c1syXSx9O3JldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO30pO3ZhciByZWplY3Rpb247dmFyIHByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3JlamVjdGlvbj1yZWplY3Q7cmVzdWx0LnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZighc2hhZG93KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGNfcmVzcG9uc2UnKTt9CnJlc29sdmUocmVzdWx0KTt9LGZ1bmN0aW9uKHJlYXNvbil7dmFyIHR5cGU9cmVhc29uLnR5cGU7dmFyIGVycm9yPXJlYXNvbi5lcnJvcjt2YXIgdGV4dFN0YXR1cz1yZWFzb24udGV4dFN0YXR1czt2YXIgZXJyb3JUaHJvd249cmVhc29uLmVycm9yVGhyb3duO2lmKHR5cGU9PT0ic2VydmVyIil7aWYoIXNoYWRvdyl7Y29yZS5idXMudHJpZ2dlcigncnBjX3Jlc3BvbnNlJyk7fQppZihlcnJvci5jb2RlPT09MTAwKXtjb3JlLmJ1cy50cmlnZ2VyKCdpbnZhbGlkYXRlX3Nlc3Npb24nKTt9CnJlamVjdCh7bWVzc2FnZTplcnJvcixldmVudDokLkV2ZW50KCl9KTt9ZWxzZXtpZighc2hhZG93KXtjb3JlLmJ1cy50cmlnZ2VyKCdycGNfcmVzcG9uc2VfZmFpbGVkJyk7fQp2YXIgbmVycm9yPXtjb2RlOi0zMjA5OCxtZXNzYWdlOiJYbWxIdHRwUmVxdWVzdEVycm9yICIrZXJyb3JUaHJvd24sZGF0YTp7dHlwZToieGhyIit0ZXh0U3RhdHVzLGRlYnVnOmVycm9yLnJlc3BvbnNlVGV4dCxvYmplY3RzOltlcnJvcixlcnJvclRocm93bl19LH07cmVqZWN0KHttZXNzYWdlOm5lcnJvcixldmVudDokLkV2ZW50KCl9KTt9fSk7fSk7cHJvbWlzZS5hYm9ydD1mdW5jdGlvbigpe3JlamVjdGlvbih7bWVzc2FnZToiWG1sSHR0cFJlcXVlc3RFcnJvciBhYm9ydCIsZXZlbnQ6JC5FdmVudCgnYWJvcnQnKX0pO2lmKHhoci5hYm9ydCl7eGhyLmFib3J0KCk7fX07cHJvbWlzZS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24ocmVhc29uKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoIXJlYXNvbi5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7Y29yZS5idXMudHJpZ2dlcigncnBjX2Vycm9yJyxyZWFzb24ubWVzc2FnZSxyZWFzb24uZXZlbnQpO319LDApO30pO3JldHVybiBwcm9taXNlO307ZnVuY3Rpb24ganNvblJwYyh1cmwsZmN0X25hbWUscGFyYW1zLHNldHRpbmdzKXtzZXR0aW5ncz1zZXR0aW5nc3x8e307cmV0dXJuIF9nZW5lcmljSnNvblJwYyhmY3RfbmFtZSxwYXJhbXMsc2V0dGluZ3MsZnVuY3Rpb24oZGF0YSl7cmV0dXJuICQuYWpheCh1cmwsXy5leHRlbmQoe30sc2V0dGluZ3Mse3VybDp1cmwsZGF0YVR5cGU6J2pzb24nLHR5cGU6J1BPU1QnLGRhdGE6SlNPTi5zdHJpbmdpZnkoZGF0YSx0aW1lLmRhdGVfdG9fdXRjKSxjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbid9KSk7fSk7fQpmdW5jdGlvbiBycGModXJsLHBhcmFtcyxzZXR0aW5ncyl7cmV0dXJuIGpzb25ScGModXJsLCdjYWxsJyxwYXJhbXMsc2V0dGluZ3MpO30KdmFyIGxvYWRDU1M9KGZ1bmN0aW9uKCl7dmFyIHVybERlZnM9e307cmV0dXJuIGZ1bmN0aW9uIGxvYWRDU1ModXJsKXtpZih1cmwgaW4gdXJsRGVmcyl7fWVsc2UgaWYoJCgnbGlua1tocmVmPSInK3VybCsnIl0nKS5sZW5ndGgpe3VybERlZnNbdXJsXT1Qcm9taXNlLnJlc29sdmUoKTt9ZWxzZXt2YXIgJGxpbms9JCgnPGxpbms+Jyx7J2hyZWYnOnVybCwncmVsJzonc3R5bGVzaGVldCcsJ3R5cGUnOid0ZXh0L2Nzcyd9KTt1cmxEZWZzW3VybF09bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3QpeyRsaW5rLm9uKCdsb2FkJyxmdW5jdGlvbigpe3Jlc29sdmUoKTt9KTt9KTskKCdoZWFkJykuYXBwZW5kKCRsaW5rKTt9CnJldHVybiB1cmxEZWZzW3VybF07fTt9KSgpO3ZhciBsb2FkSlM9KGZ1bmN0aW9uKCl7dmFyIGRlcGVuZGVuY2llc1Byb21pc2U9e307dmFyIGxvYWQ9ZnVuY3Rpb24gbG9hZEpTKHVybCl7dmFyIGFscmVhZHlSZXF1aXJlZD0oJCgnc2NyaXB0W3NyYz0iJyt1cmwrJyJdJykubGVuZ3RoPjApO2lmKHVybCBpbiBkZXBlbmRlbmNpZXNQcm9taXNlKXtyZXR1cm4gZGVwZW5kZW5jaWVzUHJvbWlzZVt1cmxdO30KdmFyIHNjcmlwdExvYWRlZFByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2lmKGFscmVhZHlSZXF1aXJlZCl7cmVzb2x2ZSgpO31lbHNle3ZhciBzY3JpcHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7c2NyaXB0LnR5cGU9J3RleHQvamF2YXNjcmlwdCc7c2NyaXB0LnNyYz11cmw7c2NyaXB0Lm9ubG9hZD1zY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoKHNjcmlwdC5yZWFkeVN0YXRlJiZzY3JpcHQucmVhZHlTdGF0ZSE9PSJsb2FkZWQiJiZzY3JpcHQucmVhZHlTdGF0ZSE9PSJjb21wbGV0ZSIpfHxzY3JpcHQub25sb2FkX2RvbmUpe3JldHVybjt9CnNjcmlwdC5vbmxvYWRfZG9uZT10cnVlO3Jlc29sdmUodXJsKTt9O3NjcmlwdC5vbmVycm9yPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcigiRXJyb3IgbG9hZGluZyBmaWxlIixzY3JpcHQuc3JjKTtyZWplY3QodXJsKTt9O3ZhciBoZWFkPWRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO319KTtkZXBlbmRlbmNpZXNQcm9taXNlW3VybF09c2NyaXB0TG9hZGVkUHJvbWlzZTtyZXR1cm4gc2NyaXB0TG9hZGVkUHJvbWlzZTt9O3JldHVybiBsb2FkO30pKCk7ZnVuY3Rpb24gZ2V0X2ZpbGUob3B0aW9ucyl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3QoKTt2YXIgZGF0YTtpZihvcHRpb25zLmZvcm0pe3hoci5vcGVuKG9wdGlvbnMuZm9ybS5tZXRob2Qsb3B0aW9ucy5mb3JtLmFjdGlvbik7ZGF0YT1uZXcgRm9ybURhdGEob3B0aW9ucy5mb3JtKTt9ZWxzZXt4aHIub3BlbignUE9TVCcsb3B0aW9ucy51cmwpO2RhdGE9bmV3IEZvcm1EYXRhKCk7Xy5lYWNoKG9wdGlvbnMuZGF0YXx8e30sZnVuY3Rpb24odixrKXtkYXRhLmFwcGVuZChrLHYpO30pO30KZGF0YS5hcHBlbmQoJ3Rva2VuJywnZHVtbXktYmVjYXVzZS1hcGktZXhwZWN0cy1vbmUnKTtpZihjb3JlLmNzcmZfdG9rZW4pe2RhdGEuYXBwZW5kKCdjc3JmX3Rva2VuJyxjb3JlLmNzcmZfdG9rZW4pO30KeGhyLnJlc3BvbnNlVHlwZT0nYmxvYic7eGhyLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBtaW1ldHlwZT14aHIucmVzcG9uc2UudHlwZTtpZih4aHIuc3RhdHVzPT09MjAwJiZtaW1ldHlwZSE9PSd0ZXh0L2h0bWwnKXt2YXIgaGVhZGVyPSh4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb24nKXx8JycpLnJlcGxhY2UoLzskLywnJyk7dmFyIGZpbGVuYW1lPWhlYWRlcj9jb250ZW50ZGlzcG9zaXRpb24ucGFyc2UoaGVhZGVyKS5wYXJhbWV0ZXJzLmZpbGVuYW1lOm51bGw7ZG93bmxvYWQoeGhyLnJlc3BvbnNlLGZpbGVuYW1lLG1pbWV0eXBlKTtpZihvcHRpb25zLnN1Y2Nlc3Mpe29wdGlvbnMuc3VjY2VzcygpO30KcmV0dXJuIHRydWU7fQppZighb3B0aW9ucy5lcnJvcil7cmV0dXJuIHRydWU7fQp2YXIgZGVjb2Rlcj1uZXcgRmlsZVJlYWRlcigpO2RlY29kZXIub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGNvbnRlbnRzPWRlY29kZXIucmVzdWx0O3ZhciBlcnI7dmFyIGRvYz1uZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGNvbnRlbnRzLCd0ZXh0L2h0bWwnKTt2YXIgbm9kZXM9ZG9jLmJvZHkuY2hpbGRyZW4ubGVuZ3RoPT09MD9kb2MuYm9keS5jaGlsZE5vZGVzOmRvYy5ib2R5LmNoaWxkcmVuO3RyeXt2YXIgbm9kZT1ub2Rlc1sxXXx8bm9kZXNbMF07ZXJyPUpTT04ucGFyc2Uobm9kZS50ZXh0Q29udGVudCk7fWNhdGNoKGUpe2Vycj17bWVzc2FnZTpub2Rlcy5sZW5ndGg+MT9ub2Rlc1sxXS50ZXh0Q29udGVudDonJyxkYXRhOntuYW1lOlN0cmluZyh4aHIuc3RhdHVzKSx0aXRsZTpub2Rlcy5sZW5ndGg+MD9ub2Rlc1swXS50ZXh0Q29udGVudDonJyx9fTt9Cm9wdGlvbnMuZXJyb3IoZXJyKTt9O2RlY29kZXIucmVhZEFzVGV4dCh4aHIucmVzcG9uc2UpO307eGhyLm9uZXJyb3I9ZnVuY3Rpb24oKXtpZihvcHRpb25zLmVycm9yKXtvcHRpb25zLmVycm9yKHttZXNzYWdlOl8oIlNvbWV0aGluZyBoYXBwZW5lZCB3aGlsZSB0cnlpbmcgdG8gY29udGFjdCB0aGUgc2VydmVyLCBjaGVjayB0aGF0IHRoZSBzZXJ2ZXIgaXMgb25saW5lIGFuZCB0aGF0IHlvdSBzdGlsbCBoYXZlIGEgd29ya2luZyBuZXR3b3JrIGNvbm5lY3Rpb24uIiksZGF0YTp7dGl0bGU6X3QoIkNvdWxkIG5vdCBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIiKX19KTt9fTtpZihvcHRpb25zLmNvbXBsZXRlKXt4aHIub25sb2FkZW5kPWZ1bmN0aW9uKCl7b3B0aW9ucy5jb21wbGV0ZSgpO307fQp4aHIuc2VuZChkYXRhKTtyZXR1cm4gdHJ1ZTt9CmZ1bmN0aW9uIHBvc3QoY29udHJvbGxlcl91cmwsZGF0YSl7dmFyIHBvc3REYXRhPW5ldyBGb3JtRGF0YSgpOyQuZWFjaChkYXRhLGZ1bmN0aW9uKGksdmFsKXtwb3N0RGF0YS5hcHBlbmQoaSx2YWwpO30pO2lmKGNvcmUuY3NyZl90b2tlbil7cG9zdERhdGEuYXBwZW5kKCdjc3JmX3Rva2VuJyxjb3JlLmNzcmZfdG9rZW4pO30KcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXskLmFqYXgoY29udHJvbGxlcl91cmwse2RhdGE6cG9zdERhdGEscHJvY2Vzc0RhdGE6ZmFsc2UsY29udGVudFR5cGU6ZmFsc2UsdHlwZTonUE9TVCd9KS50aGVuKHJlc29sdmUpLmZhaWwocmVqZWN0KTt9KTt9CnZhciBsb2FkWE1MPShmdW5jdGlvbigpe3ZhciBpc0xvYWRpbmc9ZmFsc2U7dmFyIGxvYWRpbmdzRGF0YT1bXTt2YXIgc2VlblVSTHM9W107cmV0dXJuIGZ1bmN0aW9uKHVybCxxd2ViKXtmdW5jdGlvbiBfbG9hZCgpe2lzTG9hZGluZz10cnVlO2lmKGxvYWRpbmdzRGF0YS5sZW5ndGgpe3ZhciBsb2FkaW5nRGF0YT1sb2FkaW5nc0RhdGFbMF07bG9hZGluZ0RhdGEucXdlYi5hZGRfdGVtcGxhdGUobG9hZGluZ0RhdGEudXJsLGZ1bmN0aW9uKCl7bG9hZGluZ3NEYXRhLnNoaWZ0KCk7bG9hZGluZ0RhdGEucmVzb2x2ZSgpO19sb2FkKCk7fSk7fWVsc2V7aXNMb2FkaW5nPWZhbHNlO319CmlmKCF1cmx8fCFxd2ViKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7fQppZihfLmNvbnRhaW5zKHNlZW5VUkxzLHVybCkpe3ZhciBvbGRMb2FkaW5nRGF0YT1fLmZpbmRXaGVyZShsb2FkaW5nc0RhdGEse3VybDp1cmx9KTtyZXR1cm4gb2xkTG9hZGluZ0RhdGE/b2xkTG9hZGluZ0RhdGEuZGVmOlByb21pc2UucmVzb2x2ZSgpO30Kc2VlblVSTHMucHVzaCh1cmwpO3ZhciBuZXdMb2FkaW5nRGF0YT17dXJsOnVybCxxd2ViOnF3ZWIsfTtuZXdMb2FkaW5nRGF0YS5kZWY9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe25ld0xvYWRpbmdEYXRhLnJlc29sdmU9cmVzb2x2ZTtuZXdMb2FkaW5nRGF0YS5yZWplY3Q9cmVqZWN0O30pO2xvYWRpbmdzRGF0YS5wdXNoKG5ld0xvYWRpbmdEYXRhKTtpZighaXNMb2FkaW5nKXtfbG9hZCgpO30KcmV0dXJuIG5ld0xvYWRpbmdEYXRhLmRlZjt9O30pKCk7dmFyIGxvYWRBc3NldD0oZnVuY3Rpb24oKXt2YXIgY2FjaGU9e307dmFyIGxvYWQ9ZnVuY3Rpb24gbG9hZEFzc2V0KHhtbElkKXtpZihjYWNoZVt4bWxJZF0pe3JldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVbeG1sSWRdKTt9CnZhciBwYXJhbXM9e2FyZ3M6W3htbElkLHtkZWJ1Zzpjb25maWcuaXNEZWJ1ZygpfV0sa3dhcmdzOntjb250ZXh0Om9kb28uc2Vzc2lvbl9pbmZvLnVzZXJfY29udGV4dCx9LG1ldGhvZDoncmVuZGVyX3RlbXBsYXRlJyxtb2RlbDonaXIudWkudmlldycsfTtyZXR1cm4gcnBjKCcvd2ViL2RhdGFzZXQvY2FsbF9rdy9pci51aS52aWV3L3JlbmRlcl90ZW1wbGF0ZScscGFyYW1zKS50aGVuKGZ1bmN0aW9uKHhtbCl7dmFyICR4bWw9JCh4bWwpO2NhY2hlW3htbElkXT17Y3NzTGliczokeG1sLmZpbHRlcignbGlua1tocmVmXTpub3QoW3R5cGU9ImltYWdlL3gtaWNvbiJdKScpLm1hcChmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmF0dHIoJ2hyZWYnKTt9KS5nZXQoKSxjc3NDb250ZW50czokeG1sLmZpbHRlcignc3R5bGUnKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS5odG1sKCk7fSkuZ2V0KCksanNMaWJzOiR4bWwuZmlsdGVyKCdzY3JpcHRbc3JjXScpLm1hcChmdW5jdGlvbigpe3JldHVybiAkKHRoaXMpLmF0dHIoJ3NyYycpO30pLmdldCgpLGpzQ29udGVudHM6JHhtbC5maWx0ZXIoJ3NjcmlwdDpub3QoW3NyY10pJykubWFwKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykuaHRtbCgpO30pLmdldCgpLH07cmV0dXJuIGNhY2hlW3htbElkXTt9KTt9O3JldHVybiBsb2FkO30pKCk7ZnVuY3Rpb24gbG9hZExpYnMobGlicyl7dmFyIG11dGV4PW5ldyBjb25jdXJyZW5jeS5NdXRleCgpO211dGV4LmV4ZWMoZnVuY3Rpb24oKXt2YXIgZGVmcz1bXTt2YXIgY3NzTGlicz1bbGlicy5jc3NMaWJzfHxbXV07ZGVmcy5wdXNoKF9sb2FkQXJyYXkoY3NzTGlicyxhamF4LmxvYWRDU1MpLnRoZW4oZnVuY3Rpb24oKXtpZihsaWJzLmNzc0NvbnRlbnRzJiZsaWJzLmNzc0NvbnRlbnRzLmxlbmd0aCl7JCgnaGVhZCcpLmFwcGVuZCgkKCc8c3R5bGUvPicse2h0bWw6bGlicy5jc3NDb250ZW50cy5qb2luKCdcbicpLH0pKTt9fSkpO2RlZnMucHVzaChfbG9hZEFycmF5KGxpYnMuanNMaWJzfHxbXSxhamF4LmxvYWRKUykudGhlbihmdW5jdGlvbigpe2lmKGxpYnMuanNDb250ZW50cyYmbGlicy5qc0NvbnRlbnRzLmxlbmd0aCl7JCgnaGVhZCcpLmFwcGVuZCgkKCc8c2NyaXB0Lz4nLHtodG1sOmxpYnMuanNDb250ZW50cy5qb2luKCdcbicpLH0pKTt9fSkpO3JldHVybiBQcm9taXNlLmFsbChkZWZzKTt9KTttdXRleC5leGVjKGZ1bmN0aW9uKCl7cmV0dXJuIF9sb2FkQXJyYXkobGlicy5hc3NldExpYnN8fFtdLGZ1bmN0aW9uKHhtbElEKXtyZXR1cm4gYWpheC5sb2FkQXNzZXQoeG1sSUQpLnRoZW4oZnVuY3Rpb24oYXNzZXQpe3JldHVybiBhamF4LmxvYWRMaWJzKGFzc2V0KTt9KTt9KTt9KTtmdW5jdGlvbiBfbG9hZEFycmF5KGFycmF5LGxvYWRDYWxsYmFjayl7dmFyIF9tdXRleD1uZXcgY29uY3VycmVuY3kuTXV0ZXgoKTthcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHVybERhdGEpe19tdXRleC5leGVjKGZ1bmN0aW9uKCl7aWYodHlwZW9mIHVybERhdGE9PT0nc3RyaW5nJyl7cmV0dXJuIGxvYWRDYWxsYmFjayh1cmxEYXRhKTt9CnJldHVybiBQcm9taXNlLmFsbCh1cmxEYXRhLm1hcChsb2FkQ2FsbGJhY2spKTt9KTt9KTtyZXR1cm4gX211dGV4LmdldFVubG9ja2VkRGVmKCk7fQpyZXR1cm4gbXV0ZXguZ2V0VW5sb2NrZWREZWYoKTt9Cl8uZXh0ZW5kKGFqYXgse2pzb25ScGM6anNvblJwYyxycGM6cnBjLGxvYWRDU1M6bG9hZENTUyxsb2FkSlM6bG9hZEpTLGxvYWRYTUw6bG9hZFhNTCxsb2FkQXNzZXQ6bG9hZEFzc2V0LGxvYWRMaWJzOmxvYWRMaWJzLGdldF9maWxlOmdldF9maWxlLHBvc3Q6cG9zdCx9KTtyZXR1cm4gYWpheDt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9idXMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLkJ1cycsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTt2YXIgbWl4aW5zPXJlcXVpcmUoJ3dlYi5taXhpbnMnKTtyZXR1cm4gQ2xhc3MuZXh0ZW5kKG1peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbix7aW5pdDpmdW5jdGlvbihwYXJlbnQpe21peGlucy5FdmVudERpc3BhdGNoZXJNaXhpbi5pbml0LmNhbGwodGhpcyk7dGhpcy5zZXRQYXJlbnQocGFyZW50KTt9LH0pO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2NsYXNzLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5DbGFzcycsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gT2Rvb0NsYXNzKCl7fQp2YXIgaW5pdGlhbGl6aW5nPWZhbHNlO3ZhciBmblRlc3Q9L3h5ei8udGVzdChmdW5jdGlvbigpe3h5eigpO30pPy9cYl9zdXBlclxiLzovLiovO09kb29DbGFzcy5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgX3N1cGVyPXRoaXMucHJvdG90eXBlO3ZhciBhcmdzPV8udG9BcnJheShhcmd1bWVudHMpO2FyZ3MudW5zaGlmdCh7fSk7dmFyIHByb3A9Xy5leHRlbmQuYXBwbHkoXyxhcmdzKTtpbml0aWFsaXppbmc9dHJ1ZTt2YXIgVGhpcz10aGlzO3ZhciBwcm90b3R5cGU9bmV3IFRoaXMoKTtpbml0aWFsaXppbmc9ZmFsc2U7Xy5lYWNoKHByb3AsZnVuY3Rpb24odmFsLG5hbWUpe3Byb3RvdHlwZVtuYW1lXT10eXBlb2YgcHJvcFtuYW1lXT09ImZ1bmN0aW9uIiYmZm5UZXN0LnRlc3QocHJvcFtuYW1lXSk/KGZ1bmN0aW9uKG5hbWUsZm4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0bXA9dGhpcy5fc3VwZXI7dGhpcy5fc3VwZXI9X3N1cGVyW25hbWVdO3ZhciByZXQ9Zm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3N1cGVyPXRtcDtyZXR1cm4gcmV0O307fSkobmFtZSxwcm9wW25hbWVdKTpwcm9wW25hbWVdO30pO2Z1bmN0aW9uIENsYXNzKCl7aWYodGhpcy5jb25zdHJ1Y3RvciE9PU9kb29DbGFzcyl7dGhyb3cgbmV3IEVycm9yKCJZb3UgY2FuIG9ubHkgaW5zdGFuY2lhdGUgb2JqZWN0cyB3aXRoIHRoZSAnbmV3JyBvcGVyYXRvciIpO30KdGhpcy5fc3VwZXI9bnVsbDtpZighaW5pdGlhbGl6aW5nJiZ0aGlzLmluaXQpe3ZhciByZXQ9dGhpcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihyZXQpe3JldHVybiByZXQ7fX0KcmV0dXJuIHRoaXM7fQpDbGFzcy5pbmNsdWRlPWZ1bmN0aW9uKHByb3BlcnRpZXMpe18uZWFjaChwcm9wZXJ0aWVzLGZ1bmN0aW9uKHZhbCxuYW1lKXtpZih0eXBlb2YgcHJvcGVydGllc1tuYW1lXSE9PSdmdW5jdGlvbid8fCFmblRlc3QudGVzdChwcm9wZXJ0aWVzW25hbWVdKSl7cHJvdG90eXBlW25hbWVdPXByb3BlcnRpZXNbbmFtZV07fWVsc2UgaWYodHlwZW9mIHByb3RvdHlwZVtuYW1lXT09PSdmdW5jdGlvbicmJnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSl7cHJvdG90eXBlW25hbWVdPShmdW5jdGlvbihuYW1lLGZuLHByZXZpb3VzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdG1wPXRoaXMuX3N1cGVyO3RoaXMuX3N1cGVyPXByZXZpb3VzO3ZhciByZXQ9Zm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3N1cGVyPXRtcDtyZXR1cm4gcmV0O307fSkobmFtZSxwcm9wZXJ0aWVzW25hbWVdLHByb3RvdHlwZVtuYW1lXSk7fWVsc2UgaWYodHlwZW9mIF9zdXBlcltuYW1lXT09PSdmdW5jdGlvbicpe3Byb3RvdHlwZVtuYW1lXT0oZnVuY3Rpb24obmFtZSxmbil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHRtcD10aGlzLl9zdXBlcjt0aGlzLl9zdXBlcj1fc3VwZXJbbmFtZV07dmFyIHJldD1mbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc3VwZXI9dG1wO3JldHVybiByZXQ7fTt9KShuYW1lLHByb3BlcnRpZXNbbmFtZV0pO319KTt9O0NsYXNzLnByb3RvdHlwZT1wcm90b3R5cGU7Q2xhc3MuY29uc3RydWN0b3I9Q2xhc3M7Q2xhc3MuZXh0ZW5kPXRoaXMuZXh0ZW5kO3JldHVybiBDbGFzczt9O3JldHVybiBPZG9vQ2xhc3M7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvY29sbGVjdGlvbnMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgid2ViLmNvbGxlY3Rpb25zIixmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoIndlYi5DbGFzcyIpO3ZhciBUcmVlPUNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihkYXRhKXt0aGlzLl9kYXRhPWRhdGE7dGhpcy5fY2hpbGRyZW49W107fSxnZXREYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGE7fSxhZGRDaGlsZDpmdW5jdGlvbih0cmVlKXt0aGlzLl9jaGlsZHJlbi5wdXNoKHRyZWUpO30sfSk7cmV0dXJue1RyZWU6VHJlZSx9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL2NvbmN1cnJlbmN5LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5jb25jdXJyZW5jeScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTtyZXR1cm57ZGVsYXk6ZnVuY3Rpb24od2FpdCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe3NldFRpbWVvdXQocmVzb2x2ZSx3YWl0KTt9KTt9LERyb3BNaXNvcmRlcmVkOkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihmYWlsTWlzb3JkZXJlZCl7dGhpcy5sc249MDt0aGlzLnJzbj0tMTt0aGlzLmZhaWxNaXNvcmRlcmVkPWZhaWxNaXNvcmRlcmVkfHxmYWxzZTt9LGFkZDpmdW5jdGlvbihwcm9taXNlKXt2YXIgc2VsZj10aGlzO3ZhciBzZXE9dGhpcy5sc24rKzt2YXIgcmVzPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZihzZXE+c2VsZi5yc24pe3NlbGYucnNuPXNlcTtyZXNvbHZlKHJlc3VsdCk7fWVsc2UgaWYoc2VsZi5mYWlsTWlzb3JkZXJlZCl7cmVqZWN0KCk7fX0pLmd1YXJkZWRDYXRjaChmdW5jdGlvbihyZXN1bHQpe3JlamVjdChyZXN1bHQpO30pO30pO3JldHVybiByZXM7fSx9KSxEcm9wUHJldmlvdXM6Q2xhc3MuZXh0ZW5kKHthZGQ6ZnVuY3Rpb24ocHJvbWlzZSl7aWYodGhpcy5jdXJyZW50RGVmKXt0aGlzLmN1cnJlbnREZWYucmVqZWN0KCk7fQp2YXIgcmVqZWN0aW9uO3ZhciByZXM9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3JlamVjdGlvbj1yZWplY3Q7cHJvbWlzZS50aGVuKHJlc29sdmUpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7fSk7fSk7dGhpcy5jdXJyZW50RGVmPXJlczt0aGlzLmN1cnJlbnREZWYucmVqZWN0PXJlamVjdGlvbjtyZXR1cm4gcmVzO319KSxNdXRleDpDbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmxvY2s9UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5xdWV1ZVNpemU9MDt0aGlzLnVubG9ja2VkUHJvbT11bmRlZmluZWQ7dGhpcy5fdW5sb2NrPXVuZGVmaW5lZDt9LGV4ZWM6ZnVuY3Rpb24oYWN0aW9uKXt2YXIgc2VsZj10aGlzO3ZhciBjdXJyZW50TG9jaz10aGlzLmxvY2s7dmFyIHJlc3VsdDt0aGlzLnF1ZXVlU2l6ZSsrO3RoaXMudW5sb2NrZWRQcm9tPXRoaXMudW5sb2NrZWRQcm9tfHxuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtzZWxmLl91bmxvY2s9cmVzb2x2ZTt9KTt0aGlzLmxvY2s9bmV3IFByb21pc2UoZnVuY3Rpb24odW5sb2NrQ3VycmVudCl7Y3VycmVudExvY2sudGhlbihmdW5jdGlvbigpe3Jlc3VsdD1hY3Rpb24oKTt2YXIgYWx3YXlzPWZ1bmN0aW9uKHJldHVybmVkUmVzdWx0KXt1bmxvY2tDdXJyZW50KCk7c2VsZi5xdWV1ZVNpemUtLTtpZihzZWxmLnF1ZXVlU2l6ZT09PTApe3NlbGYudW5sb2NrZWRQcm9tPXVuZGVmaW5lZDtzZWxmLl91bmxvY2soKTt9CnJldHVybiByZXR1cm5lZFJlc3VsdDt9O1Byb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oYWx3YXlzKS5ndWFyZGVkQ2F0Y2goYWx3YXlzKTt9KTt9KTtyZXR1cm4gdGhpcy5sb2NrLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcmVzdWx0O30pO30sZ2V0VW5sb2NrZWREZWY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmxvY2tlZFByb218fFByb21pc2UucmVzb2x2ZSgpO30sfSksTXV0ZXhlZERyb3BQcmV2aW91czpDbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD1mYWxzZTt0aGlzLmN1cnJlbnRQcm9tPW51bGw7dGhpcy5wZW5kaW5nQWN0aW9uPW51bGw7dGhpcy5wZW5kaW5nUHJvbT1udWxsO30sZXhlYzpmdW5jdGlvbihhY3Rpb24pe3ZhciBzZWxmPXRoaXM7dmFyIHJlc29sdXRpb247dmFyIHJlamVjdGlvbjtpZih0aGlzLmxvY2tlZCl7dGhpcy5wZW5kaW5nQWN0aW9uPWFjdGlvbjt2YXIgb2xkUGVuZGluZ0RlZj10aGlzLnBlbmRpbmdQcm9tO3RoaXMucGVuZGluZ1Byb209bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Jlc29sdXRpb249cmVzb2x2ZTtyZWplY3Rpb249cmVqZWN0O2lmKG9sZFBlbmRpbmdEZWYpe29sZFBlbmRpbmdEZWYucmVqZWN0KCk7fQpzZWxmLmN1cnJlbnRQcm9tLnJlamVjdCgpO30pO3RoaXMucGVuZGluZ1Byb20ucmVzb2x2ZT1yZXNvbHV0aW9uO3RoaXMucGVuZGluZ1Byb20ucmVqZWN0PXJlamVjdGlvbjtyZXR1cm4gdGhpcy5wZW5kaW5nUHJvbTt9ZWxzZXt0aGlzLmxvY2tlZD10cnVlO3RoaXMuY3VycmVudFByb209bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Jlc29sdXRpb249cmVzb2x2ZTtyZWplY3Rpb249cmVqZWN0O2Z1bmN0aW9uIHVubG9jaygpe3NlbGYubG9ja2VkPWZhbHNlO2lmKHNlbGYucGVuZGluZ0FjdGlvbil7dmFyIGFjdGlvbj1zZWxmLnBlbmRpbmdBY3Rpb247dmFyIHByb209c2VsZi5wZW5kaW5nUHJvbTtzZWxmLnBlbmRpbmdBY3Rpb249bnVsbDtzZWxmLnBlbmRpbmdQcm9tPW51bGw7c2VsZi5leGVjKGFjdGlvbikudGhlbihwcm9tLnJlc29sdmUpLmd1YXJkZWRDYXRjaChwcm9tLnJlamVjdCk7fX0KUHJvbWlzZS5yZXNvbHZlKGFjdGlvbigpKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7cmVzb2x2ZShyZXN1bHQpO3VubG9jaygpO30pLmd1YXJkZWRDYXRjaChmdW5jdGlvbihyZWFzb24pe3JlamVjdChyZWFzb24pO3VubG9jaygpO30pO30pO3RoaXMuY3VycmVudFByb20ucmVzb2x2ZT1yZXNvbHV0aW9uO3RoaXMuY3VycmVudFByb20ucmVqZWN0PXJlamVjdGlvbjtyZXR1cm4gdGhpcy5jdXJyZW50UHJvbTt9fX0pLHJlamVjdEFmdGVyOmZ1bmN0aW9uKHRhcmdldF9kZWYscmVmZXJlbmNlX2RlZil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt0YXJnZXRfZGVmLnRoZW4ocmVzb2x2ZSkuZ3VhcmRlZENhdGNoKHJlamVjdCk7cmVmZXJlbmNlX2RlZi50aGVuKHJlamVjdCkuZ3VhcmRlZENhdGNoKHJlamVjdCk7fSk7fX07fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvZGlhbG9nLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5EaWFsb2cnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBkb209cmVxdWlyZSgnd2ViLmRvbScpO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBRV2ViPWNvcmUucXdlYjt2YXIgX3Q9Y29yZS5fdDt2YXIgRGlhbG9nPVdpZGdldC5leHRlbmQoe3RhZ05hbWU6J21haW4nLHhtbERlcGVuZGVuY2llczpbJy93ZWIvc3RhdGljL3NyYy94bWwvZGlhbG9nLnhtbCddLGN1c3RvbV9ldmVudHM6Xy5leHRlbmQoe30sV2lkZ2V0LnByb3RvdHlwZS5jdXN0b21fZXZlbnRzLHtmb2N1c19jb250cm9sX2J1dHRvbjonX29uRm9jdXNDb250cm9sQnV0dG9uJyxjbG9zZV9kaWFsb2c6J19vbkNsb3NlRGlhbG9nJyx9KSxldmVudHM6Xy5leHRlbmQoe30sV2lkZ2V0LnByb3RvdHlwZS5ldmVudHMseydrZXlkb3duIC5tb2RhbC1mb290ZXIgYnV0dG9uJzonX29uRm9vdGVyQnV0dG9uS2V5RG93bicsfSksaW5pdDpmdW5jdGlvbihwYXJlbnQsb3B0aW9ucyl7dmFyIHNlbGY9dGhpczt0aGlzLl9zdXBlcihwYXJlbnQpO3RoaXMuX29wZW5lZD1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtzZWxmLl9vcGVuZWRSZXNvbHZlcj1yZXNvbHZlO30pO29wdGlvbnM9Xy5kZWZhdWx0cyhvcHRpb25zfHx7fSx7dGl0bGU6X3QoJ09kb28nKSxzdWJ0aXRsZTonJyxzaXplOidsYXJnZScsZnVsbHNjcmVlbjpmYWxzZSxkaWFsb2dDbGFzczonJywkY29udGVudDpmYWxzZSxidXR0b25zOlt7dGV4dDpfdCgiT2siKSxjbG9zZTp0cnVlfV0sdGVjaG5pY2FsOnRydWUsJHBhcmVudE5vZGU6ZmFsc2UsYmFja2Ryb3A6J3N0YXRpYycscmVuZGVySGVhZGVyOnRydWUscmVuZGVyRm9vdGVyOnRydWUsb25Gb3JjZUNsb3NlOmZhbHNlLH0pO3RoaXMuJGNvbnRlbnQ9b3B0aW9ucy4kY29udGVudDt0aGlzLnRpdGxlPW9wdGlvbnMudGl0bGU7dGhpcy5zdWJ0aXRsZT1vcHRpb25zLnN1YnRpdGxlO3RoaXMuZnVsbHNjcmVlbj1vcHRpb25zLmZ1bGxzY3JlZW47dGhpcy5kaWFsb2dDbGFzcz1vcHRpb25zLmRpYWxvZ0NsYXNzO3RoaXMuc2l6ZT1vcHRpb25zLnNpemU7dGhpcy5idXR0b25zPW9wdGlvbnMuYnV0dG9uczt0aGlzLnRlY2huaWNhbD1vcHRpb25zLnRlY2huaWNhbDt0aGlzLiRwYXJlbnROb2RlPW9wdGlvbnMuJHBhcmVudE5vZGU7dGhpcy5iYWNrZHJvcD1vcHRpb25zLmJhY2tkcm9wO3RoaXMucmVuZGVySGVhZGVyPW9wdGlvbnMucmVuZGVySGVhZGVyO3RoaXMucmVuZGVyRm9vdGVyPW9wdGlvbnMucmVuZGVyRm9vdGVyO3RoaXMub25Gb3JjZUNsb3NlPW9wdGlvbnMub25Gb3JjZUNsb3NlO2NvcmUuYnVzLm9uKCdjbG9zZV9kaWFsb2dzJyx0aGlzLHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpKTt9LHdpbGxTdGFydDpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKCl7c2VsZi4kbW9kYWw9JChRV2ViLnJlbmRlcignRGlhbG9nJyx7ZnVsbHNjcmVlbjpzZWxmLmZ1bGxzY3JlZW4sdGl0bGU6c2VsZi50aXRsZSxzdWJ0aXRsZTpzZWxmLnN1YnRpdGxlLHRlY2huaWNhbDpzZWxmLnRlY2huaWNhbCxyZW5kZXJIZWFkZXI6c2VsZi5yZW5kZXJIZWFkZXIscmVuZGVyRm9vdGVyOnNlbGYucmVuZGVyRm9vdGVyLH0pKTtzd2l0Y2goc2VsZi5zaXplKXtjYXNlJ2V4dHJhLWxhcmdlJzpzZWxmLiRtb2RhbC5maW5kKCcubW9kYWwtZGlhbG9nJykuYWRkQ2xhc3MoJ21vZGFsLXhsJyk7YnJlYWs7Y2FzZSdsYXJnZSc6c2VsZi4kbW9kYWwuZmluZCgnLm1vZGFsLWRpYWxvZycpLmFkZENsYXNzKCdtb2RhbC1sZycpO2JyZWFrO2Nhc2Unc21hbGwnOnNlbGYuJG1vZGFsLmZpbmQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygnbW9kYWwtc20nKTticmVhazt9CmlmKHNlbGYucmVuZGVyRm9vdGVyKXtzZWxmLiRmb290ZXI9c2VsZi4kbW9kYWwuZmluZCgiLm1vZGFsLWZvb3RlciIpO3NlbGYuc2V0X2J1dHRvbnMoc2VsZi5idXR0b25zKTt9CnNlbGYuJG1vZGFsLm9uKCdoaWRkZW4uYnMubW9kYWwnLF8uYmluZChzZWxmLmRlc3Ryb3ksc2VsZikpO30pO30scmVuZGVyRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7aWYodGhpcy4kY29udGVudCl7dGhpcy5zZXRFbGVtZW50KHRoaXMuJGNvbnRlbnQpO30KdGhpcy4kZWwuYWRkQ2xhc3MoJ21vZGFsLWJvZHkgJyt0aGlzLmRpYWxvZ0NsYXNzKTt9LHNldF9idXR0b25zOmZ1bmN0aW9uKGJ1dHRvbnMpe3RoaXMuX3NldEJ1dHRvbnNUbyh0aGlzLiRmb290ZXIsYnV0dG9ucyk7fSxzZXRfdGl0bGU6ZnVuY3Rpb24odGl0bGUsc3VidGl0bGUpe3RoaXMudGl0bGU9dGl0bGV8fCIiO2lmKHN1YnRpdGxlIT09dW5kZWZpbmVkKXt0aGlzLnN1YnRpdGxlPXN1YnRpdGxlfHwiIjt9CnZhciAkdGl0bGU9dGhpcy4kbW9kYWwuZmluZCgnLm1vZGFsLXRpdGxlJykuZmlyc3QoKTt2YXIgJHN1YnRpdGxlPSR0aXRsZS5maW5kKCcub19zdWJ0aXRsZScpLmRldGFjaCgpOyR0aXRsZS5odG1sKHRoaXMudGl0bGUpOyRzdWJ0aXRsZS5odG1sKHRoaXMuc3VidGl0bGUpLmFwcGVuZFRvKCR0aXRsZSk7cmV0dXJuIHRoaXM7fSxvcGVuZWQ6ZnVuY3Rpb24oaGFuZGxlcil7cmV0dXJuKGhhbmRsZXIpP3RoaXMuX29wZW5lZC50aGVuKGhhbmRsZXIpOnRoaXMuX29wZW5lZDt9LG9wZW46ZnVuY3Rpb24ob3B0aW9ucyl7JCgnLnRvb2x0aXAnKS5yZW1vdmUoKTt2YXIgc2VsZj10aGlzO3RoaXMuYXBwZW5kVG8oJCgnPGRpdi8+JykpLnRoZW4oZnVuY3Rpb24oKXtzZWxmLiRtb2RhbC5maW5kKCIubW9kYWwtYm9keSIpLnJlcGxhY2VXaXRoKHNlbGYuJGVsKTtzZWxmLiRtb2RhbC5hdHRyKCdvcGVuJyx0cnVlKTtzZWxmLiRtb2RhbC5yZW1vdmVBdHRyKCJhcmlhLWhpZGRlbiIpO2lmKHNlbGYuJHBhcmVudE5vZGUpe3NlbGYuJG1vZGFsLmFwcGVuZFRvKHNlbGYuJHBhcmVudE5vZGUpO30Kc2VsZi4kbW9kYWwubW9kYWwoe3Nob3c6dHJ1ZSxiYWNrZHJvcDpzZWxmLmJhY2tkcm9wLH0pO3NlbGYuX29wZW5lZFJlc29sdmVyKCk7aWYob3B0aW9ucyYmb3B0aW9ucy5zaG91bGRGb2N1c0J1dHRvbnMpe3NlbGYuX29uRm9jdXNDb250cm9sQnV0dG9uKCk7fX0pO3JldHVybiBzZWxmO30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKTt9LGRlc3Ryb3k6ZnVuY3Rpb24ob3B0aW9ucyl7aWYoIXRoaXMuX19jbG9zZWQpe3RoaXMuX19jbG9zZWQ9dHJ1ZTt0aGlzLnRyaWdnZXIoJ2Nsb3NlZCcsb3B0aW9ucyk7fQppZih0aGlzLmlzRGVzdHJveWVkKCkpe3JldHVybjt9CmlmKHRoaXMub25Gb3JjZUNsb3NlKXt0aGlzLm9uRm9yY2VDbG9zZSgpO30KdmFyIGlzRm9jdXNTZXQ9dGhpcy5fZm9jdXNPbkNsb3NlKCk7dGhpcy5fc3VwZXIoKTskKCcudG9vbHRpcCcpLnJlbW92ZSgpO2lmKHRoaXMuJG1vZGFsKXt0aGlzLiRtb2RhbC5tb2RhbCgnaGlkZScpO3RoaXMuJG1vZGFsLnJlbW92ZSgpO30KdmFyIG1vZGFscz0kKCdib2R5ID4gLm1vZGFsJykuZmlsdGVyKCc6dmlzaWJsZScpO2lmKG1vZGFscy5sZW5ndGgpe2lmKCFpc0ZvY3VzU2V0KXttb2RhbHMubGFzdCgpLmZvY3VzKCk7fQokKCdib2R5JykuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKTt9fSxyZWJpbmRCdXR0b25CZWhhdmlvcjpmdW5jdGlvbigpe3RoaXMuJGZvb3Rlci5vbigna2V5ZG93bicsdGhpcy5fb25Gb290ZXJCdXR0b25LZXlEb3duKTt9LF9mb2N1c09uQ2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fSxfc2V0QnV0dG9uc1RvKCR0YXJnZXQsYnV0dG9ucyl7dmFyIHNlbGY9dGhpczskdGFyZ2V0LmVtcHR5KCk7Xy5lYWNoKGJ1dHRvbnMsZnVuY3Rpb24oYnV0dG9uRGF0YSl7dmFyICRidXR0b249ZG9tLnJlbmRlckJ1dHRvbih7YXR0cnM6e2NsYXNzOmJ1dHRvbkRhdGEuY2xhc3Nlc3x8KGJ1dHRvbnMubGVuZ3RoPjE/J2J0bi1zZWNvbmRhcnknOididG4tcHJpbWFyeScpLGRpc2FibGVkOmJ1dHRvbkRhdGEuZGlzYWJsZWQsfSxpY29uOmJ1dHRvbkRhdGEuaWNvbix0ZXh0OmJ1dHRvbkRhdGEudGV4dCx9KTskYnV0dG9uLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7dmFyIGRlZjtpZihidXR0b25EYXRhLmNsaWNrKXtkZWY9YnV0dG9uRGF0YS5jbGljay5jYWxsKHNlbGYsZSk7fQppZihidXR0b25EYXRhLmNsb3NlKXtzZWxmLm9uRm9yY2VDbG9zZT1mYWxzZTtQcm9taXNlLnJlc29sdmUoZGVmKS50aGVuKHNlbGYuY2xvc2UuYmluZChzZWxmKSkuZ3VhcmRlZENhdGNoKHNlbGYuY2xvc2UuYmluZChzZWxmKSk7fX0pO2lmKHNlbGYudGVjaG5pY2FsKXskdGFyZ2V0LmFwcGVuZCgkYnV0dG9uKTt9ZWxzZXskdGFyZ2V0LnByZXBlbmQoJGJ1dHRvbik7fX0pO30sX29uQ2xvc2VEaWFsb2c6ZnVuY3Rpb24oZXYpe2V2LnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuY2xvc2UoKTt9LF9vbkZvY3VzQ29udHJvbEJ1dHRvbjpmdW5jdGlvbihlKXtpZih0aGlzLiRmb290ZXIpe2lmKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7fQp0aGlzLiRmb290ZXIuZmluZCgnLmJ0bi1wcmltYXJ5OnZpc2libGU6Zmlyc3QoKScpLmZvY3VzKCk7fX0sX29uRm9vdGVyQnV0dG9uS2V5RG93bjpmdW5jdGlvbihlKXtzd2l0Y2goZS53aGljaCl7Y2FzZSAkLnVpLmtleUNvZGUuVEFCOmlmKCFlLnNoaWZ0S2V5JiZlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImJ0bi1wcmltYXJ5Iikpe2UucHJldmVudERlZmF1bHQoKTt2YXIgJHByaW1hcnlCdXR0b249JChlLnRhcmdldCk7JHByaW1hcnlCdXR0b24udG9vbHRpcCh7ZGVsYXk6e3Nob3c6MjAwLGhpZGU6MH0sdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gUVdlYi5yZW5kZXIoJ0Zvcm1CdXR0b24udG9vbHRpcCcse3RpdGxlOiRwcmltYXJ5QnV0dG9uLnRleHQoKS50b1VwcGVyQ2FzZSgpfSk7fSx0cmlnZ2VyOidtYW51YWwnLH0pOyRwcmltYXJ5QnV0dG9uLnRvb2x0aXAoJ3Nob3cnKTt9CmJyZWFrO319fSk7RGlhbG9nLmFsZXJ0PWZ1bmN0aW9uKG93bmVyLG1lc3NhZ2Usb3B0aW9ucyl7dmFyIGJ1dHRvbnM9W3t0ZXh0Ol90KCJPayIpLGNsb3NlOnRydWUsY2xpY2s6b3B0aW9ucyYmb3B0aW9ucy5jb25maXJtX2NhbGxiYWNrLH1dO3JldHVybiBuZXcgRGlhbG9nKG93bmVyLF8uZXh0ZW5kKHtzaXplOidtZWRpdW0nLGJ1dHRvbnM6YnV0dG9ucywkY29udGVudDokKCc8bWFpbi8+Jyx7cm9sZTonYWxlcnQnLHRleHQ6bWVzc2FnZSx9KSx0aXRsZTpfdCgiQWxlcnQiKSxvbkZvcmNlQ2xvc2U6b3B0aW9ucyYmKG9wdGlvbnMub25Gb3JjZUNsb3NlfHxvcHRpb25zLmNvbmZpcm1fY2FsbGJhY2spLH0sb3B0aW9ucykpLm9wZW4oe3Nob3VsZEZvY3VzQnV0dG9uczp0cnVlfSk7fTtEaWFsb2cuY29uZmlybT1mdW5jdGlvbihvd25lcixtZXNzYWdlLG9wdGlvbnMpe3ZhciBidXR0b25zPVt7dGV4dDpfdCgiT2siKSxjbGFzc2VzOididG4tcHJpbWFyeScsY2xvc2U6dHJ1ZSxjbGljazpvcHRpb25zJiZvcHRpb25zLmNvbmZpcm1fY2FsbGJhY2ssfSx7dGV4dDpfdCgiQ2FuY2VsIiksY2xvc2U6dHJ1ZSxjbGljazpvcHRpb25zJiZvcHRpb25zLmNhbmNlbF9jYWxsYmFja31dO3JldHVybiBuZXcgRGlhbG9nKG93bmVyLF8uZXh0ZW5kKHtzaXplOidtZWRpdW0nLGJ1dHRvbnM6YnV0dG9ucywkY29udGVudDokKCc8bWFpbi8+Jyx7cm9sZTonYWxlcnQnLHRleHQ6bWVzc2FnZSx9KSx0aXRsZTpfdCgiQ29uZmlybWF0aW9uIiksb25Gb3JjZUNsb3NlOm9wdGlvbnMmJihvcHRpb25zLm9uRm9yY2VDbG9zZXx8b3B0aW9ucy5jYW5jZWxfY2FsbGJhY2spLH0sb3B0aW9ucykpLm9wZW4oe3Nob3VsZEZvY3VzQnV0dG9uczp0cnVlfSk7fTtEaWFsb2cuc2FmZUNvbmZpcm09ZnVuY3Rpb24ob3duZXIsbWVzc2FnZSxvcHRpb25zKXt2YXIgJGNoZWNrYm94PWRvbS5yZW5kZXJDaGVja2JveCh7dGV4dDpvcHRpb25zJiZvcHRpb25zLnNlY3VyaXR5TWVzc2FnZXx8X3QoIkkgYW0gc3VyZSBhYm91dCB0aGlzLiIpLH0pLmFkZENsYXNzKCdtYjAnKTt2YXIgJHNlY3VyaXR5Q2hlY2s9JCgnPGRpdi8+Jyx7Y2xhc3M6J2FsZXJ0IGFsZXJ0LScrKG9wdGlvbnMmJm9wdGlvbnMuc2VjdXJpdHlMZXZlbHx8J3dhcm5pbmcnKSsnIG10OCBtYjAnLH0pLnByZXBlbmQoJGNoZWNrYm94KTt2YXIgJGNvbnRlbnQ7aWYob3B0aW9ucyYmb3B0aW9ucy4kY29udGVudCl7JGNvbnRlbnQ9b3B0aW9ucy4kY29udGVudDtkZWxldGUgb3B0aW9ucy4kY29udGVudDt9ZWxzZXskY29udGVudD0kKCc8ZGl2Picse3RleHQ6bWVzc2FnZSx9KTt9CiRjb250ZW50PSQoJzxtYWluLz4nLHtyb2xlOidhbGVydCd9KS5hcHBlbmQoJGNvbnRlbnQsJHNlY3VyaXR5Q2hlY2spO3ZhciBidXR0b25zPVt7dGV4dDpfdCgiT2siKSxjbGFzc2VzOididG4tcHJpbWFyeSBvX3NhZmVfY29uZmlybV9idXR0b24nLGNsb3NlOnRydWUsY2xpY2s6b3B0aW9ucyYmb3B0aW9ucy5jb25maXJtX2NhbGxiYWNrLGRpc2FibGVkOnRydWUsfSx7dGV4dDpfdCgiQ2FuY2VsIiksY2xvc2U6dHJ1ZSxjbGljazpvcHRpb25zJiZvcHRpb25zLmNhbmNlbF9jYWxsYmFja31dO3ZhciBkaWFsb2c9bmV3IERpYWxvZyhvd25lcixfLmV4dGVuZCh7c2l6ZTonbWVkaXVtJyxidXR0b25zOmJ1dHRvbnMsJGNvbnRlbnQ6JGNvbnRlbnQsdGl0bGU6X3QoIkNvbmZpcm1hdGlvbiIpLG9uRm9yY2VDbG9zZTpvcHRpb25zJiYob3B0aW9ucy5vbkZvcmNlQ2xvc2V8fG9wdGlvbnMuY2FuY2VsX2NhbGxiYWNrKSx9LG9wdGlvbnMpKTtkaWFsb2cub3BlbmVkKGZ1bmN0aW9uKCl7dmFyICRidXR0b249ZGlhbG9nLiRmb290ZXIuZmluZCgnLm9fc2FmZV9jb25maXJtX2J1dHRvbicpOyRzZWN1cml0eUNoZWNrLm9uKCdjbGljaycsJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nLGZ1bmN0aW9uKGV2KXskYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywhJChldi5jdXJyZW50VGFyZ2V0KS5wcm9wKCdjaGVja2VkJykpO30pO30pO3JldHVybiBkaWFsb2cub3BlbigpO307cmV0dXJuIERpYWxvZzt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9kb20uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLmRvbV9yZWFkeScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7JChyZXNvbHZlKTt9KTt9KTtvZG9vLmRlZmluZSgnd2ViLmRvbScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb25jdXJyZW5jeT1yZXF1aXJlKCd3ZWIuY29uY3VycmVuY3knKTt2YXIgY29uZmlnPXJlcXVpcmUoJ3dlYi5jb25maWcnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBfdD1jb3JlLl90O2Z1bmN0aW9uIF9ub3RpZnkoY29udGVudCxjYWxsYmFja3Mpe2NhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2lmKGMud2lkZ2V0JiZjLndpZGdldC5vbl9hdHRhY2hfY2FsbGJhY2spe2Mud2lkZ2V0Lm9uX2F0dGFjaF9jYWxsYmFjayhjLmNhbGxiYWNrX2FyZ3MpO319KTtjb3JlLmJ1cy50cmlnZ2VyKCdET01fdXBkYXRlZCcsY29udGVudCk7fQp2YXIgZG9tPXtERUJPVU5DRTo0MDAsYXBwZW5kOmZ1bmN0aW9uKCR0YXJnZXQsY29udGVudCxvcHRpb25zKXskdGFyZ2V0LmFwcGVuZChjb250ZW50KTtpZihvcHRpb25zJiZvcHRpb25zLmluX0RPTSl7X25vdGlmeShjb250ZW50LG9wdGlvbnMuY2FsbGJhY2tzKTt9fSxhdXRvcmVzaXplOmZ1bmN0aW9uKCR0ZXh0YXJlYSxvcHRpb25zKXtpZigkdGV4dGFyZWEuZGF0YSgiYXV0b19yZXNpemUiKSl7cmV0dXJuO30KdmFyICRmaXhlZFRleHRhcmVhO3ZhciBtaW5IZWlnaHQ7ZnVuY3Rpb24gcmVzaXplKCl7JGZpeGVkVGV4dGFyZWEuaW5zZXJ0QWZ0ZXIoJHRleHRhcmVhKTt2YXIgaGVpZ2h0T2Zmc2V0PTA7dmFyIHN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0ZXh0YXJlYVswXSxudWxsKTtpZihzdHlsZS5ib3hTaXppbmc9PT0nYm9yZGVyLWJveCcpe3ZhciBwYWRkaW5nSGVpZ2h0PXBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ1RvcCkrcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nQm90dG9tKTt2YXIgYm9yZGVySGVpZ2h0PXBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpK3BhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpO2hlaWdodE9mZnNldD1ib3JkZXJIZWlnaHQrcGFkZGluZ0hlaWdodDt9CiRmaXhlZFRleHRhcmVhLndpZHRoKCR0ZXh0YXJlYS53aWR0aCgpKTskZml4ZWRUZXh0YXJlYS52YWwoJHRleHRhcmVhLnZhbCgpKTt2YXIgaGVpZ2h0PSRmaXhlZFRleHRhcmVhWzBdLnNjcm9sbEhlaWdodDskdGV4dGFyZWEuY3NzKHtoZWlnaHQ6TWF0aC5tYXgoaGVpZ2h0K2hlaWdodE9mZnNldCxtaW5IZWlnaHQpfSk7fQpmdW5jdGlvbiByZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpe3ZhciBzdHlsZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkdGV4dGFyZWFbMF0sbnVsbCk7aWYoc3R5bGUucmVzaXplPT09J3ZlcnRpY2FsJyl7JHRleHRhcmVhWzBdLnN0eWxlLnJlc2l6ZT0nbm9uZSc7fWVsc2UgaWYoc3R5bGUucmVzaXplPT09J2JvdGgnKXskdGV4dGFyZWFbMF0uc3R5bGUucmVzaXplPSdob3Jpem9udGFsJzt9fQpvcHRpb25zPW9wdGlvbnN8fHt9O21pbkhlaWdodD0nbWluX2hlaWdodCdpbiBvcHRpb25zP29wdGlvbnMubWluX2hlaWdodDo1MDskZml4ZWRUZXh0YXJlYT0kKCc8dGV4dGFyZWEgZGlzYWJsZWQ+Jyx7Y2xhc3M6JHRleHRhcmVhWzBdLmNsYXNzTmFtZSx9KTskZml4ZWRUZXh0YXJlYS5jc3Moe29wYWNpdHk6MCxoZWlnaHQ6MCxib3JkZXJUb3BXaWR0aDowLGJvcmRlckJvdHRvbVdpZHRoOjAscGFkZGluZzowLG92ZXJmbG93OidoaWRkZW4nLH0pOyRmaXhlZFRleHRhcmVhLmRhdGEoImF1dG9fcmVzaXplIix0cnVlKTskdGV4dGFyZWEuY3NzKHsnb3ZlcmZsb3cteSc6J2hpZGRlbid9KTtyZXNpemUoKTtyZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpOyR0ZXh0YXJlYS5kYXRhKCJhdXRvX3Jlc2l6ZSIsdHJ1ZSk7JHRleHRhcmVhLm9uKCdpbnB1dCBmb2N1cyBjaGFuZ2UnLHJlc2l6ZSk7aWYob3B0aW9ucy5wYXJlbnQpe2NvcmUuYnVzLm9uKCdET01fdXBkYXRlZCcsb3B0aW9ucy5wYXJlbnQsZnVuY3Rpb24oKXtyZXNpemUoKTtyZW1vdmVWZXJ0aWNhbFJlc2l6ZSgpO30pO319LGNzc0ZpbmQ6ZnVuY3Rpb24oJGZyb20sc2VsZWN0b3IsYWRkQmFjayl7dmFyICRyZXN1bHRzO3ZhciBtdWx0aVBhcnRzPXNlbGVjdG9yLmluZGV4T2YoJyAnKT49MDtpZihtdWx0aVBhcnRzKXskcmVzdWx0cz0kZnJvbS5maW5kKCcqJykuZmlsdGVyKHNlbGVjdG9yKTt9ZWxzZXskcmVzdWx0cz0kZnJvbS5maW5kKHNlbGVjdG9yKTt9CmlmKGFkZEJhY2smJiRmcm9tLmlzKHNlbGVjdG9yKSl7JHJlc3VsdHM9JHJlc3VsdHMuYWRkKCRmcm9tKTt9CnJldHVybiAkcmVzdWx0czt9LGRldGFjaDpmdW5jdGlvbih0b19kZXRhY2gsb3B0aW9ucyl7dG9fZGV0YWNoLmZvckVhY2goZnVuY3Rpb24oZCl7aWYoZC53aWRnZXQub25fZGV0YWNoX2NhbGxiYWNrKXtkLndpZGdldC5vbl9kZXRhY2hfY2FsbGJhY2soZC5jYWxsYmFja19hcmdzKTt9fSk7dmFyICR0b19kZXRhY2g9b3B0aW9ucyYmb3B0aW9ucy4kdG9fZGV0YWNoO2lmKCEkdG9fZGV0YWNoKXskdG9fZGV0YWNoPSQodG9fZGV0YWNoLm1hcChmdW5jdGlvbihkKXtyZXR1cm4gZC53aWRnZXQuZWw7fSkpO30KcmV0dXJuICR0b19kZXRhY2guZGV0YWNoKCk7fSxnZXRTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbihub2RlKXtyZXR1cm57c3RhcnQ6bm9kZS5zZWxlY3Rpb25TdGFydCxlbmQ6bm9kZS5zZWxlY3Rpb25FbmQsfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciBwb3NpdGlvbj17bGVmdDowLHRvcDowfTt3aGlsZShlKXtwb3NpdGlvbi5sZWZ0Kz1lLm9mZnNldExlZnQ7cG9zaXRpb24udG9wKz1lLm9mZnNldFRvcDtlPWUub2Zmc2V0UGFyZW50O30KcmV0dXJuIHBvc2l0aW9uO30sbWFrZUFzeW5jSGFuZGxlcjpmdW5jdGlvbihmY3QscHJldmVudERlZmF1bHQsc3RvcFByb3BhZ2F0aW9uKXt2YXIgcGVuZGluZz1mYWxzZTtmdW5jdGlvbiBfaXNMb2NrZWQoKXtyZXR1cm4gcGVuZGluZzt9CmZ1bmN0aW9uIF9sb2NrKCl7cGVuZGluZz10cnVlO30KZnVuY3Rpb24gX3VubG9jaygpe3BlbmRpbmc9ZmFsc2U7fQpyZXR1cm4gZnVuY3Rpb24oZXYpe2lmKHByZXZlbnREZWZhdWx0PT09dHJ1ZXx8cHJldmVudERlZmF1bHQmJnByZXZlbnREZWZhdWx0KCkpe2V2LnByZXZlbnREZWZhdWx0KCk7fQppZihzdG9wUHJvcGFnYXRpb249PT10cnVlfHxzdG9wUHJvcGFnYXRpb24mJnN0b3BQcm9wYWdhdGlvbigpKXtldi5zdG9wUHJvcGFnYXRpb24oKTt9CmlmKF9pc0xvY2tlZCgpKXtyZXR1cm47fQpfbG9jaygpO3ZhciByZXN1bHQ9ZmN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKF91bmxvY2spLmd1YXJkZWRDYXRjaChfdW5sb2NrKTtyZXR1cm4gcmVzdWx0O307fSxtYWtlQnV0dG9uSGFuZGxlcjpmdW5jdGlvbihmY3Qpe2ZjdD1kb20ubWFrZUFzeW5jSGFuZGxlcihmY3QpO3JldHVybiBmdW5jdGlvbihldil7dmFyIHJlc3VsdD1mY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciAkYnV0dG9uPSQoZXYudGFyZ2V0KS5jbG9zZXN0KCcuYnRuJyk7aWYoISRidXR0b24ubGVuZ3RoKXtyZXR1cm4gcmVzdWx0O30KJGJ1dHRvbi5hZGRDbGFzcygnb19kZWJvdW5jZV9kaXNhYmxlZCcpO1Byb21pc2UucmVzb2x2ZShkb20uREVCT1VOQ0UmJmNvbmN1cnJlbmN5LmRlbGF5KGRvbS5ERUJPVU5DRSkpLnRoZW4oZnVuY3Rpb24oKXskYnV0dG9uLmFkZENsYXNzKCdkaXNhYmxlZCcpLnByb3AoJ2Rpc2FibGVkJyx0cnVlKTskYnV0dG9uLnJlbW92ZUNsYXNzKCdvX2RlYm91bmNlX2Rpc2FibGVkJyk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oZnVuY3Rpb24oKXskYnV0dG9uLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpLnByb3AoJ2Rpc2FibGVkJyxmYWxzZSk7fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKCl7JGJ1dHRvbi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO30pO30pO3JldHVybiByZXN1bHQ7fTt9LHByZXBlbmQ6ZnVuY3Rpb24oJHRhcmdldCxjb250ZW50LG9wdGlvbnMpeyR0YXJnZXQucHJlcGVuZChjb250ZW50KTtpZihvcHRpb25zJiZvcHRpb25zLmluX0RPTSl7X25vdGlmeShjb250ZW50LG9wdGlvbnMuY2FsbGJhY2tzKTt9fSxyZW5kZXJCdXR0b246ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGpRdWVyeVBhcmFtcz1fLmV4dGVuZCh7dHlwZTonYnV0dG9uJyx9LG9wdGlvbnMuYXR0cnN8fHt9KTt2YXIgZXh0cmFDbGFzc2VzPWpRdWVyeVBhcmFtcy5jbGFzcztpZihleHRyYUNsYXNzZXMpe2V4dHJhQ2xhc3Nlcz1leHRyYUNsYXNzZXMucmVwbGFjZSgvXGJvZV9oaWdobGlnaHRcYi9nLCdidG4tcHJpbWFyeScpLnJlcGxhY2UoL1xib2VfbGlua1xiL2csJ2J0bi1saW5rJyk7fQpqUXVlcnlQYXJhbXMuY2xhc3M9J2J0bic7aWYob3B0aW9ucy5zaXplKXtqUXVlcnlQYXJhbXMuY2xhc3MrPSgnIGJ0bi0nK29wdGlvbnMuc2l6ZSk7fQpqUXVlcnlQYXJhbXMuY2xhc3MrPSgnICcrKGV4dHJhQ2xhc3Nlc3x8J2J0bi1zZWNvbmRhcnknKSk7dmFyICRidXR0b249JCgnPGJ1dHRvbi8+JyxqUXVlcnlQYXJhbXMpO2lmKG9wdGlvbnMuaWNvbil7aWYob3B0aW9ucy5pY29uLnN1YnN0cigwLDMpPT09J2ZhLScpeyRidXR0b24uYXBwZW5kKCQoJzxpLz4nLHtjbGFzczonZmEgZmEtZncgb19idXR0b25faWNvbiAnK29wdGlvbnMuaWNvbix9KSk7fWVsc2V7JGJ1dHRvbi5hcHBlbmQoJCgnPGltZy8+Jyx7c3JjOm9wdGlvbnMuaWNvbix9KSk7fX0KaWYob3B0aW9ucy50ZXh0KXskYnV0dG9uLmFwcGVuZCgkKCc8c3Bhbi8+Jyx7dGV4dDpvcHRpb25zLnRleHQsfSkpO30KcmV0dXJuICRidXR0b247fSxyZW5kZXJDaGVja2JveDpmdW5jdGlvbihvcHRpb25zKXt2YXIgaWQ9Xy51bmlxdWVJZCgnY2hlY2tib3gtJyk7dmFyICRjb250YWluZXI9JCgnPGRpdi8+Jyx7Y2xhc3M6J2N1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCcsfSk7dmFyICRpbnB1dD0kKCc8aW5wdXQvPicse3R5cGU6J2NoZWNrYm94JyxpZDppZCxjbGFzczonY3VzdG9tLWNvbnRyb2wtaW5wdXQnLH0pO3ZhciAkbGFiZWw9JCgnPGxhYmVsLz4nLHtmb3I6aWQsY2xhc3M6J2N1c3RvbS1jb250cm9sLWxhYmVsJyx0ZXh0Om9wdGlvbnMmJm9wdGlvbnMudGV4dHx8JycsfSk7aWYoIW9wdGlvbnN8fCFvcHRpb25zLnRleHQpeyRsYWJlbC5odG1sKCcmIzgyMDM7Jyk7fQppZihvcHRpb25zJiZvcHRpb25zLnByb3ApeyRpbnB1dC5wcm9wKG9wdGlvbnMucHJvcCk7fQpyZXR1cm4gJGNvbnRhaW5lci5hcHBlbmQoJGlucHV0LCRsYWJlbCk7fSxzZXRTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbihub2RlLHJhbmdlKXtpZihub2RlLnNldFNlbGVjdGlvblJhbmdlKXtub2RlLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlLnN0YXJ0LHJhbmdlLmVuZCk7fWVsc2UgaWYobm9kZS5jcmVhdGVUZXh0UmFuZ2Upe25vZGUuY3JlYXRlVGV4dFJhbmdlKCkuY29sbGFwc2UodHJ1ZSkubW92ZUVuZCgnY2hhcmFjdGVyJyxyYW5nZS5zdGFydCkubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLHJhbmdlLmVuZCkuc2VsZWN0KCk7fX0saW5pdEF1dG9Nb3JlTWVudTpmdW5jdGlvbigkZWwsb3B0aW9ucyl7b3B0aW9ucz1fLmV4dGVuZCh7dW5mb2xkYWJsZTonbm9uZScsbWF4V2lkdGg6ZmFsc2Usc2l6ZUNsYXNzOidTTScsfSxvcHRpb25zfHx7fSk7dmFyICRleHRyYUl0ZW1zVG9nZ2xlPW51bGw7dmFyIGRlYm91bmNlZEFkYXB0PV8uZGVib3VuY2UoX2FkYXB0LDI1MCk7Y29yZS5idXMub24oJ3Jlc2l6ZScsbnVsbCxkZWJvdW5jZWRBZGFwdCk7X2FkYXB0KCk7JGVsLmRhdGEoJ2RvbTphdXRvTW9yZU1lbnU6ZGVzdHJveScsZnVuY3Rpb24oKXtfcmVzdG9yZSgpO2NvcmUuYnVzLm9mZigncmVzaXplJyxudWxsLGRlYm91bmNlZEFkYXB0KTskZWwucmVtb3ZlRGF0YSgnZG9tOmF1dG9Nb3JlTWVudTpkZXN0cm95Jyk7fSk7ZnVuY3Rpb24gX3Jlc3RvcmUoKXtpZigkZXh0cmFJdGVtc1RvZ2dsZT09PW51bGwpe3JldHVybjt9CnZhciAkaXRlbXM9JGV4dHJhSXRlbXNUb2dnbGUuY2hpbGRyZW4oJy5kcm9wZG93bi1tZW51JykuY2hpbGRyZW4oKTskaXRlbXMuYWRkQ2xhc3MoJ25hdi1pdGVtJyk7JGl0ZW1zLmNoaWxkcmVuKCcuZHJvcGRvd24taXRlbSwgYScpLnJlbW92ZUNsYXNzKCdkcm9wZG93bi1pdGVtJykuYWRkQ2xhc3MoJ25hdi1saW5rJyk7JGl0ZW1zLmluc2VydEJlZm9yZSgkZXh0cmFJdGVtc1RvZ2dsZSk7JGV4dHJhSXRlbXNUb2dnbGUucmVtb3ZlKCk7JGV4dHJhSXRlbXNUb2dnbGU9bnVsbDt9CmZ1bmN0aW9uIF9hZGFwdCgpe2lmKCEkZWwuaXMoJzp2aXNpYmxlJykpe3JldHVybjt9Cl9yZXN0b3JlKCk7aWYoY29uZmlnLmRldmljZS5zaXplX2NsYXNzPD1jb25maWcuZGV2aWNlLlNJWkVTW29wdGlvbnMuc2l6ZUNsYXNzXSl7cmV0dXJuO30KdmFyICRhbGxJdGVtcz0kZWwuY2hpbGRyZW4oKTt2YXIgJHVuZm9sZGFibGVJdGVtcz0kYWxsSXRlbXMuZmlsdGVyKG9wdGlvbnMudW5mb2xkYWJsZSk7dmFyICRpdGVtcz0kYWxsSXRlbXMubm90KCR1bmZvbGRhYmxlSXRlbXMpO3ZhciBtYXhXaWR0aD0wO2lmKG9wdGlvbnMubWF4V2lkdGgpe21heFdpZHRoPW9wdGlvbnMubWF4V2lkdGgoKTt9ZWxzZXt2YXIgbUxlZnQ9JGVsLmlzKCcubWwtYXV0bywgLm14LWF1dG8sIC5tLWF1dG8nKTt2YXIgbVJpZ2h0PSRlbC5pcygnLm1yLWF1dG8sIC5teC1hdXRvLCAubS1hdXRvJyk7bWF4V2lkdGg9Y29tcHV0ZUZsb2F0T3V0ZXJXaWR0aFdpdGhNYXJnaW5zKCRlbFswXSxtTGVmdCxtUmlnaHQpO3ZhciBzdHlsZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkZWxbMF0pO21heFdpZHRoLT0ocGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nUmlnaHQpK3BhcnNlRmxvYXQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKStwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpKTttYXhXaWR0aC09Xy5yZWR1Y2UoJHVuZm9sZGFibGVJdGVtcyxmdW5jdGlvbihzdW0sZWwpe3JldHVybiBzdW0rY29tcHV0ZUZsb2F0T3V0ZXJXaWR0aFdpdGhNYXJnaW5zKGVsKTt9LDApO30KdmFyIG5iSXRlbXM9JGl0ZW1zLmxlbmd0aDt2YXIgbWVudUl0ZW1zV2lkdGg9Xy5yZWR1Y2UoJGl0ZW1zLGZ1bmN0aW9uKHN1bSxlbCl7cmV0dXJuIHN1bStjb21wdXRlRmxvYXRPdXRlcldpZHRoV2l0aE1hcmdpbnMoZWwpO30sMCk7aWYobWF4V2lkdGgtbWVudUl0ZW1zV2lkdGg+PS0wLjAwMSl7cmV0dXJuO30KdmFyICRkcm9wZG93bk1lbnU9JCgnPHVsLz4nLHtjbGFzczonZHJvcGRvd24tbWVudSd9KTskZXh0cmFJdGVtc1RvZ2dsZT0kKCc8bGkvPicse2NsYXNzOiduYXYtaXRlbSBkcm9wZG93biBvX2V4dHJhX21lbnVfaXRlbXMnfSkuYXBwZW5kKCQoJzxhLz4nLHtyb2xlOididXR0b24nLGhyZWY6JyMnLGNsYXNzOiduYXYtbGluayBkcm9wZG93bi10b2dnbGUgby1uby1jYXJldCcsJ2RhdGEtdG9nZ2xlJzonZHJvcGRvd24nLCdhcmlhLWV4cGFuZGVkJzpmYWxzZX0pLmFwcGVuZCgkKCc8aS8+Jyx7Y2xhc3M6J2ZhIGZhLXBsdXMnfSkpKS5hcHBlbmQoJGRyb3Bkb3duTWVudSk7JGV4dHJhSXRlbXNUb2dnbGUuaW5zZXJ0QWZ0ZXIoJGl0ZW1zLmxhc3QoKSk7bWVudUl0ZW1zV2lkdGgrPWNvbXB1dGVGbG9hdE91dGVyV2lkdGhXaXRoTWFyZ2lucygkZXh0cmFJdGVtc1RvZ2dsZVswXSk7ZG97bWVudUl0ZW1zV2lkdGgtPWNvbXB1dGVGbG9hdE91dGVyV2lkdGhXaXRoTWFyZ2lucygkaXRlbXMuZXEoLS1uYkl0ZW1zKVswXSk7fXdoaWxlKCEobWF4V2lkdGgtbWVudUl0ZW1zV2lkdGg+PS0wLjAwMSkmJihuYkl0ZW1zPjApKTt2YXIgJGV4dHJhSXRlbXM9JGl0ZW1zLnNsaWNlKG5iSXRlbXMpLmRldGFjaCgpOyRleHRyYUl0ZW1zLnJlbW92ZUNsYXNzKCduYXYtaXRlbScpOyRleHRyYUl0ZW1zLmNoaWxkcmVuKCcubmF2LWxpbmssIGEnKS5yZW1vdmVDbGFzcygnbmF2LWxpbmsnKS5hZGRDbGFzcygnZHJvcGRvd24taXRlbScpOyRkcm9wZG93bk1lbnUuYXBwZW5kKCRleHRyYUl0ZW1zKTskZXh0cmFJdGVtc1RvZ2dsZS5maW5kKCcubmF2LWxpbmsnKS50b2dnbGVDbGFzcygnYWN0aXZlJywkZXh0cmFJdGVtcy5jaGlsZHJlbigpLmhhc0NsYXNzKCdhY3RpdmUnKSk7fQpmdW5jdGlvbiBjb21wdXRlRmxvYXRPdXRlcldpZHRoV2l0aE1hcmdpbnMoZWwsbUxlZnQsbVJpZ2h0KXt2YXIgcmVjdD1lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2YXIgc3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO3ZhciBvdXRlcldpZHRoPXJlY3QucmlnaHQtcmVjdC5sZWZ0O2lmKG1MZWZ0IT09ZmFsc2Upe291dGVyV2lkdGgrPXBhcnNlRmxvYXQoc3R5bGUubWFyZ2luTGVmdCk7fQppZihtUmlnaHQhPT1mYWxzZSl7b3V0ZXJXaWR0aCs9cGFyc2VGbG9hdChzdHlsZS5tYXJnaW5SaWdodCk7fQpyZXR1cm4gb3V0ZXJXaWR0aDt9fSxkZXN0cm95QXV0b01vcmVNZW51OmZ1bmN0aW9uKCRlbCl7dmFyIGRlc3Ryb3lGdW5jPSRlbC5kYXRhKCdkb206YXV0b01vcmVNZW51OmRlc3Ryb3knKTtpZihkZXN0cm95RnVuYyl7ZGVzdHJveUZ1bmMuY2FsbChudWxsKTt9fSx9O3JldHVybiBkb207fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvbG9jYWxfc3RvcmFnZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIubG9jYWxfc3RvcmFnZScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBSYW1TdG9yYWdlPXJlcXVpcmUoJ3dlYi5SYW1TdG9yYWdlJyk7dmFyIG1peGlucz1yZXF1aXJlKCd3ZWIubWl4aW5zJyk7dmFyIHN0b3JhZ2U7dmFyIGxvY2FsU3RvcmFnZT13aW5kb3cubG9jYWxTdG9yYWdlO3RyeXt2YXIgdWlkPW5ldyBEYXRlKCk7bG9jYWxTdG9yYWdlLnNldEl0ZW0odWlkLHVpZCk7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odWlkKTtzdG9yYWdlPShmdW5jdGlvbigpe3ZhciBzdG9yYWdlPU9iamVjdC5jcmVhdGUoXy5leHRlbmQoe2dldEl0ZW06bG9jYWxTdG9yYWdlLmdldEl0ZW0uYmluZChsb2NhbFN0b3JhZ2UpLHNldEl0ZW06bG9jYWxTdG9yYWdlLnNldEl0ZW0uYmluZChsb2NhbFN0b3JhZ2UpLHJlbW92ZUl0ZW06bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0uYmluZChsb2NhbFN0b3JhZ2UpLGNsZWFyOmxvY2FsU3RvcmFnZS5jbGVhci5iaW5kKGxvY2FsU3RvcmFnZSksfSxtaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4pKTtzdG9yYWdlLmluaXQoKTskKHdpbmRvdykub24oJ3N0b3JhZ2UnLGZ1bmN0aW9uKGUpe3ZhciBrZXk9ZS5vcmlnaW5hbEV2ZW50LmtleTt2YXIgbmV3VmFsdWU9ZS5vcmlnaW5hbEV2ZW50Lm5ld1ZhbHVlO3RyeXtKU09OLnBhcnNlKG5ld1ZhbHVlKTtzdG9yYWdlLnRyaWdnZXIoJ3N0b3JhZ2UnLHtrZXk6a2V5LG5ld1ZhbHVlOm5ld1ZhbHVlLH0pO31jYXRjaChlcnJvcil7fX0pO3JldHVybiBzdG9yYWdlO30pKCk7fWNhdGNoKGV4Y2VwdGlvbil7Y29uc29sZS53YXJuKCdGYWlsIHRvIGxvYWQgbG9jYWxTdG9yYWdlJyk7c3RvcmFnZT1uZXcgUmFtU3RvcmFnZSgpO30KcmV0dXJuIHN0b3JhZ2U7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvbWl4aW5zLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5taXhpbnMnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQ2xhc3M9cmVxdWlyZSgnd2ViLkNsYXNzJyk7dmFyIHV0aWxzPXJlcXVpcmUoJ3dlYi51dGlscycpO3ZhciBQYXJlbnRlZE1peGluPXtfX3BhcmVudGVkTWl4aW46dHJ1ZSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5fX3BhcmVudGVkRGVzdHJveWVkPWZhbHNlO3RoaXMuX19wYXJlbnRlZENoaWxkcmVuPVtdO3RoaXMuX19wYXJlbnRlZFBhcmVudD1udWxsO30sc2V0UGFyZW50OmZ1bmN0aW9uKHBhcmVudCl7aWYodGhpcy5nZXRQYXJlbnQoKSl7aWYodGhpcy5nZXRQYXJlbnQoKS5fX3BhcmVudGVkTWl4aW4pe3RoaXMuZ2V0UGFyZW50KCkuX19wYXJlbnRlZENoaWxkcmVuPV8ud2l0aG91dCh0aGlzLmdldFBhcmVudCgpLmdldENoaWxkcmVuKCksdGhpcyk7fX0KdGhpcy5fX3BhcmVudGVkUGFyZW50PXBhcmVudDtpZihwYXJlbnQmJnBhcmVudC5fX3BhcmVudGVkTWl4aW4pe3BhcmVudC5fX3BhcmVudGVkQ2hpbGRyZW4ucHVzaCh0aGlzKTt9fSxnZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX3BhcmVudGVkUGFyZW50O30sZ2V0Q2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gXy5jbG9uZSh0aGlzLl9fcGFyZW50ZWRDaGlsZHJlbik7fSxpc0Rlc3Ryb3llZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fcGFyZW50ZWREZXN0cm95ZWQ7fSxhbGl2ZTpmdW5jdGlvbihwcm9taXNlLHNob3VsZFJlamVjdCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Byb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpe2lmKCFzZWxmLmlzRGVzdHJveWVkKCkpe3Jlc29sdmUocmVzdWx0KTt9ZWxzZSBpZihzaG91bGRSZWplY3Qpe3JlamVjdCgpO319KS5ndWFyZGVkQ2F0Y2goZnVuY3Rpb24ocmVhc29uKXtpZighc2VsZi5pc0Rlc3Ryb3llZCgpKXtyZWplY3QocmVhc29uKTt9ZWxzZSBpZihzaG91bGRSZWplY3Qpe3JlamVjdCgpO319KTt9KTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmdldENoaWxkcmVuKCkuZm9yRWFjaChmdW5jdGlvbihjaGlsZCl7Y2hpbGQuZGVzdHJveSgpO30pO3RoaXMuc2V0UGFyZW50KHVuZGVmaW5lZCk7dGhpcy5fX3BhcmVudGVkRGVzdHJveWVkPXRydWU7fSxmaW5kQW5jZXN0b3I6ZnVuY3Rpb24ocHJlZGljYXRlKXt2YXIgYW5jZXN0b3I9dGhpczt3aGlsZShhbmNlc3RvciYmIShwcmVkaWNhdGUoYW5jZXN0b3IpKSYmYW5jZXN0b3IuZ2V0UGFyZW50KXthbmNlc3Rvcj1hbmNlc3Rvci5nZXRQYXJlbnQoKTt9CnJldHVybiBhbmNlc3Rvcjt9LH07ZnVuY3Rpb24gT2Rvb0V2ZW50KHRhcmdldCxuYW1lLGRhdGEpe3RoaXMudGFyZ2V0PXRhcmdldDt0aGlzLm5hbWU9bmFtZTt0aGlzLmRhdGE9T2JqZWN0LmNyZWF0ZShudWxsKTtfLmV4dGVuZCh0aGlzLmRhdGEsZGF0YSk7dGhpcy5zdG9wcGVkPWZhbHNlO30KT2Rvb0V2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLnN0b3BwZWQ9dHJ1ZTt9O09kb29FdmVudC5wcm90b3R5cGUuaXNfc3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BwZWQ7fTt2YXIgRXZlbnRzPUNsYXNzLmV4dGVuZCh7b246ZnVuY3Rpb24oZXZlbnRzLGNhbGxiYWNrLGNvbnRleHQpe3ZhciBldjtldmVudHM9ZXZlbnRzLnNwbGl0KC9ccysvKTt2YXIgY2FsbHM9dGhpcy5fY2FsbGJhY2tzfHwodGhpcy5fY2FsbGJhY2tzPXt9KTt3aGlsZSgoZXY9ZXZlbnRzLnNoaWZ0KCkpKXt2YXIgbGlzdD1jYWxsc1tldl18fChjYWxsc1tldl09e30pO3ZhciB0YWlsPWxpc3QudGFpbHx8KGxpc3QudGFpbD1saXN0Lm5leHQ9e30pO3RhaWwuY2FsbGJhY2s9Y2FsbGJhY2s7dGFpbC5jb250ZXh0PWNvbnRleHQ7bGlzdC50YWlsPXRhaWwubmV4dD17fTt9CnJldHVybiB0aGlzO30sb2ZmOmZ1bmN0aW9uKGV2ZW50cyxjYWxsYmFjayxjb250ZXh0KXt2YXIgZXYsY2FsbHMsbm9kZTtpZighZXZlbnRzKXtkZWxldGUgdGhpcy5fY2FsbGJhY2tzO31lbHNlIGlmKChjYWxscz10aGlzLl9jYWxsYmFja3MpKXtldmVudHM9ZXZlbnRzLnNwbGl0KC9ccysvKTt3aGlsZSgoZXY9ZXZlbnRzLnNoaWZ0KCkpKXtub2RlPWNhbGxzW2V2XTtkZWxldGUgY2FsbHNbZXZdO2lmKCFjYWxsYmFja3x8IW5vZGUpCmNvbnRpbnVlO3doaWxlKChub2RlPW5vZGUubmV4dCkmJm5vZGUubmV4dCl7aWYobm9kZS5jYWxsYmFjaz09PWNhbGxiYWNrJiYoIWNvbnRleHR8fG5vZGUuY29udGV4dD09PWNvbnRleHQpKQpjb250aW51ZTt0aGlzLm9uKGV2LG5vZGUuY2FsbGJhY2ssbm9kZS5jb250ZXh0KTt9fX0KcmV0dXJuIHRoaXM7fSxjYWxsYmFja0xpc3Q6ZnVuY3Rpb24oKXt2YXIgbHN0PVtdO18uZWFjaCh0aGlzLl9jYWxsYmFja3N8fHt9LGZ1bmN0aW9uKGVsLGV2ZW50TmFtZSl7dmFyIG5vZGU9ZWw7d2hpbGUoKG5vZGU9bm9kZS5uZXh0KSYmbm9kZS5uZXh0KXtsc3QucHVzaChbZXZlbnROYW1lLG5vZGUuY2FsbGJhY2ssbm9kZS5jb250ZXh0XSk7fX0pO3JldHVybiBsc3Q7fSx0cmlnZ2VyOmZ1bmN0aW9uKGV2ZW50cyl7dmFyIGV2ZW50LG5vZGUsY2FsbHMsdGFpbCxhcmdzLGFsbCxyZXN0O2lmKCEoY2FsbHM9dGhpcy5fY2FsbGJhY2tzKSkKcmV0dXJuIHRoaXM7YWxsPWNhbGxzLmFsbDsoZXZlbnRzPWV2ZW50cy5zcGxpdCgvXHMrLykpLnB1c2gobnVsbCk7d2hpbGUoKGV2ZW50PWV2ZW50cy5zaGlmdCgpKSl7aWYoYWxsKQpldmVudHMucHVzaCh7bmV4dDphbGwubmV4dCx0YWlsOmFsbC50YWlsLGV2ZW50OmV2ZW50fSk7aWYoIShub2RlPWNhbGxzW2V2ZW50XSkpCmNvbnRpbnVlO2V2ZW50cy5wdXNoKHtuZXh0Om5vZGUubmV4dCx0YWlsOm5vZGUudGFpbH0pO30KcmVzdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7d2hpbGUoKG5vZGU9ZXZlbnRzLnBvcCgpKSl7dGFpbD1ub2RlLnRhaWw7YXJncz1ub2RlLmV2ZW50P1tub2RlLmV2ZW50XS5jb25jYXQocmVzdCk6cmVzdDt3aGlsZSgobm9kZT1ub2RlLm5leHQpIT09dGFpbCl7bm9kZS5jYWxsYmFjay5hcHBseShub2RlLmNvbnRleHR8fHRoaXMsYXJncyk7fX0KcmV0dXJuIHRoaXM7fX0pO3ZhciBFdmVudERpc3BhdGNoZXJNaXhpbj1fLmV4dGVuZCh7fSxQYXJlbnRlZE1peGluLHtfX2V2ZW50RGlzcGF0Y2hlck1peGluOnRydWUsY3VzdG9tX2V2ZW50czp7fSxpbml0OmZ1bmN0aW9uKCl7UGFyZW50ZWRNaXhpbi5pbml0LmNhbGwodGhpcyk7dGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzPW5ldyBFdmVudHMoKTt0aGlzLl9fZWRpc3BhdGNoZXJSZWdpc3RlcmVkRXZlbnRzPVtdO3RoaXMuX2RlbGVnYXRlQ3VzdG9tRXZlbnRzKCk7fSxwcm94eTpmdW5jdGlvbihtZXRob2Qpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGZuPSh0eXBlb2YgbWV0aG9kPT09J3N0cmluZycpP3NlbGZbbWV0aG9kXTptZXRob2Q7aWYoZm49PT12b2lkIDApe3Rocm93IG5ldyBFcnJvcigiQ291bGRuJ3QgZmluZCBtZXRob2QgJyIrbWV0aG9kKyInIGluIHdpZGdldCAiK3NlbGYpO30KcmV0dXJuIGZuLmFwcGx5KHNlbGYsYXJndW1lbnRzKTt9O30sX2RlbGVnYXRlQ3VzdG9tRXZlbnRzOmZ1bmN0aW9uKCl7aWYoXy5pc0VtcHR5KHRoaXMuY3VzdG9tX2V2ZW50cykpe3JldHVybjt9CmZvcih2YXIga2V5IGluIHRoaXMuY3VzdG9tX2V2ZW50cyl7aWYoIXRoaXMuY3VzdG9tX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtjb250aW51ZTt9CnZhciBtZXRob2Q9dGhpcy5wcm94eSh0aGlzLmN1c3RvbV9ldmVudHNba2V5XSk7dGhpcy5vbihrZXksdGhpcyxtZXRob2QpO319LG9uOmZ1bmN0aW9uKGV2ZW50cyxkZXN0LGZ1bmMpe3ZhciBzZWxmPXRoaXM7aWYodHlwZW9mIGZ1bmMhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgRXJyb3IoIkV2ZW50IGhhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO30KZXZlbnRzPWV2ZW50cy5zcGxpdCgvXHMrLyk7Xy5lYWNoKGV2ZW50cyxmdW5jdGlvbihldmVudE5hbWUpe3NlbGYuX19lZGlzcGF0Y2hlckV2ZW50cy5vbihldmVudE5hbWUsZnVuYyxkZXN0KTtpZihkZXN0JiZkZXN0Ll9fZXZlbnREaXNwYXRjaGVyTWl4aW4pe2Rlc3QuX19lZGlzcGF0Y2hlclJlZ2lzdGVyZWRFdmVudHMucHVzaCh7bmFtZTpldmVudE5hbWUsZnVuYzpmdW5jLHNvdXJjZTpzZWxmfSk7fX0pO3JldHVybiB0aGlzO30sb2ZmOmZ1bmN0aW9uKGV2ZW50cyxkZXN0LGZ1bmMpe3ZhciBzZWxmPXRoaXM7ZXZlbnRzPWV2ZW50cy5zcGxpdCgvXHMrLyk7Xy5lYWNoKGV2ZW50cyxmdW5jdGlvbihldmVudE5hbWUpe3NlbGYuX19lZGlzcGF0Y2hlckV2ZW50cy5vZmYoZXZlbnROYW1lLGZ1bmMsZGVzdCk7aWYoZGVzdCYmZGVzdC5fX2V2ZW50RGlzcGF0Y2hlck1peGluKXtkZXN0Ll9fZWRpc3BhdGNoZXJSZWdpc3RlcmVkRXZlbnRzPV8uZmlsdGVyKGRlc3QuX19lZGlzcGF0Y2hlclJlZ2lzdGVyZWRFdmVudHMsZnVuY3Rpb24oZWwpe3JldHVybiEoZWwubmFtZT09PWV2ZW50TmFtZSYmZWwuZnVuYz09PWZ1bmMmJmVsLnNvdXJjZT09PXNlbGYpO30pO319KTtyZXR1cm4gdGhpczt9LG9uY2U6ZnVuY3Rpb24oZXZlbnRzLGRlc3QsZnVuYyl7dmFyIHNlbGY9dGhpcztpZih0eXBlb2YgZnVuYyE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBFcnJvcigiRXZlbnQgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24uIik7fQpzZWxmLm9uKGV2ZW50cyxkZXN0LGZ1bmN0aW9uIHdoYXQoKXtmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtzZWxmLm9mZihldmVudHMsZGVzdCx3aGF0KTt9KTt9LHRyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLl9fZWRpc3BhdGNoZXJFdmVudHMudHJpZ2dlci5hcHBseSh0aGlzLl9fZWRpc3BhdGNoZXJFdmVudHMsYXJndW1lbnRzKTtyZXR1cm4gdGhpczt9LHRyaWdnZXJfdXA6ZnVuY3Rpb24obmFtZSxpbmZvKXt2YXIgZXZlbnQ9bmV3IE9kb29FdmVudCh0aGlzLG5hbWUsaW5mbyk7dGhpcy5fdHJpZ2dlcl91cChldmVudCk7cmV0dXJuIGV2ZW50O30sX3RyaWdnZXJfdXA6ZnVuY3Rpb24oZXZlbnQpe3ZhciBwYXJlbnQ7dGhpcy5fX2VkaXNwYXRjaGVyRXZlbnRzLnRyaWdnZXIoZXZlbnQubmFtZSxldmVudCk7aWYoIWV2ZW50LmlzX3N0b3BwZWQoKSYmKHBhcmVudD10aGlzLmdldFBhcmVudCgpKSl7cGFyZW50Ll90cmlnZ2VyX3VwKGV2ZW50KTt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztfLmVhY2godGhpcy5fX2VkaXNwYXRjaGVyUmVnaXN0ZXJlZEV2ZW50cyxmdW5jdGlvbihldmVudCl7ZXZlbnQuc291cmNlLl9fZWRpc3BhdGNoZXJFdmVudHMub2ZmKGV2ZW50Lm5hbWUsZXZlbnQuZnVuYyxzZWxmKTt9KTt0aGlzLl9fZWRpc3BhdGNoZXJSZWdpc3RlcmVkRXZlbnRzPVtdO18uZWFjaCh0aGlzLl9fZWRpc3BhdGNoZXJFdmVudHMuY2FsbGJhY2tMaXN0KCksZnVuY3Rpb24oY2FsKXt0aGlzLm9mZihjYWxbMF0sY2FsWzJdLGNhbFsxXSk7fSx0aGlzKTt0aGlzLl9fZWRpc3BhdGNoZXJFdmVudHMub2ZmKCk7UGFyZW50ZWRNaXhpbi5kZXN0cm95LmNhbGwodGhpcyk7fX0pO3ZhciBQcm9wZXJ0aWVzTWl4aW49Xy5leHRlbmQoe30sRXZlbnREaXNwYXRjaGVyTWl4aW4se2luaXQ6ZnVuY3Rpb24oKXtFdmVudERpc3BhdGNoZXJNaXhpbi5pbml0LmNhbGwodGhpcyk7dGhpcy5fX2dldHRlclNldHRlckludGVybmFsTWFwPXt9O30sc2V0OmZ1bmN0aW9uKGFyZzEsYXJnMixhcmczKXt2YXIgbWFwO3ZhciBvcHRpb25zO2lmKHR5cGVvZiBhcmcxPT09InN0cmluZyIpe21hcD17fTttYXBbYXJnMV09YXJnMjtvcHRpb25zPWFyZzN8fHt9O31lbHNle21hcD1hcmcxO29wdGlvbnM9YXJnMnx8e307fQp2YXIgc2VsZj10aGlzO3ZhciBjaGFuZ2VkPWZhbHNlO18uZWFjaChtYXAsZnVuY3Rpb24odmFsLGtleSl7dmFyIHRtcD1zZWxmLl9fZ2V0dGVyU2V0dGVySW50ZXJuYWxNYXBba2V5XTtpZih0bXA9PT12YWwpCnJldHVybjtpZihrZXk9PT0ndmFsdWUnJiZzZWxmLmZpZWxkJiZzZWxmLmZpZWxkLnR5cGU9PT0nZmxvYXQnJiZ0bXAmJnZhbCl7dmFyIGRpZ2l0cz1zZWxmLmZpZWxkLmRpZ2l0cztpZihfLmlzQXJyYXkoZGlnaXRzKSl7aWYodXRpbHMuZmxvYXRfaXNfemVybyh0bXAtdmFsLGRpZ2l0c1sxXSkpe3JldHVybjt9fX0KY2hhbmdlZD10cnVlO3NlbGYuX19nZXR0ZXJTZXR0ZXJJbnRlcm5hbE1hcFtrZXldPXZhbDtpZighb3B0aW9ucy5zaWxlbnQpCnNlbGYudHJpZ2dlcigiY2hhbmdlOiIra2V5LHNlbGYse29sZFZhbHVlOnRtcCxuZXdWYWx1ZTp2YWx9KTt9KTtpZihjaGFuZ2VkKQpzZWxmLnRyaWdnZXIoImNoYW5nZSIsc2VsZik7fSxnZXQ6ZnVuY3Rpb24oa2V5KXtyZXR1cm4gdGhpcy5fX2dldHRlclNldHRlckludGVybmFsTWFwW2tleV07fX0pO3JldHVybntQYXJlbnRlZE1peGluOlBhcmVudGVkTWl4aW4sRXZlbnREaXNwYXRjaGVyTWl4aW46RXZlbnREaXNwYXRjaGVyTWl4aW4sUHJvcGVydGllc01peGluOlByb3BlcnRpZXNNaXhpbix9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3F3ZWIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLlFXZWInLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdHJhbnNsYXRpb249cmVxdWlyZSgnd2ViLnRyYW5zbGF0aW9uJyk7dmFyIF90PXRyYW5zbGF0aW9uLl90O2Z1bmN0aW9uIFFXZWIoZGVidWcsZGVmYXVsdF9kaWN0LGVuYWJsZVRyYW5zbGF0aW9uKXtpZihlbmFibGVUcmFuc2xhdGlvbj09PXVuZGVmaW5lZCl7ZW5hYmxlVHJhbnNsYXRpb249dHJ1ZTt9CnZhciBxd2ViPW5ldyBRV2ViMi5FbmdpbmUoKTtxd2ViLmRlZmF1bHRfZGljdD1fLmV4dGVuZCh7fSxkZWZhdWx0X2RpY3R8fHt9LHsnXyc6XywnSlNPTic6SlNPTiwnX3QnOnRyYW5zbGF0aW9uLl90LCdfX2RlYnVnX18nOmRlYnVnLCdtb21lbnQnOmZ1bmN0aW9uKGRhdGUpe3JldHVybiBuZXcgbW9tZW50KGRhdGUpO30sJ2NzcmZfdG9rZW4nOm9kb28uY3NyZl90b2tlbix9KTtxd2ViLmRlYnVnPWRlYnVnO3F3ZWIucHJlcHJvY2Vzc19ub2RlPWVuYWJsZVRyYW5zbGF0aW9uP3ByZXByb2Nlc3Nfbm9kZTpmdW5jdGlvbigpe307cmV0dXJuIHF3ZWI7fQpmdW5jdGlvbiBwcmVwcm9jZXNzX25vZGUoKXtzd2l0Y2godGhpcy5ub2RlLm5vZGVUeXBlKXtjYXNlIE5vZGUuVEVYVF9OT0RFOmNhc2UgTm9kZS5DREFUQV9TRUNUSU9OX05PREU6dmFyIHRyYW5zbGF0aW9uPXRoaXMubm9kZS5wYXJlbnROb2RlLmF0dHJpYnV0ZXNbJ3QtdHJhbnNsYXRpb24nXTtpZih0cmFuc2xhdGlvbiYmdHJhbnNsYXRpb24udmFsdWU9PT0nb2ZmJyl7cmV0dXJuO30KdmFyIG1hdGNoPS9eKFxzKikoW1xzXFNdKz8pKFxzKikkLy5leGVjKHRoaXMubm9kZS5kYXRhKTtpZihtYXRjaCl7dGhpcy5ub2RlLmRhdGE9bWF0Y2hbMV0rX3QobWF0Y2hbMl0pK21hdGNoWzNdO30KYnJlYWs7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTp2YXIgYXR0cixhdHRycz1bJ2xhYmVsJywndGl0bGUnLCdhbHQnLCdwbGFjZWhvbGRlciddO3doaWxlKChhdHRyPWF0dHJzLnBvcCgpKSl7aWYodGhpcy5hdHRyaWJ1dGVzW2F0dHJdKXt0aGlzLmF0dHJpYnV0ZXNbYXR0cl09X3QodGhpcy5hdHRyaWJ1dGVzW2F0dHJdKTt9fX19CnJldHVybiBRV2ViO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3JhbV9zdG9yYWdlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5SYW1TdG9yYWdlJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciBSYW1TdG9yYWdlPUNsYXNzLmV4dGVuZChtaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4se2luaXQ6ZnVuY3Rpb24oKXttaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4uaW5pdC5jYWxsKHRoaXMpO2lmKCF0aGlzLnN0b3JhZ2Upe3RoaXMuY2xlYXIoKTt9fSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuc3RvcmFnZT1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMubGVuZ3RoPTA7fSxnZXRJdGVtOmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMuc3RvcmFnZVtrZXldO30sa2V5OmZ1bmN0aW9uKGluZGV4KXtyZXR1cm4gXy5rZXlzKHRoaXMuc3RvcmFnZSlbaW5kZXhdO30scmVtb3ZlSXRlbTpmdW5jdGlvbihrZXkpe2lmKGtleSBpbiB0aGlzLnN0b3JhZ2Upe3RoaXMubGVuZ3RoLS07fQpkZWxldGUgdGhpcy5zdG9yYWdlW2tleV07dGhpcy50cmlnZ2VyKCdzdG9yYWdlJyx7a2V5OmtleSxuZXdWYWx1ZTpudWxsfSk7fSxzZXRJdGVtOmZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYoIShrZXkgaW4gdGhpcy5zdG9yYWdlKSl7dGhpcy5sZW5ndGgrKzt9CnRoaXMuc3RvcmFnZVtrZXldPXZhbHVlO3RoaXMudHJpZ2dlcignc3RvcmFnZScse2tleTprZXksbmV3VmFsdWU6dmFsdWV9KTt9LH0pO3JldHVybiBSYW1TdG9yYWdlO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3JlZ2lzdHJ5LmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5SZWdpc3RyeScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTt2YXIgUmVnaXN0cnk9Q2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG1hcHBpbmcpe3RoaXMubWFwPU9iamVjdC5jcmVhdGUobWFwcGluZ3x8bnVsbCk7dGhpcy5fc2NvcmVNYXBwaW5nPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fc29ydGVkS2V5cz1udWxsO3RoaXMubGlzdGVuZXJzPVtdO30sYWRkOmZ1bmN0aW9uKGtleSx2YWx1ZSxzY29yZSl7dGhpcy5fc2NvcmVNYXBwaW5nW2tleV09c2NvcmU9PT11bmRlZmluZWQ/a2V5OnNjb3JlO3RoaXMuX3NvcnRlZEtleXM9bnVsbDt0aGlzLm1hcFtrZXldPXZhbHVlO18uZWFjaCh0aGlzLmxpc3RlbmVycyxmdW5jdGlvbihjYWxsYmFjayl7Y2FsbGJhY2soa2V5LHZhbHVlKTt9KTtyZXR1cm4gdGhpczt9LGNvbnRhaW5zOmZ1bmN0aW9uKGtleSl7cmV0dXJuKGtleSBpbiB0aGlzLm1hcCk7fSxlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcy5tYXApO30sZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMubWFwW2tleV07fSxnZXRBbnk6ZnVuY3Rpb24oa2V5cyl7Zm9yKHZhciBpPTA7aTxrZXlzLmxlbmd0aDtpKyspe2lmKGtleXNbaV1pbiB0aGlzLm1hcCl7cmV0dXJuIHRoaXMubWFwW2tleXNbaV1dO319CnJldHVybiBudWxsO30sa2V5czpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7aWYoIXRoaXMuX3NvcnRlZEtleXMpe3RoaXMuX3NvcnRlZEtleXM9Xy5zb3J0QnkoT2JqZWN0LmtleXModGhpcy5tYXApLGZ1bmN0aW9uKGtleSl7cmV0dXJuIHNlbGYuX3Njb3JlTWFwcGluZ1trZXldfHwwO30pO30KcmV0dXJuIHRoaXMuX3NvcnRlZEtleXM7fSxvbkFkZDpmdW5jdGlvbihjYWxsYmFjayl7dGhpcy5saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7fSx2YWx1ZXM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLmtleXMoKS5tYXAoZnVuY3Rpb24oa2V5KXtyZXR1cm4gc2VsZi5tYXBba2V5XTt9KTt9LH0pO3JldHVybiBSZWdpc3RyeTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9ycGMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLnJwYycsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBhamF4PXJlcXVpcmUoJ3dlYi5hamF4Jyk7cmV0dXJue3F1ZXJ5OmZ1bmN0aW9uKHBhcmFtcyxvcHRpb25zKXt2YXIgcXVlcnk9dGhpcy5idWlsZFF1ZXJ5KHBhcmFtcyk7cmV0dXJuIGFqYXgucnBjKHF1ZXJ5LnJvdXRlLHF1ZXJ5LnBhcmFtcyxvcHRpb25zKTt9LGJ1aWxkUXVlcnk6ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIHJvdXRlO3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXN8fHt9O3ZhciBvcmRlckJ5O2lmKG9wdGlvbnMucm91dGUpe3JvdXRlPW9wdGlvbnMucm91dGU7fWVsc2UgaWYob3B0aW9ucy5tb2RlbCYmb3B0aW9ucy5tZXRob2Qpe3JvdXRlPScvd2ViL2RhdGFzZXQvY2FsbF9rdy8nK29wdGlvbnMubW9kZWwrJy8nK29wdGlvbnMubWV0aG9kO30KaWYob3B0aW9ucy5tZXRob2Qpe3BhcmFtcy5hcmdzPW9wdGlvbnMuYXJnc3x8W107cGFyYW1zLm1vZGVsPW9wdGlvbnMubW9kZWw7cGFyYW1zLm1ldGhvZD1vcHRpb25zLm1ldGhvZDtwYXJhbXMua3dhcmdzPV8uZXh0ZW5kKHBhcmFtcy5rd2FyZ3N8fHt9LG9wdGlvbnMua3dhcmdzKTtwYXJhbXMua3dhcmdzLmNvbnRleHQ9b3B0aW9ucy5jb250ZXh0fHxwYXJhbXMuY29udGV4dHx8cGFyYW1zLmt3YXJncy5jb250ZXh0O30KaWYob3B0aW9ucy5tZXRob2Q9PT0ncmVhZF9ncm91cCd8fG9wdGlvbnMubWV0aG9kPT09J3dlYl9yZWFkX2dyb3VwJyl7aWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMF0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmRvbWFpbj1vcHRpb25zLmRvbWFpbnx8cGFyYW1zLmRvbWFpbnx8cGFyYW1zLmt3YXJncy5kb21haW58fFtdO30KaWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMV0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkc3x8cGFyYW1zLmt3YXJncy5maWVsZHN8fFtdO30KaWYoIShwYXJhbXMuYXJncyYmcGFyYW1zLmFyZ3NbMl0hPT11bmRlZmluZWQpKXtwYXJhbXMua3dhcmdzLmdyb3VwYnk9b3B0aW9ucy5ncm91cEJ5fHxwYXJhbXMuZ3JvdXBCeXx8cGFyYW1zLmt3YXJncy5ncm91cGJ5fHxbXTt9CnBhcmFtcy5rd2FyZ3Mub2Zmc2V0PW9wdGlvbnMub2Zmc2V0fHxwYXJhbXMub2Zmc2V0fHxwYXJhbXMua3dhcmdzLm9mZnNldDtwYXJhbXMua3dhcmdzLmxpbWl0PW9wdGlvbnMubGltaXR8fHBhcmFtcy5saW1pdHx8cGFyYW1zLmt3YXJncy5saW1pdDtvcmRlckJ5PW9wdGlvbnMub3JkZXJCeXx8cGFyYW1zLm9yZGVyQnl8fHBhcmFtcy5rd2FyZ3Mub3JkZXJieTtwYXJhbXMua3dhcmdzLm9yZGVyYnk9b3JkZXJCeT90aGlzLl9zZXJpYWxpemVTb3J0KG9yZGVyQnkpOm9yZGVyQnk7cGFyYW1zLmt3YXJncy5sYXp5PSdsYXp5J2luIG9wdGlvbnM/b3B0aW9ucy5sYXp5OnBhcmFtcy5sYXp5O2lmKG9wdGlvbnMubWV0aG9kPT09J3dlYl9yZWFkX2dyb3VwJyl7cGFyYW1zLmt3YXJncy5leHBhbmQ9b3B0aW9ucy5leHBhbmR8fHBhcmFtcy5leHBhbmR8fHBhcmFtcy5rd2FyZ3MuZXhwYW5kO3BhcmFtcy5rd2FyZ3MuZXhwYW5kX2xpbWl0PW9wdGlvbnMuZXhwYW5kX2xpbWl0fHxwYXJhbXMuZXhwYW5kX2xpbWl0fHxwYXJhbXMua3dhcmdzLmV4cGFuZF9saW1pdDt2YXIgZXhwYW5kT3JkZXJCeT1vcHRpb25zLmV4cGFuZF9vcmRlcmJ5fHxwYXJhbXMuZXhwYW5kX29yZGVyYnl8fHBhcmFtcy5rd2FyZ3MuZXhwYW5kX29yZGVyYnk7cGFyYW1zLmt3YXJncy5leHBhbmRfb3JkZXJieT1leHBhbmRPcmRlckJ5P3RoaXMuX3NlcmlhbGl6ZVNvcnQoZXhwYW5kT3JkZXJCeSk6ZXhwYW5kT3JkZXJCeTt9fQppZihvcHRpb25zLm1ldGhvZD09PSdzZWFyY2hfcmVhZCcpe3BhcmFtcy5rd2FyZ3MuZG9tYWluPW9wdGlvbnMuZG9tYWlufHxwYXJhbXMuZG9tYWlufHxwYXJhbXMua3dhcmdzLmRvbWFpbjtwYXJhbXMua3dhcmdzLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkc3x8cGFyYW1zLmt3YXJncy5maWVsZHM7cGFyYW1zLmt3YXJncy5vZmZzZXQ9b3B0aW9ucy5vZmZzZXR8fHBhcmFtcy5vZmZzZXR8fHBhcmFtcy5rd2FyZ3Mub2Zmc2V0O3BhcmFtcy5rd2FyZ3MubGltaXQ9b3B0aW9ucy5saW1pdHx8cGFyYW1zLmxpbWl0fHxwYXJhbXMua3dhcmdzLmxpbWl0O29yZGVyQnk9b3B0aW9ucy5vcmRlckJ5fHxwYXJhbXMub3JkZXJCeXx8cGFyYW1zLmt3YXJncy5vcmRlcjtwYXJhbXMua3dhcmdzLm9yZGVyPW9yZGVyQnk/dGhpcy5fc2VyaWFsaXplU29ydChvcmRlckJ5KTpvcmRlckJ5O30KaWYob3B0aW9ucy5yb3V0ZT09PScvd2ViL2RhdGFzZXQvc2VhcmNoX3JlYWQnKXtwYXJhbXMubW9kZWw9b3B0aW9ucy5tb2RlbHx8cGFyYW1zLm1vZGVsO3BhcmFtcy5kb21haW49b3B0aW9ucy5kb21haW58fHBhcmFtcy5kb21haW47cGFyYW1zLmZpZWxkcz1vcHRpb25zLmZpZWxkc3x8cGFyYW1zLmZpZWxkcztwYXJhbXMubGltaXQ9b3B0aW9ucy5saW1pdHx8cGFyYW1zLmxpbWl0O3BhcmFtcy5vZmZzZXQ9b3B0aW9ucy5vZmZzZXR8fHBhcmFtcy5vZmZzZXQ7b3JkZXJCeT1vcHRpb25zLm9yZGVyQnl8fHBhcmFtcy5vcmRlckJ5O3BhcmFtcy5zb3J0PW9yZGVyQnk/dGhpcy5fc2VyaWFsaXplU29ydChvcmRlckJ5KTpvcmRlckJ5O3BhcmFtcy5jb250ZXh0PW9wdGlvbnMuY29udGV4dHx8cGFyYW1zLmNvbnRleHR8fHt9O30KcmV0dXJue3JvdXRlOnJvdXRlLHBhcmFtczpKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpLH07fSxfc2VyaWFsaXplU29ydDpmdW5jdGlvbihvcmRlckJ5KXtyZXR1cm4gXy5tYXAob3JkZXJCeSxmdW5jdGlvbihvcmRlcil7cmV0dXJuIG9yZGVyLm5hbWUrKG9yZGVyLmFzYyE9PWZhbHNlPycgQVNDJzonIERFU0MnKTt9KS5qb2luKCcsICcpO30sfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS9zZXJ2aWNlX21peGlucy5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuU2VydmljZVByb3ZpZGVyTWl4aW4nLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBTZXJ2aWNlUHJvdmlkZXJNaXhpbj17c2VydmljZXM6e30sVW5kZXBsb3llZFNlcnZpY2VzOnt9LGluaXQ6ZnVuY3Rpb24ocGFyZW50KXt2YXIgc2VsZj10aGlzO3RoaXMub24oJ2NhbGxfc2VydmljZScsdGhpcyx0aGlzLl9jYWxsX3NlcnZpY2UuYmluZCh0aGlzKSk7Xy5lYWNoKGNvcmUuc2VydmljZVJlZ2lzdHJ5Lm1hcCxmdW5jdGlvbihTZXJ2aWNlLHNlcnZpY2VOYW1lKXtpZihzZXJ2aWNlTmFtZSBpbiBzZWxmLlVuZGVwbG95ZWRTZXJ2aWNlcyl7dGhyb3cgbmV3IEVycm9yKCdTZXJ2aWNlICInK3NlcnZpY2VOYW1lKyciIGlzIGFscmVhZHkgbG9hZGVkLicpO30Kc2VsZi5VbmRlcGxveWVkU2VydmljZXNbc2VydmljZU5hbWVdPVNlcnZpY2U7fSk7dGhpcy5fZGVwbG95U2VydmljZXMoKTtjb3JlLnNlcnZpY2VSZWdpc3RyeS5vbkFkZChmdW5jdGlvbihzZXJ2aWNlTmFtZSxTZXJ2aWNlKXtpZihzZXJ2aWNlTmFtZSBpbiBzZWxmLnNlcnZpY2VzfHxzZXJ2aWNlTmFtZSBpbiBzZWxmLlVuZGVwbG95ZWRTZXJ2aWNlcyl7dGhyb3cgbmV3IEVycm9yKCdTZXJ2aWNlICInK3NlcnZpY2VOYW1lKyciIGlzIGFscmVhZHkgbG9hZGVkLicpO30Kc2VsZi5VbmRlcGxveWVkU2VydmljZXNbc2VydmljZU5hbWVdPVNlcnZpY2U7c2VsZi5fZGVwbG95U2VydmljZXMoKTt9KTt9LF9kZXBsb3lTZXJ2aWNlczpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGRvbmU9ZmFsc2U7d2hpbGUoIWRvbmUpe3ZhciBzZXJ2aWNlTmFtZT1fLmZpbmRLZXkodGhpcy5VbmRlcGxveWVkU2VydmljZXMsZnVuY3Rpb24oU2VydmljZSl7cmV0dXJuIV8uc29tZShTZXJ2aWNlLnByb3RvdHlwZS5kZXBlbmRlbmNpZXMsZnVuY3Rpb24oZGVwTmFtZSl7cmV0dXJuIXNlbGYuc2VydmljZXNbZGVwTmFtZV07fSk7fSk7aWYoc2VydmljZU5hbWUpe3ZhciBzZXJ2aWNlPW5ldyB0aGlzLlVuZGVwbG95ZWRTZXJ2aWNlc1tzZXJ2aWNlTmFtZV0odGhpcyk7dGhpcy5zZXJ2aWNlc1tzZXJ2aWNlTmFtZV09c2VydmljZTtkZWxldGUgdGhpcy5VbmRlcGxveWVkU2VydmljZXNbc2VydmljZU5hbWVdO3NlcnZpY2Uuc3RhcnQoKTt9ZWxzZXtkb25lPXRydWU7fX19LF9jYWxsX3NlcnZpY2U6ZnVuY3Rpb24oZXZlbnQpe3ZhciBhcmdzPWV2ZW50LmRhdGEuYXJnc3x8W107aWYoZXZlbnQuZGF0YS5zZXJ2aWNlPT09J2FqYXgnJiZldmVudC5kYXRhLm1ldGhvZD09PSdycGMnKXthcmdzPWFyZ3MuY29uY2F0KGV2ZW50LnRhcmdldCk7fQp2YXIgc2VydmljZT10aGlzLnNlcnZpY2VzW2V2ZW50LmRhdGEuc2VydmljZV07dmFyIHJlc3VsdD1zZXJ2aWNlW2V2ZW50LmRhdGEubWV0aG9kXS5hcHBseShzZXJ2aWNlLGFyZ3MpO2V2ZW50LmRhdGEuY2FsbGJhY2socmVzdWx0KTt9LH07cmV0dXJuIFNlcnZpY2VQcm92aWRlck1peGluO30pO29kb28uZGVmaW5lKCd3ZWIuU2VydmljZXNNaXhpbicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBycGM9cmVxdWlyZSgnd2ViLnJwYycpO3ZhciBTZXJ2aWNlc01peGluPXtjYWxsOmZ1bmN0aW9uKHNlcnZpY2UsbWV0aG9kKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7dmFyIHJlc3VsdDt0aGlzLnRyaWdnZXJfdXAoJ2NhbGxfc2VydmljZScse3NlcnZpY2U6c2VydmljZSxtZXRob2Q6bWV0aG9kLGFyZ3M6YXJncyxjYWxsYmFjazpmdW5jdGlvbihyKXtyZXN1bHQ9cjt9LH0pO3JldHVybiByZXN1bHQ7fSxfcnBjOmZ1bmN0aW9uKHBhcmFtcyxvcHRpb25zKXt2YXIgcXVlcnk9cnBjLmJ1aWxkUXVlcnkocGFyYW1zKTt2YXIgcHJvbT10aGlzLmNhbGwoJ2FqYXgnLCdycGMnLHF1ZXJ5LnJvdXRlLHF1ZXJ5LnBhcmFtcyxvcHRpb25zLHRoaXMpO2lmKCFwcm9tKXtwcm9tPW5ldyBQcm9taXNlKGZ1bmN0aW9uKCl7fSk7cHJvbS5hYm9ydD1mdW5jdGlvbigpe307fQp2YXIgYWJvcnQ9cHJvbS5hYm9ydD9wcm9tLmFib3J0OnByb20ucmVqZWN0O2lmKCFhYm9ydCl7dGhyb3cgbmV3IEVycm9yKCJhIHJwYyBwcm9taXNlIHNob3VsZCBhbHdheXMgaGF2ZSBhIHJlamVjdCBmdW5jdGlvbiIpO30KcHJvbS5hYm9ydD1hYm9ydC5iaW5kKHByb20pO3JldHVybiBwcm9tO30sbG9hZEZpZWxkVmlldzpmdW5jdGlvbihtb2RlbE5hbWUsY29udGV4dCx2aWV3X2lkLHZpZXdfdHlwZSxvcHRpb25zKXtyZXR1cm4gdGhpcy5sb2FkVmlld3MobW9kZWxOYW1lLGNvbnRleHQsW1t2aWV3X2lkLHZpZXdfdHlwZV1dLG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtyZXR1cm4gcmVzdWx0W3ZpZXdfdHlwZV07fSk7fSxsb2FkVmlld3M6ZnVuY3Rpb24obW9kZWxOYW1lLGNvbnRleHQsdmlld3Msb3B0aW9ucyl7dmFyIHNlbGY9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7c2VsZi50cmlnZ2VyX3VwKCdsb2FkX3ZpZXdzJyx7bW9kZWxOYW1lOm1vZGVsTmFtZSxjb250ZXh0OmNvbnRleHQsdmlld3M6dmlld3Msb3B0aW9uczpvcHRpb25zLG9uX3N1Y2Nlc3M6cmVzb2x2ZSx9KTt9KTt9LGxvYWRGaWx0ZXJzOmZ1bmN0aW9uKG1vZGVsTmFtZSxhY3Rpb25JZCxjb250ZXh0KXt2YXIgc2VsZj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7c2VsZi50cmlnZ2VyX3VwKCdsb2FkX2ZpbHRlcnMnLHttb2RlbE5hbWU6bW9kZWxOYW1lLGFjdGlvbklkOmFjdGlvbklkLGNvbnRleHQ6Y29udGV4dCxvbl9zdWNjZXNzOnJlc29sdmUsfSk7fSk7fSxjcmVhdGVGaWx0ZXI6ZnVuY3Rpb24oZmlsdGVyKXt2YXIgc2VsZj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7c2VsZi50cmlnZ2VyX3VwKCdjcmVhdGVfZmlsdGVyJyx7ZmlsdGVyOmZpbHRlcixvbl9zdWNjZXNzOnJlc29sdmUsfSk7fSk7fSxkZWxldGVGaWx0ZXI6ZnVuY3Rpb24oZmlsdGVySWQpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtzZWxmLnRyaWdnZXJfdXAoJ2RlbGV0ZV9maWx0ZXInLHtmaWx0ZXJJZDpmaWx0ZXJJZCxvbl9zdWNjZXNzOnJlc29sdmUsfSk7fSk7fSxnZXRTZXNzaW9uOmZ1bmN0aW9uKCl7dmFyIHNlc3Npb247dGhpcy50cmlnZ2VyX3VwKCdnZXRfc2Vzc2lvbicse2NhbGxiYWNrOmZ1bmN0aW9uKHJlc3VsdCl7c2Vzc2lvbj1yZXN1bHQ7fX0pO3JldHVybiBzZXNzaW9uO30sZG9fYWN0aW9uOmZ1bmN0aW9uKGFjdGlvbixvcHRpb25zKXt2YXIgc2VsZj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7c2VsZi50cmlnZ2VyX3VwKCdkb19hY3Rpb24nLHthY3Rpb246YWN0aW9uLG9wdGlvbnM6b3B0aW9ucyxvbl9zdWNjZXNzOnJlc29sdmUsb25fZmFpbDpyZWplY3QsfSk7fSk7fSxkaXNwbGF5Tm90aWZpY2F0aW9uOmZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiB0aGlzLmNhbGwoJ25vdGlmaWNhdGlvbicsJ25vdGlmeScsb3B0aW9ucyk7fSxkb19ub3RpZnk6ZnVuY3Rpb24odGl0bGUsbWVzc2FnZSxzdGlja3ksY2xhc3NOYW1lKXtyZXR1cm4gdGhpcy5kaXNwbGF5Tm90aWZpY2F0aW9uKHt0eXBlOid3YXJuaW5nJyx0aXRsZTp0aXRsZSxtZXNzYWdlOm1lc3NhZ2Usc3RpY2t5OnN0aWNreSxjbGFzc05hbWU6Y2xhc3NOYW1lLH0pO30sZG9fd2FybjpmdW5jdGlvbih0aXRsZSxtZXNzYWdlLHN0aWNreSxjbGFzc05hbWUpe2NvbnNvbGUud2Fybih0aXRsZSxtZXNzYWdlKTtyZXR1cm4gdGhpcy5kaXNwbGF5Tm90aWZpY2F0aW9uKHt0eXBlOidkYW5nZXInLHRpdGxlOnRpdGxlLG1lc3NhZ2U6bWVzc2FnZSxzdGlja3k6c3RpY2t5LGNsYXNzTmFtZTpjbGFzc05hbWUsfSk7fSx9O3JldHVybiBTZXJ2aWNlc01peGluO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3Nlc3Npb24uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLlNlc3Npb24nLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYWpheD1yZXF1aXJlKCd3ZWIuYWpheCcpO3ZhciBjb25jdXJyZW5jeT1yZXF1aXJlKCd3ZWIuY29uY3VycmVuY3knKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBsb2NhbF9zdG9yYWdlPXJlcXVpcmUoJ3dlYi5sb2NhbF9zdG9yYWdlJyk7dmFyIG1peGlucz1yZXF1aXJlKCd3ZWIubWl4aW5zJyk7dmFyIHV0aWxzPXJlcXVpcmUoJ3dlYi51dGlscycpO3ZhciBfdD1jb3JlLl90O3ZhciBxd2ViPWNvcmUucXdlYjt2YXIgU2Vzc2lvbj1jb3JlLkNsYXNzLmV4dGVuZChtaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4se2luaXQ6ZnVuY3Rpb24ocGFyZW50LG9yaWdpbixvcHRpb25zKXttaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4uaW5pdC5jYWxsKHRoaXMpO3RoaXMuc2V0UGFyZW50KHBhcmVudCk7b3B0aW9ucz1vcHRpb25zfHx7fTt0aGlzLm1vZHVsZV9saXN0PShvcHRpb25zLm1vZHVsZXMmJm9wdGlvbnMubW9kdWxlcy5zbGljZSgpKXx8KHdpbmRvdy5vZG9vLl9tb2R1bGVzJiZ3aW5kb3cub2Rvby5fbW9kdWxlcy5zbGljZSgpKXx8W107dGhpcy5zZXJ2ZXI9bnVsbDt0aGlzLmF2b2lkX3JlY3Vyc2lvbj1mYWxzZTt0aGlzLnVzZV9jb3JzPW9wdGlvbnMudXNlX2NvcnN8fGZhbHNlO3RoaXMuc2V0dXAob3JpZ2luKTt0aGlzLm5hbWU9Imluc3RhbmNlMCI7dGhpcy5xd2ViX211dGV4PW5ldyBjb25jdXJyZW5jeS5NdXRleCgpO3RoaXMuY3VycmVuY2llcz17fTt0aGlzLl9ncm91cHNfZGVmPXt9O2NvcmUuYnVzLm9uKCdpbnZhbGlkYXRlX3Nlc3Npb24nLHRoaXMsdGhpcy5fb25JbnZhbGlkYXRlU2Vzc2lvbik7fSxzZXR1cDpmdW5jdGlvbihvcmlnaW4sb3B0aW9ucyl7dmFyIHdpbmRvd19vcmlnaW49bG9jYXRpb24ucHJvdG9jb2wrIi8vIitsb2NhdGlvbi5ob3N0O29yaWdpbj1vcmlnaW4/b3JpZ2luLnJlcGxhY2UoL1wvKyQvLCcnKTp3aW5kb3dfb3JpZ2luO2lmKCFfLmlzVW5kZWZpbmVkKHRoaXMub3JpZ2luKSYmdGhpcy5vcmlnaW4hPT1vcmlnaW4pCnRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBhbHJlYWR5IGJvdW5kIHRvICcrdGhpcy5vcmlnaW4pO2Vsc2UKdGhpcy5vcmlnaW49b3JpZ2luO3RoaXMucHJlZml4PXRoaXMub3JpZ2luO3RoaXMuc2VydmVyPXRoaXMub3JpZ2luO29wdGlvbnM9b3B0aW9uc3x8e307aWYoJ3VzZV9jb3JzJ2luIG9wdGlvbnMpe3RoaXMudXNlX2NvcnM9b3B0aW9ucy51c2VfY29yczt9fSxzZXNzaW9uX2JpbmQ6ZnVuY3Rpb24ob3JpZ2luKXt0aGlzLnNldHVwKG9yaWdpbik7cXdlYi5kZWZhdWx0X2RpY3QuX3M9dGhpcy5vcmlnaW47dGhpcy51aWQ9bnVsbDt0aGlzLnVzZXJuYW1lPW51bGw7dGhpcy51c2VyX2NvbnRleHQ9e307dGhpcy5kYj1udWxsO3RoaXMuYWN0aXZlX2lkPW51bGw7cmV0dXJuIHRoaXMuc2Vzc2lvbl9pbml0KCk7fSxzZXNzaW9uX2luaXQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciBwcm9tPXRoaXMuc2Vzc2lvbl9yZWxvYWQoKTtpZih0aGlzLmlzX2Zyb250ZW5kKXtyZXR1cm4gcHJvbS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHNlbGYubG9hZF90cmFuc2xhdGlvbnMoKTt9KTt9CnJldHVybiBwcm9tLnRoZW4oZnVuY3Rpb24oKXt2YXIgbW9kdWxlcz1zZWxmLm1vZHVsZV9saXN0LmpvaW4oJywnKTt2YXIgcHJvbWlzZT1zZWxmLmxvYWRfcXdlYihtb2R1bGVzKTtpZihzZWxmLnNlc3Npb25faXNfdmFsaWQoKSl7cmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbigpe3JldHVybiBzZWxmLmxvYWRfbW9kdWxlcygpO30pO30KcmV0dXJuIFByb21pc2UuYWxsKFtwcm9taXNlLHNlbGYucnBjKCcvd2ViL3dlYmNsaWVudC9ib290c3RyYXBfdHJhbnNsYXRpb25zJyx7bW9kczpzZWxmLm1vZHVsZV9saXN0fSkudGhlbihmdW5jdGlvbih0cmFucyl7X3QuZGF0YWJhc2Uuc2V0X2J1bmRsZSh0cmFucyk7fSldKTt9KTt9LHNlc3Npb25faXNfdmFsaWQ6ZnVuY3Rpb24oKXt2YXIgZGI9JC5kZXBhcmFtLnF1ZXJ5c3RyaW5nKCkuZGI7aWYoZGImJnRoaXMuZGIhPT1kYil7cmV0dXJuIGZhbHNlO30KcmV0dXJuISF0aGlzLnVpZDt9LHNlc3Npb25fYXV0aGVudGljYXRlOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3Nlc3Npb25fYXV0aGVudGljYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBzZWxmLmxvYWRfbW9kdWxlcygpO30pO30sX3Nlc3Npb25fYXV0aGVudGljYXRlOmZ1bmN0aW9uKGRiLGxvZ2luLHBhc3N3b3JkKXt2YXIgc2VsZj10aGlzO3ZhciBwYXJhbXM9e2RiOmRiLGxvZ2luOmxvZ2luLHBhc3N3b3JkOnBhc3N3b3JkfTtyZXR1cm4gdGhpcy5ycGMoIi93ZWIvc2Vzc2lvbi9hdXRoZW50aWNhdGUiLHBhcmFtcykudGhlbihmdW5jdGlvbihyZXN1bHQpe2lmKCFyZXN1bHQudWlkKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt9Cl8uZXh0ZW5kKHNlbGYscmVzdWx0KTt9KTt9LHNlc3Npb25fbG9nb3V0OmZ1bmN0aW9uKCl7JC5iYnEucmVtb3ZlU3RhdGUoKTtyZXR1cm4gdGhpcy5ycGMoIi93ZWIvc2Vzc2lvbi9kZXN0cm95Iix7fSk7fSx1c2VyX2hhc19ncm91cDpmdW5jdGlvbihncm91cCl7aWYoIXRoaXMudWlkKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTt9CnZhciBkZWY9dGhpcy5fZ3JvdXBzX2RlZltncm91cF07aWYoIWRlZil7ZGVmPXRoaXMuX2dyb3Vwc19kZWZbZ3JvdXBdPXRoaXMucnBjKCcvd2ViL2RhdGFzZXQvY2FsbF9rdy9yZXMudXNlcnMvaGFzX2dyb3VwJyx7Im1vZGVsIjoicmVzLnVzZXJzIiwibWV0aG9kIjoiaGFzX2dyb3VwIiwiYXJncyI6W2dyb3VwXSwia3dhcmdzIjp7fX0pO30KcmV0dXJuIGRlZjt9LGdldF9jb29raWU6ZnVuY3Rpb24obmFtZSl7aWYoIXRoaXMubmFtZSl7cmV0dXJuIG51bGw7fQp2YXIgbmFtZUVRPXRoaXMubmFtZSsnfCcrbmFtZSsnPSc7dmFyIGNvb2tpZXM9ZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7Zm9yKHZhciBpPTA7aTxjb29raWVzLmxlbmd0aDsrK2kpe3ZhciBjb29raWU9Y29va2llc1tpXS5yZXBsYWNlKC9eXHMqLywnJyk7aWYoY29va2llLmluZGV4T2YobmFtZUVRKT09PTApe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoKSkpO31jYXRjaChlcnIpe3RoaXMuc2V0X2Nvb2tpZShuYW1lLCcnLC0xKTt9fX0KcmV0dXJuIG51bGw7fSxzZXRfY29va2llOmZ1bmN0aW9uKG5hbWUsdmFsdWUsdHRsKXtpZighdGhpcy5uYW1lKXtyZXR1cm47fQp0dGw9dHRsfHwyNCo2MCo2MCozNjU7dXRpbHMuc2V0X2Nvb2tpZSh0aGlzLm5hbWUrJ3wnK25hbWUsdmFsdWUsdHRsKTt9LGxvYWRfbW9kdWxlczpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIG1vZHVsZXM9b2Rvby5fbW9kdWxlczt2YXIgYWxsX21vZHVsZXM9Xy51bmlxKHNlbGYubW9kdWxlX2xpc3QuY29uY2F0KG1vZHVsZXMpKTt2YXIgdG9fbG9hZD1fLmRpZmZlcmVuY2UobW9kdWxlcyxzZWxmLm1vZHVsZV9saXN0KS5qb2luKCcsJyk7dGhpcy5tb2R1bGVfbGlzdD1hbGxfbW9kdWxlczt2YXIgbG9hZGVkPVByb21pc2UucmVzb2x2ZShzZWxmLmxvYWRfdHJhbnNsYXRpb25zKCkpO3ZhciBsb2NhbGU9Ii93ZWIvd2ViY2xpZW50L2xvY2FsZS8iK3NlbGYudXNlcl9jb250ZXh0Lmxhbmd8fCdlbl9VUyc7dmFyIGZpbGVfbGlzdD1bbG9jYWxlXTtpZih0b19sb2FkLmxlbmd0aCl7bG9hZGVkPVByb21pc2UuYWxsKFtsb2FkZWQsc2VsZi5ycGMoJy93ZWIvd2ViY2xpZW50L2Nzc2xpc3QnLHttb2RzOnRvX2xvYWR9KS50aGVuKHNlbGYubG9hZF9jc3MuYmluZChzZWxmKSksc2VsZi5sb2FkX3F3ZWIodG9fbG9hZCksc2VsZi5ycGMoJy93ZWIvd2ViY2xpZW50L2pzbGlzdCcse21vZHM6dG9fbG9hZH0pLnRoZW4oZnVuY3Rpb24oZmlsZXMpe2ZpbGVfbGlzdD1maWxlX2xpc3QuY29uY2F0KGZpbGVzKTt9KV0pO30KcmV0dXJuIGxvYWRlZC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHNlbGYubG9hZF9qcyhmaWxlX2xpc3QpO30pO30sbG9hZF90cmFuc2xhdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gX3QuZGF0YWJhc2UubG9hZF90cmFuc2xhdGlvbnModGhpcyx0aGlzLm1vZHVsZV9saXN0LHRoaXMudXNlcl9jb250ZXh0LmxhbmcsdGhpcy50cmFuc2xhdGlvblVSTCk7fSxsb2FkX2NzczpmdW5jdGlvbihmaWxlcyl7dmFyIHNlbGY9dGhpcztfLmVhY2goZmlsZXMsZnVuY3Rpb24oZmlsZSl7YWpheC5sb2FkQ1NTKHNlbGYudXJsKGZpbGUsbnVsbCkpO30pO30sbG9hZF9qczpmdW5jdGlvbihmaWxlcyl7dmFyIHNlbGY9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2lmKGZpbGVzLmxlbmd0aCE9PTApe3ZhciBmaWxlPWZpbGVzLnNoaWZ0KCk7dmFyIHVybD1zZWxmLnVybChmaWxlLG51bGwpO2FqYXgubG9hZEpTKHVybCkudGhlbihyZXNvbHZlKTt9ZWxzZXtyZXNvbHZlKCk7fX0pO30sbG9hZF9xd2ViOmZ1bmN0aW9uKG1vZHMpe3ZhciBzZWxmPXRoaXM7dmFyIGxvY2s9dGhpcy5xd2ViX211dGV4LmV4ZWMoZnVuY3Rpb24oKXt2YXIgY2FjaGVJZD1zZWxmLmNhY2hlX2hhc2hlcyYmc2VsZi5jYWNoZV9oYXNoZXMucXdlYjt2YXIgcm91dGU9Jy93ZWIvd2ViY2xpZW50L3F3ZWIvJysoY2FjaGVJZD9jYWNoZUlkOkRhdGUubm93KCkpKyc/bW9kcz0nK21vZHM7cmV0dXJuICQuZ2V0KHJvdXRlKS50aGVuKGZ1bmN0aW9uKGRvYyl7aWYoIWRvYyl7cmV0dXJuO30KcXdlYi5hZGRfdGVtcGxhdGUoZG9jKTt9KTt9KTtyZXR1cm4gbG9jazt9LGdldF9jdXJyZW5jeTpmdW5jdGlvbihjdXJyZW5jeV9pZCl7cmV0dXJuIHRoaXMuY3VycmVuY2llc1tjdXJyZW5jeV9pZF07fSxnZXRfZmlsZTpmdW5jdGlvbihvcHRpb25zKXtvcHRpb25zLnNlc3Npb249dGhpcztyZXR1cm4gYWpheC5nZXRfZmlsZShvcHRpb25zKTt9LHNlc3Npb25fcmVsb2FkOmZ1bmN0aW9uKCl7dmFyIHJlc3VsdD1fLmV4dGVuZCh7fSx3aW5kb3cub2Rvby5zZXNzaW9uX2luZm8pO18uZXh0ZW5kKHRoaXMscmVzdWx0KTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7fSxycGM6ZnVuY3Rpb24odXJsLHBhcmFtcyxvcHRpb25zKXt2YXIgc2VsZj10aGlzO29wdGlvbnM9Xy5jbG9uZShvcHRpb25zfHx7fSk7b3B0aW9ucy5oZWFkZXJzPV8uZXh0ZW5kKHt9LG9wdGlvbnMuaGVhZGVycyk7aWYocGFyYW1zJiZwYXJhbXMua3dhcmdzKXtwYXJhbXMua3dhcmdzLmNvbnRleHQ9Xy5leHRlbmQocGFyYW1zLmt3YXJncy5jb250ZXh0fHx7fSx0aGlzLnVzZXJfY29udGV4dCk7fQppZighXy5pc1N0cmluZyh1cmwpKXtfLmV4dGVuZChvcHRpb25zLHVybCk7dXJsPXVybC51cmw7fQppZihzZWxmLnVzZV9jb3JzKXt1cmw9c2VsZi51cmwodXJsLG51bGwpO30KcmV0dXJuIGFqYXguanNvblJwYyh1cmwsImNhbGwiLHBhcmFtcyxvcHRpb25zKTt9LHVybDpmdW5jdGlvbihwYXRoLHBhcmFtcyl7cGFyYW1zPV8uZXh0ZW5kKHBhcmFtc3x8e30pO3ZhciBxcz0kLnBhcmFtKHBhcmFtcyk7aWYocXMubGVuZ3RoPjApCnFzPSI/Iitxczt2YXIgcHJlZml4PV8uYW55KFsnaHR0cDovLycsJ2h0dHBzOi8vJywnLy8nXSxmdW5jdGlvbihlbCl7cmV0dXJuIHBhdGgubGVuZ3RoPj1lbC5sZW5ndGgmJnBhdGguc2xpY2UoMCxlbC5sZW5ndGgpPT09ZWw7fSk/Jyc6dGhpcy5wcmVmaXg7cmV0dXJuIHByZWZpeCtwYXRoK3FzO30sZ2V0VFpPZmZzZXQ6ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuLW5ldyBEYXRlKGRhdGUpLmdldFRpbWV6b25lT2Zmc2V0KCk7fSxpbnZhbGlkYXRlQ2FjaGVLZXk6ZnVuY3Rpb24oa2V5KXtpZih0aGlzLmNhY2hlX2hhc2hlcyYmdGhpcy5jYWNoZV9oYXNoZXNba2V5XSl7dGhpcy5jYWNoZV9oYXNoZXNba2V5XT1EYXRlLm5vdygpO319LHJlbG9hZEN1cnJlbmNpZXM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLnJwYygnL3dlYi9zZXNzaW9uL2dldF9zZXNzaW9uX2luZm8nKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7c2VsZi5jdXJyZW5jaWVzPXJlc3VsdC5jdXJyZW5jaWVzO30pO30sc2V0Q29tcGFuaWVzOmZ1bmN0aW9uKG1haW5fY29tcGFueV9pZCxjb21wYW55X2lkcyl7dmFyIGhhc2g9JC5iYnEuZ2V0U3RhdGUoKQpoYXNoLmNpZHM9Y29tcGFueV9pZHMuc29ydChmdW5jdGlvbihhLGIpe2lmKGE9PT1tYWluX2NvbXBhbnlfaWQpe3JldHVybi0xO31lbHNlIGlmKGI9PT1tYWluX2NvbXBhbnlfaWQpe3JldHVybiAxO31lbHNle3JldHVybiBhLWI7fX0pLmpvaW4oJywnKTt1dGlscy5zZXRfY29va2llKCdjaWRzJyxoYXNoLmNpZHN8fFN0cmluZyhtYWluX2NvbXBhbnlfaWQpKTskLmJicS5wdXNoU3RhdGUoeydjaWRzJzpoYXNoLmNpZHN9LDApO2xvY2F0aW9uLnJlbG9hZCgpO30sX29uSW52YWxpZGF0ZVNlc3Npb246ZnVuY3Rpb24oKXt0aGlzLnVpZD1mYWxzZTt9LH0pO3JldHVybiBTZXNzaW9uO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3Nlc3Npb25fc3RvcmFnZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuc2Vzc2lvblN0b3JhZ2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgUmFtU3RvcmFnZT1yZXF1aXJlKCd3ZWIuUmFtU3RvcmFnZScpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciBzdG9yYWdlO3ZhciBzZXNzaW9uU3RvcmFnZT13aW5kb3cuc2Vzc2lvblN0b3JhZ2U7dHJ5e3ZhciB1aWQ9bmV3IERhdGUoKTtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHVpZCx1aWQpO3Nlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0odWlkKTtzdG9yYWdlPShmdW5jdGlvbigpe3ZhciBzdG9yYWdlPU9iamVjdC5jcmVhdGUoXy5leHRlbmQoe2dldEl0ZW06c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbS5iaW5kKHNlc3Npb25TdG9yYWdlKSxzZXRJdGVtOnNlc3Npb25TdG9yYWdlLnNldEl0ZW0uYmluZChzZXNzaW9uU3RvcmFnZSkscmVtb3ZlSXRlbTpzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtLmJpbmQoc2Vzc2lvblN0b3JhZ2UpLGNsZWFyOnNlc3Npb25TdG9yYWdlLmNsZWFyLmJpbmQoc2Vzc2lvblN0b3JhZ2UpLH0sbWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluKSk7c3RvcmFnZS5pbml0KCk7JCh3aW5kb3cpLm9uKCdzdG9yYWdlJyxmdW5jdGlvbihlKXt2YXIga2V5PWUub3JpZ2luYWxFdmVudC5rZXk7dmFyIG5ld1ZhbHVlPWUub3JpZ2luYWxFdmVudC5uZXdWYWx1ZTt0cnl7SlNPTi5wYXJzZShuZXdWYWx1ZSk7aWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpPT09bmV3VmFsdWUpe3N0b3JhZ2UudHJpZ2dlcignc3RvcmFnZScse2tleTprZXksbmV3VmFsdWU6bmV3VmFsdWUsfSk7fX1jYXRjaChlcnJvcil7fX0pO3JldHVybiBzdG9yYWdlO30pKCk7fWNhdGNoKGV4Y2VwdGlvbil7Y29uc29sZS53YXJuKCdGYWlsIHRvIGxvYWQgc2Vzc2lvblN0b3JhZ2UnKTtzdG9yYWdlPW5ldyBSYW1TdG9yYWdlKCk7fQpyZXR1cm4gc3RvcmFnZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvY29yZS90aW1lLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi50aW1lJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIHRyYW5zbGF0aW9uPXJlcXVpcmUoJ3dlYi50cmFuc2xhdGlvbicpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgbHBhZD11dGlscy5scGFkO3ZhciBycGFkPXV0aWxzLnJwYWQ7dmFyIF90PXRyYW5zbGF0aW9uLl90O2Z1bmN0aW9uIGRhdGVfdG9fdXRjKGssdil7dmFyIHZhbHVlPXRoaXNba107aWYoISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpKXtyZXR1cm4gdjt9CnJldHVybiBkYXRldGltZV90b19zdHIodmFsdWUpO30KZnVuY3Rpb24gc3RyX3RvX2RhdGV0aW1lKHN0cil7aWYoIXN0cil7cmV0dXJuIHN0cjt9CnZhciByZWdleD0vXihcZFxkXGRcZCktKFxkXGQpLShcZFxkKSAoXGRcZCk6KFxkXGQpOihcZFxkKD86XC4oXGQrKSk/KSQvO3ZhciByZXM9cmVnZXguZXhlYyhzdHIpO2lmKCFyZXMpe3Rocm93IG5ldyBFcnJvcigiJyIrc3RyKyInIGlzIG5vdCBhIHZhbGlkIGRhdGV0aW1lIik7fQp2YXIgdG1wPW5ldyBEYXRlKDIwMDAsMCwxKTt0bXAuc2V0VVRDTW9udGgoMTk3MCk7dG1wLnNldFVUQ01vbnRoKDApO3RtcC5zZXRVVENEYXRlKDEpO3RtcC5zZXRVVENGdWxsWWVhcihwYXJzZUZsb2F0KHJlc1sxXSkpO3RtcC5zZXRVVENNb250aChwYXJzZUZsb2F0KHJlc1syXSktMSk7dG1wLnNldFVUQ0RhdGUocGFyc2VGbG9hdChyZXNbM10pKTt0bXAuc2V0VVRDSG91cnMocGFyc2VGbG9hdChyZXNbNF0pKTt0bXAuc2V0VVRDTWludXRlcyhwYXJzZUZsb2F0KHJlc1s1XSkpO3RtcC5zZXRVVENTZWNvbmRzKHBhcnNlRmxvYXQocmVzWzZdKSk7dG1wLnNldFVUQ1NlY29uZHMocGFyc2VGbG9hdChyZXNbNl0pKTt0bXAuc2V0VVRDTWlsbGlzZWNvbmRzKHBhcnNlRmxvYXQodXRpbHMucnBhZCgocmVzWzddfHwiIikuc2xpY2UoMCwzKSwzKSkpO3JldHVybiB0bXA7fQpmdW5jdGlvbiBzdHJfdG9fZGF0ZShzdHIpe2lmKCFzdHIpe3JldHVybiBzdHI7fQp2YXIgcmVnZXg9L14oXGRcZFxkXGQpLShcZFxkKS0oXGRcZCkkLzt2YXIgcmVzPXJlZ2V4LmV4ZWMoc3RyKTtpZighcmVzKXt0aHJvdyBuZXcgRXJyb3IoIiciK3N0cisiJyBpcyBub3QgYSB2YWxpZCBkYXRlIik7fQp2YXIgdG1wPW5ldyBEYXRlKDIwMDAsMCwxKTt0bXAuc2V0RnVsbFllYXIocGFyc2VGbG9hdChyZXNbMV0pKTt0bXAuc2V0TW9udGgocGFyc2VGbG9hdChyZXNbMl0pLTEpO3RtcC5zZXREYXRlKHBhcnNlRmxvYXQocmVzWzNdKSk7dG1wLnNldEhvdXJzKDApO3RtcC5zZXRNaW51dGVzKDApO3RtcC5zZXRTZWNvbmRzKDApO3JldHVybiB0bXA7fQpmdW5jdGlvbiBzdHJfdG9fdGltZShzdHIpe2lmKCFzdHIpe3JldHVybiBzdHI7fQp2YXIgcmVnZXg9L14oXGRcZCk6KFxkXGQpOihcZFxkKD86XC4oXGQrKSk/KSQvO3ZhciByZXM9cmVnZXguZXhlYyhzdHIpO2lmKCFyZXMpe3Rocm93IG5ldyBFcnJvcigiJyIrc3RyKyInIGlzIG5vdCBhIHZhbGlkIHRpbWUiKTt9CnZhciB0bXA9bmV3IERhdGUoKTt0bXAuc2V0RnVsbFllYXIoMTk3MCk7dG1wLnNldE1vbnRoKDApO3RtcC5zZXREYXRlKDEpO3RtcC5zZXRIb3VycyhwYXJzZUZsb2F0KHJlc1sxXSkpO3RtcC5zZXRNaW51dGVzKHBhcnNlRmxvYXQocmVzWzJdKSk7dG1wLnNldFNlY29uZHMocGFyc2VGbG9hdChyZXNbM10pKTt0bXAuc2V0TWlsbGlzZWNvbmRzKHBhcnNlRmxvYXQocnBhZCgocmVzWzRdfHwiIikuc2xpY2UoMCwzKSwzKSkpO3JldHVybiB0bXA7fQpmdW5jdGlvbiBkYXRldGltZV90b19zdHIob2JqKXtpZighb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gbHBhZChvYmouZ2V0VVRDRnVsbFllYXIoKSw0KSsiLSIrbHBhZChvYmouZ2V0VVRDTW9udGgoKSsxLDIpKyItIgorbHBhZChvYmouZ2V0VVRDRGF0ZSgpLDIpKyIgIitscGFkKG9iai5nZXRVVENIb3VycygpLDIpKyI6IgorbHBhZChvYmouZ2V0VVRDTWludXRlcygpLDIpKyI6IitscGFkKG9iai5nZXRVVENTZWNvbmRzKCksMik7fQpmdW5jdGlvbiBkYXRlX3RvX3N0cihvYmope2lmKCFvYmope3JldHVybiBmYWxzZTt9CnJldHVybiBscGFkKG9iai5nZXRGdWxsWWVhcigpLDQpKyItIitscGFkKG9iai5nZXRNb250aCgpKzEsMikrIi0iCitscGFkKG9iai5nZXREYXRlKCksMik7fQpmdW5jdGlvbiB0aW1lX3RvX3N0cihvYmope2lmKCFvYmope3JldHVybiBmYWxzZTt9CnJldHVybiBscGFkKG9iai5nZXRIb3VycygpLDIpKyI6IitscGFkKG9iai5nZXRNaW51dGVzKCksMikrIjoiCitscGFkKG9iai5nZXRTZWNvbmRzKCksMik7fQpmdW5jdGlvbiBhdXRvX3N0cl90b19kYXRlKHZhbHVlKXt0cnl7cmV0dXJuIHN0cl90b19kYXRldGltZSh2YWx1ZSk7fWNhdGNoKGUpe30KdHJ5e3JldHVybiBzdHJfdG9fZGF0ZSh2YWx1ZSk7fWNhdGNoKGUpe30KdHJ5e3JldHVybiBzdHJfdG9fdGltZSh2YWx1ZSk7fWNhdGNoKGUpe30KdGhyb3cgbmV3IEVycm9yKF8uc3RyLnNwcmludGYoX3QoIiclcycgaXMgbm90IGEgY29ycmVjdCBkYXRlLCBkYXRldGltZSBub3IgdGltZSIpLHZhbHVlKSk7fQpmdW5jdGlvbiBhdXRvX2RhdGVfdG9fc3RyKHZhbHVlLHR5cGUpe3N3aXRjaCh0eXBlKXtjYXNlJ2RhdGV0aW1lJzpyZXR1cm4gZGF0ZXRpbWVfdG9fc3RyKHZhbHVlKTtjYXNlJ2RhdGUnOnJldHVybiBkYXRlX3RvX3N0cih2YWx1ZSk7Y2FzZSd0aW1lJzpyZXR1cm4gdGltZV90b19zdHIodmFsdWUpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKF8uc3RyLnNwcmludGYoX3QoIiclcycgaXMgbm90IGNvbnZlcnRpYmxlIHRvIGRhdGUsIGRhdGV0aW1lIG5vciB0aW1lIiksdHlwZSkpO319CmZ1bmN0aW9uIHN0cmZ0aW1lX3RvX21vbWVudF9mb3JtYXQodmFsdWUpe2lmKF9ub3JtYWxpemVfZm9ybWF0X2NhY2hlW3ZhbHVlXT09PXVuZGVmaW5lZCl7dmFyIGlzbGV0dGVyPS9bYS16QS1aXS8sb3V0cHV0PVtdLGluVG9rZW49ZmFsc2U7Zm9yKHZhciBpbmRleD0wO2luZGV4PHZhbHVlLmxlbmd0aDsrK2luZGV4KXt2YXIgY2hhcmFjdGVyPXZhbHVlW2luZGV4XTtpZihjaGFyYWN0ZXI9PT0nJScmJiFpblRva2VuKXtpblRva2VuPXRydWU7Y29udGludWU7fQppZihpc2xldHRlci50ZXN0KGNoYXJhY3Rlcikpe2lmKGluVG9rZW4mJm5vcm1hbGl6ZV9mb3JtYXRfdGFibGVbY2hhcmFjdGVyXSE9PXVuZGVmaW5lZCl7Y2hhcmFjdGVyPW5vcm1hbGl6ZV9mb3JtYXRfdGFibGVbY2hhcmFjdGVyXTt9ZWxzZXtjaGFyYWN0ZXI9J1snK2NoYXJhY3RlcisnXSc7fX0Kb3V0cHV0LnB1c2goY2hhcmFjdGVyKTtpblRva2VuPWZhbHNlO30KX25vcm1hbGl6ZV9mb3JtYXRfY2FjaGVbdmFsdWVdPW91dHB1dC5qb2luKCcnKTt9CnJldHVybiBfbm9ybWFsaXplX2Zvcm1hdF9jYWNoZVt2YWx1ZV07fQpmdW5jdGlvbiBtb21lbnRfdG9fc3RyZnRpbWVfZm9ybWF0KHZhbHVlKXt2YXIgcmVnZXg9LyhNTU1NfERERER8ZGRkZHxZWVlZfE1NTXxkZGR8bW18c3N8d3d8V1d8TU18WVl8aGh8SEh8RER8QXxkKS9nO3JldHVybiB2YWx1ZS5yZXBsYWNlKHJlZ2V4LGZ1bmN0aW9uKHZhbCl7cmV0dXJuJyUnK2ludmVyc2Vfbm9ybWFsaXplX2Zvcm1hdF90YWJsZVt2YWxdO30pO30KdmFyIF9ub3JtYWxpemVfZm9ybWF0X2NhY2hlPXt9O3ZhciBub3JtYWxpemVfZm9ybWF0X3RhYmxlPXsnYSc6J2RkZCcsJ0EnOidkZGRkJywnYic6J01NTScsJ0InOidNTU1NJywnZCc6J0REJywnSCc6J0hIJywnSSc6J2hoJywnaic6J0REREQnLCdtJzonTU0nLCdNJzonbW0nLCdwJzonQScsJ1MnOidzcycsJ1UnOid3dycsJ1cnOidXVycsJ3cnOidkJywneSc6J1lZJywnWSc6J1lZWVknLCdjJzonZGRkIE1NTSBEIEhIOm1tOnNzIFlZWVknLCd4JzonTU0vREQvWVknLCdYJzonSEg6bW06c3MnfTt2YXIgaW52ZXJzZV9ub3JtYWxpemVfZm9ybWF0X3RhYmxlPV8uaW52ZXJ0KG5vcm1hbGl6ZV9mb3JtYXRfdGFibGUpO2Z1bmN0aW9uIGdldExhbmdEYXRlRm9ybWF0KCl7cmV0dXJuIHRoaXMuc3RyZnRpbWVfdG9fbW9tZW50X2Zvcm1hdChfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLmRhdGVfZm9ybWF0KTt9CmZ1bmN0aW9uIGdldExhbmdUaW1lRm9ybWF0KCl7cmV0dXJuIHRoaXMuc3RyZnRpbWVfdG9fbW9tZW50X2Zvcm1hdChfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLnRpbWVfZm9ybWF0KTt9CmZ1bmN0aW9uIGdldExhbmdEYXRldGltZUZvcm1hdCgpe3JldHVybiB0aGlzLnN0cmZ0aW1lX3RvX21vbWVudF9mb3JtYXQoX3QuZGF0YWJhc2UucGFyYW1ldGVycy5kYXRlX2Zvcm1hdCsiICIrX3QuZGF0YWJhc2UucGFyYW1ldGVycy50aW1lX2Zvcm1hdCk7fQpyZXR1cm57ZGF0ZV90b191dGM6ZGF0ZV90b191dGMsc3RyX3RvX2RhdGV0aW1lOnN0cl90b19kYXRldGltZSxzdHJfdG9fZGF0ZTpzdHJfdG9fZGF0ZSxzdHJfdG9fdGltZTpzdHJfdG9fdGltZSxkYXRldGltZV90b19zdHI6ZGF0ZXRpbWVfdG9fc3RyLGRhdGVfdG9fc3RyOmRhdGVfdG9fc3RyLHRpbWVfdG9fc3RyOnRpbWVfdG9fc3RyLGF1dG9fc3RyX3RvX2RhdGU6YXV0b19zdHJfdG9fZGF0ZSxhdXRvX2RhdGVfdG9fc3RyOmF1dG9fZGF0ZV90b19zdHIsc3RyZnRpbWVfdG9fbW9tZW50X2Zvcm1hdDpzdHJmdGltZV90b19tb21lbnRfZm9ybWF0LG1vbWVudF90b19zdHJmdGltZV9mb3JtYXQ6bW9tZW50X3RvX3N0cmZ0aW1lX2Zvcm1hdCxnZXRMYW5nRGF0ZUZvcm1hdDpnZXRMYW5nRGF0ZUZvcm1hdCxnZXRMYW5nVGltZUZvcm1hdDpnZXRMYW5nVGltZUZvcm1hdCxnZXRMYW5nRGF0ZXRpbWVGb3JtYXQ6Z2V0TGFuZ0RhdGV0aW1lRm9ybWF0LH07fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvdHJhbnNsYXRpb24uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLnRyYW5zbGF0aW9uJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIENsYXNzPXJlcXVpcmUoJ3dlYi5DbGFzcycpO3ZhciBUcmFuc2xhdGlvbkRhdGFCYXNlPUNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuZGI9e307dGhpcy5tdWx0aV9sYW5nPWZhbHNlCnRoaXMucGFyYW1ldGVycz17ImRpcmVjdGlvbiI6J2x0cicsImRhdGVfZm9ybWF0IjonJW0vJWQvJVknLCJ0aW1lX2Zvcm1hdCI6JyVIOiVNOiVTJywiZ3JvdXBpbmciOltdLCJkZWNpbWFsX3BvaW50IjoiLiIsInRob3VzYW5kc19zZXAiOiIsIiwiY29kZSI6ImVuX1VTIn07fSxzZXRfYnVuZGxlOmZ1bmN0aW9uKHRyYW5zbGF0aW9uX2J1bmRsZSl7dmFyIHNlbGY9dGhpczt0aGlzLm11bHRpX2xhbmc9dHJhbnNsYXRpb25fYnVuZGxlLm11bHRpX2xhbmcKdmFyIG1vZHVsZXM9Xy5rZXlzKHRyYW5zbGF0aW9uX2J1bmRsZS5tb2R1bGVzKTttb2R1bGVzLnNvcnQoKTtpZihfLmluY2x1ZGUobW9kdWxlcywid2ViIikpe21vZHVsZXM9WyJ3ZWIiXS5jb25jYXQoXy53aXRob3V0KG1vZHVsZXMsIndlYiIpKTt9Cl8uZWFjaChtb2R1bGVzLGZ1bmN0aW9uKG5hbWUpe3NlbGYuYWRkX21vZHVsZV90cmFuc2xhdGlvbih0cmFuc2xhdGlvbl9idW5kbGUubW9kdWxlc1tuYW1lXSk7fSk7aWYodHJhbnNsYXRpb25fYnVuZGxlLmxhbmdfcGFyYW1ldGVycyl7dGhpcy5wYXJhbWV0ZXJzPXRyYW5zbGF0aW9uX2J1bmRsZS5sYW5nX3BhcmFtZXRlcnM7dGhpcy5wYXJhbWV0ZXJzLmdyb3VwaW5nPUpTT04ucGFyc2UodGhpcy5wYXJhbWV0ZXJzLmdyb3VwaW5nKTt9fSxhZGRfbW9kdWxlX3RyYW5zbGF0aW9uOmZ1bmN0aW9uKG1vZCl7dmFyIHNlbGY9dGhpcztfLmVhY2gobW9kLm1lc3NhZ2VzLGZ1bmN0aW9uKG1lc3NhZ2Upe3NlbGYuZGJbbWVzc2FnZS5pZF09bWVzc2FnZS5zdHJpbmc7fSk7fSxidWlsZF90cmFuc2xhdGlvbl9mdW5jdGlvbjpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGZjbnQ9ZnVuY3Rpb24oc3RyKXt2YXIgdG1wPXNlbGYuZ2V0KHN0cik7cmV0dXJuIHRtcD09PXVuZGVmaW5lZD9zdHI6dG1wO307ZmNudC5kYXRhYmFzZT10aGlzO3JldHVybiBmY250O30sZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMuZGJba2V5XTt9LGxvYWRfdHJhbnNsYXRpb25zOmZ1bmN0aW9uKHNlc3Npb24sbW9kdWxlcyxsYW5nLHVybCl7dmFyIHNlbGY9dGhpczt2YXIgY2FjaGVJZD1zZXNzaW9uLmNhY2hlX2hhc2hlcyYmc2Vzc2lvbi5jYWNoZV9oYXNoZXMudHJhbnNsYXRpb25zO3VybD11cmx8fCcvd2ViL3dlYmNsaWVudC90cmFuc2xhdGlvbnMnO3VybCs9Jy8nKyhjYWNoZUlkP2NhY2hlSWQ6RGF0ZS5ub3coKSk7cmV0dXJuICQuZ2V0KHVybCx7bW9kczptb2R1bGVzP21vZHVsZXMuam9pbignLCcpOm51bGwsbGFuZzpsYW5nfHxudWxsLH0pLnRoZW4oZnVuY3Rpb24odHJhbnMpe3NlbGYuc2V0X2J1bmRsZSh0cmFucyk7fSk7fX0pO3ZhciBfdD1uZXcgVHJhbnNsYXRpb25EYXRhQmFzZSgpLmJ1aWxkX3RyYW5zbGF0aW9uX2Z1bmN0aW9uKCk7dmFyIF9sdD1mdW5jdGlvbihzKXtyZXR1cm57dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gX3Qocyk7fX07fTt7X3QoJ2xlc3MgdGhhbiBhIG1pbnV0ZSBhZ28nKTtfdCgnYWJvdXQgYSBtaW51dGUgYWdvJyk7X3QoJyVkIG1pbnV0ZXMgYWdvJyk7X3QoJ2Fib3V0IGFuIGhvdXIgYWdvJyk7X3QoJyVkIGhvdXJzIGFnbycpO190KCdhIGRheSBhZ28nKTtfdCgnJWQgZGF5cyBhZ28nKTtfdCgnYWJvdXQgYSBtb250aCBhZ28nKTtfdCgnJWQgbW9udGhzIGFnbycpO190KCdhYm91dCBhIHllYXIgYWdvJyk7X3QoJyVkIHllYXJzIGFnbycpO30KcmV0dXJue190Ol90LF9sdDpfbHQsVHJhbnNsYXRpb25EYXRhQmFzZTpUcmFuc2xhdGlvbkRhdGFCYXNlLH07fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL2NvcmUvdXRpbHMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLnV0aWxzJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIHRyYW5zbGF0aW9uPXJlcXVpcmUoJ3dlYi50cmFuc2xhdGlvbicpO3ZhciBfdD10cmFuc2xhdGlvbi5fdDt2YXIgaWQ9LTE7dmFyIGRpYWNyaXRpY3NNYXA9eydcdTAwNDEnOidBJywnXHUyNEI2JzonQScsJ1x1RkYyMSc6J0EnLCdcdTAwQzAnOidBJywnXHUwMEMxJzonQScsJ1x1MDBDMic6J0EnLCdcdTFFQTYnOidBJywnXHUxRUE0JzonQScsJ1x1MUVBQSc6J0EnLCdcdTFFQTgnOidBJywnXHUwMEMzJzonQScsJ1x1MDEwMCc6J0EnLCdcdTAxMDInOidBJywnXHUxRUIwJzonQScsJ1x1MUVBRSc6J0EnLCdcdTFFQjQnOidBJywnXHUxRUIyJzonQScsJ1x1MDIyNic6J0EnLCdcdTAxRTAnOidBJywnXHUwMEM0JzonQScsJ1x1MDFERSc6J0EnLCdcdTFFQTInOidBJywnXHUwMEM1JzonQScsJ1x1MDFGQSc6J0EnLCdcdTAxQ0QnOidBJywnXHUwMjAwJzonQScsJ1x1MDIwMic6J0EnLCdcdTFFQTAnOidBJywnXHUxRUFDJzonQScsJ1x1MUVCNic6J0EnLCdcdTFFMDAnOidBJywnXHUwMTA0JzonQScsJ1x1MDIzQSc6J0EnLCdcdTJDNkYnOidBJywnXHVBNzMyJzonQUEnLCdcdTAwQzYnOidBRScsJ1x1MDFGQyc6J0FFJywnXHUwMUUyJzonQUUnLCdcdUE3MzQnOidBTycsJ1x1QTczNic6J0FVJywnXHVBNzM4JzonQVYnLCdcdUE3M0EnOidBVicsJ1x1QTczQyc6J0FZJywnXHUwMDQyJzonQicsJ1x1MjRCNyc6J0InLCdcdUZGMjInOidCJywnXHUxRTAyJzonQicsJ1x1MUUwNCc6J0InLCdcdTFFMDYnOidCJywnXHUwMjQzJzonQicsJ1x1MDE4Mic6J0InLCdcdTAxODEnOidCJywnXHUwMDQzJzonQycsJ1x1MjRCOCc6J0MnLCdcdUZGMjMnOidDJywnXHUwMTA2JzonQycsJ1x1MDEwOCc6J0MnLCdcdTAxMEEnOidDJywnXHUwMTBDJzonQycsJ1x1MDBDNyc6J0MnLCdcdTFFMDgnOidDJywnXHUwMTg3JzonQycsJ1x1MDIzQic6J0MnLCdcdUE3M0UnOidDJywnXHUwMDQ0JzonRCcsJ1x1MjRCOSc6J0QnLCdcdUZGMjQnOidEJywnXHUxRTBBJzonRCcsJ1x1MDEwRSc6J0QnLCdcdTFFMEMnOidEJywnXHUxRTEwJzonRCcsJ1x1MUUxMic6J0QnLCdcdTFFMEUnOidEJywnXHUwMTEwJzonRCcsJ1x1MDE4Qic6J0QnLCdcdTAxOEEnOidEJywnXHUwMTg5JzonRCcsJ1x1QTc3OSc6J0QnLCdcdTAxRjEnOidEWicsJ1x1MDFDNCc6J0RaJywnXHUwMUYyJzonRHonLCdcdTAxQzUnOidEeicsJ1x1MDA0NSc6J0UnLCdcdTI0QkEnOidFJywnXHVGRjI1JzonRScsJ1x1MDBDOCc6J0UnLCdcdTAwQzknOidFJywnXHUwMENBJzonRScsJ1x1MUVDMCc6J0UnLCdcdTFFQkUnOidFJywnXHUxRUM0JzonRScsJ1x1MUVDMic6J0UnLCdcdTFFQkMnOidFJywnXHUwMTEyJzonRScsJ1x1MUUxNCc6J0UnLCdcdTFFMTYnOidFJywnXHUwMTE0JzonRScsJ1x1MDExNic6J0UnLCdcdTAwQ0InOidFJywnXHUxRUJBJzonRScsJ1x1MDExQSc6J0UnLCdcdTAyMDQnOidFJywnXHUwMjA2JzonRScsJ1x1MUVCOCc6J0UnLCdcdTFFQzYnOidFJywnXHUwMjI4JzonRScsJ1x1MUUxQyc6J0UnLCdcdTAxMTgnOidFJywnXHUxRTE4JzonRScsJ1x1MUUxQSc6J0UnLCdcdTAxOTAnOidFJywnXHUwMThFJzonRScsJ1x1MDA0Nic6J0YnLCdcdTI0QkInOidGJywnXHVGRjI2JzonRicsJ1x1MUUxRSc6J0YnLCdcdTAxOTEnOidGJywnXHVBNzdCJzonRicsJ1x1MDA0Nyc6J0cnLCdcdTI0QkMnOidHJywnXHVGRjI3JzonRycsJ1x1MDFGNCc6J0cnLCdcdTAxMUMnOidHJywnXHUxRTIwJzonRycsJ1x1MDExRSc6J0cnLCdcdTAxMjAnOidHJywnXHUwMUU2JzonRycsJ1x1MDEyMic6J0cnLCdcdTAxRTQnOidHJywnXHUwMTkzJzonRycsJ1x1QTdBMCc6J0cnLCdcdUE3N0QnOidHJywnXHVBNzdFJzonRycsJ1x1MDA0OCc6J0gnLCdcdTI0QkQnOidIJywnXHVGRjI4JzonSCcsJ1x1MDEyNCc6J0gnLCdcdTFFMjInOidIJywnXHUxRTI2JzonSCcsJ1x1MDIxRSc6J0gnLCdcdTFFMjQnOidIJywnXHUxRTI4JzonSCcsJ1x1MUUyQSc6J0gnLCdcdTAxMjYnOidIJywnXHUyQzY3JzonSCcsJ1x1MkM3NSc6J0gnLCdcdUE3OEQnOidIJywnXHUwMDQ5JzonSScsJ1x1MjRCRSc6J0knLCdcdUZGMjknOidJJywnXHUwMENDJzonSScsJ1x1MDBDRCc6J0knLCdcdTAwQ0UnOidJJywnXHUwMTI4JzonSScsJ1x1MDEyQSc6J0knLCdcdTAxMkMnOidJJywnXHUwMTMwJzonSScsJ1x1MDBDRic6J0knLCdcdTFFMkUnOidJJywnXHUxRUM4JzonSScsJ1x1MDFDRic6J0knLCdcdTAyMDgnOidJJywnXHUwMjBBJzonSScsJ1x1MUVDQSc6J0knLCdcdTAxMkUnOidJJywnXHUxRTJDJzonSScsJ1x1MDE5Nyc6J0knLCdcdTAwNEEnOidKJywnXHUyNEJGJzonSicsJ1x1RkYyQSc6J0onLCdcdTAxMzQnOidKJywnXHUwMjQ4JzonSicsJ1x1MDA0Qic6J0snLCdcdTI0QzAnOidLJywnXHVGRjJCJzonSycsJ1x1MUUzMCc6J0snLCdcdTAxRTgnOidLJywnXHUxRTMyJzonSycsJ1x1MDEzNic6J0snLCdcdTFFMzQnOidLJywnXHUwMTk4JzonSycsJ1x1MkM2OSc6J0snLCdcdUE3NDAnOidLJywnXHVBNzQyJzonSycsJ1x1QTc0NCc6J0snLCdcdUE3QTInOidLJywnXHUwMDRDJzonTCcsJ1x1MjRDMSc6J0wnLCdcdUZGMkMnOidMJywnXHUwMTNGJzonTCcsJ1x1MDEzOSc6J0wnLCdcdTAxM0QnOidMJywnXHUxRTM2JzonTCcsJ1x1MUUzOCc6J0wnLCdcdTAxM0InOidMJywnXHUxRTNDJzonTCcsJ1x1MUUzQSc6J0wnLCdcdTAxNDEnOidMJywnXHUwMjNEJzonTCcsJ1x1MkM2Mic6J0wnLCdcdTJDNjAnOidMJywnXHVBNzQ4JzonTCcsJ1x1QTc0Nic6J0wnLCdcdUE3ODAnOidMJywnXHUwMUM3JzonTEonLCdcdTAxQzgnOidMaicsJ1x1MDA0RCc6J00nLCdcdTI0QzInOidNJywnXHVGRjJEJzonTScsJ1x1MUUzRSc6J00nLCdcdTFFNDAnOidNJywnXHUxRTQyJzonTScsJ1x1MkM2RSc6J00nLCdcdTAxOUMnOidNJywnXHUwMDRFJzonTicsJ1x1MjRDMyc6J04nLCdcdUZGMkUnOidOJywnXHUwMUY4JzonTicsJ1x1MDE0Myc6J04nLCdcdTAwRDEnOidOJywnXHUxRTQ0JzonTicsJ1x1MDE0Nyc6J04nLCdcdTFFNDYnOidOJywnXHUwMTQ1JzonTicsJ1x1MUU0QSc6J04nLCdcdTFFNDgnOidOJywnXHUwMjIwJzonTicsJ1x1MDE5RCc6J04nLCdcdUE3OTAnOidOJywnXHVBN0E0JzonTicsJ1x1MDFDQSc6J05KJywnXHUwMUNCJzonTmonLCdcdTAwNEYnOidPJywnXHUyNEM0JzonTycsJ1x1RkYyRic6J08nLCdcdTAwRDInOidPJywnXHUwMEQzJzonTycsJ1x1MDBENCc6J08nLCdcdTFFRDInOidPJywnXHUxRUQwJzonTycsJ1x1MUVENic6J08nLCdcdTFFRDQnOidPJywnXHUwMEQ1JzonTycsJ1x1MUU0Qyc6J08nLCdcdTAyMkMnOidPJywnXHUxRTRFJzonTycsJ1x1MDE0Qyc6J08nLCdcdTFFNTAnOidPJywnXHUxRTUyJzonTycsJ1x1MDE0RSc6J08nLCdcdTAyMkUnOidPJywnXHUwMjMwJzonTycsJ1x1MDBENic6J08nLCdcdTAyMkEnOidPJywnXHUxRUNFJzonTycsJ1x1MDE1MCc6J08nLCdcdTAxRDEnOidPJywnXHUwMjBDJzonTycsJ1x1MDIwRSc6J08nLCdcdTAxQTAnOidPJywnXHUxRURDJzonTycsJ1x1MUVEQSc6J08nLCdcdTFFRTAnOidPJywnXHUxRURFJzonTycsJ1x1MUVFMic6J08nLCdcdTFFQ0MnOidPJywnXHUxRUQ4JzonTycsJ1x1MDFFQSc6J08nLCdcdTAxRUMnOidPJywnXHUwMEQ4JzonTycsJ1x1MDFGRSc6J08nLCdcdTAxODYnOidPJywnXHUwMTlGJzonTycsJ1x1QTc0QSc6J08nLCdcdUE3NEMnOidPJywnXHUwMUEyJzonT0knLCdcdUE3NEUnOidPTycsJ1x1MDIyMic6J09VJywnXHUwMDUwJzonUCcsJ1x1MjRDNSc6J1AnLCdcdUZGMzAnOidQJywnXHUxRTU0JzonUCcsJ1x1MUU1Nic6J1AnLCdcdTAxQTQnOidQJywnXHUyQzYzJzonUCcsJ1x1QTc1MCc6J1AnLCdcdUE3NTInOidQJywnXHVBNzU0JzonUCcsJ1x1MDA1MSc6J1EnLCdcdTI0QzYnOidRJywnXHVGRjMxJzonUScsJ1x1QTc1Nic6J1EnLCdcdUE3NTgnOidRJywnXHUwMjRBJzonUScsJ1x1MDA1Mic6J1InLCdcdTI0QzcnOidSJywnXHVGRjMyJzonUicsJ1x1MDE1NCc6J1InLCdcdTFFNTgnOidSJywnXHUwMTU4JzonUicsJ1x1MDIxMCc6J1InLCdcdTAyMTInOidSJywnXHUxRTVBJzonUicsJ1x1MUU1Qyc6J1InLCdcdTAxNTYnOidSJywnXHUxRTVFJzonUicsJ1x1MDI0Qyc6J1InLCdcdTJDNjQnOidSJywnXHVBNzVBJzonUicsJ1x1QTdBNic6J1InLCdcdUE3ODInOidSJywnXHUwMDUzJzonUycsJ1x1MjRDOCc6J1MnLCdcdUZGMzMnOidTJywnXHUxRTlFJzonUycsJ1x1MDE1QSc6J1MnLCdcdTFFNjQnOidTJywnXHUwMTVDJzonUycsJ1x1MUU2MCc6J1MnLCdcdTAxNjAnOidTJywnXHUxRTY2JzonUycsJ1x1MUU2Mic6J1MnLCdcdTFFNjgnOidTJywnXHUwMjE4JzonUycsJ1x1MDE1RSc6J1MnLCdcdTJDN0UnOidTJywnXHVBN0E4JzonUycsJ1x1QTc4NCc6J1MnLCdcdTAwNTQnOidUJywnXHUyNEM5JzonVCcsJ1x1RkYzNCc6J1QnLCdcdTFFNkEnOidUJywnXHUwMTY0JzonVCcsJ1x1MUU2Qyc6J1QnLCdcdTAyMUEnOidUJywnXHUwMTYyJzonVCcsJ1x1MUU3MCc6J1QnLCdcdTFFNkUnOidUJywnXHUwMTY2JzonVCcsJ1x1MDFBQyc6J1QnLCdcdTAxQUUnOidUJywnXHUwMjNFJzonVCcsJ1x1QTc4Nic6J1QnLCdcdUE3MjgnOidUWicsJ1x1MDA1NSc6J1UnLCdcdTI0Q0EnOidVJywnXHVGRjM1JzonVScsJ1x1MDBEOSc6J1UnLCdcdTAwREEnOidVJywnXHUwMERCJzonVScsJ1x1MDE2OCc6J1UnLCdcdTFFNzgnOidVJywnXHUwMTZBJzonVScsJ1x1MUU3QSc6J1UnLCdcdTAxNkMnOidVJywnXHUwMERDJzonVScsJ1x1MDFEQic6J1UnLCdcdTAxRDcnOidVJywnXHUwMUQ1JzonVScsJ1x1MDFEOSc6J1UnLCdcdTFFRTYnOidVJywnXHUwMTZFJzonVScsJ1x1MDE3MCc6J1UnLCdcdTAxRDMnOidVJywnXHUwMjE0JzonVScsJ1x1MDIxNic6J1UnLCdcdTAxQUYnOidVJywnXHUxRUVBJzonVScsJ1x1MUVFOCc6J1UnLCdcdTFFRUUnOidVJywnXHUxRUVDJzonVScsJ1x1MUVGMCc6J1UnLCdcdTFFRTQnOidVJywnXHUxRTcyJzonVScsJ1x1MDE3Mic6J1UnLCdcdTFFNzYnOidVJywnXHUxRTc0JzonVScsJ1x1MDI0NCc6J1UnLCdcdTAwNTYnOidWJywnXHUyNENCJzonVicsJ1x1RkYzNic6J1YnLCdcdTFFN0MnOidWJywnXHUxRTdFJzonVicsJ1x1MDFCMic6J1YnLCdcdUE3NUUnOidWJywnXHUwMjQ1JzonVicsJ1x1QTc2MCc6J1ZZJywnXHUwMDU3JzonVycsJ1x1MjRDQyc6J1cnLCdcdUZGMzcnOidXJywnXHUxRTgwJzonVycsJ1x1MUU4Mic6J1cnLCdcdTAxNzQnOidXJywnXHUxRTg2JzonVycsJ1x1MUU4NCc6J1cnLCdcdTFFODgnOidXJywnXHUyQzcyJzonVycsJ1x1MDA1OCc6J1gnLCdcdTI0Q0QnOidYJywnXHVGRjM4JzonWCcsJ1x1MUU4QSc6J1gnLCdcdTFFOEMnOidYJywnXHUwMDU5JzonWScsJ1x1MjRDRSc6J1knLCdcdUZGMzknOidZJywnXHUxRUYyJzonWScsJ1x1MDBERCc6J1knLCdcdTAxNzYnOidZJywnXHUxRUY4JzonWScsJ1x1MDIzMic6J1knLCdcdTFFOEUnOidZJywnXHUwMTc4JzonWScsJ1x1MUVGNic6J1knLCdcdTFFRjQnOidZJywnXHUwMUIzJzonWScsJ1x1MDI0RSc6J1knLCdcdTFFRkUnOidZJywnXHUwMDVBJzonWicsJ1x1MjRDRic6J1onLCdcdUZGM0EnOidaJywnXHUwMTc5JzonWicsJ1x1MUU5MCc6J1onLCdcdTAxN0InOidaJywnXHUwMTdEJzonWicsJ1x1MUU5Mic6J1onLCdcdTFFOTQnOidaJywnXHUwMUI1JzonWicsJ1x1MDIyNCc6J1onLCdcdTJDN0YnOidaJywnXHUyQzZCJzonWicsJ1x1QTc2Mic6J1onLCdcdTAwNjEnOidhJywnXHUyNEQwJzonYScsJ1x1RkY0MSc6J2EnLCdcdTFFOUEnOidhJywnXHUwMEUwJzonYScsJ1x1MDBFMSc6J2EnLCdcdTAwRTInOidhJywnXHUxRUE3JzonYScsJ1x1MUVBNSc6J2EnLCdcdTFFQUInOidhJywnXHUxRUE5JzonYScsJ1x1MDBFMyc6J2EnLCdcdTAxMDEnOidhJywnXHUwMTAzJzonYScsJ1x1MUVCMSc6J2EnLCdcdTFFQUYnOidhJywnXHUxRUI1JzonYScsJ1x1MUVCMyc6J2EnLCdcdTAyMjcnOidhJywnXHUwMUUxJzonYScsJ1x1MDBFNCc6J2EnLCdcdTAxREYnOidhJywnXHUxRUEzJzonYScsJ1x1MDBFNSc6J2EnLCdcdTAxRkInOidhJywnXHUwMUNFJzonYScsJ1x1MDIwMSc6J2EnLCdcdTAyMDMnOidhJywnXHUxRUExJzonYScsJ1x1MUVBRCc6J2EnLCdcdTFFQjcnOidhJywnXHUxRTAxJzonYScsJ1x1MDEwNSc6J2EnLCdcdTJDNjUnOidhJywnXHUwMjUwJzonYScsJ1x1QTczMyc6J2FhJywnXHUwMEU2JzonYWUnLCdcdTAxRkQnOidhZScsJ1x1MDFFMyc6J2FlJywnXHVBNzM1JzonYW8nLCdcdUE3MzcnOidhdScsJ1x1QTczOSc6J2F2JywnXHVBNzNCJzonYXYnLCdcdUE3M0QnOidheScsJ1x1MDA2Mic6J2InLCdcdTI0RDEnOidiJywnXHVGRjQyJzonYicsJ1x1MUUwMyc6J2InLCdcdTFFMDUnOidiJywnXHUxRTA3JzonYicsJ1x1MDE4MCc6J2InLCdcdTAxODMnOidiJywnXHUwMjUzJzonYicsJ1x1MDA2Myc6J2MnLCdcdTI0RDInOidjJywnXHVGRjQzJzonYycsJ1x1MDEwNyc6J2MnLCdcdTAxMDknOidjJywnXHUwMTBCJzonYycsJ1x1MDEwRCc6J2MnLCdcdTAwRTcnOidjJywnXHUxRTA5JzonYycsJ1x1MDE4OCc6J2MnLCdcdTAyM0MnOidjJywnXHVBNzNGJzonYycsJ1x1MjE4NCc6J2MnLCdcdTAwNjQnOidkJywnXHUyNEQzJzonZCcsJ1x1RkY0NCc6J2QnLCdcdTFFMEInOidkJywnXHUwMTBGJzonZCcsJ1x1MUUwRCc6J2QnLCdcdTFFMTEnOidkJywnXHUxRTEzJzonZCcsJ1x1MUUwRic6J2QnLCdcdTAxMTEnOidkJywnXHUwMThDJzonZCcsJ1x1MDI1Nic6J2QnLCdcdTAyNTcnOidkJywnXHVBNzdBJzonZCcsJ1x1MDFGMyc6J2R6JywnXHUwMUM2JzonZHonLCdcdTAwNjUnOidlJywnXHUyNEQ0JzonZScsJ1x1RkY0NSc6J2UnLCdcdTAwRTgnOidlJywnXHUwMEU5JzonZScsJ1x1MDBFQSc6J2UnLCdcdTFFQzEnOidlJywnXHUxRUJGJzonZScsJ1x1MUVDNSc6J2UnLCdcdTFFQzMnOidlJywnXHUxRUJEJzonZScsJ1x1MDExMyc6J2UnLCdcdTFFMTUnOidlJywnXHUxRTE3JzonZScsJ1x1MDExNSc6J2UnLCdcdTAxMTcnOidlJywnXHUwMEVCJzonZScsJ1x1MUVCQic6J2UnLCdcdTAxMUInOidlJywnXHUwMjA1JzonZScsJ1x1MDIwNyc6J2UnLCdcdTFFQjknOidlJywnXHUxRUM3JzonZScsJ1x1MDIyOSc6J2UnLCdcdTFFMUQnOidlJywnXHUwMTE5JzonZScsJ1x1MUUxOSc6J2UnLCdcdTFFMUInOidlJywnXHUwMjQ3JzonZScsJ1x1MDI1Qic6J2UnLCdcdTAxREQnOidlJywnXHUwMDY2JzonZicsJ1x1MjRENSc6J2YnLCdcdUZGNDYnOidmJywnXHUxRTFGJzonZicsJ1x1MDE5Mic6J2YnLCdcdUE3N0MnOidmJywnXHUwMDY3JzonZycsJ1x1MjRENic6J2cnLCdcdUZGNDcnOidnJywnXHUwMUY1JzonZycsJ1x1MDExRCc6J2cnLCdcdTFFMjEnOidnJywnXHUwMTFGJzonZycsJ1x1MDEyMSc6J2cnLCdcdTAxRTcnOidnJywnXHUwMTIzJzonZycsJ1x1MDFFNSc6J2cnLCdcdTAyNjAnOidnJywnXHVBN0ExJzonZycsJ1x1MUQ3OSc6J2cnLCdcdUE3N0YnOidnJywnXHUwMDY4JzonaCcsJ1x1MjRENyc6J2gnLCdcdUZGNDgnOidoJywnXHUwMTI1JzonaCcsJ1x1MUUyMyc6J2gnLCdcdTFFMjcnOidoJywnXHUwMjFGJzonaCcsJ1x1MUUyNSc6J2gnLCdcdTFFMjknOidoJywnXHUxRTJCJzonaCcsJ1x1MUU5Nic6J2gnLCdcdTAxMjcnOidoJywnXHUyQzY4JzonaCcsJ1x1MkM3Nic6J2gnLCdcdTAyNjUnOidoJywnXHUwMTk1JzonaHYnLCdcdTAwNjknOidpJywnXHUyNEQ4JzonaScsJ1x1RkY0OSc6J2knLCdcdTAwRUMnOidpJywnXHUwMEVEJzonaScsJ1x1MDBFRSc6J2knLCdcdTAxMjknOidpJywnXHUwMTJCJzonaScsJ1x1MDEyRCc6J2knLCdcdTAwRUYnOidpJywnXHUxRTJGJzonaScsJ1x1MUVDOSc6J2knLCdcdTAxRDAnOidpJywnXHUwMjA5JzonaScsJ1x1MDIwQic6J2knLCdcdTFFQ0InOidpJywnXHUwMTJGJzonaScsJ1x1MUUyRCc6J2knLCdcdTAyNjgnOidpJywnXHUwMTMxJzonaScsJ1x1MDA2QSc6J2onLCdcdTI0RDknOidqJywnXHVGRjRBJzonaicsJ1x1MDEzNSc6J2onLCdcdTAxRjAnOidqJywnXHUwMjQ5JzonaicsJ1x1MDA2Qic6J2snLCdcdTI0REEnOidrJywnXHVGRjRCJzonaycsJ1x1MUUzMSc6J2snLCdcdTAxRTknOidrJywnXHUxRTMzJzonaycsJ1x1MDEzNyc6J2snLCdcdTFFMzUnOidrJywnXHUwMTk5JzonaycsJ1x1MkM2QSc6J2snLCdcdUE3NDEnOidrJywnXHVBNzQzJzonaycsJ1x1QTc0NSc6J2snLCdcdUE3QTMnOidrJywnXHUwMDZDJzonbCcsJ1x1MjREQic6J2wnLCdcdUZGNEMnOidsJywnXHUwMTQwJzonbCcsJ1x1MDEzQSc6J2wnLCdcdTAxM0UnOidsJywnXHUxRTM3JzonbCcsJ1x1MUUzOSc6J2wnLCdcdTAxM0MnOidsJywnXHUxRTNEJzonbCcsJ1x1MUUzQic6J2wnLCdcdTAxN0YnOidsJywnXHUwMTQyJzonbCcsJ1x1MDE5QSc6J2wnLCdcdTAyNkInOidsJywnXHUyQzYxJzonbCcsJ1x1QTc0OSc6J2wnLCdcdUE3ODEnOidsJywnXHVBNzQ3JzonbCcsJ1x1MDFDOSc6J2xqJywnXHUwMDZEJzonbScsJ1x1MjREQyc6J20nLCdcdUZGNEQnOidtJywnXHUxRTNGJzonbScsJ1x1MUU0MSc6J20nLCdcdTFFNDMnOidtJywnXHUwMjcxJzonbScsJ1x1MDI2Ric6J20nLCdcdTAwNkUnOiduJywnXHUyNEREJzonbicsJ1x1RkY0RSc6J24nLCdcdTAxRjknOiduJywnXHUwMTQ0JzonbicsJ1x1MDBGMSc6J24nLCdcdTFFNDUnOiduJywnXHUwMTQ4JzonbicsJ1x1MUU0Nyc6J24nLCdcdTAxNDYnOiduJywnXHUxRTRCJzonbicsJ1x1MUU0OSc6J24nLCdcdTAxOUUnOiduJywnXHUwMjcyJzonbicsJ1x1MDE0OSc6J24nLCdcdUE3OTEnOiduJywnXHVBN0E1JzonbicsJ1x1MDFDQyc6J25qJywnXHUwMDZGJzonbycsJ1x1MjRERSc6J28nLCdcdUZGNEYnOidvJywnXHUwMEYyJzonbycsJ1x1MDBGMyc6J28nLCdcdTAwRjQnOidvJywnXHUxRUQzJzonbycsJ1x1MUVEMSc6J28nLCdcdTFFRDcnOidvJywnXHUxRUQ1JzonbycsJ1x1MDBGNSc6J28nLCdcdTFFNEQnOidvJywnXHUwMjJEJzonbycsJ1x1MUU0Ric6J28nLCdcdTAxNEQnOidvJywnXHUxRTUxJzonbycsJ1x1MUU1Myc6J28nLCdcdTAxNEYnOidvJywnXHUwMjJGJzonbycsJ1x1MDIzMSc6J28nLCdcdTAwRjYnOidvJywnXHUwMjJCJzonbycsJ1x1MUVDRic6J28nLCdcdTAxNTEnOidvJywnXHUwMUQyJzonbycsJ1x1MDIwRCc6J28nLCdcdTAyMEYnOidvJywnXHUwMUExJzonbycsJ1x1MUVERCc6J28nLCdcdTFFREInOidvJywnXHUxRUUxJzonbycsJ1x1MUVERic6J28nLCdcdTFFRTMnOidvJywnXHUxRUNEJzonbycsJ1x1MUVEOSc6J28nLCdcdTAxRUInOidvJywnXHUwMUVEJzonbycsJ1x1MDBGOCc6J28nLCdcdTAxRkYnOidvJywnXHUwMjU0JzonbycsJ1x1QTc0Qic6J28nLCdcdUE3NEQnOidvJywnXHUwMjc1JzonbycsJ1x1MDFBMyc6J29pJywnXHUwMjIzJzonb3UnLCdcdUE3NEYnOidvbycsJ1x1MDA3MCc6J3AnLCdcdTI0REYnOidwJywnXHVGRjUwJzoncCcsJ1x1MUU1NSc6J3AnLCdcdTFFNTcnOidwJywnXHUwMUE1JzoncCcsJ1x1MUQ3RCc6J3AnLCdcdUE3NTEnOidwJywnXHVBNzUzJzoncCcsJ1x1QTc1NSc6J3AnLCdcdTAwNzEnOidxJywnXHUyNEUwJzoncScsJ1x1RkY1MSc6J3EnLCdcdTAyNEInOidxJywnXHVBNzU3JzoncScsJ1x1QTc1OSc6J3EnLCdcdTAwNzInOidyJywnXHUyNEUxJzoncicsJ1x1RkY1Mic6J3InLCdcdTAxNTUnOidyJywnXHUxRTU5JzoncicsJ1x1MDE1OSc6J3InLCdcdTAyMTEnOidyJywnXHUwMjEzJzoncicsJ1x1MUU1Qic6J3InLCdcdTFFNUQnOidyJywnXHUwMTU3JzoncicsJ1x1MUU1Ric6J3InLCdcdTAyNEQnOidyJywnXHUwMjdEJzoncicsJ1x1QTc1Qic6J3InLCdcdUE3QTcnOidyJywnXHVBNzgzJzoncicsJ1x1MDA3Myc6J3MnLCdcdTI0RTInOidzJywnXHVGRjUzJzoncycsJ1x1MDBERic6J3MnLCdcdTAxNUInOidzJywnXHUxRTY1JzoncycsJ1x1MDE1RCc6J3MnLCdcdTFFNjEnOidzJywnXHUwMTYxJzoncycsJ1x1MUU2Nyc6J3MnLCdcdTFFNjMnOidzJywnXHUxRTY5JzoncycsJ1x1MDIxOSc6J3MnLCdcdTAxNUYnOidzJywnXHUwMjNGJzoncycsJ1x1QTdBOSc6J3MnLCdcdUE3ODUnOidzJywnXHUxRTlCJzoncycsJ1x1MDA3NCc6J3QnLCdcdTI0RTMnOid0JywnXHVGRjU0JzondCcsJ1x1MUU2Qic6J3QnLCdcdTFFOTcnOid0JywnXHUwMTY1JzondCcsJ1x1MUU2RCc6J3QnLCdcdTAyMUInOid0JywnXHUwMTYzJzondCcsJ1x1MUU3MSc6J3QnLCdcdTFFNkYnOid0JywnXHUwMTY3JzondCcsJ1x1MDFBRCc6J3QnLCdcdTAyODgnOid0JywnXHUyQzY2JzondCcsJ1x1QTc4Nyc6J3QnLCdcdUE3MjknOid0eicsJ1x1MDA3NSc6J3UnLCdcdTI0RTQnOid1JywnXHVGRjU1JzondScsJ1x1MDBGOSc6J3UnLCdcdTAwRkEnOid1JywnXHUwMEZCJzondScsJ1x1MDE2OSc6J3UnLCdcdTFFNzknOid1JywnXHUwMTZCJzondScsJ1x1MUU3Qic6J3UnLCdcdTAxNkQnOid1JywnXHUwMEZDJzondScsJ1x1MDFEQyc6J3UnLCdcdTAxRDgnOid1JywnXHUwMUQ2JzondScsJ1x1MDFEQSc6J3UnLCdcdTFFRTcnOid1JywnXHUwMTZGJzondScsJ1x1MDE3MSc6J3UnLCdcdTAxRDQnOid1JywnXHUwMjE1JzondScsJ1x1MDIxNyc6J3UnLCdcdTAxQjAnOid1JywnXHUxRUVCJzondScsJ1x1MUVFOSc6J3UnLCdcdTFFRUYnOid1JywnXHUxRUVEJzondScsJ1x1MUVGMSc6J3UnLCdcdTFFRTUnOid1JywnXHUxRTczJzondScsJ1x1MDE3Myc6J3UnLCdcdTFFNzcnOid1JywnXHUxRTc1JzondScsJ1x1MDI4OSc6J3UnLCdcdTAwNzYnOid2JywnXHUyNEU1JzondicsJ1x1RkY1Nic6J3YnLCdcdTFFN0QnOid2JywnXHUxRTdGJzondicsJ1x1MDI4Qic6J3YnLCdcdUE3NUYnOid2JywnXHUwMjhDJzondicsJ1x1QTc2MSc6J3Z5JywnXHUwMDc3JzondycsJ1x1MjRFNic6J3cnLCdcdUZGNTcnOid3JywnXHUxRTgxJzondycsJ1x1MUU4Myc6J3cnLCdcdTAxNzUnOid3JywnXHUxRTg3JzondycsJ1x1MUU4NSc6J3cnLCdcdTFFOTgnOid3JywnXHUxRTg5JzondycsJ1x1MkM3Myc6J3cnLCdcdTAwNzgnOid4JywnXHUyNEU3JzoneCcsJ1x1RkY1OCc6J3gnLCdcdTFFOEInOid4JywnXHUxRThEJzoneCcsJ1x1MDA3OSc6J3knLCdcdTI0RTgnOid5JywnXHVGRjU5JzoneScsJ1x1MUVGMyc6J3knLCdcdTAwRkQnOid5JywnXHUwMTc3JzoneScsJ1x1MUVGOSc6J3knLCdcdTAyMzMnOid5JywnXHUxRThGJzoneScsJ1x1MDBGRic6J3knLCdcdTFFRjcnOid5JywnXHUxRTk5JzoneScsJ1x1MUVGNSc6J3knLCdcdTAxQjQnOid5JywnXHUwMjRGJzoneScsJ1x1MUVGRic6J3knLCdcdTAwN0EnOid6JywnXHUyNEU5JzoneicsJ1x1RkY1QSc6J3onLCdcdTAxN0EnOid6JywnXHUxRTkxJzoneicsJ1x1MDE3Qyc6J3onLCdcdTAxN0UnOid6JywnXHUxRTkzJzoneicsJ1x1MUU5NSc6J3onLCdcdTAxQjYnOid6JywnXHUwMjI1JzoneicsJ1x1MDI0MCc6J3onLCdcdTJDNkMnOid6JywnXHVBNzYzJzoneicsfTt2YXIgdXRpbHM9e2Fzc2VydDpmdW5jdGlvbihib29sKXtpZighYm9vbCl7dGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb25FcnJvciIpO319LGJpbmFyeVRvQmluc2l6ZTpmdW5jdGlvbih2YWx1ZSl7aWYoIXRoaXMuaXNfYmluX3NpemUodmFsdWUpKXtyZXR1cm4gdGhpcy5odW1hbl9zaXplKHZhbHVlLmxlbmd0aC8xLjM3KTt9CnJldHVybiB2YWx1ZTt9LGNvbmZpbmU6ZnVuY3Rpb24odmFsLG1pbixtYXgpe3JldHVybiBNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHZhbCkpO30sZmxvYXRfaXNfemVybzpmdW5jdGlvbih2YWx1ZSxkZWNpbWFscyl7dmFyIGVwc2lsb249TWF0aC5wb3coMTAsLWRlY2ltYWxzKTtyZXR1cm4gTWF0aC5hYnModXRpbHMucm91bmRfcHJlY2lzaW9uKHZhbHVlLGVwc2lsb24pKTxlcHNpbG9uO30sZ2VuZXJhdGVJRDpmdW5jdGlvbigpe3JldHVybisraWQ7fSxnZXRfY29va2llOmZ1bmN0aW9uKGNfbmFtZSl7dmFyIGNvb2tpZXM9ZG9jdW1lbnQuY29va2llP2RvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKTpbXTtmb3IodmFyIGk9MCxsPWNvb2tpZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBwYXJ0cz1jb29raWVzW2ldLnNwbGl0KCc9Jyk7dmFyIG5hbWU9cGFydHMuc2hpZnQoKTt2YXIgY29va2llPXBhcnRzLmpvaW4oJz0nKTtpZihjX25hbWUmJmNfbmFtZT09PW5hbWUpe3JldHVybiBjb29raWU7fX0KcmV0dXJuIiI7fSxnZXREYXRhVVJMRnJvbUZpbGU6ZnVuY3Rpb24oZmlsZSl7aWYoIWZpbGUpe3JldHVybiBQcm9taXNlLnJlamVjdCgpO30KcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt2YXIgcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7cmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGZ1bmN0aW9uKCl7cmVzb2x2ZShyZWFkZXIucmVzdWx0KTt9KTtyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLHJlamVjdCk7cmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxyZWplY3QpO3JlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO30pO30saHVtYW5fbnVtYmVyOmZ1bmN0aW9uKG51bWJlcixkZWNpbWFscyxtaW5EaWdpdHMsZm9ybWF0dGVyQ2FsbGJhY2spe251bWJlcj1NYXRoLnJvdW5kKG51bWJlcik7ZGVjaW1hbHM9ZGVjaW1hbHN8MDttaW5EaWdpdHM9bWluRGlnaXRzfHwxO2Zvcm1hdHRlckNhbGxiYWNrPWZvcm1hdHRlckNhbGxiYWNrfHx1dGlscy5pbnNlcnRfdGhvdXNhbmRfc2Vwczt2YXIgZDI9TWF0aC5wb3coMTAsZGVjaW1hbHMpO3ZhciB2YWw9X3QoJ2tNR1RQRScpO3ZhciBzeW1ib2w9Jyc7dmFyIG51bWJlck1hZ25pdHVkZT1udW1iZXIudG9FeHBvbmVudGlhbCgpLnNwbGl0KCdlJylbMV07aWYobnVtYmVyTWFnbml0dWRlPj0yMSl7bnVtYmVyPU1hdGgucm91bmQobnVtYmVyKk1hdGgucG93KDEwLGRlY2ltYWxzLW51bWJlck1hZ25pdHVkZSkpL2QyO3JldHVybiBudW1iZXIrJ2UnK251bWJlck1hZ25pdHVkZTt9CmZvcih2YXIgaT12YWwubGVuZ3RoO2k+MDtpLS0pe3ZhciBzPU1hdGgucG93KDEwLGkqMyk7aWYoczw9bnVtYmVyL01hdGgucG93KDEwLG1pbkRpZ2l0cy0xKSl7bnVtYmVyPU1hdGgucm91bmQobnVtYmVyKmQyL3MpL2QyO3N5bWJvbD12YWxbaS0xXTticmVhazt9fQpyZXR1cm4gZm9ybWF0dGVyQ2FsbGJhY2soJycrbnVtYmVyKStzeW1ib2w7fSxodW1hbl9zaXplOmZ1bmN0aW9uKHNpemUpe3ZhciB1bml0cz1fdCgiQnl0ZXN8S2J8TWJ8R2J8VGJ8UGJ8RWJ8WmJ8WWIiKS5zcGxpdCgnfCcpO3ZhciBpPTA7d2hpbGUoc2l6ZT49MTAyNCl7c2l6ZS89MTAyNDsrK2k7fQpyZXR1cm4gc2l6ZS50b0ZpeGVkKDIpKycgJyt1bml0c1tpXS50cmltKCk7fSxpbnNlcnRfdGhvdXNhbmRfc2VwczpmdW5jdGlvbihudW0pe3ZhciBuZWdhdGl2ZT1udW1bMF09PT0nLSc7bnVtPShuZWdhdGl2ZT9udW0uc2xpY2UoMSk6bnVtKTtyZXR1cm4obmVnYXRpdmU/Jy0nOicnKSt1dGlscy5pbnRlcnNwZXJzZShudW0sX3QuZGF0YWJhc2UucGFyYW1ldGVycy5ncm91cGluZyxfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLnRob3VzYW5kc19zZXApO30saW50ZXJzcGVyc2U6ZnVuY3Rpb24oc3RyLGluZGljZXMsc2VwYXJhdG9yKXtzZXBhcmF0b3I9c2VwYXJhdG9yfHwnJzt2YXIgcmVzdWx0PVtdLGxhc3Q9c3RyLmxlbmd0aDtmb3IodmFyIGk9MDtpPGluZGljZXMubGVuZ3RoOysraSl7dmFyIHNlY3Rpb249aW5kaWNlc1tpXTtpZihzZWN0aW9uPT09LTF8fGxhc3Q8PTApe2JyZWFrO31lbHNlIGlmKHNlY3Rpb249PT0wJiZpPT09MCl7YnJlYWs7fWVsc2UgaWYoc2VjdGlvbj09PTApe3NlY3Rpb249aW5kaWNlc1stLWldO30KcmVzdWx0LnB1c2goc3RyLnN1YnN0cmluZyhsYXN0LXNlY3Rpb24sbGFzdCkpO2xhc3QtPXNlY3Rpb247fQp2YXIgcz1zdHIuc3Vic3RyaW5nKDAsbGFzdCk7aWYocyl7cmVzdWx0LnB1c2gocyk7fQpyZXR1cm4gcmVzdWx0LnJldmVyc2UoKS5qb2luKHNlcGFyYXRvcik7fSxpbnRvOmZ1bmN0aW9uKG9iamVjdCxwYXRoKXtpZighXyhwYXRoKS5pc0FycmF5KCkpe3BhdGg9cGF0aC5zcGxpdCgnLicpO30KZm9yKHZhciBpPTA7aTxwYXRoLmxlbmd0aDtpKyspe29iamVjdD1vYmplY3RbcGF0aFtpXV07fQpyZXR1cm4gb2JqZWN0O30saXNfYmluX3NpemU6ZnVuY3Rpb24odil7cmV0dXJuKC9eXGQrKFwuXGQqKT8gW14wLTldKyQvKS50ZXN0KHYpO30saXNWYWxpZEFuY2hvcjpmdW5jdGlvbihhbmNob3Ipe3JldHVybi9eI1tcdy1dKyQvLnRlc3QoYW5jaG9yKTt9LGpzb25fbm9kZV90b194bWw6ZnVuY3Rpb24obm9kZSxodW1hbl9yZWFkYWJsZSxpbmRlbnQpe2luZGVudD1pbmRlbnR8fDA7dmFyIHNpbmRlbnQ9KGh1bWFuX3JlYWRhYmxlPyhuZXcgQXJyYXkoaW5kZW50KzEpLmpvaW4oJ1x0JykpOicnKSxyPXNpbmRlbnQrJzwnK25vZGUudGFnLGNyPWh1bWFuX3JlYWRhYmxlPydcbic6Jyc7aWYodHlwZW9mKG5vZGUpPT09J3N0cmluZycpe3JldHVybiBzaW5kZW50K25vZGUucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7fWVsc2UgaWYodHlwZW9mKG5vZGUudGFnKSE9PSdzdHJpbmcnfHwhbm9kZS5jaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5fHwhbm9kZS5hdHRycyBpbnN0YW5jZW9mIE9iamVjdCl7dGhyb3cgbmV3IEVycm9yKF8uc3RyLnNwcmludGYoX3QoIk5vZGUgWyVzXSBpcyBub3QgYSBKU09OaWZpZWQgWE1MIG5vZGUiKSxKU09OLnN0cmluZ2lmeShub2RlKSkpO30KZm9yKHZhciBhdHRyIGluIG5vZGUuYXR0cnMpe3ZhciB2YXR0cj1ub2RlLmF0dHJzW2F0dHJdO2lmKHR5cGVvZih2YXR0cikhPT0nc3RyaW5nJyl7dmF0dHI9SlNPTi5zdHJpbmdpZnkodmF0dHIpO30KdmF0dHI9dmF0dHIucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7aWYoaHVtYW5fcmVhZGFibGUpe3ZhdHRyPXZhdHRyLnJlcGxhY2UoLyZxdW90Oy9nLCInIik7fQpyKz0nICcrYXR0cisnPSInK3ZhdHRyKyciJzt9CmlmKG5vZGUuY2hpbGRyZW4mJm5vZGUuY2hpbGRyZW4ubGVuZ3RoKXtyKz0nPicrY3I7dmFyIGNoaWxkcz1bXTtmb3IodmFyIGk9MCxpaT1ub2RlLmNoaWxkcmVuLmxlbmd0aDtpPGlpO2krKyl7Y2hpbGRzLnB1c2godXRpbHMuanNvbl9ub2RlX3RvX3htbChub2RlLmNoaWxkcmVuW2ldLGh1bWFuX3JlYWRhYmxlLGluZGVudCsxKSk7fQpyKz1jaGlsZHMuam9pbihjcik7cis9Y3Irc2luZGVudCsnPC8nK25vZGUudGFnKyc+JztyZXR1cm4gcjt9ZWxzZXtyZXR1cm4gcisnLz4nO319LGxwYWQ6ZnVuY3Rpb24oc3RyLHNpemUpe3N0cj0iIitzdHI7cmV0dXJuIG5ldyBBcnJheShzaXplLXN0ci5sZW5ndGgrMSkuam9pbignMCcpK3N0cjt9LHJvdW5kX2RlY2ltYWxzOmZ1bmN0aW9uKHZhbHVlLGRlY2ltYWxzKXtyZXR1cm4gdXRpbHMucm91bmRfcHJlY2lzaW9uKHZhbHVlLE1hdGgucG93KDEwLC1kZWNpbWFscykpO30scm91bmRfcHJlY2lzaW9uOmZ1bmN0aW9uKHZhbHVlLHByZWNpc2lvbil7aWYoIXZhbHVlKXtyZXR1cm4gMDt9ZWxzZSBpZighcHJlY2lzaW9ufHxwcmVjaXNpb248MCl7cHJlY2lzaW9uPTE7fQp2YXIgbm9ybWFsaXplZF92YWx1ZT12YWx1ZS9wcmVjaXNpb247dmFyIGVwc2lsb25fbWFnbml0dWRlPU1hdGgubG9nKE1hdGguYWJzKG5vcm1hbGl6ZWRfdmFsdWUpKS9NYXRoLmxvZygyKTt2YXIgZXBzaWxvbj1NYXRoLnBvdygyLGVwc2lsb25fbWFnbml0dWRlLTUyKTtub3JtYWxpemVkX3ZhbHVlKz1ub3JtYWxpemVkX3ZhbHVlPj0wP2Vwc2lsb246LWVwc2lsb247dmFyIHNpZ249bm9ybWFsaXplZF92YWx1ZTwwPy0xLjA6MS4wO3ZhciByb3VuZGVkX3ZhbHVlPXNpZ24qTWF0aC5yb3VuZChNYXRoLmFicyhub3JtYWxpemVkX3ZhbHVlKSk7cmV0dXJuIHJvdW5kZWRfdmFsdWUqcHJlY2lzaW9uO30scnBhZDpmdW5jdGlvbihzdHIsc2l6ZSl7c3RyPSIiK3N0cjtyZXR1cm4gc3RyK25ldyBBcnJheShzaXplLXN0ci5sZW5ndGgrMSkuam9pbignMCcpO30sc2V0X2Nvb2tpZTpmdW5jdGlvbihuYW1lLHZhbHVlLHR0bCl7dHRsPXR0bHx8MjQqNjAqNjAqMzY1O2RvY3VtZW50LmNvb2tpZT1bbmFtZSsnPScrdmFsdWUsJ3BhdGg9LycsJ21heC1hZ2U9Jyt0dGwsJ2V4cGlyZXM9JytuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSt0dGwqMTAwMCkudG9HTVRTdHJpbmcoKV0uam9pbignOycpO30sc3RhYmxlU29ydDpmdW5jdGlvbihhcnJheSxpdGVyYXRlZSl7dmFyIHN0YWJsZT1hcnJheS5zbGljZSgpO3JldHVybiBhcnJheS5zb3J0KGZ1bmN0aW9uIHN0YWJsZUNvbXBhcmUoYSxiKXt2YXIgb3JkZXI9aXRlcmF0ZWUoYSxiKTtpZihvcmRlciE9PTApe3JldHVybiBvcmRlcjt9ZWxzZXtyZXR1cm4gc3RhYmxlLmluZGV4T2YoYSktc3RhYmxlLmluZGV4T2YoYik7fX0pO30sc3dhcDpmdW5jdGlvbihhcnJheSxlbGVtMSxlbGVtMil7dmFyIGkxPWFycmF5LmluZGV4T2YoZWxlbTEpO3ZhciBpMj1hcnJheS5pbmRleE9mKGVsZW0yKTthcnJheVtpMl09ZWxlbTE7YXJyYXlbaTFdPWVsZW0yO30saXNfZW1haWw6ZnVuY3Rpb24odmFsdWUsYWxsb3dfbWFpbHRvKXt2YXIgcmU7aWYoYWxsb3dfbWFpbHRvKXtyZT0vXihtYWlsdG86KT8oKFtePD4oKVxbXF1cLiw7OlxzQFwiXSsoXC5bXjw+KClcW1xdXC4sOzpcc0BcIl0rKSopfChcIi4rXCIpKUAoKFtePD4oKVtcXVwuLDs6XHNAXCJdK1wuKStbXjw+KClbXF1cLiw7OlxzQFwiXXsyLH0pJC9pO31lbHNle3JlPS9eKChbXjw+KClcW1xdXC4sOzpcc0BcIl0rKFwuW148PigpXFtcXVwuLDs6XHNAXCJdKykqKXwoXCIuK1wiKSlAKChbXjw+KClbXF1cLiw7OlxzQFwiXStcLikrW148PigpW1xdXC4sOzpcc0BcIl17Mix9KSQvaTt9CnJldHVybiByZS50ZXN0KHZhbHVlKTt9LHRvQm9vbEVsc2U6ZnVuY3Rpb24oc3RyLGVsc2VWYWx1ZXMsdHJ1ZVZhbHVlcyxmYWxzZVZhbHVlcyl7dmFyIHJldD1fLnN0ci50b0Jvb2woc3RyLHRydWVWYWx1ZXMsZmFsc2VWYWx1ZXMpO2lmKF8uaXNVbmRlZmluZWQocmV0KSl7cmV0dXJuIGVsc2VWYWx1ZXM7fQpyZXR1cm4gcmV0O30sdHJhdmVyc2VfcmVjb3JkczpmdW5jdGlvbihkYXRhLGYpe2lmKGRhdGEudHlwZT09PSdyZWNvcmQnKXtmKGRhdGEpO31lbHNlIGlmKGRhdGEuZGF0YSl7Zm9yKHZhciBpPTA7aTxkYXRhLmRhdGEubGVuZ3RoO2krKyl7dXRpbHMudHJhdmVyc2VfcmVjb3JkcyhkYXRhLmRhdGFbaV0sZik7fX19LHVuYWNjZW50OmZ1bmN0aW9uKHN0cixjYXNlc2Vuc2V0aXZlKXtzdHI9c3RyLnJlcGxhY2UoL1teXHUwMDAwLVx1MDA3RV0vZyxmdW5jdGlvbihhY2NlbnRlZCl7cmV0dXJuIGRpYWNyaXRpY3NNYXBbYWNjZW50ZWRdfHxhY2NlbnRlZDt9KTtyZXR1cm4gY2FzZXNlbnNldGl2ZT9zdHI6c3RyLnRvTG93ZXJDYXNlKCk7fSx4bWxfdG9fanNvbjpmdW5jdGlvbihub2RlLHN0cmlwX3doaXRlc3BhY2Upe3N3aXRjaChub2RlLm5vZGVUeXBlKXtjYXNlIDk6cmV0dXJuIHV0aWxzLnhtbF90b19qc29uKG5vZGUuZG9jdW1lbnRFbGVtZW50LHN0cmlwX3doaXRlc3BhY2UpO2Nhc2UgMzpjYXNlIDQ6cmV0dXJuKHN0cmlwX3doaXRlc3BhY2UmJm5vZGUuZGF0YS50cmltKCk9PT0nJyk/dW5kZWZpbmVkOm5vZGUuZGF0YTtjYXNlIDE6dmFyIGF0dHJzPSQobm9kZSkuZ2V0QXR0cmlidXRlcygpO3JldHVybnt0YWc6bm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksYXR0cnM6YXR0cnMsY2hpbGRyZW46Xy5jb21wYWN0KF8ubWFwKG5vZGUuY2hpbGROb2RlcyxmdW5jdGlvbihub2RlKXtyZXR1cm4gdXRpbHMueG1sX3RvX2pzb24obm9kZSxzdHJpcF93aGl0ZXNwYWNlKTt9KSksfTt9fSx4bWxfdG9fc3RyOmZ1bmN0aW9uKG5vZGUpe3ZhciBzdHI9IiI7aWYod2luZG93LlhNTFNlcmlhbGl6ZXIpe3N0cj0obmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7fWVsc2UgaWYod2luZG93LkFjdGl2ZVhPYmplY3Qpe3N0cj1ub2RlLnhtbDt9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoX3QoIkNvdWxkIG5vdCBzZXJpYWxpemUgWE1MIikpO30KdmFyIHZvaWRfZWxlbWVudHM9J2FyZWEgYmFzZSBiciBjb2wgY29tbWFuZCBlbWJlZCBociBpbWcgaW5wdXQga2V5Z2VuIGxpbmsgbWV0YSBwYXJhbSBzb3VyY2UgdHJhY2sgd2JyJy5zcGxpdCgnICcpO3N0cj1zdHIucmVwbGFjZSgvPChbYS16XSspKFtePD5dKilccypcL1xzKj4vZyxmdW5jdGlvbihtYXRjaCx0YWcsYXR0cnMpe2lmKHZvaWRfZWxlbWVudHMuaW5kZXhPZih0YWcpPDApe3JldHVybiI8Iit0YWcrYXR0cnMrIj48LyIrdGFnKyI+Ijt9ZWxzZXtyZXR1cm4gbWF0Y2g7fX0pO3JldHVybiBzdHI7fSx0cmF2ZXJzZTpmdW5jdGlvbih0cmVlLGYpe2lmKGYodHJlZSkpe18uZWFjaCh0cmVlLmNoaWxkcmVuLGZ1bmN0aW9uKGMpe3V0aWxzLnRyYXZlcnNlKGMsZik7fSk7fX0sdHJhdmVyc2VQYXRoOmZ1bmN0aW9uKHRyZWUsZixwYXRoKXtwYXRoPXBhdGh8fFtdO2YodHJlZSxwYXRoKTtfLmVhY2godHJlZS5jaGlsZHJlbixmdW5jdGlvbihub2RlKXt1dGlscy50cmF2ZXJzZVBhdGgobm9kZSxmLHBhdGguY29uY2F0KHRyZWUpKTt9KTt9LGRlZXBGcmVlemU6ZnVuY3Rpb24ob2JqKXt2YXIgcHJvcE5hbWVzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaik7cHJvcE5hbWVzLmZvckVhY2goZnVuY3Rpb24obmFtZSl7dmFyIHByb3A9b2JqW25hbWVdO2lmKHR5cGVvZiBwcm9wPT0nb2JqZWN0JyYmcHJvcCE9PW51bGwpCnV0aWxzLmRlZXBGcmVlemUocHJvcCk7fSk7cmV0dXJuIE9iamVjdC5mcmVlemUob2JqKTt9LGNsb3Nlc3ROdW1iZXI6ZnVuY3Rpb24obnVtLGFycil7dmFyIGN1cnI9YXJyWzBdO3ZhciBkaWZmPU1hdGguYWJzKG51bS1jdXJyKTtmb3IodmFyIHZhbD0wO3ZhbDxhcnIubGVuZ3RoO3ZhbCsrKXt2YXIgbmV3ZGlmZj1NYXRoLmFicyhudW0tYXJyW3ZhbF0pO2lmKG5ld2RpZmY8ZGlmZil7ZGlmZj1uZXdkaWZmO2N1cnI9YXJyW3ZhbF07fX0KcmV0dXJuIGN1cnI7fSxhc3NldHNEb21haW46ZnVuY3Rpb24oKXtyZXR1cm5bJyYnLFsncmVzX21vZGVsJywnPScsJ2lyLnVpLnZpZXcnXSxbJ25hbWUnLCdsaWtlJywnYXNzZXRzXyddXTt9LH07cmV0dXJuIHV0aWxzO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9jb3JlL3dpZGdldC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuV2lkZ2V0JyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGFqYXg9cmVxdWlyZSgnd2ViLmFqYXgnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBtaXhpbnM9cmVxdWlyZSgnd2ViLm1peGlucycpO3ZhciBTZXJ2aWNlc01peGluPXJlcXVpcmUoJ3dlYi5TZXJ2aWNlc01peGluJyk7dmFyIFdpZGdldD1jb3JlLkNsYXNzLmV4dGVuZChtaXhpbnMuUHJvcGVydGllc01peGluLFNlcnZpY2VzTWl4aW4se3RhZ05hbWU6J2RpdicsaWQ6bnVsbCxjbGFzc05hbWU6bnVsbCxhdHRyaWJ1dGVzOnt9LGV2ZW50czp7fSx0ZW1wbGF0ZTpudWxsLHhtbERlcGVuZGVuY2llczpudWxsLGNzc0xpYnM6bnVsbCxqc0xpYnM6bnVsbCxhc3NldExpYnM6bnVsbCxpbml0OmZ1bmN0aW9uKHBhcmVudCl7bWl4aW5zLlByb3BlcnRpZXNNaXhpbi5pbml0LmNhbGwodGhpcyk7dGhpcy5zZXRQYXJlbnQocGFyZW50KTtmb3IodmFyIG5hbWUgaW4gdGhpcyl7aWYodHlwZW9mKHRoaXNbbmFtZV0pPT09ImZ1bmN0aW9uIil7aWYoKC9eb25ffF5kb18vKS50ZXN0KG5hbWUpKXt0aGlzW25hbWVdPXRoaXNbbmFtZV0uYmluZCh0aGlzKTt9fX19LHdpbGxTdGFydDpmdW5jdGlvbigpe3ZhciBwcm9tcz1bXTtpZih0aGlzLnhtbERlcGVuZGVuY2llcyl7cHJvbXMucHVzaC5hcHBseShwcm9tcyxfLm1hcCh0aGlzLnhtbERlcGVuZGVuY2llcyxmdW5jdGlvbih4bWxQYXRoKXtyZXR1cm4gYWpheC5sb2FkWE1MKHhtbFBhdGgsY29yZS5xd2ViKTt9KSk7fQppZih0aGlzLmpzTGlic3x8dGhpcy5jc3NMaWJzfHx0aGlzLmFzc2V0TGlicyl7cHJvbXMucHVzaChhamF4LmxvYWRMaWJzKHRoaXMpKTt9CnJldHVybiBQcm9taXNlLmFsbChwcm9tcyk7fSxzdGFydDpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttaXhpbnMuUHJvcGVydGllc01peGluLmRlc3Ryb3kuY2FsbCh0aGlzKTtpZih0aGlzLiRlbCl7dGhpcy4kZWwucmVtb3ZlKCk7fX0sYXBwZW5kVG86ZnVuY3Rpb24odGFyZ2V0KXt2YXIgc2VsZj10aGlzO3JldHVybiB0aGlzLl93aWRnZXRSZW5kZXJBbmRJbnNlcnQoZnVuY3Rpb24odCl7c2VsZi4kZWwuYXBwZW5kVG8odCk7fSx0YXJnZXQpO30sYXR0YWNoVG86ZnVuY3Rpb24odGFyZ2V0KXt2YXIgc2VsZj10aGlzO3RoaXMuc2V0RWxlbWVudCh0YXJnZXQuJGVsfHx0YXJnZXQpO3JldHVybiB0aGlzLndpbGxTdGFydCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gc2VsZi5zdGFydCgpO30pO30sZG9faGlkZTpmdW5jdGlvbigpe3RoaXMuJGVsLmFkZENsYXNzKCdvX2hpZGRlbicpO30sZG9fc2hvdzpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZUNsYXNzKCdvX2hpZGRlbicpO30sZG9fdG9nZ2xlOmZ1bmN0aW9uKGRpc3BsYXkpe2lmKF8uaXNCb29sZWFuKGRpc3BsYXkpKXtkaXNwbGF5P3RoaXMuZG9fc2hvdygpOnRoaXMuZG9faGlkZSgpO31lbHNle3RoaXMuJGVsLmhhc0NsYXNzKCdvX2hpZGRlbicpP3RoaXMuZG9fc2hvdygpOnRoaXMuZG9faGlkZSgpO319LGluc2VydEFmdGVyOmZ1bmN0aW9uKHRhcmdldCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy5fd2lkZ2V0UmVuZGVyQW5kSW5zZXJ0KGZ1bmN0aW9uKHQpe3NlbGYuJGVsLmluc2VydEFmdGVyKHQpO30sdGFyZ2V0KTt9LGluc2VydEJlZm9yZTpmdW5jdGlvbih0YXJnZXQpe3ZhciBzZWxmPXRoaXM7cmV0dXJuIHRoaXMuX3dpZGdldFJlbmRlckFuZEluc2VydChmdW5jdGlvbih0KXtzZWxmLiRlbC5pbnNlcnRCZWZvcmUodCk7fSx0YXJnZXQpO30scHJlcGVuZFRvOmZ1bmN0aW9uKHRhcmdldCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy5fd2lkZ2V0UmVuZGVyQW5kSW5zZXJ0KGZ1bmN0aW9uKHQpe3NlbGYuJGVsLnByZXBlbmRUbyh0KTt9LHRhcmdldCk7fSxyZW5kZXJFbGVtZW50OmZ1bmN0aW9uKCl7dmFyICRlbDtpZih0aGlzLnRlbXBsYXRlKXskZWw9JChjb3JlLnF3ZWIucmVuZGVyKHRoaXMudGVtcGxhdGUse3dpZGdldDp0aGlzfSkudHJpbSgpKTt9ZWxzZXskZWw9dGhpcy5fbWFrZURlc2NyaXB0aXZlKCk7fQp0aGlzLl9yZXBsYWNlRWxlbWVudCgkZWwpO30scmVwbGFjZTpmdW5jdGlvbih0YXJnZXQpe3JldHVybiB0aGlzLl93aWRnZXRSZW5kZXJBbmRJbnNlcnQoXy5iaW5kKGZ1bmN0aW9uKHQpe3RoaXMuJGVsLnJlcGxhY2VBbGwodCk7fSx0aGlzKSx0YXJnZXQpO30sc2V0RWxlbWVudDpmdW5jdGlvbihlbGVtZW50KXtpZih0aGlzLiRlbCl7dGhpcy5fdW5kZWxlZ2F0ZUV2ZW50cygpO30KdGhpcy4kZWw9KGVsZW1lbnQgaW5zdGFuY2VvZiAkKT9lbGVtZW50OiQoZWxlbWVudCk7dGhpcy5lbD10aGlzLiRlbFswXTt0aGlzLl9kZWxlZ2F0ZUV2ZW50cygpO3JldHVybiB0aGlzO30sJDpmdW5jdGlvbihzZWxlY3Rvcil7aWYoc2VsZWN0b3I9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLiRlbDt9CnJldHVybiB0aGlzLiRlbC5maW5kKHNlbGVjdG9yKTt9LF9kZWxlZ2F0ZUV2ZW50czpmdW5jdGlvbigpe3ZhciBldmVudHM9dGhpcy5ldmVudHM7aWYoXy5pc0VtcHR5KGV2ZW50cykpe3JldHVybjt9CmZvcih2YXIga2V5IGluIGV2ZW50cyl7aWYoIWV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtjb250aW51ZTt9CnZhciBtZXRob2Q9dGhpcy5wcm94eShldmVudHNba2V5XSk7dmFyIG1hdGNoPS9eKFxTKykoXHMrKC4qKSk/JC8uZXhlYyhrZXkpO3ZhciBldmVudD1tYXRjaFsxXTt2YXIgc2VsZWN0b3I9bWF0Y2hbM107ZXZlbnQrPScud2lkZ2V0X2V2ZW50cyc7aWYoIXNlbGVjdG9yKXt0aGlzLiRlbC5vbihldmVudCxtZXRob2QpO31lbHNle3RoaXMuJGVsLm9uKGV2ZW50LHNlbGVjdG9yLG1ldGhvZCk7fX19LF9tYWtlRGVzY3JpcHRpdmU6ZnVuY3Rpb24oKXt2YXIgYXR0cnM9Xy5leHRlbmQoe30sdGhpcy5hdHRyaWJ1dGVzfHx7fSk7aWYodGhpcy5pZCl7YXR0cnMuaWQ9dGhpcy5pZDt9CmlmKHRoaXMuY2xhc3NOYW1lKXthdHRyc1snY2xhc3MnXT10aGlzLmNsYXNzTmFtZTt9CnZhciAkZWw9JChkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnTmFtZSkpO2lmKCFfLmlzRW1wdHkoYXR0cnMpKXskZWwuYXR0cihhdHRycyk7fQpyZXR1cm4gJGVsO30sX3JlcGxhY2VFbGVtZW50OmZ1bmN0aW9uKCRlbCl7dmFyICRvbGRlbD10aGlzLiRlbDt0aGlzLnNldEVsZW1lbnQoJGVsKTtpZigkb2xkZWwmJiEkb2xkZWwuaXModGhpcy4kZWwpKXtpZigkb2xkZWwubGVuZ3RoPjEpeyRvbGRlbC53cmFwQWxsKCc8ZGl2Lz4nKTskb2xkZWwucGFyZW50KCkucmVwbGFjZVdpdGgodGhpcy4kZWwpO31lbHNleyRvbGRlbC5yZXBsYWNlV2l0aCh0aGlzLiRlbCk7fX0KcmV0dXJuIHRoaXM7fSxfdW5kZWxlZ2F0ZUV2ZW50czpmdW5jdGlvbigpe3RoaXMuJGVsLm9mZignLndpZGdldF9ldmVudHMnKTt9LF93aWRnZXRSZW5kZXJBbmRJbnNlcnQ6ZnVuY3Rpb24oaW5zZXJ0aW9uLHRhcmdldCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gdGhpcy53aWxsU3RhcnQoKS50aGVuKGZ1bmN0aW9uKCl7aWYoc2VsZi5fX3BhcmVudGVkRGVzdHJveWVkKXtyZXR1cm47fQpzZWxmLnJlbmRlckVsZW1lbnQoKTtpbnNlcnRpb24odGFyZ2V0KTtyZXR1cm4gc2VsZi5zdGFydCgpO30pO30sfSk7cmV0dXJuIFdpZGdldDt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvYWpheF9zZXJ2aWNlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5BamF4U2VydmljZScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBBYnN0cmFjdFNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U2VydmljZScpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIHNlc3Npb249cmVxdWlyZSgnd2ViLnNlc3Npb24nKTt2YXIgQWpheFNlcnZpY2U9QWJzdHJhY3RTZXJ2aWNlLmV4dGVuZCh7cnBjOmZ1bmN0aW9uKHJvdXRlLGFyZ3Msb3B0aW9ucyx0YXJnZXQpe3ZhciBycGNQcm9taXNlO3ZhciBwcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtycGNQcm9taXNlPXNlc3Npb24ucnBjKHJvdXRlLGFyZ3Msb3B0aW9ucyk7cnBjUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7aWYoIXRhcmdldC5pc0Rlc3Ryb3llZCgpKXtyZXNvbHZlKHJlc3VsdCk7fX0pLmd1YXJkZWRDYXRjaChmdW5jdGlvbihyZWFzb24pe2lmKCF0YXJnZXQuaXNEZXN0cm95ZWQoKSl7cmVqZWN0KHJlYXNvbik7fX0pO30pO3Byb21pc2UuYWJvcnQ9cnBjUHJvbWlzZS5hYm9ydC5iaW5kKHJwY1Byb21pc2UpO3JldHVybiBwcm9taXNlO30sfSk7Y29yZS5zZXJ2aWNlUmVnaXN0cnkuYWRkKCdhamF4JyxBamF4U2VydmljZSk7cmV0dXJuIEFqYXhTZXJ2aWNlO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9zZXJ2aWNlcy9jb25maWcuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLmNvbmZpZycsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGNvbmZpZz17ZGV2aWNlOnt0b3VjaDonb250b3VjaHN0YXJ0J2luIHdpbmRvd3x8J29ubXNnZXN0dXJlY2hhbmdlJ2luIHdpbmRvdyxzaXplX2NsYXNzOm51bGwsaXNNb2JpbGU6bnVsbCxTSVpFUzp7WFM6MCxWU006MSxTTToyLE1EOjMsTEc6NCxYTDo1LFhYTDo2fSx9LGlzRGVidWc6ZnVuY3Rpb24oZGVidWdNb2RlKXtpZihkZWJ1Z01vZGUpe3JldHVybiBvZG9vLmRlYnVnJiZvZG9vLmRlYnVnLmluZGV4T2YoZGVidWdNb2RlKSE9PS0xO30KcmV0dXJuIG9kb28uZGVidWc7fSx9O3ZhciBtZWRpYXM9W3dpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0NzRweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNDc1cHgpIGFuZCAobWF4LXdpZHRoOiA1NzVweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNTc2cHgpIGFuZCAobWF4LXdpZHRoOiA3NjdweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiA5OTFweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogOTkycHgpIGFuZCAobWF4LXdpZHRoOiAxMTk5cHgpJyksd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEyMDBweCkgYW5kIChtYXgtd2lkdGg6IDE1MzNweCknKSx3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTUzNHB4KScpLF07ZnVuY3Rpb24gX2dldFNpemVDbGFzcygpe2Zvcih2YXIgaT0wO2k8bWVkaWFzLmxlbmd0aDtpKyspe2lmKG1lZGlhc1tpXS5tYXRjaGVzKXtyZXR1cm4gaTt9fX0KZnVuY3Rpb24gX3VwZGF0ZVNpemVQcm9wcygpe3ZhciBzYz1fZ2V0U2l6ZUNsYXNzKCk7aWYoc2MhPT1jb25maWcuZGV2aWNlLnNpemVfY2xhc3Mpe2NvbmZpZy5kZXZpY2Uuc2l6ZV9jbGFzcz1zYztjb25maWcuZGV2aWNlLmlzTW9iaWxlPWNvbmZpZy5kZXZpY2Uuc2l6ZV9jbGFzczw9Y29uZmlnLmRldmljZS5TSVpFUy5TTTt9fQpfLmludm9rZShtZWRpYXMsJ2FkZExpc3RlbmVyJyxfdXBkYXRlU2l6ZVByb3BzKTtfdXBkYXRlU2l6ZVByb3BzKCk7cmV0dXJuIGNvbmZpZzt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvY29yZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuY29yZScsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBCdXM9cmVxdWlyZSgnd2ViLkJ1cycpO3ZhciBjb25maWc9cmVxdWlyZSgnd2ViLmNvbmZpZycpO3ZhciBDbGFzcz1yZXF1aXJlKCd3ZWIuQ2xhc3MnKTt2YXIgUVdlYj1yZXF1aXJlKCd3ZWIuUVdlYicpO3ZhciBSZWdpc3RyeT1yZXF1aXJlKCd3ZWIuUmVnaXN0cnknKTt2YXIgdHJhbnNsYXRpb249cmVxdWlyZSgnd2ViLnRyYW5zbGF0aW9uJyk7dmFyIGJ1cz1uZXcgQnVzKCk7Xy5lYWNoKCdjbGljayxkYmxjbGljayxrZXlkb3duLGtleXByZXNzLGtleXVwJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKGV2dHlwZSl7JCgnaHRtbCcpLm9uKGV2dHlwZSxmdW5jdGlvbihldil7YnVzLnRyaWdnZXIoZXZ0eXBlLGV2KTt9KTt9KTtfLmVhY2goJ3Jlc2l6ZSxzY3JvbGwnLnNwbGl0KCcsJyksZnVuY3Rpb24oZXZ0eXBlKXskKHdpbmRvdykub24oZXZ0eXBlLGZ1bmN0aW9uKGV2KXtidXMudHJpZ2dlcihldnR5cGUsZXYpO30pO30pO3JldHVybntxd2ViOm5ldyBRV2ViKGNvbmZpZy5pc0RlYnVnKCkpLENsYXNzOkNsYXNzLGJ1czpidXMsbWFpbl9idXM6bmV3IEJ1cygpLF90OnRyYW5zbGF0aW9uLl90LF9sdDp0cmFuc2xhdGlvbi5fbHQsYWN0aW9uX3JlZ2lzdHJ5Om5ldyBSZWdpc3RyeSgpLGNyYXNoX3JlZ2lzdHJ5Om5ldyBSZWdpc3RyeSgpLHNlcnZpY2VSZWdpc3RyeTpuZXcgUmVnaXN0cnkoKSxjc3JmX3Rva2VuOm9kb28uY3NyZl90b2tlbix9O30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9zZXJ2aWNlcy9sb2NhbF9zdG9yYWdlX3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLkxvY2FsU3RvcmFnZVNlcnZpY2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgQWJzdHJhY3RTdG9yYWdlU2VydmljZT1yZXF1aXJlKCd3ZWIuQWJzdHJhY3RTdG9yYWdlU2VydmljZScpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIGxvY2FsU3RvcmFnZT1yZXF1aXJlKCd3ZWIubG9jYWxfc3RvcmFnZScpO3ZhciBMb2NhbFN0b3JhZ2VTZXJ2aWNlPUFic3RyYWN0U3RvcmFnZVNlcnZpY2UuZXh0ZW5kKHtzdG9yYWdlOmxvY2FsU3RvcmFnZSx9KTtjb3JlLnNlcnZpY2VSZWdpc3RyeS5hZGQoJ2xvY2FsX3N0b3JhZ2UnLExvY2FsU3RvcmFnZVNlcnZpY2UpO3JldHVybiBMb2NhbFN0b3JhZ2VTZXJ2aWNlO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy9zZXJ2aWNlcy9ub3RpZmljYXRpb25fc2VydmljZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuTm90aWZpY2F0aW9uU2VydmljZScsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBBYnN0cmFjdFNlcnZpY2U9cmVxdWlyZSgnd2ViLkFic3RyYWN0U2VydmljZScpO3ZhciBOb3RpZmljYXRpb249cmVxdWlyZSgnd2ViLk5vdGlmaWNhdGlvbicpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIGlkPTA7dmFyIE5vdGlmaWNhdGlvblNlcnZpY2U9QWJzdHJhY3RTZXJ2aWNlLmV4dGVuZCh7Y3VzdG9tX2V2ZW50czp7Y2xvc2U6J19vbkNsb3NlTm90aWZpY2F0aW9uJyx9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubm90aWZpY2F0aW9ucz17fTt9LGNsb3NlOmZ1bmN0aW9uKG5vdGlmaWNhdGlvbklkLHNpbGVudCl7dmFyIG5vdGlmaWNhdGlvbj10aGlzLm5vdGlmaWNhdGlvbnNbbm90aWZpY2F0aW9uSWRdO2lmKCFub3RpZmljYXRpb24pe3JldHVybjt9Cm5vdGlmaWNhdGlvbi5jbG9zZShzaWxlbnQpO30sbm90aWZ5OmZ1bmN0aW9uKHBhcmFtcyl7aWYoIXRoaXMuJGVsKXt0aGlzLiRlbD0kKCc8ZGl2IGNsYXNzPSJvX25vdGlmaWNhdGlvbl9tYW5hZ2VyIi8+Jyk7dGhpcy4kZWwucHJlcGVuZFRvKCdib2R5Jyk7fQp2YXIgTm90aWZpY2F0aW9uV2lkZ2V0PXBhcmFtcy5Ob3RpZmljYXRpb258fE5vdGlmaWNhdGlvbjt2YXIgbm90aWZpY2F0aW9uPXRoaXMubm90aWZpY2F0aW9uc1srK2lkXT1uZXcgTm90aWZpY2F0aW9uV2lkZ2V0KHRoaXMscGFyYW1zKTtub3RpZmljYXRpb24uYXBwZW5kVG8odGhpcy4kZWwpO3JldHVybiBpZDt9LF9vbkNsb3NlTm90aWZpY2F0aW9uOmZ1bmN0aW9uKGV2KXtldi5zdG9wUHJvcGFnYXRpb24oKTtmb3IodmFyIG5vdGlmaWNhdGlvbklkIGluIHRoaXMubm90aWZpY2F0aW9ucyl7aWYodGhpcy5ub3RpZmljYXRpb25zW25vdGlmaWNhdGlvbklkXT09PWV2LnRhcmdldCl7ZGVsZXRlIHRoaXMubm90aWZpY2F0aW9uc1tub3RpZmljYXRpb25JZF07YnJlYWs7fX19LH0pO2NvcmUuc2VydmljZVJlZ2lzdHJ5LmFkZCgnbm90aWZpY2F0aW9uJyxOb3RpZmljYXRpb25TZXJ2aWNlKTtyZXR1cm4gTm90aWZpY2F0aW9uU2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvc2VydmljZXMvY3Jhc2hfbWFuYWdlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuQ3Jhc2hNYW5hZ2VyJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7Y29uc3QgQWJzdHJhY3RTZXJ2aWNlPXJlcXVpcmUoJ3dlYi5BYnN0cmFjdFNlcnZpY2UnKTt2YXIgYWpheD1yZXF1aXJlKCd3ZWIuYWpheCcpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIERpYWxvZz1yZXF1aXJlKCd3ZWIuRGlhbG9nJyk7dmFyIFdpZGdldD1yZXF1aXJlKCd3ZWIuV2lkZ2V0Jyk7dmFyIF90PWNvcmUuX3Q7dmFyIF9sdD1jb3JlLl9sdDt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJyxldj0+Y29yZS5idXMudHJpZ2dlcignY3Jhc2hfbWFuYWdlcl91bmhhbmRsZWRyZWplY3Rpb24nLGV2KSk7bGV0IGFjdGl2ZT10cnVlO3ZhciBDcmFzaE1hbmFnZXJEaWFsb2c9RGlhbG9nLmV4dGVuZCh7eG1sRGVwZW5kZW5jaWVzOihEaWFsb2cucHJvdG90eXBlLnhtbERlcGVuZGVuY2llc3x8W10pLmNvbmNhdChbJy93ZWIvc3RhdGljL3NyYy94bWwvY3Jhc2hfbWFuYWdlci54bWwnXSksaW5pdDpmdW5jdGlvbihwYXJlbnQsb3B0aW9ucyxlcnJvcil7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxbcGFyZW50LG9wdGlvbnNdKTt0aGlzLm1lc3NhZ2U9ZXJyb3IubWVzc2FnZTt0aGlzLnRyYWNlYmFjaz1lcnJvci50cmFjZWJhY2s7fSx9KTt2YXIgRXJyb3JEaWFsb2c9Q3Jhc2hNYW5hZ2VyRGlhbG9nLmV4dGVuZCh7dGVtcGxhdGU6J0NyYXNoTWFuYWdlci5lcnJvcicsfSk7dmFyIFdhcm5pbmdEaWFsb2c9Q3Jhc2hNYW5hZ2VyRGlhbG9nLmV4dGVuZCh7dGVtcGxhdGU6J0NyYXNoTWFuYWdlci53YXJuaW5nJyxpbml0OmZ1bmN0aW9uKHBhcmVudCxvcHRpb25zLGVycm9yKXt0aGlzLl9zdXBlcihwYXJlbnQsXy5leHRlbmQoe3NpemU6J21lZGl1bScsfSxvcHRpb25zKSxlcnJvcik7fSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoe3Nob3VsZEZvY3VzQnV0dG9uczp0cnVlfSk7fSx9KTt2YXIgQ3Jhc2hNYW5hZ2VyPUFic3RyYWN0U2VydmljZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO2FjdGl2ZT10cnVlO3RoaXMuaXNDb25uZWN0ZWQ9dHJ1ZTt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Y29yZS5idXMub24oJ3JwY19lcnJvcicsdGhpcyx0aGlzLnJwY19lcnJvcik7d2luZG93Lm9uZXJyb3I9ZnVuY3Rpb24obWVzc2FnZSxmaWxlLGxpbmUsY29sLGVycm9yKXtpZighZmlsZSYmIWxpbmUmJiFjb2wpe2lmKHdpbmRvdy5vbk9yaWdpbkVycm9yKXt3aW5kb3cub25PcmlnaW5FcnJvcigpO2RlbGV0ZSB3aW5kb3cub25PcmlnaW5FcnJvcjt9ZWxzZXtzZWxmLnNob3dfZXJyb3Ioe3R5cGU6X3QoIk9kb28gQ2xpZW50IEVycm9yIiksbWVzc2FnZTpfdCgiVW5rbm93biBDT1JTIGVycm9yIiksZGF0YTp7ZGVidWc6X3QoIkFuIHVua25vd24gQ09SUyBlcnJvciBvY2N1cmVkLiBUaGUgZXJyb3IgcHJvYmFibHkgb3JpZ2luYXRlcyBmcm9tIGEgSmF2YVNjcmlwdCBmaWxlIHNlcnZlZCBmcm9tIGEgZGlmZmVyZW50IG9yaWdpbi4gKE9wZW5pbmcgeW91ciBicm93c2VyIGNvbnNvbGUgbWlnaHQgZ2l2ZSB5b3UgYSBoaW50IG9uIHRoZSBlcnJvci4pIil9LH0pO319ZWxzZXtpZighZXJyb3ImJm1lc3NhZ2U9PT0nUmVzaXplT2JzZXJ2ZXIgbG9vcCBsaW1pdCBleGNlZWRlZCcpe3JldHVybjt9CnZhciB0cmFjZWJhY2s9ZXJyb3I/ZXJyb3Iuc3RhY2s6Jyc7c2VsZi5zaG93X2Vycm9yKHt0eXBlOl90KCJPZG9vIENsaWVudCBFcnJvciIpLG1lc3NhZ2U6bWVzc2FnZSxkYXRhOntkZWJ1ZzpmaWxlKyc6JytsaW5lKyJcbiIrX3QoJ1RyYWNlYmFjazonKSsiXG4iK3RyYWNlYmFja30sfSk7fX07Y29yZS5idXMub24oJ2NyYXNoX21hbmFnZXJfdW5oYW5kbGVkcmVqZWN0aW9uJyx0aGlzLGZ1bmN0aW9uKGV2KXtpZihldi5yZWFzb24mJmV2LnJlYXNvbiBpbnN0YW5jZW9mIEVycm9yKXt2YXIgdHJhY2ViYWNrPWV2LnJlYXNvbi5zdGFjaztzZWxmLnNob3dfZXJyb3Ioe3R5cGU6X3QoIk9kb28gQ2xpZW50IEVycm9yIiksbWVzc2FnZTonJyxkYXRhOntkZWJ1ZzpfdCgnVHJhY2ViYWNrOicpKyJcbiIrdHJhY2ViYWNrfSx9KTt9ZWxzZXtldi5zdG9wUHJvcGFnYXRpb24oKTtldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtldi5wcmV2ZW50RGVmYXVsdCgpO319KTt9LGVuYWJsZTpmdW5jdGlvbigpe2FjdGl2ZT10cnVlO30sZGlzYWJsZTpmdW5jdGlvbigpe2FjdGl2ZT1mYWxzZTt9LGhhbmRsZUxvc3RDb25uZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztpZighdGhpcy5pc0Nvbm5lY3RlZCl7cmV0dXJuO30KdGhpcy5pc0Nvbm5lY3RlZD1mYWxzZTt2YXIgZGVsYXk9MjAwMDtjb3JlLmJ1cy50cmlnZ2VyKCdjb25uZWN0aW9uX2xvc3QnKTtzZXRUaW1lb3V0KGZ1bmN0aW9uIGNoZWNrQ29ubmVjdGlvbigpe2FqYXguanNvblJwYygnL3dlYi93ZWJjbGllbnQvdmVyc2lvbl9pbmZvJywnY2FsbCcse30se3NoYWRvdzp0cnVlfSkudGhlbihmdW5jdGlvbigpe2NvcmUuYnVzLnRyaWdnZXIoJ2Nvbm5lY3Rpb25fcmVzdG9yZWQnKTtzZWxmLmlzQ29ubmVjdGVkPXRydWU7fSkuZ3VhcmRlZENhdGNoKGZ1bmN0aW9uKCl7ZGVsYXk9KGRlbGF5KjEuNSkrNTAwKk1hdGgucmFuZG9tKCk7c2V0VGltZW91dChjaGVja0Nvbm5lY3Rpb24sZGVsYXkpO30pO30sZGVsYXkpO30scnBjX2Vycm9yOmZ1bmN0aW9uKGVycm9yKXtpZighZG9jdW1lbnQuYm9keSl7cmV0dXJuO30KdmFyIG1hcF90aXRsZT17YWNjZXNzX2RlbmllZDpfbHQoIkFjY2VzcyBEZW5pZWQiKSxhY2Nlc3NfZXJyb3I6X2x0KCJBY2Nlc3MgRXJyb3IiKSxleGNlcHRfb3JtOl9sdCgiR2xvYmFsIEJ1c2luZXNzIEVycm9yIiksbWlzc2luZ19lcnJvcjpfbHQoIk1pc3NpbmcgUmVjb3JkIiksdXNlcl9lcnJvcjpfbHQoIlVzZXIgRXJyb3IiKSx2YWxpZGF0aW9uX2Vycm9yOl9sdCgiVmFsaWRhdGlvbiBFcnJvciIpLHdhcm5pbmc6X2x0KCJXYXJuaW5nIiksfTtpZighYWN0aXZlKXtyZXR1cm47fQppZih0aGlzLmNvbm5lY3Rpb25fbG9zdCl7cmV0dXJuO30KaWYoZXJyb3IuY29kZT09PS0zMjA5OCl7dGhpcy5oYW5kbGVMb3N0Q29ubmVjdGlvbigpO3JldHVybjt9CnZhciBoYW5kbGVyPWNvcmUuY3Jhc2hfcmVnaXN0cnkuZ2V0KGVycm9yLmRhdGEubmFtZSx0cnVlKTtpZihoYW5kbGVyKXtuZXcoaGFuZGxlcikodGhpcyxlcnJvcikuZGlzcGxheSgpO3JldHVybjt9CmlmKF8uaGFzKG1hcF90aXRsZSxlcnJvci5kYXRhLmV4Y2VwdGlvbl90eXBlKSl7aWYoZXJyb3IuZGF0YS5leGNlcHRpb25fdHlwZT09PSdleGNlcHRfb3JtJyl7aWYoZXJyb3IuZGF0YS5hcmd1bWVudHNbMV0pe2Vycm9yPV8uZXh0ZW5kKHt9LGVycm9yLHtkYXRhOl8uZXh0ZW5kKHt9LGVycm9yLmRhdGEse21lc3NhZ2U6ZXJyb3IuZGF0YS5hcmd1bWVudHNbMV0sdGl0bGU6ZXJyb3IuZGF0YS5hcmd1bWVudHNbMF0hPT0nV2FybmluZyc/ZXJyb3IuZGF0YS5hcmd1bWVudHNbMF06JycsfSl9KTt9CmVsc2V7ZXJyb3I9Xy5leHRlbmQoe30sZXJyb3Ise2RhdGE6Xy5leHRlbmQoe30sZXJyb3IuZGF0YSx7bWVzc2FnZTplcnJvci5kYXRhLmFyZ3VtZW50c1swXSx0aXRsZTonJyx9KX0pO319CmVsc2V7ZXJyb3I9Xy5leHRlbmQoe30sZXJyb3Ise2RhdGE6Xy5leHRlbmQoe30sZXJyb3IuZGF0YSx7bWVzc2FnZTplcnJvci5kYXRhLmFyZ3VtZW50c1swXSx0aXRsZTptYXBfdGl0bGVbZXJyb3IuZGF0YS5leGNlcHRpb25fdHlwZV0hPT0nV2FybmluZyc/bWFwX3RpdGxlW2Vycm9yLmRhdGEuZXhjZXB0aW9uX3R5cGVdOicnLH0pfSk7fQp0aGlzLnNob3dfd2FybmluZyhlcnJvcik7fWVsc2V7dGhpcy5zaG93X2Vycm9yKGVycm9yKTt9fSxzaG93X3dhcm5pbmc6ZnVuY3Rpb24oZXJyb3Isb3B0aW9ucyl7aWYoIWFjdGl2ZSl7cmV0dXJuO30KdmFyIG1lc3NhZ2U9ZXJyb3IuZGF0YT9lcnJvci5kYXRhLm1lc3NhZ2U6ZXJyb3IubWVzc2FnZTt2YXIgdGl0bGU9Xy5zdHIuY2FwaXRhbGl6ZShlcnJvci50eXBlKXx8X3QoIlNvbWV0aGluZyB3ZW50IHdyb25nICEiKTtyZXR1cm4gdGhpcy5fZGlzcGxheVdhcm5pbmcobWVzc2FnZSx0aXRsZSxvcHRpb25zKTt9LHNob3dfZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe2lmKCFhY3RpdmUpe3JldHVybjt9CnZhciBkaWFsb2c9bmV3IEVycm9yRGlhbG9nKHRoaXMse3RpdGxlOl8uc3RyLmNhcGl0YWxpemUoZXJyb3IudHlwZSl8fF90KCJPZG9vIEVycm9yIiksfSx7bWVzc2FnZTplcnJvci5tZXNzYWdlLHRyYWNlYmFjazplcnJvci5kYXRhLmRlYnVnLH0pO3ZhciAkY2xpcGJvYXJkQnRuO3ZhciBjbGlwYm9hcmQ7ZGlhbG9nLm9wZW5lZChmdW5jdGlvbigpe2RpYWxvZy4kKCIub19lcnJvcl9kZXRhaWwiKS5vbigic2hvd24uYnMuY29sbGFwc2UiLGZ1bmN0aW9uKGUpe2UudGFyZ2V0LnNjcm9sbFRvcD1lLnRhcmdldC5zY3JvbGxIZWlnaHQ7fSk7JGNsaXBib2FyZEJ0bj1kaWFsb2cuJCgiLm9fY2xpcGJvYXJkX2J1dHRvbiIpOyRjbGlwYm9hcmRCdG4udG9vbHRpcCh7dGl0bGU6X3QoIkNvcGllZCAhIiksdHJpZ2dlcjoibWFudWFsIixwbGFjZW1lbnQ6ImxlZnQifSk7Y2xpcGJvYXJkPW5ldyB3aW5kb3cuQ2xpcGJvYXJkSlMoJGNsaXBib2FyZEJ0blswXSx7dGV4dDpmdW5jdGlvbigpe3JldHVybihfdCgiRXJyb3IiKSsiOlxuIitlcnJvci5tZXNzYWdlKyJcblxuIitlcnJvci5kYXRhLmRlYnVnKS50cmltKCk7fSxjb250YWluZXI6ZGlhbG9nLmVsLH0pO2NsaXBib2FyZC5vbigic3VjY2VzcyIsZnVuY3Rpb24oZSl7Xy5kZWZlcihmdW5jdGlvbigpeyRjbGlwYm9hcmRCdG4udG9vbHRpcCgic2hvdyIpO18uZGVsYXkoZnVuY3Rpb24oKXskY2xpcGJvYXJkQnRuLnRvb2x0aXAoImhpZGUiKTt9LDgwMCk7fSk7fSk7fSk7ZGlhbG9nLm9uKCJjbG9zZWQiLHRoaXMsZnVuY3Rpb24oKXskY2xpcGJvYXJkQnRuLnRvb2x0aXAoJ2Rpc3Bvc2UnKTtjbGlwYm9hcmQuZGVzdHJveSgpO30pO3JldHVybiBkaWFsb2cub3BlbigpO30sc2hvd19tZXNzYWdlOmZ1bmN0aW9uKGV4Y2VwdGlvbil7cmV0dXJuIHRoaXMuc2hvd19lcnJvcih7dHlwZTpfdCgiT2RvbyBDbGllbnQgRXJyb3IiKSxtZXNzYWdlOmV4Y2VwdGlvbixkYXRhOntkZWJ1ZzoiIn19KTt9LF9kaXNwbGF5V2FybmluZzpmdW5jdGlvbihtZXNzYWdlLHRpdGxlLG9wdGlvbnMpe3JldHVybiBuZXcgV2FybmluZ0RpYWxvZyh0aGlzLE9iamVjdC5hc3NpZ24oe30sb3B0aW9ucyx7dGl0bGUsfSkse21lc3NhZ2UsfSkub3BlbigpO30sfSk7dmFyIEV4Y2VwdGlvbkhhbmRsZXI9e2luaXQ6ZnVuY3Rpb24ocGFyZW50LGVycm9yKXt9LGRpc3BsYXk6ZnVuY3Rpb24oKXt9LH07dmFyIFJlZGlyZWN0V2FybmluZ0hhbmRsZXI9V2lkZ2V0LmV4dGVuZChFeGNlcHRpb25IYW5kbGVyLHtpbml0OmZ1bmN0aW9uKHBhcmVudCxlcnJvcil7dGhpcy5fc3VwZXIocGFyZW50KTt0aGlzLmVycm9yPWVycm9yO30sZGlzcGxheTpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGVycm9yPXRoaXMuZXJyb3I7bmV3IFdhcm5pbmdEaWFsb2codGhpcyx7dGl0bGU6Xy5zdHIuY2FwaXRhbGl6ZShlcnJvci50eXBlKXx8X3QoIk9kb28gV2FybmluZyIpLGJ1dHRvbnM6W3t0ZXh0OmVycm9yLmRhdGEuYXJndW1lbnRzWzJdLGNsYXNzZXM6ImJ0bi1wcmltYXJ5IixjbGljazpmdW5jdGlvbigpeyQuYmJxLnB1c2hTdGF0ZSh7J2FjdGlvbic6ZXJyb3IuZGF0YS5hcmd1bWVudHNbMV0sJ2NpZHMnOiQuYmJxLmdldFN0YXRlKCkuY2lkcyx9LDIpO3NlbGYuZGVzdHJveSgpO2xvY2F0aW9uLnJlbG9hZCgpO319LHt0ZXh0Ol90KCJDYW5jZWwiKSxjbGljazpmdW5jdGlvbigpe3NlbGYuZGVzdHJveSgpO30sY2xvc2U6dHJ1ZX1dfSx7bWVzc2FnZTplcnJvci5kYXRhLmFyZ3VtZW50c1swXSx9KS5vcGVuKCk7fX0pO2NvcmUuY3Jhc2hfcmVnaXN0cnkuYWRkKCdvZG9vLmV4Y2VwdGlvbnMuUmVkaXJlY3RXYXJuaW5nJyxSZWRpcmVjdFdhcm5pbmdIYW5kbGVyKTtmdW5jdGlvbiBzZXNzaW9uX2V4cGlyZWQoY20pe3JldHVybntkaXNwbGF5OmZ1bmN0aW9uKCl7Y20uc2hvd193YXJuaW5nKHt0eXBlOl90KCJPZG9vIFNlc3Npb24gRXhwaXJlZCIpLG1lc3NhZ2U6X3QoIllvdXIgT2RvbyBzZXNzaW9uIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBjdXJyZW50IHdlYiBwYWdlLiIpfSk7fX07fQpjb3JlLmNyYXNoX3JlZ2lzdHJ5LmFkZCgnb2Rvby5odHRwLlNlc3Npb25FeHBpcmVkRXhjZXB0aW9uJyxzZXNzaW9uX2V4cGlyZWQpO2NvcmUuY3Jhc2hfcmVnaXN0cnkuYWRkKCd3ZXJremV1Zy5leGNlcHRpb25zLkZvcmJpZGRlbicsc2Vzc2lvbl9leHBpcmVkKTtjb3JlLmNyYXNoX3JlZ2lzdHJ5LmFkZCgnNTA0JyxmdW5jdGlvbihjbSl7cmV0dXJue2Rpc3BsYXk6ZnVuY3Rpb24oKXtjbS5zaG93X3dhcm5pbmcoe3R5cGU6X3QoIlJlcXVlc3QgdGltZW91dCIpLG1lc3NhZ2U6X3QoIlRoZSBvcGVyYXRpb24gd2FzIGludGVycnVwdGVkLiBUaGlzIHVzdWFsbHkgbWVhbnMgdGhhdCB0aGUgY3VycmVudCBvcGVyYXRpb24gaXMgdGFraW5nIHRvbyBtdWNoIHRpbWUuIil9KTt9fTt9KTtyZXR1cm57Q3Jhc2hNYW5hZ2VyOkNyYXNoTWFuYWdlcixFcnJvckRpYWxvZzpFcnJvckRpYWxvZyxXYXJuaW5nRGlhbG9nOldhcm5pbmdEaWFsb2csZGlzYWJsZTooKT0+YWN0aXZlPWZhbHNlLH07fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3NlcnZpY2VzL3Nlc3Npb25fc3RvcmFnZV9zZXJ2aWNlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5TZXNzaW9uU3RvcmFnZVNlcnZpY2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgQWJzdHJhY3RTdG9yYWdlU2VydmljZT1yZXF1aXJlKCd3ZWIuQWJzdHJhY3RTdG9yYWdlU2VydmljZScpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIHNlc3Npb25TdG9yYWdlPXJlcXVpcmUoJ3dlYi5zZXNzaW9uU3RvcmFnZScpO3ZhciBTZXNzaW9uU3RvcmFnZVNlcnZpY2U9QWJzdHJhY3RTdG9yYWdlU2VydmljZS5leHRlbmQoe3N0b3JhZ2U6c2Vzc2lvblN0b3JhZ2UsfSk7Y29yZS5zZXJ2aWNlUmVnaXN0cnkuYWRkKCdzZXNzaW9uX3N0b3JhZ2UnLFNlc3Npb25TdG9yYWdlU2VydmljZSk7cmV0dXJuIFNlc3Npb25TdG9yYWdlU2VydmljZTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvdG9vbHMvZGVidWdfbWFuYWdlci5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuRGVidWdNYW5hZ2VyJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgc2Vzc2lvbj1yZXF1aXJlKCd3ZWIuc2Vzc2lvbicpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgUVdlYj1jb3JlLnF3ZWI7dmFyIERlYnVnTWFuYWdlcj1XaWRnZXQuZXh0ZW5kKHt0ZW1wbGF0ZToiV2ViQ2xpZW50LkRlYnVnTWFuYWdlciIseG1sRGVwZW5kZW5jaWVzOlsnL3dlYi9zdGF0aWMvc3JjL3htbC9kZWJ1Zy54bWwnXSxldmVudHM6eyJjbGljayBhW2RhdGEtYWN0aW9uXSI6InBlcmZvcm1fY2FsbGJhY2siLH0saW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9ldmVudHM9bnVsbDt2YXIgZGVidWc9b2Rvby5kZWJ1Zzt0aGlzLmRlYnVnX21vZGU9ZGVidWc7dGhpcy5kZWJ1Z19tb2RlX2hlbHA9ZGVidWcmJmRlYnVnIT09JzEnPycgKCcrZGVidWcrJyknOicnO30sc3RhcnQ6ZnVuY3Rpb24oKXtjb3JlLmJ1cy5vbigncnBjOnJlc3VsdCcsdGhpcyxmdW5jdGlvbihyZXEscmVzcCl7dGhpcy5fZGVidWdfZXZlbnRzKHJlc3AuZGVidWcpO30pO3RoaXMuJGRyb3Bkb3duPXRoaXMuJCgiLm9fZGVidWdfZHJvcGRvd24iKTt0aGlzLl9pc19hZG1pbj1zZXNzaW9uLmlzX3N5c3RlbTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N1cGVyKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGUoKTt9LmJpbmQodGhpcykpO30scGVyZm9ybV9jYWxsYmFjazpmdW5jdGlvbihldnQpe2V2dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBwYXJhbXM9JChldnQudGFyZ2V0KS5kYXRhKCk7dmFyIGNhbGxiYWNrPXBhcmFtcy5hY3Rpb247aWYoY2FsbGJhY2smJnRoaXNbY2FsbGJhY2tdKXt0aGlzW2NhbGxiYWNrXShwYXJhbXMsZXZ0KTt9ZWxzZXtjb25zb2xlLndhcm4oIk5vIGhhbmRsZXIgZm9yICIsY2FsbGJhY2spO319LF9kZWJ1Z19ldmVudHM6ZnVuY3Rpb24oZXZlbnRzKXtpZighdGhpcy5fZXZlbnRzKXtyZXR1cm47fQppZihldmVudHMmJmV2ZW50cy5sZW5ndGgpe3RoaXMuX2V2ZW50cy5wdXNoKGV2ZW50cyk7fQp0aGlzLnRyaWdnZXIoJ3VwZGF0ZS1zdGF0cycsdGhpcy5fZXZlbnRzKTt9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuJGRyb3Bkb3duLmVtcHR5KCkuYXBwZW5kKFFXZWIucmVuZGVyKCdXZWJDbGllbnQuRGVidWdNYW5hZ2VyLkdsb2JhbCcse21hbmFnZXI6dGhpcyx9KSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30sc3BsaXRfYXNzZXRzOmZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uPSQucGFyYW0ucXVlcnlzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYsJ2RlYnVnPWFzc2V0cycpO30sdGVzdHNfYXNzZXRzOmZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uPSQucGFyYW0ucXVlcnlzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYsJ2RlYnVnPWFzc2V0cyx0ZXN0cycpO30scmVnZW5lcmF0ZUFzc2V0czpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGRvbWFpbj11dGlscy5hc3NldHNEb21haW4oKTt0aGlzLl9ycGMoe21vZGVsOidpci5hdHRhY2htZW50JyxtZXRob2Q6J3NlYXJjaCcsYXJnczpbZG9tYWluXSx9KS50aGVuKGZ1bmN0aW9uKGlkcyl7c2VsZi5fcnBjKHttb2RlbDonaXIuYXR0YWNobWVudCcsbWV0aG9kOid1bmxpbmsnLGFyZ3M6W2lkc10sfSkudGhlbih3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkpO30pO30sbGVhdmVfZGVidWdfbW9kZTpmdW5jdGlvbigpe3ZhciBxcz0kLmRlcGFyYW0ucXVlcnlzdHJpbmcoKTtxcy5kZWJ1Zz0nJzt3aW5kb3cubG9jYXRpb24uc2VhcmNoPSc/JyskLnBhcmFtKHFzKTt9LH0pO3JldHVybiBEZWJ1Z01hbmFnZXI7fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3dpZGdldHMvbmFtZV9hbmRfc2lnbmF0dXJlLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYi5uYW1lX2FuZF9zaWduYXR1cmUnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciB1dGlscz1yZXF1aXJlKCd3ZWIudXRpbHMnKTt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgTmFtZUFuZFNpZ25hdHVyZT1XaWRnZXQuZXh0ZW5kKHt0ZW1wbGF0ZTond2ViLnNpZ25fbmFtZV9hbmRfc2lnbmF0dXJlJyx4bWxEZXBlbmRlbmNpZXM6Wycvd2ViL3N0YXRpYy9zcmMveG1sL25hbWVfYW5kX3NpZ25hdHVyZS54bWwnXSxldmVudHM6eydpbnB1dCAub193ZWJfc2lnbl9uYW1lX2lucHV0JzonX29uSW5wdXRTaWduTmFtZScsJ2NsaWNrIC5vX3dlYl9zaWduX3NpZ25hdHVyZSc6J19vbkNsaWNrU2lnbmF0dXJlJywnY2hhbmdlIC5vX3dlYl9zaWduX3NpZ25hdHVyZSc6J19vbkNoYW5nZVNpZ25hdHVyZScsJ2NsaWNrIC5vX3dlYl9zaWduX2RyYXdfYnV0dG9uJzonX29uQ2xpY2tTaWduRHJhd0J1dHRvbicsJ2NsaWNrIC5vX3dlYl9zaWduX2RyYXdfY2xlYXIgYSc6J19vbkNsaWNrU2lnbkRyYXdDbGVhcicsJ2NsaWNrIC5vX3dlYl9zaWduX2F1dG9fYnV0dG9uJzonX29uQ2xpY2tTaWduQXV0b0J1dHRvbicsJ2NsaWNrIC5vX3dlYl9zaWduX2F1dG9fc2VsZWN0X3N0eWxlIGEnOidfb25DbGlja1NpZ25BdXRvU2VsZWN0U3R5bGUnLCdjbGljayAub193ZWJfc2lnbl9hdXRvX2ZvbnRfc2VsZWN0aW9uIGEnOidfb25DbGlja1NpZ25BdXRvRm9udFNlbGVjdGlvbicsJ21vdXNlb3ZlciAub193ZWJfc2lnbl9hdXRvX2ZvbnRfc2VsZWN0aW9uIGEnOidfb25Nb3VzZU92ZXJTaWduQXV0b0ZvbnRTZWxlY3Rpb24nLCd0b3VjaG1vdmUgLm9fd2ViX3NpZ25fYXV0b19mb250X3NlbGVjdGlvbiBhJzonX29uVG91Y2hTdGFydFNpZ25BdXRvRm9udFNlbGVjdGlvbicsJ2NsaWNrIC5vX3dlYl9zaWduX2xvYWRfYnV0dG9uJzonX29uQ2xpY2tTaWduTG9hZEJ1dHRvbicsJ2NoYW5nZSAub193ZWJfc2lnbl9sb2FkX2ZpbGUgaW5wdXQnOidfb25DaGFuZ2VTaWduTG9hZElucHV0Jyx9LGluaXQ6ZnVuY3Rpb24ocGFyZW50LG9wdGlvbnMpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtvcHRpb25zPW9wdGlvbnN8fHt9O3RoaXMuaHRtbElkPV8udW5pcXVlSWQoKTt0aGlzLmRlZmF1bHROYW1lPW9wdGlvbnMuZGVmYXVsdE5hbWV8fCcnO3RoaXMuZGVmYXVsdEZvbnQ9b3B0aW9ucy5kZWZhdWx0Rm9udHx8Jyc7dGhpcy5kaXNwbGF5U2lnbmF0dXJlUmF0aW89b3B0aW9ucy5kaXNwbGF5U2lnbmF0dXJlUmF0aW98fDMuMDt0aGlzLnNpZ25hdHVyZVR5cGU9b3B0aW9ucy5zaWduYXR1cmVUeXBlfHwnc2lnbmF0dXJlJzt0aGlzLnNpZ25Nb2RlPW9wdGlvbnMubW9kZXx8J2RyYXcnO3RoaXMubm9JbnB1dE5hbWU9b3B0aW9ucy5ub0lucHV0TmFtZXx8ZmFsc2U7dGhpcy5jdXJyZW50Rm9udD0wO3RoaXMuZHJhd1RpbWVvdXQ9bnVsbDt0aGlzLmRyYXdQcmV2aWV3VGltZW91dD1udWxsO30sd2lsbFN0YXJ0OmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9ycGMoe3JvdXRlOicvd2ViL3NpZ24vZ2V0X2ZvbnRzLycrc2VsZi5kZWZhdWx0Rm9udH0pLnRoZW4oZnVuY3Rpb24oZGF0YSl7c2VsZi5mb250cz1kYXRhO30pXSk7fSxzdGFydDpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dGhpcy4kc2lnbmF0dXJlR3JvdXA9dGhpcy4kKCcub193ZWJfc2lnbl9zaWduYXR1cmVfZ3JvdXAnKTt0aGlzLiRzaWduYXR1cmVGaWVsZD10aGlzLiQoJy5vX3dlYl9zaWduX3NpZ25hdHVyZScpO3RoaXMuJG5hbWVJbnB1dD10aGlzLiQoJy5vX3dlYl9zaWduX25hbWVfaW5wdXQnKTt0aGlzLiRuYW1lSW5wdXRHcm91cD10aGlzLiQoJy5vX3dlYl9zaWduX25hbWVfZ3JvdXAnKTt0aGlzLiRkcmF3QnV0dG9uPXRoaXMuJCgnYS5vX3dlYl9zaWduX2RyYXdfYnV0dG9uJyk7dGhpcy4kYXV0b0J1dHRvbj10aGlzLiQoJ2Eub193ZWJfc2lnbl9hdXRvX2J1dHRvbicpO3RoaXMuJGxvYWRCdXR0b249dGhpcy4kKCdhLm9fd2ViX3NpZ25fbG9hZF9idXR0b24nKTt0aGlzLiRkcmF3Q2xlYXI9dGhpcy4kKCcub193ZWJfc2lnbl9kcmF3X2NsZWFyJyk7dGhpcy4kYXV0b1NlbGVjdFN0eWxlPXRoaXMuJCgnLm9fd2ViX3NpZ25fYXV0b19zZWxlY3Rfc3R5bGUnKTt0aGlzLiRhdXRvRm9udFNlbGVjdGlvbj10aGlzLiQoJy5vX3dlYl9zaWduX2F1dG9fZm9udF9zZWxlY3Rpb24nKTt0aGlzLiRhdXRvRm9udExpc3Q9dGhpcy4kKCcub193ZWJfc2lnbl9hdXRvX2ZvbnRfbGlzdCcpO2Zvcih2YXIgaSBpbiB0aGlzLmZvbnRzKXt2YXIgJGltZz0kKCc8aW1nLz4nKS5hZGRDbGFzcygnaW1nLWZsdWlkJyk7dmFyICRhPSQoJzxhLz4nKS5hZGRDbGFzcygnYnRuIHAtMCcpLmFwcGVuZCgkaW1nKS5kYXRhKCdmb250TmInLGkpO3RoaXMuJGF1dG9Gb250TGlzdC5hcHBlbmQoJGEpO30KdGhpcy4kbG9hZEZpbGU9dGhpcy4kKCcub193ZWJfc2lnbl9sb2FkX2ZpbGUnKTt0aGlzLiRsb2FkSW52YWxpZD10aGlzLiQoJy5vX3dlYl9zaWduX2xvYWRfaW52YWxpZCcpO2lmKHRoaXMuZm9udHMmJnRoaXMuZm9udHMubGVuZ3RoPDIpe3RoaXMuJGF1dG9TZWxlY3RTdHlsZS5oaWRlKCk7fQppZih0aGlzLm5vSW5wdXROYW1lKXtpZih0aGlzLmRlZmF1bHROYW1lPT09IiIpe3RoaXMuJGF1dG9CdXR0b24uaGlkZSgpO30KdGhpcy4kbmFtZUlucHV0R3JvdXAuaGlkZSgpO30KJCh3aW5kb3cpLm9uKCdyZXNpemUub193ZWJfc2lnbl9uYW1lX2FuZF9zaWduYXR1cmUnLF8uZGVib3VuY2UoZnVuY3Rpb24oKXtpZihzZWxmLmlzRGVzdHJveWVkKCkpe3JldHVybjt9CnNlbGYucmVzZXRTaWduYXR1cmUoKTt9LDI1MCkpO3JldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOyQod2luZG93KS5vZmYoJ3Jlc2l6ZS5vX3dlYl9zaWduX25hbWVfYW5kX3NpZ25hdHVyZScpO30sZm9jdXNOYW1lOmZ1bmN0aW9uKCl7dGhpcy4kbmFtZUlucHV0LmZvY3VzKCk7fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJG5hbWVJbnB1dC52YWwoKTt9LGdldFNpZ25hdHVyZUltYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNpZ25hdHVyZUZpZWxkLmpTaWduYXR1cmUoJ2dldERhdGEnLCdpbWFnZScpO30sZ2V0U2lnbmF0dXJlSW1hZ2VTcmM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgnZ2V0RGF0YScpO30saXNTaWduYXR1cmVFbXB0eTpmdW5jdGlvbigpe3ZhciBzaWduYXR1cmU9dGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgnZ2V0RGF0YScpO3JldHVybiBzaWduYXR1cmUmJnRoaXMuZW1wdHlTaWduYXR1cmU/dGhpcy5lbXB0eVNpZ25hdHVyZT09PXNpZ25hdHVyZTp0cnVlO30scmVzZXRTaWduYXR1cmU6ZnVuY3Rpb24oKXtpZighdGhpcy4kc2lnbmF0dXJlRmllbGQpe3JldHVybiBQcm9taXNlLnJlamVjdCgpO30KdGhpcy4kc2lnbmF0dXJlRmllbGQuY3NzKHt3aWR0aDondW5zZXQnfSk7dmFyIHdpZHRoPXRoaXMuJHNpZ25hdHVyZUZpZWxkLndpZHRoKCk7dmFyIGhlaWdodD1wYXJzZUludCh3aWR0aC90aGlzLmRpc3BsYXlTaWduYXR1cmVSYXRpbyk7dGhpcy4kc2lnbmF0dXJlRmllbGQuY3NzKHt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LH0pO3RoaXMuJHNpZ25hdHVyZUZpZWxkLmVtcHR5KCkualNpZ25hdHVyZSh7J2RlY29yLWNvbG9yJzonI0QxRDBDRScsJ2JhY2tncm91bmQtY29sb3InOicjRkZGJywnY29sb3InOicjMDAwJywnbGluZVdpZHRoJzoyLCd3aWR0aCc6d2lkdGgsJ2hlaWdodCc6aGVpZ2h0LH0pO3RoaXMuZW1wdHlTaWduYXR1cmU9dGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgnZ2V0RGF0YScpO3RoaXMuc2V0TW9kZSh0aGlzLnNpZ25Nb2RlLHRydWUpO3RoaXMuZm9jdXNOYW1lKCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30sc2V0TW9kZTpmdW5jdGlvbihtb2RlLHJlc2V0KXtpZihyZXNldCE9PXRydWUmJm1vZGU9PT10aGlzLnNpZ25Nb2RlKXtyZXR1cm47fQp0aGlzLnNpZ25Nb2RlPW1vZGU7dGhpcy4kZHJhd0NsZWFyLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuc2lnbk1vZGUhPT0nZHJhdycpO3RoaXMuJGF1dG9TZWxlY3RTdHlsZS50b2dnbGVDbGFzcygnZC1ub25lJyx0aGlzLnNpZ25Nb2RlIT09J2F1dG8nKTt0aGlzLiRsb2FkRmlsZS50b2dnbGVDbGFzcygnZC1ub25lJyx0aGlzLnNpZ25Nb2RlIT09J2xvYWQnKTt0aGlzLiRkcmF3QnV0dG9uLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLHRoaXMuc2lnbk1vZGU9PT0nZHJhdycpO3RoaXMuJGF1dG9CdXR0b24udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsdGhpcy5zaWduTW9kZT09PSdhdXRvJyk7dGhpcy4kbG9hZEJ1dHRvbi50b2dnbGVDbGFzcygnYWN0aXZlJyx0aGlzLnNpZ25Nb2RlPT09J2xvYWQnKTt0aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKHRoaXMuc2lnbk1vZGU9PT0nZHJhdyc/J2VuYWJsZSc6J2Rpc2FibGUnKTt0aGlzLiRzaWduYXR1cmVGaWVsZC5qU2lnbmF0dXJlKCdyZXNldCcpO2lmKHRoaXMuc2lnbk1vZGU9PT0nYXV0bycpe3RoaXMuX2RyYXdDdXJyZW50TmFtZSgpO31lbHNle3RoaXMuJGF1dG9Gb250U2VsZWN0aW9uLmFkZENsYXNzKCdkLW5vbmUnKTt9CmlmKHRoaXMuc2lnbk1vZGUhPT0nbG9hZCcpe3RoaXMuJGxvYWRJbnZhbGlkLmFkZENsYXNzKCdkLW5vbmUnKTt9fSx2YWxpZGF0ZVNpZ25hdHVyZTpmdW5jdGlvbigpe3ZhciBuYW1lPXRoaXMuZ2V0TmFtZSgpO3ZhciBpc1NpZ25hdHVyZUVtcHR5PXRoaXMuaXNTaWduYXR1cmVFbXB0eSgpO3RoaXMuJG5hbWVJbnB1dC5wYXJlbnQoKS50b2dnbGVDbGFzcygnb19oYXNfZXJyb3InLCFuYW1lKS5maW5kKCcuZm9ybS1jb250cm9sLCAuY3VzdG9tLXNlbGVjdCcpLnRvZ2dsZUNsYXNzKCdpcy1pbnZhbGlkJywhbmFtZSk7dGhpcy4kc2lnbmF0dXJlR3JvdXAudG9nZ2xlQ2xhc3MoJ2JvcmRlci1kYW5nZXInLGlzU2lnbmF0dXJlRW1wdHkpO3JldHVybiBuYW1lJiYhaXNTaWduYXR1cmVFbXB0eTt9LF9kcmF3Q3VycmVudE5hbWU6ZnVuY3Rpb24oKXt2YXIgZm9udD10aGlzLmZvbnRzW3RoaXMuY3VycmVudEZvbnRdO3ZhciB0ZXh0PXRoaXMuX2dldENsZWFuZWROYW1lKCk7dmFyIGNhbnZhcz10aGlzLiRzaWduYXR1cmVGaWVsZC5maW5kKCdjYW52YXMnKVswXTt2YXIgaW1nPXRoaXMuX2dldFNWR1RleHQoZm9udCx0ZXh0LGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtyZXR1cm4gdGhpcy5fcHJpbnRJbWFnZShpbWcpO30sX2dldENsZWFuZWROYW1lOmZ1bmN0aW9uKCl7dmFyIHJlZ2V4UmVtb3ZlU3BlY2lhbENoYXJhY3RlcnM9L1teXHdcdTAwRTAtXHUwMEZDLSciIF0vZzt2YXIgdGV4dD10aGlzLmdldE5hbWUoKS5yZXBsYWNlKHJlZ2V4UmVtb3ZlU3BlY2lhbENoYXJhY3RlcnMsJycpO2lmKHRoaXMuc2lnbmF0dXJlVHlwZT09PSdpbml0aWFsJyl7cmV0dXJuKHRleHQuc3BsaXQoJyAnKS5tYXAoZnVuY3Rpb24odyl7cmV0dXJuIHdbMF07fSkuam9pbignLicpKycuJyk7fQpyZXR1cm4gdGV4dDt9LF9nZXRTVkdUZXh0OmZ1bmN0aW9uKGZvbnQsdGV4dCx3aWR0aCxoZWlnaHQpe3ZhciAkc3ZnPSQoY29yZS5xd2ViLnJlbmRlcignd2ViLnNpZ25fc3ZnX3RleHQnLHt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LGZvbnQ6Zm9udCx0ZXh0OnRleHQsdHlwZTp0aGlzLnNpZ25hdHVyZVR5cGUsfSkpOyRzdmcuYXR0cih7J3htbG5zJzoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCd4bWxuczp4bGluayc6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLH0pO3JldHVybiJkYXRhOmltYWdlL3N2Zyt4bWwsIitlbmNvZGVVUkkoJHN2Z1swXS5vdXRlckhUTUwpO30sX3ByaW50SW1hZ2U6ZnVuY3Rpb24oaW1nU3JjKXt2YXIgc2VsZj10aGlzO3ZhciBpbWFnZT1uZXcgSW1hZ2U7aW1hZ2Uub25sb2FkPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHNlbGYuZHJhd1RpbWVvdXQpO3NlbGYuZHJhd1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB3aWR0aD0wO3ZhciBoZWlnaHQ9MDt2YXIgcmF0aW89aW1hZ2Uud2lkdGgvaW1hZ2UuaGVpZ2h0O3ZhciAkY2FudmFzPXNlbGYuJHNpZ25hdHVyZUZpZWxkLmZpbmQoJ2NhbnZhcycpO3ZhciBjb250ZXh0PSRjYW52YXNbMF0uZ2V0Q29udGV4dCgnMmQnKTtpZihpbWFnZS53aWR0aC8kY2FudmFzWzBdLndpZHRoPmltYWdlLmhlaWdodC8kY2FudmFzWzBdLmhlaWdodCl7d2lkdGg9JGNhbnZhc1swXS53aWR0aDtoZWlnaHQ9cGFyc2VJbnQod2lkdGgvcmF0aW8pO31lbHNle2hlaWdodD0kY2FudmFzWzBdLmhlaWdodDt3aWR0aD1wYXJzZUludChoZWlnaHQqcmF0aW8pO30Kc2VsZi4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgncmVzZXQnKTt2YXIgaWdub3JlZENvbnRleHQ9Xy5waWNrKGNvbnRleHQsWydzaGFkb3dPZmZzZXRYJywnc2hhZG93T2Zmc2V0WSddKTtfLmV4dGVuZChjb250ZXh0LHtzaGFkb3dPZmZzZXRYOjAsc2hhZG93T2Zmc2V0WTowfSk7Y29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsMCwwLGltYWdlLndpZHRoLGltYWdlLmhlaWdodCwoJGNhbnZhc1swXS53aWR0aC13aWR0aCkvMiwoJGNhbnZhc1swXS5oZWlnaHQtaGVpZ2h0KS8yLHdpZHRoLGhlaWdodCk7Xy5leHRlbmQoY29udGV4dCxpZ25vcmVkQ29udGV4dCk7c2VsZi50cmlnZ2VyX3VwKCdzaWduYXR1cmVfY2hhbmdlZCcpO30sMCk7fTtpbWFnZS5zcmM9aW1nU3JjO30sX3NldEZvbnQ6ZnVuY3Rpb24oaW5kZXgpe2lmKGluZGV4IT09dGhpcy5jdXJyZW50Rm9udCl7dGhpcy5jdXJyZW50Rm9udD1pbmRleDt0aGlzLl9kcmF3Q3VycmVudE5hbWUoKTt9fSxfdXBkYXRlUHJldmlld0J1dHRvbnM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO2NsZWFyVGltZW91dCh0aGlzLmRyYXdQcmV2aWV3VGltZW91dCk7dGhpcy5kcmF3UHJldmlld1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBoZWlnaHQ9MTAwO3ZhciB3aWR0aD1wYXJzZUludChoZWlnaHQqc2VsZi5kaXNwbGF5U2lnbmF0dXJlUmF0aW8pO3ZhciAkZXhpc3RpbmdCdXR0b25zPXNlbGYuJGF1dG9Gb250TGlzdC5maW5kKCdhJyk7Zm9yKHZhciBpPTA7aTxzZWxmLmZvbnRzLmxlbmd0aDtpKyspe3ZhciBpbWdTcmM9c2VsZi5fZ2V0U1ZHVGV4dChzZWxmLmZvbnRzW2ldLHNlbGYuX2dldENsZWFuZWROYW1lKCl8fF90KCJZb3VyIG5hbWUiKSx3aWR0aCxoZWlnaHQpOyRleGlzdGluZ0J1dHRvbnMuZXEoaSkuZmluZCgnaW1nJykuYXR0cignc3JjJyxpbWdTcmMpO319LDApO30sX3dhaXRGb3JTaWduYXR1cmVOb3RFbXB0eTpmdW5jdGlvbihkZWYpe2RlZj1kZWZ8fCQuRGVmZXJyZWQoKTtpZighdGhpcy5pc1NpZ25hdHVyZUVtcHR5KCkpe3RoaXMudHJpZ2dlcl91cCgnc2lnbmF0dXJlX2NoYW5nZWQnKTtkZWYucmVzb2x2ZSgpO31lbHNle3NldFRpbWVvdXQodGhpcy5fd2FpdEZvclNpZ25hdHVyZU5vdEVtcHR5LmJpbmQodGhpcyxkZWYpLDEwKTt9CnJldHVybiBkZWY7fSxfb25DbGlja1NpZ25hdHVyZTpmdW5jdGlvbihldil7dGhpcy4kYXV0b0ZvbnRTZWxlY3Rpb24uYWRkQ2xhc3MoJ2Qtbm9uZScpO30sX29uQ2xpY2tTaWduQXV0b0J1dHRvbjpmdW5jdGlvbihldil7ZXYucHJldmVudERlZmF1bHQoKTt0aGlzLnNldE1vZGUoJ2F1dG8nKTt9LF9vbkNsaWNrU2lnbkF1dG9Gb250U2VsZWN0aW9uOmZ1bmN0aW9uKGV2KXt0aGlzLiRhdXRvRm9udFNlbGVjdGlvbi5hZGRDbGFzcygnZC1ub25lJykucmVtb3ZlQ2xhc3MoJ2QtZmxleCcpLmNzcygnd2lkdGgnLDApO3RoaXMuX3NldEZvbnQocGFyc2VJbnQoJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKCdmb250LW5iJykpKTt9LF9vbkNsaWNrU2lnbkF1dG9TZWxlY3RTdHlsZTpmdW5jdGlvbihldil7dmFyIHNlbGY9dGhpczt2YXIgd2lkdGg9TWF0aC5taW4oc2VsZi4kYXV0b0ZvbnRTZWxlY3Rpb24uZmluZCgnYScpLmZpcnN0KCkuaGVpZ2h0KCkqc2VsZi5kaXNwbGF5U2lnbmF0dXJlUmF0aW8qMS4yNSx0aGlzLiRzaWduYXR1cmVGaWVsZC53aWR0aCgpKTtldi5wcmV2ZW50RGVmYXVsdCgpO3NlbGYuX3VwZGF0ZVByZXZpZXdCdXR0b25zKCk7dGhpcy4kYXV0b0ZvbnRTZWxlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpLmFkZENsYXNzKCdkLWZsZXgnKTt0aGlzLiRhdXRvRm9udFNlbGVjdGlvbi5zaG93KCkuYW5pbWF0ZSh7J3dpZHRoJzp3aWR0aH0sNTAwLGZ1bmN0aW9uKCl7fSk7fSxfb25DbGlja1NpZ25EcmF3QnV0dG9uOmZ1bmN0aW9uKGV2KXtldi5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuc2V0TW9kZSgnZHJhdycpO30sX29uQ2xpY2tTaWduRHJhd0NsZWFyOmZ1bmN0aW9uKGV2KXtldi5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuJHNpZ25hdHVyZUZpZWxkLmpTaWduYXR1cmUoJ3Jlc2V0Jyk7fSxfb25DbGlja1NpZ25Mb2FkQnV0dG9uOmZ1bmN0aW9uKGV2KXtldi5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuJGxvYWRGaWxlLmZpbmQoJ2lucHV0JykuY2xpY2soKTt0aGlzLnNldE1vZGUoJ2xvYWQnKTt9LF9vbkNoYW5nZVNpZ25hdHVyZTpmdW5jdGlvbihldil7dGhpcy50cmlnZ2VyX3VwKCdzaWduYXR1cmVfY2hhbmdlZCcpO30sX29uQ2hhbmdlU2lnbkxvYWRJbnB1dDpmdW5jdGlvbihldil7dmFyIHNlbGY9dGhpczt2YXIgZj1ldi50YXJnZXQuZmlsZXNbMF07aWYoZj09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlO30KaWYoZi50eXBlLnN1YnN0cigwLDUpIT09J2ltYWdlJyl7dGhpcy4kc2lnbmF0dXJlRmllbGQualNpZ25hdHVyZSgncmVzZXQnKTt0aGlzLiRsb2FkSW52YWxpZC5yZW1vdmVDbGFzcygnZC1ub25lJyk7cmV0dXJuIGZhbHNlO30KdGhpcy4kbG9hZEludmFsaWQuYWRkQ2xhc3MoJ2Qtbm9uZScpO3V0aWxzLmdldERhdGFVUkxGcm9tRmlsZShmKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7c2VsZi5fcHJpbnRJbWFnZShyZXN1bHQpO30pO30sX29uSW5wdXRTaWduTmFtZTpmdW5jdGlvbihldil7aWYodGhpcy5zaWduTW9kZSE9PSdhdXRvJyl7cmV0dXJuO30KdGhpcy5fZHJhd0N1cnJlbnROYW1lKCk7aWYoIXRoaXMuJGF1dG9Gb250U2VsZWN0aW9uLmhhc0NsYXNzKCdkLW5vbmUnKSl7dGhpcy5fdXBkYXRlUHJldmlld0J1dHRvbnMoKTt9fSxfb25Nb3VzZU92ZXJTaWduQXV0b0ZvbnRTZWxlY3Rpb246ZnVuY3Rpb24oZXYpe3RoaXMuX3NldEZvbnQocGFyc2VJbnQoJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKCdmb250LW5iJykpKTt9LF9vblRvdWNoU3RhcnRTaWduQXV0b0ZvbnRTZWxlY3Rpb246ZnVuY3Rpb24oZXYpe3RoaXMuX3NldEZvbnQocGFyc2VJbnQoJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKCdmb250LW5iJykpKTt9LH0pO3JldHVybntOYW1lQW5kU2lnbmF0dXJlOk5hbWVBbmRTaWduYXR1cmUsfTt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvd2lkZ2V0cy9ub3RpZmljYXRpb24uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLk5vdGlmaWNhdGlvbicsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBOb3RpZmljYXRpb249V2lkZ2V0LmV4dGVuZCh7dGVtcGxhdGU6J05vdGlmaWNhdGlvbicsZXZlbnRzOnsnaGlkZGVuLmJzLnRvYXN0JzonX29uQ2xvc2UnLCdjbGljayAub19ub3RpZmljYXRpb25fYnV0dG9ucyBidXR0b24nOidfb25DbGlja0J1dHRvbicsJ21vdXNlZW50ZXInOidfb25Nb3VzZUVudGVyJywnbW91c2VsZWF2ZSc6J19vbk1vdXNlTGVhdmUnLH0sX2F1dG9DbG9zZURlbGF5OjI1MDAsX2FuaW1hdGlvbjp0cnVlLGluaXQ6ZnVuY3Rpb24ocGFyZW50LHBhcmFtcyl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGl0bGU9cGFyYW1zLnRpdGxlO3RoaXMuc3VidGl0bGU9cGFyYW1zLnN1YnRpdGxlO3RoaXMubWVzc2FnZT1wYXJhbXMubWVzc2FnZTt0aGlzLmJ1dHRvbnM9cGFyYW1zLmJ1dHRvbnN8fFtdO3RoaXMuc3RpY2t5PSEhdGhpcy5idXR0b25zLmxlbmd0aHx8ISFwYXJhbXMuc3RpY2t5O3RoaXMudHlwZT1wYXJhbXMudHlwZT09PXVuZGVmaW5lZD8nd2FybmluZyc6cGFyYW1zLnR5cGU7dGhpcy5jbGFzc05hbWU9cGFyYW1zLmNsYXNzTmFtZXx8Jyc7dGhpcy5fY2xvc2VDYWxsYmFjaz1wYXJhbXMub25DbG9zZTtpZih0aGlzLnR5cGU9PT0nZGFuZ2VyJyl7dGhpcy5pY29uPSdmYS1leGNsYW1hdGlvbic7dGhpcy5jbGFzc05hbWUrPScgYmctZGFuZ2VyJzt9ZWxzZSBpZih0aGlzLnR5cGU9PT0nd2FybmluZycpe3RoaXMuaWNvbj0nZmEtbGlnaHRidWxiLW8nO3RoaXMuY2xhc3NOYW1lKz0nIGJnLXdhcm5pbmcnO31lbHNlIGlmKHRoaXMudHlwZT09PSdzdWNjZXNzJyl7dGhpcy5pY29uPSdmYS1jaGVjayc7dGhpcy5jbGFzc05hbWUrPScgYmctc3VjY2Vzcyc7fWVsc2UgaWYodGhpcy50eXBlPT09J2luZm8nKXt0aGlzLmljb249J2ZhLWluZm8nO3RoaXMuY2xhc3NOYW1lKz0nIGJnLWluZm8nO30KaWYodGhpcy5idXR0b25zJiZ0aGlzLmJ1dHRvbnMubGVuZ3RoKXt0aGlzLmljb249J2ZhLXF1ZXN0aW9uLWNpcmNsZS1vJzt9fSxzdGFydDpmdW5jdGlvbigpe3RoaXMuJGVsLnRvYXN0KHthbmltYXRpb246dGhpcy5fYW5pbWF0aW9uLGF1dG9oaWRlOmZhbHNlLH0pO3ZvaWQgdGhpcy4kZWxbMF0ub2Zmc2V0V2lkdGg7aWYoIXRoaXMuc3RpY2t5KXt0aGlzLmF1dG9oaWRlPV8uY2FuY2VsbGFibGVUaHJvdHRsZVJlbW92ZU1lU29vbih0aGlzLmNsb3NlLHRoaXMuX2F1dG9DbG9zZURlbGF5LHtsZWFkaW5nOmZhbHNlfSk7dGhpcy4kZWwub24oJ3Nob3duLmJzLnRvYXN0JywoKT0+e3RoaXMuYXV0b2hpZGUoKTt9KTt9CnRoaXMuJGVsLnRvYXN0KCdzaG93Jyk7cmV0dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRlbC50b2FzdCgnZGlzcG9zZScpO3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LGNsb3NlOmZ1bmN0aW9uKHNpbGVudCl7dGhpcy5zaWxlbnQ9c2lsZW50O3RoaXMuJGVsLnRvYXN0KCdoaWRlJyk7dmFyIHNlbGY9dGhpczt0aGlzLiRlbC5vbmUoJ3Nob3duLmJzLnRvYXN0JyxmdW5jdGlvbigpe3NlbGYuJGVsLnRvYXN0KCdoaWRlJyk7fSk7fSxfb25DbGlja0J1dHRvbjpmdW5jdGlvbihldil7ZXYucHJldmVudERlZmF1bHQoKTtpZih0aGlzLl9idXR0b25DbGlja2VkKXtyZXR1cm47fQp0aGlzLl9idXR0b25DbGlja2VkPXRydWU7dmFyIGluZGV4PSQoZXYuY3VycmVudFRhcmdldCkuaW5kZXgoKTt2YXIgYnV0dG9uPXRoaXMuYnV0dG9uc1tpbmRleF07aWYoYnV0dG9uLmNsaWNrKXtidXR0b24uY2xpY2soKTt9CnRoaXMuY2xvc2UodHJ1ZSk7fSxfb25DbG9zZTpmdW5jdGlvbihldil7dGhpcy50cmlnZ2VyX3VwKCdjbG9zZScpO2lmKCF0aGlzLnNpbGVudCYmIXRoaXMuX2J1dHRvbkNsaWNrZWQpe2lmKHRoaXMuX2Nsb3NlQ2FsbGJhY2spe3RoaXMuX2Nsb3NlQ2FsbGJhY2soKTt9fQp0aGlzLmRlc3Ryb3koKTt9LF9vbk1vdXNlRW50ZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5zdGlja3kpe3RoaXMuYXV0b2hpZGUuY2FuY2VsKCk7fX0sX29uTW91c2VMZWF2ZTpmdW5jdGlvbigpe2lmKCF0aGlzLnN0aWNreSl7dGhpcy5hdXRvaGlkZSgpO319LH0pO3JldHVybiBOb3RpZmljYXRpb247fSk7OwoKLyogL3dlYi9zdGF0aWMvc3JjL2pzL3dpZGdldHMvcmFpbmJvd19tYW4uanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLlJhaW5ib3dNYW4nLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgV2lkZ2V0PXJlcXVpcmUoJ3dlYi5XaWRnZXQnKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBfdD1jb3JlLl90O3ZhciBSYWluYm93TWFuPVdpZGdldC5leHRlbmQoe3RlbXBsYXRlOidyYWluYm93X21hbi5ub3RpZmljYXRpb24nLHhtbERlcGVuZGVuY2llczpbJy93ZWIvc3RhdGljL3NyYy94bWwvcmFpbmJvd19tYW4ueG1sJ10saW5pdDpmdW5jdGlvbihvcHRpb25zKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHJhaW5ib3dEZWxheT17c2xvdzo0NTAwLG1lZGl1bTozNTAwLGZhc3Q6MjAwMCxubzpmYWxzZX07dGhpcy5vcHRpb25zPV8uZGVmYXVsdHMob3B0aW9uc3x8e30se2ZhZGVvdXQ6J21lZGl1bScsaW1nX3VybDonL3dlYi9zdGF0aWMvc3JjL2ltZy9zbWlsZS5zdmcnLG1lc3NhZ2U6X3QoJ1dlbGwgRG9uZSEnKSx9KTt0aGlzLmRlbGF5PXJhaW5ib3dEZWxheVt0aGlzLm9wdGlvbnMuZmFkZW91dF07fSxzdGFydDpmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2NvcmUuYnVzLm9uKCdjbGljaycsc2VsZixmdW5jdGlvbihldil7aWYoZXYub3JpZ2luYWxFdmVudCYmZXYudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdvX3Jld2FyZCcpPT09LTEpe3RoaXMuZGVzdHJveSgpO319KTt9KTtpZih0aGlzLmRlbGF5KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi4kZWwuYWRkQ2xhc3MoJ29fcmV3YXJkX2ZhZGluZycpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmRlc3Ryb3koKTt9LDYwMCk7fSx0aGlzLmRlbGF5KTt9CnRoaXMuJCgnLm9fcmV3YXJkX21zZ19jb250ZW50JykuYXBwZW5kKHRoaXMub3B0aW9ucy5tZXNzYWdlKTtyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO319KTtyZXR1cm4gUmFpbmJvd01hbjt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvd2lkZ2V0cy9jb2xvcnBpY2tlcl9kaWFsb2cuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViLkNvbG9ycGlja2VyRGlhbG9nJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgdXRpbHM9cmVxdWlyZSgnd2ViLnV0aWxzJyk7dmFyIERpYWxvZz1yZXF1aXJlKCd3ZWIuRGlhbG9nJyk7dmFyIF90PWNvcmUuX3Q7dmFyIENvbG9ycGlja2VyRGlhbG9nPURpYWxvZy5leHRlbmQoe3htbERlcGVuZGVuY2llczooRGlhbG9nLnByb3RvdHlwZS54bWxEZXBlbmRlbmNpZXN8fFtdKS5jb25jYXQoWycvd2ViL3N0YXRpYy9zcmMveG1sL2NvbG9ycGlja2VyX2RpYWxvZy54bWwnXSksdGVtcGxhdGU6J0NvbG9ycGlja2VyRGlhbG9nJyxldmVudHM6Xy5leHRlbmQoe30sRGlhbG9nLnByb3RvdHlwZS5ldmVudHN8fHt9LHsnbW91c2Vkb3duIC5vX2NvbG9yX3BpY2tfYXJlYSc6J19vbk1vdXNlRG93blBpY2tlcicsJ21vdXNlZG93biAub19jb2xvcl9zbGlkZXInOidfb25Nb3VzZURvd25TbGlkZXInLCdtb3VzZWRvd24gLm9fb3BhY2l0eV9zbGlkZXInOidfb25Nb3VzZURvd25PcGFjaXR5U2xpZGVyJywnY2hhbmdlIC5vX2NvbG9yX3BpY2tlcl9pbnB1dHMnOidfb25DaGFuZ2VJbnB1dHMnLH0pLGluaXQ6ZnVuY3Rpb24ocGFyZW50LG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307dGhpcy5fc3VwZXIocGFyZW50LF8uZXh0ZW5kKHtzaXplOidtZWRpdW0nLHRpdGxlOl90KCdQaWNrIGEgY29sb3InKSxidXR0b25zOlt7dGV4dDpfdCgnQ2hvb3NlJyksY2xhc3NlczonYnRuLXByaW1hcnknLGNsb3NlOnRydWUsY2xpY2s6dGhpcy5fb25GaW5hbFBpY2suYmluZCh0aGlzKX0se3RleHQ6X3QoJ0Rpc2NhcmQnKSxjbG9zZTp0cnVlfSxdLH0sb3B0aW9ucykpO3RoaXMudHJpZ2dlcl91cCgnZ2V0UmVjb3JkSW5mbycse3JlY29yZEluZm86b3B0aW9ucyxjYWxsYmFjazpmdW5jdGlvbihyZWNvcmRJbmZvKXtfLmRlZmF1bHRzKG9wdGlvbnMscmVjb3JkSW5mbyk7fSx9KTt0aGlzLnBpY2tlckZsYWc9ZmFsc2U7dGhpcy5zbGlkZXJGbGFnPWZhbHNlO3RoaXMub3BhY2l0eVNsaWRlckZsYWc9ZmFsc2U7dGhpcy5jb2xvckNvbXBvbmVudHM9e307dmFyIHNlbGY9dGhpczt2YXIgJGJvZHk9JChkb2N1bWVudC5ib2R5KTskYm9keS5vbignbW91c2Vtb3ZlLmNvbG9ycGlja2VyJyxfLnRocm90dGxlKGZ1bmN0aW9uKGV2KXtzZWxmLl9vbk1vdXNlTW92ZVBpY2tlcihldik7c2VsZi5fb25Nb3VzZU1vdmVTbGlkZXIoZXYpO3NlbGYuX29uTW91c2VNb3ZlT3BhY2l0eVNsaWRlcihldik7fSwxMCkpOyRib2R5Lm9uKCdtb3VzZXVwLmNvbG9ycGlja2VyJyxfLnRocm90dGxlKGZ1bmN0aW9uKGV2KXtzZWxmLnBpY2tlckZsYWc9ZmFsc2U7c2VsZi5zbGlkZXJGbGFnPWZhbHNlO3NlbGYub3BhY2l0eVNsaWRlckZsYWc9ZmFsc2U7fSwxMCkpO3RoaXMub3B0aW9ucz1fLmNsb25lKG9wdGlvbnMpO30sc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLiRjb2xvcnBpY2tlckFyZWE9dGhpcy4kKCcub19jb2xvcl9waWNrX2FyZWEnKTt0aGlzLiRjb2xvcnBpY2tlclBvaW50ZXI9dGhpcy4kKCcub19waWNrZXJfcG9pbnRlcicpO3RoaXMuJGNvbG9yU2xpZGVyPXRoaXMuJCgnLm9fY29sb3Jfc2xpZGVyJyk7dGhpcy4kY29sb3JTbGlkZXJQb2ludGVyPXRoaXMuJCgnLm9fc2xpZGVyX3BvaW50ZXInKTt0aGlzLiRvcGFjaXR5U2xpZGVyPXRoaXMuJCgnLm9fb3BhY2l0eV9zbGlkZXInKTt0aGlzLiRvcGFjaXR5U2xpZGVyUG9pbnRlcj10aGlzLiQoJy5vX29wYWNpdHlfcG9pbnRlcicpO3ZhciBkZWZhdWx0Q29sb3I9dGhpcy5vcHRpb25zLmRlZmF1bHRDb2xvcnx8JyNGRjAwMDAnO3ZhciByZ2JhPUNvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRDb2xvclRvUmdiYShkZWZhdWx0Q29sb3IpO2lmKHJnYmEpe3RoaXMuX3VwZGF0ZVJnYmEocmdiYS5yZWQscmdiYS5ncmVlbixyZ2JhLmJsdWUscmdiYS5vcGFjaXR5KTt9CnRoaXMub3BlbmVkKCkudGhlbih0aGlzLl91cGRhdGVVSS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTskKGRvY3VtZW50LmJvZHkpLm9mZignLmNvbG9ycGlja2VyJyk7fSxfdXBkYXRlVUk6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO18uZWFjaCh0aGlzLmNvbG9yQ29tcG9uZW50cyxmdW5jdGlvbih2YWx1ZSxjb2xvcil7c2VsZi4kKF8uc3RyLnNwcmludGYoJy5vXyVzX2lucHV0Jyxjb2xvcikpLnZhbCh2YWx1ZSk7fSk7dGhpcy4kKCcub19jb2xvcl9wcmV2aWV3JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyx0aGlzLmNvbG9yQ29tcG9uZW50cy5jc3NDb2xvcik7dGhpcy4kY29sb3JwaWNrZXJBcmVhLmNzcygnYmFja2dyb3VuZC1jb2xvcicsXy5zdHIuc3ByaW50ZignaHNsKCVzLCAxMDAlJSwgNTAlJSknLHRoaXMuY29sb3JDb21wb25lbnRzLmh1ZSkpO3ZhciB0b3A9KDEwMC10aGlzLmNvbG9yQ29tcG9uZW50cy5saWdodG5lc3MpKnRoaXMuJGNvbG9ycGlja2VyQXJlYS5oZWlnaHQoKS8xMDA7dmFyIGxlZnQ9dGhpcy5jb2xvckNvbXBvbmVudHMuc2F0dXJhdGlvbip0aGlzLiRjb2xvcnBpY2tlckFyZWEud2lkdGgoKS8xMDA7dGhpcy4kY29sb3JwaWNrZXJQb2ludGVyLmNzcyh7dG9wOih0b3AtNSkrJ3B4JyxsZWZ0OihsZWZ0LTUpKydweCcsfSk7dmFyIGhlaWdodD10aGlzLiRjb2xvclNsaWRlci5oZWlnaHQoKTt2YXIgeT10aGlzLmNvbG9yQ29tcG9uZW50cy5odWUqaGVpZ2h0LzM2MDt0aGlzLiRjb2xvclNsaWRlclBvaW50ZXIuY3NzKCd0b3AnLE1hdGgucm91bmQoeS0yKSk7aWYoIXRoaXMub3B0aW9ucy5ub1RyYW5zcGFyZW5jeSl7dmFyIGhlaWdodE9wYWNpdHk9dGhpcy4kb3BhY2l0eVNsaWRlci5oZWlnaHQoKTt2YXIgej1oZWlnaHRPcGFjaXR5KigxLXRoaXMuY29sb3JDb21wb25lbnRzLm9wYWNpdHkvMTAwLjApO3RoaXMuJG9wYWNpdHlTbGlkZXJQb2ludGVyLmNzcygndG9wJyxNYXRoLnJvdW5kKHotMikpO3RoaXMuJG9wYWNpdHlTbGlkZXIuY3NzKCdiYWNrZ3JvdW5kJywnbGluZWFyLWdyYWRpZW50KCcrdGhpcy5jb2xvckNvbXBvbmVudHMuaGV4KycgMCUsIHRyYW5zcGFyZW50IDEwMCUpJyk7fX0sX3VwZGF0ZUhleDpmdW5jdGlvbihoZXgpe3ZhciByZ2I9Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydEhleFRvUmdiYShoZXgpO2lmKCFyZ2Ipe3JldHVybjt9Cl8uZXh0ZW5kKHRoaXMuY29sb3JDb21wb25lbnRzLHtoZXg6aGV4fSxyZ2IsQ29sb3JwaWNrZXJEaWFsb2cuY29udmVydFJnYlRvSHNsKHJnYi5yZWQscmdiLmdyZWVuLHJnYi5ibHVlKSk7dGhpcy5fdXBkYXRlQ3NzQ29sb3IoKTt9LF91cGRhdGVSZ2JhOmZ1bmN0aW9uKHIsZyxiLGEpe3ZhciBoZXg9Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydFJnYlRvSGV4KHIsZyxiKTtpZighaGV4KXtyZXR1cm47fQpfLmV4dGVuZCh0aGlzLmNvbG9yQ29tcG9uZW50cyx7cmVkOnIsZ3JlZW46ZyxibHVlOmJ9LGE9PT11bmRlZmluZWQ/e306e29wYWNpdHk6YX0saGV4LENvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRSZ2JUb0hzbChyLGcsYikpO3RoaXMuX3VwZGF0ZUNzc0NvbG9yKCk7fSxfdXBkYXRlSHNsOmZ1bmN0aW9uKGgscyxsKXt2YXIgcmdiPUNvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRIc2xUb1JnYihoLHMsbCk7aWYoIXJnYil7cmV0dXJuO30KXy5leHRlbmQodGhpcy5jb2xvckNvbXBvbmVudHMse2h1ZTpoLHNhdHVyYXRpb246cyxsaWdodG5lc3M6bH0scmdiLENvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRSZ2JUb0hleChyZ2IucmVkLHJnYi5ncmVlbixyZ2IuYmx1ZSkpO3RoaXMuX3VwZGF0ZUNzc0NvbG9yKCk7fSxfdXBkYXRlT3BhY2l0eTpmdW5jdGlvbihhKXtpZihhPDB8fGE+MTAwKXtyZXR1cm47fQpfLmV4dGVuZCh0aGlzLmNvbG9yQ29tcG9uZW50cyx7b3BhY2l0eTphfSk7dGhpcy5fdXBkYXRlQ3NzQ29sb3IoKTt9LF91cGRhdGVDc3NDb2xvcjpmdW5jdGlvbigpe18uZXh0ZW5kKHRoaXMuY29sb3JDb21wb25lbnRzLHtjc3NDb2xvcjpDb2xvcnBpY2tlckRpYWxvZy5mb3JtYXRDb2xvcih0aGlzLmNvbG9yQ29tcG9uZW50cyl9KTt9LF9vbk1vdXNlRG93blBpY2tlcjpmdW5jdGlvbihldil7dGhpcy5waWNrZXJGbGFnPXRydWU7dGhpcy5fb25Nb3VzZU1vdmVQaWNrZXIoZXYpO30sX29uTW91c2VNb3ZlUGlja2VyOmZ1bmN0aW9uKGV2KXtpZighdGhpcy5waWNrZXJGbGFnKXtyZXR1cm47fQp2YXIgb2Zmc2V0PXRoaXMuJGNvbG9ycGlja2VyQXJlYS5vZmZzZXQoKTt2YXIgdG9wPWV2LnBhZ2VZLW9mZnNldC50b3A7dmFyIGxlZnQ9ZXYucGFnZVgtb2Zmc2V0LmxlZnQ7dmFyIHNhdHVyYXRpb249TWF0aC5yb3VuZCgxMDAqbGVmdC90aGlzLiRjb2xvcnBpY2tlckFyZWEud2lkdGgoKSk7dmFyIGxpZ2h0bmVzcz1NYXRoLnJvdW5kKDEwMCoodGhpcy4kY29sb3JwaWNrZXJBcmVhLmhlaWdodCgpLXRvcCkvdGhpcy4kY29sb3JwaWNrZXJBcmVhLmhlaWdodCgpKTtzYXR1cmF0aW9uPXV0aWxzLmNvbmZpbmUoc2F0dXJhdGlvbiwwLDEwMCk7bGlnaHRuZXNzPXV0aWxzLmNvbmZpbmUobGlnaHRuZXNzLDAsMTAwKTt0aGlzLl91cGRhdGVIc2wodGhpcy5jb2xvckNvbXBvbmVudHMuaHVlLHNhdHVyYXRpb24sbGlnaHRuZXNzKTt0aGlzLl91cGRhdGVVSSgpO30sX29uTW91c2VEb3duU2xpZGVyOmZ1bmN0aW9uKGV2KXt0aGlzLnNsaWRlckZsYWc9dHJ1ZTt0aGlzLl9vbk1vdXNlTW92ZVNsaWRlcihldik7fSxfb25Nb3VzZU1vdmVTbGlkZXI6ZnVuY3Rpb24oZXYpe2lmKCF0aGlzLnNsaWRlckZsYWcpe3JldHVybjt9CnZhciB5PWV2LnBhZ2VZLXRoaXMuJGNvbG9yU2xpZGVyLm9mZnNldCgpLnRvcDt2YXIgaHVlPU1hdGgucm91bmQoMzYwKnkvdGhpcy4kY29sb3JTbGlkZXIuaGVpZ2h0KCkpO2h1ZT11dGlscy5jb25maW5lKGh1ZSwwLDM2MCk7dGhpcy5fdXBkYXRlSHNsKGh1ZSx0aGlzLmNvbG9yQ29tcG9uZW50cy5zYXR1cmF0aW9uLHRoaXMuY29sb3JDb21wb25lbnRzLmxpZ2h0bmVzcyk7dGhpcy5fdXBkYXRlVUkoKTt9LF9vbk1vdXNlRG93bk9wYWNpdHlTbGlkZXI6ZnVuY3Rpb24oZXYpe3RoaXMub3BhY2l0eVNsaWRlckZsYWc9dHJ1ZTt0aGlzLl9vbk1vdXNlTW92ZU9wYWNpdHlTbGlkZXIoZXYpO30sX29uTW91c2VNb3ZlT3BhY2l0eVNsaWRlcjpmdW5jdGlvbihldil7aWYoIXRoaXMub3BhY2l0eVNsaWRlckZsYWd8fHRoaXMub3B0aW9ucy5ub1RyYW5zcGFyZW5jeSl7cmV0dXJuO30KdmFyIHk9ZXYucGFnZVktdGhpcy4kb3BhY2l0eVNsaWRlci5vZmZzZXQoKS50b3A7dmFyIG9wYWNpdHk9TWF0aC5yb3VuZCgxMDAqKDEteS90aGlzLiRvcGFjaXR5U2xpZGVyLmhlaWdodCgpKSk7b3BhY2l0eT11dGlscy5jb25maW5lKG9wYWNpdHksMCwxMDApO3RoaXMuX3VwZGF0ZU9wYWNpdHkob3BhY2l0eSk7dGhpcy5fdXBkYXRlVUkoKTt9LF9vbkNoYW5nZUlucHV0czpmdW5jdGlvbihldil7c3dpdGNoKCQoZXYudGFyZ2V0KS5kYXRhKCdjb2xvck1ldGhvZCcpKXtjYXNlJ2hleCc6dGhpcy5fdXBkYXRlSGV4KHRoaXMuJCgnLm9faGV4X2lucHV0JykudmFsKCkpO2JyZWFrO2Nhc2UncmdiJzp0aGlzLl91cGRhdGVSZ2JhKHBhcnNlSW50KHRoaXMuJCgnLm9fcmVkX2lucHV0JykudmFsKCkpLHBhcnNlSW50KHRoaXMuJCgnLm9fZ3JlZW5faW5wdXQnKS52YWwoKSkscGFyc2VJbnQodGhpcy4kKCcub19ibHVlX2lucHV0JykudmFsKCkpKTticmVhaztjYXNlJ2hzbCc6dGhpcy5fdXBkYXRlSHNsKHBhcnNlSW50KHRoaXMuJCgnLm9faHVlX2lucHV0JykudmFsKCkpLHBhcnNlSW50KHRoaXMuJCgnLm9fc2F0dXJhdGlvbl9pbnB1dCcpLnZhbCgpKSxwYXJzZUludCh0aGlzLiQoJy5vX2xpZ2h0bmVzc19pbnB1dCcpLnZhbCgpKSk7YnJlYWs7Y2FzZSdvcGFjaXR5Jzp0aGlzLl91cGRhdGVPcGFjaXR5KHBhcnNlSW50KHRoaXMuJCgnLm9fb3BhY2l0eV9pbnB1dCcpLnZhbCgpKSk7YnJlYWs7fQp0aGlzLl91cGRhdGVVSSgpO30sX29uRmluYWxQaWNrOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyX3VwKCdjb2xvcnBpY2tlcjpzYXZlZCcsdGhpcy5jb2xvckNvbXBvbmVudHMpO30sfSk7Q29sb3JwaWNrZXJEaWFsb2cuZm9ybWF0Q29sb3I9ZnVuY3Rpb24oY29sb3Ipe2lmKHR5cGVvZiBjb2xvcj09PSdzdHJpbmcnKXtjb2xvcj1Db2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0Q29sb3JUb1JnYmEoY29sb3IpO30KaWYoIWNvbG9yKXtyZXR1cm4nJzt9CmlmKGNvbG9yLm9wYWNpdHk9PT0xMDApe3JldHVybiBDb2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0UmdiVG9IZXgoY29sb3IucmVkLGNvbG9yLmdyZWVuLGNvbG9yLmJsdWUpLmhleDt9CnJldHVybiBfLnN0ci5zcHJpbnRmKCdyZ2JhKCVzLCAlcywgJXMsICVzKScsY29sb3IucmVkLGNvbG9yLmdyZWVuLGNvbG9yLmJsdWUsY29sb3Iub3BhY2l0eS8xMDApO307Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydENvbG9yVG9SZ2JhPWZ1bmN0aW9uKGNvbG9yKXt2YXIgcmdiYT1jb2xvci5tYXRjaCgvXnJnYmE/XCgoXGQrKSxccyooXGQrKSxccyooXGQrKSg/OixccyooXGQrKD86XC5cZCspPykpP1wpJC8pO2lmKHJnYmEpe2lmKHJnYmFbNF09PT11bmRlZmluZWQpe3JnYmFbNF09MTt9CnJldHVybntyZWQ6cGFyc2VJbnQocmdiYVsxXSksZ3JlZW46cGFyc2VJbnQocmdiYVsyXSksYmx1ZTpwYXJzZUludChyZ2JhWzNdKSxvcGFjaXR5Ok1hdGgucm91bmQocGFyc2VGbG9hdChyZ2JhWzRdKSoxMDApLH07fWVsc2V7cmV0dXJuIENvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRIZXhUb1JnYmEoY29sb3IpO319O0NvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRIZXhUb1JnYmE9ZnVuY3Rpb24oaGV4KXtpZighL14jKFswLTlBLUZdezZ9fFswLTlBLUZdezh9KSQvaS50ZXN0KGhleCkpe3JldHVybiBmYWxzZTt9CnJldHVybntyZWQ6cGFyc2VJbnQoaGV4LnN1YnN0cigxLDIpLDE2KSxncmVlbjpwYXJzZUludChoZXguc3Vic3RyKDMsMiksMTYpLGJsdWU6cGFyc2VJbnQoaGV4LnN1YnN0cig1LDIpLDE2KSxvcGFjaXR5OmhleC5sZW5ndGg9PT05P3BhcnNlSW50KGhleC5zdWJzdHIoNywyKSwxNik6MTAwLH07fTtDb2xvcnBpY2tlckRpYWxvZy5jb252ZXJ0UmdiVG9Ic2w9ZnVuY3Rpb24ocixnLGIpe2lmKHR5cGVvZihyKSE9PSdudW1iZXInfHxpc05hTihyKXx8cjwwfHxyPjI1NXx8dHlwZW9mKGcpIT09J251bWJlcid8fGlzTmFOKGcpfHxnPDB8fGc+MjU1fHx0eXBlb2YoYikhPT0nbnVtYmVyJ3x8aXNOYU4oYil8fGI8MHx8Yj4yNTUpe3JldHVybiBmYWxzZTt9CnZhciByZWQ9ci8yNTU7dmFyIGdyZWVuPWcvMjU1O3ZhciBibHVlPWIvMjU1O3ZhciBtYXhDb2xvcj1NYXRoLm1heChyZWQsZ3JlZW4sYmx1ZSk7dmFyIG1pbkNvbG9yPU1hdGgubWluKHJlZCxncmVlbixibHVlKTt2YXIgZGVsdGE9bWF4Q29sb3ItbWluQ29sb3I7dmFyIGh1ZT0wO3ZhciBzYXR1cmF0aW9uPTA7dmFyIGxpZ2h0bmVzcz0obWF4Q29sb3IrbWluQ29sb3IpLzI7aWYoZGVsdGEpe2lmKG1heENvbG9yPT09cmVkKXtodWU9KGdyZWVuLWJsdWUpL2RlbHRhO30KaWYobWF4Q29sb3I9PT1ncmVlbil7aHVlPTIrKGJsdWUtcmVkKS9kZWx0YTt9CmlmKG1heENvbG9yPT09Ymx1ZSl7aHVlPTQrKHJlZC1ncmVlbikvZGVsdGE7fQppZihtYXhDb2xvcil7c2F0dXJhdGlvbj1kZWx0YS8oMS1NYXRoLmFicygyKmxpZ2h0bmVzcy0xKSk7fX0KaHVlPTYwKmh1ZXwwO3JldHVybntodWU6aHVlPDA/aHVlKz0zNjA6aHVlLHNhdHVyYXRpb246KHNhdHVyYXRpb24qMTAwKXwwLGxpZ2h0bmVzczoobGlnaHRuZXNzKjEwMCl8MCx9O307Q29sb3JwaWNrZXJEaWFsb2cuY29udmVydEhzbFRvUmdiPWZ1bmN0aW9uKGgscyxsKXtpZih0eXBlb2YoaCkhPT0nbnVtYmVyJ3x8aXNOYU4oaCl8fGg8MHx8aD4zNjB8fHR5cGVvZihzKSE9PSdudW1iZXInfHxpc05hTihzKXx8czwwfHxzPjEwMHx8dHlwZW9mKGwpIT09J251bWJlcid8fGlzTmFOKGwpfHxsPDB8fGw+MTAwKXtyZXR1cm4gZmFsc2U7fQp2YXIgaHVlUHJpbWU9aC82MDt2YXIgc2F0dXJhdGlvbj1zLzEwMDt2YXIgbGlnaHRuZXNzPWwvMTAwO3ZhciBjaHJvbWE9c2F0dXJhdGlvbiooMS1NYXRoLmFicygyKmxpZ2h0bmVzcy0xKSk7dmFyIHNlY29uZENvbXBvbmVudD1jaHJvbWEqKDEtTWF0aC5hYnMoaHVlUHJpbWUlMi0xKSk7dmFyIGxpZ2h0bmVzc0FkanVzdG1lbnQ9bGlnaHRuZXNzLWNocm9tYS8yO3ZhciBwcmVjaXNpb249MjU1O2Nocm9tYT0oY2hyb21hK2xpZ2h0bmVzc0FkanVzdG1lbnQpKnByZWNpc2lvbnwwO3NlY29uZENvbXBvbmVudD0oc2Vjb25kQ29tcG9uZW50K2xpZ2h0bmVzc0FkanVzdG1lbnQpKnByZWNpc2lvbnwwO2xpZ2h0bmVzc0FkanVzdG1lbnQ9bGlnaHRuZXNzQWRqdXN0bWVudCpwcmVjaXNpb258MDtpZihodWVQcmltZT49MCYmaHVlUHJpbWU8MSl7cmV0dXJue3JlZDpjaHJvbWEsZ3JlZW46c2Vjb25kQ29tcG9uZW50LGJsdWU6bGlnaHRuZXNzQWRqdXN0bWVudCx9O30KaWYoaHVlUHJpbWU+PTEmJmh1ZVByaW1lPDIpe3JldHVybntyZWQ6c2Vjb25kQ29tcG9uZW50LGdyZWVuOmNocm9tYSxibHVlOmxpZ2h0bmVzc0FkanVzdG1lbnQsfTt9CmlmKGh1ZVByaW1lPj0yJiZodWVQcmltZTwzKXtyZXR1cm57cmVkOmxpZ2h0bmVzc0FkanVzdG1lbnQsZ3JlZW46Y2hyb21hLGJsdWU6c2Vjb25kQ29tcG9uZW50LH07fQppZihodWVQcmltZT49MyYmaHVlUHJpbWU8NCl7cmV0dXJue3JlZDpsaWdodG5lc3NBZGp1c3RtZW50LGdyZWVuOnNlY29uZENvbXBvbmVudCxibHVlOmNocm9tYSx9O30KaWYoaHVlUHJpbWU+PTQmJmh1ZVByaW1lPDUpe3JldHVybntyZWQ6c2Vjb25kQ29tcG9uZW50LGdyZWVuOmxpZ2h0bmVzc0FkanVzdG1lbnQsYmx1ZTpjaHJvbWEsfTt9CmlmKGh1ZVByaW1lPj01JiZodWVQcmltZTw9Nil7cmV0dXJue3JlZDpjaHJvbWEsZ3JlZW46bGlnaHRuZXNzQWRqdXN0bWVudCxibHVlOnNlY29uZENvbXBvbmVudCx9O319O0NvbG9ycGlja2VyRGlhbG9nLmNvbnZlcnRSZ2JUb0hleD1mdW5jdGlvbihyLGcsYil7aWYodHlwZW9mKHIpIT09J251bWJlcid8fGlzTmFOKHIpfHxyPDB8fHI+MjU1fHx0eXBlb2YoZykhPT0nbnVtYmVyJ3x8aXNOYU4oZyl8fGc8MHx8Zz4yNTV8fHR5cGVvZihiKSE9PSdudW1iZXInfHxpc05hTihiKXx8YjwwfHxiPjI1NSl7cmV0dXJuIGZhbHNlO30KdmFyIHJlZD1yPDE2PycwJytyLnRvU3RyaW5nKDE2KTpyLnRvU3RyaW5nKDE2KTt2YXIgZ3JlZW49ZzwxNj8nMCcrZy50b1N0cmluZygxNik6Zy50b1N0cmluZygxNik7dmFyIGJsdWU9YjwxNj8nMCcrYi50b1N0cmluZygxNik6Yi50b1N0cmluZygxNik7cmV0dXJue2hleDpfLnN0ci5zcHJpbnRmKCcjJXMlcyVzJyxyZWQsZ3JlZW4sYmx1ZSl9O307cmV0dXJuIENvbG9ycGlja2VyRGlhbG9nO30pOzsKCi8qIC93ZWIvc3RhdGljL3NyYy9qcy93aWRnZXRzL3RyYW5zbGF0aW9uX2RpYWxvZy5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuVHJhbnNsYXRpb25EaWFsb2cnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBEaWFsb2c9cmVxdWlyZSgnd2ViLkRpYWxvZycpO3ZhciBzZXNzaW9uPXJlcXVpcmUoJ3dlYi5zZXNzaW9uJyk7dmFyIF90PWNvcmUuX3Q7dmFyIFRyYW5zbGF0aW9uRGlhbG9nPURpYWxvZy5leHRlbmQoe3htbERlcGVuZGVuY2llczooRGlhbG9nLnByb3RvdHlwZS54bWxEZXBlbmRlbmNpZXN8fFtdKS5jb25jYXQoWycvd2ViL3N0YXRpYy9zcmMveG1sL3RyYW5zbGF0aW9uX2RpYWxvZy54bWwnXSksdGVtcGxhdGU6J1RyYW5zbGF0aW9uRGlhbG9nJyxpbml0OmZ1bmN0aW9uKHBhcmVudCxvcHRpb25zKXtvcHRpb25zPW9wdGlvbnN8fHt9O3RoaXMuZmllbGROYW1lPW9wdGlvbnMuZmllbGROYW1lO3RoaXMuZG9tYWluPW9wdGlvbnMuZG9tYWluO3RoaXMuc2VhcmNoTmFtZT1vcHRpb25zLnNlYXJjaE5hbWU7dGhpcy51c2VyTGFuZ3VhZ2VWYWx1ZT1vcHRpb25zLnVzZXJMYW5ndWFnZVZhbHVlO3RoaXMuZG9tYWluLnB1c2goWyduYW1lJywiPSIsYCR7dGhpcy5zZWFyY2hOYW1lfWBdKTt0aGlzLmRhdGFQb2ludElEPW9wdGlvbnMuZGF0YVBvaW50SUQ7dGhpcy5pc0NvbWluZ0Zyb21UcmFuc2xhdGlvbkFsZXJ0PW9wdGlvbnMuaXNDb21pbmdGcm9tVHJhbnNsYXRpb25BbGVydDt0aGlzLmN1cnJlbnRJbnRlcmZhY2VMYW5ndWFnZT1zZXNzaW9uLnVzZXJfY29udGV4dC5sYW5nO3RoaXMuaXNUZXh0PW9wdGlvbnMuaXNUZXh0O3RoaXMuc2hvd1NyYz1vcHRpb25zLnNob3dTcmM7dGhpcy5fc3VwZXIocGFyZW50LF8uZXh0ZW5kKHtzaXplOidsYXJnZScsdGl0bGU6X3QoJ1RyYW5zbGF0ZTogJykrYCR7dGhpcy5maWVsZE5hbWV9YCxidXR0b25zOlt7dGV4dDpfdCgnU2F2ZScpLGNsYXNzZXM6J2J0bi1wcmltYXJ5JyxjbG9zZTp0cnVlLGNsaWNrOnRoaXMuX29uU2F2ZS5iaW5kKHRoaXMpfSx7dGV4dDpfdCgnRGlzY2FyZCcpLGNsb3NlOnRydWV9LF0sfSxvcHRpb25zKSk7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3N1cGVyKCksdGhpcy5fbG9hZExhbmd1YWdlcygpLnRoZW4oKGwpPT57dGhpcy5sYW5ndWFnZXM9bDt9KSx0aGlzLl9sb2FkVHJhbnNsYXRpb25zKCkudGhlbigodCk9Pnt0aGlzLnRyYW5zbGF0aW9ucz10O30pXSkudGhlbigoKT0+e3RoaXMuZGF0YT10aGlzLnRyYW5zbGF0aW9ucy5tYXAoKHRlcm0pPT57bGV0IHJlbGF0ZWRMYW5ndWFnZT10aGlzLmxhbmd1YWdlcy5maW5kKChsYW5ndWFnZSk9Pmxhbmd1YWdlWzBdPT09dGVybS5sYW5nKTtyZXR1cm57aWQ6dGVybS5pZCxsYW5nOnRlcm0ubGFuZyxsYW5nTmFtZTpyZWxhdGVkTGFuZ3VhZ2VbMV0sc291cmNlOnRlcm0uc3JjLHZhbHVlOih0ZXJtLmxhbmc9PT10aGlzLmN1cnJlbnRJbnRlcmZhY2VMYW5ndWFnZSYmIXRoaXMuc2hvd1NyYyYmIXRoaXMuaXNDb21pbmdGcm9tVHJhbnNsYXRpb25BbGVydCk/dGhpcy51c2VyTGFuZ3VhZ2VWYWx1ZTp0ZXJtLnZhbHVlfHwnJ307fSk7dGhpcy5kYXRhLnNvcnQoKGxlZnQscmlnaHQpPT4obGVmdC5sYW5nTmFtZTxyaWdodC5sYW5nTmFtZXx8KGxlZnQubGFuZ05hbWU9PT1yaWdodC5sYW5nTmFtZSYmbGVmdC5zb3VyY2U8cmlnaHQuc291cmNlKSk/LTE6MSk7fSk7fSxfbG9hZFRyYW5zbGF0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ycGMoe21vZGVsOidpci50cmFuc2xhdGlvbicsbWV0aG9kOidzZWFyY2hfcmVhZCcsZmllbGRzOlsnbGFuZycsJ3NyYycsJ3ZhbHVlJ10sZG9tYWluOnRoaXMuZG9tYWluLH0pO30sX2xvYWRMYW5ndWFnZXM6ZnVuY3Rpb24oKXtpZihUcmFuc2xhdGlvbkRpYWxvZy5wcm90b3R5cGUuaW5zdGFsbGVkTGFuZ3VhZ2VzQ2FjaGUpCnJldHVybiBQcm9taXNlLnJlc29sdmUoVHJhbnNsYXRpb25EaWFsb2cucHJvdG90eXBlLmluc3RhbGxlZExhbmd1YWdlc0NhY2hlKTtyZXR1cm4gdGhpcy5fcnBjKHttb2RlbDoncmVzLmxhbmcnLG1ldGhvZDonZ2V0X2luc3RhbGxlZCcsZmllbGRzOlsnY29kZScsJ25hbWUnLCdpc29fY29kZSddLH0pLnRoZW4oKGluc3RhbGxlZExhbmd1YWdlcyk9PntUcmFuc2xhdGlvbkRpYWxvZy5wcm90b3R5cGUuaW5zdGFsbGVkTGFuZ3VhZ2VzQ2FjaGU9aW5zdGFsbGVkTGFuZ3VhZ2VzO3JldHVybiBUcmFuc2xhdGlvbkRpYWxvZy5wcm90b3R5cGUuaW5zdGFsbGVkTGFuZ3VhZ2VzQ2FjaGV9KTt9LF9vblNhdmU6ZnVuY3Rpb24oKXt2YXIgdXBkYXRlZFRlcm09e307dmFyIHVwZGF0ZUZvcm1WaWV3RmllbGQ7dGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPXRleHRdLHRleHRhcmVhJykuZm9yRWFjaCgodCk9Pnt2YXIgaW5pdGlhbFZhbHVlPXRoaXMuZGF0YS5maW5kKChkKT0+ZC5pZD09dC5kYXRhc2V0LmlkKTtpZihpbml0aWFsVmFsdWUudmFsdWUhPT10LnZhbHVlKXt1cGRhdGVkVGVybVt0LmRhdGFzZXQuaWRdPXQudmFsdWU7aWYoaW5pdGlhbFZhbHVlLmxhbmc9PT10aGlzLmN1cnJlbnRJbnRlcmZhY2VMYW5ndWFnZSYmIXRoaXMuc2hvd1NyYyl7dmFyIGNoYW5nZXM9e307Y2hhbmdlc1t0aGlzLmZpZWxkTmFtZV09dXBkYXRlZFRlcm1baW5pdGlhbFZhbHVlLmlkXTt1cGRhdGVGb3JtVmlld0ZpZWxkPXtkYXRhUG9pbnRJRDp0aGlzLmRhdGFQb2ludElELGNoYW5nZXM6Y2hhbmdlcyxkb05vdFNldERpcnR5OmZhbHNlLH07fX19KTt2YXIgc2F2ZVVwZGF0ZWRUZXJtc1Byb21zPU9iamVjdC5rZXlzKHVwZGF0ZWRUZXJtKS5tYXAoKGlkKT0+e3ZhciB3cml0ZVRyYW5zbGF0aW9uPXttb2RlbDonaXIudHJhbnNsYXRpb24nLG1ldGhvZDond3JpdGUnLGNvbnRleHQ6dGhpcy5jb250ZXh0LGFyZ3M6W1twYXJzZUludChpZCwxMCldLHt2YWx1ZTp1cGRhdGVkVGVybVtpZF19XX07cmV0dXJuIHRoaXMuX3JwYyh3cml0ZVRyYW5zbGF0aW9uKTt9KTtyZXR1cm4gUHJvbWlzZS5hbGwoc2F2ZVVwZGF0ZWRUZXJtc1Byb21zKS50aGVuKCgpPT57aWYodXBkYXRlRm9ybVZpZXdGaWVsZCl7dGhpcy50cmlnZ2VyX3VwKCdmaWVsZF9jaGFuZ2VkJyx1cGRhdGVGb3JtVmlld0ZpZWxkKTt9fSk7fX0pO3JldHVybiBUcmFuc2xhdGlvbkRpYWxvZzt9KTs7CgovKiAvd2ViL3N0YXRpYy9zcmMvanMvbGlicy96b29tb2Rvby5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWIuem9vbW9kb28nLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgZHcsZGgscncscmgsbHgsbHk7dmFyIGRlZmF1bHRzPXtsaW5rVGFnOidhJyxsaW5rQXR0cmlidXRlOidkYXRhLXpvb20taW1hZ2UnLGV2ZW50OidjbGljaycscHJldmVudENsaWNrczp0cnVlLGRpc2FibGVkT25Nb2JpbGU6dHJ1ZSxiZWZvcmVTaG93OiQubm9vcCxiZWZvcmVIaWRlOiQubm9vcCxvblNob3c6JC5ub29wLG9uSGlkZTokLm5vb3Asb25Nb3ZlOiQubm9vcCxiZWZvcmVBdHRhY2g6JC5ub29wfTtmdW5jdGlvbiBab29tT2Rvbyh0YXJnZXQsb3B0aW9ucyl7dGhpcy4kdGFyZ2V0PSQodGFyZ2V0KTt0aGlzLm9wdHM9JC5leHRlbmQoe30sZGVmYXVsdHMsb3B0aW9ucyx0aGlzLiR0YXJnZXQuZGF0YSgpKTtpZih0aGlzLmlzT3Blbj09PXVuZGVmaW5lZCl7dGhpcy5faW5pdCgpO319Clpvb21PZG9vLnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbigpe2lmKHdpbmRvdy5vdXRlcldpZHRoPjQ2N3x8IXRoaXMub3B0cy5kaXNhYmxlZE9uTW9iaWxlKXt0aGlzLiRsaW5rPXRoaXMuJHRhcmdldC5maW5kKHRoaXMub3B0cy5saW5rVGFnKS5sZW5ndGgmJnRoaXMuJHRhcmdldC5maW5kKHRoaXMub3B0cy5saW5rVGFnKXx8dGhpcy4kdGFyZ2V0O3RoaXMuJGltYWdlPXRoaXMuJHRhcmdldC5maW5kKCdpbWcnKS5sZW5ndGgmJnRoaXMuJHRhcmdldC5maW5kKCdpbWcnKXx8dGhpcy4kdGFyZ2V0O3RoaXMuJGZseW91dD0kKCc8ZGl2IGNsYXNzPSJ6b29tb2Rvby1mbHlvdXQiIC8+Jyk7dmFyICRhdHRhY2g9dGhpcy4kdGFyZ2V0O2lmKHRoaXMub3B0cy5hdHRhY2ghPT11bmRlZmluZWQmJnRoaXMuJHRhcmdldC5wYXJlbnRzKHRoaXMub3B0cy5hdHRhY2gpLmxlbmd0aCl7JGF0dGFjaD10aGlzLiR0YXJnZXQucGFyZW50cyh0aGlzLm9wdHMuYXR0YWNoKTt9CiRhdHRhY2gucGFyZW50KCkub24oJ21vdXNlbW92ZS56b29tb2RvbyB0b3VjaG1vdmUuem9vbW9kb28nLCQucHJveHkodGhpcy5fb25Nb3ZlLHRoaXMpKTskYXR0YWNoLnBhcmVudCgpLm9uKCdtb3VzZWxlYXZlLnpvb21vZG9vIHRvdWNoZW5kLnpvb21vZG9vJywkLnByb3h5KHRoaXMuX29uTGVhdmUsdGhpcykpO3RoaXMuJHRhcmdldC5vbih0aGlzLm9wdHMuZXZlbnQrJy56b29tb2RvbyB0b3VjaHN0YXJ0Lnpvb21vZG9vJywkLnByb3h5KHRoaXMuX29uRW50ZXIsdGhpcykpO2lmKHRoaXMub3B0cy5wcmV2ZW50Q2xpY2tzKXt0aGlzLiR0YXJnZXQub24oJ2NsaWNrLnpvb21vZG9vJyxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7fSk7fWVsc2V7dmFyIHNlbGY9dGhpczt0aGlzLiR0YXJnZXQub24oJ2NsaWNrLnpvb21vZG9vJyxmdW5jdGlvbigpe3NlbGYuaGlkZSgpO3NlbGYuJHRhcmdldC51bmJpbmQoKTt9KTt9fX07Wm9vbU9kb28ucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oZSx0ZXN0TW91c2VPdmVyKXt2YXIgdzEsaDEsdzIsaDI7dmFyIHNlbGY9dGhpcztpZih0aGlzLm9wdHMuYmVmb3JlU2hvdy5jYWxsKHRoaXMpPT09ZmFsc2UpcmV0dXJuO2lmKCF0aGlzLmlzUmVhZHkpe3JldHVybiB0aGlzLl9sb2FkSW1hZ2UodGhpcy4kbGluay5hdHRyKHRoaXMub3B0cy5saW5rQXR0cmlidXRlKSxmdW5jdGlvbigpe2lmKHNlbGYuaXNNb3VzZU92ZXJ8fCF0ZXN0TW91c2VPdmVyKXtzZWxmLnNob3coZSk7fX0pO30KdmFyICRhdHRhY2g9dGhpcy4kdGFyZ2V0O2lmKHRoaXMub3B0cy5hdHRhY2ghPT11bmRlZmluZWQmJnRoaXMuJHRhcmdldC5wYXJlbnRzKHRoaXMub3B0cy5hdHRhY2gpLmxlbmd0aCl7JGF0dGFjaD10aGlzLiR0YXJnZXQucGFyZW50cyh0aGlzLm9wdHMuYXR0YWNoKTt9CiRhdHRhY2gucGFyZW50KCkuZmluZCgnLnpvb21vZG9vLWZseW91dCcpLnJlbW92ZSgpO3RoaXMuJGZseW91dC5yZW1vdmVBdHRyKCdzdHlsZScpOyRhdHRhY2gucGFyZW50KCkuYXBwZW5kKHRoaXMuJGZseW91dCk7aWYodGhpcy5vcHRzLmF0dGFjaFRvVGFyZ2V0KXt0aGlzLm9wdHMuYmVmb3JlQXR0YWNoLmNhbGwodGhpcyk7aWYodGhpcy4kem9vbS5oZWlnaHQoKTx0aGlzLiRmbHlvdXQuaGVpZ2h0KCkpe3RoaXMuJGZseW91dC5jc3MoJ2hlaWdodCcsdGhpcy4kem9vbS5oZWlnaHQoKSsncHgnKTt9CmlmKHRoaXMuJHpvb20ud2lkdGgoKTx0aGlzLiRmbHlvdXQud2lkdGgoKSl7dGhpcy4kZmx5b3V0LmNzcygnd2lkdGgnLHRoaXMuJHpvb20ud2lkdGgoKSsncHgnKTt9CnZhciBvZmZzZXQ9dGhpcy4kdGFyZ2V0Lm9mZnNldCgpO3ZhciBsZWZ0PW9mZnNldC5sZWZ0LXRoaXMuJGZseW91dC53aWR0aCgpO3ZhciB0b3A9b2Zmc2V0LnRvcDtpZihsZWZ0PDApe2lmKG9mZnNldC5sZWZ0PCgkKGRvY3VtZW50KS53aWR0aCgpLzIpKXtsZWZ0PW9mZnNldC5sZWZ0K3RoaXMuJHRhcmdldC53aWR0aCgpO31lbHNle2xlZnQ9MDt9fQppZihsZWZ0K3RoaXMuJGZseW91dC53aWR0aCgpPiQoZG9jdW1lbnQpLndpZHRoKCkpe3RoaXMuJGZseW91dC5jc3MoJ3dpZHRoJywkKGRvY3VtZW50KS53aWR0aCgpLWxlZnQrJ3B4Jyk7fWVsc2UgaWYobGVmdD09PTApe3RoaXMuJGZseW91dC5jc3MoJ3dpZHRoJyxvZmZzZXQubGVmdCsncHgnKTt9CmlmKCh0b3ArdGhpcy4kZmx5b3V0LmhlaWdodCgpKT4kKGRvY3VtZW50KS5oZWlnaHQoKSl7dG9wPSQoZG9jdW1lbnQpLmhlaWdodCgpLXRoaXMuJGZseW91dC5oZWlnaHQoKTt9CnRoaXMuJGZseW91dC5jc3MoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZTNkKCcrbGVmdCsncHgsICcrdG9wKydweCwgMHB4KScpO30KdzE9dGhpcy4kdGFyZ2V0LndpZHRoKCk7aDE9dGhpcy4kdGFyZ2V0LmhlaWdodCgpO3cyPXRoaXMuJGZseW91dC53aWR0aCgpO2gyPXRoaXMuJGZseW91dC5oZWlnaHQoKTtkdz10aGlzLiR6b29tLndpZHRoKCktdzI7ZGg9dGhpcy4kem9vbS5oZWlnaHQoKS1oMjtpZihkdzwwKWR3PTA7aWYoZGg8MClkaD0wO3J3PWR3L3cxO3JoPWRoL2gxO3RoaXMuaXNPcGVuPXRydWU7dGhpcy5vcHRzLm9uU2hvdy5jYWxsKHRoaXMpO2lmKGUpe3RoaXMuX21vdmUoZSk7fX07Wm9vbU9kb28ucHJvdG90eXBlLl9vbkVudGVyPWZ1bmN0aW9uKGUpe3ZhciB0b3VjaGVzPWUub3JpZ2luYWxFdmVudC50b3VjaGVzO3RoaXMuaXNNb3VzZU92ZXI9dHJ1ZTtpZighdG91Y2hlc3x8dG91Y2hlcy5sZW5ndGg9PT0xKXtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5zaG93KGUsdHJ1ZSk7fX07Wm9vbU9kb28ucHJvdG90eXBlLl9vbk1vdmU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNPcGVuKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5fbW92ZShlKTt9O1pvb21PZG9vLnByb3RvdHlwZS5fb25MZWF2ZT1mdW5jdGlvbigpe3RoaXMuaXNNb3VzZU92ZXI9ZmFsc2U7aWYodGhpcy5pc09wZW4pe3RoaXMuaGlkZSgpO319O1pvb21PZG9vLnByb3RvdHlwZS5fb25Mb2FkPWZ1bmN0aW9uKGUpe2lmKCFlLmN1cnJlbnRUYXJnZXQud2lkdGgpcmV0dXJuO3RoaXMuaXNSZWFkeT10cnVlO3RoaXMuJGZseW91dC5odG1sKHRoaXMuJHpvb20pO2lmKGUuZGF0YS5jYWxsKXtlLmRhdGEoKTt9fTtab29tT2Rvby5wcm90b3R5cGUuX2xvYWRJbWFnZT1mdW5jdGlvbihocmVmLGNhbGxiYWNrKXt2YXIgem9vbT1uZXcgSW1hZ2UoKTt0aGlzLiR6b29tPSQoem9vbSkub24oJ2xvYWQnLGNhbGxiYWNrLCQucHJveHkodGhpcy5fb25Mb2FkLHRoaXMpKTt6b29tLnN0eWxlLnBvc2l0aW9uPSdhYnNvbHV0ZSc7em9vbS5zcmM9aHJlZjt9O1pvb21PZG9vLnByb3RvdHlwZS5fbW92ZT1mdW5jdGlvbihlKXtpZihlLnR5cGUuaW5kZXhPZigndG91Y2gnKT09PTApe3ZhciB0b3VjaGxpc3Q9ZS50b3VjaGVzfHxlLm9yaWdpbmFsRXZlbnQudG91Y2hlcztseD10b3VjaGxpc3RbMF0ucGFnZVg7bHk9dG91Y2hsaXN0WzBdLnBhZ2VZO31lbHNle2x4PWUucGFnZVh8fGx4O2x5PWUucGFnZVl8fGx5O30KdmFyIG9mZnNldD10aGlzLiR0YXJnZXQub2Zmc2V0KCk7dmFyIHB0PWx5LW9mZnNldC50b3A7dmFyIHBsPWx4LW9mZnNldC5sZWZ0O3ZhciB4dD1NYXRoLmNlaWwocHQqcmgpO3ZhciB4bD1NYXRoLmNlaWwocGwqcncpO2lmKHhsPDB8fHh0PDB8fHhsPmR3fHx4dD5kaHx8bHg+KG9mZnNldC5sZWZ0K3RoaXMuJHRhcmdldC53aWR0aCgpKSl7dGhpcy5oaWRlKCk7fWVsc2V7dmFyIHRvcD14dCotMTt2YXIgbGVmdD14bCotMTt0aGlzLiR6b29tLmNzcyh7dG9wOnRvcCxsZWZ0OmxlZnR9KTt0aGlzLm9wdHMub25Nb3ZlLmNhbGwodGhpcyx0b3AsbGVmdCk7fX07Wm9vbU9kb28ucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc09wZW4pcmV0dXJuO2lmKHRoaXMub3B0cy5iZWZvcmVIaWRlLmNhbGwodGhpcyk9PT1mYWxzZSlyZXR1cm47dGhpcy4kZmx5b3V0LmRldGFjaCgpO3RoaXMuaXNPcGVuPWZhbHNlO3RoaXMub3B0cy5vbkhpZGUuY2FsbCh0aGlzKTt9OyQuZm4uem9vbU9kb289ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhcGk9JC5kYXRhKHRoaXMsJ3pvb21PZG9vJyk7aWYoIWFwaSl7JC5kYXRhKHRoaXMsJ3pvb21PZG9vJyxuZXcgWm9vbU9kb28odGhpcyxvcHRpb25zKSk7fWVsc2UgaWYoYXBpLmlzT3Blbj09PXVuZGVmaW5lZCl7YXBpLl9pbml0KCk7fX0pO307fSk7OwoKLyogL3dlYl9lZGl0b3Ivc3RhdGljL2xpYi92a2JlYXV0aWZ5L3ZrYmVhdXRpZnkuMC45OS4wMC5iZXRhLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8KKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY3JlYXRlU2hpZnRBcnIoc3RlcCl7dmFyIHNwYWNlPScgICAgJztpZihpc05hTihwYXJzZUludChzdGVwKSkpe3NwYWNlPXN0ZXA7fWVsc2V7c3dpdGNoKHN0ZXApe2Nhc2UgMTpzcGFjZT0nICc7YnJlYWs7Y2FzZSAyOnNwYWNlPScgICc7YnJlYWs7Y2FzZSAzOnNwYWNlPScgICAnO2JyZWFrO2Nhc2UgNDpzcGFjZT0nICAgICc7YnJlYWs7Y2FzZSA1OnNwYWNlPScgICAgICc7YnJlYWs7Y2FzZSA2OnNwYWNlPScgICAgICAnO2JyZWFrO2Nhc2UgNzpzcGFjZT0nICAgICAgICc7YnJlYWs7Y2FzZSA4OnNwYWNlPScgICAgICAgICc7YnJlYWs7Y2FzZSA5OnNwYWNlPScgICAgICAgICAnO2JyZWFrO2Nhc2UgMTA6c3BhY2U9JyAgICAgICAgICAnO2JyZWFrO2Nhc2UgMTE6c3BhY2U9JyAgICAgICAgICAgJzticmVhaztjYXNlIDEyOnNwYWNlPScgICAgICAgICAgICAnO2JyZWFrO319CnZhciBzaGlmdD1bJ1xuJ107Zm9yKGl4PTA7aXg8MTAwO2l4Kyspe3NoaWZ0LnB1c2goc2hpZnRbaXhdK3NwYWNlKTt9CnJldHVybiBzaGlmdDt9CmZ1bmN0aW9uIHZrYmVhdXRpZnkoKXt0aGlzLnN0ZXA9JyAgICAnO3RoaXMuc2hpZnQ9Y3JlYXRlU2hpZnRBcnIodGhpcy5zdGVwKTt9O3ZrYmVhdXRpZnkucHJvdG90eXBlLnhtbD1mdW5jdGlvbih0ZXh0LHN0ZXApe3ZhciBhcj10ZXh0LnJlcGxhY2UoLz5cc3swLH08L2csIj48IikucmVwbGFjZSgvPC9nLCJ+Ojp+PCIpLnJlcGxhY2UoL1xzKnhtbG5zXDovZywifjo6fnhtbG5zOiIpLnJlcGxhY2UoL1xzKnhtbG5zXD0vZywifjo6fnhtbG5zPSIpLnNwbGl0KCd+Ojp+JyksbGVuPWFyLmxlbmd0aCxpbkNvbW1lbnQ9ZmFsc2UsZGVlcD0wLHN0cj0nJyxpeD0wLHNoaWZ0PXN0ZXA/Y3JlYXRlU2hpZnRBcnIoc3RlcCk6dGhpcy5zaGlmdDtmb3IoaXg9MDtpeDxsZW47aXgrKyl7aWYoYXJbaXhdLnNlYXJjaCgvPCEvKT4tMSl7c3RyKz1zaGlmdFtkZWVwXSthcltpeF07aW5Db21tZW50PXRydWU7aWYoYXJbaXhdLnNlYXJjaCgvLS0+Lyk+LTF8fGFyW2l4XS5zZWFyY2goL1xdPi8pPi0xfHxhcltpeF0uc2VhcmNoKC8hRE9DVFlQRS8pPi0xKXtpbkNvbW1lbnQ9ZmFsc2U7fX1lbHNlCmlmKGFyW2l4XS5zZWFyY2goLy0tPi8pPi0xfHxhcltpeF0uc2VhcmNoKC9cXT4vKT4tMSl7c3RyKz1hcltpeF07aW5Db21tZW50PWZhbHNlO31lbHNlCmlmKC9ePFx3Ly5leGVjKGFyW2l4LTFdKSYmL148XC9cdy8uZXhlYyhhcltpeF0pJiYvXjxbXHc6XC1cLlwsXSsvLmV4ZWMoYXJbaXgtMV0pPT0vXjxcL1tcdzpcLVwuXCxdKy8uZXhlYyhhcltpeF0pWzBdLnJlcGxhY2UoJy8nLCcnKSl7c3RyKz1hcltpeF07aWYoIWluQ29tbWVudClkZWVwLS07fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvPFx3Lyk+LTEmJmFyW2l4XS5zZWFyY2goLzxcLy8pPT0tMSYmYXJbaXhdLnNlYXJjaCgvXC8+Lyk9PS0xKXtzdHI9IWluQ29tbWVudD9zdHIrPXNoaWZ0W2RlZXArK10rYXJbaXhdOnN0cis9YXJbaXhdO31lbHNlCmlmKGFyW2l4XS5zZWFyY2goLzxcdy8pPi0xJiZhcltpeF0uc2VhcmNoKC88XC8vKT4tMSl7c3RyPSFpbkNvbW1lbnQ/c3RyKz1zaGlmdFtkZWVwXSthcltpeF06c3RyKz1hcltpeF07fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvPFwvLyk+LTEpe3N0cj0haW5Db21tZW50P3N0cis9c2hpZnRbLS1kZWVwXSthcltpeF06c3RyKz1hcltpeF07fWVsc2UKaWYoYXJbaXhdLnNlYXJjaCgvXC8+Lyk+LTEpe3N0cj0haW5Db21tZW50P3N0cis9c2hpZnRbZGVlcF0rYXJbaXhdOnN0cis9YXJbaXhdO31lbHNlCmlmKGFyW2l4XS5zZWFyY2goLzxcPy8pPi0xKXtzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTt9ZWxzZQppZihhcltpeF0uc2VhcmNoKC94bWxuc1w6Lyk+LTF8fGFyW2l4XS5zZWFyY2goL3htbG5zXD0vKT4tMSl7c3RyKz1zaGlmdFtkZWVwXSthcltpeF07fQplbHNle3N0cis9YXJbaXhdO319CnJldHVybihzdHJbMF09PSdcbicpP3N0ci5zbGljZSgxKTpzdHI7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5qc29uPWZ1bmN0aW9uKHRleHQsc3RlcCl7dmFyIHN0ZXA9c3RlcD9zdGVwOnRoaXMuc3RlcDtpZih0eXBlb2YgSlNPTj09PSd1bmRlZmluZWQnKXJldHVybiB0ZXh0O2lmKHR5cGVvZiB0ZXh0PT09InN0cmluZyIpcmV0dXJuIEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UodGV4dCksbnVsbCxzdGVwKTtpZih0eXBlb2YgdGV4dD09PSJvYmplY3QiKXJldHVybiBKU09OLnN0cmluZ2lmeSh0ZXh0LG51bGwsc3RlcCk7cmV0dXJuIHRleHQ7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5jc3M9ZnVuY3Rpb24odGV4dCxzdGVwKXt2YXIgYXI9dGV4dC5yZXBsYWNlKC9cc3sxLH0vZywnICcpLnJlcGxhY2UoL1x7L2csInt+Ojp+IikucmVwbGFjZSgvXH0vZywifjo6fn1+Ojp+IikucmVwbGFjZSgvXDsvZywiO346On4iKS5yZXBsYWNlKC9cL1wqL2csIn46On4vKiIpLnJlcGxhY2UoL1wqXC8vZywiKi9+Ojp+IikucmVwbGFjZSgvfjo6flxzezAsfX46On4vZywifjo6fiIpLnNwbGl0KCd+Ojp+JyksbGVuPWFyLmxlbmd0aCxkZWVwPTAsc3RyPScnLGl4PTAsc2hpZnQ9c3RlcD9jcmVhdGVTaGlmdEFycihzdGVwKTp0aGlzLnNoaWZ0O2ZvcihpeD0wO2l4PGxlbjtpeCsrKXtpZigvXHsvLmV4ZWMoYXJbaXhdKSl7c3RyKz1zaGlmdFtkZWVwKytdK2FyW2l4XTt9ZWxzZQppZigvXH0vLmV4ZWMoYXJbaXhdKSl7c3RyKz1zaGlmdFstLWRlZXBdK2FyW2l4XTt9ZWxzZQppZigvXCpcXC8uZXhlYyhhcltpeF0pKXtzdHIrPXNoaWZ0W2RlZXBdK2FyW2l4XTt9CmVsc2V7c3RyKz1zaGlmdFtkZWVwXSthcltpeF07fX0KcmV0dXJuIHN0ci5yZXBsYWNlKC9eXG57MSx9LywnJyk7fQpmdW5jdGlvbiBpc1N1YnF1ZXJ5KHN0cixwYXJlbnRoZXNpc0xldmVsKXtyZXR1cm4gcGFyZW50aGVzaXNMZXZlbC0oc3RyLnJlcGxhY2UoL1woL2csJycpLmxlbmd0aC1zdHIucmVwbGFjZSgvXCkvZywnJykubGVuZ3RoKX0KZnVuY3Rpb24gc3BsaXRfc3FsKHN0cix0YWIpe3JldHVybiBzdHIucmVwbGFjZSgvXHN7MSx9L2csIiAiKS5yZXBsYWNlKC8gQU5EIC9pZywifjo6fiIrdGFiK3RhYisiQU5EICIpLnJlcGxhY2UoLyBCRVRXRUVOIC9pZywifjo6fiIrdGFiKyJCRVRXRUVOICIpLnJlcGxhY2UoLyBDQVNFIC9pZywifjo6fiIrdGFiKyJDQVNFICIpLnJlcGxhY2UoLyBFTFNFIC9pZywifjo6fiIrdGFiKyJFTFNFICIpLnJlcGxhY2UoLyBFTkQgL2lnLCJ+Ojp+Iit0YWIrIkVORCAiKS5yZXBsYWNlKC8gRlJPTSAvaWcsIn46On5GUk9NICIpLnJlcGxhY2UoLyBHUk9VUFxzezEsfUJZL2lnLCJ+Ojp+R1JPVVAgQlkgIikucmVwbGFjZSgvIEhBVklORyAvaWcsIn46On5IQVZJTkcgIikucmVwbGFjZSgvIElOIC9pZywiIElOICIpLnJlcGxhY2UoLyBKT0lOIC9pZywifjo6fkpPSU4gIikucmVwbGFjZSgvIENST1NTfjo6fnsxLH1KT0lOIC9pZywifjo6fkNST1NTIEpPSU4gIikucmVwbGFjZSgvIElOTkVSfjo6fnsxLH1KT0lOIC9pZywifjo6fklOTkVSIEpPSU4gIikucmVwbGFjZSgvIExFRlR+Ojp+ezEsfUpPSU4gL2lnLCJ+Ojp+TEVGVCBKT0lOICIpLnJlcGxhY2UoLyBSSUdIVH46On57MSx9Sk9JTiAvaWcsIn46On5SSUdIVCBKT0lOICIpLnJlcGxhY2UoLyBPTiAvaWcsIn46On4iK3RhYisiT04gIikucmVwbGFjZSgvIE9SIC9pZywifjo6fiIrdGFiK3RhYisiT1IgIikucmVwbGFjZSgvIE9SREVSXHN7MSx9QlkvaWcsIn46On5PUkRFUiBCWSAiKS5yZXBsYWNlKC8gT1ZFUiAvaWcsIn46On4iK3RhYisiT1ZFUiAiKS5yZXBsYWNlKC9cKFxzezAsfVNFTEVDVCAvaWcsIn46On4oU0VMRUNUICIpLnJlcGxhY2UoL1wpXHN7MCx9U0VMRUNUIC9pZywiKX46On5TRUxFQ1QgIikucmVwbGFjZSgvIFRIRU4gL2lnLCIgVEhFTn46On4iK3RhYisiIikucmVwbGFjZSgvIFVOSU9OIC9pZywifjo6flVOSU9Ofjo6fiIpLnJlcGxhY2UoLyBVU0lORyAvaWcsIn46On5VU0lORyAiKS5yZXBsYWNlKC8gV0hFTiAvaWcsIn46On4iK3RhYisiV0hFTiAiKS5yZXBsYWNlKC8gV0hFUkUgL2lnLCJ+Ojp+V0hFUkUgIikucmVwbGFjZSgvIFdJVEggL2lnLCJ+Ojp+V0lUSCAiKS5yZXBsYWNlKC8gQUxMIC9pZywiIEFMTCAiKS5yZXBsYWNlKC8gQVMgL2lnLCIgQVMgIikucmVwbGFjZSgvIEFTQyAvaWcsIiBBU0MgIikucmVwbGFjZSgvIERFU0MgL2lnLCIgREVTQyAiKS5yZXBsYWNlKC8gRElTVElOQ1QgL2lnLCIgRElTVElOQ1QgIikucmVwbGFjZSgvIEVYSVNUUyAvaWcsIiBFWElTVFMgIikucmVwbGFjZSgvIE5PVCAvaWcsIiBOT1QgIikucmVwbGFjZSgvIE5VTEwgL2lnLCIgTlVMTCAiKS5yZXBsYWNlKC8gTElLRSAvaWcsIiBMSUtFICIpLnJlcGxhY2UoL1xzezAsfVNFTEVDVCAvaWcsIlNFTEVDVCAiKS5yZXBsYWNlKC9cc3swLH1VUERBVEUgL2lnLCJVUERBVEUgIikucmVwbGFjZSgvIFNFVCAvaWcsIiBTRVQgIikucmVwbGFjZSgvfjo6fnsxLH0vZywifjo6fiIpLnNwbGl0KCd+Ojp+Jyk7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5zcWw9ZnVuY3Rpb24odGV4dCxzdGVwKXt2YXIgYXJfYnlfcXVvdGU9dGV4dC5yZXBsYWNlKC9cc3sxLH0vZywiICIpLnJlcGxhY2UoL1wnL2lnLCJ+Ojp+XCciKS5zcGxpdCgnfjo6ficpLGxlbj1hcl9ieV9xdW90ZS5sZW5ndGgsYXI9W10sZGVlcD0wLHRhYj10aGlzLnN0ZXAsaW5Db21tZW50PXRydWUsaW5RdW90ZT1mYWxzZSxwYXJlbnRoZXNpc0xldmVsPTAsc3RyPScnLGl4PTAsc2hpZnQ9c3RlcD9jcmVhdGVTaGlmdEFycihzdGVwKTp0aGlzLnNoaWZ0Oztmb3IoaXg9MDtpeDxsZW47aXgrKyl7aWYoaXglMil7YXI9YXIuY29uY2F0KGFyX2J5X3F1b3RlW2l4XSk7fWVsc2V7YXI9YXIuY29uY2F0KHNwbGl0X3NxbChhcl9ieV9xdW90ZVtpeF0sdGFiKSk7fX0KbGVuPWFyLmxlbmd0aDtmb3IoaXg9MDtpeDxsZW47aXgrKyl7cGFyZW50aGVzaXNMZXZlbD1pc1N1YnF1ZXJ5KGFyW2l4XSxwYXJlbnRoZXNpc0xldmVsKTtpZigvXHN7MCx9XHN7MCx9U0VMRUNUXHN7MCx9Ly5leGVjKGFyW2l4XSkpe2FyW2l4XT1hcltpeF0ucmVwbGFjZSgvXCwvZywiLFxuIit0YWIrdGFiKyIiKX0KaWYoL1xzezAsfVxzezAsfVNFVFxzezAsfS8uZXhlYyhhcltpeF0pKXthcltpeF09YXJbaXhdLnJlcGxhY2UoL1wsL2csIixcbiIrdGFiK3RhYisiIil9CmlmKC9cc3swLH1cKFxzezAsfVNFTEVDVFxzezAsfS8uZXhlYyhhcltpeF0pKXtkZWVwKys7c3RyKz1zaGlmdFtkZWVwXSthcltpeF07fWVsc2UKaWYoL1wnLy5leGVjKGFyW2l4XSkpe2lmKHBhcmVudGhlc2lzTGV2ZWw8MSYmZGVlcCl7ZGVlcC0tO30Kc3RyKz1hcltpeF07fQplbHNle3N0cis9c2hpZnRbZGVlcF0rYXJbaXhdO2lmKHBhcmVudGhlc2lzTGV2ZWw8MSYmZGVlcCl7ZGVlcC0tO319CnZhciBqdW5rPTA7fQpzdHI9c3RyLnJlcGxhY2UoL15cbnsxLH0vLCcnKS5yZXBsYWNlKC9cbnsxLH0vZywiXG4iKTtyZXR1cm4gc3RyO30KdmtiZWF1dGlmeS5wcm90b3R5cGUueG1sbWluPWZ1bmN0aW9uKHRleHQscHJlc2VydmVDb21tZW50cyl7dmFyIHN0cj1wcmVzZXJ2ZUNvbW1lbnRzP3RleHQ6dGV4dC5yZXBsYWNlKC9cPCFbIFxyXG5cdF0qKC0tKFteXC1dfFtcclxuXXwtW15cLV0pKi0tWyBcclxuXHRdKilcPi9nLCIiKS5yZXBsYWNlKC9bIFxyXG5cdF17MSx9eG1sbnMvZywnIHhtbG5zJyk7cmV0dXJuIHN0ci5yZXBsYWNlKC8+XHN7MCx9PC9nLCI+PCIpO30KdmtiZWF1dGlmeS5wcm90b3R5cGUuanNvbm1pbj1mdW5jdGlvbih0ZXh0KXtpZih0eXBlb2YgSlNPTj09PSd1bmRlZmluZWQnKXJldHVybiB0ZXh0O3JldHVybiBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHRleHQpLG51bGwsMCk7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5jc3NtaW49ZnVuY3Rpb24odGV4dCxwcmVzZXJ2ZUNvbW1lbnRzKXt2YXIgc3RyPXByZXNlcnZlQ29tbWVudHM/dGV4dDp0ZXh0LnJlcGxhY2UoL1wvXCooW14qXXxbXHJcbl18KFwqKyhbXiovXXxbXHJcbl0pKSkqXCorXC8vZywiIik7cmV0dXJuIHN0ci5yZXBsYWNlKC9cc3sxLH0vZywnICcpLnJlcGxhY2UoL1x7XHN7MSx9L2csInsiKS5yZXBsYWNlKC9cfVxzezEsfS9nLCJ9IikucmVwbGFjZSgvXDtcc3sxLH0vZywiOyIpLnJlcGxhY2UoL1wvXCpcc3sxLH0vZywiLyoiKS5yZXBsYWNlKC9cKlwvXHN7MSx9L2csIiovIik7fQp2a2JlYXV0aWZ5LnByb3RvdHlwZS5zcWxtaW49ZnVuY3Rpb24odGV4dCl7cmV0dXJuIHRleHQucmVwbGFjZSgvXHN7MSx9L2csIiAiKS5yZXBsYWNlKC9cc3sxLH1cKC8sIigiKS5yZXBsYWNlKC9cc3sxLH1cKS8sIikiKTt9CndpbmRvdy52a2JlYXV0aWZ5PW5ldyB2a2JlYXV0aWZ5KCk7fSkoKTs7CgovKiAvd2ViX2VkaXRvci9zdGF0aWMvc3JjL2pzL2NvbW1vbi9hY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViX2VkaXRvci5hY2UnLGZ1bmN0aW9uKHJlcXVpcmUpeyd1c2Ugc3RyaWN0Jzt2YXIgYWpheD1yZXF1aXJlKCd3ZWIuYWpheCcpO3ZhciBjb25maWc9cmVxdWlyZSgnd2ViLmNvbmZpZycpO3ZhciBjb25jdXJyZW5jeT1yZXF1aXJlKCd3ZWIuY29uY3VycmVuY3knKTt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBEaWFsb2c9cmVxdWlyZSgnd2ViLkRpYWxvZycpO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBsb2NhbFN0b3JhZ2U9cmVxdWlyZSgnd2ViLmxvY2FsX3N0b3JhZ2UnKTt2YXIgX3Q9Y29yZS5fdDtmdW5jdGlvbiBfZ2V0Q2hlY2tSZXR1cm4oaXNWYWxpZCxlcnJvckxpbmUsZXJyb3JNZXNzYWdlKXtyZXR1cm57aXNWYWxpZDppc1ZhbGlkLGVycm9yOmlzVmFsaWQ/bnVsbDp7bGluZTplcnJvckxpbmUsbWVzc2FnZTplcnJvck1lc3NhZ2UsfSx9O30KZnVuY3Rpb24gY2hlY2tYTUwoeG1sKXtpZih0eXBlb2Ygd2luZG93LkRPTVBhcnNlciE9J3VuZGVmaW5lZCcpe3ZhciB4bWxEb2M9KG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkpLnBhcnNlRnJvbVN0cmluZyh4bWwsJ3RleHQveG1sJyk7dmFyIGVycm9yPXhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKTtpZihlcnJvci5sZW5ndGg+MCl7cmV0dXJuIF9nZXRDaGVja1JldHVybihmYWxzZSxwYXJzZUludChlcnJvclswXS5pbm5lckhUTUwubWF0Y2goL1tMbF1pbmVbXlxkXSsoXGQrKS8pWzFdLDEwKSxlcnJvclswXS5pbm5lckhUTUwpO319ZWxzZSBpZih0eXBlb2Ygd2luZG93LkFjdGl2ZVhPYmplY3QhPSd1bmRlZmluZWQnJiZuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxET00nKSl7dmFyIHhtbERvY0lFPW5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTERPTScpO3htbERvY0lFLmFzeW5jPSdmYWxzZSc7eG1sRG9jSUUubG9hZFhNTCh4bWwpO2lmKHhtbERvY0lFLnBhcnNlRXJyb3IubGluZT4wKXtyZXR1cm4gX2dldENoZWNrUmV0dXJuKGZhbHNlLHhtbERvY0lFLnBhcnNlRXJyb3IubGluZSx4bWxEb2NJRS5wYXJzZUVycm9yLnJlYXNvbik7fX0KcmV0dXJuIF9nZXRDaGVja1JldHVybih0cnVlKTt9CmZ1bmN0aW9uIGZvcm1hdFhNTCh4bWwpe2lmKC88c2NyaXB0KD86IFtePl0qKT8+W148XVtcc1xTXSo8XC9zY3JpcHQ+L2kudGVzdCh4bWwpKXtyZXR1cm4geG1sO30KcmV0dXJuIHdpbmRvdy52a2JlYXV0aWZ5LnhtbCh4bWwsNCk7fQp2YXIgY2hlY2tTQ1NTPShmdW5jdGlvbigpe3ZhciBtYXBwaW5nPXsneyc6J30nLCd9JzoneycsJygnOicpJywnKSc6JygnLCdbJzonXScsJ10nOidbJyx9O3ZhciBvcGVuaW5ncz1bJ3snLCcoJywnWyddO3ZhciBjbG9zaW5ncz1bJ30nLCcpJywnXSddO3JldHVybiBmdW5jdGlvbihzY3NzKXt2YXIgc3RhY2s9W107dmFyIGxpbmU9MTtmb3IodmFyIGk9MDtpPHNjc3MubGVuZ3RoO2krKyl7aWYoXy5jb250YWlucyhvcGVuaW5ncyxzY3NzW2ldKSl7c3RhY2sucHVzaChzY3NzW2ldKTt9ZWxzZSBpZihfLmNvbnRhaW5zKGNsb3NpbmdzLHNjc3NbaV0pKXtpZihzdGFjay5wb3AoKSE9PW1hcHBpbmdbc2Nzc1tpXV0pe3JldHVybiBfZ2V0Q2hlY2tSZXR1cm4oZmFsc2UsbGluZSxfdCgiVW5leHBlY3RlZCAiKStzY3NzW2ldKTt9fWVsc2UgaWYoc2Nzc1tpXT09PSdcbicpe2xpbmUrKzt9fQppZihzdGFjay5sZW5ndGg+MCl7cmV0dXJuIF9nZXRDaGVja1JldHVybihmYWxzZSxsaW5lLF90KCJFeHBlY3RlZCAiKSttYXBwaW5nW3N0YWNrLnBvcCgpXSk7fQpyZXR1cm4gX2dldENoZWNrUmV0dXJuKHRydWUpO307fSkoKTtmdW5jdGlvbiBmb3JtYXRTQ1NTKHNjc3Mpe3JldHVybiBzY3NzO30KdmFyIFZpZXdFZGl0b3I9V2lkZ2V0LmV4dGVuZCh7dGVtcGxhdGU6J3dlYl9lZGl0b3IuYWNlX3ZpZXdfZWRpdG9yJyx4bWxEZXBlbmRlbmNpZXM6Wycvd2ViX2VkaXRvci9zdGF0aWMvc3JjL3htbC9hY2UueG1sJ10sanNMaWJzOlsnL3dlYi9zdGF0aWMvbGliL2FjZS9hY2UuanMnLFsnL3dlYi9zdGF0aWMvbGliL2FjZS9qYXZhc2NyaXB0X2hpZ2hsaWdodF9ydWxlcy5qcycsJy93ZWIvc3RhdGljL2xpYi9hY2UvbW9kZS14bWwuanMnLCcvd2ViL3N0YXRpYy9saWIvYWNlL21vZGUtc2Nzcy5qcycsJy93ZWIvc3RhdGljL2xpYi9hY2UvbW9kZS1qcy5qcycsJy93ZWIvc3RhdGljL2xpYi9hY2UvdGhlbWUtbW9ub2thaS5qcyddXSxldmVudHM6eydjbGljayAub19hY2VfdHlwZV9zd2l0Y2hlcl9jaG9pY2UnOidfb25UeXBlQ2hvaWNlJywnY2hhbmdlIC5vX3Jlc19saXN0JzonX29uUmVzQ2hhbmdlJywnY2xpY2sgLm9fYWNlX2ZpbHRlcic6J19vbkZpbHRlckNoYW5nZScsJ2NsaWNrIGJ1dHRvbltkYXRhLWFjdGlvbj1zYXZlXSc6J19vblNhdmVDbGljaycsJ2NsaWNrIGJ1dHRvbltkYXRhLWFjdGlvbj1yZXNldF0nOidfb25SZXNldENsaWNrJywnY2xpY2sgYnV0dG9uW2RhdGEtYWN0aW9uPWZvcm1hdF0nOidfb25Gb3JtYXRDbGljaycsJ2NsaWNrIGJ1dHRvbltkYXRhLWFjdGlvbj1jbG9zZV0nOidfb25DbG9zZUNsaWNrJywnY2xpY2sgI2FjZS12aWV3LWlkID4gLmFsZXJ0LXdhcm5pbmcgLmNsb3NlJzonX29uQ2xvc2VXYXJuaW5nQ2xpY2snfSxpbml0OmZ1bmN0aW9uKHBhcmVudCx2aWV3S2V5LG9wdGlvbnMpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbnRleHQ9b3B0aW9ucy5jb250ZXh0O3RoaXMudmlld0tleT12aWV3S2V5O3RoaXMub3B0aW9ucz1fLmRlZmF1bHRzKHt9LG9wdGlvbnMse3Bvc2l0aW9uOidyaWdodCcsZG9Ob3RMb2FkVmlld3M6ZmFsc2UsZG9Ob3RMb2FkU0NTUzpmYWxzZSxkb05vdExvYWRKUzpmYWxzZSxpbmNsdWRlQnVuZGxlczpmYWxzZSxmaWxlc0ZpbHRlcjonY3VzdG9tJyxkZWZhdWx0QnVuZGxlc1Jlc3RyaWN0aW9uOltdLH0pO3RoaXMucmVzb3VyY2VzPXt4bWw6e30sc2Nzczp7fSxqczp7fX07dGhpcy5lZGl0aW5nU2Vzc2lvbnM9e3htbDp7fSxzY3NzOnt9LGpzOnt9fTt0aGlzLmN1cnJlbnRUeXBlPSd4bWwnO3RoaXMudmlld3M9dGhpcy5yZXNvdXJjZXMueG1sO3RoaXMuc2Nzcz10aGlzLnJlc291cmNlcy5zY3NzO3RoaXMuanM9dGhpcy5yZXNvdXJjZXMuanM7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9sb2FkUmVzb3VyY2VzKCldKTt9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy4kdmlld0VkaXRvcj10aGlzLiQoJyNhY2Utdmlldy1lZGl0b3InKTt0aGlzLiR0eXBlU3dpdGNoZXJDaG9pY2VzPXRoaXMuJCgnLm9fYWNlX3R5cGVfc3dpdGNoZXJfY2hvaWNlJyk7dGhpcy4kdHlwZVN3aXRjaGVyQnRuPXRoaXMuJCgnLm9fYWNlX3R5cGVfc3dpdGNoZXIgPiAuZHJvcGRvd24tdG9nZ2xlJyk7dGhpcy4kbGlzdHM9e3htbDp0aGlzLiQoJyNhY2Utdmlldy1saXN0Jyksc2Nzczp0aGlzLiQoJyNhY2Utc2Nzcy1saXN0JyksanM6dGhpcy4kKCcjYWNlLWpzLWxpc3QnKSx9O3RoaXMuJGluY2x1ZGVCdW5kbGVzQXJlYT10aGlzLiQoJy5vZV9pbmNsdWRlX2J1bmRsZXMnKTt0aGlzLiRpbmNsdWRlQWxsU0NTU0FyZWE9dGhpcy4kKCcub19pbmNsdWRlX2FsbF9zY3NzJyk7dGhpcy4kdmlld0lEPXRoaXMuJCgnI2FjZS12aWV3LWlkID4gc3BhbicpO3RoaXMuJHdhcm5pbmdNZXNzYWdlPXRoaXMuJCgnI2FjZS12aWV3LWlkID4gLmFsZXJ0LXdhcm5pbmcnKTt0aGlzLiRmb3JtYXRCdXR0b249dGhpcy4kKCdidXR0b25bZGF0YS1hY3Rpb249Zm9ybWF0XScpO3RoaXMuJHJlc2V0QnV0dG9uPXRoaXMuJCgnYnV0dG9uW2RhdGEtYWN0aW9uPXJlc2V0XScpO3RoaXMuYWNlRWRpdG9yPXdpbmRvdy5hY2UuZWRpdCh0aGlzLiR2aWV3RWRpdG9yWzBdKTt0aGlzLmFjZUVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTt0aGlzLiRlZGl0b3I9dGhpcy4kKCcuYWNlX2VkaXRvcicpO3ZhciByZWZYPTA7dmFyIHJlc2l6aW5nPWZhbHNlO3ZhciBtaW5XaWR0aD00MDA7dmFyIGRlYm91bmNlU3RvcmVFZGl0b3JXaWR0aD1fLmRlYm91bmNlKHN0b3JlRWRpdG9yV2lkdGgsNTAwKTt0aGlzLl91cGRhdGVWaWV3U2VsZWN0RE9NKCk7dmFyIGluaXRSZXNJRDt2YXIgaW5pdFR5cGU7aWYodGhpcy5vcHRpb25zLmluaXRpYWxSZXNJRCl7aW5pdFJlc0lEPXRoaXMub3B0aW9ucy5pbml0aWFsUmVzSUQ7aWYoXy5pc1N0cmluZyhpbml0UmVzSUQpJiZpbml0UmVzSURbMF09PT0nLycpe2lmKF8uc3RyLmVuZHNXaXRoKGluaXRSZXNJRCwnLnNjc3MnKSl7aW5pdFR5cGU9J3Njc3MnO31lbHNle2luaXRUeXBlPSdqcyc7fX1lbHNle2luaXRUeXBlPSd4bWwnO319ZWxzZXtpZighdGhpcy5vcHRpb25zLmRvTm90TG9hZFNDU1Mpe2luaXRSZXNJRD10aGlzLnNvcnRlZFNDU1NbMF1bMV1bMF0udXJsO2luaXRUeXBlPSdzY3NzJzt9CmlmKCF0aGlzLm9wdGlvbnMuZG9Ob3RMb2FkSlMpe2luaXRSZXNJRD10aGlzLnNvcnRlZEpTWzBdWzFdWzBdLnVybDtpbml0VHlwZT0nanMnO30KaWYoIXRoaXMub3B0aW9ucy5kb05vdExvYWRWaWV3cyl7aWYodHlwZW9mIHRoaXMudmlld0tleT09PSJudW1iZXIiKXtpbml0UmVzSUQ9dGhpcy52aWV3S2V5O31lbHNle3ZhciB2aWV3PV8uZmluZFdoZXJlKHRoaXMudmlld3Mse3htbF9pZDp0aGlzLnZpZXdLZXl9KTtpZighdmlldyl7dmlldz1fLmZpbmRXaGVyZSh0aGlzLnZpZXdzLHtrZXk6dGhpcy52aWV3S2V5fSk7fQppbml0UmVzSUQ9dmlldy5pZDt9CmluaXRUeXBlPSd4bWwnO319CmlmKGluaXRSZXNJRCl7dGhpcy5fZGlzcGxheVJlc291cmNlKGluaXRSZXNJRCxpbml0VHlwZSk7fQppZighdGhpcy5zb3J0ZWRWaWV3cy5sZW5ndGh8fCF0aGlzLnNvcnRlZFNDU1MubGVuZ3RoKXtfLmRlZmVyKChmdW5jdGlvbigpe3RoaXMuX3N3aXRjaFR5cGUodGhpcy5zb3J0ZWRWaWV3cy5sZW5ndGg/J3htbCc6J3Njc3MnKTt0aGlzLiR0eXBlU3dpdGNoZXJCdG4ucGFyZW50KCcuYnRuLWdyb3VwJykuYWRkQ2xhc3MoJ2Qtbm9uZScpO30pLmJpbmQodGhpcykpO30KJChkb2N1bWVudCkub24oJ21vdXNldXAuVmlld0VkaXRvcicsc3RvcFJlc2l6aW5nLmJpbmQodGhpcykpLm9uKCdtb3VzZW1vdmUuVmlld0VkaXRvcicsdXBkYXRlV2lkdGguYmluZCh0aGlzKSk7aWYodGhpcy5vcHRpb25zLnBvc2l0aW9uPT09J2xlZnQnKXt0aGlzLiQoJy5hY2Vfc2Nyb2xsZXInKS5hZnRlcigkKCc8ZGl2PicpLmFkZENsYXNzKCdhY2VfcmVzaXplX2JhcicpKTt0aGlzLiQoJy5hY2VfZ3V0dGVyJykuY3NzKHsnY3Vyc29yJzonZGVmYXVsdCd9KTt0aGlzLiRlbC5vbignbW91c2Vkb3duLlZpZXdFZGl0b3InLCcuYWNlX3Jlc2l6ZV9iYXInLHN0YXJ0UmVzaXppbmcuYmluZCh0aGlzKSk7fWVsc2V7dGhpcy4kZWwub24oJ21vdXNlZG93bi5WaWV3RWRpdG9yJywnLmFjZV9ndXR0ZXInLHN0YXJ0UmVzaXppbmcuYmluZCh0aGlzKSk7fQpyZXNpemVFZGl0b3IuY2FsbCh0aGlzLHJlYWRFZGl0b3JXaWR0aC5jYWxsKHRoaXMpKTtyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Z1bmN0aW9uIHJlc2l6ZUVkaXRvcih0YXJnZXQpe3ZhciB3aWR0aD1NYXRoLm1pbihkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLE1hdGgubWF4KHBhcnNlSW50KHRhcmdldCwxMCksbWluV2lkdGgpKTt0aGlzLiRlZGl0b3Iud2lkdGgod2lkdGgpO3RoaXMuYWNlRWRpdG9yLnJlc2l6ZSgpO3RoaXMuJGVsLndpZHRoKHdpZHRoKTt9CmZ1bmN0aW9uIHN0b3JlRWRpdG9yV2lkdGgoKXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNlX2VkaXRvcl93aWR0aCcsdGhpcy4kZWwud2lkdGgoKSk7fQpmdW5jdGlvbiByZWFkRWRpdG9yV2lkdGgoKXt2YXIgd2lkdGg9bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjZV9lZGl0b3Jfd2lkdGgnKTtyZXR1cm4gcGFyc2VJbnQod2lkdGh8fDcyMCwxMCk7fQpmdW5jdGlvbiBzdGFydFJlc2l6aW5nKGUpe3JlZlg9ZS5wYWdlWDtyZXNpemluZz10cnVlO30KZnVuY3Rpb24gc3RvcFJlc2l6aW5nKCl7cmVzaXppbmc9ZmFsc2U7fQpmdW5jdGlvbiB1cGRhdGVXaWR0aChlKXtpZighcmVzaXppbmcpcmV0dXJuO3ZhciBvZmZzZXQ9ZS5wYWdlWC1yZWZYO2lmKHRoaXMub3B0aW9ucy5wb3NpdGlvbj09PSdsZWZ0Jyl7b2Zmc2V0PS1vZmZzZXQ7fQp2YXIgd2lkdGg9dGhpcy4kZWwud2lkdGgoKS1vZmZzZXQ7cmVmWD1lLnBhZ2VYO3Jlc2l6ZUVkaXRvci5jYWxsKHRoaXMsd2lkdGgpO2RlYm91bmNlU3RvcmVFZGl0b3JXaWR0aC5jYWxsKHRoaXMpO319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kZWwub2ZmKCcuVmlld0VkaXRvcicpOyQoZG9jdW1lbnQpLm9mZignLlZpZXdFZGl0b3InKTt9LF9idWlsZEVkaXRpbmdTZXNzaW9uOmZ1bmN0aW9uKHJlc0lELHR5cGUpe3ZhciBzZWxmPXRoaXM7dHlwZT10eXBlfHx0aGlzLmN1cnJlbnRUeXBlO3ZhciBlZGl0aW5nU2Vzc2lvbj1uZXcgd2luZG93LmFjZS5FZGl0U2Vzc2lvbih0aGlzLnJlc291cmNlc1t0eXBlXVtyZXNJRF0uYXJjaCk7ZWRpdGluZ1Nlc3Npb24uc2V0VXNlV29ya2VyKGZhbHNlKTtlZGl0aW5nU2Vzc2lvbi5zZXRNb2RlKCdhY2UvbW9kZS8nKyh0eXBlfHx0aGlzLmN1cnJlbnRUeXBlKSk7ZWRpdGluZ1Nlc3Npb24uc2V0VW5kb01hbmFnZXIobmV3IHdpbmRvdy5hY2UuVW5kb01hbmFnZXIoKSk7ZWRpdGluZ1Nlc3Npb24ub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtfLmRlZmVyKGZ1bmN0aW9uKCl7c2VsZi5fdG9nZ2xlRGlydHlJbmZvKHJlc0lEKTtzZWxmLl9zaG93RXJyb3JMaW5lKCk7fSk7fSk7cmV0dXJuIGVkaXRpbmdTZXNzaW9uO30sX2Rpc3BsYXlSZXNvdXJjZTpmdW5jdGlvbihyZXNJRCx0eXBlKXtpZih0eXBlKXt0aGlzLl9zd2l0Y2hUeXBlKHR5cGUpO30KdmFyIGVkaXRpbmdTZXNzaW9uPXRoaXMuZWRpdGluZ1Nlc3Npb25zW3RoaXMuY3VycmVudFR5cGVdW3Jlc0lEXTtpZighZWRpdGluZ1Nlc3Npb24pe2VkaXRpbmdTZXNzaW9uPXRoaXMuZWRpdGluZ1Nlc3Npb25zW3RoaXMuY3VycmVudFR5cGVdW3Jlc0lEXT10aGlzLl9idWlsZEVkaXRpbmdTZXNzaW9uKHJlc0lEKTt9CnRoaXMuYWNlRWRpdG9yLnNldFNlc3Npb24oZWRpdGluZ1Nlc3Npb24pO3ZhciBpc0N1c3RvbWl6ZWQ9ZmFsc2U7aWYodGhpcy5jdXJyZW50VHlwZT09PSd4bWwnKXt0aGlzLiR2aWV3SUQudGV4dChfLnN0ci5zcHJpbnRmKF90KCJUZW1wbGF0ZSBJRDogJXMiKSx0aGlzLnZpZXdzW3Jlc0lEXS5rZXkpKTt9ZWxzZSBpZih0aGlzLmN1cnJlbnRUeXBlPT09J3Njc3MnKXtpc0N1c3RvbWl6ZWQ9dGhpcy5zY3NzW3Jlc0lEXS5jdXN0b21pemVkO3RoaXMuJHZpZXdJRC50ZXh0KF8uc3RyLnNwcmludGYoX3QoIlNDU1MgZmlsZTogJXMiKSxyZXNJRCkpO31lbHNle2lzQ3VzdG9taXplZD10aGlzLmpzW3Jlc0lEXS5jdXN0b21pemVkO3RoaXMuJHZpZXdJRC50ZXh0KF8uc3RyLnNwcmludGYoX3QoIkpTIGZpbGU6ICVzIikscmVzSUQpKTt9CnRoaXMuJGxpc3RzW3RoaXMuY3VycmVudFR5cGVdLnNlbGVjdDIoJ3ZhbCcscmVzSUQpO3RoaXMuJHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuY3VycmVudFR5cGU9PT0neG1sJ3x8IWlzQ3VzdG9taXplZCk7dGhpcy4kd2FybmluZ01lc3NhZ2UudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdGhpcy5jdXJyZW50VHlwZSE9PSd4bWwnJiYocmVzSUQuaW5kZXhPZignL3VzZXJfY3VzdG9tXycpPj0wfHxpc0N1c3RvbWl6ZWQpKTt0aGlzLmFjZUVkaXRvci5yZXNpemUodHJ1ZSk7fSxfZm9ybWF0UmVzb3VyY2U6ZnVuY3Rpb24oKXt2YXIgcmVzPXRoaXMuYWNlRWRpdG9yLmdldFZhbHVlKCk7dmFyIGNoZWNrPSh0aGlzLmN1cnJlbnRUeXBlPT09J3htbCc/Y2hlY2tYTUw6Y2hlY2tTQ1NTKShyZXMpO2lmKGNoZWNrLmlzVmFsaWQpe3RoaXMuYWNlRWRpdG9yLnNldFZhbHVlKCh0aGlzLmN1cnJlbnRUeXBlPT09J3htbCc/Zm9ybWF0WE1MOmZvcm1hdFNDU1MpKHJlcykpO31lbHNle3RoaXMuX3Nob3dFcnJvckxpbmUoY2hlY2suZXJyb3IubGluZSxjaGVjay5lcnJvci5tZXNzYWdlLHRoaXMuX2dldFNlbGVjdGVkUmVzb3VyY2UoKSk7fX0sX2dldFNlbGVjdGVkUmVzb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdmFsdWU9dGhpcy4kbGlzdHNbdGhpcy5jdXJyZW50VHlwZV0uc2VsZWN0MigndmFsJyk7cmV0dXJuIHBhcnNlSW50KHZhbHVlLDEwKXx8dmFsdWU7fSxfbG9hZFJlc291cmNlczpmdW5jdGlvbigpe3RoaXMucmVzb3VyY2VzPXt4bWw6e30sc2Nzczp7fSxqczp7fX07dGhpcy5lZGl0aW5nU2Vzc2lvbnM9e3htbDp7fSxzY3NzOnt9LGpzOnt9fTt0aGlzLnZpZXdzPXRoaXMucmVzb3VyY2VzLnhtbDt0aGlzLnNjc3M9dGhpcy5yZXNvdXJjZXMuc2Nzczt0aGlzLmpzPXRoaXMucmVzb3VyY2VzLmpzO3JldHVybiB0aGlzLl9ycGMoe3JvdXRlOicvd2ViX2VkaXRvci9nZXRfYXNzZXRzX2VkaXRvcl9yZXNvdXJjZXMnLHBhcmFtczp7a2V5OnRoaXMudmlld0tleSxnZXRfdmlld3M6IXRoaXMub3B0aW9ucy5kb05vdExvYWRWaWV3cyxnZXRfc2NzczohdGhpcy5vcHRpb25zLmRvTm90TG9hZFNDU1MsZ2V0X2pzOiF0aGlzLm9wdGlvbnMuZG9Ob3RMb2FkSlMsYnVuZGxlczp0aGlzLm9wdGlvbnMuaW5jbHVkZUJ1bmRsZXMsYnVuZGxlc19yZXN0cmljdGlvbjp0aGlzLm9wdGlvbnMuZmlsZXNGaWx0ZXI9PT0nYWxsJz9bXTp0aGlzLm9wdGlvbnMuZGVmYXVsdEJ1bmRsZXNSZXN0cmljdGlvbixvbmx5X3VzZXJfY3VzdG9tX2ZpbGVzOnRoaXMub3B0aW9ucy5maWxlc0ZpbHRlcj09PSdjdXN0b20nLH0sfSkudGhlbigoZnVuY3Rpb24ocmVzb3VyY2VzKXtfcHJvY2Vzc1ZpZXdzLmNhbGwodGhpcyxyZXNvdXJjZXMudmlld3N8fFtdKTtfcHJvY2Vzc0pTb3JTQ1NTLmNhbGwodGhpcyxyZXNvdXJjZXMuc2Nzc3x8W10sJ3Njc3MnKTtfcHJvY2Vzc0pTb3JTQ1NTLmNhbGwodGhpcyxyZXNvdXJjZXMuanN8fFtdLCdqcycpO30pLmJpbmQodGhpcykpO2Z1bmN0aW9uIF9wcm9jZXNzVmlld3Modmlld3Mpe18uZXh0ZW5kKHRoaXMudmlld3MsXy5pbmRleEJ5KF8uZmlsdGVyKHZpZXdzLGZ1bmN0aW9uKHZpZXcpe3JldHVybiB2aWV3LmFjdGl2ZTt9KSwnaWQnKSk7dmFyIHNlbGY9dGhpczt2YXIgcm9vdHM9W107Xy5lYWNoKHRoaXMudmlld3MsZnVuY3Rpb24odmlldyl7dmlldy5sZXZlbD0wO3ZpZXcuY2hpbGRyZW49W107fSk7Xy5lYWNoKHRoaXMudmlld3MsZnVuY3Rpb24odmlldyl7dmFyIHBhcmVudElkPXZpZXcuaW5oZXJpdF9pZFswXTt2YXIgcGFyZW50PXBhcmVudElkJiZzZWxmLnZpZXdzW3BhcmVudElkXTtpZihwYXJlbnQpe3BhcmVudC5jaGlsZHJlbi5wdXNoKHZpZXcpO31lbHNle3Jvb3RzLnB1c2godmlldyk7fX0pO3RoaXMuc29ydGVkVmlld3M9W107ZnVuY3Rpb24gdmlzaXQodmlldyxsZXZlbCl7dmlldy5sZXZlbD1sZXZlbDtzZWxmLnNvcnRlZFZpZXdzLnB1c2godmlldyk7Xy5lYWNoKHZpZXcuY2hpbGRyZW4sZnVuY3Rpb24oY2hpbGQpe3Zpc2l0KGNoaWxkLGxldmVsKzEpO30pO30KXy5lYWNoKHJvb3RzLGZ1bmN0aW9uKHJvb3Qpe3Zpc2l0KHJvb3QsMCk7fSk7fQpmdW5jdGlvbiBfcHJvY2Vzc0pTb3JTQ1NTKGRhdGEsdHlwZSl7aWYodHlwZT09PSdzY3NzJyl7dGhpcy5zb3J0ZWRTQ1NTPWRhdGE7fWVsc2V7dGhpcy5zb3J0ZWRKUz1kYXRhO30KdmFyIHJlc291cmNlcz10eXBlPT09J3Njc3MnP3RoaXMuc2Nzczp0aGlzLmpzO18uZWFjaChkYXRhLGZ1bmN0aW9uKGJ1bmRsZUluZm9zKXtfLmVhY2goYnVuZGxlSW5mb3NbMV0sZnVuY3Rpb24oaW5mbyl7aW5mby5idW5kbGVfeG1saWQ9YnVuZGxlSW5mb3NbMF0ueG1saWQ7fSk7Xy5leHRlbmQocmVzb3VyY2VzLF8uaW5kZXhCeShidW5kbGVJbmZvc1sxXSwndXJsJykpO30pO319LF9yZXNldFJlc291cmNlOmZ1bmN0aW9uKHJlc0lELHR5cGUpe3Jlc0lEPXJlc0lEfHx0aGlzLl9nZXRTZWxlY3RlZFJlc291cmNlKCk7dHlwZT10eXBlfHx0aGlzLmN1cnJlbnRUeXBlO2lmKHRoaXMuY3VycmVudFR5cGU9PT0neG1sJyl7cmV0dXJuIFByb21pc2UucmVqZWN0KF90KCJSZXNldGluZyB2aWV3cyBpcyBub3Qgc3VwcG9ydGVkIHlldCIpKTt9ZWxzZXt2YXIgcmVzb3VyY2U9dHlwZT09PSdzY3NzJz90aGlzLnNjc3NbcmVzSURdOnRoaXMuanNbcmVzSURdO3JldHVybiB0aGlzLl9ycGMoe3JvdXRlOicvd2ViX2VkaXRvci9yZXNldF9hc3NldCcscGFyYW1zOnt1cmw6cmVzSUQsYnVuZGxlX3htbGlkOnJlc291cmNlLmJ1bmRsZV94bWxpZCx9LH0pO319LF9zYXZlU0NTU29ySlM6ZnVuY3Rpb24oc2Vzc2lvbil7dmFyIHNlbGY9dGhpczt2YXIgc2Vzc2lvbklkRW5kc1dpdGhKUz1fLnN0cmluZy5lbmRzV2l0aChzZXNzaW9uLmlkLCcuanMnKTt2YXIgYnVuZGxlWG1sSUQ9c2Vzc2lvbklkRW5kc1dpdGhKUz90aGlzLmpzW3Nlc3Npb24uaWRdLmJ1bmRsZV94bWxpZDp0aGlzLnNjc3Nbc2Vzc2lvbi5pZF0uYnVuZGxlX3htbGlkO3ZhciBmaWxlVHlwZT1zZXNzaW9uSWRFbmRzV2l0aEpTPydqcyc6J3Njc3MnO3JldHVybiBzZWxmLl9ycGMoe3JvdXRlOicvd2ViX2VkaXRvci9zYXZlX2Fzc2V0JyxwYXJhbXM6e3VybDpzZXNzaW9uLmlkLGJ1bmRsZV94bWxpZDpidW5kbGVYbWxJRCxjb250ZW50OnNlc3Npb24udGV4dCxmaWxlX3R5cGU6ZmlsZVR5cGUsfSx9KS50aGVuKGZ1bmN0aW9uKCl7c2VsZi5fdG9nZ2xlRGlydHlJbmZvKHNlc3Npb24uaWQsZmlsZVR5cGUsZmFsc2UpO30pO30sX3NhdmVSZXNvdXJjZXM6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciB0b1NhdmU9e307dmFyIGVycm9yRm91bmQ9ZmFsc2U7Xy5lYWNoKHRoaXMuZWRpdGluZ1Nlc3Npb25zLChmdW5jdGlvbihlZGl0aW5nU2Vzc2lvbnMsdHlwZSl7aWYoZXJyb3JGb3VuZClyZXR1cm47dmFyIGRpcnR5U2Vzc2lvbnM9Xy5waWNrKGVkaXRpbmdTZXNzaW9ucyxmdW5jdGlvbihzZXNzaW9uKXtyZXR1cm4gc2Vzc2lvbi5nZXRVbmRvTWFuYWdlcigpLmhhc1VuZG8oKTt9KTt0b1NhdmVbdHlwZV09Xy5tYXAoZGlydHlTZXNzaW9ucyxmdW5jdGlvbihzZXNzaW9uLHJlc0lEKXtyZXR1cm57aWQ6cGFyc2VJbnQocmVzSUQsMTApfHxyZXNJRCx0ZXh0OnNlc3Npb24uZ2V0VmFsdWUoKSx9O30pO3RoaXMuX3Nob3dFcnJvckxpbmUoKTtmb3IodmFyIGk9MDtpPHRvU2F2ZVt0eXBlXS5sZW5ndGgmJiFlcnJvckZvdW5kO2krKyl7dmFyIGNoZWNrPSh0eXBlPT09J3htbCc/Y2hlY2tYTUw6Y2hlY2tTQ1NTKSh0b1NhdmVbdHlwZV1baV0udGV4dCk7aWYoIWNoZWNrLmlzVmFsaWQpe3RoaXMuX3Nob3dFcnJvckxpbmUoY2hlY2suZXJyb3IubGluZSxjaGVjay5lcnJvci5tZXNzYWdlLHRvU2F2ZVt0eXBlXVtpXS5pZCx0eXBlKTtlcnJvckZvdW5kPXRvU2F2ZVt0eXBlXVtpXTt9fX0pLmJpbmQodGhpcykpO2lmKGVycm9yRm91bmQpcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yRm91bmQpO3ZhciBkZWZzPVtdO3ZhciBtdXRleD1uZXcgY29uY3VycmVuY3kuTXV0ZXgoKTtfLmVhY2godG9TYXZlLChmdW5jdGlvbihfdG9TYXZlLHR5cGUpe190b1NhdmU9Xy5zb3J0QnkoX3RvU2F2ZSwnaWQnKS5yZXZlcnNlKCk7Xy5lYWNoKF90b1NhdmUsZnVuY3Rpb24oc2Vzc2lvbil7ZGVmcy5wdXNoKG11dGV4LmV4ZWMoZnVuY3Rpb24oKXtyZXR1cm4odHlwZT09PSd4bWwnP3NlbGYuX3NhdmVWaWV3KHNlc3Npb24pOnNlbGYuX3NhdmVTQ1NTb3JKUyhzZXNzaW9uKSk7fSkpO30pO30pLmJpbmQodGhpcykpO3ZhciBzZWxmPXRoaXM7cmV0dXJuIFByb21pc2UuYWxsKGRlZnMpLmd1YXJkZWRDYXRjaChmdW5jdGlvbihyZXN1bHRzKXt2YXIgZXJyb3I9cmVzdWx0c1sxXTtEaWFsb2cuYWxlcnQoc2VsZiwnJyx7dGl0bGU6X3QoIlNlcnZlciBlcnJvciIpLCRjb250ZW50OiQoJzxkaXYvPicpLmh0bWwoX3QoIkEgc2VydmVyIGVycm9yIG9jY3VyZWQuIFBsZWFzZSBjaGVjayB5b3UgY29ycmVjdGx5IHNpZ25lZCBpbiBhbmQgdGhhdCB0aGUgZmlsZSB5b3UgYXJlIHNhdmluZyBpcyBjb3JyZWN0bHkgZm9ybWF0dGVkLiIpCisnPGJyLz4nCitlcnJvcil9KTt9KTt9LF9zYXZlVmlldzpmdW5jdGlvbihzZXNzaW9uKXt2YXIgc2VsZj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7c2VsZi5fcnBjKHttb2RlbDonaXIudWkudmlldycsbWV0aG9kOid3cml0ZScsYXJnczpbW3Nlc3Npb24uaWRdLHthcmNoOnNlc3Npb24udGV4dH1dLH0se25vQ29udGV4dEtleXM6J2xhbmcnLH0pLnRoZW4oZnVuY3Rpb24oKXtzZWxmLl90b2dnbGVEaXJ0eUluZm8oc2Vzc2lvbi5pZCwneG1sJyxmYWxzZSk7cmVzb2x2ZSgpO30sZnVuY3Rpb24oc291cmNlLGVycm9yKXtyZWplY3Qoc2Vzc2lvbixlcnJvcik7fSk7fSk7fSxfc2hvd0Vycm9yTGluZTpmdW5jdGlvbihsaW5lLG1lc3NhZ2UscmVzSUQsdHlwZSl7aWYobGluZT09PXVuZGVmaW5lZHx8bGluZTw9MCl7aWYodGhpcy4kZXJyb3JMaW5lKXt0aGlzLiRlcnJvckxpbmUucmVtb3ZlQ2xhc3MoJ29fZXJyb3InKTt0aGlzLiRlcnJvckxpbmUub2ZmKCcub19lcnJvcicpO3RoaXMuJGVycm9yTGluZT11bmRlZmluZWQ7dGhpcy4kZXJyb3JDb250ZW50LnJlbW92ZUNsYXNzKCdvX2Vycm9yJyk7dGhpcy4kZXJyb3JDb250ZW50PXVuZGVmaW5lZDt9CnJldHVybjt9CmlmKHR5cGUpdGhpcy5fc3dpdGNoVHlwZSh0eXBlKTtpZih0aGlzLl9nZXRTZWxlY3RlZFJlc291cmNlKCk9PT1yZXNJRCl7X19zaG93RXJyb3JMaW5lLmNhbGwodGhpcyxsaW5lKTt9ZWxzZXt2YXIgb25DaGFuZ2VTZXNzaW9uPShmdW5jdGlvbigpe3RoaXMuYWNlRWRpdG9yLm9mZignY2hhbmdlU2Vzc2lvbicsb25DaGFuZ2VTZXNzaW9uKTtfLmRlbGF5KF9fc2hvd0Vycm9yTGluZS5iaW5kKHRoaXMsbGluZSksNDAwKTt9KS5iaW5kKHRoaXMpO3RoaXMuYWNlRWRpdG9yLm9uKCdjaGFuZ2VTZXNzaW9uJyxvbkNoYW5nZVNlc3Npb24pO3RoaXMuX2Rpc3BsYXlSZXNvdXJjZShyZXNJRCx0aGlzLmN1cnJlbnRUeXBlKTt9CmZ1bmN0aW9uIF9fc2hvd0Vycm9yTGluZShsaW5lKXt0aGlzLmFjZUVkaXRvci5nb3RvTGluZShsaW5lKTt0aGlzLiRlcnJvckxpbmU9dGhpcy4kdmlld0VkaXRvci5maW5kKCcuYWNlX2d1dHRlci1jZWxsJykuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KCQodGhpcykudGV4dCgpKT09PWxpbmU7fSkuYWRkQ2xhc3MoJ29fZXJyb3InKTt0aGlzLiRlcnJvckxpbmUuYWRkQ2xhc3MoJ29fZXJyb3InKS5vbignY2xpY2sub19lcnJvcicsZnVuY3Rpb24oKXt2YXIgJG1lc3NhZ2U9JCgnPGRpdi8+JykuaHRtbChtZXNzYWdlKTskbWVzc2FnZS50ZXh0KCRtZXNzYWdlLnRleHQoKSk7RGlhbG9nLmFsZXJ0KHRoaXMsIiIseyRjb250ZW50OiRtZXNzYWdlfSk7fSk7dGhpcy4kZXJyb3JDb250ZW50PXRoaXMuJHZpZXdFZGl0b3IuZmluZCgnLmFjZV9zY3JvbGxlcicpLmFkZENsYXNzKCdvX2Vycm9yJyk7fX0sX3N3aXRjaFR5cGU6ZnVuY3Rpb24odHlwZSl7dGhpcy5jdXJyZW50VHlwZT10eXBlO3RoaXMuJHR5cGVTd2l0Y2hlckJ0bi5odG1sKHRoaXMuJHR5cGVTd2l0Y2hlckNob2ljZXMuZmlsdGVyKCdbZGF0YS10eXBlPScrdHlwZSsnXScpLmh0bWwoKSk7Xy5lYWNoKHRoaXMuJGxpc3RzLGZ1bmN0aW9uKCRsaXN0LF90eXBlKXskbGlzdC50b2dnbGVDbGFzcygnZC1ub25lJyx0eXBlIT09X3R5cGUpO30pO3RoaXMuJGxpc3RzW3R5cGVdLmNoYW5nZSgpO3RoaXMuJGluY2x1ZGVCdW5kbGVzQXJlYS50b2dnbGVDbGFzcygnZC1ub25lJyx0aGlzLmN1cnJlbnRUeXBlIT09J3htbCd8fCFjb25maWcuaXNEZWJ1ZygpKTt0aGlzLiRpbmNsdWRlQWxsU0NTU0FyZWEudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdGhpcy5jdXJyZW50VHlwZSE9PSdzY3NzJ3x8IWNvbmZpZy5pc0RlYnVnKCkpO3RoaXMuJGluY2x1ZGVBbGxTQ1NTQXJlYS5maW5kKCdbZGF0YS12YWx1ZT0icmVzdHJpY3RlZCJdJykudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsdGhpcy5vcHRpb25zLmRlZmF1bHRCdW5kbGVzUmVzdHJpY3Rpb24ubGVuZ3RoPT09MCk7dGhpcy4kZm9ybWF0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkLW5vbmUnLHRoaXMuY3VycmVudFR5cGUhPT0neG1sJyk7fSxfdG9nZ2xlRGlydHlJbmZvOmZ1bmN0aW9uKHJlc0lELHR5cGUsaXNEaXJ0eSl7dHlwZT10eXBlfHx0aGlzLmN1cnJlbnRUeXBlO2lmKCFyZXNJRHx8IXRoaXMuZWRpdGluZ1Nlc3Npb25zW3R5cGVdW3Jlc0lEXSlyZXR1cm47dmFyICRvcHRpb249dGhpcy4kbGlzdHNbdHlwZV0uZmluZCgnW3ZhbHVlPSInK3Jlc0lEKyciXScpO2lmKGlzRGlydHk9PT11bmRlZmluZWQpe2lzRGlydHk9dGhpcy5lZGl0aW5nU2Vzc2lvbnNbdHlwZV1bcmVzSURdLmdldFVuZG9NYW5hZ2VyKCkuaGFzVW5kbygpO30KJG9wdGlvbi5kYXRhKCdkaXJ0eScsaXNEaXJ0eSk7fSxfdXBkYXRlVmlld1NlbGVjdERPTTpmdW5jdGlvbigpe3ZhciBjdXJyZW50SWQ9dGhpcy5fZ2V0U2VsZWN0ZWRSZXNvdXJjZSgpO3ZhciBzZWxmPXRoaXM7dGhpcy4kbGlzdHMueG1sLmVtcHR5KCk7Xy5lYWNoKHRoaXMuc29ydGVkVmlld3MsZnVuY3Rpb24odmlldyl7c2VsZi4kbGlzdHMueG1sLmFwcGVuZCgkKCc8b3B0aW9uLz4nLHt2YWx1ZTp2aWV3LmlkLHRleHQ6dmlldy5uYW1lLHNlbGVjdGVkOmN1cnJlbnRJZD09PXZpZXcuaWQsJ2RhdGEtbGV2ZWwnOnZpZXcubGV2ZWwsJ2RhdGEtZGVidWcnOnZpZXcueG1sX2lkLH0pKTt9KTt0aGlzLiRsaXN0cy5zY3NzLmVtcHR5KCk7X3BvcHVsYXRlTGlzdCh0aGlzLnNvcnRlZFNDU1MsdGhpcy4kbGlzdHMuc2Nzcyw1KTt0aGlzLiRsaXN0cy5qcy5lbXB0eSgpO19wb3B1bGF0ZUxpc3QodGhpcy5zb3J0ZWRKUyx0aGlzLiRsaXN0cy5qcywzKTt0aGlzLiRsaXN0cy54bWwuc2VsZWN0MignZGVzdHJveScpO3RoaXMuJGxpc3RzLnhtbC5zZWxlY3QyKHtmb3JtYXRSZXN1bHQ6X2Zvcm1hdERpc3BsYXkuYmluZCh0aGlzLGZhbHNlKSxmb3JtYXRTZWxlY3Rpb246X2Zvcm1hdERpc3BsYXkuYmluZCh0aGlzLHRydWUpLH0pO3RoaXMuJGxpc3RzLnhtbC5kYXRhKCdzZWxlY3QyJykuZHJvcGRvd24uYWRkQ2xhc3MoJ29fYWNlX3NlbGVjdDJfZHJvcGRvd24nKTt0aGlzLiRsaXN0cy5zY3NzLnNlbGVjdDIoJ2Rlc3Ryb3knKTt0aGlzLiRsaXN0cy5zY3NzLnNlbGVjdDIoe2Zvcm1hdFJlc3VsdDpfZm9ybWF0RGlzcGxheS5iaW5kKHRoaXMsZmFsc2UpLGZvcm1hdFNlbGVjdGlvbjpfZm9ybWF0RGlzcGxheS5iaW5kKHRoaXMsdHJ1ZSksfSk7dGhpcy4kbGlzdHMuc2Nzcy5kYXRhKCdzZWxlY3QyJykuZHJvcGRvd24uYWRkQ2xhc3MoJ29fYWNlX3NlbGVjdDJfZHJvcGRvd24nKTt0aGlzLiRsaXN0cy5qcy5zZWxlY3QyKCdkZXN0cm95Jyk7dGhpcy4kbGlzdHMuanMuc2VsZWN0Mih7Zm9ybWF0UmVzdWx0Ol9mb3JtYXREaXNwbGF5LmJpbmQodGhpcyxmYWxzZSksZm9ybWF0U2VsZWN0aW9uOl9mb3JtYXREaXNwbGF5LmJpbmQodGhpcyx0cnVlKSx9KTt0aGlzLiRsaXN0cy5qcy5kYXRhKCdzZWxlY3QyJykuZHJvcGRvd24uYWRkQ2xhc3MoJ29fYWNlX3NlbGVjdDJfZHJvcGRvd24nKTtmdW5jdGlvbiBfcG9wdWxhdGVMaXN0KHNvcnRlZERhdGEsJGxpc3QsbGV0dGVyc1RvUmVtb3ZlKXtfLmVhY2goc29ydGVkRGF0YSxmdW5jdGlvbihidW5kbGVJbmZvcyl7dmFyICRvcHRncm91cD0kKCc8b3B0Z3JvdXAvPicse2xhYmVsOmJ1bmRsZUluZm9zWzBdLm5hbWUsfSkuYXBwZW5kVG8oJGxpc3QpO18uZWFjaChidW5kbGVJbmZvc1sxXSxmdW5jdGlvbihkYXRhSW5mbyl7dmFyIG5hbWU9ZGF0YUluZm8udXJsLnN1YnN0cmluZyhfLmxhc3RJbmRleE9mKGRhdGFJbmZvLnVybCwnLycpKzEsZGF0YUluZm8udXJsLmxlbmd0aC1sZXR0ZXJzVG9SZW1vdmUpOyRvcHRncm91cC5hcHBlbmQoJCgnPG9wdGlvbi8+Jyx7dmFsdWU6ZGF0YUluZm8udXJsLHRleHQ6bmFtZSxzZWxlY3RlZDpjdXJyZW50SWQ9PT1kYXRhSW5mby51cmwsJ2RhdGEtZGVidWcnOmRhdGFJbmZvLnVybCwnZGF0YS1jdXN0b21pemVkJzpkYXRhSW5mby5jdXN0b21pemVkfSkpO30pO30pO30KZnVuY3Rpb24gX2Zvcm1hdERpc3BsYXkoaXNTZWxlY3RlZCxkYXRhKXt2YXIgJGVsZW09JChkYXRhLmVsZW1lbnQpO3ZhciB0ZXh0PWRhdGEudGV4dHx8Jyc7aWYoIWlzU2VsZWN0ZWQpe3RleHQ9QXJyYXkoKCRlbGVtLmRhdGEoJ2xldmVsJyl8fDApKzEpLmpvaW4oJy0nKSsnICcrdGV4dDt9CnZhciAkZGl2PSQoJzxkaXYvPicse3RleHQ6dGV4dCxjbGFzczonb19hY2Vfc2VsZWN0Ml9yZXN1bHQnLH0pO2lmKCRlbGVtLmRhdGEoJ2RpcnR5Jyl8fCRlbGVtLmRhdGEoJ2N1c3RvbWl6ZWQnKSl7JGRpdi5wcmVwZW5kKCQoJzxzcGFuLz4nLHtjbGFzczonbXI4IGZhIGZhLWZsb3BweS1vICcrKCRlbGVtLmRhdGEoJ2RpcnR5Jyk/J3RleHQtd2FybmluZyc6J3RleHQtc3VjY2VzcycpLH0pKTt9CmlmKCFpc1NlbGVjdGVkJiZjb25maWcuaXNEZWJ1ZygpJiYkZWxlbS5kYXRhKCdkZWJ1ZycpKXskZGl2LmFwcGVuZCgkKCc8c3Bhbi8+Jyx7dGV4dDonICgnKyRlbGVtLmRhdGEoJ2RlYnVnJykrJyknLGNsYXNzOidtbDQgc21hbGwgdGV4dC1tdXRlZCcsfSkpO30KcmV0dXJuICRkaXY7fX0sX29uQ2xvc2VDbGljazpmdW5jdGlvbigpe3RoaXMuZG9faGlkZSgpO30sX29uRm9ybWF0Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLl9mb3JtYXRSZXNvdXJjZSgpO30sX29uRmlsdGVyQ2hhbmdlOmZ1bmN0aW9uKGV2KXt2YXIgJGl0ZW09JChldi50YXJnZXQpOyRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtpZigkaXRlbS5kYXRhKCd0eXBlJyk9PT0neG1sJyl7dGhpcy5vcHRpb25zLmluY2x1ZGVCdW5kbGVzPSQoZXYudGFyZ2V0KS5kYXRhKCd2YWx1ZScpPT09J2FsbCc7fWVsc2V7dGhpcy5vcHRpb25zLmZpbGVzRmlsdGVyPSRpdGVtLmRhdGEoJ3ZhbHVlJyk7fQp0aGlzLl9sb2FkUmVzb3VyY2VzKCkudGhlbih0aGlzLl91cGRhdGVWaWV3U2VsZWN0RE9NLmJpbmQodGhpcykpO30sX29uUmVzQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fZGlzcGxheVJlc291cmNlKHRoaXMuX2dldFNlbGVjdGVkUmVzb3VyY2UoKSk7fSxfb25SZXNldENsaWNrOmZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztEaWFsb2cuY29uZmlybSh0aGlzLF90KCJJZiB5b3UgcmVzZXQgdGhpcyBmaWxlLCBhbGwgeW91ciBjdXN0b21pemF0aW9ucyB3aWxsIGJlIGxvc3QgYXMgaXQgd2lsbCBiZSByZXZlcnRlZCB0byB0aGUgZGVmYXVsdCBmaWxlLiIpLHt0aXRsZTpfdCgiQ2FyZWZ1bCAhIiksY29uZmlybV9jYWxsYmFjazpmdW5jdGlvbigpe3NlbGYuX3Jlc2V0UmVzb3VyY2Uoc2VsZi5fZ2V0U2VsZWN0ZWRSZXNvdXJjZSgpKTt9LH0pO30sX29uU2F2ZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5fc2F2ZVJlc291cmNlcygpO30sX29uVHlwZUNob2ljZTpmdW5jdGlvbihldil7ZXYucHJldmVudERlZmF1bHQoKTt0aGlzLl9zd2l0Y2hUeXBlKCQoZXYudGFyZ2V0KS5kYXRhKCd0eXBlJykpO30sX29uQ2xvc2VXYXJuaW5nQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLiR3YXJuaW5nTWVzc2FnZS5hZGRDbGFzcygnZC1ub25lJyk7fSx9KTtyZXR1cm4gVmlld0VkaXRvcjt9KTs7CgovKiAvd2ViX2VkaXRvci9zdGF0aWMvc3JjL2pzL3d5c2l3eWcvcm9vdC5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWJfZWRpdG9yLnd5c2l3eWcucm9vdCcsZnVuY3Rpb24ocmVxdWlyZSl7J3VzZSBzdHJpY3QnO3ZhciBXaWRnZXQ9cmVxdWlyZSgnd2ViLldpZGdldCcpO3ZhciBhc3NldHNMb2FkZWQ9ZmFsc2U7dmFyIFd5c2l3eWdSb290PVdpZGdldC5leHRlbmQoe2Fzc2V0TGliczpbJ3dlYl9lZGl0b3IuY29tcGlsZWRfYXNzZXRzX3d5c2l3eWcnXSxwdWJsaWNNZXRob2RzOlsnaXNEaXJ0eScsJ3NhdmUnLCdnZXRWYWx1ZScsJ3NldFZhbHVlJywnZ2V0RWRpdGFibGUnLCdvbicsJ3RyaWdnZXInLCdmb2N1cyddLGluaXQ6ZnVuY3Rpb24ocGFyZW50LHBhcmFtcyl7dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3BhcmFtcz1wYXJhbXM7dGhpcy4kZWRpdG9yPW51bGw7fSx3aWxsU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3ZhciAkdGFyZ2V0PXRoaXMuJGVsO3RoaXMuJGVsPW51bGw7cmV0dXJuIHRoaXMuX3N1cGVyKCkudGhlbihmdW5jdGlvbigpe2lmKCFhc3NldHNMb2FkZWQpe3ZhciBXeXNpd3lnPW9kb28uX19ERUJVR19fLnNlcnZpY2VzWyd3ZWJfZWRpdG9yLnd5c2l3eWcnXTtfLmVhY2goWydnZXRSYW5nZScsJ3NldFJhbmdlJywnc2V0UmFuZ2VGcm9tTm9kZSddLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe1d5c2l3eWdSb290W21ldGhvZE5hbWVdPVd5c2l3eWdbbWV0aG9kTmFtZV0uYmluZChXeXNpd3lnKTt9KTthc3NldHNMb2FkZWQ9dHJ1ZTt9CnZhciBXeXNpd3lnPXNlbGYuX2dldFd5c2l3eWdDb250cnVjdG9yKCk7dmFyIGluc3RhbmNlPW5ldyBXeXNpd3lnKHNlbGYsc2VsZi5fcGFyYW1zKTtzZWxmLl9wYXJhbXM9bnVsbDtfLmVhY2goc2VsZi5wdWJsaWNNZXRob2RzLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe3NlbGZbbWV0aG9kTmFtZV09aW5zdGFuY2VbbWV0aG9kTmFtZV0uYmluZChpbnN0YW5jZSk7fSk7cmV0dXJuIGluc3RhbmNlLmF0dGFjaFRvKCR0YXJnZXQpLnRoZW4oZnVuY3Rpb24oKXtzZWxmLiRlZGl0b3I9aW5zdGFuY2UuJGVkaXRvcnx8aW5zdGFuY2UuJGVsO30pO30pO30sX2dldFd5c2l3eWdDb250cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIG9kb28uX19ERUJVR19fLnNlcnZpY2VzWyd3ZWJfZWRpdG9yLnd5c2l3eWcnXTt9fSk7cmV0dXJuIFd5c2l3eWdSb290O30pO29kb28uZGVmaW5lKCd3ZWJfZWRpdG9yLnd5c2l3eWcuZGVmYXVsdF9vcHRpb25zJyxmdW5jdGlvbihyZXF1aXJlKXsndXNlIHN0cmljdCc7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgX2x0PWNvcmUuX2x0O3JldHVybntzdHlsZVRhZ3M6WydwJywncHJlJywnc21hbGwnLCdoMScsJ2gyJywnaDMnLCdoNCcsJ2g1JywnaDYnLCdibG9ja3F1b3RlJ10sZm9udFNpemVzOltfbHQoJ0RlZmF1bHQnKSw4LDksMTAsMTEsMTIsMTQsMTgsMjQsMzYsNDgsNjJdLH07fSk7OwoKLyogL3dlYl90b3VyL3N0YXRpYy9zcmMvanMvdGlwLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYl90b3VyLlRpcCcsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb25maWc9cmVxdWlyZSgnd2ViLmNvbmZpZycpO3ZhciBjb3JlPXJlcXVpcmUoJ3dlYi5jb3JlJyk7dmFyIFdpZGdldD1yZXF1aXJlKCd3ZWIuV2lkZ2V0Jyk7dmFyIF90PWNvcmUuX3Q7dmFyIFRpcD1XaWRnZXQuZXh0ZW5kKHt0ZW1wbGF0ZToiVGlwIix4bWxEZXBlbmRlbmNpZXM6Wycvd2ViX3RvdXIvc3RhdGljL3NyYy94bWwvdGlwLnhtbCddLGV2ZW50czp7Y2xpY2s6J19vblRpcENsaWNrZWQnLG1vdXNlZW50ZXI6Il90b19pbmZvX21vZGUiLG1vdXNlbGVhdmU6Il90b19idWJibGVfbW9kZSIsfSxpbml0OmZ1bmN0aW9uKHBhcmVudCxpbmZvKXt0aGlzLl9zdXBlcihwYXJlbnQpO3RoaXMuaW5mbz1fLmRlZmF1bHRzKGluZm8se3Bvc2l0aW9uOiJyaWdodCIsd2lkdGg6MjcwLHNwYWNlOjEwLG92ZXJsYXk6e3g6NTAseTo1MCx9LH0pO3RoaXMucG9zaXRpb249e3RvcDoiNTAlIixsZWZ0OiI1MCUiLH07fSxhdHRhY2hfdG86ZnVuY3Rpb24oJGFuY2hvcil7dGhpcy4kYW5jaG9yPSRhbmNob3I7dGhpcy4kaWRlYWxfbG9jYXRpb249dGhpcy5fZ2V0X2lkZWFsX2xvY2F0aW9uKCk7dmFyIHBvc2l0aW9uPXRoaXMuJGlkZWFsX2xvY2F0aW9uLmNzcygicG9zaXRpb24iKTtpZihwb3NpdGlvbj09PSJzdGF0aWMifHxwb3NpdGlvbj09PSJyZWxhdGl2ZSIpe3RoaXMuJGlkZWFsX2xvY2F0aW9uLmFkZENsYXNzKCJvX3Rvb2x0aXBfcGFyZW50Iik7fQpyZXR1cm4gdGhpcy5hcHBlbmRUbyh0aGlzLiRpZGVhbF9sb2NhdGlvbik7fSxzdGFydDpmdW5jdGlvbigpe3RoaXMuJHRvb2x0aXBfb3ZlcmxheT10aGlzLiQoIi5vX3Rvb2x0aXBfb3ZlcmxheSIpO3RoaXMuJHRvb2x0aXBfY29udGVudD10aGlzLiQoIi5vX3Rvb2x0aXBfY29udGVudCIpO3RoaXMuaW5pdF93aWR0aD10aGlzLiRlbC5pbm5lcldpZHRoKCk7dGhpcy5pbml0X2hlaWdodD10aGlzLiRlbC5pbm5lckhlaWdodCgpO3RoaXMuZG91YmxlX2JvcmRlcl93aWR0aD10aGlzLiRlbC5vdXRlcldpZHRoKCktdGhpcy5pbml0X3dpZHRoO3RoaXMuY29udGVudF93aWR0aD10aGlzLiR0b29sdGlwX2NvbnRlbnQub3V0ZXJXaWR0aCh0cnVlKTt0aGlzLmNvbnRlbnRfaGVpZ2h0PXRoaXMuJHRvb2x0aXBfY29udGVudC5vdXRlckhlaWdodCh0cnVlKTt0aGlzLiR3aW5kb3c9JCh3aW5kb3cpO3RoaXMuJHRvb2x0aXBfY29udGVudC5jc3Moe3dpZHRoOiIxMDAlIixoZWlnaHQ6IjEwMCUiLH0pO18uZWFjaCh0aGlzLmluZm8uZXZlbnRfaGFuZGxlcnMsKGZ1bmN0aW9uKGRhdGEpe3RoaXMuJHRvb2x0aXBfY29udGVudC5vbihkYXRhLmV2ZW50LGRhdGEuc2VsZWN0b3IsZGF0YS5oYW5kbGVyKTt9KS5iaW5kKHRoaXMpKTt0aGlzLl9iaW5kX2FuY2hvcl9ldmVudHMoKTt0aGlzLl9yZXBvc2l0aW9uKCk7dGhpcy4kZWwuY3NzKCJvcGFjaXR5IiwxKTtjb3JlLmJ1cy5vbigicmVzaXplIix0aGlzLF8uZGVib3VuY2UoZnVuY3Rpb24oKXtpZih0aGlzLnRpcF9vcGVuZWQpe3RoaXMuX3RvX2J1YmJsZV9tb2RlKHRydWUpO30KdGhpcy5fcmVwb3NpdGlvbigpO30sNTAwKSk7dGhpcy4kZWwub24oInRyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgd2Via2l0VHJhbnNpdGlvbkVuZCIsKGZ1bmN0aW9uKCl7aWYoIXRoaXMudGlwX29wZW5lZCYmdGhpcy4kZWwucGFyZW50KClbMF09PT1kb2N1bWVudC5ib2R5KXt0aGlzLiRlbC5kZXRhY2goKTt0aGlzLiRlbC5jc3ModGhpcy5wb3NpdGlvbik7dGhpcy4kZWwuYXBwZW5kVG8odGhpcy4kaWRlYWxfbG9jYXRpb24pO319KS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3VuYmluZF9hbmNob3JfZXZlbnRzKCk7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJJbik7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJPdXQpO2lmKHRoaXMuJGlkZWFsX2xvY2F0aW9uLmNoaWxkcmVuKCIub190b29sdGlwIikubm90KHRoaXMuJGVsWzBdKS5sZW5ndGg9PT0wKXt0aGlzLiRpZGVhbF9sb2NhdGlvbi5yZW1vdmVDbGFzcygib190b29sdGlwX3BhcmVudCIpO30KcmV0dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9LHVwZGF0ZTpmdW5jdGlvbigkYW5jaG9yKXtpZighJGFuY2hvci5pcyh0aGlzLiRhbmNob3IpKXt0aGlzLl91bmJpbmRfYW5jaG9yX2V2ZW50cygpO3RoaXMuJGFuY2hvcj0kYW5jaG9yO3RoaXMuJGlkZWFsX2xvY2F0aW9uPXRoaXMuX2dldF9pZGVhbF9sb2NhdGlvbigpO2lmKHRoaXMuJGVsLnBhcmVudCgpWzBdIT09ZG9jdW1lbnQuYm9keSl7dGhpcy4kZWwuYXBwZW5kVG8odGhpcy4kaWRlYWxfbG9jYXRpb24pO30KdGhpcy5fYmluZF9hbmNob3JfZXZlbnRzKCk7fQp0aGlzLl9yZXBvc2l0aW9uKCk7fSxfZ2V0X2lkZWFsX2xvY2F0aW9uOmZ1bmN0aW9uKCl7dmFyICRsb2NhdGlvbj10aGlzLiRhbmNob3I7aWYoJGxvY2F0aW9uLmlzKCJodG1sLGJvZHkiKSl7cmV0dXJuICQoZG9jdW1lbnQuYm9keSk7fQp2YXIgbzt2YXIgcDtkb3skbG9jYXRpb249JGxvY2F0aW9uLnBhcmVudCgpO289JGxvY2F0aW9uLmNzcygib3ZlcmZsb3ciKTtwPSRsb2NhdGlvbi5jc3MoInBvc2l0aW9uIik7fXdoaWxlKCRsb2NhdGlvbi5oYXNDbGFzcygnZHJvcGRvd24tbWVudScpfHwoKG89PT0idmlzaWJsZSJ8fG89PT0iaGlkZGVuIikmJnAhPT0iZml4ZWQiJiYkbG9jYXRpb25bMF0udGFnTmFtZS50b1VwcGVyQ2FzZSgpIT09J0JPRFknKSk7cmV0dXJuICRsb2NhdGlvbjt9LF9yZXBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy50aXBfb3BlbmVkKXJldHVybjtpZighdGhpcy4kZWwpcmV0dXJuO3RoaXMuJGVsLnJlbW92ZUNsYXNzKCJvX2FuaW1hdGVkIik7dmFyIGFwcGVuZEF0PXRoaXMuaW5mby5wb3NpdGlvbjtpZihfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLmRpcmVjdGlvbj09PSdydGwnKXthcHBlbmRBdD1hcHBlbmRBdD09PSdyaWdodCc/J2xlZnQnOidyaWdodCc7fQp0aGlzLiRlbC5wb3NpdGlvbih7bXk6dGhpcy5fZ2V0X3NwYWNlZF9pbnZlcnRlZF9wb3NpdGlvbihhcHBlbmRBdCksYXQ6YXBwZW5kQXQsb2Y6dGhpcy4kYW5jaG9yLGNvbGxpc2lvbjoibm9uZSIsfSk7dmFyIHBvc2l0aW9uUmlnaHQ9X3QuZGF0YWJhc2UucGFyYW1ldGVycy5kaXJlY3Rpb249PT0ncnRsJz8icmlnaHQiOiJsZWZ0Ijt2YXIgcG9zaXRpb25MZWZ0PV90LmRhdGFiYXNlLnBhcmFtZXRlcnMuZGlyZWN0aW9uPT09J3J0bCc/ImxlZnQiOiJyaWdodCI7dmFyIG9mZnNldD10aGlzLiRlbC5vZmZzZXQoKTt0aGlzLiR0b29sdGlwX292ZXJsYXkuY3NzKHt0b3A6LU1hdGgubWluKCh0aGlzLmluZm8ucG9zaXRpb249PT0iYm90dG9tIj90aGlzLmluZm8uc3BhY2U6dGhpcy5pbmZvLm92ZXJsYXkueSksb2Zmc2V0LnRvcCkscmlnaHQ6LU1hdGgubWluKCh0aGlzLmluZm8ucG9zaXRpb249PT1wb3NpdGlvblJpZ2h0P3RoaXMuaW5mby5zcGFjZTp0aGlzLmluZm8ub3ZlcmxheS54KSx0aGlzLiR3aW5kb3cud2lkdGgoKS0ob2Zmc2V0LmxlZnQrdGhpcy5pbml0X3dpZHRoK3RoaXMuZG91YmxlX2JvcmRlcl93aWR0aCkpLGJvdHRvbTotTWF0aC5taW4oKHRoaXMuaW5mby5wb3NpdGlvbj09PSJ0b3AiP3RoaXMuaW5mby5zcGFjZTp0aGlzLmluZm8ub3ZlcmxheS55KSx0aGlzLiR3aW5kb3cuaGVpZ2h0KCktKG9mZnNldC50b3ArdGhpcy5pbml0X2hlaWdodCt0aGlzLmRvdWJsZV9ib3JkZXJfd2lkdGgpKSxsZWZ0Oi1NYXRoLm1pbigodGhpcy5pbmZvLnBvc2l0aW9uPT09cG9zaXRpb25MZWZ0P3RoaXMuaW5mby5zcGFjZTp0aGlzLmluZm8ub3ZlcmxheS54KSxvZmZzZXQubGVmdCksfSk7dGhpcy5wb3NpdGlvbj10aGlzLiRlbC5wb3NpdGlvbigpO3RoaXMuJGVsLmFkZENsYXNzKCJvX2FuaW1hdGVkIik7fSxfYmluZF9hbmNob3JfZXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5jb25zdW1lX2V2ZW50PVRpcC5nZXRDb25zdW1lRXZlbnRUeXBlKHRoaXMuJGFuY2hvcik7dGhpcy4kYW5jaG9yLm9uKHRoaXMuY29uc3VtZV9ldmVudCsiLmFuY2hvciIsKGZ1bmN0aW9uKGUpe2lmKGUudHlwZSE9PSJtb3VzZWRvd24ifHxlLndoaWNoPT09MSl7dGhpcy50cmlnZ2VyKCJ0aXBfY29uc3VtZWQiKTt0aGlzLl91bmJpbmRfYW5jaG9yX2V2ZW50cygpO319KS5iaW5kKHRoaXMpKTt0aGlzLiRhbmNob3Iub24oJ21vdXNlZW50ZXIuYW5jaG9yJyx0aGlzLl90b19pbmZvX21vZGUuYmluZCh0aGlzKSk7dGhpcy4kYW5jaG9yLm9uKCdtb3VzZWxlYXZlLmFuY2hvcicsdGhpcy5fdG9fYnViYmxlX21vZGUuYmluZCh0aGlzKSk7fSxfdW5iaW5kX2FuY2hvcl9ldmVudHM6ZnVuY3Rpb24oKXt0aGlzLiRhbmNob3Iub2ZmKCIuYW5jaG9yIik7fSxfZ2V0X3NwYWNlZF9pbnZlcnRlZF9wb3NpdGlvbjpmdW5jdGlvbihwb3NpdGlvbil7aWYocG9zaXRpb249PT0icmlnaHQiKXJldHVybiJsZWZ0KyIrdGhpcy5pbmZvLnNwYWNlO2lmKHBvc2l0aW9uPT09ImxlZnQiKXJldHVybiJyaWdodC0iK3RoaXMuaW5mby5zcGFjZTtpZihwb3NpdGlvbj09PSJib3R0b20iKXJldHVybiJ0b3ArIit0aGlzLmluZm8uc3BhY2U7cmV0dXJuImJvdHRvbS0iK3RoaXMuaW5mby5zcGFjZTt9LF90b19pbmZvX21vZGU6ZnVuY3Rpb24oZm9yY2Upe2lmKHRoaXMudGltZXJPdXQhPT11bmRlZmluZWQpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyT3V0KTt0aGlzLnRpbWVyT3V0PXVuZGVmaW5lZDtyZXR1cm47fQppZih0aGlzLnRpcF9vcGVuZWQpe3JldHVybjt9CmlmKGZvcmNlPT09dHJ1ZSl7dGhpcy5fYnVpbGRfaW5mb19tb2RlKCk7fWVsc2V7dGhpcy50aW1lckluPXNldFRpbWVvdXQodGhpcy5fYnVpbGRfaW5mb19tb2RlLmJpbmQodGhpcyksMTAwKTt9fSxfYnVpbGRfaW5mb19tb2RlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJJbik7dGhpcy50aW1lckluPXVuZGVmaW5lZDt0aGlzLnRpcF9vcGVuZWQ9dHJ1ZTt2YXIgb2Zmc2V0PXRoaXMuJGVsLm9mZnNldCgpO2lmKHRoaXMuJGVsLnBhcmVudCgpWzBdIT09ZG9jdW1lbnQuYm9keSl7dGhpcy4kZWwuZGV0YWNoKCk7dGhpcy4kZWwuY3NzKG9mZnNldCk7dGhpcy4kZWwuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7fQp2YXIgbWJMZWZ0PTA7dmFyIG1iVG9wPTA7dmFyIG92ZXJmbG93PWZhbHNlO3ZhciBwb3NWZXJ0aWNhbD0odGhpcy5pbmZvLnBvc2l0aW9uPT09InRvcCJ8fHRoaXMuaW5mby5wb3NpdGlvbj09PSJib3R0b20iKTtpZihwb3NWZXJ0aWNhbCl7b3ZlcmZsb3c9KG9mZnNldC5sZWZ0K3RoaXMuY29udGVudF93aWR0aCt0aGlzLmRvdWJsZV9ib3JkZXJfd2lkdGgrdGhpcy5pbmZvLm92ZXJsYXkueD50aGlzLiR3aW5kb3cud2lkdGgoKSk7fWVsc2V7b3ZlcmZsb3c9KG9mZnNldC50b3ArdGhpcy5jb250ZW50X2hlaWdodCt0aGlzLmRvdWJsZV9ib3JkZXJfd2lkdGgrdGhpcy5pbmZvLm92ZXJsYXkueT50aGlzLiR3aW5kb3cuaGVpZ2h0KCkpO30KaWYocG9zVmVydGljYWwmJm92ZXJmbG93fHx0aGlzLmluZm8ucG9zaXRpb249PT0ibGVmdCJ8fChfdC5kYXRhYmFzZS5wYXJhbWV0ZXJzLmRpcmVjdGlvbj09PSdydGwnJiZ0aGlzLmluZm8ucG9zaXRpb249PSJyaWdodCIpKXttYkxlZnQtPSh0aGlzLmNvbnRlbnRfd2lkdGgtdGhpcy5pbml0X3dpZHRoKTt9CmlmKCFwb3NWZXJ0aWNhbCYmb3ZlcmZsb3d8fHRoaXMuaW5mby5wb3NpdGlvbj09PSJ0b3AiKXttYlRvcC09KHRoaXMuY29udGVudF9oZWlnaHQtdGhpcy5pbml0X2hlaWdodCk7fQp0aGlzLiRlbC50b2dnbGVDbGFzcygiaW52ZXJzZSIsb3ZlcmZsb3cpO3RoaXMuJGVsLnJlbW92ZUNsYXNzKCJvX2FuaW1hdGVkIikuYWRkQ2xhc3MoImFjdGl2ZSIpO3RoaXMuJGVsLmNzcyh7d2lkdGg6dGhpcy5jb250ZW50X3dpZHRoLGhlaWdodDp0aGlzLmNvbnRlbnRfaGVpZ2h0LCJtYXJnaW4tbGVmdCI6bWJMZWZ0LCJtYXJnaW4tdG9wIjptYlRvcCx9KTt9LF90b19idWJibGVfbW9kZTpmdW5jdGlvbihmb3JjZSl7aWYodGhpcy50aW1lckluIT09dW5kZWZpbmVkKXtjbGVhclRpbWVvdXQodGhpcy50aW1lckluKTt0aGlzLnRpbWVySW49dW5kZWZpbmVkO3JldHVybjt9CmlmKCF0aGlzLnRpcF9vcGVuZWQpe3JldHVybjt9CmlmKGZvcmNlPT09dHJ1ZSl7dGhpcy5fYnVpbGRfYnViYmxlX21vZGUoKTt9ZWxzZXt0aGlzLnRpbWVyT3V0PXNldFRpbWVvdXQodGhpcy5fYnVpbGRfYnViYmxlX21vZGUuYmluZCh0aGlzKSwzMDApO319LF9idWlsZF9idWJibGVfbW9kZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyT3V0KTt0aGlzLnRpbWVyT3V0PXVuZGVmaW5lZDt0aGlzLnRpcF9vcGVuZWQ9ZmFsc2U7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLmFkZENsYXNzKCJvX2FuaW1hdGVkIik7dGhpcy4kZWwuY3NzKHt3aWR0aDp0aGlzLmluaXRfd2lkdGgsaGVpZ2h0OnRoaXMuaW5pdF9oZWlnaHQsbWFyZ2luOjAsfSk7fSxfb25UaXBDbGlja2VkOmZ1bmN0aW9uKCl7aWYoY29uZmlnLmRldmljZS50b3VjaCYmdGhpcy50aXBfb3BlbmVkKXt0aGlzLl90b19idWJibGVfbW9kZSgpO319LH0pO1RpcC5nZXRDb25zdW1lRXZlbnRUeXBlPWZ1bmN0aW9uKCRlbGVtZW50KXtpZigkZWxlbWVudC5oYXNDbGFzcygnb19maWVsZF9tYW55Mm9uZScpfHwkZWxlbWVudC5oYXNDbGFzcygnb19maWVsZF9tYW55Mm1hbnl0YWdzJykpe3JldHVybidhdXRvY29tcGxldGVzZWxlY3QnO31lbHNlIGlmKCRlbGVtZW50LmlzKCJ0ZXh0YXJlYSIpfHwkZWxlbWVudC5maWx0ZXIoImlucHV0IikuaXMoZnVuY3Rpb24oKXt2YXIgdHlwZT0kKHRoaXMpLmF0dHIoInR5cGUiKTtyZXR1cm4hdHlwZXx8ISF0eXBlLm1hdGNoKC9eKGVtYWlsfG51bWJlcnxwYXNzd29yZHxzZWFyY2h8dGVsfHRleHR8dXJsKSQvKTt9KSl7cmV0dXJuImlucHV0Ijt9CnJldHVybiJjbGljayI7fTtyZXR1cm4gVGlwO30pOzsKCi8qIC93ZWJfdG91ci9zdGF0aWMvc3JjL2pzL3RvdXJfdXRpbHMuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViX3RvdXIudXRpbHMnLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBnZXRfc3RlcF9rZXkobmFtZSl7cmV0dXJuJ3RvdXJfJytuYW1lKydfc3RlcCc7fQpmdW5jdGlvbiBnZXRfcnVubmluZ19rZXkoKXtyZXR1cm4ncnVubmluZ190b3VyJzt9CmZ1bmN0aW9uIGdldF9ydW5uaW5nX2RlbGF5X2tleSgpe3JldHVybiBnZXRfcnVubmluZ19rZXkoKSsiX2RlbGF5Ijt9CmZ1bmN0aW9uIGdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQoJGVsZW1lbnRzKXtmb3IodmFyIGk9MDtpPCRlbGVtZW50cy5sZW5ndGg7aSsrKXt2YXIgJGk9JGVsZW1lbnRzLmVxKGkpO2lmKCRpLmlzKCc6dmlzaWJsZTpoYXNWaXNpYmlsaXR5Jykpe3JldHVybiAkaTt9fQpyZXR1cm4gJCgpO30KZnVuY3Rpb24gZG9fYmVmb3JlX3VubG9hZChpZl91bmxvYWRfY2FsbGJhY2ssaWZfbm90X3VubG9hZF9jYWxsYmFjayl7aWZfdW5sb2FkX2NhbGxiYWNrPWlmX3VubG9hZF9jYWxsYmFja3x8ZnVuY3Rpb24oKXt9O2lmX25vdF91bmxvYWRfY2FsbGJhY2s9aWZfbm90X3VubG9hZF9jYWxsYmFja3x8aWZfdW5sb2FkX2NhbGxiYWNrO3ZhciBvbGRfYmVmb3JlPXdpbmRvdy5vbmJlZm9yZXVubG9hZDt2YXIgcmVsb2FkX3RpbWVvdXQ7d2luZG93Lm9uYmVmb3JldW5sb2FkPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHJlbG9hZF90aW1lb3V0KTt3aW5kb3cub25iZWZvcmV1bmxvYWQ9b2xkX2JlZm9yZTtpZl91bmxvYWRfY2FsbGJhY2soKTtpZihvbGRfYmVmb3JlKXJldHVybiBvbGRfYmVmb3JlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O3JlbG9hZF90aW1lb3V0PV8uZGVmZXIoZnVuY3Rpb24oKXt3aW5kb3cub25iZWZvcmV1bmxvYWQ9b2xkX2JlZm9yZTtpZl9ub3RfdW5sb2FkX2NhbGxiYWNrKCk7fSk7fQpmdW5jdGlvbiBnZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3RvcihzZWxlY3Rvcil7aWYoXy5pc1N0cmluZyhzZWxlY3RvcikmJnNlbGVjdG9yLmluZGV4T2YoJ2lmcmFtZScpIT09LTEpe3ZhciAkaWZyYW1lPSQoc2VsZWN0b3Iuc3BsaXQoJ2lmcmFtZScpWzBdKycgaWZyYW1lJyk7dmFyICRlbD0kaWZyYW1lLmNvbnRlbnRzKCkuZmluZChzZWxlY3Rvci5zcGxpdCgnaWZyYW1lJylbMV0pOyRlbC5pZnJhbWVDb250YWluZXI9JGlmcmFtZVswXTtyZXR1cm4gJGVsO31lbHNle3JldHVybiAkKHNlbGVjdG9yKTt9fQpyZXR1cm57J2dldF9zdGVwX2tleSc6Z2V0X3N0ZXBfa2V5LCdnZXRfcnVubmluZ19rZXknOmdldF9ydW5uaW5nX2tleSwnZ2V0X3J1bm5pbmdfZGVsYXlfa2V5JzpnZXRfcnVubmluZ19kZWxheV9rZXksJ2dldF9maXJzdF92aXNpYmxlX2VsZW1lbnQnOmdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQsJ2RvX2JlZm9yZV91bmxvYWQnOmRvX2JlZm9yZV91bmxvYWQsJ2dldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yJzpnZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3Rvcix9O30pOzsKCi8qIC93ZWJfdG91ci9zdGF0aWMvc3JjL2pzL3J1bm5pbmdfdG91cl9hY3Rpb25faGVscGVyLmpzIGRlZmluZWQgaW4gYnVuZGxlICd3ZWIuYXNzZXRzX2NvbW1vbicgKi8Kb2Rvby5kZWZpbmUoJ3dlYl90b3VyLlJ1bm5pbmdUb3VyQWN0aW9uSGVscGVyJyxmdW5jdGlvbihyZXF1aXJlKXsidXNlIHN0cmljdCI7dmFyIGNvcmU9cmVxdWlyZSgnd2ViLmNvcmUnKTt2YXIgdXRpbHM9cmVxdWlyZSgnd2ViX3RvdXIudXRpbHMnKTt2YXIgVGlwPXJlcXVpcmUoJ3dlYl90b3VyLlRpcCcpO3ZhciBnZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50PXV0aWxzLmdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQ7dmFyIGdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yPXV0aWxzLmdldF9qcXVlcnlfZWxlbWVudF9mcm9tX3NlbGVjdG9yO3ZhciBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcj1jb3JlLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0aXBfd2lkZ2V0KXt0aGlzLnRpcF93aWRnZXQ9dGlwX3dpZGdldDt9LGNsaWNrOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuX2NsaWNrKHRoaXMuX2dldF9hY3Rpb25fdmFsdWVzKGVsZW1lbnQpKTt9LGRibGNsaWNrOmZ1bmN0aW9uKGVsZW1lbnQpe3RoaXMuX2NsaWNrKHRoaXMuX2dldF9hY3Rpb25fdmFsdWVzKGVsZW1lbnQpLDIpO30sdHJpcGxlY2xpY2s6ZnVuY3Rpb24oZWxlbWVudCl7dGhpcy5fY2xpY2sodGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksMyk7fSxjbGlja25vbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCl7dGhpcy5fY2xpY2sodGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksMSxmYWxzZSk7fSx0ZXh0OmZ1bmN0aW9uKHRleHQsZWxlbWVudCl7dGhpcy5fdGV4dCh0aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KSx0ZXh0KTt9LGRyYWdfYW5kX2Ryb3A6ZnVuY3Rpb24odG8sZWxlbWVudCl7dGhpcy5fZHJhZ19hbmRfZHJvcCh0aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KSx0byk7fSxrZXlkb3duOmZ1bmN0aW9uKGtleUNvZGVzLGVsZW1lbnQpe3RoaXMuX2tleWRvd24odGhpcy5fZ2V0X2FjdGlvbl92YWx1ZXMoZWxlbWVudCksa2V5Q29kZXMuc3BsaXQoL1ssXHNdKy8pKTt9LGF1dG86ZnVuY3Rpb24oZWxlbWVudCl7dmFyIHZhbHVlcz10aGlzLl9nZXRfYWN0aW9uX3ZhbHVlcyhlbGVtZW50KTtpZih2YWx1ZXMuY29uc3VtZV9ldmVudD09PSJpbnB1dCIpe3RoaXMuX3RleHQodmFsdWVzKTt9ZWxzZXt0aGlzLl9jbGljayh2YWx1ZXMpO319LF9nZXRfYWN0aW9uX3ZhbHVlczpmdW5jdGlvbihlbGVtZW50KXt2YXIgJGU9Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IoZWxlbWVudCk7dmFyICRlbGVtZW50PWVsZW1lbnQ/Z2V0X2ZpcnN0X3Zpc2libGVfZWxlbWVudCgkZSk6dGhpcy50aXBfd2lkZ2V0LiRhbmNob3I7aWYoJGVsZW1lbnQubGVuZ3RoPT09MCl7JGVsZW1lbnQ9JGUuZmlyc3QoKTt9CnZhciBjb25zdW1lX2V2ZW50PWVsZW1lbnQ/VGlwLmdldENvbnN1bWVFdmVudFR5cGUoJGVsZW1lbnQpOnRoaXMudGlwX3dpZGdldC5jb25zdW1lX2V2ZW50O3JldHVybnskZWxlbWVudDokZWxlbWVudCxjb25zdW1lX2V2ZW50OmNvbnN1bWVfZXZlbnQsfTt9LF9jbGljazpmdW5jdGlvbih2YWx1ZXMsbmIsbGVhdmUpe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJtb3VzZW92ZXIiKTt2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcigibW91c2VlbnRlciIpO2Zvcih2YXIgaT0xO2k8PShuYnx8MSk7aSsrKXt0cmlnZ2VyX21vdXNlX2V2ZW50KHZhbHVlcy4kZWxlbWVudCwibW91c2Vkb3duIik7dHJpZ2dlcl9tb3VzZV9ldmVudCh2YWx1ZXMuJGVsZW1lbnQsIm1vdXNldXAiKTt0cmlnZ2VyX21vdXNlX2V2ZW50KHZhbHVlcy4kZWxlbWVudCwiY2xpY2siLGkpO2lmKGklMj09PTApe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJkYmxjbGljayIpO319CmlmKGxlYXZlIT09ZmFsc2Upe3RyaWdnZXJfbW91c2VfZXZlbnQodmFsdWVzLiRlbGVtZW50LCJtb3VzZW91dCIpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCJtb3VzZWxlYXZlIik7fQpmdW5jdGlvbiB0cmlnZ2VyX21vdXNlX2V2ZW50KCRlbGVtZW50LHR5cGUsY291bnQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpO2UuaW5pdE1vdXNlRXZlbnQodHlwZSx0cnVlLHRydWUsd2luZG93LGNvdW50fHwwLDAsMCwwLDAsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsMCwkZWxlbWVudFswXSk7JGVsZW1lbnRbMF0uZGlzcGF0Y2hFdmVudChlKTt9fSxfdGV4dDpmdW5jdGlvbih2YWx1ZXMsdGV4dCl7dGhpcy5fY2xpY2sodmFsdWVzKTt0ZXh0PXRleHR8fCJUZXN0IjtpZih2YWx1ZXMuY29uc3VtZV9ldmVudD09PSJpbnB1dCIpe3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCJrZXlkb3duIikudmFsKHRleHQpLnRyaWdnZXIoImtleXVwIikudHJpZ2dlcigiaW5wdXQiKTt9ZWxzZSBpZih2YWx1ZXMuJGVsZW1lbnQuaXMoInNlbGVjdCIpKXt2YXIgJG9wdGlvbnM9dmFsdWVzLiRlbGVtZW50LmNoaWxkcmVuKCJvcHRpb24iKTskb3B0aW9ucy5wcm9wKCJzZWxlY3RlZCIsZmFsc2UpLnJlbW92ZVByb3AoInNlbGVjdGVkIik7dmFyICRzZWxlY3RlZE9wdGlvbj0kb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS52YWwoKT09PXRleHQ7fSk7aWYoJHNlbGVjdGVkT3B0aW9uLmxlbmd0aD09PTApeyRzZWxlY3RlZE9wdGlvbj0kb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzKS50ZXh0KCkudHJpbSgpPT09dGV4dDt9KTt9CiRzZWxlY3RlZE9wdGlvbi5wcm9wKCJzZWxlY3RlZCIsdHJ1ZSk7dGhpcy5fY2xpY2sodmFsdWVzKTt9ZWxzZXt2YWx1ZXMuJGVsZW1lbnQuZm9jdXNJbigpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoImtleWRvd24iLHtrZXk6J18nLGtleUNvZGU6OTV9KSk7dmFsdWVzLiRlbGVtZW50LnRleHQodGV4dCkudHJpZ2dlcigiaW5wdXQiKTt2YWx1ZXMuJGVsZW1lbnQuZm9jdXNJbkVuZCgpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoImtleXVwIix7a2V5OidfJyxrZXlDb2RlOjk1fSkpO30KdmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoImNoYW5nZSIpO30sX2RyYWdfYW5kX2Ryb3A6ZnVuY3Rpb24odmFsdWVzLHRvKXt2YXIgJHRvO2lmKHRvKXskdG89Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IodG8pO31lbHNleyR0bz0kKGRvY3VtZW50LmJvZHkpO30KdmFyIGVsZW1lbnRDZW50ZXI9dmFsdWVzLiRlbGVtZW50Lm9mZnNldCgpO2VsZW1lbnRDZW50ZXIubGVmdCs9dmFsdWVzLiRlbGVtZW50Lm91dGVyV2lkdGgoKS8yO2VsZW1lbnRDZW50ZXIudG9wKz12YWx1ZXMuJGVsZW1lbnQub3V0ZXJIZWlnaHQoKS8yO3ZhciB0b0NlbnRlcj0kdG8ub2Zmc2V0KCk7aWYodG8mJnRvLmluZGV4T2YoJ2lmcmFtZScpIT09LTEpe3ZhciBpRnJhbWVPZmZzZXQ9JCgnaWZyYW1lJykub2Zmc2V0KCk7dG9DZW50ZXIubGVmdCs9aUZyYW1lT2Zmc2V0LmxlZnQ7dG9DZW50ZXIudG9wKz1pRnJhbWVPZmZzZXQudG9wO30KdG9DZW50ZXIubGVmdCs9JHRvLm91dGVyV2lkdGgoKS8yO3RvQ2VudGVyLnRvcCs9JHRvLm91dGVySGVpZ2h0KCkvMjt2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcigkLkV2ZW50KCJtb3VzZWVudGVyIikpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoIm1vdXNlZG93biIse3doaWNoOjEscGFnZVg6ZWxlbWVudENlbnRlci5sZWZ0LHBhZ2VZOmVsZW1lbnRDZW50ZXIudG9wfSkpO3ZhbHVlcy4kZWxlbWVudC50cmlnZ2VyKCQuRXZlbnQoIm1vdXNlbW92ZSIse3doaWNoOjEscGFnZVg6dG9DZW50ZXIubGVmdCxwYWdlWTp0b0NlbnRlci50b3B9KSk7dmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoJC5FdmVudCgibW91c2V1cCIse3doaWNoOjEscGFnZVg6dG9DZW50ZXIubGVmdCxwYWdlWTp0b0NlbnRlci50b3B9KSk7fSxfa2V5ZG93bjpmdW5jdGlvbih2YWx1ZXMsa2V5Q29kZXMpe3doaWxlKGtleUNvZGVzLmxlbmd0aCl7dmFyIGtleUNvZGU9K2tleUNvZGVzLnNoaWZ0KCk7dmFsdWVzLiRlbGVtZW50LnRyaWdnZXIoe3R5cGU6ImtleWRvd24iLGtleUNvZGU6a2V5Q29kZX0pO2lmKChrZXlDb2RlPjQ3JiZrZXlDb2RlPDU4KXx8a2V5Q29kZT09PTMyfHwoa2V5Q29kZT42NCYma2V5Q29kZTw5MSl8fChrZXlDb2RlPjk1JiZrZXlDb2RlPDExMil8fChrZXlDb2RlPjE4NSYma2V5Q29kZTwxOTMpfHwoa2V5Q29kZT4yMTgmJmtleUNvZGU8MjIzKSl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoImluc2VydFRleHQiLDAsU3RyaW5nLmZyb21DaGFyQ29kZShrZXlDb2RlKSk7fQp2YWx1ZXMuJGVsZW1lbnQudHJpZ2dlcih7dHlwZToia2V5dXAiLGtleUNvZGU6a2V5Q29kZX0pO319LH0pO3JldHVybiBSdW5uaW5nVG91ckFjdGlvbkhlbHBlcjt9KTs7CgovKiAvd2ViX3RvdXIvc3RhdGljL3NyYy9qcy90b3VyX21hbmFnZXIuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViX3RvdXIuVG91ck1hbmFnZXInLGZ1bmN0aW9uKHJlcXVpcmUpeyJ1c2Ugc3RyaWN0Ijt2YXIgY29yZT1yZXF1aXJlKCd3ZWIuY29yZScpO3ZhciBsb2NhbF9zdG9yYWdlPXJlcXVpcmUoJ3dlYi5sb2NhbF9zdG9yYWdlJyk7dmFyIG1peGlucz1yZXF1aXJlKCd3ZWIubWl4aW5zJyk7dmFyIHV0aWxzPXJlcXVpcmUoJ3dlYl90b3VyLnV0aWxzJyk7dmFyIFJhaW5ib3dNYW49cmVxdWlyZSgnd2ViLlJhaW5ib3dNYW4nKTt2YXIgUnVubmluZ1RvdXJBY3Rpb25IZWxwZXI9cmVxdWlyZSgnd2ViX3RvdXIuUnVubmluZ1RvdXJBY3Rpb25IZWxwZXInKTt2YXIgU2VydmljZXNNaXhpbj1yZXF1aXJlKCd3ZWIuU2VydmljZXNNaXhpbicpO3ZhciBzZXNzaW9uPXJlcXVpcmUoJ3dlYi5zZXNzaW9uJyk7dmFyIFRpcD1yZXF1aXJlKCd3ZWJfdG91ci5UaXAnKTt2YXIgX3Q9Y29yZS5fdDt2YXIgUlVOTklOR19UT1VSX1RJTUVPVVQ9MTAwMDA7dmFyIGdldF9zdGVwX2tleT11dGlscy5nZXRfc3RlcF9rZXk7dmFyIGdldF9ydW5uaW5nX2tleT11dGlscy5nZXRfcnVubmluZ19rZXk7dmFyIGdldF9ydW5uaW5nX2RlbGF5X2tleT11dGlscy5nZXRfcnVubmluZ19kZWxheV9rZXk7dmFyIGdldF9maXJzdF92aXNpYmxlX2VsZW1lbnQ9dXRpbHMuZ2V0X2ZpcnN0X3Zpc2libGVfZWxlbWVudDt2YXIgZG9fYmVmb3JlX3VubG9hZD11dGlscy5kb19iZWZvcmVfdW5sb2FkO3ZhciBnZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3Rvcj11dGlscy5nZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3RvcjtyZXR1cm4gY29yZS5DbGFzcy5leHRlbmQobWl4aW5zLkV2ZW50RGlzcGF0Y2hlck1peGluLFNlcnZpY2VzTWl4aW4se2luaXQ6ZnVuY3Rpb24ocGFyZW50LGNvbnN1bWVkX3RvdXJzKXttaXhpbnMuRXZlbnREaXNwYXRjaGVyTWl4aW4uaW5pdC5jYWxsKHRoaXMpO3RoaXMuc2V0UGFyZW50KHBhcmVudCk7dGhpcy4kYm9keT0kKCdib2R5Jyk7dGhpcy5hY3RpdmVfdG9vbHRpcHM9e307dGhpcy50b3Vycz17fTt0aGlzLmNvbnN1bWVkX3RvdXJzPWNvbnN1bWVkX3RvdXJzfHxbXTt0aGlzLnJ1bm5pbmdfdG91cj1sb2NhbF9zdG9yYWdlLmdldEl0ZW0oZ2V0X3J1bm5pbmdfa2V5KCkpO3RoaXMucnVubmluZ19zdGVwX2RlbGF5PXBhcnNlSW50KGxvY2FsX3N0b3JhZ2UuZ2V0SXRlbShnZXRfcnVubmluZ19kZWxheV9rZXkoKSksMTApfHwwO3RoaXMuZWRpdGlvbj0oXy5sYXN0KHNlc3Npb24uc2VydmVyX3ZlcnNpb25faW5mbyk9PT0nZScpPydlbnRlcnByaXNlJzonY29tbXVuaXR5Jzt0aGlzLl9sb2c9W107Y29uc29sZS5sb2coJ1RvdXIgTWFuYWdlciBpcyByZWFkeS4gIHJ1bm5pbmdfdG91cj0nK3RoaXMucnVubmluZ190b3VyKTt9LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7dmFyIGFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt2YXIgbGFzdF9hcmc9YXJnc1thcmdzLmxlbmd0aC0xXTt2YXIgbmFtZT1hcmdzWzBdO2lmKHRoaXMudG91cnNbbmFtZV0pe2NvbnNvbGUud2FybihfLnN0ci5zcHJpbnRmKCJUb3VyICVzIGlzIGFscmVhZHkgZGVmaW5lZCIsbmFtZSkpO3JldHVybjt9CnZhciBvcHRpb25zPWFyZ3MubGVuZ3RoPT09Mj97fTphcmdzWzFdO3ZhciBzdGVwcz1sYXN0X2FyZyBpbnN0YW5jZW9mIEFycmF5P2xhc3RfYXJnOltsYXN0X2FyZ107dmFyIHRvdXI9e25hbWU6bmFtZSxzdGVwczpzdGVwcyx1cmw6b3B0aW9ucy51cmwscmFpbmJvd01hbjpvcHRpb25zLnJhaW5ib3dNYW49PT11bmRlZmluZWQ/dHJ1ZTohIW9wdGlvbnMucmFpbmJvd01hbix0ZXN0Om9wdGlvbnMudGVzdCx3YWl0X2ZvcjpvcHRpb25zLndhaXRfZm9yfHxQcm9taXNlLnJlc29sdmUoKSx9O2lmKG9wdGlvbnMuc2tpcF9lbmFibGVkKXt0b3VyLnNraXBfbGluaz0nPHA+PHNwYW4gY2xhc3M9Im9fc2tpcF90b3VyIj4nK190KCdTa2lwIHRvdXInKSsnPC9zcGFuPjwvcD4nO3RvdXIuc2tpcF9oYW5kbGVyPWZ1bmN0aW9uKHRpcCl7dGhpcy5fZGVhY3RpdmF0ZV90aXAodGlwKTt0aGlzLl9jb25zdW1lX3RvdXIobmFtZSk7fTt9CnRoaXMudG91cnNbbmFtZV09dG91cjt9LF93YWl0QmVmb3JlVG91clN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpeyQoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHJlc29sdmUpO30pO30pO30sX3JlZ2lzdGVyX2FsbDpmdW5jdGlvbihkb191cGRhdGUpe3ZhciBzZWxmPXRoaXM7aWYodGhpcy5fYWxsUmVnaXN0ZXJlZCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO30KdGhpcy5fYWxsUmVnaXN0ZXJlZD10cnVlO3JldHVybiBzZWxmLl93YWl0QmVmb3JlVG91clN0YXJ0KCkudGhlbihmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLmFsbChfLm1hcChzZWxmLnRvdXJzLGZ1bmN0aW9uKHRvdXIsbmFtZSl7cmV0dXJuIHNlbGYuX3JlZ2lzdGVyKGRvX3VwZGF0ZSx0b3VyLG5hbWUpO30pKTt9KTt9LF9yZWdpc3RlcjpmdW5jdGlvbihkb191cGRhdGUsdG91cixuYW1lKXtpZih0b3VyLnJlYWR5KXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgdG91cl9pc19jb25zdW1lZD1fLmNvbnRhaW5zKHRoaXMuY29uc3VtZWRfdG91cnMsbmFtZSk7cmV0dXJuIHRvdXIud2FpdF9mb3IudGhlbigoZnVuY3Rpb24oKXt0b3VyLmN1cnJlbnRfc3RlcD1wYXJzZUludChsb2NhbF9zdG9yYWdlLmdldEl0ZW0oZ2V0X3N0ZXBfa2V5KG5hbWUpKSl8fDA7dG91ci5zdGVwcz1fLmZpbHRlcih0b3VyLnN0ZXBzLChmdW5jdGlvbihzdGVwKXtyZXR1cm4hc3RlcC5lZGl0aW9ufHxzdGVwLmVkaXRpb249PT10aGlzLmVkaXRpb247fSkuYmluZCh0aGlzKSk7aWYodG91cl9pc19jb25zdW1lZHx8dG91ci5jdXJyZW50X3N0ZXA+PXRvdXIuc3RlcHMubGVuZ3RoKXtsb2NhbF9zdG9yYWdlLnJlbW92ZUl0ZW0oZ2V0X3N0ZXBfa2V5KG5hbWUpKTt0b3VyLmN1cnJlbnRfc3RlcD0wO30KdG91ci5yZWFkeT10cnVlO2lmKGRvX3VwZGF0ZSYmKHRoaXMucnVubmluZ190b3VyPT09bmFtZXx8KCF0aGlzLnJ1bm5pbmdfdG91ciYmIXRvdXIudGVzdCYmIXRvdXJfaXNfY29uc3VtZWQpKSl7dGhpcy5fdG9fbmV4dF9zdGVwKG5hbWUsMCk7dGhpcy51cGRhdGUobmFtZSk7fX0pLmJpbmQodGhpcykpO30scnVuOmZ1bmN0aW9uKHRvdXJfbmFtZSxzdGVwX2RlbGF5KXtjb25zb2xlLmxvZyhfLnN0ci5zcHJpbnRmKCJQcmVwYXJpbmcgdG91ciAlcyIsdG91cl9uYW1lKSk7aWYodGhpcy5ydW5uaW5nX3RvdXIpe3RoaXMuX2RlYWN0aXZhdGVfdGlwKHRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RoaXMucnVubmluZ190b3VyXSk7dGhpcy5fY29uc3VtZV90b3VyKHRoaXMucnVubmluZ190b3VyLF8uc3RyLnNwcmludGYoIktpbGxpbmcgdG91ciAlcyIsdGhpcy5ydW5uaW5nX3RvdXIpKTtyZXR1cm47fQp2YXIgdG91cj10aGlzLnRvdXJzW3RvdXJfbmFtZV07aWYoIXRvdXIpe2NvbnNvbGUud2FybihfLnN0ci5zcHJpbnRmKCJVbmtub3duIFRvdXIgJXMiLG5hbWUpKTtyZXR1cm47fQpjb25zb2xlLmxvZyhfLnN0ci5zcHJpbnRmKCJSdW5uaW5nIHRvdXIgJXMiLHRvdXJfbmFtZSkpO3RoaXMucnVubmluZ190b3VyPXRvdXJfbmFtZTt0aGlzLnJ1bm5pbmdfc3RlcF9kZWxheT1zdGVwX2RlbGF5fHx0aGlzLnJ1bm5pbmdfc3RlcF9kZWxheTtsb2NhbF9zdG9yYWdlLnNldEl0ZW0oZ2V0X3J1bm5pbmdfa2V5KCksdGhpcy5ydW5uaW5nX3RvdXIpO2xvY2FsX3N0b3JhZ2Uuc2V0SXRlbShnZXRfcnVubmluZ19kZWxheV9rZXkoKSx0aGlzLnJ1bm5pbmdfc3RlcF9kZWxheSk7dGhpcy5fZGVhY3RpdmF0ZV90aXAodGhpcy5hY3RpdmVfdG9vbHRpcHNbdG91cl9uYW1lXSk7dG91ci5jdXJyZW50X3N0ZXA9MDt0aGlzLl90b19uZXh0X3N0ZXAodG91cl9uYW1lLDApO2xvY2FsX3N0b3JhZ2Uuc2V0SXRlbShnZXRfc3RlcF9rZXkodG91cl9uYW1lKSx0b3VyLmN1cnJlbnRfc3RlcCk7aWYodG91ci51cmwpe3RoaXMucGF1c2UoKTtkb19iZWZvcmVfdW5sb2FkKG51bGwsKGZ1bmN0aW9uKCl7dGhpcy5wbGF5KCk7dGhpcy51cGRhdGUoKTt9KS5iaW5kKHRoaXMpKTt3aW5kb3cubG9jYXRpb24uaHJlZj13aW5kb3cubG9jYXRpb24ub3JpZ2luK3RvdXIudXJsO31lbHNle3RoaXMudXBkYXRlKCk7fX0scGF1c2U6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlZD10cnVlO30scGxheTpmdW5jdGlvbigpe3RoaXMucGF1c2VkPWZhbHNlO30sdXBkYXRlOmZ1bmN0aW9uKHRvdXJfbmFtZSl7aWYodGhpcy5wYXVzZWQpcmV0dXJuO3RoaXMuJG1vZGFsX2Rpc3BsYXllZD0kKCcubW9kYWw6dmlzaWJsZScpLmxhc3QoKTt0b3VyX25hbWU9dGhpcy5ydW5uaW5nX3RvdXJ8fHRvdXJfbmFtZTtpZih0b3VyX25hbWUpe3ZhciB0b3VyPXRoaXMudG91cnNbdG91cl9uYW1lXTtpZighdG91cnx8IXRvdXIucmVhZHkpcmV0dXJuO2lmKHRoaXMucnVubmluZ190b3VyJiZ0aGlzLnJ1bm5pbmdfdG91cl90aW1lb3V0PT09dW5kZWZpbmVkKXt0aGlzLl9zZXRfcnVubmluZ190b3VyX3RpbWVvdXQodGhpcy5ydW5uaW5nX3RvdXIsdGhpcy5hY3RpdmVfdG9vbHRpcHNbdGhpcy5ydW5uaW5nX3RvdXJdKTt9CnZhciBzZWxmPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3NlbGYuX2NoZWNrX2Zvcl90b29sdGlwKHNlbGYuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV0sdG91cl9uYW1lKTt9KTt9ZWxzZXtmb3IodmFyIHRvdXJOYW1lIGluIHRoaXMuYWN0aXZlX3Rvb2x0aXBzKXt2YXIgdGlwPXRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RvdXJOYW1lXTt2YXIgYWN0aXZhdGVkPXRoaXMuX2NoZWNrX2Zvcl90b29sdGlwKHRpcCx0b3VyTmFtZSk7aWYoYWN0aXZhdGVkKXticmVhazt9fX19LF9jaGVja19mb3JfdG9vbHRpcDpmdW5jdGlvbih0aXAsdG91cl9uYW1lKXtpZih0aXA9PT11bmRlZmluZWQpe3JldHVybiB0cnVlO30KaWYoJCgnYm9keScpLmhhc0NsYXNzKCdvX3VpX2Jsb2NrZWQnKSl7dGhpcy5fZGVhY3RpdmF0ZV90aXAodGlwKTt0aGlzLl9sb2cucHVzaCgiYmxvY2tVSSBpcyBwcmV2ZW50aW5nIHRoZSB0aXAgdG8gYmUgY29uc3VtZWQiKTtyZXR1cm4gZmFsc2U7fQp2YXIgJHRyaWdnZXI7aWYodGlwLmluX21vZGFsIT09ZmFsc2UmJnRoaXMuJG1vZGFsX2Rpc3BsYXllZC5sZW5ndGgpeyR0cmlnZ2VyPXRoaXMuJG1vZGFsX2Rpc3BsYXllZC5maW5kKHRpcC50cmlnZ2VyKTt9ZWxzZXskdHJpZ2dlcj1nZXRfanF1ZXJ5X2VsZW1lbnRfZnJvbV9zZWxlY3Rvcih0aXAudHJpZ2dlcik7fQp2YXIgJHZpc2libGVfdHJpZ2dlcj1nZXRfZmlyc3RfdmlzaWJsZV9lbGVtZW50KCR0cmlnZ2VyKTt2YXIgZXh0cmFfdHJpZ2dlcj10cnVlO3ZhciAkZXh0cmFfdHJpZ2dlcjtpZih0aXAuZXh0cmFfdHJpZ2dlcil7JGV4dHJhX3RyaWdnZXI9Z2V0X2pxdWVyeV9lbGVtZW50X2Zyb21fc2VsZWN0b3IodGlwLmV4dHJhX3RyaWdnZXIpO2V4dHJhX3RyaWdnZXI9Z2V0X2ZpcnN0X3Zpc2libGVfZWxlbWVudCgkZXh0cmFfdHJpZ2dlcikubGVuZ3RoO30KdmFyIHRyaWdnZXJlZD0kdmlzaWJsZV90cmlnZ2VyLmxlbmd0aCYmZXh0cmFfdHJpZ2dlcjtpZih0cmlnZ2VyZWQpe2lmKCF0aXAud2lkZ2V0KXt0aGlzLl9hY3RpdmF0ZV90aXAodGlwLHRvdXJfbmFtZSwkdmlzaWJsZV90cmlnZ2VyKTt9ZWxzZXt0aXAud2lkZ2V0LnVwZGF0ZSgkdmlzaWJsZV90cmlnZ2VyKTt9fWVsc2V7aWYoJHRyaWdnZXIuaWZyYW1lQ29udGFpbmVyfHwoJGV4dHJhX3RyaWdnZXImJiRleHRyYV90cmlnZ2VyLmlmcmFtZUNvbnRhaW5lcikpe3ZhciAkZWw9JCgpO2lmKCR0cmlnZ2VyLmlmcmFtZUNvbnRhaW5lcil7JGVsPSRlbC5hZGQoJHRyaWdnZXIuaWZyYW1lQ29udGFpbmVyKTt9CmlmKCgkZXh0cmFfdHJpZ2dlciYmJGV4dHJhX3RyaWdnZXIuaWZyYW1lQ29udGFpbmVyKSYmJHRyaWdnZXIuaWZyYW1lQ29udGFpbmVyIT09JGV4dHJhX3RyaWdnZXIuaWZyYW1lQ29udGFpbmVyKXskZWw9JGVsLmFkZCgkZXh0cmFfdHJpZ2dlci5pZnJhbWVDb250YWluZXIpO30KdmFyIHNlbGY9dGhpczskZWwub2ZmKCdsb2FkJykub25lKCdsb2FkJyxmdW5jdGlvbigpeyRlbC5vZmYoJ2xvYWQnKTtpZihzZWxmLmFjdGl2ZV90b29sdGlwc1t0b3VyX25hbWVdPT09dGlwKXtzZWxmLnVwZGF0ZSh0b3VyX25hbWUpO319KTt9CnRoaXMuX2RlYWN0aXZhdGVfdGlwKHRpcCk7aWYodGhpcy5ydW5uaW5nX3RvdXI9PT10b3VyX25hbWUpe3RoaXMuX2xvZy5wdXNoKCJfY2hlY2tfZm9yX3Rvb2x0aXAiKTt0aGlzLl9sb2cucHVzaCgiLSBtb2RhbF9kaXNwbGF5ZWQ6ICIrdGhpcy4kbW9kYWxfZGlzcGxheWVkLmxlbmd0aCk7dGhpcy5fbG9nLnB1c2goIi0gdHJpZ2dlciAnIit0aXAudHJpZ2dlcisiJzogIiskdHJpZ2dlci5sZW5ndGgpO3RoaXMuX2xvZy5wdXNoKCItIHZpc2libGUgdHJpZ2dlciAnIit0aXAudHJpZ2dlcisiJzogIiskdmlzaWJsZV90cmlnZ2VyLmxlbmd0aCk7aWYoJGV4dHJhX3RyaWdnZXIhPT11bmRlZmluZWQpe3RoaXMuX2xvZy5wdXNoKCItIGV4dHJhX3RyaWdnZXIgJyIrdGlwLmV4dHJhX3RyaWdnZXIrIic6ICIrJGV4dHJhX3RyaWdnZXIubGVuZ3RoKTt0aGlzLl9sb2cucHVzaCgiLSB2aXNpYmxlIGV4dHJhX3RyaWdnZXIgJyIrdGlwLmV4dHJhX3RyaWdnZXIrIic6ICIrZXh0cmFfdHJpZ2dlcik7fX19CnJldHVybiEhdHJpZ2dlcmVkO30sX2FjdGl2YXRlX3RpcDpmdW5jdGlvbih0aXAsdG91cl9uYW1lLCRhbmNob3Ipe3ZhciB0b3VyPXRoaXMudG91cnNbdG91cl9uYW1lXTt2YXIgdGlwX2luZm89dGlwO2lmKHRvdXIuc2tpcF9saW5rKXt0aXBfaW5mbz1fLmV4dGVuZChfLm9taXQodGlwX2luZm8sJ2NvbnRlbnQnKSx7Y29udGVudDp0aXAuY29udGVudCt0b3VyLnNraXBfbGluayxldmVudF9oYW5kbGVyczpbe2V2ZW50OidjbGljaycsc2VsZWN0b3I6Jy5vX3NraXBfdG91cicsaGFuZGxlcjp0b3VyLnNraXBfaGFuZGxlci5iaW5kKHRoaXMsdGlwKSx9XSx9KTt9CnRpcC53aWRnZXQ9bmV3IFRpcCh0aGlzLHRpcF9pbmZvKTtpZih0aGlzLnJ1bm5pbmdfdG91ciE9PXRvdXJfbmFtZSl7dGlwLndpZGdldC5vbigndGlwX2NvbnN1bWVkJyx0aGlzLHRoaXMuX2NvbnN1bWVfdGlwLmJpbmQodGhpcyx0aXAsdG91cl9uYW1lKSk7fQp0aXAud2lkZ2V0LmF0dGFjaF90bygkYW5jaG9yKS50aGVuKHRoaXMuX3RvX25leHRfcnVubmluZ19zdGVwLmJpbmQodGhpcyx0aXAsdG91cl9uYW1lKSk7fSxfZGVhY3RpdmF0ZV90aXA6ZnVuY3Rpb24odGlwKXtpZih0aXAmJnRpcC53aWRnZXQpe3RpcC53aWRnZXQuZGVzdHJveSgpO2RlbGV0ZSB0aXAud2lkZ2V0O319LF9kZXNjcmliZVRpcDpmdW5jdGlvbih0aXApe3JldHVybiB0aXAuY29udGVudD90aXAuY29udGVudCsnICh0cmlnZ2VyOiAnK3RpcC50cmlnZ2VyKycpJzp0aXAudHJpZ2dlcjt9LF9jb25zdW1lX3RpcDpmdW5jdGlvbih0aXAsdG91cl9uYW1lKXt0aGlzLl9kZWFjdGl2YXRlX3RpcCh0aXApO3RoaXMuX3RvX25leHRfc3RlcCh0b3VyX25hbWUpO3ZhciBpc19ydW5uaW5nPSh0aGlzLnJ1bm5pbmdfdG91cj09PXRvdXJfbmFtZSk7aWYoaXNfcnVubmluZyl7dmFyIHN0ZXBEZXNjcmlwdGlvbj10aGlzLl9kZXNjcmliZVRpcCh0aXApO2NvbnNvbGUubG9nKF8uc3RyLnNwcmludGYoIlRvdXIgJXM6IHN0ZXAgJyVzJyBzdWNjZWVkZWQiLHRvdXJfbmFtZSxzdGVwRGVzY3JpcHRpb24pKTt9CmlmKHRoaXMuYWN0aXZlX3Rvb2x0aXBzW3RvdXJfbmFtZV0pe2xvY2FsX3N0b3JhZ2Uuc2V0SXRlbShnZXRfc3RlcF9rZXkodG91cl9uYW1lKSx0aGlzLnRvdXJzW3RvdXJfbmFtZV0uY3VycmVudF9zdGVwKTtpZihpc19ydW5uaW5nKXt0aGlzLl9sb2c9W107dGhpcy5fc2V0X3J1bm5pbmdfdG91cl90aW1lb3V0KHRvdXJfbmFtZSx0aGlzLmFjdGl2ZV90b29sdGlwc1t0b3VyX25hbWVdKTt9CnRoaXMudXBkYXRlKHRvdXJfbmFtZSk7fWVsc2V7dGhpcy5fY29uc3VtZV90b3VyKHRvdXJfbmFtZSk7fX0sX3RvX25leHRfc3RlcDpmdW5jdGlvbih0b3VyX25hbWUsaW5jKXt2YXIgdG91cj10aGlzLnRvdXJzW3RvdXJfbmFtZV07dG91ci5jdXJyZW50X3N0ZXArPShpbmMhPT11bmRlZmluZWQ/aW5jOjEpO2lmKHRoaXMucnVubmluZ190b3VyIT09dG91cl9uYW1lKXt2YXIgaW5kZXg9Xy5maW5kSW5kZXgodG91ci5zdGVwcy5zbGljZSh0b3VyLmN1cnJlbnRfc3RlcCksZnVuY3Rpb24odGlwKXtyZXR1cm4hdGlwLmF1dG87fSk7aWYoaW5kZXg+PTApe3RvdXIuY3VycmVudF9zdGVwKz1pbmRleDt9ZWxzZXt0b3VyLmN1cnJlbnRfc3RlcD10b3VyLnN0ZXBzLmxlbmd0aDt9fQp0aGlzLmFjdGl2ZV90b29sdGlwc1t0b3VyX25hbWVdPXRvdXIuc3RlcHNbdG91ci5jdXJyZW50X3N0ZXBdO30sX2NvbnN1bWVfdG91cjpmdW5jdGlvbih0b3VyX25hbWUsZXJyb3Ipe2RlbGV0ZSB0aGlzLmFjdGl2ZV90b29sdGlwc1t0b3VyX25hbWVdO2lmKHRoaXMudG91cnNbdG91cl9uYW1lXS5yYWluYm93TWFuJiZ0aGlzLnJ1bm5pbmdfdG91ciE9PXRvdXJfbmFtZSYmdGhpcy50b3Vyc1t0b3VyX25hbWVdLmN1cnJlbnRfc3RlcD09PXRoaXMudG91cnNbdG91cl9uYW1lXS5zdGVwcy5sZW5ndGgpe3ZhciAkcmFpbmJvd19tZXNzYWdlPSQoJzxzdHJvbmc+JysnPGI+R29vZCBqb2IhPC9iPicrJyBZb3Ugd2VudCB0aHJvdWdoIGFsbCBzdGVwcyBvZiB0aGlzIHRvdXIuJysnPC9zdHJvbmc+Jyk7bmV3IFJhaW5ib3dNYW4oe21lc3NhZ2U6JHJhaW5ib3dfbWVzc2FnZX0pLmFwcGVuZFRvKHRoaXMuJGJvZHkpO30KdGhpcy50b3Vyc1t0b3VyX25hbWVdLmN1cnJlbnRfc3RlcD0wO2xvY2FsX3N0b3JhZ2UucmVtb3ZlSXRlbShnZXRfc3RlcF9rZXkodG91cl9uYW1lKSk7aWYodGhpcy5ydW5uaW5nX3RvdXI9PT10b3VyX25hbWUpe3RoaXMuX3N0b3BfcnVubmluZ190b3VyX3RpbWVvdXQoKTtsb2NhbF9zdG9yYWdlLnJlbW92ZUl0ZW0oZ2V0X3J1bm5pbmdfa2V5KCkpO2xvY2FsX3N0b3JhZ2UucmVtb3ZlSXRlbShnZXRfcnVubmluZ19kZWxheV9rZXkoKSk7dGhpcy5ydW5uaW5nX3RvdXI9dW5kZWZpbmVkO3RoaXMucnVubmluZ19zdGVwX2RlbGF5PXVuZGVmaW5lZDtpZihlcnJvcil7Xy5lYWNoKHRoaXMuX2xvZyxmdW5jdGlvbihsb2cpe2NvbnNvbGUubG9nKGxvZyk7fSk7Y29uc29sZS5sb2coZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50Lm91dGVySFRNTCk7Y29uc29sZS5lcnJvcihlcnJvcik7Y29uc29sZS5lcnJvcigidGVzdCBmYWlsZWQiKTt9ZWxzZXtjb25zb2xlLmxvZyhfLnN0ci5zcHJpbnRmKCJUb3VyICVzIHN1Y2NlZWRlZCIsdG91cl9uYW1lKSk7Y29uc29sZS5sb2coInRlc3Qgc3VjY2Vzc2Z1bCIpO30KdGhpcy5fbG9nPVtdO31lbHNle3ZhciBzZWxmPXRoaXM7dGhpcy5fcnBjKHttb2RlbDond2ViX3RvdXIudG91cicsbWV0aG9kOidjb25zdW1lJyxhcmdzOltbdG91cl9uYW1lXV0sfSkudGhlbihmdW5jdGlvbigpe3NlbGYuY29uc3VtZWRfdG91cnMucHVzaCh0b3VyX25hbWUpO30pO319LF9zZXRfcnVubmluZ190b3VyX3RpbWVvdXQ6ZnVuY3Rpb24odG91cl9uYW1lLHN0ZXApe3RoaXMuX3N0b3BfcnVubmluZ190b3VyX3RpbWVvdXQoKTt0aGlzLnJ1bm5pbmdfdG91cl90aW1lb3V0PXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIGRlc2NyPXRoaXMuX2Rlc2NyaWJlVGlwKHN0ZXApO3RoaXMuX2NvbnN1bWVfdG91cih0b3VyX25hbWUsXy5zdHIuc3ByaW50ZigiVG91ciAlcyBmYWlsZWQgYXQgc3RlcCAlcyIsdG91cl9uYW1lLGRlc2NyKSk7fSkuYmluZCh0aGlzKSwoc3RlcC50aW1lb3V0fHxSVU5OSU5HX1RPVVJfVElNRU9VVCkrdGhpcy5ydW5uaW5nX3N0ZXBfZGVsYXkpO30sX3N0b3BfcnVubmluZ190b3VyX3RpbWVvdXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5ydW5uaW5nX3RvdXJfdGltZW91dCk7dGhpcy5ydW5uaW5nX3RvdXJfdGltZW91dD11bmRlZmluZWQ7fSxfdG9fbmV4dF9ydW5uaW5nX3N0ZXA6ZnVuY3Rpb24odGlwLHRvdXJfbmFtZSl7aWYodGhpcy5ydW5uaW5nX3RvdXIhPT10b3VyX25hbWUpcmV0dXJuO3ZhciBzZWxmPXRoaXM7dGhpcy5fc3RvcF9ydW5uaW5nX3RvdXJfdGltZW91dCgpO2lmKHRoaXMucnVubmluZ19zdGVwX2RlbGF5KXtfLmRlbGF5KGV4ZWMsdGhpcy5ydW5uaW5nX3N0ZXBfZGVsYXkpO31lbHNle2V4ZWMoKTt9CmZ1bmN0aW9uIGV4ZWMoKXt2YXIgYWN0aW9uX2hlbHBlcj1uZXcgUnVubmluZ1RvdXJBY3Rpb25IZWxwZXIodGlwLndpZGdldCk7ZG9fYmVmb3JlX3VubG9hZChzZWxmLl9jb25zdW1lX3RpcC5iaW5kKHNlbGYsdGlwLHRvdXJfbmFtZSkpO2lmKHR5cGVvZiB0aXAucnVuPT09ImZ1bmN0aW9uIil7dGlwLnJ1bi5jYWxsKHRpcC53aWRnZXQsYWN0aW9uX2hlbHBlcik7fWVsc2UgaWYodGlwLnJ1biE9PXVuZGVmaW5lZCl7dmFyIG09dGlwLnJ1bi5tYXRjaCgvXihbYS16QS1aMC05X10rKSAqKD86XCg/ICooLis/KSAqXCk/KT8kLyk7YWN0aW9uX2hlbHBlclttWzFdXShtWzJdKTt9ZWxzZXthY3Rpb25faGVscGVyLmF1dG8oKTt9fX0sU1RFUFM6e1NIT1dfQVBQU19NRU5VX0lURU06e2VkaXRpb246J2NvbW11bml0eScsdHJpZ2dlcjonLm9fbWVudV9hcHBzIGEnLGF1dG86dHJ1ZSxwb3NpdGlvbjoiYm90dG9tIix9LFRPR0dMRV9IT01FX01FTlU6e2VkaXRpb246ImVudGVycHJpc2UiLHRyaWdnZXI6Ii5vX21haW5fbmF2YmFyIC5vX21lbnVfdG9nZ2xlIixjb250ZW50Ol90KCdDbGljayBvbiB0aGUgPGk+SG9tZSBpY29uPC9pPiB0byBuYXZpZ2F0ZSBhY3Jvc3MgYXBwcy4nKSxwb3NpdGlvbjoiYm90dG9tIix9LFdFQlNJVEVfTkVXX1BBR0U6e3RyaWdnZXI6IiNuZXctY29udGVudC1tZW51ID4gYSIsYXV0bzp0cnVlLHBvc2l0aW9uOiJib3R0b20iLH0sfSx9KTt9KTs7CgovKiAvd2ViX3RvdXIvc3RhdGljL3NyYy9qcy90b3VyX3NlcnZpY2UuanMgZGVmaW5lZCBpbiBidW5kbGUgJ3dlYi5hc3NldHNfY29tbW9uJyAqLwpvZG9vLmRlZmluZSgnd2ViX3RvdXIudG91cicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBjb25maWc9cmVxdWlyZSgnd2ViLmNvbmZpZycpO3ZhciByb290V2lkZ2V0PXJlcXVpcmUoJ3Jvb3Qud2lkZ2V0Jyk7dmFyIHJwYz1yZXF1aXJlKCd3ZWIucnBjJyk7dmFyIHNlc3Npb249cmVxdWlyZSgnd2ViLnNlc3Npb24nKTt2YXIgVG91ck1hbmFnZXI9cmVxdWlyZSgnd2ViX3RvdXIuVG91ck1hbmFnZXInKTtpZihjb25maWcuZGV2aWNlLmlzTW9iaWxlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt9CnJldHVybiBzZXNzaW9uLmlzX2JvdW5kLnRoZW4oZnVuY3Rpb24oKXt2YXIgZGVmcz1bXTtpZihzZXNzaW9uLmlzX2Zyb250ZW5kJiZzZXNzaW9uLmlzX2FkbWluKXt2YXIgZGVmPXJwYy5xdWVyeSh7bW9kZWw6J3dlYl90b3VyLnRvdXInLG1ldGhvZDonZ2V0X2NvbnN1bWVkX3RvdXJzJyx9KTtkZWZzLnB1c2goZGVmKTt9CnJldHVybiBQcm9taXNlLmFsbChkZWZzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpe3ZhciBjb25zdW1lZF90b3Vycz1zZXNzaW9uLmlzX2Zyb250ZW5kP3Jlc3VsdHNbMF06c2Vzc2lvbi53ZWJfdG91cnM7dmFyIHRvdXJfbWFuYWdlcj1uZXcgVG91ck1hbmFnZXIocm9vdFdpZGdldCxjb25zdW1lZF90b3Vycyk7dmFyIHVudHJhY2tlZF9jbGFzc25hbWVzPVsib190b29sdGlwIiwib190b29sdGlwX2NvbnRlbnQiLCJvX3Rvb2x0aXBfb3ZlcmxheSJdO3ZhciBjaGVja190b29sdGlwPV8uZGVib3VuY2UoZnVuY3Rpb24ocmVjb3Jkcyl7dmFyIHVwZGF0ZT1fLnNvbWUocmVjb3JkcyxmdW5jdGlvbihyZWNvcmQpe3JldHVybiEoaXNfdW50cmFja2VkKHJlY29yZC50YXJnZXQpfHxfLnNvbWUocmVjb3JkLmFkZGVkTm9kZXMsaXNfdW50cmFja2VkKXx8Xy5zb21lKHJlY29yZC5yZW1vdmVkTm9kZXMsaXNfdW50cmFja2VkKSk7ZnVuY3Rpb24gaXNfdW50cmFja2VkKG5vZGUpe3ZhciByZWNvcmRfY2xhc3M9bm9kZS5jbGFzc05hbWU7cmV0dXJuKF8uaXNTdHJpbmcocmVjb3JkX2NsYXNzKSYmXy5pbnRlcnNlY3Rpb24ocmVjb3JkX2NsYXNzLnNwbGl0KCcgJyksdW50cmFja2VkX2NsYXNzbmFtZXMpLmxlbmd0aCE9PTApO319KTtpZih1cGRhdGUpe3RvdXJfbWFuYWdlci51cGRhdGUoKTt9fSw1MDApO3ZhciBvYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcihjaGVja190b29sdGlwKTt2YXIgc3RhcnRfc2VydmljZT0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24ob2JzZXJ2ZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt0b3VyX21hbmFnZXIuX3JlZ2lzdGVyX2FsbChvYnNlcnZlKS50aGVuKGZ1bmN0aW9uKCl7aWYob2JzZXJ2ZSl7b2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHthdHRyaWJ1dGVzOnRydWUsY2hpbGRMaXN0OnRydWUsc3VidHJlZTp0cnVlLH0pO30KcmVzb2x2ZSgpO30pO30pO307fSkoKTtzdGFydF9zZXJ2aWNlKHNlc3Npb24uaXNfYWRtaW58fHRvdXJfbWFuYWdlci5ydW5uaW5nX3RvdXIpO2lmKCFzZXNzaW9uLmlzX2FkbWluKXt2YXIgcnVuPXRvdXJfbWFuYWdlci5ydW47dG91cl9tYW5hZ2VyLnJ1bj1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIGFyZ3M9YXJndW1lbnRzO3N0YXJ0X3NlcnZpY2UodHJ1ZSkudGhlbihmdW5jdGlvbigpe3J1bi5hcHBseShzZWxmLGFyZ3MpO2lmKCFzZWxmLnJ1bm5pbmdfdG91cil7b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO319KTt9O3ZhciBfY29uc3VtZV90b3VyPXRvdXJfbWFuYWdlci5fY29uc3VtZV90b3VyO3RvdXJfbWFuYWdlci5fY29uc3VtZV90b3VyPWZ1bmN0aW9uKCl7X2NvbnN1bWVfdG91ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO307fQpvZG9vLnN0YXJ0VG91cj10b3VyX21hbmFnZXIucnVuLmJpbmQodG91cl9tYW5hZ2VyKTtyZXR1cm4gdG91cl9tYW5hZ2VyO30pO30pO30pOzsKCi8qIC93ZWJfdG91ci9zdGF0aWMvc3JjL2pzL3RvdXJfZGlzYWJsZS5qcyBkZWZpbmVkIGluIGJ1bmRsZSAnd2ViLmFzc2V0c19jb21tb24nICovCm9kb28uZGVmaW5lKCd3ZWJfdG91ci5EaXNhYmxlVG91cicsZnVuY3Rpb24ocmVxdWlyZSl7InVzZSBzdHJpY3QiO3ZhciBUb3VyTWFuYWdlcj1yZXF1aXJlKCd3ZWJfdG91ci5Ub3VyTWFuYWdlcicpO1RvdXJNYW5hZ2VyLmluY2x1ZGUoe19yZWdpc3RlcjpmdW5jdGlvbihkb191cGRhdGUsdG91cixuYW1lKXtpZighdGhpcy5ydW5uaW5nX3RvdXIpe3RoaXMuY29uc3VtZWRfdG91cnMucHVzaChuYW1lKTt9CnJldHVybiB0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fSx9KTt9KTs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>